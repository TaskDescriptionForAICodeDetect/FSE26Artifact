In a rectangular garden of width W meters and height H meters, roses are grown in blocks divided into 1 meter square sections. Some blocks have roses indicated by '#' and some do not, indicated by '.'. The roses form a single entity that connects through adjacent blocks. The goal is for Mami to fire a powerful attack that can split this entity into as many parts as possible by determining the maximum number of parts it can be divided into with a straight line. The input consists of the garden's dimensions H and W followed by the state of each block. The output should be the maximum number of parts the entity can be split into.