Write a program to evaluate expressions in the programming language Shipura, which supports the binary operator '>>' and the unary function 'S'. The operator 'x >> y' is evaluated as the floor of x divided by 2 raised to the power of y, and 'S' computes x squared modulo 1,000,000,007. The provided syntax in BNF defines how these expressions are structured, and the program must read a sequence of valid Shipura expressions until a line containing a single '#' indicates the end of input. For each expression, the program should output the evaluated result.