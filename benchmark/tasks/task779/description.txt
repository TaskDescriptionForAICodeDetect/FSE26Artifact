There are N squares numbered from 1 to N, each containing a character. Initially, there is one golem on each square. Snuke casts Q spells to move the golems based on specified characters and directions. For each character, golems on that square move left or right. If a golem moves left from the first square or right from the last square, it disappears. The task is to find the total number of golems remaining after all spells have been cast.