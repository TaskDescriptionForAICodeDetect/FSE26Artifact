In Izua village's sports gym, there are N training machines numbered from 1 to N. To use a machine, one ticket is required, and each machine has a defined calorie consumption when used. A user, Atsushi, wants to use his tickets to maximize calorie burn while adhering to usage rules which limit how many times one machine can be used compared to another. Your task is to create a program that determines the maximum calories that can be burned while following the stated rules.