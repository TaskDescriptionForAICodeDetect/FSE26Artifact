In a city plagued by ghosts, there is a girl who fights these evil spirits. During the day, she attends high school, but at night she roams the streets, seeking out lost souls to help them find peace. To do this, she must get close to the ghosts, which can pass through walls and various obstacles. The girl can only move on the grid squares where both she and the ghost can walk, represented by '.' for open paths and '#' for ghost-only areas. The ghost has a repeating movement pattern given as a string of commands, and the girl can move in one of five possible directions: north, south, east, west, or stay in place. Your task is to write a program that determines the earliest time and location where the girl can encounter the ghost, given multiple datasets of the grid data and ghost movement patterns. If they cannot encounter each other, output 'impossible'.