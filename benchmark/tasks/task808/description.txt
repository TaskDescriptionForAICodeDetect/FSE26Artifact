Given a tree with N vertices, numbered from 1 to N, where each edge connects two vertices x_i and y_i, you need to paint each vertex either white or black such that any black vertex is reachable from any other black vertex exclusively through black vertices. For a given positive integer M, for each vertex v (1 ≤ v ≤ N), find the number of ways to paint the remaining vertices assuming vertex v is black, and return the result modulo M.