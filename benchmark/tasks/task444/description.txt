You need to escape from a two-floor labyrinth represented as a grid map. The grid contains walls, stairs, and grids either on the first or second floor. Some grids have switches that allow for movement between floors. Determine the minimum steps required to escape to the exit from the starting position, considering the allowed movements and switch operations. If escape is not possible, return -1.