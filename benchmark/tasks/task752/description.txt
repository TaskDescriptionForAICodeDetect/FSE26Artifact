There is a blackboard on which all integers from -10^18 through 10^18 are written, each appearing once. Takahashi can perform the following operations any number of times (including zero): choose an integer between 1 and N (inclusive) from the blackboard, erase this integer x, and then write x-2 if it is not already on the board, and write x+K if it is not already on the board. The task is to determine the number of possible sets of integers on the blackboard after some operations, modulo M. Two sets are different if there exists an integer contained in only one of the sets.