In the year 20XX, to prevent the invasion of a sudden enemy, humanity built a wall and escaped inside it. As a result, human activity is confined to the area enclosed by this wall, which appears as a rectangle W x H from above. Within this area, there are several walls parallel to the x-axis or y-axis. Humanity can move freely within the activity area, but crossing walls requires a certain amount of resources. However, the following actions are not allowed: crossing at the intersection of walls (2), moving on walls or the boundaries of the activity area (3), and exiting the activity area (4). Your task is to create a program that calculates the minimum number of walls that must be crossed to move from a starting point to an ending point based on the walls' information inside the area. Assume walls are treated as widthless line segments.