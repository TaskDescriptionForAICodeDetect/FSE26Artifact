Takahashi is playing with N cards. Each card has an integer written on it. He wants to create as many pairs of cards as possible based on two conditions: either the integers on the two cards are the same, or the sum of the integers on the two cards is a multiple of M. Your task is to find the maximum number of pairs that can be formed, ensuring that no card is used in more than one pair.