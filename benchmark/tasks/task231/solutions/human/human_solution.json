[
  {
    "language": "Scala",
    "code": "object Main {\n  def solve(result: Array[Array[Int]]): (Array[Int], Array[Boolean]) = {\n    val rank = result.map(res => res.map(s => (if (s != -1) 1 else 0)).sum)\n    val time = result.map(_.sum)\n    val ret = rank.zipWithIndex.sortWith((p, q) => {\n      if (p._1 == q._1)\n        if (time(p._2) == time(q._2)) p._2 > q._2\n        else time(p._2) < time(q._2)\n      else p._1 > q._1\n    }).map(p => p._2 + 1)\n    val eq = ret.init.zip(ret.tail).map(p =>\n      rank(p._1 - 1) == rank(p._2 - 1) && time(p._1 - 1) == time(p._2 - 1))\n    (ret, eq)\n  }\n\n  def main(args:Array[String]) = {\n    val sc = new java.util.Scanner(System.in)\n    var f = true\n    while(f) {\n      val m, t, p, r = sc.nextInt\n      if(m == 0 && t == 0 && p == 0 && r == 0) f = false\n      else {\n        val result = Array.fill[Int](t, p)(-1)\n        val penalty = Array.ofDim[Int](t, p)\n        for(_ <- 1 to r) {\n          val mm, tt, pp, j = sc.nextInt\n          if (j == 0) result(tt - 1)(pp - 1) = mm + penalty(tt - 1)(pp - 1) * 20\n          else penalty(tt - 1)(pp - 1) += 1\n        }\n        val (rank, eq) = solve(result)\n        rank.init.zip(eq).foreach( x => if (x._2) print (x._1 + \"=\")\n                                        else print (x._1 + \",\"))\n        println(rank.last)\n      }\n    }\n  }\n}"
  },
  {
    "language": "Scala",
    "code": "import scala.io.StdIn.{readLine,readInt}\n\nobject Main {\n  def main(args:Array[String]) = {\n    var s = \"\"\n    while({ s = readLine; s.trim } != \"0 0 0 0\") {\n      val n = s.split(\" \").map(_.toInt)\n      val m = n(0);val t = n(1);val p = n(2); val r = n(3)\n      val team = new Array[(Int,Int)](t)\n      val tdata = (for(i<-0 until t) yield {\n        (for(j<-0 until p) yield {\n          (0,0,0) // (??????,??£?§£?????????,?????£?§£??°)\n        }).toArray\n      }).toArray\n\n      for(i<-0 until r) {\n        val s = readLine.split(\" \").map(_.toInt)\n        val data = tdata(s(1)-1)(s(2)-1)\n        tdata(s(1)-1)(s(2)-1) = (if(s(3)==0) s(0) else 0,if(s(3)==0) 1 else 0,if(s(3)!=0) data._3+\\\n1 else data._3)\n      }\n      for(i<-0 until t) {\n        val data = tdata(i)\n        var success = 0\n        var time = 0\n        for(j<-0 until data.length) {\n          if(data(j)._2 == 1) {\n            success += 1\n            time += data(j)._1 + data(j)._3*20\n          }\n        }\n        team(i) = (success, time)\n      }\n\n      val sorted = team.zipWithIndex.sortWith{(x,y) =>\n        if(x._1._1>y._1._1) true\n        else if(x._1._1==y._1._1 && x._1._2<y._1._2) true\n        else if(x._1._1 == y._1._1 && x._1._2 == y._1._2 && x._2 > y._2) true\n        else false\n      }\n      var prevCnt = sorted(0)._1._1\n      var prevTime = sorted(0)._1._2\n      print(sorted(0)._2+1)\n      for(i<-1 until sorted.length) {\n        if(prevCnt == sorted(i)._1._1 && prevTime == sorted(i)._1._2) print(\"=\")\n        else print(\",\")\n        print(sorted(i)._2+1)\n        prevCnt = sorted(i)._1._1\n        prevTime = sorted(i)._1._2\n      }\n      println\n    }\n  }\n}"
  },
  {
    "language": "Scala",
    "code": "import scala.io.StdIn.{readLine,readInt}\n\nobject Main {\n  def main(args:Array[String]) = {\n    var s = \"\"\n    while({ s = readLine; s.trim } != \"0 0 0 0\") {\n      val n = s.split(\" \").map(_.toInt)\n      val m = n(0);val t = n(1);val p = n(2); val r = n(3)\n      val team = new Array[(Int,Int)](t)\n      val tdata = (for(i<-0 until t) yield {\n        (for(j<-0 until p) yield {\n          (0,0,0) // (??????,??£?§£?????????,?????£?§£??°)\n        }).toArray\n      }).toArray\n\n      for(i<-0 until r) {\n        val s = readLine.split(\" \").map(_.toInt)\n        val data = tdata(s(1)-1)(s(2)-1)\n        tdata(s(1)-1)(s(2)-1) = (if(s(3)==0) s(0) else 0,if(s(3)==0) 1 else 0,if(s(3)!=0) data._3+1 else data._3)\n      }\n      for(i<-0 until t) {\n        val data = tdata(i)\n        var success = 0\n        var time = 0\n        for(j<-0 until data.length) {\n          if(data(j)._2 == 1) {\n            success += 1\n            time += data(j)._1 + data(j)._3*20\n          }\n        }\n        team(i) = (success, time)\n      }\n\n      val sorted = team.zipWithIndex.sortWith{(x,y) =>\n        if(x._1._1>y._1._1) true\n        else if(x._1._1==y._1._1 && x._1._2<y._1._2) true\n        else if(x._1._1 == y._1._1 && x._1._2 == y._1._2 && x._2 > y._2) true\n        else false\n      }\n      var prevCnt = sorted(0)._1._1\n      var prevTime = sorted(0)._1._2\n      print(sorted(0)._2+1)\n      for(i<-1 until sorted.length) {\n        if(prevCnt == sorted(i)._1._1 && prevTime == sorted(i)._1._2) print(\"=\")\n        else print(\",\")\n        print(sorted(i)._2+1)\n        prevCnt = sorted(i)._1._1\n        prevTime = sorted(i)._1._2\n      }\n      println\n    }\n  }\n}"
  },
  {
    "language": "Scala",
    "code": "object Main {\n  def solve(result: Array[Array[Int]]): (Array[Int], Array[Boolean]) = {\n    val rank = result.map(res => res.map(s => (if (s != -1) 1 else 0)).sum)\n    val time = result.map(_.sum)\n    val ret = rank.zipWithIndex.sortWith((p, q) =>\n      (if (p._1 == q._1)\n        if (time(p._2) == time(q._2)) p._2 > q._2\n        else time(p._2) < time(q._2)\n       else p._1 > q._1)).map(p => p._2 + 1)\n    val eq = ret.init.zip(ret.tail).map(p =>\n      rank(p._1 - 1) == rank(p._2 - 1) && time(p._1 - 1) == time(p._2 - 1))\n    (ret, eq)\n  }\n\n  def main(args:Array[String]) = {\n    val sc = new java.util.Scanner(System.in)\n    var f = true\n    while(f) {\n      val m, t, p, r = sc.nextInt\n      if(m == 0 && t == 0 && p == 0 && r == 0) f = false\n      else {\n        val result = Array.fill[Int](t, p)(-1)\n        val penalty = Array.ofDim[Int](t, p)\n        for(_ <- 1 to r) {\n          val mm, tt, pp, j = sc.nextInt\n          if (j == 0) result(tt - 1)(pp - 1) = mm + penalty(tt - 1)(pp - 1) * 20\n          else penalty(tt - 1)(pp - 1) += 1\n        }\n        val (rank, eq) = solve(result)\n        rank.init.zip(eq).foreach( x => if (x._2) print (x._1 + \"=\")\n                                        else print (x._1 + \",\"))\n        println(rank.last)\n      }\n    }\n  }\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\nusing namespace std;\n\nint main(){\n while(true){\n  int M, T, P, R;\n  cin >> M >> T >> P >> R;\n\n  if(M==0 && T==0 && P==0 && R==0) break;\n\n  int CP[T],  TT[T],  PT[T][P]; //正解数、時間計、ペナルティ\n  for(int i=0; i<T; i++){\n   CP[i] = TT[i] = 0;\n   for(int j=0; j<P; j++){\n    PT[i][j] = 0;\n   }\n  }\n\n  for(int i=0; i<R; i++){ //各チームの正解数、時間計を求める\n   int m, t, p, j;\n   cin >> m >> t >> p >> j;\n   \n   if(j==0){ //正解\n    CP[t-1]++;\n    TT[t-1] += (m+PT[t-1][p-1]);\n   }else{ //不正解\n    PT[t-1][p-1] += 20;\n   }\n  }\n\n   int t_now, t_pre = -1; //今のチーム、1つ前のチーム\n   bool flag[50]; //処理済みフラグ\n   for(int i=0; i<T; i++){\n    flag[i] = false;\n   }\n   \n   for(int i=0; i<T; i++){\n    t_now = -1;\n    for(int j=0; j<T; j++){ //今のチームを求める\n     if(flag[j]) continue;\n     if(t_now==-1){\n      t_now = j;\n     }else{\n      if(CP[j]>CP[t_now] || (CP[j]==CP[t_now] && TT[j]<=TT[t_now])){\n       t_now = j;\n      }\n     }\n    }\n\n    if(t_pre!=-1){\n     if(CP[t_now]==CP[t_pre] && TT[t_now]==TT[t_pre]){\n      cout << '=';\n     }else{\n      cout << ', ';\n     }\n    }\n    cout<<t_now+1;\n\n    flag[t_now] = true;\n    t_pre = t_now;\n   }\n   cout << endl;\n  }\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include<string>\n#include<cmath>\n#include<algorithm>\n#include<cctype>\n#include<queue>\n#include<deque>\n#include<regex>\n#include<stack>\n#include<stdio.h>\n#include<vector>\n#include<set>\n#include<map>\n#include<iomanip>\nusing namespace std;\n#define rep(i,n) for(int i=0;i<n;i++)\ntypedef int long long ll;\n\n\nint main() {\n\n    int ti[50];\n    int ta[50];\n    int wa[50][10];\n    while(true){\n        int m,t,p,r;\n        cin>>m>>t>>p>>r;\n        if(m==0&&t==0&&p==0&&r==0)break;\n        rep(i,50){ti[i]=0;ta[i]=0;}\n        rep(i,50){rep(j,10){wa[i][j]=0;}}\n        rep(rr,r){\n            int time,team,pron,han;\n            cin>>time>>team>>pron>>han;\n            if(han!=0){\n                wa[team-1][pron-1]++;\n            }else{\n                int k=wa[team-1][pron-1];\n                wa[team-1][pron-1]=0;\n                ti[team-1]++;\n                ta[team-1]+=k*20+time;\n            }\n        }\n\n        vector<tuple<int,int,int>> zyun;\n        //vector<pair<int,int>> zyuni;\n        rep(i,t){\n            zyun.emplace_back(ti[i],-ta[i],i+1);\n           // zyuni.push_back({ti[i],-ta[i]});\n        }\n\n        sort(zyun.rbegin(),zyun.rend());\n        for(int i=0;i<zyun.size()-1;i++){\n\n\n            if(get<0>(zyun[i+1]) < get<0>(zyun[i])){\n                cout<<get<2>(zyun[i])<<\",\";\n            }else if( get<0>(zyun[i+1])==get<0>(zyun[i])&&get<1>(zyun[i])>get<1>(zyun[i+1])){\n                    cout<<get<2>(zyun[i])<<\",\";\n            }else{\n                cout<<get<2>(zyun[i])<<\"=\";\n            }\n        }\n        cout<<get<2>(zyun[zyun.size()-1])<<endl;\n    }\n\n\n\n\n\n\n    return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n#define REP(i, a, n) for(int i = (a); i <= (n); i++)\nusing namespace std;\ntypedef pair<int, int> PII;\n\nint M, T, P, R, m, t, p, j, q[51][11];\nPII s[51];\n\nint main(void) {\n  while(cin >> M >> T >> P >> R, M || T || P || R) {\n    REP(i, 1, T) {\n      s[i] = PII(P, 0);\n      REP(j, 1, P) q[i][j] = 0;\n    }\n\n    REP(i, 1, R) {\n      cin >> m >> t >> p >> j;\n      if(j == 0) {\n        if(q[t][p] >= 0) {\n          s[t].first--;\n          s[t].second += q[t][p] * 20 + m;\n        }\n      } else {\n        q[t][p]++;\n      }\n    }\n\n    REP(i, 1, T) {\n      s[i].first = s[i].first * 100000000 + s[i].second;\n      s[i].second = T - i;\n    }\n    sort(s + 1, s + T + 1);\n    REP(i, 1, T) {\n      cout << (T - s[i].second);\n      if(i < T) cout << (s[i].first == s[i + 1].first ? '=' : ',');\n    }\n    cout << endl;\n  }\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\n#include<utility>\n#include<vector>\n\nusing namespace std;\n\nbool cmp(pair<int,pair<int,int>> lhs, pair<int,pair<int,int>> rhs){\n    if (lhs.second.first!=rhs.second.first){\n        return lhs.second.first>rhs.second.first;\n    } else if (lhs.second.second!=rhs.second.second){\n        return lhs.second.second<rhs.second.second;\n    } else {\n        return lhs.first>rhs.first;\n    }\n}\n\nbool equiv(pair<int,int> l, pair<int,int> r){\n    return (l.first == r.first && l.second == r.second);\n}\n\nint main(){\n    int M,T,P,R;\n    int m,t,p,j;\n    while(1){\n        cin >> M >> T >> P >> R;\n        if (M*M+T*T+P*P+R*R==0) return 0;\n        vector<pair<int,pair<int,int>>> point(T,make_pair(0,make_pair(0,0))); //??£?§£??°,????????????????¨?\n        vector<vector<int>> bad(T,vector<int>(P,0));\n        for(int i=0;i<T;i++){\n            point[i].first=i+1;\n        }\n        for(int i=0;i<R;i++) {\n            cin >> m >> t >> p >> j;\n            if (j==0){ //??£?§£\n                point[t-1].second.first++;\n                point[t-1].second.second += m;\n                point[t-1].second.second += 20 * bad[t-1][p-1];\n            } else {\n                bad[t-1][p-1]++;\n            }\n        }\n        sort(point.begin(),point.end(),cmp);\n        for(int i=0;i<T;i++) {\n            if (i==0) cout << point[i].first;\n            else {\n                if (equiv(point[i].second,point[i-1].second)) cout << \"=\";\n                else cout << \",\";\n                cout << point[i].first;\n            }\n        }\n        cout << endl;\n    }\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n#define int\t\t\t\tlong long\n#define FOR( i, m, n )  for( int (i) = (m); (i) < (n); (i)++ )\n#define FORE( i, m, n ) FOR( i, m , n + 1 )\n#define REP( i, n )     FOR( i, 0, n )\n#define REPE( i, n )\tFOR( i, 0, n + 1 )\n#define FORR( i, m )\tfor( int (i) = (m); (i) >= 0; (i)-- )\n#define REPONE( i, n )\tFOR( i, 1, n + 1 );\n#define ALL( a )        (a).begin(), (a).end()             \n#define MP( a, b )\t\tmake_pair( (a), (b) )\n#define fi\t\t\t\tfirst\n#define se\t\t\t\tsecond\n\ntemplate<class T>bool chmax( T& a, const T& b ) { if( a < b ) { a = b; return 1; } return 0; }\ntemplate<class T>bool chmin( T& a, const T& b ) { if( a > b ) { a = b; return 1; } return 0; }\n\nconst int INF = 1e9;\nconst int MOD = 1e9 + 7;\n\nstruct Team {\n\tint id;\n\tint time;\n\tint score;\n\tint wrong[11] = {};\n};\n\nbool compare( const Team& a, const Team& b ) {\n\treturn a.score > b.score || ( a.score == b.score && a.time < b.time ) || \n\t\t   ( a.score == b.score && a.time == b.time && a.id > b.id );\n}\n\nsigned main() {\n\tint M, T, P, R;\n\twhile( cin >> M >> T >> P >> R && M ) {\n\t\tvector<Team> team( T );\n\t\tREP( i, T ) team[i].id = i + 1;\n\n\t\tint m, t, p, j;\n\t\tREP( i, R ) {\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tif( j == 0 ) {\n\t\t\t\tteam[t - 1].score++;\n\t\t\t\tteam[t - 1].time += m + team[t - 1].wrong[p] * 20;\n\t\t\t} else {\n\t\t\t\tteam[t - 1].wrong[p]++;\n\t\t\t}\n\t\t}\n\n\t\tsort( ALL( team ), compare );\n\n\t\tREP( i, T ) {\n\t\t\tif( i != T - 1 && team[i].score == team[i + 1].score && team[i].time == team[i + 1].time ) {\n\t\t\t\tcout << team[i].id << '=';\n\t\t\t} else if( i != T - 1 ){\n\t\t\t\tcout << team[i].id << ',';\n\t\t\t} else {\n\t\t\t\tcout << team[i].id << endl;\n\t\t\t}\n\t\t}\n\t}\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <utility>\nusing namespace std;\n\nint main(){\n  int m,t,p,r,i,j,k;\n  while(1){\n    cin >> m >> t >> p >> r;\n    if(m==0)break;\n    int ac[t]={},wa[t][p],actime[t]={};\n    for(i=0;i<t;i++){\n      for(j=0;j<p;j++)wa[i][j]=0;\n    }\n    for(i=0;i<r;i++){\n      int M,T,P,R;\n      cin >> M >> T >> P >> R;\n      if(R!=0)wa[T-1][P]++;\n      else{\n        ac[T-1]++;\n        actime[T-1]+=wa[T-1][P]*20+M;\n      }\n    }\n\n    //cout << actime[0] << actime[1] << endl;\n\n    bool flag[t]={};\n    int bscore=-1,bfinaltime=-1;\n    for(j=0;j<t;j++){\n      int team=-1,score=-1,finaltime=300*20;\n      for(i=0;i<t;i++){\n        if(flag[i]==true)continue;\n        if(score<ac[i]){\n          team=i;\n          score = ac[i];\n          finaltime= actime[i];\n        }else if(score == ac[i] && finaltime>=actime[i]){\n          team=i;\n          finaltime=actime[i];\n        }\n      }\n      if(j!=0){\n        if(bscore==score && bfinaltime==finaltime)cout << \"=\";\n        else cout << \",\";\n      }\n      cout << team+1;\n      flag[team]=true;\n      bscore = score;\n      bfinaltime=finaltime;\n    }\n    cout << endl;\n  }\n  return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <stdio.h>\n#include<algorithm>\n#include<iostream>\n#include<string.h>\nusing namespace std;\ntypedef pair<int,int> P;\ntypedef pair<int,pair<int,int> > L;\nint main(void) {\n  P team[55][12];\n  L mama[55];\n  int M, T, Q, R;\n  int m, t, p, j;\n  while(1){\n    memset(team,0,sizeof(team));\n    memset(mama,0,sizeof(mama));\n    scanf(\"%d %d %d %d\", &M, &T, &Q, &R);\n    if(M==0 & T==0) break;\n    for ( int i = 0; i < R; i++ ) {\n      scanf(\"%d%d%d%d\",&m,&t,&p,&j);\n      t--;\n      if(j==0) team[t][p]=P(m+team[t][p].first,1);\n      else team[t][p]=P(20+team[t][p].first,0);\n    }\n\n    for(int i=0;i<T;i++){\n      for(int l=1;l<=Q;l++){\n        if(team[i][l].second==1){\n          mama[i].first--;\n          mama[i].second.first+=team[i][l].first;\n        }\n      }\n\n      mama[i].second.second= -i;\n    }\n\n    sort(mama,mama+T);\n\n//    for(int i=0;i<T;i++) cout << \"first :\" << mama[i].first << \"second.first :\" << mama[i].second.first << \"second.second :\" << mama[i].second.second << endl;\n\n    printf(\"\\n\");\n    for(int i=0;i<T;i++){\n    if(i==T-1) {\n      printf(\"%d\",-mama[i].second.second+1);\n      break;\n    }\n    if(mama[i].first==mama[i+1].first && mama[i].second.first == mama[i+1].second.first){\n      printf(\"%d=\",-mama[i].second.second+1);\n    }\n    else  printf(\"%d,\",-mama[i].second.second+1);\n    }\nprintf(\"\\n\");\n  }\n\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<vector>\n#include<algorithm>\n#include<string>\nusing namespace std;\nint m,t,p,r;\nstruct team{\nint time[200];\nbool ok[200];\nint id;\nint ac;\n};\n//team a,team b\nint or(){//aのほうが強ければ1,bなら0,同じなら2\nif(a.ac>b.ac)return 1;\nelse if(a.ac<b.ac)return 0;\nint at=0,bt=0;\nfor(int i=0;i<=p;i++){\nif(a.ok[i]==true)at+=a.time[i];\nif(b.ok[i]==true)bt+=b.time[i];\n}\nif(at<bt)return 1;\nelse if(at>bt)return 0;\nelse return 2;\n}\nint main(){\n\n\twhile(true){\n\tcin>>m>>t>>p>>r;\n\tif(m+t+p+r==0)break;\n\tvector<team>ta(0);\n\tta.resize(200);\n\n\tfor(int i=0;i<=t;i++)for(int j=0;j<200;j++)ta[i].time[j]=0,ta[i].ok[j]=0;\n\tfor(int i=0;i<=t;i++)ta[i].id=i,ta[i].ac=0;\n\tfor(int i=0;i<r;i++){\n\tint a,b,c,d;\n\tcin>>a>>b>>c>>d;//a:経過時間:bチーム番号c:問題番号j:0奈良正解それ以外不正解\n\tif(d==0){\n\tta[b].time[c]+=a;\n\tta[b].ac++;\n\tta[b].ok[c]=true;\n\t}\n\telse {\n\tta[b].time[c]+=20;\n\t}\n\t}\n\tta.erase(ta.begin());\n\tfor(int i=0;i<t;i++){\n\tfor(int j=0;j<t;j++){\n\tif(or(ta[i],ta[j])==1)swap(ta[i],ta[j]);\n\tif(or(ta[i],ta[j])==2&&ta[i].id>ta[j].id)swap(ta[i],ta[j]);\n\t}\n\t}\n\tfor(int i=0;i<t-1;i++){\n\tif(or(ta[i],ta[i+1])!=2)cout<<ta[i].id<<\",\";\n\telse cout<<ta[i].id<<\"=\";\n\t}\n\tcout<<ta[t-1].id<<endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nbool comp(pair<pair<int,int>,int> p1, pair<pair<int,int>,int> p2){\n\n    if(p1.first.first == p2.first.first){\n        if(p1.first.second == p2.first.second){\n            return p1.second < p2.second;\n        }\n        return p1.first.second > p2.first.second;\n    }\n    return p1.first.first < p2.first.second;\n\n}\n\nint main() {\n\n    while(1) {\n\n        int M,T,P,R;\n\n        cin >> M >> T >> P >> R;\n\n        if(M == 0 && T == 0 && P == 0 && R == 0) break;\n\n        pair<int,int> team[T+1]; //solve_num, time\n        pair<bool,int> try_progrums[T+1]; //is_tryed, lasttime\n\n        team[0] = make_pair(-1,-1);\n\n        for(int i=1; i<T+1; i++){\n            team[i] = make_pair(0,0);\n            try_progrums[i] = make_pair(false,0);\n        }\n\n        for(int i=0; i<R; i++){\n\n            int m, t, p, j;\n\n            cin >> m >> t >> p >>j;\n\n            if(j == 0){\n                team[t].first++;\n                team[t].second += t;\n            }\n            else{\n                if(try_progrums[t].first){\n                    team[t].second += t - try_progrums[t].second + 20;\n                    try_progrums[t].second = t;\n                }\n                else{\n                    try_progrums[t].first = true;\n                    try_progrums[t].second = t;\n                }\n            }\n        }\n\n        pair<pair<int,int>,int> team_result[T+1];\n\n        for(int i=0; i<T+1; i++){\n            team_result[i] = make_pair(team[i],i);\n        }\n\n        sort(team_result,team_result+T+1,comp);\n        \n        cout << team_result[T].second;\n\n        for(int i=T; i>1; i--){\n            if(team_result[i].first.first == team_result[i-1].first.first && team_result[i].first.second == team_result[i-1].first.second){\n                cout << '=' << team_result[i-1].second;\n            }\n            else{\n                cout << ',' << team_result[i-1].second;\n            }\n        }\n\n        cout << endl;\n\n\n\n\n    }\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<string>\n#include<algorithm>\n#include<map>\n#include<set>\n#include<utility>\n#include<vector>\n#include<cmath>\n#include<cstring>\n#include<cstdio>\n#define loop(i,a,b) for(int i=a;i<b;i++) \n#define rep(i,a) loop(i,0,a)\n#define rp(a) while(a--)\n#define pb push_back\n#define mp make_pair\n#define all(in) in.begin(),in.end()\nconst double PI=acos(-1);\nconst double EPS=1e-10;\nusing namespace std;\ntypedef long long ll;\ntypedef vector<int> vi;\nint main(){\n\tint M,T,P,R;\n\twhile(cin>>M>>T>>P>>R,M+T+P+R){\n\t\tbool h[51][11]={0};\n\t\tint pe[51][11]={0};\n\t\tint sum[51]={0};\n\t\tint co[51]={0};\n\t\tint m,t,p,ju;\n\t\trep(i,R){\n\t\t\tcin>>m>>t>>p>>ju;\n\t\t\tt--;p--;\n\t\t\tif(!ju){//OK\n\t\t\t\th[t][p]=true;\n\t\t\t\tsum[t]+=m+20*pe[t][p];\n\t\t\t\tco[t]++;\n\t\t\t}else pe[t][p]++;\n\t\t}\n\t\tint out[51];\n\t\trep(i,50)out[i]=i;\n\t\tloop(i,1,T)for(int j=T-1;j>=i;j--){\n\t\t\tif(co[out[j-1]]<co[out[j]])swap(out[j-1],out[j]);\n\t\t\telse if(co[out[j-1]]==co[out[j]]&&sum[out[j-1]]>sum[out[j]])\n\t\t\t\tswap(out[j-1],out[j]);\n\t\t\telse if(co[out[j-1]]==co[out[j]]&&\n\t\t\t\t\tsum[out[j-1]]==sum[out[j]]&&\n\t\t\t\t\tout[j-1]<out[j])\n\t\t\t\tswap(out[j-1],out[j]);\n\n\t\t}\n\t\trep(i,T){\n\t\t\tif(i){\n\t\t\t\tif(co[out[i-1]]==co[out[i]]&&sum[out[i-1]]==sum[out[i]])cout<<\"=\";\n\t\t\t\telse cout<<',';\n\t\t\t}\n\t\t\tcout<<out[i]+1;\n\t\t}\n\t\tcout<<endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n\nusing namespace std;\n\nstruct Score{\n\tint team_num;\n\tint ac=0;\n\tint time=0;\n\tint miss_tmp[20]={0};\n\tint miss_sum=0;\n};\n\nbool asc(const Score& left, const Score& right) {\n\treturn left.ac == right.ac ? (left.time == right.time ?  left.team_num > right.team_num : left.time < right.time) :\n\t\t   left.ac > right.ac;\n}\n\nint main(){\n\twhile(1){\n\t\tint M, T, P, R; cin>>M>>T>>P>>R;\n\t\tif(!M && !T && !P && !R) break;\n\t\tvector <Score> score(T);\n\t\tfor(int i=0; i<T; i++) score[i].team_num = i;\n\t\tint m, t, p, j;\n\t\tfor(int i=0; i<R; i++){\n\t\t\tcin>>m>>t>>p>>j;\n\t\t\tt=t-1;//0オリジン\n\t\t\tif(j == 0){\n\t\t\t\tscore[t].ac++;\n\t\t\t\tif(score[t].miss_tmp != 0){\n\t\t\t\t\tscore[t].miss_sum += score[t].miss_tmp[p];\n\t\t\t\t}\n\t\t\t\tscore[t].time += m+(score[t].miss_sum*20);\n\t\t\t} else{\n\t\t\t\tscore[t].miss_tmp[p]++;\n\t\t\t}\n\t\t}\n\t\tsort(score.begin(), score.end(), asc);\n\t\tfor(int i=0; i<T; i++){\n\t\t\tcout << score[i].team_num+1;\n\t\t\tif(i!=T-1){\n\t\t\t\tif(score[i].ac == score[i+1].ac && score[i].time == score[i+1].time) cout << \"=\";\n\t\t\t\telse cout << \",\";\n\t\t\t}\n\t\t}\n\t\tcout << endl;\n\t}\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#define _USE_MATH_DEFINES\n#include <algorithm>\n#include <cstdio>\n#include <functional>\n#include <iostream>\n#include <cfloat>\n#include <climits>\n#include <cstring>\n#include <cmath>\n#include <map>\n#include <queue>\n#include <set>\n#include <sstream>\n#include <stack>\n#include <string>\n#include <time.h>\n#include <vector>\nusing namespace std;\n\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef pair<int, int> i_i;\ntypedef pair<ll, int> ll_i;\ntypedef pair<double, int> d_i;\ntypedef pair<ll, ll> ll_ll;\ntypedef pair<double, double> d_d;\nstruct edge { int u, v; ll w; };\n\nll MOD = 1000000007;\nll _MOD = 1000000009;\ndouble EPS = 1e-10;\n\nint main() {\n\tfor (;;) {\n\t\tint M, T, P, R;\n\t\tcin >> M >> T >> P >> R;\n\t\tif (M == 0) break;\n\t\tvector<int> a(T), b(T);\n\t\tvector< vector<int> > c(T, vector<int>(P));\n\t\twhile (R--) {\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tt--; p--;\n\t\t\tif (j == 0) {\n\t\t\t\ta[t]++;\n\t\t\t\tb[t] += m + c[t][p] * 20;\n\t\t\t}\n\t\t\telse c[t][p]++;\n\t\t}\n\t\tvector< pair<i_i, int> > v(T);\n\t\tfor (int i = 0; i < T; i++)\n\t\t\tv[i] = make_pair(i_i(a[i], -b[i]), i);\n\t\tsort(v.begin(), v.end());\n\t\treverse(v.begin(), v.end());\n\t\tfor (int i = 0; i < T; i++) {\n\t\t\tif (i > 0) cout << (v[i - 1].first == v[i].first ? '=' : ',');\n\t\t\tcout << v[i].second + 1;\n\t\t}\n\t\tcout << endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n \n#define REP(i,s,n) for(int i=s;i<n;++i)\n#define rep(i,n) REP(i,0,n)\n#define SORT(c) sort((c).begin(),(c).end())\n#define IINF INT_MAX\n#define LLINF LLONG_MAX\n#define DEBUG false\n\ntypedef long long ll;\ntypedef pair<int, int> ii;\n\n\nstruct NODE{\n\n\tint n;\n\tint solve;\n\tint score;\n\tvector<int> cnt;\n\tNODE(){ n = solve =  score = 0; cnt.clear();}\n\tNODE(int n, int solve, int score, int p): n(n), solve(solve), score(score){\n\t\tcnt.clear();\n\t\tcnt.resize(p);\n\t}\n\t\n\tbool operator<(const NODE r){\n\t\tif(solve != r.solve) return solve < r.solve;\n\t\tif(score != r.score) return score > r.score;\n\t\treturn n < r.n;\n\t}\n\tbool operator==(const NODE r){\n\t\tif(solve != r.solve) return false;\n\t\tif(score != r.score) return false;\n\t\treturn true;\n\t}\n\t\n};\n\n\nint main() {\n\t\n\tint M, T, P, R;\n\twhile(cin >> M >> T >> P >> R, M){\n\t\tvector<NODE> v(T);\n\t\trep(i, T){\n\t\t\tv[i] = NODE(i+1, 0, 0, P);\n\t\t}\n\t\t\n\t\trep(i, R){\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tt--;\n\t\t\tp--;\n\t\t\tif(j == 0){\n\t\t\t\tv[t].solve++;\n\t\t\t\tv[t].score += (m + 20 * v[t].cnt[p]);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tv[t].cnt[p]++;\n\t\t\t}\n\t\t}\n\t\t\n\t\tSORT(v);\n\t\t\n\t\tcout << v[T-1].n;\n\t\tfor(int i = T-2; i >= 0; i--){\n\t\t\tcout << (v[i+1] == v[i] ? \"=\" : \",\") << v[i].n;\n\t\t}\n\t\tcout << endl;\n\t}\n\t\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\nint main(){\n    int m,t,p,r;\n    while(cin>>m>>t>>p>>r,m){\n        vector<vector<int>> team(t,vector<int>(p,0));\n        for(int i=0;i<r;i++){\n            int mm,tt,pp,jj;\n            cin>>m>>tt>>pp>>jj;\n            if(!jj)\n                team[tt-1][pp-1]=m+(-team[tt-1][pp-1])*20;\n            else\n                team[tt-1][pp-1]--;\n\n        }\n        vector<tuple<int,int,int>> rank(t,make_tuple(0,0,0));\n        for(int i=0;i<t;i++)\n            get<2>(rank[i])=i+1;\n        for(int i=0;i<t;i++){\n            for(int j=0;j<p;j++)\n                if(team[i][j]>0){\n                    (get<0>(rank[i]))++;\n                    get<1>(rank[i])-=team[i][j];\n                }\n\n\n        }\n        sort(rank.begin(),rank.end(),greater<tuple<int,int,int>>());\n        queue<int> q;\n        pair<int,int> pre=make_pair(-1,-1);\n        string res=\"\";\n        for(int i=0;i<t;i++){\n            if(pre==make_pair(get<0>(rank[i]),get<1>(rank[i]))){\n                q.push(get<2>(rank[i]));\n                continue;\n            }\n            else{\n                if(!res.empty())\n                    res+=\",\";\n                int s=q.size();\n                for(int j=0;j<s;j++){\n                    int a=q.front();\n                    if(j!=s-1){\n                        res+=to_string(a)+\"=\";\n                        }\n                    else\n                        res+=to_string(a);\n\n                    q.pop();\n\n                }\n                q.push(get<2>(rank[i]));\n                pre=make_pair(get<0>(rank[i]),get<1>(rank[i]));\n            }\n\n        }\n        if(!q.empty())\n            res+=',';\n        for(int i=0;!q.empty();i++){\n            if(q.size()!=1){\n                res+=to_string(q.front())+\"=\";\n\n            }\n            else\n                res+=to_string(q.front());\n            q.pop();\n        }\n        cout<<res<<endl;\n    }\n\n    return 0;\n}\n                                      "
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define f first \n#define sf second.first \n#define ss second.second \nusing namespace std;\ntypedef pair<int,int> P;\ntypedef pair<int,P > iP;\n\nint main(){\n  int t,p,r,b;\n  while(cin>>b>>t>>p>>r&&t){\n    iP a[51];\n    int k[11][51]={};\n    a[0]=iP(-1,P(-1,-1));\n    for(int i=1;i<=t;i++)a[i]=iP(0,P(0,i));\n    for(int i=0;i<r;i++){\n      int ti,pi,m,s;\n      cin>>m>>ti>>pi>>s;\n      if(!s)a[ti].f++,a[ti].sf-=m+k[pi][ti]*20;\n      else k[pi][ti]++;\n    }\n    sort(a+1,a+t+1);\n    for(int i=t;i>0;i--){\n      cout<<a[i].ss;\n      if(i!=1)\n\tif(a[i-1].f==a[i].f&&a[i-1].sf==a[i].sf)cout<<\"=\";\n\telse cout<<\",\";\n    }\n    cout<<endl;\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <map>\n#include <set>\n#include <list>\n#include <cmath>\n#include <queue>\n#include <stack>\n#include <cstdio>\n#include <string>\n#include <vector>\n#include <complex>\n#include <cstdlib>\n#include <cstring>\n#include <numeric>\n#include <sstream>\n#include <iostream>\n#include <algorithm>\n#include <functional>\n  \n#define mp       make_pair\n#define pb       push_back\n#define all(x)   (x).begin(),(x).end()\n#define rep(i,n) for(int i=0;i<(n);i++)\n  \nusing namespace std;\n  \ntypedef    long long          ll;\ntypedef    unsigned long long ull;\ntypedef    vector<bool>       vb;\ntypedef    vector<int>        vi;\ntypedef    vector<vb>         vvb;\ntypedef    vector<vi>         vvi;\ntypedef    pair<int,int>      pii;\n  \nconst int INF=1<<29;\nconst double EPS=1e-9;\n  \nconst int dx[]={1,0,-1,0,1,1,-1,-1},dy[]={0,-1,0,1,1,-1,-1,1};\n\nstruct Log {\n  int m, t, p, j;\n};\n\nstruct Point {\n  int t, ac, pena;\n};\n\nvoid solve(int M, int T, int P, int R, vector<Log> &L) {\n  vector<vector<int>> pena(T, vector<int>(P, 0));\n  vector<Point> sc(T, (Point){0, 0, 0});\n  for (int i = 0; i < T; i++) {\n    sc[i].t = i;\n  }\n\n  for (int i = 0; i < L.size(); i++) {\n    if (L[i].j == 0) {\n      sc[L[i].t].ac++;\n      sc[L[i].t].pena += L[i].m + pena[L[i].t][L[i].p];\n    } else {\n      pena[L[i].t][L[i].p] += 20;\n    }\n  }\n\n  sort(sc.begin(), sc.end(), [](Point a, Point b){\n    if (a.ac == b.ac) {\n      if (a.pena == b.pena) {\n        return a.t > b.t;\n      } else {\n        return a.pena < b.pena;\n      }\n    } else {\n      return a.ac > b.ac;\n    }\n  });\n\n  for (int i = 0; i < T; i++) {\n    cout << sc[i].t + 1;\n    if (i != T - 1) {\n      if (sc[i].ac == sc[i + 1].ac && sc[i].pena == sc[i + 1].pena) {\n        cout << \"=\";\n      } else {\n        cout << \",\";\n      }\n    }\n  }\n  cout << endl;\n}\n\n\nint main() {\n  int M, T, P, R;\n\n  while(cin >> M >> T >> P >> R, M) {\n    vector<Log> L;\n    for (int i = 0; i < R; i++) {\n      int m, t, p, j;\n      cin >> m >> t >> p >> j;\n      t--, p--;\n      L.push_back((Log){m, t, p, j});\n    }\n    solve(M, T, P, R, L);\n\n  }\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<algorithm>\n\nusing namespace std;\n\nint M,T,P,R;\nint m[2000],t[2000],p[2000],j[2000];\nstruct team{\n\tint n,s,t,w[2000];\n};\n\nbool comp(const team &t1,const team &t2){\n\tif(t1.t==t2.t && t1.s==t2.s)return t1.n>t2.n;\n\tif(t1.s==t2.s)return t1.t<t2.t;\n\treturn t1.s>t2.s;\n};\n\nteam dat[2001];\n\nint main(void){\n\twhile(1){\n\t\tscanf(\"%d%d%d%d\",&M,&T,&P,&R);\n\t\tif(M+T+R+P==0)break;\n\t\tmemset(dat,0,sizeof(dat));\n\t\tfor(int i=0;i<T;i++)dat[i].n=i+1;\n\t\tfor(int i=0;i<R;i++){\n\t\t\tscanf(\"%d%d%d%d\",&m[i],&t[i],&p[i],&j[i]);\n\t\t\tif(j[i]!=0){\n\t\t\t\tdat[t[i]-1].w[p[i]]++;\n\t\t\t}else{\n\t\t\t\tdat[t[i]-1].s++;\n\t\t\t\tdat[t[i]-1].t+=m[i]+dat[t[i]-1].w[p[i]]*20;\n\t\t\t}\n\t\t}\n\t\tsort(dat,dat+T,comp);\n\t\tprintf(\"%d\",dat[0].n);\n\t\tfor(int i=1;i<T;i++){\n\t\t\tif(dat[i-1].s==dat[i].s && dat[i-1].t==dat[i].t)printf(\"=\");\n\t\t\telse printf(\",\");\n\t\t\tprintf(\"%d\",dat[i].n);\n\t\t}\n\t\tprintf(\"\\n\");\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "a\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n\nusing namespace std;\n\nint main(void){\n    int m,t,p,r;\n    int mk,tk,pk,jk;\n    int a[2][50][10];\n    vector<pair<int,int> > vp;\n    int i,j,k,x,y,z;\n    while(true){\n        cin >> m >> t >> p >> r;\n        if(m == 0) break;\n        memset(a,0,sizeof(a));\n        for(i = 0;i < r;i++){\n            cin >> mk >> tk >> pk >> jk;\n            tk--;pk--;\n            if(jk){\n                a[0][tk][pk] += 20;\n            }\n            else{\n                a[1][tk][pk] = mk + a[0][tk][pk];\n            }\n        }\n        vp.clear();\n        for(i = 0;i < t;i++){\n            x = 0;\n            y = 0;\n            for(j = 0;j < p;j++){\n                if(a[1][i][j]){\n                    x++;\n                    y+=a[1][i][j];\n                }\n            }\n            vp.push_back(make_pair(x*900000-y,i));\n        }\n        sort(vp.begin(),vp.end());\n        i = vp.size();\n        x = vp[--i].first;\n        cout << vp[i].second+1;\n        for(;i > 0;){\n            if(x == vp[--i].first){\n                cout << \"=\";\n            }\n            else cout << \",\";\n            x = vp[i].first;\n            cout << vp[i].second+1;\n        }\n        cout << endl;\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<algorithm>\n\nusing namespace std;\n\nint M,T,P,R;\nint m[2000],t[2000],p[2000],j[2000];\nstruct team{\n\tint n,s,t,w[2000];\n};\n\nbool comp(const team &t1,const team &t2){\n\tif(t1.t==t2.t && t1.s==t2.s)return t1.n>t2.n;\n\tif(t1.s==t2.s)return t1.t<t2.t;\n\treturn t1.s>t2.s;\n};\n\nteam dat[2001];\n\nint main(void){\n\twhile(1){\n\t\tscanf(\"%d%d%d%d\",&M,&T,&P,&R);\n\t\tif(M+T+R+P==0)break;\n\t\tmemset(dat,0,sizeof(dat));\n\t\tfor(int i=0;i<T;i++)dat[i].n=i+1;\n\t\tfor(int i=0;i<R;i++){\n\t\t\tscanf(\"%d%d%d%d\",&m[i],&t[i],&p[i],&j[i]);\n\t\t\tif(j[i]==1){\n\t\t\t\tdat[t[i]-1].w[p[i]]++;\n\t\t\t}else{\n\t\t\t\tdat[t[i]-1].s++;\n\t\t\t\tdat[t[i]-1].t+=m[i]+dat[t[i]-1].w[p[i]]*20;\n\t\t\t}\n\t\t}\n\t\tsort(dat,dat+T,comp);\n\t\tprintf(\"%d\",dat[0].n);\n\t\tfor(int i=1;i<T;i++){\n\t\t\tif(dat[i-1].s==dat[i].s && dat[i-1].t==dat[i].t)printf(\"=\");\n\t\t\telse printf(\",\");\n\t\t\tprintf(\"%d\",dat[i].n);\n\t\t}\n\t\tprintf(\"\\n\");\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define all(vec) vec.begin(),vec.end()\nusing namespace std;\ntypedef long long ll;\ntypedef pair<int,int> P;\nconst double EPS=1e-10;\nconst ll INF=1000000000;\nconst ll MAX=100010;\nint main(){\n    int M,T,P,R;\n    while(cin>>M>>T>>P>>R,M+T+P+R){\n        pair<pair<int,int>,int> v[60]={};\n        int wa[60][11]={};\n        int pn[60]={};\n        for(int i=0;i<R;i++){\n            int m,t,p,j;\n            cin>>m>>t>>p>>j;\n            t--;\n            if(j!=0){\n                wa[t][p]++;\n                continue;\n            }\n            pn[t]+=wa[t][p]*20;\n            v[t].first.first--;\n            v[t].first.second+=m;\n        }\n        for(int i=0;i<T;i++){\n            v[i].first.second+=pn[i];\n            v[i].second=-(i+1);\n        }\n        sort(v,v+T);\n        for(int i=0;i<T;i++){\n            cout<<-v[i].second;\n            if(i==T-1){\n                cout<<endl;\n                continue;\n            }\n            if(v[i].first==v[i+1].first){\n                cout<<\"=\";\n            }else{\n                cout<<\",\";\n            }\n        }\n    }\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <cmath>\n#include <iostream>\n#include <vector>\n#include <queue>\n#include <map>\n#include <set>\n#include <tuple>\n#include <algorithm>\n#include <utility>\n#include <iomanip>\n\n#define int long long int\n#define rep(i, n) for(int i = 0; i < (n); ++i)\n\nusing namespace std;\n\ntypedef pair<int, int> P;\n\nconst int INF = 1e15;\nconst int MOD = 1e9+7;\n\nbool comp(tuple<int, int, int>& x, tuple<int, int, int>& y){\n    int x_i = get<0>(x);\n    int y_i = get<0>(y);\n    int x_a = get<1>(x);\n    int y_a = get<1>(y);\n    int x_t = get<2>(x);\n    int y_t = get<2>(y);\n\n    if(x_a != y_a){\n        return x_a > y_a;\n    }\n\n    if(x_t != y_t){\n        return x_t < y_t;\n    }\n\n    return x_i > y_i;\n}\n\nsigned main(){\n    while(true){\n        int M, T, P, R;\n        cin >> M >> T >> P >> R;\n\n        if(M == 0 && T == 0 && P == 0 && R == 0){\n            break;\n        }\n\n        vector<vector<int>> res(T+1, vector<int>(P+1));\n        vector<vector<bool>> ac(T+1, vector<bool>(P+1, false));\n        vector<int> time(T+1);\n\n        rep(i, R){\n            int m, t, p, j;\n            cin >> m >> t >> p >> j;\n\n            if(j == 0){\n                ac[t][p] = true;\n                time[t] = m;\n                continue;\n            }\n            res[t][p]++;\n        }\n\n        vector<tuple<int, int, int>> rank;\n        for(int i = 1; i <= T; i++){\n            int pena = 0;\n            int AC = 0;\n            for(int j = 1; j <= P; j++){\n                if(ac[i][j]){\n                    pena += res[i][j];\n                    AC++;\n                }\n            }\n            pena *= 20;\n\n            rank.emplace_back(i, AC, time[i] + pena);\n        }\n        sort(rank.begin(), rank.end(), comp);\n\n        rep(i, T-1){\n            int r = get<0>(rank[i]);\n            int x_a = get<1>(rank[i]);\n            int y_a = get<1>(rank[i+1]);\n            int x_t = get<2>(rank[i]);\n            int y_t = get<2>(rank[i+1]);\n\n            if(x_a != y_a || x_t != y_t){\n                cout << r << \",\";\n            }else{\n                cout << r << \"=\";\n            }\n        }\n        cout << get<0>(rank[T-1]) << endl;\n\n    }\n\n    return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n#include <string>\n#include <vector>\n#include <cstdio>\n#include <cstdlib>\n#include <cmath>\n#include <set>\n#include <map>\n#include <queue>\n#include <stack>\n\nusing namespace std;\n\n#define INF 1010001000\n#define EPS 1e-10\n#define rep(i, N) for (int i = 0; i < N; i++)\n#define pb push_back\n\ntypedef pair<int, int> i_i;\ntypedef long long int llong;\ntypedef pair<llong, llong> ll_ll;\ntypedef struct edge {int f, t;}Edge;\ntypedef pair<int, pair<int, int> > Team;\ntypedef pair<int, pair<int, pair<int, int> > > input;\n\nint m, t, p, r;\n\nint main()\n{\n    while (cin >> m >> t >> p >> r, m) {\n        vector<Team > team(t);\n        vector<vector<int> > check(t, vector<int>(p, 0));\n        vector<input > data(r);\n        rep(i, t) {\n            team[i].second.second = i+1;\n            team[i].first = 0;\n            team[i].second.first = 0;\n        }\n        rep(i, r) {\n            cin >> data[i].first >> data[i].second.first\n                >> data[i].second.second.first \n                >> data[i].second.second.second;\n            data[i].first;\n            data[i].second.first--;\n            data[i].second.second.first--;\n            data[i].second.second.second;\n        }\n        sort(data.begin(), data.end());\n        rep(i, r) {\n            int a = data[i].first, b = data[i].second.first, \n                c = data[i].second.second.first, \n                d = data[i].second.second.second;\n            if (d) {\n                if (check[b][c] != -1) {\n                    check[b][c]++;\n                }\n            } else {\n                if (check[b][c] != -1) {\n                    team[b].first++;\n                    team[b].second.first \n                        -= data[i].first + check[b][c] * 20;\n                    check[b][c] = -1;\n                }\n            }\n        }\n        sort(team.begin(), team.end(), greater<Team>());\n        cout << team[0].second.second;\n        for (int i = 1; i < t; i++) {\n            if (team[i].first == team[i-1].first && \n                    team[i].second.first == team[i-1].second.first) {\n                cout << \"=\" << team[i].second.second;\n            } else {\n                cout << \",\" << team[i].second.second;\n            }\n        }\n        cout << endl;\n    }\n\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#define _CRT_SECURE_NO_WARNINGS\n#define _USE_MATH_DEFINES\n#include <iostream>\n#include <map>\n#include <set>\n#include <list>\n#include <cstdio>\n#include <cmath>\n#include <cstring>\n#include <string>\n#include <vector>\n#include <algorithm>\n#include <utility>\n#include <queue>\n#include <iomanip>\n\n#define SIZE 101\n#define INF 100000000\n\nusing namespace std;\n\n\ntypedef pair<int, int> Pa;\n\n\nint tim[100][100]; // t p time\nbool pra[100][100];\n\nint main()\n{\n\tint M, T, P, R;\n\t\n\tpair<Pa, int> pa;\n\n\twhile (true) {\n\t\tcin >> M >> T >> P >> R;\n\t\tif (T == 0) break;\n\n\t\tfor (int i = 0; i <= T; i++) {\n\t\t\tfor (int j = 0; j <= P; j++) {\n\t\t\t\ttim[i][j] = 0; \n\t\t\t\tpra[i][j] = false;\n\t\t\t}\n\t\t}\n\t\tvector<pair<Pa, int>> v(T + 1);\n\n\t\tfor (int i = 0; i <= T; i++) {\n\t\t\tv[i].second = i;\n\t\t}\n\n\t\tfor (int i = 0; i < R; i++) {\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tif (j == 0) {\n\t\t\t\tv[t].first.first++;\n\t\t\t\tv[t].first.second = - m + tim[t][p];\n\t\t\t} else {\n\t\t\t\ttim[t][p] -= 20;\n\t\t\t}\n\t\t}\n\n\t\tsort(v.begin(),v.end());\n\t\tfor (int i = T; i >= 1; i--) {\n\t\t\t//cout << v[i].first.first << \" \" << v[i].first.second << \" \" << v[i].second << endl;\n\t\t\tcout << v[i].second;\n\t\t\tif (i == 1) break;\n\t\t\tif (v[i].first.first == v[i - 1].first.first && v[i].first.second == v[i - 1].first.second)cout << \"=\";\n\t\t\telse cout << \",\";\n\t\t}\n\t\tcout << endl;\n\t\t\n\t}\n\t\n\n\treturn (0);\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\nusing namespace std;\n\nint main(){\n\twhile(1){\n\t\tint M,T,P,R;\n\t\tcin>>M>>T>>P>>R;\n\n\t\tif(M==0&&T==0&&P==0&&R==0)\n\t\t\tbreak;\n\n\t\tint CP[50],TT[50],PT[50][10];\n\t\tfor(int i=0;i<T;i++){\n\t\t\tCP[i]=TT[i]=0;\n\t\t\tfor(int j=0;j<P;j++){\n\t\t\t\tPT[i][j]=0;\n\t\t\t}\n\t\t}\n\n\t\tfor(int i=0;i<R;i++){\n\t\t\tint m,t,p,j;\n\t\t\tcin>>m>>t>>p>>j;\n\t\t\n\t\t\tif(j==0){\n\t\t\t\tCP[t-1]++;\n\t\t\t\tTT[t-1]+=(m+PT[t-1][p-1]);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tPT[t-1][p-1]+=20;\n\t\t\t}\n\t\t}\n\n\t\tint  tnow,tpre=-1;\n\t\tbool flg[50];\n\t\tfor(int i=0;i<T;i++){\n\t\t\tflg[i]=false;\n\t\t}\n\n\t\tfor(int i=0;i<T;i++){\n\t\t\ttnow=-1;\n\t\t\tfor(int j=0;j<T;j++){\n\t\t\t\tif(flg[j])\n\t\t\t\t\t continue;\n\n\t\t\t\tif(tnow==-1){\n\t\t\t\t\ttnow=j;\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tif(CP[j]>CP[tnow]||(CP[j]==CP[tnow]&&TT[j]<=TT[tnow])){\n\t\t\t\t\t\ttnow=j;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(tpre!=-1){\n\t\t\t\tif(CP[tnow]==CP[tpre]&&TT[tnow]==TT[tpre]){\n\t\t\t\t\tcout<<'=';\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tcout<<'.';\n\t\t\t\t}\n\t\t\t}\n\t\t\tcout<<tnow+1;\n\t\t\n\t\t\tflg[tnow]=true;\n\t\t\ttpre=tnow;\n\t\t}\n\t\tcout<<endl;\n\t}\n\t\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<vector>\n#include<algorithm>\nusing namespace std;\n\nconst int MAX_T = 55;\nconst int MAX_P = 11;\n\nbool is_correct[MAX_T][MAX_P];\nint correct_cnt[MAX_T];\nint penalty_record[MAX_T][MAX_P];\nint elapsed[MAX_T];\n\nbool cmp(const int& team1, const int& team2) {\n    if (correct_cnt[team1] != correct_cnt[team2]) {\n        return correct_cnt[team1] > correct_cnt[team2];\n    }\n    else {\n        if (elapsed[team1] != elapsed[team2]) {\n            return elapsed[team1] < elapsed[team2];\n        }\n        return team1 > team2;\n    }\n}\n\nvoid solve(int M, int T, int P, int R) {\n    for (int i = 1; i <= T; i++) {\n        correct_cnt[i] = 0;\n        elapsed[i] = 0;\n        for (int j = 1; j <= P; j++) {\n            penalty_record[i][j] = 0;\n            is_correct[i][j] = false;\n        }\n    }\n    int m, t, p, j;\n    for (int i = 0; i < R; i++) {\n        cin >> m >> t >> p >> j;\n        if (j == 0) {\n            correct_cnt[t]++;\n            is_correct[t][p] = true;\n            elapsed[t] += m + 20 * penalty_record[t][p];\n        }\n        else {\n            penalty_record[t][p]++;\n        }\n    }\n    vector<int> ans;\n    for (int i = 1; i <= T; i++) {\n        ans.push_back(i);\n    }\n    sort(ans.begin(), ans.end(), cmp);\n    for (int i = 0; i < ans.size() - 1; i++) {\n        cout << ans[i];\n        if (correct_cnt[ans[i]] != correct_cnt[ans[i + 1]]) {\n            cout << ',';\n        }\n        else {\n            if (elapsed[ans[i]] != elapsed[ans[i + 1]]) {\n                cout << ',';\n            }\n            else cout << '=';\n        }\n    }\n    cout << ans[ans.size() - 1] << endl;\n}\n\nint main() {\n    cin.tie(0);\n    ios::sync_with_stdio(false);\n    int M, T, P, R;\n    while (true) {\n        cin >> M >> T >> P >> R;\n        if (M == 0 && T == 0 && P == 0 && R == 0) break;\n        solve(M, T, P, R);\n    }\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\n#define INF 1e9\n\nint MOD=1e9+7;\n\nsigned main(){\n    ios::sync_with_stdio(false);\n    cin.tie(0);\n\n    while(1){\n        int m,t,p,r;\n        cin>>m>>t>>p>>r;\n\n        if(m==0)break;\n\n        vector<pair<pair<long long,long long>,long long>> v(t);\n        vector<long long> wa(t);\n        for(int i=0;i<t;i++){\n            v[i].second=i+1;\n        }\n        for(int i=0;i<t;i++){\n            wa[i]=0;\n        }\n\n        for(int i=0;i<r;i++){\n            int a,b,c,d;\n            cin>>a>>b>>c>>d;\n            b--;\n\n            if(d!=0)wa[b]++;\n            else{\n                v[b].first.first++;\n                v[b].first.second+=a+wa[b]*20;\n            }\n        }\n        for(int i=0;i<t;i++){\n            v[i].first.second*=-1;\n        }\n        sort(v.begin(),v.end());\n        reverse(v.begin(),v.end());\n        for(int i=0;i<t;i++){\n            cout<<v[i].second;\n            if(i==t-1)cout<<endl;\n            else if(v[i].first==v[i+1].first)cout<<\"=\";\n            else cout<<\",\";\n        }\n    }\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n#define for_(i,a,b) for(int i=(a);i<(b);++i)\n\ntypedef pair< int, int > pii;\ntypedef pair< pii, int > piii;\n\nint M, T, P, R;\n\nint main() {\n\twhile (cin >> M >> T >> P >> R, M) {\n\t\tvector< int > cnt(T, 0);\n\t\tvector< vector< int > > pen(T, vector< int >(P, 0));\n\t\t\n\t\tfor_(i,0,R) {\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\t--t; --p;\n\t\t\t\n\t\t\tif (m <= M) {\n\t\t\t\tif (j == 0) {\n\t\t\t\t\tpen[t][p] = (-pen[t][p]) + m;\n\t\t\t\t\t++cnt[t];\n\t\t\t\t} else if (pen[t][p] <= 0) {\n\t\t\t\t\tpen[t][p] -= 20;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tvector< piii > info(T, piii(pii(0, 0),0));\n\t\t\n\t\tfor_(i,0,T) {\n\t\t\tinfo[i].first.first = cnt[i];\n\t\t\tfor_(j,0,P) if (pen[i][j] > 0) info[i].first.second -= pen[i][j];\n\t\t\tinfo[i].second = i + 1;\n\t\t}\n\t\t\n\t\tsort(info.begin(), info.end(), greater< piii >());\n\t\t\n\t\tfor_(i,0,T) {\n\t\t\tcout << info[i].second;\n\t\t\t\n\t\t\tif (i < T - 1) {\n\t\t\t\tpii p = info[i].first, pn = info[i+1].first;\n\t\t\t\tif (p == pn) cout << \"=\";\n\t\t\t\telse cout << \",\";\n\t\t\t}\n\t\t}\n\t\tcout << endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n#define lp(i,n) for(int i=0;i<n;i++)\n\nint main(){\n\twhile(1){\n\t\tint m,t,p,r;\n\t\tcin>>m>>t>>p>>r;\n\t\tif(m==0&&p==0&&t==0&&r==0) break;\n\t\tint score[51],stats[51][11],time[51];\n\t\tlp(i,51){\n\t\t\tscore[i]=0;\n\t\t\ttime[i]=0;\n\t\t\tlp(j,11){\n\t\t\t\tstats[i][j]=0;\n\t\t\t}\n\t\t}\n\t\tlp(i,r){\n\t\t\tint a,b,c,d;\n\t\t\tcin>>a>>b>>c>>d;\n\t\t\tif(d!=0){\n\t\t\t\tstats[b][c]++;\n\t\t\t}\n\t\t\telse{\n\t\t\t\tscore[b]++;\n\t\t\t\ttime[b]+=a+stats[b][c]*20;\n\t\t\t}\n\t\t}\n\t\ttuple<int,int,int> ans[50];\n\t\tlp(i,t){\n\t\t\tans[i]=make_tuple(score[i+1],-time[i+1],i+1);\n\t\t}\n\t\tsort(ans,ans+t);\n\t\treverse(ans,ans+t);\n\t\tint ans1,memo,memo2,memo3,memo4;\n\t\tlp(i,t){\n\t\t\tans1=get<2>(ans[i]);\n\t\t\tmemo=get<0>(ans[i]);\n\t\t\tmemo3=get<1>(ans[i]);\n\t\t\tif(i==0){\n\t\t\t\tcout<<ans1;\n\t\t\t}\n\t\t\telse{\n\t\t\t\tif(memo==memo2&&memo3==memo4){\n\t\t\t\t\tcout<<\"=\";\n\t\t\t\t}\n\t\t\t\telse cout<<\",\";\n\t\t\t\tcout<<ans1;\n\t\t\t}\n\t\t\tmemo2=memo;\n\t\t\tmemo4=memo3;\n\t\t}\n\t\tcout<<endl;\n\t}\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\nusing namespace std;\n\nstruct team{\n\tint t, c, m;\n\tint p[10];\n};\n\nbool operator<(const team team1, const team team2){\n\tbool rep;\n\tif(team1.c == team2.c){\n\t\trep = (team1.m == team2.m) ? team1.t > team2.t : team1.m < team2.m;\n\t}else{\n\t\trep = (team1.c > team2.c);\n\t}\n\treturn rep;\n}\n\nint main(){\n\tint M, T, P, R;\n\twhile( cin >> M >> T >> P >> R, M || T || P || R ){\n\t\tvector<team> teams(T);\n\t\tfor(int i = 0; i < T; i++){\n\t\t\tteams[i].t = i+1;\n\t\t\tteams[i].c = 0;\n\t\t\tteams[i].m = 0;\n\t\t}\n\t\tfor(int i = 0; i < R; i++){\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tif( j == 0 ){\n\t\t\t\tteams[t-1].c++;\n\t\t\t\tteams[t-1].m += (m + 20 * teams[t-1].p[p-1]);\n\t\t\t}else{\n\t\t\t\tteams[t-1].p[p-1]++;\n\t\t\t}\n\t\t}\n\t\tsort(teams.begin(), teams.end());\n\t\tcout << teams[0].t;\n\t\tfor(int i = 1; i < T; i++){\n\t\t\tif( teams[i].c == teams[i-1].c && teams[i].m == teams[i-1].m ) cout << \"=\";\n\t\t\telse cout << \",\";\n\t\t\tcout << teams[i].t;\n\t\t}\n\t\tcout << endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#define _USE_MATH_DEFINES\n#define INF 0x3f3f3f3f\n#include <cstdio>\n#include <iostream>\n#include <sstream>\n#include <cmath>\n#include <cstdlib>\n#include <algorithm>\n#include <queue>\n#include <stack>\n#include <limits>\n#include <map>\n#include <string>\n#include <cstring>\n#include <set>\n#include <deque>\n#include <bitset>\n#include <list>\n#include <cctype>\n#include <utility>\n \nusing namespace std;\n \ntypedef long long ll;\ntypedef pair <int,int> P;\ntypedef pair <int,P > PP;\n \nint tx[] = {0,1,0,-1};\nint ty[] = {-1,0,1,0};\n \nstatic const double EPS = 1e-8;\n\nstruct Team{\npublic:\n  int solved;\n  int elapsed_time;\n  int penalty;\n  int id;\n  Team() : solved(0),elapsed_time(0),penalty(0),id(0){}\n  bool operator<(const Team& t) const{\n    if(__builtin_popcount(solved) == __builtin_popcount(t.solved)){\n      if((elapsed_time + penalty) == (t.elapsed_time + t.penalty)){\n\treturn id > t.id;\n      }\n      else{\n\treturn ((elapsed_time + penalty) < (t.elapsed_time + t.penalty)); \n      }\n    }\n    else{\n      return (__builtin_popcount(solved) > __builtin_popcount(t.solved));\n    }\n  }\n  bool operator==(const Team& t) const{\n    if(__builtin_popcount(solved) == __builtin_popcount(t.solved)\n       && (elapsed_time + penalty) == (t.elapsed_time + t.penalty)){\n      return true;\n    }\n    return false;\n  }\n};\n\nint main(){\n  int duration;\n  int total_teams;\n  int total_problems;\n  int total_submission_records;\n  while(~scanf(\"%d %d %d %d\",\n\t       &duration,\n\t       &total_teams,\n\t       &total_problems,\n\t       &total_submission_records)){\n\n    if(duration == 0\n       && total_teams == 0\n       && total_problems == 0\n       && total_submission_records == 0) break;\n\n    Team teams[51];\n    int freq[51][11];\n    \n    memset(freq,0,sizeof(freq));\n    for(int team_idx=0;team_idx < total_teams; team_idx++){\n      teams[team_idx].id = team_idx+1;\n    }\n    for(int submit_idx=0;submit_idx< total_submission_records; submit_idx++){\n      int elapsed_time;\n      int team_number;\n      int problem_number;\n      int judgement;\n      scanf(\"%d %d %d %d\",\n\t    &elapsed_time,\n\t    &team_number,\n\t    &problem_number,\n\t    &judgement);\n      if(judgement == 0){\n\tteams[team_number-1].elapsed_time\n\t  += elapsed_time;\n\tteams[team_number-1].penalty\n\t  += freq[team_number-1][problem_number-1] * 20;\n\tfreq[team_number-1][problem_number-1] = 0;\n\tteams[team_number-1].solved |= (1<<(problem_number-1));\n      }\n      else{\n\tif(!(teams[team_number-1].solved & (1<<(problem_number-1)))){\n\t  freq[team_number-1][problem_number-1]++;\n\t}\n      }\n    }\n\n    sort(teams,teams+total_teams);\n    for(int team_idx=0;team_idx+1 < total_teams; team_idx++){\n      if(teams[team_idx] == teams[team_idx+1]){\n\tprintf(\"%d=\",teams[team_idx].id);\n      }\n      else{\n\tprintf(\"%d,\",teams[team_idx].id);\n      }\n    }\n    printf(\"%d\\n\",teams[total_teams-1].id);\n  }\n}"
  },
  {
    "language": "C++",
    "code": "#include <cmath>\n#include <iostream>\n#include <vector>\n#include <queue>\n#include <map>\n#include <set>\n#include <tuple>\n#include <algorithm>\n#include <utility>\n#include <iomanip>\n\n#define int long long int\n#define rep(i, n) for(int i = 0; i < (n); ++i)\n\nusing namespace std;\n\ntypedef pair<int, int> P;\n\nconst int INF = 1e15;\nconst int MOD = 1e9+7;\n\nbool comp(tuple<int, int, int>& x, tuple<int, int, int>& y){\n    int x_i = get<0>(x);\n    int y_i = get<0>(y);\n    int x_a = get<1>(x);\n    int y_a = get<1>(y);\n    int x_t = get<2>(x);\n    int y_t = get<2>(y);\n\n    if(x_a != y_a){\n        return x_a > y_a;\n    }\n\n    if(x_t != y_t){\n        return x_t < y_t;\n    }\n\n    return x_i > y_i;\n}\n\nsigned main(){\n    while(true){\n        int M, T, P, R;\n        cin >> M >> T >> P >> R;\n\n        if(M == 0 && T == 0 && P == 0 && R == 0){\n            break;\n        }\n\n        vector<vector<int>> res(T+1, vector<int>(P+1));\n        vector<vector<bool>> ac(T+1, vector<bool>(P+1, false));\n        vector<int> time(T+1);\n\n        rep(i, R){\n            int m, t, p, j;\n            cin >> m >> t >> p >> j;\n\n            if(j == 0){\n                ac[t][p] = true;\n                time[t] = m;\n            }\n            res[t][p]++;\n        }\n\n        vector<tuple<int, int, int>> rank;\n        for(int i = 1; i <= T; i++){\n            int pena = 0;\n            int AC = 0;\n            for(int j = 1; j <= P; j++){\n                if(ac[i][j]){\n                    pena += res[i][j];\n                    AC++;\n                }\n            }\n            pena *= 20;\n\n            rank.emplace_back(i, AC, time[i] + pena);\n        }\n        sort(rank.begin(), rank.end(), comp);\n\n        rep(i, T-1){\n            int r = get<0>(rank[i]);\n            int x_a = get<1>(rank[i]);\n            int y_a = get<1>(rank[i+1]);\n            int x_t = get<2>(rank[i]);\n            int y_t = get<2>(rank[i+1]);\n\n            if(x_a != y_a || x_t != y_t){\n                cout << r << \",\";\n            }else{\n                cout << r << \"=\";\n            }\n        }\n        cout << get<0>(rank[T-1]) << endl;\n\n    }\n\n    return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n#include <cstring>\n#include <map>\n#include <set>\n#include <vector>\n#include <queue>\n#include <stack>\n#define MAX_T 50\n#define MAX_P 10\nusing namespace std;\n\ntypedef pair<int,int> S;\ntypedef vector<S> V;\ntypedef map<int,set<S>> MM;\n\nbool pairCompare(const S& firstElof, const S& secondElof)\n{\n    return firstElof.second > secondElof.second;\n}\n\nint main(void)\n{\n    int M, T, P, R;\n    while (cin >> M >> T >> P >> R) {\n        if (M == 0 && T == 0 && P == 0 && R == 0) break;\n        int m, t, p, j, data[T + 1][P + 1][2];\n        memset(data, 0, sizeof(data));\n        for (int i = 0; i < R; i++) {\n            cin >> m >> t >> p >> j;\n            if (j == 0) {\n                data[t][0][0] += (m + data[t][p][1]);\n                data[t][0][1]++;\n            } else\n                data[t][p][1] += 20;\n        }\n        V v;\n        MM mm;\n        queue<int> ans;\n        for (int i = 1; i <= T; i++) {\n            //cout << i << \" : \" << data[i][0][1] << \" : \" << data[i][0][0] << endl;\n            if (data[i][0][1] == 0) data[i][0][0] = -2;\n            mm[data[i][0][1]].insert(S(data[i][0][0],i));\n        }\n        for (int i = P; i >= 0; i--) {\n            stack<int> tmp;\n            auto f = mm[i].begin();\n            for (auto it = mm[i].begin(); it != mm[i].end(); it++) {\n                //cout << \" *f.f = \" << (*f).first << \" *it.f = \" << (*it).first << \" tmp size = \" << tmp.size() << endl;\n                if ((*f).first == (*it).first) tmp.push((*it).second); \n                else {\n                    if (ans.size()) ans.push(-1);\n                    while (tmp.size()) {\n                        advance( f, 3);\n                        auto ss = tmp.top(); tmp.pop();\n                        //cout << \"ss \" << ss << endl;\n                        ans.push(ss);\n                        if (tmp.size()) ans.push(-3);\n                    }\n                    tmp.push((*it).second);\n                    //advance( f, 2);\n                    //cout << (*f).first << endl;\n                }\n            }\n            if (tmp.size()) {\n                if (ans.size())ans.push(-1);\n                while (tmp.size()) {\n                    auto ss = tmp.top(); tmp.pop();\n                    ans.push(ss);\n                    if (tmp.size()) ans.push(-3);\n                }\n            }\n        }\n        while (ans.size()) {\n            int tmp = ans.front(); ans.pop();\n            if (tmp == -1) cout << \",\";\n            else if (tmp == -3) cout << \"=\";\n            else cout << tmp;\n        }\n        cout << endl;\n        \n    }\n    \n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<map>\n#include<vector>\n#include<algorithm>\n#include<cstring>\n\nusing namespace std;\n\nint wrong[100][100];\n\nint main(void) {\n    while(true) {\n        int M,T,P,R;\n        scanf(\"%d%d%d%d\", &M, &T, &P, &R);\n        if(!M) break;\n\n        vector<pair<pair<int,int>,int> > pt(T); // solved, -time, tid\n\n        memset(wrong, 0, sizeof(wrong));\n        for(int i=0; i<T; i++) {\n            pt[i].second = i+1;\n        }\n        for(int i=0; i<R; i++) {\n            int m,t,p,j;\n            scanf(\"%d%d%d%d\", &m,&t,&p,&j);\n            if(!j) { // success\n                pt[t-1].first.first++;\n                pt[t-1].first.second -= m;\n                pt[t-1].first.second -= 20*wrong[t-1][p-1];\n            } else { // fail\n                wrong[t-1][p-1]++;\n            }\n        }\n\n        sort(pt.begin(), pt.end());\n        reverse(pt.begin(), pt.end());\n\n        pair<int,int> last = pt[0].first;\n        printf(\"%d\", pt[0].second);\n        for(int i=1; i<pt.size(); i++) {\n            if(pt[i].first == last)\n                printf(\"=\");\n            else\n                printf(\",\");\n            printf(\"%d\", pt[i].second);\n            last = pt[i].first;\n        }\n        printf(\"\\n\");\n\n    }\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <queue>\n#include <tuple>\n#include <map>\n#include <set>\n\nusing namespace std;\n\n#define rep(i,n) for(int i = 0; i < n; i++)\n\nstruct Team {\n\tint no, time;\n\tmap<int, int> wa;\n\tset<int> ac;\n\tTeam() : time(0) {}\n\tbool operator < (const Team &other) {\n\t\tif (ac.size() == other.ac.size()) {\n\t\t\tif (time == other.time) {\n\t\t\t\treturn no < other.no;\n\t\t\t}\n\t\t\treturn time > other.time;\n\t\t}\n\t\treturn ac.size() < other.ac.size();\n\t}\n\tbool operator == (const Team &other) {\n\t\treturn ac.size() == other.ac.size() && time == other.time;\n\t}\n};\n\nint main() {\n\tint M, T, P, R;\n\twhile (cin >> M >> T >> P >> R && M) {\n\t\tvector<Team> teams(T);\n\t\trep(i, T) {\n\t\t\tteams[i].no = i + 1;\n\t\t}\n\t\trep(i, R) {\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tt--;\n\t\t\tif (j == 0) {\n\t\t\t\tteams[t].time += teams[t].wa[p] * 20 + m;\n\t\t\t\tteams[t].ac.insert(p);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tteams[t].wa[p]++;\n\t\t\t}\n\t\t}\n\t\tsort(teams.begin(), teams.end());\n\t\treverse(teams.begin(), teams.end());\n\t\trep(i, T-1) {\n\t\t\tcout << teams[i].no;\n\t\t\tif (teams[i] == teams[i + 1]) {\n\t\t\t\tcout << \"=\";\n\t\t\t}else{\n\t\t\t\tcout << \",\";\n\t\t\t}\n\t\t}\n\t\tcout << teams.back().no << endl;\n\t}\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n#include <functional>\nusing namespace std;\nint main()\n{\n    while (1) {\n        int mm,m,tt,t,pp,p,rr,r;\n        cin >> mm >> tt >> pp >> rr;\n        struct Teem{\n            int judge[10] = {0};\n        }teem[50];\n        int sum[51] = {0};\n        int ans[51] = {0};\n        for (int i = 0; i < rr; i++ ) {\n            cin >> m >> t >> p >> r;\n            if (r == 0) {\n                sum[t] = sum[t] + m + teem[t].judge[p];\n                ans[t]++;\n            }else teem[t].judge[p] += 20;\n        }\n        int max = 0;\n        vector<int> times = {0};\n        int count = 0;\n        for (int i = 1; i < tt; i++ ) {\n            if (max == ans[i]) {\n                times.push_back(sum[i]);\n                count++;\n            }\n            if (max < ans[i]) {\n                max = ans[i];\n                times = {0};\n                times.push_back(sum[i]);\n                count=1;\n            }\n        }\n        sort(times.begin(), times.end(), greater<int>());\n        int tmp1 = -1,tmp2 = -1;\n        for (int i = max; i > 0; i--) {\n            for (int k = count-1; k >= 0; k--) {\n                for (int m =tt; m > 0; m--) {\n                    if (i == ans[m]) {\n                        if (times[k] == sum[m]) {\n                            if (tmp2 == ans[m]) {\n                                if (tmp1 == sum[m]) cout << \"=\" ;\n                                else cout << \",\" ;\n                            }\n                            else if(tmp2 != -1 && tmp1 != -1) cout << \",\" ;\n                            cout << m ;\n                            tmp1 = sum[m];\n                            tmp2 = ans[m];\n                            ans[m] = -1;\n                        }\n                    }\n                }\n            }\n            max = 0;\n            times = {0};\n            count = 0;\n            for (int x = 1; x < tt; x++ ) {\n                if (max == ans[x]) {\n                    times.push_back(sum[x]);\n                    count++;\n                }\n                if (max < ans[x]) {\n                    max = ans[x];\n                    times = {0};\n                    times.push_back(sum[x]);\n                    count=1;\n                }\n            }\n            sort(times.begin(), times.end(), greater<int>());\n        }\n        for (int i = tt; i > 0; i--) {\n            if (ans[i] == 0) {\n                if (tmp2 == -1){}\n                else {\n                    if (tmp2 == 0) cout << \"=\";\n                    else cout << \",\";\n                }\n                cout << i ;\n                tmp2 = 0;\n            }\n        }\n        cout << endl;\n        if (tmp1 == -1) break;\n    }\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n#include <cstdio>\n\n#define REP(i,n) for( int i = 0; i < n; i++ )\n\n\nusing namespace std;\n\n/*\n より多くの問題に正解したチームを上位とする．\n 正解した問題数が同じ場合は，所要時間合計の少ないチームを上位とする．\n 複数のチームが同数の問題に正解し，所要時間合計も同じなら，それらのチームを同順位とする．\n */\n\nstruct team{\n\tint ans,time,name;\n    int q[50];\n    \n\tteam() : ans(0), time(0), name(0) {}\n    \n    bool operator <( const team& Right )const {\n        return  ans != Right.ans ? ans < Right.ans :\n        time != Right.time ? time > Right.time :\n        name <  Right.name;\n    }\n};\n\n\nint main()\n{\n\tint M,T,P,R;\n\t// Mは，コンテストの始まりから終わりまでの時間である． Tは，チーム数である． Pは，問題数である． Rは，提出記録の数である\n\twhile( cin >> M >> T >> P >> R )\n\t{\n\t\tint m,t,p,k;\n\t\tvector<team> team_array(T+1);\n\t\tif( T == 0 ) return 0;\n\t\tfor( int i = 1; i <= T; i++)\n\t\t\tteam_array[i].name = i;\n\t\t// mkは，経過時間である． tkは，チーム番号である． pkは，問題番号である． jkは，判定結果を表す（0なら正解，0以外なら不正解）\n\t\tREP(i,R)\n\t\t{\n\t\t\tcin >> m >> t >> p >> k;\n\t\t\tteam &tm = team_array[t];\n\t\t\tif( !k ){\n\t\t\t\ttm.ans++;\n\t\t\t\ttm.time += m;\n                if( tm.q[p] )\n                    tm.time += 20 * tm.q[p];\n\t\t\t}\n            else{\n                tm.q[p]++;\n            }\n            \n\t\t}\n\t\t\n        sort( team_array.begin() + 1 , team_array.end() );\n\t\t\n        for( int i = T; i > 0; i-- )\n        {\n            char c;\n            if( i == 1 ){\n                cout << team_array[i].name << endl;\n                continue;\n            }\n            else if ( team_array[i].ans == team_array[i-1].ans &&\n                team_array[i].time == team_array[i-1].time) {\n                c = '=';\n            }\n            else{\n                c = ',';\n            }\n\t\t\tcout << team_array[i].name << c;\n        }\n        \n\t}\n\treturn 0;"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstdlib>\n#include <cstdio>\n#include <cstring>\n#include <cmath>\n#include <stack>\n#include <queue>\n#include <cctype>\n#include <complex>\n#include <vector>\n#include <set>\n#include <map>\n#include <algorithm>\n#include <functional>\n#include <cassert>\n#include <iomanip>\n\nusing namespace std;\n\n#define all(x) begin(x), end(x)\n#define rall(x) (x).rbegin(), (x).rend()\ntypedef long long ll;\ntypedef complex<int> P;\ntypedef pair<int, int> pii;\ntypedef tuple<int, int, int> tii;\nconst double EPS = 1e-10;\nconst double PI = acos(-1.0);\n\n\nconst int pena = 20;\n\nstruct st{\n\tint id;\n\tint ac;\t//\n\tint t;\t//\n\tvector<int> ac_t;\n\tvector<int> wa_cnt;\n\n\tst(int p){\n\t\tac = 0; t = 0;\t//\n\t\tac_t = vector<int>(p, -1);\n\t\twa_cnt.resize(p);\n\t}\n\tbool operator<(const st& o) const{\n\t\treturn (*this).ac == o.ac ? (*this).t > o.t : (*this).ac < o.ac;\n\t}\n\tbool operator==(const st& o) const{\n\t\treturn (*this).ac == o.ac && (*this).t == o.t;\n\t}\n\tbool operator!=(const st& o) const{\n\t\treturn !((*this) == o);\n\t}\n\n\tvoid calc(){\n\t\tfor(int i=0;i<ac_t.size();++i){\n\t\t\tif(ac_t[i] == -1) continue;\n\t\t\t++ac;\n\t\t\tt += ac_t[i] + wa_cnt[i] * pena;\n\t\t}\n\t}\n};\n\nvoid debug(vector<st> team){\n\tfor(auto& o : team){\n\t\tcerr<< o.id<< \" : \";\n\t\tcerr<< o.ac<< \" \"<< o.t;\n\t\tcerr<< \" , \";\n\t\tfor(auto& p : o.ac_t) cerr<< \" \"<< p;\n\t\tcerr<< \" , \";\n\t\tfor(auto& p : o.wa_cnt) cerr<< \" \"<< p;\n\t\tcerr<< endl;\n\t}\n}\n\nbool solve(){\n\tint m, t, p, r;\n\tcin>> m>> t>> p>> r;\n\tif(!m && !t && !p && !r) return false;\n\tvector<st> team(t, st(p));\n\tfor(int i=0;i<t;++i) team[i].id = i + 1;\n\n\tfor(int i=0;i<r;++i){\n\t\tint m, t, p, j;\n\t\tcin>> m>> t>> p>> j;\n\t\t--t; --p;\n\t\tif(j == 0){\n\t\t\tteam[t].ac_t[p] = m;\n\t\t}else{\n\t\t\t++team[t].wa_cnt[p];\n\t\t}\n\t}\n\n\t//debug(team);\n\tfor(auto& o : team) o.calc();\n\tsort(rall(team));\n\t//debug(team);\n\n\tfor(int i=0;i<team.size();++i){\n\t\tif(i) cout<< \",\";\n\t\tvector<int> tmp;\n\t\ttmp.push_back(team[i].id);\n\t\tfor(int j=i+1;j<team.size();++j){\n\t\t\tif(team[i] != team[j]) break;\n\t\t\ttmp.push_back(team[j].id);\n\t\t}\n\t\tsort(rall(tmp));\n\t\tfor(int j=0;j<tmp.size();++j){\n\t\t\tif(j) cout<< \"=\";\n\t\t\tcout<< tmp[j];\n\t\t}\n\t\ti += tmp.size() - 1;\n\t}\n\tcout<< endl;\n\n\treturn true;\n}\n\nint main(){\n\tcout.setf(ios::fixed); cout.precision(10);\n\twhile(solve());\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstdio>\n#include <vector>\n#include <queue>\n#include <stack>\n#include <map>\n#include <string>\n#include <algorithm>\n\nusing namespace std;\n\nstruct Team {\n    Team(int team_number) {\n        tn_ = team_number;\n        n_ = 0;\n        t_ = 0;\n        pc_ = 0;\n    }\n    int tn_;\n    int n_;\n    int t_;\n    int pc_;\n    vector<int> p_list_;\n};\n\nint main (int argc, char *argv[]) {\n    int M, T, P, R;\n    int m, t, p, j;\n    vector<Team> tv;\n\n    while (cin>>M>>T>>P>>R) {\n        for (int i = 0; i < T; ++i) {\n            tv.push_back(Team(i+1));\n        }\n        for (int i = 0; i < R; ++i) {\n            cin>>m>>t>>p>>j;\n            if (j != 0) {\n                tv[t-1].p_list_.push_back(p);\n            }\n            else {\n                for (auto e : tv[t-1].p_list_) {\n                    if (e == p) {\n                        tv[t-1].pc_++;\n                    }\n                }\n                tv[t-1].n_++;\n                tv[t-1].t_ += m;\n            }\n        }\n        for (auto& e : tv) {\n            e.t_ += e.pc_ * 20;\n        }\n\n        // for (auto e : tv) {\n        //     cout<<\"-----------\"<<endl;\n        //     cout<<e.tn_<<endl;\n        //     cout<<e.n_<<endl;\n        //     cout<<e.t_<<endl;\n        //     cout<<e.pc_<<endl;\n        //     for (auto c : e.p_list_) {\n        //         cout<<c<<\" \";\n        //     }\n        //     cout<<endl;\n        //     cout<<\"-----------\"<<endl;\n        // }\n\n        sort(tv.begin(), tv.end(), [](const auto& lhs, const auto& rhs) -> bool{\n            if (lhs.n_ != rhs.n_ ) {\n                return lhs.n_ > rhs.n_;\n            }\n            else if (lhs.n_ == rhs.n_ && lhs.t_ != rhs.t_) {\n                return lhs.t_ < rhs.t_;\n            }\n            else return lhs.tn_ > rhs.tn_;\n        });\n\n        const int size = static_cast<int>(tv.size());\n        for (int i = 0; i < size; ++i) {\n            cout<<tv[i].tn_;\n            if(i != size -1) {\n                if (tv[i].n_ != tv[i+1].n_ || tv[i].t_ != tv[i+1].t_ ) {\n                    cout<<\",\";\n                }\n                else cout<<\"=\";\n            }\n        }\n        cout<<endl;\n        tv.clear();\n    }\n\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <iomanip>\n#include <vector>\n#include <queue>\n#include <stack>\n#include <map>\n#include <set>\n#include <cmath>\n#include <cstdio>\n#include <cstdlib>\n#include <functional>\n#include <string>\n#include <algorithm>\n#include <string>\n#include <climits>\n#include <utility>\n\n#define REP(i, n) for (int (i) = 0; (i) < (int)(n); (i)++)\n#define REG(i, a, b) for (int (i) = ((int)(a)); (i) < ((int)(b)); i++)\n#define ALL(V) (V).begin(), (V).end()\n#define PRINT(STR) cout << (STR) << endl\n#define ROUNDED(N) fixed << setprecision(N)\n#define SPACE \" \"\n\ntypedef long long ll;\nusing namespace std;\n\nint nextInt() { int n; cin >> n; return n; }\ndouble nextDouble() { double d; cin >> d; return d; }\nstring nextString() { string str; cin >> str; return str; }\n\nint main() {\n\tcin.tie(0); //?????±?????????????????????\n\tios::sync_with_stdio(false); //printf??¨??±??????????????????\n\tint M,T,P,R;\n\twhile(cin>>M>>T>>P>>R,M){\n\t\tvector<vector<pair<int,int>>> team(T,vector<pair<bool,int>>(P,make_pair(false,0)));//first is the number of problem\n\t\tREP(i,R){\n\t\t\tint m,t,p,j;\n\t\t\tcin >> m>>t>>p>>j;\n\t\t\tif(!j){\n\t\t\t\tteam[t][p].first = true;\n\t\t\t\tteam[t][p].second += t;\n\t\t\t}else{\n\t\t\t\tteam[t][p].second += 20;\n\t\t\t}\n\t\t}\n\t\tvector<pair<int,pair<int,int>>> teamres(T,make_pair(0,make_pair(15000,0)));\n\t\tREP(i,T){\n\t\t\tteamres[i].second.second = i;\n\t\t\tREP(j,P){\n\t\t\t\tif(team[i][j].first){\n\t\t\t\t\tteamres[i].first++;\n\t\t\t\t\tteamres[i].second.first -= team[i][j].second;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tsort(ALL(teamres));\n\t\treverse(ALL(teamres));\n\t\t\tREP(i,T-1){\n\t\t\t\tif(teamres[i].first == teamres[i+1].first && teamres[i].second.first == teamres[i+1].second.first){\n\t\t\t\t\tcout << teamres[i].second.second << \"=\";\n\t\t\t\t}else{\n\t\t\t\t\tcout << teamres[i].second.second << \",\";\n\t\t\t\t}\n\t\t\t}\n\t\t\tcout << teamres[T-1].second.second << endl;\n\n}\nreturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstdio>\n#include <algorithm>\n#include <string>\n#include <cstring>\n#include <cctype>\n#include <cmath>\n#include <stack>\n#include <queue>\n#include <vector>\n#include <set>\n#include <map>\n#include <list>\n#include <stdio.h>\n#include <string.h>\n#include <cstdlib>\n#include <math.h>\n#include <bitset>\n#define INF 2000000000\nusing namespace std;\nint dx[4]={1,0,-1,0},dy[4]={0,1,0,-1};\n#define ll long long\n#define PL pair<long long, long long>\n#define PR pair<int,int>\n#define mk make_pair\n#define en endl;\n#define WHITE 0\n#define BLACK 2\n#define GRAY 1\n#define RE return 0;\n#define int ll\n\n//ICPC Ranking  AOJ\n\n#define MAX 60\nint tt[55];\nint pena[55][15];\nint point[55];\nbool done[MAX];\n\nsigned main(){\n  cout<<\"Hello,World!\"<<en\n  int M,T,P,R;\n  while(cin>>M>>T>>P>>R&&!(M==0&&T==0&&P==0&&R==0)){\n    for(int i=0; i<=55; i++){\n      for(int j=0; j<=15; j++){\n        pena[i][j]=0;\n      }\n      tt[i]=0;\n      point[i]=0;\n      done[i]=false;\n    }\n    \n    for(int i=0; i<R; i++){\n      int m,t,p,j;\n      cin>>m>>t>>p>>j;\n      if(j){\n        pena[t][p]++;\n      }else{\n        tt[t]+=m;\n        tt[t]+=pena[t][p]*20;\n        point[t]++;\n      }\n    }\n    \n    PR pre;\n    for(int i=1; i<=T; i++){\n      int m=0,t=0;\n      int nowt=0;\n      for(int j=1; j<=T; j++){\n        if(done[j]) continue;\n        if(point[j]>m){\n          nowt=j;\n          m=point[j];\n          t=tt[j];\n        }else if(point[j]==m){\n          if(tt[j]<=t){\n            nowt=j;\n            m=point[j];\n            t=tt[j];\n          }\n        }\n      }\n      \n      done[nowt]=true;\n      if(i==1) cout<<nowt;\n      else{\n        if(pre.first==m&&pre.second==t){\n          cout<<'='<<nowt;\n        }else{\n          cout<<','<<nowt;\n        }\n      }\n      \n      pre.first=m; pre.second=t;\n    }\n    cout<<en\n  }\n  RE\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\nusing namespace std;\nint main(){\n\tint m,t,p,r;\n\twhile(cin>>m>>t>>p>>r){\n\t\tif(m==0) break;\n\t\tint mm,tt,pp,j;\n\t\tint ac[t+1],wa[t+1][p+1],pen[t+1];\n\t\tfor(int i=0;i<=t;i++){\n\t\t\tac[i]=0;\n\t\t\tpen[i]=0;\n\t\t\tfor(int j=0;j<=p;j++){\n\t\t\t\twa[i][j]=0;\n\t\t\t}\n\t\t}\n\t\tfor(int i=0;i<r;i++){\n\t\t\tcin>>mm>>tt>>pp>>j;\n\t\t\tif(j!=0){\n\t\t\t\twa[tt][pp]++;\n\t\t\t}\n\t\t\telse{\n\t\t\t\tac[tt]++;\n\t\t\t\tpen[tt]=pen[tt]+wa[tt][pp]*20+mm;\n\t\t\t\twa[tt][pp]=0;\n\t\t\t}\n\t\t}\n\t\tint ctct=0;\n\t\tfor(int i=1;i<=t;i++){\n\t\t\tint acmax=-1,penmin;\n\t\t\tfor(int j=t;j>=1;j--){\n\t\t\t\tif(ac[j]>acmax){\n\t\t\t\t\tacmax=ac[j];\n\t\t\t\t\tpenmin=pen[j];\n\t\t\t\t}\n\t\t\t\telse if(ac[j]==acmax){\n\t\t\t\t\tpenmin=min(penmin,pen[j]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tint ct=0;\n\t\t\tif(acmax==-1) break;\n\t\t\telse if(ctct>0) cout<<\",\";\n\t\t\tctct++;\n\t\t\tfor(int j=t;j>=1;j--){\n\t\t\t\tif(acmax==ac[j]&&penmin==pen[j]){\n\t\t\t\t\tif(ct>0) cout<<\"=\";\n\t\t\t\t\tcout<<j;\n\t\t\t\t\tac[j]=-2;\n\t\t\t\t\tpen[j]=0;\n\t\t\t\t\tct++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcout<<endl;\n\t}\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <queue>\n#include <algorithm>\nusing namespace std;\n\ntypedef pair<int, int> P;\n\nstruct Team {\n    int number=0;\n    int m = 0, p = 0;\n    vector<P> question;\n};\n\nbool comp_solved(const Team& e1, const Team& e2){\n    return e1.p > e2.p;\n}\nbool comp_m(const Team& e1, const Team& e2){\n    return e1.m < e2.m;\n}\nbool comp_n(const Team& e1, const Team& e2){\n    return e1.number > e2.number;\n}\n\nint main(void){\n    int M, T, P1, R;\n    int m[2001], t[2001], p[2001], j[2001];\n    while(cin >> M >> T >> P1 >> R){\n    \tif(M == 0 && T == 0 && P1 == 0 && R == 0){\n    \t\tbreak;\n    \t}\n    \tbool teamJoin[51];\n    \tfor(int i=0;i<T;i++){\n    \t\tteamJoin[i] = false;\n    \t}\n        vector<vector<Team> > a;\n        vector<vector<Team> > b;\n        Team team[51];\n        for(int i=0;i<R;i++){\n            cin >> m[i] >> t[i] >> p[i] >> j[i];\n            team[t[i]-1].number = t[i];\n            teamJoin[t[i]-1] = true;\n            if(j[i] == 0){\n                team[t[i]-1].p++;\n                team[t[i]-1].m += m[i];\n                if(!team[t[i]-1].question.empty()){\n                    int j=0;\n                    while(team[t[i]-1].question.begin() + j <= team[t[i]-1].question.end() ) {\n                        P ans = team[t[i]-1].question[j];\n                        if(ans.first == p[i]){\n                            team[t[i]-1].m += ans.second;\n                        }\n                        j++;\n                    }\n                }\n            }else{\n                team[t[i]-1].question.push_back(P(p[i], m[i]));\n            }\n        }\n        sort(team, team+T, comp_solved);\n        int cntE=0, cntS=0;\n        int minP = team[0].p;\n        for(int i=0;i<T;i++){\n            if(team[i].p == minP){\n                cntE++;\n            }else{\n                sort(team+cntS,team+cntE,comp_m);\n                cntS = cntE + 1;\n                cntE = cntS;\n                minP = team[i].p;\n            }\n        }\n        int minM = team[0].m;\n        cntE=0;\n        cntS=0;\n        for(int i=0;i<T;i++){\n            if(team[i].m == minM){\n                cntE++;\n            }else{\n                sort(team+cntS,team+cntE,comp_n);\n                cntS = cntE + 1;\n                cntE = cntS;\n                minM = team[i].m;\n            }\n        }\n        \n        for(int i=0;i<T;i++){\n        \tif(team[i].number == 0 ){\n        \t\tfor(int j=T-1;j>=0;j--){\n        \t\t\tif(teamJoin[j] == false){\n        \t\t\t\tcout << j+1;\n        \t\t\t\tteamJoin[j] = true;\n        \t\t\t\tbreak;\n        \t\t\t}\n        \t\t}\n        \t}else{\n        \t\tcout << team[i].number;\n        \t}\n            if(i==T-1){\n                break;\n            }\n            if(team[i].p != team[i+1].p){\n                cout << \",\";\n            }else{\n                if(team[i].m != team[i+1].m){\n                    cout << \",\";\n                }else{\n                    cout << \"=\";\n                }\n            }\n        }\n        cout << endl;\n    }\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n#define FOR(i, s, n) for(int i = s; i < (int)n; i++)\n#define per(i, n) for(int i = n; i >= 0; i--)\n#define ROF(i, s, n) for(int i = s; i >= (int)n; i--)\n#define FORIT(i, A) for (auto i : A)\n#define PRINT(x) cout << (x) << \"\\n\"\n#define ALL(a) (a).begin(),(a).end()\n#define RALL(a) (a).rbegin(), (a).rend()\n#define MP make_pair\n#define EACH(i, n) for (__typeof((n).begin()) i = (n).begin(); i != (n).end(); ++i)\n#define SZ(a) int((a).size())\n#define EXIST(s,e) ((s).find(e)!=(s).end())\n#define SORT(c) sort((c).begin(),(c).end())\n#define CLR(a) memset((a), 0 ,sizeof(a))\n#define NCLR(a) memset((a), -1 ,sizeof(a))\n#define dump(x) cout << #x << \" = \" << (x) << \"\\n\";\n#define debug(x) cout << #x << \" = \" << (x) << \" (L\" << __LINE__ << \")\" << \" \" << __FILE__ << \"\\n\";\n#define sq(n) (n) * (n)\ntypedef vector<int> VI;\ntypedef vector<VI> VVI;\ntypedef vector<string> VS;\ntypedef pair<int, int> PII;\ntypedef long long LL;\ntypedef vector<LL> VLL;\ntypedef vector<VLL> VVLL;\ntypedef unsigned int uint;\ntypedef unsigned long long ull;\ntypedef priority_queue<int> maxpq;\ntypedef priority_queue< int, vector<int>, greater<int> > minpq;\ntypedef complex<double> P;\nstatic const double EPS = 1e-10;\nstatic const double PI = acos( -1.0 );\nstatic const int mod = 1000000007;\nstatic const int INF = 1 << 29;\nstatic const LL LL_INF = 1152921504606846976;\nstatic const int dx[] = { -1, 0, 1, 0, 1, -1, 1, -1 };\nstatic const int dy[] = { 0, -1, 0, 1, 1, 1, -1, -1 };\n\n\nint main() {\n\tint m, t, p, r;\n\tvector<pair<PII, int> > _team;\n\tmap<PII, int> ma;\n\twhile ( ~scanf( \"%d %d %d %d\", &m, &t, &p, &r ) && m && t && p ) {\n\t\t_team.resize( t );\n\t\tfor ( int i = 0; i < t; i++ ) {\n\t\t\t_team[ i ] = make_pair( PII( 0, 0 ), i + 1 );\n\t\t}\n\t\tfor ( int i = 0; i < r; i++ ) {\n\t\t\tint tid, pid, time, j;\n\t\t\tscanf( \"%d %d %d %d\", &time, &tid, &pid, &j );\n\t\t\tif ( j ) {\n\t\t\t\tma[ PII( tid, pid ) ]++;\n\t\t\t}\n\t\t\telse {\n\t\t\t\t_team[ tid - 1 ].first.first++;\n\t\t\t\t_team[ tid - 1 ].first.second -= time + ma[ PII( tid, pid ) ] * 20;\n\t\t\t}\n\t\t}\n\t\tsort( _team.rbegin(), _team.rend() );\n\t\tfor ( int i = 0; i < t - 1; i++ ) {\n\t\t\tprintf( \"%d\", _team[ i ].second );\n\t\t\tif ( _team[ i ].first == _team[ i + 1 ].first ) {\n\t\t\t\tprintf( \"=\" );\n\t\t\t}\n\t\t\telse {\n\t\t\t\tprintf( \",\" );\n\t\t\t}\n\t\t}\n\t\tprintf( \"%d\\n\", _team[ t - 1 ].second );\n\t\tma.clear();\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\nusing namespace std;\n\nconst int INF=5000000;\n\nint data[51][12];\n\nint main(){\n\tint M,T,P,R;\n\twhile(cin>>M>>T>>P>>R && M){\n\t\tfill((int*)data,(int*)(data+12),0);\n\t\tfor(int i=0;i<R;i++){\n\t\t\tint m,t,p,j;\n\t\t\tcin>>m>>t>>p>>j;\n\t\t\tif(j==0){\n\t\t\t\tdata[t][0]++;\n\t\t\t\tdata[t][11]+=m+data[t][p]*20;\n\t\t\t}\n\t\t\telse data[t][p]++;\n\t\t}\n\t\tint prev[2]={INF,0};\n\t\tfor(int i=0;i<T;i++){\n\t\t\tint ans=0;\n\t\t\tint now[2]={0,INF};\n\t\t\tfor(int j=T;j>=0;j--){\n\t\t\t\tif(data[j][0]>now[0]){\n\t\t\t\t\tnow[0]=data[j][0];\n\t\t\t\t\tnow[1]=data[j][11];\n\t\t\t\t\tans=j;\n\t\t\t\t}\n\t\t\t\telse if(data[j][0]==now[0] && data[j][11]<now[1]){\n\t\t\t\t\tnow[1]=data[j][11];\n\t\t\t\t\tans=j;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(i){\n\t\t\t\tif(memcmp(now,prev,sizeof(now))==0)cout<<\"=\";\n\t\t\t\telse cout<<\",\";\n\t\t\t}\n\t\t\tcout<<ans;\n\t\t\tmemcpy(prev,now,sizeof(now));\n\t\t\tdata[ans][0]=-1;\n\t\t}\n\t\tcout<<endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n// #include <iostream>\n// #include <vector>\n#define rep(i, j, k) for (int i = (int)j; i < (int)k; i++)\n#define itrep(i, x) for (auto i = (x).begin(); i != (x).end(); i++)\n#define Sort(x) sort((x).begin(), (x).end())\n#define all(x) (x).begin(), (x).end()\n#define fi first\n#define se second\n#define vi vector<int>\n#define INF (int)1e9\n#define INFL 1e18\n#define MOD 1000000007\n#define pb push_back\n#define MP make_pair\n#define PI 3.1415926535\ntypedef long long int ll;\n//typedef std::pair<int,int> P;\nint D     = 1;\nint dx[4] = {0, 1, 0, -1}, dy[4] = {-1, 0, 1, 0};\n\nusing namespace std;\n\nint main() {\n    int M, T, PP, R;\n    while (cin >> M >> T >> PP >> R && M) {\n        vector<int> tim(T, 0);                                   //各チームの所用時間\n        vector<vector<bool>> solve(T, vector<bool>(PP, false));  //チームごとに各問題が解けたかどうかをboolで\n        vector<vector<int>> WA(T, vector<int>(PP, 0));           //チームごとに各問題を何回間違えたか\n\n        rep(i, 0, R) {\n            int m, t, p, r;\n            cin >> m >> t >> p >> r;\n            t--;\n            p--;\n            if (r == 0) {  //正解したら、その時のmを足してとsolveをtrueに\n                solve[t][p] = true;\n                tim[t] += m;\n            } else\n                WA[t][p]++;  //間違えたらWAを増やす\n        }\n\n        vector<int> solve_count(T, 0);  //チームごとに結局何問正解できたか\n        //２重forで数えます\n        rep(i, 0, T) {\n            rep(j, 0, PP) {\n                if (solve[i][j]) {\n                    solve_count[i]++;\n                    tim[i] += WA[i][j] * 20;\n                }\n            }\n        }\n        vector<pair<int, pair<int, int>>> rank;  //いよいよソートします。この配列は３つの値を持ち、<問題数、時間、チーム番号>で格納。\n        /*ソート自体は昇順で行いますが、問題数は降順、時間は昇順、チーム番号は降順でソートしたいので、\n        降順にしたいものにはマイナスをつけることで対処します。これにより、元の値が大きいほど値が小さくなるのでうまくいきます。\n        */\n        rep(i, 0, T) {\n            rank.pb(MP(-solve_count[i], MP(tim[i], -(i + 1))));\n        }\n        Sort(rank);\n\n        /*rep(i,0,T){\n            cout<<rank[i].fi<<\" \"<<rank[i].se.fi<<\" \"<<-rank[i].se.se<<endl;\n        }*/\n\n        //最後に出力です。出力するものはrank[].se.seだけですが、マイナスをつけて格納しているのでマイナスをつけて出力します。\n        rep(i, 0, T) {\n            if (i) cout << \",\";\n            cout << -rank[i].se.se;\n            while (i + 1 < T && rank[i].fi == rank[i + 1].fi && rank[i].se.fi == rank[i + 1].se.fi) {\n                i++;\n                cout << \"=\";\n                cout << -rank[i].se.se;\n            }\n        }\n        cout << endl;\n    }\n\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <cmath>\n#include <bitset>\n#include <cstdio>\n#include <cstdlib>\n#include <cstring>\n#include <iostream>\n#include <algorithm>\n\nusing namespace std;\n\nclass team\n{\npublic:\n\tint num;\t// number of team\n\tint cnt;\t// solved problems\n\tint tim;\t// total consumed time\n\n\tteam(void) {};\n\tteam(int _num, int _cnt, int _tim) :\n\t\tnum(_num), cnt(_cnt), tim(_tim) {};\n\n\tfriend bool operator == (const team &a, const team &b)\n\t{\n\t\treturn a.cnt == b.cnt && a.tim == b.tim;\n\t}\n\n\tfriend bool operator < (const team &a, const team &b)\n\t{\n\t\tif (a.cnt != b.cnt)\n\t\t\treturn a.cnt > b.cnt;\n\t\telse if (a.tim != b.tim)\n\t\t\treturn a.tim < b.tim;\n\t\telse\n\t\t\treturn a.num < b.num;\n\t}\n};\n\nclass record\n{\npublic:\n\tint tim;\t// elapsed time\n\tint num;\t// number of team\n\tint pro;\t// problem number\n\tint jud;\t// judgement of submission\t\n\n\trecord(void) {};\n\trecord(int _tim, int _num, int _pro, int _jud) :\n\t\ttim(_tim), num(_num), pro(_pro), jud(_jud) {};\n};\n\nteam tm[55];\nrecord rc[2005];\nbitset<15> sl[55];\t// if team i solved problem j\n\nsigned main(void)\n{\n\tint m, t, p, r;\n\n\twhile (cin >> m >> t >> p >> r, m || t || p || r)\n\t{\n\t\tfor (int i = 1; i <= p; ++i)\n\t\t\tsl[i].reset();\n\t\t\n\t\tfor (int i = 1; i <= r; ++i)\n\t\t{\n\t\t\tint ti, ni, pi, ji;\n\t\t\tcin >> ti >> ni >> pi >> ji;\n\t\t\trc[i] = record(ti, ni, pi, ji);\n\n\t\t\tif (ji == 0)sl[ni].set(pi);\t// team ni solved pi\n\t\t}\n\n\t\tfor (int i = 1; i <= t; ++i)\n\t\t\ttm[i] = team(i, sl[i].count(), 0);\n\n\t\tfor (int i = 1; i <= r; ++i)\n\t\t{\n\t\t\tint ti = rc[i].tim;\n\t\t\tint ni = rc[i].num;\n\t\t\tint pi = rc[i].pro;\n\t\t\tint ji = rc[i].jud;\n\n\t\t\tif (ji == 0)\n\t\t\t\ttm[ni].tim += ti;\n\t\t\telse if (sl[ni][pi])\n\t\t\t\ttm[ni].tim += 20;\n\t\t}\n\n\t\tsort(tm + 1, tm + 1 + t);\n\n\t\tint stk[55], tot = 0;\n\n\t\tfor (int i = 1, j = 1; i <= t; i = j)\n\t\t{\n\t\t\twhile (j <= t && tm[i] == tm[j])\n\t\t\t\tstk[++tot] = j++;\n\t\t\t\n\t\t\tcout << tm[stk[tot--]].num;\n\n\t\t\twhile (tot)\n\t\t\t\tcout << \"=\" << tm[stk[tot--]].num;\n\n\t\t\tif (j <= t)\n\t\t\t\tcout << \",\";\n\t\t\telse \n\t\t\t\tcout << endl;\n\t\t}\n\t}\n\n//\tsystem(\"pause\");\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <utility>\n#include <algorithm>\n#include <tuple>\nusing namespace std;\n\nint main()\n{\n\tint M, T, P, R, m, t, p, j;\n\twhile (cin >> M >> T >> P >> R, M || T || P || R) {\n\t\tvector< vector< pair<int, int> > > data(T + 1, vector< pair<int, int> >(P, pair<int, int>(0,0)));\n\t\tvector< tuple<int, int, int> > score(T + 1);\n\t\tfor (int i = 0; i < R; i++) {\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tif (j == 0) {\n\t\t\t\tdata[t][p].first = m + data[t][p].second * 20;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdata[t][p].second++;\n\t\t\t}\n\t\t}\n\t\tfor (int i = 1; i <= T; i++) {\n\t\t\tint sco = 0,pena = 0;\n\t\t\tfor (int j = 0; j < P; j++) {\n\t\t\t\tif (data[i][j].first) {\n\t\t\t\t\tsco--;\n\t\t\t\t\tpena += data[i][j].first;\n\t\t\t\t}\n\t\t\t}\n\t\t\tscore[i] = tuple<int, int, int>(sco,pena,-i);\n\t\t}\n\t\tsort(score.begin()+ 1, score.end());\n\t\ttuple<int, int, int> temp = score[1];\n\t\tcout << -get<2>(score[1]);\n\t\tfor (int i = 2; i <= T; i++) {\n\t\t\tif (get<0>(temp) == get<0>(score[i]) && get<1>(temp) == get<1>(score[i])) {\n\t\t\t\tcout << \"=\";\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcout << \",\";\n\t\t\t}\n\t\t\tcout << -get<2>(score[i]);\n\t\t\ttemp = score[i];\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define F first\n#define S second\nusing namespace std;\ntypedef pair<int,int> P;\nint main(){\n    int M,T,P,R;\n    while(1){\n        cin>>M>>T>>P>>R;\n        if(M==0 && T==0 && P==0 && R==0) break;\n        int m,t,p,j;\n        bool judge[51][11]={};\n        int pena[51][11]={};\n        int time[51]={};\n        int rep[51]={};\n        pair<int,int> ans[51];\n        for(int i=0;i<R;i++){\n            cin>>m>>t>>p>>j;\n            if(j==0){\n                judge[t][p]=true;\n                time[t]+=m;\n                rep[t]++;\n            }\n            else pena[t][p]++;\n        }\n        \n        for(int i=1;i<=T;i++) ans[i].S=i,ans[i].F=rep[i];\n        \n        for(int i=1;i<=T;i++)\n            for(int j=1;j<=P;j++) if(judge[i][j]) time[i]+=pena[i][j]*20;\n        \n        sort(ans+1,ans+1+T);\n        reverse(ans+1,ans+1+T);\n        \n        bool flag=true;\n        while(flag){\n            flag=false;\n            for(int i=1;i<T;i++){\n                if(ans[i].F==ans[i+1].F && time[ans[i].S] > time[ans[i+1].S]){\n                    swap(ans[i],ans[i+1]);\n                    flag=true;\n                }\n            }\n        }\n        \n        for(int i=1;i<T;i++){\n            cout<<ans[i].S;\n            if(ans[i].F==ans[i+1].F && time[ans[i].S]==time[ans[i+1].S]) cout<<\"=\";\n            else cout<<\",\";\n        }\n        cout<<ans[T].S<<endl;\n    }\n    return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<vector>\n#include<algorithm>\nusing namespace std;\nvoid swapp(int*,int*);\nint main(){\n  while(1){\n    int M,T,P,R;\n    cin >> M >> T >> P >> R;\n    if(M==0&&T==0&&P==0&&R==0)break;\n    int te[51];\n    int tr[51];\n    int tp[51]={};\n    int tt[51]={};\n    vector<vector<int> >ts(T+1,vector<int>(P,0));\n    for(int i=0;i<R;i++){\n      int m,t,p,j;\n      cin >> m >> t >> p >> j;\n      if(j==0){\n\ttt[t]+=ts[t][p]+m;\n\ttp[t]++;\n      }\n      else{\n\tts[t][p]+=20;\n      }\n    }\n    for(int i=1;i<=T;i++){\n      //\n      // cout << i<<\" \"<<tp[i]<< \" \"<< tt[i]<<endl;\n      //\n      tr[i]=i;\n      te[i]=0;\n    }\n    //sort\n    for(int i=1;i<=T;i++){\n      for(int j=1;j<T;j++){\n\tif(tp[j]<tp[j+1]){\n\t  //  cout << tr[j]<<\" \"<<tr[j+1]<<endl;\n\t  swapp(tr+j,tr+j+1);\n\t  swapp(te+j,te+j+1);\n\t  swapp(tt+j,tt+j+1);\n\t  swapp(tp+j,tp+j+1);\n\t  //  cout << tr[j]<<\" \"<<tr[j+1]<<endl;\n\t}\n\telse if(tp[j]==tp[j+1]){\n\t  if(tt[j]>tt[j+1]){\n\t    swapp(tr+j,tr+j+1);\n\t    swapp(te+j,te+j+1);\n\t    swapp(tt+j,tt+j+1);\n\t    swapp(tp+j,tp+j+1);\n\t  }\n\t  else if(tt[j]==tt[j+1]){\n\t    if(tr[j]<tr[j+1]){\n\t      swapp(tr+j,tr+j+1);\n\t      swapp(te+j,te+j+1);\n\t      swapp(tt+j,tt+j+1);\n\t      swapp(tp+j,tp+j+1);\n\t    }\n\t    te[j]=1;\n\t    \n\t  }\n\t}\n      }\n    }\n    // for(int i=1;i<=T;i++)  cout << i<<\" \"<<tp[i]<< \" \"<< tt[i]<<endl;\n    for(int i=1;i<=T;i++){\n\n      cout << tr[i];\n      if(i<T){\n\tif(te[i]==1){\n\t  cout << '=';\n\t}\n\telse cout << ',';\n      }\n    }\n    cout << endl;\n  }\n  return 0;\n}\nvoid swapp(int*m,int*a){\n  int b;\n  b=*m;\n  *m=*a;\n  *a=b;\nreturn;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n#include <vector>\nusing namespace std;\n\nclass Team\n{\npublic:\n\tint id, penalty, acs;\n\tvector<int> buffer;\n\n\tTeam(int id, int problem_number) : id(id), penalty(0), acs(0), buffer(problem_number) { }\n\n\tvoid submit(int m, int p, int j)\n\t{\n\t\tif(!j) {\n\t\t\tacs++;\n\t\t\tpenalty += buffer[p] + m;\n\t\t} else {\n\t\t\tbuffer[p] += 20;\n\t\t}\n\t}\n};\n\nbool operator == (const Team& a, const Team& b)\n{\n\treturn a.acs == b.acs && a.penalty == b.penalty;\n}\n\nbool operator < (const Team& a, const Team& b)\n{\n\tif(a.acs != b.acs) return a.acs > b.acs;\n\tif(a.penalty != b.penalty) return a.penalty < b.penalty;\n\treturn a.id > b.id;\n}\n\nint main()\n{\n\tfor(int M, T, P, R; cin >> M >> T >> P >> R && (M||T||P||R); ) {\n\t\tvector<Team> teams;\n\n\t\tfor(int i = 0; i < T; i++) {\n\t\t\tteams.push_back(Team(i+1, P));\n\t\t}\n\n\t\tfor(int i = 0; i < R; i++) {\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tteams[t-1].submit(m, p-1, j);\n\t\t}\n\n\t\tsort(teams.begin(), teams.end());\n\n\t\tfor(int i = 0; i < T; i++) {\n\t\t\tcout << teams[i].id << (i+1 == T ? '\\n' : (teams[i] == teams[i+1] ? '=' : ','));\n\t\t}\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nbool comp(pair<pair<int,int>,int> p1, pair<pair<int,int>,int> p2){\n\n    if(p1.first.first == p2.first.first){\n        if(p1.first.second == p2.first.second){\n            return p1.second < p2.second;\n        }\n        return p1.first.second > p2.first.second;\n    }\n    return p1.first.first < p2.first.second;\n\n}\n\nint main() {\n\n    while(1) {\n\n        int M,T,P,R;\n\n        cin >> M >> T >> P >> R;\n\n        if(M == 0 && T == 0 && P == 0 && R == 0) break;\n\n        pair<int,int> team[T+1]; //solve_num, time\n        pair<bool,int> try_progrums[T+1]; //is_tryed, lasttime\n\n        team[0] = make_pair(-1,-1);\n\n        for(int i=1; i<T+1; i++){\n            team[i] = make_pair(0,0);\n            try_progrums[i] = make_pair(false,0);\n        }\n\n        for(int i=0; i<R; i++){\n\n            int m, t, p, j;\n\n            cin >> m >> t >> p >>j;\n\n            if(j == 0){\n                team[t].first++;\n                team[t].second += m;\n            }\n            else{\n                if(try_progrums[t].first){\n                    team[t].second += m - try_progrums[t].second + 20;\n                    try_progrums[t].second = m;\n                }\n                else{\n                    try_progrums[t].first = true;\n                    try_progrums[t].second = m;\n                }\n            }\n        }\n\n        pair<pair<int,int>,int> team_result[T+1];\n\n        for(int i=0; i<T+1; i++){\n            team_result[i] = make_pair(make_pair(team[i].first,team[i].second),i);\n        }\n\n        sort(team_result,team_result+T+1,comp);\n        \n        cout << team_result[T].second;\n\n        for(int i=T; i>1; i--){\n            if(team_result[i].first.first == team_result[i-1].first.first && team_result[i].first.second == team_result[i-1].first.second){\n                cout << '=' << team_result[i-1].second;\n            }\n            else{\n                cout << ',' << team_result[i-1].second;\n            }\n        }\n\n        cout << endl;\n\n\n\n\n    }\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\nusing namespace std;\n\nint main(){\n    while(true){\n        int contestTime, teamCount, probremCount, submitCount;\n        cin >> contestTime >> teamCount >> probremCount >> submitCount;\n        if(contestTime == 0){\n            break;\n        }\n        int teamPoint[teamCount], teamTime[teamCount], teamPenalty[teamCount][probremCount];\n        for(int i = 0; i < teamCount; i++){\n            teamPoint[i] = teamTime[i] = 0;\n            for(int j = 0; j < probremCount; j++){\n                teamPenalty[i][j] = 0;\n            }\n        }\n        for(int i = 0; i < submitCount; i++){\n            int m, t, p, j;\n            cin >> m >> t >> p >> j;\n            t--;\n            if(j == 0){\n                teamPoint[t]++;\n                teamTime[t] += m + teamPenalty[t][p] * 20;\n            }else{\n                teamPenalty[t][p]++;\n            }\n        }\n        int previousIndex = -1;\n        int previousPoint = -1;\n        int previousTime = -1;\n        for(int i = 0; i < teamCount; i++){\n            int maxPoint = 0;\n            int topTime = contestTime;\n            int topIndex = 0;\n            for(int j = 0; j < teamCount; j++){\n                if(teamPoint[j] > maxPoint){\n                    maxPoint = teamPoint[j];\n                    topTime = teamTime[j];\n                    topIndex = j;\n                }else if(teamPoint[j] == maxPoint){\n                    if(topTime >= teamTime[j]){\n                        topTime = teamTime[j];\n                        topIndex = j;\n                    }\n                }\n            }\n            if(i != 0 && maxPoint == previousPoint && topTime == previousTime){\n                cout << '=' << topIndex + 1;\n            }else if(i != 0){\n                cout << ',' << topIndex + 1;\n            }else{\n                cout << topIndex + 1;\n            }\n            previousIndex = topIndex;\n            previousTime = teamTime[topIndex];\n            previousPoint = teamPoint[topIndex];\n            teamPoint[topIndex] = -1;\n            teamTime[topIndex] = contestTime + 1;\n            \n        }\n            cout << endl;\n    }\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <map>\n#include <algorithm>\n#include <utility>\n#include <cmath>\nusing P = std::pair<int, int>;\nusing namespace std;\n\nstruct team_data {\n    int team_num = -1;\n    int solved_num = 0;\n    int sum_time = 0;    // minute\n    //vector<int> solved_time;\n    vector<int> penalty;\n};\n\nint main() {\n    int M, T, P, R;\n    while(cin >> M >> T >> P >> R, M) {\n        vector<team_data> v(T);\n        for(int i=0; i<v.size(); ++i) {\n            v[i].team_num = i+1;\n            v[i].penalty.resize(P);\n        }\n        for(int i=0; i<R; ++i) {\n            int m, t, p, j;\n            cin >> m >> t >> p >> j;\n            if(j != 0) {\n                v[t-1].penalty[p-1] += 20;\n            } else {\n                v[t-1].sum_time += m;\n                v[t-1].solved_num += 1;\n                v[t-1].sum_time += v[t-1].penalty[p-1];\n            }\n        }\n        vector<vector<team_data>> v2(P+1);\n        for(auto& x : v) {\n            v2[x.solved_num].push_back(x);\n        }\n        for(auto& x : v2) {\n            sort(x.begin(), x.end(), [](team_data const& t1, team_data const& t2) {\n                    return t1.team_num > t2.team_num;\n                    });\n            stable_sort(x.begin(), x.end(), [](team_data const& t1, team_data const& t2) {\n                    return t1.sum_time < t2.sum_time;\n                    });\n        }\n        vector<team_data> ret;\n        for(int i=v2.size()-1; i>=0; --i) {\n            for(auto& x2 : v2[i]) {\n                ret.push_back(x2);\n            }\n        }\n        for(int i=0; i<ret.size(); ++i) {\n            if(i != 0) {\n                if(ret[i-1].solved_num == ret[i].solved_num) {\n                    if(ret[i-1].sum_time == ret[i].sum_time) cout << '=';\n                    else cout << ',';\n                } else {\n                    cout << ',';\n                }\n            }\n            cout << ret[i].team_num;\n        }\n        cout << endl;\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstring>\n#include <iostream>\n#include <algorithm>\n#include <utility>\n\nusing namespace std;\ntypedef pair<int, int> PII;\n\nint WA[10][50];\n\nint main()\n{\n  int M, T, P, R;\n  while (cin>>M>>T>>P>>R, M||T||P||R) {\n    memset(WA, 0, sizeof(WA));\n    vector<pair<PII, int>> score(T);\n    for (int i=0; i<T; i++) {\n      score[i].second = -(i+1);\n    }\n\n    for (int r=0; r<R; r++) {\n      int m, t, p, j;\n      cin>>m>>t>>p>>j;\n      t--, p--;\n\n      if (!j) {\n        //cout << \"Team = \" << t << \", AC = \" << score[t].first.first << endl;\n\n        // AC\n        score[t].first.first--;\n        score[t].first.second += m + 20*WA[p][t];\n      } else {\n        // WA \n        WA[p][t]++;\n      }\n    }\n\n    sort(score.begin(), score.end());\n    for (int i=0; i<score.size(); i++) {\n      if (i>0) {\n        if (score[i].first.first == score[i-1].first.first && score[i].first.second == score[i-1].first.second) cout << \"=\";\n        else cout << \",\";\n      }\n      cout << -score[i].second;\n    }\n    cout << endl;\n  } \n}"
  },
  {
    "language": "C++",
    "code": "//\n//  main.cpp\n//  AOJ1187\n//\n//  Created by aki33524 on 2014/07/07.\n//  Copyright (c) 2014年 aki33524. All rights reserved.\n//\n\n#include <iostream>\n#include <string.h>\n#include <algorithm>\nusing namespace std;\n\ntypedef struct {int m, t, p; bool ac;} Submit;\n\ntypedef struct _Team{\n    int solved, penalty[20], alltime, id;\n    \n    bool operator<(const _Team& right) const{\n        return (solved < right.solved) || (solved == right.solved && alltime > right.alltime) || (solved == right.solved && alltime == right.alltime && id < right.id);\n    }\n    bool operator==(const _Team& right) const{\n        return solved == right.solved && alltime == right.alltime;\n    }\n    \n} Team;\n\nint M, T, P, R;\n\nSubmit submits[3000];\nTeam teams[60];\n\nvoid solve(){\n    memset(teams, 0, sizeof(teams));\n    for(int t=0; t<T; t++)\n        teams[t].id = t+1;\n    \n    for(int r=0; r<R; r++){\n        Submit &submit = submits[r];\n        Team &team = teams[submit.t];\n        \n        if(submit.ac){\n            team.solved++;\n            team.alltime += team.penalty[submit.p] + submit.m;\n        }else{\n            team.penalty[submit.p] += 20;\n        }\n    }\n    \n    sort(teams, teams+T);\n    \n    for(int t=T-1; 0<=t; t--){\n        Team &team = teams[t];\n        if(0<t){\n            cout << team.id;\n            cout << (team==teams[t-1] ? \"=\" : \",\");\n        }else{\n            cout << team.id << endl;\n        }\n    }\n}\n\nint main(int argc, const char * argv[])\n{\n    while(cin>>M>>T>>P>>R, M|T|P|R){\n        for(int r=0; r<R; r++){\n            Submit &s = submits[r];\n            int m, t, p, j;\n            cin>>m>>t>>p>>j;\n            s.m = m;\n            s.t = t-1;\n            s.p = p-1;\n            s.ac = j==0;\n        }\n        solve();\n    }\n    \n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#define N 2001\nusing namespace std;\nstruct team{\n  int tnum;\n  int correct;\n  int time;\n};\nint main(){\n  int m,t,p,r,im[N],it[N],ip[N],ij[N],incorrect,i,j;\n  struct team data[51];\n  while(1){\n    cin >> m >> t >> p >> r;\n    if(m==0&&t==0&&p==0&&r==0) break;\n    for(i=0;i<r;i++) cin >> im[i] >> it[i] >> ip[i] >> ij[i];\n    for(i=1;i<=t;i++){\n      data[i].tnum=i;\n      data[i].correct=0;\n      data[i].time=0;\n    }\n    for(i=0;i<r;i++){\n      if(ij[i]==0){\n\tdata[it[i]].correct++;\n      \tincorrect=0;\n\tfor(j=0;j<i;j++){\n\t  if(ip[i]==ip[j]) incorrect++;\n\t}\n\tdata[it[i]].time+=incorrect*20+im[i];\n      }\n    }\n    for(i=1;i<=t;i++){\n      for(j=2;j<=t;j++){\n\tif(data[j].tnum>data[j-1].tnum) swap(data[j],data[j-1]);\n      }\n    }\n    for(i=1;i<=t;i++){\n      for(j=2;j<=t;j++){\n\tif(data[j].time<data[j-1].time) swap(data[j],data[j-1]);\n      }\n    }\n    for(i=1;i<=t;i++){\n      for(j=2;j<=t;j++){\n\tif(data[j].correct>data[j-1].correct) swap(data[j],data[j-1]);\n      }\n    }\n    for(i=1;i<t;i++){\n      cout << data[i].tnum;\n      if(data[i].correct==data[i+1].correct&&data[i].time==data[i+1].time)\n\tcout << '=';\n      else cout << ',';\n      if(i==t-1) cout << data[i+1].tnum;\n    }\n    cout << endl;\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\nusing namespace std;\n\nstruct Team{\n\tvector<bool> is_solve;\n\tvector<int> WA;\n\tint team_id, time, solved;\n\tTeam(){}\n\tTeam(int P, int id){\n\t\tis_solve = vector<bool>(P, false);\n\t\tWA = vector<int>(P, 0);\n\t\tteam_id = id;\n\t\ttime = 0;\n\t\tsolved = 0;\n\t}\n};\nbool operator<(const Team &a, const Team &b){\n\tif( a.solved == b.solved ){\n\t\tif( a.time == b.time ){\n\t\t\treturn a.team_id > b.team_id;\n\t\t}\n\t\treturn a.time < b.time;\n\t}\n\treturn a.solved > b.solved;\n}\nbool operator==(const Team &a, const Team &b){\n\treturn a.solved == b.solved && a.time == b.time;\n}\n\nint main(){\n\tint M, T, P, R;\n\twhile( cin >> M >> T >> P >> R, M ){\n\t\tvector<Team> v;\n\t\tfor(int i = 0; i < T; i++){\n\t\t\tv.push_back( Team(P, i) );\n\t\t}\n\t\t\n\t\tfor(int i = 0; i < R; i++){\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tt--; p--;\n\t\t\tif( j == 0 ){ // Correct Answer\n\t\t\t\tfor(int k = 0; k < v.size(); k++){\n\t\t\t\t\tif( v[k].team_id == t ){\n\t\t\t\t\t\tv[k].is_solve[p] = true;\n\t\t\t\t\t\tv[k].solved++;\n\t\t\t\t\t\tv[k].time += m;\n\t\t\t\t\t\tv[k].time += 20 * v[k].WA[p];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else{ // Wrong Answer\n\t\t\t\tfor(int k = 0; k < v.size(); k++){\n\t\t\t\t\tif( v[k].team_id == t ){\n\t\t\t\t\t\tv[k].WA[p]++;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tsort(v.begin(), v.end());\n\t\tfor(int i = 0; i < v.size(); i++){\n\t\t\tif( i ){\n\t\t\t\tbool flag = (v[i-1] == v[i]);\n\t\t\t\tcout << (flag? \"=\" : \",\");\n\t\t\t}\n\t\t\tcout << v[i].team_id + 1;\n\t\t}\n\t\tcout << endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#define REP(i, a, n) for(int i = (a); i <= (n); i++)\nusing namespace std;\ntypedef pair<int, int> PII;\n\nint M, T, P, R, m, t, p, j, q[51][11];\nPII s[51];\n\nint main(void) {\n  while(cin >> M >> T >> P >> R, M || T || P || R) {\n    REP(i, 1, T) {\n      s[i] = PII(P, 0);\n      REP(j, 1, P) q[i][j] = 0;\n    }\n\n    REP(i, 1, R) {\n      cin >> m >> t >> p >> j;\n      if(j == 0) {\n        if(q[t][p] >= 0) {\n          s[t].first--;\n          s[t].second += q[t][p] * 20 + m;\n        }\n      } else {\n        q[t][p]++;\n      }\n    }\n\n    REP(i, 1, T) {\n      s[i].first = s[i].first * 100000000 + s[i].second;\n      s[i].second = T - i;\n    }\n    sort(s + 1, s + T + 1);\n    REP(i, 1, T) {\n      cout << (T - s[i].second);\n      if(i < T) cout << (s[i].first == s[i + 1].first ? '=' : ',');\n    }\n    cout << endl;\n  }\n}"
  },
  {
    "language": "C++",
    "code": "#include <map>\n#include <set>\n#include <list>\n#include <cmath>\n#include <queue>\n#include <stack>\n#include <cstdio>\n#include <string>\n#include <vector>\n#include <complex>\n#include <cstdlib>\n#include <cstring>\n#include <numeric>\n#include <sstream>\n#include <iostream>\n#include <algorithm>\n#include <functional>\n\n#define mp       make_pair\n#define pb       push_back\n#define all(x)   (x).begin(),(x).end()\n#define rep(i,n) for(int i=0;i<(n);i++)\n#define repi(i,a,b) for(int i = (a); i < (b); i++)\n\nusing namespace std;\n\ntypedef    long long          ll;\ntypedef    unsigned long long ull;\ntypedef    vector<bool>       vb;\ntypedef    vector<int>        vi;\ntypedef    vector<vb>         vvb;\ntypedef    vector<vi>         vvi;\ntypedef    pair<int,int>      pii;\n\nconst int INF=1<<29;\nconst double EPS=1e-9;\n\nconst int dx[]={1,0,-1,0},dy[]={0,-1,0,1};\nint M,T,P,R;\nstruct team\n{\n\tint id,ac,miss;\n\tteam(int id,int ac,int miss):id(id),ac(ac),miss(miss){}\n\tbool operator <(const team &T)const{\n\t\tif(ac!=T.ac)return ac >T.ac;\n\t\tif(miss!=T.miss)return miss <T.miss;\n\t\treturn id >T.id;\n\t}\n\tbool operator ==(const team &T)const{\n\t\treturn (ac==T.ac&&miss ==T.miss);\n\t}\n};\nint main(){\n\twhile(cin>>M>>T>>P>>R,M||T||P||R){\n\t\tvector<team> data;\n\t\tint failed[400][20]={{0}};\n\t\trep(i, T)data.push_back(team(i+1,0,0));\n\t\trep(i,R){\n\t\t\tint m,t,p,j;\n\t\t\tcin>>m>>t>>p>>j;\n\t\t\tt--;\n\t\t\tif(j==0){\n\t\t\t\tdata[t].ac++;\n\t\t\t\tdata[t].miss+=(m+failed[t][p]);\n\t\t\t}else{\n\t\t\t\tfailed[t][p]+=20;\n\t\t\t}\n\t\t}\n\t\tsort(all(data));\n\t\trep(i, T){\n\t\t\tcout <<data[i].id;\n\t\t\tif(i==T-1){\n\t\t\t\tcout <<endl;\n\t\t\t}else{\n\t\t\t\tcout <<((data[i]==data[i+1])?\"=\": \",\");\n\t\t\t}\n\t\t}\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\nusing namespace std;\n\nint main(){\n  while(1){\n    int M,T,P,R;\n    cin>>M>>T>>P>>R;\n    if(M==0 && T==0 && P==0 && R==0)\n      break;\n\n    int cp[50],tt[50],pt[50][10];\n    for(int i=0; i<T; i++){\n      cp[i] = tt[i] = 0;\n      for(int j=0; j<P; j++){\n        pt[i][j] =0;\n      }\n    }\n    for(int i=0; i<R; i++){\n      int m,t,p,j;\n      cin>>m>>t>>p>>j;\n      if(j==0){\n        cp[t-1]++;\n        tt[t-1] += (m+pt[t-1][p-1]);\n      }\n      else{\n        pt[t-1][p-1] += 20;\n      }\n    }\n\n    int tnow, tpre = -1;\n    bool flg[50];\n    for(int i=0; i<T; i++)\n      flg[i] = false;\n\n    for(int i=0; i<T; i++){\n      tnow =-1;\n      for(int j=0; j<T; j++){\n        if(flg[j])\n          continue;\n\n        if(tnow==-1){\n          tnow = j;\n        }\n        else{\n          if(cp[j]>cp[tnow] || (cp[j]==cp[tnow] &&tt[j]<=tt[tnow])){\n            tnow = j;\n          }\n        }\n      }\n\n      if(tpre!=-1){\n        if(cp[tnow]==cp[tpre] && tt[tnow]==tt[tpre])\n          cout<<'=';\n        else\n          cout<<',';\n      }\n      cout<<tnow+1;\n\n      flg[tnow] = true;\n      tpre = tnow;\n    }\n    cout<<endl;\n  }\n  return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n#include <vector>\nusing namespace std;\n\nclass Team\n{\npublic:\n\tint id, penalty, acs;\n\tvector<int> buffer;\n\n\tTeam(int id, int problem_number) : id(id), penalty(0), acs(0), buffer(problem_number) { }\n\n\tvoid submit(int m, int p, int j)\n\t{\n\t\tif(!j) {\n\t\t\tacs++;\n\t\t\tpenalty += buffer[p] + m;\n\t\t} else {\n\t\t\tbuffer[p] += 20;\n\t\t}\n\t}\n};\n\nbool operator == (const Team& a, const Team& b)\n{\n\treturn a.acs == b.acs && a.penalty == b.penalty;\n}\n\nbool operator < (const Team& a, const Team& b)\n{\n\tif(a.acs != b.acs) return a.acs > b.acs;\n\tif(a.penalty != b.penalty) return a.penalty < b.penalty;\n\treturn a.id > b.id;\n}\n\nint main()\n{\n\tfor(int M, T, P, R; cin >> M >> T >> P >> R && (M||T||P||R); ) {\n\t\tvector<Team> teams;\n\n\t\tfor(int i = 0; i < T; i++) {\n\t\t\tteams.push_back(Team(i+1, P));\n\t\t}\n\n\t\tfor(int i = 0; i < R; i++) {\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tteams[t-1].submit(m, p-1, j);\n\t\t}\n\n\t\tsort(teams.begin(), teams.end());\n\n\t\tfor(int i = 0; i < T; i++) {\n\t\t\tcout << teams[i].id << (i+1 == T ? '\\n' : (teams[i] == teams[i+1] ? '=' : ','));\n\t\t}\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstdio>\n#include <algorithm>\n#include <string>\n#include <cstring>\n#include <cctype>\n#include <cmath>\n#include <stack>\n#include <queue>\n#include <vector>\n#include <set>\n#include <map>\n#include <list>\n#include <stdio.h>\n#include <string.h>\n#include <cstdlib>\n#include <math.h>\n#include <bitset>\n#define INF 2000000000\nusing namespace std;\nint dx[4]={1,0,-1,0},dy[4]={0,1,0,-1};\n#define ll long long\n#define PL pair<long long, long long>\n#define PR pair<int,int>\n#define mk make_pair\n#define en endl;\n#define WHITE 0\n#define BLACK 2\n#define GRAY 1\n#define RE return 0;\n#define int ll\n\n//ICPC Ranking  AOJ\n\n#define MAX 60\nint tt[55];\nint pena[55][15];\nint point[55];\nbool done[MAX];\n\nsigned main(){\n  cout<<\"Hello,World!\"<<en\n  int M,T,P,R;\n  while(cin>>M>>T>>P>>R&&!(M==0&&T==0&&P==0&&R==0)){\n    for(int i=0; i<=55; i++){\n      for(int j=0; j<=15; j++){\n        pena[i][j]=0;\n      }\n      tt[i]=0;\n      point[i]=0;\n      done[i]=false;\n    }\n    \n    for(int i=0; i<R; i++){\n      int m,t,p,j;\n      cin>>m>>t>>p>>j;\n      if(j){\n        pena[t][p]++;\n      }else{\n        tt[t]+=m;\n        tt[t]+=pena[t][p]*20;\n        point[t]++;\n      }\n    }\n    \n    PR pre;\n    for(int i=1; i<=T; i++){\n      int m=0,t=0;\n      int nowt=0;\n      for(int j=1; j<=T; j++){\n        if(done[j]) continue;\n        if(point[j]>m){\n          nowt=j;\n          m=point[j];\n          t=tt[j];\n        }else if(point[j]==m){\n          if(tt[j]<=t){\n            nowt=j;\n            m=point[j];\n            t=tt[j];\n          }\n        }\n      }\n      \n      done[nowt]=true;\n      if(i==1) cout<<nowt;\n      else{\n        if(pre.first==m&&pre.second==t){\n          cout<<'='<<nowt;\n        }else{\n          cout<<','<<nowt;\n        }\n      }\n      \n      pre.first=m; pre.second=t;\n    }\n    cout<<en\n  }\n  RE\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n//#include<fstream>\n#include<vector>\n\nusing namespace std;\n\nint main(){\n\t\n\t//ifstream fin;\n\t//fin.open(\"input.txt\");\n\n\tint M, T, P, R;//input\n\tint m, t, p, j;//input\n\n\tint time[50];\t//経過時間\n\tint solve[50];\t//正解数\n\tint miss[50][10];\t//間違えた数\n\tint count,teamcount;\n\tvector<int> v,s;//解けた問題数ごとに...\n\t\n\twhile(true){\n\t\tfor (int i = 0; i < 50; i++){//初期化\n\t\t\tfor (int k = 0; k < 10; k++)miss[i][k] = 0;\n\t\t\ttime[i] = solve[i] = 0;\n\t\t}\n\t\tM = T = P = R = m = t = p = j = 0;\n\n\t\tcin >> M >> T >> P >> R;\n\t\tif (M == 0)break;\n\n\t\twhile (R > 0){//結果計算\n\t\t\tR--;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tt--;\n\t\t\tif (j == 0){\n\t\t\t\ttime[t] += m;\n\t\t\t\ttime[t] += miss[t][p] * 20;\n\t\t\t\tsolve[t]++;\n\t\t\t}\n\t\t\telse miss[t][p]++;\n\t\t}\n\t\t\n\t\tfor (int i = 0; i < T; i++){\n\t\t\tcout << \"チーム\" << i+1 << endl << \" 経過時間：\" << time[i] << \" 回答数：\" << solve[i];\n\t\t\tcout << endl;\n\t\t}\n\t\t\n\n\t\t//以下ソート\n\t\tcount = 0;//初期化\n\t\tteamcount = 0;\n\t\tfor (int i = 0; i < T; i++)if (count < solve[i])count = solve[i];\n\n\t\twhile (count >= 0){\n\t\t\tfor (int i = 0; i < T; i++)if (count == solve[i]){\n\t\t\t\tv.push_back(i);//countだけ解けたチームを記憶\n\t\t\t\ts.push_back(time[i]);//解けたチームの時間を記憶\n\t\t\t\tteamcount++;\n\t\t\t}\n\n\t\t\t//バブルソート\n\t\t\tif (s.size() > 1){\n\t\t\t\tfor (int i = 0; i < (int)v.size() - 1; i++)\n\t\t\t\t\tfor (int k = (int)v.size() - 1; k > i; k--){\n\t\t\t\t\t\tif (s[k] > s[k - 1]){\n\t\t\t\t\t\t\tint tmp = s[k];\n\t\t\t\t\t\t\tint temp = v[k];\n\n\t\t\t\t\t\t\ts[k] = s[k - 1];\n\t\t\t\t\t\t\tv[k] = v[k - 1];\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\ts[k - 1] = tmp;\n\t\t\t\t\t\t\tv[k - 1] = temp;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t}\n\t\t\tif (v.size() > 1){\n\t\t\t\tfor (int i = 0; i < (int)v.size() - 1; i++)\n\t\t\t\t\tfor (int k = (int)v.size() - 1; k > i; k--)\n\t\t\t\t\t\tif (s[k] == s[k - 1] && v[k] < v[k - 1]){\n\t\t\t\t\t\t\tint tmp = v[k];\n\t\t\t\t\t\t\tv[k] = v[k - 1];\n\t\t\t\t\t\t\tv[k - 1] = tmp;\n\t\t\t\t\t\t}\n\t\t\t}\n\t\t\t//ソート終了\n\n\t\t\t//output\n\t\t\twhile (v.size() > 2){\n\t\t\t\tif (s[v.size() - 1] == s[v.size() - 2]/* || s[v.size()] == s[v.size() - 1]*/)\n\t\t\t\t\tcout << v.back() + 1 << '=';\n\t\t\t\telse cout << v.back() + 1 << \",\";\n\t\t\t\tv.pop_back();\n\t\t\t}\n\t\t\tif (v.size() == 2){//最後の二つだけ例外処理\n\n\t\t\t\tif (s[1] == s[0])\n\t\t\t\t\t cout << v.back()+1 << \"=\";\n\t\t\t\telse cout << v.back()+1 << ',';\n\t\t\t\t\tv.pop_back();\n\t\t\t\t\tcout << v.back()+1;\n\t\t\t\t\tif (teamcount != T)cout << ',';\n\t\t\t\t\tv.pop_back();\n\t\t\t}\n\t\t\tif (v.size() == 1){\n\t\t\t\tcout << v.back() + 1;\n\t\t\t\tif(teamcount != T)cout << v.back() + 1 << ',';\n\t\t\t\tv.pop_back();\n\t\t\t}\n\t\t\tv.clear();\n\t\t\ts.clear();\n\t\t\tcount--;\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\nusing namespace std;\n\nint main(int argc, char *argv[])\n{\n    int m, t, p, r, mk, tk, pk, jk, score, team, prev_pnt, prev_pnl;\n    while (cin >> m >> t >> p >> r, m) {\n        vector<int> ans(t + 1, 0);\n        vector<int> penalty(t + 1, 0);\n        vector<vector<int> > wrong(t + 1, vector<int>(p + 1, 0));\n        for (int i = 0; i < r; ++i) {\n            cin >> mk >> tk >> pk >> jk;\n            if (jk != 0) {\n                wrong[tk][pk]++;\n            } else {\n                ans[tk]++;\n                penalty[tk] += 20 * wrong[tk][pk] + mk;\n            }\n        }\n        prev_pnt = prev_pnl = -1;\n        for (int i = 0; i < t; ++i) {\n            score = -1;\n            for (int j = 1; j <= t; ++j) {\n                if (score < ans[j]) {\n                    score = ans[j];\n                    team = j;\n                } else if (score == ans[j]) {\n                    team = (penalty[team] < penalty[j]) ? team : j;\n                }\n            }\n            if (i != 0 && prev_pnt == ans[team] && prev_pnl == penalty[team])\n                cout << \"=\";\n            else if (i != 0)\n                cout << \",\";\n            cout << team;\n            prev_pnt = ans[team];\n            prev_pnl = penalty[team];\n            ans[team] = -2;\n        }\n        cout << endl;\n    }\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstring>\nusing namespace std;\nint x[100][2], y[100][10], n, a, b, c, d, e, f, g, h, p;\nint main() {\n\twhile (true) {\n\t\tmemset(x, 0, sizeof(x));\n\t\tmemset(y, 0, sizeof(y));\n\t\tcin >> n >> a >> b >> c;\n\t\tif (n == 0) {\n\t\t\tbreak;\n\t\t}\n\t\tfor (int i = 0; i < c; i++) {\n\t\t\tcin >> d >> e >> f >> g;\n\t\t\tif (g!=0) {\n\t\t\t\ty[e][f] += 20;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tx[e][1] += d + y[e][f];\n\t\t\t\tx[e][0]++;\n\t\t\t}\n\t\t}\n\t\tp = 0;\n\t\tfor (int i = 10; i >= 0; i--) {\n\t\t\tfor (int j = 0; j <= 10000; j++) {\n\t\t\t\th = 0;\n\t\t\t\tfor (int k = a; k > 0; k--) {\n\t\t\t\t\tif (x[k][0]==i && x[k][1]==j) {\n\t\t\t\t\t\tif (h >= 1) {\n\t\t\t\t\t\t\tcout << '=';\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (p >= 1) {\n\t\t\t\t\t\t\tcout << ',';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcout << k;\n\t\t\t\t\t\tp++;\n\t\t\t\t\t\th++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcout << endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#define _USE_MATH_DEFINES\n#include<iostream>\n#include<vector>\n#include<algorithm>\n#include<string>\n#include<cmath>\n#include<list>\n#include<stack>\n#include<queue>\n#include<cctype>\n#include<iomanip>\n#include<functional>\nusing namespace std;\ntypedef long long llong;\nint M, T, P, R;\nclass Team {\npublic:\n\tint problems[10];\n\tint ac;\n\tint number;\n\tint time;\n\tint rank;\n};\n\nbool f(Team a, Team b) {\n\tif (a.ac == b.ac&&a.time == b.time)return a.number > b.number;\n\telse if (a.ac == b.ac)return a.time < b.time;\n\telse return a.ac > b.ac;\n}\nint main() {\n\twhile (1) {\n\t\tcin >> M >> T >> P >> R;\n\t\tif (!M && !T && !P && !R)break;\n\t\tvector<int>m(R), t(R), p(R), j(R);\n\n\t\tvector<Team>team(T);\n\t\tfor (int i = 0; i < T; i++) {\n\t\t\tteam[i].number = i + 1;\n\t\t\tteam[i].ac = team[i].time = 0;\n\t\t\tfor (int j = 0; j < 10; j++) {\n\t\t\t\tteam[i].problems[j] = 0;\n\t\t\t}\n\t\t}\n\t\tfor (int i = 0; i < R; i++) {\n\t\t\tcin >> m[i] >> t[i] >> p[i] >> j[i];\n\t\t\tt[i]--;\n\t\t\tp[i]--;\n\t\t\tif (j[i] == 0) {\n\t\t\t\tif (team[t[i]].problems[p[i]] == 0) {\n\t\t\t\t\tteam[t[i]].problems[p[i]] = 1;\n\t\t\t\t\tteam[t[i]].time += m[i];\n\t\t\t\t\tteam[t[i]].ac++;\n\t\t\t\t}\n\t\t\t\telse if (team[t[i]].problems[p[i]] < 0) {\n\t\t\t\t\tteam[t[i]].time += (m[i] + 20*(-team[t[i]].problems[p[i]]));\n\t\t\t\t\tteam[t[i]].problems[p[i]] = 1;\n\t\t\t\t\tteam[t[i]].ac++;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tteam[t[i]].problems[p[i]]--;\n\t\t\t}\n\n\t\t}\n\t\tsort(team.begin(), team.end(), f);\n\t\tfor (int i = 0; i < T; i++) {\n\t\t\tif (i) {\n\t\t\t\tif (team[i].ac == team[i - 1].ac&&team[i].time == team[i - 1].time) {\n\t\t\t\t\tcout << '=';\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tcout << ',';\n\t\t\t\t}\n\t\t\t}\n\t\t\tcout << team[i].number;\n\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n#include <functional>\nusing namespace std;\n\n\n\nint main()\n{\n    while (1) {\n        int mm,m,tt,t,pp,p,rr,r;\n        cin >> mm >> tt >> pp >> rr;\n        \n        struct Teem{\n            int problem[10] = {0};\n            int judge[10] = {0};\n        }teem[50];\n        \n        int sum[51] = {0};\n        int ans[51] = {0};\n        \n        for (int i = 0; i < rr; i++ ) {\n            cin >> m >> t >> p >> r;\n            \n            if (r == 0) {\n                sum[t] = sum[t] + m + teem[t].judge[p];\n                ans[t]++;\n            }else{\n                teem[t].judge[p] += 20;\n            }\n        }\n        \n        /*\n         for (int i = 0; i < tt; i++) {\n         cout << i+1 << \" \" << sum[i+1] <<endl;\n         }\n         for (int i = 0; i < tt; i++) {\n         cout << i+1 << \" \" << ans[i+1] << endl;\n         }\n         */\n        \n        int max = 0;\n        vector<int> times = {0};\n        int count = 0;\n        \n        for (int i = 1; i < tt; i++ ) {\n            if (max == ans[i]) {\n                times.push_back(sum[i]);\n                count++;\n                //cout << \"test\"<< ans[i] << endl;\n            }\n            if (max < ans[i]) {\n                max = ans[i];\n                times = {0};\n                times.push_back(sum[i]);\n                count=1;\n                //cout << \"test\"<< ans[i] << endl;\n            }\n        }\n        sort(times.begin(), times.end(), greater<int>());\n        \n        /*\n         for (int i = 0; i < count; i++) {\n         cout << i+1 << \" \" << times[i] << endl;\n         }*/\n        \n        int tmp1 = -1,tmp2 = -1;//1:sum 2:ans\n        for (int i = max; i > 0; i--) {//正解数\n            //cout << \"i=\" << i << endl;\n            for (int k = count-1; k >= 0; k--) {//所要時間\n                for (int m =tt; m > 0; m--) {//各チーム\n                    //cout << \"count\" << k << \" times[count]=\" << times[k] << \" i=\" << i <<  endl;\n                    if (i == ans[m]) {\n                        if (times[k] == sum[m]) {\n                            if (tmp2 == ans[m]) {\n                                if (tmp1 == sum[m]) {\n                                    cout << \"=\" ;\n                                }else{\n                                    cout << \",\" ;\n                                }\n                            }\n                            else if(tmp2 != -1 && tmp1 != -1){\n                                cout << \",\" ;\n                            }\n                            cout << m ;\n                            tmp1 = sum[m];\n                            tmp2 = ans[m];\n                            ans[m] = -1;\n                        }\n                    }\n                }\n            }\n            //ここで一つの正解の合計数に対してのサーチが終わる\n            max = 0;\n            times = {0};\n            count = 0;\n            for (int x = 1; x < tt; x++ ) {\n                if (max == ans[x]) {\n                    times.push_back(sum[x]);\n                    count++;\n                    //cout << \"test\"<< ans[x] << endl;\n                }\n                if (max < ans[x]) {\n                    max = ans[x];\n                    times = {0};\n                    times.push_back(sum[x]);\n                    count=1;\n                    //cout << \"test\"<< ans[x] << endl;\n                }\n            }\n            sort(times.begin(), times.end(), greater<int>());\n            /*\n             for (int i = 0; i < count; i++) {\n             cout << i+1 << \" \" << times[i] << endl;\n             }\n             */\n        }\n        for (int i = tt; i > 0; i--) {\n            \n            if (ans[i] == 0) {\n                if (tmp2 == -1) {\n                    \n                }else {\n                    if (tmp2 == 0) {\n                        cout << \"=\";\n                    }else {\n                        cout << \",\";\n                    }\n                }\n                cout << i ;\n                tmp2 = 0;\n            }\n        }\n        cout << endl;\n        if (tmp1 == -1) {\n            break;\n        }\n    }\n    \n    \n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "\n#include <stdio.h>\n#include <stdlib.h>\n#include <iostream>\n#include <vector>\n#include <string>\n#include <queue>\n#include <algorithm>\n#include <math.h>\n#include <utility>\n#include <set>\n#include <map>\n#define INF 100000\nusing namespace std;\n\nstruct st{\n    int ac;\n    int wa;\n};\n\n\nint main(){\n    for(;;){\n        int M,T,P,R;\n        cin >> M >>T>>P>>R;\n        if (M==0 and R ==0) break;\n        st data[T+1][P+2];\n        int ans=0;\n        for (int i=1; i<=T; i++) {\n            for (int j=1; j<=P+1; j++) {\n                data[i][j]={0,0};\n            }\n        }\n        for (int i=0; i < R; i++) {\n            int m,t,p,j;\n            cin >>m >> t >> p >> j;\n            if (j==0) {//ac\n                data[t][p].ac = 1;\n                data[t][P+1].wa += m;\n                data[t][P+1].ac++;\n            }else{\n                data[t][p].wa++;\n            }\n        }\n        /*for (int i=1; i<=T; i++) {\n            for (int j=1; j<=P+1;j++ ) {\n                cout << \"(\"<<data[i][j].ac <<\",\"<<data[i][j].wa<<\")\"<<\"|\";\n            }\n            cout << endl;\n        }*/\n        vector<pair<int,int> > AC(T);\n        for (int i=1; i<=T; i++) {\n            AC[i-1] = {P+1-data[i][P+1].ac,i};\n        }\n        sort(AC.begin(), AC.end());\n        /*for (int i=0; i<T; i++) {\n            cout << AC[i].second << \"|\";\n        }\n        cout << endl;\n         */\n        for (int i=0; i<T; i++) {\n            int p=i;\n            while (AC[p].first==AC[p+1].first and p+1<T) {\n                p++;\n            }\n            vector<pair<int, int> > time(p-i+1);\n            for (int j=i; j<=p; j++) {\n                int dis=data[AC[j].second][P+1].wa;\n                for (int k = 1; k<P+1; k++) {\n                    if (data[AC[j].second][k].ac == 1) {\n                        dis += data[AC[j].second][k].wa*20;\n                    }\n                }\n                time[j-i] = {dis, AC[j].second};\n            }\n            sort(time.begin(), time.end());\n            for (int l =0 ;l < p-i+1;l++ ) {\n                int s = l;\n                if (s+1 >= p-i+1) {\n                    cout << time[s].second;\n                    ans++;\n                    if (ans != T) {\n                        cout << \",\";\n                    }\n                }else{\n                    while (time[s].first==time[s+1].first and s+1 < p-i+1) {\n                        s++;\n                    }\n                    if (s-l>=1) {\n                        for (int u =0; u<=s-l; u++) {\n                            cout << time[s-u].second;\n                            ans++;\n                            if (u==s-l and ans != T) {\n                                cout << \",\";\n                            }else{\n                                if (ans != T) {\n                                    cout << \"=\";\n                                }\n                            }\n                        }\n                    }else{\n                        cout << time[s].second;\n                        ans++;\n                        if (ans != T) {\n                            cout << \",\";\n                        }\n                    }\n                }\n                l = s;\n            }\n            i=p;\n        }\n        cout << endl;\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <cmath>\n#include <climits>\n#include <cstdio>\n#include <cstdlib>\n#include <cstring>\n#include <fstream>\n#include <iostream>\n#include <list>\n#include <map>\n#include <queue>\n#include <set>\n#include <sstream>\n#include <stack>\n#include <string>\n#include <vector>\n#include <cassert>\n\nusing namespace std;\n\n#define LOG(...) printf(__VA_ARGS__)\n//#define LOG(...)\n#define FOR(i,a,b) for(int i=(int)(a);i<(int)(b);++i)\n#define REP(i,n) for(int i=0;i<(int)(n);++i)\n#define ALL(a) (a).begin(),(a).end()\n#define RALL(a) (a).rbegin(),(a).rend()\n#define EXIST(s,e) ((s).find(e)!=(s).end())\n#define SORT(c) sort((c).begin(),(c).end())\n#define RSORT(c) sort((c).rbegin(),(c).rend())\n#define CLR(a) memset((a), 0 ,sizeof(a))\n\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef vector<bool> vb;\ntypedef vector<int> vi;\ntypedef vector<ll> vll;\ntypedef vector<vb> vvb;\ntypedef vector<vi> vvi;\ntypedef vector<vll> vvll;\ntypedef pair<int, int> pii;\ntypedef pair<ll, ll> pll;\n\nstruct icpclog{\n    int number, time, id;\n    int submit_status[10 + 1];\n\n    int compare(const icpclog& o) const {\n        if(number != o.number) return o.number - number;\n        return time - o.time;\n    }\n\n    bool operator >(const icpclog& o) const {\n        int res = compare(o);\n        if(res != 0) return res > 0;\n        return o.id - id > 0;\n    }\n};\n\nint main() {\n    int contest_time, team_n, question_n, submit_n;\n    while(cin >> contest_time >> team_n >> question_n >> submit_n, contest_time|team_n|question_n|submit_n){\n        vector<icpclog> logs(team_n + 1);\n        REP(i, logs.size()) logs[i].id = i;\n        REP(i, submit_n){\n            int time, team, question, judge;\n            cin >> time >> team >> question >> judge;\n            if(judge != 0)\n                logs[team].submit_status[question]++;\n            else{\n                logs[team].time += time;\n                logs[team].time += logs[team].submit_status[question] * 20;\n                logs[team].number++;\n            }\n        }\n\n        logs.erase(logs.begin());\n        SORT(logs);\n        /*\n        FOR(i, 0, logs.size() -1){\n            FOR(j, i + 1, logs.size()){\n                if(logs[i] > logs[j]){\n                    icpclog c = logs[i];\n                    logs[i] = logs[j];\n                    logs[j] = c;\n                }\n            }\n        }\n         */\n\n        cout << logs[0].id;\n        FOR(i, 1, logs.size()){\n            cout << (logs[i-1].compare(logs[i]) == 0 ? \"=\" : \",\") << logs[i].id;\n        }\n        cout << endl;\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nbool comp(pair<pair<int,int>,int> p1, pair<pair<int,int>,int> p2){\n\n    if(p1.first.first == p2.first.first){\n        if(p1.first.second == p2.first.second){\n            return p1.second < p2.second;\n        }\n        return p1.first.second > p2.first.second;\n    }\n    return p1.first.first < p2.first.first;\n\n}\n\nint main() {\n\n    while(1) {\n\n        int M,T,P,R;\n\n        cin >> M >> T >> P >> R;\n\n        if(M == 0 && T == 0 && P == 0 && R == 0) break;\n\n        pair<int,int> team[T+1]; //solve_num, time\n        pair<bool,int> try_progrums[T+1][P]; //is_tryed, lasttime\n\n        team[0] = make_pair(-1,-1);\n\n        for(int i=1; i<T+1; i++){\n            team[i] = make_pair(0,0);\n            for(int j=0; j<P; j++) {\n                try_progrums[i][j] = make_pair(false, 0);\n            }\n        }\n\n        for(int i=0; i<R; i++){\n\n            int m, t, p, j;\n\n            cin >> m >> t >> p >>j;\n\n            if(try_progrums[t][p].first){\n                team[t].second += 20;\n            }\n\n            if(j == 0){\n                team[t].first++;\n                team[t].second += m;\n            }\n            else{\n                if(try_progrums[t][p].first){\n                    team[t].second += m - try_progrums[t][p].second;\n                    try_progrums[t][p].second = m;\n                }\n                else{\n                    team[t].second += m;\n                    try_progrums[t][p].first = true;\n                    try_progrums[t][p].second = m;\n                }\n            }\n        }\n\n        pair<pair<int,int>,int> team_result[T+1];\n\n        for(int i=0; i<T+1; i++){\n            team_result[i] = make_pair(make_pair(team[i].first,team[i].second),i);\n        }\n\n        sort(team_result,team_result+T+1,comp);\n\n        cout << team_result[T].second;\n\n        for(int i=T; i>1; i--){\n            if(team_result[i].first.first == team_result[i-1].first.first && team_result[i].first.second == team_result[i-1].first.second){\n                cout << '=' << team_result[i-1].second;\n            }\n            else{\n                cout << ',' << team_result[i-1].second;\n            }\n        }\n\n        cout << endl;\n\n\n\n\n    }\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\nint main(){\n  while (1){\n    int M, T, P, R;\n    cin >> M >> T >> P >> R;\n    if (M == 0 && T == 0 && P == 0 && R == 0){\n      break;\n    }\n    vector<vector<int>> s(T, vector<int>(P, -1));\n    vector<vector<int>> wa(T, vector<int>(P, 0));\n    for (int i = 0; i < R; i++){\n      int m, t, p, j;\n      cin >> m >> t >> p >> j;\n      t--;\n      p--;\n      if (j == 0){\n        if (s[t][p] == -1){\n          s[t][p] = m + wa[t][p] * 20;\n        }\n      } else {\n        wa[t][p]++;\n      }\n    }\n    vector<tuple<int, int, int>> score(T);\n    for (int i = 0; i < T; i++){\n      int ac = 0;\n      int time = 0;\n      for (int j = 0; j < P; j++){\n        if (s[i][j] != -1){\n          ac++;\n          time += s[i][j];\n        }\n      }\n      score[i] = make_tuple(ac, - time, i + 1);\n    }\n    sort(score.rbegin(), score.rend());\n    for (int i = 0; i < T; i++){\n      cout << get<2>(score[i]);\n      if (i < T - 1){\n        if (get<0>(score[i]) == get<0>(score[i + 1]) && get<1>(score[i]) == get<1>(score[i + 1])){\n          cout << '=';\n        } else {\n          cout << ',';\n        }\n      }\n    }\n    cout << endl;\n  }\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n#define FOR(i,k,n) for(int i = (int)(k); i < (int)(n); i++)\n#define REP(i,n) FOR(i,0,n)\n#define ALL(a) a.begin(), a.end()\n#define MS(m,v) memset(m,v,sizeof(m))\n#define D10 fixed<<setprecision(10)\ntypedef long long ll;\ntypedef long double ld;\ntypedef vector<int> vi;\ntypedef vector<string> vs;\ntypedef pair<int, int> pii;\nconst int MOD = 1000000007;\nconst int INF = MOD + 1;\nconst ld EPS = 1e-12;\ntemplate<class T> T &chmin(T &a, const T &b) { return a = min(a, b); }\ntemplate<class T> T &chmax(T &a, const T &b) { return a = max(a, b); }\n\n/*--------------------template--------------------*/\n\nint M, T, P, R;\n\nint main()\n{\n\tcin.sync_with_stdio(false);\n\twhile (cin >> M >> T >> P >> R, M)\n\t{\n\t\tvi ac(T); vi team_penalty(T);\n\t\tvector<vi> penalty(T, vi(P));\n\t\tREP(i, R)\n\t\t{\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tt--; p--;\n\t\t\tif (j == 0)\n\t\t\t{\n\t\t\t\tac[t]++;\n\t\t\t\tpenalty[t][p] += m;\n\t\t\t\tteam_penalty[t] += penalty[t][p];\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tpenalty[t][p] += 20;\n\t\t\t}\n\t\t}\n\t\tvector<tuple<int, int, int>> order; //ac, penalty, team\n\t\tREP(i, T)\n\t\t{\n\t\t\torder.emplace_back(-ac[i], team_penalty[i], -i-1);\n\t\t}\n\t\tsort(ALL(order));\n\t\tcout << -get<2>(order[0]);\n\t\tFOR(i, 1, T)\n\t\t{\n\t\t\tif (get<0>(order[i - 1]) == get<0>(order[i]) && get<1>(order[i - 1]) == get<1>(order[i]))\n\t\t\t{\n\t\t\t\tcout << '=';\n\t\t\t}\n\t\t\telse cout << ',';\n\t\t\tcout << -get<2>(order[i]);\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\nusing namespace std;\n\nstruct d{\n  int time, prob, team;\n};\nbool operator<(const d &a, const d &b){\n  if(a.prob == b.prob){\n    if(a.time == b.time){\n      return a.team > b.team;\n    }else{\n      return a.time < b.time;\n    }\n  }else{\n    return a.prob > b.prob;\n  }\n}\nint main(){\n\n  int M, T, P, R;\n  int m, t, p, j, i;\n\n  while(cin >> M >> T >> P >> R, M+T+P+R){\n    d res[T+1];\n    for(i = 1; i <= T; i++){\n      res[i].time = res[i].prob = 0;\n      res[i].team = i;\n    }\n    int rank[T+1][P+1];\n    for(i = 1; i <= T; i++){\n      for(j = 1; j <= P; j++){\n        rank[i][j] = 0;\n      }\n    }\n    for(i = 0; i < R; i++){\n      cin >> m >> t >> p >> j;\n      if(m > M) break;\n      if(j){\n        rank[t][p]++;\n      }else{\n        res[t].time += m + rank[t][p]*20;\n        res[t].prob++;\n      }\n    }\n    /* cerr << \"debug\" << endl;\n    for(i=1; i<=T; i++)\n    {\n      cerr << res[i].team << \",\" << res[i].prob << \",\" << res[i].time << endl;\n    }\n    cerr << \"debug\" << endl;\n*/\n    sort(res+1, res+T+1);\n    cout << res[1].team;\n    for(i=2; i<=T; i++)\n    {\n      cout << ((res[i].prob==res[i-1].prob && res[i].time==res[i-1].time) ? \"=\" : \",\") << res[i].team;\n    }\n    cout << endl;\n    //cerr << endl;\n  }\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <vector>\n#include <algorithm>\n#include <utility>\n#include <tuple>\n\nint testcase_ends() {\n  int M;\n  size_t T, P, R;\n  scanf(\"%d %zu %zu %zu\", &M, &T, &P, &R);\n  if (M == 0 && T == 0 && P == 0 && R == 0) return 1;\n\n  std::vector<std::vector<int>> a(T, std::vector<int>(P, -1));\n  for (size_t i = 0; i < R; ++i) {\n    int m, t, p, j;\n    scanf(\"%d %d %d %d\", &m, &t, &p, &j);\n    --t, --p;\n    if (a[t][p] >= 0) continue;\n    if (j != 0) {\n      --a[t][p];\n      continue;\n    }\n    a[t][p] = -20 * (a[t][p]+1);\n    a[t][p] += m;\n  }\n\n  std::vector<std::tuple<int, int, size_t>> res(T);\n  for (size_t i = 0; i < T; ++i) {\n    for (size_t j = 0; j < P; ++j) {\n      if (a[i][j] < 0) continue;\n      ++std::get<0>(res[i]);\n      std::get<1>(res[i]) -= a[i][j];\n    }\n    std::get<2>(res[i]) = i+1;\n  }\n  std::sort(res.rbegin(), res.rend());\n  for (size_t i = 0; i < T; ++i) {\n    printf(\"%zu\", std::get<2>(res[i]));\n    if (i+1 == T) {\n      putchar('\\n');\n    } else {\n      int a0, p0;\n      std::tie(a0, p0, std::ignore) = res[i];\n      int a1, p1;\n      std::tie(a1, p1, std::ignore) = res[i+1];\n      if (std::make_pair(a0, p0) > std::make_pair(a1, p1)) {\n        putchar(',');\n      } else {\n        putchar('=');\n      }\n    }\n  }\n  return 0;\n}\n\nint main() {\n  while (!testcase_ends()) {}\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\nusing namespace std;\nint main()\n{\n    while(true){\n        int M, T, P, R;\n        cin >> M >> T >> P >> R;\n        if(M==0 && T==0 && P==0 && R==0){\n            break;\n \t\t}\n        int CP[50], TT[50], PT[50][10];\n        for(int i=0; i<T; i++){\n            CP[i] = TT[i] = 0;\n            for(int j=0; j<P; j++)\n                PT[i][j] = 0;\n        }\n        for(int i=0; i<R; i++){\n            int m, t, p, j;\n            cin >> m >> t >> p >> j;\n            if(j==0){\n                CP[t-1]++;\n                TT[t-1] += (m+PT[t-1][p-1]);\n            }\n            else{\n                PT[t-1][p-1] += 20;\n            }\n        }\n        int tnow, tpre = -1;\n        bool flg[50];\n        for(int i=0; i<T; i++){\n            flg[i] = false;\n \t\t}\n        for(int i=0; i<T; i++){\n            tnow = -1;\n            for(int j=0; j<T; j++){\n                if(flg[j]){\n                    continue;\n\t\t\t\t  }\n                if(tnow==-1){\n                    tnow = j;\n                }\n                else{\n                    if(CP[j]>CP[tnow] || (CP[j]==CP[tnow] && TT[j]<=TT[tnow])){\n                        tnow = j;\n                    }\n                }\n            }\n            if(tpre!=-1){\n                if(CP[tnow]==CP[tpre] && TT[tnow]==TT[tpre])\n                    cout << '=';\n                else\n                    cout << ',';\n            }\n            cout << tnow+1;\n            flg[tnow] = true;\n            tpre = tnow;\n        }\n        cout << endl;\n    }\n    return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n// region template\n#define rep(i, a, b) for (int i = (a); i < (b); ++i)\n#define trav(a, x) for (auto &a : x)\n#define all(x) begin(x), end(x)\n#define sz(x) (int)(x).size()\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef pair<int, int> pii;\ntypedef vector<int> vi;\n\nll gcd(ll a, ll b) { return __gcd(a, b); }\n\nll euclid(ll a, ll b, ll &x, ll &y) {\n    if (b) {\n        ll d = euclid(b, a % b, y, x);\n        return y -= a / b * x, d;\n    }\n    return x = 1, y = 0, a;\n}\n\ntypedef unsigned long long ull;\ntypedef long double ld;\null mod_mul(ull a, ull b, ull M) {\n    ll ret = a * b - M * ull(ld(a) * ld(b) / ld(M));\n    return ret + M * (ret < 0) - M * (ret >= (ll)M);\n}\null mod_pow(ull b, ull e, ull mod) {\n    ull ans = 1;\n    for (; e; b = mod_mul(b, b, mod), e /= 2)\n        if (e & 1)\n            ans = mod_mul(ans, b, mod);\n    return ans;\n}\n\nconst ll mod = 1000000007;\nstruct Mod {\n    ll x;\n    Mod(ll xx) : x(xx) {}\n    Mod operator+(Mod b) { return Mod((x + b.x) % mod); }\n    Mod operator-(Mod b) { return Mod((x - b.x) % mod); }\n    Mod operator*(Mod b) { return Mod((x * b.x) % mod); }\n    Mod operator/(Mod b) { return *this * invert(b); }\n    Mod invert(Mod a) {\n        ll x, y, g = euclid(a.x, mod, x, y);\n        assert(g == 1);\n        return Mod((x + mod) % mod);\n    }\n    Mod operator^(ll e) {\n        if (!e)\n            return Mod(1);\n        Mod r = *this ^ (e / 2);\n        r = r * r;\n        return e & 1 ? *this * r : r;\n    }\n};\n// endregion\n\nint main() {\n    cin.sync_with_stdio(0);\n    cin.tie(0);\n    cin.exceptions(cin.failbit);\n\n    while (true) {\n        int M, T, P, R;\n        cin >> M >> T >> P >> R;\n        if (!M)\n            break;\n        map<int, map<int, int>> penq;\n        map<int, int> ttlpen;\n        map<int, int> solved;\n        rep(i, 0, R) {\n            int m, t, p, r;\n            cin >> m >> t >> p >> r;\n            if (r != 0) {\n                penq[t][p]++;\n            } else {\n                ttlpen[t] += m + penq[t][p] * 20;\n                solved[t]++;\n            }\n        }\n        vector<pair<pii, int>> ranks;\n        rep(i, 1, T + 1) ranks.push_back({{-solved[i], ttlpen[i]}, -i});\n        sort(all(ranks));\n        rep(i, 0, ranks.size()) {\n            cout << -ranks[i].second;\n            if (i + 1 != ranks.size()) {\n                cout << (ranks[i].first != ranks[i + 1].first ? ',' : '=');\n            }\n        }\n        cout << endl;\n    }\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n\nusing namespace std;\n\ntypedef pair< int, int> pii;\ntypedef pair< int, pii> piii;\n\nint M, T, P, R;\n\nint main() {\n\twhile (1) {\n\t\tcin >> M >> T >> P >> R; if (M==0 && T==0 && P==0 && R==0) break;\n\t\t\n\t\tvector<piii> pv(T);\n\t\tvector< vector<bool> > end(T, vector<bool>(P, false) );\n\t\tfor (int i = 0; i < T; i++) pv[i] = make_pair(0, make_pair(0, i + 1) );\n\t\tfor (int i = 0; i < R; i++) {\n\t\t\tint m, t, p, j; cin >> m >> t >> p >> j;\n\t\t\tif (end[t-1][p-1]) continue;\n\t\t\tif (m >= M) continue;\n\t\t\tif (j==0) {\n\t\t\t\tpv[t-1].first++;\n\t\t\t\tpv[t-1].second.first -= m;\n\t\t\t\tend[t-1][p-1] = true;\n\t\t\t} else {\n\t\t\t\tpv[t-1].second.first -= 20;\n\t\t\t}\n\t\t}\n\n\t\tsort(pv.begin(), pv.end());\n\t\tfor (int i = T-1; i >= 0; i--) {\n\t\t\tif (i > 0 && pv[i].first == pv[i-1].first && pv[i].second.first == pv[i-1].second.first) {\n\t\t\t\tcout << pv[i].second.second << \"=\";\n\t\t\t} else {\n\t\t\t\tcout << pv[i].second.second;\n\t\t\t\tif (i > 0) cout << \",\";\n\t\t\t}\n\t\t}\n\t\tcout << endl;\n\t}\t\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<stdio.h>\n#include<string.h>\ntypedef struct {\n\tint id;\n\tint ac ;\n\tint time;\n\tint pt[300];\n\tint ok[20];\n\n} Player;\n\nint M, T, P,R;\n\n\n\nvoid makeScore(int n, Player * A)\n{\n\tfor (int i = 1; i <= n; i++)\n\t{\n\t\tfor (int j = 1; j <= P; j++)\n\t\t{\n\t\t\tif (A[i].ok[j] == 0)\n\t\t\t{\n\t\t\t\tif (A[i].pt[j])\n\t\t\t\t\tA[i].time += (20 * A[i].pt[j]);\n\t\t\t}\n\n\t\t}\n\t\t\n\t}\n}\n\nvoid makeRank(int n, Player*A)\n{\n\tint i, j;\n\tPlayer temp;\n\tfor (int i = 0; i < n; i++)\n\t\tfor (int j = n; j > i + 1; j--)\n\t\t{\n\t\t\tif (A[j].ac>A[j - 1].ac)\n\t\t\t{\n\t\t\t\ttemp = A[j]; A[j] = A[j - 1]; A[j - 1] = temp;\n\t\t\t}\n\t\t\telse if (A[j].ac == A[j - 1].ac)\n\t\t\t{\n\t\t\t\tif (A[j].time < A[j - 1].time)\n\t\t\t\t{\n\t\t\t\t\ttemp = A[j]; A[j] = A[j - 1]; A[j - 1] = temp;\n\t\t\t\t}\n\t\t\t\telse if (A[j].time == A[j - 1].time)\n\t\t\t\t{\n\t\t\t\t\tif (A[j].id > A[j - 1].id)\n\t\t\t\t\t{\n\t\t\t\t\t\ttemp = A[j]; A[j] = A[j - 1]; A[j - 1] = temp;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n}\n\nvoid Print(int n, Player *A)\n{\n\tint i;\n\tfor (i = 1; i <= n; i++)\n\t{\n\t\t\n\t\tprintf(\"%d\", A[i].id);\n\t\tif (A[i].ac == A[i + 1].ac&&A[i].time==A[i+1].time)\n\t\t\tprintf(\"=\");\n\t\telse if (i != n)\n\t\t\tprintf(\",\");\n\t}\n\tprintf(\"\\n\");\n}\nint main()\n{\n\n\tint i;\n\tint time, team, num, ok;\n\tPlayer plr[100];\n\t\n\twhile (scanf(\"%d%d%d%d\", &M, &T, &P, &R) && M || T || R || P)\n\t{\n\t\tfor (int i = T; i>=1;i--)\n\t\t{\n\t\t\tmemset(plr[i].pt, 0, sizeof(plr[i].pt));\n\t\t\tmemset(plr[i].ok, -1, sizeof(plr[i].ok));\n\t\t\tplr[i].ac = plr[i].time = 0;\n\t\t\tplr[i].id = i;\n\t\t}\n\t\n\t\tfor (i = 0; i < R; i++)\n\t\t{\n\t\t\tscanf(\"%d%d%d%d\", &time, &team, &num, &ok);\n\t\t\tif (ok == 0)\n\t\t\t{\n\t\t\t\tplr[team].ac++;\n\t\t\t\tplr[team].time = time;\n\t\t\t\tplr[team].ok[num] = 0;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t\n\t\t\t\tplr[team].pt[num]++;\n\t\t\t}\n\t\t}\n\n\t\tmakeScore(T, plr);\n\t\tmakeRank(T, plr);\n\t\tPrint(T, plr);\n\n\n\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nstruct team{\n\t  int id;\n\t  int ac,time;\n\t  vector<int> wa;\n\t  team(int i, int a, int t, int P){\n\t\t\tid = i; ac = a; time = t;\n\t\t\twa = vector<int>(P+1,0);\n\t  }\n\t  bool operator < (const team& tgt) const {\n\t\t\tif( ac != tgt.ac )\n\t\t\t\t  return ac < tgt.ac;\n\t\t\tif( time != tgt.time )\n\t\t\t\t  return time > tgt.time;\n\t\t\treturn id < tgt.id;\n\t  }\n\n};\n\nint main(){\n\t  while(1){\n\t\t\tint M,T,P,R; cin >> M >> T >> P >> R;\n\t\t\tif(!M) break;\n\t\t\tvector<team> teams;\n\t\t\tfor(int i=0; i<T; i++)\n\t\t\t\t  teams.push_back( team(i+1,0,0,P) );\n\t  \n\t\t\tfor(int i=0; i<R; i++){\n\t\t\t\t  int m,t,p,j;\n\t\t\t\t  cin >> m >> t >> p >> j;\n\t\t\t\t  if( j == 0 ){\n\t\t\t\t\t\tteams[ t-1 ].ac ++;\n\t\t\t\t\t\tteams[ t-1 ].time += m;\n\t\t\t\t\t\tteams[ t-1 ].time += teams[ t-1 ].wa[ p ]*20 ;\n\t\t\t\t\t\t\n\t\t\t\t  }\n\t\t\t\t  else{\n\t\t\t\t\t\tteams[ t-1 ].wa[ p ]++;\n\t\t\t\t  }\n\t\t\t}\n\t\t\tsort(teams.begin(),teams.end());\n\t\t\treverse(teams.begin(),teams.end());\n\t\t\t\n\t\t\tteam pre = team(-1,-1,-1,P);\n\t\t\tfor(int i=0; i<T; i++){\n\t\t\t\t  team corr = teams[i];\n\t\t\t\t  if( pre.ac == corr.ac and pre.time == corr.time )\n\t\t\t\t\t\tcout << \"=\" << corr.id;\n\t\t\t\t  else\n\t\t\t\t\t\tif(i!=0)\n\t\t\t\t\t\t\t  cout << \",\" << corr.id;\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\t  cout << corr.id;\n\t\t\t\t  pre = corr;\n\t\t\t}\n\t\t\tcout << endl;\n\t  \n\t  }\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n#include <tuple>\nusing namespace std;\n\nint M, T, P, R;\nint m, t, p, j;\n\nint main() {\n  while (scanf(\"%d%d%d%d\", &M, &T, &P, &R) != EOF && M) {\n    int ac[50][10];\n    int wa[50][10];\n    bool accepted[50][10];\n    fill(&wa[0][0], &wa[0][0]+50*10, 0);\t\n    fill(&accepted[0][0], &accepted[0][0]+50*10, false);\n    for (int i=0; i<R; i++) {\n      scanf(\"%d%d%d%d\", &m, &t, &p, &j);\n      t--; p--;\n      if (j == 0) {\n\taccepted[t][p] = true;\n\tac[t][p] = m;\n      } else {\n\twa[t][p]++;\n      }\n    }\n    tuple<int,int,int> ans[50];\n    for (int i=0; i<T; i++) {\n      int count = 0;\n      int time = 0;\n      for (int j=0; j<P; j++) {\n\tif (accepted[i][j]) {\n\t  count++;\n\t  time += wa[i][j] * 20 + ac[i][j];\n\t}\n      }\n      ans[i] = make_tuple(count, -time, i);\n    }\n    sort(ans, ans+T);\n    reverse(ans, ans+T);\n    for (int i=0; i<T; i++) {\n      if (i != 0) {\n\tif (get<0>(ans[i-1]) == get<0>(ans[i]) \n\t    && get<1>(ans[i-1]) == get<1>(ans[i])) {\n\t  printf(\"=\");\n\t} else {\n\t  printf(\",\");\n\t}\n      }\n      printf(\"%d\", get<2>(ans[i])+1);\n    }\n    printf(\"\\n\");\n  }\n}"
  },
  {
    "language": "C++",
    "code": "#ifndef _GLIBCXX_NO_ASSERT\n#include <cassert>\n#endif\n#include <cctype>\n#include <cerrno>\n#include <cfloat>\n#include <ciso646>\n#include <climits>\n#include <clocale>\n#include <cmath>\n#include <csetjmp>\n#include <csignal>\n#include <cstdarg>\n#include <cstddef>\n#include <cstdio>\n#include <cstdlib>\n#include <cstring>\n#include <ctime>\n\n#ifdef __GXX_EXPERIMENTAL_CXX0X__\n#include <ccomplex>\n#include <cfenv>\n#include <cinttypes>\n#include <cstdbool>\n#include <cstdint>\n#include <ctgmath>\n#include <cwchar>\n#include <cwctype>\n#endif\n\n#include <algorithm>\n#include <bitset>\n#include <complex>\n#include <deque>\n#include <exception>\n#include <fstream>\n#include <functional>\n#include <iomanip>\n#include <ios>\n#include <iosfwd>\n#include <iostream>\n#include <istream>\n#include <iterator>\n#include <limits>\n#include <list>\n#include <locale>\n#include <map>\n#include <memory>\n#include <new>\n#include <numeric>\n#include <ostream>\n#include <queue>\n#include <set>\n#include <sstream>\n#include <stack>\n#include <stdexcept>\n#include <streambuf>\n#include <string>\n#include <typeinfo>\n#include <utility>\n#include <valarray>\n#include <vector>\n\n#ifdef __GXX_EXPERIMENTAL_CXX0X__\n#include <array>\n#include <atomic>\n#include <chrono>\n#include <condition_variable>\n#include <forward_list>\n#include <future>\n#include <initializer_list>\n#include <mutex>\n#include <random>\n#include <ratio>\n#include <regex>\n#include <system_error>\n#include <thread>\n#include <tuple>\n#include <typeindex>\n#include <type_traits>\n#include <unordered_map>\n#include <unordered_set>\n#endif\n\nusing namespace std;\n\n\nint main()\n{\n\tint M, T, P, R;\n\twhile (cin >> M >> T >> P >> R,M)\n\t{\n\t\tvector<vector<int>>data;\n\t\tvector<pair<int,pair<int,int>>>ans;\n\t\tdata.resize(T);\n\t\tans.resize(T);\n\t\tfor (size_t i = 0; i < T; i++)\n\t\t{\n\t\t\tans[i] = pair < int, pair<int,int> > {i, pair < int, int > {0, 0}};\n\t\t\tdata[i].resize(P);\n\t\t}\n\t\tint a, b, c, d;\n\t\tfor (size_t i = 0; i < R; i++)\n\t\t{\n\t\t\tcin >> a >> b >> c >> d;\n\t\t\tb--;\n\t\t\tc--;\n\t\t\tif (d)\n\t\t\t{\n\t\t\t\tdata[b][c]+=1;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tans[b].second.first++;\n\t\t\t\tans[b].second.second += data[b][c]*20+a;\n\t\t\t}\n\t\t}\n\t\tsort(ans.begin(), ans.end(), [](const pair<int,pair<int, int>>a, const pair<int,pair<int, int>>b) {\n\t\t\tif (a.second.first == b.second.first)\n\t\t\t{\n\t\t\t\tif (a.second.second == b.second.second)\n\t\t\t\t{\n\t\t\t\t\treturn a.first > b.first;\n\t\t\t\t}\n\t\t\t\treturn (a.second.second < b.second.second);\n\t\t\t} else return a.second.first > b.second.first;\n\t\t});\n\t\t\n\t\tcout << ans[0].first+1;\n\t\tfor (size_t i = 1; i < T; i++)\n\t\t{\n\t\t\tif (ans[i - 1].second.first == ans[i].second.first&&ans[i - 1].second.second == ans[i].second.second)\n\t\t\t{\n\t\t\t\tcout << '=';\n\t\t\t} else\n\t\t\t{\n\t\t\t\tcout << ',';\n\t\t\t}\n\t\t\tcout << ans[i].first+1;\n\t\t}\n\t\tcout << endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<vector>\n#include<utility>\n#include<algorithm>\n#include<string>\nusing namespace std;\n\nint main(){\n    int M, T, P, R;\n    while(cin >> M >> T >> P >> R, M){\n        vector< pair< pair<int, int>, int> > data(T);\n        for(int i = 0 ; i < T ; i++){\n            data[i].second = -i;\n        }\n        vector< vector< pair<bool, int> > > solved(T, vector< pair<bool, int> >(P));\n        for(int i = 0 ; i < R ; i++){\n            int m, t, p, j;\n            cin >> m >> t >> p >> j;\n            t--;\n            p--;\n            if(j == 0){\n                data[t].first.first--;\n                data[t].first.second += solved[t][p].second + m;\n                solved[t][p].first = true;\n            }else if(!solved[t][p].first){\n                solved[t][p].second += 20;\n            }\n        }\n\n        sort(data.begin(), data.end());\n\n        string ans = to_string(-data[0].second + 1);\n        for(int i = 1 ; i < T ; i++){\n            if(data[i].first == data[i - 1].first){\n                ans.push_back('=');\n            }else{\n                ans.push_back(',');\n            }\n            ans += to_string(-data[i].second + 1);\n        }\n\n        cout << ans << endl;\n    }\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n\nusing namespace std;\n\nclass Question{\npublic:\n    bool isAC = false;\n    int p = 0;\n};\nclass Team{\npublic:\n    int ID;\n    int AC = 0;\n    int ptime = 0;\n    vector<Question> q;\n\n    Team() : ID(-1){}\n    Team(int id,int qn)\n        : ID(id), q(qn+1)\n    {\n    }\n\n    void submit(int m,int p,int j){\n        if(j == 0){\n            q[p].p += m;\n            q[p].isAC = true;\n            AC++;\n            ptime += q[p].p;\n        }else{\n            q[p].p += 20;\n        }\n    }\n};\n\nbool operator==(const Team& a,const Team& b){\n    return a.AC == b.AC && a.ptime == b.ptime;\n}\nbool operator!=(const Team& a,const Team& b){\n    return !(a == b);\n}\n\n//M:テァツオツづ、ツコツ?ヲツ卍づゥツ鳴?\n//T:テ」ツδ?」ツδシテ」ツδ?ヲツ閉ー\n//P:テ・ツ閉湘ゥツ。ツ古ヲツ閉ー\n//R:テヲツ渉静・ツ?コテヲツ閉ー\nvoid solve(int M,int T,int P,int R){\n    vector<Team> team;\n    for(int i=1;i<=T;i++){\n        team.push_back(Team(i,P));\n    }\n    for(int i=0;i<R;i++){\n        int m,t,p,j;\n        cin >> m >> t >> p >> j;\n        team[t-1].submit(m,p,j);\n    }\n    std::sort(team.begin(),team.end(),\n            [](const Team& a,const Team& b)->bool{\n                if(a.AC < b.AC)\n                    return true;\n                if(a.AC > b.AC)\n                    return false;\n                return a.ptime > b.ptime;\n            }\n            );\n    std::reverse(team.begin(),team.end());\n    bool f = false;\n    cout << team[0].ID;\n    for(int i=1;i<T;i++){\n        if(team[i-1] == team[i]){\n            cout << \"=\" << team[i].ID;\n        }else{\n            cout << \",\" << team[i].ID;\n        }\n    }\n    //for(auto t : team)\n    //{\n    //    //cout << t.ID << \" :\" << t.AC << \" ,\" << t.ptime << endl;\n    //}\n    cout << endl;\n}\n\nint main(){\n    while(true){\n        int M,T,P,R;\n        cin >> M >> T >> P >> R;\n        if(!M&&!T&&!P&&!R)\n            return 0;\n        solve(M,T,P,R);\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n#include <vector>\n\nusing namespace std;\n\nstruct team {\n\tint id, ac, pena;\n\tint wa[16];\n\tteam(int id, int prob) : id(id), ac(0), pena(0){\n\t\tfor (int i = 0; i < 16; i++){\n\t\t\twa[i] = 0;\n\t\t}\n\t}\n\n\tvoid correct(int time, int prob){\n\t\tac++;\n\t\tpena += (time + (20 * wa[prob]));\n\t}\n\tvoid uncorrect(int prob){\n\t\twa[prob]++;\n\t}\n\n\tbool operator<(const team& a) const\n\t{\n\t\tif (ac == a.ac){\n\t\t\tif (pena == a.pena) return id > a.id;\n\t\t\telse return pena < a.pena;\n\t\t}\n\t\telse return ac > a.ac;\n\t}\n\tbool operator==(const team& a) const\n\t{\n\t\treturn (ac == a.ac) && (pena == a.pena);\n\t}\n};\n\nint main(void)\n{\n\tint M, T, P, R;\n\n\twhile (cin >> M >> T >> P >> R, T){\n\t\t// wa[team][problem];\n\t\tint m, t, p, j;\n\t\tvector <team> data;\n\t\tfor (int i = 0; i < T; i++){\n\t\t\tdata.push_back(team(i + 1, P));\n\t\t}\n\n\t\tfor (int i = 0; i < R; i++){\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tif (j != 0) {\n\t\t\t\tdata[t - 1].uncorrect(p);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdata[t - 1].correct(m, p);\n\t\t\t}\n\t\t}\n\t\tsort(data.begin(), data.end());\n\n\t\tfor (int i = 0; i < T; i++){\n\t\t\tif (i == 0) {\n\t\t\t\tcout << data[i].id;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (data[i - 1] == data[i]) cout << \"=\";\n\t\t\telse cout << \",\";\n\t\t\tcout << data[i].id;\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <queue>\n#include <utility>\n#include <algorithm>\n\nusing namespace std;\n\ntypedef pair<long, int> pr; // first: pts, second: team number;\n\nint penalty[50][10]; // [team][problem number]\npr pts[50];\npriority_queue<int> list;\nint m, t, p, r;\n\nint printout(int n, long pre) {\n\tif (n < t && pre == pts[n].first) {\n\t\tlist.push(pts[n].second);\n\t\treturn printout(n+1, pre);\n\t} else {\n\t\tint size = list.size();\n\t\tif (size == 0) return 1;\n\t\twhile (true) {\n\t\t\tcout << list.top();\n\t\t\tlist.pop();\n\t\t\tif (list.empty()) break;\n\t\t\tcout << \"=\";\n\t\t}\n\t\treturn size;\n\t}\n\n\tcout << \"ERR\" << endl;\n\treturn 0;\n}\n\nint main() {\n\twhile (true) {\n\t\tcin >> m >> t >> p >> r;\n\t\tif (m == 0 && t == 0 && p == 0 && r == 0) break;\n\n\t\tfor (int i = 0; i < t; ++i) {\n\t\t\tpts[i].second = i+1;\n\t\t\tpts[i].first = 0;\n\t\t\tfor (int j = 0; j < p; ++j)\n\t\t\t\tpenalty[i][j] = 0;\n\t\t}\n\t\tfor (int i = 0; i < r; ++i) {\n\t\t\tint a, b, c, d;\n\t\t\tcin >> a >> b >> c >> d;\n\t\t\tif (d == 0) {\n\t\t\t\tpts[b-1].first += -10000 + a + penalty[b-1][c-1];\n\t\t\t} else {\n\t\t\t\tpenalty[b-1][c-1] += 20;\n\t\t\t}\n\t\t}\n\n\t\tsort(pts, pts + t);\n\t\tint i = 0;\n\t\twhile (true) {\n\t\t\ti += printout(i, pts[i].first);\n\t\t\tif (i >= t)\n\t\t\t\tbreak;\n\t\t\tcout << \",\";\n\t\t}\n\t\tcout << endl;\n\t}\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <sstream>\n#include <fstream>\n#include <algorithm>\n#include <string>\n#include <stack>\n#include <queue>\n#include <map>\n#include <list>\n#include <vector>\n#include <cstdio>\n#include <cmath>\n#include <cstdlib>\n#include <climits>\nusing namespace std;\n\nstruct score {\n\tint teamNum;\n\tint accepted;\n\tint time;\n\tint penaltyTime;\n\tvector<int> miss;\n\tbool operator==(score s) const {\n\t\treturn this->accepted == s.accepted && this->getTi() == s.getTi();\n\t};\n\tbool operator<(score s) const {\n\t\treturn this->accepted != s.accepted ? this->accepted > s.accepted : (this->getTi() != s.getTi() ? this->getTi() < s.getTi() : this->teamNum > s.teamNum);\n\t};\n\tint getTi() const {\n\t\treturn this->time + this->penaltyTime;\n\t};\n};\n\nint main() {\n\twhile(1){\n\t\tint M, T, P, R;\n\t\tcin >> M >> T >> P >> R;\n\t\t\n\t\tif(!M && !T && !P && !R) break;\n\t\t\n\t\tscore *sc = new score[1+T];\n\t\tfor(int i = 1; i <= T; i++){\n\t\t\tsc[i].teamNum = i;\n\t\t}\n\t\tfor(int i = 0; i < R; i++){\n\t\t\tint m, t, p, r;\n\t\t\tcin >> m >> t >> p >> r;\n\t\t\t\n\t\t\tif(r){\n\t\t\t\tsc[t].miss.push_back(p);\n\t\t\t}else{\n\t\t\t\tsc[t].accepted++;\n\t\t\t\tsc[t].time += m;\n\t\t\t\tif(find(sc[t].miss.begin(), sc[t].miss.end(), p) != sc[t].miss.end()) sc[t].penaltyTime += 20;\n\t\t\t}\n\t\t}\n\t\t\n\t\tsort(&sc[1], &sc[1+T]);\n\t\tfor(int i = 1; i <= T; i++){\n\t\t\tcout << sc[i].teamNum << (i==T ? '\\n' : (sc[i]==sc[i+1] ? '=' : ','));\n\t\t}\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <string>\n#include <cstdlib>\n#include <cmath>\n#include <vector>\n#include <map>\n#include <set>\n#include <algorithm>\n#include <queue>\n#include <stack>\n#include <functional>\n#include <bitset>\n#include <assert.h>\nusing namespace std;\ntypedef long long ll;\ntypedef vector<ll> vl;\ntypedef vector<vl> vvl;\ntypedef vector<char> vc;\ntypedef vector<string> vs;\ntypedef vector<bool> vb;\ntypedef vector<double> vd;\ntypedef pair<ll,ll> P;\ntypedef vector<P> vpl;\ntypedef tuple<ll,ll,ll> tapu;\n#define rep(i,n) for(ll i=0; i<(n); i++)\n#define REP(i,a,b) for(int i=(a); i<(b); i++)\n#define all(x) (x).begin(), (x).end()\n#define rall(x) (x).rbegin(), (x).rend()\nconst int inf = 1<<30;\nconst ll linf = 1LL<<62;\nconst int MAX = 510000;\nll dy[8] = {0,1,0,-1,1,-1,1,-1};\nll dx[8] = {1,0,-1,0,1,-1,-1,1};\nconst double pi = acos(-1);\nconst double eps = 1e-7;\ntemplate<typename T1,typename T2> inline bool chmin(T1 &a,T2 b){\n\tif(a>b){\n\t\ta = b; return true;\n\t}\n\telse return false;\n}\ntemplate<typename T1,typename T2> inline bool chmax(T1 &a,T2 b){\n\tif(a<b){\n\t\ta = b; return true;\n\t}\n\telse return false;\n}\ntemplate<typename T1,typename T2> inline void print2(T1 a, T2 b){cout << a << \" \" << b << \"\\n\";}\ntemplate<typename T1,typename T2,typename T3> inline void print3(T1 a, T2 b, T3 c){\n\tcout << a << \" \" << b << \" \" << c << \"\\n\";\n}\nconst int mod = 1e9 + 7;\n//const int mod = 998244353;\n\nint main(){\n    while(1){\n        ll M,T,P,R; cin >> M >> T >> P >> R;\n        if(!M && !T && !P && !R) break;\n        ll solve[55][15] = {};\n        ll pena[55][15] = {};\n        while(R--){\n            ll m,t,p,b; cin >> m >> t >> p >> b; t--; p--;\n            if(!b){\n                solve[t][p] = 1;\n                pena[t][p] -= m;\n            }else{\n                pena[t][p] -= 20;\n            }\n        }\n        vector<tapu> ans(T);\n        rep(i,T){\n            ll a=0, b=0, c=0;\n            rep(j,P){\n                a += solve[i][j];\n                if(solve[i][j]) b += pena[i][j];\n            }\n            c = i+1;\n            ans[i] = tie(a,b,c);\n        }\n        sort(rall(ans));\n        rep(i,T){\n            ll a,b,c;\n            tie(a,b,c) = ans[i];\n            cout << c;\n            if(i<T-1){\n                ll d,e,f; tie(d,e,f) = ans[i+1];\n                if(a==d && b==e) cout << '=';\n                else cout << \",\";\n            }\n        }\n        cout << endl;\n        rep(i,T) rep(j,P) solve[i][j] = 0, pena[i][j] = 0;\n    }\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <map>\n\nusing std::cin;\nusing std::cout;\nusing std::endl;\nusing std::vector;\nusing std::map;\n\nstruct Pair {\n\tpublic:\n\t\tint a, b;\n\t\tvoid set(int, int);\n};\ninline void Pair::set(int _a, int _b) {\n\ta = _a;\n\tb = _b;\n}\ninline bool operator< (const Pair& left, const Pair& right) {\n\tif (left.a != right.a) {\n\t\treturn (left.a < right.a);\n\t} else {\n\t\treturn (right.b < left.b);\n\t}\n}\ninline bool operator== (const Pair& left, const Pair& right) {\n\tif (left.a == right.a and left.b == right.b) {\n\t\treturn true;\n\t}\n}\n\nint main(void) {\n\twhile (1) {\n\t\tint M, T, P, R;\n\t\tcin >> M >> T >> P >> R;\n\t\tif (M == 0 and T == 0 and P == 0 and R == 0) {\n\t\t\tbreak;\n\t\t}\n\n\t\tvector<int> correct_num(T, 0);\n\t\tvector<int> time(T, 0);\n\t\tvector<int> penalty(T, 0);\n\t\tvector<vector<int>> wrong(T, vector<int>(P, 0));\n\t\tmap<Pair, vector<int>> rank;\n\t\tfor (int i = 0; i < R; i++) {\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tt--;\n\t\t\tp--;\n\n\t\t\tif (j == 0) {\n\t\t\t\t//time[t] = m;\n\t\t\t\ttime[t] += m;\n\t\t\t\tcorrect_num[t]++;\n\t\t\t\tif (wrong[t][p] != 0) {\n\t\t\t\t\tpenalty[t] += wrong[t][p];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\twrong[t][p]++;\n\t\t\t}\n\t\t}\n\t\tfor (int i = 0; i < T; i++) {\n\t\t\ttime[i] += 20 * penalty[i];\n\t\t\tPair pair;\n\t\t\tpair.set(correct_num[i], time[i]);\n\t\t\trank[pair].push_back(i+1);\n\t\t}\n\n\t\tfor (auto itr_map = rank.rbegin(); itr_map != rank.rend(); ++itr_map) {\n\t\t\t//cout << itr_map->first.a << \":\" << itr_map->first.b << endl;\n\t\t\tif (itr_map != rank.rbegin()) {\n\t\t\t\tcout << \",\";\n\t\t\t}\n\t\t\tfor (auto itr_vec = itr_map->second.rbegin(); itr_vec != itr_map->second.rend(); ++itr_vec) {\n\t\t\t\tif (itr_vec != itr_map->second.rbegin()) {\n\t\t\t\t\tcout << \"=\";\n\t\t\t\t}\n\t\t\t\tcout << *itr_vec;\n\t\t\t\t//cout << endl;\n\t\t\t}\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include<stdio.h>\n#include<string.h>\ntypedef struct {\n\tint id;\n\tint ac ;\n\tint time;\n\tint pt[300];\n\tint ok[20];\n\n} Player;\n\nint M, T, P,R;\n\n\n\nvoid makeScore(int n, Player * A)\n{\n\tfor (int i = 1; i <= n; i++)\n\t{\n\t\tfor (int j = 1; j <= P; j++)\n\t\t{\n\t\t\tif (A[i].ok[j] == 0)\n\t\t\t{\n\t\t\t\tif (A[i].pt[j])\n\t\t\t\t\tA[i].time += (20 * A[i].pt[j]);\n\t\t\t}\n\n\t\t}\n\t\n\t\t\n\t}\n}\n\nvoid makeRank(int n, Player*A)\n{\n\tint i, j;\n\tPlayer temp;\n\tfor (int i = 0; i < n; i++)\n\t\tfor (int j = n; j > i + 1; j--)\n\t\t{\n\t\t\tif (A[j].ac>A[j - 1].ac)\n\t\t\t{\n\t\t\t\ttemp = A[j]; A[j] = A[j - 1]; A[j - 1] = temp;\n\t\t\t}\n\t\t\telse if (A[j].ac == A[j - 1].ac)\n\t\t\t{\n\t\t\t\tif (A[j].time < A[j - 1].time)\n\t\t\t\t{\n\t\t\t\t\ttemp = A[j]; A[j] = A[j - 1]; A[j - 1] = temp;\n\t\t\t\t}\n\t\t\t\telse if (A[j].time == A[j - 1].time)\n\t\t\t\t{\n\t\t\t\t\tif (A[j].id > A[j - 1].id)\n\t\t\t\t\t{\n\t\t\t\t\t\ttemp = A[j]; A[j] = A[j - 1]; A[j - 1] = temp;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n}\n\nvoid Print(int n, Player *A)\n{\n\tint i;\n\tfor (i = 1; i <= n; i++)\n\t{\n\t\t\n\t\tprintf(\"%d\", A[i].id);\n\t\tif (A[i].ac == A[i + 1].ac&&A[i].time==A[i+1].time && i != n)\n\t\t\tprintf(\"=\");\n\t\telse if (i != n)\n\t\t\tprintf(\",\");\n\t}\n\tprintf(\"\\n\");\n}\nint main()\n{\n\n\tint i;\n\tint time, team, num, ok;\n\tPlayer plr[100];\n\t\n\twhile (scanf(\"%d%d%d%d\", &M, &T, &P, &R) && M || T || R || P)\n\t{\n\t\tfor (int i = T; i>=1;i--)\n\t\t{\n\t\t\tmemset(plr[i].pt, 0, sizeof(plr[i].pt));\n\t\t\tmemset(plr[i].ok, -1, sizeof(plr[i].ok));\n\t\t\tplr[i].ac = plr[i].time = 0;\n\t\t\tplr[i].id = i;\n\t\t}\n\t\n\t\tfor (i = 0; i < R; i++)\n\t\t{\n\t\t\tscanf(\"%d%d%d%d\", &time, &team, &num, &ok);\n\t\t\tif (ok == 0)\n\t\t\t{\n\t\t\t\tplr[team].ac++;\n\t\t\t\tplr[team].time += time;\n\t\t\t\tplr[team].ok[num] = 0;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t\n\t\t\t\tplr[team].pt[num]++;\n\t\t\t}\n\t\t}\n\n\t\tmakeScore(T, plr);\n\t\tmakeRank(T, plr);\n\t\tPrint(T, plr);\n\n\n\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstring>\n#include<queue>\nusing namespace std;\n\nstruct team{\n  int id;\n  int ans;\n  int time;\n  team(int i,int a,int t): id(i),ans(a),time(t){}\n\n  bool operator >(const team &e)const {\n    if(ans!=e.ans)\n      return ans > e.ans;\n    if(time != e.time)\n      return time<e.time;\n    return id>e.id;\n  }\n  bool operator <(const team &e)const {\n    if(ans!=e.ans)\n      return ans < e.ans;\n    if(time != e.time)\n      return time>e.time;\n    return id<e.id;\n  }\n};\n\nint main()\n{\n  int m,t,p,r;\n  for(;cin>>m>>t>>p>>r,m;)\n    {\n      int teamans[t+1];\n      int teamtime[t+1];\n      int teampena[t+1][p+1];\n      memset(teamans,0,sizeof(teamans));\n      memset(teamtime,0,sizeof(teamtime));\n      memset(teampena,0,sizeof(teampena));\n      for(int i=0;i<r;i++)\n\t{\n\t  int mm,tt,pp,jj;\n\t  cin>>mm>>tt>>pp>>jj;\n\t  //  if(m>mm)\n\t  //   continue;\n\t  if(jj==0)\n\t    {\n\t      teamans[tt]++;\n\t      teamtime[tt]+=mm+teampena[tt][pp];\n\t    }\n\t  else\n\t    {\n\t      teampena[tt][pp]+=20;\n\t    }\n\t}\n      priority_queue<team> qu;\n      for(int i=1;i<=t;i++)\n\t{\n\t  qu.push(team(i,teamans[i],teamtime[i]));\n\t}\n      int buf,buf2;\n      bool flag=false;\n      \n      while(!qu.empty())\n\t{\n\t  team tmp =qu.top();\n\t  qu.pop();\n\t  if(flag)\n\t    {\n\t      if(tmp.ans==buf &&tmp.time==buf2)\n\t\tcout<<\"=\";\n\t      else\n\t\tcout<<\",\";\n\t    }\n\t  flag=true;\n\t  buf=tmp.ans;\n\t  buf2=tmp.time;\n\t  cout<<tmp.id;\n\t}\n      cout<<endl;\n      \n    }\n\n\n}"
  },
  {
    "language": "C++",
    "code": "#define _CRT_SECURE_NO_WARNINGS\n#define _USE_MATH_DEFINES\n#include <iostream>\n#include <map>\n#include <set>\n#include <list>\n#include <cstdio>\n#include <cmath>\n#include <cstring>\n#include <string>\n#include <vector>\n#include <algorithm>\n#include <utility>\n#include <queue>\n#include <iomanip>\n\n#define SIZE 101\n#define INF 100000000\n\nusing namespace std;\n\n\ntypedef pair<int, int> Pa;\n\n\nint tim[100][100]; // t p time\nbool pra[100][100];\n\nint main()\n{\n\tint M, T, P, R;\n\t\n\tpair<Pa, int> pa;\n\n\twhile (true) {\n\t\tcin >> M >> T >> P >> R;\n\t\tif (T == 0) break;\n\n\t\tfor (int i = 0; i <= T; i++) {\n\t\t\tfor (int j = 0; j <= P; j++) {\n\t\t\t\ttim[i][j] = 0; \n\t\t\t\tpra[i][j] = false;\n\t\t\t}\n\t\t}\n\t\tvector<pair<Pa, int>> v(T + 1);\n\n\t\tfor (int i = 0; i <= T; i++) {\n\t\t\tv[i].second = i;\n\t\t}\n\n\t\tfor (int i = 0; i < R; i++) {\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tif (j == 0) {\n\t\t\t\tv[t].first.first++;\n\t\t\t\tv[t].first.second += - m + tim[t][p];\n\t\t\t} else {\n\t\t\t\ttim[t][p] -= 20;\n\t\t\t}\n\t\t}\n\n\t\tsort(v.begin(),v.end());\n\t\tfor (int i = T; i >= 1; i--) {\n\t\t\t//cout << v[i].first.first << \" \" << v[i].first.second << \" \" << v[i].second << endl;\n\t\t\tcout << v[i].second;\n\t\t\tif (i == 1) break;\n\t\t\tif (v[i].first.first == v[i - 1].first.first && v[i].first.second == v[i - 1].first.second)cout << \"=\";\n\t\t\telse cout << \",\";\n\t\t}\n\t\tcout << endl;\n\t\t\n\t}\n\t\n\n\treturn (0);\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <algorithm>\n#include <vector>\n#include <cstring>\n#include <string>\n\nusing namespace std;\n\nconst int MAX_P=10,MAX_T=50,MAX_R=2000;\nconst int MAX_CASE=100;\n\nstruct data{\n\tint ans;\t//??£?§£??°\n\tint time;\t//????????????\n\tint pena[MAX_P];\t//??????i?????????????????£???\n\tint index;\t//???????????????\n};\n\nbool comp(const data &a,const data &b){\n\tif (a.ans!=b.ans)\n\t\treturn a.ans>b.ans;\n\tif (a.time!=b.time)\n\t\treturn a.time<b.time;\n\treturn a.index>b.index;\n}\n\nbool same(const data &a,const data &b){\n\tif (a.ans==b.ans && a.time==b.time){\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nint A[MAX_CASE],B[MAX_CASE],C[MAX_CASE],D[MAX_CASE];\nint ma[MAX_CASE][MAX_R],ta[MAX_CASE][MAX_R],pa[MAX_CASE][MAX_R],ja[MAX_CASE][MAX_R];\n\ndata d[MAX_T];\n\nint main(){\n\tint q=0;\n\tdo{\n\t\tint n,t,p,r;\n\t\tscanf(\"%d %d %d %d\",A+q,B+q,C+q,D+q);\n\t\tfor (int i=0;i<D[q];i++){\n\t\t\tscanf(\"%d %d %d %d\",&ma[q][i],&ta[q][i],&pa[q][i],&ja[q][i]);\n\t\t}\n\t\tq++;\n\t}while (A[q-1]!=0);\n\tint N,T,P,R;\n\tfor (int k=0;k<q;k++){\n\t\tN=A[k],T=B[k],P=C[k],R=D[k];\n\t\tfor (int i=0;i<T;i++){\n\t\t\td[i].ans=d[i].time=0;\n\t\t\td[i].index=i+1;\n\t\t\tmemset(d[i].pena,0,sizeof(d[i].pena));\n\t\t}\n\t\tfor (int i=0;i<R;i++){\n\t\t\tint m,t,p,j;\n\t\t\tm=ma[k][i],t=ta[k][i],p=pa[k][i],j=ja[k][i];\n\t\t\tdata &da=d[t-1];\n\t\t\tif (j==0){\n\t\t\t\t//??£?§£\n\t\t\t\tda.time+=m+da.pena[p-1];\n\t\t\t\tda.ans++;\n\t\t\t}\n\t\t\telse{\n\t\t\t\t//?????£?§£\n\t\t\t\tda.pena[p-1]+=20;\t//??????????????£???\n\t\t\t}\n\t\t}\n\t\tsort(d,d+T,comp);\n\t\tfor (int i=0;i<T;i++){\n\t\t\tif (i){\n\t\t\t\tif (same(d[i],d[i-1])){\n\t\t\t\t\tprintf(\"=\");\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tprintf(\",\");\n\t\t\t\t}\n\t\t\t}\n\t\t\tprintf(\"%d\",d[i].index);\n\t\t}\n\t\tprintf(\"\\n\");\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n/*{{{*/  //template\n#define rep(i,n) for(int i=0;i<(int)(n);i++)\nconstexpr int INF = numeric_limits<int>::max()/2;\nconstexpr long long LINF = numeric_limits<long long>::max()/3;\n#define mp make_pair\n#define pb push_back\n#define eb emplace_back\n#define fi first\n#define se second\n#define all(v) (v).begin(),(v).end()\n#define sz(x) (int)(x).size()\n#define debug(x) cerr<<#x<<\":\"<<x<<endl\n#define debug2(x,y) cerr<<#x<<\",\"<<#y\":\"<<x<<\",\"<<y<<endl\n//struct fin{ fin(){ cin.tie(0); ios::sync_with_stdio(false); } } fin_;\nstruct Double{ double d; explicit Double(double x) : d(x){} };\nostream& operator<<(ostream& os,const Double x){ os << fixed << setprecision(20) << x.d; return os; }\ntemplate<typename T> ostream& operator<<(ostream& os,const vector<T>& vec){ os << \"[\"; for(const auto& v : vec){ os << v << \",\"; } os << \"]\"; return os; }\ntemplate<typename T,typename U> ostream& operator<<(ostream& os,const pair<T,U>& p){ os << \"(\" << p.first << \",\"<< p.second <<\")\"; return os; }\ntemplate<typename T> ostream& operator<<(ostream& os,const set<T>& st){ os<<\"{\"; for(T v:st) os<<v<<\",\"; os <<\"}\"; return os; }\ntemplate<typename T,typename U> inline void chmax(T &x,U y){ if(y>x) x = y; }\ntemplate<typename T,typename U> inline void chmin(T &x,U y){ if(y<x) x = y; }\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef pair<int,int> pii;\ntypedef vector<int> vi;\ntypedef vector<vi> vvi;\nll gcd(ll a,ll b){ if(b==0) return a; else return gcd(b,a%b); }\n//constexpr double eps = 1e-14; \nconstexpr double eps = 1e-10; \nconstexpr ll mod = 1e9+7;\nconst int dx[]={1,0,-1,0} ,dy[] = {0,1,0,-1};\n/*}}}*/\n\nint M,T,P,R;\n\nclass Point{\n    public:\n        int ac,ti;\n        int idx;\n\n        bool operator<(const Point& p) const {\n            if(ac < p.ac) return true;\n            else if(ac == p.ac and ti > p.ti) return true;\n            return false;\n        }\n        bool operator==(const Point& p) const {\n            if(ac == p.ac and ti == p.ti) return true;\n            else return false;\n        }\n};\n\n\nvoid solve(){\n    vector<vector<int>> wa(T,vector<int>(P,0));\n    vector<vector<int>> ac(T,vector<int>(P,-1));\n    rep(i,R){\n        int m,t,p,j;\n        cin >> m >> t >> p >> j;\n        t--;\n        p--;\n        if(j==0){\n            ac[t][p] = m;\n        }else{\n            wa[t][p]++;\n        }\n    }\n\n    vector<Point> point;\n    for(int i=0;i<T;i++){\n        int po = 0;\n        int cnt = 0;\n        for(int j=0;j<P;j++){\n            if(ac[i][j] == -1) continue;\n            cnt++;\n            po += ac[i][j];\n            po += wa[i][j] * 20;\n        }\n        Point p;\n        p.ac = cnt;\n        p.ti = po;\n        p.idx = i;\n        point.push_back(p);\n    }\n    sort(all(point));\n    reverse(all(point));\n\n    int i=0;\n    while(i<T){\n        int j=i;\n        while(j<T and point[i] == point[j]){\n            j++;\n        }\n        vector<int> v;\n        for(int k=i;k<j;k++){\n            v.push_back(point[k].idx);\n        }\n        sort(all(v));\n        for(int i=v.size()-1;i>=0;i--){\n            cout << v[i]+1;\n            if(i) cout << \"=\";\n        }\n        if(j==T) cout << endl;\n        else cout << \",\";\n        i = j;\n    }\n}\n\nint main(){\n    while(1){\n        cin >> M >> T >> P >> R;\n        if(M==0 and T==0 and P==0 and R==0) break;\n        solve();\n    }\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\nusing namespace std;\n\nstruct team{\n\tint n, c, t, p;\n};\n\nbool operator<(const team team1, const team team2){\n\tbool rep;\n\tif(team1.c == team2.c){\n\t\trep = (team1.t == team2.t) ? team1.n > team2.n : team1.t < team2.t;\n\t}else{\n\t\trep = (team1.c > team2.c);\n\t}\n\treturn rep;\n}\n\nint main(){\n\tint M, T, P, R;\n\twhile( cin >> M >> T >> P >> R, M || T || P || R ){\n\t\tvector<team> teams(T);\n\t\tfor(int i = 0; i < T; i++){\n\t\t\tteams[i].n = i+1;\n\t\t\tteams[i].c = 0;\n\t\t\tteams[i].t = 0;\n\t\t\tteams[i].p = 0;\n\t\t}\n\t\tfor(int i = 0; i < R; i++){\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tif( j == 0 ){\n\t\t\t\tteams[t-1].c++;\n\t\t\t\tteams[t-1].t = m + 20 * teams[t-1].p;\n\t\t\t}else{\n\t\t\t\tteams[t-1].p++;\n\t\t\t}\n\t\t}\n\t\tsort(teams.begin(), teams.end());\n\t\tcout << teams[0].n;\n\t\tfor(int i = 1; i < T; i++){\n\t\t\tif( teams[i].c == teams[i-1].c && teams[i].t == teams[i-1].t ) cout << \"=\";\n\t\t\telse cout << \",\";\n\t\t\tcout << teams[i].n;\n\t\t}\n\t\tcout << endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n#define INF 1000000000\n\nint main(){\n    typedef struct TEAM{\n        int AC;\n        int WA[12];\n        int PE;\n        int num;\n    } team;\n\n    while(1){\n        int m, t, p, r; cin >> m >> t >> p >> r;\n        if(t == 0) break;\n        team Team[55];\n        \n        //?????????\n        for(int i = 1; i <= t; i++){\n            Team[i].num = i;\n            Team[i].AC = 0;\n            Team[i].PE = 0;\n            for(int j = 1; j <= p; j++) Team[i].WA[j] = 0;\n        }\n\n        \n        //?????°????????????\n        for(int i = 0; i < r; i++){\n            int tID, pID, ti; cin  >> ti >> tID >> pID;\n            int j; cin >> j;\n\n            if(j != 0){\n                Team[tID].WA[pID]++;\n            }else{\n                Team[tID].AC++;\n                Team[tID].PE += Team[tID].WA[pID] * 20 + ti;\n            }\n        }\n\n        int flag = 1;\n\n        while(flag == 1){\n            flag = 0;\n            for(int i = 1; i < t; i++){\n                if(Team[i].num < Team[i + 1].num){\n                    team temp;\n                    temp = Team[i];\n                    Team[i] = Team[i + 1];\n                    Team[i + 1] = temp;\n                    flag = 1;\n                    //if(Team[i].PE == Team[j].PE) cout << \"nuko\" << endl;\n                }\n            }\n        }\n\n        flag = 1;\n\n        while(flag == 1){\n            flag = 0;\n            for(int i = 1; i < t; i++){\n                if(Team[i].PE > Team[i + 1].PE){\n                    team temp;\n                    temp = Team[i];\n                    Team[i] = Team[i + 1];\n                    Team[i + 1] = temp;\n                    flag = 1;\n                    //if(Team[i].PE == Team[j].PE) cout << \"nuko\" << endl;\n                }\n            }\n        }\n\n        flag = 1;\n        while(flag == 1){\n            flag = 0;\n            for(int i = 1; i < t; i++){\n                if(Team[i].AC < Team[i + 1].AC){\n                    team temp;\n                    temp = Team[i];\n                    Team[i] = Team[i + 1];\n                    Team[i + 1] = temp;\n                    flag = 1;\n                    //if(Team[i].PE == Team[j].PE) cout << \"nuko\" << endl;\n                }\n            }\n        }\n\n        for(int i = 1; i <= t; i++){\n            if(i == t) cout << Team[i].num;\n            else if(Team[i].AC == Team[i + 1].AC && Team[i].PE == Team[i + 1].PE) cout << Team[i].num << \"=\";\n            else cout << Team[i].num << \",\";\n        }\n        cout << endl;\n    }\n\n    \n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\nusing namespace std;\n\nint main(){\n while(true){\n  int M, T, P, R;\n  cin >> M >> T >> P >> R;\n\n  if(M==0 && T==0 && P==0 && R==0) break;\n\n  int CP[T],  TT[T],  PT[T][P]; //正解数、時間計、ペナルティ\n  for(int i=0; i<T; i++){\n   CP[i] = TT[i] = 0;\n   for(int j=0; j<P; j++){\n    PT[i][j] = 0;\n   }\n  }\n\n  for(int i=0; i<R; i++){ //各チームの正解数、時間計を求める\n   int m, t, p, j;\n   cin >> m >> t >> p >> j;\n   \n   if(j==0){ //正解\n    CP[t-1]++;\n    TT[t-1] += (m+PT[t-1][p-1]);\n   }else{ //不正解\n    PT[t-1][p-1] += 20;\n   }\n  }\n\n   int t_now, t_pre = -1; //今のチーム、1つ前のチーム\n   bool flag[50]; //処理済みフラグ\n   for(int i=0; i<T; i++){\n    flag[i] = false;\n   }\n   \n   for(int i=0; i<T; i++){\n    t_now = -1;\n    for(int j=0; j<T; j++){ //今のチームを求める\n     if(flag[j]) continue;\n     if(t_now==-1){\n      t_now = j;\n     }else{\n      if(CP[j]>CP[t_now] || (CP[j]==CP[t_now] && TT[j]<=TT[t_now])){\n       t_now = j;\n      }\n     }\n    }\n\n    if(t_pre!=-1){\n     if(CP[t_now]==CP[t_pre] && TT[t_now]==TT[t_pre]){\n      cout << '=';\n     }else{\n      cout << ', ';\n     }\n    }\n    cout<<t_now+1;\n\n    flag[t_now] = true;\n    t_pre = t_now;\n   }\n   cout << endl;\n  }\n  return 0;\n }\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n\nusing namespace std;\n\nclass Question{\npublic:\n    bool isAC;\n    int p;\n\n    Question() : isAC(false),p(0){}\n};\nclass Team{\npublic:\n    int ID;\n    int AC;\n    int ptime;\n    vector<Question> q;\n\n    Team() : ID(-1), q(11), ptime(0), AC(0) {}\n    Team(int id)\n        : ID(id), q(11) , ptime(0), AC(0)\n    {\n    }\n\n    void submit(int m,int p,int j){\n        if(j == 0){\n            q[p].p += m;\n            q[p].isAC = true;\n            AC++;\n            ptime += q[p].p;\n        }else{\n            q[p].p += 20;\n        }\n    }\n};\n\nbool operator==(const Team& a,const Team& b){\n    return a.AC == b.AC && a.ptime == b.ptime;\n}\nbool operator!=(const Team& a,const Team& b){\n    return !(a == b);\n}\n\n//M:テァツオツづ、ツコツ?ヲツ卍づゥツ鳴?\n//T:テ」ツδ?」ツδシテ」ツδ?ヲツ閉ー\n//P:テ・ツ閉湘ゥツ。ツ古ヲツ閉ー\n//R:テヲツ渉静・ツ?コテヲツ閉ー\nvoid solve(int M,int T,int P,int R){\n    vector<Team> team;\n    for(int i=1;i<=T;i++){\n        team.push_back(Team(i));\n    }\n    for(int i=0;i<R;i++){\n        int m,t,p,j;\n        cin >> m >> t >> p >> j;\n        team[t-1].submit(m,p,j);\n    }\n    std::sort(team.begin(),team.end(),\n            [](const Team& a,const Team& b)->bool{\n                if(a.AC < b.AC)\n                    return true;\n                if(a.AC > b.AC)\n                    return false;\n                if(a.ptime > b.ptime)\n                    return true;\n                return a.ID < b.ID;\n            }\n            );\n    std::reverse(team.begin(),team.end());\n    bool f = false;\n    //for(auto t : team)\n    //{\n    //    cout << t.ID << \" :\" << t.AC << \" ,\" << t.ptime << endl;\n    //}\n    cout << team[0].ID;\n    for(int i=1;i<T;i++){\n        if(team[i-1] == team[i]){\n            cout << \"=\" << team[i].ID;\n        }else{\n            cout << \",\" << team[i].ID;\n        }\n    }\n    cout << endl;\n}\n\nint main(){\n    while(true){\n        int M,T,P,R;\n        cin >> M >> T >> P >> R;\n        if(!M&&!T&&!P&&!R)\n            return 0;\n        solve(M,T,P,R);\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <utility>\n#include <algorithm>\n#include <tuple>\nusing namespace std;\n\nint main()\n{\n\tint M, T, P, R, m, t, p, j;\n\twhile (cin >> M >> T >> P >> R, M || T || P || R) {\n\t\tvector< vector< pair<int, int> > > data(T + 1, vector< pair<int, int> >(P + 1, pair<int, int>(0,0)));\n\t\tvector< tuple<int, int, int> > score(T + 1);\n\t\tfor (int i = 0; i < R; i++) {\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tif (j == 0) {\n\t\t\t\tdata[t][p].first = m + data[t][p].second * 20;\n\t\t\t\tget<0>(score[t])--;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdata[t][p].second++;\n\t\t\t}\n\t\t}\n\t\tfor (int i = 1; i <= T; i++) {\n\t\t\tint sco = 0,pena = 0;\n\t\t\tfor (int j = 0; j < P; j++) {\n\t\t\t\tif (data[i][j].first) {\n\t\t\t\t\tsco--;\n\t\t\t\t\tpena += data[i][j].first;\n\t\t\t\t}\n\t\t\t}\n\t\t\tscore[i] = tuple<int, int, int>(get<0>(score[i]),pena,-i);\n\t\t}\n\t\tsort(score.begin() + 1, score.end());\n\t\ttuple<int, int, int> temp = score[1];\n\t\tcout << -get<2>(score[1]);\n\t\tfor (int i = 2; i <= T; i++) {\n\t\t\tif (get<0>(temp) == get<0>(score[i]) && get<1>(temp) == get<1>(score[i])) {\n\t\t\t\tcout << \"=\";\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcout << \",\";\n\t\t\t}\n\t\t\tcout << -get<2>(score[i]);\n\t\t\ttemp = score[i];\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstdlib>\n#include <cstdio>\n#include <cstring>\n#include <cmath>\n#include <stack>\n#include <queue>\n#include <cctype>\n#include <complex>\n#include <vector>\n#include <set>\n#include <map>\n#include <algorithm>\n#include <functional>\n#include <cassert>\n#include <iomanip>\n\nusing namespace std;\n\n#define all(x) begin(x), end(x)\n#define rall(x) (x).rbegin(), (x).rend()\ntypedef long long ll;\ntypedef complex<int> P;\ntypedef pair<int, int> pii;\ntypedef tuple<int, int, int> tii;\nconst double EPS = 1e-10;\nconst double PI = acos(-1.0);\n\n\n\nconst int n = 151;\nvector<vector<int>> a(n, vector<int>(n));\n\nvoid init(){\n\tfor(int i=1;i<n;++i) for(int j=i+1;j<n;++j){\n\t\ta[i][j] = i * i + j * j;\n\t}\n}\n\nbool solve(){\n\tint h, w;\n\tcin>> h>> w;\n\tif(!h && !w) return false;\n\n\tint x = h * h + w * w;\n\tpii ans(n, n);\n\tfor(int i=1;i<n;++i){\n\t\tfor(int j=i+1;j<n;++j){\n\t\t\tint y = i * i + j * j;\n\t\t\tif((i <= h && y == x) || y < x) continue;\n\t\t\tif(y < ans.first * ans.first + ans.second * ans.second){\n\t\t\t\tans = pii(i, j);\n\t\t\t}\n\t\t}\n\t}\n\tcout<< ans.first<< \" \"<< ans.second<< endl;\n\treturn true;\n}\n\nint main(){\n\tcout.setf(ios::fixed); cout.precision(10);\n\tinit();\n\twhile(solve());\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n#define FOR(i,a,b) for(int i=(a);i<(b);++i)\n#define rep(i,n)   FOR(i,0,n)\n#define pb emplace_back\ntypedef long long ll;\ntypedef pair<int,int> pint;\n\npair<pint,int> cnt[51];//{cnt,-pena,id}\nint pn[51][12];\nint main(){\n    int m,t,p,r;\n    while(cin>>m>>t>>p>>r,m|t|p|r){\n        rep(i,t) cnt[i]={{0,0},i+1};\n        memset(pn,0,sizeof(pn));\n        int mi,ti,pi,ji;\n        rep(i,r){\n            cin>>mi>>ti>>pi>>ji;\n            --ti;\n            if(ji==0){\n                ++cnt[ti].first.first;\n                cnt[ti].first.second-=mi+pn[ti][pi];\n            }\n            else{\n                pn[ti][pi]+=20;\n            }\n        }\n        sort(cnt,cnt+t);\n        reverse(cnt,cnt+t);\n        rep(i,t){\n            cout<<cnt[i].second;\n            if(i<t-1){\n                if(cnt[i].first==cnt[i+1].first) cout<<\"=\";\n                else cout<<\",\";\n            }\n        }\n        cout<<endl;\n    }\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstring>\nusing namespace std;\n\nint M, T, P, R;\nint wa[52][12];\nint ac[52], pe[52], id[52];\n\nint main(){\n  while(cin >> M >> T >> P >> R){\n    if(M == 0) break;\n\n    memset(ac, 0, sizeof(ac));\n    memset(wa, 0, sizeof(wa));\n    memset(pe, 0, sizeof(pe));\n\n    while(R--){\n      int m, t, p, j;\n      cin >> m >> t >> p >> j;\n\n      t--;\n      p--;\n\n      if(j == 0){\n        ac[t]++;\n        pe[t] += m;\n        pe[t] += 20 * wa[t][p];\n      }\n      else{\n        wa[t][p]++;\n      }\n    }\n\n    for(int i = 0; i < T; i++){\n      id[i] = i + 1;\n    }\n    for(int i = 0; i < T; i++){\n      for(int j = i + 1; j < T; j++){\n        if(ac[i] < ac[j] || ac[i] == ac[j] && pe[i] > pe[j] ||\n           ac[i] == ac[j] && pe[i] == pe[j] && id[i] < id[j]){\n          swap(ac[i], ac[j]);\n          swap(pe[i], pe[j]);\n          swap(id[i], id[j]);\n        }\n      }\n    }\n\n    cout << id[0];\n    for(int i = 1; i < T; i++){\n      if(ac[i - 1] == ac[i] && pe[i - 1] == pe[i]) cout << \"=\";\n      else                                         cout << \",\";\n\n      cout << id[i];\n    }\n    cout<<endl;\n  }\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n#include <vector>\n#include <stack>\n#include <queue>\n#include <map>\n#include <cmath>\n#include <string>\n#include <sstream>\n#include <iomanip>\n#include <complex>\nusing namespace std;\n\n#define ll long long\n#define vvi vector< vector<int> >\n#define vi vector<int>\n#define All(X) X.begin(),X.end()\n#define FOR(i,a,b) for(int i=(int)(a);i<(int)(b);i++)\n#define REP(i,n) for(int i=0;i<(int)(n);i++)\n#define pb push_back\n#define pii pair<int,int>\n#define mp make_pair\n#define pi 3.14159265359\n#define shosu(X) fixed << setprecision(X)\nll gcd(ll a,ll b){return b?gcd(b,a%b):a;}\nll lcm(ll a,ll b){return a/gcd(a,b)*b;}\n\nint main(){\n\twhile(1){\n\t\tint m,t,p,r;\n\t\tcin >> m >> t >> p >> r;\n\t\tif(t==0) break;\n\t\tint WAnum[51][11];// 1-\n\t\tREP(i,51) REP(j,11) WAnum[i][j] = 0;\n\t\tpair<int,pair<int,int> > data[51];//p-ac_num penalty\n\t\tREP(i,51) {\n\t\t\tdata[i].first = p;\n\t\t\tdata[i].second.second = t-i;\n\t\t}\n\t\tREP(i,r){\n\t\t\tint mm,tt,pp,jj;\n\t\t\tcin >> mm >> tt >> pp >> jj;\n\t\t\tif(jj==0){\n\t\t\t\t//AC\n\t\t\t\tdata[tt-1].first--;\n\t\t\t\tdata[tt-1].second.first += (mm+WAnum[tt-1][pp]*20);\n\t\t\t}else{\n\t\t\t\t//WA\n\t\t\t\tWAnum[tt-1][pp]++;\n\t\t\t}\n\t\t}\n\t\tsort(data,data+t);\n\n\t\tint topac = data[0].first;\n\t\tint toppenalty = data[0].second.first;\n\t\tcout << t-data[0].second.second+1;\n\t\tFOR(i,1,t){\n\t\t\tif(data[i].first==topac&&data[i].second.first==toppenalty){\n\t\t\t\tcout << \"=\" << t-data[i].second.second+1;\n\t\t\t}else{\n\t\t\t\ttopac = data[i].first;\n\t\t\t\ttoppenalty = data[i].second.first;\n\t\t\t\tcout << \",\" << t-data[i].second.second+1;\n\t\t\t}\n\t\t}\n\t\tcout << endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\n#define all(x) (x).begin(),(x).end()\nconst int mod=1000000007,MAX=2005;\nconst ll INF=1LL<<59;\nstruct team{\n    int ti;\n    vector<int> cnt;\n    int ok;\n    int id;\n};\n\nint main(){\n    \n    std::ifstream in(\"text.txt\");\n    std::cin.rdbuf(in.rdbuf());\n    cin.tie(0);\n    ios::sync_with_stdio(false);\n    \n    while(1){\n        int M,T,P,R;cin>>M>>T>>P>>R;\n        \n        if(M+T+P+R==0) break;\n        \n        vector<team> S(T);\n        for(int i=0;i<T;i++){\n            S[i].cnt.resize(15);\n            S[i].id=i;\n        }\n        \n        for(int i=0;i<R;i++){\n            int a,b,c,d;cin>>a>>b>>c>>d;\n            b--;c--;\n            if(d){\n                S[b].cnt[c]++;\n            }else{\n                S[b].ti+=S[b].cnt[c]*20+a;\n                S[b].ok++;\n            }\n        }\n        \n        sort(all(S),[](team a,team b){\n            if(a.ok==b.ok){\n                if(a.ti==b.ti){\n                    return a.id>b.id;\n                }\n                return a.ti<b.ti;\n            }\n            return a.ok>b.ok;\n        });\n        \n        for(int i=0;i<T;i++){\n            if(i){\n                if(S[i].ok==S[i-1].ok&&S[i].ti==S[i-1].ti){\n                    cout<<'='<<S[i].id+1;\n                }else{\n                    cout<<','<<S[i].id+1;\n                }\n            }else{\n                cout<<S[i].id+1;\n            }\n        }\n        cout<<endl;\n    }\n    \n}\n\n\n\n\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\nusing namespace std;\n\nint M, T, P, R;\n\nstruct Team{\n\tint id, ac, timecost;\n\tint wa[11];\n\tTeam(int i){\n\t\tid = i;\n\t\tac = 0; timecost = 0;\n\t\tfor(int i = 0; i < 11; i++) wa[i] = 0;\n\t}\n};\n\nbool compare(const Team &a, const Team &b){\n\tif(a.ac != b.ac) return a.ac > b.ac;\n\telse if(a.timecost != b.timecost) return a.timecost < b.timecost;\n\telse return a.id > b.id;\n}\n\nint main(){\n\twhile(cin >> M >> T >> P >> R && M != 0 && T != 0 && P != 0 && R != 0){\n\t\tvector<Team> teams;\n\t\tfor(int i = 0; i < T; i++){\n\t\t\tTeam t(i);\n\t\t\tteams.push_back(t);\n\t\t}\n\n\t\tfor(int i = 0; i < R; i++){\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >>j;\n\t\t\tif(j == 0){\n\t\t\t\tteams[t-1].ac++;\n\t\t\t\tteams[t-1].timecost = m + teams[t-1].wa[p] * 20;\n\t\t\t}else{\n\t\t\t\tteams[t-1].wa[p]++;\n\t\t\t}\n\t\t}\n\n\t\tsort(teams.begin(), teams.end(), compare);\n\n\t\tint p_ac = -1, p_tc = -1;\n\t\tfor(int i = 0; i < T; i++){\n\t\t\tif(p_ac == teams[i].ac && p_tc == teams[i].timecost){\n\t\t\t\tcout << \"=\" << teams[i].id + 1;\n\t\t\t}else if(i != 0){\n\t\t\t\tcout << \",\" << teams[i].id + 1;\n\t\t\t\tp_ac = teams[i].ac;\n\t\t\t\tp_tc = teams[i].timecost;\n\t\t\t}else{\n\t\t\t\tcout << teams[i].id + 1;\n\t\t\t}\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n#define INF 1000000\nusing namespace std;\n\nbool flag[51];\nint M,T,P,R;\n\nbool check(){\n\tfor(int i=1;i<=T;i++)\n\t\tif(flag[i])\n\t\t\treturn true;\n\treturn false;\n}\n\nint main(void){\n\twhile(cin >> M >> T >> P >> R,M|T|P|R){\n\t\tfor(int i=1;i<=T;i++)\n\t\t\tflag[i]=true;\n\t\tint cor[51]={0};\n\t\tint time[51]={0};\n\t\tint pe[51][11]={0};\n\t\tint m,t,p,j;\n\t\tfor(int i=0;i<R;i++){\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tif(j){\n\t\t\t\tpe[t][p]++;\n\t\t\t}else{\n\t\t\t\tcor[t]++;\n\t\t\t\ttime[t]+=m;\n\t\t\t\ttime[t]+=pe[t][p]*20;\n\t\t\t}\n\t\t}\n\t\tint o=0;\n\t\twhile(check()){\n\t\t\tcout << (o? \",\":\"\");\n\t\t\to++;\n\t\t\tint correct=0,less=INF;\n\t\t\tfor(int i=T;i>=1;i--){\n\t\t\t\tif(!flag[i])\n\t\t\t\t\tcontinue;\n\t\t\t\tif(cor[i]>correct)\n\t\t\t\t\tcorrect=cor[i],less=time[i];\n\t\t\t\telse if(correct==cor[i]&&less>time[i])\n\t\t\t\t\tless=time[i];\n\t\t\t}\n\t\t\tint d=0;\n\t\t\tfor(int i=T;i>=1;i--){\n\t\t\t\tif(!flag[i])\n\t\t\t\t\tcontinue;\n\t\t\t\tif(correct==cor[i]&&time[i]==less)\n\t\t\t\t\tcout << (d?\"=\":\"\") << i,d++,flag[i]=false;\n\t\t\t}\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<map>\n#include<set>\n#include<list>\n#include<cmath>\n#include<queue>\n#include<stack>\n#include<cstdio>\n#include<string>\n#include<vector>\n#include<complex>\n#include<cstdlib>\n#include<cstring>\n#include<climits>\n#include<numeric>\n#include<sstream>\n#include<iostream>\n#include<algorithm>\n#include<functional>\n#include<cctype>\n\n#define mp make_pair\n#define pb push_back\n#define REP(i,a,n) for(int i = a;i < (n);i++)\n#define rep(i,n) for(int i = 0;i < (n);i++)\n#define all(s) s.begin(), s.end()\n#define rall(s) s.rbegin(), s.rend()\n#define range(x,min,max) ((min) <= (x) && (x) <= (max))\n\nusing namespace std;\n\ntypedef long long LL;\ntypedef vector<int> VI;\ntypedef vector<vector<int> > VII;\ntypedef vector<string> VS;\ntypedef vector<bool> VB;\ntypedef pair<int,int> PII;\n\nconst int DX[]={1,0,-1,0},DY[]={0,-1,0,1};\n\nint M, T, P, R;\n\nstruct Score {\n\tScore() {\n\t\tcount = 0;\n\t\ttime = 0;\n\t}\n\tint team;\n\tint count;\n\tint time;\n\n\tbool operator < (const Score& right) const {\n\t\tif (count != right.count) {\n\t\t\treturn count > right.count;\n\t\t}\n\t\tif (time != right.time) {\n\t\t\treturn time < right.time;\n\t\t}\n\t\treturn team > right.team;\n\t}\n};\n\nint main(){\n\tcin.tie(0);\n   \tios::sync_with_stdio(false);\n\twhile (1) {\n\t\tcin >> M >> T >> P >> R;\n\t\tif (M == 0 && T == 0 && P == 0 && R == 0) break;\n\t\tvector<Score> score(T);\n\t\tVII pena(T, VI(P, 0));\n\t\trep (i, T) {\n\t\t\tscore[i].team = i;\n\t\t}\n\t\trep (i, R) {\n\t\t\tint m, t, p, f;\n\t\t\tcin >> m >> t >> p >> f;\n\t\t\tif (f != 0) {\n\t\t\t\tpena[t - 1][p - 1] += 20;\n\t\t\t} else {\n\t\t\t\tscore[t - 1].count++;\n\t\t\t\tscore[t - 1].time += m + pena[t - 1][p - 1];\n\t\t\t}\n\t\t}\n\t\tsort(all(score));\n\t\trep (i, score.size()) {\n\t\t\tif (i != 0) {\n\t\t\t\tcout << (score[i - 1].count == score[i].count && score[i - 1].time == score[i].time? '=' : ',');\n\t\t\t}\n\t\t\tcout << score[i].team + 1;\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <cctype>\n#include <utility>\n#include <vector>\n#include <algorithm>\nusing namespace std;\n\n#define gcu getchar_unlocked\n#define pcu putchar_unlocked\n#define _T template <typename T>\n#define _HT template <typename H, typename... T>\n#define _il inline\n#define _in _il int in\n#define _sc _il bool scan\n_T T in(int c){T n=0;bool m=false;while(isspace(c)){c=gcu();}if(c=='-')m=true,c=gcu();\n\tdo{n=10*n+(c-'0'),c=gcu();}while(c>='0'&&c<='9');return m?-n:n;}\n_in() {return in<int>(gcu());}\n_T T scan(T &n){int c=gcu();return c==EOF?false:(n=in<T>(c),true);}\n_sc(char &c){c=gcu();gcu();return c!=EOF;}\n#ifdef _GLIBCXX_STRING\n_sc(string &s){int c;s=\"\";\n\tfor(;;){c=gcu();if(c=='\\n'||c==' ')return true;else if(c==EOF)return false;s+=c;}}\n#endif\n_HT _sc(H &h, T&&... t){return scan(h)&&scan(t...);}\n#define _vo _il void out\n#define _vl _il void outl\n_vo(bool b) {pcu('0'+b);}\n_vo(const char *s){while(*s)pcu(*s++);}\n_vo(char c){pcu(c);}\n#ifdef _GLIBCXX_STRING\n_vo(string s){for(char c:s)pcu(c);}\n#endif\n_T _vo(T n){static char buf[20];char *p=buf;\n\tif(n<0)pcu('-'),n*=-1;if(!n)*p++='0';else while(n)*p++=n%10+'0',n/=10;\n\twhile (p!=buf)pcu(*--p);}\n_vl(){out('\\n');}\n#ifdef _GLIBCXX_VECTOR\n_T _vo(vector<T> &v){for(T &x:v)out(&x == &v[0]?\"\":\" \"),out(x);outl();}\n#endif\n_HT _vo(H&& h, T&&... t){out(h);out(move(t)...);}\ntemplate <typename... T> _vl(T&&... t){out(move(t)...);outl();}\n\nstruct team {\n\tint m = 0, t, s = 0;\n\tvector<int> p;\n\tbool operator < (team a) const {\n\t\treturn s == a.s ? m == a.m ? t > a.t : m < a.m : s > a.s;\n\t}\n};\n\nint main() {\n\tfor (int M, T, P, R; (M = in(), T = in(), P = in(), R = in(), M);) {\n\t\tvector<team> a(T);\n\t\t{\n\t\t\tint i = 1;\n\t\t\tfor (team &o: a) {\n\t\t\t\to.t = i++;\n\t\t\t\to.p.resize(P);\n\t\t\t}\n\t\t}\n\t\twhile (R--) {\n\t\t\tint m = in(), t = in() - 1, p = in() - 1;\n\t\t\tteam &o = a[t];\n\t\t\tif (in())\n\t\t\t\to.p[p] += 20;\n\t\t\telse {\n\t\t\t\to.m += o.p[p] + m;\n\t\t\t\to.s++;\n\t\t\t}\n\t\t}\n\t\tsort(a.begin(), a.end());\n\t\tfor (int i = 0; i < T; i++) {\n\t\t\tif (i)\n\t\t\t\tout(a[i].s == a[i - 1].s && a[i].m == a[i - 1].m ? '=' : ',');\n\t\t\tout(a[i].t);\n\t\t}\n\t\toutl();\n\t}\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n\n#include <cmath>\n#include <iomanip>\n#include <vector>\n\nusing namespace std;\n#define int ll\n#define ll long long\n\n#define ALL(a) (a).begin(), (a).end()\n#define FOR(i, a, b) for (int i = (int)a; i < (int)b; ++i)\n#define REP(i, n) for (int i = 0; i < (int)n; ++i)\n\nsigned main() {\n  int M, T, P, R;\n  while(cin >> M >> T >> P >> R, M||T||P||R){\n    struct Team{\n      vector<int> cnt;\n      vector<int> acTime;\n      int sum, time;\n      int idx;\n\n      Team(int p) : cnt(p, 0), acTime(p, -1), sum(-1), time(-1), idx(-1) {}\n      void calc(){\n        if(sum != -1) return;\n        sum = time = 0;\n        REP(i, cnt.size()) {\n          if(acTime[i] == -1) continue;\n          ++sum;\n          time += acTime[i] + 20 * cnt[i];\n        }\n      }\n\n      bool operator<(const Team& r) const {\n        if(sum != r.sum) return sum > r.sum;\n        if(time != r.time) return time < r.time;\n        return idx > r.idx;\n      }\n      bool operator==(const Team& r) const {\n        return sum == r.sum && time == r.time;\n      }\n    };\n\n    vector<Team> teams(T, Team(P));\n    REP(i, T) teams[i].idx = i + 1;\n    REP(i, R) {\n      int m, t, p, j;\n      cin >> m >> t >> p >> j;\n      --t; --p;\n      if(j == 0) {\n        teams[t].acTime[p] = m;\n      }else {\n        teams[t].cnt[p]++;\n      }\n    }\n\n    REP(i, T) teams[i].calc();\n    std::sort(ALL(teams));\n\n    Team pre(0);\n    REP(i, T) {\n      if(i != 0) {\n        if(pre == teams[i]) {\n          cout << '=';\n        }else {\n          cout << ',';\n        }\n      }\n      cout << teams[i].idx;\n      pre = teams[i];\n    }\n    cout << endl;\n  }\n\n  return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <string>\n#include <map>\n#include <algorithm>\n\n#define REP(i,n) for(int i=0;i<(int)(n);i++)\n\nusing namespace std;\n\nint main() {\n  while(1){\n    int m,t,p,r;\n    cin>>m>>t>>p>>r;\n    if(!m)break;\n    vector<vector<int>> v(t,vector<int>(p,-1));\n    REP(i,r){\n      int M,T,P,J;\n      cin>>M>>T>>P>>J;\n      --T;--P;\n      if(J!=0){\n        v[T][P]--;\n      }else{\n        v[T][P]=M+(1+v[T][P])*(-20);\n      }\n    }\n    vector<tuple<int,int,int>> a;\n    REP(i,t){\n      int ac=0;\n      int pen=0;\n      REP(j,p){\n        if(v[i][j]>=0){\n          ++ac;\n          pen += v[i][j];\n        }\n      }\n      a.emplace_back(-ac,pen,-(i+1));\n    }\n    sort(begin(a),end(a));\n    bool nzero=false;\n    for(auto itr=begin(a);itr!=end(a);++itr){\n      int ac,pen,tn;\n      tie(ac,pen,tn) = *itr;\n      if(itr!=begin(a)){\n        int pac,ppen;\n        tie(pac, ppen, ignore) = *prev(itr);\n        if(pac==ac&&ppen==pen){\n          cout<<'=';\n        }else{\n          cout<<',';\n        }\n      }\n      cout<<-tn;\n    }\n    cout<<endl;\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <string>\n#include <map>\n#include <vector>\n#include <algorithm>\n#include <queue>\n#include <stack>\n#include <cstdio>\n#include <cmath>\n\nusing namespace std;\n\n#define REP(i,k,n) for(int i=k;i<n;i++)\n#define rep(i,n) for(int i=0;i<n;i++)\n\n\n#define all(v) v.begin(),v.end()\n#define rall(v) v.rbegin(),v.rend()\n#define INF 1<<30\n#define mp make_pair\n#define pb push_back\n\n#define fi first\n#define se second\n\n#define each(it,c) for(auto it=(c).begin();it!=(c).end();it++)\n\ntypedef vector<int> vi;\ntypedef vector<vi> vii;\ntypedef pair<int,int> pii;\n\ntypedef long long ll;\n\nclass team{\npublic:\n\tint id;\n\tint clear;\n\tvi fail;\n\tint time;\n\tteam(){\n\t\tid=0;\n\t\tclear=0;\n\t\tfail = vi(10,0);\n\t\ttime=0;\n\t}\n};\n\nint main(){\n\twhile(1){\n\t\tint M,T,P,R;\n\t\tint m,t,p,j;\n\t\tvector<team> tev;\n\t\tvector<pii> ap; \n\t\tcin>>M>>T>>P>>R;\n\t\tif(M==0)break;\n\t\trep(i,T){\n\t\t\tteam te;\n\t\t\tte.id=i+1;\n\t\t\tte.clear=0;\n\t\t\tte.time=0;\n\t\t\ttev.pb(te);\n\t\t\t//????????§id??????????????°??????????????????clear,time???0??§?????????\n\t\t}\n\t\trep(i,R){\n\t\t\tcin>>m>>t>>p>>j;\n\t\t\tif(j==0){\n\t\t\t\tint time=m;\n\t\t\t\t//????????§?????£?§£??°????????????????????????????????£?§£??°??¨????????????????????????\n\t\t\t\ttime += tev[t-1].fail[p]*20;\n\t\t\t\ttev[t-1].clear++;\n\t\t\t\ttev[t-1].time+=time;\n\t\t\t}else{\n\t\t\t\t//????????§???????????????????????¨????????£?§£?????°?????????\n\t\t\t\ttev[t-1].fail[p]++;\n\t\t\t}\n\t\t}\n\t\trep(i,T){\n\t\t\tap.pb(mp(tev[i].clear*100000+(90000-tev[i].time),tev[i].id));\n\t\t}\n\t\tsort(rall(ap));\n\n\t\tcout<<ap[0].se;\n\t\tREP(i,1,T){\n\t\t\tif(ap[i-1].fi==ap[i].fi) cout<<\"=\";\n\t\t\telse cout<<\",\";\n\t\t\tcout<<ap[i].se;\n\t\t}\n\t\tcout<<endl;\n\t\t// rep(i,T){\n\t\t// \tcout<<\"debug clear:\"<<tev[i].clear<<\" time:\"<<tev[i].time;\n\t\t// \tcout<<endl;\n\t\t// \trep(j,P){\n\t\t// \t\tcout<<\" fail:\"<<tev[i].fail[j];\n\t\t// \t}\n\t\t// \tcout<<endl;\n\t\t// }\n\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\nusing namespace std;\n\nconst int INF=50000000;\n\nint data[51][12];\n\nint main(){\n\tint M,T,P,R;\n\twhile(cin>>M>>T>>P>>R && M){\n\t\tfill((int*)data,(int*)(data+12),0);\n\t\tfor(int i=0;i<R;i++){\n\t\t\tint m,t,p,j;\n\t\t\tcin>>m>>t>>p>>j;\n\t\t\tif(j==0){\n\t\t\t\tdata[t][0]++;\n\t\t\t\tdata[t][11]+=m+data[t][p]*20;\n\t\t\t}\n\t\t\telse data[t][p]++;\n\t\t}\n\t\tint prev[2]={INF,0};\n\t\tfor(int i=0;i<T;i++){\n\t\t\tint ans=0;\n\t\t\tint now[2]={0,INF};\n\t\t\tfor(int j=T;j>=0;j--){\n\t\t\t\tif(data[j][0]>now[0]){\n\t\t\t\t\tnow[0]=data[j][0];\n\t\t\t\t\tnow[1]=data[j][11];\n\t\t\t\t\tans=j;\n\t\t\t\t}\n\t\t\t\telse if(data[j][0]==now[0] && data[j][11]<now[1]){\n\t\t\t\t\tnow[1]=data[j][11];\n\t\t\t\t\tans=j;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(i){\n\t\t\t\tif(memcmp(now,prev,sizeof(now))==0)cout<<\"=\";\n\t\t\t\telse cout<<\",\";\n\t\t\t}\n\t\t\tcout<<ans;\n\t\t\tmemcpy(prev,now,sizeof(now));\n\t\t\tdata[ans][0]=-1;\n\t\t}\n\t\tcout<<endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\ntypedef struct {\n  int ch[11];\n  int num;\n  int time;\n  int tnum;\n} lg;\nint M,T,R,P;\nvector<lg> team;\n\nbool asc(lg t1,lg t2);\n\nint main(){\n  int i,j,m,t,p;\n\n  for(i=0;i<51;i++){\n    lg x;\n    team.push_back(x);\n  }\n  while(1){\n    cin >> M >> T >> P >> R;\n    if(M==0&&T==0&&P==0&&R==0)break;\n    for(i=0;i<=T;i++){\n      team[i].num=0;\n      team[i].time=0;\n      team[i].tnum=i+1;\n      for(j=0;j<=P;j++)team[i].ch[j]=0;\n    }\n    for(i=0;i<R;i++){\n      cin >> m >> t >> p >> j;\n      if(j!=0)team[t-1].ch[p]++;\n      else{\n\tteam[t-1].time+=20*team[t-1].ch[p];\n\tteam[t-1].num++;\n\tteam[t-1].time+=m;\n      }\n    }\n\n    sort(team.begin(),team.begin()+T,asc);\n\n    for(i=0;i<T;i++){\n      if(i==0)cout << team[i].tnum;\n      else if(team[i-1].num==team[i].num&&team[i-1].time==team[i].time)cout << \"=\"<<team[i].tnum;\n      else cout << \",\"<<team[i].tnum;\n    }\n    cout << endl;\n  }\n  return 0;\n}\n\nbool asc(lg t1,lg t2){\n  if(t1.num>t2.num)return 1;\n  else if(t1.num==t2.num&&t1.time<t2.time)return 1;\n  else if(t1.num==t2.num&&t1.time==t2.time&&t1.tnum>t2.tnum)return 1;\n  else return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nstruct SCORE {\n    int id, ans, elapsed;\n    std::vector<int> miss;\n    SCORE() {\n        id = 0;\n        ans = 0;\n        elapsed = 0;\n        miss.resize(10);\n    }\n    bool operator > (const SCORE &y) const {\n        if(ans > y.ans) return true;\n        if(ans < y.ans) return false;\n        if(elapsed < y.elapsed) return true;\n        if(elapsed > y.elapsed) return false;\n        return id > y.id;\n    }\n\n    bool operator == (const SCORE &y) const {\n        return (ans == y.ans) && (elapsed == y.elapsed);\n    }\n};\n\nint main() {\n    int M, T, P, R;\n    int m, t, p, j;\n    int i;\n\n    std::vector< SCORE > player(50);\n    while(std::cin >> M >> T >> P >> R) {\n        if(M == 0 && T == 0 && P == 0 && R == 0) break;\n        \n        for(i = 0; i < T; ++i) {\n            player[i].id = i + 1;\n            player[i].ans = 0;\n            player[i].elapsed = 0;\n            for(j = 0; j < 10; ++j) {\n                (player[i]).miss[j] = 0;\n            }\n        }\n        for(i = 0; i < R; ++i) {\n            std::cin >> m >> t >> p >> j;\n            if(j == 0) {\n                player[t - 1].ans += 1;\n                player[t - 1].elapsed += (m + 20*(player[t-1]).miss[p - 1]);\n            } else {\n                ++(player[t - 1]).miss[p - 1];\n            }\n        }\n        std::sort(player.begin(), player.begin() + T, std::greater<SCORE>());\n\n        SCORE old;\n        for(int i=0; i<T; ++i) {\n            if(i == 0) {\n                std::cout << player[i].id;\n                old = player[i];\n                continue;\n            }\n\n            if(old == player[i]) {\n                std::cout << \"=\" << player[i].id;\n            } else {\n                std::cout << \",\" << player[i].id;\n            }\n            old = player[i];\n        }\n        std::cout << std::endl;\n    }\n\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <stdio.h>\n#include <stdlib.h>\n#include <string.h>\n\ntypedef struct{\n\tint sc;\n\tint tm;\n\tint nm;\n}status;\n\nint cmp(const void *a, const void *b){\n\tstatus *ta = (status *)a;\n\tstatus *tb = (status *)b;\n\tif(ta->sc > tb->sc){\n\t\treturn -1;\n\t}\n\telse if(ta->sc < tb->sc){\n\t\treturn 1;\n\t}\n\telse{\n\t\tif(ta->tm < tb->tm){\n\t\t\treturn -1;\n\t\t}\n\t\telse if(ta->tm > tb->tm){\n\t\t\treturn 1;\n\t\t}\n\t\telse{\n\t\t\tif(ta->nm > tb->nm){\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\telse{\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t}\n\t}\n}\n\n\nint main(void){\n\tint m, t, p, r, i, j, tn, sm, pn, pena[50][10], sc[50][10];\n\tstatus s[50];\n\twhile(1){\n\t\tscanf(\"%d%d%d%d\",&m,&t,&p,&r);\n\t\tif(m + t + p + r == 0){\n\t\t\tbreak;\n\t\t}\n\t\tfor(i = 0;i < t;i++){\n\t\t\ts[i].sc = 0, s[i].tm = 0, s[i].nm = i + 1;\n\t\t}\n\t\tmemset(pena,0,sizeof(pena));\n\t\tmemset(sc,0,sizeof(sc));\n\t\tfor(i = 0;i < r;i++){\n\t\t\tscanf(\"%d%d%d%d\",&sm,&tn,&pn,&j);\n\t\t\tif(!j){ // 正解のとき\n\t\t\t\ts[tn - 1].sc++;\n\t\t\t\ts[tn - 1].tm += sm;\n\t\t\t\tsc[tn - 1][pn - 1] = 1;\n\t\t\t}\n\t\t\telse{\n\t\t\t\tpena[tn - 1][pn - 1]++;\n\t\t\t}\n\t\t}\n\t\tfor(i = 0;i < t;i++){\n\t\t\tfor(j = 0;j < p;j++){\n\t\t\t\tif(sc[i][j]){\n\t\t\t\t\ts[i].tm += 20 * pena[i][j];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tqsort(s,t,sizeof(s[0]),cmp);\n\t\tprintf(\"%d\",s[0].nm);\n\t\tfor(i = 1;i < t;i++){\n\t\t\tif(s[i - 1].sc == s[i].sc && s[i - 1].tm == s[i].tm)\n\t\t\t\tprintf(\"=\");\n\t\t\telse\n\t\t\t\tprintf(\",\");\n\t\t\tprintf(\"%d\",s[i].nm);\n\t\t}\n\t\tprintf(\"\\n\");\n/*\t\tprintf(\"-----------\\n\");\n\t\tfor(i = 0;i < t;i++){\n\t\t\tprintf(\"%d %d %d\\n\",s[i].sc,s[i].tm,s[i].nm);\n\t\t}\n\t\tprintf(\"-----------\\n\");*/\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<string>\nusing namespace std;\nbool solved[10000][100];\nlong long time[10000][100];\nlong long anstime[10000];\nint main(){\n\tint m,t,p,r;\n\twhile(true){\n\t\tcin>>m>>t>>p>>r;\n\t\tif(m==0&&t==0&&p==0&&r==0)\n\t\t\tbreak;\n\t\tfor(int i=0;i<t;i++){\n\t\t\tanstime[i]=0;\n\t\t\tfor(int j=0;j<p;j++){\n\t\t\t\tsolved[i][j]=false;\n\t\t\t\ttime[i][j]=0;\n\t\t\t}\n\t\t}\n\t\tfor(int i=0;i<r;i++){\n\t\t\tint a[4];\n\t\t\tfor(int j=0;j<4;j++)\n\t\t\t\tcin>>a[j];\n\t\t\tif(a[3]==0){\n\t\t\t\tsolved[a[1]-1][a[2]-1]=true;\n\t\t\t\tanstime[a[1]-1]+=time[a[1]-1][a[2]-1]+a[0];\n\t\t\t}\n\t\t\telse\n\t\t\t\ttime[a[1]-1][a[2]-1]+=20;\n\t\t}\n\t\tint b[100];\n\t\tfor(int i=0;i<t;i++){\n\t\t\tint count=0;\n\t\t\tfor(int j=0;j<p;j++)\n\t\t\t\tcount+=solved[i][j];\n\t\t\tanstime[i]=count*1000-anstime[i];\n\t\t\tb[i]=i+1;\n\t\t}\n\t\tfor(int i=0;i<t-1;i++){\n\t\t\tfor(int j=t-1;j>i;j--){\n\t\t\t\tif(anstime[j]>anstime[j-1]||(anstime[j]==anstime[j-1]&&b[j]>b[j-1])){\n\t\t\t\t\tint tmp=anstime[j];\n\t\t\t\t\tanstime[j]=anstime[j-1];\n\t\t\t\t\tanstime[j-1]=tmp;\n\t\t\t\t\ttmp=b[j];\n\t\t\t\t\tb[j]=b[j-1];\n\t\t\t\t\tb[j-1]=tmp;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcout<<b[0];\n\t\tfor(int i=1;i<t;i++){\n\t\t\tif(anstime[i]==anstime[i-1])\n\t\t\t\tcout<<'=';\n\t\t\telse\n\t\t\t\tcout<<',';\n\t\t\tcout<<b[i];\n\t\t}\n\t\tcout<<endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\n#define rep(i, a, n) for(int i = (a);i < (n);i++)\n#define REP(i, n)    rep(i, 0, n)\n#define all(e)       (e).begin(), (e).end()\n\n#ifdef LOCAL\n#define show(x) cerr << __LINE__ << \" : \" << #x << \" = \" << (x) << endl\n#else\n#define show(x) true\n#endif\n\nusing namespace std;\nusing ll = long long;\ntemplate<class T>\nusing V = vector<T>;\n\ntemplate<class T, class U>\nvoid chmin(T &t, const U u) { if (t > u) t = u; }\n\ntemplate<class T, class U>\nvoid chmax(T &t, const U u) { if (t < u) t = u; }\n\nconst int INF = (1 << 30) - 1;\nconst ll INFL = (ll) 5e15;\nconst int MOD = 1e9 + 7;\n\nclass score {\npublic:\n    int solves;\n    int time;\n    int team;\n\n    bool operator<(score s) const {\n        if (solves < s.solves) return true;\n        else if (solves == s.solves) {\n            if (time > s.time) return true;\n            else if (time == s.time) {\n                if (team < s.team) return true;\n            }\n        }\n\n        return false;\n    }\n};\n\nclass Solver {\npublic:\n    bool solve() {\n        cin >> M >> T >> P >> R;\n        if (M == 0) return false;\n        scores.resize(T);\n        REP(i, T) {\n            scores[i].team = i + 1;\n        }\n        penalty.resize(T + 1, V<int>(P + 1));\n        REP(i, R) {\n            int m, t, p, j;\n            cin >> m >> t >> p >> j;\n            if (j == 0) {\n                scores[t - 1].solves++;\n                scores[t - 1].time += m + penalty[t][p] * 20;\n            } else {\n                penalty[t][p]++;\n            }\n        }\n        sort(scores.rbegin(), scores.rend());\n\n        REP(i, T - 1) {\n            cout << scores[i].team;\n            if (scores[i].solves == scores[i + 1].solves && scores[i].time == scores[i + 1].time) {\n                cout << \"=\";\n            } else {\n                cout << \",\";\n            }\n        }\n        cout << scores[T - 1].team << endl;\n\n        return true;\n    }\n\nprivate:\n    int M, T, P, R;\n\n    V<score> scores;// ans, time, team\n    V<V<int>> penalty;\n};\n\nint main() {\n\n    while (Solver().solve());\n\n    return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstring>\nusing namespace std;\nint x[100][2], y[100][10], n, a, b, c, d, e, f, g, h, p;\nint main() {\n\twhile (true) {\n\t\tmemset(x, 0, sizeof(x));\n\t\tmemset(y, 0, sizeof(y));\n\t\tcin >> n >> a >> b >> c;\n\t\tif (n == 0) {\n\t\t\tbreak;\n\t\t}\n\t\tfor (int i = 0; i < c; i++) {\n\t\t\tcin >> d >> e >> f >> g;\n\t\t\tif (g!=0) {\n\t\t\t\ty[e][f] += 20;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tx[e][1] += d + y[e][f];\n\t\t\t\tx[e][0]++;\n\t\t\t}\n\t\t}\n\t\tp = 0;\n\t\tfor (int i = 10; i >= 0; i--) {\n\t\t\tfor (int j = 0; j <= 1000; j++) {\n\t\t\t\th = 0;\n\t\t\t\tfor (int k = a; k > 0; k--) {\n\t\t\t\t\tif (x[k][0]==i && x[k][1]==j) {\n\t\t\t\t\t\tif (h >= 1) {\n\t\t\t\t\t\t\tcout << '=';\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (p >= 1) {\n\t\t\t\t\t\t\tcout << ',';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcout << k;\n\t\t\t\t\t\tp++;\n\t\t\t\t\t\th++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcout << endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<vector>\n#include<algorithm>\nusing namespace std;\nvoid swapp(int *,int *);\nint main(){\n  while(1){\n    int M,T,P,R;\n    cin >> M >> T >> P >> R;\n    if(M==0&&T==0&&P==0&&R==0)break;\n    int te[51];\n    int tr[51];\n    int tp[51]={};\n    int tt[51]={};\n    vector<vector<int> >ts(T+1,vector<int>(P,0));\n    for(int i=0;i<R;i++){\n      int m,t,p,j;\n      cin >> m >> t >> p >> j;\n      if(j==0){\n\ttt[t]+=ts[t][p]+m;\n\ttp[t]++;\n      }\n      else{\n\tts[t][p]+=20;\n      }\n    }\n    for(int i=1;i<=T;i++){\n      //\n      // cout << i<<\" \"<<tp[i]<< \" \"<< tt[i]<<endl;\n      //\n      tr[i]=i;\n      te[i]=0;\n    }\n    //sort\n    for(int i=1;i<=T;i++){\n      for(int j=1;j<T;j++){\n\tif(tp[j]<tp[j+1]){\n\t  //  cout << tr[j]<<\" \"<<tr[j+1]<<endl;\n\t  swapp(tr+j,tr+j+1);\n\t  swapp(te+j,te+j+1);\n\t  swapp(tt+j,tt+j+1);\n\t  swapp(tp+j,tp+j+1);\n\t  //  cout << tr[j]<<\" \"<<tr[j+1]<<endl;\n\t}\n\telse if(tp[j]==tp[j+1]){\n\t  if(tt[j]>tt[j+1]){\n\t    swapp(tr+j,tr+j+1);\n\t    swapp(te+j,te+j+1);\n\t    swapp(tt+j,tt+j+1);\n\t    swapp(tp+j,tp+j+1);\n\t  }\n\t  else if(tt[j]==tt[j+1]){\n\t    if(tr[j]<tr[j+1]){\n\t      swapp(tr+j,tr+j+1);\n\t      swapp(te+j,te+j+1);\n\t      swapp(tt+j,tt+j+1);\n\t      swapp(tp+j,tp+j+1);\n\t    }\n\t    te[j]=1;\n\t    \n\t  }\n\t}\n      }\n    }\n    // for(int i=1;i<=T;i++)  cout << i<<\" \"<<tp[i]<< \" \"<< tt[i]<<endl;\n    for(int i=1;i<=T;i++){\n\n      cout << tr[i];\n      if(i<T){\n\tif(te[i]==1){\n\t  cout << '=';\n\t}\n\telse cout << ',';\n      }\n    }\n    cout << endl;\n  }\n  return 0;\n}\nvoid swapp(int *m,int *a){\n  int b;\n  b=*m;\n  *m=*a;\n  *a=b;\n  return;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define rep(i,a,b) for(int i=int(a);i<int(b);++i)\nusing namespace std;\ntypedef long long ll;\ntypedef pair<int,int> Pi;\ntypedef tuple<int,int,int> tp;\nint INF = (1LL << 30) - 1;\nint MOD = 1e9+7;\nvoid solve(int M,int T, int P, int R){\n    vector<tp> V(T);//cnt time\n    rep(i,0,T)get<2>(V[i]) = i+1;\n    int errors[T][P];\n    int result[T][P];\n    rep(i,0,T)rep(j,0,P)errors[i][j] = result[i][j] = 0;\n    rep(i,0,R){\n        int m,t,p,j;\n        cin >> m >> t >> p >> j;\n        t--;p--;\n        if(j == 0){\n            //AC\n            //get<1>(V[t]) = m;\n            get<0>(V[t])++;\n            result[t][p] = m + 1;\n        }else{\n            //WA\n            errors[t][p]++;\n        }\n    }\n    rep(i,0,T){\n        rep(j,0,P){\n            //ACしたときのみWA数*20minペナルティ追加\n            if(!result[i][j])continue;\n            get<1>(V[i]) += result[i][j] - 1 + errors[i][j] * 20;\n        }\n    }\n    sort(V.begin(), V.end(), [](tp a, tp b){\n        if(get<0>(a) != get<0>(b))return get<0>(a) > get<0>(b);\n        if(get<1>(a) != get<1>(b))return get<1>(a) < get<1>(b);\n        return get<2>(a) > get<2>(b);\n    });\n    cout << get<2>(V[0]);\n    \n    rep(i,1,T){\n        if(get<0>(V[i-1]) == get<0>(V[i]) && get<1>(V[i-1]) == get<1>(V[i])){\n            cout << \"=\";\n        }else{\n            cout << \",\";\n        }\n        cout << get<2>(V[i]);\n    }\n    cout << endl;\n}\nmain(){\n    int M,T,P,R;\n    cin >> M >> T >> P >> R;\n    while(M){\n        solve(M,T,P,R);\n        cin >> M >> T >> P >> R;\n    }\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define PB push_back\n#define MP make_pair\n#define REP(i,n) for (int i=0;i<(n);i++)\n#define FOR(i,a,b) for(int i=(a);i<(b);i++)\n#define ALL(a) (a).begin(),(a).end()\n#define MOD 100000\nusing namespace std;\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef pair<int,int> P;\nconst int INF=1e9;\nstruct A{int slv,pe,num;};\nbool comp(A a,A b){\n      if(a.slv!=b.slv)return a.slv>b.slv;\n      if(a.pe!=b.pe)return a.pe<b.pe;\n      return a.num>b.num;\n}\nint main(){\n      int m,t,p,r,mm,tt,pp,rr;\n      while(cin>>m>>t>>p>>r&&t&&p){\n            int pe[t],miss[t][p],slv[t];\n            memset(miss,0,sizeof(miss));\n            memset(pe,0,sizeof(pe));\n            memset(slv,0,sizeof(slv));\n            while(r--){\n                  cin>>mm>>tt>>pp>>rr;tt--;pp--;\n                  if(rr==0){\n                        slv[tt]++;\n                        pe[tt]+=miss[tt][pp]*20+mm;\n                  }else{\n                        miss[tt][pp]++;\n                  }\n            }\n            vector<A> V;\n            REP(i,t)V.PB((A){slv[i],pe[i],i});\n            sort(ALL(V),comp);\n            REP(i,t){\n                  int s=i;\n                  while(V[s].slv==V[i].slv&&V[s].pe==V[i].pe&&i<t)i++;\n                  for(int j=s;j<i;j++){\n                        cout<<V[j].num+1;\n                        if(j!=i-1)cout<<\"=\";\n                  }\n                  if(i==t)cout<<endl;\n                  else cout<<\",\";\n                  i--;\n            }\n      }\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstring>\n#include <iostream>\n#include <algorithm>\n#include <utility>\n\nusing namespace std;\ntypedef pair<int, int> PII;\n\nint WA[10][50];\n\nint main()\n{\n  int M, T, P, R;\n  while (cin>>M>>T>>P>>R, M||T||P||R) {\n    memset(WA, 0, sizeof(WA));\n    vector<pair<PII, int>> score(T);\n    for (int i=0; i<T; i++) {\n      score[i].second = -(i+1);\n    }\n\n    for (int r=0; r<R; r++) {\n      int m, t, p, j;\n      cin>>m>>t>>p>>j;\n      t--, p--;\n\n      if (!j) {\n        //cout << \"Team = \" << t << \", AC = \" << score[t].first.first << endl;\n\n        // AC\n        score[t].first.first--;\n        score[t].first.second += m + 20*WA[p][t];\n      } else {\n        // WA \n        WA[p][t]++;\n      }\n    }\n\n    sort(score.begin(), score.end());\n    for (int i=0; i<score.size(); i++) {\n      if (i>0) {\n        if (score[i].first.first == score[i-1].first.first && score[i].first.second == score[i-1].first.second) cout << \"=\";\n        else cout << \",\";\n      }\n      cout << -score[i].second;\n    }\n    cout << endl;\n  } \n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n\n#define REP(i,s,n) for(int i=s;i<n;i++)\n#define rep(i,n) REP(i,0,n)\n\nusing namespace std;\n\nstruct Data {\n  int id,solve,time;\n  bool operator < ( const Data &data ) const {\n    if( solve != data.solve ) return solve > data.solve;\n    if( time  != data.time  ) return time  < data.time;\n    return id > data.id;\n  }\n};\n\ntypedef pair<int,int> ii;\n\nint main(){\n  int M,T,P,R;\n  while( cin >> M >> T >> P >> R, M|T|P|R ){\n    vector<Data> team(T);\n    rep(i,T) { team[i].id = i; team[i].solve = team[i].time = 0; }\n    map<ii,int> pena;\n    rep(_,R){\n      int m,t,p,j;\n      cin >> m >> t >> p >> j;\n      --t, --p;\n      if( j ) {\n\t++pena[ii(t,p)];\n      } else {\n\t++team[t].solve;\n\tteam[t].time += m + pena[ii(t,p)] * 20;\n      }\n    }\n    sort(team.begin(),team.end());\n    rep(i,T) {\n      if( i ) {\n\tif( team[i].solve == team[i-1].solve && team[i].time == team[i-1].time ) printf(\"=\");\n\telse printf(\",\");\n      }\n      printf(\"%d\",team[i].id+1);\n    } puts(\"\");\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nint main(){\n  while(1){\n    int M, T, P, R, i;\n    scanf(\"%d%d%d%d\", &M, &T, &P, &R);\n    if(M == 0){\n      return 0;\n    }\n    int m, t, p, j;\n    vector<vector<int>> time(T, vector<int>(P, -1)), pena(T, vector<int>(P, 0));\n    for(i = 0; i < R; i++){\n      scanf(\"%d%d%d%d\", &m, &t, &p, &j);\n      t--;\n      p--;\n      if(j == 0){\n        time[t][p] = m + 20 * pena[t][p];\n      }\n      else{\n        pena[t][p]++;\n      }\n    }\n    vector<pair<int, pair<int, int>>> score(T);\n    for(i = 0; i < T; i++){\n      score[i].first = i;\n      int num = 0, time_sum = 0, k;\n      for(k = 0; k < P; k++){\n        if(time[i][k] >= 0){\n          num++;\n          time_sum += time[i][k];\n        }\n      }\n      score[i].second.first = num;\n      score[i].second.second = time_sum;\n    }\n    sort(score.begin(), score.end(), [](pair<int, pair<int, int>> a,pair<int, pair<int, int>> b){\n      if(a.second.first != b.second.first){\n        return a.second.first > b.second.first;\n      }\n      else if(a.second.second != b.second.second){\n        return a.second.second < b.second.second;\n      }\n      else{\n        return a.first > b.first;\n      }\n    });\n    for(i = 0; i < T; i++){\n      if(i == T - 1){\n        printf(\"%d\\n\", score[i].first + 1);\n      }\n      else{\n        printf(\"%d\", score[i].first + 1);\n        if(score[i].second == score[i + 1].second){\n          printf(\"=\");\n        }\n        else{\n          printf(\",\");\n        }\n      }\n    }\n  }\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define rep(i,n) for(int i=0; i<n; i++)\n#define F first\n#define S second \nusing namespace std;\ntypedef pair<int,int> Pi;\n\nint main(){\n    int M,T,P,R;\n    while(cin >> M >> T >> P >> R,M|T|P|R){\n        vector<Pi> ST(T);\n        vector<vector<int> > cnt(T, vector<int>(P));\n        rep(i,R){\n            int m,t,p,r;\n            cin >> m >> t >> p >> r;\n            t--; p--;\n            if(r == 0){\n                ST[t].F++;\n                ST[t].S -= m+20*cnt[t][p];\n            }\n            else cnt[t][p]++;\n        }\n        vector<int> num(T);\n        iota(num.begin(),num.end(),0);\n        reverse(num.begin(),num.end());\n\t\tstable_sort(num.begin(),num.end(),[&](int i,int j){return ST[i]>ST[j];});\n\t\tcout << num[0]+1;\n        for(int i=1; i<T; i++){\n            if(ST[num[i]]==ST[num[i-1]]) cout << '=';\n            else cout << ',';\n            cout << num[i]+1;\n        }\n        cout << endl;\n    }\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define rep(i,n) for(int i = 0; i < n; ++i)\nusing namespace std;\n\n\nint main(void){\n\tint M,T,P,R;\n\twhile(cin >> M >> T >> P >> R,M){\n\t\tvector<int> solved[11][3010];\n\t\tvector<int> ts(T,0);\n\t\tvector<int> tt(T,0);\n\t\tvector<vector<int>> pen(T,vector<int>(10,0));\n\t\t\n\t\trep(i,R){\n\t\t\tint m,t,p,j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tt--,p--;\n\t\t\tif(ts[t]&(1<<p)) continue;\n\n\t\t\tif(j==0){\n\t\t\t\tts[t]|=(1<<p);\n\t\t\t\ttt[t]+=m + 20*pen[t][p];\n\t\t\t}else{\n\t\t\t\tpen[t][p]++;\n\t\t\t}\n\t\t}\n\n\t\tfor(int i = T-1; i >=0;--i){\n\t\t\tconst int s = __builtin_popcount(ts[i]);\n\t\t\tconst int t = tt[i];\n\t\t\tsolved[s][t].push_back(i+1);\n\t\t}\n\n\n\t\tstring ans=\"\";\n\t\tbool first = true;\n\t\tfor(int i=P;i>=0;--i){\n\t\t\tfor(int j=0;j<=3000;++j){\n\t\t\t\tif(solved[i][j].empty()) continue;\n\t\t\t\tconst int n = solved[i][j].size();\n\t\t\t\t\n\t\t\t\tif(first) \n\t\t\t\t\tfirst = false;\n\t\t\t\telse\n\t\t\t\t\tans +=\",\";\n\t\t\t\trep(k,n) ans += (k?\"=\":\"\") + to_string(solved[i][j][k]);\n\t\t\t}\n\t\t}\n\n\t\tcout << ans << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <queue>\n#include <tuple>\n#include <map>\n#include <set>\n\nusing namespace std;\n\n#define rep(i,n) for(int i = 0; i < n; i++)\n\nstruct Team {\n\tint no, time;\n\tmap<int, int> wa;\n\tset<int> ac;\n\tTeam() : time(0) {}\n\tbool operator < (const Team &other) {\n\t\tif (ac.size() == other.ac.size()) {\n\t\t\tif (time == other.time) {\n\t\t\t\treturn no < other.no;\n\t\t\t}\n\t\t\treturn time > other.time;\n\t\t}\n\t\treturn ac.size() < other.ac.size();\n\t}\n\tbool operator == (const Team &other) {\n\t\treturn ac.size() == other.ac.size() && time == other.time;\n\t}\n};\n\nint main() {\n\tint M, T, P, R;\n\twhile (cin >> M >> T >> P >> R && M) {\n\t\tvector<Team> teams(T);\n\t\trep(i, T) {\n\t\t\tteams[i].no = i + 1;\n\t\t}\n\t\trep(i, R) {\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tt--;\n\t\t\tif (j == 0) {\n\t\t\t\tteams[t].time += teams[t].wa[p] * 20 + m;\n\t\t\t\tteams[t].ac.insert(p);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tteams[t].wa[p]++;\n\t\t\t}\n\t\t}\n\t\tsort(teams.begin(), teams.end());\n\t\treverse(teams.begin(), teams.end());\n\t\trep(i, T-1) {\n\t\t\tcout << teams[i].no;\n\t\t\tif (teams[i] == teams[i + 1]) {\n\t\t\t\tcout << \"=\";\n\t\t\t}else{\n\t\t\t\tcout << \",\";\n\t\t\t}\n\t\t}\n\t\tcout << teams.back().no << endl;\n\t}\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\ntypedef struct ICPC{\n\tint AC;\n\tint TIME;\n\tint No;\n\tint WA[20];\n}S;\n\nint M, T, P, R;\n\nint huga(S a, S b){\n\tif(a.AC > b.AC) return 1;\n\telse if(a.AC == b.AC){\n\t\tif(a.TIME > b.TIME) return 2;\n\t\telse if(a.TIME == b.TIME){\n\t\t\tif(a.No > b.No) return 3;\n\t\t}\n\t}\n\treturn false;\n}\n\nvoid Sort(S a[]){\n\tint v, j;\n\tS temp;\n\tfor(int i = 2; i <= T; i++){\n\t\tj = i-1;\n\t\ttemp = a[i];\n\t\twhile(j >= 1 && huga(temp,a[j])){\n\t\t\ta[j+1] = a[j];\n\t\t\tj--;\n\t\t}\n\t\ta[j+1] = temp;\n\t}\n}\n\nint main(){\n\n\twhile(1){\n\t\tS a[100] = {};\n\t\tcin>>M>>T>>P>>R;\n\t\tif(!M&&!T&&!P&&!P)break;\n\t\tfor(int i = 1; i <= T; i++)a[i].No = i;\n\t\tfor(int i = 1,m,t,p,j; i <= R; i++){\n\t\t\tcin>>m>>t>>p>>j;\n\t\t\tif(!j){a[t].AC++;a[t].TIME -= m + a[t].WA[p]*20;}\n\t\t\telse a[t].WA[p]++;\n\t\t}\n\t\tSort(a);\n\t\tfor(int i = 1; i <= T; i++){\n\t\t\tif(i==1)cout<<a[i].No;\n\t\t\telse{\n\t\t\t\tif(huga(a[i-1],a[i]) == 3) cout<<'='<<a[i].No;\n\t\t\t\telse cout<<','<<a[i].No;\n\t\t\t}\n\t\t}cout<<endl;\n\t}\n\t\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\n#define INF 1e9\n\nint MOD=1e9+7;\n\nsigned main(){\n    ios::sync_with_stdio(false);\n    cin.tie(0);\n\n    while(1){\n        int m,t,p,r;\n        cin>>m>>t>>p>>r;\n\n        if(m==0)break;\n\n        vector<pair<pair<long long,long long>,long long>> v(t);\n        int wa[60][20]={};\n        for(int i=0;i<t;i++){\n            v[i].second=i+1;\n        }\n\n        for(int i=0;i<r;i++){\n            int a,b,c,d;\n            cin>>a>>b>>c>>d;\n            b--;\n            c--;\n\n            if(d!=0)wa[b][c]++;\n            else{\n                v[b].first.first++;\n                v[b].first.second+=a+wa[b][c]*20;\n            }\n        }\n        for(int i=0;i<t;i++){\n            v[i].first.second*=-1;\n        }\n        sort(v.begin(),v.end());\n        reverse(v.begin(),v.end());\n        for(int i=0;i<t;i++){\n            cout<<v[i].second;\n            if(i==t-1)cout<<endl;\n            else if(v[i].first==v[i+1].first)cout<<\"=\";\n            else cout<<\",\";\n        }\n    }\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <queue>\n#include <stack>\n#include <vector>\n#include <stdio.h>\n#include <algorithm>\n#include <string>\n#include <cstring>\n#include <cmath>\n#include <complex>\n#include <map>\n#include <climits>\nusing namespace std;\n\n#define reep(i,a,b) for(int i=(a);i<(b);++i)\n#define rep(i,n) reep((i),0,(n))\n#define ALL(v) (v).begin(),(v).end()\n#define PB push_back\n#define EPS 1e-8\n#define F first\n#define S second\n#define mkp make_pair\n\nstatic const double PI=6*asin(0.5);\ntypedef long long ll;\ntypedef complex<double> CP;\ntypedef pair<int,int> pii;\ntypedef pair<ll,ll> pll;\ntypedef vector<int> vint;\nstatic const int INF=1<<24;\n\nstruct S{\n\tll a;\n\tll b;\n\tll c;\n};\n\nbool operator <(S x,S y){\n\tif(x.b==y.b&&x.c==y.c){\n\t\treturn x.a>y.a;\n\t}\n\telse if(x.b==y.b){\n\t\treturn x.c<y.c;\n\t}\n\treturn x.b>y.b;\n}\n\n\nint main(){\n\tll M,T,P,R;\n\twhile(cin>>M>>T>>P>>R,M||T||P||R){\n\t\tvector<S> v(T);\n\t\tll fal[T][P];\n\t\trep(i,T){\n\t\t\trep(j,P){\n\t\t\t\tfal[i][j]=0;\n\t\t\t}\n\t\t}\n\t\trep(i,T){\n\t\t\tv[i].a=i;\n\t\t\tv[i].b=v[i].c=0;\n\t\t}\n\t\trep(i,R){\n\t\t\tll m,t,p,r;\n\t\t\tcin>>m>>t>>p>>r;\n\t\t\t//cout<<m<<\" \"<<t<<\" \"<<p<<\" \"<<r<<endl;\n\t\t\tt--;\n\t\t\tp--;\n\t\t\tif(r){\n\t\t\t\tfal[t][p]++;\n\t\t\t}\n\t\t\telse{\n\t\t\t\tv[t].b++;\n\t\t\t\tv[t].c+=m+fal[t][p]*20;\n\t\t\t}\n\t\t}\n\t\tsort(ALL(v));\n\t\trep(i,T){\n\t\t\t//cout<<v[i].a+1<<\" \"<<v[i].b<<\" \"<<v[i].c<<endl;\n\t\t}\n\t\trep(i,T){\n\t\t\tif(!i){\n\t\t\t\tcout<<v[i].a+1;\n\t\t\t}\n\t\t\telse{\n\t\t\t\tif(v[i].b==v[i-1].b&&v[i].c==v[i-1].c){\n\t\t\t\t\tcout<<\"=\"<<v[i].a+1;\n\t\t\t\t}\n\t\t\t\telse cout<<\",\"<<v[i].a+1;\n\t\t\t}\n\t\t}\n\t\tcout<<endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\nint x[99][2],y[99][20],n,a,b,c,d,e,f,g,h,p;\nint main() {\n\twhile(true) {\n\t\tmemset(x,0,sizeof(x));\n\t\tmemset(y,0,sizeof(y));\n\t\tcin>>n>>a>>b>>c;\n\t\tif(n==0){\n\t\t\tbreak;\n\t\t}\n\t\tfor(int i=0;i<c;i++){\n\t\t\tcin>>d>>e>>f>>g;\n\t\t\tif(g!=0){\n\t\t\t\ty[e][f]+=20;\n\t\t\t}\n\t\t\telse{\n\t\t\t\tx[e][1]+=d+y[e][f];\n\t\t\t\tx[e][0]++;\n\t\t\t}\n\t\t}\n\t\tp=0;\n\t\tfor(int i=b;i>=0;i--){\n\t\t\tfor(int j=0;j<=99999;j++){\n\t\t\t\th=0;\n\t\t\t\tfor(int k=a;k>0;k--){\n\t\t\t\t\tif(x[k][0]==i&&x[k][1]==j){\n\t\t\t\t\t\tif(h>=1){\n\t\t\t\t\t\t\tcout<<'=';\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(p>=1){\n\t\t\t\t\t\t\tcout<<',';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcout<<k;\n\t\t\t\t\t\tp++;\n\t\t\t\t\t\th++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcout<<endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n#define FOR(i,a,b) for(int i=(a);i<(int)(b);i++)\n#define rep(i,n) FOR(i,0,n)\n#define pb push_back\n\nstruct Team {\n    int num=0, ac=0, pen=0;\n    int wa[15] = {0};\n};\n\nvoid solve(int M,int T,int P,int R) {\n    vector<Team> teams(T+2);\n    rep(i,T) teams[i].num=i+1;\n    rep(i,R) {\n        int time,tm, prg, msg;\n        cin>>time>>tm>>prg>>msg;\n        tm--; prg--;\n        if(msg == 1) {\n            teams[tm].wa[prg]++;\n        } else {\n            teams[tm].ac++;\n            teams[tm].pen += teams[tm].wa[prg] * 20 + time;\n        }\n    }\n    rep(i,T) rep(j,T-1) {\n        if(teams[j].ac < teams[j+1].ac) swap(teams[j], teams[j+1]);\n        if(teams[j].ac == teams[j+1].ac\n                and teams[j].pen > teams[j+1].pen) swap(teams[j], teams[j+1]);\n        if(teams[j].ac == teams[j+1].ac\n                and teams[j].pen == teams[j+1].pen\n                and teams[j].num < teams[j+1].num) swap(teams[j], teams[j+1]);\n    }\n\n    /*\n    for(auto& team : teams) {\n        cout << team.num << \" \" << team.ac << \" \" << team.pen << \"\\n\";\n    }\n    */\n    rep(i,T) {\n        cout << teams[i].num;\n        if(i+1 == T)\n            puts(\"\");\n        else if(teams[i].ac == teams[i+1].ac and teams[i].pen == teams[i+1].pen)\n            cout << '=';\n        else\n            cout << ',';\n    }\n}\n\nint main() {\n    int M,T,P,R;\n    while(cin>>M>>T>>P>>R, T) solve(M,T,P,R);\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n\nusing namespace std;\n\nclass Question{\npublic:\n    bool isAC;\n    int p;\n\n    Question() : isAC(false),p(0){}\n};\nclass Team{\npublic:\n    int ID;\n    int AC;\n    int ptime;\n    vector<Question> q;\n\n    Team() : ID(-1), q(11), ptime(0), AC(0) {}\n    Team(int id)\n        : ID(id), q(11) , ptime(0), AC(0)\n    {\n    }\n\n    void submit(int m,int p,int j){\n        if(j == 0){\n            q[p].p += m;\n            q[p].isAC = true;\n            AC++;\n            ptime += q[p].p;\n        }else{\n            q[p].p += 20;\n        }\n    }\n};\n\nbool operator==(const Team& a,const Team& b){\n    return a.AC == b.AC && a.ptime == b.ptime;\n}\nbool operator!=(const Team& a,const Team& b){\n    return !(a == b);\n}\n\n//M:テァツオツづ、ツコツ?ヲツ卍づゥツ鳴?\n//T:テ」ツδ?」ツδシテ」ツδ?ヲツ閉ー\n//P:テ・ツ閉湘ゥツ。ツ古ヲツ閉ー\n//R:テヲツ渉静・ツ?コテヲツ閉ー\nvoid solve(int M,int T,int P,int R){\n    vector<Team> team;\n    for(int i=1;i<=T;i++){\n        team.push_back(Team(i));\n    }\n    for(int i=0;i<R;i++){\n        int m,t,p,j;\n        cin >> m >> t >> p >> j;\n        team[t-1].submit(m,p,j);\n    }\n    std::sort(team.begin(),team.end(),\n            [](const Team& a,const Team& b)->bool{\n                if(a.AC < b.AC)\n                    return true;\n                if(a.AC > b.AC)\n                    return false;\n                if(a.ptime > b.ptime)\n                    return true;\n                return a.ID < b.ID;\n            }\n            );\n    std::reverse(team.begin(),team.end());\n    bool f = false;\n    //for(auto t : team)\n    //{\n    //    cout << t.ID << \" :\" << t.AC << \" ,\" << t.ptime << endl;\n    //}\n    cout << team[0].ID;\n    for(int i=1;i<T;i++){\n        if(team[i-1] == team[i]){\n            cout << \"=\" << team[i].ID;\n        }else{\n            cout << \",\" << team[i].ID;\n        }\n    }\n    cout << endl;\n}\n\nint main(){\n    while(true){\n        int M,T,P,R;\n        cin >> M >> T >> P >> R;\n        if(!M&&!T&&!P&&!R)\n            return 0;\n        solve(M,T,P,R);\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n#include <cstdio>\n#include <cmath>\n#include <cstring>\n#include <cstdlib>\n#include <set>\n#include <map>\n#include <queue>\n#include <stack>\n#include <string>\n#include <fstream>\n\nusing namespace std;\n\ntypedef long long ll;\ntypedef pair<int,int> pii;\ntypedef pair<pii,int> ppi;\n\nint M,T,P,R;\nint main(){\n  int ms[10001];\n  int ts[10001];\n  int ps[10001];\n  int js[10001];\n  while(cin>>M>>T>>P>>R&&(M|T|P|R)){\n    // waの数\n    vector<pair<pii,int> > v(T);\n    for(int i=0;i<T;i++)\n      v[i]=make_pair(pii(0,0),i);\n    int WAS[51][11]={};\n    for(int i=0;i<R;i++){\n      cin>>ms[i]>>ts[i]>>ps[i]>>js[i];\n      ts[i]--;\n      ps[i]--;\n    }\n    for(int i=0;i<R;i++){\n      if(js[i]!=0){\n        WAS[ts[i]][ps[i]]++;\n      }\n      else{\n        v[ts[i]].first.first--;\n        v[ts[i]].first.second+=WAS[ts[i]][ps[i]]*20;\n        v[ts[i]].first.second+=ms[i];\n      }\n    }\n    sort(v.begin(),v.end());\n    map<pii,vector<int> > m;\n    for(int i=0;i<(int)v.size();i++){\n      m[v[i].first].push_back(v[i].second);\n    }\n    bool fst=true;\n    for(map<pii,vector<int> >::iterator it=m.begin();\n        it!=m.end();it++){\n      if(fst)fst=false;\n      else cout<<\",\";\n      vector<int> v=it->second;\n      sort(v.begin(),v.end(),greater<int>());\n      for(int i=0;i<(int)v.size();i++){\n        cout<<v[i]+1;\n        if(i!=(int)v.size()-1)\n          cout<<\"=\";\n      }\n    }\n    cout<<endl;\n  }\n  \n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <vector>\n#include <map>\n#include <algorithm>\nusing namespace std;\nmain(){\n\tint M,T,P,R,m,t,p,j,ac,time;\n\tfor(;scanf(\"%d%d%d%d\",&M,&T,&P,&R),M;puts(\"\")){\n\t\tmap<int,pair< //team number\n\t\t\tmap<int,int>, //problem, accepted_time\n\t\t\tmap<int,int>  //problem, wrong_answer\n\t\t> >contest;\n\t\tfor(;R--;){\n\t\t\tscanf(\"%d%d%d%d\",&m,&t,&p,&j);\n\t\t\tif(j){ //wrong_answer\n\t\t\t\tcontest[t].second[p]+=20;\n\t\t\t}else{\n\t\t\t\tcontest[t].first[p]=m;\n\t\t\t}\n\t\t}\n\t\tvector<pair<pair<int,int>,int> >contestants;\n\t\tfor(t=1;t<=T;t++){\n\t\t\tac=time=0;\n\t\t\tmap<int,int>::iterator it=contest[t].first.begin();\n\t\t\tfor(;it!=contest[t].first.end();it++){\n\t\t\t\tac++;\n\t\t\t\ttime+=it->second+contest[t].second[it->first];\n\t\t\t}\n\t\t\tcontestants.push_back(make_pair(make_pair(-ac,time),-t));\n\t\t}\n\t\tsort(contestants.begin(),contestants.end());\n\t\tprintf(\"%d\",-contestants[0].second);\n\t\tfor(t=1;t<T;t++){\n\t\t\tprintf(\n\t\t\t\tcontestants[t].first.first==contestants[t-1].first.first &&\n\t\t\t\tcontestants[t].first.second==contestants[t-1].first.second ? \"=%d\" : \",%d\",\n\t\t\t\t-contestants[t].second\n\t\t\t);\n\t\t}\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\nint x[99][2],y[99][20],n,a,b,c,d,e,f,g,h,p,i,j,k;\nint main() {\nwhile(true) {\nmemset(x,0,sizeof(x));memset(y,0,sizeof(y));\ncin>>n>>a>>b>>c;\nif(n==0){break;}\nfor(i=0;i<c;i++){\ncin>>d>>e>>f>>g;\nif(g!=0){y[e][f]+=20;}\nelse{x[e][1]+=d+y[e][f];x[e][0]++;}\n}p=0;\nfor(i=b;i>=0;i--){\nfor(j=0;j<=49999;j++){h=0;\nfor(k=a;k>0;k--){\nif(x[k][0]==i&&x[k][1]==j){\nif(h>=1){cout<<'=';}else if(p>=1){cout<<',';}cout<<k;p++;h++;\n}\n}}}\ncout<<endl;}}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <iostream>\n#include <utility>\nusing namespace std;\n\ntypedef struct{\n\tint num;\n\tint pr[11]; //waの数，acしたら-1\n\tint ac;\n\tlong time;\n}team;\n\nint main(){\n\twhile(1){\n\t\tint M, T, P, R;\n\t\tteam a[51];\n\t\t\n\t\tscanf(\" %d %d %d %d\", &M, &T, &P, &R);\n\t\tif(M==0) break;\n\t\t\n\t\t//初期化\n\t\tfor(int i=1; i<=50; ++i){\n\t\t\ta[i].num=i;\t\n\t\t\tfor(int j=1; j<=10; ++j) a[i].pr[j]=0;\n\t\t\ta[i].ac=0;\n\t\t\ta[i].time=0;\n\t\t}\n\t\t\n\t\t\n\t\tfor(int i=0; i<R; ++i){\n\t\t\tint m, t, p, j;\n\t\t\tscanf(\" %d %d %d %d\", &m, &t, &p, &j);\n\t\t\t\n\t\t\tif(j!=0){ //不正解\n\t\t\t\ta[t].pr[p]++;\n\t\t\t}\n\t\t\telse{ //正解\n\t\t\t\tif(a[t].pr[p]==-1) continue;\n\t\t\t\t\n\t\t\t\ta[t].ac++;\n\t\t\t\ta[t].time+=m+20*a[t].pr[p];\t\n\t\t\t\ta[t].pr[p]=-1;\n\t\t\t}\n\t\t}\t\n\t\t\n\t\t//sort\n\t\tfor(int i=1; i<=T; ++i){\n\t\t\tfor(int j=i; j<=T; ++j){\n\t\t\t\tif(a[i].ac < a[j].ac) swap(a[i], a[j]);\n\t\t\t\telse if(a[i].ac == a[j].ac){\n\t\t\t\t\t\n\t\t\t\t\tif(a[i].time > a[j].time) swap(a[i], a[j]);\n\t\t\t\t\telse if(a[i].time == a[j].time){\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(a[i].num < a[j].num) swap(a[i], a[j]);\n\t\t\t\t\t}\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t}\n\t\t\t\n\t\t//for(int i=1; i<=T; ++i) printf(\"%d :ac%d, tine%ld\\n\", a[i].num, a[i].ac, a[i].time);\n\t\t\n\t\tfor(int i=1; i<=T; ++i){\n\t\t\tprintf(\"%d\", a[i].num);\n\t\t\tif(i<T){\n\t\t\t\tif(a[i].ac==a[i+1].ac && a[i].time==a[i+1].time) printf(\"=\");\n\t\t\t\telse printf(\",\");\n\t\t\t}\n\t\t}\n\t\tprintf(\"\\n\");\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\nusing namespace std;\n\nint main(){\n while(true){\n  int M, T, P, R;\n  cin >> M >> T >> P >> R;\n\n  if(M==0 && T==0 && P==0 && R==0) break;\n\n  int CP[T],  TT[T],  PT[T][P]; //正解数、時間計、ペナルティ\n  for(int i=0; i<T; i++){\n   CP[i] = TT[i] = 0;\n   for(int j=0; j<P; j++){\n    PT[i][j] = 0;\n   }\n  }\n\n  for(int i=0; i<R; i++){ //各チームの正解数、時間計を求める\n   int m, t, p, j;\n   cin >> m >> t >> p >> j;\n   \n   if(j==0){ //正解\n    CP[t-1]++;\n    TT[t-1] += (m+PT[t-1][p-1]);\n   }else{ //不正解\n    PT[t-1][p-1] += 20;\n   }\n  }\n\n   int t_now, t_pre = -1; //今のチーム、1つ前のチーム\n   bool flag[50]; //処理済みフラグ\n   for(int i=0; i<T; i++){\n    flag[i] = false;\n   }\n   \n   for(int i=0; i<T; i++){\n    t_now = -1;\n    for(int j=0; j<T; j++){ //今のチームを求める\n     if(flag[j]) continue;\n     if(t_now==-1){\n      t_now = j;\n     }else{\n      if(CP[j]>CP[t_now] || (CP[j]==CP[t_now] && TT[j]<=TT[t_now])){\n       t_now = j;\n      }\n     }\n    }\n\n    if(t_pre!=-1){\n     if(CP[t_now]==CP[t_pre] && TT[t_now]==TT[t_pre]){\n      cout << '=';\n     }else{\n      cout << ',';\n     }\n    }\n    cout<<t_now+1;\n\n    flag[t_now] = true;\n    t_pre = t_now;\n   }\n   cout << endl;\n  }\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\nusing namespace std;\n\nint main(){\n    while(true){\n        int contestTime, teamCount, probremCount, submitCount;\n        cin >> contestTime >> teamCount >> probremCount >> submitCount;\n        if(contestTime == 0){\n            break;\n        }\n        int teamPoint[teamCount], teamTime[teamCount], teamPenalty[teamCount][probremCount];\n        for(int i = 0; i < teamCount; i++){\n            teamPoint[i] = teamTime[i] = 0;\n            for(int j = 0; j < probremCount; j++){\n                teamPenalty[i][j] = 0;\n            }\n        }\n        for(int i = 0; i < submitCount; i++){\n            int m, t, p, j;\n            cin >> m >> t >> p >> j;\n            t--;\n            if(j == 0){\n                teamPoint[t]++;\n                teamTime[t] += m + teamPenalty[t][p] * 20;\n            }else{\n                teamPenalty[t][p]++;\n            }\n        }\n        int previousIndex = -1;\n        int previousPoint = -1;\n        int previousTime = -1;\n        for(int i = 0; i < teamCount; i++){\n            int maxPoint = 0;\n            int topTime = contestTime;\n            int topIndex = 0;\n            for(int j = 0; j < teamCount; j++){\n                if(teamPoint[j] > maxPoint){\n                    maxPoint = teamPoint[j];\n                    topTime = teamTime[j];\n                    topIndex = j;\n                }else if(teamPoint[j] == maxPoint){\n                    if(topTime >= teamTime[j]){\n                        topTime = teamTime[j];\n                        topIndex = j;\n                    }\n                }\n            }\n            if(i != 0 && maxPoint == previousPoint && topTime == previousTime){\n                cout << '=' << topIndex + 1;\n            }else if(i != 0){\n                cout << ',' << topIndex + 1;\n            }else{\n                cout << topIndex + 1;\n            }\n            previousIndex = topIndex;\n            previousTime = teamTime[topIndex];\n            previousPoint = teamPoint[topIndex];\n            teamPoint[topIndex] = -1;\n            teamTime[topIndex] = contestTime + 1;\n            \n        }\n            cout << endl;\n    }\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<vector>\nusing namespace std;\n\nint main()\n{\n\tint M, T, P, R;\n\twhile (cin >> M >> T >> P >> R)\n\t{\n\t\tif (M == 0&& T == 0 && P == 0 && R == 0)break;\n\n\t\tvector<int> teamID(T);\n\t\tfor (int i = 0; i < T; i++)\n\t\t{\n\t\t\tteamID[i] = i;\n\t\t}\n\t\tint wrong[50][10];\n\t\tfor (int i = 0; i < T; i++)\n\t\t{\n\t\t\tfor (int j = 0; j < P; j++)\n\t\t\t{\n\t\t\t\twrong[i][j] = 0;\n\t\t\t}\n\t\t}\n\t\tvector<int> correct(T);\n\t\tvector<int> time(T);\n\n\n\t\tfor (int i = 0; i < R; i++)\n\t\t{\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tt--;\n\t\t\tp--;\n\t\t\tif (j == 0)\n\t\t\t{\n\t\t\t\tcorrect.at(t)++;\n\t\t\t\ttime.at(t) += m + wrong[t][p] * 20;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\twrong[t][p]++;\n\t\t\t}\n\t\t}\n\n\t\tfor (int i = 0; i < T - 1; i++)\n\t\t{\n\t\t\tfor (int j = i + 1; j < T; j++)\n\t\t\t{\n\t\t\t\tif (correct.at(teamID[i]) < correct.at(teamID[j])\n\t\t\t\t\t|| (correct.at(teamID[i]) == correct.at(teamID[j]) && time.at(teamID[i]) > time.at(teamID[j]))\n\t\t\t\t\t|| (correct.at(teamID[i]) == correct.at(teamID[j]) && time.at(teamID[i]) == time.at(teamID[j]) && teamID[i] < teamID[j]))\n\t\t\t\t{\n\t\t\t\t\tint tmp = teamID[i];\n\t\t\t\t\tteamID[i] = teamID[j];\n\t\t\t\t\tteamID[j] = tmp;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor (int i = 0; i < T; i++)\n\t\t{\n\t\t\tif (i > 0 && correct.at(teamID[i]) == correct.at(teamID[i - 1]) && time.at(teamID[i]) == time.at(teamID[i - 1]))\n\t\t\t{\n\t\t\t\tcout << \"=\";\n\t\t\t}\n\n\t\t\tcout << (teamID[i] + 1);\n\n\t\t\tif (i < T - 1 && \n\t\t\t\t!(correct.at(teamID[i]) == correct.at(teamID[i + 1]) && time.at(teamID[i]) == time.at(teamID[i + 1])))\n\t\t\t{\n\t\t\t\tcout << \",\";\n\t\t\t}\n\t\t}\n\n\t\tcout << endl;\n\n\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\nusing namespace std;\n\nint main(int argc, char *argv[])\n{\n    int m, t, p, r, mk, tk, pk, jk, score, team;\n    bool flg;\n    while (cin >> m >> t >> p >> r, m) {\n        vector<int> ans(t + 1, 0);\n        vector<int> penalty(t + 1, 0);\n        vector<vector<int> > wrong(t + 1, vector<int>(p + 1, 0));\n        for (int i = 0; i < r; ++i) {\n            cin >> mk >> tk >> pk >> jk;\n            if (jk != 0) {\n                wrong[tk][pk]++;\n            } else {\n                ans[tk]++;\n                penalty[tk] += 20 * wrong[tk][pk] + mk;\n            }\n        }\n        for (int i = 0; i < t; ++i) {\n            score = -1;\n            if (i != 0 && !flg)\n                cout << ',';\n            else if (i != 0)\n                cout << '=';\n            for (int j = 1; j <= t; ++j) {\n                if (score < ans[j]) {\n                    score = ans[j];\n                    team = j;\n                    flg = false;\n                } else if (score == ans[j]) {\n                    if (penalty[team] == penalty[j])\n                        flg = true;\n                    else\n                        flg = false;\n                    team = (penalty[team] < penalty[j]) ? team : j;\n                }\n            }\n            cout << team;\n            ans[team] = -2;\n        }\n        cout << endl;\n    }\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\nstruct Submit {\n  int minutes, teamIdx, problemIdx, judge;\n};\n\nstruct Result {\n  Result() : minutes(0), judge(-1) {}\n  int minutes, judge;\n};\n\nstruct Score {\n  Score() : teamIdx(0), acceptedCount(0), minutes(0) {}\n  int teamIdx;\n  int acceptedCount;\n  int minutes;\n};\nbool operator==(const Score& lhs, const Score& rhs) {\n  return lhs.acceptedCount == rhs.acceptedCount && lhs.minutes == rhs.minutes;\n}\n\nstd::string calc(const std::vector<Submit>& submits, int teamCount,\n                 int problemCount) {\n  std::vector<std::vector<Result>> results(\n      teamCount, std::vector<Result>(problemCount, Result()));\n  for (auto&& submit : submits) {\n    auto& result = results[submit.teamIdx - 1][submit.problemIdx - 1];\n    if (submit.judge) {\n      result.minutes += 20;\n    } else {\n      result.minutes += submit.minutes;\n    }\n    result.judge = submit.judge;\n  }\n  std::vector<Score> scores(teamCount, Score());\n  for (int teamIdx = 0; teamIdx < teamCount; ++teamIdx) {\n    auto& score = scores[teamIdx];\n    score.teamIdx = teamIdx;\n    for (int problemIdx = 0; problemIdx < problemCount; ++problemIdx) {\n      const auto& result = results[teamIdx][problemIdx];\n      if (result.judge) {\n        continue;\n      }\n      score.acceptedCount++;\n      score.minutes += result.minutes;\n    }\n  }\n  std::sort(scores.begin(), scores.end(),\n            [](const Score& lhs, const Score& rhs) {\n              if (lhs.acceptedCount != rhs.acceptedCount) {\n                return lhs.acceptedCount > rhs.acceptedCount;\n              }\n              if (lhs.minutes != rhs.minutes) {\n                return lhs.minutes < rhs.minutes;\n              }\n              return lhs.teamIdx > rhs.teamIdx;\n            });\n  std::string ret;\n  Score previousScore = Score();\n  for (auto&& score : scores) {\n    if (ret.length() > 0) {\n      if (score == previousScore) {\n        ret += \"=\";\n      } else {\n        ret += \",\";\n      }\n    }\n    ret += std::to_string(score.teamIdx + 1);\n    previousScore = score;\n  }\n  return ret;\n}\n\nint main() {\n  int maxMinute, teamCount, problemCount, submitCount;\n  while (std::cin) {\n    std::cin >> maxMinute >> teamCount >> problemCount >> submitCount;\n    if (maxMinute == 0 && teamCount == 0 && problemCount == 0 &&\n        submitCount == 0) {\n      break;\n    }\n    std::vector<Submit> submits(submitCount, Submit());\n    for (int i = 0; std::cin && i < submitCount; ++i) {\n      std::cin >> submits[i].minutes;\n      std::cin >> submits[i].teamIdx;\n      std::cin >> submits[i].problemIdx;\n      std::cin >> submits[i].judge;\n    }\n    auto ret = calc(submits, teamCount, problemCount);\n    std::cout << ret << std::endl;\n  }\n  return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n#include <cstdio>\n\n#define REP(i,n) for( int i = 0; i < n; i++ )\n\n\nusing namespace std;\n\n/*\n より多くの問題に正解したチームを上位とする．\n 正解した問題数が同じ場合は，所要時間合計の少ないチームを上位とする．\n 複数のチームが同数の問題に正解し，所要時間合計も同じなら，それらのチームを同順位とする．\n */\n\nstruct team{\n\tint ans,time,name;\n    int q[50]={0};\n    \n\tteam() : ans(0), time(0), name(0) {}\n    \n    bool operator <( const team& Right )const {\n        return  ans != Right.ans ? ans < Right.ans :\n        time != Right.time ? time > Right.time :\n        name <  Right.name;\n    }\n};\n\n\nint main()\n{\n\tint M,T,P,R;\n\t// Mは，コンテストの始まりから終わりまでの時間である． Tは，チーム数である． Pは，問題数である． Rは，提出記録の数である\n\twhile( cin >> M >> T >> P >> R )\n\t{\n\t\tint m,t,p,k;\n\t\tvector<team> team_array(T+1);\n\t\tif( T == 0 ) return 0;\n\t\tfor( int i = 1; i <= T; i++)\n\t\t\tteam_array[i].name = i;\n\t\t// mkは，経過時間である． tkは，チーム番号である． pkは，問題番号である． jkは，判定結果を表す（0なら正解，0以外なら不正解）\n\t\tREP(i,R)\n\t\t{\n\t\t\tcin >> m >> t >> p >> k;\n\t\t\tteam &tm = team_array[t];\n\t\t\tif( !k ){\n\t\t\t\ttm.ans++;\n\t\t\t\ttm.time += m;\n                if( tm.q[p] )\n                    tm.time += 20 * tm.q[p];\n\t\t\t}\n            else{\n                tm.q[p]++;\n            }\n            \n\t\t}\n\t\t\n        sort( team_array.begin() + 1 , team_array.end() );\n\t\t\n        for( int i = T; i > 0; i-- )\n        {\n            char c;\n            if( i == 1 ){\n                cout << team_array[i].name << endl;\n                continue;\n            }\n            else if ( team_array[i].ans == team_array[i-1].ans &&\n                team_array[i].time == team_array[i-1].time) {\n                c = '=';\n            }\n            else{\n                c = ',';\n            }\n\t\t\tcout << team_array[i].name << c;\n        }\n        \n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n#define int long long\n#define FOR(i, s, n) for (int i = (s); i < (n); i++)\n#define RFOR(i, s, n) for (int i = (n) - 1; i >= (s); i--)\n#define REP(i, n) FOR(i, 0, n)\n#define RREP(i, n) RFOR(i, 0, n)\n#define ALL(a) a.begin(), a.end()\n#define IN(a, x, b) (a <= x && x < b)\nconst long long MOD = 1e9+7, INF = 1e18;\ntemplate<class T>inline bool CHMAX(T&a,T b){if(a<b){a=b;return true;}return false;}\ntemplate<class T>inline bool CHMIN(T&a,T b){if(a>b){a=b;return true;}return false;}\n\nint M,T,P,R;\nint kan[55][15];\nint ac[55][15];\nint wa[55][15];\n\nsigned main(){\n\tvector<string>ans;\n\twhile(cin>>M>>T>>P>>R,M||T||P||R){\n\t\tint m,t,p,j;\n\t\tmemset(ac,0,sizeof(ac));\n\t\tmemset(wa,0,sizeof(wa));\n\t\tmemset(kan,0,sizeof(kan));\n\t\tREP(i,R){\n\t\t\tcin>>m>>t>>p>>j;\n\t\t\tt--;p--;\n\t\t\tif(j){\n\t\t\t\tif(ac[t][p])continue;\n\t\t\t\twa[t][p]++;\n\t\t\t}else{\n\t\t\t\tif(ac[t][p])continue;\n\t\t\t\tac[t][p] = m;\n\t\t\t\tkan[t][p]++;\n\t\t\t}\n\t\t}\n\t\tvector<pair<pair<int,int>,int>>score(T,{{0,0},0});\n\t\tREP(i,T)score[i].second = i+1;\n\t\tREP(i,T){\n\t\t\tREP(j,P){\n\t\t\t\tif(kan[i][j]==0)continue;\n\t\t\t\tscore[i].first.first++;\n\t\t\t\tscore[i].first.second -= ac[i][j] + wa[i][j] * 20;\n\t\t\t}\n\t\t}\n\t\tsort(ALL(score));\n\t\tstring ret = \"\";\n\t\tRREP(i,T){\n\t\t\tret+=to_string(score[i].second);\n\t\t\tif(i!=0){\n\t\t\t\tif(score[i].first==score[i-1].first){\n\t\t\t\t\tret+='=';\n\t\t\t\t}else{\n\t\t\t\t\tret+=',';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tans.push_back(ret);\n\t}\n\tfor(auto e:ans){\n\t\tcout<<e<<endl;\n\t}\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<algorithm>\n#include<cstring>\nusing namespace std;\n\n#define rep(i,n) for(int i=0; i<n; i++)\nconst int MAX_TEAMS = 50;\nconst int MAX_PROBLEMS = 10;\n\nstruct Team {\n\tint num;\n\tint solved;\n\tint missed[MAX_PROBLEMS];\n\tint penalty;\n\tint lastTime;\n\tTeam() : num(-1), solved(0), penalty(0), lastTime(0) {\n\t\tmemset( missed, 0, sizeof(missed) );\n\t}\n};\n\nbool comp( const Team& l, const Team& r ) {\n\tif( l.solved != r.solved )  return ( l.solved > r.solved );\n\telse if( l.lastTime+l.penalty!=r.lastTime+r.penalty )  return ( l.lastTime+l.penalty < r.lastTime+r.penalty );\n\telse  return ( l.num > r.num );\n}\n\nbool compScore( const Team& l, const Team& r ) {\n\tif( l.solved != r.solved )  return true;\n\telse if( l.lastTime+l.penalty!=r.lastTime+r.penalty )  return true;\n\telse  return false;\n}\n\nint main() {\n\tint M, T, P, R;\n\twhile( scanf(\"%d %d %d %d\", &M, &T, &P, &R), M||T||P||R ) {\n\t\tTeam teams[MAX_TEAMS];\n\t\trep(i,T) {  teams[i].num = i+1;  }\n\t\trep(i,R) {\n\t\t\tint m, t, p, j;\n\t\t\tscanf(\"%d %d %d %d\", &m, &t, &p, &j);\n\t\t\tif(j==0) {\n\t\t\t\tteams[t-1].lastTime += m;\n\t\t\t\tteams[t-1].penalty += teams[t-1].missed[p-1] * 20;\n\t\t\t\tteams[t-1].solved++;\n\t\t\t}\n\t\t\telse{\n\t\t\t\tteams[t-1].missed[p-1]++;\n\t\t\t}\n\t\t}\n\t\tsort( teams, teams+T, comp );\n\n\t\tprintf(\"%d\", teams[0].num);\n\t\trep(i,T-1) {\n\t\t\tif( compScore( teams[i], teams[i+1] ) ) {\n\t\t\t\tprintf(\",\");\n\t\t\t} else {\n\t\t\t\tprintf(\"=\");\n\t\t\t}\n\t\t\tprintf(\"%d\", teams[i+1].num);\n\t\t}\n\t\tprintf(\"\\n\");\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n#include <vector>\n#include <queue>\n#include <set>\n#include <map>\n#include <cstring>\n#include <string>\n#include <cstdlib>\n#include <cstdio>\n#include <cmath>\n#include <ctime>\nusing namespace std;\ntypedef long long int ll;\ntypedef pair<int, int> pii;\ntypedef pair<pii, int> ppiii;\ntypedef vector<int> vi;\n#define REP(i,x) for(int i=0;i<(int)(x);i++)\n#define FOR(i,c) for(__typeof((c).begin())i=(c).begin();i!=(c).end();++i)\n#define RREP(i,x) for(int i=(x)-1;i>=0;i--)\n#define RFOR(i,c) for(auto i=(c).rbegin();i!=(c).rend();++i)\n#define ALL(container) container.begin(), container.end()\n#define SZ(container) ((int)container.size())\n\nconst int INF = 1<<28;\nconst double EPS = 1e-8;\nconst int MOD = 1000000007;\n\nmain(){\n\tint M, T, P, R;\n\twhile(cin >> M >> T >> P >> R, M){\n\t\tvector<ppiii> lis(T);\n\t\tvector< vector<int> > wa(T+1, vector<int>(P+1, 0));\n\t\tREP(i, T) lis[i] = ppiii(pii(0, 0), -i-1);\n\t\tREP(i, R){\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tif(j) wa[t][p]++;\n\t\t\telse{\n\t\t\t\tlis[t-1].first.first --;\n\t\t\t\tlis[t-1].first.second += m + wa[t][p]*20;\n\t\t\t}\n\t\t}\n\t\tsort(lis.begin(), lis.end());\n\t\tcout << -lis[0].second;\n\t\tfor(int i=1;i<T;i++){\n\t\t\tcout << (lis[i-1].first==lis[i].first?\"=\":\",\")<<-lis[i].second;\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\n#define REP(i, n) for (int i = 0; i < (n); i++)\n#define ALL(x) x.begin(), x.end()\nstruct Data {\n    int count, penalty, id;\n    Data(int id_) : count(0), penalty(0), id(id_) {}\n};\n\nbool comp(const Data &d1, const Data &d2) {\n    if (d1.count != d2.count)\n        return d1.count > d2.count;\n    else if (d1.penalty != d2.penalty)\n        return d1.penalty < d2.penalty;\n    else\n        return d1.id > d2.id;\n}\n\nint pena[101][1010];\nbool solved[101][1010];\nvoid solve() {\n    int M, T, P, R;\n    cin >> M >> T >> P >> R;\n    if (M == 0) exit(0);\n    REP(i, T + 1) REP(j, P + 1) {\n        solved[i][j] = false;\n        pena[i][j] = 0;\n    }\n    vector<Data> v;\n    REP(i, T) {\n        Data d(i);\n        v.push_back(d);\n    }\n    REP(_, R) {\n        int m, t, p, j;\n        cin >> m >> t >> p >> j;\n        p--, t--;\n        if (j != 0) {\n            pena[t][p]++;\n        } else {\n            if (!solved[t][p]) {\n                solved[t][p] = true;\n                v[t].count++;\n                v[t].penalty += 20 * pena[t][p];\n                v[t].penalty += m;\n            }\n        }\n    }\n    sort(v.begin(), v.end(), comp);\n    Data d(T);\n    v.push_back(d);\n    REP(i, T) {\n        cout << v[i].id + 1;\n        if (i != T - 1) {\n            if (v[i].count == v[i + 1].count && v[i].penalty == v[i + 1].penalty)\n                cout << '=';\n            else\n                cout << ',';\n        }\n    }\n\n    cout << endl;\n    // REP(i, T) { cout << v[i].id + 1 << \" \" << v[i].count << \" \" << v[i].penalty << endl; }\n}\n\nsigned main() {\n    while (true) solve();\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n#define rep(i,n) for(int i=0;i<(int)(n);++i)\n#define pb(a) push_back(a)\n#define mp(a,b) make_pair(a,b)\n#define ALL(a) (a).begin(),(a).end()\n#define F first\n#define S second\ntypedef pair<int,int> PI;\n\n\nint m,t,p,r;\n\nint app[400][400];\nint pena[400];\n\n\nvoid solve(){\n  memset(app,0,sizeof(app));\n  memset(pena,0,sizeof(pena));  \n  \n  vector<int> sol(10000);\n  \n  rep(i,r){\n    int mk,tk,pk,jk;\n    cin >> mk >> tk >> pk >> jk;\n    if(jk==0){\n      pena[tk] += app[tk][pk]*20+mk;\n      ++sol[tk];\n    }else{\n      ++app[tk][pk];\n    }\n  }\n\n  vector<pair<PI,int> > team;\n  \n  rep(i,t){\n    team.pb(mp(mp(-sol[i+1],pena[i+1]),-i-1));\n  }\n\n  \n  sort(ALL(team));\n  rep(i,t){\n    if(i){\n      if(team[i-1].F == team[i].F) cout << \"=\";\n      else cout << \",\";\n    }\n    cout << -team[i].S;\n  }\n  cout << endl;\n}\n\nint main(){\n  while(cin >> m >> t >> p >> r && m) solve();\n}"
  },
  {
    "language": "C++",
    "code": "//\n//  1187.cpp\n//  \n//\n//  Created by Minote Tomoki on 2015/06/04.\n//\n//\n\n#include <iostream>\n#include <vector>\n#include <algorithm>\n\nusing namespace std;\n\ntypedef struct {\n    int m;\n    int t;\n    int p;\n    int j;\n} data;\n\ntypedef struct {\n    int team;\n    int time;\n    int collect;\n} status;\n\nstatus judge(vector<data> team,int num) {\n    int que_time[10]={0};\n    \n     status result = {num};\n    \n    for(auto k:team) {\n//        que_time[k.p-1]+=k.m;\n        if(k.j==0) {\n            result.collect++;\n            result.time=k.m + que_time[k.p-1];\n        }\n        else {\n            que_time[k.p-1]+=20;\n        }\n        \n    }\n//    cout << result.time << endl;\n//    cout << result.collect << endl;\n    return result;\n}\n\nbool cmp(const status& left, const status& right) {\n    if ( left.collect == right.collect) {\n        if(left.time == right.time) {\n            return left.team > right.team;\n        }\n        else {\n            return left.time < right.time;\n        }\n    }\n    return left.collect > right.collect;\n}\n\nbool eq(const status& left, const status& right) {\n    if(left.collect == right.collect && left.time == right.time) return true;\n    else return false;\n}\n\nint main(void) {\n    int M,T,P,R;\n    int m,t,p,j;\n    \n    while(cin >> M >> T >> P >> R, M|T|P|R) {\n    \n        vector<data> dat(R);\n        vector<vector<data>> team(T);\n        vector<status> result;\n    \n        for(int i=0;i<R;i++) {\n            cin >> m >> t >> p >> j;\n            data d={m,t,p,j};\n            team[t-1].push_back(d);\n        }\n    \n        int k=1;\n        for(auto i:team){\n            status tmp = judge(i,k++);\n            result.push_back(tmp);\n            //cout << tmp.time << \",\" << tmp.collect << endl;\n        }\n        \n        \n        //for(int i=0;i<T;i++) { cout << result[i].collect << endl; }\n        sort(result.begin(),result.end(),cmp);\n        for(int i=0;i<team.size();i++){\n            cout << result[i].team;\n            if(i<team.size()-1) {\n                if(eq(result[i],result[i+1])) cout << \"=\";\n                else cout << \",\";\n            }\n        }\n        cout << endl;\n    }\n    \n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<vector>\n#include<algorithm>\n#include<functional>\nusing namespace std;\n\nclass Data{\npublic:\n  int correct;\n  int submit[10];\n  int time;\n  int team;\n  Data():correct(0),time(0),team(0){\n    for(int i=0;i<10;i++)\n      submit[i]=0;\n  }\n};\n\nbool operator>(const Data &d1,const Data &d2){\n  if(d1.correct!=d2.correct) return d1.correct>d2.correct;\n  else if(d1.time!=d2.time) return d1.time<d2.time;\n  else return d1.team>d2.team;\n}\n\nbool operator==(const Data &d1,const Data &d2){\n  return d1.correct==d2.correct && d1.time==d2.time;\n}\n\nint main(){\n  int m,t,p,r;\n  while(cin>>m>>t>>p>>r,m){\n    vector<Data> vec(t);\n    for(int i=0;i<t;i++)\n      vec[i].team=i+1;\n    for(int i=0;i<r;i++){\n      int a,b,c,d;\n      cin>>a>>b>>c>>d;\n      b--;\n      c--;\n      if(d==0){\n\tvec[b].time+=vec[b].submit[c]*20+a;\n\tvec[b].correct++;\n      }else{\n\tvec[b].submit[c]++;\n      }\n    }\n    sort(vec.begin(),vec.end(),greater<Data>());\n    for(int i=0;i<t-1;i++){\n      cout<<vec[i].team;\n      if(vec[i]==vec[i+1]){\n\tcout<<\"=\";\n      }else{\n\tcout<<\",\";\n      }\n    }\n    cout<<vec[t-1].team<<endl;\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include \"bits/stdc++.h\"\n#include<unordered_map>\n#include<unordered_set>\n#pragma warning(disable:4996)\nusing namespace std;\nusing ld = long double;\ntemplate<class T>\nusing Table = vector<vector<T>>;\nconst ld eps=1e-9;\n\n//// < \"D:\\D_Download\\Visual Studio 2015\\Projects\\programing_contest_c++\\Debug\\a.txt\"\nstruct team {\n\tint solve;\n\tint time;\n\tint id;\n\n};\n\nint main() {\n\twhile (1) {\n\t\tint N, T, P, R; cin >> N >> T >> P >> R;\n\t\tvector<vector<int>>wrongs(T, vector < int>(P));\n\t\tvector<vector<int>>scores(T, vector <int>(P,0));\n\t\tif (!N)break;\n\t\tfor (int i = 0; i < R; ++i) {\n\t\t\tint m, t, p, j; cin >> m >> t >> p >> j;\n\t\t\tt--; p--;\n\t\t\tif (j) {\n\t\t\t\twrongs[t][p]++;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (!scores[t][p]) {\n\t\t\t\t\tscores[t][p] += 1+wrongs[t][p] * 20 + m;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tvector<team>ts;\n\t\tfor (int i = 0; i < T; ++i) {\n\t\t\tteam t = team{ 0,0,i+1 };\n\t\t\tfor (int j = 0; j < P; ++j) {\n\t\t\t\tif (scores[i][j]) {\n\t\t\t\t\tt.solve++;\n\t\t\t\t\tt.time += scores[i][j];\n\n\t\t\t\t}\n\t\t\t}\n\t\t\tts.emplace_back(t);\n\t\t}\n\t\tsort(ts.begin(), ts.end(), [](const team&l, const team&r) {\n\t\t\treturn l.solve == r.solve ? l.time == r.time ? l.id>r.id:l.time<r.time : l.solve>r.solve;\n\t\t\t; });\n\t\tcout << ts[0].id;\n\t\tfor (int i = 1; i < ts.size(); ++i) {\n\t\t\tif (ts[i].solve == ts[i - 1].solve&&ts[i].time == ts[i - 1].time)cout << '=';\n\t\t\telse cout << \",\";\n\t\t\tcout << ts[i].id;\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <map>\n\nusing namespace std;\n\nint main()\n{\n\twhile(1)\n\t{\n\t\tint m,t,p,r;\n\t\tcin >> m >> t >> p >> r;\n\t\tif(m==0&&t==0&&p==0&&r==0) break;\n\n\t\tvector < vector<int> > mt(t, vector<int>() );\n\t\tvector < vector<int> > pt(t, vector<int>() );\n\t\tvector < vector<int> > jt(t, vector<int>() );\n\n\t\tfor (int i=0;i<r;i++)\n\t\t{\n\t\t\tint M,T,P,J;\n\t\t\tcin >> M >> T >> P >> J;\n\t\t\tmt[T-1].push_back(M);\n\t\t\tpt[T-1].push_back(P);\n\t\t\tjt[T-1].push_back(J);\n\t\t}\n\t\t\n\t\tmultimap <int,int> rank;\n\n\t\tfor (int i=0;i<t;i++)\n\t\t{\n\t\t\tint SC=0,PT=0;\n\t\t\tvector <bool> solved(p);\n\t\t\tfor (int j=mt[i].size()-1;j>=0;j--)\n\t\t\t{\n\t\t\t\tif(!solved[pt[i][j]])\n\t\t\t\t{\n\t\t\t\t\tif(jt[i][j]==0)\n\t\t\t\t\t{\n\t\t\t\t\t\tsolved[pt[i][j]]=true;\n\t\t\t\t\t\tSC++;\n\t\t\t\t\t\tPT+=mt[i][j];\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tPT+=20;\n\t\t\t\t}\n\t\t\t}\n\t\t\tpair <int, int> PAIR;\n\t\t\tPAIR.first = (-(SC*5000000)+PT)*50-i;\n\t\t\tPAIR.second = i;\n\t\t\trank.insert(PAIR);\n\t\t}\n\t\t\n\t\tfor (multimap<int, int>::iterator i=rank.begin();i!=(--rank.end());i++)\n\t\t{\n\t\t\tcout << i->second + 1 << ((((i->first)+(i->second))==(((++i)->first)+((i)->second)))?\"=\":\",\");\n\t\t\ti--;\n\t\t}\n\t\tcout << (--rank.end())->second + 1 << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include \"bits/stdc++.h\"\nusing namespace std;\n#define ll long long\n#define endl '\\n'\n#define rep(i, n) for(int i = 0; i < (int)(n); i++)\n#define rep2(i,a,b) for(int i=int(a);i<int(b);i++)\n#define pb emplace_back\n#define all(x) (x).begin(),(x).end()\nint mod=1e9+7;\nint mod2=998244353;\nconst int INF=1e9;\n\nsigned main(){\n\tll m,t,p,r;\n\twhile(1){\n\t\tcin>>m>>t>>p>>r;\n\t\tif(m==0&&t==0&&p==0&&r==0)break;\n\t\tvector<tuple<ll,ll,ll> > kj(t,make_tuple(0,1e9,0));\n\t\trep(i,t)get<2>(kj[i])=i;\n\n\t\tvector<vector<ll> > pena(t,vector<ll>(p,0));\n\t\trep(i,r){\n\t\t\tll mi,ti,pi,ji;\n\t\t\tcin>>mi>>ti>>pi>>ji;\n\t\t\tti--;\n\t\t\tpi--;\n\t\t\tif(ji!=0){\n\t\t\t\tpena[ti][pi]+=20;\n\t\t\t}else{\n\t\t\t\tget<0>(kj[ti])++;\n\t\t\t\tget<1>(kj[ti])-=(pena[ti][pi]+mi);\n\t\t\t}\n\t\t}\n\t\tsort(kj.begin(),kj.end(),greater<tuple<ll,ll,ll> >());\n\t\trep(i,t){\n\t\t\tif(i!=0){\n\t\t\t\tif((get<0>(kj[i-1])==get<0>(kj[i]))&&(get<1>(kj[i-1])==get<1>(kj[i])))cout<<\"=\";\n\t\t\t\telse cout<<\",\";\n\t\t\t}\n\t\t\tcout<<get<2>(kj[i])+1;\n\t\t}\n\t\tcout<<endl;\n\t}\n}\n\n// `.`..`(WNNNNNNMNWWWH9rttwgHM8OtttwwVtttrrtrttrw0rtrtwrrrtrZUAOOrrrXWppHMHyZHpWHMHMkWWVHMNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN\n// `.`.`..`(WMNMHfWH9ZtrtAdNM8ttttOwVtrrtrrtrrrrrdrrttrZkOrrrrrrXWyrtrrZWWWWMmwXWppWHHMmWHkWMMNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN\n// .`.```_..(HMfWH9OtttwXWHBrttrOw0rttrOvrrrtrZrrRrtrrrtZHwrrrrrwwZHyrrrrZWWpWMmwWppkWHHMkHNkVWMNNNNN#NN#NN#NN#NN#NN#NN#NN#NN#NN#NNNN\n// .``.. ..HNfWW9wtrrOdWHM0trttOdSrtrtwwrtrtrw0twSrtOrrrrZHwtrrrrrXwdWwrrrrXHppWNkXWpkvWH@MkHMHkWMMNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN\n// `.`. -jMWWXXwtrttO0d@BrtrttwXVrtrrwVrrrtrtXrrd0rrXrrrrrZWyrrrrrrZXwWyZOrrvWWpWMkZHbkwrdHMMKMMNHkHMNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN\n// `.`. v8Xdk9ttttrOwXM0tttrtwXwwrtrw0rrtrrtwKrrd0rrXrtrrrrZHkwrrrrrrXkVkrrrvrZHWpHHkWkwrwvVHHNWMMMMkWMNNNNNNN#NN#NN#NN#NN#NN#NN#NNNN\n// .. JHZdbKOrrrtrtwWWOOttrOwSzVrOrw0rrttrrrdRrrdZrrdOrtrtrrZHkXwrrrrrZWXHwwrrrvWWWWNkWkvrrrwWM@RMMMNNmWMNNNNNNNNNNNNNNNNNNNNNNNNNNNN\n// . .JGXHStttttrtwW9OrtrrrdSX0rtrdStrtrtrrwHVrrdkrrtSrrrrrrrdMyXrrrrrvXWXWmwvrrvdHWWNkWyvvvvvT@MNWM#N#MNWMMNNNNNNNNNNNNNNNNNNNNNNNNN\n// (.zqHXZtrttrrOwU0trttrOdWX0OtOdRrrtrrrrrdNrrrdkrrrXOwrrrrrrdNySrrrrrwXXkUmvvwvrZHWfNkUkvwvvvdMMMRM#MMNNNkMMNNNNNN#NN#NN#NN#NN#NNNN\n// (wdS0OttrtOOrwSrtttrrtwKukrrrwKrrrrrtrrwW@rrrXKrrrZkr0OrrrrrWNwkrvvrrvzXkXHwvvrvwWVVHkUyrvvvvZHMMNWMMNNNNNkWMNNNNNNNNNNNNNNNNNNNNN\n// wWtrrttrrOwrwStrttrtrwWZXOrtwX0rrrttrrrXMSrrrXWrrrrXrwvrrrrvZHHXkrrrrvrzWkXNyvrvvvWWWHHWwvvvvvwHNMHRM#NNNNNMmWMMNNNNNNNNNNNNNNNNNN\n// 8OtttrwZwwtwSrrttrrrwdyXwtrrdWrrtrrrrrdWH0rrrXWOrrrwRz0rrvrrrdMHWwvvrrvvXWkWHyrvvvrWWWHkHvvvvvvwWMMMNWMMNNNNNMHWMMNMNNNN#NN#NNNNNN\n// wttrrdVrZrwWwtOrrrrwdWX0rrtdH0rrrtrrtwWHHrrrrXWRrrvrXXXrrvrrrvXHkSwvvrvrrXWkVHyvvvvwHVWHWRvvvvvvdHdMMMKMNNNNNNNMNkWMNNNNNNNNNNNNNM\n// ttrrd0rwrOX0rrtrrtwXHXSrwrwHKrtrtrrtrdWH#rrrrdpkrrrrvHwkwvrrvrZWHXkzzvvvvwUWkpNwvrvvZHfVNHwvvvvvzXHWMNMNMNNNNNNNN#NkWMNNNNNNNNNM3>\n// rrrdSrwwtXSrrtrrrwXWWKwrrrdHXrrrrrrrwWWH#vrrrvWpvrrvrdRXwvrvrvvXHWWwkvvrvvwWWKWHzwvvvXHVWWHvzzzzvzWRHMMMNHMNNNNNNNNMNkMMNNNNNN@<<>\n// OOd9rw0rdKOtrtrrruXHW0rrrdH#rrrrrrrrdpWp#rrrrrXWkvrvvrWwkrvrrvwwWHpKdvvrrvvXHHfWmdwvzwWHVHWkzzzzzzwWXHMHHNWMNNNNNNNNNMNkMNNNN#z>>>\n// OdSOwSwwW0rrrrtrwXNW8rrtrWWSrtrrrrrrXpHWHvrrrrXpHrrrvwZHdyvvvvvvXHpHwkvvvvvrXHHfNwXvzzwWWWKHzzzzzzzWSWHHHMMKMNNNNNNNNNNMNKMNN#>>;>\n// wWwOXrwX8rtrrrrwWWpHrrrrdNNrrrrrrrrwppNWHrvrvrypWwvvrrvXKWvrvrvvZXHHkXzvvvvvwWWWWNdkvvzXHfHWkXzzzzzwWXHHHHNMHMNNNNNNNNNNNNNWMN+>>>\n// R0rd0rdKrrtrtrrdWHWSrrrwWWDrrrrrrrrXpWHqWvrrrvdWbRvvrvvwWZkvvvrvvXHbHzRvvvvvvdHHpHkWwvzXWHWHHzuzzzzzXXWHHHMHMNHMNNNNNNNNNNNMNWh<>>\n// wOwSrwXSrtrtrrwHWWMwrrrdNWSrrrrrrrvppWpHprrvrvddWHwvvrrvXHXwvvvrvzXWHkXzvvvvvzWWKWNdRvzzXWWHHXzzzzzzzudWHbH@HNNWMNNNNNNNNNNNNNkHe>\n// rOXwwwKrrrrrrrXWHHDrrwrdHHXwrrrrrrwpWWbHWvvvrvwHHpHrvvvrXWHWwvvrwwXHkHdkvzvvvvZHHpHKWzzzwWHWHRzzzzuzzzzWHHkHHMMNWMNNNNNNNNNNNNNNKm\n// rdX0OXSrrtrrrdHHWMXrrrwHWHrrrrrrrrXppqWHWkrrvvwWMHHXwwvvvZWKRvvvvrWHWHwWvzvzzzzXWKWNXRzzwXWWNHzzzzzzzzzXUHkHWMMHNWMNNNNNNNNNNNNNNN\n// wSwww#rrrrrrwWWHM#vrrrd#WKvrrrrrvvXppmWMWkvvvvwXNNpNvSXzzvdHkkvvzvdWWWRXwzzzzzzdNNpMkHzzzWVHHpXzzzzzzzzdkHkHHHNMHNkMNNNNNNNNNNNNNN\n// XwSwWwrrrrrrdHWWMKrvrvWHWSrvrvvvvwpppHW#HRwUUUWWMMMMMHHHHmmXHWwvvzwWHbNwRzzzzzzzWWWWHWkzzdXWWWRzzzzzzzuzWWbHHWMNMMNkMNNNNNNNNNNNNN\n// 8drd#rrrrrrwWWkHMmXmywMfWXrvrrrvrwppWNWMNWvrvvwvW#MNHmdkrvvXHMMmmwzdWpM0WzzzzzzzdHHWNUHzzzWWmHHzzuzzuzuzWXbbNkHMqMHNkHNNNNNNNNNNNN\n// dSwWSrrrrrrdHHHMHrrrwWMfWvvvrvrrrdppWNW#WWRvvrvvdM?WNHkXkzvvdWMHXHNmHHHkfwzzzzzzXHHpMWHkzuXWHNWXzzuzzuzzXXkkHbHMHMMMMkMNNNNNNNNNNN\n// Xrd#wrrrrrrXpHWH#rrrvdMWWvrrvrvvrdppWHW#(NWwvvvvwMr~TNHmdkvzvXWMKzzzWMHKXXzzzzzzuWHbHkWKuzdWWHWkzzzuzzuuXXHkHkgHk@H@HHkMNNNNNNNNNN\n// RvWDrrrrrrwHWkMW#rvvrMMfWwrvrrvvrdppWHW@~?HHuvvrvdb_~?NWkdkzzzUWMkzuuWWHWXuzwzzuzXHHHKWHuzzWW@WRuzuzzzzzduWbHHgMH@HHHMMHMNNNNNNNNN\n// rdHwrrrrrrXHHWNW#vvvdMMHWkvrvrrvrdppWbWD~~?XKkrrrwMc~~~THHZHwzzWHNkvzwMRdHHzuzzzzXHHWHXNkuzdWHkWuzzuzuzzXzWkHHHMHHHkH@MMNWMNNNNNNN\n// rdHvrrrrrrWkHHHW#rrrd#dNWKrvrvvrvwbpWWW$...vVkkOrtXb~~~~(WHkWkvwWWMkzzWRXkSWXzzzuwmNWHXHRuuwHMKWzzuzzzuzXzWHWHHMHHHkkMMMHHWNNNNNNN\n// wW#rrvrrrwHWHMpWNrvrd@(NWWvrrrrrvvWpWXH$..._?dkkttOWl~~~~~?HHdHXXbWMkzUHXWkzzzzzzuHNk#XHHzzukHHXzuzzzuzuXuXqkMHMHMbbkHHH@HNWMNNNNN\n// dH#rrrvrrdNWWNpHHwrrd@_WHWkrvvrrrrZpWXWr...__?WkWyOvN~~~~~__7HkWkbbkNkzXHZkzzzuzzzWHW#ugbXuzWWHXXuzzuzuuuzXkkHHH@MbkHMHMHMMNWMNNNN\n// X@KrrvrvrXNHWHpHHHrrdb~(NWHrrrrrrrrXWXWr..`...-7HZkzvn~~~~~~~_TNyHHkHMyzXkXuzzzzuuWHW#uHkkzzWHHXuzzzzuzzuuXHkHHHMNbkHHHHHHMMNWMNNN\n// WHKvvrvrvXHNMbpHmHkOwb..?HWRrwOrtrtrWKWr`.`.`..._?6dkJn~~~~~~-_~7NHMHbNkuUkzzuzzzuWHW#uHbRzuXHHXzzuuuuzuuzXHkHHMMbkkHkMkkkMMMNUMMN\n// WHKrrvrrvXqHMpfHHHWkrb...vkHyOrtttttdNXr.`.J>~-((J+ggQkHXHHHmaJz7&JWHMMWkuHXzuuuzzWgHHwHkKuzXMKXuzuuzuzzuzdkHHHHHkHWMHHbkWHMMMNXM#\n// Wg#rvrvrrXmHNpfHHHMMRd-.._4kfyttttllOHWr`` <udT\"\"\"7\"\"\"\"\"TMHHMNHHMNgv4HMRXHXHwuzzzuWHHKXHkHzzXMSWzuzzuzuuzudbkHHHHkkHqHuWkWHHMMMNWM\n// WHNrvrvvvXHmNppgg@MMMHr..` UkWOlllllldW$..?!     `     ` ?@MMHHMM#NMMmMkXXWkHuzuzuWNHSXHHHuuXNSWuzuuzuzuzuWkHNgMkkkMHSuWkqmqHHMNNK\n// WHMkvvrvrXHHMppHHHMNMTN_``` 4kWOz====vXP` `   `        ``.HggmgM@MH###NKkkuXWHzzuXHHMzdMHHuzWNXKzuuzuzuzuuHkHHNMkkHHBuzWkHHHHuHMMM\n// WHHNzvvrvwHMMppHMMMM>.#L`````?kyy====?0S``  `     ` ``...dmqqqmmHHHMMM#WRSzuzWHuzXHq#uWHHHzuWHXKzuzzuzuzuXHkHWMNkWM#uzuWHHHHSuuWM#\n// WM@MkwvvrzXMMHpgHMMM[.MN.`````(HXy1???zd.``  `  `   ` dHkkqkkqkHHHHHHMMWWXzzuzwWwXHHKXMkHHuXMRXSuuuzuuzuzXHkHdHHWHHXuuwWHqHHuXzXWM\n// XHHMNyrvvwdW@HpHWMHML MM[`  ` `.4kGz<<>Or```  `      `dWpbbbbbHMMbbbHHMXXuzzuzuzXWHHSXMkHHuXMSXuzzuzzuzuzWkkHWMHMSwuzzXHkHHXuzuWd#\n// dHHH@NyzwwwWHMHHWMMMR dW]`` ` ```(HZx<<<4.```` `` ``  OZppfppppWfpWpK9NKXuuzuuzuXWHHudMqNHXWNuHuzzuzuzuzuHkHXMMBuuuzuuWkHHUuuuXSMS\n// wWHMMMMkwwvdNpHHHM#MH-jWP``` `` ```7kI<:<h.``````` `` ,2OWVVyVVyWWWWIdMKWzuuuzzuXHHSwHHHHKXHHXSuuzuuzuzuXHHHXMXuuuuuuXHHHuzuuXSX#X\n// wdWHMMMMmwXwHbpMNHMM@b.hb``````````` 7x1_(>_```````````(x7UUUV0XwvCI1dMWKXuzzuzuWHHudMkgkWbMSXuzzzuzzuzuWkHSW#zXwXuXXWHHuuXXuWXWSX\n// vvXWHMMHWNkvWHbbMWMMMN_JF.```` `` `````?1_(_.`.`........(<777=<<<><<+dMXUuzuuuuWWMRwMHWMkWHHXSuuzuzuzzuXqHHXMHUXuXXHHHSuuwuXWud8uH\n// mzzXWH#zHbHkXNbbWMMMMD~(_``````````````` .~_`.``.`.`.....___(<~(<<(<<dHkkuuuuuXkHHuWMkHkkkHSXXzuuzuuuuzXHHSd#uuXXWHHXuuuZuXSuqHudS\n// UHzzXWSXXWbbHHHbWHMH#<~...```` ``````````````.```.` -_____<~~_<_<~~(jMWSuzuzuXWHMHXMHHHkkH#XSuzzuzuzuzuKkHXMQkWHHWUXuXXUuXUuXHuXBu\n// .(Smd8wSvXbbbbHHHWHW3___.``````` `` ``````.```.```.`...._.._~~..~_~~(#WuzuuzXXkHMqMMHMkkkMUXuXzuuwuuzuXkHSWMWUUuuuXXUUuXHXXWSuXHXu\n// .. JKwSvwzWkkkkHHHH5~~..```````````````````.```.````````.` .........dWSuuzzzdkHMW@MHMkkkHHXXuzuuXSuzuuWWHd#uuuXXkWSuXXWUXXHUXWHuuu\n// .`(HXSzzzzwWbkWHNHr_...``````````````````.```````.```````.`.`..`.-.(HKuzzuuwHHMNMHHMkkkHHuZuuzuuXuuuuXkHWMHHHUUuXXXWHXXHHUuXW8uuuu\n// .-MXWwzzzuzXkHHMHHN-.`````````` ````````````.`.````.``.```.`.`....-dXUXuzuXHWHMMHHBWHMMMSZuzuuzXXzuuXHHMHMHkHHHHHHHWHHSuXkHWSuuuuX\n// (#XKzzzzzuzuWHHkWHHp ``.````````````````````````.````````.....-((-(NSXuzzXHW@D:~`(/1- .kXuzuuzXSuuzXXkHWMHHHHHHHHMWuuuQXUXWuuuXuXH\n// MXWzuzzzzzuXHHbHNMMMt`.```````````````````````````.`.` ..-J7\"!``  XKuzzuXHHM9;/<-.J-u!JXXuuzuXWuuuuXHHH#WMNHmkkkuXXkWUXXWXXuuuXqHH\n// XWzzzzuzzwXHHHH#\"````<.````````````````````.``.`...-c\"7``` ` `  `(BzuuuXmHH8<!(- ?_!`jWUuzuuuWuuuzXWHNH> ..7WHHqHmQkWWXXuuuuuXWqHH\n// SwuzzzXuwXHNHY``  ``  <,`.`````````````` `` ..J7=``` ` ` `` ````.#zuzXXHHH$~`` ```(_(HSuuuzuXSuzuuXHHWCi(` ._ ?WggHHHHWkkkkWHHHHMH\n// zzzuzuzwWHMY!`  `   ` `(&.```````````` ..J7^ `` `  `  `   ` `. .HXuuXWHW#!` ` ```` (WUuzzuXXSzuuudHHXY$. : (..``.THHkqkHHHgHHMHkkk\n// zzzzzzXHWK``  ` `` ` ` ` TJ.``````..J7=````    ` `  ` ` `` ` `.8zuXXHHW=`   ``  ..(XSuuuuuXWuuuuXHWH5~~` .`_?_,-``.TMMMMMMHkkqqHHH\n// zzuuzdHHkN ` ` `  ``  ` ``(Wm,.(J7!```  `  ``` `` `` ` ` ``` .SzuXWHHY `` .._~<~~(dSuuuzzXHuuuuXHWHD::?C._.( -`(!_1 ,WHqHHHmqHHHHN\n// zuzXXHHkHM;`  ` ` ` ``  ` .;jY= ` .``_``  `  `  `  ` `` ` `.dXuXWm@^ .._~_.~~~~~(d0uuzuuXHUuuuXHWH5:::::::_.<&._4r?_.;WMMM@MMY\"<!`\n// zzXHHHHMHMb`` `` ` `` `` .J!  ` ..`_~  ` ` ` `` `   `  ``.JXXXHY! .__.....~.~~~-d0wuzuXXHSuuuXWWH$::::;:::;:+- ~`(.i +HqHHkkHL..`.\n// XWHHHMMHMHM; `  ` `   ` ._`` ...(:.=_` `  ` `  ` ```` .-dVT7^``````......~~~~~_jWuuuuuXHSuzuXHHH3<;:::::;;j<+z ``` -dHNkkMqkkN..``\n// HHHMMHHHHNMN.``  ` `  `!`z(. ~..~ ! . ` ``  ` ` ` ..gHr``````````........~~~~_jWuuuuuXkSuuuXHWHC:;::;;:::+v>:((J<!(WHHMkkHNqkM;`..\n// HMMkkHHHHM9?b ``  ` `  ``     .``. `  ` ` `  ``` 4HkkkH,  ``````.`......~~~~_+KuuuzuXHSuuuXHHK<(::::::<;<J+g9>::;<  .4NkkqMHqH]..`\n// MHkHHHMM$<<:?L` `` ` `  ` ``.` `  !``  ` ` ` `  ` ?HbkkHx``````.`..`...~~~~_jKuuuuuXHSuuuqMHD<:<;:<++ddNMB3:;::;:<` `,HkkqH@HH].``\n// kkHHkHY``` (;?h`` ` ` ``  ````  ` ` ` ` ` ` ` ` ```.4XWbHx```..`......~~~~_gKuuuuXWH0uuuXHH3:;++1z<jgMB3<::::::::~` `jMkqkHMHHF.`.\n// kHHHH=` . ` _<?L  ` `  ` `    `  ` ` ` ` ` ` `  ` `  ?kwWHp .`.......~_~~(dKuuuuXWHUuuXWH9++z1<;+jWB3::::;;;::;:;_`` MNkqkqMNMF..`\n// HHk@!.  ` ` ` ~?L  ` ` `` ` `` `` ` ` ` `  ` ` `   `  -WuXHh..`.....~~~~(dWuuuXXkHUuuXHH9>:<:++YY<:;::::;:::::;:::+.``?HHkHHHM>`.`\n\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n#define rep(i,n) repi(i,0,n)\n#define repi(i,a,b) for(int i=(int)(a);i<(int)(b);i++)\n#define pb push_back\n\nint main(){\n  while(true){ \n    int M,T,P,R;\n    cin >> M >> T >> P >> R;\n    if(M==0 && T==0 && P==0 && R==0) break;\n    int S[T][P];\n    memset(S,0,sizeof(S));\n    pair<pair<int, int>,int> pa[T];\n    rep(i,T){\n      pa[i]=make_pair(make_pair(0,0),i+1);\n    }\n    rep(i,R){\n      int m,t,p,j;\n      cin >> m >> t >> p >> j;\n      if(j==0){\n\tpa[t-1].first = make_pair(pa[t-1].first.first+1,pa[t-1].first.second-m-S[t-1][p-1]*20);\n      }else{\n\tS[t-1][p-1]++;\n      }\n    }\n    sort(pa,pa+T);\n    reverse(pa,pa+T);\n    rep(i,T){\n      cout << pa[i].second;\n      if(i!=T-1){\n\tif(pa[i].first.first==pa[i+1].first.first && pa[i].first.second==pa[i+1].first.second) cout << \"=\";\n\telse {\n\t  cout << \",\";\n\t  //cout << \"i = \" << i << \" : \" <<  pa[i].first.second << \"  i+1 = \" << i+1 << \" : \" << pa[i+1].first.second << endl;\n\t}\n      }\n    }\n    cout << endl;\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\nusing namespace std;\n\nstruct d{\n  int time, prob, team;\n};\nbool operator<(const d &a, const d &b){\n  if(a.prob == b.prob)\n  {\n    if(a.time == b.time)\n    {\n      return a.team > b.team;\n    }\n    return a.time < b.time;\n  }\n  return a.prob > b.prob;\n}\nint main(){\n\n  int M, T, P, R;\n  int m, t, p, j, i;\n\n  while(cin >> M >> T >> P >> R, M+T+P+R){\n    d res[T+1];\n    for(i = 1; i <= T; i++){\n      res[i].time = res[i].prob = 0;\n      res[i].team = i;\n    }\n    int rank[T+1][P+1];\n    for(i = 1; i <= T; i++){\n      for(j = 1; j <= P; j++){\n        rank[i][j] = 0;\n      }\n    }\n    for(i = 0; i < R; i++){\n      cin >> m >> t >> p >> j;\n      if(m > M) break;\n      if(j){\n        rank[t][p]++;\n      }else{\n        res[t].time += m + rank[t][p]*20;\n        res[t].prob++;\n      }\n    }\n    /* cerr << \"debug\" << endl;\n    for(i=1; i<=T; i++)\n    {\n      cerr << res[i].team << \",\" << res[i].prob << \",\" << res[i].time << endl;\n    }\n    cerr << \"debug\" << endl;\n*/\n    sort(res+1, res+T+1);\n    cout << res[1].team;\n    for(i=2; i<=T; i++)\n    {\n      cout << ((res[i].prob==res[i-1].prob && res[i].time==res[i-1].time) ? \"=\" : \",\") << res[i].team;\n    }\n    cout << endl;\n    //cerr << endl;\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstdlib>\n#include <cstdio>\n#include <cstring>\n#include <cmath>\n#include <stack>\n#include <queue>\n#include <cctype>\n#include <complex>\n#include <vector>\n#include <set>\n#include <map>\n#include <algorithm>\n#include <functional>\n#include <cassert>\n#include <iomanip>\n\nusing namespace std;\n\n#define all(x) begin(x), end(x)\n#define rall(x) (x).rbegin(), (x).rend()\ntypedef long long ll;\ntypedef complex<int> P;\ntypedef pair<int, int> pii;\ntypedef tuple<int, int, int> tii;\nconst double EPS = 1e-10;\nconst double PI = acos(-1.0);\n\n\nconst int pena = 20;\n\nstruct st{\n\tint id;\n\tint ac = 0;\n\tint t = 0;\n\tvector<int> ac_t;\n\tvector<int> wa_cnt;\n\n\tst(int p){\n\t\tac_t = vector<int>(p, -1);\n\t\twa_cnt.resize(p);\n\t}\n\tbool operator<(const st& o) const{\n\t\treturn (*this).ac == o.ac ? (*this).t > o.t : (*this).ac < o.ac;\n\t}\n\tbool operator==(const st& o) const{\n\t\treturn (*this).ac == o.ac && (*this).t == o.t;\n\t}\n\tbool operator!=(const st& o) const{\n\t\treturn !((*this) == o);\n\t}\n\n\tvoid calc(){\n\t\tfor(int i=0;i<ac_t.size();++i){\n\t\t\tif(ac_t[i] == -1) continue;\n\t\t\t++ac;\n\t\t\tt += ac_t[i] + wa_cnt[i] * pena;\n\t\t}\n\t}\n};\n\nvoid debug(vector<st> team){\n\tfor(auto& o : team){\n\t\tcerr<< o.id<< \" : \";\n\t\tcerr<< o.ac<< \" \"<< o.t;\n\t\tcerr<< \" , \";\n\t\tfor(auto& p : o.ac_t) cerr<< \" \"<< p;\n\t\tcerr<< \" , \";\n\t\tfor(auto& p : o.wa_cnt) cerr<< \" \"<< p;\n\t\tcerr<< endl;\n\t}\n}\n\nbool solve(){\n\tint m, t, p, r;\n\tcin>> m>> t>> p>> r;\n\tif(!m && !t && !p && !r) return false;\n\tvector<st> team(t, st(p));\n\tfor(int i=0;i<t;++i) team[i].id = i + 1;\n\n\tfor(int i=0;i<r;++i){\n\t\tint m, t, p, j;\n\t\tcin>> m>> t>> p>> j;\n\t\t--t; --p;\n\t\tif(j == 0){\n\t\t\tteam[t].ac_t[p] = m;\n\t\t}else{\n\t\t\t++team[t].wa_cnt[p];\n\t\t}\n\t}\n\n\t//debug(team);\n\tfor(auto& o : team) o.calc();\n\tsort(rall(team));\n\t//debug(team);\n\n\tfor(int i=0;i<team.size();++i){\n\t\tif(i) cout<< \",\";\n\t\tvector<int> tmp;\n\t\ttmp.push_back(team[i].id);\n\t\tfor(int j=i+1;j<team.size();++j){\n\t\t\tif(team[i] != team[j]) break;\n\t\t\ttmp.push_back(team[j].id);\n\t\t}\n\t\tsort(rall(tmp));\n\t\tfor(int j=0;j<tmp.size();++j){\n\t\t\tif(j) cout<< \"=\";\n\t\t\tcout<< tmp[j];\n\t\t}\n\t\ti += tmp.size() - 1;\n\t}\n\tcout<< endl;\n\n\treturn true;\n}\n\nint main(){\n\tcout.setf(ios::fixed); cout.precision(10);\n\twhile(solve());\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "//\n//  1187.cpp\n//  \n//\n//  Created by Minote Tomoki on 2015/06/04.\n//\n//\n\n#include <iostream>\n#include <vector>\n#include <algorithm>\n\nusing namespace std;\n\ntypedef struct {\n    int m;\n    int t;\n    int p;\n    int j;\n} data;\n\ntypedef struct {\n    int team;\n    int time;\n    int collect;\n} status;\n\nstatus judge(vector<data> team,int num) {\n    int que_time[10]={0};\n    \n     status result = {num};\n    \n    for(auto k:team) {\n//        que_time[k.p-1]+=k.m;\n        if(k.j==0) {\n            result.collect++;\n            result.time+=k.m + que_time[k.p-1];\n        }\n        else {\n            que_time[k.p-1]+=20;\n        }\n        \n    }\n//    cout << result.time << endl;\n//    cout << result.collect << endl;\n    \n//    cout << result.time << endl;\n    \n    return result;\n}\n\nbool cmp(const status& left, const status& right) {\n    if ( left.collect == right.collect) {\n        if(left.time == right.time) {\n            return left.team > right.team;\n        }\n        else {\n            return left.time < right.time;\n        }\n    }\n    return left.collect > right.collect;\n}\n\nbool eq(const status& left, const status& right) {\n    if(left.collect == right.collect && left.time == right.time) return true;\n    else return false;\n}\n\nint main(void) {\n    int M,T,P,R;\n    int m,t,p,j;\n    \n    while(cin >> M >> T >> P >> R, M|T|P|R) {\n    \n        vector<data> dat(R);\n        vector<vector<data>> team(T);\n        vector<status> result;\n    \n        for(int i=0;i<R;i++) {\n            cin >> m >> t >> p >> j;\n            data d={m,t,p,j};\n            team[t-1].push_back(d);\n        }\n    \n        int k=1;\n        for(auto i:team){\n            status tmp = judge(i,k++);\n            result.push_back(tmp);\n            //cout << tmp.time << \",\" << tmp.collect << endl;\n        }\n        \n        \n        //for(int i=0;i<T;i++) { cout << result[i].collect << endl; }\n        sort(result.begin(),result.end(),cmp);\n        for(int i=0;i<team.size();i++){\n            cout << result[i].team;\n            if(i<team.size()-1) {\n                if(eq(result[i],result[i+1])) cout << \"=\";\n                else cout << \",\";\n            }\n        }\n        cout << endl;\n    }\n    \n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<algorithm>\nusing namespace std;\n#define N 20000\n\nstruct Time{\n\tint slovenum;\n\tint time;\n\tint pos;\n}Ttime[55];\nint cmp(Time a,Time b){\n\tif(a.slovenum==b.slovenum){\n\t\tif(a.time==b.time){\n\t\t\treturn a.pos>b.pos;\t\n\t\t}\n\t\treturn a.time<b.time;\n\t}\n\treturn a.slovenum>b.slovenum;\n}\nint M,T,P,R;\nint Tn[55],Pn[15];\nint Hashtime[55][15];\nbool isslove[55][15];\nint main(){\n#ifdef CDZSC\n\tfreopen(\"Text.txt\",\"r\",stdin);\n#endif\n\tios::sync_with_stdio(false);\n\tcin.tie(0);\n\tint m,t,p,r;\n\twhile(cin>>M>>T>>P>>R&&M+R+P+T!=0){\n\t\tmemset(Hashtime,0,sizeof(Hashtime));\n\t\tmemset(Ttime,0,sizeof(Ttime));\n\t\tfor(int i=0;i<=T;i++){\n\t\t\tTtime[i].pos=i;\n\t\t}\n\t\tfor(int i=0;i<R;i++){\n\t\t\tcin>>m>>t>>p>>r;\n\t\t\tif(r==0){\n\t\t\t\tHashtime[t][p]+=m;\t\n\t\t\t\tTtime[t].time+=Hashtime[t][p];\n\t\t\t\tTtime[t].slovenum++;\n\t\t\t}\n\t\t\telse\n\t\t\t\tHashtime[t][p]+=20;\n\t\t}\n\t\tsort(Ttime,Ttime+T+1,cmp);\n\t\tfor(int i=0;i<T;i++){\n\t\t\tif(i>0){\n\t\t\t\tif(Ttime[i].time==Ttime[i-1].time&&Ttime[i].slovenum==Ttime[i-1].slovenum)\n\t\t\t\t\tprintf(\"=\");\n\t\t\t\telse printf(\",\");\n\t\t\t}\n\t\t\tprintf(\"%d\",Ttime[i].pos);\n\t\t}\n\t\tcout<<endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <utility>\n#include <algorithm>\n#include <tuple>\nusing namespace std;\n\nint main()\n{\n\tint M, T, P, R, m, t, p, j;\n\twhile (cin >> M >> T >> P >> R, M || T || P || R) {\n\t\tvector< vector< pair<int, int> > > data(T + 1, vector< pair<int, int> >(P, pair<int, int>(0,0)));\n\t\tvector< tuple<int, int, int> > score(T + 1);\n\t\tfor (int i = 0; i < R; i++) {\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tif (j == 0) {\n\t\t\t\tdata[t][p].first = m + data[t][p].second * 20;\n\t\t\t\tget<0>(score[t])--;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdata[t][p].second++;\n\t\t\t}\n\t\t}\n\t\tfor (int i = 1; i <= T; i++) {\n\t\t\tint sco = 0,pena = 0;\n\t\t\tfor (int j = 0; j < P; j++) {\n\t\t\t\tif (data[i][j].first) {\n\t\t\t\t\tsco--;\n\t\t\t\t\tpena += data[i][j].first;\n\t\t\t\t}\n\t\t\t}\n\t\t\tscore[i] = tuple<int, int, int>(get<0>(score[i]),pena,-i);\n\t\t}\n\t\tsort(score.begin() + 1, score.end());\n\t\ttuple<int, int, int> temp = score[1];\n\t\tcout << -get<2>(score[1]);\n\t\tfor (int i = 2; i <= T; i++) {\n\t\t\tif (get<0>(temp) == get<0>(score[i]) && get<1>(temp) == get<1>(score[i])) {\n\t\t\t\tcout << \"=\";\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcout << \",\";\n\t\t\t}\n\t\t\tcout << -get<2>(score[i]);\n\t\t\ttemp = score[i];\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <string>\n#include <vector>\n#include <algorithm>\n#include <cmath>\n#include <cstdio>\n#include <functional>\n#include <numeric>\n#include <stack>\n#include <queue>\n#include <map>\n#include <set>\n#include <utility>\n#include <sstream>\n#include <complex>\n#include <fstream>\n#include <bitset>\n#include <time.h>\n\nusing namespace std;\n\ntypedef long long ll;\ntypedef pair<ll, ll> P;\ntypedef vector<ll> V;\ntypedef complex<double> Point;\n\n#define PI acos(-1.0)\n#define EPS 1e-10\nconst ll INF = (1LL << 31) - 1;\nconst ll MOD = 1e9 + 7;\n\n#define FOR(i,a,b) for(int i=(a);i<(b);i++)\n#define rep(i,N) for(int i=0;i<(N);i++)\n#define ALL(s) (s).begin(),(s).end()\n#define EQ(a,b) (abs((a)-(b))<EPS)\n#define EQV(a,b) ( EQ((a).real(), (b).real()) && EQ((a).imag(), (b).imag()) )\n#define fi first\n#define se second\n#define N_SIZE (1LL << 20)\n#define NIL -1\n#define MAX_N 100100 * 3\n\nint M, T, PP, R;\nbool table[50][10];\nint sum[50][10];\n\nbool is(const pair<P, int> p1, const pair<P, int> p2) {\n\tif (p1.first.first == p2.first.first) {\n\t\tif (p1.first.second == p2.first.second) {\n\t\t\treturn p1.second > p2.second;\n\t\t}\n\t\treturn p1.first.second < p2.first.second;\n\t}\n\treturn p1.first.first > p2.first.first;\n}\n\nint main() {\n\twhile (cin >> M >> T >> PP >> R&&M + T + PP + R) {\n\t\trep(i, 50)rep(j, 10) {\n\t\t\ttable[i][j] = 0;\n\t\t\tsum[i][j] = 0;\n\t\t}\n\t\tvector<pair<P, int>> vpi;\n\t\trep(i, R) {\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tt--; p--;\n\t\t\tif (j == 0) {\n\t\t\t\ttable[t][p] = 1;\n\t\t\t\tsum[t][p] += m;\n\t\t\t}\n\t\t\telse sum[t][p] += 20;\n\t\t}\n\t\trep(i, T) {\n\t\t\tint a = 0, t = 0;\n\t\t\trep(j, PP) {\n\t\t\t\tif (table[i][j]) {\n\t\t\t\t\ta++;\n\t\t\t\t\tt += sum[i][j];\n\t\t\t\t}\n\t\t\t}\n\t\t\tvpi.push_back({ {a,t},i + 1 });\n\t\t}\n\t\tsort(ALL(vpi), is);\n\t\t/*rep(i, T) {\n\t\t\tcout << \"!!\" << vpi[i].first.first << \" \" << vpi[i].first.second << \" \" << vpi[i].second << endl;\n\t\t}*/\n\t\tcout << vpi[0].second;\n\t\trep(i, T - 1) {\n\t\t\tif (vpi[i + 1].first.first == vpi[i].first.first&&\n\t\t\t\tvpi[i + 1].first.second == vpi[i].first.second) {\n\t\t\t\tcout << \"=\" << vpi[i + 1].second;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcout << \",\" << vpi[i + 1].second;\n\t\t\t}\n\t\t}\n\t\tcout << endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<vector>\n#include<algorithm>\n#include<string>\nusing namespace std;\nint m,t,p,r;\nstruct team{\nint time[200];\nbool ok[200];\nint id;\nint ac;\n};\n\nint or(team a,team b){//aのほうが強ければ1,bなら0,同じなら2\nif(a.ac>b.ac)return 1;\nelse if(a.ac<b.ac)return 0;\nint at=0,bt=0;\nfor(int i=0;i<=p;i++){\nif(a.ok[i]==true)at+=a.time[i];\nif(b.ok[i]==true)bt+=b.time[i];\n}\nif(at<bt)return 1;\nelse if(at>bt)return 0;\nelse return 2;\n}\nint main(){\n\n\twhile(true){\n\tcin>>m>>t>>p>>r;\n\tif(m+t+p+r==0)break;\n\tvector<team>ta(0);\n\tta.resize(200);\n\n\tfor(int i=0;i<=t;i++)for(int j=0;j<200;j++)ta[i].time[j]=0,ta[i].ok[j]=0;\n\tfor(int i=0;i<=t;i++)ta[i].id=i,ta[i].ac=0;\n\tfor(int i=0;i<r;i++){\n\tint a,b,c,d;\n\tcin>>a>>b>>c>>d;//a:経過時間:bチーム番号c:問題番号j:0奈良正解それ以外不正解\n\tif(d==0){\n\tta[b].time[c]+=a;\n\tta[b].ac++;\n\tta[b].ok[c]=true;\n\t}\n\telse {\n\tta[b].time[c]+=20;\n\t}\n\t}\n\tta.erase(ta.begin());\n\tfor(int i=0;i<t;i++){\n\tfor(int j=0;j<t;j++){\n\tif(or(ta[i],ta[j])==1)swap(ta[i],ta[j]);\n\tif(or(ta[i],ta[j])==2&&ta[i].id>ta[j].id)swap(ta[i],ta[j]);\n\t}\n\t}\n\tfor(int i=0;i<t-1;i++){\n\tif(or(ta[i],ta[i+1])!=2)cout<<ta[i].id<<\",\";\n\telse cout<<ta[i].id<<\"=\";\n\t}\n\tcout<<ta[t-1].id<<endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<string>\nusing namespace std;\nbool solved[50][10];\nint time[50][10];\nint anstime[50];\nint main(){\n\tint m,t,p,r;\n\tint a[4];\n\twhile(true){\n\t\tcin>>m>>t>>p>>r;\n\t\tif(m==0&&t==0&&p==0&&r==0)\n\t\t\tbreak;\n\t\tfor(int i=0;i<t;i++){\n\t\t\tanstime[i]=0;\n\t\t\tfor(int j=0;j<p;j++){\n\t\t\t\tsolved[i][j]=false;\n\t\t\t\ttime[i][j]=0;\n\t\t\t}\n\t\t}\n\t\tfor(int i=0;i<r;i++){\n\t\t\tfor(int j=0;j<4;j++)\n\t\t\t\tcin>>a[j];\n\t\t\tif(a[3]==0){\n\t\t\t\tsolved[a[1]-1][a[2]-1]=true;\n\t\t\t\tanstime[a[1]-1]+=time[a[1]-1][a[2]-1]+a[0];\n\t\t\t}\n\t\t\telse\n\t\t\t\ttime[a[1]-1][a[2]-1]+=20;\n\t\t}\n\t\tint b[50];\n\t\tfor(int i=0;i<t;i++){\n\t\t\tint count=0;\n\t\t\tfor(int j=0;j<p;j++)\n\t\t\t\tcount+=solved[i][j];\n\t\t\tanstime[i]=count*1000-anstime[i];\n\t\t\tb[i]=i+1;\n\t\t}\n\t\tfor(int i=0;i<t-1;i++){\n\t\t\tfor(int j=t-1;j>i;j--){\n\t\t\t\tif(anstime[j]>anstime[j-1]||(anstime[j]==anstime[j-1]&&b[j]>b[j-1])){\n\t\t\t\t\tint tmp=anstime[j];\n\t\t\t\t\tanstime[j]=anstime[j-1];\n\t\t\t\t\tanstime[j-1]=tmp;\n\t\t\t\t\ttmp=b[j];\n\t\t\t\t\tb[j]=b[j-1];\n\t\t\t\t\tb[j-1]=tmp;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcout<<b[0];\n\t\tfor(int i=1;i<t;i++){\n\t\t\tif(anstime[i]==anstime[i-1])\n\t\t\t\tcout<<'=';\n\t\t\telse\n\t\t\t\tcout<<',';\n\t\t\tcout<<b[i];\n\t\t}\n\t\tcout<<endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define REP(i, n) for (int i = 0; i < (int)(n); i++)\nusing namespace std;\nusing TR = tuple<int, int, int>;\n\nstring join(const vector<string>& v, char c) {\n\tstring s;\n  for (auto p = begin(v); p != end(v); ++p) {\n    s += *p;\n    if (p != v.end() - 1) s += c;\n  }\n\treturn s;\n}\n\nint main() {\n  for (int M, T, P, R; cin >> M >> T >> P >> R, M;) {\n    vector<vector<int>> cnt(T, vector<int>(P, 0));\n    vector<TR> sc(T);\n    REP(i, T) sc[i] = TR(0, 0, -i);\n    REP(i, R) {\n      int m, t, p, j;\n      cin >> m >> t >> p >> j, t--, p--;\n      if (j) {\n        cnt[t][p]++;\n        continue;\n      }\n      int ps, ms, tmp;\n      tie(ps, ms, tmp) = sc[t];\n      sc[t] = TR(ps - 1, ms + m + 20 * cnt[t][p], -t);\n    }\n    sort(begin(sc), end(sc));\n    vector<vector<string>> ans_vv;\n    int ps, ms, t;\n    tie(ps, ms, t) = sc[0];\n    ans_vv.push_back({to_string(-t + 1)});\n    REP(i, T - 1) {\n      int pc, mc, tc;\n      tie(pc, mc, tc) = sc[i];\n      int pn, mn, tn;\n      tie(pn, mn, tn) = sc[i + 1];\n      if (pc == pn && mc == mn) {\n        ans_vv.back().push_back(to_string(-tn + 1));\n      } else {\n        ans_vv.push_back({to_string(-tn + 1)});\n      }\n    }\n    vector<string> ans_v(ans_vv.size());\n    REP(i, ans_vv.size()) ans_v[i] = join(ans_vv[i], '=');\n    string ans = join(ans_v, ',');\n    cout << ans << endl;\n  }\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\ntypedef long long ll;\ntypedef pair<int,int> pii;\ntypedef vector<int> VI;\ntypedef vector<VI> VVI;\nconst double PI = 3.14159265358979323846;\nconst double EPS = 1e-12;\nconst int INF = numeric_limits<int>::max() / 2;\nconst int NEG_INF = numeric_limits<int>::min() / 2;\n\nint main(){\n  cin.tie(0);\n  ios::sync_with_stdio(false);\n\n  int m,t,p,r;\n  while(true){\n    cin >>m >> t >> p >> r;//???????????°???????????°?????¬???????????°\n    if(t==0) break;\n    int seikai[t+1]={0},penalty[t+1]={0},gotou[t+1][p+1]={0};\n    for(int i=0;i<r;i++){\n      int j,tID,pID,time;\n      cin >> time>> tID >> pID >> j;\n      if(j==0){\n        seikai[tID]++;\n        penalty[tID] += gotou[tID][pID]*20+time;\n      }\n      else{\n        gotou[tID][pID]++;\n      }\n    }\n    bool checked[t+1]={false};\n    int preseikai=-1,prepena=-1;\n    for(int i=t;i>=1;i--){\n      int team,seikaimax=-1,pena=INF;\n      for(int j=t;j>=1;j--){\n        if(!checked[j]){\n          if(seikaimax<seikai[j]){\n            seikaimax=seikai[j];\n            team=j;\n            pena=penalty[j];\n          }\n          else if(seikaimax==seikai[j]){\n            if(pena>penalty[j]){\n              team=j;\n              pena=penalty[j];\n            }\n          }\n        }\n      }\n      checked[team]=true;\n      if(prepena==-1) cout << team ;\n      else if(prepena==pena && preseikai==seikaimax) cout << \"=\" << team;\n      else cout << \",\" << team;\n      preseikai=seikaimax,prepena=pena;\n    }\n    cout << endl;\n  }\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\nusing namespace std;\n\nstruct team{\n\tint n, c, t, p;\n};\n\nbool operator<(const team team1, const team team2){\n\tbool rep;\n\tif(team1.c == team2.c){\n\t\trep = (team1.t == team2.t) ? team1.n > team2.n : team1.t < team2.t;\n\t}else{\n\t\trep = (team1.c > team2.c);\n\t}\n\treturn rep;\n}\n\nint main(){\n\tint M, T, P, R;\n\twhile( cin >> M >> T >> P >> R, M || T || P || R ){\n\t\tvector<team> teams(T);\n\t\tfor(int i = 0; i < T; i++){\n\t\t\tteams[i].n = i+1;\n\t\t\tteams[i].c = 0;\n\t\t\tteams[i].t = 0;\n\t\t\tteams[i].p = 0;\n\t\t}\n\t\tfor(int i = 0; i < R; i++){\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tif( j == 0 ){\n\t\t\t\tteams[t-1].c++;\n\t\t\t\tteams[t-1].t = m + 20 * teams[t-1].p;\n\t\t\t}else{\n\t\t\t\tteams[t-1].p++;\n\t\t\t}\n\t\t}\n\t\tsort(teams.begin(), teams.end());\n\t\tcout << teams[0].n;\n\t\tfor(int i = 1; i < T; i++){\n\t\t\tif( teams[i].c == teams[i-1].c && teams[i].t == teams[i-1].t ) cout << \"=\";\n\t\t\telse cout << \",\";\n\t\t\tcout << teams[i].n;\n\t\t}\n\t\tcout << endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include <map>\n#include <set>\n#include <list>\n#include <cmath>\n#include <queue>\n#include <stack>\n#include <cstdio>\n#include <string>\n#include <vector>\n#include <complex>\n#include <cstdlib>\n#include <cstring>\n#include <numeric>\n#include <sstream>\n#include <iostream>\n#include <algorithm>\n#include <functional>\n  \n#define mp       make_pair\n#define pb       push_back\n#define all(x)   (x).begin(),(x).end()\n#define rep(i,n) for(int i=0;i<(n);i++)\n  \nusing namespace std;\n  \ntypedef    long long          ll;\ntypedef    unsigned long long ull;\ntypedef    vector<bool>       vb;\ntypedef    vector<int>        vi;\ntypedef    vector<vb>         vvb;\ntypedef    vector<vi>         vvi;\ntypedef    pair<int,int>      pii;\n  \nconst int INF=1<<29;\nconst double EPS=1e-9;\n  \nconst int dx[]={1,0,-1,0,1,1,-1,-1},dy[]={0,-1,0,1,1,-1,-1,1};\n\nstruct Log {\n  int m, t, p, j;\n};\n\nstruct Point {\n  int t, ac, pena;\n};\n\nvoid solve(int M, int T, int P, int R, vector<Log> &L) {\n  sort(L.begin(), L.end(), [](Log a, Log b){return a.m < b.m;});\n  vector<vector<int>> AC(T, vector<int>(P, 0));\n  vector<vector<int>> pena(T, vector<int>(P, 0));\n  vector<Point> sc(T, (Point){0, 0, 0});\n  for (int i = 0; i < T; i++) {\n    sc[i].t = i;\n  }\n\n  for (int i = 0; i < L.size(); i++) {\n    if (!AC[L[i].t][L[i].p] && L[i].j == 0) {\n      sc[L[i].t].ac++;\n      sc[L[i].t].pena += L[i].m + pena[L[i].t][L[i].p];\n      AC[L[i].t][L[i].p] = 1;\n    } else {\n      pena[L[i].t][L[i].p] += 20;\n    }\n  }\n\n  sort(sc.begin(), sc.end(), [](Point a, Point b){\n    if (a.ac == b.ac) {\n      if (a.pena == b.pena) {\n        return a.t > b.t;\n      } else {\n        return a.pena < b.pena;\n      }\n    } else {\n      return a.ac > b.ac;\n    }\n  });\n\n  for (int i = 0; i < T; i++) {\n    cout << sc[i].t + 1;\n    if (i != T - 1) {\n      if (sc[i].ac == sc[i + 1].ac && sc[i].pena == sc[i + 1].pena) {\n        cout << \"=\";\n      } else {\n        cout << \",\";\n      }\n    }\n  }\n  cout << endl;\n}\n\n\nint main() {\n  int M, T, P, R;\n  while(cin >> M >> T >> P >> R, M) {\n    vector<Log> L;\n    for (int i = 0; i < R; i++) {\n      int m, t, p, j;\n      cin >> m >> t >> p >> j;\n      t--, p--;\n      L.push_back((Log){m, t, p, j});\n    }\n    solve(M, T, P, R, L);\n\n  }\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <cstdio>\n#include <iostream>\n#include <map>\n#include <cmath>\n#include <queue>\n#include <set>\n#include <sstream>\n#include <stack>\n#include <string>\n#include <vector>\n#include <stdlib.h>\n#include <stdio.h>\n#include <bitset>\n#include <cstring>\nusing namespace std;\n#define FOR(I,A,B) for(int I = (A); I < (B); ++I)\n#define CLR(mat) memset(mat, 0, sizeof(mat))\ntypedef long long ll;\ntypedef pair<ll, int> pll;\n\nint main()\n{\n  int M,T,P,R;\n  while(cin>>M>>T>>P>>R,M||T||P||R) {\n    int A[T+1],times[T+1],pena[T+1],miss[T+1][P+1];\n    CLR(A);CLR(times);CLR(pena);CLR(miss);\n    FOR(i,0,R) {\n      int m,t,p,j; cin >> m >> t >> p >> j;\n      if(j==0) {\n        A[t]++;\n        times[t] = m;\n        pena[t] += miss[t][p] * 20;\n      } else {\n        miss[t][p]++;\n      }\n    }\n    vector<pll> score(T);\n    FOR(i,1,T+1) {\n      ll s = A[i] * 10000000000 - pena[i] - times[i];\n      score[i-1] = pll(s, i);\n    }\n    sort(score.rbegin(), score.rend());\n    int j = 1;\n    ll now = score[0].first;\n    vector<vector<int> > ans(T+1);\n    FOR(i,0,T) {\n      if(now > score[i].first) {\n        j++;\n        now = score[i].first;\n      }\n      ans[j].push_back(score[i].second);\n    }\n    FOR(i,1,T+1) {\n      if((int)ans[i].size() > 0) {\n        if(i!=1) cout << ',';\n        vector<int> pr;\n        FOR(j,0,(int)ans[i].size()) {\n          pr.push_back(ans[i][j]);\n        }\n        sort(pr.rbegin(), pr.rend());\n        FOR(j,0,(int)pr.size()) {\n          if(j!=0 && j!=pr.size()) cout<<'=';\n          cout << pr[j];\n        }\n      }\n    }\n    cout << '\\n';\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n#include <string.h>\n#include <vector>\n#include <map>\nusing namespace std;\ntypedef pair<int,int> pii;\nint miss[66][20];\nint main(){\n    \n  int M,T,P,R;\n  int m,t,p,j;\n  int i,k;\n  vector<pii> team;\n  while(cin>>M>>T>>P>>R,M|T|P|R){\n    memset(miss,0,sizeof(miss));\n    team.clear();\n    for(i=0;i<=T;i++){\n      team.push_back(pii(0,0));\n    }\n    \n    for(i=0;i<R;i++){\n      cin>>m>>t>>p>>j;\n      if(j==0){\n\tteam[t].first++;\n\tteam[t].second+=(m+miss[t][p]*20);\n      }\n      else{\n\tmiss[t][p]++;\n      }\n    }\n    /*\n    for(i=0;i<T;i++){\n      cout<<i<<\":\"<<team[i].first<<\" : \"<<team[i].second<<endl;\n    }\n    */\n    int prei,tmpi,tmp;\n    int use[60];\n    memset(use,0,sizeof(use));\n    for(j=0;j<T;j++){\n      i=T;\n      while(use[i]==1)i--;\n      tmpi=i;\n      for(i=i-1;i>0;i--){\n\tif(use[i]==1) continue;\n\tif(team[i].first>team[tmpi].first){\n\t  tmpi=i;\n\t}\n\telse if(team[i].first==team[tmpi].first){\n\t  if(team[i].second<team[tmpi].second){\n\t    tmpi=i;\n\t  }\n\t}\n\t\n      }\n      use[tmpi]=1;\n      //cout<<\"[\"<<tmpi<<\"];\"<<team[tmpi].first<<\"---\"<<team[tmpi].second<<endl;\n      if(j==0) cout<<tmpi;\n      else if(team[tmpi].first==team[prei].first&&team[tmpi].second==team[prei].second){\n\tcout<<\"=\"<<tmpi;\n      }\n      else{\n\tcout<<\",\"<<tmpi;\n      }\n      prei=tmpi;\n    }\n    cout<<endl;\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#define N 2002\nusing namespace std;\nstruct team{\n  int tnum;\n  int correct;\n  int time;\n};\nint main(){\n  int m,t,p,r,im[N],it[N],ip[N],ij[N],incorrect,i,j;\n  struct team data[51];\n  while(1){\n    cin >> m >> t >> p >> r;\n    if(m==0&&t==0&&p==0&&r==0) break;\n    for(i=0;i<r;i++) cin >> im[i] >> it[i] >> ip[i] >> ij[i];\n    for(i=1;i<=t;i++){\n      data[i].tnum=i;\n      data[i].correct=0;\n      data[i].time=0;\n    }\n    for(i=0;i<r;i++){\n      if(ij[i]==0){\n\tdata[it[i]].correct++;\n      \tincorrect=0;\n\tfor(j=0;j<i;j++){\n\t  if(it[i]==it[j]&&ip[i]==ip[j]) incorrect++;\n\t}\n\tdata[it[i]].time=data[it[i]].time+incorrect*20+im[i];\n      }\n    }\n    for(i=0;i<=t;i++){\n      for(j=2;j<=t;j++){\n\tif(data[j].tnum>data[j-1].tnum) swap(data[j],data[j-1]);\n      }\n    }\n    for(i=0;i<=t;i++){\n      for(j=2;j<=t;j++){\n\tif(data[j].time<data[j-1].time) swap(data[j],data[j-1]);\n      }\n    }\n    for(i=0;i<=t;i++){\n      for(j=2;j<=t;j++){\n\tif(data[j].correct>data[j-1].correct) swap(data[j],data[j-1]);\n      }\n    }\n    for(i=1;i<t;i++){\n      cout << data[i].tnum;\n      if(data[i].correct==data[i+1].correct&&data[i].time==data[i+1].time)\n\tcout << '=';\n      else cout << ',';\n            if(i==t-1) cout << data[i].tnum;\n    }\n    //    cout << data[t].tnum;\n    cout << endl;\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\ntypedef pair<int, int> P;\ntypedef pair<int, pair<int, int>> S;\nint wa[51][11];\nint OK[11];\nvector<S> v;\n\n//比較関数\nbool comp(S lhs, S rhs){\n\tif(lhs.first != rhs.first){\n\t\treturn lhs.first < rhs.first;\n\t}\n\tif(lhs.second.first != rhs.second.first){\n\t\treturn lhs.second.first > rhs.second.first;\n\t}\n\tif(lhs.second.second != rhs.second.second){\n\t\treturn lhs.second.second < rhs.second.second;\n\t}\n}\n\nint main(){\nwhile(1){//start\n\t\n\tint M, T, P, R;\n\tcin >> M >> T >> P >> R;\n\tif(M == 0 and T == 0 and P == 0 and R == 0) break;\n\n\t//初期化\n\tv.resize(T);\n\tfor(int i = 0; i < T; i++){\n\t\tv[i].first = 0;\n\t\tv[i].second.first = 0;\n\t\tv[i].second.second = 0;\n\t}\n\tfor(int i = 0; i < 51; i++){\n\t\tfor(int j = 0; j < 11; j++) wa[i][j] = 0;\n\t}\n\tfor(int i = 0; i < 11; i ++) OK[i] = 0;\n\t\n\t\n\t//データを格納\n\tfor(int i = 0; i < R; i++){\n\t\tint m, t, p, j;\n\t\tcin >> m >> t >> p >> j;\n\n\t\tif(j == 0){\n\t\t\tv[t - 1].second.first += m + 20*wa[t][p]; \n\t\t\tOK[t-1] += 1;\n\t\t}\n\t\telse{\n\t\t\twa[t][p] += 1;\n\t\t}\n\t}\n\t\n\t//vectorにデータを入れる\n\tfor(int i = 1; i <= T; i++){\n\t\t//v.push_back(make_pair(OK[i-1], make_pair(sum_m, i)));\n\t\tv[i-1].first = OK[i-1];\n\t\tv[i-1].second.second = i;\n\t}\n\t\n\tsort(v.begin(), v.end(), comp);\n\treverse(v.begin(), v.end());\n\t\n\t//for(int i = 0; i < (int)v.size(); i++) cout << v[i].first << \" \" << v[i].second.first << \" \" << v[i].second.second << endl;\n\t\n\t\n\t//出力\n\tfor(int i = 1; i <= (int)v.size(); i++){\n\t\tcout << v[i-1].second.second;\n\t\tif(i == (int)v.size()) continue;\n\t\telse if(v[i-1].first == v[i].first and v[i-1].second.first == v[i].second.first) cout << \"=\";\n\t\telse cout << \",\";\n\t}\n\tcout << endl;\n\t//v.clear();\n}//end\t\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <utility>\n#include <algorithm>\nusing namespace std;\n\nint main()\n{\n\tint M, T, P, R, m, t, p, j;\n\twhile (cin >> M >> T >> P >> R, M || T || P || R) {\n\t\tvector< vector< pair<int, int> > > data(T + 1, vector< pair<int, int> >(P, pair<int, int>(0,0)));\n\t\tvector< tuple<int, int, int> > score(T + 1);\n\t\tfor (int i = 0; i < R; i++) {\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tif (j == 0) {\n\t\t\t\tdata[t][p].first = m + data[t][p].second * 20;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdata[t][p].second++;\n\t\t\t}\n\t\t}\n\t\tfor (int i = 1; i <= T; i++) {\n\t\t\tint sco = 0,pena = 0;\n\t\t\tfor (int j = 0; j < P; j++) {\n\t\t\t\tif (data[i][j].first) {\n\t\t\t\t\tsco--;\n\t\t\t\t\tpena += data[i][j].first;\n\t\t\t\t}\n\t\t\t}\n\t\t\tscore[i] = tuple<int, int, int>(sco,pena,-i);\n\t\t}\n\t\tsort(score.begin()+ 1, score.end());\n\t\ttuple<int, int, int> temp = score[1];\n\t\tcout << -get<2>(score[1]);\n\t\tfor (int i = 2; i <= T; i++) {\n\t\t\tif (get<0>(temp) == get<0>(score[i]) && get<1>(temp) == get<1>(score[i])) {\n\t\t\t\tcout << \"=\";\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcout << \",\";\n\t\t\t}\n\t\t\tcout << -get<2>(score[i]);\n\t\t\ttemp = score[i];\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <cstdlib>\n#include <cmath>\n#include <cstring>\n\n#include <iostream>\n#include <string>\n#include <algorithm>\n#include <vector>\n#include <queue>\n#include <stack>\n#include <map>\n#include <set>\n#include <unordered_map>\n#include <unordered_set>\n\n#include <complex>\n\n#include <functional>\n#include <cassert>\n\ntypedef long long ll;\nusing namespace std;\n\n#define debug(x) cerr << #x << \" = \" << (x) << endl;\n\n\n#define mod 1000000007 //1e9+7(prime number)\n#define INF 1000000000 //1e9\n#define LLINF 2000000000000000000LL //2e18\n#define SIZE 100010\n\nbool solve(){\n  int M,T,P,R;\n  int score[50] = {}, penalty[50] = {};\n  int subc[50][15] = {};\n  \n  scanf(\"%d%d%d%d\",&M,&T,&P,&R);\n  if(M == 0) return false;\n\n  for(int i=0;i<R;i++){\n    int m,t,p,j;\n\n    scanf(\"%d%d%d%d\",&m,&t,&p,&j);\n    t--;\n    \n    if(j == 0){ //AC\n      score[t] ++;\n      penalty[t] += subc[t][p] * 20 + m;\n    }else{\n      subc[t][p]++;\n    }\n  }\n\n  vector<pair<pair<int,int>, int > > standings;\n  \n  for(int i=0;i<T;i++){\n    standings.push_back({{score[i], -penalty[i]},i+1});\n  }\n\n  sort(standings.begin(), standings.end(),greater<pair<pair<int,int>,int > >());\n\n  for(int i=0;i<T;i++){\n    printf(\"%d\",standings[i].second);\n    \n    if(i < T-1){\n      if(standings[i].first == standings[i+1].first){\n        printf(\"=\");\n      }else{\n        printf(\",\");\n      }\n    }else{\n      printf(\"\\n\");\n    }\n    \n  }\n\n  return true;\n}\n\nint main(){\n\n  while(solve());\n  \n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <stdio.h>\n#include <algorithm>\n#include <vector>\n#include <utility>\nusing namespace std;\ntypedef pair<int,int> pi;\ntypedef pair<pi,int> ppii;\n#define F first\n#define S second\n#define PB push_back\nconst int N=1e2+10;\nbool cmp(ppii a,ppii b){\n    if(a.F.F==b.F.F){\n        if(a.F.S==b.F.S)return a.S>b.S;\n        return a.F.S<b.F.S;\n    }\n    return a.F.F>b.F.F;\n}\nint main(){\n    int m,t,p,q,a,b,c,d,add[N][N];\n    ppii ans[N];\n    while(true){\n        scanf(\"%d%d%d%d\",&m,&t,&p,&q);\n        if(m==0&&q==0&&t==0&&p==0)return 0;\n        for(int i=1;i<=t;i++)for(int j=1;j<=q;j++)add[i][j]=0;\n        for(int i=1;i<=t;i++)ans[i]={{0,0},i};\n        while(q--){\n            scanf(\"%d%d%d%d\",&a,&b,&c,&d);\n            if(d!=0)add[b][c]+=20;\n            else {\n                ans[b].F.S+=add[b][c]+a;\n                ans[b].F.F++;\n            }\n        }\n        sort(ans+1,ans+1+t,cmp);\n        printf(\"%d\",ans[1].S);\n        for(int i=2;i<=t;i++){\n            if(ans[i].F==ans[i-1].F)printf(\"=\");\n            else printf(\",\");\n            printf(\"%d\",ans[i].S);\n        }\n        printf(\"\\n\");    \n    }\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstdio>\n#include <algorithm>\n#include <iomanip>\n#include <cmath>\n#include <stack>\n#include <queue>\n#include <vector>\n\n#define pb(s) push_back(s)\n\n#define MAX_T 50\n#define MAX_P 10\n\nusing namespace std;\n\nstruct team{\n\tint unsolve[MAX_P+1];\n\tint solves, times, num;\n};\n\nbool comp1(const team& x, const team& y){ return x.solves > y.solves; }\nbool comp2(const team& x, const team& y){ return x.times < y.times; }\nbool comp3(const team& x, const team& y){ return x.num > y.num; }\n\nint M, T, P, R;\n\nteam teams[MAX_T+1];\n\nint main(){\n\twhile(1){\n\t\tcin >> M >> T >> P >> R;\n\t\tif(M == 0) break;\n\t\tfor (int i = 0; i < MAX_T+1; i++)\n\t\t{\n\t\t\tteams[i].solves = -1;\n\t\t\tteams[i].num = i;\n\t\t}\n\t\tfor (int i = 1; i <= T; i++)\n\t\t{\n\t\t\tteams[i].solves = 0;\n\t\t\tteams[i].times = 0;\n\t\t\tfor (int j = 0; j < MAX_P; j++)\n\t\t\t{\n\t\t\t\tteams[i].unsolve[j] = 0;\n\t\t\t}\n\t\t}\n\t\tfor (int i = 0; i < R; i++)\n\t\t{\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tif(j == 0){\n\t\t\t\tteams[t].solves++;\n\t\t\t\tteams[t].times += m;\n\t\t\t\tteams[t].times += 20*teams[t].unsolve[p];\n\t\t\t}else{\n\t\t\t\tteams[t].unsolve[p]++;\n\t\t\t}\n\t\t}\n\t\tsort(teams+1, teams+T+1, comp1);\n\t\tint j = 1;\n\t\tfor (int i = 1 ; i < T; i++)\n\t\t{\n\t\t\tif(teams[i].solves != teams[i+1].solves){\n\t\t\t\tsort(teams+j, teams+i+1, comp2);\n\t\t\t\tj = i+1;\n\t\t\t}\n\t\t\tif(i == T-1){\n\t\t\t\tsort(teams+j, teams+T+1, comp2);\n\t\t\t}\n\t\t}\n\t\tfor (int i = 1; i <= T ; i++)\n\t\t{\n\t\t\tcout << teams[i].times << endl;\n\t\t}\n\t\tj = 1;\n\t\tfor (int i = 1 ; i < T; i++)\n\t\t{\n\t\t\tif(teams[i].times != teams[i+1].times){\n\t\t\t\tsort(teams+j, teams+i+1, comp3);\n\t\t\t\tbool flag = false;\n\t\t\t\tfor (int k = j; k <= i ; k++)\n\t\t\t\t{\n\t\t\t\t\tif(flag) cout << \"=\" << teams[k].num;\n\t\t\t\t\telse{\n\t\t\t\t\t\tcout << teams[k].num;\n\t\t\t\t\t\tflag = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcout << \",\";\n\t\t\t\tj = i+1;\n\t\t\t}\n\t\t\tif(i == T-1){\n\t\t\t\tsort(teams+j, teams+T+1, comp3);\n\t\t\t\tbool flag = false;\n\t\t\t\tfor (int k = j; k <= i+1 ; k++)\n\t\t\t\t{\n\t\t\t\t\tif(flag) cout << \"=\" << teams[k].num;\n\t\t\t\t\telse{\n\t\t\t\t\t\tcout << teams[k].num;\n\t\t\t\t\t\tflag = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n\nusing namespace std;\n\nint main() {\n\tint M, T, P, R;\n\twhile (cin >> M >> T >> P >> R) {\n\t\tif (M == 0 && T == 0 && P == 0 && R == 0) {\n\t\t\tbreak;\n\t\t}\n\t\tint m, t, p, j;\n\t\tint tm[50][10] = {0};\n\t\tint sol[50][3] = {0};\n\n\t\tfor (int i = 0; i < T; i++) {\n\t\t\tsol[i][2] = i+1;\n\t\t}\n\n\t\tfor (int i = 0; i < R; i++) {\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tt -= 1;\n\t\t\tp -= 1;\n\t\t\tif (j != 0) {\n\t\t\t\ttm[t][p] += 20;\n\t\t\t} else {\n\t\t\t\ttm[t][p] += m;\n\t\t\t\tsol[t][0]++;\n\t\t\t\tsol[t][1] += tm[t][p];\n\t\t\t}\n\t\t}\n\n\t\t/*for (int i = 0; i < T; i++) {\n\t//\t\tcout << sol[i][0] << \" \" << endl;\n\t\t}*/\n\n\t\tfor (int i = T-1; i > 0; i--) {\n\t\t\tfor (int j = 0; j < i; j++) {\n\t\t\t\tif (sol[j][0] < sol[j+1][0]) {\n\t\t\t\t\tswap(sol[j][0], sol[j+1][0]);\n\t\t\t\t\tswap(sol[j][1], sol[j+1][1]);\n\t\t\t\t\tswap(sol[j][2], sol[j+1][2]);\n\t\t\t\t} else if (sol[j][0] == sol[j+1][0]) {\n\t\t\t\t\tif (sol[j][1] > sol[j+1][1]) {\n\t\t\t\t\t\tswap(sol[j][1], sol[j+1][1]);\n\t\t\t\t\t\tswap(sol[j][2], sol[j+1][2]);\n\t\t\t\t\t} else if (sol[j][1] == sol[j+1][1]) {\n\t\t\t\t\t\tif (sol[j][2] < sol[j+1][2]) {\n\t\t\t\t\t\t\tswap(sol[j][2], sol[j+1][2]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tfor (int i = 0; i < T; i++) {\n\t\t\tif (i != 0) {\n\t\t\t\tif (sol[i][0] < sol[i-1][0]) {\n\t\t\t\t\tcout << \",\" ;\n\t\t\t\t} else {\n\t\t\t\t\tif (sol[i][1] != sol[i-1][1]) {\n\t\t\t\t\t\tcout << \",\";\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcout << \"=\";\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tcout << sol[i][2];\n\t\t} \n\t\tcout << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<queue>\n#include<tuple>\n\nusing namespace std;\n\nsigned main(){\n\n   while(1){\n      int M, T, P, R;\n      cin>> M>> T>> P>> R;\n      if(!(M||T||P||R)) break;\n\n      int hoge[T][P];\n      fill((int*)hoge, (int*)hoge+T*P, 0);\n      for(int i=0; i<R; i++){\n         int time, team, prob, judge;\n         cin>> time>> team>> prob>> judge;\n         time++; team--; prob--;\n         if(judge==0){\n            hoge[team][prob]=0-hoge[team][prob]*20+time;\n         }else{\n            hoge[team][prob]--;\n         }\n      }\n      priority_queue<tuple<int, int, int>> Q;\n      for(int i=0; i<T; i++){\n         int ac=0, time=0;\n         for(int j=0; j<P; j++){\n            ac+=(hoge[i][j]>0);\n            time+=max(0, hoge[i][j]);\n         }\n         Q.push(make_tuple(ac, -time, i));\n      }\n\n      int s, t, u;\n      s=t=u=-1;\n      string answer;\n      for(int i=0; i<T; i++){\n         int ac, time, team;\n         tie(ac, time, team)=Q.top(); Q.pop();\n         if(i>0){\n            if(s==ac&&t==-time) answer+=\"=\";\n            else answer+=\",\";\n         }\n         answer+=to_string(team+1);\n         s=ac; t=-time; u=team;\n      }\n\n      cout<< answer<< endl;\n   }\n\n   return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n\nusing namespace std;\n\nstruct Score{\n\tint team_num;\n\tint ac=0;\n\tint time=0;\n\tint miss_tmp[20]={0};\n};\n\nbool asc(const Score& left, const Score& right) {\n\treturn left.ac == right.ac ? (left.time == right.time ?  left.team_num > right.team_num : left.time < right.time) :\n\t\t   left.ac > right.ac;\n}\n\nint main(){\n\twhile(1){\n\t\tint M, T, P, R; cin>>M>>T>>P>>R;\n\t\tif(!M && !T && !P && !R) break;\n\t\tvector <Score> score(T);\n\t\tfor(int i=0; i<T; i++) score[i].team_num = i;\n\n\t\tfor(int i=0; i<R; i++){\n\t\t\tint m, t, p, j; cin>>m>>t>>p>>j;\n\t\t\tt=t-1;//0オリジン\n\t\t\tif(j == 0){\n\t\t\t\tscore[t].ac++;\n\t\t\t\tscore[t].time += m+(score[t].miss_tmp[p]*20);\n\t\t\t} else{\n\t\t\t\tscore[t].miss_tmp[p]++;\n\t\t\t}\n\t\t}\n\t\tsort(score.begin(), score.end(), asc);\n\t\tfor(int i=0; i<T; i++){\n\t\t\tcout << score[i].team_num+1;\n\t\t\tif(i!=T-1){\n\t\t\t\tif(score[i].ac == score[i+1].ac && score[i].time == score[i+1].time) cout << \"=\";\n\t\t\t\telse cout << \",\";\n\t\t\t}\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n#define FOR(i,k,n) for(int i = (k); i < (n); i++)\n#define REP(i,n) FOR(i,0,n)\n#define ALL(a) begin(a),end(a)\n#define MS(m,v) memset(m,v,sizeof(m))\n#define D10  fixed<<setprecision(5)\ntypedef vector<int> vi;\ntypedef vector<string> vs;\ntypedef pair<short, short> P;\ntypedef complex<double> Point;\ntypedef long long ll;\nconst int INF = 114514810;\nconst int MOD = 100000007;\nconst double EPS = 1e-10;\nconst double PI = acos(-1.0);\nstruct edge\n{\n\tint from, to, cost;\n\tbool operator < (const edge& e) const { return cost < e.cost; }\n\tbool operator > (const edge& e) const { return cost > e.cost; }\n};\n\nint m, t, p, r;\nstruct data{ int sol, pe, team; };\nbool comp(const data& d1, const data& d2)\n{\n\tif (d1.sol != d2.sol) return d1.sol > d2.sol;\n\telse if (d1.pe != d2.pe) return d1.pe < d2.pe;\n\telse return d1.team>d2.team;\n}\n\nint main()\n{\n\twhile (cin >> m >> t >> p >> r,m)\n\t{\n\t\tvector<data> v;\n\t\tREP(i, t)\n\t\t{\n\t\t\tv.push_back(data{ 0, 0, i });\n\t\t}\n\t\tvector<vi> res(t, vi(p));\n\t\twhile (r--)\n\t\t{\n\t\t\tint a, b, c, d;\n\t\t\tcin >> a >> b >> c >> d;\n\t\t\tb--; c--;\n\t\t\tif (d == 0)\n\t\t\t{\n\t\t\t\tv[b].sol++;\n\t\t\t\tv[b].pe += a+res[b][c];\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tres[b][c] += 20;\n\t\t\t}\n\t\t}\n\n\t\tsort(ALL(v),comp);\n\n\t\tREP(i, t)\n\t\t{\n\t\t\tcout << v[i].team+1;\n\t\t\tif (i == t - 1) cout << endl;\n\t\t\telse if (v[i].sol == v[i + 1].sol&&v[i].pe == v[i + 1].pe) cout << \"=\";\n\t\t\telse cout << \",\";\n\t\t}\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<vector>\n#include<algorithm>\nusing namespace std;\nint m,t,p,r;\nstruct team{\nint id;\nint ac;\nint time[100];\nbool ok[200];\n};;\n\nint or(team a,team b){//aのほうが強ければ1,bなら0,同じなら2\n\nif(a.ac>b.ac)return 1;\nelse if(a.ac<b.ac)return 0;\nint at=0,bt=0;\nfor(int i=0;i<=p;i++){\nif(a.ok[i]==true)at+=a.time[i];\nif(b.ok[i]==true)bt+=b.time[i];\n}\nif(at<bt)return 1;\nelse if(at>bt)return 0;\nelse return 2;\n}\nint main(){\n\n\twhile(true){\n\tcin>>m>>t>>p>>r;\n\tif(m+t+p+r==0)break;\n\tvector<team>ta(0);\n\tta.resize(200);\n\n\tfor(int i=0;i<=t;i++)for(int j=0;j<200;j++)ta[i].time[j]=0,ta[i].ok[j]=0;\n\tfor(int i=0;i<=t;i++)ta[i].id=i,ta[i].ac=0;\n\tfor(int i=0;i<r;i++){\n\tint a,b,c,d;\n\tcin>>a>>b>>c>>d;//a:経過時間:bチーム番号c:問題番号j:0奈良正解それ以外不正解\n\tif(d==0){\n\tta[b].time[c]+=a;\n\tta[b].ac++;\n\tta[b].ok[c]=true;\n\t}\n\telse {\n\tta[b].time[c]+=20;\n\t}\n\t}\n\tta.erase(ta.begin());\n\tfor(int i=0;i<t;i++){\n\tfor(int j=0;j<t;j++){\n\tif(or(ta[i],ta[j])==1)swap(ta[i],ta[j]);\n\tif(or(ta[i],ta[j])==2&&ta[i].id>ta[j].id)swap(ta[i],ta[j]);\n\t}\n\t}\n\tfor(int i=0;i<t-1;i++){\n\tif(or(ta[i],ta[i+1])!=2)cout<<ta[i].id<<\",\";\n\telse cout<<ta[i].id<<\"=\";\n\t}\n\tcout<<ta[t-1].id<<endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\nstruct team{\n  int id;\n  int ac;\n  int tm;\n  int wa[10];\n  bool operator < (const team &right) const {\n    if(ac != right.ac) return ac > right.ac;\n    if(tm != right.tm) return tm < right.tm;\n    return id > right.id;\n  }\n  bool operator == (const team &right) const {\n    return ac == right.ac && tm == right.tm;\n  }\n};\n\nint main()\n{\n  int M, T, P, R;\n  while(cin >> M >> T >> P >> R, M || T || P || R){\n    team te[50];\n    for(int i = 0; i < T; i++){\n      te[i].id = i + 1;\n      te[i].ac = 0;\n      te[i].tm = 0;\n      memset(te[i].wa, 0, sizeof(te[i].wa));\n    }\n    while(R--){\n      int m, t, p, j;\n      cin >> m >> t >> p >> j;\n      t--, p--;\n      if(j == 0){\n\tte[t].ac++;\n\tte[t].tm += m + te[t].wa[p]*20;\n      } else {\n\tte[t].wa[p]++;\n      }\n    }\n    sort(te, te + T);\n    cout << te[0].id;\n    for(int i = 1; i < T; i++){\n      cout << (te[i] == te[i-1] ? \"=\":\",\") << te[i].id;\n    }\n    cout << endl;\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#define _USE_MATH_DEFINES \n#include <iomanip> \n#include <cmath>  \n#include<iostream>\n#include <fstream>\n#include<vector>\n#include<algorithm>\n#include<bitset>\n#include<map>\n#include<queue>\n#include<stack>\nusing namespace std;\ntypedef long long ll;\n#define repi(i,a,b) for(ll i = (ll)(a) ; i < (ll)(b) ; i++)\n#define repd(i,a,b) for(ll i = (ll)(a) ; i > (ll)(b) ; i--)\n#define rd(x) cin >> x\n#define wr(x)  cout << x\n#define wrln(x) cout << x << endl\n\nint M, T, P, R;\n\nint main() {\n\tstruct team {\n\t\tint number, point, time;\n\t\tbool operator<(const team& right) const {\n\t\t\t// ポイントは大きい方が↑、同じなら時間小さい方が↑；さらに番号大きい順だった。。。（ｙｋｙｍ）\n\t\t\tif (point == right.point && time == right.time) return number < right.number;\n\t\t\treturn point == right.point ? time > right.time : point < right.point;\n\t\t}\n\t};\n\twhile (1) {\n\t\tcin >> M >> T >> P >> R;\n\t\tif (M == 0 && T == 0 && P == 0 && R == 0) break;\n\t\tvector<team> teams;\n\t\tteam ttemp;\n\t\trepi(i, 0, T) {\n\t\t\tteam t;\n\t\t\tt.number = i, t.point = 0, t.time = 0;\n\t\t\tteams.push_back(t);\n\t\t}\n\t\tint mi, ti, pi, ji;//経過時間、チーム番号、問題番号、ジャッジの種類\n\t\tint timetemps[51][11] = {};//[チーム番号][問題番号]\n\t\trepi(i, 0, R) {\n\t\t\tcin >> mi >> ti >> pi >> ji;\n\t\t\tif (ji == 0) {\n\t\t\t\t//正解\n\t\t\t\tteams[ti - 1].point++;\n\t\t\t\tteams[ti - 1].time += (timetemps[ti - 1][pi] + mi);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t//不正解\n\t\t\t\ttimetemps[ti-1][pi] += 20;\n\t\t\t}\n\t\t}\n\t\tsort(teams.begin(), teams.end());\n\t\treverse(teams.begin(), teams.end());\n\t\trepi(i, 0, teams.size()) {\n\t\t\tif (i > 0) {\n\t\t\t\tif (teams[i].point == teams[i - 1].point && teams[i].time == teams[i - 1].time) {\n\t\t\t\t\twr(\"=\");\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\twr(\",\");\n\t\t\t\t}\n\t\t\t}\n\t\t\twr(teams[i].number + 1);\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<vector>\n#include<algorithm>\nusing namespace std;\n\nclass TM{\npublic:\n  int id, s, p;\n  TM(){}\n  TM(int id):id(id){ s = p = 0;}\n  bool operator < ( const TM &t) const{\n    if ( s == t.s ){\n      if ( p == t.p ) return id > t.id;\n      return p < t.p;\n    } return s > t.s;\n  }\n};\n\nint M, T, P, R;\nbool S[51][11];\nint X[51][11];\n\nvoid solve(){\n  int m, t, p, j;\n  TM B[51];\n  B[0] = TM(0); B[0].s = 100;\n  for ( int i = 1; i <= T; i++ ) B[i] = TM(i);\n\n  for ( int i = 0; i < R; i++ ){\n    cin >> m >> t >> p >> j;\n    if ( j == 0 ){\n      B[t].s++;\n      B[t].p += 20*X[t][p] + m;\n    } else {\n      X[t][p]++;\n    }\n  }\n  sort(B, B+(T+1));\n\n  for ( int i = 1; i <= T; i++ ) {\n    if ( i> 1 ){\n      if ( B[i].s == B[i-1].s && B[i].p == B[i-1].p ) cout << \"=\";\n      else cout << \",\";\n    }\n    cout << B[i].id;\n  }\n  cout << endl;\n\n}\n\nmain(){\n  while(1){\n    cin >> M >> T >> P >> R;\n    if ( M == 0 ) break;\n    for ( int i = 1; i <= T; i++ ){\n      for ( int j = 1; j <= P; j++ ){\n\tS[i][j] = false;\n\tX[i][j] = 0;\n      }\n    }\n    solve();\n  }\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\ntypedef pair<int, int> P;\nP info[51][11];\n//bool team[51];\nvector<P> v;\n\nmap<int, P> mp;\n//int D[51];\nvector<int> order;\n\n//自作の比較関数\nbool comp(P lhs, P rhs){\n\tif(lhs.first != rhs.first){\n\t\treturn lhs.first < rhs.first;\n\t}\n\tif(lhs.second != rhs.second){\n\t\treturn lhs.second > rhs.second;\n\t}\n}\n\nint main(){\nwhile(1){//start\t\n\t\n\t\n\tint M, T, P, R;\n\tcin >> M >> T >> P >> R;\n\tif(M == 0 and T == 0 and P == 0 and R == 0) break;\n\t\n\t//初期化\n\tfor(int i = 0; i < 51; i++){\n\t\tfor(int j = 0; j < 11; j++){\n\t\t\tinfo[i][j].first = 0;\n\t\t\tinfo[i][j].second = 0;\n\t\t}\n\t}\n\tbool team[51] = {0};\n\tint D[51] = {0};\n\tint OK[51] = {0};\n\t\n\t//データを格納\n\tfor(int i = 0; i < R; i++){\n\t\tint m, t, p, j;\n\t\tcin >> m >> t >> p >> j;\n\t\tteam[t] = true;\n\t\t\n\t\tif(j == 0){\n\t\t\tinfo[t][p].second = m + 20*info[t][p].first;\n\t\t\tOK[i] += 1;\n\t\t}\n\t\telse{\n\t\t\tinfo[t][p].first += 1;\n\t\t}\n\t}\n\t\n\t//vの内部はキーがチーム名(解いた数/合計時間)\n\tfor(int i = 1; i <= T; i++){\n\t\t\tint sum = 0, ok = 0;\n\t\t\tfor(int j = 0; j < 11; j++) sum += info[i][j].second;\n\t\t\t//for(int j = 0; j < 11; j++) if(info[i][j].second) ok += 1;\n\t\t\tint tmp = OK[i-1];\n\t\t\tv.push_back(make_pair(tmp, sum));\n\t\t\tmp[i] = make_pair(tmp, sum);\n\t}\n\t\n\tsort(v.begin(), v.end(), comp);\n\treverse(v.begin(), v.end());\n\t//debug\n\t//for(int i = 0; i < (int)v.size(); i++) cout << v[i].first << \" \" << v[i].second << endl;\n\t\n\t//重複カウンタを作成\n\tint d = 1;\n\tD[0] = 1;\n\tfor(int i = 1; i < (int)v.size(); i++){\n\t\tif(v[i-1].first == v[i].first and v[i-1].second == v[i].second){\n\t\t\tD[i] = d;\n\t\t}\n\t\telse{\n\t\t\td++;\n\t\t\tD[i] = d;\n\t\t}\n\t}\n\t\n\t//debug\n\t//for(int i = 0; i < (int)v.size(); i++) cout << D[i] << endl;\n\t\n\t//ソート結果にチーム名を割り当てる\n\tbool vis[51] = {false};\n\tfor(int i = 0; i < (int)v.size(); i++){\n\t\tfor(int j = (int)v.size(); 1 <= j; j--){\n\t\t\tif(v[i] == mp[j]){\n\t\t\t\tif(vis[j] == false){\n\t\t\t\t\torder.push_back(j);\n\t\t\t\t\tvis[j] = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//debug\n\t//for(int i = 0; i < (int)v.size(); i++) cout << order[i] << endl;\n\t\n\t//出力\n\t//まず重複数を記録する\n\tint num[51] = {0};\n\tfor(int i = 0; i < 51; i++) num[D[i]] += 1;\n\t\n\tstring ans = \"A\";\n\tint idx = 0;\n\tfor(int i = 1; i <= (int)order.size(); i++){\n\t\tif(num[i] == 0) break;\n\t\telse if(num[i] == 1){ \n\t\t\tans += to_string(order[idx]);\n\t\t\tidx++;\n\t\t}\n\t\telse{\n\t\t\tfor(int j = 0; j < num[i]; j++){\n\t\t\t\tif(j == num[i]-1) ans += to_string(order[idx]);\n\t\t\t\telse ans += to_string(order[idx]) + \"=\";\n\t\t\t\tidx++;\n\t\t\t}\n\t\t}\n\t\tans += \",\";\n\t}\n\t\n\tans.erase(ans.begin() + 0);\n\tans.erase(ans.end() - 1);\n\tcout << ans << endl;\n\t\n\t//初期化\n\tv.clear();\n\tmp.clear();\n\torder.clear();\n\t\n\t\n}//end\t\n\t\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstdio>\n#include <cmath>\n#include <cstdio>\n#include <cstring>\n#include <string>\n#include <vector>\n#include <set>\n#include <map>\n#include <stack>\n#include <queue>\n#include <algorithm>\n\n#define CH(N,A,B) (A<=N&&N<B)\n#define REP(i,a,b) for(int i=a;i<b;i++)\n#define RREP(i,a,b) for(int i=(b-1);a<=i;i--)\n#define F first\n#define S second\n\nusing namespace std;\n\nint M,T,P,R,m,t,p,j;\nint pen[55][15];\n\nint main() {\n  while(1){\n      cin>>M>>T>>P>>R;\n      if(M==0) break;\n      REP(i,0,T)REP(k,0,P) pen[i][k]=0;\n      vector< pair<pair<int,int>,int> > v(T); //<solv, pen>, id\n      REP(i,0,T) v[i].F.F = v[i].F.S = 0, v[i].S = (-1)*i;\n      REP(i,0,R){\n        cin>>m>>t>>p>>j;\n        if(j==0){\n            v[t-1].F.F++;\n            v[t-1].F.S += m + pen[t-1][p-1]*20;\n        }\n        else pen[t-1][p-1]++;\n      }\n      sort(v.begin(),v.end());\n\n      bool flag = true;\n      for(int sol=P; 0<=sol; sol--){\n        REP(i,0,v.size()){\n          if(v[i].F.F==sol){\n            if(flag){\n              cout<<(-1)*v[i].S+1;\n              flag = false;\n            }else{\n              if(i>0){\n                if(v[i].F.S==v[i-1].F.S && v[i].F.F==v[i-1].F.F) cout<<\"=\"<<(-1)*v[i].S+1;\n                else cout<<\",\"<<(-1)*v[i].S+1;\n              }else{\n                cout<<\",\"<<(-1)*v[i].S+1;\n              }\n            }\n          }\n        }\n      }\n      cout<<endl;\n  }\n\n\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <vector>\n#include <map>\n#include <set>\n#include <stack>\n#include <queue>\n#include <algorithm>\n#include <utility>\n#include <functional>\n#include <sstream>\n#include <iostream>\n#include <cstdio>\n#include <cmath>\n#include <cstdlib>\n#include <cctype>\n#include <string>\n#include <cstring>\n#include <ctime>\n#include <climits>\n#include <fstream>\n#include <list>\nusing namespace std;\ninline int toInt(string s) { int v; istringstream sin(s); sin >> v; return v;}\ntemplate<class T> inline string toStr(T x) { ostringstream sout; sout << x; return sout.str();}\ntypedef vector<int> vi;\ntypedef vector<vi>  vvi;\ntypedef vector<string> vs;\ntypedef pair<int, int> pii;\ntypedef long long ll;\n#define ALL(a) (a).begin(),(a).end()\n#define RALL(a) (a).rbegin(),(a).rend()\n#define FOR(i,a,b) for(int i=(a);i<=(b);++i)\n#define REP(i,n) FOR(i,0,(n)-1)\nconst double EPS = 1e-10;\nconst double PI = acos(-1.0);\nconst int INF = INT_MAX/10;\n\ntypedef vector<vvi> vvvi;\n\nstruct team {\n\tint n, q, t;\n\tteam() : q(0), t(0) {};\n\tbool operator<(const team &o)const {\n\t\treturn q!=o.q ? q<o.q : (t!=o.t ? o.t<t : n<o.n);\n\t}\n};\n\nint main() {\n\tint M, T, P, R;\n\twhile(cin >> M >> T >> P >> R, M) {\n\t\tvvvi data(T, vvi(2, vi(P, 0)));\n\t\tREP(i, R) {\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tif(j == 0) {\n\t\t\t\tdata[t-1][0][p-1] = 1;\n\t\t\t\tdata[t-1][1][p-1] += m;\n\t\t\t} else {\n\t\t\t\tdata[t-1][1][p-1] += 20;\n\t\t\t}\n\t\t}\n\t\tvector<team> teams(T);\n\t\tREP(i, T) {\n\t\t\tteams[i].n = i+1;\n\t\t\tteams[i].q = teams[i].t = 0;\n\t\t}\n\t\tREP(i, T) {\n\t\t\tREP(j, P) {\n\t\t\t\tif(data[i][0][j]) {\n\t\t\t\t\tteams[i].q++;\n\t\t\t\t\tteams[i].t += data[i][1][j];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tsort(RALL(teams));\n\t\tint curq = teams[0].q, curt = teams[0].t;\n\t\tcout << teams[0].n;\n\t\tFOR(i, 1, T-1) {\n\t\t\tif(curq == teams[i].q && curt == teams[i].t) {\n\t\t\t\tcout << \"=\";\n\t\t\t} else {\n\t\t\t\tcout << \",\";\n\t\t\t}\n\t\t\tcout << teams[i].n;\n\t\t\tcurq = teams[i].q;\n\t\t\tcurt = teams[i].t;\n\t\t}\n\t\tcout << endl;\n\t}\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n#define rep(i, n) for (int i = 0; i < (n); i++)\n#define REP(i, s, n) for (int i = (s); i < (n); i++)\n#define all(co) begin(co), end(co)\n\nint main() {\n\tint m,t,p,r;\nwhile (cin >> m >> t >> p >> r && m) {\n\tvector<vector<int>> v(t, vector<int>(p));\n\trep(i, r) {\n\t\tint m, t, p, j; cin >> m >> t >> p >> j;\n\t\tt--;\n\t\tif (j == 0) {\n\t\t\tif(v[t][p] == 0) v[t][p] = m;\n\t\t\telse v[t][p] = m + -v[t][p] * 20;\n\t\t}\n\t\telse v[t][p]--;\n\t}\n\tmap<int, vector<int>> rank;\n\trep(i, t) {\n\t\tint s = -accumulate(all(v[i]), 0);\n\t\tif(rank.count(s)) rank[s].push_back(i + 1);\n\t\telse rank.emplace(s, vector<int>{i+1});\n\t}\n\tfor(auto it = rank.begin(); it != --rank.end(); it++) {\n\t\trep(i, it->size() - 1) cout << it->at(i) << '=';\n\t\tcout << it->back();\n\t\tcout << ',';\n\t}\n\t{\n\t\tauto it = --rank.end();\n\t\trep(i, it->size() - 1) cout << it->at(i) << '=';\n\t\tcout << it->back();\n\t}\n\tcout << endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\ntypedef pair<long long, long long> P;\nvoid solve(int m, int t, int p, int r){\n\tint a[t][p][2];\n\tfor(int i=0; i<t; ++i)\n\t\tfor(int j=0; j<p; ++j)\n\t\t\tfor(int k=0; k<2; ++k)\n\t\t\t\ta[i][j][k] = 0;\n\tfor(int i=0; i<r; ++i){\n\t\tint b[4];\n\t\tfor(int j=0; j<4; ++j)\n\t\t\tcin >> b[j];\n\t\t--b[1];\n\t\t--b[2];\n\t\tif(b[3] == 0) a[b[1]][b[2]][0] = (b[0] == 0 ? -1 : b[0]);\n\t\telse ++a[b[1]][b[2]][1];\n\t}\n\tint c[t][2] = {{}};\n\tfor(int i=0; i<t; ++i)\n\t\tfor(int j=0; j<p; ++j)\n\t\t\tif(a[i][j][0] != 0){\n\t\t\t\t++c[i][0];\n\t\t\t\tc[i][1] += (a[i][j][0] == -1 ? 0 : a[i][j][0]) + a[i][j][1] * 20;\n\t\t\t}\n\tvector<P> v;\n\tfor(int i=0; i<t; ++i)\n\t\tv.push_back(P((p-c[i][0])*50000+c[i][1], 2*t-i-1));\n\tsort(v.begin(), v.end());\n\tcout << 2*t-v[0].second;\n\tfor(int i=1; i<t; ++i)\n\t\tcout << (v[i].first == v[i-1].first ? \"=\" : \",\") << 2*t-v[i].second;\n\tcout << \"\\n\";\n}\n\nint main(){\n//\tcin.tie(0);\n//\tios::sync_with_stdio(false);\n\twhile(1){\n\t\tint m, t, p, r;\n\t\tcin >> m >> t >> p >> r;\n\t\tif(m+t+p+r==0) return 0;\n\t\tsolve(m, t, p, r);\n\t}\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n#include <functional>\nusing namespace std;\n#define rep(i,n) for(int i=0;i<n;i++)\n#define pb push_back\ntypedef pair<int,int> P;\ntypedef pair<P,int> Q;\n#define fi first\n#define sc second\nint num[105],len[105];\nint cnt[105][105];\nint m,t,p,r;\n\nint main(){\n\twhile(1){\n\t\tcin>>m>>t>>p>>r;\n\t\tif(m == 0) return 0;\n\t\trep(i,105)rep(j,105){\n\t\t\tnum[i] = len[i] = cnt[i][j] = 0;\n\t\t}\n\t\trep(i,r){\n\t\t\tint a,b,c,d; cin>>a>>b>>c>>d; b--;\n\t\t\tif(d != 0){\n\t\t\t\tcnt[b][c]++;\n\t\t\t}\n\t\t\telse{\n\t\t\t\tnum[b]++;\n\t\t\t\tlen[b] += a+cnt[b][c]*20;\n\t\t\t}\n\t\t}\n\t\tvector<Q>vec;\n\t\trep(i,t) vec.push_back(Q(P(num[i],-len[i]),i));\n\t\tsort(vec.begin(),vec.end(),greater<Q>());\n\t\tfor(int i=0;i<vec.size();i++){\n\t\t\tcout << vec[i].sc+1 ;\n\t\t\tif(i != vec.size()-1){\n\t\t\t\tif(vec[i].fi == vec[i+1].fi) cout << \"=\" ;\n\t\t\t\telse cout << \",\" ;\n\t\t\t}\n\t\t}\n\t\tcout << endl;\n\t}\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n\nusing namespace std;\n\nint main() {\n    while (true) {\n        int m, t, p, r;\n        cin >> m >> t >> p >> r;\n        if (m == 0)break;\n\n        vector<vector<int>> solved(t, vector<int>(3));\n        for (int i = 0; i < t; i++)solved[i] = {0, 1145141919, i};\n        vector<vector<int>> penalty(t, vector<int>(p));\n        for (int i = 0; i < r; i++) {\n            int a, b, c, d;\n            cin >> a >> b >> c >> d;\n            b--;\n            c--;\n            if (d == 0) {\n                solved[b][0]++;\n                solved[b][1] -= a + penalty[b][c] * 20;\n            } else {\n                penalty[b][c]++;\n            }\n        }\n\n        sort(solved.begin(), solved.end(), greater<>());\n\n        for (int i = 0; i < t - 1; i++) {\n            cout << solved[i][2] + 1;\n            if (solved[i][0] != solved[i + 1][0] || solved[i][1] != solved[i + 1][1])cout << \",\";\n            else cout << \"=\";\n        }\n        cout << solved[t - 1][2] + 1 << endl;\n    }\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstdio>\n#include<algorithm>\n#include<cmath>\n#include<vector>\n#include<map>\n#include<string>\nusing namespace std;\nstruct team{int m;\n                   int t;\n                   int p;\n                   int j;\n                   };\nint A[100000];\nvector<int>G;\nint main(){\n\tint M,T,P,R;\n\tvector<pair<int,int> > sum;\n\tcin>>M;\n\tcin>>T;\n\tcin>>P;\n\tcin>>R;\n\tint ms[R];\n    team A[R];\n    for(int i=0;i<R;i++){\n\t\tscanf(\"%d%d%d%d\",&A[i].m,&A[i].t,&A[i].p,&A[i].j);\n\t}\n\tfor(int i=0;i<T;i++){\n\t\tsum.push_back(make_pair(0,i));\n\t}\n\tfor(int i=0;i<T;i++){\n\t\tms[i]=0;\n\t\tfor(int k=0;k<R;k++){\n\t\t\tif(A[k].t==i){\n\t\t\t\tms[i]+=A[i].m;\n\t\t\t\tif(A[k].j==0){\n\t\t\t\t\tsum[i].first+=1;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tsort(sum.begin(),sum.end());\n    for(int i=0;i<T;i++){\n    \tif(i>0){\n    \tif(sum[i]==sum[i-1]){\n    \t\tprintf(\"=\");\n    \t}\n    \telse{\n    \t\tprintf(\" \");\n    \t}\n    \t}\n    \tprintf(\"%d\",sum[i].second);\n    }\n   }"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nstruct STATE\n{\n\tint num;\n\tint time;\n\tint id;\n\tint pe[10];\n\t\n\tbool operator < (const STATE& t) const{\n\t\tif (num == t.num){\n\t\t\tif (time == t.time){\n\t\t\t\treturn id < t.id;\n\t\t\t}\n\t\t\treturn time > t.time;\n\t\t}\n\t\treturn num < t.num;\n\t}\n\t\n\tbool operator == (const STATE& t) const{\n\t\treturn num == t.num && time == t.time;\n\t}\n};\n\nSTATE team[50];\n\nvoid init()\n{\n\tfor (int i = 0; i < 50; i++){\n\t\tteam[i].num = team[i].time = 0;\n\t\tteam[i].id = i + 1;\n\t\tfor (int j = 0; j < 10; j++){\n\t\t\tteam[i].pe[j] = 0;\n\t\t}\n\t}\n}\n\nint main()\n{\n\tint M, T, P, R;\n\twhile (scanf(\"%d %d %d %d\", &M, &T, &P, &R), M + T + P + R){\n\t\tinit();\n\t\t\n\t\tfor (int i = 0; i < R; i++){\n\t\t\tint m, t, p, j;\n\t\t\tscanf(\"%d %d %d %d\", &m, &t, &p, &j);\n\t\t\tt--; p--;\n\t\t\t\n\t\t\tif (j == 0){\n\t\t\t\tteam[t].num++;\n\t\t\t\tteam[t].time += m + team[t].pe[p];\n\t\t\t}\n\t\t\telse if (j == 1){\n\t\t\t\tteam[t].pe[p] += 20;\n\t\t\t}\n\t\t}\n\t\t\n\t\tsort(team, team + T);\n\t\treverse(team, team + T);\n\t\t\n\t\tfor (int i = 0; i < T; i++){\n\t\t\tif (i){\n\t\t\t\tif (team[i] == team[i - 1]){\n\t\t\t\t\tcout << \"=\";\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tcout << \",\";\n\t\t\t\t}\n\t\t\t}\n\t\t\tcout << team[i].id;\n\t\t}\n\t\tcout << endl;\n\t}\n\t\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\n\nusing namespace std;\n\n#define PMAX 10\n#define TMAX 50\n#define INF 1000000000\n\nint main(){\n\n\tint M,T,P,R;\n\tint m,t,p,j;\n\tint accepted[TMAX+1];\n\tint wrong[TMAX+1][PMAX+1];\n\tint sumwrong[TMAX+1];\n\tint time[TMAX+1];\n\tint rank[TMAX];\n\n\twhile(1){\n\t\tcin>>M>>T>>P>>R;\n\t\tif(M==0&&T==0&&P==0&&R==0) break;\n\n\t\tfor(int i=1;i<=TMAX;i++){\n\t\t\taccepted[i]=0;\n\t\t\tsumwrong[i]=0;\n\t\t\ttime[i]=0;\n\t\t\tfor(int j=1;j<=PMAX;j++){\n\t\t\t\twrong[i][j]=0;\n\t\t\t}\n\t\t}\n\n\t\tfor(int i=0;i<R;i++){\n\t\t\tcin>>m>>t>>p>>j;\n\t\t\tif(j!=0) wrong[t][p]++;\n\t\t\telse{\n\t\t\t\taccepted[t]++;\n\t\t\t\ttime[t]+=m;\n\t\t\t\tsumwrong[t]+=wrong[t][p];\n\t\t\t}\n\t\t}\n\n\t\tfor(int i=1;i<=T;i++){\n\t\t\ttime[i]+=sumwrong[i]*20;\n\t\t}\n\n\t\tfor(int i=0;i<T;i++){\n\t\t\trank[i]=i+1;\n\t\t}\n\n\t\tfor(int i=0;i<T;i++){\n\t\t\tfor(int j=T-1;j>i;j--){\n\t\t\t\tif(accepted[rank[j]]>accepted[rank[j-1]]) swap(rank[j],rank[j-1]);\n\t\t\t}\n\t\t}\n\t\tfor(int i=0;i<T;i++){\n\t\t\tfor(int j=T-1;j>i;j--){\n\t\t\t\tif(accepted[rank[j]]==accepted[rank[j-1]]&&time[rank[j]]<time[rank[j-1]]) swap(rank[j],rank[j-1]);\n\t\t\t}\n\t\t}\n\t\tfor(int i=0;i<T;i++){\n\t\t\tfor(int j=T-1;j>i;j--){\n\t\t\t\tif(accepted[rank[j]]==accepted[rank[j-1]]&&time[rank[j]]==time[rank[j-1]]&&rank[j]>rank[j-1]) swap(rank[j],rank[j-1]);\n\t\t\t}\n\t\t}\n\n\t\tcout<<rank[0];\n\t\tfor(int i=1;i<T;i++){\n\t\t\tif(accepted[rank[i]]==accepted[rank[i-1]]&&time[rank[i]]==time[rank[i-1]]) cout<<\"=\"<<rank[i];\n\t\t\telse cout<<\",\"<<rank[i];\n\t\t}\n\t\tcout<<endl;\n\t}\n\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <array>\n#include <cstdint>\n#include <iostream>\n#include <vector>\n\nusing namespace std;\n\nstruct team_t {\n  array<uint32_t, 11> times;\n  array<bool, 11> corrects;\n  uint32_t id;\n  team_t() : times({}), corrects({}), id(0) {}\n\n  uint32_t get_corrects() {\n    uint32_t count = 0;\n    for (uint32_t i = 0; i < corrects.size(); i++) {\n      if (corrects[i]) {\n        count++;\n      }\n    }\n    return count++;\n  }\n\n  uint32_t get_penalty() {\n    uint32_t penalty = 0;\n    for (uint32_t i = 0; i < corrects.size(); i++) {\n      if (corrects[i]) {\n        penalty += times[i];\n      }\n    }\n    return penalty;\n  }\n\n  bool operator==(team_t &team) {\n    if (this->get_corrects() == team.get_corrects()) {\n      return this->get_penalty() == team.get_penalty();\n    }\n    return false;\n  }\n\n  bool operator<(team_t &team) {\n    if (this->get_corrects() == team.get_corrects()) {\n      if (this->get_penalty() == team.get_penalty()) {\n        return id > team.id;\n      } else {\n        return this->get_penalty() < team.get_penalty();\n      }\n    } else {\n      return team.get_corrects() < this->get_corrects();\n    }\n  }\n\n  void correct(uint32_t pid, uint32_t time) {\n    corrects[pid] = true;\n    times[pid] += time;\n  }\n\n  void println() {\n    cout << id << \" \" << get_corrects() << \" \" << get_penalty() << endl;\n  }\n\n  void wrong(uint32_t pid) { times[pid] += 20; }\n};\n\nint32_t main() {\n  while (true) {\n    uint32_t M, T, P, R;\n    cin >> M >> T >> P >> R;\n    if (M == 0) break;\n\n    vector<team_t> teams(T + 1);\n    for (uint32_t i = 0; i < teams.size(); i++) {\n      teams[i].id = i;\n    }\n\n    for (uint32_t i = 0; i < R; i++) {\n      uint32_t m, t, p, j;\n      cin >> m >> t >> p >> j;\n      if (j == 0) {\n        teams[t].correct(p, m);\n      } else {\n        teams[t].wrong(p);\n      }\n    }\n\n    sort(teams.begin() + 1, teams.begin() + T + 1);\n\n    for (uint32_t i = 1; i < T; i++) {\n      cout << teams[i].id;\n      if (teams[i] == teams[i + 1]) {\n        cout << \"=\";\n      } else {\n        cout << \",\";\n      }\n    }\n    cout << teams[T].id;\n    cout << endl;\n  }\n\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n#define FOR(i,a,b) for(int i=(a);i<(int)(b);i++)\n#define rep(i,n) FOR(i,0,n)\n#define pb push_back\n\nstruct Team {\n    int num=0, ac=0, pen=0;\n    int wa[15] = {0};\n};\n\nvoid solve(int M,int T,int P,int R) {\n    vector<Team> teams(T+2);\n    rep(i,T) teams[i].num=i+1;\n    rep(i,R) {\n        int time,tm, prg, msg;\n        cin>>time>>tm>>prg>>msg;\n        tm--; prg--;\n        if(msg == 1) {\n            teams[tm].wa[prg]++;\n        } else {\n            teams[tm].ac++;\n            teams[tm].pen += teams[tm].wa[prg] * 20 + time;\n        }\n    }\n    rep(i,T) rep(j,T-1) {\n        if(teams[j].ac < teams[j+1].ac) swap(teams[j], teams[j+1]);\n        if(teams[j].ac == teams[j+1].ac\n                and teams[j].pen > teams[j+1].pen) swap(teams[j], teams[j+1]);\n        if(teams[j].ac == teams[j+1].ac\n                and teams[j].pen == teams[j+1].pen\n                and teams[j].num < teams[j+1].num) swap(teams[j], teams[j+1]);\n    }\n\n    rep(i,T) rep(j,T-1) {\n        if(teams[j].ac < teams[j+1].ac) swap(teams[j], teams[j+1]);\n        if(teams[j].ac == teams[j+1].ac\n                and teams[j].pen > teams[j+1].pen) swap(teams[j], teams[j+1]);\n        if(teams[j].ac == teams[j+1].ac\n                and teams[j].pen == teams[j+1].pen\n                and teams[j].num < teams[j+1].num) swap(teams[j], teams[j+1]);\n    }\n\n    /*\n    for(auto& team : teams) {\n        cout << team.num << \" \" << team.ac << \" \" << team.pen << \"\\n\";\n    }\n    */\n    rep(i,T) {\n        cout << teams[i].num;\n        if(i+1 == T)\n            puts(\"\");\n        else if(teams[i].ac == teams[i+1].ac and teams[i].pen == teams[i+1].pen)\n            cout << '=';\n        else\n            cout << ',';\n    }\n}\n\nint main() {\n    int M,T,P,R;\n    while(cin>>M>>T>>P>>R, T) solve(M,T,P,R);\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "//#define _GRIBCXX_DEBUG\n#include <bits/stdc++.h>\nusing namespace std;\n\n// ?????¬???????????¬??????\n#pragma region MACRO\n#define P(x) cout << (x) << endl\n#define p(x) cout << (x)\n#define PED cout << \"\\n\"\n#define rep(i,n) for(int i=0; i<(int)n; ++i)\n#define REP(i,x,n) for(int i=x; i<(int)n; ++i)\n#define repi(i,n) for(int i=0; i<=(int)n; ++i)\n#define REPI(i,x,n) for(int i=x; i<=(int)n; ++i)\n#define ILP while(true)\n#define FOR(i,c) for(__typeof((c).begin())!=(c).begin(); i!=(c).end(); ++i)\n#define ALL(c) (c).begin(), (c).end()\n#define mp make_pair\n#pragma endregion\n\n// ???\n#pragma region TYPE_DEF\ntypedef long long ll;\ntypedef pair<int, int> pii;\ntypedef pair<string, string> pss;\ntypedef pair<string, int> psi;\ntypedef pair<int, string> pis;\ntypedef vector<int> vi;\ntypedef vector<double> vd;\ntypedef vector<long double> vld;\ntypedef vector<long> vl;\ntypedef vector<long long> vll;\ntypedef vector<string> vs;\n#pragma endregion\n\n// Effective std\n#pragma region ESTD\ntemplate<typename C, typename T> int count(C& c, T t) { return count(ALL(c), t); }\ntemplate<typename C, typename F> int count_if(C& c, F f) { return count_if(ALL(c), f); }\ntemplate<typename C, typename T> void erase(C& c, T t) { remove(ALL(c), t), c.end(); }\ntemplate<typename C> void remove(vector<C>& c, unsigned int index) { c.erase(c.begin()+index); }\ntemplate<typename C, typename T, typename U> void replace(C& c, T t, U u) { replace(ALL(c), t, u); }\ntemplate<typename C, typename F, typename U> void replace_if(C& c, F f, U u) { (ALL(c), f, u); }\ntemplate<typename C> void reverse(C& c) { reverse(ALL(c)); }\ntemplate<typename C> void sort(C& c) { sort(ALL(c)); }\ntemplate<typename C, typename Pred> void sort(C& c, Pred p) { sort(ALL(c), p); }\n#pragma endregion\n\n// ?????°\n#pragma region CONST_VAL\nconstexpr int PI = (2*acos(0.0));\nconstexpr int EPS = (1e-9);\nconstexpr int MOD = (int)(1e9+7);\nconstexpr int INF = 100000000;\n#pragma endregion\n\nstruct Team {\n    int id, score, time, wrong[10];\n};\n\nint main()\n{\n    int M, T, P, R;\n    while(cin>>M>>T>>P>>R, M) {\n        Team team[50]{};\n        rep(i,T) team[i].id = i + 1;\n        rep(i, R) {\n            int m, t, p, j;\n            cin >> m >> t >> p >> j;\n            t--;\n            p--;\n            if(j) team[t].wrong[p]++;\n            else {\n                team[t].score++;\n                team[t].time += m + 20 * team[t].wrong[p];\n            }\n        }\n        sort(team, team+T, [](Team a, Team b) {\n            if (a.score != b.score) return a.score > b.score;\n            if(a.time != b.time) return a.time < b.time;\n            return a.id > b.id;\n        });\n        cout << team[0].id;\n        for(int i=1; i<T; ++i) {\n            if(team[i-1].score==team[i].score&&team[i-1].time==team[i].time)\n                cout << \"=\";\n            else cout << \",\";\n            cout << team[i].id;\n        }\n        cout << endl;\n    }\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <string>\n#include <algorithm>\nusing namespace std;\n\n#define SUBMIT_MAX 2000\n\n#define TEAM_MAX 50\n#define PROBLEM_MAX 10\n\nvoid score_sort(int score[TEAM_MAX][3], int T) {\n    int temp[3];\n    for(int i=0; i<T; i++) {\n        for (int j=T-1; j>i; j--) {\n            if (score[j-1][1] < score[j][1] ||\n                (score[j-1][1] == score[j][1] && score[j-1][2] > score[j][2]) ||\n                (score[j-1][1] == score[j][1] && score[j-1][2] == score[j][2] && score[j-1][0] < score[j][0])\n                ) {\n                temp[0] = score[j][0];\n                temp[1] = score[j][1];\n                temp[2] = score[j][2];\n                score[j][0] = score[j-1][0];\n                score[j][1] = score[j-1][1];\n                score[j][2] = score[j-1][2];\n                score[j-1][0] = temp[0];\n                score[j-1][1] = temp[1];\n                score[j-1][2] = temp[2];\n            }\n        }\n    }\n}\n\nint main(void) {\n    int M, T, P, R;\n    int m[SUBMIT_MAX], t[SUBMIT_MAX], p[SUBMIT_MAX], j[SUBMIT_MAX];\n    int score[TEAM_MAX][3];\n    int accepted_flag[TEAM_MAX][PROBLEM_MAX];\n    while (cin >> M >> T >> P >> R, M && T && P) {\n        for(int i=0; i<T; i++) {\n            score[i][0] = i+1;\n            score[i][1] = 0;\n            score[i][2] = 0;\n            for(int j=0; j<P; j++) {\n                accepted_flag[i][j] = 0;\n            }\n        }\n        for(int i=0; i<R; i++) {\n            cin >> m[i] >> t[i] >> p[i] >> j[i];\n            if (i == R-1) {\n                //cout << m[R-1] << \" \" << t[R-1] << \" \" << p[R-1] << \" \" << j[R-1] << endl;\n            }\n            t[i]--;\n            p[i]--;\n        }\n        for(int i=0; i<R; i++) {\n            if (j[i] == 0) {\n                accepted_flag[t[i]][p[i]] = 1;\n            }\n        }\n        for(int i=0; i<R; i++) {\n            if (j[i] != 0 && accepted_flag[t[i]][p[i]]) {\n                score[t[i]][2] += 20;\n            }\n            if (j[i] == 0) {\n                score[t[i]][2] += m[i];\n                score[t[i]][1] += 1;\n            }\n        }\n        score_sort(score, T);\n        for(int i=0; i<T; i++) {\n            //cout << \"[\" << score[i][0] << \" \" << score[i][1] << \" \" << score[i][2] << \"]\" << endl;\n        }\n        for(int tmp1, tmp2, i=0; i<T; i++) {\n            if (i!=0) {\n                if (tmp1 == score[i][1] && tmp2 == score[i][2]) { cout << \"=\"; } else { cout << \",\"; }\n            }\n            cout << score[i][0];\n            tmp1 = score[i][1];\n            tmp2 = score[i][2];\n        }\n        cout << endl;\n        //sort(score, score + T, [](const int a[3], const int b[3]) { return a[0] > b[0];});\n    }\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <cmath>\n#include <climits>\n#include <cstdio>\n#include <cstdlib>\n#include <cstring>\n#include <fstream>\n#include <iostream>\n#include <list>\n#include <map>\n#include <queue>\n#include <set>\n#include <sstream>\n#include <stack>\n#include <string>\n#include <vector>\n#include <cassert>\n#include <functional>\n\nusing namespace std;\n\n#define LOG(...) printf(__VA_ARGS__)\n//#define LOG(...)\n#define FOR(i,a,b) for(int i=(int)(a);i<(int)(b);++i)\n#define REP(i,n) for(int i=0;i<(int)(n);++i)\n#define ALL(a) (a).begin(),(a).end()\n#define RALL(a) (a).rbegin(),(a).rend()\n#define EXIST(s,e) ((s).find(e)!=(s).end())\n#define SORT(c) sort((c).begin(),(c).end())\n#define RSORT(c) sort((c).rbegin(),(c).rend())\n#define CLR(a) memset((a), 0 ,sizeof(a))\n\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef vector<bool> vb;\ntypedef vector<int> vi;\ntypedef vector<ll> vll;\ntypedef vector<vb> vvb;\ntypedef vector<vi> vvi;\ntypedef vector<vll> vvll;\ntypedef pair<int, int> pii;\ntypedef pair<ll, ll> pll;\n\nconst int dx[] = { -1, 0, 1, 0 }; const int dy[] = { 0, 1, 0, -1 };\n\nstruct UnionFind {\n\tvector<int> v;\n\tUnionFind(int n) : v(n) { for (int i = 0; i < n; i++) v[i] = i; }\n\tint  find(int x) { return v[x] == x ? x : v[x] = find(v[x]); }\n\tvoid unite(int x, int y) { v[find(x)] = find(y); }\n};\n\nint main() {\n\tint m, t, p, r;\n\twhile (cin >> m >> t >> p >> r, m) {\n\t\tvector<pair<int, pii>> score(t,pair<int,pii>(0,pii(0,0)));//point time team\n\t\tREP(i, t)\n\t\t\tscore[i].second.second = -(i + 1);\n\t\tvvi pena(t, vi(p, 0));//team pro\n\t\tREP(j, r) {\n\t\t\tint time, t2, p2, ju;\n\t\t\tcin >> time >> t2 >> p2 >> ju;\n\t\t\tt2--;\n\t\t\tp2--;\n\t\t\tif (ju == 0) {\n\t\t\t\tscore[t2].first--;\n\t\t\t\tscore[t2].second.first += pena[t2][p2] * 20 + time;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tpena[t2][p2]++;\n\t\t\t}\n\t\t}\n\t\tSORT(score);\n\t\tint ac;\n\t\tint ti;\n\t\tREP(i, t) {\n\t\t\tif (i == 0) {\n\t\t\t\tac = score[i].first;\n\t\t\t\tti = score[i].second.first;\n\t\t\t\tcout << -score[i].second.second;\n\t\t\t}else{\n\t\t\t\tif (ac == score[i].first&& ti == score[i].second.first)\n\t\t\t\t\tcout << \"=\";\n\t\t\t\telse\n\t\t\t\t\tcout << \",\";\n\t\t\t\tcout<< -score[i].second.second;\n\t\t\t\tac = score[i].first;\n\t\t\t\tti = score[i].second.first;\n\t\t\t}\n\t\t}\n\t\tcout << endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "// clang-format off\n#include <bits/stdc++.h>\n#define int long long\n#define main signed main()\n// #define main int main()\n#define loop(i, a, n) for (int i = (a); i < (n); i++)\n#define rep(i, n) loop(i, 0, n)\n#define all(v) (v).begin(), (v).end()\n#define rall(v) (v).rbegin(), (v).rend()\n#define prec(n) fixed << setprecision(n)\n#define stlice(from, to) substr(from, (to) - (from) + 1)\n#define pb push_back\n#define mp make_pair\n#define mt make_tuple\n#define fi first\n#define se second\nusing namespace std;\nusing pii = pair<int, int>;\nusing vi = vector<int>;\nusing vd = vector<double>;\nusing vc = vector<char>;\nusing vb = vector<bool>;\nusing vs = vector<string>;\nusing vpii = vector<pii>;\nusing vvi = vector<vi>;\nusing vvb = vector<vb>;\nusing vvpii = vector<vpii>;\ntemplate<typename A> using fn = function<A>;\nconstexpr int INF = sizeof(int) == sizeof(long long) ? 1000000000000000000LL : 1000000000;\nconstexpr int MOD = 1000000007;\nconstexpr double PI = acos(-1);\ntemplate<typename A, typename B> bool cmin(A &a, const B &b) { return a > b ? (a = b, true) : false; }\ntemplate<typename A, typename B> bool cmax(A &a, const B &b) { return a < b ? (a = b, true) : false; }\nconstexpr bool odd(const int &n) { return n & 1; }\nconstexpr bool even(const int &n) { return !odd(n); }\nvoid solve();\nmain { solve(); return 0; }\n// clang-format on\n\nstruct probst {\n  int failed  = 0;\n  int time    = 0;\n  bool solved = 0;\n};\n\nvoid solve() {\n  int M, T, P, R;\n  while (cin >> M >> T >> P >> R, M) {\n    using vps = vector<probst>;\n    vector<vps> v(T, vps(P));\n    while (R--) {\n      int m, t, p, j;\n      cin >> m >> t >> p >> j;\n      t--;\n      p--;\n      probst ps = v[t][p];\n      ps.solved |= !j;\n      ps.failed += !!j;\n      ps.time = ps.solved ? m : ps.time;\n      v[t][p] = ps;\n    }\n    vpii w(v.size());\n    rep(i, v.size()) {\n      int s = 0;\n      rep(j, P) {\n        probst ps = v[i][j];\n        if (ps.solved) {\n          s += 50000 - ps.time - ps.failed * 20;\n        }\n      }\n      w[i].fi = s;\n      w[i].se = i + 1;\n    }\n    sort(rall(w), [](pii a, pii b) {\n      if (a.fi < b.fi) return true;\n      if (a.fi > b.fi) return false;\n      if (a.se < b.se) return true;\n      if (a.se > b.se) return false;\n    });\n    cout << w[0].se;\n    loop(i, 1, w.size()) {\n      cout << (w[i].fi == w[i - 1].fi ? '=' : ',');\n      cout << w[i].se;\n    }\n    cout << endl;\n  }\n}"
  },
  {
    "language": "C++",
    "code": "#define _CRT_SECURE_NO_WARNINGS\n\n#include<fstream>\n#include<iostream>\n#include <stdio.h>\n#include <functional>\n#include<string>\n#include<iomanip>\n#include<list>\n#include<math.h>\n#include<stack>\n#include<queue>\n#include<vector>\n#include<algorithm>\n#include<utility>\n\nusing namespace std;\n\nstring x(string s, const string cs, const string se) {\n\tint pos = 0;\n\twhile ((pos = s.find_first_of(se)) != string::npos) {\n\t\ts.replace(pos, 1, cs);\n\t}\n\treturn s;\n}\n\nstring y(string a) {\n\tint pos4 = 0, pos9 = 0;\n\ta = x(a, \"3\", \"5\");\n\ta = x(a, \"5\", \"6\");\n\ta = x(a, \"6\", \"7\");\n\ta = x(a, \"7\", \"8\");\n\tint pos = a.length();\n\tif ((pos4 = a.find_first_of(\"4\")) != string::npos && (pos9 = a.find_first_of(\"9\")) != string::npos)\n\t{\n\t\tif (pos4 > pos9) {//4>9\n\t\t\ta = a.replace(pos9, 1, \"7\");\n\t\t\tpos = pos9 + 1;\n\t\t}\n\t\telse {\n\t\t\ta = a.replace(pos4, 1, \"3\");\n\t\t\tpos = pos4 + 1;\n\t\t}\n\t}\n\telse if ((pos4 = a.find_first_of(\"4\")) != string::npos) {\n\t\ta = a.replace(pos4, 1, \"3\");\n\t\tpos = pos4 + 1;\n\t}\n\telse if ((pos9 = a.find_first_of(\"9\")) != string::npos) {\n\t\ta = a.replace(pos9, 1, \"7\");\n\t\tpos = pos9 + 1;\n\t}\n\twhile (pos != a.length()) {\n\t\ta = a.replace(pos, 1, \"7\");\n\t\tpos++;\n\t}\n\treturn a;\n}\n\nint n;\nint m;\nint aji[100000];\n\nint saiki(){\n\treturn 0;\n}\n\nint main(){\n\tint m, t, p, r;\n\twhile (cin >> m >> t >> p >> r && !(m == 0 && t == 0 && p == 0 && r == 0)){\n\t\tvector<pair<int, pair<int, int>>> juni; // テヲツュツ」ティツァツ」テヲツ閉ー テヲツ卍づゥツ鳴?テ」ツδ?」ツδシテ」ツδ?・ツ青?テァツュツ氾」ツ?暗」ツ?ョテ」ツ?淌」ツつ?」ツ?ョvector)\n\t\tint teamscore[50]; // テ・ツ青?」ツδ?」ツδシテ」ツδ?」ツ?ョテ」ツつケテ」ツつウテ」ツつ「\n\t\tint teamsecond[50]; // テ・ツ青?」ツδ?」ツδシテ」ツδ?」ツ?ョテヲツ卍づゥツ鳴?\n\t\tint teamincorr[50][2000]; // テ・ツ青?」ツδ?」ツδシテ」ツδ?・ツ青?・ツ閉湘ゥツ。ツ古」ツ?ョテゥツ鳴禿ゥツ?陛」ツ?暗」ツ?淌・ツ崢榲ヲツ閉ー\n\t\tint teamincorrcnt[50]; // テ・ツ青?」ツδ?」ツδシテ」ツδ?」ツ?ョテヲツュツ」ティツァツ」テ」ツ?療」ツ?淌・ツ閉湘ゥツ。ツ古」ツ?ョテゥツ鳴禿ゥツ?陛」ツ?暗」ツ?淌・ツ崢榲ヲツ閉ー\n\t\tfor (int i = 0; i < 50; i++) {\n\t\t\tteamscore[i] = 0;\n\t\t\tteamsecond[i] = 1000000;\n\t\t\tteamincorrcnt[i] = 0;\n\t\t\tfor (int j = 0; j < 2000; j++) {\n\t\t\t\tteamincorr[i][j] = 0;\n\t\t\t}\n\t\t}\n\t\tfor (int i = 0; i < r; i++) {\n\t\t\tint mk, tk, pk, jk;\n\t\t\tcin >> mk >> tk >> pk >> jk;\n\t\t\tif (jk == 0) { // テヲツュツ」ティツァツ」\n\t\t\t\tteamscore[tk - 1]++; // テヲツュツ」ティツァツ」テヲツ閉ーテ」ツつ津・ツ「ツ療」ツつ?」ツ??\n\t\t\t\tteamincorrcnt[tk - 1] += teamincorr[tk - 1][pk];\n\t\t\t\tteamsecond[tk - 1] = 100000 - (mk + 20 * teamincorrcnt[tk - 1]);\n\t\t\t}\n\t\t\telse { // テゥツ鳴禿ゥツ?陛」ツ??\n\t\t\t\tteamincorr[tk - 1][pk]++;\n\t\t\t}\n\t\t}\n\t\tfor (int i = 0; i < t; i++) {\n\t\t\tjuni.push_back(make_pair(teamscore[i], make_pair(teamsecond[i], i + 1)));\n\t\t}\n\t\tsort(juni.begin(), juni.end());\n\n\t\tint score = -1;\n\t\tint jikan = -1;\n\t\tfor (int i = t - 1; i >= 0; i--) {\n\t\t\tif (i != t - 1) {\n\t\t\t\tif (score == juni[i].first && jikan == juni[i].second.first) {\n\t\t\t\t\tcout << \"=\";\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tcout << \",\";\n\t\t\t\t}\n\t\t\t}\n\t\t\tcout << juni[i].second.second;\n\t\t\tscore = juni[i].first;\n\t\t\tjikan = juni[i].second.first;\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n//#include<fstream>\n#include<vector>\n\nusing namespace std;\n\nint main(){\n\t\n\t//ifstream fin;\n\t//fin.open(\"input.txt\");\n\n\tint M, T, P, R;//input\n\tint m, t, p, j;//input\n\n\tint time[50];\t//経過時間\n\tint solve[50];\t//正解数\n\tint miss[50][10];\t//間違えた数\n\tint count;\n\tvector<int> v,s;//解けた問題数ごとに...\n\t\n\twhile(true){\n\t\tfor (int i = 0; i < 50; i++){//初期化\n\t\t\tfor (int k = 0; k < 10; k++)miss[i][k] = 0;\n\t\t\ttime[i] = solve[i] = 0;\n\t\t}\n\t\tM = T = P = R = m = t = p = j = 0;\n\n\t\tcin >> M >> T >> P >> R;\n\t\tif (M == 0)break;\n\n\t\twhile (R > 0){//結果計算\n\t\t\tR--;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tt--;\n\t\t\tif (j == 0){\n\t\t\t\ttime[t] += m;\n\t\t\t\ttime[t] += miss[t][p] * 20;\n\t\t\t\tsolve[t]++;\n\t\t\t}\n\t\t\telse miss[t][p]++;\n\t\t}\n\t\t/*\n\t\tfor (int i = 0; i < T; i++){\n\t\t\tcout << \"チーム\" << i+1 << endl << \" 経過時間：\" << time[i] << \" 回答数：\" << solve[i];\n\t\t\tcout << endl;\n\t\t}\n\t\t*/\n\n\t\t//以下ソート\n\t\tcount = 0;//初期化\n\t\tfor (int i = 0; i < T; i++)if (count < solve[i])count = solve[i];\n\n\n\t\twhile (count >= 0){\n\t\t\tfor (int i = 0; i < T; i++)if (count == solve[i]){\n\t\t\t\tv.push_back(i);//countだけ解けたチームを記憶\n\t\t\t\ts.push_back(time[i]);//解けたチームの時間を記憶\n\t\t\t}\n\n\t\t\t//バブルソート\n\t\t\tif (s.size() > 1){\n\t\t\t\tfor (int i = 0; i < (int)v.size() - 1; i++)\n\t\t\t\t\tfor (int k = (int)v.size() - 1; k > i; k--){\n\t\t\t\t\t\tif (s[k] > s[k - 1]){\n\t\t\t\t\t\t\tint tmp = s[k];\n\t\t\t\t\t\t\tint temp = v[k];\n\n\t\t\t\t\t\t\ts[k] = s[k - 1];\n\t\t\t\t\t\t\tv[k] = v[k - 1];\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\ts[k - 1] = tmp;\n\t\t\t\t\t\t\tv[k - 1] = temp;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t}\n\t\t\tif (v.size() > 1){\n\t\t\t\tfor (int i = 0; i < (int)v.size() - 1; i++)\n\t\t\t\t\tfor (int k = (int)v.size() - 1; k > i; k--)\n\t\t\t\t\t\tif (s[k] == s[k - 1] && v[k] < v[k - 1]){\n\t\t\t\t\t\t\tint tmp = v[k];\n\t\t\t\t\t\t\tv[k] = v[k - 1];\n\t\t\t\t\t\t\tv[k - 1] = tmp;\n\t\t\t\t\t\t}\n\t\t\t}\n\t\t\t//ソート終了\n\n\t\t\t//output\n\t\t\twhile (v.size() > 2){\n\t\t\t\tif (s[v.size() - 1] == s[v.size() - 2] || s[v.size()] == s[v.size() - 1])\n\t\t\t\t\tcout << v.back()+1 << '=';\n\t\t\t\telse cout << v.back()+1 << \",\";\n\t\t\t\tv.pop_back();\n\t\t\t}\n\t\t\tif (v.size() == 2){//最後の二つだけ例外処理\n\n\t\t\t\tif (s[1] == s[0])\n\t\t\t\t\t cout << v.back()+1 << \"=\";\n\t\t\t\telse cout << v.back()+1 << ',';\n\t\t\t\t\tv.pop_back();\n\t\t\t\t\tcout << v.back()+1;\n\t\t\t\t\tif (s[v.size()-1] != 0)cout << ',';\n\t\t\t\t\tv.pop_back();\n\t\t\t}\n\t\t\tif (v.size() == 1){\n\t\t\t\tcout << v.back()+1 << ',';\n\t\t\t\tv.pop_back();\n\t\t\t}\n\t\t\tv.clear();\n\t\t\ts.clear();\n\t\t\tcount--;\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <iomanip>\n#include <cstdio>\n#include <string>\n#include <cstring>\n#include <deque>\n#include <list>\n#include <queue>\n#include <stack>\n#include <vector>\n#include <utility>\n#include <algorithm>\n#include <map>\n#include <set>\n#include <complex>\n#include <cmath>\n#include <limits>\n#include <climits>\n#include <ctime>\n#include <cassert>\nusing namespace std;\n\n#define rep(i,a,n) for(int (i)=(a); (i)<(n); (i)++)\n#define repq(i,a,n) for(int (i)=(a); (i)<=(n); (i)++)\n#define repr(i,a,n) for(int (i)=(a); (i)>=(n); (i)--)\n#define all(v) begin(v), end(v)\n#define pb(a) push_back(a)\n#define fr first\n#define sc second\n#define INF 2000000000\n#define int long long int\n\n#define X real()\n#define Y imag()\n#define EPS (1e-10)\n#define EQ(a,b) (abs((a) - (b)) < EPS)\n#define EQV(a,b) ( EQ((a).X, (b).X) && EQ((a).Y, (b).Y) )\n#define LE(n, m) ((n) < (m) + EPS)\n#define LEQ(n, m) ((n) <= (m) + EPS)\n#define GE(n, m) ((n) + EPS > (m))\n#define GEQ(n, m) ((n) + EPS >= (m))\n\ntypedef vector<int> VI;\ntypedef vector<VI> MAT;\ntypedef pair<int, int> pii;\ntypedef long long ll;\n\ntypedef complex<double> P;\ntypedef pair<P, P> L;\ntypedef pair<P, double> C;\n\nint dy[]={0, 0, 1, -1};\nint dx[]={1, -1, 0, 0};\nint const MOD = 1000000007;\n\nnamespace std {\n    bool operator<(const P& a, const P& b) {\n        return a.X != b.X ? a.X < b.X : a.Y < b.Y;\n    }\n}\n\nsigned main() {\n    int M, T, P, R;\n    while(cin >> M >> T >> P >> R, M || T || P || R) {\n        int m, t, p, j;\n\n        // board[team][problem] := judge\n        int board[60][15] = {};\n        int probnum[60] = {};\n        int acctime[60] = {};\n\n        rep(i,0,R) {\n            cin >> m >> t >> p >> j;\n            t--;\n            if(j != 0) {\n                board[t][p]++;\n            }\n            else {\n                acctime[t] -= m + 20 * board[t][p];\n                probnum[t]++;\n            }\n        }\n\n        vector< pair< pii, int > > pp;\n        rep(i,0,T) pp.pb(make_pair( make_pair(probnum[i], acctime[i]), i+1) );\n        pii prev = pii(-1, -1);\n        sort(pp.begin(), pp.end());\n        reverse(pp.begin(), pp.end());\n\n\n        rep(i,0,T) {\n            if(prev == pii(-1, -1)) {\n                prev = pp[i].fr;\n                printf(\"%lld\", pp[i].sc);\n            }\n            else if(prev == pp[i].fr) {\n                printf(\"=%lld\", pp[i].sc);\n            }\n            else if(prev != pp[i].fr) {\n                printf(\",%lld\", pp[i].sc);\n                prev = pp[i].fr;\n            }\n        }\n        cout << endl;\n    }\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\nusing namespace std;\n\nint M, T, P, R;\n\nstruct Team{\n  int cntWrongAns[10];\n  int teamId, time, accepted;\n  Team(int id){\n    for(int i = 0; i < 10; i++) cntWrongAns[i] = 0;\n    teamId = id;\n    time = 0;\n    accepted = 0;\n  }\n};\n\nbool operator < (const Team &a, const Team &b){\n  if(a.accepted == b.accepted){\n    if(a.time == b.time) return a.teamId > b.teamId;\n    return a.time < b.time;\n  }\n  return a.accepted > b.accepted;\n}\n\nbool operator == (const Team &a, const Team &b){\n  return a.accepted == b.accepted && a.time == b.time;\n}\n\nint main(void){\n  while(cin >> M >> T >> P >> R && M | T | P | R){\n    vector<Team> v;\n    for(int i = 0; i < T; i++) v.push_back(Team(i));\n\n    for(int i = 0; i < R; i++){\n      int m, t, p, j;\n      cin >> m >> t >> p >> j;\n      t--; p--;\n      if(j == 0){\n        for(int k = 0; k < v.size(); k++) if(v[k].teamId == t){\n          v[k].accepted++;\n          v[k].time += m;\n          v[k].time += 20 * v[k].cntWrongAns[p];\n          break;\n        }\n      }else{\n        for(int k = 0; k < v.size(); k++) if(v[k].teamId == t){\n          v[k].cntWrongAns[p]++;\n          break;\n        }\n      }\n    }\n    \n    sort(v.begin(), v.end());\n    \n    for(int i = 0; i < v.size(); i++){\n      if(i) { bool flag = (v[i-1] == v[i]); cout << (flag ? \"=\" : \",\"); }\n      cout << v[i].teamId + 1;\n    }\n    cout << endl;\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#define _CRT_SECURE_NO_WARNINGS\n#define _USE_MATH_DEFINES\n#include <iostream>\n#include <map>\n#include <set>\n#include <list>\n#include <cstdio>\n#include <cmath>\n#include <cstring>\n#include <string>\n#include <vector>\n#include <algorithm>\n#include <utility>\n#include <queue>\n#include <iomanip>\n\n#define SIZE 101\n#define INF 100000000\n\nusing namespace std;\n\n\ntypedef pair<int, int> Pa;\n\n\nint tim[100][100]; // t p time\nbool pra[100][100];\n\nint main()\n{\n\tint M, T, P, R;\n\t\n\tpair<Pa, int> pa;\n\n\twhile (true) {\n\t\tcin >> M >> T >> P >> R;\n\t\tif (T == 0) break;\n\n\t\tfor (int i = 0; i <= T; i++) {\n\t\t\tfor (int j = 0; j <= P; j++) {\n\t\t\t\ttim[i][j] = 0; \n\t\t\t\tpra[i][j] = false;\n\t\t\t}\n\t\t}\n\t\tvector<pair<Pa, int>> v(T + 1);\n\n\t\tfor (int i = 0; i <= T; i++) {\n\t\t\tv[i].second = i;\n\t\t}\n\n\t\tfor (int i = 0; i < R; i++) {\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tif (j == 0) {\n\t\t\t\tv[t].first.first++;\n\t\t\t\tv[t].first.second = - m + tim[t][p];\n\t\t\t} else {\n\t\t\t\ttim[t][p] -= 20;\n\t\t\t}\n\t\t}\n\n\t\tsort(v.begin(),v.end());\n\t\tfor (int i = T; i >= 1; i--) {\n\t\t\t//cout << v[i].first.first << \" \" << v[i].first.second << \" \" << v[i].second << endl;\n\t\t\tcout << v[i].second;\n\t\t\tif (i == 1) break;\n\t\t\tif (v[i].first.first == v[i - 1].first.first && v[i].first.second == v[i - 1].first.second)cout << \"=\";\n\t\t\telse cout << \",\";\n\t\t}\n\t\tcout << endl;\n\t\t\n\t}\n\t\n\n\treturn (0);\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\ntypedef pair<int, int> pi;\n\nint main() {\n\tint M, T, P, R;\n\twhile(cin >> M >> T >> P >> R && M){\n\t\tint m, t, p, c, wrong[64][16] = {0};\n\t\tpi team[64];\n\t\tfor(int i = 0; i <= T; ++i)\n\t\t\tteam[i] = pi(0, 0);\n\t\t\t\n\t\tfor(int i = 0; i < R; ++i){\n\t\t\tscanf(\"%d%d%d%d\", &m, &t, &p, &c);\n\t\t\tif(c == 0){\n\t\t\t\tteam[t].first--;\n\t\t\t\tteam[t].second += m + wrong[t][p];\n\t\t\t}\n\t\t\telse{\n\t\t\t\twrong[t][p] += 20; \n\t\t\t}\n\t\t}\n\t\tpi rnk[64];\n\t\tfor(int i = 0; i <= T; ++i)\n\t\t\trnk[i] = team[i];\n\t\t\t\n\t\tsort(team, team + T + 1);\n\t\tpi prev;\n\t\tbool is_out[64] = {0};\n\t\tfor(int i = 0; i < T; ++i){\n\t\t\tfor(int j = T; j >= 1; --j){\n\t\t\t\tif(rnk[j].first == team[i].first && rnk[j].second == team[i].second && !is_out[j]){\n\t\t\t\t\tif(i){\n\t\t\t\t\t\tif(prev.first == team[i].first && prev.second == team[i].second)\n\t\t\t\t\t\t\tcout << \"=\";\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tcout << \",\";\n\t\t\t\t\t}\n\t\t\t\t\tcout << j;\n\t\t\t\t\tis_out[j] = true;\n\t\t\t\t\tprev = pi(team[i].first, team[i].second);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\nint main(){\n    int m,t,p,r;\n    while(cin>>m>>t>>p>>r,m){\n        vector<vector<int>> team(t,vector<int>(p,0));\n        for(int i=0;i<r;i++){\n            int mm,tt,pp,jj;\n            cin>>m>>tt>>pp>>jj;\n            if(!jj)\n                team[tt-1][pp-1]=m+(-team[tt-1][pp-1])*20;\n            else\n                team[tt-1][pp-1]--;\n\n        }\n        vector<tuple<int,int,int>> rank(t,make_tuple(0,0,0));\n        for(int i=0;i<t;i++)\n            get<2>(rank[i])=i+1;\n        for(int i=0;i<t;i++){\n            for(int j=0;j<p;j++)\n                if(team[i][j]>0){\n                    (get<0>(rank[i]))++;\n                    get<1>(rank[i])-=team[i][j];\n                }\n\n\n        }\n        sort(rank.begin(),rank.end(),greater<tuple<int,int,int>>());\n        queue<int> q;\n        pair<int,int> pre=make_pair(-1,-1);\n        string res=\"\";\n        for(int i=0;i<t;i++){\n            if(pre==make_pair(get<0>(rank[i]),get<1>(rank[i]))){\n                q.push(get<2>(rank[i]));\n                continue;\n            }\n            else{\n                if(!res.empty())\n                    res+=\",\";\n                int s=q.size();\n                for(int j=0;j<s;j++){\n                    int a=q.front();\n                    if(j!=s-1){\n                        res+=to_string(a)+\"=\";\n                        }\n                    else\n                        res+=to_string(a);\n\n                    q.pop();\n\n                }\n                q.push(get<2>(rank[i]));\n                pre=make_pair(get<0>(rank[i]),get<1>(rank[i]));\n            }\n\n        }\n        if(!q.empty() && res.back()!=',')\n            res+=',';\n        for(int i=0;!q.empty();i++){\n            if(q.size()!=1){\n                res+=to_string(q.front())+\"=\";\n\n            }\n            else\n                res+=to_string(q.front());\n            q.pop();\n        }\n        cout<<res<<endl;\n    }\n\n    return 0;\n}\n                                      "
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#include <stdint.h>\n\ntypedef uint32_t u32;\ntypedef uint64_t u64;\n\nclass Team {\npublic:\n  int id;\n  int ac_num;\n  int pena;\n  int miss[16];\n  Team() {\n    ac_num = pena = 0;\n    for(int& I : miss) I = 0;\n  }    \nprivate:\n};\n\nbool operator < (const Team& left, const Team& right) {\n  if( left.ac_num != right.ac_num ) return -left.ac_num < -right.ac_num;\n  if( left.pena != right.pena ) return left.pena < right.pena;\n  return left.id > right.id;\n}\n\nbool operator == (const Team& left, const Team& right) {\n  if( left.ac_num != right.ac_num ) return false;\n  if( left.pena != right.pena ) return false;\n  return true;\n}\n\nint main() {\n  \n  int M, T, P, R;\n  int m, t, p, j;\n  for(;;) {\n    Team team[128];\n    for(int i = 0; i < 128; ++i) team[i].id = i;\n    std::cin >> M >> T >> P >> R;\n    if( M == 0 and T == 0 and P == 0 and R == 0 ) break;\n    for(int i = 0; i < R; ++i) {\n      std::cin >> m >> t >> p >> j;\n      if( j == 0 ) {\n        team[t].pena += team[t].miss[p] * 20 + m;\n        team[t].ac_num += 1;\n      }\n      else {\n        team[t].miss[p] += 1;\n      }\n    }\n    std::sort(team + 1, team + T + 1);\n    std::cout << team[1].id;\n    for(int i = 2; i <= T; ++i) {\n      std::cout << (team[i-1] == team[i] ? '=' : ',') << team[i].id;\n    }\n    std::cout << std::endl;\n  }\n\n  \n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\nusing namespace std;\n\ntypedef struct _team{\n    int tid;\n    int ac;\n    int time;\n    _team(){tid=ac=time=0;}\n} Team;\n\nbool cmp(Team& a, Team& b){\n    if(a.ac == b.ac){\n        if(a.time == b.time){\n            return a.tid > b.tid;\n        }else{\n            return a.time < b.time;\n        }\n    }else{\n        return a.ac > b.ac;\n    }\n}\n\nint main(){\n    while(1){\n        int m,t,p,r;\n        cin >> m >> t >> p >> r;\n        if(m==0) break;\n\n        int mi, ti, pi, ji;\n        vector<vector<int> > pena(t, vector<int>(p, 0));\n        vector<Team> info(t);\n        for(int i=0; i<t; i++){\n            info[i].tid = i+1;\n        }\n        \n        for(int i=0; i<r; i++){\n            cin >> mi >> ti >> pi >> ji;\n            ti--;\n            pi--;\n            if(ji==0){\n                info[ti].time = mi;\n                info[ti].ac++;\n                pena[ti][pi] = -pena[ti][pi];\n            }else{\n                pena[ti][pi] -= 20;\n            }\n        }\n        for(int i=0; i<t; i++){\n            for(int j=0; j<p; j++){\n                if(pena[i][j]>0){\n                    info[i].time += pena[i][j];\n                }\n            }\n        }\n\n        sort(info.begin(), info.end(), cmp);\n        cout << info[0].tid;\n        for(int i=1; i<t; i++){\n            if(info[i].ac==info[i-1].ac && info[i].time==info[i-1].time){\n                cout << \"=\";\n            }else{\n                cout << \",\";\n            }\n            cout << info[i].tid;\n        }\n        cout << endl;\n    }\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\nusing namespace std;\n \nint main()\n{\n    while(true){\n        int M, T, P, R;\n        cin >> M >> T >> P >> R;\n \n        if(M==0 && T==0 && P==0 && R==0)\n            break;\n \n        int CP[50], TT[50], PT[50][10];\n        for(int i=0; i<T; i++){\n            CP[i] = TT[i] = 0;\n            for(int j=0; j<P; j++)\n                PT[i][j] = 0;\n        }\n \n        for(int i=0; i<R; i++){\n            int m, t, p, j;\n            cin >> m >> t >> p >> j;\n \n            if(j==0){\n                CP[t-1]++;\n                TT[t-1] += (m+PT[t-1][p-1]);\n            }\n            else{\n                PT[t-1][p-1] += 20;\n            }\n        }\n \n        int tnow, tpre = -1;\n        bool flg[50];\n        for(int i=0; i<T; i++)\n            flg[i] = false;\n \n        for(int i=0; i<T; i++){\n            tnow = -1;\n            for(int j=0; j<T; j++){\n                if(flg[j])\n                    continue;\n \n                if(tnow==-1){\n                    tnow = j;\n                }\n                else{\n                    if(CP[j]>CP[tnow] || (CP[j]==CP[tnow] && TT[j]<=TT[tnow])){\n                        tnow = j;\n                    }\n                }\n            }\n \n            if(tpre!=-1){\n                if(CP[tnow]==CP[tpre] && TT[tnow]==TT[tpre])\n                    cout << '=';\n                else\n                    cout << ',';\n            }\n            cout << tnow+1;\n \n            flg[tnow] = true;\n            tpre = tnow;\n        }\n        cout << endl;\n    }\n \n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "300 10 8 5\n50 5 2 1\n70 5 2 0\n75 1 1 0\n100 3 1 0\n150 3 2 0\n240 5 5 7\n50 1 1 0\n60 2 2 0\n70 2 3 0\n90 1 3 0\n120 3 5 0\n140 4 1 0\n150 2 4 1\n180 3 5 4\n15 2 2 1\n20 2 2 1\n25 2 2 0\n60 1 1 0\n120 5 5 4\n15 5 4 1\n20 5 4 0\n40 1 1 0\n40 2 2 0\n120 2 3 4\n30 1 1 0\n40 2 1 0\n50 2 2 0\n60 1 2 0\n120 3 3 2\n0 1 1 0\n1 2 2 0\n300 5 8 0\n0 0 0 0"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <climits>\n#include <cmath>\n#include <cstdio>\n#include <cstdlib>\n#include <cstring>\n#include <functional>\n#include <iostream>\n#include <map>\n#include <ostream>\n#include <queue>\n#include <set>\n#include <stack>\n#include <string>\n#include <vector>\n#define INF 1000000000\n#define rep(i,a,b) for (int i=(a);i<(b);i++)\n#define rev(i,a,b) for (int i=(a)-1;i>=b;i--)\nusing namespace std;\ntypedef long long ll;\ntypedef pair<int, int> pii;\ntypedef queue<int> qi;\ntypedef vector<int> vi;\ntypedef vector<string> vs;\nint dx[4] = { 0, 1, 0, -1 };\nint dy[4] = { 1, 0, -1, 0 };\n\nint ac[55] = {0};\nint ac2[55][12] = {0};\nint wa[55][12] = {0};\nint ti[55] = {0};\n\nbool func(int a, int b) {\n\ta--;\n\tb--;\n\n\tif(ac[a] > ac[b]) return true;\n\telse if(ac[a] < ac[b]) return false;\n\telse {\n\t\tif(ti[a] < ti[b]) return true;\n\t\telse if(ti[a] > ti[b]) return false;\n\t\telse {\n\t\t\tif(a > b) return true;\n\t\t\telse return false;\n\t\t}\n\t}\n}\n\nint main() {\n\tcin.tie(0);\n\tios::sync_with_stdio(false);\n\n\twhile(true) {\n\n\n\t\tint M,T,P,R;\n\t\tcin >> M >> T >> P >> R;\n\t\tif(!(M || T || P || R)) break;\n\n\t\tvi rank(T);\n\t\trep(i,0,T) {\n\t\t\trank[i] = i+1;\n\t\t\tac[i] = 0;\n\t\t\tti[i] = 0;\n\t\t\trep(j,0,P) {\n\t\t\t\tac2[i][j] = 0;\n\t\t\t\twa[i][j] = 0;\n\t\t\t}\n\t\t}\n\n\t\trep(i,0,R) {\n\t\t\tint m,t,p,j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tif(j == 0) {\n\t\t\t\tac[t-1]++;\n\t\t\t\tac2[t-1][p-1] = 1;\n\t\t\t\tti[t-1] = m;\n\t\t\t\trep(j,0,P) if(ac2[t-1][j] == 1) ti[t-1] += wa[t-1][j] * 20;\n\t\t\t}\n\t\t\telse wa[t-1][p-1]++;\n\t\t}\n\n\t\tsort(rank.begin(), rank.end(), func);\n\n\t\trep(i,0,rank.size()-1) {\n\t\t\tcout << rank[i];\n\t\t\tif(ac[rank[i]-1] > ac[rank[i+1]-1]) cout << ',';\n\t\t\telse if(ti[rank[i]-1] < ti[rank[i+1]-1]) cout << ',';\n\t\t\telse cout << '=';\n\t\t}\n\t\tcout << rank[rank.size()-1] <<endl;\n\n\t\trep(i,0,rank.size()) {\n\t\t\tcout << ac[i] << \" \";\n\t\t}\n\t\tcout << endl;\n\t\trep(i,0,rank.size()) {\n\t\t\tcout << ti[i] << \" \";\n\t\t}\n\t\tcout << endl;\n\n\t}\n\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nint main() {\n  int m,t,p,r;\n  while(cin >> m >> t >> p >> r && m) {\n    int score[t+1],penalty[t+1][p+1],clear[p+1],term[t+1];\n    for(int i=1; i<=t; i++) {\n      score[i]=0;\n      for(int j=1; j<=p; j++) penalty[i][j]=clear[j]=0;\n      term[i]=i;\n    }\n    for(int i=0; i<r; i++) {\n      int a,b,c,d;\n      cin >> a >> b >> c >> d;\n      if(!d) score[b]+=penalty[b][c]*20+a-100000;\n      else penalty[b][c]++;\n    }\n\n    for(int i=1; i<=t; i++) {\n      for(int j=i; j>1; j--) {\n\tif(score[j]<score[j-1]) {\n\t  swap(score[j],score[j-1]);\n\t  swap(term[j],term[j-1]);\n\t} else if(score[j]==score[j-1]) {\n\t  if(term[j]>term[j-1]) swap(term[j],term[j-1]);\n\t}\n      }\n    }\n    for(int i=1; i<=t; i++) {\n      if(i>1) {\n\tif(score[i-1]==score[i]) cout << \"=\";\n\telse cout << \",\";\n      }\n      cout << term[i];\n    }\n    cout << endl;\n  }\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\nusing namespace std;\n\nint main(){\n\twhile(1){\n\t\tint M,T,P,R;\n\t\tcin>>M>>T>>P>>R;\n\n\t\tif(M==0&&T==0&&P==0&&R==0)\n\t\t\tbreak;\n\n\t\tint CP[50],TT[50],PT[50][10];\n\t\tfor(int i=0;i<T;i++){\n\t\t\tCP[i]=TT[i]=0;\n\t\t\tfor(int j=0;j<P;j++){\n\t\t\t\tPT[i][j]=0;\n\t\t\t}\n\t\t}\n\n\t\tfor(int i=0;i<R;i++){\n\t\t\tint m,t,p,j;\n\t\t\tcin>>m>>t>>p>>j;\n\t\t\n\t\t\tif(j==0){\n\t\t\t\tCP[t-1]++;\n\t\t\t\tTT[t-1]+=(m+PT[t-1][p-1]);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tPT[t-1][p-1]+=20;\n\t\t\t}\n\t\t}\n\n\t\tint  tnow,tpre=-1;\n\t\tbool flg[50];\n\t\tfor(int i=0;i<T;i++){\n\t\t\tflg[i]=false;\n\t\t}\n\n\t\tfor(int i=0;i<T;i++){\n\t\t\ttnow=-1;\n\t\t\tfor(int j=0;j<T;j++){\n\t\t\t\tif(flg[j])\n\t\t\t\t\t continue;\n\n\t\t\t\tif(tnow=-1){\n\t\t\t\t\ttnow=j;\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tif(CP[j]>CP[tnow]||(CP[j]==CP[tnow]&&TT[j]<=TT[tnow])){\n\t\t\t\t\t\ttnow=j;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(tpre!=-1){\n\t\t\t\tif(CP[tnow]==CP[tpre]&&TT[tpre]==TT[tnow]){\n\t\t\t\t\tcout<<'=';\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tcout<<'.';\n\t\t\t\t}\n\t\t\t}\n\t\t\tcout<<tnow+1;\n\t\t\n\t\t\tflg[tnow]=true;\n\t\t\ttpre=tnow;\n\t\t}\n\t\tcout<<endl;\n\t}\n\t\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\n#include<cstring>\n#define MAX 50\n#define MP 11\nusing namespace std;\n\nstruct team{\n\tint id;\n\tint problems;\n\tint time;\n\tint pm[MP];\n\tint ep[MP];\n};\n\nbool mycomp(const team &t1,const team &t2)\n{\n\tif(t1.problems==t2.problems)return t1.time<t2.time;\n\treturn t1.problems>t2.problems;\n}\n\nint M,T,P,R;\nteam teams[MAX];\n\nvoid solve()\n{\n\tfor(int i=0;i<T;i++)\n\t{\n\t\tteams[i].id=i+1;\n\t\tfor(int j=1;j<=P;j++)\n\t\t{\n\t\t\tif(teams[i].ep[j]==0)continue;\n\t\t\telse teams[i].time+=teams[i].ep[j]+teams[i].pm[j];\n\t\t}\n\t}\n\tsort(teams,teams+P,mycomp);\n\tcout<<teams[0].id;\n\tfor(int i=1;i<T;i++)\n\t{\n\t\tif(teams[i].problems==teams[i-1].problems&&teams[i].time==teams[i-1].time)\n\t\t{\n\t\t\tcout<<\"=\";\n\t\t}else\n\t\t{\n\t\t\tcout<<\",\";\n\t\t}\n\t\tcout<<teams[i].id;\n\t}\n\tcout<<endl;\t\n}\n\nvoid input()\n{\n\tint m,t,p,j;\n\twhile(scanf(\"%d%d%d%d\",&M,&T,&P,&R))\n\t{\n\t\tif(M==0&&T==0&&P==0&&R==0)break;\n\t\tmemset(teams,0,sizeof(teams));\n\t\tfor(int i=0;i<R;i++)\n\t\t{\n\t\t\tscanf(\"%d%d%d%d\",&m,&t,&p,&j);\n\t\t\tif(j==0)\n\t\t\t{\n\t\t\t\tteams[t-1].problems++;\n\t\t\t\tteams[t-1].ep[p]=m;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tteams[t-1].pm[p]+=20;\n\t\t\t}\n\t\t}\n\t\tsolve();\n\t}\n}\n\nint main()\n{\n\tinput();\n\treturn 0;\n}\n\n\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\n\nusing namespace std;\n\nclass team\n{\npublic:\n\tint number;\n\tint alltime;\n\tint acnum;\n\tint wa[11];\n\tteam(){}\n\tbool operator<(const team &t)const\n\t{\n\t\treturn acnum==t.acnum?alltime==t.alltime?number>t.number:alltime<t.alltime:acnum>t.acnum;\n\t}\n\tbool operator==(const team &t)const\n\t{\n\t\treturn acnum==t.acnum&&alltime==t.alltime;\n\t}\n};\n\nint main()\n{\n\tint m,t,p,r;\n\twhile(1)\n\t{\n\t\tcin>>m>>t>>p>>r;\n\t\tif(!(m||t||p||r))break;\n\t\tteam te[50];\n\t\tfor(int i=0;i<t;i++)\n\t\t{\n\t\t\tte[i]=team();\n\t\t\tte[i].number=i;\n\t\t}\n\t\tint a,b,c,d;\n\t\tfor(int i=0;i<r;i++)\n\t\t{\n\t\t\tcin>>a>>b>>c>>d;\n\t\t\tif(d!=0)te[--b].wa[c]++;\n\t\t\telse\n\t\t\t{\n\t\t\t\tb--;\n\t\t\t\tte[b].acnum++;\n\t\t\t\tte[b].alltime+=a+20*te[b].wa[c];\n\t\t\t}\n\t\t}\n\t\tsort(te,te+t);\n\t\tfor(int i=0;i<t;i++)\n\t\t{\n\t\t\tif(i)\n\t\t\t{\n\t\t\t\tif(te[i-1]==te[i])cout<<\"=\";\n\t\t\t\telse cout<<\",\";\n\t\t\t}\n\t\t\tcout<<te[i].number+1;\n\t\t}\n\t\tcout<<endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define rep(i,j,k) for(int i=(int)j;i<(int)k;i++)\n#define itrep(i,x) for(auto i=(x).begin(); i!=(x).end();i++)\n#define Sort(x) sort((x).begin(),(x).end())\n#define all(x) (x).begin(),(x).end()\n#define fi first\n#define se second\n#define vi vector<int>\n#define INF (int)1e9\n#define INFL 1e18\n#define MOD 1000000007\n#define pb push_back\n#define MP make_pair\n#define PI 3.1415926535\ntypedef long long int ll;\n//typedef std::pair<int,int> P;\nint D=1;\nint dx[4]={0,1,0,-1},dy[4]={-1,0,1,0};\n\nusing namespace std;\n\nint main(){\n    int M,T,PP,R;\n    while(cin>>M>>T>>PP>>R && M){\n        vector<int> tim(T,0); //各チームの所用時間\n        vector<vector<bool>> solve(T,vector<bool>(PP,false)); //チームごとに各問題が解けたかどうかをboolで\n        vector<vector<int>> WA(T,vector<int>(PP,0)); //チームごとに各問題を何回間違えたか\n    \n        rep(i,0,R){\n            int m,t,p,r;\n            cin>>m>>t>>p>>r;\n            t--; p--; \n            if(r==0){ //正解したら、その時のmを足してとsolveをtrueに\n                solve[t][p]=true;  \n                tim[t]+=m;   \n            }\n            else WA[t][p]++; //間違えたらWAを増やす\n        }\n    \n        vector<int> solve_count(T,0); //チームごとに結局何問正解できたか\n        //２重forで数えます\n        rep(i,0,T){\n            rep(j,0,PP){\n                if(solve[i][j]){\n                    solve_count[i]++;\n                    tim[i]+=WA[i][j]*20;   \n                }\n            }\n        }\n        vector<pair<int,pair<int,int>>> rank; //いよいよソートします。この配列は３つの値を持ち、<問題数、時間、チーム番号>で格納。\n        /*ソート自体は昇順で行いますが、問題数は降順、時間は昇順、チーム番号は降順でソートしたいので、\n        降順にしたいものにはマイナスをつけることで対処します。これにより、元の値が大きいほど値が小さくなるのでうまくいきます。\n        */\n        rep(i,0,T){\n            rank.pb(MP(-solve_count[i],MP(tim[i],-(i+1))));\n        }\n        Sort(rank);\n        \n        /*rep(i,0,T){\n            cout<<rank[i].fi<<\" \"<<rank[i].se.fi<<\" \"<<-rank[i].se.se<<endl;\n        }*/\n        \n        //最後に出力です。出力するものはrank[].se.seだけですが、マイナスをつけて格納しているのでマイナスをつけて出力します。\n        rep(i,0,T){\n            if(i)cout<<\",\";\n            cout<<-rank[i].se.se;\n            while(i+1<T && rank[i].fi==rank[i+1].fi && rank[i].se.fi==rank[i+1].se.fi){\n                i++;\n                cout<<\"=\";\n                cout<<-rank[i].se.se;\n            }\n        }\n        cout<<endl;\n    }\n    \n    return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define INF 5000000\nusing namespace std;\ntypedef pair<int, int> P;\nconst int dx[] = {-1, 0, 1, 0};\nconst int dy[] = {0, 1, 0, -1};\nint sum[50][10] = {}, team[50][10] = {};\nbool solve[50][10];\nint main()\n{\n    int M, T, P, R;\n    while (cin >> M >> T >> P >> R)\n    {\n        if (M == 0)\n            return 0;\n\n        vector<int> m(R), t(R), p(R), j(R);\n        for (int i = 0; i < 50; i++)\n        {\n            for (int k = 0; k < 10; k++)\n            {\n                sum[i][k] = 0, team[i][k] = 0;\n                solve[i][k] = false;\n            }\n        }\n        for (int i = 0; i < R; i++)\n        {\n            cin >> m[i] >> t[i] >> p[i] >> j[i];\n            t[i]--, p[i]--;\n        }\n        for (int i = 0; i < R; i++)\n        {\n            if (j[i] == 0)\n            {\n                team[t[i]][p[i]] = m[i];\n                solve[t[i]][p[i]] = true;\n            }\n            else\n            {\n                if (!solve[t[i]][p[i]])\n                    sum[t[i]][p[i]] += 20;\n            }\n        }\n        vector<int> team_time(T, 0), team_sum(T, 0);\n        for (int i = 0; i < T; i++)\n        {\n            for (int k = 0; k < P; k++)\n            {\n                if (solve[i][k])\n                {\n                    team_sum[i]++;\n                    team_time[i] += (team[i][k] + sum[i][k]);\n                }\n            }\n        }\n        vector<tuple<int, int, int>> v;\n        for (int i = 0; i < T; i++)\n        {\n            v.emplace_back(team_sum[i], -team_time[i], i + 1);\n        }\n        sort(rbegin(v), rend(v));\n        vector<char> st;\n        for (int i = 0; i < T - 1; i++)\n        {\n            if (get<0>(v[i]) == get<0>(v[i + 1]) && get<1>(v[i]) == get<1>(v[i + 1]))\n            {\n                st.push_back('=');\n            }\n            else\n            {\n                st.push_back(',');\n            }\n        }\n        for (int i = 0; i < T; i++)\n        {\n            if (i < T - 1)\n                cout << get<2>(v[i]) << st[i];\n            else\n                cout << get<2>(v[i]) << endl;\n        }\n    }\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\n#include<vector>\nusing namespace std;\n#define REP(i, a, n) for(int i=a; i<n; i++)\n#define MP(a, b) make_pair(a, b)\n#define F first\n#define S second\n\nint main() {\n\tint M, T, P, R;\n\twhile (cin >> M >> T >> P >> R, M || T || P || R) {\n\t\tvector<pair<int, pair<int, int>>> vp;\n\n\t\tint pena[51][11];\n\n\t\tREP(i, 0, T) vp.push_back(MP(0, MP(0, -i - 1)));\n\t\tREP(i, 0, 51) REP(j, 0, 11) pena[i][j] = 0;\n\n\t\tREP(i, 0, R) {\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tt--;\n\t\t\tp--;\n\n\t\t\tif (j == 0) {\n\t\t\t\tvp[t].F--;\n\t\t\t\tvp[t].S.F += (pena[t][p] + m);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tpena[t][p] += 20;\n\t\t\t}\n\t\t}\n\n\t\tsort(vp.begin(), vp.end());\n\n\t\tcout << -vp[0].S.S;\n\t\tREP(i, 1, vp.size()) {\n\t\t\tif (vp[i - 1].F < vp[i].F) {\n\t\t\t\tcout << \",\" << -vp[i].S.S;\n\t\t\t}\n\t\t\telse if (vp[i - 1].S.F < vp[i].S.F) {\n\t\t\t\tcout << \",\" << -vp[i].S.S;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcout << \"=\" << -vp[i].S.S;\n\t\t\t}\n\t\t}\n\n\t\tcout << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "// Header {{{\n// includes {{{\n#include <algorithm>\n#include <cassert>\n#include <cctype>\n#include <climits>\n#include <cmath>\n#include <complex>\n#include <cstdio>\n#include <cstdlib>\n#include <cstring>\n#include <ctime>\n#include <iostream>\n#include <iterator>\n#include <limits>\n#include <list>\n#include <map>\n#include <numeric>\n#include <queue>\n#include <set>\n#include <sstream>\n#include <stack>\n#include <string>\n#include <sys/time.h>\n#include <unistd.h>\n#include <vector>\n// }}}\nusing namespace std;\n// consts {{{\nstatic const int INF = 1e9;\nstatic const double PI = acos(-1.0);\nstatic const double EPS = 1e-10;\n// }}}\n// typedefs {{{\ntypedef long long int LL;\ntypedef unsigned long long int ULL;\ntypedef vector<int> VI;\ntypedef vector<VI> VVI;\ntypedef vector<LL> VLL;\ntypedef vector<VLL> VVLL;\ntypedef vector<ULL> VULL;\ntypedef vector<VULL> VVULL;\ntypedef vector<double> VD;\ntypedef vector<VD> VVD;\ntypedef vector<bool> VB;\ntypedef vector<VB> VVB;\ntypedef vector<char> VC;\ntypedef vector<VC> VVC;\ntypedef vector<string> VS;\ntypedef vector<VS> VVS;\ntypedef pair<int, int> PII;\ntypedef complex<int> P;\n// }}}\n// macros & inline functions {{{\n// syntax sugars {{{\n#define FOR(i, b, e) for (typeof(e) i = (b); i < (e); ++i)\n#define FORI(i, b, e) for (typeof(e) i = (b); i <= (e); ++i)\n#define REP(i, n) FOR(i, 0, n)\n#define REPI(i, n) FORI(i, 0, n)\n#define OPOVER(_op, _type) inline bool operator _op (const _type &t) const\n// }}}\n// conversion {{{\ninline int toInt(string s) { int v; istringstream sin(s); sin>>v; return v; }\ntemplate<class T> inline string toString(T x) { ostringstream sout; sout<<x; return sout.str(); }\n// }}}\n// array and STL {{{\n#define ARRSIZE(a) ( sizeof(a) / sizeof(a[0]) )\n#define ZERO(a, v) ( assert(v == 0 || v == -1), memset(a, v, sizeof(a)) )\n#define F first\n#define S second\n#define MP(a, b) make_pair(a, b)\n#define SIZE(a) ((LL)a.size())\n#define PB(e) push_back(e)\n#define SORT(v) sort((v).begin(), (v).end())\n#define RSORT(v) sort((v).rbegin(), (v).rend())\n#define ALL(a) (a).begin(), (a).end()\n#define RALL(a) (a).rbegin(), (a).rend()\n#define EACH(c, it) for(typeof((c).begin()) it=(c).begin(); it!=(c).end(); ++it)\n#define REACH(c, it) for(typeof((c).rbegin()) it=(c).rbegin(); it!=(c).rend(); ++it)\n#define EXIST(s, e) ((s).find(e) != (s).end())\n// }}}\n// bit manipulation {{{\n// singed integers are not for bitwise operations, specifically arithmetic shifts ('>>', and maybe not good for '<<' too)\n#define IS_UNSIGNED(n) (!numeric_limits<typeof(n)>::is_signed)\n#define BIT(n) (assert(IS_UNSIGNED(n)), assert(n < 64), (1ULL << (n)))\n#define BITOF(n, m) (assert(IS_UNSIGNED(n)), assert(m < 64), ((ULL)(n) >> (m) & 1))\ninline int BITS_COUNT(ULL b) { int c = 0; while(b != 0) { c += (b & 1); b >>= 1; } return c; }\ninline int MSB(ULL b) { int c = 0; while(b != 0) { ++c; b >>= 1; } return c-1; }\ninline int MAKE_MASK(ULL upper, ULL lower) { assert(lower < 64 && upper < 64 && lower <= upper); return (BIT(upper) - 1) ^ (BIT(lower) - 1); }\n// }}}\n// for readable code {{{\n#define EVEN(n) (n % 2 == 0)\n#define ODD(n) (!EVEN(n))\n// }}}\n// debug {{{\n#define arrsz(a) ( sizeof(a) / sizeof(a[0]) )\n#define dprt(fmt, ...) if (opt_debug) { fprintf(stderr, fmt, ##__VA_ARGS__); }\n#define darr(a) if (opt_debug) { copy( (a), (a) + arrsz(a), ostream_iterator<int>(cerr, \" \") ); cerr << endl; }\n#define darr_range(a, f, t) if (opt_debug) { copy( (a) + (f), (a) + (t), ostream_iterator<int>(cerr, \" \") ); cerr << endl; }\n#define dvec(v) if (opt_debug) { copy( ALL(v), ostream_iterator<int>(cerr, \" \") ); cerr << endl; }\n#define darr2(a) if (opt_debug) { FOR(__i, 0, (arrsz(a))){ darr( (a)[__i] ); } }\n#define dvec2(v) if (opt_debug) { FOR(__i, 0, v.size()){ dvec( (v)[__i] ); } }\n#define WAIT() if (opt_debug) { string _wait_; cerr << \"(hit return to continue)\" << endl; getline(cin, _wait_); }\n#define dump(x) if (opt_debug) { cerr << \" [L\" << __LINE__ << \"] \" << #x << \" = \" << (x) << endl; }\n#define dumpf() if (opt_debug) { cerr << __PRETTY_FUNCTION__ << endl; }\n#define dumpv(x) if (opt_debug) { cerr << \" [L:\" << __LINE__ << \"] \" << #x << \" = \"; REP(q, (x).size()) cerr << (x)[q] << \" \"; cerr << endl; }\n#define where() if (opt_debug) { cerr << __FILE__ << \": \" << __PRETTY_FUNCTION__ << \" [L: \" << __LINE__ << \"]\" << endl; }\n#define show_bits(b, s) if(opt_debug) { REP(i, s) { cerr << BITOF(b, s-1-i); if(i%4 == 3) cerr << ' '; } cerr << endl; }\ntemplate<typename T1, typename T2> ostream& operator<<(ostream& s, const pair<T1, T2>& d) {return s << \"(\" << d.first << \", \" << d.second << \")\";}\ntemplate<typename T> ostream& operator<<(ostream& s, const complex<T>& d) {return s << \"(\" << d.real() << \", \" << d.imag() << \")\";}\n// }}}\n// }}}\n// time {{{\ninline double now(){ struct timeval tv; gettimeofday(&tv, NULL); return (static_cast<double>(tv.tv_sec) + static_cast<double>(tv.tv_usec) * 1e-6); }\n// }}}\n// string manipulation {{{\ninline VS split(string s, char delimiter) { VS v; string t; REP(i, s.length()) { if(s[i] == delimiter) v.PB(t), t = \"\"; else t += s[i]; } v.PB(t); return v; }\ninline string join(VS s, string j) { string t; REP(i, s.size()) { t += s[i] + j; } return t; }\n// }}}\n// geometry {{{\n#define Y real()\n#define X imag()\n// }}}\n// 2 dimentional array {{{\nP dydx4[4] = { P(-1, 0), P(0, 1), P(1, 0), P(0, -1) };\nP dydx8[8] = { P(-1, 0), P(0, 1), P(1, 0), P(0, -1), P(-1, 1), P(1, 1), P(1, -1), P(-1, -1) };\nint g_height, g_width;\nbool in_field(P p) {\n\treturn (0 <= p.Y && p.Y < g_height) && (0 <= p.X && p.X < g_width);\n}\n// }}}\n// }}}\nbool opt_debug = false;\n\nclass Team {\n\tpublic:\n\t\tint id;\n\t\tmap<int, int> wc_count_by_problem_id;\n\t\tint ac_count;\n\t\tint total_time;\n\t\tTeam(int _id);\n\t\tvoid submit(int m, int p, bool j) {\n\t\t\tif (j) {\n\t\t\t\tac_count++;\n\t\t\t\ttotal_time += m;\n\t\t\t\tif (EXIST(wc_count_by_problem_id, p)) {\n\t\t\t\t\ttotal_time += 20 * wc_count_by_problem_id[p];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (!EXIST(wc_count_by_problem_id, p)) {\n\t\t\t\t\twc_count_by_problem_id[p] = 0;\n\t\t\t\t}\n\t\t\t\twc_count_by_problem_id[p]++;\n\t\t\t}\n\t\t}\n\n\t\tOPOVER(<, Team) {\n\t\t\tTeam self = *this;\n\t\t\tif (self.ac_count != t.ac_count) {\n\t\t\t\treturn self.ac_count < t.ac_count;\n\t\t\t} else {\n\t\t\t\tif (self.total_time != t.total_time) {\n\t\t\t\t\treturn self.total_time > t.total_time;\n\t\t\t\t} else {\n\t\t\t\t\treturn self.id < t.id;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tOPOVER(==, Team) {\n\t\t\tTeam self = *this;\n\t\t\tif (self.ac_count == t.ac_count && self.total_time == t.total_time) {\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n};\nTeam::Team(int _id) : id(_id) {\n\tac_count = 0;\n\ttotal_time = 0;\n}\n\nint main(int argc, char** argv) {\n\tstd::ios_base::sync_with_stdio(false);\n\t// set options {{{\n\tint __c;\n\twhile ( (__c = getopt(argc, argv, \"d\")) != -1 ) {\n\t\tswitch (__c) {\n\t\t\tcase 'd':\n\t\t\t\topt_debug = true;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tabort();\n\t\t}\n\t}\n\t// }}}\n\n\tint M, T, P, R;\n\twhile (cin >> M >> T >> P >> R, M || T || P || R) {\n\t\tvector<Team> teams;\n\t\tREP (i, T) {\n\t\t\tTeam t(i + 1);\n\t\t\tteams.PB(t);\n\t\t}\n\n\t\tREP (i, R) {\n\t\t\tint m, t, p, j; cin >> m >> t >> p >> j;\n\t\t\tteams[t-1].submit(m, t, (j == 0));\n\t\t}\n\n\t\tRSORT(teams);\n\n\t\tREP (i, teams.size()) {\n\t\t\tif (i > 0) {\n\t\t\t\tif (teams[i] == teams[i-1]) {\n\t\t\t\t\tcout << '=';\n\t\t\t\t} else {\n\t\t\t\t\tcout << ',';\n\t\t\t\t}\n\t\t\t}\n\t\t\tcout << teams[i].id;\n\t\t}\n\t\tcout << endl;\n\t}\n\n\treturn 0;\n}\n\n// vim: foldmethod=marker"
  },
  {
    "language": "C++",
    "code": "#include<map>\n#include<set>\n#include<list>\n#include<cmath>\n#include<queue>\n#include<stack>\n#include<cstdio>\n#include<string>\n#include<vector>\n#include<complex>\n#include<cstdlib>\n#include<cstring>\n#include<climits>\n#include<numeric>\n#include<sstream>\n#include<iostream>\n#include<algorithm>\n#include<functional>\n#include<cctype>\n\n#define mp make_pair\n#define pb push_back\n#define REP(i,a,n) for(int i = a;i < (n);i++)\n#define rep(i,n) for(int i = 0;i < (n);i++)\n#define all(s) s.begin(), s.end()\n#define rall(s) s.rbegin(), s.rend()\n#define range(x,min,max) ((min) <= (x) && (x) <= (max))\n\nusing namespace std;\n\ntypedef long long LL;\ntypedef vector<int> VI;\ntypedef vector<vector<int> > VII;\ntypedef vector<string> VS;\ntypedef vector<bool> VB;\ntypedef pair<int,int> PII;\n\nconst int DX[]={1,0,-1,0},DY[]={0,-1,0,1};\n\nint M, T, P, R;\n\nstruct Score {\n\tScore() {\n\t\tcount = 0;\n\t\ttime = 0;\n\t}\n\tint team;\n\tint count;\n\tint time;\n\n\tbool operator < (const Score& right) const {\n\t\tif (count != right.count) {\n\t\t\treturn count > right.count;\n\t\t}\n\t\tif (time != right.time) {\n\t\t\treturn time < right.time;\n\t\t}\n\t\treturn team > right.team;\n\t}\n};\n\nint main(){\n\tcin.tie(0);\n   \tios::sync_with_stdio(false);\n\twhile (1) {\n\t\tcin >> M >> T >> P >> R;\n\t\tif (M == 0 && T == 0 && P == 0 && R == 0) break;\n\t\tvector<Score> score(T);\n\t\tVII pena(T, VI(P, 0));\n\t\trep (i, T) {\n\t\t\tscore[i].team = i;\n\t\t}\n\t\trep (i, R) {\n\t\t\tint m, t, p, f;\n\t\t\tcin >> m >> t >> p >> f;\n\t\t\tif (f != 0) {\n\t\t\t\tpena[t - 1][p] += 20;\n\t\t\t} else {\n\t\t\t\tscore[t - 1].count++;\n\t\t\t\tscore[t - 1].time += m + pena[t - 1][p];\n\t\t\t}\n\t\t}\n\t\tsort(all(score));\n\t\trep (i, score.size()) {\n\t\t\tif (i != 0) {\n\t\t\t\tcout << (score[i - 1].count == score[i].count && score[i - 1].time == score[i].time? '=' : ',');\n\t\t\t}\n\t\t\tcout << score[i].team + 1;\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\nusing namespace std;\n\nconst int INF=5000000;\n\nint data[51][12];\n\nint main(){\n\tint M,T,P,R;\n\twhile(cin>>M>>T>>P>>R && M){\n\t\tfill((int*)data,(int*)(data+12),0);\n\t\tfor(int i=0;i<R;i++){\n\t\t\tint m,t,p,j;\n\t\t\tcin>>m>>t>>p>>j;\n\t\t\tif(j==0){\n\t\t\t\tdata[t][0]++;\n\t\t\t\tdata[t][11]+=m+data[t][p]*20;\n\t\t\t}\n\t\t\telse data[t][p]++;\n\t\t}\n\t\tint prev[2]={INF,0};\n\t\tfor(int i=0;i<T;i++){\n\t\t\tint ans=0;\n\t\t\tint now[2]={0,INF};\n\t\t\tfor(int j=T;j>=0;j--){\n\t\t\t\tif(data[j][0]>now[0]){\n\t\t\t\t\tnow[0]=data[j][0];\n\t\t\t\t\tnow[1]=data[j][11];\n\t\t\t\t\tans=j;\n\t\t\t\t}\n\t\t\t\telse if(data[j][0]==now[0] && data[j][11]<now[1]){\n\t\t\t\t\tnow[1]=data[j][11];\n\t\t\t\t\tans=j;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(i){\n\t\t\t\tif(memcmp(now,prev,sizeof(now))==0)cout<<\"=\";\n\t\t\t\telse cout<<\",\";\n\t\t\t}\n\t\t\tcout<<ans;\n\t\t\tmemcpy(prev,now,sizeof(now));\n\t\t\tdata[ans][0]=-1;\n\t\t}\n\t\tcout<<endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nint main() {\n    cin.tie(0);\n    ios::sync_with_stdio(false);\n    while (1) {\n        int M, T, P, R;\n        cin >> M >> T >> P >> R;\n        if (!M & !T & !P & !R) break;\n        vector<vector<vector<int>>> teamScore(T, vector<vector<int>>(P, vector<int>(2)));\n        int m, t, p, j;\n        for (int i = 0; i < R; i++) {\n            cin >> m >> t >> p >> j;\n            if (j == 0) {\n                teamScore[t - 1][p - 1][0] = M + m;\n            } else {\n                teamScore[t - 1][p - 1][1]++;\n            }\n        }\n        vector<vector<int>> ranking(T, vector<int>(3, 0));\n        for (int i = 0; i < teamScore.size(); i++) {\n            int totalTime = 0;\n            int solveCount = 0;\n            for (int j = 0; j < teamScore[i].size(); j++) {\n                if (teamScore[i][j][0] != 0) {\n                    solveCount++;\n                    totalTime += teamScore[i][j][0] + teamScore[i][j][1] * 20;\n                }\n            }\n            ranking[i][0] = i + 1;\n            ranking[i][1] = solveCount;\n            ranking[i][2] = totalTime;\n        }\n\n        stable_sort(ranking.begin(), ranking.end(), [](auto& x, auto& y) { return x[0] > y[0]; });\n        stable_sort(ranking.begin(), ranking.end(), [](auto& x, auto& y) { return x[2] < y[2]; });\n        stable_sort(ranking.begin(), ranking.end(), [](auto& x, auto& y) { return x[1] > y[1]; });\n        for (int i = 0; i < ranking.size() - 1; i++) {\n            cout << ranking[i][0];\n            if (ranking[i][1] == ranking[i + 1][1] && ranking[i][2] == ranking[i + 1][2]) {\n                cout << \"=\";\n            } else {\n                cout << \",\";\n            }\n        }\n        cout << ranking[ranking.size() - 1][0] << endl;\n    }\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n#define rep(i, n) for (int i = 0; i < (n); i++)\n#define REP(i, s, n) for (int i = (s); i < (n); i++)\n#define all(co) begin(co), end(co)\n\nint main() {\n\tint m,t,p,r;\nwhile (cin >> m >> t >> p >> r && m) {\n\tvector<vector<int>> v(t, vector<int>(p));\n\trep(i, r) {\n\t\tint m, t, p, j; cin >> m >> t >> p >> j;\n\t\tt--;\n\t\tif (j == 0) {\n\t\t\tif(v[t][p] == 0) v[t][p] = m;\n\t\t\telse v[t][p] = m + -v[t][p] * 20;\n\t\t}\n\t\telse v[t]--;\n\t}\n\tmap<int, vector<int>> rank;\n\trep(i, t) {\n\t\tint s = -accumulate(all(v[i]), 0);\n\t\tif(rank.count(s)) rank.push_back(i + 1);\n\t\telse rank.insert(s, vector<int>{i+1});\n\t}\n\tfor(auto it = rank.begin(); it != --rank.end(); it++) {\n\t\trep(i, it->size() - 1) cout << it->at(i) << '=';\n\t\tcout << it->back();\n\t\tcout << ',';\n\t}\n\t{\n\t\tauto it = --rank.end();\n\t\trep(i, it->size() - 1) cout << it->at(i) << '=';\n\t\tcout << it->back();\n\t}\n\tcout << endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstring>\n\n#define PENALTY_TIME 20\n\nusing namespace std;\n\ntypedef struct TeamResult {\n  int teamNo;\n  int solved;\n  int totalTime;\n  int *incorrect;\n} TeamResult;\n\nstatic void sort(TeamResult *teamResult, int numOfTeam);\nstatic void PrintResult(TeamResult *teamResult, int numOfTeam);\n\nint main(void)\n{\n  int M, T, P, R;\n  while (cin >> M >> T >> P >> R) {\n    if (T == 0) break;\t// 入力の条件は 1<=T なので0で終了\n\n    TeamResult teamResult[T];\n    // TeamResultの初期化\n    memset(teamResult, 0, sizeof(teamResult));\n    for (int i = 0; i < T; i++) {\n      teamResult[i].teamNo = i;\n      teamResult[i].incorrect = new int[P];\n      for (int j = 0; j < P; j++) {\n\tteamResult[i].incorrect[j] = 0;\n      }\n    }\n    \n    for (int i = 0; i < R; i++) {\n      int m, t, p, j;\n      cin >> m >> t >> p >> j;\n      if (p == 0) goto FINISH;\n\n      t = t - 1;\n      p = p - 1;\n      if (j != 0) {\n\tteamResult[t].incorrect[p]++;\n      } else {\n\tteamResult[t].totalTime += m + teamResult[t].incorrect[p] * PENALTY_TIME;\n\tteamResult[t].solved++;\n      }\n    }\n\n    sort(teamResult, T);\n    PrintResult(teamResult, T);\n\n    for (int i = 0; i < T; i++) {\n      delete [] teamResult[i].incorrect;\n    }\n    \n    \n  }\n\n\nFINISH:\n  \n  return 0;\n}\n\nstatic void sort(TeamResult *teamResult, int numOfTeam)\n{\n  TeamResult tmp;\n\n  for (int i = 0; i < numOfTeam; i++) {\n    for (int j = i+1; j < numOfTeam; j++) {\n      if (teamResult[i].solved > teamResult[j].solved) {\n\ttmp = teamResult[i];\n\tteamResult[i] = teamResult[j];\n\tteamResult[j] = tmp;\n      } else if (teamResult[i].solved == teamResult[j].solved) {\n\tif (teamResult[i].totalTime < teamResult[j].totalTime) {\n\t  tmp = teamResult[i];\n\t  teamResult[i] = teamResult[j];\n\t  teamResult[j] = tmp;\n\t}\n      }\n    }\n  }\n}\n\nstatic void PrintResult(TeamResult *teamResult, int numOfTeam)\n{\n  /*\n  for (int i = 0; i < numOfTeam; i++) {\n    cout << \"Team:\" << teamResult[i].teamNo + 1\n\t << \", Solved:\" << teamResult[i].solved\n\t << \", Time:\" << teamResult[i].totalTime << endl;\n  }\n  */\n  for (int i = numOfTeam; i > 0; i--) {\n    cout << teamResult[i - 1].teamNo + 1;\n    if (i - 1 > 0 &&\n\tteamResult[i - 1].solved == teamResult[i - 2].solved &&\n\tteamResult[i - 1].totalTime == teamResult[i - 2].totalTime) {\n      cout << \"=\";\n    } else if (i - 1 > 0) {\n      cout << ',';\n    } else {\n      cout << endl;\n    }\n  }\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <string>\n#include <vector>\n#include <cmath>\n#include <algorithm>\n#include <cstdlib>\n#include <ctime>\n#include <cstdio>\n#include <functional>\n#include <set>\n#include <sstream>\n#include <map>\n#include <queue>\n \nusing namespace std;\n\nclass team{\npublic:\n\tint ac,pe,num;\n\tvector<int> wa;\n\tteam(int n){\n\t\tac=0;pe=0;\n\t\twa=vector<int>(n);\n\t}\n\n\tbool operator<(const team& t) const{\n\t\treturn ac<t.ac || ac==t.ac && pe>t.pe;\n\t}\n\tbool operator==(const team& t) const{\n\t\treturn ac==t.ac && pe==t.pe;\n\t}\n\n};\n\nint main()\n{\n\n\tint M,T,P,R;\n\twhile(cin>>M>>T>>P>>R,M){\n\t\tvector<team> vt(T,team(P));\n\t\tfor(int i=0;i<T;i++) vt[i].num=i+1;\n\t\tfor(int i=0;i<R;i++){\n\t\t\tint m,t,p,j;\n\t\t\tcin>>m>>t>>p>>j;\n\n\t\t\tif(j){\n\t\t\t\tvt[t-1].wa[p-1]++;\n\t\t\t}else{\n\t\t\t\tvt[t-1].ac++;\n\t\t\t\t//vt[t-1].last=m;\n\t\t\t\tvt[t-1].pe+=m+vt[t-1].wa[p-1]*20;\n\t\t\t}\n\t\t}\n\t\tsort(vt.begin(),vt.end());\n\t\treverse(vt.begin(),vt.end());\n\n\n\t\tfor(int i=0;i<vt.size()-1;i++){\n\t\t\tcout<<vt[i].num;\n\t\t\tif(vt[i]==vt[i+1]) cout<<\"=\";\n\t\t\telse cout<<\",\";\n\t\t}\n\t\tcout<<vt.back().num<<endl;\n\t}\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<tuple>\n#include<vector>\n#include<algorithm>\nusing namespace std;\nint T,N,M,Q,A,B,C,D;\nint b[999],c[999][999],d[999][999];\nint main(){\n\twhile(true){\n\t\tfor(int i=0;i<999;i++){\n\t\t\tfor(int j=0;j<999;j++){\n\t\t\t\tb[i]=0;\n\t\t\t\tc[i][j]=-1;\n\t\t\t\td[i][j]=0;\n\t\t\t}\n\t\t}\n\t\tcin>>T>>N>>M>>Q;\n\t\tif(T==0){break;}\n\t\tfor(int i=0;i<Q;i++){\n\t\t\tcin>>A>>B>>C>>D;\n\t\t\tif(c[B][C]==-1){\n\t\t\t\tif(D==0){\n\t\t\t\t\tc[B][C]=A;\n\t\t\t\t\tb[B]++;\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\td[B][C]+=20;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tvector<tuple<int,int,int>>vec;\n\t\tfor(int i=1;i<=N;i++){\n\t\t\tint sum=0;\n\t\t\tfor(int j=1;j<=M;j++){\n\t\t\t\tif(c[i][j]>=0){\n\t\t\t\t\tsum+=c[i][j]+d[i][j];\n\t\t\t\t}\n\t\t\t}\n\t\t\tvec.push_back(make_tuple(b[i],-sum,i));\n\t\t}\n\t\tsort(vec.begin(),vec.end());\n\t\tcout<<get<2>(vec[vec.size()-1]);\n\t\tfor(int i=(int)(vec.size())-2;i>=0;i--){\n\t\t\tif(get<0>(vec[i])==get<0>(vec[i+1]) && get<1>(vec[i])==get<1>(vec[i+1])){\n\t\t\t\tcout<<\"=\";\n\t\t\t}\n\t\t\telse{cout<<',';}\n\t\t\tcout<<get<2>(vec[i]);\n\t\t}\n\t\tcout<<endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<vector>\n#include<iostream>\n#include<algorithm>\nusing namespace std;\n\n\nstruct record{\n  int team;\n  int solve;\n  int time;\n  vector< int > wa;\n  \n};\n\nint getPenalty(record data, int pass){\n  int cnt=0;\n  for(int i=0;i<data.wa.size();i++){\n    if(pass==data.wa[i])\n      cnt++;\n  }\n  return cnt*20;\n\n}\n\nbool cmp(const record& a,const record& b){\n  if(a.solve!=b.solve) return a.solve>b.solve;\n  if(a.time!=b.time) return a.time<b.time;\n  return a.team > b.team;\n\n}\n\nint main(){\n  \n  int m,t1,p,r;\n  int t2,f;\n\n  while(1){\n    cin>>m>>t1>>p>>r;\n    if(m==0 && t1==0 && p==0 && r==0) break;\n    record record[t1];\n    for(int i=0;i<t1;i++){\n      record[i].team=i+1;\n      record[i].solve=0;\n      record[i].time=0;\n    }\n    \n    for(int i=0;i<r;i++){\n      cin>>m>>t2>>p>>f;\n      if(f==0){\n\trecord[t2-1].solve++;\n\trecord[t2-1].time+=m+getPenalty(record[t2-1],p);\n      }else{\n\trecord[t2-1].wa.push_back(p);\n      }\n    }\n    \n    sort(record,record+t1,cmp);\n    \n    for(int i=0;i<t1;i++){\n      printf(\"%d\",record[i].team);\n      if(i==t1-1) break;\n      if(record[i].solve!=record[i+1].solve)\n\tprintf(\",\");\n      else{\n\tif(record[i].time!=record[i+1].time) printf(\",\");\n\telse printf(\"=\");\n      }\n    }\n    puts(\"\");\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<string>\n#include<vector>\n#include<tuple>\n#include<set>\n#include<map>\n#include<algorithm>\nusing namespace std;\n\nstruct Record {\n  int tid, pid, time;\n  bool correct;\n};\n\nstruct Team {\n  Team() {\n    penalty = 0;\n  }\n  set<int> solved;\n  map<int, int> WA;\n  int penalty;\n};\n\n// Solved Problems, Penalty, Team ID\ntypedef tuple<int, int, int> Score;\n\nint main() {\n  int M, T, P, R;\n  while (cin >> M >> T >> P >> R && M) {\n    vector<Record> records(R);\n    for (int i = 0; i < R; i++) {\n      int m, t, p, j;\n      cin >> m >> t >> p >> j;\n      records[i].pid = --p;\n      records[i].tid = --t;\n      records[i].time = m;\n      records[i].correct = (j == 0);\n    }\n\n    vector<Team> teams(T);\n    for (Record r : records) {\n      if (teams[r.tid].solved.find(r.pid) != teams[r.tid].solved.end()) {\n        continue;\n      } else if (r.correct) {\n        teams[r.tid].solved.insert(r.pid);\n        teams[r.tid].penalty +=\n          teams[r.tid].WA[r.pid] * 20 + r.time;\n      } else {\n        teams[r.tid].WA[r.pid]++;\n      }\n    }\n\n    vector<Score> team_result(T);\n    for (int i = 0; i < T; i++) {\n      get<0>(team_result[i]) = -teams[i].solved.size();\n      get<1>(team_result[i]) = teams[i].penalty;\n      get<2>(team_result[i]) = -i;\n    }\n\n    sort(team_result.begin(), team_result.end());\n\n    for (int i = 0, len = team_result.size(); i < len; i++) {\n      Score s = team_result[i];\n      if (i > 0) {\n        Score p = team_result[i - 1];\n        cout << \n          (get<0>(p) == get<0>(s) && get<1>(p) == get<1>(s)?\"=\":\",\");\n      }\n      cout << -get<2>(s)+1;\n    }\n    cout << endl;\n  }\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstdio>\n#include<algorithm>\n#include<cmath>\n#include<vector>\n#include<map>\n#include<string>\nusing namespace std;\nstruct team{int m;\n                   int t;\n                   int p;\n                   int j;\n                   };\nint A[100000];\nvector<int>G;\ntypedef vector<pair<int,int> >P;\n\nint main(){\n\tint M,T,P,R;\n\tvector<pair<int,int> > sum;\n\tcin>>M;\n\tcin>>T;\n\tcin>>P;\n\tcin>>R;\n\tint ms[R];\n    team A[R];\n    for(int i=0;i<R;i++){\n\t\tscanf(\"%d%d%d%d\",&A[i].m,&A[i].t,&A[i].p,&A[i].j);\n\t}\n\tfor(int i=0;i<T;i++){\n\t\tsum.push_back(make_pair(0,i));\n\t}\n\tfor(int i=0;i<T;i++){\n\t\tms[i]=0;\n\t\tfor(int k=0;k<R;k++){\n\t\t\tif(A[k].t==i){\n\t\t\t\tms[i]+=A[i].m;\n\t\t\t\tif(A[k].j==0){\n\t\t\t\t\tsum[i].first+=1;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tsort(sum.begin(),sum.end());\n    for(int i=0;i<T;i++){\n    \tprintf(\"%d\",sum[i].second);\n    }\n   }\n\t\t\t\n\t\t\t\t\n\t\t\t\n\t\n\t\t\t"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n  \nusing namespace std;\ntypedef long long ll;\n  \n#define rep(i, n) for(int i=0; i<(n); ++i)\n \nclass team {\npublic:\n    int id, solve, time, miss[11];\n    bool operator<(const team & rhs) const{\n        if(solve > rhs.solve) return true;\n        else if(solve==rhs.solve && time < rhs.time) return true;\n        else if(solve==rhs.solve && time == rhs.time && id > rhs.id) return true;\n        return false;\n    }\n};\nint main(void){\n    int M, T, P, R;\n    int m, t, p, j;\n    team teams[51];\n    while(cin >> M >> T >> P >> R && M) {\n        rep(i, T) {\n            teams[i].id = i+1;\n            teams[i].solve = 0;\n            teams[i].time = 0;\n            rep(j, P+1) teams[i].miss[j] = 0;\n        }\n        rep(i, R) {\n            cin >> m >> t >> p >> j;\n            t--;\n            if(j == 0) {\n                teams[t].solve++;\n                teams[t].time += m + teams[t].miss[p] * 20;\n            } else {\n                teams[t].miss[p]++;\n            }\n        }\n        sort(teams, teams+T);\n        rep(i, T-1) {\n            cout << teams[i].id;\n            if(teams[i].solve==teams[i+1].solve && teams[i].time==teams[i+1].time) {\n                cout << \"=\";\n            } else {\n                cout << \",\";\n            }\n        }\n        cout << teams[T-1].id << endl;\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define int long long\n#define double long double\n#define INF 1e18\n#define MOD 1000000007\nusing namespace std;\nint time_sum[100][100],\n    is_ac[100][100];\nsigned main() {\n  int N, T, P, R;\n  while (cin>>N>>T>>P>>R, N+T+P+R) {\n    for (int i = 0; i < 100; i++) {\n      for (int j = 0; j < 100; j++) {\n        time_sum[i][j] = 0;\n        is_ac[i][j] = 0;\n      }\n    }\n\n    for (int i = 0; i < R; i++) {\n      int m, t, p, j;\n      cin >> m >> t >> p >> j;\n      t--;p--;\n      if (j != 0) {\n        time_sum[t][p] += 20; \n      } else {\n        time_sum[t][p] += m;\n        is_ac[t][p] = 1;\n      }\n    }\n    \n    vector<pair<int,int>> ans(T);\n    for (int i = 0; i < T; i++) {\n      int time = 0;\n      for (int j = 0; j < P; j++) {\n        time += is_ac[i][j]*time_sum[i][j];\n        time -= is_ac[i][j]*R*100;\n      }\n      ans[i] = make_pair(time, -(i+1));\n    }\n    sort(ans.begin(), ans.end());\n    for (int i = 0; i < T-1; i++) {\n      cout << -ans[i].second;\n      if (ans[i+1].first == ans[i].first) {\n        cout << \"=\";\n      } else {\n        cout << \",\";\n      }\n    }\n    cout << -ans[T-1].second << endl;\n     \n  }\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n#define rep(i, n) for (int i = 0; i < (n); i++)\n#define REP(i, s, n) for (int i = (s); i < (n); i++)\n#define all(co) begin(co), end(co)\n\nint main() {\n\tint m,t,p,r;\nwhile (cin >> m >> t >> p >> r && m) {\n\tvector<vector<int>> v(t, vector<int>(p));\n\trep(i, r) {\n\t\tint m, t, p, j; cin >> m >> t >> p >> j;\n\t\tt--;\n\t\tif (j == 0) {\n\t\t\tif(v[t][p] == 0) v[t][p] = m;\n\t\t\telse v[t][p] = m + -v[t][p] * 20;\n\t\t}\n\t\telse v[t][p]--;\n\t}\n\tmap<int, vector<int>> rank;\n\trep(i, t) {\n\t\tint s = -accumulate(all(v[i]), 0);\n\t\tif(rank.count(s)) rank[s].push_back(i + 1);\n\t\telse rank.emplace(s, vector<int>{i+1});\n\t}\n\tfor(auto it = rank.begin(); it != --rank.end(); it++) {\n\t\tauto& v = it->second;\n\t\trep(i, v.size() - 1) cout << v.at(i) << '=';\n\t\tcout << v.back();\n\t\tcout << ',';\n\t}\n\t{\n\t\tauto it = --rank.end();\n\t\tauto& v = it->second;\n\t\trep(i, v.size() - 1) cout << v.at(i) << '=';\n\t\tcout << v.back();\n\t}\n\tcout << endl;\n}\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <map>\n#include <set>\n#include <string>\n#include <queue>\n#include <stack>\n#include <algorithm>\n#include <cmath>\n#include <cstring>\n\nusing namespace std;\n\nint main() {\n    int M, T, P, R;\n    while (cin >> M >> T >> P >> R&& M + T + P + R){\n        int num_solved[T];\n        int num_wrong[T][P];\n        int total_time[T];\n\n        memset(num_solved, 0, sizeof(num_solved));\n        memset(num_wrong, 0, sizeof(num_wrong));\n        memset(total_time, 0, sizeof(total_time));\n\n        for (int i = 0; i < R; i++){\n            int m, t, p, j;\n            cin >> m >> t >> p >> j; t--; p--;\n            if (j == 0){\n                num_solved[t]++;\n                total_time[t] += num_wrong[t][p] * 20 + m;\n            } else {\n                num_wrong[t][p]++;\n            }\n        }\n\n        vector<pair<pair<int, int>, int> > vs; \n\n        for (int i = 0; i < T; i++){\n            vs.push_back(make_pair(make_pair(-num_solved[i], total_time[i]), -i)); \n        }\n        sort(vs.begin(), vs.end());\n\n        for (int i = 0; i < T; i++){\n            if (i > 0){\n                if (vs[i].first == vs[i - 1].first){\n                    cout << \"=\";\n                } else {\n                    cout << \",\";\n                }\n            }\n            cout << -vs[i].second + 1 ;\n        }\n        cout << endl; \n    }\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\n#define loop(n, i) for(int i=0;i<n;i++)\n#define all(v) v.begin(),v.end()\n#define HERE cout << \"HERE: \" << __LINE__ << endl;\n#define INSP(v) cout << v << \" at \" << __LINE__ << endl;\n\nusing namespace std;\ntypedef long long ll;\n\n\nint main()\n{\n    int M, T, P, R;\n    while (cin >> M >> T >> P >> R, M) {\n        vector<vector<int>> result(T, vector<int>(3+P,0));\n        loop(T,i) result[i][0] = i+1;\n        loop(R,i) {\n             int m, t, p, j;\n             cin >> m >> t >> p >> j;\n             if (j) {\n                 if (result[t-1][p+2] != -1) result[t-1][p+2]++;\n             } else {\n                 if (result[t-1][p+2] != -1) {\n                     result[t-1][1]++;\n                     result[t-1][2] += result[t-1][p+2]*20 + m;\n                     result[t-1][p+2] = -1;\n                 }\n             }\n        }\n        \n        sort(all(result),\n                [](vector<int> a, vector<int> b) {\n                    if(a[1] != b[1]) return a[1] > b[1];\n                    if(a[2] != b[2]) return a[2] < b[2];\n                    return a[0] > b[0];\n                });\n            \n        loop(T,i) {\n            cout << result[i][0];\n            if (i==T-1) {\n                cout << endl;\n            } else if (result[i][1] == result[i+1][1]\n                    && result[i][2] == result[i+1][2])\n                cout << '=';\n            else cout << ',';\n        }\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#define N 2002\nusing namespace std;\nstruct team{\n  int tnum;\n  int correct;\n  int time;\n};\nint main(){\n  int m,t,p,r,im[N],it[N],ip[N],ij[N],incorrect,i,j;\n  struct team data[51];\n  while(1){\n    cin >> m >> t >> p >> r;\n    if(m==0&&t==0&&p==0&&r==0) break;\n    for(i=0;i<r;i++) cin >> im[i] >> it[i] >> ip[i] >> ij[i];\n    for(i=1;i<=t;i++){\n      data[i].tnum=i;\n      data[i].correct=0;\n      data[i].time=0;\n    }\n    for(i=0;i<r;i++){\n      if(ij[i]==0){\n\tdata[it[i]].correct++;\n      \tincorrect=0;\n\tfor(j=0;j<i;j++){\n\t  if(it[i]==it[j]&&ip[i]==ip[j]) incorrect++;\n\t}\n\tdata[it[i]].time=data[it[i]].time+incorrect*20+im[i];\n      }\n    }\n    for(i=0;i<=t;i++){\n      for(j=2;j<=t;j++){\n\tif(data[j].tnum>data[j-1].tnum) swap(data[j],data[j-1]);\n      }\n    }\n    for(i=0;i<=t;i++){\n      for(j=2;j<=t;j++){\n\tif(data[j].time<data[j-1].time) swap(data[j],data[j-1]);\n      }\n    }\n    for(i=0;i<=t;i++){\n      for(j=2;j<=t;j++){\n\tif(data[j].correct>data[j-1].correct) swap(data[j],data[j-1]);\n      }\n    }\n    for(i=1;i<t;i++){\n      cout << data[i].tnum;\n      if(data[i].correct==data[i+1].correct&&data[i].time==data[i+1].time)\n\tcout << '=';\n      else cout << ',';\n      if(i==t-1) cout << data[i+1].tnum;\n    }\n    cout << endl;\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n#include <cstring>\nusing namespace std;\n\nint M, T, P, R;\nint wa[55][15]; // team, pena\nint solved[55];\nint pena[55];\n\nbool cmp(int i, int j) {\n    return make_pair(make_pair(-solved[i], pena[i]), -i) < make_pair(make_pair(-solved[j], pena[j]), -j);\n}\n\nbool equal(int i, int j) {\n    return make_pair(-solved[i], pena[i]) == make_pair(-solved[j], pena[j]);\n}\n\nint main() {\n    while (cin >> M >> T >> P >> R) {\n        if (T == 0) break;\n        memset(wa, 0, sizeof(wa));\n        memset(solved, 0, sizeof(solved));\n        memset(pena, 0, sizeof(pena));\n        for (int i = 0; i < R; ++i) {\n            int m, t, p, j; cin >> m >> t >> p >> j; --t;\n            if (j == 0) {\n                ++solved[t];\n                pena[t] += m + wa[t][p];\n            }\n            else {\n                wa[t][p] += 20;\n            }\n        }\n        \n        vector<int> vec(T);\n        for (int i = 0; i < T; ++i) vec[i] = i;\n        sort(vec.begin(), vec.end(), cmp);\n        for (int i = 0; i < T; ++i) {\n            if (i > 0) {\n                if (equal(vec[i-1], vec[i])) cout << \"=\";\n                else cout << \",\";\n            }\n            cout << vec[i] + 1;\n        }\n        cout << endl;\n    }\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n\nusing namespace std;\n\ntypedef pair< int, int> pii;\ntypedef pair< int, pii> piii;\n\nint M, T, P, R;\n\nint main() {\n\twhile (1) {\n\t\tcin >> M >> T >> P >> R; if (M==0 && T==0 && P==0 && R==0) break;\n\t\t\n\t\tvector<piii> pv(T);\n\t\tvector< vector<int> > end(T, vector<int>(P, 0) );\n\t\tfor (int i = 0; i < T; i++) pv[i] = make_pair(0, make_pair(0, i + 1) );\n\t\tfor (int i = 0; i < R; i++) {\n\t\t\tint m, t, p, j; cin >> m >> t >> p >> j;\n\t\t\tif (end[t-1][p-1] > 0) continue;\n\t\t\tif (m > M) continue;\n\t\t\tif (j==0) {\n\t\t\t\tpv[t-1].first++;\n\t\t\t\tpv[t-1].second.first -= m;\n\t\t\t\tend[t-1][p-1] = (-1)*end[t-1][p-1];\n\t\t\t} else {\n\t\t\t\tend[t-1][p-1]--;\n\t\t\t}\n\t\t}\n\n\t\tfor (int i = 0; i < T; i++) {\n\t\t\tfor (int j = 0; j < P; j++) {\n\t\t\t\tif (end[i][j] <= 0) continue;\n\t\t\t\tpv[i].second.first -= 20 * end[i][j];\n\t\t\t}\n\t\t}\n\n\t\tsort(pv.begin(), pv.end());\n\t\tfor (int i = T-1; i >= 0; i--) {\n\t\t\tif (i > 0 && pv[i].first == pv[i-1].first && pv[i].second.first == pv[i-1].second.first) {\n\t\t\t\tcout << pv[i].second.second << \"=\";\n\t\t\t} else {\n\t\t\t\tcout << pv[i].second.second;\n\t\t\t\tif (i > 0) cout << \",\";\n\t\t\t}\n\t\t}\n\t\tcout << endl;\n\t}\t\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\nusing namespace std;\n\nstruct data{\n  int ac,pe,id;\n  bool operator == (const data& p) const{\n    return ac==p.ac && pe==p.pe;\n  }\n  bool operator < (const data& p) const{\n    if(ac!=p.ac)return ac>p.ac;\n    if(pe!=p.pe)return pe<p.pe;\n    return id>p.id;\n  }\n};\n\nint wa_cnt[51][11];\n\ndata team[51];\n\nvoid init();\n\nint main(){\n  int M,T,P,R;\n  while(1){\n    cin>>M>>T>>P>>R;\n    if(M==0&&T==0&&P==0&&R==0)break;\n    init();\n    for(int i=0;i<R;i++){\n      int m,t,p,j;\n      cin>>m>>t>>p>>j;t--;\n      if(m>M)continue;\n      if(j==0){\n\tteam[t].ac++;\n\tteam[t].pe+=(wa_cnt[t][p]*20);\t\n\tteam[t].pe+=m;\n      }else{\n\twa_cnt[t][p]++;\n      }\n    }\n\n    sort(team,team+T);\n    for(int i=0;i<T;i++){\n      if(i>0){\n\tif(team[i-1]==team[i])cout<<'=';\n\telse cout<<',';\n      }\n      cout<<team[i].id;\n    }\n    cout<<endl;\n  }\n  return 0;\n}\n\nvoid init(){\n  for(int i=0;i<51;i++)for(int j=0;j<11;j++)wa_cnt[i][j]=0;\n  for(int i=0;i<51;i++){\n    team[i].id=i+1;\n    team[i].pe=team[i].ac=0;\n  }\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <cstdio>\n#include <iostream>\n#include <map>\n#include <cmath>\n#include <queue>\n#include <set>\n#include <sstream>\n#include <stack>\n#include <string>\n#include <vector>\n#include <stdlib.h>\n#include <stdio.h>\n#include <bitset>\n#include <cstring>\nusing namespace std;\n#define FOR(I,A,B) for(int I = (A); I < (B); ++I)\n#define CLR(mat) memset(mat, 0, sizeof(mat))\ntypedef long long ll;\ntypedef pair<ll, int> pll;\n\nint main()\n{\n  int M,T,P,R;\n  while(cin>>M>>T>>P>>R,M||T||P||R) {\n    int A[T+1],times[T+1],pena[T+1],miss[T+1][P+1];\n    CLR(A);CLR(times);CLR(pena);CLR(miss);\n    FOR(i,0,R) {\n      int m, t, p, j;\n      cin >> m >> t >> p >> j;\n      if(j==0) {\n        A[t]++;\n        times[t] += m;\n        pena[t] += miss[t][p] * 20;\n      } else {\n        miss[t][p]++;\n      }\n    }\n    vector<pll> score(T);\n    FOR(i,1,T+1) {\n      ll s = A[i] * 1000000 - pena[i] - times[i];\n      score[i-1] = pll(s, i);\n    }\n    sort(score.rbegin(), score.rend());\n    int j = 1;\n    ll now = score[0].first;\n    vector<vector<int> > ans(T+1);\n    FOR(i,0,T) {\n      if(now > score[i].first) {\n        j++;\n        now = score[i].first;\n      }\n      ans[j].push_back(score[i].second);\n    }\n    FOR(i,1,T+1) {\n      if((int)ans[i].size() > 0) {\n        if(i!=1) cout << ',';\n        vector<int> pr;\n        FOR(j,0,(int)ans[i].size()) {\n          pr.push_back(ans[i][j]);\n        }\n        sort(pr.rbegin(), pr.rend());\n        FOR(j,0,(int)pr.size()) {\n          if(j!=0) cout<<'=';\n          cout << pr[j];\n        }\n      }\n    }\n    cout << '\\n';\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n\nusing namespace std;\n\nint main() {\n    while(true) {\n        int M, T, P, R;\n        cin >> M >> T >> P >> R;\n\n        if(M == 0 && T==0 && P == 0 && R == 0) return 0;\n\n        int m, t, p, j;\n        int result[T];\n        fill(result, result + T, 0);\n        int time[T];\n        fill(time, time + T, 0);\n        int failure[T];\n        fill(failure, failure + T, 0);\n        for (int submit = 0; submit < R; submit++) {\n            cin >> m >> t >> p >> j;\n            if (j == 0) {\n                result[t - 1] += 1;\n                time[t - 1] += m + failure[t - 1] * 20;\n            } else {\n                ++failure[t - 1];\n            }\n        }\n\n        bool done[T];\n        fill(done, done + T, false);\n        int prevPoint, prevTime;\n        for (int count = 0; count < T; count++) {\n            int maxPoint = -1;\n            int maxTeam = 0;\n            int minTime = 100000;\n            for (int i = T - 1; i >= 0; i--) {\n                if (done[i]) continue;\n                if (maxPoint < result[i]) {\n                    maxPoint = result[i];\n                    maxTeam = i + 1;\n                    minTime = time[i];\n                } else if (maxPoint == result[i]) {\n                    if (minTime > time[i]) {\n                        minTime = time[i];\n                        maxTeam = i + 1;\n                    }\n                }\n            }\n            minTime = time[maxTeam - 1];\n            if (count != 0) {\n                if (maxPoint == prevPoint && minTime == prevTime) cout << \"=\";\n                else cout << \",\";\n            }\n            cout << maxTeam;\n            done[maxTeam - 1] = true;\n            prevPoint = maxPoint;\n            prevTime = minTime;\n        }\n        cout << endl;\n    }\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <climits>\n#include <cmath>\n#include <cstdio>\n#include <cstdlib>\n#include <cstring>\n#include <functional>\n#include <iostream>\n#include <map>\n#include <ostream>\n#include <queue>\n#include <set>\n#include <stack>\n#include <string>\n#include <vector>\n#define INF 1000000000\n#define rep(i,a,b) for (int i=(a);i<(b);i++)\n#define rev(i,a,b) for (int i=(a)-1;i>=b;i--)\nusing namespace std;\ntypedef long long ll;\ntypedef pair<int, int> pii;\ntypedef queue<int> qi;\ntypedef vector<int> vi;\ntypedef vector<string> vs;\nint dx[4] = { 0, 1, 0, -1 };\nint dy[4] = { 1, 0, -1, 0 };\n\nint ac[50] = {0};\nint ac2[50][10] = {0};\nint wa[50][10] = {0};\nint ti[50] = {0};\n\nbool func(int a, int b) {\n\ta--;\n\tb--;\n\n\tif(ac[a] > ac[b]) return true;\n\telse if(ac[a] < ac[b]) return false;\n\telse {\n\t\tif(ti[a] < ti[b]) return true;\n\t\telse if(ti[a] > ti[b]) return false;\n\t\telse {\n\t\t\tif(a > b) return true;\n\t\t\telse return false;\n\t\t}\n\t}\n}\n\nint main() {\n\tcin.tie(0);\n\tios::sync_with_stdio(false);\n\n\twhile(true) {\n\n\n\t\tint M,T,P,R;\n\t\tcin >> M >> T >> P >> R;\n\t\tif(!(M || T || P || R)) break;\n\n\t\tvi rank(T);\n\t\trep(i,0,T) {\n\t\t\trank[i] = i+1;\n\t\t\tac[i] = 0;\n\t\t\tti[i] = 0;\n\t\t\trep(j,0,P) {\n\t\t\t\tac2[i][j] = 0;\n\t\t\t\twa[i][j] = 0;\n\t\t\t}\n\t\t}\n\n\t\trep(i,0,R) {\n\t\t\tint m,t,p,j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tif(j == 0) {\n\t\t\t\tac[t-1]++;\n\t\t\t\tac2[t-1][p-1] = 1;\n\t\t\t\tti[t-1] = m;\n\t\t\t\trep(j,0,P) if(ac2[t-1][j] == 1) ti[t-1] += wa[t-1][j] * 20;\n\t\t\t}\n\t\t\telse wa[t-1][p-1]++;\n\t\t}\n\n\t\tsort(rank.begin(), rank.end(), func);\n\n\t\trep(i,0,rank.size()-1) {\n\t\t\tcout << rank[i];\n\t\t\tif(ac[rank[i]-1] > ac[rank[i+1]-1]) cout << ',';\n\t\t\telse if(ti[rank[i]-1] < ti[rank[i+1]-1]) cout << ',';\n\t\t\telse cout << '=';\n\t\t}\n\t\tcout << rank[rank.size()-1] <<endl;\n\n\t}\n\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#define  _CRT_SECURE_NO_WARNINGS\n#include <stdio.h>\n#include <algorithm>\n#include <utility>\n#include <functional>\n#include <cstring>\n#include <queue>\n#include <stack>\n#include <math.h>\n#include <iterator>\n#include <vector>\n#include <string>\n#include <set>\n#include <math.h>\n#include <iostream> \n#include <random>\n#include<map>\n#include <iomanip>\n#include <time.h>\n#include <stdlib.h>\n#include <list>\n#include <typeinfo>\n#include <list>\n#include <set>\n#include <cassert>\n#include<fstream>\n#include <unordered_map>  \nusing namespace std;\n#define Ma_PI 3.141592653589793\n#define eps 0.00000000000000000000000001\n#define LONG_INF 10000000000000000\n#define GOLD 1.61803398874989484820458\n#define MAX_MOD 1000000007\n#define REP(i,n) for(long long i = 0;i < n;++i)\nint main() {\n#define int long long \n\twhile (true) {\n\t\tint m, t, p, r;\n\t\tcin >> m >> t >> p >> r;\n\t\tint penalty[1000][1000] = {};\n\t\ttuple<int, int, int> team_info[1000] = {};\n\t\tif (m == 0) return 0;\n\t\tREP(i, r) {\n\t\t\tint a, b, c, d;\n\t\t\tcin >> a >> b >> c >> d;\n\t\t\tif (d == 0) {\n\t\t\t\t//Accepted\n\t\t\t\tget<0>(team_info[b]) += 1;//AC counter up\n\t\t\t\tget<2>(team_info[b]) += penalty[c][b];\n\t\t\t\tget<1>(team_info[b]) += a + penalty[c][b] * 20;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tpenalty[c][b]++;\n\t\t\t}\n\t\t}\n\t\tvector<tuple<int, int, int>> sortings;//AC,Time,number\n\t\tfor (int i = 1; i <= t; ++i) {\n\t\t\tsortings.push_back(make_tuple(get<0>(team_info[i]), get<1>(team_info[i]) * -1, i));\n\t\t}\n\t\tsort(sortings.begin(), sortings.end(), greater<tuple<int, int, int>>());\n\t\tqueue<int> teaming;\n\t\tpair<int, int> now_back = make_pair(-1, -1);\n\t\tfor (int i = 0; i < sortings.size(); ++i) {\n\t\t\tif (now_back == make_pair(get<0>(sortings[i]), get<1>(sortings[i]))) {\n\t\t\t\tteaming.push(get<2>(sortings[i]));\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (teaming.empty() == false) {\n\t\t\t\t\tint ok = 1;\n\t\t\t\t\twhile (teaming.empty() == false) {\n\t\t\t\t\t\tif (ok == 0) {\n\t\t\t\t\t\t\tcout << \"=\";\n\t\t\t\t\t\t}\n\t\t\t\t\t\tok = 0;\n\t\t\t\t\t\tcout << teaming.front();\n\t\t\t\t\t\tteaming.pop();\n\t\t\t\t\t}\n\t\t\t\t\tcout << \",\";\n\t\t\t\t}\n\t\t\t\tteaming.push(get<2>(sortings[i]));\n\t\t\t\tnow_back = make_pair(get<0>(sortings[i]), get<1>(sortings[i]));\n\t\t\t}\n\t\t}\n\t\tif (teaming.empty() == false) {\n\t\t\tint ok = 1;\n\t\t\twhile (teaming.empty() == false) {\n\t\t\t\tif (ok == 0) {\n\t\t\t\t\tcout << \"=\";\n\t\t\t\t}\n\t\t\t\tok = 0;\n\t\t\t\tcout << teaming.front();\n\t\t\t\tteaming.pop();\n\t\t\t}\n\t\t}\n\t\tcout << endl;\n\t}\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n#include <vector>\n#include <string>\nusing namespace std;\ntypedef long long int ll;\n\nint tim[55];\nint solved[55][12];\nint WA[55][12];\nint cnt[55];\nint m,t,p,r;\nint main(){\n\twhile(1){\n\t\tcin >> m >>t >> p >>r;\n\t\tif(m==0)break;\n\t\tfor(int i=0;i<t;i++){\n\t\t\ttim[i]=0;\n\t\t\tcnt[i]=0;\n\t\t}\n\t\tfor(int i=0;i<t;i++){\n\t\t\tfor(int j=0;j<p;j++){\n\t\t\t\tsolved[i][j]=0;\n\t\t\t\tWA[i][j]=0;\n\t\t\t}\n\t\t}\n\t\tfor(int i=0;i<r;i++){\n\t\t\tint mk,tk,pk,jk;\n\t\t\tcin >> mk >> tk >> pk >> jk;\n\t\t\ttk--; pk--;\n\t\t\tif(jk==0){\n\t\t\t\tsolved[tk][pk]=1;\n\t\t\t\ttim[tk]+=mk;\n\t\t\t}\n\t\t\telse{\n\t\t\t\tWA[tk][pk]++;\n\t\t\t}\n\t\t}\n\t\tfor(int i=0;i<t;i++){\n\t\t\tfor(int j=0;j<p;j++){\n\t\t\t\tif(solved[i][j]){\n\t\t\t\t\tcnt[i]++;\n\t\t\t\t\ttim[i]+=WA[i][j]*20;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tvector<pair<int,pair<int,int> > > rank;\n\t\tfor(int i=0;i<t;i++){\n\t\t\trank.push_back(make_pair(-cnt[i],make_pair(tim[i],-(i+1))));\n\t\t}\n\t\tsort(rank.begin(),rank.end());\n\t\tfor(int i=0;i<t;i++){\n\t\t\tif(i)cout << \",\";\n\t\t\tcout << -rank[i].second.second;\n\t\t\twhile(i+1<t&&rank[i].first==rank[i+1].first&&rank[i].second.first==rank[i+1].second.first){\n\t\t\t\ti++;\n\t\t\t\tcout << \"=\";\n\t\t\t\tcout << -rank[i].second.second;\n\t\t\t}\n\t\t}\n\t\tcout << endl;\n\t}\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\ntypedef pair<int, int> P;\ntypedef pair<int, pair<int, int>> S;\nint wa[51][11];\nint OK[11];\nvector<S> v;\n\n//比較関数\nbool comp(S lhs, S rhs){\n\tif(lhs.first != rhs.first){\n\t\treturn lhs.first < rhs.first;\n\t}\n\tif(lhs.second.first != rhs.second.first){\n\t\treturn lhs.second.first > rhs.second.first;\n\t}\n\tif(lhs.second.second != rhs.second.second){\n\t\treturn lhs.second.second < rhs.second.second;\n\t}\n}\n\nint main(){\nwhile(1){//start\n\t\n\tint M, T, P, R;\n\tcin >> M >> T >> P >> R;\n\tif(M == 0 and T == 0 and P == 0 and R == 0) break;\n\n\t//初期化\n\tv.resize(T);\n\tfor(int i = 0; i < 51; i++){\n\t\tfor(int j = 0; j < 11; j++) wa[i][j] = 0;\n\t}\n\tfor(int i = 0; i < 11; i ++) OK[i] = 0;\n\t\n\t\n\t//データを格納\n\tfor(int i = 0; i < R; i++){\n\t\tint m, t, p, j;\n\t\tcin >> m >> t >> p >> j;\n\n\t\tif(j == 0){\n\t\t\tv[t - 1].second.first += m + 20*wa[t][p]; \n\t\t\tOK[t-1] += 1;\n\t\t}\n\t\telse{\n\t\t\twa[t][p] += 1;\n\t\t}\n\t}\n\t\n\t//vectorにデータを入れる\n\tfor(int i = 1; i <= T; i++){\n\t\t//v.push_back(make_pair(OK[i-1], make_pair(sum_m, i)));\n\t\tv[i-1].first = OK[i-1];\n\t\tv[i-1].second.second = i;\n\t}\n\t\n\tsort(v.begin(), v.end(), comp);\n\treverse(v.begin(), v.end());\n\n\tcout << 1 << endl;\n}//end\t\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\n#include<functional>\n#include<vector>\n#include<string>\n#include<map>\n#include<queue>\nusing namespace std;\n#define REP(i, a, n) for(int i=a; i<n; i++)\n#define RREP(i, a, n) for(int i=n-1; i>=a; i--)\n#define INF 1000000000\n#define MP(a, b) make_pair(a, b)\n#define F first\n#define S second\n\nint main() {\n\tint M, T, P, R;\n\twhile (cin >> M >> T >> P >> R) {\n\t\tvector<pair<int, pair<int, int>>> vp;\n\t\tint pena[51][11];\n\n\t\tREP(i, 0, T) vp.push_back(MP(0, MP(0, i + 1)));\n\t\tREP(i, 0, 51) REP(j, 0, 11) pena[i][j] = 0;\n\n\t\tREP(i, 0, R) {\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tt--;\n\t\t\tp--;\n\n\t\t\tif (j == 0) {\n\t\t\t\tvp[t].F++;\n\t\t\t\tvp[t].S.F -= (pena[t][p] + m);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tpena[t][p] += 20;\n\t\t\t}\n\t\t}\n\n\t\tsort(vp.begin(), vp.end());\n\t\treverse(vp.begin(), vp.end());\n\n\t\tcout << vp[0].S.S;\n\t\tREP(i, 1, vp.size()) {\n\t\t\tif (vp[i - 1].F > vp[i].F) {\n\t\t\t\tcout << \",\" << vp[i].S.S;\n\t\t\t}\n\t\t\telse if (vp[i - 1].S.F > vp[i].S.F) {\n\t\t\t\tcout << \",\" << vp[i].S.S;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcout << \"=\" << vp[i].S.S;\n\t\t\t}\n\t\t}\n\n\t\tcout << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <iostream>\n\n#define MAX_PROBLEM 10\n#define MAX_TEAM 50\n\nusing namespace std;\n\nstruct Team {\n\tint num;\n\tint min;\n\tint point;\n\tbool prob[MAX_PROBLEM];\n\tint judge[MAX_PROBLEM];\n};\n\nbool lessTeam(const Team &l, const Team &r) {\n\tif (l.point < r.point) { return false; }\n\tif (l.point > r.point) { return true; }\n\n\tif (l.min < r.min) { return true; }\n\tif (l.min > r.min) { return false; }\n\n\tif (l.num < r.num) { return false; }\n\tif (l.num > r.num) { return true; }\n}\n\nint main(void) {\n\tfor (;;) {\n\t\tint M, T, P, R;\n\t\tcin >> M >> T >> P >> R;\n\t\tif (M == 0 && T == 0 && P == 0 && R == 0) {\n\t\t\tbreak;\n\t\t}\n\n\t\tTeam team[MAX_TEAM];\n\t\tfor (int i = 0; i < T; i++) {\n\t\t\tteam[i].num = i + 1;\n\t\t\tteam[i].min = 0;\n\t\t\tteam[i].point = 0;\n\t\t\tfor (int j = 0; j < MAX_PROBLEM; j++) {\n\t\t\t\tteam[i].prob[j] = false;\n\t\t\t\tteam[i].judge[j] = 0;\n\t\t\t}\n\t\t}\n\n\t\tfor (int i = 0; i < R; i++) {\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\t\n\t\t\tif (j == 0) {\n\t\t\t\tteam[t - 1].min += m;\n\t\t\t\tteam[t - 1].prob[p - 1] = true;\n\t\t\t\tteam[t - 1].point++;\n\t\t\t} else {\n\t\t\t\tteam[t - 1].judge[p - 1]++;\n\t\t\t}\n\t\t}\n\n\t\tfor (int i = 0; i < T; i++) {\n\t\t\tfor (int j = 0; j < P; j++) {\n\t\t\t\tif (team[i].prob[j]) {\n\t\t\t\t\tteam[i].min += team[i].judge[j] * 20;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor (int i = 0; i < T; i++) {\n\t\t\tfor (int j = i + 1; j < T; j++) {\n\t\t\t\tif (lessTeam(team[j], team[i])) {\n\t\t\t\t\tTeam tmp = team[i];\n\t\t\t\t\tteam[i] = team[j];\n\t\t\t\t\tteam[j] = tmp;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor (int i = 0; i < T - 1; i++) {\n\t\t\tprintf(\"%d\", team[i].num);\n\t\t\tif (team[i].point == team[i + 1].point && team[i].min == team[i + 1].min) {\n\t\t\t\tprintf(\"=\");\n\t\t\t} else {\n\t\t\t\tprintf(\",\");\n\t\t\t}\n\t\t}\n\t\tprintf(\"%d\\n\", team[T-1].num);\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <algorithm>\n#include <vector>\n#include <cstring>\n#include <string>\n\nusing namespace std;\n\nconst int MAX_P=10,MAX_T=50,MAX_R=2000;\nconst int MAX_CASE=100;\n\nstruct data{\n\tint ans;\t//??£?§£??°\n\tint time;\t//????????????\n\tint pena[MAX_P];\t//??????i?????????????????£???\n\tint index;\t//???????????????\n};\n\nbool comp(const data &a,const data &b){\n\tif (a.ans!=b.ans)\n\t\treturn a.ans>b.ans;\n\tif (a.time!=b.time)\n\t\treturn a.time<b.time;\n\treturn a.index>b.index;\n}\n\nbool same(const data &a,const data &b){\n\tif (a.ans==b.ans && a.time==b.time){\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nint A[MAX_CASE],B[MAX_CASE],C[MAX_CASE],D[MAX_CASE];\nint ma[MAX_CASE][MAX_R],ta[MAX_CASE][MAX_R],pa[MAX_CASE][MAX_R],ja[MAX_CASE][MAX_R];\n\ndata d[MAX_T];\n\nint main(){\n\tint q=0;\n\tdo{\n\t\tint n,t,p,r;\n\t\tscanf(\"%d %d %d %d\",A+q,B+q,C+q,D+q);\n\t\tfor (int i=0;i<D[q];i++){\n\t\t\tscanf(\"%d %d %d %d\",&ma[q][i],&ta[q][i],&pa[q][i],&ja[q][i]);\n\t\t}\n\t\tq++;\n\t}while (A[q-1]!=0);\n\tint N,T,P,R;\n\tfor (int k=0;k<q;k++){\n\t\tN=A[k],T=B[k],P=C[k],R=D[k];\n\t\tfor (int i=0;i<T;i++){\n\t\t\td[i].ans=d[i].time=0;\n\t\t\td[i].index=i+1;\n\t\t\tmemset(d[i].pena,0,sizeof(d[i].pena));\n\t\t}\n\t\tfor (int i=0;i<R;i++){\n\t\t\tint m,t,p,j;\n\t\t\tm=ma[k][i],t=ta[k][i],p=pa[k][i],j=ja[k][i];\n\t\t\tdata &da=d[t-1];\n\t\t\tif (j==0){\n\t\t\t\t//??£?§£\n\t\t\t\tda.time+=m+da.pena[p-1];\n\t\t\t\tda.ans++;\n\t\t\t}\n\t\t\telse{\n\t\t\t\t//?????£?§£\n\t\t\t\tda.pena[p-1]+=20;\t//??????????????£???\n\t\t\t}\n\t\t}\n\t\tsort(d,d+T,comp);\n\t\tfor (int i=0;i<T;i++){\n\t\t\tif (i){\n\t\t\t\tif (same(d[i],d[i-1])){\n\t\t\t\t\tprintf(\"=\");\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tprintf(\",\");\n\t\t\t\t}\n\t\t\t}\n\t\t\tprintf(\"%d\",d[i].index);\n\t\t}\n\t\tif (k!=q-1)\n\t\t\tprintf(\"\\n\");\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <iostream>\n#include <cmath>\n#include <ctype.h>\n#include <string> \n#include <sstream>\n#include <iostream>\n#include <algorithm>\n#include <cstdlib>\n#include <map>\n#include <queue>\n#include <utility>\n#include <vector>\n\nusing namespace std;\nvector<pair<int , pair<int, int> > > score(51);\nint wrongans[51];\n\nint main()\n{\n\tint M, T, P, R;\n\twhile(1){\n\t\tcin >> M >> T >> P >> R;\n\t\tif(M == 0 && T == 0 && P == 0 && R == 0) break;\n\t\tfor(int i = 1; i <= T; i++){\n\t\t\tscore[i].first = 0;\n\t\t\t(score[i].second).first = 0;\n\t\t\t(score[i].second).second = -i;\n\t\t}\n\t\tint wrongans[51][11] = {0};\n\t\tint m, t, p, j;\n\t\tfor(int i = 0; i < R; i++){\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tif(j == 0){\n\t\t\t\tscore[t].first--;\n\t\t\t\t(score[t].second).first += m + (20 * wrongans[t][p]);\n\t\t\t} else {\n\t\t\t\twrongans[t][p]++;\n\t\t\t}\n\t\t}\n\t\tsort(score.begin() + 1, score.begin() + T + 1);\n\t\tfor(int i = 1; i <= T; i++){\n\t\t\tcout << -(score[i].second).second;\n\t\t\tif(i == T) cout << endl;\n\t\t\telse if(score[i + 1].first == score[i].first && (score[i + 1].second).first == (score[i].second).first) cout << '=';\n\t\t\telse cout << ',';\n\t\t}\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\nusing namespace std;\n\nstruct Team{\n    vector<bool> is_solve;\n    vector<int> WA;\n    int team_id, time, solved;\n    Team(){}\n    Team(int P, int id){\n        is_solve = vector<bool>(P, false);\n        WA = vector<int>(P, 0);\n        team_id = id;\n        time = 0;\n        solved = 0;\n    }\n};\nbool operator<(const Team &a, const Team &b){\n    if( a.solved == b.solved ){\n        if( a.time == b.time ){\n            return a.team_id > b.team_id;\n        }\n        return a.time < b.time;\n    }\n    return a.solved > b.solved;\n}\nbool operator==(const Team &a, const Team &b){\n    return a.solved == b.solved && a.time == b.time;\n}\n\nint main(){\n    int M, T, P, R;\n    while( cin >> M >> T >> P >> R, M ){\n        vector<Team> v;\n        for(int i = 0; i < T; i++){\n            v.push_back( Team(P, i) );\n        }\n        \n        for(int i = 0; i < R; i++){\n            int m, t, p, j;\n            cin >> m >> t >> p >> j;\n            t--; p--;\n            if( j == 0 ){ // Correct Answer\n                for(int k = 0; k < v.size(); k++){\n                    if( v[k].team_id == t ){\n                        v[k].is_solve[p] = true;\n                        v[k].solved++;\n                        v[k].time += m;\n                        v[k].time += 20 * v[k].WA[p];\n                        break;\n                    }\n                }\n            }else{ // Wrong Answer\n                for(int k = 0; k < v.size(); k++){\n                    if( v[k].team_id == t ){\n                        v[k].WA[p]++;\n                        break;\n                    }\n                }\n            }\n        }\n        \n        sort(v.begin(), v.end());\n        for(int i = 0; i < v.size(); i++){\n            if( i ){\n                bool flag = (v[i-1] == v[i]);\n                cout << (flag? \"=\" : \",\");\n            }\n            cout << v[i].team_id + 1;\n        }\n        cout << endl;\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<algorithm>\nusing namespace std; \n\nconst int maxn = 50+5;\nint M, T, P, R;\nstruct Pm\n{\n    int num;\n    int ac;\n    int time;\n};\nPm mem[maxn];\nint List[maxn][15];\n\nbool Input()\n{\n    cin >> M >> T >> P >> R;\n    if(!M && !T && !P && !R) return false;\n\n    int Time, Num, Pro, J;\n\n    for(int i = 1; i <= T; i++) mem[i].num = i;\n\n    for(int i = 1; i <= R; i++)\n    {\n        cin >> Time >> Num >> Pro >> J;\n        if(!J)\n        {\n            mem[Num].ac++;\n            mem[Num].time += Time+List[Num][Pro]*20;\n        }\n        else\n        {\n            List[Num][Pro]++;\n        }\n    }\n\n    return true;\n}\n\nbool cmp (const Pm & a, const Pm & b)\n{\n    return   a.ac > b.ac ||\n            (a.ac == b.ac && a.time < b.time) ||\n            (a.ac == b.ac && a.time == b.time && a.num > b.num);\n}\n\nvoid Print()\n{\n    for(int i = 1; i < T; i++)\n    {\n        if(mem[i].ac == mem[i+1].ac && mem[i].time == mem[i+1].time) printf(\"%d=\", mem[i].num);\n        else printf(\"%d,\", mem[i].num);\n    }\n    printf(\"%d\\n\", mem[T].num);\n}\n\nint main()\n{\n    while(1)\n    {\n        memset(mem, 0, sizeof(mem));\n        memset(List, 0, sizeof(List));\n        if(!Input()) break;\n        sort(mem+1,mem+T+1, cmp);\n        Print();\n    }\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "// 2018/01/22 Tazoe\n\n#include <iostream>\nusing namespace std;\n\nint main()\n{\n\twhile(true){\n\t\tint M, T, P, R;\n\t\tcin >> M >> T >> P >> R;\n\n\t\tif(M==0 && T==0 && P==0 && R==0)\n\t\t\tbreak;\n\n\t\tint CP[50];\n\t\tint TT[50];\n\t\tint PT[50][10];\n\t\tfor(int i=0; i<T; i++){\n\t\t\tCP[i] = TT[i] = 0;\n\n\t\t\tfor(int j=0; j<P; j++){\n\t\t\t\tPT[i][j] = 0;\n\t\t\t}\n\t\t}\n\n\t\tfor(int i=0; i<R; i++){\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >> j;\n\n\t\t\tif(j==0){\n\t\t\t\tCP[t-1]++;\n\t\t\t\tTT[t-1] += (m+PT[t-1][p-1]);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tPT[t-1][p-1] += 20;\n\t\t\t}\n\t\t}\n\n//\t\tfor(int i=0; i<T; i++){\n//\t\t\tcout << CP[i] << ' ' << TT[i] << endl;\n//\t\t}\n\n\t\tbool flg[50];\n\t\tfor(int i=0; i<T; i++){\n\t\t\tflg[i] = false;\n\t\t}\n\n\t\tint tnow, tpre = -1;\n\n\t\tfor(int i=0; i<T; i++){\n\t\t\ttnow = -1;\n\n\t\t\tfor(int j=0; j<T; j++){\n\t\t\t\tif(flg[j])\n\t\t\t\t\tcontinue;\n\n\t\t\t\tif(tnow==-1){\n\t\t\t\t\ttnow = j;\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tif(CP[j]>CP[tnow] || (CP[j]==CP[tnow] && TT[j]<=TT[tnow])){\n\t\t\t\t\t\ttnow = j;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(tpre!=-1){\n\t\t\t\tif(CP[tnow]==CP[tpre] && TT[tnow]==TT[tpre]){\n\t\t\t\t\tcout << '=';\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tcout << ',';\n\t\t\t\t}\n\t\t\t}\n\t\t\tcout << tnow+1;\n\n\t\t\tflg[tnow] = true;\n\t\t\ttpre = tnow;\n\t\t}\n\t\tcout << endl;\n\t}\n\n\treturn 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n#include <vector>\n#include <string>\nusing namespace std;\n\nstruct team{\n\tint num;\n\tint ans;\n\tdouble time;\n};\n\nbool hikaku(const team &right,const team &left){\n if(right.ans == left.ans){\n \tif(right.time == left.time){\n \t\treturn right.num > left.num;\n \t}\n \treturn right.time < left.time;\n }\n else return left.ans < right.ans;\n}\n\nint main(){\n\tint t,p,r,M;\n\tint wrong[52][12];\n\tint res[52];\n\tdouble pe[52];\n\tvector<team> v;\n\tint tid,pid,time;\n\tint hantei;\n\tteam te;\n\twhile(1){\n\t\tcin >> M >> t >> p >> r;\n\t\tif(M == 0)break;\n\t\tfor(int i = 0;i <= t;i++){\n\t\t\tres[i] = 0;\n\t\t\tpe[i] = 0;\n\t\t\tfor(int j = 0;j <= p;j++){\n\t\t\t\twrong[i][j] = 0;\t\n\t\t\t}\n\t\t}\n\t\tv.clear();\n\t\tfor(int i = 0;i < r;i++){\n\t\t\tcin >> time >> tid >> pid >> hantei;\n\t\t\tif(hantei == 0){\n\t\t\t\tres[tid]++;\n\t\t\t\tpe[tid] += wrong[tid][pid] * 20 + time;\n\t\t\t}\n\t\t\telse if(hantei != 0){\n\t\t\t\twrong[tid][pid]++;\n\t\t\t}\n\t\t}\n\t\tfor(int i = 1;i <= t;i++){\n\t\t\tte.num = i;\n\t\t\tte.ans = res[i];\n\t\t\tte.time = pe[i];\n\t\t\tv.push_back(te);\n\t\t}\n\t\tsort(v.begin(),v.end(),hikaku);\n\t\tfor(int i = 0;i < v.size();i++){\n\t\t\tcout << v[i].num;\n\t\t\tif(i != v.size()-1){\n\t\t\t\tif(v[i].ans == v[i+1].ans && v[i].time == v[i+1].time){\n\t\t\t\t\tcout << \"=\";\n\t\t\t\t}\n\t\t\t\telse cout << \",\";\n\t\t\t}\n\t\t}\n\t\tcout <<endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\n#define LOG(...) fprintf(stderr, __VA_ARGS__)\n//#define LOG(...)\n#define FOR(i, a, b) for (int i = (int)(a); i < (int)(b); ++i)\n#define RFOR(i, a, b) for (int i = (int)(b - 1); i >= (int)(a); --i)\n#define REP(i, n) for (int i = 0; i < (int)(n); ++i)\n#define RREP(i, n) for (int i = (int)(n - 1); i >= 0; --i)\n#define ALL(a) (a).begin(), (a).end()\n#define RALL(a) (a).rbegin(), (a).rend()\n#define EXIST(s, e) ((s).find(e) != (s).end())\n#define SORT(c) sort(ALL(c))\n#define RSORT(c) sort(RALL(c))\n#define SZ(a) ((int)(a).size())\n#define BIT(x, i) (((x) >> (i)) & 1)\n#define SQ(x) ((x) * (x))\n\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef vector<bool> vb;\ntypedef vector<int> vi;\ntypedef vector<ll> vll;\ntypedef vector<vb> vvb;\ntypedef vector<vi> vvi;\ntypedef vector<vll> vvll;\ntypedef vector<char> vc;\ntypedef vector<vc> vvc;\ntypedef vector<string> vs;\ntypedef pair<int, int> pii;\ntypedef pair<ll, ll> pll;\n\nint main() {\n    int M, T, P, R;\n    while (cin >> M >> T >> P >> R, M|T|P|R) {\n        vvi penalty(T, vi(P));\n        vector<pair<pii, int>> score(T);\n        REP(i, T) {\n            score[i] = {{0, 0}, i+1};\n        }\n\n        REP(i, R) {\n            int m, t, p, j;\n            cin >> m >> t >> p >> j;\n            t--;\n            p--;\n            if (j == 0) {\n                score[t].first.first++;\n                score[t].first.second -= m + penalty[t][p];\n            } else {\n                penalty[t][p] += 20;\n            }\n        }\n\n        RSORT(score);\n        cout << score[0].second;\n        FOR(i, 1, SZ(score)) {\n            if (score[i].first.first  == score[i-1].first.first &&\n                score[i].first.second == score[i-1].first.second) {\n                cout << \"=\";\n            } else {\n                cout << \",\";\n            }\n            cout << score[i].second;\n        }\n        cout << endl;\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<string>\n#include<vector>\n#include<tuple>\n#include<set>\n#include<map>\n#include<algorithm>\nusing namespace std;\n\nstruct Record {\n  int tid, pid, time;\n  bool correct;\n};\n\nstruct Team {\n  Team() {\n    penalty = 0;\n  }\n  set<int> solved;\n  map<int, int> WA;\n  int penalty;\n};\n\n// Solved Problems, Penalty, Team ID\ntypedef tuple<int, int, int> Score;\n\nint main() {\n  int M, T, P, R;\n  while (cin >> M >> T >> P >> R && M) {\n    vector<Record> records(R);\n    for (int i = 0; i < R; i++) {\n      int m, t, p, j;\n      cin >> m >> t >> p >> j;\n      records[i].pid = --p;\n      records[i].tid = --t;\n      records[i].time = m;\n      records[i].correct = (j == 0);\n    }\n\n    vector<Team> teams(T);\n    for (Record r : records) {\n      if (teams[r.tid].solved.find(r.pid) != teams[r.tid].solved.end()) {\n        continue;\n      } else if (r.correct) {\n        teams[r.tid].solved.insert(r.pid);\n        teams[r.tid].penalty +=\n          teams[r.tid].WA[r.pid] * 20 + r.time;\n      } else {\n        teams[r.tid].WA[r.pid]++;\n      }\n    }\n\n    vector<Score> team_result(T);\n    for (int i = 0; i < T; i++) {\n      get<0>(team_result[i]) = -teams[i].solved.size();\n      get<1>(team_result[i]) = teams[i].penalty;\n      get<2>(team_result[i]) = -i;\n    }\n\n    sort(team_result.begin(), team_result.end());\n\n    for (int i = 0, len = team_result.size(); i < len; i++) {\n      Score s = team_result[i];\n      if (i > 0) {\n        Score p = team_result[i - 1];\n        cout << \n          (get<0>(p) == get<0>(s) && get<1>(p) == get<1>(s)?\"=\":\",\");\n      }\n      cout << -get<2>(s)+1;\n    }\n    cout << endl;\n  }\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n#include <cstdio>\n\n#define REP(i,n) for( int i = 0; i < n; i++ )\n\n\nusing namespace std;\n\n/*\n より多くの問題に正解したチームを上位とする．\n 正解した問題数が同じ場合は，所要時間合計の少ないチームを上位とする．\n 複数のチームが同数の問題に正解し，所要時間合計も同じなら，それらのチームを同順位とする．\n */\n\nstruct team{\n\tint ans,time,name;\n    int q[50]={0};\n    \n\tteam() : ans(0), time(0), name(0) {}\n    \n    bool operator <( const team& Right )const {\n        return  ans != Right.ans ? ans < Right.ans :\n        time != Right.time ? time > Right.time :\n        name <  Right.name;\n    }\n};\n\n\nint main()\n{\n\tint M,T,P,R;\n\t// Mは，コンテストの始まりから終わりまでの時間である． Tは，チーム数である． Pは，問題数である． Rは，提出記録の数である\n\twhile( cin >> M >> T >> P >> R )\n\t{\n\t\tint m,t,p,k;\n\t\tvector<team> team_array(T+1);\n\t\tif( T == 0 ) return 0;\n\t\tfor( int i = 1; i <= T; i++)\n\t\t\tteam_array[i].name = i;\n\t\t// mkは，経過時間である． tkは，チーム番号である． pkは，問題番号である． jkは，判定結果を表す（0なら正解，0以外なら不正解）\n\t\tREP(i,R)\n\t\t{\n\t\t\tcin >> m >> t >> p >> k;\n\t\t\tteam &tm = team_array[t];\n\t\t\tif( !k ){\n\t\t\t\ttm.ans++;\n\t\t\t\ttm.time += m;\n                if( tm.q[p] )\n                    tm.time += 20 * tm.q[p];\n\t\t\t}\n            else{\n                tm.q[p]++;\n            }\n            \n\t\t}\n\t\t\n        sort( team_array.begin() + 1 , team_array.end() );\n\t\t\n        for( int i = T; i > 0; i-- )\n        {\n            char c;\n            if( i == 1 ){\n                cout << team_array[i].name << endl;\n                continue;\n            }\n            else if ( team_array[i].ans == team_array[i-1].ans &&\n                team_array[i].time == team_array[i-1].time) {\n                c = '=';\n            }\n            else{\n                c = ',';\n            }\n\t\t\tcout << team_array[i].name << c;\n        }\n        \n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n\nusing namespace std;\n\nclass Team{\npublic:\n  int id, pr, pe;\n  Team(){}\n  Team(int id, int pr, int pe): id(id), pr(pr), pe(pe){}\n  bool operator < (const Team &t) const {\n    if(pr != t.pr) return pr > t.pr;\n    if(pe != t.pe) return pe < t.pe;\n    return id > t.id;\n  }\n  bool operator == (const Team &t) const {\n    return pr == t.pr && pe == t.pe;\n  }\n};\n\nconst int N = 50;\n\nint M, T, P, R;\nbool sc[N][10];\nint cnt[N][10];\nTeam team[N];\n\nmain(){\n  while(cin >> M >> T >> P >> R && (M|T|P|R)){\n    for(int i=0;i<T;i++) team[i] = Team(i, 0, 0);\n    fill(sc[0], sc[N], false);\n    fill(cnt[0], cnt[N], 0);\n    for(int i=0;i<R;i++){\n      int m, t, p, j;\n      cin >> m >> t >> p >> j;\n      t--; p--;\n      if(j) cnt[t][p]++;\n      else if(!sc[t][p]){\n        sc[t][p] = true;\n        team[t].pr++;\n        team[t].pe += m + 20 * cnt[t][p];\n      }\n    }\n    sort(team, team+T);\n    cout << team[0].id+1;\n    for(int i=1;i<T;i++) cout << (team[i-1] == team[i] ? '=' : ',') << team[i].id+1;\n    cout << endl;\n  }\n}"
  },
  {
    "language": "C++",
    "code": "#ifdef LOCAL\n    #define _GLIBCXX_DEBUG\n    #define __clock__\n#else\n    #pragma GCC optimize(\"Ofast\")\n#endif\n#include<bits/stdc++.h>\nusing namespace std;\nusing ll = long long;\nusing VI = vector<ll>;\nusing VV = vector<VI>;\nusing VS = vector<string>;\nusing PII = pair<ll, ll>;\n\n// tourist set\ntemplate <typename A, typename B>\nstring to_string(pair<A, B> p);\n\ntemplate <typename A, typename B, typename C>\nstring to_string(tuple<A, B, C> p);\n\ntemplate <typename A, typename B, typename C, typename D>\nstring to_string(tuple<A, B, C, D> p);\n\nstring to_string(const string& s) {\n  return '\"' + s + '\"';\n}\n\nstring to_string(const char* s) {\n  return to_string((string) s);\n}\n\nstring to_string(bool b) {\n  return (b ? \"true\" : \"false\");\n}\n\nstring to_string(vector<bool> v) {\n  bool first = true;\n  string res = \"{\";\n  for (int i = 0; i < static_cast<int>(v.size()); i++) {\n    if (!first) {\n      res += \", \";\n    }\n    first = false;\n    res += to_string(v[i]);\n  }\n  res += \"}\";\n  return res;\n}\n\ntemplate <size_t N>\nstring to_string(bitset<N> v) {\n  string res = \"\";\n  for (size_t i = 0; i < N; i++) {\n    res += static_cast<char>('0' + v[i]);\n  }\n  return res;\n}\n\ntemplate <typename A>\nstring to_string(A v) {\n  bool first = true;\n  string res = \"{\";\n  for (const auto &x : v) {\n    if (!first) {\n      res += \", \";\n    }\n    first = false;\n    res += to_string(x);\n  }\n  res += \"}\";\n  return res;\n}\n\ntemplate <typename A, typename B>\nstring to_string(pair<A, B> p) {\n  return \"(\" + to_string(p.first) + \", \" + to_string(p.second) + \")\";\n}\n\ntemplate <typename A, typename B, typename C>\nstring to_string(tuple<A, B, C> p) {\n  return \"(\" + to_string(get<0>(p)) + \", \" + to_string(get<1>(p)) + \", \" + to_string(get<2>(p)) + \")\";\n}\n\ntemplate <typename A, typename B, typename C, typename D>\nstring to_string(tuple<A, B, C, D> p) {\n  return \"(\" + to_string(get<0>(p)) + \", \" + to_string(get<1>(p)) + \", \" + to_string(get<2>(p)) + \", \" + to_string(get<3>(p)) + \")\";\n}\n\nvoid debug_out() { cerr << '\\n'; }\n\ntemplate <typename Head, typename... Tail>\nvoid debug_out(Head H, Tail... T) {\n  cerr << \" \" << to_string(H);\n  debug_out(T...);\n}\n\n#ifdef LOCAL\n#define debug(...) cerr << \"[\" << #__VA_ARGS__ << \"]:\", debug_out(__VA_ARGS__)\n#else\n#define debug(...) 42\n#endif\n// tourist set end\n\ntemplate<class T>bool chmax(T &a, const T &b) { if (a<b) { a=b; return 1; } return 0; }\ntemplate<class T>bool chmin(T &a, const T &b) { if (b<a) { a=b; return 1; } return 0; }\n\n#define FOR(i,a,b) for(ll i=(a);i<(b);++i)\n#define rep(i,b) FOR(i, 0, b)\n#define ALL(v) (v).begin(), (v).end()\n#define p(s) cout<<(s)<<'\\n'\n#define p2(s, t) cout << (s) << \" \" << (t) << '\\n'\n#define br() p(\"\")\n#define pn(s) cout << (#s) << \" \" << (s) << '\\n'\n#define p_yes() p(\"YES\")\n#define p_no() p(\"NO\")\n#define SZ(x) ((int)(x).size())\n#define SORT(A) sort(ALL(A))\n#define RSORT(A) sort(ALL(A), greater<ll>())\n#define MP make_pair\n\nll SUM(VI& V){\n  return accumulate(ALL(V), 0LL);\n}\n\nvoid print_vector(VI& V){\n  ll n = V.size();\n  rep(i, n){\n    if(i) cout << ' ';\n    cout << V[i];\n  }\n  cout << endl;\n}\n\nll gcd(ll a,ll b){\n    if(b == 0) return a;\n    return gcd(b,a%b);\n}\n\nll lcm(ll a,ll b){\n    ll g = gcd(a,b);\n    return a / g * b;\n}\n\nvoid no(){p_no(); exit(0);}\nvoid yes(){p_yes(); exit(0);}\n\nconst ll mod = 1e9 + 7;\nconst ll inf = 1e18;\nconst double PI = acos(-1);\n\nstruct Data{\n  ll idx;\n  ll ac;\n  ll time;\n  bool operator<(const Data &another) const{\n    if(ac==another.ac && time==another.time){\n      // 全部同じならidの大きい順\n      return idx > another.idx;\n    }else if(ac!=another.ac){\n      return ac > another.ac; // AC多いほうがいい\n    }else{\n      return time < another.time; // time少ないほうがいい\n    }\n  }\n  string ToString(){\n    stringstream ss;\n    ss << idx << ' ' << ac << ' ' << time;\n    return ss.str();\n  }\n};\n\nll Pena[50][15];\nvoid reset(){\n  rep(i,50)rep(j,15)Pena[i][j]=0;\n}\n\nint main(){\n    cin.tie(0);\n    ios::sync_with_stdio(false);\n\n    // input\n    ll M,T,P,R;\n\n    while(cin>>M>>T>>P>>R){\n      if(M==0) return 0;\n\n      // T : team num\n      vector<Data> V(T); // (AC, -time)で逆ソートする\n      rep(i,T){\n        V[i].idx = i;\n      }\n\n      reset();\n      \n      rep(i,R){\n        ll m,t,p,judge;\n        cin>>m>>t>>p>>judge;\n        t--; // team id\n\n        if(judge!=0){\n          // penalty\n          Pena[t][p]++;\n          continue;\n        }\n\n        // AC\n        V[t].ac++; // AC\n        //chmax(V[t].time, m + 20*Pena[t][p]); // time\n        V[t].time += m + 20*Pena[t][p];\n      }\n\n      sort(ALL(V));\n\n      // for(auto data : V){\n      //   p(data.ToString());\n      // }\n\n      cout << V[0].idx+1;\n      FOR(i,1,T){\n        if(V[i].ac==V[i-1].ac && V[i].time==V[i-1].time){\n          cout << '=' << V[i].idx+1;\n        }else{\n          cout << ',' << V[i].idx+1;  \n        }\n      }\n      cout << endl;\n    }    \n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n#define int long long   // <-----!!!!!!!!!!!!!!!!!!!\n\n#define rep(i,n) for (int i=0;i<(n);i++)\n#define rep2(i,a,b) for (int i=(a);i<(b);i++)\n#define rrep(i,n) for (int i=(n)-1;i>=0;i--)\n#define rrep2(i,a,b) for (int i=(b)-1;i>=(a);i--)\n#define all(a) (a).begin(),(a).end()\n\ntypedef long long ll;\ntypedef pair<int, int> Pii;\ntypedef tuple<int, int, int> TUPLE;\ntypedef vector<int> V;\ntypedef vector<V> VV;\ntypedef vector<VV> VVV;\n\nbool eqPii(const Pii& p, const Pii& q) {\n    return p.first == q.first && p.second == q.second;\n}\n\nsigned main() {\n    std::ios::sync_with_stdio(false);\n    std::cin.tie(0);\n\n    int M, T, P, R;\n    while (cin >> M >> T >> P >> R, M) {\n        VV score(T, V(P, 0));\n        VV done(T, V(P, 0));\n        rep(i, R) {\n            int m, t, p, j;\n            cin >> m >> t >> p >> j;\n            t--; p--;\n            score[t][p] += (j == 0 ? m : 20);\n            if (j == 0) done[t][p] = 1;\n        }\n\n        V ac(T);\n        rep(t, T) {\n            ac[t] = accumulate(all(done[t]), 0);\n        }\n\n        V pena(T, 0);\n        rep(t, T) {\n            rep(p, P) {\n                if (done[t][p]) pena[t] += score[t][p];\n            }\n        }\n\n        vector<pair<Pii, int>> v;\n        rep(t, T) {\n            v.emplace_back(make_pair(Pii(-ac[t], pena[t]), -(t + 1)));\n        }\n        sort(all(v));\n\n        rep(i, T) {\n            cout << -v[i].second;\n            if (i + 1 == T) continue;\n            if (i + 1 < T && eqPii(v[i].first, v[i + 1].first)) {\n                cout << \"=\";\n            } else {\n                cout << \",\";\n            }\n        }\n        cout << endl;\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstdio>\n#include<string>\n#include<queue>\n#include<stack>\n#include<cstdlib>\n#include<algorithm>\n#include<cmath>\n\n#define rep(n,cnt) for(int cnt=0;cnt<n;++cnt)\n\nusing namespace std;\n\ntemplate <typename TYPE>\nvoid printArray(TYPE* array, int size){\n  rep(size,i) cout << array[i] << \"\\t\" << flush;\n  cout << endl;\n}\n\nint StringToInt(string str){\n  return atoi(str.c_str());\n}\n\ndouble factorial(double n){\n  double sum=1;\n  for(int i=n;i>=1;i--){\n    sum = i*sum;\n  }\n  return sum;\n}\n\ndouble combination(double n, double k){\n  double denominator = 1;\n  for(int i=n,j=0;j<k;j++,i--) denominator*=i;\n  return denominator/factorial(k);\n}\n\n#define MAX_M 300\n#define MAX_T 50\n#define MAX_P 10\n#define MAX_R 2000\n\nclass Team{\npublic:\n    int num;\n    int collect;\n    int time;\n    int wa[MAX_P];\n};\n\nint M,T,P,R;\nint m[MAX_R],t[MAX_R],p[MAX_R],j[MAX_R];\nTeam team[MAX_T];\n\nint main(){\n    while(1){\n\tcin >> M;\n\tcin >> T;\n\tcin >> P;\n\tcin >> R;\n\tif(M == 0 && T == 0 && P == 0 && R == 0) return 0;\t\n        \n\trep(T,i){\n\t    team[i].num = i+1;\n\t    team[i].collect = 0;\n            team[i].time = 0;\n\t    rep(5,j){\n\t\tteam[i].wa[j] = 0;\n\t    }\n\t}\n\n\trep(R,i){\n            cin >> m[i];\n\t    cin >> t[i];\n\t    cin >> p[i];\n\t    cin >> j[i];\n\t}\t\n        \n\trep(R,i){\n            if(j[i] == 0){\n\t\tteam[t[i]-1].collect++;\n\t\tteam[t[i]-1].time += m[i] + team[t[i]-1].wa[p[i]-1];\n\t    }\n\t    else{\n\t\tteam[t[i]-1].wa[p[i]-1] += 20;\n\t    }\n\t}\n\n\tfor(int i=0;i<T;i++){\n\t    for(int j=T-1;j>=i;j--){\n\t\tif(team[i].collect < team[j].collect){\n\t\t    Team buf = team[i];\n                    team[i] = team[j];\n\t\t    team[j] = buf;\n\t\t}\n\t    }\n\t}\n\n\tfor(int i=0;i<T;i++){\n\t    for(int j=T-1;j>=i;j--){\n\t\tif(team[i].collect == team[j].collect && team[i].time > team[j].time){\n\t\t    Team buf = team[i];\n                    team[i] = team[j];\n\t\t    team[j] = buf;\n\t\t}\n\t    }\n\t}\n\n\tfor(int i=0;i<T;i++){\n\t    for(int j=T-1;j>=i;j--){\n\t\tif(team[i].time == team[j].time && team[i].collect == team[j].collect && team[i].num < team[j].num){\n\t\t    Team buf = team[i];\n                    team[i] = team[j];\n\t\t    team[j] = buf;\n\t\t}\n\t    }\n\t}\n\n\tcout << team[0].num;\n\tfor(int i=1;i<T;i++){\n            if(team[i].collect == team[i-1].collect && team[i].time == team[i-1].time){\n\t\tcout << \"=\" << team[i].num;\n\t    }\n\t    else{\n                cout << \",\" << team[i].num;\n\t    }\n\t}\n\tcout << endl;\n    }\n}\n    "
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstdio>\n#include <vector>\n#include <functional>\nusing namespace std;\n\ntypedef pair<int, int> P;\n\ntypedef struct{\n\tint id;\n\tint solve;\n\tint time;\n\tint penal[20];\n\tint sort_s;\n\tint sort_t;\n}Team;\n\nTeam teams[100];\nvector< P > ssolve;\n\nint main(void){\n\twhile(1){\n\t\tint m, t, p, r;\n\t\tcin >> m >> t >> p >> r;\n\t\tif(m == 0 && t == 0 && p == 0 && r == 0) break;\n\n\t\tssolve.clear();\n\t\tfor(int i=0; i<t; i++){\n\t\t\tteams[i].id = i;\n\t\t\tteams[i].solve = 0;\n\t\t\tteams[i].time = 0;\n\t\t\tfor(int j=0; j<p; j++){\n\t\t\t\tteams[i].penal[j] = 0;\n\t\t\t}\n\t\t}\n\n\t\tfor(int i=0; i<r; i++){\n\t\t\tint tm, tt, tp, tj;\n\t\t\tcin >> tm >> tt >> tp >> tj;\n\n\t\t\ttt--;\n\t\t\tif(tj == 0){\n\t\t\t\tteams[tt].solve++;  \n\t\t\t\tteams[tt].time += tm;\n\t\t\t\tif(teams[tt].penal[tp] != 0) {\n\t\t\t\t\tteams[tt].time += teams[tt].penal[tp];\n\t\t\t\t\tteams[tt].penal[tp] = 0;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tteams[tt].penal[tp] += 20;\n\t\t\t}\n\n\t\t}\n\n\t\t/*\n\t\tfor(int i=0; i<t; i++){\n\t\t\tssolve.push_back(P(teams[i].solve, i));\n\t\t\t//cout << \"sol:\" << teams[i].time << endl;\n\t\t}\n\t\tsort(ssolve.begin(), ssolve.end(), greater<P>());\n\n\t\tint cnt = 0;\n\t\tteams[ssolve[0].second].sort_s = cnt;\n\t\tint same_s = ssolve[0].first;\n\t\tfor(int i=1; i<t; i++){\n\t\t\tif(same_s == ssolve[i].first){\n\t\t\t\tteams[ssolve[i].second].sort_s = teams[ssolve[i-1].second];\n\t\t\t}else{\n\t\t\t\tcnt++;\n\t\t\t\tteams[ssolve[i].second].sort_s = cnt;\n\t\t\t}\n\t\t}\n\n\t\t//time?????????????????????\n\t\tfor(int i=0; i<t; i++){\n\t\t\tstime.push_back(P(teams[i].time, i));\n\t\t\t//cout << \"sol:\" << teams[i].time << endl;\n\t\t}\n\t\tsort(stime.begin(), stime.end());\n\t\tcnt = 0;\n\t\tteams[stime[0].second].sort_t = cnt;\n\t\tint same_t = stime[0].first;\n\t\tfor(int i=1; i<t; i++){\n\t\t\tif(same_t == stime[i].first){\n\t\t\t\tteams[stime[i].second].sort_t = teams[stime[i-1].second];\n\t\t\t}else{\n\t\t\t\tcnt++;\n\t\t\t\tteams[stime[i].second].sort_t = cnt;\n\t\t\t}\n\t\t}\n\t\t*/\n\n\t\t/*\n\t\tfor(int i=0; i<t; i++){\n\t\t\tprintf(\"%d %d\\n\", ssolve[i].first, ssolve[i].second + 1);\n\n\t\t}\n\t\t*/\n\n\t\tfor(int i=0; i<t-1; i++){\n\t\t\tfor(int j=t-1; j>i; j--){\n\t\t\t\tif(teams[j].solve > teams[j-1].solve){\n\t\t\t\t\tTeam tmp = teams[j];\n\t\t\t\t\tteams[j] = teams[j-1];\n\t\t\t\t\tteams[j-1] = tmp;\n\t\t\t\t}else if(teams[j].solve == teams[j-1].solve && teams[j].time < teams[j-1].time){\n\t\t\t\t\tTeam tmp = teams[j];\n\t\t\t\t\tteams[j] = teams[j-1];\n\t\t\t\t\tteams[j-1] = tmp;\n\t\t\t\t}else if(teams[j].solve == teams[j-1].solve && teams[j].time == teams[j-1].time && teams[j].id > teams[j-1].id){\n\t\t\t\t\tTeam tmp = teams[j];\n\t\t\t\t\tteams[j] = teams[j-1];\n\t\t\t\t\tteams[j-1] = tmp;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor(int i=0; i<t; i++){\n\t\t\tprintf(\"%d\", teams[i].id + 1);\n\t\t\tif(i + 1 != t){\n\t\t\t\tif(teams[i+1].solve != teams[i].solve){\n\t\t\t\t\tprintf(\",\");\n\t\t\t\t}else if(teams[i+1].solve == teams[i].solve && teams[i+1].time != teams[i].time){\n\t\t\t\t\tprintf(\",\");\n\t\t\t\t}else{\n\t\t\t\t\tprintf(\"=\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tputs(\"\");\n\n\t}\n\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#include <numeric>\n#include <vector>\n\nusing namespace std;\n\nint main()\n{\n    while (true) {\n        int M, T, P, R;\n        cin >> M >> T >> P >> R;\n        if (M == 0 && T == 0 && P == 0 && R == 0) {\n            return 0;\n        }\n\n        struct Problem {\n            int time = -1;\n            int incorrect = 0;\n        };\n\n        vector<vector<Problem>> data(T, vector<Problem>(P));\n        for (int i = 0; i < R; ++i) {\n            int m, t, p, j;\n            cin >> m >> t >> p >> j;\n\n            if (j == 0) {\n                data[t - 1][p - 1].time = m;\n            }\n            else {\n                data[t - 1][p - 1].incorrect += 1;\n            }\n        }\n\n        struct Team {\n            int id = 0;\n            int correct = 0;\n            int time = 0;\n        };\n\n        vector<Team> teams(T);\n        for (int i = 0; i < T; ++i) {\n            teams[i].id = i;\n            teams[i].correct = accumulate(begin(data[i]), end(data[i]), 0,\n                                          [](int z, const Problem& pp) {\n                                              return pp.time >= 0 ? z + 1 : z;\n                                          });\n            teams[i].time = accumulate(\n                begin(data[i]), end(data[i]), 0, [](int z, const Problem& pp) {\n                    return pp.time >= 0 ? z + pp.time + 20 * pp.incorrect : z;\n                });\n        }\n\n        sort(begin(teams), end(teams), [](const Team& a, const Team& b) {\n            if (a.correct == b.correct) {\n                if (a.time == b.time) {\n                    return a.id > b.id;\n                }\n                else {\n                    return a.time < b.time;\n                }\n            }\n            else {\n                return a.correct > b.correct;\n            }\n        });\n\n        for (size_t i = 0; i < teams.size(); ++i) {\n            if (i > 0) {\n                if (teams[i - 1].correct == teams[i].correct &&\n                    teams[i - 1].time == teams[i].time) {\n                    cout << '=';\n                }\n                else {\n                    cout << ',';\n                }\n            }\n            cout << (teams[i].id + 1);\n        }\n        cout << endl;\n    }\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define endl '\\n';\n#define rep(i,n) for(int i=0; i<(n); i++)\nusing namespace std;\nusing ll = long long;\nusing P = pair<int,int>;\n#pragma GCC target(\"sse,sse2,sse3,ssse3,sse4,popcnt,abm,mmx,avx,tune=native\")\n#pragma GCC optimize(\"Ofast\")\nconstexpr ll INF = 1e18;\nconstexpr int inf = 1e9;\nconstexpr double INFD = 1e100;\nconstexpr ll mod = 1000000007;\nconstexpr ll mod2 = 998244353;\nconst double PI = 3.1415926535897932384626433832795028841971;\nconst int dx[4] = {1, 0, -1, 0};\nconst int dy[4] = {0, 1, 0, -1};\ntemplate<class T> inline bool chmax(T& a, T b) { if (a < b) { a = b; return 1; } return 0; }\ntemplate<class T> inline bool chmin(T& a, T b) { if (a > b) { a = b; return 1; } return 0; }\n// ios::sync_with_stdio(false);\n// cin.tie(nullptr);\n// ---------------------------------------------------------------------------\n\n\nint main(){\n    ios::sync_with_stdio(false);\n    cin.tie(nullptr);\n    int M,T,p,R;\n    cin >> M >> T >> p >> R;\n    while(M != 0){\n        vector<pair<int,pair<int,int>>> G(T);\n        for(int i=0; i<T; i++){\n            G[i].second.second = i;\n        }\n        vector<vector<int>> cnt(T,vector<int> (p,0));\n        for(int i=0; i<R; i++){\n            int m,t,q,j;\n            cin >> m >> t >> q >> j;\n            t--;\n            q--;\n            if(cnt[t][q] == -1) continue;\n            if(j){\n                cnt[t][q]++;\n            }else{\n                G[t].first++;\n                G[t].second.first += (-1)*(cnt[t][q]*20+m);\n                cnt[t][q] = -1;\n            }\n        }\n        sort(G.begin(),G.end());\n        reverse(G.begin(),G.end());\n        cout << G[0].second.second+1;\n        for(int i=1; i<T; i++){\n            if(G[i-1].first == G[i].first and G[i-1].second.first == G[i].second.first){\n                cout << \"=\";\n            }else{\n                cout << \",\";\n            }\n            cout << G[i].second.second+1;\n        }\n        cout << endl;\n        cin >> M >> T >> p >> R;\n    }\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\n#include<functional>\n#include<vector>\n\nusing namespace std;\n\n#define TMAX 50\n#define PMAX 10\n\nstruct S{\n\tint ok,ti,no,wa[PMAX+1],swa;\n};\n\nbool operator<(S a,S b){\n\treturn a.ok>b.ok||a.ok==b.ok&&a.ti<b.ti||a.ok==b.ok&&a.ti==b.ti&&a.no>b.no;\n}\n\nint main(){\n\tint M,T,P,R;\n\tint m,t,p,j;\n\tvector<S> dia;\n\tS s;\n\n\n\twhile(1){\n\t\tcin>>M>>T>>P>>R;\n\t\tif(M==0&&T==0&&P==0&&R==0) break;\n\n\t\tfor(int i=0;i<=T;i++){\n\t\t\ts.no=i,s.ok=0,s.ti=0,s.swa=0;\n\t\t\tfor(int j=1;j<=P;j++) s.wa[j]=0;\n\t\t\tdia.push_back(s);\n\t\t}\n\t\tdia[0].ok=-1;\n\n\t\tfor(int i=0;i<R;i++){\n\t\t\tcin>>m>>t>>p>>j;\n\t\t\tif(j!=0) dia[t].wa[p]++;\n\t\t\telse dia[t].ti+=m,dia[t].swa+=dia[t].wa[p],dia[t].ok++;\n\t\t}\n\t\tfor(int i=1;i<=T;i++){\n\t\t\tdia[i].ti+=dia[i].swa*20;\n\t\t}\n\n\t\tsort(dia.begin(),dia.end());\n\n\t\tfor(int i=0;i<T-1;i++){\n\t\t\tif(dia[i].ti==dia[i+1].ti&&dia[i].ok==dia[i+1].ok) cout<<dia[i].no<<\"=\";\n\t\t\telse cout<<dia[i].no<<\",\";\n\t\t}\n\t\tcout<<dia[T-1].no<<endl;\n\t\tdia.clear();\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n#include <functional>\n#include <cstdlib>\n#include <sstream>\n#include <string>\n#include <set>\n#include <map>\n#include <stack>\n#include <queue>\n#include <deque>\n#include <complex>\n#include <vector>\n#include <bitset>\n#include <cstdio>\n#include <cmath>\n#include <time.h>\n#include <tuple>\n#define all(c) ((c).begin(),(c).end())\n#define rall(c) ((c).rbegin(),(c).rend())\n//#define sort(v,n) sort(v,v+n)\n#define ll long long\n#define fi first\n#define se second\n#define inf 999999999\nusing namespace std;\nconst ll MOD = 1e9 + 7;\nconst double PI = acos(-1.0);\n//---------------------------------------------------------------------------------------------//\nint m, t, p, r;\n\nint main() {\n\twhile (cin >> m >> t >> p >> r, m) {\n\t\tint wa[55][11];\n\t\tbool ac[55][11];\n\t\tvector<pair<int,pair<int,int>>> vp(t);\n\t\tfor (int i = 0; i < t; i++) {\n\t\t\tvp[i].first = 0;\n\t\t\tvp[i].second.first = 0;\n\t\t\tvp[i].second.second = i+1;\n\t\t}\n\t\tfor (int i = 0; i < 55; i++) {\n\t\t\tfor (int j = 0; j < 11; j++) {\n\t\t\t\tac[i][j] = 0;\n\t\t\t\twa[i][j] = 0;\n\t\t\t}\n\t\t}\n\t\tfor (int i = 0; i < r; i++) {\n\t\t\tint m1, t1, p1, j;\n\t\t\tcin >> m1 >> t1 >> p1 >> j;\n\t\t\tif (j == 0) {\n\t\t\t\t\tac[t1][p1] = 1;\n\t\t\t\t\tvp[t1-1].first++;\n\t\t\t\t\tvp[t1-1].second.first -= (m1 + 20 * wa[t1][p1]);\n\t\t\t}\n\t\t\telse {\n\t\t\t\twa[t1][p1]++;\n\t\t\t}\n\t\t}\n\t\tsort(vp.rbegin(), vp.rend());\n\t\tint preac = -1;\n\t\tint pret = inf;\n\t\tfor (int i = 0; i < t; i++) {\n\t\t\tif (preac != vp[i].first) {\n\t\t\t\tif (i != 0)cout << \",\";\n\t\t\t\tcout << vp[i].second.second;\n\t\t\t\tpret = vp[i].second.first;\n\t\t\t\tpreac = vp[i].first;\n\t\t\t}\n\t\t\telse if (pret != vp[i].second.first) {\n\t\t\t\tif (i != 0)cout << \",\";\n\t\t\t\tcout << vp[i].second.second;\n\t\t\t\tpreac = vp[i].fi;\n\t\t\t\tpret = vp[i].second.first;\n\t\t\t}else {\n\t\t\t\t\tcout << \"=\" << vp[i].second.second;\n\t\t\t\t}\n\t\t\t}\n\t\tcout << endl;\n\t\t}\n\treturn 0;\n\t}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <stdio.h>\n#include <sstream>\n#include <string>\n#include <vector>\n#include <map>\n#include <queue>\n#include <algorithm>\n#include <set>\n#include <math.h>\n#include <utility>\n#include <stack>\nusing namespace std;\ntypedef pair<int,int> P;\nconst int INF = (int)((unsigned int)-1>>1);\n\nstruct team{\n    int mis[10];\n    int m,n,t;\n    team(){\n        fill(mis,mis+10,0);\n        m = 0;\n        n = 0;\n        t = 0;\n    }\n};\n\nbool cmp(const team& left, const team& right){\n    if (left.n == right.n){\n        if (left.m == right.m){\n            return left.t > right.t;\n        }else{\n            return left.m < right.m;\n        }\n    }else{\n        return left.n > right.n;\n    }\n}\n\nint main(){\n    while(1){\n        int M,T,P,R;\n        cin >> M >> T >> P >> R;\n        if (M==0)break;\n\n        vector<team> g(T);\n        for(int i=0;i<T;i++) g[i].t = i+1;\n        for(int i=0;i<R;i++){\n            int m,t,p,j;\n            cin >> m >> t >> p >>j;\n            t--;p--;\n            //printf(\"%d %d %d %d\\n\",m,t,p,j);\n            if (j==0){\n                g[t].n += 1;\n                g[t].m += m + g[t].mis[p]*20;\n            }else{\n                g[t].mis[p] += 1;\n            }\n        }\n\n        sort(g.begin(),g.end(),cmp);\n        printf(\"%d\",g[0].t);\n        for(int i=1;i<T;i++){\n            if(g[i].n == g[i-1].n && g[i].m == g[i-1].m){\n                printf(\"=%d\",g[i].t);\n            }else{\n                printf(\",%d\",g[i].t);\n            }\n        }\n        printf(\"\\n\");\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n\nusing namespace std;\n\nclass Question{\npublic:\n    bool isAC;\n    int p;\n};\nclass Team{\npublic:\n    int ID;\n    int AC;\n    int ptime;\n    vector<Question> q;\n\n    Team() : ID(-1){}\n    Team(int id,int qn)\n        : ID(id), q(qn+1)\n    {\n    }\n\n    void submit(int m,int p,int j){\n        if(j == 0){\n            q[p].p += m;\n            q[p].isAC = true;\n            AC++;\n            ptime += q[p].p;\n        }else{\n            q[p].p += 20;\n        }\n    }\n};\n\nbool operator==(const Team& a,const Team& b){\n    return a.AC == b.AC && a.ptime == b.ptime;\n}\nbool operator!=(const Team& a,const Team& b){\n    return !(a == b);\n}\n\n//M:テァツオツづ、ツコツ?ヲツ卍づゥツ鳴?\n//T:テ」ツδ?」ツδシテ」ツδ?ヲツ閉ー\n//P:テ・ツ閉湘ゥツ。ツ古ヲツ閉ー\n//R:テヲツ渉静・ツ?コテヲツ閉ー\nvoid solve(int M,int T,int P,int R){\n    vector<Team> team;\n    for(int i=1;i<=T;i++){\n        team.push_back(Team(i,P));\n    }\n    for(int i=0;i<R;i++){\n        int m,t,p,j;\n        cin >> m >> t >> p >> j;\n        team[t-1].submit(m,p,j);\n    }\n    std::sort(team.begin(),team.end(),\n            [](const Team& a,const Team& b)->bool{\n                if(a.AC < b.AC)\n                    return true;\n                if(a.AC > b.AC)\n                    return false;\n                if(a.ptime > b.ptime)\n                    return false;\n                return a.ID < b.ID;\n            }\n            );\n    std::reverse(team.begin(),team.end());\n    bool f = false;\n    cout << team[0].ID;\n    for(int i=1;i<T;i++){\n        if(team[i-1] == team[i]){\n            cout << \"=\" << team[i].ID;\n        }else{\n            cout << \",\" << team[i].ID;\n        }\n    }\n    //for(auto t : team)\n    //{\n    //    //cout << t.ID << \" :\" << t.AC << \" ,\" << t.ptime << endl;\n    //}\n    cout << endl;\n}\n\nint main(){\n    while(true){\n        int M,T,P,R;\n        cin >> M >> T >> P >> R;\n        if(!M&&!T&&!P&&!R)\n            return 0;\n        solve(M,T,P,R);\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\ntypedef pair<ll, ll> l_l;\ntypedef pair<int, int> i_i;\n\n#define EPS (1e-7)\n#define INF (1e9)\n#define PI (acos(-1))\n//const ll mod = 1000000007;\nint sum[55];\nint penalty[55][15];\nint accepted[55];\n\nint main() {\n    //cout.precision(10);\n    cin.tie(0);\n    ios::sync_with_stdio(false);\n    while(true) {\n        int M, T, P, R;\n        cin >> M >> T >> P >> R;\n        if(M == 0) break;\n        for(int i = 0; i <= T; i++) {\n            sum[i] = 0;\n            accepted[i] = 0;\n            for(int j = 0; j <= 10; j++) penalty[i][j] = 0;\n        }\n        while(R--) {\n            int m, t, p, j;\n            cin >> m >> t >> p >> j;\n            if(j != 0) {\n                penalty[t][p]++;\n            } else {\n                accepted[t]++;\n                sum[t] += m + 20 * penalty[t][p];\n            }\n        }\n        vector<i_i> ans;\n        for(int i = 1; i <= T; i++) {\n            ans.push_back({accepted[i] * 1e7 - sum[i], i});\n        }\n        sort(ans.begin(), ans.end(), greater<i_i>());\n        cout << ans[0].second;\n        for(int i = 1; i < ans.size(); i++) {\n            if(ans[i].first == ans[i-1].first) {\n                cout << \"=\" << ans[i].second;\n            } else cout << \",\" << ans[i].second;\n        }\n        cout << endl;\n    }\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\n#include<vector>\n#include<string>\n#include<set>\n#include<queue>\n#include<stack>\n#include<bitset>\n#include<functional>\n#include<map>\nusing namespace std;\n/*int p = 998244353;*/\nint p = 1000000007;\n#define int long long\n#define vel vector<long long>\n#define vvel vector<vel>\n#define rep(i,n) for(int i=0;i<n;i++)\n#define sor(v) sort(v.begin(),v.end())\n#define mmax(a,b) a=max(a,b)\n#define mmin(a,b) a=min(a,b)\n#define mkp make_pair\n#define pin pair<int,int>\n#define qin pair<pin,int>\n#define V vector\n#define Endl endl\n#define veb vector<bool>\n#define sq(a) (a)*(a)\n#define rev(s) reverse(s.begin(),s.end())\n#define end_pr(s) cout << s <<endl;return 0\n#define itn int\nint RE() {\n\tvel v(3, 2);\n\treturn v.at(4);\n}\nint ru(int a, int r) {\n\tif (r == 0) { return 1; }\n\tint ans = ru(a, r / 2);\n\tans *= ans; ans %= p;\n\tif (r % 2 == 1) { ans *= a; }\n\treturn ans % p;\n}\nint inv(int a) {\n\treturn ru(a,p - 2);\n}\nvel dis(int mid1, vvel &way) {\n\tint n = way.size();\n\tvel dist(n, -1); dist[mid1] = 0;\n\tqueue<int> q;\n\tq.push(mid1);\n\twhile (!q.empty()) {\n\t\tint st = q.front(); q.pop();\n\t\trep(i, way[st].size()) {\n\t\t\tint to = way[st][i];\n\t\t\tif (dist[to] == -1) {\n\t\t\t\tdist[to] = dist[st] + 1;\n\t\t\t\tq.push(to);\n\t\t\t}\n\t\t}\n\t}\n\treturn dist;\n}\npin most_far(int now, int n, vvel &way) {\n\tvel dist1 = dis(now, way);\n\tpin ans = mkp(-1, 0);\n\trep(i, n) {\n\t\tif (dist1[i] > ans.first) { ans = mkp(dist1[i], i); }\n\t}\n\treturn ans;\n}\n\ntemplate<typename T>\nV<T> uni(V<T> &v) {\n\tif (v.size() == 0) { return v; }\n\tsor(v);\n\tV<T> ans(1, v[0]);\n\tfor (int i = 1; i < v.size(); i++) {\n\t\tif (v[i] != v[i - 1]) { ans.push_back(v[i]); }\n\t}\n\tv = ans;\n\treturn v;\n}\nint s_gcd(int a, int b) {\n\tif (b == 0) { return a; }\n\treturn s_gcd(b, a%b);\n}\nint gcd(int a, int b) {\n\ta = abs(a);\n\tb = abs(b);\n\tif (a < b) { swap(a, b); }\n\treturn s_gcd(a, b);\n}\nsigned main() {\n\twhile (true) {\n\t\tint m, t, p, r;\n\t\tcin >> m >> t >> p >> r;\n\t\tif (m == 0) { break; }\n\t\tvvel time(t, vel(p, -1));\n\t\tvvel pena(t, vel(p, 0));\n\t\trep(i, r) {\n\t\t\tint m1, t1, p1, j1;\n\t\t\tcin >> m1 >> t1 >> p1 >> j1;\n\t\t\tt1--; p1--;\n\t\t\tif (j1 != 0) {\n\t\t\t\tpena[t1][p1]++;\n\t\t\t}\n\t\t\telse {\n\t\t\t\ttime[t1][p1] = m1;\n\t\t\t}\n\t\t}\n\t\tvel count(t, 0);\n\t\tvel sum_time(t, 0);\n\t\tV<qin> ret(t);\n\t\trep(i, t) {\n\t\t\trep(j, p) {\n\t\t\t\tif (time[i][j] != -1) {\n\t\t\t\t\tcount[i]++;\n\t\t\t\t\tsum_time[i] += time[i][j];\n\t\t\t\t\tsum_time[i] += pena[i][j] * 20;\n\t\t\t\t}\n\t\t\t}\n\t\t\tret[i] = mkp(mkp(count[i], -sum_time[i]), i);\n\t\t}\n\t\tsor(ret); rev(ret);\n\t\tcout << ret[0].second+1;\n\t\tfor (int i = 1; i < t; i++) {\n\t\t\tif (ret[i].first == ret[i - 1].first) {\n\t\t\t\tcout << \"=\" << ret[i].second+1;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcout << \",\" << ret[i].second+1;\n\t\t\t}\n\t\t}\n\t\tcout << endl;\n\t}\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <complex>\n#include <sstream>\n#include <string>\n#include <algorithm>\n#include <deque>\n#include <list>\n#include <map>\n#include <numeric>\n#include <queue>\n#include <vector>\n#include <set>\n#include <limits>\n#include <cstdio>\n#include <cctype>\n#include <cmath>\n#include <cstring>\n#include <cstdlib>\n#include <ctime>\nusing namespace std;\n#define REP(i, j) for(int i = 0; i < (int)(j); ++i)\n#define FOR(i, j, k) for(int i = (int)(j); i < (int)(k); ++i)\n#define SORT(v) sort((v).begin(), (v).end())\n#define REVERSE(v) reverse((v).begin(), (v).end())\n//#define int long long\nconst int MAX_R = 2010;\nconst int MAX_P = 15;\nconst int MAX_T = 55;\n\nclass C{\n  public:\n    int n, penalty[MAX_P], ac, time;\n    C(){\n      ac = time = 0;\n      memset(penalty, 0, sizeof(penalty));\n    }\n    bool operator<(const C &c) const{\n      if(ac != c.ac) return ac < c.ac;\n      else if(time != c.time) return time > c.time;\n      else return n < c.n;\n    }\n};\n\nint main() {\n  int M, T, P, R;\n  while(cin >>M >>T >>P >>R && M){\n    C team[MAX_T];\n    REP(i, T) team[i].n = i + 1;\n    REP(i, R){\n      int m, t, p, j; cin >>m >>t >>p >>j;\n      --t;\n      if(j == 0){\n        team[t].ac += 1;\n        team[t].time += team[t].penalty[p] + m;\n      } else team[t].penalty[p] += 20;\n    }\n    sort(team, team + T);\n    reverse(team, team + T);\n    stringstream ss;\n    REP(i, T){\n      ss << team[i].n;\n      if(i == T - 1) continue;\n      if(team[i + 1].ac == team[i].ac && team[i + 1].time == team[i].time) ss <<\"=\";\n      else ss <<\",\";\n    }\n    cout <<ss.str() <<endl;\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <stdio.h>\n#include <algorithm>\n#include <vector>\nusing namespace std;\n\n#define rep(i, j) for(int i= 0; i < j;i++)\n#define all(i) i.begin(), i.end()\n\nstruct team { int num, ac, time; };\n\n// t0<t1\nbool compare(team &t0, team &t1)\n{\n\tif (t0.ac == t1.ac) \n\t{\n\t\tif (t0.time == t1.time){ return t0.num < t1.num; }\n\t\treturn t0.time > t1.time; \n\t}\n\treturn t0.ac < t1.ac;\n}\nint main()\n{\n\tint M, T, P, R;\n\twhile (cin >> M >> T >> P >> R && (M != 0 && T != 0))\n\t{\n\t\tvector<int> m(R, 0), t(R, 0), p(R, 0), j(R, 0);\n\t\tvector<team> dat(T + 10);\n\t\tvector<vector<int>> wa(T + 10, vector<int>(P + 10, 0));\n\t\trep(i, R)\n\t\t{\n\t\t\tint tmp[4] = { 0 };\n\t\t\tcin >> tmp[0] >> tmp[1] >> tmp[2] >> tmp[3];\n\t\t\tif (tmp[3] > 0) { wa[tmp[1]][tmp[2]] += 20; }\n\t\t\telse if(tmp[3] == 0)\n\t\t\t{\n\t\t\t\tdat[tmp[1]].time += tmp[0] + wa[tmp[1]][tmp[2]];\n\t\t\t\tdat[tmp[1]].ac += 1;\n\t\t\t\tdat[tmp[1]].num = tmp[1];\n\t\t\t}\n\t\t}\n\t\trep(i, T + 1) { dat[i].num = i; }\n\t\tsort(dat.rbegin(), dat.rend(), compare);\n\t\trep(i, T)\n\t\t{\n\t\t\tif (i == T - 1){ printf(\"%d\\n\", dat[i].num); }\n\t\t\telse if(dat[i].time == dat[i+1].time && i != T - 1){ printf(\"%d=\", dat[i].num); }\n\t\t\telse{ printf(\"%d,\", dat[i].num); }\n\t\t}\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nbool comp(pair<pair<int,int>,int> p1, pair<pair<int,int>,int> p2){\n\n    if(p1.first.first == p2.first.first){\n        if(p1.first.second == p2.first.second){\n            return p1.second < p2.second;\n        }\n        return p1.first.second > p2.first.second;\n    }\n    return p1.first.first < p2.first.first;\n\n}\n\nint main() {\n\n    while(1) {\n\n        int M,T,P,R;\n\n        cin >> M >> T >> P >> R;\n\n        if(M == 0 && T == 0 && P == 0 && R == 0) break;\n\n        pair<int,int> team[T+1]; //solve_num, time\n        pair<bool,int> try_progrums[T+1][P]; //is_tried, tried_count\n\n        team[0] = make_pair(-1,-1);\n\n        for(int i=1; i<T+1; i++){\n            team[i] = make_pair(0,0);\n            for(int j=0; j<P; j++) {\n                try_progrums[i][j] = make_pair(false, 0);\n            }\n        }\n\n        for(int i=0; i<R; i++){\n\n            int m, t, p, j;\n\n            cin >> m >> t >> p >>j;\n\n            if(j == 0){\n                team[t].first++;\n                team[t].second += m + try_progrums[t][p].second * 20;\n            }\n            else{\n                try_progrums[t][p].first = true;\n                try_progrums[t][p].second++;\n\n            }\n        }\n\n        pair<pair<int,int>,int> team_result[T+1];\n\n        for(int i=0; i<T+1; i++){\n            team_result[i] = make_pair(make_pair(team[i].first,team[i].second),i);\n        }\n\n        sort(team_result,team_result+T+1,comp);\n\n        cout << team_result[T].second;\n\n        for(int i=T; i>1; i--){\n            if(team_result[i].first.first == team_result[i-1].first.first && team_result[i].first.second == team_result[i-1].first.second){\n                cout << '=' << team_result[i-1].second;\n            }\n            else{\n                cout << ',' << team_result[i-1].second;\n            }\n        }\n\n        cout << endl;\n\n\n\n\n    }\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n\nusing namespace std;\n\nclass Question{\npublic:\n    bool isAC;\n    int p;\n    Question() : isAC(false),p(0){}\n};\nclass Team{\npublic:\n    int ID;\n    int AC;\n    int ptime;\n    vector<Question> q;\n\n    Team() : ID(-1), q(vector<Question>(21)), ptime(0), AC(0) {}\n    Team(int id)\n        : ID(id), q(vector<Question>(21)) , ptime(0), AC(0)\n    {\n    }\n\n    void submit(int m,int p,int j){\n        if(j == 0){\n            q[p].p += m;\n            q[p].isAC = true;\n            AC++;\n            ptime += q[p].p;\n        }else{\n            q[p].p += 20;\n        }\n    }\n};\n\nbool operator==(const Team& a,const Team& b){\n    return a.AC == b.AC && a.ptime == b.ptime;\n}\nbool operator!=(const Team& a,const Team& b){\n    return !(a == b);\n}\n\n//M:テァツオツづ、ツコツ?ヲツ卍づゥツ鳴?\n//T:テ」ツδ?」ツδシテ」ツδ?ヲツ閉ー\n//P:テ・ツ閉湘ゥツ。ツ古ヲツ閉ー\n//R:テヲツ渉静・ツ?コテヲツ閉ー\nvoid solve(int M,int T,int P,int R){\n    vector<Team> team;\n    for(int i=1;i<=T;i++){\n        team.push_back(Team(i));\n    }\n    for(int i=0;i<R;i++){\n        int m,t,p,j;\n        cin >> m >> t >> p >> j;\n        team[t-1].submit(m,p,j);\n    }\n    std::sort(team.begin(),team.end(),\n            [](const Team& a,const Team& b)->bool{\n                if(a.AC < b.AC)\n                    return true;\n                if(a.AC > b.AC)\n                    return false;\n                if(a.ptime > b.ptime)\n                    return true;\n                return a.ID < b.ID;\n            }\n            );\n    std::reverse(team.begin(),team.end());\n    //for(auto t : team)\n    //{\n    //    cout << t.ID << \" :\" << t.AC << \" ,\" << t.ptime << endl;\n    //}\n    cout << team[0].ID;\n    for(int i=1;i<T;i++){\n        if(team[i-1] == team[i]){\n            cout << \"=\" << team[i].ID;\n        }else{\n            cout << \",\" << team[i].ID;\n        }\n    }\n    cout << endl;\n}\n\nint main(){\n    while(true){\n        int M,T,P,R;\n        cin >> M >> T >> P >> R;\n        if(!M&&!T&&!P&&!R)\n            return 0;\n        solve(M,T,P,R);\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\ntypedef ostringstream OSS;\ntypedef istringstream ISS;\n\ntypedef long long LL;\ntypedef pair<int, int> PII;\n\ntypedef vector<int> VI;\ntypedef vector<VI> VVI;\ntypedef vector<LL> VLL;\ntypedef vector<VLL> VVLL;\ntypedef vector<double> VD;\ntypedef vector<VD> VVD;\ntypedef vector<string> VS;\ntypedef vector<VS> VVS;\ntypedef vector<bool> VB;\ntypedef vector<VB> VVB;\ntypedef vector<PII> VPII;\n\n#define fst first\n#define snd second\n// #define Y first\n// #define X second\n#define MP make_pair\n#define PB push_back\n#define EB emplace_back \n#define ALL(x) (x).begin(),(x).end()\n#define RANGE(x,y,maxX,maxY) (0 <= (x) && 0 <= (y) && (x) < (maxX) && (y) < (maxY))\n#define DUMP( x ) cerr << #x << \" = \" << ( x ) << endl\n\ntemplate < typename T > inline T fromString(const string &s) { T res; ISS iss(s); iss >> res; return res; };\ntemplate < typename T > inline string toString(const T &a) { OSS oss; oss << a; return oss.str(); };\n\nconst int INF = 0x3f3f3f3f;\nconst LL INFL = 0x3f3f3f3f3f3f3f3fLL;\nconst double DINF = 0x3f3f3f3f;\nconst int DX[]={1,0,-1,0},DY[]={0,-1,0,1};\n\nint M, T, P, R;\n\nstruct Team {\n    Team () {}\n    Team (int p) : bads(p), solved(0), score(0){}\n    \n    VI bads;\n    int solved;\n    int idx;\n\n    int score;\n\n    bool operator < (const Team &t) const { // greater\n        if (solved != t.solved) return solved > t.solved;\n        if (score != t.score) return score < t.score;\n        return idx > t.idx;\n    }\n\n    bool same(const Team &t) {\n        return score == t.score && solved == t.solved;\n    }\n};\n\nvector<Team> teams;\n\nint main(void) {\n    while (cin >> M >> T >> P >> R, M) {\n        teams.clear();\n        teams.resize(T, Team(P));\n        for (int i = 0; i < T; i++) {\n            teams[i].idx = i + 1;\n        }\n\n        for (int i = 0; i < R; i++) {\n            int time, ti, pi, judge;\n            cin >> time >> ti >> pi >> judge;\n\n            --ti;\n            --pi;\n\n            if (judge) { // ?????£?§£\n                teams[ti].bads[pi]++;\n            } else {    // ??£?§£\n                teams[ti].solved++;\n                teams[ti].score += time + teams[ti].bads[pi] * 20;\n            }\n        }\n\n        sort(ALL(teams));\n\n        // output\n        for (int i = 0; i < T; i++) {\n            cout << teams[i].idx;\n            if (i == T - 1) {\n                cout << endl;\n            } else {\n                cout << (teams[i].same(teams[i + 1]) ? \"=\" : \",\");\n            }\n        }\n    }\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<stdio.h>\n\nint main(){\n\nint M,T,P,R;\n\nwhile(1){\nscanf(\"%d%d%d%d\",&M,&T,&P,&R);\nif(M==0&&T==0&&P==0&&R==0)break;\n\nint n[51][11][2]={};int n2[51][11]={};\n\nint m,t,p,j;\nfor(int i=0;i<R;i++)\n{\nscanf(\"%d%d%d%d\",&m,&t,&p,&j);\nif(j==0){n[t][p]+=m;n2[t][p]=1;}\nelse{n[t][p]+=20;}\n}\n\nint N[51][3]={};\nfor(int i=1;i<=T;i++)\nfor(int k=1;k<=P;k++)\n{\nN[i][0]+=n[i][k];\nN[i][1]+=n2[i][k];\n}\n\nfor(int i=1;i<=T;i++)\nfor(int k=1;k<=P;k++)\nif(N[k][1]>N[k-1][1]){\nint t=N[k][1];N[k][1]=N[k-1][1];N[k-1][1]=t;\nint t2=N[k][0];N[k][0]=N[k-1][0];N[k-1][0]=t2;\n}\nfor(int i=1;i<=T;i++){\n{if(i>1){if(N[i][1]==N[i-1][1]&&N[i][0]==N[i-1][0])printf(\"=\");\nelse printf(\",\");}\n\nprintf(\"%d\",N[i][1]);\n}\nprintf(\"\\n\");\n}\nreturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\n#define pb push_back\n#define mp make_pair\n#define fi first\n#define se second\n#define FOR(i, a, b) for(int i=(a);i<(b);i++)\n#define REP(i, n) FOR(i, 0, n)\n#define RFOR(i, a, b) for(int i=(a);i>=(b);i--)\n#define RREP(i, n) RFOR(i, n, 0)\n#define MFOR(i, m) for(auto i=(m).begin();i!=(m).end();i++)\n#define ALL(a) (a).begin(), (a).end()\n#define SZ(x) ((int)(x).size())\n\ntypedef long long int ll;\ntypedef pair<int, int> P;\ntypedef pair<ll, ll> Pll;\ntypedef vector<int> vi;\ntypedef vector<vi> vvi;\ntypedef vector<ll> vll;\ntypedef vector<vll> vvll;\n\nconst double eps = 1e-10;\nconst int MOD = 1000000007;\nconst int INF = 1000000000;\nconst ll LINF = 1 << 22;\n\ntemplate<typename T>\nvoid printv(vector<T> const& s) {\n  REP(i, SZ(s)) {\n    cout << s[i] << \" \";\n  }\n  cout << endl;\n}\n\nstruct TeamResult {\n  int teamnumber;\n  int num, time, ptime;\n  vi penalty;\n\n  TeamResult() {\n\n  }\n\n  void init(int p, int t) {\n    penalty.resize(p, 0);\n    teamnumber = t;\n    num = 0;\n    time = 0;\n    ptime = 0;\n  }\n\n  void update(int m, int p, int j) {\n    if(j == 0) {\n      num++;\n      time += m + penalty[p] * 20;\n    } else {\n      penalty[p]++;\n    }\n  }\n};\n\n\nbool operator>(const TeamResult &t1, const TeamResult &t2) {\n  if(t1.num == t2.num) {\n    if(t1.time == t2.time) {\n      return t1.teamnumber > t2.teamnumber;\n    } else {\n      return t1.time < t2.time;\n    }\n  } else {\n    return t1.num > t2.num;\n  }\n}\n\nbool operator==(const TeamResult &t1, const TeamResult &t2) {\n  return (t1.num == t2.num && t1.time == t2.time);\n}\n\nint main () {\n  cin.tie(0);\n  cout << setprecision(10);\n\n  while(1) {\n    int m, t, p, r; cin >> m >> t >> p >> r;\n    if(m == 0 && t == 0 && p == 0 && r == 0) break;\n    vector<TeamResult> team(t);\n    REP(i, t) {\n      team[i].init(p, i);\n    }\n\n    REP(i, r) {\n      int m, t, p, j;\n      cin >> m >> t >> p >> j;\n      team[t-1].update(m, p-1, j);\n    }\n\n    sort(ALL(team), greater<TeamResult>());\n\n    cout << team[0].teamnumber + 1;\n    FOR(i, 1, t) {\n      if(team[i] == team[i-1]) cout << \"=\";\n      else cout << \",\";\n      cout << team[i].teamnumber + 1;\n    }\n    cout << endl;\n  }\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <utility>\n#include <algorithm>\n#include <tuple>\nusing namespace std;\n\nint main()\n{\n\tint M, T, P, R, m, t, p, j;\n\twhile (cin >> M >> T >> P >> R, M || T || P || R) {\n\t\tvector< vector< pair<int, int> > > data(T + 1, vector< pair<int, int> >(P + 1, pair<int, int>(0,0)));\n\t\tvector< tuple<int, int, int> > score(T + 1);\n\t\tfor (int i = 0; i < R; i++) {\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tif (j == 0) {\n\t\t\t\tdata[t][p].first = m + data[t][p].second * 20;\n\t\t\t\tget<0>(score[t])--;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdata[t][p].second++;\n\t\t\t}\n\t\t}\n\t\tfor (int i = 1; i <= T; i++) {\n\t\t\tint sco = 0,pena = 0;\n\t\t\tfor (int j = 0; j <= P; j++) {\n\t\t\t\tif (data[i][j].first) {\n\t\t\t\t\tsco--;\n\t\t\t\t\tpena += data[i][j].first;\n\t\t\t\t}\n\t\t\t}\n\t\t\tscore[i] = tuple<int, int, int>(get<0>(score[i]),pena,-i);\n\t\t}\n\t\tsort(score.begin() + 1, score.end());\n\t\ttuple<int, int, int> temp = score[1];\n\t\tcout << -get<2>(score[1]);\n\t\tfor (int i = 2; i <= T; i++) {\n\t\t\tif (get<0>(temp) == get<0>(score[i]) && get<1>(temp) == get<1>(score[i])) {\n\t\t\t\tcout << \"=\";\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcout << \",\";\n\t\t\t}\n\t\t\tcout << -get<2>(score[i]);\n\t\t\ttemp = score[i];\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n\nusing namespace std;\n\nstruct Team {\n\tint tid, ac, penalty;\n\tTeam() { tid = -1, ac = 0, penalty = 0; }\n};\nbool operator >(const Team& t1, const Team& t2) {\n\tif (t1.ac == t2.ac) {\n\t\tif (t1.penalty == t2.penalty) return t1.tid > t2.tid;\n\t\telse return t1.penalty < t2.penalty;\n\t}\n\telse return t1.ac > t2.ac;\n}\nbool operator ==(const Team& t1, const Team& t2) {\n\treturn t1.ac == t2.ac && t1.penalty == t2.penalty;\n}\n\nint main() {\n\tint M, T, P, R;\n\twhile ( cin >> M >> T >> P >> R, M || T || P || R ) {\n\t\tint wa[50][10] = {0};\n\t\tint ac[50][10] = {0};\n\t\tvector<Team> tdt(T);\n\t\tfor (int i = 0; i < T; ++i) {\n\t\t\ttdt[i].tid = i+1;\n\t\t\ttdt[i].ac = 0;\n\t\t\ttdt[i].penalty = 0;\n\t\t}\n\t\tfor (int i = 0; i < R; ++i) {\n\t\t\tint m, t, p, j; cin >> m >> t >> p >> j;\n\t\t\t--t, --p;\n\t\t\tif (j == 0) {\n\t\t\t\tif (ac[p][t] == 0) {\n\t\t\t\t\t++ac[p][t];\n\t\t\t\t\t++tdt[t].ac;\n\t\t\t\t\ttdt[t].penalty += m + 20 * wa[p][t];\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\t++wa[p][t];\n\t\t\t}\n\t\t}\n\t\tsort( tdt.begin(), tdt.end(), greater<Team>() );\n\t\tfor (int i = 0; i < tdt.size(); ++i) {\n\t\t\tif (i) {\n\t\t\t\tif (tdt[i] == tdt[i-1]) cout << \"=\";\n\t\t\t\telse cout << \",\";\n\t\t\t}\n\t\t\tcout << tdt[i].tid;\n\t\t}\n\t\tcout << endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\nstruct team {\n    int id, acc, time, was[10];\n    team(int i=0) : id(i), acc(0), time(0) {fill(was, was+10, 0);}\n\n    void judge(int m, int p, int j)\n    {\n        if(j)\n        {\n            was[p-1]++;\n        }\n        else\n        {\n            acc++;\n            time += m + 20 * was[p-1];\n        }\n    }\n};\n\nbool operator<(const team& a, const team& b)\n{\n    if(a.acc==b.acc)\n    {\n        if(a.time==b.time)\n        {\n            return a.id>b.id;\n        }\n        return a.time<b.time;\n    }\n    return a.acc>b.acc;\n}\n\nint main()\n{\n    int m, t, p, r;\n    while(cin >> m >>t >> p >> r, m|t|p|r)\n    {\n        team ts[t];\n        for(int i=0; i<t; i++) ts[i] = team(i+1);\n        while(r--)\n        {\n            int mi, ti, pi, ji;\n            cin >> mi >> ti >> pi >> ji;\n            ts[ti-1].judge(mi, pi, ji);\n        }\n        sort(ts, ts+t);\n        cout << ts[0].id;\n        for(int i=1; i<t; i++)\n        {\n            cout << ((ts[i].acc==ts[i-1].acc && ts[i].time==ts[i-1].time) ? \"=\" : \",\") << ts[i].id;\n        }\n        cout << endl;\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define int long long\n#define endl '\\n'\n#define FOR(i, a, n) for (int i = (a); i < (n); ++i)\n#define REP(i, n) FOR(i, 0, n)\nusing namespace std;\n\nsigned main() {\n    ios::sync_with_stdio(false);\n    cin.tie(nullptr);\n\n    int M, T, P, R;\n    while (cin >> M >> T >> P >> R, M) {\n        vector<int> m(R), t(R), p(R), j(R);\n        vector<vector<int>> wa(T, vector<int>(P, 0)), ac(T, vector<int>(P, -1));\n        REP (i, R) {\n            cin >> m[i] >> t[i] >> p[i] >> j[i];\n            t[i]--; p[i]--;\n            if (j[i] == 0) ac[t[i]][p[i]] = m[i];\n            else wa[t[i]][p[i]]++;\n        }\n        vector<tuple<int, int, int>> v(T);\n        REP (i, T) {\n            int num = 0, sum = 0;\n            REP (k, P) if (ac[i][k] != -1) {\n                num++;\n                sum += ac[i][k] + wa[i][k] * 20;\n            }\n            v[i] = make_tuple(-num, sum, -i);\n        }\n        sort(v.begin(), v.end());\n        REP (i, v.size()) {\n            int num, sum, idx;\n            tie(num, sum, idx) = v[i];\n            if (i) {\n                int pnum, psum, pidx;\n                tie(pnum, psum, pidx) = v[i - 1];\n                if (num == pnum && psum == sum) cout << \"=\";\n                else cout << \",\";\n            }\n            cout << idx * -1 + 1;\n        }\n        cout << endl;\n    }\n}\n"
  },
  {
    "language": "C++",
    "code": "//ICPC Ranking\n#include<bits/stdc++.h>\nusing namespace std;\n\ntypedef struct TEAM{\n  int id, t, c, p;\n  int w[10];\n}team;\n\nbool mycomp(const team &a, const team &b){\n  if(a.c>b.c)return true;\n  if(a.c<b.c)return false;\n  if(a.t<b.t)return true;\n  if(a.t>b.t)return false;\n  return a.id>b.id;\n}\n\nstring into(int x){\n  string ret=\"\";\n  stack<int> st;\n  while(x!=0){st.push(x%10); x/=10;}\n  while(!st.empty()){ret+=(st.top()+'0'); st.pop();}\n  return ret;\n}\n\nstring solve(vector<team> lst){\n  for(int i=0; i<lst.size(); i++)\n    lst[i].t+=lst[i].p*20;\n  sort(lst.begin(), lst.end(), mycomp);\n  string ret=\"\";\n  ret+=into(lst[0].id);\n  for(int i=1; i<lst.size(); i++){\n    if(lst[i].t==lst[i-1].t)ret+='=';\n    else ret+=',';\n    ret+=into(lst[i].id);\n  }\n  //  printf(\"[0]=%d [1]=%d\\n\", lst[0].t, lst[1].t);\n  return ret;\n}\n\nint main(){\n  int M, T, P, R;\n  while(true){\n    cin>>M>>T>>P>>R;\n    if(M==0&&T==0&&P==0&&R==0)break;\n    vector<team> lst;\n    for(int i=0; i<T; i++){\n      team tmp;\n      tmp.id=i+1; tmp.t=0; tmp.c=0; tmp.p=0;\n      memset(tmp.w, 0, sizeof(tmp.w));\n      lst.push_back(tmp);\n    }\n    for(int i=0; i<R; i++){\n      int m, t, p, j;\n      cin>>m>>t>>p>>j;\n      if(j==0){\n        lst[t-1].c++;\n        lst[t-1].t+=m;\n        lst[t-1].p+=lst[t-1].w[p-1];\n      }\n      else{\n        lst[t-1].w[p-1]++;\n      }\n    }\n    cout<<solve(lst)<<endl;\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <algorithm>\n\nusing namespace std;\n\nstruct team {\n\tteam() {\n\t\tfor (int i = 0; i < 10; ++i) {\n\t\t\tac[i] = -1;\n\t\t\tfa[i] = 0;\n\t\t}\n\t}\n\tint no;\n\tint ac[10];\n\tint fa[10];\n\t\n\tint na() const {\n\t\tint ans = 0;\n\t\tfor (int i = 0; i < 10; ++i)\n\t\t\tif (ac[i] != -1)\n\t\t\t\t++ans;\n\t\treturn ans;\n\t}\n\t\n\tint st() const {\n\t\tint ans = 0;\n\t\tfor (int i = 0; i < 10; ++i)\n\t\t\tif (ac[i] != -1)\n\t\t\t\tans += ac[i] + fa[i] * 20;\n\t\treturn ans;\n\t}\n\t\n\tbool operator==(const team &rh) {\n\t\treturn this->na() == rh.na() && this->st() == rh.st();\n\t}\n\t\n\tbool operator<(const team &rh) {\n\t\tif (this->na() > rh.na())\n\t\t\treturn true;\n\t\telse if (this->na() < rh.na())\n\t\t\treturn false;\n\t\t\n\t\tif (this->st() < rh.st())\n\t\t\treturn true;\n\t\telse if (this->st() > rh.st())\n\t\t\treturn false;\n\t\t\n\t\treturn this->no > rh.no;\n\t}\n};\n\nint main()\n{\n\tfor (;;) {\n\t\tint m, t, p, r;\n\t\tscanf(\"%d %d %d %d\", &m, &t, &p, &r);\n\t\tif (m == 0 && t == 0 && p == 0 && r == 0)\n\t\t\tbreak;\n\t\t\t\n\t\tteam teams[10];\n\t\tfor (int i = 0; i < t; ++i)\n\t\t\tteams[i].no = i + 1;\n\t\t\n\t\tfor (int i = 0; i < r; ++i) {\n\t\t\tint m, t, p, j;\n\t\t\tscanf(\"%d %d %d %d\", &m, &t, &p, &j);\n\t\t\t\n\t\t\tif (j == 0)\n\t\t\t\tteams[t - 1].ac[p - 1] = m;\n\t\t\telse if (j == 1)\n\t\t\t\tteams[t - 1].fa[p - 1] += 1;\n\t\t}\n\t\t\n\t\tsort(teams, teams + t);\n\t\t\n\t\tfor (int i = 0; i < t; ++i) {\n\t\t\tprintf(\"%d\", teams[i].no);\n\t\t\tif (i == t - 1)\n\t\t\t\tprintf(\"\\n\");\n\t\t\telse if (teams[i] == teams[i + 1])\n\t\t\t\tprintf(\"=\");\n\t\t\telse\n\t\t\t\tprintf(\",\");\n\t\t}\n\t}\n\t\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\nusing namespace std;\ntypedef pair<pair<int,int>,int> p3;\ntypedef pair<int,int> p2;\n\n\n\nint main(){\n\tint m,t,p,r;\n\n\twhile(true){\n\t\tcin>>m>>t>>p>>r;\n\t\tif(m==t && t==p && p==r && m==0){\n\t\t\tbreak;\n\t\t}\n\n\t\tvector<p3> corrects; //first:correct number, second:time , third team number-1\n\t\tvector< vector<int> > submits;\n\t\tvector<int> times;\n\n\t\tfor(int i=0;i<t;i++){\n\t\t\tcorrects.push_back(p3(p2(0,0),i));\n\t\t\ttimes.push_back(0);\n\t\t\tsubmits.push_back(vector<int>(p));\n\t\t\tfor(int j=0;j<p;j++){\n\t\t\t\tsubmits[i][j]=0;\n\t\t\t}\n\t\t}\n\n\t\tfor(int i=0;i<r;i++){\n\t\t\tint mi,ti,pi,ri;\n\t\t\tcin>>mi>>ti>>pi>>ri;\n\t\t\tti--;pi--;\n\n\t\t\tif(ri != 0){\n\t\t\t\tsubmits[ti][pi]++;\n\t\t\t}else{\n\t\t\t\tcorrects[ti].first.second-=mi+submits[ti][pi]*20;\n\t\t\t\tcorrects[ti].first.first++;\n\t\t\t}\n\t\t}\n\n\t\tsort(corrects.begin(),corrects.end());\n\t\treverse(corrects.begin(),corrects.end());\n\t\tfor(int i=0;i<corrects.size();i++){\n\t\t\tcout<<corrects[i].second+1;\n\t\t\t//cout<<\" \"<<\"corrects:\"<<corrects[i].first.first<<\"time:\"<<corrects[i].first.second;\n\t\t\tif(i+1 == corrects.size()){\n\t\t\t\tcout<<endl;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif(corrects[i].first.first==corrects[i+1].first.first){\n\t\t\t\tif(corrects[i].first.second==corrects[i+1].first.second){\n\t\t\t\t\tcout<<\"=\";\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tcout<<\",\";\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tcout<<\",\";\n\t\t\t}\n\t\t}\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\nusing namespace std;\n\nint main(){\n\twhile(1){\n\t\tint M,T,P,R;\n\t\tcin>>M>>T>>P>>R;\n\n\t\tif(M==0&&T==0&&P==0&&R==0)\n\t\t\tbreak;\n\n\t\tint CP[50],TT[50],PT[50][10];\n\t\tfor(int i=0;i<R;i++){\n\t\t\tCP[i]=TT[i]=0;\n\t\t\tfor(int j=0;j<P;j++){\n\t\t\t\tPT[i][j]=0;\n\t\t\t}\n\t\t}\n\n\t\tfor(int i=0;i<R;i++){\n\t\t\tint m,t,p,j;\n\t\t\tcin>>m>>t>>p>>j;\n\t\t\n\t\t\tif(j==0){\n\t\t\t\tCP[t-1]++;\n\t\t\t\tTT[t-1]+=(m+PT[t-1][p-1]);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tPT[t-1][p-1]+=20;\n\t\t\t}\n\t\t}\n\n\t\tint  tnow,tpre=-1;\n\t\tbool flg[50];\n\t\tfor(int i=0;i<T;i++){\n\t\t\tflg[i]=false;\n\t\t}\n\n\t\tfor(int i=0;i<T;i++){\n\t\t\ttnow=-1;\n\t\t\tfor(int j=0;j<T;j++){\n\t\t\t\tif(flg[j])\n\t\t\t\t\t continue;\n\n\t\t\t\tif(tnow=-1){\n\t\t\t\t\ttnow=j;\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tif(CP[j]>CP[tnow]||(CP[j]==CP[tnow]&&TT[j]<=TT[tnow])){\n\t\t\t\t\t\ttnow=j;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(tpre!=-1){\n\t\t\t\tif(CP[tnow]==CP[tpre]&&TT[tpre]<=TT[tnow]){\n\t\t\t\t\tcout<<'=';\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tcout<<'.';\n\t\t\t\t}\n\t\t\t}\n\t\t\tcout<<tnow+1;\n\t\t\n\t\t\tflg[tnow]=true;\n\t\t\ttpre=tnow;\n\t\t}\n\t\tcout<<endl;\n\t}\n\t\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define _ ios_base::sync_with_stdio(0);cin.tie(0);\n#define REP(i,n) for(int i=0;i<(int)(n);i++)\n\nusing namespace std;\n\ntypedef pair<int,pair<int,int> > triple;\n#define mkt(i,j,k) make_pair((i),make_pair((j),(k)))\n#define solved first\n#define time second.first\n#define teamid second.second \n\nconst int MAX_T=50;\nconst int MAX_P=10;\nint wa[MAX_T][MAX_P];\ntriple team[MAX_T];\n\nint main(){ _;\n  int M,T,P,R,m,t,p,j;\n  while(cin>>M>>T>>P>>R,(M|T|P|R)!=0){\n    REP(i,MAX_T)REP(j,MAX_P)wa[i][j]=0;\n    REP(i,MAX_T)team[i]=mkt(0,0,i);\n    REP(i,R){\n      cin>>m>>t>>p>>j;\n      t--;p--;\n      if(j==0){\n\tteam[t].solved++;\n\tteam[t].time-=m+wa[t][p]*20;\n      }\n      else{\n\twa[t][p]++;\n      }\n    }\n    sort(team,team+T,greater<pair<int,pair<int,int> > >());\n    int cursolved=team[0].solved;\n    int curtime=team[0].time;\n    cout<<team[0].teamid+1;\n    for(int i=1;i<T;i++){\n      cout<<((cursolved==team[i].solved&&curtime==team[i].time)?\"=\":\",\")<<team[i].teamid+1;\n      cursolved=team[i].solved;\n      curtime=team[i].time;\n    }\n    cout<<endl;\n  }\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\nusing namespace std;\n\nint main(){\n\tint M, T, P, R;\n\n\tcin >> M >> T >> P >> R;\n\twhile(M != 0 || T != 0 || P != 0 || R != 0){\n\t\tint m, t, p, jx;\n\t\tint table[51][11][2];\n\t\tfor(int i=0; i<51; i++){\n\t\t\tfor(int j=1; j<11; j++){\n\t\t\t\ttable[i][j][0] = 0;\n\t\t\t\ttable[i][j][1] = -1;\n\t\t\t}\n\t\t}\n\t\tfor(int i=0; i<R; i++){\n\t\t\tcin >> m >> t >> p >> jx;\n\t\t\ttable[t][p][0] += m;\n\t\t\ttable[t][p][1] = jx;\n\t\t}\n\n\t\tint ans[51];\n\t\tfor(int i=1; i<=T; i++){\n\t\t\tans[i] = 0;\n\t\t}\n\t\tfor(int i=1; i<=T; i++){\n\t\t\tfor(int j=1; j<=P; j++){\n\t\t\t\tif(table[i][j][1] == 0){\n\t\t\t\t\tans[i] += (table[i][j][1]+1)*10000+(500-table[i][j][0]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\tint max=0, maxp=0;\t\n\t\tint tmp = 0;\n\t\tfor(int j=1; j<=T; j++){\n\t\t\tfor(int i=1; i<=T; i++){\n\t\t\t\tif(maxp <= ans[i]){\n\t\t\t\t\tmaxp = ans[i];\n\t\t\t\t\tmax = i;\n\t\t\t\t}\n\t\t\t}\n\t\t\tans[max] = -1;\n\t\t\tif(j == 1){\n\t\t\t\tcout << max;\n\t\t\t}else{\n\t\t\t\tif(maxp == tmp){\n\t\t\t\t\tcout << '=' << max;\n\t\t\t\t}else{\n\t\t\t\t\tcout << ',' << max;\n\t\t\t\t}\n\t\t\t}\n\t\t\ttmp = maxp;\n\t\t\tmaxp = -1;\n\t\t}\n\t\tcout << endl;\n\t\tcin >> M >> T >> P >> R;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\nvector<vector<int>> v;\nvector<vector<int>> miss;\nvector<vector<int>> score;\nvector<vector<pair<int,int>>> rk;\n\nvoid solve(int m,int t,int p,int r){\n    int in;\n    v=vector<vector<int>>(r,vector<int>(4,0));\n    miss=vector<vector<int>>(t,vector<int>(p,0));\n    score=vector<vector<int>>(t,vector<int>(2,0));\n    rk=vector<vector<pair<int,int>>>(p+1,vector<pair<int,int>>(0));\n    for(int i=0;i<r;i++){\n        for(int j=0;j<4;j++){\n            cin>>in;\n            v[i][j]=in;\n        }\n    }\n    for(int i=0;i<r;i++){\n        if(v[i][3])miss[v[i][1]-1][v[i][2]-1]++;\n        else {\n            score[v[i][1]-1][0]++;\n            score[v[i][1]-1][1]+=v[i][0]+miss[v[i][1]-1][v[i][2]-1]*20;\n        }\n    }\n    for(int i=t-1;i>=0;i--){\n        rk[score[i][0]].push_back(make_pair(i,score[i][1]));\n    }\n    bool sw=false;\n    for(int i=p;i>=0;i--){\n        int maxx=-1;\n        for(int j=0;j<rk[i].size();j++){\n            maxx=max(maxx,rk[i][j].second);\n        }\n        for(int j=0;j<=maxx;j++){\n            bool swc=false;\n            for(int k=0;k<rk[i].size();k++){\n                if(rk[i][k].second==j){\n                    if(swc)cout<<\"=\"<<rk[i][k].first+1;\n                    else {\n                        if(sw)cout<<\",\"<<rk[i][k].first+1;\n                        else{\n                            cout<<rk[i][k].first+1;\n                        }\n                        sw=true;\n                    }\n                    swc=true;\n                }\n            }\n        }\n    }\n    cout<<endl;\n}\n\n\nint main(void){\n    ios::sync_with_stdio(false);\n    int a,b,c,d;\n    while(cin>>a>>b>>c>>d,a){\n        solve(a,b,c,d);\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include<bits/stdc++.h>\n#define F first\n#define S second\nusing namespace std;\ntypedef pair<int,int> P;\ntypedef pair<int,P> PP;\nvector<PP> v;\nint dp[51][11][2],A,B,C,D,a,b,c,d,T[51];\nint main(void){\n    while(1){\n    cin>>A>>B>>C>>D;\n    if(A==0)return 0;\n    for(int i=0;i<51;i++)for(int j=0;j<11;j++)for(int k=0;k<2;k++)dp[i][j][k]=0;\n    for(int i=0;i<51;i++)T[i]=0;\n    v={};\n    for(int i=0;i<D;i++){\n        cin>>a>>b>>c>>d;\n        if(d!=0)dp[b][c][0]++;\n        else{\n            T[b]+=dp[b][c][0]*20;\n            dp[b][c][1]=a+1;\n        }\n    }\n    for(int i=1;i<=B;i++){\n        int L=0,cnt=0;\n        for(int j=1;j<=C;j++){\n            if(dp[i][j][1])cnt++;\n            L+=dp[i][j][1]-1;\n        }\n        L+=T[i];\n        v.push_back({-cnt,{L,-i}});\n    }\n    sort(v.begin(),v.end());\n    a=v[0].F,b=v[0].S.F,c=v[0].S.S;\n    cout<<-c;\n    for(int i=1;i<v.size();i++){\n        if(a==v[i].F&&b==v[i].S.F)cout<<\"=\";\n        else cout<<\",\";\n        cout<<-v[i].S.S;\n        a=v[i].F,b=v[i].S.F,c=v[i].S.S;\n    }\n    cout<<endl;\n    }\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\ntypedef long long ll;\ntypedef vector<int> VI;\ntypedef vector<VI> VVI;\ntypedef vector<ll> VL;\ntypedef vector<VL> VVL;\ntypedef pair<int, int> PII;\n\n#define FOR(i, a, n) for (ll i = (ll)a; i < (ll)n; ++i)\n#define REP(i, n) FOR(i, 0, n)\n#define ALL(x) x.begin(), x.end()\n#define MP make_pair\n#define PB push_back\n#define MOD 1000000007\n#define INF (1LL<<30)\n#define LLINF (1LL<<60)\n#define PI 3.14159265359\n#define EPS 1e-12\n//#define int ll\n\nsigned main(void)\n{\n  while(true) {\n    int m, t, p, r;\n    cin >> m >> t >> p >> r;\n    if(!m && !t && !p && !r) break;\n    VVI rec;\n    REP(i, r) {\n      int a, b, c, d;\n      cin >> a >> b >> c >> d;\n      rec.PB({a, b, c, d});\n    }\n    int wa[55][15] = {0};\n    VVI ac;\n    REP(i, t) ac.PB({0, 0, (int)i+1});\n    REP(i, r) {\n      //??£?§£\n      if(!rec[i][3]) {\n        ac[rec[i][1]-1][0]++;\n        ac[rec[i][1]-1][1] += wa[rec[i][1]-1][rec[i][2]] * 20 + rec[i][0];\n      } else {\n        wa[rec[i][1]-1][rec[i][2]]++;\n      }\n    }\n    REP(i, t) {\n      ac[i][0] *= -1;\n      ac[i][2] *= -1;\n    }\n    sort(ALL(ac));/*\n    cout << endl;\n    REP(i, t) {\n      REP(j, 3) {\n        cout << ac[i][j] << \" \";\n      }\n      cout << endl;\n    }*/\n    cout << -1*ac[0][2];\n    FOR(i, 1, t) {\n      if(ac[i][0] == ac[i-1][0] && ac[i][1] == ac[i-1][1]) {\n        cout << \"=\";\n      } else {\n        cout << \",\";\n      }\n      cout << -1*ac[i][2];\n    }\n    cout << endl;\n  }\n\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\ntypedef pair<int, int> P;\nP info[51][11];\n//bool team[51];\nvector<P> v;\n\nmap<int, P> mp;\n//int D[51];\nvector<int> order;\n\n//自作の比較関数\nbool comp(P lhs, P rhs){\n\tif(lhs.first != rhs.first){\n\t\treturn lhs.first < rhs.first;\n\t}\n\tif(lhs.second != rhs.second){\n\t\treturn lhs.second > rhs.second;\n\t}\n}\n\nint main(){\nwhile(1){//start\t\n\t\n\t\n\tint M, T, P, R;\n\tcin >> M >> T >> P >> R;\n\tif(M == 0 and T == 0 and P == 0 and R == 0) break;\n\t\n\t//初期化\n\tfor(int i = 0; i < 51; i++){\n\t\tfor(int j = 0; j < 11; j++){\n\t\t\tinfo[i][j].first = 0;\n\t\t\tinfo[i][j].second = 0;\n\t\t}\n\t}\n\tbool team[51] = {0};\n\tint D[51] = {0};\n\tint OK[51] = {0};\n\t\n\t//データを格納\n\tfor(int i = 0; i < R; i++){\n\t\tint m, t, p, j;\n\t\tcin >> m >> t >> p >> j;\n\t\tteam[t] = true;\n\t\t\n\t\tif(j == 0){\n\t\t\tinfo[t][p].second = m + 20*info[t][p].first;\n\t\t\tOK[t-1] += 1;\n\t\t}\n\t\telse{\n\t\t\tinfo[t][p].first += 1;\n\t\t}\n\t}\n\t\n\t//vの内部はキーがチーム名(解いた数/合計時間)\n\tfor(int i = 1; i <= T; i++){\n\t\t\tint sum = 0, ok = 0;\n\t\t\tfor(int j = 0; j < 11; j++) sum += info[i][j].second;\n\t\t\t//for(int j = 0; j < 11; j++) if(info[i][j].second) ok += 1;\n\t\t\tint tmp = OK[i-1];\n\t\t\tv.push_back(make_pair(tmp, sum));\n\t\t\tmp[i] = make_pair(tmp, sum);\n\t}\n\t\n\tsort(v.begin(), v.end(), comp);\n\treverse(v.begin(), v.end());\n\t//debug\n\t//for(int i = 0; i < (int)v.size(); i++) cout << v[i].first << \" \" << v[i].second << endl;\n\t\n\t//重複カウンタを作成\n\tint d = 1;\n\tD[0] = 1;\n\tfor(int i = 1; i < (int)v.size(); i++){\n\t\tif(v[i-1].first == v[i].first and v[i-1].second == v[i].second){\n\t\t\tD[i] = d;\n\t\t}\n\t\telse{\n\t\t\td++;\n\t\t\tD[i] = d;\n\t\t}\n\t}\n\t\n\t//debug\n\t//for(int i = 0; i < (int)v.size(); i++) cout << D[i] << endl;\n\t\n\t//ソート結果にチーム名を割り当てる\n\tbool vis[51] = {false};\n\tfor(int i = 0; i < (int)v.size(); i++){\n\t\tfor(int j = (int)v.size(); 1 <= j; j--){\n\t\t\tif(v[i] == mp[j]){\n\t\t\t\tif(vis[j] == false){\n\t\t\t\t\torder.push_back(j);\n\t\t\t\t\tvis[j] = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//debug\n\t//for(int i = 0; i < (int)v.size(); i++) cout << order[i] << endl;\n\t\n\t//出力\n\t//まず重複数を記録する\n\tint num[51] = {0};\n\tfor(int i = 0; i < 51; i++) num[D[i]] += 1;\n\t\n\tstring ans = \"A\";\n\tint idx = 0;\n\tfor(int i = 1; i <= (int)order.size(); i++){\n\t\tif(num[i] == 0) break;\n\t\telse if(num[i] == 1){ \n\t\t\tans += to_string(order[idx]);\n\t\t\tidx++;\n\t\t}\n\t\telse{\n\t\t\tfor(int j = 0; j < num[i]; j++){\n\t\t\t\tif(j == num[i]-1) ans += to_string(order[idx]);\n\t\t\t\telse ans += to_string(order[idx]) + \"=\";\n\t\t\t\tidx++;\n\t\t\t}\n\t\t}\n\t\tans += \",\";\n\t}\n\t\n\tans.erase(ans.begin() + 0);\n\tans.erase(ans.end() - 1);\n\tcout << ans << endl;\n\t\n\t//初期化\n\tv.clear();\n\tmp.clear();\n\torder.clear();\n\t\n\t\n}//end\t\n\t\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <functional>\n#include <algorithm>\n#include <iostream>\n#include <numeric>\n#include <iomanip>\n#include <utility>\n#include <cstdlib>\n#include <sstream>\n#include <bitset>\n#include <vector>\n#include <cstdio>\n#include <ctime>\n#include <queue>\n#include <deque>\n#include <cmath>\n#include <stack>\n#include <list>\n#include <map>\n#include <set>\n\nusing namespace std;\n\ntypedef vector<int> vi;\ntypedef pair<int,int> pii;\ntypedef long long ll;\n\n#define dump(x)  cerr << #x << \" = \" << (x) << endl\n#define rep(i,n) for(int i=0;i<(n);i++)\n#define all(a)  (a).begin(),(a).end()\n#define pb push_back\n#define sz size()\n\nclass TEAM{\npublic:\n    int pena[20]={};\n    int sum=0;\n    int time=0;\n    int num=0;\n    int point=0;\n};\n\nint main(){\n    int M,T,P,R;\n    while(cin>>M>>T>>P>>R){\n        TEAM team[100];\n        \n        \n        if(M==0 && T==0 && P==0 && R==0)break;\n        \n        rep(i,T)team[i].num=i+1;\n        \n        rep(i,R){\n            int m,t,p,j;\n            cin>>m>>t>>p>>j;\n            t--;\n            if(j==0){\n                team[t].sum++;\n                team[t].time+=m+team[t].pena[p]*20;\n            }else{\n                team[t].pena[p]++;\n            }\n        }\n        \n        rep(i,T){\n            team[i].point=team[i].sum*100000000 + 10000000-team[i].time;\n        }\n\n        for(int i=0;i<T-1;i++){\n            for(int j=T-1;j>i;j--){\n                if(team[j].point<team[j-1].point)swap(team[j],team[j-1]);\n            }\n        }\n        \n        cout<<team[T-1].num;\n//        cout<<\" \"<<team[T-1].point<<endl;\n        for(int i=T-2;i>=0;i--){\n            if(team[i+1].point==team[i].point){\n                cout<<\"=\"<<team[i].num;\n//                cout<<\" \"<<team[i].point<<endl;\n            }\n            else{\n                cout<<\",\"<<team[i].num;\n//                cout<<\" \"<<team[i].point<<endl;\n            }\n        }\n        cout<<endl;\n    }\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n#include <vector>\n\nusing namespace std;\n\nconst int MAX_T = 51;\nconst int MAX_P = 11;\ntypedef pair<int,int> PP;\ntypedef pair<PP,int> P;\n \nint main(){\n    int m,t,p,r,team[MAX_T][MAX_P],judge[MAX_T][MAX_P];\n    int mi,ti,pi,ji,accnt[MAX_T];\n \n    while(cin >> m >> t >> p >> r , m + t + p + r){\n\tvector<P> v;\n\tfill(team[0],team[MAX_T],0);\n\tfill(judge[0],judge[MAX_T],0);\n\tfill(accnt,accnt+MAX_T,0);\n \n\tfor(int i = 0 ; i < r ; i++){\n\t    cin >> mi >> ti >> pi >> ji;\n\t    if(ji == 0){\n\t\tteam[ti][pi] += mi + judge[ti][pi];\n\t\taccnt[ti]--;\n\t    }\n\t    else{\n\t\tjudge[ti][pi] += 20;\n\t    }\n\t}\n\tint tt[MAX_T] = {0};\n\tfor(int i = 1 ; i < MAX_T ; i++){\n\t    for(int j = 1 ; j < MAX_P ; j++){\n\t\ttt[i] += team[i][j];\n\t    } \n\t}\n\tfor(int i = 1 ; i <= t ; i++){\n\t    v.push_back(P(PP(accnt[i],tt[i]),-i));\n\t}\n\tsort(v.begin(),v.end());\n\tfor(int i = 1 ; i <= v.size() ; i++){\n\t    if(v[i-1].first.first < v[i].first.first){\n\t\tcout << -v[i-1].second;\n\t\tif(i != v.size()) cout << ',';\n\t    }\n\t    else{\n\t\tif(v[i-1].first.second < v[i].first.second){\n\t\t    cout << -v[i-1].second;\n\t\t    if(i != v.size()) cout << ',';\n\t\t}\n\t\telse{\n\t\t    cout << -v[i-1].second;\n\t\t    if(i != v.size()) cout << '=';\n\t\t}\n\t    }\n\t}\n\tcout << endl;\n    }\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\ntypedef pair<int, int> P;\nP info[51][11];\n//bool team[51];\nvector<P> v;\n\nmap<int, P> mp;\n//int D[51];\nvector<int> order;\n\n//自作の比較関数\nbool comp(P lhs, P rhs){\n\tif(lhs.first != rhs.first){\n\t\treturn lhs.first < rhs.first;\n\t}\n\tif(lhs.second != rhs.second){\n\t\treturn lhs.second > rhs.second;\n\t}\n}\n\nint main(){\nwhile(1){//start\t\n\t\n\t\n\tint M, T, P, R;\n\tcin >> M >> T >> P >> R;\n\tif(M == 0 and T == 0 and P == 0 and R == 0) break;\n\t\n\t//初期化\n\tfor(int i = 0; i < 51; i++){\n\t\tfor(int j = 0; j < 11; j++){\n\t\t\tinfo[i][j].first = 0;\n\t\t\tinfo[i][j].second = 0;\n\t\t}\n\t}\n\tbool team[51] = {0};\n\tint D[51] = {0};\n\tint OK[51] = {0};\n\t\n\t//データを格納\n\tfor(int i = 0; i < R; i++){\n\t\tint m, t, p, j;\n\t\tcin >> m >> t >> p >> j;\n\t\tteam[t] = true;\n\t\t\n\t\tif(j == 0){\n\t\t\tinfo[t][p].second = m + 20*info[t][p].first;\n\t\t\tOK[t-1] += 1;\n\t\t}\n\t\telse{\n\t\t\tinfo[t][p].first += 1;\n\t\t}\n\t}\n\t\n\t//vの内部はキーがチーム名(解いた数/合計時間)\n\tfor(int i = 1; i <= T; i++){\n\t\t\tint sum = 0, ok = 0;\n\t\t\tfor(int j = 0; j < 11; j++) sum += info[i][j].second;\n\t\t\t//for(int j = 0; j < 11; j++) if(info[i][j].second) ok += 1;\n\t\t\tint tmp = OK[i-1];\n\t\t\tv.push_back(make_pair(tmp, sum));\n\t\t\tmp[i] = make_pair(tmp, sum);\n\t}\n\t\n\tsort(v.begin(), v.end(), comp);\n\treverse(v.begin(), v.end());\n\t//debug\n\t//for(int i = 0; i < (int)v.size(); i++) cout << v[i].first << \" \" << v[i].second << endl;\n\t\n\t//重複カウンタを作成\n\tint d = 1;\n\tD[0] = 1;\n\tfor(int i = 1; i < (int)v.size(); i++){\n\t\tif(v[i-1].first == v[i].first and v[i-1].second == v[i].second){\n\t\t\tD[i] = d;\n\t\t}\n\t\telse{\n\t\t\td++;\n\t\t\tD[i] = d;\n\t\t}\n\t}\n\t\n\t//debug\n\t//for(int i = 0; i < (int)v.size(); i++) cout << D[i] << endl;\n\t\n\t//ソート結果にチーム名を割り当てる\n\tbool vis[51] = {false};\n\tfor(int i = 0; i < (int)v.size(); i++){\n\t\tfor(int j = (int)v.size(); 1 <= j; j--){\n\t\t\tif(v[i] == mp[j]){\n\t\t\t\tif(vis[j] == false){\n\t\t\t\t\torder.push_back(j);\n\t\t\t\t\tvis[j] = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//debug\n\t//for(int i = 0; i < (int)v.size(); i++) cout << order[i] << endl;\n\t\n\t//出力\n\t//まず重複数を記録する\n\tint num[51] = {0};\n\tfor(int i = 0; i < 51; i++) num[D[i]] += 1;\n\t\n\tstring ans = \"A\";\n\tint idx = 0;\n\tfor(int i = 1; i <= (int)order.size(); i++){\n\t\tif(num[i] == 0) break;\n\t\telse if(num[i] == 1){ \n\t\t\tans += to_string(order[idx]);\n\t\t\tidx++;\n\t\t}\n\t\telse{\n\t\t\tfor(int j = 0; j < num[i]; j++){\n\t\t\t\tif(j == num[i]-1) ans += to_string(order[idx]);\n\t\t\t\telse ans += to_string(order[idx]) + \"=\";\n\t\t\t\tidx++;\n\t\t\t}\n\t\t}\n\t\tans += \",\";\n\t}\n\t\n\tans.erase(ans.begin() + 0);\n\tans.erase(ans.end() - 1);\n\tcout << ans << endl;\n\t\n\t//初期化\n\tv.clear();\n\tmp.clear();\n\torder.clear();\n\t\n\t\n}//end\t\n\t\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstdio>\n#include<string>\n#include<cstring>\n#include<vector>\n#include<set>\n#include<list>\n#include<queue>\n#include<cmath>\n#include<functional>\n#include<algorithm>\nusing namespace std;\n\nstruct T{\n\tint id,solve,pena;\n\tbool operator<(T a)const{\n\t\tif(solve!=a.solve)return solve>a.solve;\n\t\tif(pena!=a.pena)return pena<a.pena;\n\t\treturn id>a.id;\n\t}\n\tbool operator==(T a)const{\n\t\treturn solve==a.solve&&pena==a.pena;\n\t}\n};\nint main(){\n\tint m,t,p,r;\n\tT team[50];\n\twhile(cin>>m>>t>>p>>r,m|t|p|r){\n\t\tfor(int i=0;i<t;i++){\n\t\t\tteam[i].id=i+1;\n\t\t\tteam[i].solve=team[i].pena=0;\n\t\t}\n\t\tint wrong[50][10]={};\n\t\tfor(int i=0;i<r;i++){\n\t\t\tint a,b,c,d;\n\t\t\tcin>>a>>b>>c>>d;\n\t\t\tif(d==0){\n\t\t\t\tteam[b-1].solve++;\n\t\t\t\tteam[b-1].pena= a+20*wrong[b-1][c-1];\n\t\t\t}else{\n\t\t\t\twrong[b-1][c-1]++;\n\t\t\t}\n\t\t}\n\t\tsort(team,team+t);\n\t\tcout<<team[0].id;\n\t\tfor(int i=1;i<t;i++){\n\t\t\tif(team[i-1]==team[i])cout<<'=';\n\t\t\telse cout<<',';\n\t\t\tcout<<team[i].id;\n\t\t}\n\t\tcout<<endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<string>\n#include<vector>\n\nusing namespace std;\n\nstruct teme {\n\tint num;\n\tint caPro;\n\tint sumtime;\n\tint pro[11];\n};\n\nvoid temeset(teme* t, int yoso) {\n\tfor (int i = 1; i <= yoso; i++) {\n\t\tt[i].num = i;\n\t\tt[i].caPro = 0;\n\t\tt[i].sumtime = 0;\n\t\tfor (int j = 1; j <= 10; j++) {\n\t\t\tt[i].pro[j] = 0;\n\t\t}\n\t}\n}\n\nint comp(const void*  A,const void* B) {\n\tconst teme* a = (const teme*)A;\n\tconst teme* b = (const teme*)B;\n\n\tif (b->caPro == a->caPro)\n\t{\n\t\tif (b->sumtime == a->sumtime) {\n\t\t\treturn b->num - a->num;\n\t\t}\n\t\treturn a->sumtime - b->sumtime;\n\t}\n\treturn b->caPro - a->caPro;\n}\n\nint main() {\n\tint w, t, p, r;\n\tvector<string>v;\n\twhile (cin >> w >> t >> p >> r, w || t || p || r) {\n\t\tteme te[51];\n\t\ttemeset(te, t);\n\t\tfor (int i = 0; i < r; i++) {\n\t\t\tint mk, tk, pk, jk;\n\t\t\tcin >> mk >> tk >> pk >> jk;\n\t\t\tif (jk == 0) {\n\t\t\t\tte[tk].caPro++;\n\t\t\t\tte[tk].sumtime += mk + te[tk].pro[pk];\n\t\t\t}\n\t\t\telse {\n\t\t\t\tte[tk].pro[pk] += 20;\n\t\t\t}\n\t\t}\n\t\tqsort(te+1, t, sizeof(teme), comp);\n\t\tstring s = \"\";\n\t\tfor (int i = 1; i <= t; i++) {\n\t\t\t//cout << te[i].num << \"???:\" << te[i].caPro << \" \" << te[i].sumtime << endl;\n\t\t\ts += to_string(te[i].num);\n\t\t\tif (i != t) {\n\t\t\t\tif (te[i].caPro == te[i + 1].caPro && te[i].sumtime == te[i + 1].sumtime) {\n\t\t\t\t\ts += \"=\";\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\ts += \",\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tv.push_back(s);\n\t}\n\n\tfor (int i = 0; i < v.size(); i++) {\n\t\tcout << v[i] << endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#define _USE_MATH_DEFINES\n#include <iostream>\n#include <fstream>\n#include <sstream>\n#include <string>\n#include <cstring>\n#include <vector>\n#include <set>\n#include <map>\n#include <unordered_map>\n#include <queue>\n#include <deque>\n#include <stack>\n#include <algorithm>\n#include <bitset>\n#include <cmath>\n#include <cstdlib>\n#include <ctime>\n#include <numeric>\n#include <functional>\n#include <cctype>\n#include <list>\n#include <limits>\n#include <cassert>\n//#include <boost/multiprecision/cpp_int.hpp>\n\nconst double EPS = (1e-10);\n\n\nusing namespace std;\nusing Int = long long;\n//using namespace boost::multiprecision;\n\nconst Int MOD = 1000000007;\n\nlong long mod_pow(long long x, long long n) {\n    long long res = 1;\n    for(int i = 0;i < 60; i++){\n        if(n >> i & 1) res = res * x % MOD;\n        x = x * x % MOD;\n    }\n    return res;\n}\n\ntemplate<typename T>\nT gcd(T a, T b) {\n    return b != 0 ? gcd(b, a % b) : a;\n}\n\ntemplate<typename T>\nT lcm(T a, T b) {\n    return a * b / gcd(a, b);\n}\n\nvoid fast_input() {\n    cin.tie(0);\n    ios::sync_with_stdio(false);\n}\n\nvector<vector<int>> solve(int M, int T, int P, int R) {\n    vector<vector<int>> ret(T, vector<int>(3));\n    vector<int> pena(T);\n    vector<vector<int>> table(T, vector<int>(P));\n\n    for (int i = 0; i < T; i++) {\n        ret[i][2] = -i;\n    }\n\n    for (int i = 0; i < R; i++) {\n        int m, t, p, j; cin >> m >> t >> p >> j;\n        t--;\n        p--;\n        if (j == 0) {\n            ret[t][0]--;\n            ret[t][1] += m;\n            pena[t] += table[t][p];\n        } else {\n            table[t][p] += 20;\n        }\n    }\n    for (int i = 0; i < T; i++) {\n        ret[i][1] += pena[i];\n    }\n    sort(ret.begin(), ret.end());\n\n    return ret;\n}\n\nint main(void) {\n    int M, T, P, R;\n    vector<vector<vector<int>>> outputs;\n    while (1) {\n        cin >> M >> T >> P >> R;\n        if (!M && !T && !P && !R) break;\n        outputs.push_back(solve(M, T, P, R));\n    }\n\n    for (auto &vv : outputs) {\n        for (int i = 0; i < vv.size(); i++) {\n            cout << -1*vv[i][2]+1;\n            if (i != vv.size()-1) {\n                if (vv[i][0] == vv[i+1][0] && vv[i][1] == vv[i+1][1]) {\n                    cout << \"=\";\n                } else {\n                    cout << \",\";\n                }\n            }\n        }\n        cout << endl;\n    }\n}\n\n\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define rep(i,n) for(int i=0; i<(n); i++)\n#define reps(i,a,n) for(int i=a; i<(n); i++)\n#define X first\n#define Y second\n\nusing namespace std;\ntypedef long long ll;\ntypedef pair<int,int> pii;\n\nint main(){\n\n\tint m,t,p,r;\n\twhile( cin >> m >> t >> p >> r, m|t|p|r ){\n\t\tint sumtime[t+1];\n\t\tint ac[t+1];\n\t\tint wrong[t+1][p+1];\n\t\tint num[t+1];\n\n\t\trep(i,t+1){\n\t\t\trep(j,p+1){\n\t\t\t\twrong[i][j] = 0;\n\t\t\t}\n\t\t\tac[i]=0;\n\t\t\tsumtime[i] = 0;\n\t\t\tnum[i] = i;\n\t\t}\n\t\trep(k,r){\n\t\t\tint tmpm,tmpt,tmpp,tmpj;\n\t\t\tcin >> tmpm >> tmpt >> tmpp >> tmpj;\n\t\t\tif(tmpj) wrong[tmpt][tmpp]++;\n\t\t\telse{\n\t\t\t\tsumtime[tmpt] += tmpm + wrong[tmpt][tmpp] * 20;\n\t\t\t\tac[tmpt] ++;\n\t\t\t}\n\t\t}\n//\t\trep(i,t) cout << \"ac=\" <<ac[i] << endl;\n\t\tfor(int i = 1; i < t;i++){\n//\t\treps(i,1,t-1){\n\t\t\tfor(int j = i+1; j <= t;j++){\n\t//\t\treps(j,i+1;t){\n\t\t\t\tif(ac[i] < ac[j] || (ac[i]==ac[j] && sumtime[i]> sumtime[j]) ||\n\t\t\t\t (ac[i]==ac[j] && sumtime[i] == sumtime[j] && num[i] < num[j])){\n\t\t\t\t\tswap(ac[i],ac[j]);\n\t\t\t\t\tswap(sumtime[i],sumtime[j]);\n\t\t\t\t\tswap(num[i],num[j]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tfor(int i = 1; i < t;i++){\n//\t\treps(i,1,t-1){\n\t\t\tif(ac[i] == ac[i+1] && sumtime[i] == sumtime[i+1]){\n\t\t\t\tcout << num[i] << \"=\";\n\t\t\t}\n\t\t\telse{\n\t\t\t\tcout << num[i] << \",\";\n\t\t\t}\n\t\t}\n\t\tcout << num[t] << endl;\n\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<string.h>\nusing namespace std;\n\nconst int INF=50000000;\n\nint data[51][12];\n\nint main(){\n\tint M,T,P,R;\n\twhile(cin>>M>>T>>P>>R && M){\n\t\tfill((int*)data,(int*)(data+12),0);\n\t\tfor(int i=0;i<R;i++){\n\t\t\tint m,t,p,j;\n\t\t\tcin>>m>>t>>p>>j;\n\t\t\tif(j==0){\n\t\t\t\tdata[t][0]++;\n\t\t\t\tdata[t][11]+=m+data[t][p]*20;\n\t\t\t}\n\t\t\telse data[t][p]++;\n\t\t}\n\t\tint prev[2]={INF,0};\n\t\tfor(int i=0;i<T;i++){\n\t\t\tint ans=0;\n\t\t\tint now[2]={0,INF};\n\t\t\tfor(int j=T;j>=0;j--){\n\t\t\t\tif(data[j][0]>now[0]){\n\t\t\t\t\tnow[0]=data[j][0];\n\t\t\t\t\tnow[1]=data[j][11];\n\t\t\t\t\tans=j;\n\t\t\t\t}\n\t\t\t\telse if(data[j][0]==now[0] && data[j][11]<now[1]){\n\t\t\t\t\tnow[1]=data[j][11];\n\t\t\t\t\tans=j;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(i){\n\t\t\t\tif(memcmp(now,prev,sizeof(now))==0)cout<<\"=\";\n\t\t\t\telse cout<<\",\";\n\t\t\t}\n\t\t\tcout<<ans;\n\t\t\tmemcpy(prev,now,sizeof(now));\n\t\t\tdata[ans][0]=-1;\n\t\t}\n\t\tcout<<endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\n#include<string>\n#include<cstdlib>\n#include<map>\n#include<iomanip>\n#include<sstream>\n#include<vector>\n#include<stack>\n#include<math.h>\n#include<queue>\n#include<complex>\n#include<random>\n#include<ctime>\n#include<set>\nusing namespace std;\n\n\nconst long long int mod=1000000007;\nconst long long int INF=99999999999999999;\n\nstruct team{\n\tlong long int id,ac[15]={},tim[15]={},sumtime=0,sumac=0;\n};\n\nlong long int M,T,P,R;\n\nbool cmp(team x,team y){\n\t\n\tif(x.sumac!=y.sumac){\n\t\treturn y.sumac<x.sumac;\n\t}\n\telse if(x.sumtime!=y.sumtime){\n\t\treturn x.sumtime<y.sumtime;\n\t}else{\n\t\treturn y.id<x.id;\n\t}\n}\nbool samecmp(team x,team y){\n\t\n\tif(x.sumac!=y.sumac){\n\t\treturn false;\n\t}\n\telse if(x.sumtime!=y.sumtime){\n\t\treturn false;\n\t}else{\n\t\treturn true;\n\t}\n}\nint main() {\n\t\n\tcout << fixed << setprecision(18);\n\tcin>>M>>T>>P>>R;\n\twhile(M!=0){\n\t\tteam te[55];\n\t\tfor(int i=1;i<=T;i++){te[i].id=i;}\n\t\tfor(int i=0;i<R;i++){\n\t\t\tlong long int m,t,p,j;\n\t\t\tcin>>m>>t>>p>>j;\n\t\t\tif(j==0){te[t].ac[p]=1;te[t].tim[p]+=m;}\n\t\t\telse{te[t].tim[p]+=20;}\n\t\t}\n\t\t\n\t\tfor(int i=1;i<=T;i++){\n\t\t\tfor(int v=1;v<=P;v++){\n\t\t\t\tte[i].sumac+=te[i].ac[v];\n\t\t\t\tte[i].sumtime+=te[i].ac[v]*te[i].tim[v];\n\t\t\t}\n\t\t}\n\t\tsort(te+1,te+T+1,cmp);\n\t\tcout<<te[1].id;\n\t\tfor(int i=2;i<=T;i++){\n\t\t\tif(samecmp(te[i],te[i-1])){\n\t\t\t\tcout<<\"=\"<<te[i].id;\n\t\t\t}else{\n\t\t\t\tcout<<\",\"<<te[i].id;\n\t\t\t}\n\t\t}\n\t\tcout<<endl;\n\t\tcin>>M>>T>>P>>R;\n\t}\n\n} \n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\nint main ()\n{\n\tint m,t,p,r;\n\twhile(cin>>m>>t>>p>>r)\n\t{\n\t\tif(m==0&&t==0&&p==0&&r==0)break;\n\t\tvector<pair<int, int> > a;//score time \n\t\tint num[150];\n\t\tint miss[150][20]={};\n\t\tfor(int i=0;i<150;i++)num[i]=i;\n\t\tfor(int i= 0;i<60;i++)\n\t\t{\n\t\t\tpair<int,int> l;\n\t\t\tl.first=0;\n\t\t\tl.second=0;\n\t\t\ta.push_back(l);\n\t\t}\n\t\t\n\t\tfor(int i =0;i<r;i++)\n\t\t{\n\t\t\t\n\t\t\tint time,team,prob,stat;\n\t\t\tcin>>time>>team>>prob>>stat;\n\t\t\tteam--;\n\t\t\t\n\t\t\tif(stat==0)\n\t\t\t{\n\t\t\t\ta[team].first++;\n\t\t\t\ta[team].second+=miss[team][prob]*20+time;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tmiss[team][prob]++;\n\t\t\t}\n\t\t}\n\t\t\n\t\t\n\t\tbool end=true;\n\t\twhile(end)\n\t\t{\n\t\t\tend = false;\n\t\t\tfor(int i=1;i<t;i++)\n\t\t\t{\n\t\t\t\tif(a[i].first>a[i-1].first)\n\t\t\t\t{\n\t\t\t\t\tswap(a[i],a[i-1]);\n\t\t\t\t\tswap(num[i],num[i-1]);\n\t\t\t\t\tend = true;\n\t\t\t\t}\n\t\t\t\telse if(a[i].first==a[i-1].first&&a[i].second<a[i-1].second)\n\t\t\t\t{\n\t\t\t\t\tswap(a[i],a[i-1]);\n\t\t\t\t\tswap(num[i],num[i-1]);\n\t\t\t\t\tend= true;\n\t\t\t\t}\n\t\t\t\telse if(num[i]>num[i-1]&&a[i].first==a[i-1].first&&a[i].second==a[i-1].second)\n\t\t\t\t{\n\t\t\t\t\t\n\t\t\t\t\tswap(a[i],a[i-1]);\n\t\t\t\t\tswap(num[i],num[i-1]);\n\t\t\t\t\tend=true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcout<<num[0]+1;\n\t\tfor(int i=1;i<t;i++)\n\t\t{\n\t\t\tif(a[i]==a[i-1])cout<<\"=\";\n\t\t\telse cout<<\",\";\n\t\t\tcout<<num[i]+1;\n\t\t}\n\t\tcout<<endl;\n\t\t\n\t\t\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n#include <vector>\nusing namespace std;\n\nstruct team{\n    int t;\n    int ac;\n    int id;\n    team():t(0),ac(0),id(0){}\n    bool operator <(const team& a){\n        if(ac != a.ac) return ac > a.ac;\n        if(t != a.t) return t < a.t;\n        return id > a.id;\n    }\n};\n\nint main(){\n    while(1){\n        int m,t,p,r;\n        cin >>m>>t>>p>>r;\n        if(m==0) break;\n\n        vector<vector<int> > wa(t, vector<int>(p,0));\n        vector<team> info(t);\n        for(int i=0; i<t; i++) info[i].id=i+1;\n        for(int i=0; i<r; i++){\n            int mi,ti,pi,ji;\n            cin >>mi>>ti>>pi>>ji;\n            ti--; pi--;\n            if(ji==0){\n                info[ti].ac++;\n                info[ti].t += mi + wa[ti][pi]*20;\n            }else{\n                wa[ti][pi]++;\n            }\n        }\n        sort(info.begin(), info.end());\n        cout << info[0].id;\n        for(int i=1; i<t; i++){\n            if(info[i].ac==info[i-1].ac && info[i].t==info[i-1].t){\n                cout << \"=\";\n            }else{\n                cout << \",\";\n            }\n            cout << info[i].id;\n        }\n        cout << endl;\n    }   \n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <stdio.h>\n#include <cmath>\n#include <algorithm>\n#include <stack>\n#include <queue>\n#include <vector>\n\nusing namespace std;\n\nstruct Info{\n\tInfo(){\n\t\tteam_id = num_ans = sum_time = 0;\n\t}\n\tint team_id,num_ans,sum_time;\n};\n\nvoid func(int TOTAL_TIME,int num_team,int num_problem,int num_log){\n\tInfo info[num_team+1];\n\tint penaTable [num_team+1][num_problem+1];\n\tfor(int i = 1; i <= num_team; i++){\n\t\tfor(int k = 1; k <= num_problem; k++)penaTable[i][k] = 0;\n\t}\n\n\tfor(int i = 1; i <= num_team; i++){\n\t\tinfo[i].team_id = i;\n\t}\n\n\tint m,t,p,j;\n\n\tfor(int i = 0; i < num_log; i++){\n\t\tscanf(\"%d %d %d %d\",&m,&t,&p,&j);\n\n\t\tif(j == 0){\n\t\t\tinfo[t].num_ans += 1;\n\t\t\tinfo[t].sum_time += (m + penaTable[t][p]);\n\t\t}else{\n\t\t\tpenaTable[t][p] += 20;\n\t\t}\n\t}\n\n\tfor(int i = 2; i <= num_team; i++){\n\t\tfor(int k = num_team; k >= i; k--){\n\t\t\tif(info[k].num_ans > info[k-1].num_ans)swap(info[k],info[k-1]);\n\t\t\telse if(info[k].num_ans == info[k-1].num_ans && info[k].sum_time < info[k-1].sum_time)swap(info[k],info[k-1]);\n\t\t\telse if(info[k].num_ans == info[k-1].num_ans && info[k].sum_time == info[k-1].sum_time &&\n\t\t\t\t\tinfo[k].team_id > info[k-1].team_id)swap(info[k],info[k-1]);\n\t\t}\n\t}\n\n\tprintf(\"%d\",info[1].team_id);\n\n\tfor(int i = 2; i <= num_team; i++){\n\t\tif((info[i].num_ans < info[i-1].num_ans) || (info[i].num_ans == info[i-1].num_ans && info[i].sum_time > info[i-1].sum_time)){\n\t\t\tprintf(\",%d\",info[i].team_id);\n\t\t}else{\n\t\t\tprintf(\"=%d\",info[i].team_id);\n\t\t}\n\t}\n\tprintf(\"\\n\");\n\n}\n\n\nint main(){\n\n\tint M,T,P,R;\n\n\twhile(true){\n\t\tscanf(\"%d %d %d %d\",&M,&T,&P,&R);\n\t\tif(M == 0 && T == 0 && P == 0 && R == 0)break;\n\n\t\tfunc(M,T,P,R);\n\n\t}\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#pragma GCC optimize(\"Ofast\")\n#include <bits/stdc++.h>\nusing namespace std;\n\n#define INF 1LL << 61\n#define MAX (1LL << 31) -1\n#define MOD 1000000007\n\ntypedef long long ll;\ntypedef pair<int,int> pi;\n//typedef pair<pair<int,int>,ll> p;\n#define bit(n, k) ((n >> k) & 1) /*nのk bit目*/\n#define rad_to_deg(rad) (((rad) / 2 / M_PI) * 360)\ntemplate<class T,class U>bool inline chmin(T&a,const U&b){if(a<=b)return false;a=b;return true;}\ntemplate<class T,class U>bool inline chmax(T&a,const U&b){if(a>=b)return false;a=b;return true;}\n//__builtin_popcount(S);\n//C.erase(unique(C.begin(),C.end()),C.end());\n//#define int ll\nint dx[]={1,-1,0,0},dy[]={0,0,-1,1};\n\nint pena[55][11];\npi kekka[51];\n\nsigned main(){\n    while(true){\n        int M,T,P,R;\n        cin>>M>>T>>P>>R;\n        if(M==0 && T==0 && P==0 && R==0) return 0;\n        vector<vector<int>> pena(T+1,vector<int>(P+1,0));\n        vector<pi> kekka(T+1,pi(0,0));\n        while(R--){\n            int m,t,p,j;\n            cin>>m>>t>>p>>j;\n            if(j==0){\n                kekka[t].first++;\n                kekka[t].second+=m+pena[t][p]*20;\n            }else{\n                pena[t][p]++;\n            }\n        }\n        vector< tuple<int,int,int> > ans;\n        for(int i=1;i<=T;i++){\n            ans.emplace_back(-kekka[i].first,kekka[i].second,-i);\n        }\n        sort(ans.begin(),ans.end());\n        for(int i=0;i<T;i++){\n            cout<<-get<2>(ans[i]);\n            if(i!=T-1){\n                if(get<0>(ans[i])==get<0>(ans[i+1]) && get<1>(ans[i])==get<1>(ans[i+1]) ){\n                    cout<<\"=\";\n                }else cout<<\",\";\n            }\n        }\n        cout<<endl;\n    }\n}\n"
  },
  {
    "language": "C++",
    "code": "#define _CRT_SECURE_NO_WARNINGS\n#define _USE_MATH_DEFINES\n\n#include \"bits/stdc++.h\"\n#define REP(i,a,b) for(i=a;i<b;++i)\n#define rep(i,n) REP(i,0,n)\n#define ll long long\n#define ull unsigned ll\ntypedef long double ld;\n#define ALL(a) (a).begin(),(a).end()\n#define ifnot(a) if(not a)\n#define dump(x)  cerr << #x << \" = \" << (x) << endl\nusing namespace std;\n\nvoid reader(int &a) { scanf(\"%d\", &a); }\nvoid reader(double &a) { scanf(\"%lf\", &a); }\nvoid reader(char a[]) { scanf(\"%s\", a); }\nvoid reader(char &a) { scanf(\" %c\", &a); }\nvoid reader(ll &a) { scanf(\"%lld\", &a); }\nvoid reader(ull &a) { scanf(\"%llu\", &a); }\n// void reader(string& a){cin >> a;};\ntemplate<class T, class U> void reader(T& t, U& u) { reader(t); reader(u); }\ntemplate<class T, class U, class V> void reader(T& t, U& u, V& v) { reader(t); reader(u); reader(v); }\n\nvoid writer(const int a, char c) { printf(\"%d\", a); putchar(c); }\nvoid writer(const ll a, char c) { printf(\"%lld\", a); putchar(c); }\nvoid writer(const ull a, char c) { printf(\"%llu\", a); putchar(c); }\nvoid writer(const double a, char c) { printf(\"%.20lf\", a); putchar(c); }\nvoid writer(const char a[]) { printf(\"%s\", a); };\nvoid writer(const char a[], char c) { printf(\"%s\", a); putchar(c); };\nvoid writer(const char a, char c) { putchar(a); putchar(c); };\ntemplate<class T> void writerLn(T t) { writer(t, '\\n'); }\ntemplate<class T, class U> void writerLn(T t, U u) { writer(t, ' '); writer(u, '\\n'); }\ntemplate<class T, class U, class V> void writerLn(T t, U u, V v) { writer(t, ' '); writer(u, ' '); writer(v, '\\n'); }\ntemplate<class T> void writerArr(T x[], int n) { int i; if (!n) { putchar('\\n'); return; }rep(i, n - 1) writer(x[i], ' '); writer(x[n - 1], '\\n'); }\ntemplate<class T> void writerVec(vector<T> x) { int n = x.size(); int i; if (!n) { putchar('\\n'); return; }rep(i, n - 1) writer(x[i], ' '); writer(x[n - 1], '\\n'); }\n\nvector<string> split(const string &str, char sep) { vector<string> v; stringstream ss(str); string buffer; while (getline(ss, buffer, sep)) { v.push_back(buffer); }return v; }\n// #define int ll\nbool test = 1;\nint dx[] = { 0,1,0,-1 };\nint dy[] = { 1,0,-1,0 };\n#define MAX 300000\n//.....................\null mod = (int)1e9 + 7;\n\nstruct Rank {\n\tint num;\n\tint AC_cnt;\n\tint t;\n\tbool operator < (const Rank& r) const {\n\t\tif (AC_cnt < r.AC_cnt) return true;\n\t\tif (AC_cnt == r.AC_cnt) {\n\t\t\tif (t > r.t) return true;\n\t\t\tif (t == r.t) {\n\t\t\t\tif (num < r.num) return true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n};\n\nsigned main(void)\n{\n\tint i, j, k;\n\twhile (1) {\n\t\tint M, T, P, R;\n\t\tbool AC[51][11] = {};\n\t\tint AC_cnt[51] = {};\n\t\tint elapsed_time[51] = {};\n\t\tint WA[51][11] = {};\n\t\treader(M, T, P);\n\t\treader(R);\n\t\tif (M == 0) return 0;\n\t\trep(i, R) {\n\t\t\tint m, t, p, j;\n\t\t\treader(m, t);\n\t\t\treader(p, j);\n\t\t\tt--; p--;\n\t\t\tif (j == 0) {\n\t\t\t\tif (!AC[t][p]) {\n\t\t\t\t\tAC[t][p] = true;\n\t\t\t\t\tAC_cnt[t] += 1;\n\t\t\t\t\telapsed_time[t] += m + WA[t][p] * 20;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tWA[t][p] += 1;\n\t\t\t}\n\t\t}\n\t\tRank team[50];\n\t\trep(i, T) {\n\t\t\tteam[i].num = i;\n\t\t\tteam[i].AC_cnt = AC_cnt[i];\n\t\t\tteam[i].t = elapsed_time[i];\n\t\t}\n\t\tsort(&team[0], &team[T]);\n\t\tprintf(\"%d\",team[T-1].num+1);\n\t\tfor (i = T - 2; i > -1; i--) {\n\t\t\tif (team[i].AC_cnt != team[i + 1].AC_cnt\n\t\t\t\t|| team[i].t != team[i + 1].t) {\n\t\t\t\tprintf(\",\");\n\t\t\t}\n\t\t\telse printf(\"=\");\n\t\t\tprintf(\"%d\", team[i].num+1);\n\t\t}\n\t\tputs(\"\");\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\nusing namespace std;\n\nint main(){\n    while(true){\n        int contestTime, teamCount, probremCount, submitCount;\n        cin >> contestTime >> teamCount >> probremCount >> submitCount;\n        if(contestTime == 0){\n            break;\n        }\n        int teamPoint[teamCount], teamTime[teamCount], teamPenalty[teamCount][probremCount];\n        for(int i = 0; i < teamCount; i++){\n            teamPoint[i] = teamTime[i] = 0;\n            for(int j = 0; j < probremCount; j++){\n                teamPenalty[i][j] = 0;\n            }\n        }\n        for(int i = 0; i < submitCount; i++){\n            int m, t, p, j;\n            cin >> m >> t >> p >> j;\n            t--;\n            if(j == 0){\n                teamPoint[t]++;\n                teamTime[t] += m + teamPenalty[t][p] * 20;\n            }else{\n                teamPenalty[t][p]++;\n            }\n        }\n        int previousIndex = -1;\n        int previousPoint = -1;\n        int previousTime = -1;\n        for(int i = 0; i < teamCount; i++){\n            int maxPoint = 0;\n            int topTime = contestTime;\n            int topIndex = 0;\n            for(int j = 0; j < teamCount; j++){\n                if(teamPoint[j] > maxPoint){\n                    maxPoint = teamPoint[j];\n                    topTime = teamTime[j];\n                    topIndex = j;\n                }else if(teamPoint[j] == maxPoint){\n                    if(topTime >= teamTime[j]){\n                        topTime = teamTime[j];\n                        topIndex = j;\n                    }\n                }\n            }\n            if(i != 0 && maxPoint == previousPoint && topTime == previousTime){\n                cout << '=' << topIndex + 1;\n            }else if(i != 0){\n                cout << ',' << topIndex + 1;\n            }else{\n                cout << topIndex + 1;\n            }\n            previousIndex = topIndex;\n            previousTime = teamTime[topIndex];\n            previousPoint = teamPoint[topIndex];\n            teamPoint[topIndex] = -1;\n            teamTime[topIndex] = contestTime + 1;\n            \n        }\n            cout << endl;\n    }\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n#define MOD 1000000007\n#define BIG 1000000010\n#define repi(i,x,n) for(int i=x;i<n;i++)\n#define rep(i,n) repi(i,0,n)\n#define repn(i,n) for(int i=n;i>=0;i--)\ntypedef long long int ll;\n\n\nint main(){\n  int M,T,P,R;\n  int m,t,p,j;\n  int s[55][4];\n  int mp[55][10];\n  // s 0=solve 1=time 2=penalty 3=number\n  while(1){\n    cin>>M>>T>>P>>R;\n    if(M==0 && T==0 && P==0 && R==0) break;\n    rep(i,55){\n      rep(j,4){\n\tif(j!=3) s[i][j]=0;\n\telse s[i][j]=i;\n      }\n    }\n    rep(i,55){\n      rep(j,10){mp[i][j]=0;}\n    }\n    rep(i,R){\n      cin>>m>>t>>p>>j;\n      if(j!=0) mp[t][p]++;\n      else{\n\ts[t][1]+=m+mp[t][p]*20;\n\ts[t][0]++;\n      }\n    }\n    repi(i,1,T+1){\n      int a=i;\n      while(1){\n\tif(a==1) break;\n\telse if(s[a][0]>s[a-1][0]){swap(s[a],s[a-1]);a--;}\n\telse if(s[a][0]==s[a-1][0] && s[a][1]<s[a-1][1]){swap(s[a],s[a-1]);a--;}\n\telse if(s[a][0]==s[a-1][0] && s[a][1]==s[a-1][1] && s[a][3]>s[a-1][3]){swap(s[a],s[a-1]);a--;}\n\telse break;\n      }\n    }\n    repi(i,1,T+1){\n      cout<<s[i][3];\n      if(i==T) cout<<endl;\n      else{\n\tif(s[i][0]==s[i+1][0] && s[i][1]==s[i+1][1]) cout<<\"=\";\n\telse cout<<\",\";\n      }\n    }\n  }\n  \n    \n  return 0;\n}\n\n\n\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n#define min(a,b) ((a)<(b)?(a):(b))\n#define max(a,b) ((a)>(b)?(a):(b))\n#define REP(i,n) for(int i=0;i<n;i++)\n#define FOR(i,n1,n2) for(int i=n1;i<n2;i++)\n#define speed_up    ios_base::sync_with_stdio(false); cin.tie(0); cout.tie(0);\n\ntypedef long long int ll;\ntypedef pair<ll,ll> Pi;\nconst int INF=(ll)(1LL<<31)-1;\nconst ll INFl=(ll)9223372036854775807;\nconst int MAX=10000;\nconst ll MOD=(ll)1e9+7;\nll gcd(ll a,ll b){return b?gcd(b,a%b):a;}\nll lcm(ll a,ll b){return a/gcd(a, b)*b;}\n//int dx[4]={1,0,-1,0},dy[4]={0,1,0,-1};\n\ntemplate<typename A, size_t N, typename T>\nvoid Fill(A (&array)[N], const T &val){\n    std::fill( (T*)array, (T*)(array+N), val );\n}\n\n\nint m,t,p,r;\nvector<pair<int,pair<int,int> > > vv[55];\ntypedef struct{\n\tint num;\n\tint ans_n;\n\tint time;\n}date_set;\n\ndate_set date(int num,int ans_n,int time){\n\tdate_set temp;\n\ttemp.num=num;\n\ttemp.ans_n=ans_n;\n\ttemp.time=time;\n\treturn temp;\n}\n\ndate_set vre[55];\nbool comp(const pair<int,pair<int,int> >& P1,const pair<int,pair<int,int> >& P2){\n\treturn P1.second.second<P2.second.second;\n}\n\nbool comp2(const date_set& d1,const date_set& d2){\n\tif(d1.ans_n!=d2.ans_n){\n\t\treturn d1.ans_n>d2.ans_n;\n\t}else if(d1.time!=d2.time){\n\t\treturn d1.time<d2.time;\n\t}else{\n\t\treturn d1.num>d2.num;\n\t}\n}\n\nvector<string> anss;\nint main(){\n\twhile(1){\n\t\tfor(int i=0;i<55;i++){\n\t\t\tvv[i].clear();\n\t\t\tvre[i]={0,0,0};\n\t\t}\n\t\tcin>>m>>t>>p>>r;\n\t\tif(m==0&&t==0&&p==0&&r==0)break;\n\t\tfor(int i=0;i<r;i++){\n\t\t\tint mm,tt,pp,jj;\n\t\t\tcin>>mm>>tt>>pp>>jj;\n\t\t\tvv[tt].push_back(make_pair(mm,pair<int,int>(pp,jj)));\n\t\t}\n\t\tvector<int> alr;\n\t\tfor(int i=1;i<=t;i++){\n\t\t\talr.clear();\n\t\t\tsort(vv[i].begin(),vv[i].end(),comp);\n\t\t\tint cor=0;\n\t\t\tint time=0;\n\t\t\tfor(int j=0;j<vv[i].size();j++){\n\t\t\t\tif(vv[i][j].second.second==0){\n\t\t\t\t\tcor++;\n\t\t\t\t\ttime+=vv[i][j].first;\n\t\t\t\t\talr.push_back(vv[i][j].second.first);\n\t\t\t\t}else{\n\t\t\t\t\tauto itr=find(alr.begin(),alr.end(),vv[i][j].second.first);\n\t\t\t\t\tif(itr!=alr.end()){\n\t\t\t\t\t\ttime+=20;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tvre[i-1]=date(i,cor,time);\n\t\t\t\n\t\t}\n\t\t/*for(int i=0;i<t;i++){\n\t\t\tcout<<vre[i].num<<\" \"<<vre[i].ans_n<<\" \"<<vre[i].time<<endl;\n\t\t}*/\n\t\tsort(vre,vre+t,comp2);\n\t\tstring st=\"\";\n\t\tfor(int i=0;i<t-1;i++){\n\t\t\tif(vre[i].ans_n!=vre[i+1].ans_n||vre[i].time!=vre[i+1].time){\n\t\t\t\t//cout<<vre[i].num<<\",\";\n\t\t\t\tst=st+to_string(vre[i].num)+\",\";\n\t\t\t}else{\n\t\t\t\tst=st+to_string(vre[i].num)+\"=\";\n\t\t\t\t//cout<<vre[i].num<<\"=\";\n\t\t\t}\n\t\t}\n\t\t\n\t\tst=st+to_string(vre[t-1].num)+\"\\n\";\n\t\t//cout<<vre[t-1].num<<endl;\n\t\tanss.push_back(st);\n\t}\n\tfor(int i=0;i<anss.size();i++){\n\t\tcout<<anss[i];\n\t}\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#define _USE_MATH_DEFINES \n#include <iomanip> \n#include <cmath>  \n#include<iostream>\n#include <fstream>\n#include<vector>\n#include<algorithm>\n#include<bitset>\n#include<map>\n#include<queue>\n#include<stack>\nusing namespace std;\ntypedef long long ll;\n#define repi(i,a,b) for(ll i = (ll)(a) ; i < (ll)(b) ; i++)\n#define repd(i,a,b) for(ll i = (ll)(a) ; i > (ll)(b) ; i--)\n#define rd(x) cin >> x\n#define wr(x)  cout << x\n#define wrln(x) cout << x << endl\n\nint M, T, P, R;\n\nint main() {\n\tstruct team {\n\t\tint number, point, time;\n\t\tbool operator<(const team& right) const {\n\t\t\t// ポイントは大きい方が↑、同じなら時間小さい方が↑\n\t\t\treturn point == right.point ? time > right.time : point < right.point;\n\t\t}\n\t};\n\twhile (1) {\n\t\tcin >> M >> T >> P >> R;\n\t\tif (M == 0 && T == 0 && P == 0 && R == 0) break;\n\t\tvector<team> teams;\n\t\tteam ttemp;\n\t\trepi(i, 0, T) {\n\t\t\tteam t;\n\t\t\tt.number = i, t.point = 0, t.time = 0;\n\t\t\tteams.push_back(t);\n\t\t}\n\t\tint mi, ti, pi, ji;//経過時間、チーム番号、問題番号、ジャッジの種類\n\t\tint timetemps[51][11] = {};//[チーム番号][問題番号]\n\t\trepi(i, 0, R) {\n\t\t\tcin >> mi >> ti >> pi >> ji;\n\t\t\tif (ji == 0) {\n\t\t\t\t//正解\n\t\t\t\tteams[ti - 1].point++;\n\t\t\t\tteams[ti - 1].time += (timetemps[ti - 1][pi] + mi);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t//不正解\n\t\t\t\ttimetemps[ti-1][pi] += 20;\n\t\t\t}\n\t\t}\n\t\tsort(teams.begin(), teams.end());\n\t\treverse(teams.begin(), teams.end());\n\t\trepi(i, 0, teams.size()) {\n\t\t\tif (i > 0) {\n\t\t\t\tif (teams[i].point == teams[i - 1].point && teams[i].time == teams[i - 1].time) {\n\t\t\t\t\twr(\"=\");\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\twr(\",\");\n\t\t\t\t}\n\t\t\t}\n\t\t\twr(teams[i].number + 1);\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\ntypedef long long int ll;\ntypedef pair<int, int> pii;\ntypedef vector<int> vi;\ntypedef vector<pair<int, int> > vii;\n#define rrep(i, m, n) for(int (i)=(m); (i)<(n);  (i)++)\n#define erep(i, m, n) for(int (i)=(m); (i)<=(n); (i)++)\n#define  rep(i, n)    for(int (i)=0; (i)<(n);  (i)++)\n#define rrev(i, m, n) for(int (i)=(n)-1; (i)>=(m); (i)--)\n#define erev(i, m, n) for(int (i)=(n); (i)>=(m); (i)--)\n#define  rev(i, n)    for(int (i)=(n)-1; (i)>=0; (i)--)\n#define vrep(i, c)    for(__typeof((c).begin())i=(c).begin(); i!=(c).end(); i++)\n#define  ALL(v)       (v).begin(), (v).end()\n#define pb            push_back\ntemplate<class T, class S> inline pair<T, S> mp(T x, S y){ return make_pair(x, y); }\ntemplate<class T, class S> inline bool minup(T& m, S x){ return m>(T)x ? (m=(T)x, true) : false; }\ntemplate<class T, class S> inline bool maxup(T& m, S x){ return m<(T)x ? (m=(T)x, true) : false; }\n\nstatic const int    INF = 1000000000;\nstatic const ll     MOD = 1000000007LL;\nstatic const double EPS = 1E-12;\n\nconst int MAX_T = 70;\nconst int MAX_P = 20;\nint M, T, P, R;\nint tID, pID, ti, mes;\nint wa[MAX_T][MAX_P];\n\nstruct data{int a, p, id; };\n\ninline bool operator < (const data& x, const data& y)\n{\n  return x.a!=y.a ? x.a<y.a : x.p!=y.p ? x.p>y.p : x.id < y.id;\n  //  return x.a!=y.a ? x.a<y.a : x.p>y.p;\n}\n\ninline bool operator > (const data& x, const data& y)\n{\n  return !(x < y);\n}\n\ninline bool operator == (const data& x, const data& y)\n{\n  return x.a==y.a && x.p==y.p;\n}\n\nostream& operator <<(ostream& r, const vector<data> t){vrep(v,t)r<<v->id<<(v+1==t.end()?\"\":*v==*(v+1)?\"=\":\",\");return r;}\n\nint main()\n{\n  while(cin >> M >> T >> P >> R, T){\n    vector<data> g(T, (data){0, 0, 0});\n    rep(i, MAX_T) rep(j, MAX_P) wa[i][j] = 0;\n    rep(i, T) g[i].id = i + 1;\n\n    rep(i, R){\n      cin >> ti >> tID >> pID >> mes;\n      tID -= 1;  pID -= 1;\n      if(mes == 0){\n        g[tID].a += 1;\n        g[tID].p += wa[tID][pID] * 20 + ti;\n      }\n      else wa[tID][pID] += 1;\n    }\n    sort(ALL(g), greater<data>());\n    cout << g << endl;\n  }\n\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<queue>\n#include<string>\n#include<stack>\n#include<cstdio>\n#include<algorithm>\n\nusing namespace std;\n\nint main(void)\n{\n  int m,t,p,r;\n  int i,j;\n  int mi,ti,pi,ji;\n  int rank[55][2]=0;\n  int miss[55][10]={};\n  int max[10][50]={};\n  int num[10]={};\n\n  while(1){\n    cin>>m>>t>>p>>r;\n    if(r==0)break;\n    for(i=0;i<r;i++){\n      cin>>mi>>ti>>pi>>ji;\n      if(ji==0){\n        rank[ti][0]=mi+miss[ti][pi]*20;\n        rank[ti][1]++;\n      }else{\n        miss[ti][pi]++;\n      }\n    }\n\n    max[rank[1][1]][0]=1;\n\n    for(i=1;i<t;i++){\n      max[rank[i][1]][num[rank[i][1]]]=i;\n      num[rank[i][1]]++;\n      sort(max[rank[i][1]],max[rank[i][1]]+num[rank[i][1]]);\n    }\n    for(i=10;i>0;i--){\n      for(j=num[i];j>0;j--){\n        cout<<max[i][j];\n        if(rank[max[i][j]][0]\n\n    }\n\n  }\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\nint main(){\n    int m,t,p,r;\n    while(cin>>m>>t>>p>>r,m){\n        vector<vector<int>> team(t,vector<int>(p,0));\n        for(int i=0;i<r;i++){\n            int mm,tt,pp,jj;\n            cin>>m>>tt>>pp>>jj;\n            if(!jj)\n                team[tt-1][pp-1]=m+(-team[tt-1][pp-1])*20;\n            else\n                team[tt-1][pp-1]--;\n\n        }\n        vector<tuple<int,int,int>> rank(t,make_tuple(0,0,0));\n        for(int i=0;i<t;i++)\n            get<2>(rank[i])=i+1;\n        for(int i=0;i<t;i++){\n            for(int j=0;j<p;j++)\n                if(team[i][j]>0){\n                    (get<0>(rank[i]))++;\n                    get<1>(rank[i])-=team[i][j];\n                }\n\n\n        }\n        sort(rank.begin(),rank.end(),greater<tuple<int,int,int>>());\n        queue<int> q;\n        pair<int,int> pre=make_pair(-1,-1);\n        string res=\"\";\n        for(int i=0;i<t;i++){\n            if(pre==make_pair(get<0>(rank[i]),get<1>(rank[i]))){\n                q.push(get<2>(rank[i]));\n                continue;\n            }\n            else{\n                if(!res.empty())\n                    res+=\",\";\n                int s=q.size();\n                for(int j=0;j<s;j++){\n                    int a=q.front();\n                    if(j!=s-1){\n                        res+=to_string(a)+\"=\";\n                        }\n                    else\n                        res+=to_string(a);\n\n                    q.pop();\n\n                }\n                q.push(get<2>(rank[i]));\n                pre=make_pair(get<0>(rank[i]),get<1>(rank[i]));\n            }\n\n        }\n        if(!res.empty() && !q.empty())\n            res+=',';\n        for(int i=0;!q.empty();i++){\n            if(q.size()!=1){\n                res+=to_string(q.front())+\"=\";\n\n            }\n            else\n                res+=to_string(q.front());\n            q.pop();\n        }\n        cout<<res<<endl;\n    }\n\n    return 0;\n}\n                        "
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\ntemplate<class T>\nbool chmax(T& a, const T& b) {\n    if (a < b) { a = b; return true; }\n    return false;\n}\ntemplate<class T>\nbool chmin(T& a, const T& b) {\n    if (b < a) { a = b; return true; }\n    return false;\n}\n\n// std::vector Declaration\ntemplate<typename T>\nvector<T> make_v(size_t a) { return vector<T>(a); }\ntemplate<typename T, typename... Ts>\nauto make_v(size_t a, Ts... ts) {\n    return vector<decltype(make_v<T>(ts...))>(a, make_v<T>(ts...));\n}\n\n// std::vector Declaration and Initialization\ntemplate<typename T>\nvector<T> make_vector(size_t a, T x) { return vector<T>(a, x); }\ntemplate<typename T, typename U, typename... Ts>\nauto make_vector(size_t a, U b, Ts... ts) {\n    return vector<decltype(make_vector<T>(b,ts...))>(a, make_vector<T>(b, ts...));\n}\n\n// std::vector Input\ntemplate<typename T>\nistream& operator>>(istream& is, vector<T>& v) {\n    for (auto &e : v) is >> e;\n    return is;\n}\n\n// std::vector Debug\ntemplate<typename T>\nostream& operator<<(ostream& os, const vector<T>& v) {\n    os << \"[\";\n    bool a = 1;\n    for (auto e : v) {\n        os << (a ? \"\" : \" \");\n        os << e;\n        a = 0;\n    }\n    os << \"]\";\n    return os;\n}\n\n// std::array Debug\ntemplate<typename T, size_t n>\nostream& operator<<(ostream& os, const array<T, n>& v) {\n    os << \"[\";\n    bool a = 1;\n    for (auto e : v) {\n        os << (a ? \"\" : \" \");\n        os << e;\n        a = 0;\n    }\n    os << \"]\";\n    return os;\n}\n\n// std::deque Debug\ntemplate<typename T>\nostream& operator<<(ostream& os, const deque<T>& d) {\n    os << \"[\";\n    bool a = 1;\n    for (auto e : d) {\n        os << (a ? \"\" : \" \");\n        os << e;\n        a = 0;\n    }\n    os << \"]\";\n    return os;\n}\n\n// std::pair Debug\ntemplate<typename T, typename U>\nostream& operator<<(ostream& os, const pair<T, U>& p) {\n    os << \"(\" << p.first << \" \" << p.second << \")\";\n    return os;\n}\n\n// std::set Debug\ntemplate<typename T>\nostream& operator<<(ostream& os, const set<T>& st) {\n    os << \"{\";\n    bool a = 1;\n    for (auto e : st) {\n        os << (a ? \"\" : \" \");\n        os << e;\n        a = 0;\n    }\n    os << \"}\";\n    return os;\n}\n\n// std::multiset Debug\ntemplate<typename T>\nostream& operator<<(ostream& os, const multiset<T>& st) {\n    os << \"{\";\n    bool a = 1;\n    for (auto e : st) {\n        os << (a ? \"\" : \" \");\n        os << e;\n        a = 0;\n    }\n    os << \"}\";\n    return os;\n}\n\n// std::map Debug\ntemplate<typename T, typename U>\nostream& operator<<(ostream& os, const map<T, U>& mp) {\n    os << \"{\";\n    bool a = 1;\n    for (auto e : mp) {\n        os << (a ? \"\" : \" \");\n        os << e.first << \":\" << e.second;\n        a = 0;\n    }\n    os << \"}\";\n    return os;\n}\n\n// std::tuple Debug\ntemplate<int N, class Tuple>\nvoid out(ostream& os, const Tuple& t){}\ntemplate<int N, class Tuple, class H, class ...Ts>\nvoid out(ostream& os, const Tuple& t) {\n    if (N) os << \" \";\n    os << get<N>(t);\n    out<N+1,Tuple,Ts...>(os, t);\n}\ntemplate<class ...Ts>\nostream& operator<<(ostream& os, const tuple<Ts...>& t) {\n    os << \"(\";\n    out<0,tuple<Ts...>,Ts...>(os, t);\n    os << \")\";\n    return os;\n}\n\n// Debug\n#define DUMP(x) cerr<<#x<<\" = \"<<(x)<<endl\n\n// Weighted edge\ntemplate<typename T>\nstruct edge {\n    int src, to;\n    T cost;\n\n    edge() {}\n    edge(int to, T cost) : src(-1), to(to), cost(cost) {}\n    edge(int src, int to, T cost) : src(src), to(to), cost(cost) {}\n\n    friend ostream& operator<<(ostream& os, const edge& e) {\n        return os << \"(\" << e.src << \"->\" << e.to << \":\" << e.cost << \")\";\n    }\n};\n\nusing LL = long long;\n\n#define fs first\n#define sc second\n\nconst LL MOD = 1e9+7;\n\n\nint main()\n{\n    cin.tie(0);\n    ios::sync_with_stdio(false);\n    cout << fixed << setprecision(10);\n\n    while (true) {\n        int M, T, P, R;\n        cin >> M >> T >> P >> R;\n        if (M == 0) {\n            break;\n        }\n\n        map<int,map<int,int>> solvedTime, waNum;\n        for (int k = 0; k < R; ++k) {\n            int m, t, p, j;\n            cin >> m >> t >> p >> j;\n\n            if (j == 0) {\n                solvedTime[t][p] = m;\n            } else {\n                ++waNum[t][p];\n            }\n        }\n\n        map<int,int> solvedNum, totalTime;\n        for (int t = 1; t <= T; ++t) {\n            solvedNum[t] = solvedTime[t].size();\n            for (auto tp : solvedTime[t]) {\n                totalTime[t] += tp.second;\n                totalTime[t] += waNum[t][tp.first] * 20;\n            }\n        }\n\n        vector<pair<int,int>> scores;\n        map<pair<int,int>,vector<int>> result;\n        for (int t = 1; t <= T; ++t) {\n            scores.emplace_back(solvedNum[t], totalTime[t]);\n            result[make_pair(solvedNum[t], totalTime[t])].emplace_back(t);\n        }\n\n        sort(scores.begin(), scores.end(),[&](pair<int,int> a, pair<int,int> b){\n                    if (a.first == b.first) {\n                        return a.second < b.second;\n                    }\n                    return a.first > b.first;\n                });\n        scores.erase(unique(scores.begin(), scores.end()), scores.end());\n\n        for (auto& tp : result) {\n            sort(tp.second.begin(), tp.second.end(),[&](int i,int j){\n                    return i > j;\n                    });\n        }\n\n        string ans;\n        for (auto p : scores) {\n            for (int i = 0; i < result[p].size(); ++i) {\n                ans += (i > 0 ? \"=\" : \",\");\n                ans += to_string(result[p][i]);\n            }\n        }\n\n        cout << ans.substr(1,ans.size()-1) << endl;\n\n    }\n\n    return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstdio>\n#include <algorithm>\n#include <string>\n#include <cstring>\n#include <cctype>\n#include <cmath>\n#include <stack>\n#include <queue>\n#include <vector>\n#include <set>\n#include <map>\n#include <list>\n#include <stdio.h>\n#include <string.h>\n#include <cstdlib>\n#include <math.h>\n#include <bitset>\n#define INF 2000000000\nusing namespace std;\nint dx[4]={1,0,-1,0},dy[4]={0,1,0,-1};\n#define ll long long\n#define PL pair<long long, long long>\n#define PR pair<int,int>\n#define mk make_pair\n#define en endl;\n#define WHITE 0\n#define BLACK 2\n#define GRAY 1\n#define RE return 0;\n#define int ll\n\n//ICPC Ranking  AOJ\n\n#define MAX 60\nint tt[55];\nint pena[55][15];\nint point[55];\nbool done[MAX];\n\nsigned main(){\n  int M,T,P,R;\n  while(cin>>M>>T>>P>>R&&!(M==0&&T==0&&P==0&&R==0)){\n    for(int i=0; i<=55; i++){\n      for(int j=0; j<=15; j++){\n        pena[i][j]=0;\n      }\n      tt[i]=0;\n      point[i]=0;\n      done[i]=false;\n    }\n    \n    for(int i=0; i<R; i++){\n      int m,t,p,j;\n      cin>>m>>t>>p>>j;\n      if(j){\n        pena[t][p]++;\n      }else{\n        tt[t]+=m;\n        tt[t]+=pena[t][p]*20;\n        point[t]++;\n      }\n    }\n    \n    PR pre;\n    for(int i=1; i<=T; i++){\n      int m=0,t=0;\n      int nowt=0;\n      for(int j=1; j<=T; j++){\n        if(done[j]) continue;\n        if(point[j]>m){\n          nowt=j;\n          m=point[j];\n          t=tt[j];\n        }else if(point[j]==m){\n          if(tt[j]<=t){\n            nowt=j;\n            m=point[j];\n            t=tt[j];\n          }\n        }\n      }\n      \n      done[nowt]=true;\n      if(i==1) cout<<nowt;\n      else{\n        if(pre.first==m&&pre.second==t){\n          cout<<'='<<nowt;\n        }else{\n          cout<<','<<nowt;\n        }\n      }\n      \n      pre.first=m; pre.second=t;\n    }\n    cout<<en\n  }\n  RE\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstdio>\n#include <cstdlib>\n#include <cmath>\n#include <cstring>\n#include <vector>\n#include <algorithm>\n#include <set>\n#include <queue>\n#include <map>\n#include <climits>\nusing namespace std;\n\n#define REP(i,n) for(int i=0; i<(int)(n); i++)\n#define RREP(i,n) for(int i=(int)n-1; i>=0; i--)\n#define FOR(i,c) for(__typeof((c).begin())i=(c).begin();i!=(c).end();++i)\n#define RFOR(i,c) for(__typeof((c).rbegin())i=(c).rbegin();i!=(c).rend();++i)\n#define ALL(c) (c).begin(), (c).end()\n\ntypedef long long int ll;\ntypedef pair<int, int> pii;\ntypedef pair<int, pair<int, int> > pipii;\ntypedef vector<int> vi;\n\nclass data{\npublic:\n\tint team;\n\tint solve;\n\tint miss_pro[11];\n\tint time;\n\t\n\tdata(){\n\t\tsolve = 0;\n\t\tREP(i, 11) miss_pro[i] = 0;\n\t\ttime = 0;\n\t}\n\n\tvoid c(int t, int pro){\n\t\tsolve++;\n\t\ttime += t + miss_pro[pro] * 20;\n\t}\n\t\n\tvoid w(int p){\n\t\tmiss_pro[p]++;\n\t}\n\t\n\tvoid print(data d){\n\t\tif(solve == d.solve && time == d.time) cout << \"=\";\n\t\telse cout << \",\";\n\t\tcout << team;\n\t}\n\t\n\tbool operator < (const data& rdata)const{\n\t\tif(solve != rdata.solve) return solve > rdata.solve;\n\t\telse if(time != rdata.time) return time < rdata.time;\n\t\telse return team > rdata.team;\n\t}\n};\n\n\nint main(void){\n\tint M, T, P, R;\n\twhile(cin >> M >> T >> P >> R, M){\n\t\tvector<data> teams(T);\n\t\tREP(i,teams.size()) teams[i].team = i+1;\n\t\tREP(i,R){\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tt--;\n\t\t\tif(!j) teams[t].c(m, p);\n\t\t\telse teams[t].w(p);\n\t\t}\n\t\tsort(ALL(teams));\n\t\tcout << teams[0].team;\n\t\tREP(i,teams.size()){\n\t\t\tif(!i) continue;\n\t\t\tteams[i].print(teams[i-1]);\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n#define PA pair<PB,int>\n#define PB pair<int,int>\n#define F first\n#define S second\n\nvoid f(int M,int T,int P,int R){\n  int ans[52]={};\n  int ptime[52]={};\n  int ttime[52][11]={};\n\n  while(R--){\n    int m,t,p,j;\n    cin>>m>>t>>p>>j;\n    if(j==0){\n      ans[t]++;\n      ptime[t]+=m+ttime[t][p];\n    }else{\n      ttime[t][p]+=20;\n    }\n  }\n\n  vector<PA> v;\n  for(int i=1;i<T+1;i++){\n    v.push_back(PA(PB(P-ans[i],ptime[i]),T-i));\n  }\n  sort(v.begin(),v.end());\n\n  for(int i=0;i<T-1;i++){\n    if(v[i].F.F==v[i+1].F.F&&v[i].F.S==v[i+1].F.S){\n      cout<<T-v[i].S<<\"=\";\n    }else{\n      cout<<T-v[i].S<<\",\";\n    }\n  }\n  cout<<T-v[T-1].S<<endl;\n}\n\n\nint main(){\n\n  int M,T,P,R;\n  while(true){\n    cin>>M>>T>>P>>R;\n    if(M==0) break;\n    f(M,T,P,R);\n  }\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <cmath>\n#include <climits>\n#include <cstdio>\n#include <cstdlib>\n#include <cstring>\n#include <fstream>\n#include <iostream>\n#include <list>\n#include <map>\n#include <queue>\n#include <set>\n#include <sstream>\n#include <stack>\n#include <string>\n#include <vector>\n#include <cassert>\n#include <functional>\n\nusing namespace std;\n\n#define LOG(...) printf(__VA_ARGS__)\n//#define LOG(...)\n#define FOR(i,a,b) for(int i=(int)(a);i<(int)(b);++i)\n#define REP(i,n) for(int i=0;i<(int)(n);++i)\n#define ALL(a) (a).begin(),(a).end()\n#define RALL(a) (a).rbegin(),(a).rend()\n#define EXIST(s,e) ((s).find(e)!=(s).end())\n#define SORT(c) sort((c).begin(),(c).end())\n#define RSORT(c) sort((c).rbegin(),(c).rend())\n#define CLR(a) memset((a), 0 ,sizeof(a))\n\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef vector<bool> vb;\ntypedef vector<int> vi;\ntypedef vector<ll> vll;\ntypedef vector<vb> vvb;\ntypedef vector<vi> vvi;\ntypedef vector<vll> vvll;\ntypedef pair<int, int> pii;\ntypedef pair<ll, ll> pll;\n\nconst int dx[] = { -1, 0, 1, 0 }; const int dy[] = { 0, 1, 0, -1 };\n\nstruct UnionFind {\n\tvector<int> v;\n\tUnionFind(int n) : v(n)  { for (int i = 0; i < n; i++) v[i] = i; }\n\tint  find(int x)         { return v[x] == x ? x : v[x] = find(v[x]); }\n\tvoid unite(int x, int y) { v[find(x)] = find(y); }\n};\n\nint main() {\n\tint time, team, pro, rec;\n\twhile (cin >> time >> team >> pro >> rec, time) {\n\t\tvvi pena(team, vi(pro, 0));\n\t\tvector<pair<pii, int>> ac(team, pair<pii, int>({0,0},0));\n\t\tREP(i, team)\n\t\t\tac[i].second = (i + 1);\n\t\tREP(i,rec) {\n\t\t\tint a, b, c, d;\n\t\t\tcin >> a >> b >> c >> d;\n\t\t\tb--;\n\t\t\tc--;\n\t\t\tif (d == 0) {\n\t\t\t\tac[b].first.first = ac[b].first.first + 1;\n\t\t\t\tac[b].first.second= ac[b].first.second - a - pena[b][c];\n\t\t\t}\n\t\t\telse {\n\t\t\t\tpena[b][c] += 20;\n\t\t\t}\n\t\t}\n\t\tRSORT(ac);\n\t\tREP(i, team) {\n\t\t\tif (i != 0)\n\t\t\t\tif (ac[i - 1].first.first == ac[i].first.first&&\n\t\t\t\t\tac[i - 1].first.second == ac[i].first.second)\n\t\t\t\t\tcout << \"=\";\n\t\t\t\telse\n\t\t\t\t\tcout << \",\";\n\t\t\tcout << ac[i].second;\n\t\t}\n\t\tcout << endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <cstdio>\n#include <iostream>\n#include <map>\n#include <cmath>\n#include <queue>\n#include <set>\n#include <sstream>\n#include <stack>\n#include <string>\n#include <vector>\n#include <stdlib.h>\n#include <stdio.h>\n#include <bitset>\n#include <cstring>\nusing namespace std;\n#define FOR(I,A,B) for(int I = (A); I < (B); ++I)\n#define CLR(mat) memset(mat, 0, sizeof(mat))\ntypedef long long ll;\ntypedef pair<ll, int> pll;\n\nint main()\n{\n  int M,T,P,R;\n  int i = 0;\n  while(cin>>M>>T>>P>>R, M||T||P||R) {\n    if(i) cout << '\\n';\n    int A[T+1],times[T+1],pena[T+1],miss[T+1][P+1];\n    CLR(A);CLR(times);CLR(pena);CLR(miss);\n    FOR(i,0,R) {\n      int m,t,p,j; cin >> m >> t >> p >> j;\n      if(j==0) {\n        A[t]++;\n        times[t] = m;\n        pena[t] += miss[t][p] * 20;\n      } else {\n        miss[t][p]++;\n      }\n    }\n    vector<pll> score(T);\n    FOR(i,1,T+1) {\n      ll s = A[i] * 10000000000000 - pena[i] - times[i];\n      score[i-1] = pll(s, i);\n    }\n    sort(score.rbegin(), score.rend());\n    int j = 1;\n    ll now = score[0].first;\n    vector<vector<int> > ans(T+1);\n    FOR(i,0,T) {\n      if(now > score[i].first) {\n        j++;\n        now = score[i].first;\n      }\n      ans[j].push_back(score[i].second);\n    }\n    FOR(i,1,T+1) {\n      if((int)ans[i].size() > 0) {\n        if(i!=1) cout << ',';\n        vector<int> pr;\n        FOR(j,0,(int)ans[i].size()) {\n          pr.push_back(ans[i][j]);\n        }\n        sort(pr.rbegin(), pr.rend());\n        FOR(j,0,(int)pr.size()) {\n          if(j!=0 && j!=pr.size()) cout<<'=';\n          cout << pr[j];\n        }\n      }\n    }\n    i++;\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<string.h>\nusing namespace std;\n\nconst int INF=5000000;\n\nint data[51][12];\n\nint main(){\n\tint M,T,P,R;\n\twhile(cin>>M>>T>>P>>R && M){\n\t\tfill((int*)data,(int*)(data+12),0);\n\t\tfor(int i=0;i<R;i++){\n\t\t\tint m,t,p,j;\n\t\t\tcin>>m>>t>>p>>j;\n\t\t\tif(j==0){\n\t\t\t\tdata[t][0]++;\n\t\t\t\tdata[t][11]+=m+data[t][p]*20;\n\t\t\t}\n\t\t\telse data[t][p]++;\n\t\t}\n\t\tint prev[2]={INF,0};\n\t\tfor(int i=0;i<T;i++){\n\t\t\tint ans=0;\n\t\t\tint now[2]={0,INF};\n\t\t\tfor(int j=T;j>=0;j--){\n\t\t\t\tif(data[j][0]>now[0]){\n\t\t\t\t\tnow[0]=data[j][0];\n\t\t\t\t\tnow[1]=data[j][11];\n\t\t\t\t\tans=j;\n\t\t\t\t}\n\t\t\t\telse if(data[j][0]==now[0] && data[j][11]<now[1]){\n\t\t\t\t\tnow[1]=data[j][11];\n\t\t\t\t\tans=j;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(i){\n\t\t\t\tif(memcmp(now,prev,sizeof(now))==0)cout<<\"=\";\n\t\t\t\telse cout<<\",\";\n\t\t\t}\n\t\t\tcout<<ans;\n\t\t\tmemcpy(prev,now,sizeof(now));\n\t\t\tdata[ans][0]=-1;\n\t\t}\n\t\tcout<<endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define REP(a,b,c) for(int a=b; a<(int)c; a++)\n#define REPE(a,b,c) for(int a=b; a<=(int)c; a++)\n#define REPD(a,b,c) for(int a=b; a>(int)c; a--)\n#define rep(a,b) REP(a,0,b)\n#define repd(a,b) REPD(a,b,0)\nclass _datas{\npublic:\n  int m;\n  int t;\n  int p;\n  int j;\n};\nclass _score{\npublic:\n  int p;\n  int t;\n  _score(int p, int t){\n    this->p = p;\n    this->t = t;\n  }\n};\ntypedef long long int ll;\nusing namespace std;\n\n  \n\nint main(){\n  while(true){\n    int M,T,P,R;\n    cin >> M >> T >> P >> R;\n    if(M == 0) break;\n    vector<_datas> datas(R);\n    rep(i,R) cin >> datas[i].m >> datas[i].t >> datas[i].p >> datas[i].j;\n    //rep(i,R) cout << datas[i].m << \" \"<< datas[i].t << \" \"<< datas[i].p << \" \"<< datas[i].j << \" \" << endl;\n    vector<_score> scores(T+1,_score(0,0));\n    REPE(i,1,T){\n      vector<int> miss_cnt(P,0);\n      rep(j,R){\n        _datas data = datas[j];\n        if(data.t == i){\n          if(data.j == 0){\n            scores[i].p++;\n            scores[i].t += data.m + miss_cnt[data.p]*20;\n          }else{\n            miss_cnt[data.p]++;\n          }\n        }\n      }\n    }\n    /*cout << \"score\" << endl;\n    REPE(i,1,T){\n      cout<<i<<\":\" << scores[i].p << \" \" << scores[i].t << endl;\n    }*/\n    _score b_score = _score(0,0);\n    REPE(i,1,T){\n      int max_idx = 1;\n      REPE(j,2,T){\n        if(scores[j].p > scores[max_idx].p || (scores[j].p==scores[max_idx].p && scores[j].t <= scores[max_idx].t)){\n          max_idx = j;\n        }\n      }\n      if(i != 1){\n        if(b_score.p == scores[max_idx].p && b_score.t==scores[max_idx].t) cout << \"=\";\n        else cout << \",\";\n      }\n      cout << max_idx;\n      b_score = scores[max_idx];\n      scores[max_idx] = _score(-1,0);\n    }\n    cout << endl;\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <stdio.h>\n\ntypedef struct{\n  int team;\n  int ans[10];\n  int time[10];\n  int anum;\n  int tnum;\n}data_t;\n\nvoid InsSort(data_t data[], int n){\n  data_t temp;\n  for(int i=1; i<n; i++){\n    for(int j=i; j>0 && data[j].team>data[j-1].team ;j--){\n      temp = data[j];\n      data[j] = data[j-1];\n      data[j-1] = temp;\n    }\n  }\n\n  for(int i=1; i<n; i++){\n    for(int j=i; j>0 && data[j].tnum<data[j-1].tnum ;j--){\n      temp = data[j];\n      data[j] = data[j-1];\n      data[j-1] = temp;\n    }\n  }\n  \n  for(int i=1; i<n; i++){\n    for(int j=i; j>0 && data[j].anum>data[j-1].anum ;j--){\n      temp = data[j];\n      data[j] = data[j-1];\n      data[j-1] = temp;\n    }\n  }\n}\n\nint main(void){\n  int M, T, P, R;\n  int m, t, p, j;\n  data_t data[50];\n  while(1){\n    scanf(\"%d%d%d%d\", &M, &T, &P, &R);\n    if(M==0 && T==0 && P==0 && R==0){\n      break;\n    }\n\n    for(int i=0; i<T; i++){\n      data[i].team = i+1;\n      data[i].anum = 0;\n      data[i].tnum = 0;\n      for(int j=0; j<10; j++){\n\tdata[i].ans[j] = 1;\n\tdata[i].time[j] = 0;\n      }\n    }\n\n    for(int i=0; i<R; i++){\n      scanf(\"%d%d%d%d\", &m, &t, &p, &j);\n      if(j == 0){\n\tdata[t-1].ans[p-1] = 0;\n\tdata[t-1].time[p-1] += m;\n      }else if(j == 1){\n\tdata[t-1].time[p-1] += 20;\n      }\n    }\n    for(int i=0; i<T; i++){\n      for(int j=0; j<P; j++){\n\tif(data[i].ans[j] == 0){\n\t  data[i].anum++;\n\t  data[i].tnum += data[i].time[j];\n\t}\n      }\n    }\n    InsSort(data, T);\n\n    printf(\"%d\", data[0].team);\n    for(int i=1; i<T; i++){\n      if(data[i].anum==data[i-1].anum && data[i].tnum==data[i-1].tnum){\n\tprintf(\"=\");\n      }else{\n\tprintf(\",\");\n      }\n      printf(\"%d\", data[i].team);\n    }\n    printf(\"\\n\");\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "\n#include <cstdio>\n#include <iostream>\n#include <vector>\n#include <map>\n#include <set>\n#include <string>\n#include <cstring>\n#include <sstream>\n#include <algorithm>\n#include <functional>\n#include <queue>\n#include <stack>\n#include <cmath>\n#include <iomanip>\n#include <list>\n#include <tuple>\nusing namespace std;\ninline int toInt(string s) { int v; istringstream sin(s); sin >> v; return v; }\ntemplate<class T> inline string toString(T x) { ostringstream sout; sout << x; return sout.str(); }\ntemplate<class T> inline T sqr(T x) { return x*x; }\ntypedef pair<int, int> P;\ntypedef long long ll;\ntypedef unsigned long long ull;\n\n#define For(i,a,b)\tfor(int (i) = (a);i < (b);(i)++)\n#define rep(i,n)\tFor(i,0,n)\n#define clr(a)\t\tmemset((a), 0 ,sizeof(a))\n#define mclr(a)\t\tmemset((a), -1 ,sizeof(a))\n#define all(a)\t\t(a).begin(),(a).end()\n#define rall(a)\t\t(a).rbegin(), (a).rend()\n#define sz(a)\t\t(sizeof(a))\n#define Fill(a,v)\tfill((int*)a,(int*)(a+(sz(a)/sz(*(a)))),v)\n\nbool cheak(int x, int y, int xMax, int yMax){ return x >= 0 && y >= 0 && xMax > x && yMax > y; }\nconst int dx[4] = { -1, 0, 1, 0 }, dy[4] = { 0, 1, 0, -1 };\nconst int mod = 1000000007;\nconst int INF = 1e9;\n\nint main()\n{\n\tint m, t, p, r;\n\n\twhile (cin >> m >> t >> p >> r && m){\n\n\t\tconst int M = 51;\n\t\ttuple<int,int,int> d[M]; clr(d);\n\t\trep(i, M)get<2>(d[i]) = i + 1;\n\n\t\tint w[M][M]; clr(w);\n\n\t\trep(_, r){\n\t\t\tint tm, tt, tp, tj;\n\t\t\tcin >> tm >> tt >> tp >> tj;\n\t\t\ttt--;\n\t\t\tif (tj){\n\t\t\t\tw[tt][tp]++;\n\t\t\t}\n\t\t\telse{\n\t\t\t\tget<0>(d[tt])++;\n\t\t\t\tget<1>(d[tt]) -= w[tt][tp] * 20 + tm;\n\t\t\t}\n\t\t}\n\t\tsort(d, d + t,greater<tuple<int,int,int>>());\n\t\trep(i, t){\n\t\t\tcout << get<2>(d[i]);\n\t\t\tFor(j, i + 1, t){\n\n\t\t\t\tif (get<0>(d[i]) == get<0>(d[j]) &&\n\t\t\t\t\tget<1>(d[i]) == get<1>(d[j])){\n\t\t\t\t\tcout << \"=\" << get<2>(d[j]);\n\t\t\t\t\ti++;\n\t\t\t\t}\n\n\t\t\t}\n\t\t\tif (i != t-1)\n\t\t\tcout << \",\";\n\t\t}\n\n\t\tcout << endl;\n\t}\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<map>\n#include<string>\n#include<vector>\n#include<algorithm>\n#include<queue>\n#include<unordered_map>\nusing namespace std;\n\nstruct team {\n\tint seikai = 0, matigai[10]{}, time = 0, ID;\n};\nbool operator <(team a, team b) {\n\tif (a.seikai != b.seikai)return a.seikai > b.seikai;\n\telse if (a.time != b.time)return a.time < b.time;\n\treturn a.ID > b.ID;\n}\nint main() {\n\tint a, b, c, d;\n\twhile (cin >> a >> b >> c >> d, a || b || c || d) {\n\t\tteam f[51]{};\n\t\tf[0].time = f[0].seikai= 1 << 29;\n\t\tfor (int i = 0; i < b; i++) {\n\t\t\tf[i+1].ID = i + 1;\n\t\t}\n\t\tfor (int e = 0; e < d; e++) {\n\t\t\tint g, h, i, j; scanf(\"%d%d%d%d\", &g, &h, &i, &j); i--;\n\t\t\tif (j) {\n\t\t\t\tf[h].matigai[i]++;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tf[h].seikai++;\n\t\t\t\tf[h].time += f[h].matigai[i] * 20 + g;\n\t\t\t}\n\t\t}\n\t\tsort(f+1, f + b+1);\n\t\tfor (int i = 1; i < b; i++) {\n\t\t\tcout << f[i].ID;\n\t\t\tif (f[i].seikai == f[i + 1].seikai&&f[i].time == f[i + 1].time)cout << '=';\n\t\t\telse cout << ',';\n\t\t}\n\t\tcout <<f[b].ID<< endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\nint m;\nvector<int>p;\nvector<int>s;\nint maxn,minn;\n\n\nint main(){\n  int i,j,now=0,ni=0;\n  while(1){\n  cin >> m >> minn >> maxn;\n  now = 0;\n  if(m==0&&maxn==0&&minn==0)break;\n  for(i=0;i<m;i++){\n    cin >> j;\n    p.push_back(j);\n  }\n  sort(p.begin(),p.end());\n  for(i=0;i<m-1;i++)  s.push_back(p[i+1]-p[i]);\n  for(i=m-minn-1;i>=m-maxn-1;i--){\n    // cout << \" bbb\"<<s[i];\n    if(s[i]>=now){\n      now = s[i];\n      ni = i;\n      //cout <<\"aaa\"<< now << \" \"<< ni << endl;\n    }\n  }\n  //cout <<endl<< ni << endl;\n  cout << m-1-ni << endl;\n  while(p.size())p.pop_back();\n  while(s.size())s.pop_back();\n  }\n  return 0;\n}\n\n\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\nvector<vector<int>> v;\nvector<vector<int>> miss;\nvector<vector<int>> score;\nvector<vector<pair<int,int>>> rk;\n\nvoid solve(int m,int t,int p,int r){\n    int in;\n    v=vector<vector<int>>(r,vector<int>(4,0));\n    miss=vector<vector<int>>(t,vector<int>(p,0));\n    score=vector<vector<int>>(t,vector<int>(2,0));\n    rk=vector<vector<pair<int,int>>>(p+1,vector<pair<int,int>>(0));\n    for(int i=0;i<r;i++){\n        for(int j=0;j<4;j++){\n            cin>>in;\n            v[i][j]=in;\n        }\n    }\n    for(int i=0;i<r;i++){\n        if(v[i][3])miss[v[i][1]-1][v[i][2]-1]++;\n        else {\n            score[v[i][1]-1][0]++;\n            score[v[i][1]-1][1]+=v[i][0]+miss[v[i][1]-1][v[i][2]-1]*20;\n        }\n    }\n    for(int i=t-1;i>=0;i--){\n        rk[score[i][0]].push_back(make_pair(i,score[i][1]));\n    }\n    for(int i=p;i>=0;i--){\n        int maxx=-1;\n        for(int j=0;j<rk[i].size();j++){\n            maxx=max(maxx,rk[i][j].second);\n        }\n        bool sw=false;\n        for(int j=0;j<=maxx;j++){\n            bool swc=false;\n            for(int k=0;k<rk[i].size();k++){\n                if(rk[i][k].second==j){\n                    if(swc)cout<<\"=\"<<rk[i][k].first+1;\n                    else {\n                        if(sw)cout<<\",\"<<rk[i][k].first+1;\n                        else{\n                            cout<<rk[i][k].first+1;\n                            sw=true;\n                        }\n                    }\n                    swc=true;\n                }\n            }\n        }\n        if(i&&sw)cout<<\",\";\n    }\n    cout<<endl;\n}\n\n\nint main(void){\n    ios::sync_with_stdio(false);\n    int a,b,c,d;\n    while(cin>>a>>b>>c>>d,a){\n        solve(a,b,c,d);\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#define INF 10e6\nusing namespace std;\n\nint M,T,P,R;\nint m,t,p,j;\nbool flag[50];\n\nbool check(){\n\tfor(int i=0;i<T;i++)\n\t\tif(flag[i])\n\t\t\treturn true;\n\treturn false;\n}\n\nint main(void){\n\tint team[50][2];\n\tbool problem[50][10];\n\tint  time[50][10];\n\twhile(cin >> M >> T >> P >> R,M){\n\t\tfor(int i=0;i<T;i++)\n\t\t\tteam[i][0]=team[i][1]=0,flag[i]=true;\n\t\tfor(int i=0;i<T;i++)\n\t\t\tfor(int j=0;j<P;j++)\n\t\t\t\tproblem[i][j]=false,time[i][j]=0;\n\n\t\tfor(int i=0;i<R;i++){\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tif(j)\n\t\t\t\ttime[t-1][p-1]+=20;\n\t\t\telse\n\t\t\t\tproblem[t-1][p-1]=true,time[t-1][p-1]+=m;\n\t\t}\n\t\t\t\n\t\tfor(int i=0;i<T;i++){\n\t\t\tfor(int j=0;j<P;j++){\n\t\t\t\tif(problem[i][j]){\n\t\t\t\t\tteam[i][0]++;\n\t\t\t\t\tteam[i][1]+=time[i][j];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tint d=0;\n\t\twhile(check()){\n\t\t\tcout <<( d ? \",\" :\"\") ;\n\t\t\td++;\n\t\t\tint cor=0,less=INF,c=0;\n\t\t\tfor(int i=T-1;i>=0;i--){\n\t\t\t\tif(flag[i]&&(team[i][0]>cor))\n\t\t\t\t\tcor=team[i][0],less=team[i][1];\n\t\t\t\telse if(flag[i]&&team[i][0]==cor&&team[i][1]<less)\n\t\t\t\t\tless=team[i][1];\n\t\t\t}\n\t\t\tfor(int i=T-1;i>=0;i--)\n\t\t\t\tif(flag[i]&&team[i][0]==cor&&team[i][1]==less)\n\t\t\t\t\tflag[i]=false, cout<< (c? \"=\":\"\") << i+1,c++;\n\t\t\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n\nusing namespace std;\n\nstruct Team {\n\tint tid, ac, penalty;\n\tTeam() { tid = -1, ac = 0, penalty = 0; }\n};\nbool operator >(const Team& t1, const Team& t2) {\n\tif (t1.ac == t2.ac) {\n\t\tif (t1.penalty == t2.penalty) return t1.tid > t2.tid;\n\t\telse return t1.penalty < t2.penalty;\n\t}\n\telse return t1.ac > t2.ac;\n}\nbool operator ==(const Team& t1, const Team& t2) {\n\treturn t1.ac == t2.ac && t1.penalty == t2.penalty;\n}\n\nint main() {\n\tint M, T, P, R;\n\twhile ( cin >> M >> T >> P >> R, M || T || P || R ) {\n\t\tint wa[10][50] = {0};\n\t\tint ac[10][50] = {0};\n\t\tvector<Team> tdt(T);\n\t\tfor (int i = 0; i < T; ++i) {\n\t\t\ttdt[i].tid = i+1;\n\t\t\ttdt[i].ac = 0;\n\t\t\ttdt[i].penalty = 0;\n\t\t}\n\t\tfor (int i = 0; i < R; ++i) {\n\t\t\tint m, t, p, j; cin >> m >> t >> p >> j;\n\t\t\t--t, --p;\n\t\t\tif (j == 0) {\n\t\t\t\tif (ac[p][t] == 0) {\n\t\t\t\t\t++ac[p][t];\n\t\t\t\t\t++tdt[t].ac;\n\t\t\t\t\ttdt[t].penalty += m + 20 * wa[p][t];\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\t++wa[p][t];\n\t\t\t}\n\t\t}\n\t\tsort( tdt.begin(), tdt.end(), greater<Team>() );\n\t\tfor (int i = 0; i < tdt.size(); ++i) {\n\t\t\tif (i) {\n\t\t\t\tif (tdt[i] == tdt[i-1]) cout << \"=\";\n\t\t\t\telse cout << \",\";\n\t\t\t}\n\t\t\tcout << tdt[i].tid;\n\t\t}\n\t\tcout << endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\nint main(){\n    int m,t,p,r;\n    while(cin>>m>>t>>p>>r,m){\n        vector<vector<int>> team(t,vector<int>(p,-100));\n        for(int i=0;i<r;i++){\n            int mm,tt,pp,jj;\n            cin>>mm>>tt>>pp>>jj;\n            if(!jj)\n                team[tt-1][pp-1]=mm+(-(team[tt-1][pp-1]+100))*20;\n            else\n                team[tt-1][pp-1]--;\n\n        }\n        vector<tuple<int,int,int>> rank(t,make_tuple(0,0,0));\n        for(int i=0;i<t;i++)\n            get<2>(rank[i])=i+1;\n        for(int i=0;i<t;i++){\n            for(int j=0;j<p;j++)\n                if(team[i][j]>=0){\n                    get<0>(rank[i])++;\n                    get<1>(rank[i])-=team[i][j];\n                }\n\n\n        }\n        sort(rank.begin(),rank.end(),greater<tuple<int,int,int>>());\n        queue<int> q;\n        pair<int,int> pre=make_pair(-1,-1);\n        string res=\"\";\n        for(int i=0;i<t;i++){\n            if(pre==make_pair(get<0>(rank[i]),get<1>(rank[i]))){\n                q.push(get<2>(rank[i]));\n                continue;\n            }\n            else{\n                if(!res.empty())\n                    res+=\",\";\n                int s=q.size();\n                for(int j=0;j<s;j++){\n                    int a=q.front();\n                    if(j!=s-1){\n                        res+=to_string(a)+\"=\";\n                        }\n                    else\n                        res+=to_string(a);\n\n                    q.pop();\n\n                }\n                q.push(get<2>(rank[i]));\n                pre=make_pair(get<0>(rank[i]),get<1>(rank[i]));\n            }\n\n        }\n        if(!res.empty() && !q.empty())\n            res+=',';\n        for(int i=0;!q.empty();i++){\n            if(q.size()!=1){\n                res+=to_string(q.front())+\"=\";\n\n            }\n            else\n                res+=to_string(q.front());\n            q.pop();\n        }\n        cout<<res<<endl;\n    }\n\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n#include <string>\n#include <vector>\n#include <cstdio>\n#include <cmath>\n#include <cstdlib>\n#include <stack>\n#include <queue>\n#include <set>\n#include <map>\n#include <utility>\n\n#define INF 999999999\n#define mod 1000000007\n\n#define rep(i,n) for(int i=0;i<int(n);i++)\n#define rrep(i,n) for(int i=(n);i>=0;i--)\n#define REP(i,a,b) for(int i=(a);i<int(b);i++)\n#define all(x) (x).begin(),x.end()\n#define pb push_back\n#define MOD(x) (x%(mod))\nusing namespace std;\n\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef vector<int> vi;\ntypedef pair<int,int> pi;\n\n/*---------------------------------------------------*/\n\nbool debug=false;\n\npair<pi,int> data[55];\nint miss[55][15];\nint M,T,P,R;\n\nvoid init(){\n  rep(i,55){\n    data[i].first.first=0;\n    data[i].first.second=0;\n    data[i].second=i+1;\n    rep(j,15){\n      miss[i][j]=0;\n    }\n  }\n}\n\nvoid solve(){\n  int m,t,p,j;\n  rep(i,R){\n    cin>>m>>t>>p>>j;\n    if(j==0&&miss[t][p]!=-1){\n      data[t-1].first.first++;\n      data[t-1].first.second-=(t+miss[t][p]*20);\n      miss[t-1][p]=-1;\n    }else if(miss[t-1][p]!=-1){\n      miss[t-1][p]++;\n    }\n  }\n\n  if(debug){cout<<\"solve \";rep(i,T)cout<<data[i].first.first<<\" \";cout<<endl;}\n  if(debug){cout<<\"time \";rep(i,T)cout<<data[i].first.second<<\" \";cout<<endl;}\n\n  sort(data,data+T);reverse(data,data+T);\n  cout<<data[0].second;\n  REP(i,1,T){\n    if(data[i].first.first==data[i-1].first.first&&data[i].first.second==data[i-1].first.second){\n      cout<<'='<<data[i].second;\n    }else{\n      cout<<','<<data[i].second;\n    }\n  }\n  cout<<endl;\n}\n\nint main(){\n\n  while(cin>>M>>T>>P>>R){\n    if(M==0&&T==0&&P==0&&R==0)break;\n    init();\n    solve();\n  }\n  \n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstdio>\n#include <vector>\n#include <queue>\n#include <stack>\n#include <map>\n#include <string>\n#include <algorithm>\n\nusing namespace std;\n\nstruct Team {\n    Team(int team_number) {\n        tn_ = team_number;\n        n_ = 0;\n        t_ = 0;\n        pc_ = 0;\n    }\n    int tn_;\n    int n_;\n    int t_;\n    int pc_;\n    vector<int> p_list_;\n};\n\nint main (int argc, char *argv[]) {\n    int M, T, P, R;\n    int m, t, p, j;\n    vector<Team> tv;\n\n    while (cin>>M>>T>>P>>R) {\n        for (int i = 0; i < T; ++i) {\n            tv.push_back(Team(i+1));\n        }\n        for (int i = 0; i < R; ++i) {\n            cin>>m>>t>>p>>j;\n            if (j != 0) {\n                tv[t-1].p_list_.push_back(p);\n            }\n            else {\n                for (auto e : tv[t-1].p_list_) {\n                    if (e == p) {\n                        tv[t-1].pc_++;\n                    }\n                }\n                tv[t-1].n_++;\n                tv[t-1].t_ += m;\n            }\n        }\n        for (auto& e : tv) {\n            e.t_ += e.pc_ * 20;\n        }\n\n        // for (auto e : tv) {\n        //     cout<<\"-----------\"<<endl;\n        //     cout<<e.tn_<<endl;\n        //     cout<<e.n_<<endl;\n        //     cout<<e.t_<<endl;\n        //     cout<<e.pc_<<endl;\n        //     for (auto c : e.p_list_) {\n        //         cout<<c<<\" \";\n        //     }\n        //     cout<<endl;\n        //     cout<<\"-----------\"<<endl;\n        // }\n\n        sort(tv.begin(), tv.end(), [](const auto& lhs, const auto& rhs) -> bool{\n            if (lhs.n_ != rhs.n_ ) {\n                return lhs.n_ > rhs.n_;\n            }\n            else if (lhs.n_ == rhs.n_ && lhs.t_ != rhs.t_) {\n                return lhs.t_ < rhs.t_;\n            }\n            else return lhs.tn_ > rhs.tn_;\n        });\n\n        const int size = static_cast<int>(tv.size());\n        for (int i = 0; i < size; ++i) {\n            cout<<tv[i].tn_;\n            if(i != size -1) {\n                if (tv[i].n_ != tv[i+1].n_ || tv[i].t_ != tv[i+1].t_ ) {\n                    cout<<\",\";\n                }\n                else cout<<\"=\";\n            }\n        }\n        if cout<<endl;\n        tv.clear();\n    }\n\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<vector>\n#include<map>\n#include<cstdlib>\n#include<cmath>\n#include<cstring>\n#include<string>\n#include<algorithm>\n#define INF 1e9\n#define M_Team 50\n#define M_Pro 10\n\ntypedef long long int ll;\nusing namespace std;\n\nint wacount[M_Team+1][M_Pro+1]={};\nint timesum[M_Team+1]={},anssum[M_Team+1];\n\nbool checkOver(int a,int b){\n\tif(anssum[a] <  anssum[b])return true;\n\tif( (anssum[a] == anssum[b]) && (timesum[a]>timesum[b]) )return true;\n\treturn false;\n}\n\nvoid babu_sort(int anssum[M_Team+1],int timesum[M_Team+1],int grad[M_Team+1],int T){\n\tfor(int i=0;i<T;i++){\n\t\tfor(int j=0;j<T-1-i;j++){\n\t\t\tif( checkOver(grad[j],grad[j+1]) ){\n\t\t\t\tswap(grad[j],grad[j+1]);\n\t\t\t}\n\t\t}\n\t}\n}\n\n\n\nvoid out(int timesum[M_Team+1],int grad[M_Team+1],int T){\n\tvector<char> ans;\n\n\tans.push_back(grad[0] + '0');\n\tfor(int i=1;i<T;i++){\n\t\tif(anssum[ grad[i] ]==anssum[ grad[i-1] ]  &&  timesum[ grad[i] ] == timesum[ grad[i-1] ] ){\n\t\t\tans.push_back('=');\n\n\t\t\tif(grad[i] <10){\n\t\t\t\tans.push_back(grad[i]+'0');\n\t\t\t}\n\t\t\telse{\n\t\t\t\tans.push_back(grad[i]/10+'0');\n\t\t\t\tans.push_back(grad[i]%10+'0');\n\t\t\t}\n\t\t}\n\t\telse{\n\t\t\tans.push_back(',');\n\n\t\t\tif(grad[i] <10){\n\t\t\t\tans.push_back(grad[i]+'0');\n\t\t\t}\n\t\t\telse{\n\t\t\t\tans.push_back(grad[i]/10+'0');\n\t\t\t\tans.push_back(grad[i]%10+'0');\n\t\t\t}\n\t\t}\n\t}\n\tfor(int i=0;i<ans.size();i++){\n\t\tcout<<ans[i];\n\t}\n\tcout<<endl;\n}\n\nvoid solve(int anssum[M_Team+1],int timesum[M_Team+1],int M,int T,int P,int R){\n\tint grad[M_Team+1];\n\tfor(int i=T;i>=1;i--){\n\t\tgrad[T-i]=i;\n\t}\n\tbabu_sort(anssum,timesum,grad,T);\n\tout(timesum,grad,T);\n}\n\n/*\nint wacount[51][11]={};\nint timesum[11]={},anssum[11];\n\n*/\n\nint main(){\n\twhile(1){\n\n\t\tfor(int i=0;i<M_Team+1;i++){\n\t\t\tfor(int j=0;j<M_Pro+1;j++){\n\t\t\t\twacount[j][i]=0;\n\t\t\t}\n\t\t\ttimesum[i]=0;\n\t\t\tanssum[i]=0;\n\t\t}\n\n\t\tint M,T,P,R;\n\t\tint m,t,p,J;\n\t\tcin>>M>>T>>P>>R;\n\t\tif(M==0 && T==0 && P==0 && R==0)break;\n\t\tfor(int i=0;i<R;i++){\n\t\t\tcin>>m>>t>>p>>J;\n\t\t\tif(J!=0){\n\t\t\t\twacount[t][p]++;\n\t\t\t}\n\t\t\telse{\n\t\t\t\ttimesum[t]+=m+wacount[t][p]*20;\n\t\t\t\tanssum[t]++;\n\t\t\t}\n\t\t}\n\tsolve(anssum,timesum,M,T,P,R);\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n#include <cassert>\n#include <tuple>\nnamespace boost {template <class T>struct integer_iterator {T a;bool operator != (integer_iterator const & it) const { return a != it.a; }T operator * () const { return a; }integer_iterator & operator ++ () { ++ a; return *this; }integer_iterator operator ++ (int) { return { a ++ }; }};template <class T>struct integer_range {T l, r;typedef integer_iterator<T> iterator;iterator begin() const { return { l }; }iterator end  () const { return { r }; }};template <class T>integer_range<T> irange(T l, T r) { assert (l <= r); return { l, r }; }template <class T>struct integer_iterator_with_step {T a, d, i;bool operator != (integer_iterator_with_step const & it) const { return a != it.a or d != it.d or i != it.i; }T operator * () const { return a+d*i; }integer_iterator_with_step & operator ++ () { ++ i; return *this; }integer_iterator_with_step operator ++ (int) { return { a, d, i ++ }; }};template <class T>struct strided_integer_range {T l, r, s;typedef integer_iterator_with_step<T> iterator;iterator begin() const { return { l, s, 0 }; }iterator end  () const { return { l, s, (r - l) / s }; }};template <class T>strided_integer_range<T> irange(T l, T r, T s) { assert (s > 0 ? l <= r : s < 0 ? l >= r : false); return { l, r, s }; }}\ntypedef long long ll;\nusing namespace std;\nusing namespace boost;\n#define endl \"\\n\"\nstruct team_t { int id; int ac; int time; vector<int> wa; };\nbool operator < (team_t const & a, team_t const & b) {\n    return make_tuple(a.ac, - a.time, a.id) < make_tuple(b.ac, - b.time, b.id);\n}\nint main() {\n    cin.tie(nullptr);\n    cout.tie(nullptr);\n    ios::sync_with_stdio(false);\n    while (true) {\n        int M, T, P, R; cin >> M >> T >> P >> R;\n        if (M == 0 and T == 0 and P == 0 and R == 0) break;\n        vector<team_t> team(T);\n        for (int i : irange(0,T)) {\n            team[i].id = i+1;\n            team[i].ac = 0;\n            team[i].time = 0;\n            team[i].wa.resize(P);\n        }\n        for (int submission : irange(0,R)) {\n            int m, t, p, j; cin >> m >> t >> p >> j; -- t; -- p;\n            if (j == 0) {\n                team[t].ac += 1;\n                team[t].time += m;\n                team[t].time += team[t].wa[p] * 20;\n            } else {\n                team[t].wa[p] += 1;\n            }\n        }\n        sort(team.rbegin(), team.rend());\n        cout << team.front().id;\n        for (int i : irange(1,T)) {\n            if (team[i-1].ac == team[i].ac and team[i-1].time == team[i].time) {\n                cout << '=';\n            } else {\n                cout << ',';\n            }\n            cout << team[i].id;\n        }\n        cout << endl;\n    }\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n#include <tuple>\n\nusing namespace std;\ntypedef tuple<int, int, int> tiii;\n\nint main(){\n\tios_base::sync_with_stdio(false);\n\twhile(true){\n\t\tint m, t, p, r;\n\t\tcin >> m >> t >> p >> r;\n\t\tif(m == 0 && t == 0 && p == 0 && r == 0){ break; }\n\t\tvector<vector<int>> wrong_count(t, vector<int>(p));\n\t\tvector<tiii> order(t);\n\t\tfor(int i = 0; i < t; ++i){ order[i] = tiii(0, 0, -(i + 1)); }\n\t\tfor(int i = 0; i < r; ++i){\n\t\t\tint mi, ti, pi, ji;\n\t\t\tcin >> mi >> ti >> pi >> ji;\n\t\t\t--ti; --pi;\n\t\t\tif(wrong_count[ti][pi] < 0){ continue; }\n\t\t\tif(ji == 0){\n\t\t\t\t--get<0>(order[ti]);\n\t\t\t\tget<1>(order[ti]) += mi + wrong_count[ti][pi] * 20;\n\t\t\t\twrong_count[ti][pi] = -1;\n\t\t\t}else{\n\t\t\t\t++wrong_count[ti][pi];\n\t\t\t}\n\t\t}\n\t\tsort(order.begin(), order.end());\n\t\tfor(int i = 0; i < t; ++i){\n\t\t\tif(i > 0){\n\t\t\t\tconst int j = i - 1;\n\t\t\t\tif(get<0>(order[j]) == get<0>(order[i]) && get<1>(order[j]) == get<1>(order[i])){\n\t\t\t\t\tcout << \"=\";\n\t\t\t\t}else{\n\t\t\t\t\tcout << \",\";\n\t\t\t\t}\n\t\t\t}\n\t\t\tcout << -get<2>(order[i]);\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\nusing namespace std;\n\nstruct team {\n\tint id, time, count;\n};\n\nbool comp(team a, team b) {\n\tif (b.count > a.count)return true;\n\tif (b.count == a.count && b.time < a.time)return true;\n\tif (b.count == a.count && b.time == a.time && b.id > a.id)return true;\n\treturn false;\n}\n\nint main() {\n\tint penalty[51][11];\n\tint M, T, P, R;\n\tint m, t, p, j;\n\tteam dat[51];\n\tint point;\n\tteam sub;\n\n\twhile (true) {\n\t\tscanf(\"%d%d%d%d\", &M, &T, &P, &R);\n\t\tif (M == 0 && T == 0 && P == 0 && R == 0)break;\n\n\t\t//penalty data\n\t\tfor (int i = 1;i <= T;i++) {\n\t\t\tfor (int j = 1;j <= 10;j++) {\n\t\t\t\tpenalty[i][j] = 0;\n\t\t\t}\n\t\t}\n\t\tfor (int i = 1;i <= T;i++) {\n\t\t\tdat[i].id = i;\n\t\t\tdat[i].time = 0;\n\t\t\tdat[i].count = 0;\n\t\t}\n\t\tfor (int i = 0;i < R;i++) {\n\t\t\tscanf(\"%d%d%d%d\", &m, &t, &p, &j);\n\t\t\tif (j == 0) {\n\t\t\t\tdat[t].time += m + penalty[t][p] * 20;\n\t\t\t\tdat[t].count++;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tpenalty[t][p]++;\n\t\t\t}\n\t\t}\n\t\t//bubble sort\n\t\tfor (int i = 1;i <= T;i++) {\n\t\t\tfor (int j = T;j > i;j--) {\n\t\t\t\tif (comp(dat[j - 1], dat[j])) {\n\t\t\t\t\tsub = dat[j - 1];\n\t\t\t\t\tdat[j - 1] = dat[j];\n\t\t\t\t\tdat[j] = sub;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tpoint = 1;\n\t\twhile (point <= T) {\n\t\t\tprintf(\"%d\", dat[point].id);\n\t\t\twhile (point + 1 <= T&&dat[point].count == dat[point + 1].count\n\t\t\t\t&&dat[point].time == dat[point + 1].time) {\n\t\t\t\tprintf(\"=%d\", dat[point + 1].id);\n\t\t\t\tpoint++;\n\t\t\t}\n\t\t\tpoint++;\n\t\t\tif (point <= T) {\n\t\t\t\tprintf(\",\");\n\t\t\t}\n\t\t\telse {\n\t\t\t\tprintf(\"\\n\");\n\t\t\t}\n\t\t}\n\t}\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "//(各チーム,各問題)ごとに(正解問題,時間)2つのようそを持っておくと簡単。\n#include<iostream>\nusing namespace std;\n#define rep(i,N) for(i=0;i<N;i++)\n\nint M,T,P,R;\nint m,t,p,j;\n\nstruct TEAM{\n\tint sac;\n\tint stime;\n\tint id;\n\tint ac[10];\n\tint time[10];\n}team[50],syukei_team[50];\n\nint compare( const void *s1,const void *s2 ){\n\tint t1 = ((TEAM*)s2)->sac - ((TEAM*)s1)->sac;\n\tint t2 = ((TEAM*)s1)->stime - ((TEAM*)s2)->stime;\n\tint t3 = ((TEAM*)s2)->id - ((TEAM*)s1)->id;\n\tif( t1 )\n\t\treturn t1;\n\tif( t2 )\n\t\treturn t2;\n\treturn t3;\n}\n\nint main(){\n\tint y,x;\n\twhile( cin >> M >> T >> P >> R ){\n\t\tif(!M)break;\n\t\trep(y,T){\n\t\t\trep(x,P){\n\t\t\t\tteam[y].ac[x] = 0;\n\t\t\t\tteam[y].time[x] = 0;\n\t\t\t}\n\t\t\tsyukei_team[y].sac = 0;\n\t\t\tsyukei_team[y].stime = 0;\n\t\t\tsyukei_team[y].id = y+1;\n\t\t}\n\t\trep(y,R){\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tt--;\n\t\t\tp--;\n\t\t\tif( j == 0 ){\n\t\t\t\tteam[t].ac[p] = 1;\n\t\t\t\tteam[t].time[p] += m;\n\t\t\t}\n\t\t\telse{\n\t\t\t\tteam[t].time[p] += 20;\n\t\t\t}\n\t\t}\n\t\trep(y,T){\n\t\t\trep(x,P){\n\t\t\t\tif( team[y].ac[x] == 1 ){\n\t\t\t\t\tsyukei_team[y].stime += team[y].time[x];\n\t\t\t\t\tsyukei_team[y].sac++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tqsort( syukei_team, T, sizeof(syukei_team[0]), compare );\n\t\t\n\t\trep(y,T){\n\t\t\tcout << syukei_team[y].id;\n\t\t\tif( y < T-1 ){\n\t\t\t\tif( syukei_team[y].sac == syukei_team[y+1].sac && syukei_team[y].stime == syukei_team[y+1].stime ){\n\t\t\t\t\tcout << \"=\";\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tcout << \",\";\n\t\t\t\t}\n\t\t\t}\n\t\t\telse{\n\t\t\t\tcout << endl;\n\t\t\t}\n\t\t\t//printf(\" team=%d ac=%d time=%d\\n\",syukei_team[y].id,syukei_team[y].sac,syukei_team[y].stime);\n\t\t}\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nint main(){\n\tint M,T,P,R;\n\twhile(cin>>M>>T>>P>>R,M){\n\t\tpair<int, int> team[60];\n\t\tint wa[60][20] = {};\n\t\tfor(int i = 0;i < T;i++){\n\t\t\tteam[i].first = team[i].second = 0;\n\t\t}\n\t\tfor(int r = 0;r < R;r++){\n\t\t\tint m,t,p,j;\n\t\t\tcin>>m>>t>>p>>j;\n\t\t\tt--;\n\t\t\tif(j == 0){\n\t\t\t\tteam[t].first++;\n\t\t\t\tteam[t].second -= m + wa[t][p] * 20;\n\t\t\t}\n\t\t\telse{\n\t\t\t\twa[t][p]++;\n\t\t\t}\n\t\t}\n\t\tint idx[60];\n\t\tfor(int i = 0;i < 60;i++)idx[i] = i;\n\n\t\tfor(int i = 0;i < T;i++){\n\t\t\tfor(int j = i+1;j < T;j++){\n\t\t\t\tif(team[i] == team[j] ? idx[i] < idx[j] : team[i] < team[j]){\n\t\t\t\t\tswap(team[i],team[j]);\n\t\t\t\t\tswap(idx[i],idx[j]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcout<<idx[0]+1;\n\t\tfor(int i = 1;i < T;i++){\n\t\t\tif(team[i] == team[i-1]){\n\t\t\t\tcout<<\"=\";\n\t\t\t}\n\t\t\telse cout<<\",\";\n\t\t\tcout<<idx[i]+1;\n\t\t}\n\t\tcout<<endl;\n\t}\n\n}"
  },
  {
    "language": "C++",
    "code": "\n#include <bits/stdc++.h>\n\n#define rep(i, from, to) for (int i = from; i < to; ++i)\n#define REP(i, from, to) for (int i = from; i <= to; ++i)\n#define dbp(x) cout<<#x<<\": \"<<x<<endl;\n#define dbp2(x,y) cout<<#x<<\",\"<<#y<<\": \"<<x<<\",\"<<y<<endl;\n#define dbp3(x,y,z) cout<<#x<<\",\"<<#y<<\",\"<<#z<<\": \"<<x<<\",\"<<y<<\",\"<<z<<endl;\n#define dbp4(w,x,y,z) cout<<#w<<\",\"<<#x<<\",\"<<#y<<\",\"<<#z<<\": \"<<w<<\",\"<<x<<\",\"<<y<<\",\"<<z<<endl;\n\nusing namespace std;\nstruct team {\n\tint total, p, id;\n\tint miss[11], isOk[11], time[11];\n\tteam() {\n\t\tfill(miss, miss + 11, 0);\n\t\tfill(isOk, isOk + 11, 0);\n\t\tfill(time, time + 11, 0);\n\t\ttotal = 0;\n\t\tp = 0;\n\t\tid = 0;\n\t}\n};\n\nbool cmp(const team &t1, const team &t2) {\n\tif (t1.p > t2.p)\n\t\treturn true;\n\tif (t1.p < t2.p)\n\t\treturn false;\n\tif (t1.total > t2.total)\n\t\treturn true;\n\tif (t1.total < t2.total)\n\t\treturn false;\n\tif (t1.id > t2.id)\n\t\treturn true;\n\treturn false;\n}\n\nbool cmp2(const team &t1, const team &t2) {\n\tif (t1.p == t2.p) {\n\t\tif (t1.total == t2.total) {\n\t\t\treturn t1.id < t2.id;\n\t\t} else {\n\t\t\treturn t1.total > t2.total;\n\t\t}\n\t} else {\n\t\treturn t1.p < t2.p;\n\t}\n}\n\nbool eq(team t1, team t2) {\n\treturn t1.p == t2.p && t1.total == t2.total;\n}\nteam data[51];\n\nvoid solve() {\n\tint M, T, P, R, m, t, p, j;\n\n\twhile (cin >> M >> T >> P >> R, M || T || P || R) {\n\t\tfill(data, data + 51, team());\n\t\trep(i, 0, R)\n\t\t{\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tif (j == 0) {\n\t\t\t\tdata[t].isOk[p] = 1;\n\t\t\t\tdata[t].time[p] = m;\n\t\t\t\tdata[t].p++;\n\t\t\t} else {\n\t\t\t\tdata[t].miss[p]++;\n\t\t\t}\n\t\t}\n\n\t\tREP(i, 1, T)\n\t\t{\n\t\t\tdata[i].id = i;\n\t\t\tREP(j, 1, P)\n\t\t\t{\n\t\t\t\tdata[i].total += data[i].isOk[j] * data[i].time[j]\n\t\t\t\t\t\t+ data[i].isOk[j] * data[i].miss[j] * 20;\n\n\t\t\t}\n\t\t\tteam di = data[i];\n//\t\t\tdbp3(di.id, di.p, di.total);\n\t\t}\n\t\tsort(data + 1, data + T + 1, cmp2);\n\t\treverse(data + 1, data + T + 1);\n\t\tteam before = data[1];\n\t\tcout << data[1].id;\n\t\tREP(i, 2, T)\n\t\t{\n\t\t\tteam now = data[i];\n\t\t\tif (eq(before, now))\n\t\t\t\tcout << \"=\" << now.id;\n\t\t\telse\n\t\t\t\tcout << \",\" << now.id;\n\t\t\tbefore = now;\n\t\t}\n\t\tcout << endl;\n\t}\n}\n\nint main() {\n\tsolve();\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\nint main(){\n\tint M,T,P,R;\n\twhile(cin >> M >> T >> P >> R,M||T||P||R){\n\t\n\t\t//??£?????°,????????????????¨?,???????????????\n\t\tvector<pair<pair<int,int>,int>> v(T,make_pair(make_pair(0,0),0));\n\t\tfor(int i=0;i<T;i++){\n\t\t\tv[i].second = i+1;\n\t\t}\n\t\tvector<vector<int>> unsolved(T,vector<int>(P,0));\n\t\tfor(int i=0;i<R;i++){\n\t\t\tint m,t,p,j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tif(j){\n\t\t\t\tunsolved[t-1][p-1]++;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tv[t-1].first.first++;\n\t\t\tv[t-1].first.second-=m;\n\t\t\tv[t-1].first.second-=unsolved[t-1][p-1]*20;\n\t\t}\n\t\tsort(v.begin(),v.end(),greater<pair<pair<int,int>,int>>());\n\t\tcout << v[0].second;\n\t\tfor(int unsigned i = 0;i<v.size()-1;i++){\n\t\t\tif(v[i].first.first == v[i+1].first.first && v[i].first.second == v[i+1].first.second){\n\t\t\t\tcout << \"=\";\n\t\t\t} else {\n\t\t\t\tcout << \",\";\n\t\t\t}\n\t\t\tcout << v[i+1].second;\n\t\t}\n\t\tcout << endl;\n\t}\t\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "\n#include <cstdio>\n#include <iostream>\n#include <vector>\n#include <map>\n#include <set>\n#include <string>\n#include <cstring>\n#include <sstream>\n#include <algorithm>\n#include <functional>\n#include <queue>\n#include <stack>\n#include <cmath>\n#include <iomanip>\n#include <list>\n#include <tuple>\nusing namespace std;\ninline int toInt(string s) { int v; istringstream sin(s); sin >> v; return v; }\ntemplate<class T> inline string toString(T x) { ostringstream sout; sout << x; return sout.str(); }\ntemplate<class T> inline T sqr(T x) { return x*x; }\ntypedef pair<int, int> P;\ntypedef long long ll;\ntypedef unsigned long long ull;\n\n#define For(i,a,b)\tfor(int (i) = (a);i < (b);(i)++)\n#define rep(i,n)\tFor(i,0,n)\n#define clr(a)\t\tmemset((a), 0 ,sizeof(a))\n#define mclr(a)\t\tmemset((a), -1 ,sizeof(a))\n#define all(a)\t\t(a).begin(),(a).end()\n#define rall(a)\t\t(a).rbegin(), (a).rend()\n#define sz(a)\t\t(sizeof(a))\n#define Fill(a,v)\tfill((int*)a,(int*)(a+(sz(a)/sz(*(a)))),v)\n\nbool cheak(int x, int y, int xMax, int yMax){ return x >= 0 && y >= 0 && xMax > x && yMax > y; }\nconst int dx[4] = { -1, 0, 1, 0 }, dy[4] = { 0, 1, 0, -1 };\nconst int mod = 1000000007;\nconst int INF = 1e9;\n\nint main()\n{\n\tint m, t, p, r;\n\n\twhile (cin >> m >> t >> p >> r && m){\n\n\t\tconst int M = 51;\n\t\ttuple<int,int,int> d[M]; clr(d);\n\t\trep(i, M)get<2>(d[i]) = i + 1;\n\n\t\tint w[M][M]; clr(w);\n\n\t\trep(_, r){\n\t\t\tint tm, tt, tp, tj;\n\t\t\tcin >> tm >> tt >> tp >> tj;\n\t\t\ttt--;\n\t\t\tif (tj){\n\t\t\t\tw[tt][tp]++;\n\t\t\t}\n\t\t\telse{\n\t\t\t\tget<0>(d[tt])++;\n\t\t\t\tget<1>(d[tt]) -= w[tt][tp] * 20 + tm;\n\t\t\t}\n\t\t}\n\t\tsort(d, d + t,greater<tuple<int,int,int>>());\n\t\trep(i, t){\n\t\t\tcout << get<2>(d[i]);\n\t\t\tFor(j, i + 1, t){\n\n\t\t\t\tif (get<0>(d[i]) == get<0>(d[j]) &&\n\t\t\t\t\tget<1>(d[i]) == get<1>(d[j])){\n\t\t\t\t\tcout << \"=\" << get<2>(d[j]);\n\t\t\t\t\ti++;\n\t\t\t\t}\n\n\t\t\t}\n\t\t\tif (i != t-1)\n\t\t\tcout << \",\";\n\t\t}\n\n\t\tcout << endl;\n\t}\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\nusing namespace std;\n\nint main(){\n    int M, T, P, R;\n    while(1){\n        cin >> M >> T >> P >> R;\n        if(M == 0){\n            break;\n        }\n\n        int ap[55] = {};\n        int at[55] = {};\n        int pen[55][11] = {};\n        for(int i=0;i<55;i++){\n            ap[i] = 0;\n            at[i] = 0;\n            for(int j=0;j<11;j++){\n                pen[i][j] = 0;\n            }\n        }\n\n        for(int i=0;i<R;i++){\n            int m, t, p, j;\n            cin >> m >> t >> p >> j;\n            if(j==0){\n                ap[t]++;\n                at[t]+=m+20*pen[t][p];\n            }else{\n                pen[t][p]++;\n            }\n        }\n\n        bool c_flag = false;\n        for(int i=10;i>=0;i--){\n            for(int j=0;j<50000;j++){\n                bool e_flag = false;\n                for(int k=T;k>=1;k--){\n                    if(ap[k]==i && at[k]==j){\n                        if(e_flag){\n                            cout << '=';\n                        }else if(c_flag){\n                            cout << ',';\n                        }\n                        c_flag = true;\n                        e_flag = true;\n                        cout << k;\n                    }\n                }\n            }\n        }\n        cout << endl;\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n#define FOR(i,j,k) for(int i = j; i < k; ++i)\n#define reps(i,j,k) FOR(i,j,k)\n#define rep(i,j) reps(i,0,j)\n\nclass team{ \npublic:\n\tint id;\n\tint solved;\n\tint score;\n\tvector < int > problem;\n\tteam(){}\n\tteam(int id, int solved, int score, vector<int> problem) {\n\t\tthis->id = id;\n\t\tthis->solved = solved;\n\t\tthis->score = score;\n\t\tthis->problem = problem;\n\t}\n\n\tbool operator<(const team &a)const{\n\t\treturn solved == a.solved ? score == a.score ? id < a.id : score > a.score : solved < a.solved;\n\t}\n};\n\nint main(){\n\twhile(true){\n\t\tint M,T,P,R;\n\t\tscanf(\"%d%d%d%d\",&M,&T,&P,&R);\n\t\tif(M ==0 && T == 0 && P == 0 && R == 0){\n\t\t\tbreak;\n\t\t}\n\t\n\t\tvector<team> teams;\n\t\tvector<int> clr(10);\n\t\trep(i,T) {\n\t\t\tteams.emplace_back(team(i+1,0,0,clr));\n\t\t} \n\n\t\trep(i,R){\n\t\t\tint m,t,p,j;\n\t\t\tscanf(\"%d%d%d%d\",&m,&t,&p,&j);\n\t\t\t--t;--p;\n\t\t\tif(j == 0) {\n\t\t\t\tteams[t].solved++;\n\t\t\t\tteams[t].score += m + 20*teams[t].problem[p];\n\t\t\t\tteams[t].problem[p] = -1;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tteams[t].problem[p]++;\n\t\t\t}\n\t\t}\n\n\t\tsort(teams.rbegin(), teams.rend());\n\t\t\n\t\tcout << teams[0].id;\n\t\t\n\t\treps(i,1,T) {\n\t\t\tif(teams[i].solved < teams[i-1].solved){\n\t\t\t\tcout << \",\" << teams[i].id ;\n\t\t\t}\n\t\t\telse if(teams[i].score != teams[i-1].score) {\n\t\t\t\tcout << \",\" << teams[i].id;\n\t\t\t}\n\t\t\telse{\n\t\t\t\tcout << \"=\" << teams[i].id;\n\t\t\t}\n\t\t}\n\n\t\tcout << endl;\n\t}\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <queue>\n#include <tuple>\n#include <map>\n#include <set>\n\nusing namespace std;\n\n#define rep(i,n) for(int i = 0; i < n; i++)\n\nstruct Team {\n\tint no, time;\n\tmap<int, int> wa;\n\tset<int> ac;\n\tTeam() : time(0) {}\n\tbool operator < (Team &other) {\n\t\tif (ac.size() == other.ac.size()) {\n\t\t\tif (time == other.time) {\n\t\t\t\treturn no < other.no;\n\t\t\t}\n\t\t\treturn time > other.time;\n\t\t}\n\t\treturn ac.size() < other.ac.size();\n\t}\n\tbool operator == (Team &other) {\n\t\treturn ac.size() == other.ac.size() && time == other.time;\n\t}\n};\n\nint main() {\n\tint M, T, P, R;\n\twhile (cin >> M >> T >> P >> R && M) {\n\t\tvector<Team> teams(T);\n\t\trep(i, T) {\n\t\t\tteams[i].no = i + 1;\n\t\t}\n\t\trep(i, R) {\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tt--;\n\t\t\tif (j == 0) {\n\t\t\t\tteams[t].time += teams[t].wa[p] * 20 + m;\n\t\t\t\tteams[t].ac.insert(p);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tteams[t].wa[p]++;\n\t\t\t}\n\t\t}\n\t\tsort(teams.begin(), teams.end());\n\t\treverse(teams.begin(), teams.end());\n\t\trep(i, T-1) {\n\t\t\tcout << teams[i].no;\n\t\t\tif (teams[i] == teams[i + 1]) {\n\t\t\t\tcout << \"=\";\n\t\t\t}else{\n\t\t\t\tcout << \",\";\n\t\t\t}\n\t\t}\n\t\tcout << teams.back().no << endl;\n\t}\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <cstdio>\n#include <iostream>\n#include <map>\n#include <cmath>\n#include <queue>\n#include <set>\n#include <sstream>\n#include <stack>\n#include <string>\n#include <vector>\n#include <stdlib.h>\n#include <stdio.h>\n#include <bitset>\n#include <cstring>\nusing namespace std;\n#define FOR(I,A,B) for(int I = (A); I < (B); ++I)\n#define CLR(mat) memset(mat, 0, sizeof(mat))\ntypedef long long ll;\ntypedef pair<ll, int> pll;\n\nint main()\n{\n  int M,T,P,R;\n  while(cin>>M>>T>>P>>R,M||T||P||R) {\n    int A[T+1],times[T+1],pena[T+1],miss[T+1][P+1];\n    CLR(A);CLR(times);CLR(pena);CLR(miss);\n    FOR(i,0,R) {\n      int m, t, p, j;\n      cin >> m >> t >> p >> j;\n      if(j==0) {\n        A[t]++;\n        times[t] += m;\n        pena[t] += miss[t][p] * 20;\n      } else {\n        miss[t][p]++;\n      }\n    }\n    vector<pll> score(T);\n    FOR(i,1,T+1) {\n      ll s = A[i] * (int)1e15 - pena[i] - times[i];\n      score[i-1] = pll(s, i);\n    }\n    sort(score.rbegin(), score.rend());\n    int j = 1;\n    ll now = score[0].first;\n    vector<vector<int> > ans(T+1);\n    FOR(i,0,T) {\n      if(now > score[i].first) {\n        j++;\n        now = score[i].first;\n      }\n      ans[j].push_back(score[i].second);\n    }\n    FOR(i,1,T+1) {\n      if((int)ans[i].size() > 0) {\n        if(i!=1) cout << ',';\n        vector<int> pr;\n        FOR(j,0,(int)ans[i].size()) {\n          pr.push_back(ans[i][j]);\n        }\n        sort(pr.rbegin(), pr.rend());\n        FOR(j,0,(int)pr.size()) {\n          if(j!=0) cout<<'=';\n          cout << pr[j];\n        }\n      }\n    }\n    cout << '\\n';\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <utility>\n#include <algorithm>\nusing namespace std;\ntypedef pair<int, int> P1;\ntypedef pair<P1, int> PP;\n\nint main()\n{\n    while(true){\n        int M, T, P, R;\n        cin >> M >> T >> P >> R;\n        if(M == 0 && T == 0 && P == 0 && R == 0) break;\n        int m[2003], t[2003], p[2003], j[2003];\n        int last[52] {0};\n        int sol[52][12];\n        int miss[52][12];\n        for(int it = 0; it < T; it++){\n            for(int ip = 0; ip < P; ip++){\n                sol[it][ip] = false;\n                miss[it][ip] = 0;\n            }\n        }\n        for(int i = 0; i < R; i++){\n            cin >> m[i] >> t[i] >> p[i] >> j[i];\n            t[i]--;\n            p[i]--;\n            if(j[i] == 0){\n                sol[t[i]][p[i]] = true;\n                last[t[i]] += m[i];\n            }\n            if(j[i] != 0){\n                miss[t[i]][p[i]]++;\n            }\n        }\n        int count[52] {0};\n        PP num[52];\n        for(int i = 0; i < T; i++){\n            for(int k = 0; k < P; k++){\n                if(sol[i][k]){\n                    count[i]++;\n                    last[i] += miss[i][k] * 20;\n                }\n            }\n            last[i] = -last[i];\n            num[i] = PP(P1(count[i], last[i]), i);\n        }\n        sort(num, num + T, greater<PP>());\n        cout << num[0].second + 1;\n        for(int i = 1; i < T; i++){\n            if(num[i].first.first == num[i - 1].first.first && num[i].first.second == num[i - 1].first.second){\n                cout << '=';\n            }\n            else cout << ',';\n            cout << num[i].second + 1;\n        }\n        cout << endl;\n    }\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\nint main(){\n\n    cin.tie(0);\n    ios::sync_with_stdio(false);\n\n    while( true ){\n\n        int m, t, p, r;\n        cin >> m >> t >> p >> r;\n        if(m == 0 && t == 0 && p == 0 && r == 0)\n            break;\n\n        vector<int> correct(t, 0);\n        vector<int> time(t, 0);\n        vector<vector<int>> incorrect(t, vector<int>(p, 0));\n\n        for(int i = 0; i < r; i++){\n\n            int mi, ti, pi, ji;\n            cin >> mi >> ti >> pi >> ji;\n\n            if(ji == 0){\n                correct[ti - 1] += 1;\n                time[ti - 1] += incorrect[ti - 1][pi - 1] * 20 + mi;\n            } else {\n                incorrect[ti - 1][pi - 1]++;\n            }\n\n        }\n\n        vector<vector<int>> bucket(p + 1, vector<int>(0));\n\n        for(int i = 0; i < t; i++)\n            bucket[correct[i]].push_back(i);\n/*\n        for(auto &x : bucket){\n            for(auto &z : x)\n                cout << z << ' ';\n            cout << endl;\n        }\n*/\n        int count = 0;\n        for(int i = bucket.size() - 1; i >= 0; i--) {\n            if(bucket[i].size() == 1)\n                cout << bucket[i][0] + 1 << ( ++count != t ? \",\" : \"\");\n            if(bucket[i].size() > 1){\n                vector<pair<int, int>> p(bucket[i].size());\n                for(int j = 0; j < bucket[i].size(); j++){\n                    p[j] = make_pair(time[bucket[i][j]], bucket[i][j]);\n                }\n                sort(p.begin(), p.end());\n                stack<int> st;\n                for(int j = 0; j < bucket[i].size(); j++){\n                    if(j != bucket[i].size() - 1){\n                        if(p[j].first == p[j+1].first) {\n                            st.push(p[j].second);\n                        } else {\n                            if (!st.empty()) {\n                                st.push(p[j].second);\n                                while(!st.empty()) {\n                                    cout << st.top() + 1 << ( ++count != t ? (st.size() != 1 ? \"=\" : \",\") : \"\");\n                                    st.pop();\n                                }\n                            } else\n                                cout << p[j].second + 1 << ( ++count != t ? \",\" : \"\");\n                        }\n                    } else {\n                        if (!st.empty()) {\n                            st.push(p[j].second);\n                            while(!st.empty()) {\n                                cout << st.top() + 1 << ( ++count != t ? (st.size() != 1 ? \"=\" : \",\") : \"\");\n                                st.pop();\n                            }\n                        } else\n                            cout << p[j].second + 1 << ( ++count != t ? \",\" : \"\");\n                    }\n                }\n            }\n        }\n        cout << endl;\n\n    }\n\n    return 0;\n\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <map>\n\nusing namespace std;\n\nint main()\n{\n\twhile(1)\n\t{\n\t\tint m,t,p,r;\n\t\tcin >> m >> t >> p >> r;\n\t\tif(m==0&&t==0&&p==0&&r==0) break;\n\n\t\tvector < vector<int> > mt(t, vector<int>() );\n\t\tvector < vector<int> > pt(t, vector<int>() );\n\t\tvector < vector<int> > jt(t, vector<int>() );\n\n\t\tfor (int i=0;i<r;i++)\n\t\t{\n\t\t\tint M,T,P,J;\n\t\t\tcin >> M >> T >> P >> J;\n\t\t\tmt[T-1].push_back(M);\n\t\t\tpt[T-1].push_back(P);\n\t\t\tjt[T-1].push_back(J);\n\t\t}\n\t\t\n\t\tmultimap <int,int> rank;\n\n\t\tfor (int i=0;i<t;i++)\n\t\t{\n\t\t\tint SC=0,PT=0;\n\t\t\tvector <bool> solved(p);\n\t\t\tfor (int j=mt[i].size()-1;j>=0;j--)\n\t\t\t{\n\t\t\t\tif(!solved[pt[i][j]])\n\t\t\t\t{\n\t\t\t\t\tif(jt[i][j]==0)\n\t\t\t\t\t{\n\t\t\t\t\t\tsolved[pt[i][j]]=true;\n\t\t\t\t\t\tSC++;\n\t\t\t\t\t\tPT+=mt[i][j];\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tPT+=20;\n\t\t\t\t}\n\t\t\t}\n\t\t\tpair <int, int> PAIR;\n\t\t\tPAIR.first = (-(SC*500000)+PT)*10-i;\n\t\t\tPAIR.second = i;\n\t\t\trank.insert(PAIR);\n\t\t}\n\t\t\n\t\tfor (multimap<int, int>::iterator i=rank.begin();i!=(--rank.end());i++)\n\t\t{\n\t\t\tcout << i->second + 1 << ((((i->first)+(i->second))==(((++i)->first)+((i)->second)))?\"=\":\",\");\n\t\t\ti--;\n\t\t}\n\t\tcout << (--rank.end())->second + 1 << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\nusing namespace std;\n\nclass team{\npublic:\n\tint num, ans, time;\n\tteam(int n){\n\t\tnum = n;\n\t\tans = time = 0;\n\t}\n\tbool operator<(const team &t2)const{\n\t\tif (ans != t2.ans)\n\t\t\treturn ans > t2.ans;\n\t\telse if (time != t2.time)\n\t\t\treturn time < t2.time;\n\t\telse\n\t\t\treturn num > t2.num;\n\t}\n};\n\nint　main(　)\n{\n\tint M, T, P, R, m[2001], t[2001], p[2001], r[2001], before;\n\twhile (cin >> M >> T >> P >> R, (M || T || P || R)){\n\t\tvector<team> v;\n\t\tvector<team>::iterator pv;\n\t\t//入力\n\t\tfor (int i = 0; i < R; i++){\n\t\t\tcin >> m[i] >> t[i] >> p[i] >> r[i];\n\t\t}\n\n\t\t//各チームの時間\n\t\tfor (int i = 1; i <= T; i++){\n\t\t\tteam te = team(i);\n\t\t\tfor (int j = 0; j < R; j++){\n\t\t\t\t//正解時間の計算\n\t\t\t\tif (t[j] == i && r[j] == 0){\n\t\t\t\t\tte.time += m[j];\n\t\t\t\t\tte.ans++;\n\t\t\t\t\t//以前のペナルティを計算\n\t\t\t\t\tfor (int k = 0; k < j; k++){\n\t\t\t\t\t\tif (t[k] == i && p[k] == p[j]){\n\t\t\t\t\t\t\tte.time += 20;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tv.push_back(te);\n\t\t}\n\n\t\t//ソート\n\t\tsort(v.begin(), v.end());\n\t\tpv = v.begin();\n\t\tbefore = -1;\n\t\twhile (pv != v.end()){\n\t\t\tif (before == pv->time)\n\t\t\t\tcout << \"=\" << pv->num;\n\t\t\telse {\n\t\t\t\tif (pv == v.begin())\n\t\t\t\t\tcout << pv->num;\n\t\t\t\telse\n\t\t\t\t\tcout << \",\" << pv->num;\n\t\t\t\tbefore = pv->time;\n\t\t\t}\n\t\t\tpv++;\n\t\t}\n\t\tcout << endl;\n\t\tv.~vector();\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstring>\nusing namespace std;\nint x[100][3], n, a, b, c, d, e, f, g, h, p;\nint main() {\n\twhile (true) {\n\t\tmemset(x, 0, sizeof(x));\n\t\tcin >> n >> a >> b >> c;\n\t\tif (n == 0) {\n\t\t\tbreak;\n\t\t}\n\t\tfor (int i = 0; i < c; i++) {\n\t\t\tcin >> d >> e >> f >> g;\n\t\t\tif (g) {\n\t\t\t\tx[e][2] += 20;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tx[e][1] = d + x[e][2];\n\t\t\t\tx[e][0]++;\n\t\t\t}\n\t\t}\n\t\tp = 0;\n\t\tfor (int i = 10; i >= 0; i--) {\n\t\t\tfor (int j = 0; j <= 1000; j++) {\n\t\t\t\th = 0;\n\t\t\t\tfor (int k = a; k > 0; k--) {\n\t\t\t\t\tif (x[k][0]==i && x[k][1]==j) {\n\t\t\t\t\t\tif (h >= 1) {\n\t\t\t\t\t\t\tcout << '=';\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (p >= 1) {\n\t\t\t\t\t\t\tcout << ',';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcout << k;\n\t\t\t\t\t\tp++;\n\t\t\t\t\t\th++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcout << endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#define N 2000\nusing namespace std;\nstruct team{\n  int tnum;\n  int correct;\n  int time;\n};\nint main(){\n  int m,t,p,r,im[N],it[N],ip[N],ij[N],incorrect,i,j;\n  struct team data[51];\n  while(1){\n    cin >> m >> t >> p >> r;\n    if(m==0&&t==0&&p==0&&r==0) break;\n    for(i=0;i<r;i++) cin >> im[i] >> it[i] >> ip[i] >> ij[i];\n    for(i=1;i<=t;i++){\n      data[i].tnum=i;\n      data[i].correct=0;\n      data[i].time=0;\n    }\n    for(i=0;i<r;i++){\n      if(ij[i]==0){\n\tdata[it[i]].correct++;\n      \tincorrect=0;\n\tfor(j=0;j<i;j++){\n\t  if(ip[i]==ip[j]) incorrect++;\n\t}\n\tdata[it[i]].time+=incorrect*20+im[i];\n      }\n    }\n    for(i=1;i<=t;i++){\n      for(j=2;j<=t;j++){\n\tif(data[j].tnum>data[j-1].tnum) swap(data[j],data[j-1]);\n      }\n    }\n    for(i=1;i<=t;i++){\n      for(j=2;j<=t;j++){\n\tif(data[j].time<data[j-1].time) swap(data[j],data[j-1]);\n      }\n    }\n    for(i=1;i<=t;i++){\n      for(j=2;j<=t;j++){\n\tif(data[j].correct>data[j-1].correct) swap(data[j],data[j-1]);\n      }\n    }\n    for(i=1;i<t;i++){\n      cout << data[i].tnum;\n      if(data[i].correct==data[i+1].correct&&data[i].time==data[i+1].time)\n\tcout << '=';\n      else cout << ',';\n      if(i==t-1) cout << data[i+1].tnum;\n    }\n    cout << endl;\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define rep(i, a, n) for(int i = a; i < n; i++)\nusing namespace std;\n\nint M, T, P, R;\n\nstruct data{\n    int id, ac, pe;\n};\n\nbool cmp(data d1, data d2){\n    if(d1.ac == d2.ac){\n        if(d1.pe == d2.pe) return d1.id > d2.id;\n        return d1.pe < d2.pe;\n    }\n    return d1.ac > d2.ac;\n}\n\nint main(){\n    while(1){\n        cin >> M >> T >> P >> R;\n        if(M + T + P + R == 0) break;\n        int wa[51][11] = {};\n        vector<data> d(T);\n        rep(i, 0, T) d[i].id = i;\n        rep(i, 0, R){\n            int m, t, p, j;\n            cin >> m >> t >> p >> j;\n            t--;\n            if(j != 0){\n                wa[t][p]++;\n            }else{\n                d[t].ac++;\n                d[t].pe += m + 20 * wa[t][p];\n            }\n        }\n        // rep(i, 0, T){\n        //     cout << d[i].id << \" \" << d[i].ac << \" \" << d[i].pe << endl;\n        // }\n        sort(d.begin(), d.end(), cmp);        \n        rep(i, 0, T){\n            if(i != 0 && d[i].ac == d[i - 1].ac && d[i].pe == d[i - 1].pe){\n                cout << \"=\";\n            }else if(i != 0){\n                cout << \",\";\n            }\n            cout << d[i].id + 1;\n        }\n        cout << endl;\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\nusing namespace std;\n\nint main(){\n  while(true){\n    int M,T,P,R;\n    cin>>M>>T>>P>>R;\n\n    if(M==0&&T==0&&P==0&&R==0)\n      break;\n\n    int CP[50],TT[50],PT[50][10];\n    for (int i = 0; i < T; i++) {\n        CP[i] = TT[i] = 0;\n        for (int j = 0; j < P; j++)\n            PT[i][j] = 0;\n    }\n\n    for (int i = 0; i < R; i++) {\n        int m, t, p, j;\n        cin >> m >> t >> p >> j;\n\n        if (j == 0) {\n            CP[t - 1]++;\n            TT[t - 1] += (m + PT[t - 1][p - 1]);\n        }\n        else {\n            PT[t - 1][p - 1] += 20;\n        }\n    }\n\n    int tnow, tpre = -1;\n    bool flg[50];\n    for (int i = 0; i < T; i++)\n        flg[i] = false;\n\n    for (int i = 0; i < T; i++) {\n        tnow = -1;\n        for (int j = 0; j < T; j++) {\n            if (flg[j])\n                continue;\n\n            if (tnow == -1) {\n                tnow == j;\n            }\n            else {\n                if (CP[j] > CP[tnow] || (CP[j] == CP[tnow] && TT[j]<=TT[tnow])) {\n                    tnow = j;\n                }\n            }\n        }\n\n        if (tpre != -1) {\n            if (CP[tnow] == CP[tpre] && TT[tnow] == TT[tpre])\n                cout << '=';\n            else\n                cout << ',';\n        }\n        cout << tnow + 1;\n\n        flg[tnow] = true;\n        tpre = tnow;\n    }\n    cout << endl;\n  }\n  return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<vector>\n#include<algorithm>\nusing namespace std;\n\tint m,t,p,r;\nstruct team{\nint id;\nint ac;\nint time[100];\nbool ok[200];\n};\nint or(team a,team b){//aのほうが強ければ1,bなら0,同じなら2\n\nif(a.ac>b.ac)return 1;\nelse if(a.ac<b.ac)return 0;\nint at=0,bt=0;\nfor(int i=0;i<=p;i++){\nif(a.ok[i]==true)at+=a.time[i];\nif(b.ok[i]==true)bt+=b.time[i];\n}\nif(at<bt)return 1;\nelse if(at>bt)return 0;\nelse return 2;\n}\nint main(){\n\n\twhile(true){\n\tcin>>m>>t>>p>>r;\n\tif(m+t+p+r==0)break;\n\tvector<team>ta(0);\n\tta.resize(200);\n\n\tfor(int i=0;i<=t;i++)for(int j=0;j<200;j++)ta[i].time[j]=0,ta[i].ok[j]=0;\n\tfor(int i=0;i<=t;i++)ta[i].id=i,ta[i].ac=0;\n\tfor(int i=0;i<r;i++){\n\tint a,b,c,d;\n\tcin>>a>>b>>c>>d;//a:経過時間:bチーム番号c:問題番号j:0奈良正解それ以外不正解\n\tif(d==0){\n\tta[b].time[c]+=a;\n\tta[b].ac++;\n\tta[b].ok[c]=true;\n\t}\n\telse {\n\tta[b].time[c]+=20;\n\t}\n\t}\n\tta.erase(ta.begin());\n\tfor(int i=0;i<t;i++){\n\tfor(int j=0;j<t;j++){\n\tif(or(ta[i],ta[j])==1)swap(ta[i],ta[j]);\n\tif(or(ta[i],ta[j])==2&&ta[i].id>ta[j].id)swap(ta[i],ta[j]);\n\t}\n\t}\n\tfor(int i=0;i<t-1;i++){\n\tif(or(ta[i],ta[i+1])!=2)cout<<ta[i].id<<\",\";\n\telse cout<<ta[i].id<<\"=\";\n\t}\n\tcout<<ta[t-1].id<<endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <map>\n\nusing namespace std;\n\nint main()\n{\n\twhile(1)\n\t{\n\t\tint m,t,p,r;\n\t\tcin >> m >> t >> p >> r;\n\t\tif(m==0&&t==0&&p==0&&r==0) break;\n\n\t\tvector < vector<int> > mt(t, vector<int>() );\n\t\tvector < vector<int> > pt(t, vector<int>() );\n\t\tvector < vector<int> > jt(t, vector<int>() );\n\n\t\tfor (int i=0;i<r;i++)\n\t\t{\n\t\t\tint M,T,P,J;\n\t\t\tcin >> M >> T >> P >> J;\n\t\t\tmt[T-1].push_back(M);\n\t\t\tpt[T-1].push_back(P);\n\t\t\tjt[T-1].push_back(J);\n\t\t}\n\t\t\n\t\tmultimap <int,int> rank;\n\n\t\tfor (int i=0;i<t;i++)\n\t\t{\n\t\t\tint SC=0,PT=0;\n\t\t\tvector <bool> solved(p);\n\t\t\tfor (int j=mt[i].size()-1;j>=0;j--)\n\t\t\t{\n\t\t\t\tif(!solved[pt[i][j]])\n\t\t\t\t{\n\t\t\t\t\tif(jt[i][j]==0)\n\t\t\t\t\t{\n\t\t\t\t\t\tsolved[pt[i][j]]=true;\n\t\t\t\t\t\tSC++;\n\t\t\t\t\t\tPT+=mt[i][j];\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tPT+=20;\n\t\t\t\t}\n\t\t\t}\n\t\t\tpair <int, int> PAIR;\n\t\t\tPAIR.first = (-(SC*5000000)+PT)*50-i;\n\t\t\tPAIR.second = i;\n\t\t\trank.insert(PAIR);\n\t\t}\n\t\t\n\t\tfor (multimap<int, int>::iterator i=rank.begin();i!=(--rank.end());i++)\n\t\t{\n\t\t\tcout << i->second + 1 << ((((i->first)+(i->second))==(((++i)->first)+((i)->second)))?\"=\":\",\");\n\t\t\ti--;\n\t\t}\n\t\tcout << (--rank.end())->second + 1 << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n\nusing namespace std;\n\n#define rep(i, n) for(int i=0; i<(n); ++i)\n#define all(c) (c).begin(), (c).end()\n\nstruct State{\n    int score, time, num;\n    State(int score, int time, int num)\n        :score(score), time(time), num(num){}\n};\n\nbool operator<(const State &a, const State &b){\n    return tie(b.score, b.time, b.num) < tie(a.score, a.time, a.num);\n}\n\nbool operator==(const State &a, const State &b){\n    return tie(a.score, a.time) == tie(b.score, b.time);\n}\n\nint main(){\n    int M, T, P, R;\n    while(cin >> M >> T >> P >> R, P|T|P|R){\n        vector<State> team;\n        rep(i, T)team.emplace_back(0, 0, i+1);\n        vector<vector<int> > pen(T, vector<int>(P));\n        while(R--){\n            int m, t, p, j;\n            cin >> m >> t >> p >> j;\n            t--; p--;\n            if(j)pen[t][p]++;\n            else{\n                team[t].score++;\n                team[t].time -= m + 20 * pen[t][p];\n            }\n        }\n        sort(all(team));\n        rep(i, T){\n            if(i)cout << (team[i-1] == team[i]? '=': ',');\n            cout << team[i].num;\n        }\n        cout << '\\n';\n    }\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n#define rep(i,n) for(int i = 0; i < int(n); ++i)\n\nint main(){\n  int m,t,p,r;\n  while(cin >> m >> t >> p >> r , m){\n    vector<int> now(t);\n    int p[100][20] ={};\n    int ca[100] = {};\n    int mm,tt,pp,jj;\n    rep(i,r){\n      cin >> mm >> tt >> pp >> jj;\n      --tt;\n      if(jj){\n        p[tt][pp]++;\n      }else{\n        now[tt] += mm;\n        now[tt] += p[tt][pp]*20;\n        ca[tt]++;\n      }\n    }\n    using tiii = tuple<int,int,int>;\n    vector<tiii> ts;\n    rep(i,t){\n      ts.push_back(tiii{ca[i],-now[i],i+1});\n    }\n    sort(begin(ts),end(ts), greater<tiii>());\n    rep(i,t-1){\n      int a,b,c; tie(a,b,c) = ts[i];\n      int aa,bb,cc; tie(aa,bb,cc) = ts[i+1];\n      cout << c << ((a == aa && b == bb)?'=':',');\n    }\n    int a,b,c; tie(a,b,c) = ts[t-1];\n    cout << c << endl;\n  }\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\nint main(){\n    int m,t,p,r;\n    while(cin>>m>>t>>p>>r,m){\n        vector<vector<int>> team(t,vector<int>(p,0));\n        for(int i=0;i<r;i++){\n            int mm,tt,pp,jj;\n            cin>>m>>tt>>pp>>jj;\n            if(!jj)\n                team[tt-1][pp-1]=m+(-team[tt-1][pp-1])*20;\n            else\n                team[tt-1][pp-1]--;\n\n        }\n        vector<tuple<int,int,int>> rank(t,make_tuple(0,0,0));\n        for(int i=0;i<t;i++)\n            get<2>(rank[i])=i+1;\n        for(int i=0;i<t;i++){\n            for(int j=0;j<p;j++)\n                if(team[i][j]>0){\n                    (get<0>(rank[i]))++;\n                    get<1>(rank[i])-=team[i][j];\n                }\n\n\n        }\n        sort(rank.begin(),rank.end(),greater<tuple<int,int,int>>());\n        queue<int> q;\n        pair<int,int> pre=make_pair(-1,-1);\n        string res=\"\";\n        for(int i=0;i<t;i++){\n            if(pre==make_pair(get<0>(rank[i]),get<1>(rank[i]))){\n                q.push(get<2>(rank[i]));\n                continue;\n            }\n            else{\n                if(!res.empty())\n                    res+=\",\";\n                int s=q.size();\n                for(int j=0;j<s;j++){\n                    int a=q.front();\n                    if(j!=s-1){\n                        res+=to_string(a)+\"=\";\n                        }\n                    else\n                        res+=to_string(a);\n\n                    q.pop();\n\n                }\n                q.push(get<2>(rank[i]));\n                pre=make_pair(get<0>(rank[i]),get<1>(rank[i]));\n            }\n\n        }\n        if(!q.empty())\n            res+=',';\n        for(int i=0;!q.empty();i++){\n            if(q.size()!=1){\n                res+=to_string(q.front())+\"=\";\n\n            }\n            else\n                res+=to_string(q.front());\n            q.pop();\n        }\n        cout<<res<<endl;\n    }\n\n    return 0;\n}\n                                      "
  },
  {
    "language": "C++",
    "code": "//include\n//------------------------------------------\n#include <vector>\n#include <list>\n#include <map>\n#include <set>\n#include <queue>\n#include <stack>\n#include <bitset>\n#include <algorithm>\n#include <functional>\n#include <numeric>\n#include <utility>\n#include <sstream>\n#include <iostream>\n#include <iomanip>\n#include <cstdio>\n#include <cmath>\n#include <cstdlib>\n#include <cctype>\n#include <string>\n#include <cstring>\n#include <ctime>\n#include <fstream>\n#include <complex>\n#include <math.h>\n\nusing namespace std;\n\n//conversion\n//------------------------------------------\ninline long toInt(string s) {int v; istringstream sin(s);sin>>v;return v;}\ninline long toLong(string s) {long v; istringstream sin(s);sin>>v;return v;}\ntemplate<class T> inline string toString(T x) {ostringstream sout;sout<<x;return sout.str();}\n\n//math\n//-------------------------------------------\ntemplate<class T> inline T sqr(T x) {return x*x;}\n\n//typedef\n//------------------------------------------\ntypedef vector<int> VI;\ntypedef vector<VI> VVI;\ntypedef vector<string> VS;\ntypedef pair<int, int> PII;\ntypedef pair<long, long> PLL;\ntypedef long long LL;\n//container util\n//------------------------------------------\n#define ALL(a)  (a).begin(),(a).end()\n#define RALL(a) (a).rbegin(), (a).rend()\n#define PB push_back\n#define MP make_pair\n#define SZ(a) int((a).size())\n#define EACH(i,c) for(typeof((c).begin()) i=(c).begin(); i!=(c).end(); ++i)\n#define EXIST(s,e) ((s).find(e)!=(s).end())\n#define SORT(c) sort((c).begin(),(c).end())\n\n//repetition\n//------------------------------------------\n#define FOR(i,a,b) for(long i=(a);i<(b);++i)\n#define REP(i,n) FOR(i,0,n)\n\n//constant\n//--------------------------------------------\n\n//clear memory\n#define CLR(a) memset((a), 0 ,sizeof(a))\n\nconst long double EPS = 1e-6;\nconst long INF = 1e10;\n\nint mis[51][11],sum[51],cnt[51];\nint main(){\n\tint M,T,P,R;\n\twhile(cin>>M>>T>>P>>R){\n\t\tif(M==0&&T==0&&P==0&&R==0)break;\n\t\tCLR(mis);CLR(sum);CLR(cnt);\n\t\tREP(i,R){\n\t\t\tint m,t,p,j;\n\t\t\tcin>>m>>t>>p>>j;\n\t\t\tif(j==0){\n\t\t\t\tsum[t]+=20*mis[t][p]+m;\n\t\t\t\tcnt[t]++;\n\t\t\t}else{\n\t\t\t\tmis[t][p]++;\n\t\t\t}\n\t\t}\n\t\tvector<pair<pair<int,int>,int> >res;\n\t\tREP(i,T)res.PB(MP(MP(-cnt[i+1],sum[i+1]),-(i+1)));\n\t\tSORT(res);\n\t\tREP(i,SZ(res)){\n\t\t\tcout<<-res[i].second;\n\t\t\tif(i==SZ(res)-1)cout<<endl;\n\t\t\telse if(res[i].first==res[i+1].first)cout<<\"=\";\n\t\t\telse cout<<\",\";\n\t\t}\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "\n#include <string>\n#include <vector>\n#include <algorithm>\n#include <iostream>\n#include <cstdio>\n#include <cstdlib>\n#include <cmath>\n#include <queue>\n#include <map>\n#define INF 1000000\n \nusing namespace std;\ntypedef long long ll;\n \nbool checkmtpj(int m,int t,int p,int j){\n\tif(m==0 && t==0 && p==0 && j==0) return true;\n\telse return false;\n}\n\nint main(){\n\tint M,T,P,R;\n\tint mk[2000],tk[2000],pk[2000],jk[2000];\n\n\n\tstruct Teishutsu{\n\t\tint team;\n\t\tint ansN;\n\t\tint time;\n\t\tint problem[11];\n\t\tbool flag;\n\t};\n\t\n\n\twhile(1){\n\t\tcin>>M>>T>>P>>R;\n\t\tTeishutsu juni[51],tmp;\n\n\n\t\tfor(int i=0;i<2000;i++){\n\t\t\tmk[i]=0;\n\t\t\ttk[i]=0;\n\t\t\tpk[i]=0;\n\t\t\tjk[i]=0;\n\t\t}\n\n\t\tfor(int i=1;i<=R;i++){\n\t\t\tcin>>mk[i]>>tk[i]>>pk[i]>>jk[i];\n\t\t}\n\t\tif(checkmtpj(mk[R],tk[R],pk[R],jk[R])) break;\n\n\t\t/*-------------------構造体初期化処理-----------------*/\n\t\tfor(int i=1;i<=T;i++){\n\t\t\tjuni[i].team=i;\n\t\t\tjuni[i].ansN=0;\n\t\t\tjuni[i].time=0;\n\t\t\tfor(int j=1;j<=11;j++){\n\t\t\t\tjuni[i].problem[j]=0;\n\t\t\t}\n\t\t\tjuni[i].flag=false;\n\t\t}\n\t\t/*-------------------------------------------------------*/\n\n\t\t/*---------------------構造体への入力---------------------*/\n\t\tfor(int i=1;i<=R;i++){\n\t\t\tif(jk[i]==0){\n\t\t\t\tjuni[tk[i]].ansN++;\n\t\t\t\tjuni[tk[i]].time+=mk[i];\n\t\t\t\tif(juni[tk[i]].problem[pk[i]] != 0){\n\t\t\t\t\tjuni[tk[i]].time+=juni[tk[i]].problem[pk[i]]*20;\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tjuni[tk[i]].problem[pk[i]]++;\n\t\t\t}\n//cout<<tk[i]<<\" \"<<juni[tk[i]].ansN<<\" \"<<juni[tk[i]].time<<endl;\n\t\t}\n\t\t\n\t\t/*----------------------------------------------------------*/\n\t\t\n\t\tfor(int i=1;i<=T;i++){\n\t\t\tfor(int j=1;j<=T-i;j++){\n\t\t\t\tif(juni[j].ansN<juni[j+1].ansN){\n\t\t\t\t\ttmp.team=juni[j+1].team;\n\t\t\t\t\ttmp.ansN=juni[j+1].ansN;\n\t\t\t\t\ttmp.time=juni[j+1].time;\n\t\t\t\t\ttmp.flag=juni[j+1].flag;\n\t\t\t\t\t\n\t\t\t\t\tjuni[j+1].team=juni[j].team;\n\t\t\t\t\tjuni[j+1].ansN=juni[j].ansN;\n\t\t\t\t\tjuni[j+1].time=juni[j].time;\n\t\t\t\t\tjuni[j+1].flag=juni[j].flag;\n\t\t\t\t\t\n\t\t\t\t\tjuni[j].team=tmp.team;\n\t\t\t\t\tjuni[j].ansN=tmp.ansN;\n\t\t\t\t\tjuni[j].time=tmp.time;\n\t\t\t\t\tjuni[j].flag=tmp.flag;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor(int i=1;i<=T;i++){\n\t\t\tfor(int j=1;j<=T-i;j++){\n\t\t\t\tif(juni[j].time>juni[j+1].time && juni[j].ansN==juni[j+1].ansN){\n\t\t\t\t\ttmp.team=juni[j+1].team;\n\t\t\t\t\ttmp.ansN=juni[j+1].ansN;\n\t\t\t\t\ttmp.time=juni[j+1].time;\n\t\t\t\t\ttmp.flag=juni[j+1].flag;\n\t\t\t\t\t\n\t\t\t\t\tjuni[j+1].team=juni[j].team;\n\t\t\t\t\tjuni[j+1].ansN=juni[j].ansN;\n\t\t\t\t\tjuni[j+1].time=juni[j].time;\n\t\t\t\t\tjuni[j+1].flag=juni[j].flag;\n\n\t\t\t\t\tjuni[j].team=tmp.team;\n\t\t\t\t\tjuni[j].ansN=tmp.ansN;\n\t\t\t\t\tjuni[j].time=tmp.time;\n\t\t\t\t\tjuni[j].flag=tmp.flag;\n\t\t\t\t}else if(juni[j].time==juni[j+1].time && juni[j].ansN==juni[j+1].ansN){\n\t\t\t\t\tjuni[j].flag=true;\n\t\t\t\t\t\n\t\t\t\t\tif(juni[j].team<juni[j+1].team){\n\t\t\t\t\t\ttmp.team=juni[j+1].team;\n\t\t\t\t\t\ttmp.ansN=juni[j+1].ansN;\n\t\t\t\t\t\ttmp.time=juni[j+1].time;\n\t\t\t\t\t\ttmp.flag=juni[j+1].flag;\n\t\t\t\t\t\n\t\t\t\t\t\tjuni[j+1].team=juni[j].team;\n\t\t\t\t\t\tjuni[j+1].ansN=juni[j].ansN;\n\t\t\t\t\t\tjuni[j+1].time=juni[j].time;\n\t\t\t\t\t\tjuni[j+1].flag=juni[j].flag;\n\n\t\t\t\t\t\tjuni[j].team=tmp.team;\n\t\t\t\t\t\tjuni[j].ansN=tmp.ansN;\n\t\t\t\t\t\tjuni[j].time=tmp.time;\n\t\t\t\t\t\tjuni[j].flag=tmp.flag;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\n\t\tfor(int i=1;i<=T;i++){\n\t\t\tif(i==1){}\n\t\t\telse{\n\t\t\t\tif(juni[i].flag) cout<<\"=\";\n\t\t\t\telse cout<<\",\";\n\t\t\t}\n\t\t\tcout<<juni[i].team;\n\t\t\t\n\t\t}\n\t\tcout<<endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<vector>\n#include<algorithm>\nusing namespace std;\n\ntypedef pair<int,int> pii;\ntypedef pair<pii,int> tri;\nint main(){\n  int m,t,p,r;\n  int team[55][15];\n  while(cin>>m>>t>>p>>r,m){\n    memset(team,0,sizeof(team));\n    vector<tri> ans;\n    int a,b,c,d;\n    for(int i=0;i<r;i++){\n      cin>>a>>b>>c>>d;\n      if(d!=0){\n\tteam[b][c]++;\n      }else{\n\tteam[b][p+1]+=a+20*team[b][c];\n\tteam[b][p+2]++;\n      }\n    }\n    for(int i=1;i<=t;i++){\n      ans.push_back(tri(pii(-team[i][p+2],team[i][p+1]),-i));\n    }\n    sort(ans.begin(),ans.end());\n    for(int i=0;i<t;i++){\n      cout<<-ans[i].second;\n      if(i+1==t)cout<<endl;\n      else if(ans[i].first == ans[i+1].first)cout<<\"=\";\n      else cout<<\",\";\n    }\n  }\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nclass Team{\n  public:\n    int id;\n    int solvednum;\n    int penalty;\n    vector<bool> solved;\n    vector<int> WA;\n    Team(int id, int N){\n      this->id = id;\n      solvednum = 0;\n      penalty = 0;\n      solved.resize(N, false);\n      WA.resize(N, 0);\n    }\n    bool operator == (const Team &t)const{\n      return id == t.id;\n    }\n    bool operator < (const Team &t)const{\n      if(solvednum == t.solvednum){\n        if(penalty == t.penalty){\n          return id > t.id;\n        }\n        return penalty < t.penalty;\n      }\n      return solvednum > t.solvednum;\n    }\n    string toString(){\n      return to_string(id) + \" \" + to_string(solvednum) + \" \" + to_string(penalty);\n    }\n};\n\nint main(void){\n  ios::sync_with_stdio(false);\n  cin.tie(0);\n  int M, T, P, R;\n  while(cin >> M >> T >> P >> R, M | T | P | R){\n    vector<Team> teams;\n    for(int i = 0;  i < T; i++){\n      teams.push_back(Team(i+1, P+1));\n    }\n    for(int asd = 0; asd < R; asd++){\n      int m, t, p, j;\n      cin >> m >> t >> p >> j;\n      t--;\n      if(j == 0){\n        teams[t].solved[p] = true;\n        teams[t].solvednum++;\n        teams[t].penalty += m + 20*teams[t].WA[p];\n      }else{\n        teams[t].WA[p]++;\n      }\n    }\n    sort(teams.begin(), teams.end());\n\n    cout << teams[0].id;\n    for(int i = 1; i < T; i++){\n      if(teams[i].solvednum == teams[i-1].solvednum && teams[i].penalty == teams[i-1].penalty){\n        cout << '=';\n      }else{\n        cout << ',';\n      }\n      cout << teams[i].id;\n    }\n    cout << endl;\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <map>\n\nusing namespace std; \n\nint main()\n{\n\tint M, T, P, R;\n\tint m, t, p, j;\n\tint pena[51][11];\n\tint solve[51];\n\tint time[51];\n\n\twhile(cin >> M >> T >> P >> R){\n\t\tif(M==0 && T==0 && P==0 && R==0){return 0;}\n\n\t\tmap<int,map<int,map<int,int,greater<int> > >,greater<int> > ans;\n\n\t\tfor(int i=1; i<=T; i++){\n\t\t\t\tsolve[i]=0;\n\t\t\t\ttime[i]=0;\n\t\t\tfor(int k=1; k<=P; k++){\n\t\t\t\tpena[i][k]=0;\n\t\t\t}\n\t\t}\n\n\t\tfor(int i=0; i<R; i++){\n\t\t\tcin >> m >> t >> p >> j;\n\n\t\t\tif(j==0){\n\t\t\t\tsolve[t]++;\n\t\t\t\ttime[t] = time[t] + m + 20*pena[t][p];\n\t\t\t}\n\t\t\telse{\n\t\t\t\tpena[t][p]++;\n\t\t\t}\n\t\t}\n\n\t\tfor(int i=1; i<=T; i++){\n\t\t\tans[solve[i]][time[i]][i]=0;\n\t\t}\n\n\t\tint pre_s=-1, pre_t=-1;\n\n\t\tfor(map<int,map<int,map<int,int,greater<int> > >,greater<int> >::iterator it = ans.begin(); it != ans.end(); it++){\n\t\t\tfor(map<int,map<int,int,greater<int> > >::iterator jt = (*it).second.begin(); jt != (*it).second.end(); jt++){\n\t\t\t\tfor(map<int,int,greater<int> >::iterator kt = (*jt).second.begin(); kt != (*jt).second.end(); kt++){\n\t\t\t\t\tif(pre_s==-1 && pre_t==-1){ cout << (*kt).first; }\n\t\t\t\t\telse if(pre_s==(*it).first && pre_t==(*jt).first){cout << \"=\" << (*kt).first;}\n\t\t\t\t\telse{cout << \",\" << (*kt).first;}\n\t\t\t\t\tpre_s=(*it).first;\n\t\t\t\t\tpre_t=(*jt).first;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcout << endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nint main() {\n  for(int M, T, P, R; cin >> M >> T >> P >> R && (M|T|P|R);) {\n    vector<int> ac(T, 0), ti(T, 0);\n    vector<vector<int> > wa(T, vector<int>(P, 0));\n    for(int i = 0; i < R; ++i) {\n      int m, t, p, j;\n      cin >> m >> t >> p >> j;\n      if(j) {\n        ++wa[t-1][p-1];\n      } else {\n        ++ac[t-1];\n        ti[t-1] += m + wa[t-1][p-1] * 20;\n      }\n    }\n    vector<vector<int> > v;\n    for(int i = 0; i < T; ++i) {\n      vector<int> u(3);\n      u[0] = ac[i];\n      u[1] = -ti[i];\n      u[2] = i+1;\n      v.push_back(u);\n    }\n    sort(v.begin(), v.end(), greater<vector<int> >());\n    for(int i = 0; i < v.size(); ++i) {\n      if(i) {\n        cout << (v[i-1][0] == v[i][0] && v[i-1][1] == v[i][1] ? '=' : ',');\n      }\n      cout << v[i][2];\n    }\n    cout << endl;\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nclass team{\n    public:\n        vector<int> tt;\n        int ac = 0;\n        vector<int> miss;\n};\n\nint main(void){\n    int M,T,P,R;\n    \n    while(cin >> M >> T >> P >> R, M){\n    \n        vector<team> teams(T);\n        for (int i=0; i<T; i++) {\n            teams[i].tt = vector<int>(P,-1);\n            teams[i].miss = vector<int>(P,0);\n        }\n\n        int m,t,p,j;\n        for (int i=0; i<R; i++) {\n            cin >> m >> t >> p >> j;\n            if (j == 0) {\n                teams[t-1].tt[p-1] = max(teams[t-1].tt[p-1], m);\n                teams[t-1].ac++;\n            }\n            else {\n                teams[t-1].miss[p-1]++;\n            }\n        }\n        \n\n        \n        vector<pair<int, pair<int, int>>> score(T);\n        \n        for (int i=0; i<T; i++){\n            int t = 0;\n            for (int j=0; j<P; j++) {\n                if (teams[i].tt[j] != -1)\n                    t += teams[i].tt[j] + teams[i].miss[j]*20;\n            }\n            score[i] = make_pair(teams[i].ac, make_pair(-t, i+1));\n        }\n        \n        // for (int i=0; i<T; i++){\n        //     cout << \"team \" << i+1 <<\" :\" << endl;\n        //     cout << teams[i].ac << endl;\n        //     for (int j=0;j<P;j++) {\n        //         cout << teams[i].tt[j] << \" \";\n        //     }\n        //     cout << endl;\n        //     for (int j=0;j<P;j++) {\n        //         cout << teams[i].miss[j] << \" \";\n        //     }\n        //     cout << endl;\n        //     cout << -score[i].second.first << endl;\n        // }\n        \n        \n    \n        sort(score.begin(), score.end(), greater<pair<int,pair<int,int>>>());\n        \n        \n        for (int i=0; i<T-1; i++) {\n            cout << score[i].second.second;\n            if (score[i].first == score[i+1].first && score[i].second.first == score[i+1].second.first) cout << \"=\";\n            else cout << \",\";\n        }\n        cout << score[T-1].second.second << endl;\n    }\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <stdio.h>\n\ntypedef struct{\n  int team;\n  int ans[10];\n  int time[10];\n  int anum;\n  int tnum;\n}data_t;\n\nvoid BubbleSort(data_t data[], int n){  \n  data_t temp;\n\n  for(int i=n; 1<i; i--){\n    for(int j=0; j<i-1 ; j++){\n      if(data[j].anum < data[j+1].anum){\n\ttemp = data[j];\n\tdata[j] = data[j+1];\n\tdata[j+1] = temp;\n      }\n    }\n  }\n\n  for(int i=n; 1<i; i--){\n    for(int j=0; j<i-1; j++){\n      if(data[j].anum==data[j+1].anum && data[j].tnum>data[j+1].tnum){\n\ttemp = data[j];\n\tdata[j] = data[j+1];\n\tdata[j+1] = temp;\n      }\n    }\n  }\n\n  for(int i=n; 1<i; i--){\n    for(int j=0; j<i-1 ;j++){\n      if(data[j].anum==data[j+1].anum && data[j].tnum==data[j+1].tnum && data[j].team<data[j+1].team){\n\ttemp = data[j];\n\tdata[j] = data[j+1];\n\tdata[j+1] = temp;\n      }\n    }\n  }\n}\n\nint main(void){\n  int M, T, P, R;\n  int m, t, p, j;\n  data_t data[50];\n  while(1){\n    scanf(\"%d%d%d%d\", &M, &T, &P, &R);\n    if(M==0 && T==0 && P==0 && R==0){\n      break;\n    }\n\n    for(int i=0; i<T; i++){\n      data[i].team = i+1;\n      data[i].anum = 0;\n      data[i].tnum = 0;\n      for(int j=0; j<10; j++){\n\tdata[i].ans[j] = 1;\n\tdata[i].time[j] = 0;\n      }\n    }\n\n    for(int i=0; i<R; i++){\n      scanf(\"%d%d%d%d\", &m, &t, &p, &j);\n      if(j == 0){\n\tdata[t-1].ans[p-1] = 0;\n\tdata[t-1].time[p-1] += m;\n      }else{\n\tdata[t-1].time[p-1] += 20;\n      }\n    }\n    for(int i=0; i<T; i++){\n      for(int j=0; j<P; j++){\n\tif(data[i].ans[j] == 0){\n\t  data[i].anum++;\n\t  data[i].tnum += data[i].time[j];\n\t}\n      }\n    }\n    BubbleSort(data, T);\n\n    printf(\"%d\", data[0].team);\n    for(int i=1; i<T; i++){\n      if(data[i].anum==data[i-1].anum && data[i].tnum==data[i-1].tnum){\n\tprintf(\"=\");\n      }else{\n\tprintf(\",\");\n      }\n      printf(\"%d\", data[i].team);\n    }\n    printf(\"\\n\");\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <utility>\n#include <algorithm>\n#include <tuple>\nusing namespace std;\n\nint main()\n{\n\tint M, T, P, R, m, t, p, j;\n\twhile (cin >> M >> T >> P >> R, M || T || P || R) {\n\t\tvector< vector< pair<int, int> > > data(T + 1, vector< pair<int, int> >(P + 1, pair<int, int>(0,0)));\n\t\tvector< tuple<int, int, int> > score(T + 1);\n\t\tfor (int i = 0; i < R; i++) {\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tif (j == 0) {\n\t\t\t\tdata[t][p].first = m + data[t][p].second * 20;\n\t\t\t\tget<0>(score[t])--;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdata[t][p].second++;\n\t\t\t}\n\t\t}\n\t\tfor (int i = 1; i <= T; i++) {\n\t\t\tint sco = 0,pena = 0;\n\t\t\tfor (int j = 0; j < P; j++) {\n\t\t\t\tif (data[i][j].first) {\n\t\t\t\t\tsco--;\n\t\t\t\t\tpena += data[i][j].first;\n\t\t\t\t}\n\t\t\t}\n\t\t\tscore[i] = tuple<int, int, int>(get<0>(score[i]),pena,-i);\n\t\t}\n\t\tsort(score.begin() + 1, score.end());\n\t\ttuple<int, int, int> temp = score[1];\n\t\tcout << -get<2>(score[1]);\n\t\tfor (int i = 2; i <= T; i++) {\n\t\t\tif (get<0>(temp) == get<0>(score[i]) && get<1>(temp) == get<1>(score[i])) {\n\t\t\t\tcout << \"=\";\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcout << \",\";\n\t\t\t}\n\t\t\tcout << -get<2>(score[i]);\n\t\t\ttemp = score[i];\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstring>\n#include <iostream>\n#include <algorithm>\nusing namespace std;\nstruct square {\n\tint s, t, u; // solved, time, team\n\tsquare() : s(0), t(0), u(0) {}\n\tsquare(int p, int q, int r) : s(p), t(q), u(r) {}\n};\nbool operator==(square s1, square s2) { return s1.s == s2.s && s1.t == s2.t; }\nbool operator!=(square s1, square s2) { return !(s1 == s2); }\nbool operator<(square s1, square s2) {\n\tif(s1.s != s2.s) return s1.s > s2.s;\n\tif(s1.t != s2.t) return s1.t < s2.t;\n\treturn s1.u > s2.u;\n}\nint T, N, P, Q, t, n, p, q;\nint main() {\n\twhile(scanf(\"%d%d%d%d\", &T, &N, &P, &Q), N) {\n\t\tsquare d[50]; int v[50][10]; memset(v, 0, sizeof(v));\n\t\tfor(int i = 0; i < N; i++) d[i] = square(0, 0, i + 1);\n\t\tfor(int i = 0; i < Q; i++) {\n\t\t\tscanf(\"%d%d%d%d\", &t, &n, &p, &q);\n\t\t\tif(q != 0) v[n - 1][p - 1]++;\n\t\t\telse d[n - 1].s++, d[n - 1].t += t + v[n - 1][p - 1] * 20;\n\t\t}\n\t\tsort(d, d + N);\n\t\tprintf(\"%d\", d[0].u);\n\t\tfor(int i = 1; i < N; i++) {\n\t\t\tif(d[i - 1] != d[i]) printf(\",%d\", d[i].u);\n\t\t\telse printf(\"=%d\", d[i].u);\n\t\t}\n\t\tprintf(\"\\n\");\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <string>\n#include <vector>\n#include <algorithm>\n#include <cmath>\n#include <cstdio>\n#include <functional>\n#include <numeric>\n#include <stack>\n#include <queue>\n#include <map>\n#include <set>\n#include <utility>\n#include <sstream>\n#include <complex>\n#include <fstream>\n#include <bitset>\n#include <time.h>\n\nusing namespace std;\n\ntypedef long long ll;\ntypedef pair<ll, ll> P;\ntypedef vector<ll> V;\ntypedef complex<double> Point;\n\n#define PI acos(-1.0)\n#define EPS 1e-10\nconst ll INF = (1LL << 31) - 1;\nconst ll MOD = 1e9 + 7;\n\n#define FOR(i,a,b) for(int i=(a);i<(b);i++)\n#define rep(i,N) for(int i=0;i<(N);i++)\n#define ALL(s) (s).begin(),(s).end()\n#define EQ(a,b) (abs((a)-(b))<EPS)\n#define EQV(a,b) ( EQ((a).real(), (b).real()) && EQ((a).imag(), (b).imag()) )\n#define fi first\n#define se second\n#define N_SIZE (1LL << 20)\n#define NIL -1\n#define MAX_N 100100 * 3\n\nint M, T, PP, R;\nbool table[50][10];\nint sum[50][10];\n\nbool is(const pair<P, int> p1, const pair<P, int> p2) {\n\tif (p1.first.first == p2.first.first) {\n\t\tif (p1.first.second == p2.first.second) {\n\t\t\treturn p1.second > p2.second;\n\t\t}\n\t\treturn p1.first.second < p2.first.second;\n\t}\n\treturn p1.first.first > p2.first.first;\n}\n\nint main() {\n\twhile (cin >> M >> T >> PP >> R&&M + T + PP + R) {\n\t\trep(i, 50)rep(j, 10) {\n\t\t\ttable[i][j] = 0;\n\t\t\tsum[i][j] = 0;\n\t\t}\n\t\tvector<pair<P, int>> vpi;\n\t\trep(i, R) {\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tt--; p--;\n\t\t\tif (j == 0) {\n\t\t\t\ttable[t][p] = 1;\n\t\t\t\tsum[t][p] += m;\n\t\t\t}\n\t\t\telse sum[t][p] += 20;\n\t\t}\n\t\trep(i, T) {\n\t\t\tint a = 0, t = 0;\n\t\t\trep(j, PP) {\n\t\t\t\tif (table[i][j]) {\n\t\t\t\t\ta++;\n\t\t\t\t\tt += sum[i][j];\n\t\t\t\t}\n\t\t\t}\n\t\t\tvpi.push_back({ {a,t},i + 1 });\n\t\t}\n\t\tsort(ALL(vpi), is);\n\t\t/*rep(i, T) {\n\t\t\tcout << \"!!\" << vpi[i].first.first << \" \" << vpi[i].first.second << \" \" << vpi[i].second << endl;\n\t\t}*/\n\t\tcout << vpi[0].second;\n\t\trep(i, T - 1) {\n\t\t\tif (vpi[i + 1].first.first == vpi[i].first.first&&\n\t\t\t\tvpi[i + 1].first.second == vpi[i].first.second) {\n\t\t\t\tcout << \"=\" << vpi[i + 1].second;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcout << \",\" << vpi[i + 1].second;\n\t\t\t}\n\t\t}\n\t\tcout << endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<cstdlib>\n#include<cstring>\n#include<cmath>\n#include<ctime>\n#include<cctype>\n#include<climits>\n#include<iostream>\n#include<string>\n#include<vector>\n#include<map>\n#include<list>\n#include<queue>\n#include<deque>\n#include<algorithm>\n#include<numeric>\n#include<utility>\n#include<complex>\n#include<memory>\n#include<functional>\n\nusing namespace std;\n\n#define ALL(g) (g).begin(),(g).end()\n#define REP(i, x, n) for(int i = x; i < n; i++)\n#define rep(i,n) REP(i,0,n)\n#define F(i,j,k) fill(i[0],i[0]+j*j,k)\n#define P(p) cout<<(p)<<endl;\n#define EXIST(s,e) ((s).find(e)!=(s).end())\n#define INF 1<<25\n#define pb push_back\n\ntypedef vector<int> vi;\ntypedef vector<long long> vl;\ntypedef vector<double> vd;\ntypedef pair<int,int> pii;\ntypedef pair<long,long> pll;\ntypedef long long ll;\n\nusing namespace std;\n\nstruct data {\n    int time, team, number, judge;\n};\n\nint penalties[51][11];\nint times[51];\nint point[51];\nint ranking[51];\n\nint main()\n{\n    int M, T, P, R;\n\n    while (cin >> M >> T >> P >> R, M|T|P|R) {\n        fill_n((int *)penalties, 51 * 11, 0);\n        fill_n((int *)times, 51, 0);\n        fill_n((int *)point, 51, 0);\n        for (int i = 1; i <= T; i++) ranking[i] = i;\n        int m, t, p, j;\n        for (int i = 0; i < R; i++) {\n            cin >> m >> t >> p >> j;\n            if (j == 0) {\n                point[t]++;\n                times[t] += m + penalties[t][p];\n            } else {\n                penalties[t][p] += 20;\n            }\n        }\n        for (int i = 1; i <= T; i++) {\n            for (int j = i; j <= T; j++) {\n                if (point[i] < point[j]) {\n                    int a = ranking[i];\n                    ranking[i] = ranking[j];\n                    ranking[j] = a;\n                    a = point[i];\n                    point[i] = point[j];\n                    point[j] = a;\n                    a = times[i];\n                    times[i] = times[j];\n                    times[j] = a;\n                }\n            }\n        }\n        for (int i = 1; i <= T; i++) {\n            for (int j = i; j <= T; j++) {\n                if (point[i] == point[j]) {\n                    if (times[i] > times[j]) {\n                        int a = ranking[i];\n                        ranking[i] = ranking[j];\n                        ranking[j] = a;\n                        a = point[i];\n                        point[i] = point[j];\n                        point[j] = a;\n                        a = times[i];\n                        times[i] = times[j];\n                        times[j] = a;\n                    }\n                    if (times[i] == times[j]) {\n                        if (ranking[i] < ranking[j]) {\n                            int a = ranking[i];\n                            ranking[i] = ranking[j];\n                            ranking[j] = a;\n                            a = point[i];\n                            point[i] = point[j];\n                            point[j] = a;\n                            a = times[i];\n                            times[i] = times[j];\n                            times[j] = a;\n                        }\n                    }\n                }\n            }\n        }\n        for (int i = 1; i <= T; i++) {\n            cout << ranking[i];\n            if (i+1 <= T) {\n                if (point[i] == point[i+1] && times[i] == times[i+1]) {\n                    cout << \"=\";\n                } else {\n                    cout << \",\";\n                }\n            }\n        }\n        cout << endl;\n    }\n\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<iostream>\n#include<vector>\n#include<string>\n#include<algorithm>\n#include<set>\n\nusing namespace std;\n\n#define reps(i,f,n) for(int i=f;i<int(n);i++)\n#define rep(i,n) reps(i,0,n)\n\ntypedef pair<int,int> pii;\ntypedef pair<pii,int> piii;\n\npiii mk(int a, int b, int c){\n\treturn piii(pii(a,b), c);\n}\n\nint main(){\n\tA:;\n\t\n\tint teemwrong[55][11]={0};\n\tint teemcost[55]={0};\n\tint teemac[55]={0};\n\t\n\tint M,T,P,R;\n\tcin>>M>>T>>P>>R;\n\t\n\tif(M==0&&T==0&&R==0&&P==0)return 0;\n\t\n\trep(i,R){\n\t\tint m,t,p,j;\n\t\tcin>>m>>t>>p>>j;\n\t\t\n\t\tif(j==0){\n\t\t\tteemac[t]++;\n\t\t\tteemcost[t]+=m+teemwrong[t][p]*20;\n\t\t}else{\n\t\t\tteemwrong[t][p]++;\n\t\t}\n\t}\n\t\n\tvector<piii> rank;\n\treps(i,1,T+1){\n\t\trank.push_back(mk(teemac[i], -teemcost[i], i));\n\t}\n\t\n\tsort(rank.begin(),rank.end());\n\treverse(rank.begin(),rank.end());\n\t\n\trep(i,rank.size()){\n\t\tif(i!=0){\n\t\t\tif(rank[i].first==rank[i-1].first)printf(\"=\");\n\t\t\telse printf(\",\");\n\t\t}\n\t\tprintf(\"%d\",rank[i].second);\n\t}puts(\"\");\n\t\n\t\n\tgoto A;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n#include <vector>\nstatic const int N = 2001;\nusing namespace std;\nstruct data{\n  int correctcnt,time,tnum;\n  bool operator<(const data& right)const{\n    if(correctcnt!=right.correctcnt) return correctcnt>right.correctcnt;\n    if(time!=right.time) return time<right.time;\n    return tnum>right.tnum;\n  }\n};\nint main(){\n  int M,T,P,R,i,j,m[N],t[N],p[N],in_j[N],incorrectcnt;\n  while(1){\n    cin >> M >> T >> P >> R;\n    vector<data> V(T);\n    if(M==0&&T==0&&P==0&&R==0) break;\n    for(i=0;i<R;i++){\n      cin >> m[i] >> t[i] >> p[i] >> in_j[i];\n    }\n    for(i=0;i<T;i++){\n      V[i].tnum=i+1;\n      V[i].correctcnt=V[i].time=0;\n    }\n    for(i=0;i<R;i++){\n      if(in_j[i]==0){\n    V[t[i]-1].correctcnt++;\n    incorrectcnt=0;\n    for(j=0;j<i;j++){\n      if(t[i]==t[j]&&p[i]==p[j]) incorrectcnt++;\n    }\n    V[t[i]-1].time+=m[i]+20*incorrectcnt;\n      }\n    }\n    sort(V.begin(),V.end());\n    for(i=0;i<T-1;i++){\n      cout << V[i].tnum;\n      if(V[i].correctcnt==V[i+1].correctcnt&&V[i].time==V[i+1].time) cout << '=';\n      else cout << ',';\n    }\n    cout << V[T-1].tnum << endl;\n  }  \n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n\nusing std::cin;\nusing std::cout;\nusing std::endl;\n\nstruct data_t {\n\tint ID;\n\tint correct;\n\tint time;\n\n\tbool operator<( const data_t& right ) const {\n\t\tif ( correct == right.correct) {\n\t\t\tif ( time == right.time ) {\n\t\t\t\treturn ( ID > right.ID );\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn ( time < right.time );\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\treturn ( correct > right.correct );\n\t\t}\n\t}\n};\n\n\nint main(void) {\n\tint M,T,P,R;\n\tcin >> M;\n\tcin >> T;\n\tcin >> P;\n\tcin >> R;\n\n\twhile (M!=0||T!=0||P!=0||R!=0) {\n\t\tstd::vector<data_t> data(T);\n\t\tstd::vector< std::vector<int> > wrong(T, std::vector<int>(P,0));\n\n\t\tfor (int i = 0; i < T; i++) {\n\t\t\tdata[i].ID = i+1;\n\t\t\tdata[i].time = 0;\n\t\t\tdata[i].correct = 0;\n\t\t}\n\n\t\tint m,t,p,r;\n\t\tfor (int i = 0; i < R; i++) {\n\t\t\tcin >> m;\n\t\t\tcin >> t;\n\t\t\tcin >> p;\n\t\t\tcin >> r;\n\t\t\t\n\t\t\tif (r == 0) {\n\t\t\t\tdata[t-1].correct++;\n\t\t\t\tdata[t-1].time += m + (20 * wrong[t-1][p-1]);\n\t\t\t}\n\t\t\telse {\n\t\t\t\twrong[t-1][p-1]++;\n\t\t\t}\n\t\t}\n\n\t\tstd::sort(data.begin(), data.end());\n\n\t\tfor (int i = 0; i < T; i++) {\n\t\t\tif (i == T-1) {\n\t\t\t\tcout << data[i].ID << endl;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif ( (data[i].correct == data[i+1].correct) && (data[i].time == data[i+1].time) ) {\n\t\t\t\t\tcout << data[i].ID << \"=\";\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tcout << data[i].ID << \",\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tcin >> M;\n\t\tcin >> T;\n\t\tcin >> P;\n\t\tcin >> R;\n\n\t}\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\n#define REP(i, n) for(int i = 0; i < (int) (n); i++)\n#define ALL(v) (v).begin(), (v).end()\n#define INF 1e9\n\nusing namespace std;\n\nstruct team{\n  int id;\n  array<int, 10> penalty;\n  int correct;\n  int score;\n  team(int i) : id(i), penalty({0}), correct(0), score(0) {}\n  bool operator<(const team &x)const{\n    if(correct < x.correct) return true;\n    if(correct > x.correct) return false;\n    if(score > x.score) return true;\n    if(score < x.score) return false;\n    if(id < x.id) return true;\n    return false;\n  }\n  bool operator==(const team &x)const{\n    if(correct == x.correct and score == x.score) return true;\n    return false;\n  }\n};\n\nint main(){\n  int m, t, r, p;\n  while(cin >> m >> t >> p >> r and m + t + p + r){\n    vector<team> teams;\n    REP(i, t) teams.emplace_back(i+1);\n    REP(i, r){\n      int mk, tk, pk, jk;\n      cin >> mk >> tk >> pk >> jk;\n      tk--; pk--;\n      if(jk) teams[tk].penalty[pk]++;\n      if(!jk) { teams[tk].correct++; teams[tk].score += teams[tk].penalty[pk] * 20 + mk; }\n    }\n    sort(ALL(teams));\n    reverse(ALL(teams));\n    REP(i, teams.size()){\n      cout << teams[i].id;\n      if(i < teams.size()-1) cout << (teams[i] == teams[i+1] ? \"=\" : \",\");\n    }\n    cout << endl;\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <queue>\n#include <algorithm>\nusing namespace std;\n\ntypedef pair<int, int> P;\n\nstruct Team {\n    int number=0;\n    int m = 0, p = 0;\n    vector<P> question;\n};\n\nbool comp_solved(const Team& e1, const Team& e2){\n    return e1.p > e2.p;\n}\nbool comp_m(const Team& e1, const Team& e2){\n    return e1.m < e2.m;\n}\nbool comp_n(const Team& e1, const Team& e2){\n    return e1.number > e2.number;\n}\n\nint main(void){\n    int M, T, P1, R;\n    int m[2001], t[2001], p[2001], j[2001];\n    while(cin >> M >> T >> P1 >> R){\n    \tif(M == 0 && T == 0 && P1 == 0 && R == 0){\n    \t\tbreak;\n    \t}\n    \tbool teamJoin[51];\n    \tfor(int i=0;i<T;i++){\n    \t\tteamJoin[i] = false;\n    \t}\n        vector<vector<Team> > a;\n        vector<vector<Team> > b;\n        Team team[51];\n        for(int i=0;i<R;i++){\n            cin >> m[i] >> t[i] >> p[i] >> j[i];\n            team[t[i]-1].number = t[i];\n            teamJoin[t[i]-1] = true;\n            if(j[i] == 0){\n                team[t[i]-1].p++;\n                team[t[i]-1].m += m[i];\n                if(!team[t[i]-1].question.empty()){\n                    int j=0;\n                    while(team[t[i]-1].question.begin() + j <= team[t[i]-1].question.end() ) {\n                        P ans = team[t[i]-1].question[j];\n                        if(ans.first == p[i]){\n                            team[t[i]-1].m += ans.second;\n                        }\n                        j++;\n                    }\n                }\n            }else{\n                team[t[i]-1].question.push_back(P(p[i], m[i]));\n            }\n        }\n        sort(team, team+T, comp_solved);\n        int cntE=0, cntS=0;\n        int minP = team[0].p;\n        for(int i=0;i<T;i++){\n            if(team[i].p == minP){\n                cntE++;\n            }else{\n                sort(team+cntS,team+cntE,comp_m);\n                cntS = cntE + 1;\n                cntE = cntS;\n                minP = team[i].p;\n            }\n        }\n\n        int minM = team[0].m;\n        minP = team[0].p;\n        cntE=0;\n        cntS=0;\n        for(int i=0;i<T;i++){\n            if(team[i].m == minM && minP == team[i].p){\n                cntE++;\n            }else{\n                sort(team+cntS,team+cntE,comp_n);\n                cntS = cntE + 1;\n                cntE = cntS;\n                minM = team[i].m;\n                minP = team[i].p;\n            }\n        }\n        \n        for(int i=0;i<T;i++){\n        \tif(team[i].number == 0 ){\n        \t\tfor(int j=T-1;j>=0;j--){\n        \t\t\tif(teamJoin[j] == false){\n        \t\t\t\tcout << j+1;\n        \t\t\t\tteamJoin[j] = true;\n        \t\t\t\tbreak;\n        \t\t\t}\n        \t\t}\n        \t}else{\n        \t\tcout << team[i].number;\n        \t}\n            if(i==T-1){\n                break;\n            }\n            if(team[i].p != team[i+1].p){\n                cout << \",\";\n            }else{\n                if(team[i].m != team[i+1].m){\n                    cout << \",\";\n                }else{\n                    cout << \"=\";\n                }\n            }\n        }\n        cout << endl;\n    }\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<vector>\n#include<map>\n#include<cstdlib>\n#include<cmath>\n#include<cstring>\n#include<string>\n#include<algorithm>\n#define INF 1e9\n\ntypedef long long int ll;\nusing namespace std;\n\nint wacount[51][11]={};\nint timesum[11]={},anssum[11];\n\nbool checkOver(int a,int b){\n\tif(anssum[a] <  anssum[b])return true;\n\tif( (anssum[a] == anssum[b]) && (timesum[a]>timesum[b]) )return true;\n\treturn false;\n}\n\nvoid babu_sort(int anssum[11],int timesum[11],int grad[11],int T){\n\tfor(int i=0;i<T;i++){\n\t\tfor(int j=0;j<T-1-i;j++){\n\t\t\tif( checkOver(grad[j],grad[j+1]) ){\n\t\t\t\tswap(grad[j],grad[j+1]);\n\t\t\t}\n\t\t}\n\t}\n}\n\n\n\nvoid out(int timesum[11],int grad[11],int T){\n\tvector<char> ans;\n\n\tans.push_back(grad[0] + '0');\n\tfor(int i=1;i<T;i++){\n\t\tif(anssum[ grad[i] ]==anssum[ grad[i-1] ]  &&  timesum[ grad[i] ] == timesum[ grad[i-1] ] ){\n\t\t\tans.push_back('=');\n\n\t\t\tif(grad[i] <10){\n\t\t\t\tans.push_back(grad[i]+'0');\n\t\t\t}\n\t\t\telse{\n\t\t\t\tans.push_back(grad[i]/10+'0');\n\t\t\t\tans.push_back(grad[i]%10+'0');\n\t\t\t}\n\t\t}\n\t\telse{\n\t\t\tans.push_back(',');\n\n\t\t\tif(grad[i] <10){\n\t\t\t\tans.push_back(grad[i]+'0');\n\t\t\t}\n\t\t\telse{\n\t\t\t\tans.push_back(grad[i]/10+'0');\n\t\t\t\tans.push_back(grad[i]%10+'0');\n\t\t\t}\n\t\t}\n\t}\n\tfor(int i=0;i<ans.size();i++){\n\t\tcout<<ans[i];\n\t}\n\tcout<<endl;\n}\n\nvoid solve(int anssum[11],int timesum[11],int M,int T,int P,int R){\n\tint grad[11];\n\tfor(int i=T;i>=1;i--){\n\t\tgrad[T-i]=i;\n\t}\n\tbabu_sort(anssum,timesum,grad,T);\n\tout(timesum,grad,T);\n}\n\n/*\nint wacount[51][11]={};\nint timesum[11]={},anssum[11];\n\n*/\n\nint main(){\n\twhile(1){\n\n\t\tfor(int i=0;i<11;i++){\n\t\t\tfor(int j=0;j<51;j++){\n\t\t\t\twacount[j][i]=0;\n\t\t\t}\n\t\t\ttimesum[i]=0;\n\t\t\tanssum[i]=0;\n\t\t}\n\n\t\tint M,T,P,R;\n\t\tint m,t,p,J;\n\t\tcin>>M>>T>>P>>R;\n\t\tif(M==0 && T==0 && P==0 && R==0)break;\n\t\tfor(int i=0;i<R;i++){\n\t\t\tcin>>m>>t>>p>>J;\n\t\t\tif(J!=0){\n\t\t\t\twacount[t][p]++;\n\t\t\t}\n\t\t\telse{\n\t\t\t\ttimesum[t]+=m+wacount[t][p]*20;\n\t\t\t\tanssum[t]++;\n\t\t\t}\n\t\t}\n\tsolve(anssum,timesum,M,T,P,R);\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include <list>\n#include<stack>\n#include<queue>\n#include <vector>\n#include <set>\n#include<algorithm>\n#include<math.h>\n#include<stdlib.h>\n#include<string>\n#include <functional>\n#include<fstream>\n#include<numeric>\n\n#define FOR(k,m,n) for(int (k)=(m);(k)<(n);(k)++)\n#define REP(i,n) FOR((i),0,(n))\n#define LL long long\n#define CLR(a) memset((a),0,sizeof(a))\n#define SZ(x) (int((x).size()))\n#define WAITING(str) int str;std::cin>>str;\n#define DEBUGING(str) cout<<str<<endl\nusing namespace std;\n\nconst LL MOD = 1000000007;// 10^9+7\nconst int INF = (1 << 30);\n\nstruct Team {\n\tTeam(int id_, int P) {\n\t\tid = id_;\n\t\ttimes.resize(P, INF);\n\t\tpenalties.resize(P, 0);\n\t}\n\n\tint id;\n\tvector<int> times;\n\tvector<int> penalties;\n\n\tpair<int, int> score() const{\n\t\tint solveNum = 0;\n\t\tint penalty = 0;\n\n\t\tfor (int time : times) {\n\t\t\tif (time != INF) {\n\t\t\t\tsolveNum++;\n\t\t\t\tpenalty += time;\n\t\t\t}\n\t\t}\n\t\tREP(i, times.size()) {\n\t\t\tif (times[i] != INF) {\n\t\t\t\tpenalty += 20 * penalties[i];\n\t\t\t}\n\t\t}\n\n\t\treturn { -solveNum,penalty };\n\t}\n\n\tconst bool operator < (const Team r)const {\n\t\tif (score() == r.score()) {\n\t\t\treturn id > r.id;\n\t\t}\n\t\telse {\n\t\t\treturn score() < r.score();\n\t\t}\n\t}\n};\n\n//デバッグ\nvoid debug()\n{\n\tint N;\n\tcin>>N;\n}\n\n\n//メイン関数\nint main()\n{\n\twhile (true) {\n\t\tint M, T, P, R;\n\t\tcin >> M >> T >> P >> R;\n\t\tif (M == 0)break;\n\n\t\tvector<Team> teams;\n\t\tREP(i, T) {\n\t\t\tteams.push_back(Team(i + 1, P));\n\t\t}\n\t\tREP(i, R) {\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tt--;\n\t\t\tp--;\n\t\t\tif (j == 0) {\n\t\t\t\tteams[t].times[p] = m;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tteams[t].penalties[p]++;\n\t\t\t}\n\t\t}\n\t\tsort(teams.begin(), teams.end());\n\n\t\t//output\n\t\tREP(i, T) {\n\t\t\tcout << teams[i].id;\n\t\t\tif (i != T - 1) {\n\t\t\t\tif (teams[i].score() == teams[i + 1].score()) {\n\t\t\t\t\tcout << \"=\";\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tcout << \",\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcout << endl;\n\t}\n\t//debug();\n\t\n\treturn 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\ntypedef pair<int, int> P;\nP info[51][11];\n//bool team[51];\nvector<P> v;\n\nmap<int, P> mp;\n//int D[51];\nvector<int> order;\n\n//自作の比較関数\nbool comp(P lhs, P rhs){\n\tif(lhs.first != rhs.first){\n\t\treturn lhs.first < rhs.first;\n\t}\n\tif(lhs.second != rhs.second){\n\t\treturn lhs.second > rhs.second;\n\t}\n}\n\nint main(){\nwhile(1){//start\t\n\t\n\t\n\tint M, T, P, R;\n\tcin >> M >> T >> P >> R;\n\tif(M == 0 and T == 0 and P == 0 and R == 0) break;\n\t\n\t//初期化\n\tfor(int i = 0; i < 51; i++){\n\t\tfor(int j = 0; j < 11; j++){\n\t\t\tinfo[i][j].first = 0;\n\t\t\tinfo[i][j].second = 0;\n\t\t}\n\t}\n\tbool team[51] = {0};\n\tint D[51] = {0};\n\tint OK[51] = {0};\n\t\n\t//データを格納\n\tfor(int i = 0; i < R; i++){\n\t\tint m, t, p, j;\n\t\tcin >> m >> t >> p >> j;\n\t\tteam[t] = true;\n\t\t\n\t\tif(j == 0){\n\t\t\tinfo[t][p].second = m + 20*info[t][p].first;\n\t\t\tOK[t-1] += 1;\n\t\t}\n\t\telse{\n\t\t\tinfo[t][p].first += 1;\n\t\t}\n\t}\n\t\n\t//vの内部はキーがチーム名(解いた数/合計時間)\n\tfor(int i = 1; i <= T; i++){\n\t\t\tint sum = 0, ok = 0;\n\t\t\tfor(int j = 0; j < 11; j++) sum += info[i][j].second;\n\t\t\t//for(int j = 0; j < 11; j++) if(info[i][j].second) ok += 1;\n\t\t\tint tmp = OK[i-1];\n\t\t\tv.push_back(make_pair(tmp, sum));\n\t\t\tmp[i] = make_pair(tmp, sum);\n\t}\n\t\n\tsort(v.begin(), v.end(), comp);\n\treverse(v.begin(), v.end());\n\t//debug\n\t//for(int i = 0; i < (int)v.size(); i++) cout << v[i].first << \" \" << v[i].second << endl;\n\t\n\t//重複カウンタを作成\n\tint d = 1;\n\tD[0] = 1;\n\tfor(int i = 1; i < (int)v.size(); i++){\n\t\tif(v[i-1].first == v[i].first and v[i-1].second == v[i].second){\n\t\t\tD[i] = d;\n\t\t}\n\t\telse{\n\t\t\td++;\n\t\t\tD[i] = d;\n\t\t}\n\t}\n\t\n\t//debug\n\t//for(int i = 0; i < (int)v.size(); i++) cout << D[i] << endl;\n\t\n\t//ソート結果にチーム名を割り当てる\n\tbool vis[51] = {false};\n\tfor(int i = 0; i < (int)v.size(); i++){\n\t\tfor(int j = (int)v.size(); 1 <= j; j--){\n\t\t\tif(v[i] == mp[j]){\n\t\t\t\tif(vis[j] == false){\n\t\t\t\t\torder.push_back(j);\n\t\t\t\t\tvis[j] = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//debug\n\t//for(int i = 0; i < (int)v.size(); i++) cout << order[i] << endl;\n\t\n\t//出力\n\t//まず重複数を記録する\n\tint num[51] = {0};\n\tfor(int i = 0; i < 51; i++) num[D[i]] += 1;\n\t\n\tstring ans = \"A\";\n\tint idx = 0;\n\tfor(int i = 1; i <= (int)order.size(); i++){\n\t\tif(num[i] == 0) break;\n\t\telse if(num[i] == 1){ \n\t\t\tans += to_string(order[idx]);\n\t\t\tidx++;\n\t\t}\n\t\telse{\n\t\t\tfor(int j = 0; j < num[i]; j++){\n\t\t\t\tif(j == num[i]-1) ans += to_string(order[idx]);\n\t\t\t\telse ans += to_string(order[idx]) + \"=\";\n\t\t\t\tidx++;\n\t\t\t}\n\t\t}\n\t\tans += \",\";\n\t}\n\t\n\tans.erase(ans.begin() + 0);\n\tans.erase(ans.end() - 1);\n\tcout << ans << endl;\n\t\n\t//初期化\n\tv.clear();\n\tmp.clear();\n\torder.clear();\n\t\n\t\n}//end\t\n\t\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "//include\n//------------------------------------------\n#include <vector>\n#include <list>\n#include <map>\n#include <set>\n#include <deque>\n#include <stack>\n#include <bitset>\n#include <algorithm>\n#include <functional>\n#include <numeric>\n#include <utility>\n#include <sstream>\n#include <iostream>\n#include <iomanip>\n#include <cstdio>\n#include <cmath>\n#include <cstdlib>\n#include <cctype>\n#include <string>\n#include <cstring>\n#include <ctime>\n#include <climits>\n#include <queue>\n\nusing namespace std;\n\n//typedef\n//------------------------------------------\ntypedef vector<int> VI;\ntypedef vector<VI> VVI;\ntypedef vector<string> VS;\ntypedef pair<int, int> PII;\ntypedef long long LL;\n\n//container util\n//------------------------------------------\n#define ALL(a)  (a).begin(),(a).end()\n#define RALL(a) (a).rbegin(), (a).rend()\n#define PB push_back\n#define MP make_pair\n#define SZ(a) int((a).size())\n#define EACH(i,c) for(typeof((c).begin()) i=(c).begin(); i!=(c).end(); ++i)\n#define EXIST(s,e) ((s).find(e)!=(s).end())\n#define SORT(c) sort((c).begin(),(c).end())\n\n//repetition\n//------------------------------------------\n#define FOR(i,a,b) for(int i=(a);i<(b);++i)\n#define REP(i,n)  FOR(i,0,n)\n\n//constant\n//--------------------------------------------\nconst double EPS = 1e-10;\nconst double PI  = acos(-1.0);\n\nstruct Score{\n  int c, s, p, t;\n  \n  Score(): c(0), s(0), p(0), t(0){}\n  bool operator>(const Score& rhs) const{\n\treturn c > rhs.c || (c == rhs.c &&\n\t\t\t\t\t\t (s < rhs.s || (s == rhs.s && t > rhs.t)));\n  }\n};\n\nbool eq(Score& s1, Score& s2){\n  return s1.c == s2.c && s1.s == s2.s;\n}\n\nint main(){\n  cin.tie(0);\n  ios_base::sync_with_stdio(false);\n\n  while(true){\n\tint M, T, P, R; cin >> M >> T >> P >> R; if(T == 0) break;\n\tint wrong[51][11];\n\tfill((int*)wrong, (int*)wrong+51*11, 0);\n\tvector<Score> sc(T);\n\tREP(i,T) sc[i].t = i+1;\n\tREP(r,R){\n\t  int m, tid, pid, res;\n\t  cin >> m >> tid >> pid >> res;\n\t  if(!res){\n\t\tsc[tid-1].s += m + 20 * wrong[tid-1][pid];\n\t\t++sc[tid-1].c;\n\t  }\n\t  else\n\t\t++wrong[tid-1][pid];\n\t}\n\n\tsort(ALL(sc), greater<Score>());\n\tcout << sc[0].t;\n\tfor(int i=1;i<T;++i){\n\t  if(eq(sc[i-1], sc[i])) cout << \"=\";\n\t  else cout << \",\";\n\t  cout << sc[i].t;\n\t}\n\tcout << endl;\n  }\n  \n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<string>\n#include<vector>\n#include<tuple>\n#include<set>\n#include<map>\n#include<algorithm>\nusing namespace std;\n\nstruct Record {\n  int tid, pid, time;\n  bool correct;\n};\n\nstruct Team {\n  Team() {\n    penalty = 0;\n  }\n  set<int> solved;\n  map<int, int> WA;\n  int penalty;\n};\n\n// Solved Problems, Penalty, Team ID\ntypedef tuple<int, int, int> Score;\n\nint main() {\n  int M, T, P, R;\n  while (cin >> M >> T >> P >> R && M) {\n    vector<Record> records(R);\n    for (int i = 0; i < R; i++) {\n      int m, t, p, j;\n      cin >> m >> t >> p >> j;\n      records[i].pid = --p;\n      records[i].tid = --t;\n      records[i].time = m;\n      records[i].correct = (j == 0);\n    }\n\n    vector<Team> teams(T);\n    for (Record r : records) {\n      if (teams[r.tid].solved.find(r.pid) != teams[r.tid].solved.end()) {\n        continue;\n      } else if (r.correct) {\n        teams[r.tid].solved.insert(r.pid);\n        teams[r.tid].penalty +=\n          teams[r.tid].WA[r.pid] * 20 + r.time;\n      } else {\n        teams[r.tid].WA[r.pid]++;\n      }\n    }\n\n    vector<Score> team_result(T);\n    for (int i = 0; i < T; i++) {\n      get<0>(team_result[i]) = -teams[i].solved.size();\n      get<1>(team_result[i]) = teams[i].penalty;\n      get<2>(team_result[i]) = -i;\n    }\n\n    sort(team_result.begin(), team_result.end());\n\n    for (int i = 0, len = team_result.size(); i < len; i++) {\n      Score s = team_result[i];\n      if (i > 0) {\n        Score p = team_result[i - 1];\n        cout << \n          (get<0>(p) == get<0>(s) && get<1>(p) == get<1>(s)?\"=\":\",\");\n      }\n      cout << -get<2>(s)+1;\n    }\n    cout << endl;\n  }\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstdio>\n#include<vector> \n#include<algorithm>\nusing namespace std;\n \nclass Present{\npublic:\n  int m;\n  int t;\n  int p;\n  int j;\n  Present():m(0),t(0),p(0),j(0){}\n};\nclass Team{\npublic:\n  int num;\n  int solve;\n  int time;\n  Team():num(0),solve(0),time(0){}\n};\n \nbool compare_solve(const Team& left, const Team& right){\n  return left.solve > right.solve;\n}\nbool compare_time(const Team& left, const Team& right){\n  return left.time <= right.time;\n}\n \nint main(){\n  int H, T, P, R;\n  for(;;){\n    scanf(\"%d %d %d %d\", &H, &T, &P, &R);\n    if( H == 0 && T == 0 && P == 0 && R == 0)\n      return 0;\n    vector<Present> pr(R);\n    for(int i = 0; i < R; i++){\n      scanf(\"%d %d %d %d\", &pr[i].m, &pr[i].t, &pr[i].p, &pr[i].j);\n    }\n    vector<Team> team(T);\n    for(int i = 0; i < T; i++){  \n      team[i].num = i + 1;\n      for(int j = 0; j < R; j++){\n    if(pr[j].t == team[i].num){\n      if(pr[j].j == 0){\n        team[i].solve += 1; \n        team[i].time += pr[j].m;\n        for(int k = 0; k < R; k++){\n          if(pr[k].t == team[i].num && pr[k].p == pr[j].p && pr[k].j != 0 )\n        team[i].time += 20;\n        }\n      }\n    }\n      }\n    }\n    sort(team.begin(),team.end(),compare_time);\n    stable_sort(team.begin(),team.end(),compare_solve);\n     \n    cout << team[0].num;\n    for(int i = 1; i < T; i++){\n      if(team[i-1].solve == team[i].solve && team[i-1].time == team[i].time)\n    cout << \"=\";\n      else\n    cout << \",\";\n      cout << team[i].num;\n    }\n    cout << endl;\n  }\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\n#include<queue>\nusing namespace std;\nint main(){\n  int m,t,p,r,a,b,c,d;\n  while(cin>>m>>t>>p>>r,t){\n    int th[55][2]={},w[55][11]={};\n    for(int i=0;i<r;i++){\n      cin>>a>>b>>c>>d;\n      if(d!=0)w[b][c]++;\n      else{\n\tth[b][0]++;\n\tth[b][1]+=w[b][c]*20+a;\n      }\n    }\n    priority_queue<pair<int,pair<int,int> > > ans;\n    for(int i=1;i<=t;i++){\n      ans.push(make_pair(th[i][0],make_pair(-th[i][1],i)));\n    }\n    while(1){\n      cout<<ans.top().second.second;\n      if(ans.size()==1)break;\n      int f=ans.top().first,sf=ans.top().second.first;\n      ans.pop();\n      if(ans.top().first==f&&ans.top().second.first==sf)cout<<\"=\";\n      else cout<<\",\";\n    }\n    cout<<endl;\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<algorithm>\n\nusing namespace std;\n\nint M,T,P,R;\nint m[2000],t[2000],p[2000],j[2000];\nstruct team{\n\tint n,s,t,w[2000];\n};\n\nbool comp(const team &t1,const team &t2){\n\tif(t1.t==t2.t && t1.s==t2.s)return t1.n>t2.n;\n\tif(t1.s==t2.s)return t1.t<t2.t;\n\treturn t1.s>t2.s;\n};\n\nteam dat[2001];\n\nint main(void){\n\twhile(1){\n\t\tscanf(\"%d%d%d%d\",&M,&T,&P,&R);\n\t\tif(M+T+R+P==0)break;\n\t\tmemset(dat,0,sizeof(dat));\n\t\tfor(int i=0;i<T;i++)dat[i].n=i+1;\n\t\tfor(int i=0;i<R;i++){\n\t\t\tscanf(\"%d%d%d%d\",&m[i],&t[i],&p[i],&j[i]);\n\t\t\tif(j[i]!=0){\n\t\t\t\tdat[t[i]-1].w[p[i]]++;\n\t\t\t}else{\n\t\t\t\tdat[t[i]-1].s++;\n\t\t\t\tdat[t[i]-1].t+=m[i]+dat[t[i]-1].w[p[i]]*20;\n\t\t\t}\n\t\t}\n\t\tsort(dat,dat+T,comp);\n\t\tprintf(\"%d\",dat[0].n);\n\t\tfor(int i=1;i<T;i++){\n\t\t\tif(dat[i-1].s==dat[i].s && dat[i-1].t==dat[i].t)printf(\"=\");\n\t\t\telse printf(\",\");\n\t\t\tprintf(\"%d\",dat[i].n);\n\t\t}\n\t\tprintf(\"\\n\");\n\t}\n\treturn 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#define N 2001\nusing namespace std;\nstruct team{\n  int tnum;\n  int correct;\n  int time;\n};\nint main(){\n  int m,t,p,r,im[N],it[N],ip[N],ij[N],incorrect,i,j;\n  struct team data[51];\n  while(1){\n    cin >> m >> t >> p >> r;\n    if(m==0&&t==0&&p==0&&r==0) break;\n    for(i=0;i<r;i++) cin >> im[i] >> it[i] >> ip[i] >> ij[i];\n    for(i=1;i<=t;i++){\n      data[i].tnum=i;\n      data[i].correct=0;\n      data[i].time=0;\n    }\n    for(i=0;i<r;i++){\n      if(ij[i]==0){\n\tdata[it[i]].correct++;\n      \tincorrect=0;\n\tfor(j=0;j<i;j++){\n\t  if(it[i]==it[j]&&ip[i]==ip[j]) incorrect++;\n\t}\n\tdata[it[i]].time=data[it[i]].time+incorrect*20+im[i];\n      }\n    }\n    for(i=1;i<=t;i++){\n      for(j=2;j<=t;j++){\n\tif(data[j].tnum>data[j-1].tnum) swap(data[j],data[j-1]);\n      }\n    }\n    for(i=1;i<=t;i++){\n      for(j=2;j<=t;j++){\n\tif(data[j].time<data[j-1].time) swap(data[j],data[j-1]);\n      }\n    }\n    for(i=1;i<=t;i++){\n      for(j=2;j<=t;j++){\n\tif(data[j].correct>data[j-1].correct) swap(data[j],data[j-1]);\n      }\n    }\n    for(i=1;i<t;i++){\n      cout << data[i].tnum;\n      if(data[i].correct==data[i+1].correct&&data[i].time==data[i+1].time)\n\tcout << '=';\n      else cout << ',';\n      if(i==t-1) cout << data[i+1].tnum;\n    }\n    cout << endl;\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<string>\nusing namespace std;\nint main(){\n\tint solved[50];\n\tint time[50][10];\n\tint team[50];\n\tint m,t,p,r;\n\twhile(true){\n\tcin>>m>>t>>p>>r;\n\tif(m==0&&t==0&&p==0&&r==0)\n\t\tbreak;\n\tfor(int i=0;i<t;i++){\n\t\tsolved[i]=0;\n\t\tfor(int j=0;j<p;j++)\n\t\t\ttime[i][j]=0;\n\t\tteam[i]=i+1;\n\t}\n\tfor(int i=0;i<r;i++){\n\t\tint a[4];\n\t\tfor(int j=0;j<4;j++)\n\t\t\tcin>>a[j];\n\t\tif(a[3]==0)\n\t\t\tsolved[a[1]-1]+=50000-time[a[1]-1][a[2]-1]-a[0];\n\t\telse\n\t\t\ttime[a[1]-1][a[2]-1]+=20;\n\t}\n\tfor(int i=0;i<t-1;i++){\n\t\tfor(int j=t-1;j>i;j--){\n\t\t\tif(solved[j]>solved[j-1]||(solved[j]==solved[j-1]&&team[j]>team[j-1])){\n\t\t\t\tint tmp=solved[j];\n\t\t\t\tsolved[j]=solved[j-1];\n\t\t\t\tsolved[j-1]=tmp;\n\t\t\t\ttmp=team[j];\n\t\t\t\tteam[j]=team[j-1];\n\t\t\t\tteam[j-1]=tmp;\n\t\t\t}\n\t\t}\n\t}\n\tcout<<team[0];\n\tfor(int i=1;i<t;i++){\n\t\tif(solved[i]==solved[i-1])\n\t\t\tcout<<\"=\";\n\t\telse\n\t\t\tcout<<\",\";\n\t\tcout<<team[i];\n\t}\n\tcout<<endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\ntypedef long long LL;\n\n//container util\n//------------------------------------------\n#define ALL(a)  (a).begin(),(a).end()\n#define RALL(a) (a).rbegin(), (a).rend()\n#define PB push_back\n#define MP make_pair\n#define DECIM8  fixed<<setprecision(8) \n#define SZ(a) int((a).size())\n#define SORT(c) sort((c).begin(),(c).end())\n\n//repetition\n//------------------------------------------\n#define FOR(i,a,b) for(int i=(a);i<(b);++i)\n#define REP(i,n)  FOR(i,0,n)\n\n//constant\n//--------------------------------------------\nconst double EPS = 1e-10;\nconst double PI  = acos(-1.0);\n\n//clear memory\n#define CLR(a) memset((a), 0 ,sizeof(a))\n\nusing namespace std;\nint main(void)\n{\n  for(;;){\n    int m,t,p,r;\n    cin >> m >> t >> p >> r;\n    if(!m&&!t&&!p&&!r) return 0;\n    vector<vector<int> > act;\n    // t,p: -20*wa\n    act.resize(t);\n    REP(i,t) act[i].assign(p,0);\n    REP(i,r){\n      int tid,pid,time,sta;\n      cin >> time >> tid >> pid >> sta;\n      time++;tid--;pid--;\n      if(act[tid][pid]>0) continue;\n      if(sta) act[tid][pid]-=20;\n      else act[tid][pid]=time-act[tid][pid];\n    }\n    vector<pair<pair<int,int>,int> > score;\n    // -AC,penalty,-team\n    REP(i,t) score.PB(MP(MP(0,0),-i-1));\n    REP(i,t) REP(j,p) if(act[i][j]>0){\n      score[i].first.first-=1;\n      score[i].first.second+=act[i][j];\n    }\n    SORT(score);\n    REP(i,t){\n      if(i){\n\tif(score[i-1].first==score[i].first) cout << '=';\n\telse cout << ',';\n      }\n      cout << -score[i].second;\n    }\n    cout << endl;\n  }\n}"
  },
  {
    "language": "C++",
    "code": "#include <stdio.h>\n\ntypedef struct{\n  int team;\n  int ans[10];\n  int time[10];\n  int anum;\n  int tnum;\n}data_t;\n\nvoid InsSort(data_t data[], int n){\n  data_t temp;\n  for(int i=1; i<n; i++){\n    for(int j=i; j>0 && data[j].team>data[j-1].team ;j--){\n      temp = data[j];\n      data[j] = data[j-1];\n      data[j-1] = temp;\n    }\n  }\n\n  for(int i=1; i<n; i++){\n    for(int j=i; j>0 && data[j].tnum<data[j-1].tnum ;j--){\n      temp = data[j];\n      data[j] = data[j-1];\n      data[j-1] = temp;\n    }\n  }\n  \n  for(int i=1; i<n; i++){\n    for(int j=i; j>0 && data[j].anum>data[j-1].anum ;j--){\n      temp = data[j];\n      data[j] = data[j-1];\n      data[j-1] = temp;\n    }\n  }\n}\n\nint main(void){\n  int M, T, P, R;\n  int m, t, p, j;\n  data_t data[50];\n  while(1){\n    scanf(\"%d%d%d%d\", &M, &T, &P, &R);\n    if(M==0 && T==0 && P==0 && R==0){\n      break;\n    }\n\n    for(int i=0; i<T; i++){\n      data[i].team = i+1;\n      data[i].anum = 0;\n      data[i].tnum = 0;\n      for(int j=0; j<10; j++){\n\tdata[i].ans[j] = 1;\n\tdata[i].time[j] = 0;\n      }\n    }\n\n    for(int i=0; i<R; i++){\n      scanf(\"%d%d%d%d\", &m, &t, &p, &j);\n      if(j == 0){\n\tdata[t-1].ans[p-1] = 0;\n\tdata[t-1].time[p-1] += m;\n      }else if(j == 1){\n\tdata[t-1].time[p-1] += 20;\n      }\n    }\n    for(int i=0; i<T; i++){\n      for(int j=0; j<P; j++){\n\tif(data[i].ans[j] == 0){\n\t  data[i].anum++;\n\t  data[i].tnum += data[i].time[j];\n\t}\n      }\n    }\n    InsSort(data, T);\n\n    printf(\"%d\", data[0].team);\n    for(int i=1; i<T; i++){\n      if(data[i].anum==data[i-1].anum && data[i].tnum==data[i].tnum){\n\tprintf(\"=\");\n      }else{\n\tprintf(\",\");\n      }\n      printf(\"%d\", data[i].team);\n    }\n    printf(\"\\n\");\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\n\nusing namespace std;\n\n#define rep(i, n) for (int i = 0; i < int(n); ++i)\n\nstruct Team {\n  Team() {ac = pe = 0; rep (i, 10) p[i] = 0;}\n  int ac, pe, num, p[10];\n  bool operator<(Team t) const {\n    if (ac != t.ac) return ac > t.ac;\n    if (pe != t.pe) return pe < t.pe;\n    return num > t.num;\n  }\n  bool operator==(Team t) {\n    if (ac != t.ac) return false;\n    if (pe != t.pe) return false;\n    return true;\n  }\n};\n\nint main() {\n  while (true) {\n    int M, T, P, R;\n    cin >> M >> T >> P >> R;\n    if (M == 0) break;\n    Team team[T];\n    rep (i, T) team[i].num = i + 1;\n    rep (_, R) {\n      int m, t, p, j;\n      cin >> m >> t >> p >> j;\n      --t;\n      --p;\n      if (j == 0) {\n\t++team[t].ac;\n\tteam[t].pe += team[t].p[p] * 20 + m;\n      } else {\n\t++team[t].p[p];\n      }\n    }\n    sort(team, team + T);\n    rep (i, T) {\n      if (i != 0) {\n\tcout << (team[i] == team[i -1] ? '=' : ',');\n      }\n      cout << team[i].num;\n    }\n    cout << endl;\n  }\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <string>\n#include <cstring>\n#include <algorithm>\n\n#define REP(i,k,n) for(int i=k;i<n;i++)\n#define rep(i,n) for(int i=0;i<n;i++)\n\nusing namespace std;\ntypedef long long ll;\n\nstruct Team {\n    int id,time,score;\n    int p[100];\n\n    void addscore() {\n        score++;\n    }\n\n    bool operator<(const Team &t) const {\n        if(score == t.score) {\n            if(time == t.time)  {\n                return id < t.id;\n            }\n            return time > t.time;\n        }\n        return score < t.score;\n    }\n};\n\nint main() {\n    int M,T,P,R;\n    while(cin >> M >> T >> P >> R) {\n        if(M == 0 && T ==  0 && P == 0 && R == 0) break;\n\n        vector<Team> v;\n        rep(i,T) {\n            Team team;\n            team.id = i;\n            team.score = 0;\n            team.time = 0;\n            memset(team.p,0,sizeof(team.p));\n            v.push_back(team);\n        }\n\n        rep(i,R) {\n            int m,t,p,j;\n            cin >> m >> t >> p >> j;\n            \n            t--;\n            p--;\n\n            if(j == 0) {\n                v[t].addscore();\n                v[t].time += m + v[t].p[p] * 20;\n            }\n            else {\n                v[t].p[p]++;\n            }\n        }\n\n        sort(v.begin(),v.end());\n        \n        // cout << \"--------- id output -------==\" << endl;\n        // REP(i,1,T) {\n        //     int id = T-i;\n        //     int id2 = T-i-1;\n        //\n        //     cout << id2 << \" \" << id << endl;\n        // }\n\n        cout << v[T-1].id+1;\n        REP(i,1,T) {\n            int id = T-i;\n            int id2 = T-i-1;\n            if(v[id2].score == v[id].score && v[id2].time == v[id].time) {\n                cout << \"=\";\n            }\n            else cout << \",\";\n\n            cout << v[T-1-i].id+1;\n        }\n\n        cout << endl;\n        \n    }\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n#include <vector>\nstatic const int N = 2001;\nusing namespace std;\nstruct data{\n  int correctcnt,time,tnum;\n  bool operator<(const data& right)const{\n    if(correctcnt!=right.correctcnt) return correctcnt>right.correctcnt;\n    if(time!=right.time) return time<right.time;\n    return tnum>right.tnum;\n  }\n};\nint main(){\n  int M,T,P,R,i,j,m[N],t[N],p[N],in_j[N],incorrectcnt;\n  while(1){\n    cin >> M >> T >> P >> R;\n    vector<data> V(T);\n    if(M==0&&T==0&&P==0&&R==0) break;\n    for(i=0;i<R;i++){\n      cin >> m[i] >> t[i] >> p[i] >> in_j[i];\n    }\n    for(i=0;i<T;i++){\n      V[i].tnum=i+1;\n      V[i].correctcnt=V[i].time=0;\n    }\n    for(i=0;i<R;i++){\n      if(in_j[i]==0){\n    V[t[i]-1].correctcnt++;\n    incorrectcnt=0;\n    for(j=0;j<i;j++){\n      if(t[i]==t[j]&&p[i]==p[j]) incorrectcnt++;\n    }\n    V[t[i]-1].time+=m[i]+20*incorrectcnt;\n      }\n    }\n    sort(V.begin(),V.end());\n    for(i=0;i<T-1;i++){\n      cout << V[i].tnum;\n      if(V[i].correctcnt==V[i+1].correctcnt&&V[i].time==V[i+1].time) cout << '=';\n      else cout << ',';\n    }\n    cout << V[T-1].tnum << endl;\n  }  \n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <stdio.h>\n#include <string.h>\n#include <algorithm>\n#include <iostream>\n#include <math.h>\n#include <assert.h>\n#include <vector>\n#include <queue>\n#include <string>\n#include <map>\n#include <set>\n\nusing namespace std;\ntypedef long long ll;\ntypedef unsigned int uint;\ntypedef unsigned long long ull;\nstatic const double EPS = 1e-9;\nstatic const double PI = acos(-1.0);\n\n#define REP(i, n) for (int i = 0; i < (int)(n); i++)\n#define FOR(i, s, n) for (int i = (s); i < (int)(n); i++)\n#define FOREQ(i, s, n) for (int i = (s); i <= (int)(n); i++)\n#define FORIT(it, c) for (__typeof((c).begin())it = (c).begin(); it != (c).end(); it++)\n#define MEMSET(v, h) memset((v), h, sizeof(v))\n\nstruct Team {\n  int index;\n  int cnts[10];\n  int solved;\n  int penalty;\n  Team() {;}\n  bool operator<(const Team &rhs) const {\n    if (solved != rhs.solved) { return solved < rhs.solved; }\n    if (penalty != rhs.penalty) { return penalty > rhs.penalty; }\n    return index < rhs.index;\n  }\n  void ac(int t, int p) {\n    solved++;\n    penalty += t + cnts[p] * 20;\n  }\n  void wa(int t, int p) {\n    cnts[p]++;\n  }\n};\n\nTeam teams[100];\nint M, T, P, R;\nint main() {\n  while (cin >> M >> T >> P >> R, M) {\n    MEMSET(teams, 0);\n    REP(i, T) { teams[i].index = i; }\n    REP(i, R) {\n      int m, t, p, j;\n      cin >> m >> t >> p >> j;\n      t--; p--;\n      if (j == 0) {\n        teams[t].ac(m, p);\n      } else {\n        teams[t].wa(m, p);\n      }\n    }\n    sort(teams, teams + T);\n    reverse(teams, teams + T);\n    REP(i, T) {\n      printf(\"%d\", teams[i].index + 1);\n      if (i != T - 1) {\n        if (teams[i].solved == teams[i + 1].solved && teams[i].penalty == teams[i + 1].penalty) {\n          printf(\"=\");\n        } else {\n          printf(\",\");\n        }\n      }\n    }\n    puts(\"\");\n  }\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nbool comp(pair<pair<int,int>,int> p1, pair<pair<int,int>,int> p2){\n\n    if(p1.first.first == p2.first.first){\n        if(p1.first.second == p2.first.second){\n            return p1.second < p2.second;\n        }\n        return p1.first.second > p2.first.second;\n    }\n    return p1.first.first < p2.first.second;\n\n}\n\nint main() {\n\n    while(1) {\n\n        int M,T,P,R;\n\n        cin >> M >> T >> P >> R;\n\n        if(M == 0 && T == 0 && P == 0 && R == 0) break;\n\n        pair<int,int> team[T+1]; //solve_num, time\n        pair<bool,int> try_progrums[T+1]; //is_tryed, lasttime\n\n        team[0] = make_pair(-1,-1);\n\n        for(int i=1; i<T+1; i++){\n            team[i] = make_pair(0,0);\n            try_progrums[i] = make_pair(false,0);\n        }\n\n        for(int i=0; i<R; i++){\n\n            int m, t, p, j;\n\n            cin >> m >> t >> p >>j;\n\n            if(try_progrums[t].first){\n                team[t].second += 20;\n            }\n\n            if(j == 0){\n                team[t].first++;\n                team[t].second += m;\n            }\n            else{\n                if(try_progrums[t].first){\n                    team[t].second += m - try_progrums[t].second;\n                    try_progrums[t].second = m;\n                }\n                else{\n                    try_progrums[t].first = true;\n                    try_progrums[t].second = m;\n                }\n            }\n        }\n\n        pair<pair<int,int>,int> team_result[T+1];\n\n        for(int i=0; i<T+1; i++){\n            team_result[i] = make_pair(make_pair(team[i].first,team[i].second),i);\n        }\n\n        sort(team_result,team_result+T+1,comp);\n\n        cout << team_result[T].second;\n\n        for(int i=T; i>1; i--){\n            if(team_result[i].first.first == team_result[i-1].first.first && team_result[i].first.second == team_result[i-1].first.second){\n                cout << '=' << team_result[i-1].second;\n            }\n            else{\n                cout << ',' << team_result[i-1].second;\n            }\n        }\n\n        cout << endl;\n\n\n\n\n    }\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\nusing namespace std;\nint main() {\n  int M, T, P, R, m, t, p, j;\n  while (cin >> M >> T >> P >> R, M) {\n    vector< vector<int> > V(T, vector<int>(P, 0)), Result(T, vector<int>(3, 0));\n    for (int i = 0; i < T; ++i) Result[i][2] = -i-1;\n    for (int i = 0; i < R; ++i) {\n      cin >> m >> t >> p >> j;\n      if (j) ++V[t-1][p-1];\n      else {\n\t--Result[t-1][0];\n\tResult[t-1][1] += V[t-1][p-1]*20+m;\n      }\n    }\n    sort(Result.begin(), Result.end());\n    cout << -Result[0][2];\n    for (int i = 1; i < T; ++i) {\n      if (Result[i-1][0] == Result[i][0] && Result[i-1][1] == Result[i][1]) cout << \"=\";\n      else cout << \",\";\n      cout << -Result[i][2];\n    }\n    cout << endl;\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<algorithm>\n#include<map>\nusing namespace std;\n\ntypedef pair<int, int> PP;\ntypedef pair<PP, int> Q;\n\nint main() {\n  int M, T, P, R, m[2000], t[2000], p[2000], j[2000];\n  while (1) {\n    scanf(\"%d%d%d%d\", &M, &T, &P, &R);\n    if (M == 0) break;\n    int d[500], lasttime[500], ptime[500], wa[500][2000];\n    for (int i = 0; i < T; i++) lasttime[i] = ptime[i] = d[i] = 0;\n    for (int i = 0; i < T; i++) for (int j = 0; j < R; j++) wa[i][j] = 0;\n    for (int i = 0; i < R; i++) {\n      scanf(\"%d%d%d%d\", &m[i], &t[i], &p[i], &j[i]);\n      t[i]--;\n      if (j[i] == 0) {\n        lasttime[t[i]] += m[i];\n        ptime[t[i]] += wa[t[i]][p[i]];\n        d[t[i]]++;\n      } else {\n        wa[t[i]][p[i]]++;\n      }\n    }\n    Q scores[500];\n    for (int i = 0; i < T; i++) scores[i] = Q(PP(d[i], -(lasttime[i] + ptime[i] * 20)), i + 1);\n    sort(scores, scores + T, greater<Q>());\n    printf(\"%d\", scores[0].second);\n    for (int i = 1; i < T; i++) printf(\"%c%d\", scores[i].first.first == scores[i - 1].first.first && scores[i].first.second == scores[i - 1].first.second ? '=' : ',', scores[i].second);\n    printf(\"\\n\");\n  }\n}\n\n"
  },
  {
    "language": "C++",
    "code": "\n\tint M, T, P, R;\n\tcin >> M >> T >> P >> R;\n\n\tvector<Team> teams(T, Team(P));\n\n\tfor (int i = 0; i < T; ++i) {\n\t\tteams[i].num = i + 1;\n\t}\n\n\tfor (int i = 0; i < R; ++i) {\n\t\tint m, t, p, j;\n\t\tcin >> m >> t >> p >> j;\n\n\t\t// judge is incorrect.\n\t\tif (j != 0) {\n\t\t\tteams[t - 1].incorrects[p - 1]++;\n\t\t\tcontinue;\n\t\t}\n\n\t\t// judge is correct.\n\t\tteams[t - 1].corrects[p - 1] = 1;\n\n\t\tint time = m + teams[t - 1].incorrects[p - 1] * 20;\n\t\tteams[t - 1].time = time;\n\t}\n\n\tsort(teams.begin(), teams.end());\n\n\tint time = 0;\n\tfor (int i = 0; i < teams.size(); ++i) {\n\t\tauto&& t = teams[i];\n\t\t\n\t\tint c = count(t.corrects.begin(), t.corrects.end(), 1);\n\t\t\n\n\t\tif (i == teams.size() - 1) {\n\t\t\tcout << t.num << endl;\n\t\t\tbreak;\n\t\t}\n\n\t\tauto&& nt = teams[i + 1];\n\n\t\tint nc = count(nt.corrects.begin(), nt.corrects.end(), 1);\n\n\t\tif (c == nc && nt.time == t.time) {\n\t\t\tcout << t.num << '=';\n\t\t}\n\t\telse {\n\t\t\tcout << t.num << ',';\n\t\t}\n\t}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\nusing namespace std;\n\nclass team{\npublic:\n\tint num, ans, time;\n\tteam(int n){\n\t\tnum = n;\n\t\tans = time = 0;\n\t}\n\tbool operator<(const team &t2)const{\n\t\tif (ans != t2.ans)\n\t\t\treturn ans > t2.ans;\n\t\telse if (time != t2.time)\n\t\t\treturn time < t2.time;\n\t\telse\n\t\t\treturn num > t2.num;\n\t}\n};\n\nint　main()\n{\n\tint M, T, P, R, m[2001], t[2001], p[2001], r[2001], before;\n\twhile (cin >> M >> T >> P >> R, (M || T || P || R)){\n\t\tvector<team> v;\n\t\tvector<team>::iterator pv;\n\t\t//入力\n\t\tfor (int i = 0; i < R; i++){\n\t\t\tcin >> m[i] >> t[i] >> p[i] >> r[i];\n\t\t}\n\n\t\t//各チームの時間\n\t\tfor (int i = 1; i <= T; i++){\n\t\t\tteam te = team(i);\n\t\t\tfor (int j = 0; j < R; j++){\n\t\t\t\t//正解時間の計算\n\t\t\t\tif (t[j] == i && r[j] == 0){\n\t\t\t\t\tte.time += m[j];\n\t\t\t\t\tte.ans++;\n\t\t\t\t\t//以前のペナルティを計算\n\t\t\t\t\tfor (int k = 0; k < j; k++){\n\t\t\t\t\t\tif (t[k] == i && p[k] == p[j]){\n\t\t\t\t\t\t\tte.time += 20;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tv.push_back(te);\n\t\t}\n\n\t\t//ソート\n\t\tsort(v.begin(), v.end());\n\t\tpv = v.begin();\n\t\tbefore = -1;\n\t\twhile (pv != v.end()){\n\t\t\tif (before == pv->time)\n\t\t\t\tcout << \"=\" << pv->num;\n\t\t\telse {\n\t\t\t\tif (pv == v.begin())\n\t\t\t\t\tcout << pv->num;\n\t\t\t\telse\n\t\t\t\t\tcout << \",\" << pv->num;\n\t\t\t\tbefore = pv->time;\n\t\t\t}\n\t\t\tpv++;\n\t\t}\n\t\tcout << endl;\n\t\tv.~vector();\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\ntypedef pair<int, int> P;\nP info[51][11];\n//bool team[51];\nvector<P> v;\n\nmap<int, P> mp;\n//int D[51];\nvector<int> order;\n\n//自作の比較関数\nbool comp(P lhs, P rhs){\n\tif(lhs.first != rhs.first){\n\t\treturn lhs.first < rhs.first;\n\t}\n\tif(lhs.second != rhs.second){\n\t\treturn lhs.second > rhs.second;\n\t}\n}\n\nint main(){\nwhile(1){//start\n\n\n\tint M, T, P, R;\n\tcin >> M >> T >> P >> R;\n\tif(M == 0 and T == 0 and P == 0 and R == 0) break;\n\n\t//初期化\n\tfor(int i = 0; i < 51; i++){\n\t\tfor(int j = 0; j < 11; j++){\n\t\t\tinfo[i][j].first = 0;\n\t\t\tinfo[i][j].second = 0;\n\t\t}\n\t}\n\tbool team[51] = {0};\n\tint D[51] = {0};\n\tint OK[51] = {0};\n\n\t//データを格納\n\tfor(int i = 0; i < R; i++){\n\t\tint m, t, p, j;\n\t\tcin >> m >> t >> p >> j;\n\t\tteam[t] = true;\n\n\t\tif(j == 0){\n\t\t\tinfo[t][p].second = m + 20*info[t][p].first;\n\t\t\tOK[t-1] += 1;\n\t\t}\n\t\telse{\n\t\t\tinfo[t][p].first += 1;\n\t\t}\n\t}\n\n\t//vの内部はキーがチーム名(解いた数/合計時間)\n\tfor(int i = 1; i <= T; i++){\n\t\t\tint sum = 0, ok = 0;\n\t\t\tfor(int j = 0; j < 11; j++) sum += info[i][j].second;\n\t\t\t//for(int j = 0; j < 11; j++) if(info[i][j].second) ok += 1;\n\t\t\tint tmp = OK[i-1];\n\t\t\tv.push_back(make_pair(tmp, sum));\n\t\t\tmp[i] = make_pair(tmp, sum);\n\t}\n\n\tsort(v.begin(), v.end(), comp);\n\treverse(v.begin(), v.end());\n\t//debug\n\t//for(int i = 0; i < (int)v.size(); i++) cout << v[i].first << \" \" << v[i].second << endl;\n\n\t//重複カウンタを作成\n\tint d = 1;\n\tD[0] = 1;\n\tfor(int i = 1; i < (int)v.size(); i++){\n\t\tif(v[i-1].first == v[i].first and v[i-1].second == v[i].second){\n\t\t\tD[i] = d;\n\t\t}\n\t\telse{\n\t\t\td++;\n\t\t\tD[i] = d;\n\t\t}\n\t}\n\n\t//debug\n\t//for(int i = 0; i < (int)v.size(); i++) cout << D[i] << endl;\n\n\t//ソート結果にチーム名を割り当てる\n\tbool vis[51] = {false};\n\tfor(int i = 0; i < (int)v.size(); i++){\n\t\tfor(int j = (int)v.size(); 1 <= j; j--){\n\t\t\tif(v[i] == mp[j]){\n\t\t\t\tif(vis[j] == false){\n\t\t\t\t\torder.push_back(j);\n\t\t\t\t\tvis[j] = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t//debug\n\t//for(int i = 0; i < (int)v.size(); i++) cout << order[i] << endl;\n\n\t//出力\n\t//まず重複数を記録する\n\tint num[51] = {0};\n\tfor(int i = 0; i < 51; i++) num[D[i]] += 1;\n\n\tstring ans = \"A\";\n\tint idx = 0;\n\tfor(int i = 1; i <= (int)order.size(); i++){\n\t\tif(num[i] == 0) break;\n\t\telse if(num[i] == 1){\n\t\t\tans += to_string(order[idx]);\n\t\t\tidx++;\n\t\t}\n\t\telse{\n\t\t\tfor(int j = 0; j < num[i]; j++){\n\t\t\t\tif(j == num[i]-1) ans += to_string(order[idx]);\n\t\t\t\telse ans += to_string(order[idx]) + \"=\";\n\t\t\t\tidx++;\n\t\t\t}\n\t\t}\n\t\tans += \",\";\n\t}\n\n\tans.erase(ans.begin() + 0);\n\tans.erase(ans.end() - 1);\n\tcout << ans << endl;\n\n\t//初期化\n\tv.clear();\n\tmp.clear();\n\torder.clear();\n\n\n}//end\n\n\treturn 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n#define rep(i,n) for(int i=0;i<(int)n;++i)\n#define fi first\n#define se second\n#define mp make_pair\n#define pb push_back\n#define ALL(x) x.begin(),x.end()\n\nstruct team {\n    int id, pro, tm;\n    team(int id, int pro, int tm) : id(id), pro(pro), tm(tm) {}\n    bool operator < (const team& a) const {\n\tif (pro != a.pro) { return pro < a.pro; }\n\tif (tm != a.tm) { return tm > a.tm; }\n\tif (id != a.id) { return id < a.id; }\n    }\n};\n\nvector<team> vec;\n\nint M, T, P, R;\nint pn[50][10];\nint ac[50][10];\n\nint main() {\n    while (scanf(\"%d %d %d %d\", &M, &T, &P, &R), M) {\n\tvec.clear();\n\tmemset(pn, 0, sizeof(pn));\n\tmemset(ac, 0, sizeof(ac));\n\n\trep(i, R) {\n\t    int m, t, p, j;\n\t    scanf(\"%d %d %d %d\", &m, &t, &p, &j);\n\t    --t; --p;\n\t    if (j) ++pn[t][p];\n\t    else ac[t][p] = m;\n\t}\n\n\trep(i, T) {\n\t    int sol = 0, tm = 0;\n\t    rep(j, P) {\n\t\tif (!ac[i][j]) continue;\n\t\t++sol;\n\t\ttm += ac[i][j] + pn[i][j] * 20;\n\t    }\n\t    vec.push_back(team(i + 1, sol, tm));\n\t}\n\n\tsort(ALL(vec));\n\treverse(ALL(vec));\n\n\tint i;\n\tfor (i = 0; i < T; ++i) {\n\t    if (i) printf(\",\");\n\t    team &tt = vec[i];\n\t    int j = i;\n\n\t    while (j + 1 < T && vec[j + 1].pro == vec[i].pro && vec[j + 1].tm == vec[i].tm) ++j;\n\n\t    for (int k = i; k <= j; ++k) {\n\t\tif (k != i) printf(\"=\");\n\t\tprintf(\"%d\", vec[k].id);\n\t    }\n\t    i = j;\n\t}\n\tputs(\"\");\n    }\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define chmin(a, b) ((a)=min((a), (b)))\n#define chmax(a, b) ((a)=max((a), (b)))\n#define fs first\n#define sc second\n#define eb emplace_back\nusing namespace std;\n\ntypedef long long ll;\ntypedef pair<int, int> P;\ntypedef tuple<int, int, int> T;\n\nconst ll MOD=1e9+7;\nconst ll INF=1e18;\n\nint dx[]={1, -1, 0, 0};\nint dy[]={0, 0, 1, -1};\n\n\n\nint main(){\n\tint M,T,P,R;\n\twhile(1){\n\t\tcin >> M >> T >> P >> R;\n\t\tif(M == 0) break;\n\t\tint sum[55][15] = {};\n\t\tint passed[56] = {};\n\t\tint solved[56] = {};\n\t\tfor(int i = 0;i < R;i++){\n\t\t\tint m,t,p,j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tif(j == 0){\n\t\t\t\tpassed[t] += m + sum[t][p];\n\t\t\t\tsolved[t]++;\n\t\t\t}else{\n\t\t\t\tsum[t][p] += 20;\n\t\t\t}\n\t\t}\n\t\tint ban = 0;\n\t\tint ch[55] = {};\n\t\twhile(ban != T){\n\t\t\tif(ban != 0) cout << \",\";\n\t\t\tint max_sol = -1,min_time = 1000000;\n\t\t\tfor(int i = 1;i <= T;i++){\n\t\t\t\tif(ch[i] == 0 && solved[i] > max_sol){\n\t\t\t\t\tmax_sol = solved[i];\n\t\t\t\t\tmin_time = passed[i];\n\t\t\t\t}else if(ch[i] == 0 && solved[i] == max_sol && passed[i] < min_time){\n\t\t\t\t\tmin_time = passed[i];\n\t\t\t\t}\n\t\t\t}\n\t\t\tint douritu = 0;\n\t\t\tfor(int i = T;i >= 1;i--){\n\t\t\t\tif(ch[i] == 0 && solved[i] == max_sol && passed[i] == min_time){\n\t\t\t\t\tban++;\n\t\t\t\t\tch[i] = 1;\n\t\t\t\t\tif(douritu == 0){\n\t\t\t\t\t\tcout << i;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tcout << \"=\" << i;\n\t\t\t\t\t}\n\t\t\t\t\tdouritu++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcout << endl;\n\t\t\n\t\t\n\t}\n\n\n\n\n}\n\t\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\nusing namespace std;\ntypedef struct mtpj{\n  int No,time,ACcnt,WAcnt[11];\n  bool AC[11];\n  static bool comp(const mtpj& hm,const mtpj& hmhm){\n    if(hm.ACcnt!=hmhm.ACcnt) return hm.ACcnt>hmhm.ACcnt;\n    if(hm.time!=hmhm.time) return hm.time<hmhm.time;\n    return hm.No>hmhm.No;\n  }\n}P;\nP p[50];\nint main(){\n  int M,T,P,R;\n  int m,t,q,J;\n  int TEcnt;\n  while(cin >> M >> T >> P >> R && M|T|P|R){\n    TEcnt = 0;\n    for(int i=1;i<=T;i++){\n      p[i].time=p[i].ACcnt=0,p[i].No=i;\n      for(int j=1;j<=10;j++) p[i].WAcnt[j]=0,p[i].AC[j]=false;\n    }\n\n    for(int i=0;i<R;i++){\n      cin >> m >> t >> q >> J;\n      if(p[t].AC[q])continue;\n      if(J==0){ //AC\n\tp[t].AC[q] = true;\n\tp[t].ACcnt++;\n\tp[t].time += p[t].WAcnt[q]*20 + m;\n      }else p[t].WAcnt[q]++; //WA\n    }\n    sort(p+1,p+T+1,mtpj::comp);\n    for(int i=1;i<=T;i++){\n      if(p[i-1].time==p[i].time && p[i-1].ACcnt==p[i].ACcnt&&i!=1){\n\tcout << \"=\";\n      }else if(i!=1){\n\tcout << \",\";\n      }\n      cout << p[i].No;\n    }\n    cout << endl;\n  }\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<vector>\n#include<algorithm>\n#include<cctype>\n#include<utility>\n#include<string>\n#include<cmath>\n#include<cstring>\n#include<queue>\n#include<map>\n#include<queue>\n\n#define REP(i, n) for(int i = 0;i < n;i++)\n#define REPR(i, n) for(int i = n;i >= 0;i--)\n#define FOR(i, m, n) for(int i = m;i < n;i++)\n#define FORR(i, m, n) for(int i = m;i >= n;i--)\n#define SORT(v, n) sort(v, v+n);\n#define VSORT(v) sort(v.begin(), v.end());\n#define llong long long\n#define pb(a) push_back(a)\n#define INF 1000000007\nusing namespace std;\ntypedef pair<int, int> P;\ntypedef pair<llong, llong> LP;\ntypedef pair<int, P> PP;\ntypedef pair<llong, LP> LPP;\ntypedef long long int ll;\nll dx[4] = {1,0,0,-1};\nll dy[4] = {0,1,-1,0};\n\n#define ARRAY_MAX 1005\n\ntypedef struct data{\n\n    int team_number;\n    int number;//順位\n    int penalty[2][15];//penalty[WA回数][解けたかどうか]\n    int ac_sum;//AC数\n    int passed_time;//経過時間\n\n}DATA;\n\n\nbool comp(const DATA& a,const DATA& b){\n    //昇順ソート\n    if(a.ac_sum == b.ac_sum){\n        //AC数が同じ\n        if(a.passed_time == b.passed_time){\n            //AC数も時間も同じ場合は順位は同じだが、並べる順番がチーム番号の大きい順のため\n            return a.team_number > b.team_number;\n        }else{\n            return a.passed_time < b.passed_time;\n        }\n    }else{\n        //AC数が同じ場合はAC数の大きい方が順位が先\n        return a.ac_sum > b.ac_sum;\n    }\n\n\n\n}\n\n\nint main(){\n\n    int M,T,P,R;\n    while(cin >> M >> T >> P >> R,M){\n\n        vector<DATA> a(T);\n        \n        REP(i,T){\n            //チーム番号の格納、WAテーブルの初期化\n            a[i].team_number = i+1;\n            REP(j,2){\n                REP(k,15){\n                    a[i].penalty[j][k] = 0;\n                }\n            }\n        }\n\n        int m,t,p,j;\n        REP(i,R){\n            //各チームのデータの整理\n            cin >> m >> t >> p >> j;\n            if(j){\n                //WAの場合\n                a[t-1].penalty[0][p-1]++;\n            }else{\n                a[t-1].penalty[1][p-1] = 1;//解けた\n                a[t-1].passed_time += m;//解くまでの時間はこの時点で足しておく\n                a[t-1].ac_sum++;//AC数を1つ増やす\n            }\n        }\n\n        //ペナルティ加算後の経過時間の計算\n        REP(i,T){\n            REP(j,P){\n                if(a[i].penalty[1][j] == 1){\n                    //解けているのでWA数×20を足す\n                    a[i].passed_time += a[i].penalty[0][j]*20;\n                }\n            }\n        }\n\n        sort(a.begin(),a.end(),comp);\n        \n        //順位付けをつける処理\n        a[0].number = 1;\n        for(int i = 1;i < T;i++){\n\n            if(a[i-1].ac_sum == a[i].ac_sum){\n                //AC数が同じ\n                if(a[i-1].passed_time == a[i].passed_time){\n                    //AC数も経過時間も同じ\n                    a[i].number = a[i-1].number;\n                }else{\n                    //経過時間が長い\n                    a[i].number = a[i-1].number + 1;\n                }\n            }else{\n                //AC数が少ない\n                a[i].number = a[i-1].number + 1;\n            }\n        }\n        //順位の表示処理\n        REP(i,T){\n            if(i == 0){\n                cout << a[i].team_number;\n            }else{\n                if(a[i-1].number < a[i].number){\n                    cout << \",\" << a[i].team_number;\n                }else{\n                    cout << \"=\" << a[i].team_number;\n                }\n            }\n        }\n        cout << endl;\n        a.shrink_to_fit();//メモリ開放\n    }\n\n\n\n\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define all(vec) vec.begin(),vec.end()\nusing namespace std;\ntypedef long long ll;\ntypedef pair<int,int> P;\nconst double EPS=1e-10;\nconst ll INF=1000000000;\nconst ll MAX=100010;\nint main(){\n    int M,T,P,R;\n    while(cin>>M>>T>>P>>R,M+T+P+R){\n        pair<pair<int,int>,int> v[60]={};\n        int wa[60][11]={};\n        int pn[60]={};\n        for(int i=0;i<R;i++){\n            int m,t,p,j;\n            cin>>m>>t>>p>>j;\n            t--;\n            if(j){\n                wa[t][p]++;\n                continue;\n            }\n            pn[t]+=wa[t][p]*20;\n            v[t].first.first--;\n            v[t].first.second=m;\n        }\n        for(int i=0;i<T;i++){\n            v[i].first.second+=pn[i];\n            v[i].second=-(i+1);\n        }\n        sort(v,v+T);\n        for(int i=0;i<T;i++){\n            cout<<-v[i].second;\n            if(i==T-1){\n                cout<<endl;\n                continue;\n            }\n            if(v[i].first==v[i+1].first){\n                cout<<\"=\";\n            }else{\n                cout<<\",\";\n            }\n        }\n    }\n}\n"
  },
  {
    "language": "C++",
    "code": "#include \"bits/stdc++.h\"\n\n#define REP(i,n) for(ll i=0;i<n;++i)\n#define RREP(i,n) for(ll i=n-1;i>=0;--i)\n#define FOR(i,m,n) for(ll i=m;i<n;++i)\n#define RFOR(i,m,n) for(ll i=n-1;i>=m;--i)\n#define ALL(v) (v).begin(),(v).end()\n#define PB(a) push_back(a)\n#define UNIQUE(v) v.erase(unique(ALL(v)),v.end());\n#define DUMP(v) REP(i, (v).size()) { cout << v[i]; if (i != v.size() - 1)cout << \" \"; else cout << endl; }\n#define INF 1000000001ll\n#define MOD 1000000007ll\n#define EPS 1e-9\n\nconst int dx[8] = { 1,1,0,-1,-1,-1,0,1 };\nconst int dy[8] = { 0,1,1,1,0,-1,-1,-1 };\n\n\nusing namespace std;\ntypedef long long ll;\ntypedef vector<int> vi;\ntypedef vector<ll> vl;\ntypedef vector<vi> vvi;\ntypedef vector<vl> vvl;\ntypedef pair<int, int> pii;\ntypedef pair<ll, ll> pll;\n///(?´????????`)(?´????????`)(?´????????`)(?´????????`)(?´????????`)(?´????????`)///\n\nint main() {\n\tcin.tie(0);\n\tios::sync_with_stdio(false);\n\twhile (1) {\n\t\tint M, T, P, R;\n\t\tcin >> M >> T >> P >> R;\n\t\tif (!M)break;\n\t\tvector<vector<bool>> ac(T, vector<bool>(P, false));\n\t\tvvi pen(T, vi(P, 0));\n\t\tvvi last(T, vi(P, 0));\n\t\tREP(i, R) {\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tif (j == 0) {\n\t\t\t\tac[t - 1][p - 1] = true;\n\t\t\t\tlast[t - 1][p - 1] = m;\n\t\t\t}\n\t\t\telse pen[t - 1][p - 1] += 20;\n\t\t}\n\t\tvector<pair<pii,ll>> point(T);\n\t\tREP(i, T) {\n\t\t\tint acc = 0, time = 0;\n\t\t\tREP(j, P) {\n\t\t\t\tif (ac[i][j]) {\n\t\t\t\t\ttime += last[i][j] + pen[i][j];\n\t\t\t\t\tacc--;\n\t\t\t\t}\n\t\t\t}\n\t\t\tpoint[i] = { { acc,time },-i };\n\t\t}\n\t\tsort(ALL(point));\n\t\tstring ret(2 * T - 1,'0');\n\t\tREP(i, T) {\n\t\t\tret[i * 2] = char((-1)*point[i].second)+'1';\n\t\t}\n\t\tREP(i, T - 1) {\n\t\t\tif (point[i].first ==point[i + 1].first) {\n\t\t\t\tret[i * 2 + 1] = '=';\n\t\t\t}\n\t\t\telse ret[i * 2 + 1] = ',';\n\t\t}\n\t\tcout << ret << endl;\n\t}\n\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<vector>\n#include<algorithm>\nusing namespace std;\nvoid swapp(int *,int *);\nint main(){\n  while(1){\n    int M,T,P,R;\n    cin >> M >> T >> P >> R;\n    if(M==0&&T==0&&P==0&&R==0)break;\n    int te[51];\n    int tr[51];\n    int tp[51]={};\n    int tt[51]={};\n    vector<vector<int> >ts(T+1,vector<int>(P+1,0));\n    for(int i=0;i<R;i++){\n      int m,t,p,j;\n      cin >> m >> t >> p >> j;\n      if(j==0){\n\ttt[t]+=ts[t][p]+m;\n\ttp[t]++;\n      }\n      else{\n\tts[t][p]+=20;\n      }\n    }\n    for(int i=1;i<=T;i++){\n      //\n      // cout << i<<\" \"<<tp[i]<< \" \"<< tt[i]<<endl;\n      //\n      tr[i]=i;\n      te[i]=0;\n    }\n    //sort\n    for(int i=1;i<=T;i++){\n      for(int j=1;j<T;j++){\n\tif(tp[j]<tp[j+1]){\n\t  //  cout << tr[j]<<\" \"<<tr[j+1]<<endl;\n\t  swapp(tr+j,tr+j+1);\n\t  swapp(te+j,te+j+1);\n\t  swapp(tt+j,tt+j+1);\n\t  swapp(tp+j,tp+j+1);\n\t  //  cout << tr[j]<<\" \"<<tr[j+1]<<endl;\n\t}\n\telse if(tp[j]==tp[j+1]){\n\t  if(tt[j]>tt[j+1]){\n\t    swapp(tr+j,tr+j+1);\n\t    swapp(te+j,te+j+1);\n\t    swapp(tt+j,tt+j+1);\n\t    swapp(tp+j,tp+j+1);\n\t  }\n\t  else if(tt[j]==tt[j+1]){\n\t    if(tr[j]<tr[j+1]){\n\t      swapp(tr+j,tr+j+1);\n\t      swapp(te+j,te+j+1);\n\t      swapp(tt+j,tt+j+1);\n\t      swapp(tp+j,tp+j+1);\n\t    }\n\t    te[j]=1;\n\t    \n\t  }\n\t}\n      }\n    }\n    // for(int i=1;i<=T;i++)  cout << i<<\" \"<<tp[i]<< \" \"<< tt[i]<<endl;\n    for(int i=1;i<=T;i++){\n\n      cout << tr[i];\n      if(i<T){\n\tif(te[i]==1){\n\t  cout << '=';\n\t}\n\telse cout << ',';\n      }\n    }\n    cout << endl;\n  }\n  return 0;\n}\nvoid swapp(int *m,int *a){\n  int b;\n  b=*m;\n  *m=*a;\n  *a=b;\n  return;\n}"
  },
  {
    "language": "C++",
    "code": "#define _CRT_SECURE_NO_WARNINGS\n#include \"bits/stdc++.h\"\n#if defined(_MSC_VER) || defined(ONLINE_JUDGE)\n#define getchar_unlocked _getchar_nolock\n#define putchar_unlocked _putchar_nolock\n#endif\n#define rep(i, n) for(int i=0; i<(n); ++i)\n#define FOR(i, m, n) for(int i=(m); i<(n); ++i)\n#define sz(x) ((int)(x).size())\n#define all(x) (x).begin(),(x).end()\n#define rall(x) (x).rbegin(),(x).rend()\n#define mp make_pair\n#define pb push_back\n\nusing namespace std;\nusing LL=long long;\nusing VI=vector<int>;\t\tusing VL=vector<LL>;\nusing VS=vector<string>;\tusing VD=vector<double>;\nusing VVI=vector<VI>;\t\tusing VVL=vector<VL>;\nusing PII=pair<int, int>;\tusing PLL=pair<LL, LL>;\nusing VP=vector<PII>;\t\tusing VPL=vector<PLL>;\nconst int inf = (int)1e9;\tconst double PI = acos(-1.0);\nconst LL MOD = 1000000007;\tconst double EPS = 1e-10;\nconst int dx[] = { -1,0,1,0,-1,-1,1,1 }, dy[] = { 0,1,0,-1,-1,1,-1,1 };\n\ntemplate<class T>void Sort(T& a) { sort(all(a)); }\ntemplate<class T>void RSort(T& a) { sort(rall(a)); }\ntemplate<class T>void Reverse(T& a) { reverse(all(a)); }\ntemplate<class T>void Unique(T& a) { a.erase(unique(all(a)), a.end()); }\ntemplate<class T>T Sorted(T a) { Sort(a); return a; }\ntemplate<class T>T RSorted(T a) { RSort(a); return a; }\ntemplate<class T>T Reversed(T a) { Reverse(a); return a; }\ntemplate<class T>T Uniqued(T a) { Unique(a); return a; }\ntemplate<class T>auto Max(const T& a) { return *max_element(all(a)); }\ntemplate<class T>auto Min(const T& a) { return *min_element(all(a)); }\ntemplate<class T>int MaxPos(const T& a) { return max_element(all(a)) - a.begin(); }\ntemplate<class T>int MinPos(const T& a) { return min_element(all(a)) - a.begin(); }\ntemplate<class T, class U>int Count(const T& a, const  U& v) { return count(all(a), v); }\ntemplate<class T, class U>int Find(const T& a, const U& v) { auto pos = find(all(a), v); return pos == a.end() ? -1 : pos - a.begin(); }\ntemplate<class T, class U>U Sum(const T& a, const U& v) { return accumulate(all(a), v); }\ntemplate<class T, class U>int Lower(const T& a, const U& v) { return lower_bound(all(a), v) - a.begin(); }\ntemplate<class T, class U>int Upper(const T& a, const U& v) { return upper_bound(all(a), v) - a.begin(); }\ntemplate<class T, class P>void RemoveIf(T& a, P f) { a.erase(remove_if(all(a), f), a.end()); }\ntemplate<class T>T Age(T n, T m) { return (n + m - 1) / m; }\ntemplate<class T>T Gcd(T n, T m) { return m ? Gcd(m, n % m) : n; }\ntemplate<class T>T Lcm(T n, T m) { return n / Gcd(n, m) * m; }\ntemplate<class T>T Pow(T a, T n) { T r = 1; while (n > 0) { if (n & 1)r *= a; a *= a; n /= 2; }return r; }\ntemplate<class T>T Powmod(T a, T n, T m = MOD) { T r = 1; while (n > 0) { if (n & 1)r = r * a % m, n--; else a = a * a % m, n /= 2; }return r; }\ntemplate<class T>bool chmax(T& a, const T& b) { if (a < b) { a = b; return 1; } return 0; }\ntemplate<class T>bool chmin(T& a, const T& b) { if (b < a) { a = b; return 1; } return 0; }\nstring operator*(string s, int n) { string ret; rep(i, n)ret += s; return ret; }\n\n// --- input --- //\ntemplate<class T>T InputF() { T ret; cin >> ret; return ret; }\ntemplate<> char InputF() {\n\tchar ret = '\\0', c = getchar_unlocked();\n\twhile (c != '\\0' && c != '\\n' && c != '\\t' && c != ' ') { ret = c; c = getchar_unlocked(); }\n\treturn ret;\n}\ntemplate<> string InputF() {\n\tstring ret; char c = getchar_unlocked();\n\twhile (c != '\\0' && c != '\\n' && c != '\\t' && c != ' ') { ret.push_back(c); c = getchar_unlocked(); }\n\treturn ret;\n}\ntemplate<> int InputF() {\n\tint ret = 0; bool neg = false; char c = getchar_unlocked();\n\tif (c == '-') { neg = true; c = getchar_unlocked(); }\n\twhile (isdigit(c)) { ret = ret * 10 + (c - '0'); c = getchar_unlocked(); }\n\treturn neg ? -ret : ret;\n}\ntemplate<> LL InputF() {\n\tLL ret = 0; bool neg = false; char c = getchar_unlocked();\n\tif (c == '-') { neg = true; c = getchar_unlocked(); }\n\twhile (isdigit(c)) { ret = ret * 10LL + (LL(c) - LL('0')); c = getchar_unlocked(); }\n\treturn neg ? -ret : ret;\n}\ntemplate<> double InputF() {\n\tdouble ret = 0, dp = 1; bool neg = false, adp = false; char c = getchar_unlocked();\n\tif (c == '-') { neg = true; c = getchar_unlocked(); }\n\twhile (isdigit(c) || c == '.') {\n\t\tif (c == '.')adp = true;\n\t\telse if (adp)ret += (c - '0') * (dp *= 0.1);\n\t\telse ret = ret * 10.0 + (c - '0');\n\t\tc = getchar_unlocked();\n\t}\n\treturn neg ? -ret : ret;\n}\nstring GetLine() {\n\tstring ret; char c = getchar_unlocked();\n\twhile (c != '\\0' && c != '\\n') { ret.push_back(c); c = getchar_unlocked(); }\n\treturn ret;\n}\ntemplate<class T>T Parse(string s) { return s; }\ntemplate<> char Parse(string s) { return s.front(); }\ntemplate<> string Parse(string s) { return s; }\ntemplate<> int Parse(string s) { return stoi(s); }\ntemplate<> LL Parse(string s) { return stoll(s); }\ntemplate<> double Parse(string s) { return stod(s); }\nVS InputB;\ntemplate<class T>struct InputC {\n\toperator T() { return InputF<T>(); }\n\tvector<T> operator[](int h) {\n\t\tvector<T> ret(h); rep(i, h)ret[i] = InputF<T>(); return ret;\n\t}\n\tvector<vector<T>> operator[](PII p) {\n\t\tint h, w; tie(h, w) = p; vector<vector<T>> ret(h, vector<T>(w));\n\t\trep(i, h)rep(j, w)ret[i][j] = InputF<T>(); return ret;\n\t}\n\tT operator()(int n) {\n\t\twhile (sz(InputB) <= n)InputB.pb(InputF<string>()); return Parse<T>(InputB[n]);\n\t}\n\tvector<T> operator()(int n, int h) {\n\t\tvector<T> ret(h); rep(i, h)ret[i] = operator()(i + n); return ret;\n\t}\n\tvector<vector<T>> operator()(int n, int h, int w) {\n\t\tvector<vector<T>> ret(h, vector<T>(w));\n\t\trep(i, h)rep(j, w)ret[i][j] = operator()(n + i * w + j); return ret;\n\t}\n};\nInputC<char> inc; InputC<string> ins; InputC<int> ini; InputC<LL> inl; InputC<double> ind;\n\n// --- output --- //\nstruct BoolStr {\n\tconst char* t, * f; BoolStr(const char* _t, const char* _f) :t(_t), f(_f) {}\n}Yes(\"Yes\", \"No\"), yes(\"yes\", \"no\"), YES(\"YES\", \"NO\"), Int(\"1\", \"0\");\nstruct DivStr {\n\tconst char* d, * l; DivStr(const char* _d, const char* _l) :d(_d), l(_l) {}\n}spc(\" \", \"\\n\"), no_spc(\"\", \"\\n\"), new_line(\"\\n\", \"\\n\"), comma(\",\", \"\\n\"), no_endl(\" \", \"\");\nclass Print {\n\tBoolStr B{ Yes }; DivStr D{ spc };\tvoid p(double v) { printf(\"%.20f\", v); }\n\tvoid p(int v) { printf(\"%d\", v); }\tvoid p(LL v) { printf(\"%lld\", v); }\n\tvoid p(char v) { putchar(v); }\t\tvoid p(bool v) { printf(v ? B.t : B.f); }\n\ttemplate<class T>void p(const T& v) { cout << v; }\n\ttemplate<class T, class U>void p(const pair<T, U>& v) { p(v.first); printf(D.d); p(v.second); }\n\ttemplate<class T>void p(const vector<T>& v) { rep(i, sz(v)) { if (i)printf(D.d); p(v[i]); } }\n\ttemplate<class T>void p(const vector<vector<T>>& v) { rep(i, sz(v)) { if (i)printf(D.l); p(v[i]); } }\n\tvoid p(const BoolStr& v) { B = v; } void p(const DivStr& v) { D = v; }\n\ttemplate<class T>bool isPrint(const T& v) {\n\t\treturn !is_same<BoolStr, T>::value && !is_same<DivStr, T>::value;\n\t}\npublic:\n\tvoid operator()() { printf(D.l); }\n\ttemplate<class H>void operator()(H&& h) {\n\t\tp(h); if (isPrint(h))printf(D.l); B = Yes; D = spc;\n\t}\n\ttemplate<class H, class...T>void operator()(H&& h, T&& ...t) {\n\t\tp(h); if (isPrint(h))printf(D.d); operator()(forward<T>(t)...);\n\t}\n}out;\n\n// --- answer --- //\ntemplate<class T>struct Answer {\n\tT min, max, sum; int cnt;\n\tAnswer() :min(numeric_limits<T>::max()), max(numeric_limits<T>::min()), sum(0), cnt(0) {}\n\tvoid operator=(T n) { min = std::min(min, n); max = std::max(max, n); sum += n; cnt++; }\n\toperator bool() { return cnt; }\n};\n\n// --- step --- //\nclass step {\n\tstruct It {\n\t\tint x, s; It(int _x, int _s) :x(_x), s(_s) { assert(s); }\n\t\tint operator*() { return x; } void operator++() { x += s; }\n\t\tbool operator!=(It& i) { return 0 < s ? x < i.x : x >= i.x; }\n\t}; int x, y, s;\npublic:\n\tstep(int _y, int _s = 1) :x(0 < _s ? 0 : _y), y(0 < _s ? _y : 0), s(_s) {}\n\tstep(int _x, int _y, int _s) :x(_x), y(_y), s(_s) {}\n\tIt begin() { return { x,s }; } It end() { return { y,s }; }\n};\n\n// --- dump --- //\n#if __has_include(\"dump.hpp\")\n#include \"dump.hpp\"\n#else\n#define dump(...) (void(0))\n#endif\n\n\nstruct Team {\n\tVI WA, AC;\n\tint P, i, cnt, time;\n\tTeam() {}\n\tTeam(int _p) :P(_p), WA(_p), AC(_p, -1) {}\n\tvoid set(int m, int p, int j) {\n\t\tp--;\n\t\tif (!j) {\n\t\t\tchmax(AC[p], m);\n\t\t} else {\n\t\t\tWA[p]++;\n\t\t}\n\t}\n\tvoid set_data() {\n\t\tcnt = count_if(all(AC), [](int x) {return x != -1; });\n\t\ttime = 0;\n\t\trep(i, P)if (AC[i] != -1) {\n\t\t\ttime += WA[i] * 20 + AC[i];\n\t\t}\n\t}\n};\nbool operator<(const Team& t1, const Team& t2) {\n\tif (t1.cnt != t2.cnt) {\n\t\treturn t1.cnt < t2.cnt;\n\t} else if (t1.time != t2.time) {\n\t\treturn t1.time > t2.time;\n\t} else {\n\t\treturn t1.i < t2.i;\n\t}\n}\nbool operator==(const Team& t1, const Team& t2) {\n\treturn t1.cnt == t2.cnt && t1.time == t2.time;\n}\n\nint main() {\n\twhile (true) {\n\t\tint M = ini, T = ini, P = ini, R = ini;\n\t\tif (!M && !T && !P && !R)break;\n\n\t\tvector<Team> team(T, Team(P));\n\t\trep(i, T)team[i].i = i + 1;\n\t\trep(i, R) {\n\t\t\tint m = ini, t = ini, p = ini, j = ini;\n\t\t\tteam[t - 1].set(m, p, j);\n\t\t}\n\t\trep(i, T)team[i].set_data();\n\t\tRSort(team);\n\t\tcout << team[0].i;\n\t\trep(i, T - 1) {\n\t\t\tif (team[i] == team[i + 1]) {\n\t\t\t\tputchar('=');\n\t\t\t} else {\n\t\t\t\tputchar(',');\n\t\t\t}\n\t\t\tcout << team[i + 1].i;\n\t\t}\n\t\tout();\n\t}\n}\n"
  },
  {
    "language": "C++",
    "code": "#define _CRT_SECURE_NO_WARNINGS\n\n#include<fstream>\n#include<iostream>\n#include <stdio.h>\n#include <functional>\n#include<string>\n#include<iomanip>\n#include<list>\n#include<math.h>\n#include<stack>\n#include<queue>\n#include<vector>\n#include<algorithm>\n#include<utility>\n\nusing namespace std;\n\nstring x(string s, const string cs, const string se) {\n\tint pos = 0;\n\twhile ((pos = s.find_first_of(se)) != string::npos) {\n\t\ts.replace(pos, 1, cs);\n\t}\n\treturn s;\n}\n\nstring y(string a) {\n\tint pos4 = 0, pos9 = 0;\n\ta = x(a, \"3\", \"5\");\n\ta = x(a, \"5\", \"6\");\n\ta = x(a, \"6\", \"7\");\n\ta = x(a, \"7\", \"8\");\n\tint pos = a.length();\n\tif ((pos4 = a.find_first_of(\"4\")) != string::npos && (pos9 = a.find_first_of(\"9\")) != string::npos)\n\t{\n\t\tif (pos4 > pos9) {//4>9\n\t\t\ta = a.replace(pos9, 1, \"7\");\n\t\t\tpos = pos9 + 1;\n\t\t}\n\t\telse {\n\t\t\ta = a.replace(pos4, 1, \"3\");\n\t\t\tpos = pos4 + 1;\n\t\t}\n\t}\n\telse if ((pos4 = a.find_first_of(\"4\")) != string::npos) {\n\t\ta = a.replace(pos4, 1, \"3\");\n\t\tpos = pos4 + 1;\n\t}\n\telse if ((pos9 = a.find_first_of(\"9\")) != string::npos) {\n\t\ta = a.replace(pos9, 1, \"7\");\n\t\tpos = pos9 + 1;\n\t}\n\twhile (pos != a.length()) {\n\t\ta = a.replace(pos, 1, \"7\");\n\t\tpos++;\n\t}\n\treturn a;\n}\n\nint n;\nint m;\nint aji[100000];\n\nint saiki(){\n\treturn 0;\n}\n\nint main(){\n\tint m, t, p, r;\n\twhile (cin >> m >> t >> p >> r && !(m == 0 && t == 0 && p == 0 && r == 0)){\n\t\tvector<pair<int, pair<int, int>>> juni; // テヲツュツ」ティツァツ」テヲツ閉ー テヲツ卍づゥツ鳴?テ」ツδ?」ツδシテ」ツδ?・ツ青?テァツュツ氾」ツ?暗」ツ?ョテ」ツ?淌」ツつ?」ツ?ョvector)\n\t\tint teamscore[50]; // テ・ツ青?」ツδ?」ツδシテ」ツδ?」ツ?ョテ」ツつケテ」ツつウテ」ツつ「\n\t\tint teamsecond[50]; // テ・ツ青?」ツδ?」ツδシテ」ツδ?」ツ?ョテヲツ卍づゥツ鳴?\n\t\tint teamincorr[50][2000]; // テ・ツ青?」ツδ?」ツδシテ」ツδ?・ツ青?・ツ閉湘ゥツ。ツ古」ツ?ョテゥツ鳴禿ゥツ?陛」ツ?暗」ツ?淌・ツ崢榲ヲツ閉ー\n\t\tint teamincorrcnt[50]; // テ・ツ青?」ツδ?」ツδシテ」ツδ?」ツ?ョテヲツュツ」ティツァツ」テ」ツ?療」ツ?淌・ツ閉湘ゥツ。ツ古」ツ?ョテゥツ鳴禿ゥツ?陛」ツ?暗」ツ?淌・ツ崢榲ヲツ閉ー\n\t\tfor (int i = 0; i < 50; i++) {\n\t\t\tteamscore[i] = 0;\n\t\t\tteamsecond[i] = 100000;\n\t\t\tteamincorrcnt[i] = 0;\n\t\t\tfor (int j = 0; j < 2000; j++) {\n\t\t\t\tteamincorr[i][j] = 0;\n\t\t\t}\n\t\t}\n\t\tfor (int i = 0; i < r; i++) {\n\t\t\tint mk, tk, pk, jk;\n\t\t\tcin >> mk >> tk >> pk >> jk;\n\t\t\tif (jk == 0) { // テヲツュツ」ティツァツ」\n\t\t\t\tteamscore[tk - 1]++; // テヲツュツ」ティツァツ」テヲツ閉ーテ」ツつ津・ツ「ツ療」ツつ?」ツ??\n\t\t\t\tteamincorrcnt[tk - 1] += teamincorr[tk - 1][pk];\n\t\t\t\tteamsecond[tk - 1] = 100000 - (mk + 20 * teamincorrcnt[tk - 1]);\n\t\t\t}\n\t\t\telse { // テゥツ鳴禿ゥツ?陛」ツ??\n\t\t\t\tteamincorr[tk - 1][pk]++;\n\t\t\t}\n\t\t}\n\t\tfor (int i = 0; i < t; i++) {\n\t\t\tjuni.push_back(make_pair(teamscore[i], make_pair(teamsecond[i], i + 1)));\n\t\t}\n\t\tsort(juni.begin(), juni.end());\n\n\t\tint score = -1;\n\t\tint jikan = -1;\n\t\tfor (int i = t - 1; i >= 0; i--) {\n\t\t\tif (i != t - 1) {\n\t\t\t\tif (score == juni[i].first && jikan == juni[i].second.first) {\n\t\t\t\t\tcout << \"=\";\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tcout << \",\";\n\t\t\t\t}\n\t\t\t}\n\t\t\tcout << juni[i].second.second;\n\t\t\tscore = juni[i].first;\n\t\t\tjikan = juni[i].second.first;\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nvoid solve(int m,int t,int p,int r){\n    int in;\n    vector<vector<int>> v;\n    v=vector<vector<int>>(r,vector<int>(4,0));\n    vector<vector<int>> miss;\n    miss=vector<vector<int>>(t,vector<int>(p,0));\n    vector<vector<int>> score;\n    score=vector<vector<int>>(t,vector<int>(2,0));\n    vector<vector<pair<int,int>>> rk;\n    rk=vector<vector<pair<int,int>>>(4,vector<pair<int,int>>(0));\n    for(int i=0;i<r;i++){\n        for(int j=0;j<4;j++){\n            cin>>in;\n            v[i][j]=in;\n        }\n    }\n    for(int i=0;i<r;i++){\n        if(v[i][3])miss[v[i][1]-1][v[i][2]-1]++;\n        else {\n            score[v[i][1]-1][0]++;\n            score[v[i][1]-1][1]=v[i][0]+miss[v[i][1]-1][v[i][2]-1]*20;\n        }\n    }\n    for(int i=t-1;i>=0;i--){\n        rk[score[i][0]].push_back(make_pair(i,score[i][1]));\n        //cout<<score[i][1]<<\" \";\n    }\n    for(int i=3;i>=0;i--){\n        int maxx=-1;\n        for(int j=0;j<rk[i].size();j++){\n            maxx=max(maxx,rk[i][j].second);\n        }\n        bool sw=false;\n        for(int j=0;j<=maxx;j++){\n            bool swc=false;\n            for(int k=0;k<rk[i].size();k++){\n                if(rk[i][k].second==j){\n                    if(swc)cout<<\"=\"<<rk[i][k].first+1;\n                    else {\n                        if(sw)cout<<\",\"<<rk[i][k].first+1;\n                        else{\n                            cout<<rk[i][k].first+1;\n                            sw=true;\n                        }\n                    }\n                    swc=true;\n                }\n            }\n        }\n        if(i&&sw)cout<<\",\";\n    }\n    cout<<endl;\n}\n\n\nint main(void){\n    int a,b,c,d;\n    while(cin>>a>>b>>c>>d,a){\n        solve(a,b,c,d);\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nstruct node{\n\tint cnt, totaltime, id;\n\tint ass[51];\n};\n\nbool cmp(node a, node b){\n\tif (a.cnt > b.cnt)return true;\n\telse if (a.cnt < b.cnt)return false;\n\telse if (a.totaltime < b.totaltime)return true;\n\telse if (a.totaltime > b.totaltime)return false;\n\telse return a.id > b.id;\n}\n\nint main()\n{\n\tint m, t, p, r, mk, tk, pk, jk;\n\twhile (cin >> m >> t >> p >> r){\n\t\tif (!m && !t && !p && !r)return 0;\n\t\tvector<node> vec(t);\n\t\tfor (int i = 0; i < t; ++i){\n\t\t\tvec[i].id = i + 1;\n\t\t\tvec[i].cnt = 0;\n\t\t\tvec[i].totaltime = 0;\n\t\t}\n\t\tfor (int i = 0; i < r; ++i)\n\t\t{\n\t\t\tcin >> mk >> tk >> pk >> jk;\n\t\t\tif (!jk){\n\t\t\t\t++vec[tk - 1].cnt;\n\t\t\t\tvec[tk - 1].totaltime += mk + vec[tk-1].ass[pk];\n\t\t\t}else{\n\t\t\t\tvec[tk-1].ass[pk] += 20;\n\t\t\t}\n\t\t}\n\t\tsort(vec.begin(), vec.end(), cmp);\n\t\tcout << vec[0].id;\n\t\tfor (int i = 1; i < vec.size(); ++i){\n\t\t\tif (vec[i - 1].cnt == 0 || (vec[i].cnt == vec[i - 1].cnt && vec[i].totaltime == vec[i - 1].totaltime)){\n\t\t\t\tputchar('=');\n\t\t\t}\n\t\t\telse putchar(',');\n\t\t\tcout << vec[i].id;\n\t\t}\n\t\tputchar('\\n');\n\t}\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <utility>\n#include <algorithm>\n#include <functional>\n\nusing namespace std;\n\nint time[51][11];\nbool memo[51][11];\n\nint main(void){\n  int M, T, P, R;\n  int m, t, p, j;\n  vector<pair<int, pair<int, int> > > v;\n\n  while(cin >> M >> T >> P >> R, M || T || P || R){\n    v.clear();\n\n    for(int i=1; i<=T; i++){\n      for(int k=1; k<=P; k++){\n        time[i][k] = 0;\n        memo[i][k] = false;\n      }\n    }\n\n    for(int i=0; i<R; i++){\n      cin >> m >> t >> p >> j;\n      if(j == 0){\n        time[t][p] += m;\n        memo[t][p] = true;\n      } else {\n        time[t][p] += 20;\n      }\n    }\n\n    for(int i=1; i<=T; i++){\n      int t = 0, c = 0;\n      for(int k=1; k<=P; k++){\n        if(memo[i][k] == true){\n          ++c;\n          t += time[i][k];\n        }\n      }\n\n      v.push_back(make_pair(c, make_pair(-1 * t, i)));\n    }\n    sort(v.begin(), v.end(), greater<pair<int, pair<int, int> > >());\n    \n    cout << v[0].second.second;\n    int tbuf = v[0].second.first, mbuf = v[0].first;\n    for(int i=1; i<v.size(); i++){\n      if(tbuf == v[i].second.first && mbuf == v[i].first){\n        cout << \"=\" << v[i].second.second;\n      } else {\n        cout << \",\" << v[i].second.second;\n        tbuf = v[i].second.first; mbuf = v[i].first;\n      }\n    }\n    cout << endl;\n  }\n\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nconst int MAX_T=51,MAX_P=11;\n\nint M,T,P,R,m,t,p,r;\nvector<vector<int>> result(MAX_T,vector<int>(3));\nvector<vector<int>> penalty(MAX_T,vector<int>(MAX_P));\n\nint main(){\n    cin.tie(0);\n    ios::sync_with_stdio(false);\n    while(cin >> M >> T >> P >> R,M){\n        for (int i=0;i<T;++i){\n            result[i][0]=result[i][1]=0,result[i][2]=i+1;\n            for (int j=0;j<P;++j) penalty[i][j]=0;\n        }\n        for (;R--;){\n            cin >> m >> t >> p >> r; --t,--p;\n            if (r) ++penalty[t][p];\n            else {\n                ++result[t][0];\n                result[t][1]-=m+penalty[t][p]*20;\n            }\n        }\n        sort(result.begin(),result.begin()+T);\n        reverse(result.begin(),result.begin()+T);\n        for (int i=0;i<T;++i){\n            if (i) cout << (result[i][0]==result[i-1][0]&&result[i][1]==result[i-1][1]?'=':',');\n            cout << result[i][2];\n        }\n        cout << '\\n';\n    }\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\nusing namespace std;\n\n#define rep(i,x,y) for(int (i)=(x);(i)<(y);(i)++)\n\ntypedef struct{\n  int teamid;\n  int seikai;\n  int time;\n  int fuseikai[10];\n}Team;\n\nint main()\n{\n  while(true){\n    int M,T,P,R;\n    cin>>M>>T>>P>>R;\n    if(M==0&&T==0&&P==0&&R==0){\n      break;\n    }\n\n    vector<Team> team(T);\n    rep(i,0,T){\n      team[i].teamid=i;\n      team[i].seikai=0;\n      team[i].time=0;\n      rep(j,0,10){\n        team[i].fuseikai[j]=0;\n      }\n    }\n\n    rep(i,0,R){\n      int m,t,p,j;\n      cin>>m>>t>>p>>j;\n\n      if(j==0){\n        team[t-1].seikai++;\n        team[t-1].time+=m;\n        if(team[t-1].fuseikai[p-1]!=0){\n          team[t-1].time+=team[t-1].fuseikai[p-1]*20;\n        }\n      }else{\n        team[t-1].fuseikai[p-1]++;\n      }\n    }\n\n    for(int i=team.size()-1;i>=0;i--){\n      for(int j=0;j<i;j++){\n        if(team[j+1].seikai>team[j].seikai){\n          swap(team[j],team[j+1]);\n        }else if(team[j].seikai==team[j+1].seikai){\n          if(team[j+1].time<team[j].time){\n            swap(team[j],team[j+1]);\n          }else if(team[j+1].time==team[j].time){\n            if(team[j].teamid<team[j+1].teamid){\n              swap(team[j],team[j+1]);\n            }\n          }\n        }\n      }\n    }\n\n    rep(i,0,T){\n      cout<<team[i].teamid+1;\n      if(i!=T-1){\n        if(team[i+1].seikai==team[i].seikai&&team[i+1].time==team[i].time){\n          cout<<\"=\";\n        }\n        else{\n          cout<<\",\";\n        }\n      }\n    }\n    cout<<endl;\n  }\n\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\nusing namespace std;\n \nint main()\n{\n    while(true){\n        int M, T, P, R;\n        cin >> M >> T >> P >> R;\n \n        if(M==0 && T==0 && P==0 && R==0)\n            break;\n \n        int CP[50], TT[50], PT[50][10];\n        for(int i=0; i<T; i++){\n            CP[i] = TT[i] = 0;\n            for(int j=0; j<P; j++)\n                PT[i][j] = 0;\n        }\n \n        for(int i=0; i<R; i++){\n            int m, t, p, j;\n            cin >> m >> t >> p >> j;\n \n            if(j==0){\n                CP[t-1]++;\n                TT[t-1] += (m+PT[t-1][p-1]);\n            }\n            else{\n                PT[t-1][p-1] += 20;\n            }\n        }\n \n        int tnow, tpre = -1;\n        bool flg[50];\n        for(int i=0; i<T; i++)\n            flg[i] = false;\n \n        for(int i=0; i<T; i++){\n            tnow = -1;\n            for(int j=0; j<T; j++){\n                if(flg[j])\n                    continue;\n \n                if(tnow==-1){\n                    tnow = j;\n                }\n                else{\n                    if(CP[j]>CP[tnow] || (CP[j]==CP[tnow] && TT[j]<=TT[tnow])){\n                        tnow = j;\n                    }\n                }\n            }\n \n            if(tpre!=-1){\n                if(CP[tnow]==CP[tpre] && TT[tnow]==TT[tpre])\n                    cout << '=';\n                else\n                    cout << ',';\n            }\n            cout << tnow+1;\n \n            flg[tnow] = true;\n            tpre = tnow;\n        }\n        cout << endl;\n    }\n \n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <map>\n#include <vector>\n#include <algorithm>\nusing namespace std;\n\nint main(){\n  int M,T,P,R;\n  while(cin >> M >> T >> P >> R){\n    if(M == 0 && T == 0 && P == 0 && R == 0)break;\n\n    int m,t,p,r;\n\n    map<pair<int,int>,int>mm;\n    pair<pair<int,int>,int>time[51];\n\n    for(int i=0; i<T; i++){\n      time[i].second = i;\n      time[i].first.first = time[i].first.second = 0;\n    }\n\n\n    for(int i=0; i<R; i++){\n      cin >> m >> t >> p >> r;\n      t--;\n      if(r != 0) mm[make_pair(t,p)]++;\n      else {\n\ttime[t].first.second -= (m + 20 * mm[make_pair(t,p)]);\n\ttime[t].first.first++;\n      }\n    }\n\n    sort(time,time+T);\n    reverse(time,time+T);\n\n\n    map<pair<int,int>,vector<int> >ans;\n\n    for(int i=0; i<T; i++){\n      ans[time[i].first].push_back(time[i].second);\n    }\n\n    bool flag[51];\n    fill(flag,flag+T,false);\n\n    for(int i=0; i<T; i++){\n      if(flag[time[i].second])continue;\n      vector<int> v = ans[time[i].first];\n      for(int j=0; j<v.size(); j++){\n\tif(flag[v[j]])continue;\n\tflag[v[j]] = true;\n\tif(v.size() == 1){\n\t  if(i == 0) cout << v[j]+1;\n\t  else cout << ',' << v[j]+1;\n\t} else {\n\t  if(i == 0){\n\t    if(j == 0) cout << v[j]+1;\n\t    else cout << '=' << v[j]+1;\n\t  } else {\n\t    if(j == 0) cout << ',' << v[j]+1;\n\t    else cout << '=' << v[j]+1;\n\t  }\n\t}\n      }\n    }\n    cout << endl;\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\ntypedef pair<int, int> P;\nP info[51][11];\n//bool team[51];\nvector<P> v;\n\nmap<int, P> mp;\n//int D[51];\nvector<int> order;\n\n//自作の比較関数\nbool comp(P lhs, P rhs){\n\tif(lhs.first != rhs.first){\n\t\treturn lhs.first < rhs.first;\n\t}\n\tif(lhs.second != rhs.second){\n\t\treturn lhs.second > rhs.second;\n\t}\n}\n\nint main(){\nwhile(1){//start\t\n\t\n\t\n\tint M, T, P, R;\n\tcin >> M >> T >> P >> R;\n\tif(M == 0 and T == 0 and P == 0 and R == 0) break;\n\t\n\t//初期化\n\tfor(int i = 0; i < 51; i++){\n\t\tfor(int j = 0; j < 11; j++){\n\t\t\tinfo[i][j].first = 0;\n\t\t\tinfo[i][j].second = 0;\n\t\t}\n\t}\n\tbool team[51] = {0};\n\tint D[51] = {0};\n\tint OK[51] = {0};\n\t\n\t//データを格納\n\tfor(int i = 0; i < R; i++){\n\t\tint m, t, p, j;\n\t\tcin >> m >> t >> p >> j;\n\t\tteam[t] = true;\n\t\t\n\t\tif(j == 0){\n\t\t\tinfo[t][p].second = m + 20*info[t][p].first;\n\t\t\tOK[t-1] += 1;\n\t\t}\n\t\telse{\n\t\t\tinfo[t][p].first += 1;\n\t\t}\n\t}\n\t\n\t//vの内部はキーがチーム名(解いた数/合計時間)\n\tfor(int i = 1; i <= T; i++){\n\t\t\tint sum = 0, ok = 0;\n\t\t\tfor(int j = 0; j < 11; j++) sum += info[i][j].second;\n\t\t\t//for(int j = 0; j < 11; j++) if(info[i][j].second) ok += 1;\n\t\t\tint tmp = OK[i-1];\n\t\t\tv.push_back(make_pair(tmp, sum));\n\t\t\tmp[i] = make_pair(tmp, sum);\n\t}\n\t\n\tsort(v.begin(), v.end(), comp);\n\treverse(v.begin(), v.end());\n\t//debug\n\t//for(int i = 0; i < (int)v.size(); i++) cout << v[i].first << \" \" << v[i].second << endl;\n\t\n\t//重複カウンタを作成\n\tint d = 1;\n\tD[0] = 1;\n\tfor(int i = 1; i < (int)v.size(); i++){\n\t\tif(v[i-1].first == v[i].first and v[i-1].second == v[i].second){\n\t\t\tD[i] = d;\n\t\t}\n\t\telse{\n\t\t\td++;\n\t\t\tD[i] = d;\n\t\t}\n\t}\n\t\n\t//debug\n\t//for(int i = 0; i < (int)v.size(); i++) cout << D[i] << endl;\n\t\n\t//ソート結果にチーム名を割り当てる\n\tbool vis[51] = {false};\n\tfor(int i = 0; i < (int)v.size(); i++){\n\t\tfor(int j = (int)v.size(); 1 <= j; j--){\n\t\t\tif(v[i] == mp[j]){\n\t\t\t\tif(vis[j] == false){\n\t\t\t\t\torder.push_back(j);\n\t\t\t\t\tvis[j] = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//debug\n\t//for(int i = 0; i < (int)v.size(); i++) cout << order[i] << endl;\n\t\n\t//出力\n\t//まず重複数を記録する\n\tint num[51] = {0};\n\tfor(int i = 0; i < 51; i++) num[D[i]] += 1;\n\t\n\tstring ans = \"A\";\n\tint idx = 0;\n\tfor(int i = 1; i <= (int)order.size(); i++){\n\t\tif(num[i] == 0) break;\n\t\telse if(num[i] == 1){ \n\t\t\tans += to_string(order[idx]);\n\t\t\tidx++;\n\t\t}\n\t\telse{\n\t\t\tfor(int j = 0; j < num[i]; j++){\n\t\t\t\tif(j == num[i]-1) ans += to_string(order[idx]);\n\t\t\t\telse ans += to_string(order[idx]) + \"=\";\n\t\t\t\tidx++;\n\t\t\t}\n\t\t}\n\t\tans += \",\";\n\t}\n\t\n\tans.erase(ans.begin() + 0);\n\tans.erase(ans.end() - 1);\n\tcout << ans << endl;\n\t\n\t//初期化\n\tv.clear();\n\tmp.clear();\n\torder.clear();\n\t\n\t\n}//end\t\n\t\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "// tsukasa_diary's programing contest code template\n#include <bits/stdc++.h>\nusing namespace std;\n// define\n#define for_(i,a,b) for(int i=a;i<b;++i)\n#define for_rev(i,a,b) for(int i=a;i>=b;--i)\n#define allof(a) a.begin(),a.end()\n#define minit(a,b) memset(a,b,sizeof(a))\n#define size_of(a) (int)a.size()\n// typedef\ntypedef long long lint;\ntypedef double Double;\ntypedef pair<int, int> pii;\n//\ntypedef vector< int > Array;\ntypedef vector< Array > Matrix;\ntypedef vector< Double > DArray;\ntypedef vector< DArray > DMatrix;\ntypedef vector< string > SArray;\ntypedef vector< pii > PArray;\n// popcount\ninline int POPCNT(int _x) { return __builtin_popcount(_x); }\ninline int POPCNT(lint _x) { return __builtin_popcountll(_x); }\n// inf\nconst int iINF = 1L << 30;\nconst lint lINF = 1LL << 60;\n// eps\nDouble EPS = 1e-9;\n// in range\ninline bool in_range(int _v, int _mx, int _mi) { return _mi <= _v && _v < _mx; }\ninline bool in_range(Double _v, Double _mi, Double _mx) { return -EPS < _v - _mi && _v - _mx < EPS; }\ninline bool in_range(int _x, int _y, int _W, int _H) { return 0 <= _x && _x < _W && 0 <= _y && _y < _H; }\n// neighbor clockwise\nconst int DX[4] = {0,1,0,-1}, DY[4] = {-1,0,1,0};\nconst int DX_[8] = {0,1,1,1,0,-1,-1,-1}, DY_[8] = {-1,-1,0,1,1,1,0,-1};\n\nint M, T, P, R;\n\nstruct Team {\n\tint correct, time, id;\n\tTeam(int _c, int _t, int _i) : correct(_c), time(_t), id(_i) {}\n};\n\nbool operator > (const Team& a, const Team& b) {\n\tif (a.correct == b.correct) {\n\t\tif (a.time == b.time) {\n\t\t\treturn a.id > b.id;\n\t\t}\n\t\treturn a.time < b.time;\n\t}\n\treturn a.correct > b.correct;\n}\n\nbool operator < (const Team& a, const Team& b) {\n\treturn b > a;\n}\n\nbool eq(const Team& a, const Team& b) {\n\treturn a.correct == b.correct && a.time == b.time;\n}\n\nvoid solve() {\n\tMatrix penalty(T, Array(P, 0));\n\tvector< vector< bool > > correct(T, vector< bool >(P, false));\n\t\n\tvector< Team > vt(T, Team(0, 0, 0));\n\tfor_(i,0,T) vt[i].id = i + 1;\n\t\n\tfor_(i,0,R) {\n\t\tint m, t, p, j; cin >> m >> t >> p >> j;\n\t\t--t; --p;\n\t\t\n\t\tif (correct[t][p]) continue;\n\t\t\n\t\tif (j == 0) {\n\t\t\t++vt[t].correct;\n\t\t\tvt[t].time += penalty[t][p] + m;\n\t\t\tcorrect[t][p] = true;\n\t\t} else {\n\t\t\tpenalty[t][p] += 20;\n\t\t}\n\t}\n\t\n\tsort(allof(vt), greater<Team>());\n\t\n\tfor_(i,0,T) {\n\t\tif (i > 0) {\n\t\t\tif (eq(vt[i - 1], vt[i])) cout << \"=\";\n\t\t\telse cout << \",\";\n\t\t}\n\t\t\n\t\tcout << vt[i].id;\n\t}\n\tcout << endl;\n}\n\nint main() {\n\twhile (cin >> M >> T >> P >> R, M) {\n\t\tsolve();\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstdio>\n#include<algorithm>\n#include<cmath>\n#include<vector>\n#include<map>\n#include<string>\nusing namespace std;\nstruct team{int m;\n                   int t;\n                   int p;\n                   int j;\n                   };\nint A[100000];\nvector<int>G;\nint main(){\n\tint M,T,P,R;\n\tvector<pair<int,int> > sum;\n\tcin>>M;\n\tcin>>T;\n\tcin>>P;\n\tcin>>R;\n\tint ms[R];\n    team A[R];\n    for(int i=0;i<R;i++){\n\t\tscanf(\"%d%d%d%d\",&A[i].m,&A[i].t,&A[i].p,&A[i].j);\n\t}\n\tfor(int i=0;i<T;i++){\n\t\tsum.push_back(make_pair(0,i));\n\t}\n\tfor(int i=0;i<T;i++){\n\t\tms[i]=0;\n\t\tfor(int k=0;k<R;k++){\n\t\t\tif(A[k].t==i){\n\t\t\t\tms[i]+=A[i].m;\n\t\t\t\tif(A[k].j==0){\n\t\t\t\t\tsum[i].first+=1;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tsort(sum.begin(),sum.end());\n    for(int i=0;i<T;i++){\n    \tif(i>0){\n    \tif(sum[i]==sum[i-1]){\n    \t\tprintf(\"=\")\n    \t}\n    \telse{\n    \t\tprintf(\" \")\n    \t}\n    \t}\n    \tprintf(\"%d\",sum[i].second);\n    }\n   }"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstring>\n#include <vector>\n#include <map>\nusing namespace std;\n\nstruct agg{\n  int sol,tim,num;\n  int wrg[11];\n};\n\nclass ctr{\npublic:\n  bool operator()(const agg& left,const agg& right)const{\n    if(left.sol == right.sol && left.tim == right.tim){\n      return left.num > right.num;\n    }\n    else if(left.sol == right.sol) return left.tim < right.tim;\n    else return left.sol > right.sol; \n  }\n};\n\nvoid init(int n,vector<agg> *trg){\n  for(int i=1;i<n+1;i++){\n    (*trg)[i].sol = 0;\n    (*trg)[i].tim = 0;\n    (*trg)[i].num = i;\n    memset((*trg)[i].wrg,0,sizeof((*trg)[i].wrg));\n  }\n}\n\nint main(){\n  int M,T,P,R;\n  while(cin >> M >> T >> P >> R,M||T||P||R){\n    vector<agg>info(T+1);\n    init(T,&info);\n\n    while(R--){\n      int m,t,p,j;\n      cin >> m >> t >> p >> j;\n      if(j == 0){\n\tinfo[t].tim += info[t].wrg[p] * 20 + m;\n\tinfo[t].sol++;\n      }\n      else info[t].wrg[p]++;\n    }\n\n    sort(info.begin()+1,info.end(),ctr());\n    for(int i=1;i<T;i++){\n      cout << info[i].num;\n      cout << (info[i].sol == info[i+1].sol && info[i+1].tim == info[i].tim ? '=' : ',');\n    }\n    cout << info[T].num <<  endl;\n  }\n}\n      "
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n#include <functional>\nusing namespace std;\n\n\n\nint main()\n{\n    while (1) {\n        int mm,m,tt,t,pp,p,rr,r;\n        cin >> mm >> tt >> pp >> rr;\n        \n        struct Teem{\n            int judge[10] = {0};\n        }teem[50];\n        \n        int sum[51] = {0};\n        int ans[51] = {0};\n        \n        for (int i = 0; i < rr; i++ ) {\n            cin >> m >> t >> p >> r;\n            \n            if (r == 0) {\n                sum[t] = sum[t] + m + teem[t].judge[p];\n                ans[t]++;\n            }else{\n                teem[t].judge[p] += 20;\n            }\n        }\n        \n        int max = 0;\n        vector<int> times = {0};\n        int count = 0;\n        \n        for (int i = 1; i < tt; i++ ) {\n            if (max == ans[i]) {\n                times.push_back(sum[i]);\n                count++;\n            }\n            if (max < ans[i]) {\n                max = ans[i];\n                times = {0};\n                times.push_back(sum[i]);\n                count=1;\n            }\n        }\n        sort(times.begin(), times.end(), greater<int>());\n        \n        int tmp1 = -1,tmp2 = -1;\n        for (int i = max; i > 0; i--) {\n            for (int k = count-1; k >= 0; k--) {\n                for (int m =tt; m > 0; m--) {\n                    if (i == ans[m]) {\n                        if (times[k] == sum[m]) {\n                            if (tmp2 == ans[m]) {\n                                if (tmp1 == sum[m]) {\n                                    cout << \"=\" ;\n                                }else{\n                                    cout << \",\" ;\n                                }\n                            }\n                            else if(tmp2 != -1 && tmp1 != -1){\n                                cout << \",\" ;\n                            }\n                            cout << m ;\n                            tmp1 = sum[m];\n                            tmp2 = ans[m];\n                            ans[m] = -1;\n                        }\n                    }\n                }\n            }\n\n            max = 0;\n            times = {0};\n            count = 0;\n            for (int x = 1; x < tt; x++ ) {\n                if (max == ans[x]) {\n                    times.push_back(sum[x]);\n                    count++;\n                }\n                if (max < ans[x]) {\n                    max = ans[x];\n                    times = {0};\n                    times.push_back(sum[x]);\n                    count=1;\n                }\n            }\n            sort(times.begin(), times.end(), greater<int>());\n        }\n        for (int i = tt; i > 0; i--) {\n            \n            if (ans[i] == 0) {\n                if (tmp2 == -1) {\n                    \n                }else {\n                    if (tmp2 == 0) {\n                        cout << \"=\";\n                    }else {\n                        cout << \",\";\n                    }\n                }\n                cout << i ;\n                tmp2 = 0;\n            }\n        }\n        cout << endl;\n        if (tmp1 == -1) {\n            break;\n        }\n    }\n    \n    \n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n#include <map>\n#include <vector>\nusing namespace std;\n\nclass Rank {\npublic:\n  Rank() {}\n  Rank(int s, int ti, int te) : s(s), ti(ti), te(te) {}\n  int s, ti, te;\n};\nbool comp (const Rank &r1, const Rank &r2) {\n  if(r1.s == r2.s && r1.s == 0) return r1.te < r2.te;\n  return r1.s!=r2.s ? r1.s<r2.s : (r1.ti!=r2.ti ? r1.ti<r2.ti : r1.te<r2.te);\n}\n\nint main() {\n  int m, t, p, j;\n  int M, T, P, R;\n  vector<Rank> rank;\n  while(cin >> M >> T >> P >> R && M+T+P+R) {\n    rank.clear();\n    int penal[55][12];\n    bool solved[55][12];\n\n    fill(penal[0], penal[52], 0);\n    fill(solved[0], solved[52], 0);\n\n    for(int ii = 0; ii < R; ii++) {\n      cin >> m >> t >> p >> j;\n      p--; t--;\n      if(j != 0) penal[t][p] += 20;\n      else penal[t][p] += m, solved[t][p] = true;\n    }\n    for(int i=0; i<T; i++) {\n      int sum = 0;\n      for(int j=0; j<P;j++) {\n\tif(solved[i][j]) sum += penal[i][j];\n      }\n      int ssum = 0;\n      for(int j=0; j<P; j++) {\n\tssum += solved[i][j];\n      }\n      rank.push_back(Rank(-ssum, sum,-i-1));\n    }\n    sort(rank.begin(), rank.end(), comp);\n    \n    bool flag = 0;\n    for(int i=0; i<rank.size(); i++) {\n      if(flag && rank[i-1].s == rank[i].s && rank[i-1].ti == rank[i].ti) cout << \"=\";\n      else if(flag) cout << \",\";\n      cout << -rank[i].te;\n      flag = 1;\n    }\n    cout << endl;\n  }\n  \n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <stack>\n#include <utility>\n#include <algorithm>\n\nusing namespace std;\ntypedef pair<int,int> mp;\n\nint main(){\n    while(true){\n        int m,t,p,r;\n        cin >> m >> t >> p >> r;\n        if(m==0)break;\n        vector<vector<int> > score(t,vector<int>(p,-1));\n        for(int i=0;i<r;i++){\n            int m1,t1,p1,j;\n            cin >> m1 >> t1 >> p1 >> j;\n            t1--;\n            p1--;\n            if(j!=0){\n                score[t1][p1]-=20;\n            }\n            else{\n                if(score[t1][p1]<-1){\n                    score[t1][p1]=m1-score[t1][p1]+1;\n                }\n                else{\n                    score[t1][p1]=m1;\n                }\n            }\n        }\n        vector<pair<mp,int> > pr(t);\n        pair<mp,int> temp;\n        for(int i=0;i<t;i++){\n            temp.first.first=0;\n            temp.first.second=0;\n            temp.second=-(i+1);\n            pr[i]=temp;\n            for(int j=0;j<p;j++){\n                if(score[i][j]>=0){\n                    temp.first.first--;\n                    temp.first.second+=score[i][j];\n                    pr[i]=temp;\n                }\n            }\n        }\n        sort(pr.begin(),pr.end());\n        for(int i=0;i<t;i++){\n            cout << -pr[i].second;\n            if(i<t-1 && pr[i].first==pr[i+1].first)cout << '=';\n            else if(i!=t-1)cout << ',';\n        }\n        cout << endl;\n\n    }\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nclass Team{\n  public:\n  int id;\n  int solvednum;\n  int penalty;\n  vector<bool> solved;\n  vector<int> WA;\n  Team(int id, int N){\n    this->id = id;\n    solvednum = 0;\n    penalty = 0;\n    solved.resize(N, false);\n    WA.resize(N, 0);\n  }\n  bool operator == (const Team &t)const{\n    return id == t.id;\n  }\n  bool operator < (const Team &t)const{\n    if(solvednum == t.solvednum){\n      if(penalty == t.penalty){\n        return id > t.id;\n      }\n      return penalty < t.penalty;\n    }\n    return solvednum > t.solvednum;\n  }\n  string toString(){\n    return to_string(id) + \" \" + to_string(solvednum) + \" \" + to_string(penalty);\n  }\n};\n\nint main(void){\n  ios::sync_with_stdio(false);\n  cin.tie(0);\n  int M, T, P, R;\n  while(cin >> M >> T >> P >> R, M | T | P | R){\n  vector<Team> teams;\n  for(int i = 0;  i < T; i++){\n    teams.push_back(Team(i+1, P));\n  }\n  for(int asd = 0; asd < R; asd++){\n    int m, t, p, j;\n    cin >> m >> t >> p >> j;\n    t--;\n    if(j == 0){\n      teams[t].solved[p] = true;\n      teams[t].solvednum++;\n      teams[t].penalty += m + 20*teams[t].WA[p];\n    }else{\n      teams[t].WA[p]++;\n    }\n  }\n  sort(teams.begin(), teams.end());\n\n  cout << teams[0].id;\n  for(int i = 1; i < T; i++){\n    if(teams[i].solvednum == teams[i-1].solvednum && teams[i].penalty == teams[i-1].penalty){\n      cout << '=';\n    }else{\n      cout << ',';\n    }\n    cout << teams[i].id;\n  }\n  cout << endl;\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n\nusing namespace std;\n\nint main() {\n    int M, T, P, R;\n    cin >> M >> T >> P >> R;\n\n    int m, t, p, j;\n    int result[T];\n    fill(result, result + T, 0);\n    int time [T];\n    fill(time, time + T, 0);\n    int failure[T];\n    fill(failure, failure + T, 0);\n    for(int submit = 0; submit < R; submit++) {\n            cin >> m >> t >> p >> j;\n            if(j==0) {\n                result[t-1] += 1;\n                time[t-1] += m + failure[t-1] * 20;\n            } else {\n                ++failure[t-1];\n            }\n    }\n\n    bool done[T];\n    fill(done, done + T, false);\n    int prevPoint, prevTime;\n    for(int count = 0; count < T; count++) {\n        int maxPoint = -1;\n        int maxTeam = 0;\n        int minTime = 100000;\n        for (int i = T-1; i >= 0; i--) {\n            if (done[i]) continue;\n            if (maxPoint < result[i]) {\n                maxPoint = result[i];\n                maxTeam = i + 1;\n                minTime = time[i];\n            } else if (maxPoint == result[i]) {\n                if (minTime > time[i]) {\n                    minTime = time[i];\n                    maxTeam = i + 1;\n                }\n            }\n        }\n        minTime = time[maxTeam-1];\n        if(count != 0){\n            if(maxPoint == prevPoint && minTime == prevTime) cout << \"=\";\n            else cout << \",\";\n        }\n        cout << maxTeam;\n        done[maxTeam-1] = true;\n        prevPoint = maxPoint;\n        prevTime = minTime;\n    }\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\nusing namespace std;\n\ntypedef struct _team{\n    int tid;\n    int ac;\n    int time;\n    _team(){tid=ac=time=0;}\n} Team;\n\nbool cmp(Team& a, Team& b){\n    if(a.ac == b.ac){\n        if(a.time == b.time){\n            return a.tid > b.tid;\n        }else{\n            return a.time < b.time;\n        }\n    }else{\n        return a.ac > b.ac;\n    }\n}\n\nint main(){\n    while(1){\n        int m,t,p,r;\n        cin >> m >> t >> p >> r;\n        if(m==0) break;\n\n        int mi, ti, pi, ji;\n        vector<vector<int> > pena(t, vector<int>(p, 0));\n        vector<Team> info(t);\n        for(int i=0; i<t; i++){\n            info[i].tid = i+1;\n        }\n        \n        for(int i=0; i<r; i++){\n            cin >> mi >> ti >> pi >> ji;\n            ti--;\n            pi--;\n            if(ji==0){\n                info[ti].time += mi;\n                info[ti].ac++;\n                pena[ti][pi] = -pena[ti][pi];\n            }else{\n                pena[ti][pi] -= 20;\n            }\n        }\n        for(int i=0; i<t; i++){\n            for(int j=0; j<p; j++){\n                if(pena[i][j]>0){\n                    info[i].time += pena[i][j];\n                }\n            }\n        }\n\n        sort(info.begin(), info.end(), cmp);\n        cout << info[0].tid;\n        for(int i=1; i<t; i++){\n            if(info[i].ac==info[i-1].ac && info[i].time==info[i-1].time){\n                cout << \"=\";\n            }else{\n                cout << \",\";\n            }\n            cout << info[i].tid;\n        }\n        cout << endl;\n    }\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <stdio.h>\n#include <math.h>\n\n#include <bitset>\n#include <vector>\n#include <map>\n#include <set>\n#include <stack>\n#include <queue>\n#include <cstring>\n#include <string>\n#include <sstream>\n#include <algorithm>\n#include <iomanip>\n#include <iostream>\n\n#define VARIABLE(x) cerr << #x << \"=\" << x << endl\n#define BINARY(x) cerr << #x << \"=\" << static_cast<bitset<16> >(x) << endl;\n#define rep(i,n) for(int i=0;i<(int)(n);i++)\n#define REP(i,m,n) for (int i=m;i<(int)(n);i++)\n#define if_range(x, y, w, h) if (0<=(int)(x) && (int)(x)<(int)(w) && 0<=(int)(y) && (int)(y)<(int)(h))\n\nconst int INF = 10000000;\nint dx[4]={-1, 0, 1, 0}, dy[4]={0, -1, 0, 1};\nusing namespace std;\ntypedef pair<int, int> P;\n\n/** Problem 1187 : ICPC Ranking **/\n\ntypedef pair<int, pair<int, int> > P3;\n\nbool cmp(const P3 &a, const P3 &b){\n\tif(a.first != b.first) return a.first > b.first;\n\telse if(a.second.first != b.second.first) return a.second.first < b.second.first;\n\telse return a.second.second > b.second.second;\n}\n\nint main()\n{\n\tint M, T, PN, R;\n\n\tvector<P3> team;\n\twhile (cin>>M>>T>>PN>>R, M||T||PN||R) {\n\t\tint WA[51][10]={0};\n\t\tteam.clear();\n\t\t\n\t\trep(i, T+1) {\n\t\t\tteam.push_back(P3(0, P(0, i)));\n\t\t}\n\t\t\n\t\trep(k, R) {\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tp--;\n\t\t\tif (j==0) {\n\t\t\t\tteam[t].first++;\n\t\t\t\tteam[t].second.first+=m + WA[t][p]*20;\n\t\t\t} else {\n\t\t\t\tWA[t][p]++;\n\t\t\t}\n\t\t}\n\t\t\n\t\tsort(team.begin()+1, team.end(), cmp);\n\t\tvector<P3>::iterator it = team.begin()+1;\n\t\tfor (; it!=team.end()-1; it++) {\n\t\t\tcout << it->second.second;\n\t\t\tif (it->first==(it+1)->first && it->second.first==(it+1)->second.first) {\n\t\t\t\tcout << \"=\";\n\t\t\t} else {\n\t\t\t\tcout << \",\";\n\t\t\t}\n\t\t}\n\t\tcout << it->second.second << endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#define _CRT_SECURE_NO_WARNINGS // #pragma warning(disable:4996)\n#include <iostream>\n#include <cstdio>\n#include <cstring>\n#include <algorithm>\n#include <vector>\n#include <string>\n#include <queue>\n#include <functional>\n#include <sstream>\n#include <cmath>\n#include <set>\n#include <map>\n#include <stack>\nusing namespace std; \n\n#define rep(i,a,b) for(int i=(a);i<(b);i++)\n#define rrep(i,a,b) for(int i=(a);i>=(b);i--)\n#define pb push_back\n#define mp(a,b) make_pair(a,b)\n#define all(a) a.begin(),a.end()\n#define len(x) ((int)(x).size())\n#define tmax(a,b,c) max((a),max((b),(c)))\n#define tmin(a,b,c) min((a),min((b),(c)))\n#define debug(x) cerr << #x << \" is \" << x << endl;\n\ntypedef pair<int, int> Pii;\ntypedef map<int, int> Mii;\ntypedef vector<int> Vi;\ntypedef long long ll;\nconst int inf = 2e9;\nconst ll ll_inf = 1e17;\nconst int mod = 1e9 + 7;\nconst long double eps = 1e-10;\n\nstruct sol{\n\tint n, s, ti, wr[20];\n\tsol(){};\n\tbool operator<(const sol& rhs) {\n\t\tif (s == rhs.s) \n\t\t\tif (ti == rhs.ti) {\n\t\t\t\treturn n > rhs.n;\n\t\t\t} else \n\t\t\t\treturn  ti < rhs.ti;\n\t\treturn s > rhs.s;\n\t}\n};\nsol x[55];\n\nint main()\n{\n\twhile (1) {\n\t\tint M, T, P, R;\n\t\tcin >> M >> T >> P >> R;\n\t\tif (M==0) break;\n\t\tmemset(x, 0, sizeof(x));\n\t\trep(i,0,T) x[i].n = i+1;\n\n\t\trep(i,0,R) {\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tt--;\n\t\t\tif (j==0) {\n\t\t\t\tx[t].s++;\n\t\t\t\tx[t].ti += m + x[t].wr[p];\n\t\t\t}\n\t\t\telse {\n\t\t\t\tx[t].wr[p] += 20;\n\t\t\t}\n\t\t}\n\t\tsort(x, x+T);\n\t\tcout << x[0].n;\n\t\trep(i,1,T) {\n\t\t\tif (x[i].s == x[i-1].s && x[i].ti == x[i-1].ti) cout << \"=\";\n\t\t\telse cout << \",\";\n\t\t\tcout << x[i].n;\n\t\t}\n\t\tcout << endl;\n\t}\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <iomanip>\n#include <algorithm>\n#include <string>\n#include <cstdio>\n#include <cmath>\n#include <cstdlib>\n#include <cstring>\n#include <vector>\n#include <list>\n#include <map>\n#include <set>\n#include <queue>\n#include <stack>\n\nusing std::cin;\nusing std::cout;\nusing std::endl;\nusing std::setprecision;\nusing std::fixed;\nusing std::pair;\nusing std::make_pair;\nusing std::string;\nusing std::vector;\nusing std::list;\nusing std::map;\nusing std::set;\nusing std::queue;\nusing std::priority_queue;\nusing std::stack;\n\ntypedef vector<int> VI;\ntypedef vector<vector<int> > VII;\ntypedef vector<string> VS;\ntypedef pair<int, int> PII;\ntypedef pair<int, bool> PIB;\n\nstruct SCORE {\n    vector<PIB> time;\n    int total_time;\n    int solve;\n    SCORE() {\n        total_time = 0; \n        solve = 0; \n    }\n};\n\nint main(void) {\n    int m; // time\n    int t; // number of team\n    int p; // number of problems\n    int r; // number of post records\n    while (1) {\n        cin >> m >> t >> p >> r;\n        if (m == 0 && t == 0 && p == 0 && r == 0) {\n            break; \n        }\n        vector<SCORE> rec(t);\n\n        // constructor????????????????????????????????????????????????\n        vector<PIB> temp(p, make_pair(0, false));\n        for (int i = 0; i < t; i++) {\n            rec[i].time = temp;\n        }\n\n        for (int loop = 0; loop < r; loop++) {\n            int m2;\n            int t2;\n            int p;\n            int j;\n            cin >> m2 >> t2 >> p >> j;\n            t2--;\n            p--;\n            if (j == 0) {\n                rec[t2].solve++; \n                rec[t2].time[p].first += m2;\n                rec[t2].time[p].second = true;\n                rec[t2].total_time += rec[t2].time[p].first;\n            } else {\n                rec[t2].time[p].second += 20;\n            }\n        }\n        priority_queue<pair<int, pair<int, int> > > pq;\n        for (int i = 0; i < t; i++) {\n           pq.push(make_pair(rec[i].solve, make_pair(rec[i].total_time, i + 1))); \n        }\n        int first = pq.top().first;\n        int second = pq.top().second.first;\n        cout << pq.top().second.second;\n        pq.pop();\n        for (int i = 1; i < t; i++) {\n            if (first == pq.top().first && second == pq.top().second.first) {\n                cout << \"=\" << pq.top().second.second;\n            } else {\n                first = pq.top().first;\n                second = pq.top().second.first;\n                cout << \",\" << pq.top().second.second;\n            }\n            pq.pop();\n        }\n        cout << endl;\n    }\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define rep(i,n) for(int i=0;i<(int)(n);i++)\n#define fi first\n#define se second\n\nusing namespace std;\n\ntypedef pair<int,int>P;\ntypedef pair<P,int>pi;\n\nint pena[55][15];\n\nint main()\n{\n    while(1){\n        int m,t,p,r;\n        cin >> m >> t >> p >> r;\n        if(m == 0){\n            break;\n        }\n        vector<pi> vec(t);\n        rep(i,t){\n            rep(j,p+1){\n                pena[i][j] = 0;\n            }\n            vec[i] = pi(P(0,0),-i);\n        }\n        rep(i,r){\n            int a,b,c,d;\n            cin >> a >> b >> c >> d;\n            b--;\n            if(d){\n                pena[b][c]++;\n            }else{\n                (vec[b].fi).fi--;\n                (vec[b].fi).se += a + pena[b][c]*20;\n            }\n        }\n        sort(vec.begin(),vec.end());\n        P prv = P(-1,-1);\n        rep(i,(int)vec.size()){\n            if(prv == vec[i].fi){\n                if(i){\n                    cout << \"=\" << -vec[i].se+1;\n                }else{\n                    cout << -vec[i].se+1;\n                }\n            }else{\n                prv = vec[i].fi;\n                if(i){\n                    cout << \",\" << -vec[i].se+1;\n                }else{\n                    cout << -vec[i].se+1;\n                }\n            }\n        }\n        cout << \"\\n\";\n    }\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <string>\n#include <map>\n#include <vector>\n#include <algorithm>\n#include <queue>\n#include <stack>\n#include <cstdio>\n#include <cmath>\n\nusing namespace std;\n\n#define REP(i,k,n) for(int i=k;i<n;i++)\n#define rep(i,n) for(int i=0;i<n;i++)\n\n\n#define all(v) v.begin(),v.end()\n#define rall(v) v.rbegin(),v.rend()\n#define INF 1<<30\n#define mp make_pair\n#define pb push_back\n\n#define fi first\n#define se second\n\n#define each(it,c) for(auto it=(c).begin();it!=(c).end();it++)\n\ntypedef vector<int> vi;\ntypedef vector<vi> vii;\ntypedef pair<int,int> pii;\n\ntypedef long long ll;\n\nclass team{\npublic:\n\tint id;\n\tint clear;\n\tvi fail;\n\tint time;\n\tteam(){\n\t\t// id=0;\n\t\t// clear=0;\n\t\t// fail = vi(10,0);\n\t\t// time=0;\n\t}\n};\n\nint main(){\n\twhile(1){\n\t\tint M,T,P,R;\n\t\tint m,t,p,j;\n\t\tvector<team> tev;\n\t\tvector<pii> ap;\n\t\tcin>>M>>T>>P>>R;\n\t\tif(M==0)break;\n\t\trep(i,T){\n\t\t\tteam te;\n\t\t\tte.id=i+1;\n\t\t\tte.clear=0;\n\t\t\tte.time=0;\n\t\t\tte.fail = vi(10,0);\n\t\t\ttev.pb(te);\n\t\t\t//????????§id??????????????°??????????????????clear,time???0??§?????????\n\t\t}\n\t\trep(i,R){\n\t\t\tcin>>m>>t>>p>>j;\n\t\t\tif(j==0){\n\t\t\t\tint time=m;\n\t\t\t\t//????????§?????£?§£??°????????????????????????????????£?§£??°??¨????????????????????????\n\t\t\t\ttime += tev[t-1].fail[p]*20;\n\t\t\t\ttev[t-1].clear++;\n\t\t\t\ttev[t-1].time+=time;\n\t\t\t}else{\n\t\t\t\t//????????§???????????????????????¨????????£?§£?????°?????????\n\t\t\t\ttev[t-1].fail[p]++;\n\t\t\t}\n\t\t}\n\t\trep(i,T){\n\t\t\tap.pb(mp(tev[i].clear*100000+(90000-tev[i].time),tev[i].id));\n\t\t}\n\t\tsort(rall(ap));\n\n\t\tcout<<ap[0].se;\n\t\tREP(i,1,T){\n\t\t\tif(ap[i-1].fi==ap[i].fi) cout<<\"=\";\n\t\t\telse cout<<\",\";\n\t\t\tcout<<ap[i].se;\n\t\t}\n\t\tcout<<endl;\n\t\t// rep(i,T){\n\t\t// \tcout<<\"debug clear:\"<<tev[i].clear<<\" time:\"<<tev[i].time;\n\t\t// \tcout<<endl;\n\t\t// \trep(j,P){\n\t\t// \t\tcout<<\" fail:\"<<tev[i].fail[j];\n\t\t// \t}\n\t\t// \tcout<<endl;\n\t\t// }\n\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <string>\n#include <map>\n#include <vector>\n#include <algorithm>\n#include <queue>\n#include <stack>\n#include <cstdio>\n#include <cmath>\n\nusing namespace std;\n\n#define REP(i,k,n) for(int i=k;i<n;i++)\n#define rep(i,n) for(int i=0;i<n;i++)\n\n\n#define all(v) v.begin(),v.end()\n#define rall(v) v.rbegin(),v.rend()\n#define INF 1<<30\n#define mp make_pair\n#define pb push_back\n\n#define fi first\n#define se second\n\n#define each(it,c) for(auto it=(c).begin();it!=(c).end();it++)\n\ntypedef vector<int> vi;\ntypedef vector<vi> vii;\ntypedef pair<int,int> pii;\n\ntypedef long long ll;\n\nclass team{\npublic:\n\tint id;\n\tint clear;\n\tvi fail;\n\tint time;\n\tteam(){\n\t\t// id=0;\n\t\t// clear=0;\n\t\t// fail = vi(10,0);\n\t\t// time=0;\n\t}\n};\n\nint main(){\n\twhile(1){\n\t\tint M,T,P,R;\n\t\tint m,t,p,j;\n\t\tvector<team> tev;\n\t\tvector<pii> ap;\n\t\tcin>>M>>T>>P>>R;\n\t\tif(M==0)break;\n\t\trep(i,T){\n\t\t\tteam te;\n\t\t\tte.id=i+1;\n\t\t\tte.clear=0;\n\t\t\tte.time=0;\n\t\t\trep(j,10){\n\t\t\t\tte.fail.pb(0);\n\t\t\t}\n\t\t\ttev.pb(te);\n\t\t\t//????????§id??????????????°??????????????????clear,time???0??§?????????\n\t\t}\n\t\trep(i,R){\n\t\t\tcin>>m>>t>>p>>j;\n\t\t\tif(j==0){\n\t\t\t\tint time=m;\n\t\t\t\t//????????§?????£?§£??°????????????????????????????????£?§£??°??¨????????????????????????\n\t\t\t\ttime += tev[t-1].fail[p-1]*20;\n\t\t\t\ttev[t-1].clear++;\n\t\t\t\ttev[t-1].time+=time;\n\t\t\t}else{\n\t\t\t\t//????????§???????????????????????¨????????£?§£?????°?????????\n\t\t\t\ttev[t-1].fail[p-1]++;\n\t\t\t}\n\t\t}\n\t\trep(i,T){\n\t\t\tap.pb(mp(tev[i].clear*100000+(90000-tev[i].time),tev[i].id));\n\t\t}\n\t\tsort(rall(ap));\n\n\t\tcout<<ap[0].se;\n\t\tREP(i,1,T){\n\t\t\tif(ap[i-1].fi==ap[i].fi) cout<<\"=\";\n\t\t\telse cout<<\",\";\n\t\t\tcout<<ap[i].se;\n\t\t}\n\t\tcout<<endl;\n\t\t// rep(i,T){\n\t\t// \tcout<<\"debug clear:\"<<tev[i].clear<<\" time:\"<<tev[i].time;\n\t\t// \tcout<<endl;\n\t\t// \trep(j,P){\n\t\t// \t\tcout<<\" fail:\"<<tev[i].fail[j];\n\t\t// \t}\n\t\t// \tcout<<endl;\n\t\t// }\n\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\nusing namespace std;\n\nint main(){\n  while(true){\n    int M,T,P,R;\n    cin>>M>>T>>P>>R;\n\n    if(M==0&&T==0&&P==0&&R==0)\n      break;\n\n    int CP[50],TT[50],PT[50][10];\n    for (int i = 0; i < T; i++) {\n        CP[i] = TT[i] = 0;\n        for (int j = 0; j < P; j++)\n            PT[i][j] = 0;\n    }\n\n    for (int i = 0; i < R; i++) {\n        int m, t, p, j;\n        cin >> m >> t >> p >> j;\n\n        if (j == 0) {\n            CP[t - 1]++;\n            TT[t - 1] += (m + PT[t - 1][p - 1]);\n        }\n        else {\n            PT[t - 1][p - 1] += 20;\n        }\n    }\n\n    int tnow, tpre = -1;\n    bool flg[50];\n    for (int i = 0; i < T; i++)\n        flg[i] = false;\n\n    for (int i = 0; i < T; i++) {\n        tnow = -1;\n        for (int j = 0; j < T; j++) {\n            if (flg[j])\n                continue;\n\n            if (tnow == -1) {\n                tnow == j;\n            }\n            else {\n                if (CP[j] > CP[tnow] || (CP[j] == CP[tnow] && TT[j]>TT[tnow])) {\n                    tnow = j;\n                }\n            }\n        }\n\n        if (tpre != -1) {\n            if (CP[tnow] == CP[tpre] && TT[tnow] == TT[tpre])\n                cout << '=';\n            else\n                cout << ',';\n        }\n        cout << tnow + 1;\n\n        flg[tnow] = true;\n        tpre = tnow;\n    }\n    cout << endl;\n  }\n  return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <iomanip>\n#include <algorithm>\n#include <string>\n#include <cstdio>\n#include <cmath>\n#include <cstdlib>\n#include <cstring>\n#include <vector>\n#include <list>\n#include <map>\n#include <set>\n#include <queue>\n#include <stack>\n\nusing namespace std;\n\ntypedef vector<int> VI;\ntypedef vector<vector<int> > VVI;\ntypedef vector<string> VS;\ntypedef pair<int, int> PII;\ntypedef pair<int, PII> PIII;\ntypedef vector<PII> VP;\ntypedef vector<vector<PII> > VVP;\n\nint main(void) {\n    while(true) {\n        int m;\n        int t;\n        int p;\n        int r;\n        cin >> m >> t >> p >> r;\n        if (m == 0 && t == 0 && p == 0 && r == 0) {\n            break;\n        }\n        VVP table(t, VP(p, make_pair(0, 1)));\n        for (int i = 0; i < r; i++) {\n            int m2;\n            int t2;\n            int p2;\n            int j;\n            cin >> m2 >> t2 >> p2 >> j;\n            t2--;\n            p2--;\n            if (j == 0) {\n                table[t2][p2].first += m2;\n                table[t2][p2].second = j;\n            } else {\n                table[t2][p2].first += 20;\n            }\n        }\n        priority_queue<PIII> pq;\n        for (int i = 0; i < t; i++) {\n            int solve = 0;\n            int total_time = 0;\n            for (int j = 0; j < p; j++) {\n                if (table[i][j].second == 0) {\n                    solve++;\n                    total_time += table[i][j].first;\n                }\n            }\n            pq.push(make_pair(solve, make_pair(-total_time, i + 1)));\n        }\n        PIII ans = pq.top();\n        int solve = ans.first;\n        int time = ans.second.first;\n        pq.pop();\n        cout << ans.second.second;\n        while(!pq.empty()) {\n            PIII ans = pq.top();\n            if (ans.first == solve && ans.second.first == time) {\n                cout << \"=\" << ans.second.second;\n            } else {\n                solve = ans.first;\n                time = ans.second.first;\n                cout << \",\" << ans.second.second;\n            }\n            pq.pop();\n        }\n        cout << endl;\n    }\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n#define rep(i, n) for (int i = 0; i < (n); i++)\n#define REP(i, s, n) for (int i = (s); i < (n); i++)\n#define all(co) begin(co), end(co)\n\nint main() {\n\tint m,t,p,r;\nwhile (cin >> m >> t >> p >> r && m) {\n\tvector<vector<int>> v(t, vector<int>(p));\n\trep(i, r) {\n\t\tint m, t, p, j; cin >> m >> t >> p >> j;\n\t\tt--;\n\t\tif (j == 0) {\n\t\t\tif(v[t][p] == 0) v[t][p] = m;\n\t\t\telse v[t][p] = m + -v[t][p] * 20;\n\t\t}\n\t\telse v[t][p]--;\n\t}\n\tmap<int, vector<int>> rank;\n\trep(i, t) {\n\t\tint s = -accumulate(all(v[i]), 0);\n\t\tif(rank.count(s)) rank[s].push_back(i + 1);\n\t\telse rank.insert(s, vector<int>{i+1});\n\t}\n\tfor(auto it = rank.begin(); it != --rank.end(); it++) {\n\t\trep(i, it->size() - 1) cout << it->at(i) << '=';\n\t\tcout << it->back();\n\t\tcout << ',';\n\t}\n\t{\n\t\tauto it = --rank.end();\n\t\trep(i, it->size() - 1) cout << it->at(i) << '=';\n\t\tcout << it->back();\n\t}\n\tcout << endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\n#define FOR(i,s,e) for((i)=(s);(i)<(int)(e);(i)++)\n#define REP(i,e) FOR(i,0,e)\n\n#define all(o) (o).begin(), (o).end()\n#define psb(x) push_back(x)\n#define mp(x,y) make_pair((x),(y))\n\ntypedef long long ll;\ntypedef pair<int, int> PII;\n\nconst double EPS = 1e-10;\n\nconst int M = 300;\nconst int T = 50;\nconst int P = 10;\nconst int R = 2000;\nint m, t, p, r;\n\ntypedef struct team_def {\n  int idx;  //index of the team\n  int tac;  //total number of AC\n  int tt;   //total time with penalty\n  team_def() {idx = tac = tt = 0;}\n  team_def(int _idx, int _tac, int _tt) {\n    idx = _idx;\n    tac = _tac;\n    tt  = _tt;\n  }\n} team;\n\nint my_compare(const void *pl, const void *pr) {\n  team *tl = (team *)pl;\n  team *tr = (team *)pr;\n  \n  //AC number...descending order\n  if (tl->tac < tr->tac)\n    return 1;\n  else if (tl->tac > tr->tac)\n    return -1;\n\n  //penalty time...ascending order\n  if (tl->tt < tr->tt)\n    return -1;\n  else if (tl->tt > tr->tt)\n    return 1;\n\n  //team index...descending order\n  if (tl->idx < tr->idx)\n    return 1;\n  else if (tl->idx > tr->idx)\n    return -1;\n\n  return 0;\n}\n\nint ac[T][P]; //1:AC, 0:not AC\nint wa[T][P]; //time with penalty\nteam tms[T];\n\nint main() {\n  int i, j;\n\n  while (1) {\n    memset(ac, 0, sizeof(ac));\n    memset(wa, 0, sizeof(wa));\n    scanf(\"%d%d%d%d \", &m, &t, &p, &r);\n    if (!m && !p && !t && !r) break;\n    for (i=0; i<r; i++) {\n      int mm, tt, pp, rr;\n      scanf(\"%d%d%d%d \", &mm, &tt, &pp, &rr);\n      tt--; pp--;\n      if (!rr) {\n        ac[tt][pp] = 1; \n        wa[tt][pp] += mm;\n      } else\n        wa[tt][pp] += 20;\n    }\n\n    for (i=0; i<t; i++) {\n      tms[i].idx = i; \n      tms[i].tac = tms[i].tt = 0;\n    }\n    for (i=0; i<t; i++)\n      for (j=0; j<p; j++) {\n        if (ac[i][j]) {\n          tms[i].tac++;\n          tms[i].tt += wa[i][j];\n        }\n      }\n\n    qsort(tms, t, sizeof(team), my_compare);\n\n    printf(\"%d\", tms[0].idx + 1);\n    for (i=1; i<t; i++) {\n      if (tms[i].tac == tms[i-1].tac && tms[i].tt == tms[i-1].tt)\n        printf(\"=\");\n      else\n        printf(\",\");\n      printf(\"%d\", tms[i].idx + 1);\n    }\n    printf(\"\\n\");\n  }\n\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\nusing namespace std;\n\nint main(){\n    while(true){\n        int contestTime, teamCount, probremCount, submitCount;\n        cin >> contestTime >> teamCount >> probremCount >> submitCount;\n        if(contestTime == 0){\n            break;\n        }\n        int teamPoint[teamCount], teamTime[teamCount], teamPenalty[teamCount][probremCount];\n        for(int i = 0; i < teamCount; i++){\n            teamPoint[i] = teamTime[i] = 0;\n            for(int j = 0; j < probremCount; j++){\n                teamPenalty[i][j] = 0;\n            }\n        }\n        for(int i = 0; i < submitCount; i++){\n            int m, t, p, j;\n            cin >> m >> t >> p >> j;\n            t--;\n            if(j == 0 && m <= contestTime){\n                teamPoint[t]++;\n                teamTime[t] += m + teamPenalty[t][p] * 20;\n            }else{\n                teamPenalty[t][p]++;\n            }\n        }\n        int previousIndex = -1;\n        int previousPoint = -1;\n        int previousTime = -1;\n        for(int i = 0; i < teamCount; i++){\n            int maxPoint = 0;\n            int topTime = contestTime;\n            int topIndex = 0;\n            for(int j = 0; j < teamCount; j++){\n                if(teamPoint[j] > maxPoint){\n                    maxPoint = teamPoint[j];\n                    topTime = teamTime[j];\n                    topIndex = j;\n                }else if(teamPoint[j] == maxPoint){\n                    if(topTime >= teamTime[j]){\n                        topTime = teamTime[j];\n                        topIndex = j;\n                    }\n                }\n            }\n            if(i != 0 && maxPoint == previousPoint && topTime == previousTime){\n                cout << '=' << topIndex + 1;\n            }else if(i != 0){\n                cout << ',' << topIndex + 1;\n            }else{\n                cout << topIndex + 1;\n            }\n            previousIndex = topIndex;\n            previousTime = teamTime[topIndex];\n            previousPoint = teamPoint[topIndex];\n            teamPoint[topIndex] = -1;\n            teamTime[topIndex] = contestTime + 1;\n            \n        }\n            cout << endl;\n    }\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n#define rep(i, n) for (int i = 0; i < (n); i++)\n#define REP(i, s, n) for (int i = (s); i < (n); i++)\n#define all(co) begin(co), end(co)\n\nint main() {\n\tint m,t,p,r;\nwhile (cin >> m >> t >> p >> r && m) {\n\tvector<vector<int>> v(t, vector<int>(p));\n\trep(i, r) {\n\t\tint m, t, p, j; cin >> m >> t >> p >> j;\n\t\tt--;\n\t\tif (j == 0) {\n\t\t\tif(v[t][p] == 0) v[t][p] = m;\n\t\t\telse v[t][p] = m + -v[t][p] * 20;\n\t\t}\n\t\telse v[t]--;\n\t}\n\tmap<int, vector<int>> rank;\n\trep(i, t) {\n\t\tint s = -accumulate(all(v[i]), 0);\n\t\tif(rank.count(s)) rank.push_back(i + 1);\n\t\telse rank.insert(s, vector<int>{i+1});\n\t}\n\tfor(auto it = rank.begin(); it != --rank.end(); it++) {\n\t\trep(i, it->size() - 1) cout << it->at(i) << '=';\n\t\tcout << it->back();\n\t\tcout << ',';\n\t}\n\t{\n\t\tauto it = --rank.end();\n\t\trep(i, it->size() - 1) cout << it->at(i) << '=';\n\t\tcout << it->back();\n\t}\n\tcout << endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <utility>\nusing namespace std;\n\nint main(){\n  int m,t,p,r,i,j,k;\n  while(1){\n    cin >> m >> t >> p >> r;\n    if(m==0)break;\n    int ac[t]={},wa[t][p+1],actime[t]={};\n    for(i=0;i<t;i++){\n      for(j=0;j<p+1;j++)wa[i][j]=0;\n    }\n    for(i=0;i<r;i++){\n      int M,T,P,R;\n      cin >> M >> T >> P >> R;\n      if(R!=0)wa[T-1][P]++;\n      else{\n        ac[T-1]++;\n        actime[T-1]+=wa[T-1][P]*20+M;\n      }\n    }\n\n    //cout << actime[0] << actime[1] << endl;\n\n    bool flag[t]={};\n    int bscore=-1,bfinaltime=-1;\n    for(j=0;j<t;j++){\n      int team=-1,score=-1,finaltime=300*20;\n      for(i=0;i<t;i++){\n        if(flag[i]==true)continue;\n        if(score<ac[i]){\n          team=i;\n          score = ac[i];\n          finaltime= actime[i];\n        }else if(score == ac[i] && finaltime>=actime[i]){\n          team=i;\n          finaltime=actime[i];\n        }\n      }\n      if(j!=0){\n        if(bscore==score && bfinaltime==finaltime)cout << \"=\";\n        else cout << \",\";\n      }\n      cout << team+1;\n      flag[team]=true;\n      bscore = score;\n      bfinaltime=finaltime;\n    }\n    cout << endl;\n  }\n  return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<vector>\n#include<map>\n#include<cstdlib>\n#include<cmath>\n#include<cstring>\n#include<string>\n#include<algorithm>\n#define INF 1e9\n#define M_Team 50\n#define M_Pro 10\n\ntypedef long long int ll;\nusing namespace std;\n\nint wacount[M_Team+1][M_Pro+1]={};\nint timesum[M_Team+1]={},anssum[M_Team+1];\nvector<char> ans;\n\n\nvoid set(int n){\n\tif(n <10)\n\t\tans.push_back(n+'0');\n\telse{\n\t\tans.push_back(n/10+'0');\n\t\tans.push_back(n%10+'0');\n\t}\n}\n\nvoid out(int timesum[M_Team+1],int grad[M_Team+1],int T){\n\tset(grad[0]+1);\n\tfor(int i=1;i<T;i++){\n\t\tif(anssum[ grad[i] ]==anssum[ grad[i-1] ]  &&  timesum[ grad[i] ] == timesum[ grad[i-1] ] ){\n\t\t\tans.push_back('=');\n\t\t\tset(grad[i]+1);\n\t\t}else{\n\t\t\tans.push_back(',');\n\t\t\tset(grad[i]+1);\n\t\t}\n\t}\n\tfor(int i=0;i<ans.size();i++)cout<<ans[i];\n\tcout<<endl;\n}\n\nbool checkOver(int a,int b){\n\tif(anssum[a] <  anssum[b])return true;\n\tif( (anssum[a] == anssum[b]) && (timesum[a]>timesum[b]) )return true;\n\treturn false;\n}\n\n\nvoid babu_sort(int anssum[M_Team+1],int timesum[M_Team+1],int grad[M_Team+1],int T){\n\tfor(int i=0;i<T;i++)\n\t\tfor(int j=0;j<T-i-1;j++)\n\t\t\tif( checkOver(grad[j],grad[j+1]) )\n\t\t\t\tswap(grad[j],grad[j+1]);\n}\n\nvoid solve(int anssum[M_Team+1],int timesum[M_Team+1],int M,int T,int P,int R){\n\tint grad[M_Team+1];\n\tfor(int i=0;i<T;i++)\n\t\tgrad[i]=T-i-1;\n//for(int i=0;i<T;i++)cout<<grad[i];cout<<endl;\n\tbabu_sort(anssum,timesum,grad,T);\n//for(int i=0;i<T;i++)cout<<grad[i];cout<<endl;\n\tout(timesum,grad,T);\n}\n\nint main(){\n\twhile(1){\n//初期化\n\t\tans.clear();\n\t\tfor(int i=0;i<M_Pro+1;i++){\n\t\t\tfor(int j=0;j<M_Team+1;j++){\n\t\t\t\twacount[i][j]=0;\n\t\t\t}\n\t\t\ttimesum[i]=0;\n\t\t\tanssum[i]=0;\n\t\t}\n///////\n\t\tint M,T,P,R;\n\t\tint m,t,p,J;\n\t\tcin>>M>>T>>P>>R;\n\t\tif(M==0 && T==0 && P==0 && R==0)break;\n\t\tfor(int i=0;i<R;i++){\n\t\t\tcin>>m>>t>>p>>J;\n\t\t\tt--;\n\t\t\tif(J!=0){\n\t\t\t\twacount[t][p]++;\n\t\t\t}\n\t\t\telse{\n\t\t\t\ttimesum[t]+=m+wacount[t][p]*20;\n\t\t\t\tanssum[t]++;\n\t\t\t}\n\t\t}\n\t\tsolve(anssum,timesum,M,T,P,R);\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#ifndef _WIN32\n#include<iostream>\n#endif\n#include<cmath>\n#include<iomanip>\n#include<algorithm>\n#include<functional>\n#include<vector>\n#include<queue>\n#include<string>\n#include<stdlib.h>\n\n#define REP(i,n) for(int i=0;i<n;i++)\n\nusing namespace std;\nint M, T, P, R;\nint score[51];\nint times[51];\nint pen[51][11];//\nint con[51][11];\nint team[11]; \n\n#define SCORE 0\n#define TIME 1\n#define ID 2\nint main() {\n\tcin.tie(0);\n\tios_base::sync_with_stdio(false);\n\tcout << fixed << setprecision(30);\n\twhile (1){\n\t\tvector<vector<int>> all;\n\t\tcin >> M >> T >> P >> R;\n\t\tif (M == 0 && T == 0)break;\n\t\tREP(i, 51){\n\t\t\tREP(j, 11){\n\t\t\t\tpen[i][j] = 0;\n\t\t\t\tcon[i][j] = -1;\n\t\t\t}\n\t\t\tscore[i] = 0;\n\t\t\ttimes[i] = 0;\n\t\t}\n\n\t\tREP(i, R){\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tt--;\n\t\t\tif (m <= M){\n\t\t\t\tif (j == 0){\n\t\t\t\t\tcon[t][p] = m;\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tpen[t][p] ++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tREP(i, T){\n\t\t\tREP(j, 11){\n\t\t\t\tif (con[i][j] != -1){\n\t\t\t\t\tscore[i]++;\n\t\t\t\t\ttimes[i] += con[i][j] + 20 * pen[i][j];\n\t\t\t\t}\n\t\t\t}\n\t\t\tall.push_back({ score[i], -times[i], i+1 });\n\t\t}\n\t\tsort(all.begin(), all.end());\n\t\treverse(all.begin(), all.end());\n\t\tREP(i, T){\n\t\t\tcout << all[i][ID];\n\t\t\tif (i == T - 1){\n\t\t\t\tcout << endl;\n\t\t\t}else{\n\t\t\t\tif (all[i][SCORE] == all[i + 1][SCORE] && all[i][TIME] == all[i+1][TIME]){\n\t\t\t\t\tcout << \"=\";\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tcout << \",\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n#include <cstdio>\n\n#define REP(i,n) for( int i = 0; i < n; i++ )\n\n\nusing namespace std;\n\n\nstruct team{\n\tint ans,time,name;\n    int q[50]={};\n    \n\tteam() : ans(0), time(0), name(0) {}\n    \n    bool operator <( const team& Right )const {\n        return  ans != Right.ans ? ans < Right.ans :\n        time != Right.time ? time > Right.time :\n        name <  Right.name;\n    }\n};\n\n\nint main()\n{\n\tint M,T,P,R;\n\twhile( cin >> M >> T >> P >> R )\n\t{\n\t\tint m,t,p,k;\n\t\tvector<team> team_array(T+1);\n\t\tif( T == 0 ) return 0;\n\t\tfor( int i = 1; i <= T; i++)\n\t\t\tteam_array[i].name = i;\n\t\tREP(i,R)\n\t\t{\n\t\t\tcin >> m >> t >> p >> k;\n\t\t\tteam &tm = team_array[t];\n\t\t\tif( !k ){\n\t\t\t\ttm.ans++;\n\t\t\t\ttm.time += m;\n                if( tm.q[p] )\n                    tm.time += 20 * tm.q[p];\n\t\t\t}\n            else{\n                tm.q[p]++;\n            }\n            \n\t\t}\n\t\t\n        sort( team_array.begin() + 1 , team_array.end() );\n\t\t\n        for( int i = T; i > 0; i-- )\n        {\n            char c;\n            if( i == 1 ){\n                cout << team_array[i].name << endl;\n                continue;\n            }\n            else if ( team_array[i].ans == team_array[i-1].ans &&\n                team_array[i].time == team_array[i-1].time) {\n                c = '=';\n            }\n            else{\n                c = ',';\n            }\n\t\t\tcout << team_array[i].name << c;\n        }\n        \n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n\nusing namespace std;\n\nstruct Team\n{\n\tint id;\n\tint crr_num;\n\tint time_sum;\n\tint fal[10];\n\n\tbool operator < (const Team& oth)const{\n\t\tif(crr_num==oth.crr_num) {\n\t\t\tif(time_sum==oth.time_sum) return id>oth.id;\n\t\t\treturn time_sum<oth.time_sum;\n\t\t}\n\t\treturn crr_num>oth.crr_num;\n\t}\n};\n\nint main(int argc, char const *argv[])\n{\n\tint m,t,p,r;\n\n\twhile(1){\n\t\tcin>>m>>t>>p>>r;\n\t\tif(m+t+p+r==0) break;\n\n\t\tvector<Team> jg(t);\n\n\t\tfor(int i1=0;i1<t;i1++){\n\t\t\tjg[i1].id=i1+1;\n\t\t\tjg[i1].crr_num=0;\n\t\t\tjg[i1].time_sum=0;\n\t\t\tfor(int i2=0;i2<10;i2++){\n\t\t\t\tjg[i1].fal[i2]=0;\n\t\t\t}\n\t\t}\n\n\t\tint tm,tt,tp,j;\n\t\tfor(int i1=0;i1<r;i1++){\n\t\t\tcin>>tm>>tt>>tp>>j;\n\n\t\t\tif(j==0){\n\t\t\t\tjg[tt-1].crr_num++;\n\t\t\t\tjg[tt-1].time_sum+=(tm+jg[tt-1].fal[tp-1]*20);\n\t\t\t}\n\t\t\telse jg[tt-1].fal[tp-1]++;\n\t\t}\n\n\t\tsort(jg.begin(),jg.end());\n\n\t\tcout<<jg[0].id;\n\t\tfor(int i1=1;i1<t;i1++){\n\t\t\tif(jg[i1].crr_num==jg[i1-1].crr_num && jg[i1].time_sum==jg[i1-1].time_sum){\n\t\t\t\tcout<<\"=\"<<jg[i1].id;\n\t\t\t}\n\t\t\telse cout<<\",\"<<jg[i1].id;\n\t\t}\n\t\tcout<<endl;\n\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<string>\n#include<vector>\n#include<tuple>\n#include<set>\n#include<map>\n#include<algorithm>\nusing namespace std;\n\nstruct Record {\n  int tid, pid, time;\n  bool correct;\n};\n\nstruct Team {\n  Team() {\n    penalty = 0;\n  }\n  set<int> solved;\n  map<int, int> WA;\n  int penalty;\n};\n\n// Solved Problems, Penalty, Team ID\ntypedef tuple<int, int, int> Score;\n\nint main() {\n  int M, T, P, R;\n  while (cin >> M >> T >> P >> R && M) {\n    vector<Record> records(R);\n    for (int i = 0; i < R; i++) {\n      int m, t, p, j;\n      cin >> m >> t >> p >> j;\n      records[i].pid = --p;\n      records[i].tid = --t;\n      records[i].time = m;\n      records[i].correct = (j == 0);\n    }\n\n    vector<Team> teams(T);\n    for (Record r : records) {\n      if (teams[r.tid].solved.find(r.pid) != teams[r.tid].solved.end()) {\n        continue;\n      } else if (r.correct) {\n        teams[r.tid].solved.insert(r.pid);\n        teams[r.tid].penalty +=\n          teams[r.tid].WA[r.pid] * 20 + r.time;\n      } else {\n        teams[r.tid].WA[r.pid]++;\n      }\n    }\n\n    vector<Score> team_result(T);\n    for (int i = 0; i < T; i++) {\n      get<0>(team_result[i]) = -teams[i].solved.size();\n      get<1>(team_result[i]) = teams[i].penalty;\n      get<2>(team_result[i]) = -i;\n    }\n\n    sort(team_result.begin(), team_result.end());\n\n    for (int i = 0, len = team_result.size(); i < len; i++) {\n      Score s = team_result[i];\n      if (i > 0) {\n        Score p = team_result[i - 1];\n        cout << \n          (get<0>(p) == get<0>(s) && get<1>(p) == get<1>(s)?\"=\":\",\");\n      }\n      cout << -get<2>(s)+1;\n    }\n    cout << endl;\n  }\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n#include <vector>\n \nusing namespace std;\n \nstruct Node {\n    int name;\n    int pen;\n    int ac;\n    vector<int> wa;\n    Node(int n, int P) : name(n), pen(0), ac(0), wa(P, 0) { }\n    // 0origin\n    void accept(int i, int t) {\n        ac++;\n        pen += wa[i] * 20 + t;\n    }\n \n    void wrong(int i) {\n        wa[i]++;\n    }\n \n    bool operator <(const Node & n) const {\n        if(ac != n.ac) return ac > n.ac;\n        if(pen != n.pen) return pen < n.pen;\n        return name > n.name;\n    }\n \n    bool same(const Node & n) const {\n        return ac == n.ac && pen == n.pen;\n    }\n};\n \nint main() {\n    for(int M, T, P, R; cin >> M >> T >> P >> R, M || T || P || R; ) {\n        vector<Node> vec;\n        for(int i = 0; i < T; i++) vec.push_back(Node(i+1, P));\n        for(int i = 0; i < R; i++) {\n            int m, t, p, j; cin >> m >> t >> p >> j;\n            t--;\n            p--;\n            if(j == 0) {\n                vec[t].accept(p, m);\n            }\n            else {\n                vec[t].wrong(p);\n            }\n        }\n        sort(vec.begin(), vec.end());\n        cout << vec[0].name;\n        for(int i = 1; i < (int)vec.size(); i++) {\n            if(vec[i - 1].same(vec[i])) cout << \"=\";\n            else cout << \",\";\n            cout << vec[i].name;\n        }\n        cout << endl;\n    }\n}\n "
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\ntypedef pair<int, int> P;\ntypedef pair<int, pair<int, int>> S;\nint wa[51][11];\nint OK[11];\nvector<S> v;\n\n//比較関数\nbool comp(S lhs, S rhs){\n\tif(lhs.first != rhs.first){\n\t\treturn lhs.first < rhs.first;\n\t}\n\tif(lhs.second.first != rhs.second.first){\n\t\treturn lhs.second.first > rhs.second.first;\n\t}\n\tif(lhs.second.second != rhs.second.second){\n\t\treturn lhs.second.second < rhs.second.second;\n\t}\n}\n\nint main(){\nwhile(1){//start\n\t\n\tint M, T, P, R;\n\tcin >> M >> T >> P >> R;\n\tif(M == 0 and T == 0 and P == 0 and R == 0) break;\n\n\t//初期化\n\tv.resize(T);\n\tfor(int i = 0; i < 51; i++){\n\t\tfor(int j = 0; j < 11; j++) wa[i][j] = 0;\n\t}\n\tfor(int i = 0; i < 11; i ++) OK[i] = 0;\n\t\n\t\n\t//データを格納\n\tfor(int i = 0; i < R; i++){\n\t\tint m, t, p, j;\n\t\tcin >> m >> t >> p >> j;\n\n\t\tif(j == 0){\n\t\t\tv[t - 1].second.first += m + 20*wa[t][p]; \n\t\t\tOK[t-1] += 1;\n\t\t}\n\t\telse{\n\t\t\twa[t][p] += 1;\n\t\t}\n\t}\n\t\n\t//vectorにデータを入れる\n\tfor(int i = 1; i <= T; i++){\n\t\t//v.push_back(make_pair(OK[i-1], make_pair(sum_m, i)));\n\t\tv[i-1].first = OK[i-1];\n\t\tv[i-1].second.second = i;\n\t}\n\t\n\tsort(v.begin(), v.end(), comp);\n\treverse(v.begin(), v.end());\n\t\n}//end\t\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n\nusing namespace std;\n\nint main(){\n\tvector<pair<int,pair<int,int>>>v;\n\tfor(int i=1;i<150;++i){\n\t\tfor(int j=i+1;j<=150;++j){\n\t\t\tv.push_back(make_pair(i*i+j*j,make_pair(i,j)));\n\t\t}\n\t}\n\tsort(v.begin(),v.end());\n\tint h,w;\n\twhile(cin>>h>>w,h){\n\t\tint a=h*h+w*w;\n\t\tbool flag=0;\n\t\tfor(auto x:v){\n\t\t\tif(flag){\n\t\t\t\tcout<<x.second.first<<\" \"<<x.second.second<<endl;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif(x.first==a && x.second.first==h){\n\t\t\t\tflag=1;\n\t\t\t}\n\t\t}\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<vector>\n#include<algorithm>\nusing namespace std;\nstruct team{\nint id;\nint ac;\nint time[100];\nbool ok[200];\n};\n\tint m,t,p,r;\nint or(team a,team b){//aのほうが強ければ1,bなら0,同じなら2\n\nif(a.ac>b.ac)return 1;\nelse if(a.ac<b.ac)return 0;\nint at=0,bt=0;\nfor(int i=0;i<=p;i++){\nif(a.ok[i]==true)at+=a.time[i];\nif(b.ok[i]==true)bt+=b.time[i];\n}\nif(at<bt)return 1;\nelse if(at>bt)return 0;\nelse return 2;\n}\nint main(){\n\n\twhile(true){\n\tcin>>m>>t>>p>>r;\n\tif(m+t+p+r==0)break;\n\tvector<team>ta(0);\n\tta.resize(200);\n\n\tfor(int i=0;i<=t;i++)for(int j=0;j<200;j++)ta[i].time[j]=0,ta[i].ok[j]=0;\n\tfor(int i=0;i<=t;i++)ta[i].id=i,ta[i].ac=0;\n\tfor(int i=0;i<r;i++){\n\tint a,b,c,d;\n\tcin>>a>>b>>c>>d;//a:経過時間:bチーム番号c:問題番号j:0奈良正解それ以外不正解\n\tif(d==0){\n\tta[b].time[c]+=a;\n\tta[b].ac++;\n\tta[b].ok[c]=true;\n\t}\n\telse {\n\tta[b].time[c]+=20;\n\t}\n\t}\n\tta.erase(ta.begin());\n\tfor(int i=0;i<t;i++){\n\tfor(int j=0;j<t;j++){\n\tif(or(ta[i],ta[j])==1)swap(ta[i],ta[j]);\n\tif(or(ta[i],ta[j])==2&&ta[i].id>ta[j].id)swap(ta[i],ta[j]);\n\t}\n\t}\n\tfor(int i=0;i<t-1;i++){\n\tif(or(ta[i],ta[i+1])!=2)cout<<ta[i].id<<\",\";\n\telse cout<<ta[i].id<<\"=\";\n\t}\n\tcout<<ta[t-1].id<<endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <sstream>\n#include <fstream>\n#include <algorithm>\n#include <string>\n#include <stack>\n#include <queue>\n#include <map>\n#include <list>\n#include <vector>\n#include <cstdio>\n#include <cmath>\n#include <cstdlib>\n#include <climits>\nusing namespace std;\n\nstruct score {\n\tlong teamNum;\n\tlong accepted;\n\tlong time;\n\tvector<long> miss;\n\tbool operator==(score s) const {\n\t\treturn this->accepted == s.accepted && this->time == s.time;\n\t};\n\tbool operator<(score s) const {\n\t\treturn this->accepted != s.accepted ? this->accepted > s.accepted : (this->time != s.time ? this->time < s.time : this->teamNum > s.teamNum);\n\t};\n};\n\nint main() {\n\twhile(1){\n\t\tint M, T, P, R;\n\t\tcin >> M >> T >> P >> R;\n\t\t\n\t\tif(!M && !T && !P && !R) break;\n\t\t\n\t\tscore *sc = new score[1+T];\n\t\tfor(int i = 1; i <= T; i++){\n\t\t\tsc[i].teamNum = i;\n\t\t\tsc[i].accepted = sc[i].time = 0;\n\t\t}\n\t\tfor(int i = 0; i < R; i++){\n\t\t\tint m, t, p, r;\n\t\t\tcin >> m >> t >> p >> r;\n\t\t\t\n\t\t\tif(r){\n\t\t\t\tsc[t].miss.push_back(p);\n\t\t\t}else{\n\t\t\t\tsc[t].accepted++;\n\t\t\t\tsc[t].time += m + 20 * count(sc[t].miss.begin(), sc[t].miss.end(), p);\n\t\t\t}\n\t\t}\n\t\t\n\t\tsort(&sc[1], &sc[1+T]);\n\t\tfor(int i = 1; i <= T; i++){\n\t\t\tcout << sc[i].teamNum << (i==T ? '\\n' : (sc[i]==sc[i+1] ? '=' : ','));\n\t\t}\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <stdio.h>\n\ntypedef struct{\n  int team;\n  int ans[10];\n  int time[10];\n  int anum;\n  int tnum;\n}data_t;\n\nvoid InsSort(data_t data[], int n){\n  data_t temp;\n  for(int i=1; i<n; i++){\n    for(int j=i; j>0 && data[j].team>data[j-1].team ;j--){\n      temp = data[j];\n      data[j] = data[j-1];\n      data[j-1] = temp;\n    }\n  }\n\n  for(int i=1; i<n; i++){\n    for(int j=i; j>0 && data[j].tnum<data[j-1].tnum ;j--){\n      temp = data[j];\n      data[j] = data[j-1];\n      data[j-1] = temp;\n    }\n  }\n  \n  for(int i=1; i<n; i++){\n    for(int j=i; j>0 && data[j].anum>data[j-1].anum ;j--){\n      temp = data[j];\n      data[j] = data[j-1];\n      data[j-1] = temp;\n    }\n  }\n}\n\nint main(void){\n  int M, T, P, R;\n  int m, t, p, j;\n  data_t data[50];\n  while(1){\n    scanf(\"%d%d%d%d\", &M, &T, &P, &R);\n    if(M==0 && T==0 && P==0 && R==0){\n      break;\n    }\n\n    for(int i=0; i<T; i++){\n      data[i].team = i+1;\n      data[i].anum = 0;\n      data[i].tnum = 0;\n      for(int j=0; j<10; j++){\n\tdata[i].ans[j] = 1;\n\tdata[i].time[j] = 0;\n      }\n    }\n\n    for(int i=0; i<R; i++){\n      scanf(\"%d%d%d%d\", &m, &t, &p, &j);\n      if(j == 0){\n\tdata[t-1].ans[p-1] = 0;\n\tdata[t-1].time[p-1] += m;\n      }else if(j == 1){\n\tdata[t-1].time[p-1] += 20;\n      }\n    }\n    for(int i=0; i<T; i++){\n      for(int j=0; j<P; j++){\n\tif(data[i].ans[j] == 0){\n\t  data[i].anum++;\n\t  data[i].tnum += data[i].time[j];\n\t}\n      }\n    }\n    InsSort(data, T);\n\n    printf(\"%d\", data[0].team);\n    for(int i=1; i<T; i++){\n      if(data[i].anum==data[i-1].anum && data[i].tnum==data[i-1].tnum){\n\tprintf(\"=\");\n      }else{\n\tprintf(\",\");\n      }\n      printf(\"%d\", data[i].team);\n    }\n    printf(\"\\n\");\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\nusing namespace std;\n\nclass team{\npublic:\n\tint num, ans, time;\n\tteam(int n){\n\t\tnum = n;\n\t\tans = time = 0;\n\t}\n\tbool operator<(const team &t2)const{\n\t\tif (ans != t2.ans)\n\t\t\treturn ans > t2.ans;\n\t\telse if (time != t2.time)\n\t\t\treturn time < t2.time;\n\t\telse\n\t\t\treturn num > t2.num;\n\t}\n};\n\nint main()\n{\n\tint M, T, P, R, m[2001], t[2001], p[2001], r[2001], before;\n\twhile (cin >> M >> T >> P >> R, (M || T || P || R)){\n\t\tvector<team> v;\n\t\tvector<team>::iterator pv;\n\t\t//入力\n\t\tfor (int i = 0; i < R; i++){\n\t\t\tcin >> m[i] >> t[i] >> p[i] >> r[i];\n\t\t}\n\n\t\t//各チームの時間\n\t\tfor (int i = 1; i <= T; i++){\n\t\t\tteam te = team(i);\n\t\t\tfor (int j = 0; j < R; j++){\n\t\t\t\t//正解時間の計算\n\t\t\t\tif (t[j] == i && r[j] == 0){\n\t\t\t\t\tte.time += m[j];\n\t\t\t\t\tte.ans++;\n\t\t\t\t\t//以前のペナルティを計算\n\t\t\t\t\tfor (int k = 0; k < j; k++){\n\t\t\t\t\t\tif (t[k] == i && p[k] == p[j]){\n\t\t\t\t\t\t\tte.time += 20;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tv.push_back(te);\n\t\t}\n\n\t\t//ソート\n\t\tsort(v.begin(), v.end());\n\t\tpv = v.begin();\n\t\tbefore = -1;\n\t\twhile (pv != v.end()){\n\t\t\tif (before == pv->time)\n\t\t\t\tcout << \"=\" << pv->num;\n\t\t\telse {\n\t\t\t\tif (pv == v.begin())\n\t\t\t\t\tcout << pv->num;\n\t\t\t\telse\n\t\t\t\t\tcout << \",\" << pv->num;\n\t\t\t\tbefore = pv->time;\n\t\t\t}\n\t\t\tpv++;\n\t\t}\n\t\tcout << endl;\n\t\tv.~vector();\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#ifndef _WIN32\n#include<iostream>\n#endif\n#include<cmath>\n#include<iomanip>\n#include<algorithm>\n#include<functional>\n#include<vector>\n#include<queue>\n#include<string>\n#include<stdlib.h>\n\n#define REP(i,n) for(int i=0;i<n;i++)\n\nusing namespace std;\nint M, T, P, R;\nint score[51];\nint times[51];\nint pen[51][11];//\nint con[51][11];\nint team[11]; \n\n#define SCORE 0\n#define TIME 1\n#define ID 2\nint main() {\n\tcin.tie(0);\n\tios_base::sync_with_stdio(false);\n\tcout << fixed << setprecision(30);\n\twhile (1){\n\t\tvector<vector<int>> all;\n\t\tcin >> M >> T >> P >> R;\n\t\tif (M == 0 && T == 0)break;\n\t\tREP(i, 51){\n\t\t\tREP(j, 11){\n\t\t\t\tpen[i][j] = 0;\n\t\t\t\tcon[i][j] = -1;\n\t\t\t}\n\t\t\tscore[i] = 0;\n\t\t\ttimes[i] = 0;\n\t\t}\n\n\t\tREP(i, R){\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tt--;\n\t\t\tif (m <= M){\n\t\t\t\tif (j == 0){\n\t\t\t\t\tcon[t][p] = m;\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tpen[t][p] ++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tREP(i, T){\n\t\t\tREP(j, 11){\n\t\t\t\tif (con[i][j] != -1){\n\t\t\t\t\tscore[i]++;\n\t\t\t\t\ttimes[i] += con[i][j] + 20 * pen[i][j];\n\t\t\t\t}\n\t\t\t}\n\t\t\tall.push_back({ score[i], -times[i], i+1 });\n\t\t}\n\t\tsort(all.begin(), all.end());\n\t\treverse(all.begin(), all.end());\n\t\tREP(i, T){\n\t\t\tcout << all[i][ID];\n\t\t\tif (i == T - 1){\n\t\t\t\tcout << endl;\n\t\t\t}else{\n\t\t\t\tif (all[i][SCORE] == all[i + 1][SCORE] && all[i][TIME] == all[i+1][TIME]){\n\t\t\t\t\tcout << \"=\";\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tcout << \",\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<string>\n#include<vector>\n\nusing namespace std;\n\nstruct teme {\n\tint num;\n\tint caPro;\n\tint sumtime;\n\tint pro[11];\n};\n\nvoid temeset(teme* t, int yoso) {\n\tfor (int i = 1; i <= yoso; i++) {\n\t\tt[i].num = i;\n\t\tt[i].caPro = 0;\n\t\tt[i].sumtime = 0;\n\t\tfor (int j = 1; j <= 10; j++) {\n\t\t\tt[i].pro[j] = 0;\n\t\t}\n\t}\n}\n\nint comp(const void*  A,const void* B) {\n\tconst teme* a = (const teme*)A;\n\tconst teme* b = (const teme*)B;\n\n\tif (b->caPro == a->caPro)\n\t{\n\t\tif (b->sumtime == a->sumtime) {\n\t\t\treturn b->num - a->num;\n\t\t}\n\t\treturn a->sumtime - b->sumtime;\n\t}\n\treturn b->caPro - a->caPro;\n}\n\nint main() {\n\tint w, t, p, r;\n\tvector<string>v;\n\twhile (cin >> w >> t >> p >> r, w || t || p || r) {\n\t\tteme te[51];\n\t\ttemeset(te, t);\n\t\tfor (int i = 0; i < r; i++) {\n\t\t\tint mk, tk, pk, jk;\n\t\t\tcin >> mk >> tk >> pk >> jk;\n\t\t\tif (jk == 0) {\n\t\t\t\tte[tk].caPro++;\n\t\t\t\tte[tk].sumtime += mk + te[tk].pro[pk];\n\t\t\t}\n\t\t\telse {\n\t\t\t\tte[tk].pro[pk] += 20;\n\t\t\t}\n\t\t}\n\t\tqsort(te+1, t, sizeof(teme), comp);\n\t\tstring s = \"\";\n\t\tfor (int i = 1; i <= t; i++) {\n\t\t\t//cout << te[i].num << \"???:\" << te[i].caPro << \" \" << te[i].sumtime << endl;\n\t\t\ts += to_string(te[i].num);\n\t\t\tif (i != t) {\n\t\t\t\tif (te[i].caPro == te[i + 1].caPro && te[i].sumtime == te[i + 1].sumtime) {\n\t\t\t\t\ts += \"=\";\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\ts += \",\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcout << s << endl;\n\t}\n\n\t/*for (int i = 0; i < v.size(); i++) {\n\t\tcout << v[i] << endl;\n\t}*/\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <string>\n#include <sstream>\n#include <algorithm>\n#include <vector>\n#include <utility>\n#include <cstdio>\n#include <cstring>\n#include <cmath>\n#include <ctime>\n#include <cstdlib>\n#include <map>\n#include <set>\n#include <stack>\n#include <queue>\n \nusing namespace std;\n \n#define pb(n)\tpush_back(n)\n#define mp(n,m) make_pair(n,m)\n#define fi \tfirst\n#define se \tsecond\n#define all(r) (r).begin(),(r).end()\n \n#define REP(i,s,e)\tfor(int i=(s); i<(e); i++)\n#define rep(i,n)\tREP(i,0,n)\n#define REPE(i,s,e)\tfor(int i=s; i>e; i--)\n#define repe(i,n)\tREPE(i,n,-1)\n\n\ntypedef long long ll;\ntypedef vector<int> vi;\ntypedef vector<ll> vl;\ntypedef pair<int,int> pii;\ntypedef pair<ll,ll> pll;\n \ntypedef vector<vi> vvi;\n \nconst int IMAX=((1<<30)-1)*2+1;\nconst int INF=100000000;\nconst double EPS=1e-10;\n//int mod=1000000007\n \n\n\nstruct team{\n\tint no,ac,t,miss[10];\n\tteam(int no): no(no){\n\t\tac=0,t=0;\n\t\trep(i,10) miss[i]=0;\n\t}\n\tteam(const team &x): no(x.no),ac(x.ac),t(x.t){\n\t\trep(i,10) miss[i]=x.miss[i];\n\t}\n\tbool operator <(team a){\n\t\tif(ac!=a.ac) return ac<a.ac;\n\t\tif(t!=a.t) return t>a.t;\n\t\treturn no<a.no;\n\t}\n\tvoid write(){\n\t\tcout<<no<<\" \"<<ac<<\" \"<<t<<endl;\n\t}\n};\n\nbool cmp(team a,team b){\n\treturn a<b;\n}\n\nint main(){\n\tint M,T,P,R;\n\twhile(cin>>M>>T>>P>>R){\n\t\tif(M==0&&T==0&&P==0&&R==0) break;\n\t\tvector<team> t;\n\t\trep(i,T) t.pb(i+1);\n\t\tint m,n,p,j;\n\t\trep(i,R){\n\t\t\tcin>>m>>n>>p>>j;\n\t\t\tn--,p--;\n\t\t\tif(j==0){\n\t\t\t\tt[n].ac++;\n\t\t\t\tt[n].t += t[n].miss[p]*20+m;\n\t\t\t}\n\t\t\telse t[n].miss[p]++;\n\t\t} \n\t\t//rep(i,T) t[i].write();\n\t\tsort(all(t),cmp);\n\t\treverse(all(t));\n\t\tint a=t[0].ac,b=t[0].t;\n\t\tcout<<t[0].no;\n\t\tfor(int i=1; i<T; i++){\n\t\t\tif(a==t[i].ac && b==t[i].t) cout<<\"=\";\n\t\t\telse cout<<\",\";\n\t\t\ta=t[i].ac,b=t[i].t;\n\t\t\tcout<<t[i].no;\n\t\t}\n\t\tcout<<endl;\n\t}\n\t\n}"
  },
  {
    "language": "C++",
    "code": "//\n//  main.cpp\n//  AOJ1187\n//\n//  Created by aki33524 on 2014/07/07.\n//  Copyright (c) 2014年 aki33524. All rights reserved.\n//\n\n#include <iostream>\n#include <string.h>\n#include <algorithm>\nusing namespace std;\n\ntypedef struct {int m, t, p; bool ac;} Submit;\n\ntypedef struct _Team{\n    int solved, penalty[10], alltime, id;\n    \n    bool operator<(const _Team& right) const{\n        return (solved < right.solved) || (solved == right.solved && alltime > right.alltime);\n    }\n    bool operator==(const _Team& right) const{\n        return solved == right.solved && alltime == right.alltime;\n    }\n    \n} Team;\n\nint M, T, P, R;\n\nSubmit submits[2001];\nTeam teams[50];\n\nvoid solve(){\n    memset(teams, 0, sizeof(teams));\n    for(int t=0; t<T; t++)\n        teams[t].id = t+1;\n    \n    for(int r=0; r<R; r++){\n        Submit &submit = submits[r];\n        Team &team = teams[submit.t];\n        \n        if(submit.ac){\n            team.solved++;\n            team.alltime += team.penalty[submit.p] + submit.m;\n        }else{\n            team.penalty[submit.p] += 20;\n        }\n    }\n    \n    sort(teams, teams+T);\n    \n    for(int t=T-1; 0<=t; t--){\n        Team &team = teams[t];\n        if(0<t){\n            cout << team.id;\n            cout << (team==teams[t-1] ? \"=\" : \",\");\n        }else{\n            cout << team.id << endl;\n        }\n    }\n}\n\nint main(int argc, const char * argv[])\n{\n    while(cin>>M>>T>>P>>R, M|T|P|R){\n        for(int r=0; r<R; r++){\n            Submit &s = submits[r];\n            int m, t, p, j;\n            cin>>m>>t>>p>>j;\n            s.m = m;\n            s.t = t-1;\n            s.p = p-1;\n            s.ac = j==0;\n        }\n        solve();\n    }\n    \n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "//#include <bits/stdc++.h>\n\n#include <iostream>\n#include <algorithm>\n\n#include <bitset>\n#include <vector>\n#include <set>\n#include <map>\n#include <unordered_set>\n#include <unordered_map>\n#include <stack>\n#include <queue>\n#include <deque>\n#include <cstring>\n#include <string>\n#include <utility>\n#include <array>\n#include <complex>\n#include <valarray>\n\n#include <cassert>\n#include <cmath>\n#include <functional>\n#include <iomanip>\n#include <chrono>\n#include <random>\n#include <numeric>\n\n#include<memory>\n\n\nusing namespace std;\n  #define int long long\n\ntypedef long long ll;\ntypedef unsigned long long ull;\n//typedef unsigned __int128 HASH;\ntypedef pair<int,int> pii;\ntypedef pair<ll, ll> pll;\ntypedef pair<ull, ull> pullull;\ntypedef pair<ll,int> plli;\ntypedef pair<double,int> pdi;\ntypedef pair<long double, int> pdbi;\ntypedef pair<int,pii> pipii;\ntypedef pair<ll,pll> plpll;\ntypedef vector<int> vi;\ntypedef vector<ll> vll;\ntypedef vector<vi> vvi;\ntypedef vector<vvi> vvvi;\ntypedef vector<pii> vpii;\ntypedef vector<vector<int>> mat;\n\n#define rep(i,n) for (int i=0;i<(n);i++)\n#define rep2(i,a,b) for (int i=(a);i<(b);i++)\n#define rrep(i,n) for (int i=(n);i>0;i--)\n#define rrep2(i,a,b) for (int i=(a);i>b;i--)\n#define pb push_back\n#define fi first\n#define se second\n#define all(a) (a).begin(),(a).end()\n#define rall(a) (a).rbegin(),(a).rend()\n\nconst ll hmod1 = 999999937;\nconst ll hmod2 = 1000000000 + 9;\nconst int INF = 1<<30;\nconst ll INFLL = 1LL<<62;\nconst long double EPS = 1e-12;\nconst ll mod = 1000000000 + 7;\n//const ll mod = 998244353;\nconst int dx4[4] = {1, 0, -1, 0};\nconst int dy4[4] = {0, 1, 0, -1};\nconst int dx8[8] = {1, 1, 1, 0, 0, -1, -1, -1};\nconst int dy8[8] = {0, 1, -1, 1, -1, 0, 1, -1};\nconst long double pi = 3.141592653589793;\n\n#define addm(X, Y) (X) = ((X) + ((Y) % mod) + mod) % mod\n#define inside(y, x, h, w) (0 <= (y) && (y) < (h) && 0 <= (x) && (x) < (w)) ? true : false\n\n//debug\n#define DEBUG\n\n#define DUMPOUT cerr\n\n#ifdef DEBUG\n#define dump(...) DUMPOUT<<#__VA_ARGS__<<\" :[\"<<__FUNCTION__<<\":\"<<__LINE__<<\"]\"<<endl; DUMPOUT<<\"    \"; dump_func(__VA_ARGS__)\n#else\n#define dump(...)\n#endif\n\nvoid dump_func() {DUMPOUT << endl;};\n\ntemplate <class Head, class... Tail> void dump_func(Head&& head, Tail&&... tail) {\n    DUMPOUT << head;\n    if (sizeof...(Tail) == 0) DUMPOUT << \" \";\n    else DUMPOUT << \", \";\n    dump_func(std::move(tail)...);\n}\n\n//ostream\ntemplate<typename T> ostream& operator << (ostream& os, vector<T>& vec) {\n    os << \"[\"; for (int i = 0; i<vec.size(); i++) os << vec[i] << (i + 1 == vec.size() ? \"\" : \", \"); os << \"]\";\n    return os;\n}\n\ntemplate<typename T, typename U> ostream& operator << (ostream& os, pair<T, U>& pair_var) {\n    os << \"(\" << pair_var.first << \", \" << pair_var.second << \")\";\n    return os;\n}\n\ntemplate<typename T, typename U> ostream& operator << (ostream& os, map<T, U>& map_var) {\n    os << \"[\";\n    for (auto itr = map_var.begin(); itr != map_var.end(); itr++) {\n        os << \"(\" << itr->first << \", \" << itr->second << \")\"; itr++;  if(itr != map_var.end()) os << \", \"; itr--;\n    }\n    os << \"]\";\n    return os;\n}\n\ntemplate<typename T> ostream& operator << (ostream& os, set<T>& set_var) {\n    os << \"[\";\n    for (auto itr = set_var.begin(); itr != set_var.end(); itr++) {\n        os << *itr; ++itr; if(itr != set_var.end()) os << \", \"; itr--;\n    }\n    os << \"]\";\n    return os;\n}\n\n\nsigned main() {\n  cin.tie(0);\n  ios::sync_with_stdio(false);\n  while (true) {\n    int M, T, P, R;\n    cin >> M >> T >> P >> R;\n    if (M == 0) break;\n    vector<vector<int>> AC(T, vector<int>(P, -1));\n    vector<int> cntAC(T, 0);\n    vector<vector<int>> pena(T, vector<int>(P, 0));\n    rep(i, R) {\n      int m, t, p, j;\n      cin >> m >> t >> p >> j;\n      t--;p--;\n      if (j == 0) {\n        if (AC[t][p] == -1) {\n          cntAC[t]++;\n          AC[t][p] = m + 20LL * pena[t][p];\n        }\n      }\n      else {\n        pena[t][p]++;\n      }\n    }\n    vector<pair<int, pii>> ans;\n    rep(i, T) {\n      int sum = 0;\n      rep(j, P) {\n        if (AC[i][j] == -1) continue;\n        sum += AC[i][j];\n      }\n      ans.push_back({cntAC[i], {-sum, i}});\n    }\n    sort(rall(ans));\n    bool checked[T] = {};\n    string order = \"\";\n    //rep(i, T) cerr << ans[i].se.se << \" \" << ans[i].fi <<  \" \" << ans[i].se.fi << endl;\n    rep(i, T) {\n      if (checked[i]) continue;\n      int cnt = ans[i].fi;\n      int tm = ans[i].se.fi;\n      int idx = ans[i].se.se;\n      checked[i] = true;\n      order += ',';\n      order += to_string(idx+1);\n      //cout << \",\" << idx << endl;\n      rep2(j, i+1, T) {\n        if (cnt == ans[j].fi && tm == ans[j].se.fi) {\n          order += '=';\n          order += to_string(ans[j].se.se+1);\n          checked[j] = true;\n        }\n        else break;\n      }\n    }\n    rep2(i, 1, order.size()) cout << order[i];\n    cout << endl;\n  }\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\nint main() {\n\tint m, t, p, r;\n\twhile (cin >> m >> t >> p >> r) {\n\t\tif (m == 0) break;\n\t\tvector<pair<int, int>> cnt(55);\n\t\tfor (int i = 0; i < t; i++) {\n\t\t\tcnt[i] = make_pair(0, i);\n\t\t}\n\t\tint time[55] = {};\n\t\tint pena[55][20] = {};\n\t\tfor (int i = 0; i < r; i++) {\n\t\t\tint a, b, c, d;\n\t\t\tcin >> a >> b >> c >> d;\n\t\t\tb--;\n\t\t\tif (d == 0) {\n\t\t\t\ttime[b] += a + 20 * pena[b][c];\n\t\t\t\tcnt[b].first++;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tpena[b][c]++;\n\t\t\t}\n\t\t}\n\t\tsort(cnt.begin(), cnt.end());\n\t\treverse(cnt.begin(), cnt.end());\n\t\tvector<vector<pair<int,int>>> ac(15);\n\t\tfor (int i = 0; i < t; i++) {\n\t\t\tac[cnt[i].first].push_back(make_pair(time[cnt[i].second],-cnt[i].second));\n\t\t}\n\t\tbool win = true;\n\t\tfor (int i = p; i >= 0; i--) {\n\t\t\tif (ac[i].empty()) continue;\n\t\t\tsort(ac[i].begin(), ac[i].end());\n\t\t\tif (!win) cout << \",\";\n\t\t\tif (win) win = false;\n\t\t\tcout << -ac[i][0].second +1;\n\t\t\t\n\t\t\tfor (int j = 1; j < ac[i].size(); j++) {\n\t\t\t\tif (ac[i][j - 1].first == ac[i][j].first) {\n\t\t\t\t\tcout << \"=\";\n\t\t\t\t}\n\t\t\t\telse cout << \",\";\n\t\t\t\tcout << -ac[i][j].second + 1;\n\t\t\t}\n\t\t}\n\t\tcout << endl;\n\t}\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define rep(i,a,n) for(int i=a;i<n;i++)\n#define repb(i,a,b) for(int i=a;i>=b;i--)\n#define all(a) a.begin(),a.end()\n#define o(a) cout<<a<<endl\n#define int long long\n#define fi first\n#define se second\nusing namespace std;\ntypedef vector<int> vi;\ntypedef vector<vi> vvi;\ntypedef pair<int,int> pii;\n\nstruct data {\n\tint score, time, team;\n\tdata(int score, int time, int  team) :score(score), time(time), team(team) {}\n};\n\nbool cmp(data d1, data d2){\n\tif(d1.score == d2.score){\n\t\tif(d1.time == d2.time) return d1.team > d2.team;\n\t\treturn d1.time < d2.time;\n\t}\n\treturn d1.score > d2.score;\n}\n\nsigned main() {\n\tint M, T, P, R, m, t, p, r;\n\twhile (1) {\n\t\tcin >> M >> T >> P >> R;\n\t\tif (M + T + P + R == 0)  break;\n\t\tint wa[51][11] = { 0 };\n\t\tvector<data> d;\n\t\trep(i, 0, T) {\n\t\t\td.push_back(data(0, 0, 0));\n\t\t\td[i].team = i + 1;\n\t\t}\n\t\trep(i, 0, R) {\n\t\t\tcin >> m >> t >> p >> r;\n\t\t\tt--; p--;\n\t\t\tif (r == 0) {\n\t\t\t\td[t].score++;\n\t\t\t\td[t].time += m + wa[t][p] * 20;\n\t\t\t\t//cout << \"  \" << t + 1 << \" \" << d[t].score << \" \" << d[t].time << endl;\n\t\t\t}\n\t\t\telse {\n\t\t\t\twa[t][p]++;\n\t\t\t}\n\t\t}\n\t\tsort(all(d), cmp);\n\t\trep(i, 0, T) {\n\t\t\tif (i == 0) {\n\t\t\t\tcout << d[i].team;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (d[i].score == d[i - 1].score && d[i].time == d[i - 1].time) {\n\t\t\t\tcout << \"=\";\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcout << \",\";\n\t\t\t}\n\t\t\tcout << d[i].team;\n\t\t}\n\t\tcout << endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<string.h>\nusing namespace std;\n\nconst int INF=50000000;\n\nint data[51][12];\n\nint main(){\n\tint M,T,P,R;\n\twhile(cin>>M>>T>>P>>R && M){\n\t\tfill((int*)data,(int*)(data+12),0);\n\t\tfor(int i=0;i<R;i++){\n\t\t\tint m,t,p,j;\n\t\t\tcin>>m>>t>>p>>j;\n\t\t\tif(j==0){\n\t\t\t\tdata[t][0]++;\n\t\t\t\tdata[t][11]+=m+data[t][p]*20;\n\t\t\t}\n\t\t\telse data[t][p]++;\n\t\t}\n\t\tint prev[2]={INF,0};\n\t\tfor(int i=0;i<T;i++){\n\t\t\tint ans=0;\n\t\t\tint now[2]={0,INF};\n\t\t\tfor(int j=T;j>=0;j--){\n\t\t\t\tif(data[j][0]>now[0]){\n\t\t\t\t\tnow[0]=data[j][0];\n\t\t\t\t\tnow[1]=data[j][11];\n\t\t\t\t\tans=j;\n\t\t\t\t}\n\t\t\t\telse if(data[j][0]==now[0] && data[j][11]<now[1]){\n\t\t\t\t\tnow[1]=data[j][11];\n\t\t\t\t\tans=j;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(i){\n\t\t\t\tif(memcmp(now,prev,sizeof(now))==0)cout<<\"=\";\n\t\t\t\telse cout<<\",\";\n\t\t\t}\n\t\t\tcout<<ans;\n\t\t\tmemcpy(prev,now,sizeof(now));\n\t\t\tdata[ans][0]=-1;\n\t\t}\n\t\tcout<<endl;\n\t}\n\tcout<<endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\n#define F first\n#define S second\n#define pii pair<int, int>\n#define eb emplace_back\n#define all(v) v.begin(), v.end()\n#define rep(i, n) for (int i = 0; i < n; ++i)\n#define rep3(i, l, n) for (int i = l; i < n; ++i)\n#define chmax(a, b) a = max(a, b)\n#define chmin(a, b) a = min(a, b)\n#define out(a) cout << a << endl\n#define SZ(v) (int)v.size()\n#define inf (int)(1e9+7)\n\n\nint main() {\n    int M, T, P, R;\n    while (cin >> M && M) {\n        cin >> T >> P >> R;\n        if (R == 0) {\n            cout << T;\n            rep3(i, 1, T) {\n                cout << \"=\" << T - i;\n            }\n            cout << endl;\n            continue;\n        }\n        set<int> s[T]; //解いた問題\n        int time[T]; fill_n(time, T, 0);\n        vector<pair<pii, pii> > v(R);\n        rep(i, R) {\n            //チーム、問題、時間、yes or no\n            cin >> v[i].S.F >> v[i].F.F >> v[i].F.S >> v[i].S.S;\n            //0indexed\n            v[i].F.F--;\n            v[i].S.S *= -1; //0が一番下に来ないと!!!\n        }\n        sort(all(v));\n        //cout << endl; rep(i, R) out(v[i].F.F + 1 << \" \" << v[i].F.S << \" \" << v[i].S.F << \" \" << v[i].S.S);\n        \n        \n        \n        int pena = 0;\n        if (v[0].S.S == 0) {\n            s[v[0].F.F].insert(v[0].F.S);\n            time[v[0].F.F] = v[0].S.F;\n        } else {\n            pena += 20;\n        }\n        rep3(i, 1, R) {\n            if (!(v[i].F.F == v[i - 1].F.F && v[i].F.S == v[i - 1].F.S)) {\n                pena = 0;\n            }\n            if (v[i].S.S == 0) {\n                time[v[i].F.F] += pena + v[i].S.F;\n                s[v[i].F.F].insert(v[i].F.S);\n                pena = 0;\n            } else {\n                pena += 20;\n            }\n        }\n        \n        \n        \n        vector<pair<int, pii> > solve;\n        rep(i, T) {\n            solve.eb(SZ(s[i]), pii(-time[i], i + 1));\n        }\n        sort(all(solve));\n        reverse(all(solve));\n        //cout << endl; rep(i, T) out(solve[i].F << \" \" << solve[i].S.F << \" \" << solve[i].S.S + 1);\n        cout << solve[0].S.S;\n        rep3(i, 1, T) {\n            if (solve[i].F == solve[i - 1].F && solve[i].S.F == solve[i - 1].S.F) {\n                cout << \"=\" << solve[i].S.S;\n            } else {\n                cout << \",\" << solve[i].S.S;\n            }\n        }\n        cout << endl;\n    }\n}\n\n\n\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<string>\n#include<cstdio>\n#include<algorithm>\n#include<stack>\n#include<queue>\n#include<vector>\n#include<cmath>\n#include<utility>\n#include<set>\n#include<complex>\n#include<map>\n#define vi vector<int>\n#define vvi vector<vector<int> >\n#define ll long long int\n#define vl vector<ll>\n#define vvl vector<vector<ll>>\n#define vb vector<bool>\n#define vc vector<char>\n#define vs vector<string>\n#define ld long double\n#define INF 1e9\n#define EPS 0.0000000001\n#define rep(i,n) for(int i=0;i<n;i++)\n#define loop(i,s,n) for(int i=s;i<n;i++)\n#define CC puts(\"-------ok--------\");\n#define all(in) in.begin(), in.end()\nusing namespace std;\ntypedef pair<int, int> pii;\n#define MAX 99999999\ntypedef struct{\n    int time;\n    int num;\n    int qst;\n    int judge;\n}data;\ntypedef  pair<int, pair<int, int>>pi; //  seikai time number\nint main(){\n    int m,t,p,r;\n    while(cin>>m>>t>>p>>r,m+t+r+p){\n    vector<data>v;\n    vvi team(60,vi(60,0));\n    vvi lost(1000,vi(100,0));\n    rep(i,r){\n        data temp;\n        cin>>temp.time>>temp.num>>temp.qst>>temp.judge; v.push_back(temp);\n        if(!(v[i].judge)){\n            team[v[i].num][v[i].qst]=1;\n            lost[v[i].num][v[i].qst]+=v[i].time;\n        }else{\n            lost[v[i].num][v[i].qst]+=20;\n        }\n    }\n    vector<pi>ans(100,pi(0,pii(-INF,0)));\n\n    for(int i=1; i<=t;i++){\n        ans[i].second.second=i;\n        for(int j=1; j<=p;j++)\n            if(team[i][j]){\n                ans[i].first++; ans[i].second.first-=lost[i][j]; ans[i].second.second=i;\n        }\n    }\n    sort(ans.begin()+1,ans.begin()+t+1,greater<pi>());\n        rep(i,t){\n            if(i){\n                if(ans[i].first==ans[i+1].first&&ans[i].second.first==ans[i+1].second.first)\n                    cout<<\"=\";\n                else\n                    cout<<\",\";\n            }\n            cout<<ans[i+1].second.second;\n        }\n        cout<<endl;\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define rep(i,n)for(int i=0;i<n;i++)\nusing namespace std;\n\nstruct st {\n\tint id, score, time, wrong[10];\n};\nint main() {\n\tint M, T, P, R;\n\twhile (scanf(\"%d%d%d%d\", &M, &T, &P, &R), M) {\n\t\tst team[50]{};\n\t\trep(i, T)team[i].id = i + 1;\n\t\trep(i, R) {\n\t\t\tint m, t, p, j; scanf(\"%d%d%d%d\", &m, &t, &p, &j);\n\t\t\tt--; p--;\n\t\t\tif (j)team[t].wrong[p]++;\n\t\t\telse {\n\t\t\t\tteam[t].score++;\n\t\t\t\tteam[t].time += m + 20 * team[t].wrong[p];\n\t\t\t}\n\t\t}\n\t\tsort(team, team + T, [](st a, st b) {\n\t\t\tif (a.score != b.score)return a.score > b.score;\n\t\t\tif (a.time != b.time)return a.time < b.time;\n\t\t\treturn a.id > b.id;\n\t\t});\n\t\tprintf(\"%d\", team[0].id);\n\t\tfor (int i = 1; i < T; i++) {\n\t\t\tif (team[i - 1].score == team[i].score&&team[i - 1].time == team[i].time)\n\t\t\t\tprintf(\"=\");\n\t\t\telse printf(\",\");\n\t\t\tprintf(\"%d\", team[i].id);\n\t\t}\n\t\tprintf(\"\\n\");\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\nint main()\n{\n    int M, T, P, R;\n    \n    while (scanf(\"%d %d %d %d\", &M, &T, &P, &R) && M){\n        vector<pair<pair<int, int>, int> > record(T);\n        int wa[16][64] = {0};\n        \n        for (int i = 0; i < T; i++) record[i].second = -(i + 1);\n        \n        for (int i = 0; i < R; i++){\n            int m, t, p, j;\n            scanf(\"%d %d %d %d\", &m, &t, &p, &j);\n            if (j) wa[t - 1][p] += 20;\n            else {\n                record[t - 1].first.first--;\n                record[t - 1].first.second += m + wa[t - 1][p];\n            }\n        }\n        \n        sort(record.begin(), record.end());\n        \n        for (int i = 0; i < T; i++){\n            printf(\"%d\", -record[i].second);\n            if (i + 1 < T && record[i].first == record[i + 1].first) printf(\"=\");\n            else if (i + 1 < T) printf(\",\");\n            else printf(\"\\n\");\n        }\n    }\n    \n    return (0);\n}"
  },
  {
    "language": "C++",
    "code": "#include <functional>\n#include <algorithm>\n#include <iostream>\n#include <numeric>\n#include <iomanip>\n#include <utility>\n#include <cstdlib>\n#include <sstream>\n#include <bitset>\n#include <vector>\n#include <cstdio>\n#include <ctime>\n#include <queue>\n#include <deque>\n#include <cmath>\n#include <stack>\n#include <list>\n#include <map>\n#include <set>\n\nusing namespace std;\n\ntypedef vector<int> vi;\ntypedef pair<int,int> pii;\ntypedef long long ll;\n\n#define dump(x)  cerr << #x << \" = \" << (x) << endl\n#define rep(i,n) for(int i=0;i<(n);i++)\n#define all(a)  (a).begin(),(a).end()\n#define pb push_back\n#define sz size()\n\nclass TEAM{\npublic:\n    int pena[20]={};\n    int sum=0;\n    int time=0;\n    int num=0;\n    int point=0;\n};\n\nint main(){\n    int M,T,P,R;\n    while(cin>>M>>T>>P>>R){\n        TEAM team[100];\n        \n        \n        if(M==0 && T==0 && P==0 && R==0)break;\n        \n        rep(i,T)team[i].num=i+1;\n        \n        rep(i,R){\n            int m,t,p,j;\n            cin>>m>>t>>p>>j;\n            t--;\n            if(j==0){\n                team[t].sum++;\n                team[t].time+=m+team[t].pena[p]*20;\n            }else{\n                team[t].pena[p]++;\n            }\n        }\n        \n        rep(i,T){\n            team[i].point=team[i].sum*100000000 + 10000000-team[i].time;\n        }\n\n        for(int i=0;i<T-1;i++){\n            for(int j=T-1;j>i;j--){\n                if(team[j].point<team[j-1].point)swap(team[j],team[j-1]);\n            }\n        }\n        \n        cout<<team[T-1].num;\n//        cout<<\" \"<<team[T-1].point<<endl;\n        for(int i=T-2;i>=0;i--){\n            if(team[i+1].point==team[i].point){\n                cout<<\"=\"<<team[i].num;\n//                cout<<\" \"<<team[i].point<<endl;\n            }\n            else{\n                cout<<\",\"<<team[i].num;\n//                cout<<\" \"<<team[i].point<<endl;\n            }\n        }\n        cout<<endl;\n    }\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define f first \n#define sf second.first \n#define ss second.second \nusing namespace std;\ntypedef pair<int,int> P;\ntypedef pair<int,P > iP;\n\nint main(){\n  int t,p,r,b;\n  while(cin>>b>>t>>p>>r&&t){\n    iP a[51];\n    int k[11][51]={};\n    a[0]=iP(-1,P(-1,-1));\n    for(int i=1;i<=t;i++)a[i]=iP(0,P(0,i));\n    for(int i=0;i<r;i++){\n      int ti,pi,m,s;\n      cin>>m>>ti>>pi>>s;\n      if(!s)a[ti].f++,a[ti].sf-=m+k[pi][ti]*20;\n      else k[pi][ti]++;\n    }\n    sort(a+1,a+t+1);\n    for(int i=t;i>0;i--){\n      cout<<a[i].ss;\n      if(i!=1)\n\tif(a[i+1].f==a[i].f&&a[i+1].sf==a[i].sf)cout<<\"=\";\n\telse cout<<\",\";\n    }\n    cout<<endl;\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <vector>\n#include <utility>\n#include <iostream>\n#include <algorithm>\n#include <functional>\n\nusing namespace std;\n\nint main()\n{\n\twhile (true)\n\t{\n\t\tint M, T, P, R;\n\n\t\tcin >> M >> T >> P >> R;\n\n\t\tif (M == 0 && T == 0 && P == 0 && R == 0) { break; }\n\n\t\tvector<vector<int> > time_(T, vector<int>(P, 0));\n\t\tvector<vector<bool> > cor(T, vector<bool>(P, false));\n\n\t\tvector<int> score(T, 0);\n\t\tvector<int> rank(T, 0);\n\n\t\tfor (int i = 0; i < R; i++) \n\t\t{ \n\t\t\tint m, t, p, j;\n\n\t\t\tcin >> m >> t >> p >> j;\n\n\t\t\tif (j == 0)\n\t\t\t{\n\t\t\t\ttime_[t - 1][p - 1] += m;\n\n\t\t\t\tcor[t - 1][p - 1] = true;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\ttime_[t - 1][p - 1] += 20;\n\t\t\t}\n\t\t}\n\n\t\tfor (int i = 0; i < T; i++)\n\t\t{\n\t\t\tfor (int j = 0; j < P; j++)\n\t\t\t{\n\t\t\t\tif (cor[i][j] == true)\n\t\t\t\t{ \n\t\t\t\t\tscore[i] += 100000; \n\n\t\t\t\t\tscore[i] -= time_[i][j];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor (int i = 0; i < T; i++) { rank[i] = i + 1; }\n\n\t\tfor (int i = 0; i < T; i++)\n\t\t{\n\t\t\tfor (int j = i + 1; j < T; j++)\n\t\t\t{\n\t\t\t\tif (score[i] < score[j])\n\t\t\t\t{\n\t\t\t\t\tswap(score[i], score[j]);\n\n\t\t\t\t\tswap(rank[i], rank[j]);\n\t\t\t\t}\n\t\t\t\telse if (score[i] == score[j] && rank[i] < rank[j])\n\t\t\t\t{\n\t\t\t\t\tswap(rank[i], rank[j]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor (int i = 0; i < T; i++)\n\t\t{\n\t\t\tif (i + 2 == T)\n\t\t\t{\n\t\t\t\tcout << rank[i] << endl;\n\t\t\t}\n\t\t\telse if (score[i] == score[i + 1])\n\t\t\t{\n\t\t\t\tcout << rank[i] << '=';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tcout << rank[i] << ',';\n\t\t\t}\n\t\t}\n\t}\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\nusing namespace std;\n\nstruct team{\n\tint n, c, t, p;\n};\n\nbool operator<(const team team1, const team team2){\n\tbool rep;\n\tif(team1.c == team2.c){\n\t\trep = (team1.t == team2.t) ? team1.n > team2.n : team1.t < team2.t;\n\t}else{\n\t\trep = (team1.c > team2.c);\n\t}\n\treturn rep;\n}\n\nint main(){\n\tint M, T, P, R;\n\twhile( cin >> M >> T >> P >> R, M || T || P || R ){\n\t\tvector<team> teams(T);\n\t\tfor(int i = 0; i < T; i++){\n\t\t\tteams[i].n = i+1;\n\t\t\tteams[i].c = 0;\n\t\t\tteams[i].t = 0;\n\t\t\tteams[i].p = 0;\n\t\t}\n\t\tfor(int i = 0; i < R; i++){\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tif( j == 0 ){\n\t\t\t\tteams[t-1].c++;\n\t\t\t\tteams[t-1].t += m + 20 * teams[t-1].p;\n\t\t\t\tteams[t-1].p = 0;\n\t\t\t}else{\n\t\t\t\tteams[t-1].p++;\n\t\t\t}\n\t\t}\n\t\tsort(teams.begin(), teams.end());\n\t\tcout << teams[0].n;\n\t\tfor(int i = 1; i < T; i++){\n\t\t\tif( teams[i].c == teams[i-1].c && teams[i].t == teams[i-1].t ) cout << \"=\";\n\t\t\telse cout << \",\";\n\t\t\tcout << teams[i].n;\n\t\t}\n\t\tcout << endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\n#include<cstdio>\n#include<cmath>\n#include<math.h>\n#include<string>\n#include<string.h>\n#include<stack>\n#include<queue>\n#include<vector>\n#include<utility>\n#include<set>\n#include<map>\n#include<stdlib.h>\n#include<iomanip>\n\nusing namespace std;\n\n#define ll long long\n#define ld long double\n#define EPS 0.0000000001\n#define INF 1e9\n#define rep(i,n) for(i=0;i<n;i++)\n#define loop(i,a,n) for(i=a;i<n;i++)\n#define all(in) in.begin(),in.end()\n#define shosu(x) fixed<<setprecision(x)\n\ntypedef vector<int> vi;\ntypedef pair<int,int> pii;\nint main(void) {\n  int i,j;\n  int m,t,p,r;\n  while(1){\n    cin>>m>>t>>p>>r;\n    if(m==0 && t==0 && p==0 && r==0)break;\n    pair<pii,int> p[50];\n    rep(i,t){\n      p[i].second=i+1;\n      p[i].first.first=p[i].first.second=0;\n    }\n    int penalty[50][10]={};//team,prob                       \n    rep(i,r){\n      int time,team,pn,judge;\n      cin>>time>>team>>pn>>judge;\n      team--;pn--;\n      if(judge){//WA                                         \n        penalty[team][pn]++;\n      }else{//AC                                             \n        p[team].first.first++;\n        p[team].first.second-=time+penalty[team][pn]*20;\n      }\n    }\n    sort(p,p+t);\n    cout<<p[t-1].second;\n    for(i=t-2;i>=0;i--)\n      if(p[i].first.first==p[i+1].first.first &&\n         p[i].first.second==p[i+1].first.second)\n        cout<<\"=\"<<p[i].second;\n      else\n        cout<<\",\"<<p[i].second;\n    cout<<endl;\n  }\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\nint x[99][2],y[99][20],n,a,b,c,d,e,f,g,h,p,i,j,k;\nint main() {\nwhile(true) {\nmemset(x,0,sizeof(x));memset(y,0,sizeof(y));\ncin>>n>>a>>b>>c;\nif(n==0){break;}\nfor(i=0;i<c;i++){\ncin>>d>>e>>f>>g;\nif(g!=0){y[e][f]+=20;}\nelse{x[e][1]+=d+y[e][f];x[e][0]++;}\n}p=0;\nfor(i=b;i>=0;i--){\nfor(j=0;j<=99999;j++){h=0;\nfor(k=a;k>0;k--){\nif(x[k][0]==i&&x[k][1]==j){\nif(h>=1){cout<<'=';}else if(p>=1){cout<<',';}cout<<k;p++;h++;\n}\n}}}\ncout<<endl;}}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\nusing namespace std;\n\nint main()\n{\n\twhile(true){\n\t\tint M, T, P, R;\n\t\tcin >> M >> T >> P >> R;\n\n\t\tif(M==0 && T==0 && P==0 && R==0)\n\t\t\tbreak;\n\n\t\tint CP[50], TT[50], PT[50][10];\n\t\tfor(int i=0; i<T; i++){\n\t\t\tCP[i] = TT[i] = 0;\n\t\t\tfor(int j=0; j<P; j++)\n\t\t\t\tPT[i][j] = 0;\n\t\t}\n\n\t\tfor(int i=0; i<R; i++){\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >> j;\n\n\t\t\tif(j==0){\n\t\t\t\tCP[t-1]++;\n\t\t\t\tTT[t-1] += (m+PT[t-1][p-1]);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tPT[t-1][p-1] += 20;\n\t\t\t}\n\t\t}\n\n\t\tint tnow, tpre = -1;\n\t\tbool flg[50];\n\t\tfor(int i=0; i<T; i++)\n\t\t\tflg[i] = false;\n\n\t\tfor(int i=0; i<T; i++){\n\t\t\ttnow = -1;\n\t\t\tfor(int j=0; j<T; j++){\n\t\t\t\tif(flg[j])\n\t\t\t\t\tcontinue;\n\n\t\t\t\tif(tnow==-1){\n\t\t\t\t\ttnow = j;\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tif(CP[j]>CP[tnow] || (CP[j]==CP[tnow] && TT[j]<=TT[tnow])){\n\t\t\t\t\t\ttnow = j;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(tpre!=-1){\n\t\t\t\tif(CP[tnow]==CP[tpre] && TT[tnow]==TT[tpre])\n\t\t\t\t\tcout << '=';\n\t\t\t\telse\n\t\t\t\t\tcout << ',';\n\t\t\t}\n\t\t\tcout << tnow+1;\n\n\t\t\tflg[tnow] = true;\n\t\t\ttpre = tnow;\n\t\t}\n\t\tcout << endl;\n\t}\n\n\treturn 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <iostream>\n#include <sstream>\n#include <fstream>\n#include <iomanip>\n#include <algorithm>\n#include <cmath>\n#include <string>\n#include <vector>\n#include <list>\n#include <queue>\n#include <stack>\n#include <set>\n#include <map>\n#include <bitset>\n#include <numeric>\n#include <climits>\n#include <cfloat>\n#include <functional>\nusing namespace std;\n\nclass Data\n{\npublic:\n    int id;\n    int solve;\n    int penalty;\n    vector<int> wrong;\n    Data(int id, int problemNum){\n        this->id = id;\n        solve = 0;\n        penalty = 0;\n        wrong.assign(problemNum, 0);\n    }\n    bool operator<(const Data& d) const{\n        return make_pair(-solve, make_pair(penalty, -id)) < make_pair(-d.solve, make_pair(d.penalty, -d.id));\n    }\n};\n\nint main()\n{\n    for(;;){\n        int endTime, n, problemNum, query;\n        cin >> endTime >> n >> problemNum >> query;\n        if(endTime == 0)\n            return 0;\n\n        vector<Data> d;\n        for(int i=0; i<n; ++i)\n            d.push_back(Data(i+1, problemNum));\n\n        while(--query >= 0){\n            int time, team, problem, judge;\n            cin >> time >> team >> problem >> judge;\n            -- team;\n            -- problem;\n\n            if(judge == 0){\n                ++ d[team].solve;\n                d[team].penalty += time + d[team].wrong[problem] * 20;\n            }\n            else{\n                ++ d[team].wrong[problem];\n            }\n        }\n\n        sort(d.begin(), d.end());\n        cout << d[0].id;\n        for(int i=1; i<n; ++i){\n            if(d[i].solve == d[i-1].solve && d[i].penalty == d[i-1].penalty)\n                cout << '=';\n            else\n                cout << ',';\n            cout << d[i].id;\n        }\n        cout << endl;\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <string>\n#include <vector>\n#include <algorithm>\n#include <cmath>\n#include <cstdio>\n#include <functional>\n#include <numeric>\n#include <stack>\n#include <queue>\n#include <map>\n#include <set>\n#include <utility>\n#include <sstream>\n#include <complex>\n#include <fstream>\n#include <bitset>\n#include <time.h>\n#include <tuple>\n#include <iomanip>\n\nusing namespace std;\n\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef pair<ll, ll> P;\ntypedef vector<ll> V;\ntypedef complex<double> Point;\n\n#define PI acos(-1.0)\n#define EPS 1e-10\nconst ll INF = 1e12;\nconst ll MOD = 1e9 + 7;\n\n#define FOR(i,a,b) for(int i=(a);i<(b);i++)\n#define rep(i,N) for(int i=0;i<(N);i++)\n#define ALL(s) (s).begin(),(s).end()\n#define EQ(a,b) (abs((a)-(b))<EPS)\n#define EQV(a,b) ( EQ((a).real(), (b).real()) && EQ((a).imag(), (b).imag()) )\n#define fi first\n#define se second\n#define N_SIZE (1LL << 20)\n#define NIL -1\n\nll sq(ll num) { return num*num; }\nll mod_pow(ll x, ll n) {\n\tif (n == 0)return 1;\n\tif (n == 1)return x%MOD;\n\tll res = sq(mod_pow(x, n / 2));\n\tres %= MOD;\n\tif (n % 2 == 1) {\n\t\tres *= x;\n\t\tres %= MOD;\n\t}\n\treturn res;\n}\nll mod_add(ll a, ll b) { return (a + b) % MOD; }\nll mod_sub(ll a, ll b) { return (a - b + MOD) % MOD; }\nll mod_mul(ll a, ll b) { return a*b % MOD; }\n\nll m, t, p, r;\n\nbool ff(const pair<P, ll> p1, const pair<P, ll> p2) {\n\tif (p1.first.first == p2.first.first) {\n\t\tif (p1.first.second == p2.first.second) {\n\t\t\treturn p1.second > p2.second;\n\t\t}\n\t\treturn p1.first.second < p2.first.second;\n\t}\n\treturn p1.first.first > p2.first.first;\n}\n\nint main() {\n\twhile (cin >> m >> t >> p >> r&&m + t + p + r) {\n\t\tbool f[51][11] = {};\n\t\tll ti[51][11] = {};\n\t\trep(i, r) {\n\t\t\tll mm, tt, pp, jj;\n\t\t\tcin >> mm >> tt >> pp >> jj;\n\t\t\ttt--;\n\t\t\tpp--;\n\t\t\tif (jj == 0) {\n\t\t\t\tf[tt][pp] = 1;\n\t\t\t\tti[tt][pp] += mm;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tti[tt][pp] += 20;\n\t\t\t}\n\t\t}\n\t\tll cnt[51] = {};\n\t\tll sum[51] = {};\n\t\tvector<pair<P, ll>> vpl;\n\t\trep(i, t) {\n\t\t\trep(j, p) {\n\t\t\t\tcnt[i] += f[i][j];\n\t\t\t\tif (f[i][j])sum[i] += ti[i][j];\n\t\t\t}\n\t\t\tvpl.push_back({ P(cnt[i],sum[i]),i + 1 });\n\t\t}\n\t\tsort(ALL(vpl), ff);\n\t\trep(i, vpl.size()) {\n\t\t\tif (i != 0) {\n\t\t\t\tif (vpl[i-1].first.first == vpl[i].first.first&&\n\t\t\t\t\tvpl[i-1].first.second == vpl[i].first.second) {\n\t\t\t\t\tcout << \"=\";\n\t\t\t\t}\n\t\t\t\telse cout << \",\";\n\t\t\t}\n\t\t\tcout << vpl[i].second;\n\t\t}\n\t\tcout << endl;\n\t}\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\nusing namespace std;\n\nint main(){\n\twhile(true){\n\t\tint M,T,P,R;\n\t\tcin>>M>>T>>P>>R;\n\t\tif(M==0&&T==0&&P==0&&R==0)\n\t\t\tbreak;\n\t\tint CP[50],TT[50],PT[50][10];\n\t\tfor(int i=0;i<T;i++){\n\t\t\tCP[i]=TT[i]=0;\n\t\t\tfor(int j=0;j<P;j++)\n\t\t\t\tPT[i][j]=0;\n\t\t}\n\t\tfor(int i=0;i<R;i++){\n\t\t\tint m,t,p,j;\n\t\t\tcin>>m>>t>>p>>j;\n\t\t\tif(j==0){\n\t\t\t\tCP[t-1]++;\n\t\t\t\tTT[t-1] += (m+PT[t-1][p-1]);\n\t\t\t}else{\n\t\t\t\tPT[t-1][p-1] +=20;\n\t\t\t}\n\t\t}\n\n\t\tint tnow,tpre=-1;\n\t\tbool flg[50];\n\t\tfor(int i=0;i<T;i++)\n\t\t\tflg[i]=false;\n\t\tfor(int i=0;i<T;i++){\n\t\t\ttnow=-1;\n\t\t\tfor(int j=0;j<T;j++){\n\t\t\t\tif(flg[j])\n\t\t\t\t\tcontinue;\n\t\t\t\tif(tnow==-1){\n\t\t\t\t\ttnow=j;\n\t\t\t\t}else{\n\t\t\t\t\tif(CP[j]>CP[tnow]||(CP[j]==CP[tnow]&&TT[j]<=TT[tnow])){\n\t\t\t\t\t\ttnow=j;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\tif(tpre!=-1){\n\t\t\tif(CP[tnow]==CP[tpre]&&TT[tnow]==TT[tpre])\n\t\t\t\tcout<<'=';\n\t\t\telse\n\t\t\t\tcout<<',';\n\t\t}\n\t\tcout << tnow+1;\n\t\t\tflg[tnow]=true;\n\t\t\ttpre=tnow;\n\t\t}\n\tcout<<endl;\n\t}\n\treturn 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n#include <cstring>\n\nusing namespace std;\nstruct Team{\n  int id,m,tm;\n  Team():id(0),m(0),tm(0){}\n  Team(int i):id(i),m(0),tm(0){}\n};\n\nbool operator < (const Team& a, const Team& b){\n  return a.m>b.m || (a.m==b.m && a.tm < b.tm) || (a.m==b.m && a.tm==b.tm && a.id > b.id);\n}\n\nint mistake[60][20];\n\nint main(){\n  int m,t,p,r;\n  while(cin>>m>>t>>p>>r,m||t||p||r){\n    memset(mistake,0,sizeof(mistake));\n    Team tem[60];\n    for(int i=0;i<t;++i) tem[i]=Team(i+1);\n    while(r--){\n      int a,b,c,d;\n      cin>>a>>b>>c>>d;\n      b--;\n      if(!d){\n\ttem[b].m++;\n\ttem[b].tm+=a+mistake[b][c]*20;\n      }\n      else\n\tmistake[b][c]++;\n    }\n    sort(tem,tem+t);\n    for(int i=0;i+1<t;++i){\n      cout<<tem[i].id;\n      if(tem[i].m==tem[i+1].m && tem[i].tm==tem[i+1].tm) cout << \"=\";\n      else cout << \",\";\n    }\n    cout << tem[t-1].id << endl;\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<vector>\n#include<algorithm>\nusing namespace std;\nstruct data{\n    int ac,all_time,n;\n    data(int a,int b,int c):ac(a),all_time(b),n(c){}\n    data(){}\n    bool operator<(const data &d)const{\n        return ac<d.ac||(ac==d.ac&&all_time>d.all_time);\n    }\n};\nint main(){\n    int M,T,P,R;\n    while(scanf(\"%d%d%d%d\",&M,&T,&P,&R),M||T||P||R){\n        int wa[50][10];\n        vector<data>V(T);\n        for(int i=0;i<T;i++)V[i]=data(0,0,i+1);\n        fill_n(*wa,500,0);\n        while(R--){\n            int m,t,p,j;\n            scanf(\"%d%d%d%d\",&m,&t,&p,&j);\n            if(j){\n                t--;p--;\n                wa[t][p]++;\n            }\n            else{\n                t--;p--;\n                V[t].ac++;\n                V[t].all_time+=m+wa[t][p]*20;\n            }\n        }\n        sort(V.begin(),V.end());\n        reverse(V.begin(),V.end());\n        printf(\"%d\",V[0].n);\n        for(int i=1;i<T;i++){\n            if(V[i].ac==V[i-1].ac&&V[i].all_time==V[i-1].all_time){\n                printf(\"=\");\n            }\n            else{\n                printf(\",\");\n            }\n            printf(\"%d\",V[i].n);\n        }\n        puts(\"\");\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstdio>\n#include<iostream>\nusing namespace std;\n\nint m,t,p,r;\nint zi,na,mo,ans;\nint noa[52][12];\nint acs[52];\nint minu[52];\nint check[52];\nint o;\nint num;\n\nmain(){\n  while(cin >> m >> t >> p >> r, m||t||p||r){\n    for(int i=1;i<=t;i++){\n      for(int j=1;j<=p;j++){\n        noa[i][j]=0;\n      }\n      acs[i]=0;\n      minu[i]=0;\n      check[i]=0;\n    }\n\n    for(int i=0;i<r;i++){\n      cin >> zi >> na >> mo >> ans;\n      if(ans==0){\n        acs[na]++;\n        minu[na]+=zi+noa[na][mo]*20;\n      }else{\n        noa[na][mo]++;\n      }\n    }\n\n    for(int i=0;i<t;i++){\n      num=-1;\n      for(int j=t;j>0;j--){\n        if(check[j]==0){\n          if(num==-1){\n            num=j;\n          }\n          else if(acs[num]<acs[j]){\n            num=j;\n          }\n        }\n      }\n      if(i!=0){\n        if(minu[num]==minu[o] && acs[num]==acs[o]){\n          cout << \"=\";\n        }\n        else{\n          cout << \",\";\n        }\n      }\n      cout << num;\n      check[num]=1;\n      o=num;\n    }\n    cout << endl;\n  }\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstdio>\n#include <vector>\n#include <functional>\nusing namespace std;\n\ntypedef pair<int, int> P;\n\ntypedef struct{\n\tint id;\n\tint solve;\n\tint time;\n\tint penal[20];\n}Team;\n\n\nvector< P > ssolve;\nint main(void){\n\n\twhile(1){\n\t\tint m, t, p, r;\n\t\tTeam teams[100];\n\t\tcin >> m >> t >> p >> r;\n\t\tif(m == 0 && t == 0 && p == 0 && r == 0) break;\n\n\t\tssolve.clear();\n\t\tfor(int i=0; i<100; i++){\n\t\t\tteams[i].id = i;\n\t\t\tteams[i].solve = 0;\n\t\t\tteams[i].time = 0;\n\t\t\tfor(int j=0; j<20; j++){\n\t\t\t\tteams[i].penal[j] = 0;\n\t\t\t}\n\t\t}\n\n\t\tfor(int i=0; i<r; i++){\n\t\t\tint tm, tt, tp, tj;\n\t\t\tcin >> tm >> tt >> tp >> tj;\n\n\t\t\ttt--;\n\t\t\tif(tj == 0){\n\t\t\t\tteams[tt].solve++;  \n\t\t\t\tteams[tt].time += tm;\n\t\t\t\tif(teams[tt].penal[tp] != 0) {\n\t\t\t\t\tteams[tt].time += teams[tt].penal[tp];\n\t\t\t\t\tteams[tt].penal[tp] = 0;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tteams[tt].penal[tp] += 20;\n\t\t\t}\n\n\t\t}\n\n\t\tfor(int i=0; i<t-1; i++){\n\t\t\tfor(int j=t-1; j>i; j--){\n\t\t\t\tif(teams[j].solve > teams[j-1].solve){\n\t\t\t\t\tTeam tmp = teams[j];\n\t\t\t\t\tteams[j] = teams[j-1];\n\t\t\t\t\tteams[j-1] = tmp;\n\t\t\t\t}else if(teams[j].solve == teams[j-1].solve && teams[j].time < teams[j-1].time){\n\t\t\t\t\tTeam tmp = teams[j];\n\t\t\t\t\tteams[j] = teams[j-1];\n\t\t\t\t\tteams[j-1] = tmp;\n\t\t\t\t}else if(teams[j].solve == teams[j-1].solve && teams[j].time == teams[j-1].time && teams[j].id > teams[j-1].id){\n\t\t\t\t\tTeam tmp = teams[j];\n\t\t\t\t\tteams[j] = teams[j-1];\n\t\t\t\t\tteams[j-1] = tmp;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor(int i=0; i<t; i++){\n\t\t\tprintf(\"%d\", teams[i].id + 1);\n\t\t\tif(i + 1 != t){\n\t\t\t\tif(teams[i+1].solve != teams[i].solve){\n\t\t\t\t\tprintf(\",\");\n\t\t\t\t}else if(teams[i+1].solve == teams[i].solve && teams[i+1].time != teams[i].time){\n\t\t\t\t\tprintf(\",\");\n\t\t\t\t}else{\n\t\t\t\t\tprintf(\"=\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tputs(\"\");\n\n\t}\n\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstdio>\n#include <algorithm>\n#include <iomanip>\n#include <cmath>\n#include <stack>\n#include <queue>\n#include <vector>\n#include <cstring>\n#include <set>\n#include <map>\n#include <string>\nusing namespace std;\n\n#define repl(i,a,b) for(int i=(int)(a);i<(int)(b);i++)\n#define rep(i,n) repl(i,0,n)\n#define pb(s) push_back(s)\n#define mp(a,b) make_pair(a,b)\n#define all(x) (x).begin(),(x).end()\n#define dbg(x) cout<<#x\"=\"<<x<<endl\n\ntypedef long long ll;\ntypedef pair<int, int> pii;\ntypedef pair<pii, int> ppi;\n\n#define INF 1000000000\n\n#define MAX_T 50\n#define MAX_P 10\n\nstruct team{\n\tint fails[MAX_P+1];\n\tint ac, t, id;\n};\n\nbool sorter(const team &t1, const team &t2){\n\tif(t1.ac == t2.ac){\n\t\tif(t1.t == t2.t){\n\t\t\treturn t1.id > t2.id;\n\t\t}else{\n\t\t\treturn t1.t < t2.t;\n\t\t}\n\t} else {\n\t\treturn t1.ac > t2.ac;\n\t}\n}\n\nint M, T, P, R;\n\nteam teams[MAX_T+1];\n\nint main(){\n\twhile(cin>>M>>T>>P>>R, M|T|P|R){\n\t\tvector<team> teams(T);\n\n\t\trep(i,T){\n\t\t\tteams[i].ac = teams[i].t = 0;\n\t\t\tteams[i].id = i+1;\n\t\t\trep(j,P) teams[i].fails[j] = 0;\n\t\t}\n\n\t\trep(i,R){\n\t\t\tint m,t,p,j;\n\t\t\tcin>>m>>t>>p>>j;\n\t\t\tt--; p--;\n\t\t\tif(j == 0){\n\t\t\t\tteams[t].ac++;\n\t\t\t\tteams[t].t += m+teams[t].fails[p]*20;\n\t\t\t}else{\n\t\t\t\tteams[t].fails[p]++;\n\t\t\t}\n\t\t}\n\t\tsort(all(teams), sorter);\n\n\t\tprintf(\"%d\", teams[0].id);\n\t\trepl(i,1,T){\n\t\t\tif(teams[i-1].ac==teams[i].ac && teams[i-1].t==teams[i].t)\n\t\t\t\tprintf(\"=\");\n\t\t\telse\n\t\t\t\tprintf(\",\");\n\t\t\tprintf(\"%d\", teams[i].id);\n\t\t}\n\t\tprintf(\"\\n\");\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<stdio.h>\n#include<string.h>\ntypedef struct {\n\tint id;\n\tint ac ;\n\tint time;\n\tint pt[300];\n\tint ok[20];\n\n} Player;\n\nint M, T, P,R;\n\n\n\nvoid makeScore(int n, Player * A)\n{\n\tfor (int i = 1; i <= n; i++)\n\t{\n\t\tfor (int j = 1; j <= P; j++)\n\t\t{\n\t\t\tif (A[i].ok[j] == 0)\n\t\t\t{\n\t\t\t\tif (A[i].pt[j])\n\t\t\t\t\tA[i].time += (20 * A[i].pt[j]);\n\t\t\t}\n\n\t\t}\n\t\t\n\t}\n}\n\nvoid makeRank(int n, Player*A)\n{\n\tint i, j;\n\tPlayer temp;\n\tfor (int i = 0; i < n; i++)\n\t\tfor (int j = n; j > i + 1; j--)\n\t\t{\n\t\t\tif (A[j].ac>A[j - 1].ac)\n\t\t\t{\n\t\t\t\ttemp = A[j]; A[j] = A[j - 1]; A[j - 1] = temp;\n\t\t\t}\n\t\t\telse if (A[j].ac == A[j - 1].ac)\n\t\t\t{\n\t\t\t\tif (A[j].time < A[j - 1].time)\n\t\t\t\t{\n\t\t\t\t\ttemp = A[j]; A[j] = A[j - 1]; A[j - 1] = temp;\n\t\t\t\t}\n\t\t\t\telse if (A[j].time == A[j - 1].time)\n\t\t\t\t{\n\t\t\t\t\tif (A[j].id > A[j - 1].id)\n\t\t\t\t\t{\n\t\t\t\t\t\ttemp = A[j]; A[j] = A[j - 1]; A[j - 1] = temp;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n}\n\nvoid Print(int n, Player *A)\n{\n\tint i;\n\tfor (i = 1; i <= n; i++)\n\t{\n\t\t\n\t\tprintf(\"%d\", A[i].id);\n\t\tif (A[i].ac == A[i + 1].ac&&A[i].time==A[i+1].time && i != n)\n\t\t\tprintf(\"=\");\n\t\telse if (i != n)\n\t\t\tprintf(\",\");\n\t}\n\tprintf(\"\\n\");\n}\nint main()\n{\n\n\tint i;\n\tint time, team, num, ok;\n\tPlayer plr[100];\n\t\n\twhile (scanf(\"%d%d%d%d\", &M, &T, &P, &R) && M || T || R || P)\n\t{\n\t\tfor (int i = T; i>=1;i--)\n\t\t{\n\t\t\tmemset(plr[i].pt, 0, sizeof(plr[i].pt));\n\t\t\tmemset(plr[i].ok, -1, sizeof(plr[i].ok));\n\t\t\tplr[i].ac = plr[i].time = 0;\n\t\t\tplr[i].id = i;\n\t\t}\n\t\n\t\tfor (i = 0; i < R; i++)\n\t\t{\n\t\t\tscanf(\"%d%d%d%d\", &time, &team, &num, &ok);\n\t\t\tif (ok == 0)\n\t\t\t{\n\t\t\t\tplr[team].ac++;\n\t\t\t\tplr[team].time = time;\n\t\t\t\tplr[team].ok[num] = 0;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t\n\t\t\t\tplr[team].pt[num]++;\n\t\t\t}\n\t\t}\n\n\t\tmakeScore(T, plr);\n\t\tmakeRank(T, plr);\n\t\tPrint(T, plr);\n\n\n\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\nint main(){\n    while(1){\n        int m, t, p, r;\n        cin >> m >> t >> p >> r;\n        if (m == 0) break;\n        vector<vector<bool>> ac(t, vector<bool>(p, false));\n        vector<vector<int>> solved(t, vector<int>(p, 0));\n        int v, w, x, y;\n        for (int i = 0; i < r; i++){\n            cin >> v >> w >> x >> y;\n            w--; x--;\n            if (y == 0){\n                ac[w][x] = true;\n                solved[w][x] += v;\n            }\n            else {\n                solved[w][x] += 20;\n            }\n        }\n        vector<tuple<int, int, int>> ans(t);\n        for (int i = 0; i < t; i++){\n            int a = 0;\n            int b = 0;\n            int c = i + 1;\n            for (int j = 0; j < p; j++){\n                if (ac[i][j]){\n                    a++;\n                    b -= solved[i][j];\n                }\n            }\n            ans[i] = tie(a, b, c);\n        }\n        sort(ans.begin(), ans.end(), greater<tuple<int, int, int>>());\n        int tmp = -1;\n        int tmp2 = -1;\n        for (int i = 0; i < t; i++){\n            if (i == 0);\n            else if (get<0>(ans[i]) == tmp && get<1>(ans[i]) == tmp2) cout << \"=\";\n            else cout << \",\";\n            cout << get<2>(ans[i]);\n            tmp = get<0>(ans[i]);\n            tmp2 = get<1>(ans[i]);\n        }\n        cout << endl;\n    }\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\ntypedef pair<int, int> P;\nP info[51][11];\n//bool team[51];\nvector<P> v;\n\nmap<int, P> mp;\n//int D[51];\nvector<int> order;\n\nstring ans = \"A\";\n//自作の比較関数\nbool comp(P lhs, P rhs){\n\tif(lhs.first != rhs.first){\n\t\treturn lhs.first < rhs.first;\n\t}\n\tif(lhs.second != rhs.second){\n\t\treturn lhs.second > rhs.second;\n\t}\n}\n\nint main(){\nwhile(1){//start\n\n\n\tint M, T, P, R;\n\tcin >> M >> T >> P >> R;\n\tif(M == 0 and T == 0 and P == 0 and R == 0) break;\n\n\t//初期化\n\tfor(int i = 0; i < 51; i++){\n\t\tfor(int j = 0; j < 11; j++){\n\t\t\tinfo[i][j].first = 0;\n\t\t\tinfo[i][j].second = 0;\n\t\t}\n\t}\n\tbool team[51] = {0};\n\tint D[51] = {0};\n\tint OK[51] = {0};\n\n\t//データを格納\n\tfor(int i = 0; i < R; i++){\n\t\tint m, t, p, j;\n\t\tcin >> m >> t >> p >> j;\n\t\tteam[t] = true;\n\n\t\tif(j == 0){\n\t\t\tinfo[t][p].second = m + 20*info[t][p].first;\n\t\t\tOK[t-1] += 1;\n\t\t}\n\t\telse{\n\t\t\tinfo[t][p].first += 1;\n\t\t}\n\t}\n\n\t//vの内部はキーがチーム名(解いた数/合計時間)\n\tfor(int i = 1; i <= T; i++){\n\t\t\tint sum = 0, ok = 0;\n\t\t\tfor(int j = 0; j < 11; j++) sum += info[i][j].second;\n\t\t\t//for(int j = 0; j < 11; j++) if(info[i][j].second) ok += 1;\n\t\t\tint tmp = OK[i-1];\n\t\t\tv.push_back(make_pair(tmp, sum));\n\t\t\tmp[i] = make_pair(tmp, sum);\n\t}\n\n\tsort(v.begin(), v.end(), comp);\n\treverse(v.begin(), v.end());\n\t//debug\n\t//for(int i = 0; i < (int)v.size(); i++) cout << v[i].first << \" \" << v[i].second << endl;\n\n\t//重複カウンタを作成\n\tint d = 1;\n\tD[0] = 1;\n\tfor(int i = 1; i < (int)v.size(); i++){\n\t\tif(v[i-1].first == v[i].first and v[i-1].second == v[i].second){\n\t\t\tD[i] = d;\n\t\t}\n\t\telse{\n\t\t\td++;\n\t\t\tD[i] = d;\n\t\t}\n\t}\n\n\t//debug\n\t//for(int i = 0; i < (int)v.size(); i++) cout << D[i] << endl;\n\n\t//ソート結果にチーム名を割り当てる\n\tbool vis[51] = {false};\n\tfor(int i = 0; i < (int)v.size(); i++){\n\t\tfor(int j = (int)v.size(); 1 <= j; j--){\n\t\t\tif(v[i] == mp[j]){\n\t\t\t\tif(vis[j] == false){\n\t\t\t\t\torder.push_back(j);\n\t\t\t\t\tvis[j] = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t//debug\n\t//for(int i = 0; i < (int)v.size(); i++) cout << order[i] << endl;\n\n\t//出力\n\t//まず重複数を記録する\n\tint num[51] = {0};\n\tfor(int i = 0; i < 51; i++) num[D[i]] += 1;\n\n\n\tint idx = 0;\n\tfor(int i = 1; i <= (int)order.size(); i++){\n\t\tif(num[i] == 0) break;\n\t\telse if(num[i] == 1){\n\t\t\tans += to_string(order[idx]);\n\t\t\tidx++;\n\t\t}\n\t\telse{\n\t\t\tfor(int j = 0; j < num[i]; j++){\n\t\t\t\tif(j == num[i]-1) ans += to_string(order[idx]);\n\t\t\t\telse ans += to_string(order[idx]) + \"=\";\n\t\t\t\tidx++;\n\t\t\t}\n\t\t}\n\t\tans += \",\";\n\t}\n\n\tans.erase(ans.begin() + 0);\n\tans.erase(ans.end() - 1);\n\tcout << ans << endl;\n\n\t//初期化\n\tv.clear();\n\tmp.clear();\n\torder.clear();\n\t\n\tans=\"A\";\n\n\n}//end\n\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#define _CRT_SECURE_NO_WARNINGS\n\n#include<fstream>\n#include<iostream>\n#include <stdio.h>\n#include <functional>\n#include<string>\n#include<iomanip>\n#include<list>\n#include<math.h>\n#include<stack>\n#include<queue>\n#include<vector>\n#include<algorithm>\n#include<utility>\n\nusing namespace std;\n\nstring x(string s, const string cs, const string se) {\n\tint pos = 0;\n\twhile ((pos = s.find_first_of(se)) != string::npos) {\n\t\ts.replace(pos, 1, cs);\n\t}\n\treturn s;\n}\n\nstring y(string a) {\n\tint pos4 = 0, pos9 = 0;\n\ta = x(a, \"3\", \"5\");\n\ta = x(a, \"5\", \"6\");\n\ta = x(a, \"6\", \"7\");\n\ta = x(a, \"7\", \"8\");\n\tint pos = a.length();\n\tif ((pos4 = a.find_first_of(\"4\")) != string::npos && (pos9 = a.find_first_of(\"9\")) != string::npos)\n\t{\n\t\tif (pos4 > pos9) {//4>9\n\t\t\ta = a.replace(pos9, 1, \"7\");\n\t\t\tpos = pos9 + 1;\n\t\t}\n\t\telse {\n\t\t\ta = a.replace(pos4, 1, \"3\");\n\t\t\tpos = pos4 + 1;\n\t\t}\n\t}\n\telse if ((pos4 = a.find_first_of(\"4\")) != string::npos) {\n\t\ta = a.replace(pos4, 1, \"3\");\n\t\tpos = pos4 + 1;\n\t}\n\telse if ((pos9 = a.find_first_of(\"9\")) != string::npos) {\n\t\ta = a.replace(pos9, 1, \"7\");\n\t\tpos = pos9 + 1;\n\t}\n\twhile (pos != a.length()) {\n\t\ta = a.replace(pos, 1, \"7\");\n\t\tpos++;\n\t}\n\treturn a;\n}\n\nint n;\nint m;\nint aji[100000];\n\nint saiki(){\n\treturn 0;\n}\n\nint main(){\n\tint m, t, p, r;\n\twhile (cin >> m >> t >> p >> r && !(m == 0 && t == 0 && p == 0 && r == 0)){\n\t\tvector<pair<int, pair<int, int>>> juni; // テヲツュツ」ティツァツ」テヲツ閉ー テヲツ卍づゥツ鳴?テ」ツδ?」ツδシテ」ツδ?・ツ青?テァツュツ氾」ツ?暗」ツ?ョテ」ツ?淌」ツつ?」ツ?ョvector)\n\t\tint teamscore[50]; // テ・ツ青?」ツδ?」ツδシテ」ツδ?」ツ?ョテ」ツつケテ」ツつウテ」ツつ「\n\t\tint teamsecond[50]; // テ・ツ青?」ツδ?」ツδシテ」ツδ?」ツ?ョテヲツ卍づゥツ鳴?\n\t\tint teamincorr[50][2000]; // テ・ツ青?」ツδ?」ツδシテ」ツδ?・ツ青?・ツ閉湘ゥツ。ツ古」ツ?ョテゥツ鳴禿ゥツ?陛」ツ?暗」ツ?淌・ツ崢榲ヲツ閉ー\n\t\tint teamincorrcnt[50]; // テ・ツ青?」ツδ?」ツδシテ」ツδ?」ツ?ョテヲツュツ」ティツァツ」テ」ツ?療」ツ?淌・ツ閉湘ゥツ。ツ古」ツ?ョテゥツ鳴禿ゥツ?陛」ツ?暗」ツ?淌・ツ崢榲ヲツ閉ー\n\t\tfor (int i = 0; i < 50; i++) {\n\t\t\tteamscore[i] = 0;\n\t\t\tteamsecond[i] = 100000;\n\t\t\tteamincorrcnt[i] = 0;\n\t\t\tfor (int j = 0; j < 2000; j++) {\n\t\t\t\tteamincorr[i][j] = 0;\n\t\t\t}\n\t\t}\n\t\tfor (int i = 0; i < r; i++) {\n\t\t\tint mk, tk, pk, jk;\n\t\t\tcin >> mk >> tk >> pk >> jk;\n\t\t\tif (jk == 0) { // テヲツュツ」ティツァツ」\n\t\t\t\tteamscore[tk - 1]++; // テヲツュツ」ティツァツ」テヲツ閉ーテ」ツつ津・ツ「ツ療」ツつ?」ツ??\n\t\t\t\tteamincorrcnt[tk - 1] += teamincorr[tk - 1][pk];\n\t\t\t\tteamsecond[tk - 1] = 100000 - (mk + 20 * teamincorrcnt[tk - 1]);\n\t\t\t}\n\t\t\telse { // テゥツ鳴禿ゥツ?陛」ツ??\n\t\t\t\tteamincorr[tk - 1][pk]++;\n\t\t\t}\n\t\t}\n\t\tfor (int i = 0; i < t; i++) {\n\t\t\tjuni.push_back(make_pair(teamscore[i], make_pair(teamsecond[i], i + 1)));\n\t\t}\n\t\tsort(juni.begin(), juni.end());\n\n\t\tint score = -1;\n\t\tint jikan = -1;\n\t\tfor (int i = t - 1; i >= 0; i--) {\n\t\t\tif (i != t - 1) {\n\t\t\t\tif (score == juni[i].first && jikan == juni[i].second.first) {\n\t\t\t\t\tcout << \"=\";\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tcout << \",\";\n\t\t\t\t}\n\t\t\t}\n\t\t\tcout << juni[i].second.second;\n\t\t\tscore = juni[i].first;\n\t\t\tjikan = juni[i].second.first;\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include \"iostream\"\n#include \"climits\"\n#include \"list\"\n#include \"queue\"\n#include \"stack\"\n#include \"set\"\n#include \"functional\"\n#include \"algorithm\"\n#include \"string\"\n#include \"map\"\n#include \"iomanip\"\n#include \"random\"\n\nusing namespace std;\n\nconst long long int MOD = 1000000007;\nconst long double EPS = 0.00000001;\nconst long double PI = 3.1415926535897932384626433;\n\nlong long int N, M, K, H, W, L, R;\n\nlist<int> Prime(int num) {\n\tlist<int>P;\n\tP.push_back(2);\n\tP.push_back(3);\n\tfor (int i = 5; i <= num; i += 6) {\n\t\tbool flag = true;\n\t\tfor (auto j : P) {\n\t\t\tif (j*j > i) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (i%j == 0) {\n\t\t\t\tflag = false;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (flag)P.push_back(i);\n\t\tflag = true;\n\t\tfor (auto j : P) {\n\t\t\tif (j*j > i + 2) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif ((i + 2) % j == 0) {\n\t\t\t\tflag = false;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (flag)P.push_back(i + 2);\n\t}\n\treturn P;\n}\n\nint main() {\n\tios::sync_with_stdio(false);\n\tcin.tie(0);\n\n\tcin >> M >> N >> L >> R;\n\twhile (M) {\n\t\tvector<pair<pair<int, int>, int>>score(N + 1);\n\t\tfor (int i = 1; i <= N; i++) {\n\t\t\tscore[i].second = i;\n\t\t}\n\t\tvector<vector<int>>WA(N + 1, vector<int>(M + 1));\n\t\tfor (int i = 0; i < R; i++) {\n\t\t\tint a, b, c, d;\n\t\t\tcin >> a >> b >> c >> d;\n\t\t\tif (d) {\n\t\t\t\tWA[b][c]++;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tscore[b].first.first++;\n\t\t\t\tscore[b].first.second -= a;\n\t\t\t\tscore[b].first.second -= WA[b][c] * 20;\n\t\t\t}\n\t\t}\n\t\tsort(score.begin(), score.end());\n\t\treverse(score.begin(), score.end());\n\t\tpair<int,int> box = { -1,0 };\n\t\tfor (auto i : score) {\n\t\t\tif (i.second==0) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (box.first == -1) {\n\t\t\t\tcout << i.second;\n\t\t\t\tbox = { i.first.first,i.first.second };\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (box == make_pair(i.first.first, i.first.second)) {\n\t\t\t\t\tcout << \"=\" << i.second;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tcout << \",\" << i.second;\n\t\t\t\t\tbox = { i.first.first,i.first.second };\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcout << endl;\n\t\tcin >> M >> N >> L >> R;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <vector>\n#include <utility>\n#include <iostream>\n#include <algorithm>\n#include <functional>\n\nusing namespace std;\n\nint main()\n{\n\twhile (true)\n\t{\n\t\tint M, T, P, R;\n\n\t\tcin >> M >> T >> P >> R;\n\n\t\tif (M == 0 && T == 0 && P == 0 && R == 0) { break; }\n\n\t\tvector<vector<int> > time_(T, vector<int>(P, 0));\n\t\tvector<vector<bool> > cor(T, vector<bool>(P, false));\n\n\t\tvector<int> score(T, 0);\n\t\tvector<int> rank(T, 0);\n\n\t\tfor (int i = 0; i < R; i++) \n\t\t{ \n\t\t\tint m, t, p, j;\n\n\t\t\tcin >> m >> t >> p >> j;\n\n\t\t\tif (j == 0)\n\t\t\t{\n\t\t\t\ttime_[t - 1][p - 1] += m;\n\n\t\t\t\tcor[t - 1][p - 1] = true;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\ttime_[t - 1][p - 1] += 20;\n\t\t\t}\n\t\t}\n\n\t\tfor (int i = 0; i < T; i++)\n\t\t{\n\t\t\tfor (int j = 0; j < P; j++)\n\t\t\t{\n\t\t\t\tif (cor[i][j] == true)\n\t\t\t\t{ \n\t\t\t\t\tscore[i] += 100000; \n\n\t\t\t\t\tscore[i] -= time_[i][j];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor (int i = 0; i < T; i++) { rank[i] = i + 1; }\n\n\t\tfor (int i = 0; i < T; i++)\n\t\t{\n\t\t\tfor (int j = i + 1; j < T; j++)\n\t\t\t{\n\t\t\t\tif (score[i] < score[j])\n\t\t\t\t{\n\t\t\t\t\tswap(score[i], score[j]);\n\n\t\t\t\t\tswap(rank[i], rank[j]);\n\t\t\t\t}\n\t\t\t\telse if (score[i] == score[j] && rank[i] < rank[j])\n\t\t\t\t{\n\t\t\t\t\tswap(rank[i], rank[j]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor (int i = 0; i < T; i++)\n\t\t{\n\t\t\tif (i + 1 == T)\n\t\t\t{\n\t\t\t\tcout << rank[i] << endl;\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\telse if (score[i] == score[i + 1])\n\t\t\t{\n\t\t\t\tcout << rank[i] << '=';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tcout << rank[i] << ',';\n\t\t\t}\n\t\t}\n\t}\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <sstream>\n#include <string>\n#include <algorithm>\n\nusing namespace std;\n\nclass Solver {\n    typedef vector<int> V;\n    typedef vector<V> VV;\n    private:\n        string i2s(int n) {\n            stringstream ss;\n            ss << n;\n            return ss.str();\n        }\n    public:\n        int mn, tn, pn, rn;\n        int m[2000], t[2000], p[2000], j[2000];\n        string solve() {\n            string retval;\n            VV last_solved(tn, V(pn, -1));\n            VV answer(tn, V(pn, 0));\n            VV score(tn, V(3, 0));\n            cerr << \"FLAG1\" << endl;\n            for (int i = 0; i < rn; ++i) {\n                last_solved[t[i] - 1][p[i] - 1] = (j[i] == 0? m[i]: -1);\n                ++answer[t[i]][p[i]];\n            }\n            for (int ti = 0; ti < tn; ++ti) {\n                score[ti][2] = -ti - 1;\n                for (int pi = 0; pi < pn; ++pi) {\n                    if (last_solved[ti][pi] >= 0) {\n                        --score[ti][0];\n                        score[ti][1] = max(score[ti][1], last_solved[ti][pi]);\n                    }\n                }\n            }\n            cerr << \"FLAG2\" << endl;\n            sort(score.begin(), score.end());\n            retval = i2s(-score[0][2]);\n            cerr << \"FLAG3\" << endl;\n            for (int i = 1; i < tn; ++i) {\n                if (score[i][0] == score[i - 1][0] && score[i][1] == score[i - 1][1]) {\n                    retval += \"=\";\n                } else {\n                    retval += \",\";\n                }\n                retval += i2s(-score[i][2]);\n            }\n            cerr << \"FLAG4\" << endl;\n            cerr << retval << endl;\n            cerr << \"FLAG4b\" << endl;\n            return retval;\n        }\n};\n\nint main() {\n    Solver s;\n    while (true) {\n        string answer;\n        cin >> s.mn >> s.tn >> s.pn >> s.rn;\n        if (s.mn == 0) {\n            return 0;\n        }\n        for (int i = 0; i < s.rn; ++i) {\n            cin >> s.m[i] >> s.t[i] >> s.p[i] >> s.j[i];\n        }\n        cerr << \"FLAG0\" << endl;\n        answer = s.solve();\n        cerr << \"FLAG5a\" << endl;\n        cout << answer << endl;\n        cerr << \"FLAG5\" << endl;\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<vector>\n#include<algorithm>\n#include<queue>\nusing namespace std;\n\nstruct team{\n    int cor,pen,id;\n    vector<int>AC;\n    vector<int>correct;\n    vector<int>penalty;\n};\nbool com(team t1,team t2){\n    return t1.cor==t2.cor?t1.pen==t2.pen?t1.id>t2.id:t1.pen<t2.pen:t1.cor>t2.cor;\n}\nbool com2(team t1,team t2){\n    return t1.cor==t2.cor?t1.pen<t2.pen:t1.cor>t2.cor;\n}\nint main(){\n    int M,T,P,R,m,t,p,j;\n    while(cin>>M>>T>>P>>R,M){\n        vector<team>vec(T);\n        for(int i=0;i<T;i++){\n            vec[i].id=i;\n            vec[i].correct.resize(P,0);\n            vec[i].penalty.resize(P,0);\n            vec[i].AC.resize(P,0);\n            vec[i].cor=0;\n            vec[i].pen=0;\n        }\n        for(int i=0;i<R;i++){\n            cin>>m>>t>>p>>j;\n            t--;p--;\n            if(j==0){\n                vec[t].correct[p]=vec[t].penalty[p]+m;\n                vec[t].AC[p]=1;\n            }\n            else{\n                vec[t].penalty[p]+=20;\n            }\n        }\n        for(int i=0;i<T;i++){\n            for(int a=0;a<P;a++){\n                if(vec[i].AC[a]>0){\n                    vec[i].cor++;\n                    vec[i].pen+=vec[i].correct[a];\n                }\n            }\n        }\n        sort(vec.begin(),vec.end(),com);\n        \n        for(int i=0;i<T-1;i++){\n            if(com2(vec[i],vec[i+1]))\n                cout<<vec[i].id+1<<\",\";\n            else\n                cout<<vec[i].id+1<<\"=\";\n        }\n        cout<<vec[T-1].id+1<<endl;\n        vec.clear();\n    }\n    \n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\ntypedef pair<int, int> Pii;\n\nint main() {\n  int M, T, P, R;\n  while ( cin >> M >> T >> P >> R, M ) {\n    vector<int> cnt(T, 0);\n    vector<vector<int> > solved(T, vector<int>(P, 0));    \n    vector<int> times(T, M+1);\n    vector<vector<int> > pena(T, vector<int>(P, 0));    \n    while ( R-- ) {\n      int m, t, p, j;\n      cin >> m >> t >> p >> j;\n      t--; p--;\n      if ( !j ) {\n\tif ( solved[t][p] ) continue;\n\tsolved[t][p] = 1;\n\ttimes[t] += m;\n\ttimes[t] += pena[t][p]*20;\t\n\tcnt[t]++;\t\n      } else if ( !solved[t][p] ) {\n\tpena[t][p]++;\n      }\n    }\n\n    vector<Pii> ps[P+1];    \n    for ( int i = 0; i < T; i++ ) {\n      ps[cnt[i]].push_back(Pii(times[i], -i));      \n    }\n\n    int cnt_t = 0;\n    for ( int i = P; i >= 0; i-- ) {\n      if ( !ps[i].size() ) continue;\n      sort(ps[i].begin(), ps[i].end());\n      for ( int j = 0; j < (int)ps[i].size(); j++ ) {\n\tif ( !cnt_t ) cout << -ps[i][j].second+1;\n\telse if ( j && ps[i][j].first == ps[i][j-1].first ) {\n\t  cout << '=' << -ps[i][j].second+1;\n\t} else {\n\t  cout << \",\" << -ps[i][j].second+1;\t  \n\t}\n\tcnt_t++;\n      }\n    }\n    \n    cout << endl;\n  }\n\n  return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#define N 2002\nusing namespace std;\nstruct team{\n  int tnum;\n  int correct;\n  int time;\n};\nint main(){\n  int m,t,p,r,im[N],it[N],ip[N],ij[N],incorrect,i,j;\n  struct team data[51];\n  while(1){\n    cin >> m >> t >> p >> r;\n    if(m==0&&t==0&&p==0&&r==0) break;\n    for(i=0;i<r;i++) cin >> im[i] >> it[i] >> ip[i] >> ij[i];\n    for(i=1;i<=t;i++){\n      data[i].tnum=i;\n      data[i].correct=0;\n      data[i].time=0;\n    }\n    for(i=0;i<r;i++){\n      if(ij[i]==0){\n\tdata[it[i]].correct++;\n      \tincorrect=0;\n\tfor(j=0;j<i;j++){\n\t  if(it[i]==it[j]&&ip[i]==ip[j]) incorrect++;\n\t}\n\tdata[it[i]].time=data[it[i]].time+incorrect*20+im[i];\n      }\n    }\n    for(i=0;i<=t;i++){\n      for(j=2;j<=t;j++){\n\tif(data[j].tnum>data[j-1].tnum) swap(data[j],data[j-1]);\n      }\n    }\n    for(i=0;i<=t;i++){\n      for(j=2;j<=t;j++){\n\tif(data[j].time<data[j-1].time) swap(data[j],data[j-1]);\n      }\n    }\n    for(i=0;i<=t;i++){\n      for(j=2;j<=t;j++){\n\tif(data[j].correct>data[j-1].correct) swap(data[j],data[j-1]);\n      }\n    }\n    for(i=1;i<t;i++){\n      cout << data[i].tnum;\n      if(data[i].correct==data[i+1].correct&&data[i].time==data[i+1].time)\n\tcout << '=';\n      else cout << ',';\n    }\n    cout << data[t].tnum;\n    cout << endl;\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<vector>\n#include<algorithm>\nusing namespace std;\nvoid swapp(int*,int*);\nint main(){\n  while(1){\n    int M,T,P,R;\n    cin >> M >> T >> P >> R;\n    if(M==0&&T==0&&P==0&&R==0)break;\n    int te[51];\n    int tr[51];\n    int tp[51]={};\n    int tt[51]={};\n    vector<vector<int> >ts(T+1,vector<int>(P,0));\n    for(int i=0;i<R;i++){\n      int m,t,p,j;\n      cin >> m >> t >> p >> j;\n      if(j==0){\n\ttt[t]+=ts[t][p]+m;\n\ttp[t]++;\n      }\n      else{\n\tts[t][p]+=20;\n      }\n    }\n    for(int i=1;i<=T;i++){\n      //\n      // cout << i<<\" \"<<tp[i]<< \" \"<< tt[i]<<endl;\n      //\n      tr[i]=i;\n      te[i]=0;\n    }\n    //sort\n    for(int i=1;i<=T;i++){\n      for(int j=1;j<T;j++){\n\tif(tp[j]<tp[j+1]){\n\t  //  cout << tr[j]<<\" \"<<tr[j+1]<<endl;\n\t  swapp(tr+j,tr+j+1);\n\t  swapp(te+j,te+j+1);\n\t  swapp(tt+j,tt+j+1);\n\t  swapp(tp+j,tp+j+1);\n\t  //  cout << tr[j]<<\" \"<<tr[j+1]<<endl;\n\t}\n\telse if(tp[j]==tp[j+1]){\n\t  if(tt[j]>tt[j+1]){\n\t    swapp(tr+j,tr+j+1);\n\t    swapp(te+j,te+j+1);\n\t    swapp(tt+j,tt+j+1);\n\t    swapp(tp+j,tp+j+1);\n\t  }\n\t  else if(tt[j]==tt[j+1]){\n\t    if(tr[j]<tr[j+1]){\n\t      swapp(tr+j,tr+j+1);\n\t      swapp(te+j,te+j+1);\n\t      swapp(tt+j,tt+j+1);\n\t      swapp(tp+j,tp+j+1);\n\t    }\n\t    te[j]=1;\n\t    \n\t  }\n\t}\n      }\n    }\n    // for(int i=1;i<=T;i++)  cout << i<<\" \"<<tp[i]<< \" \"<< tt[i]<<endl;\n    for(int i=1;i<=T;i++){\n\n      cout << tr[i];\n      if(i<T){\n\tif(te[i]==1){\n\t  cout << '=';\n\t}\n\telse cout << ',';\n      }\n    }\n    cout << endl;\n  }\n  return 0;\n}\nvoid swapp(int*m,int*a){\n  int b;\n  b=*m;\n  *m=*a;\n  *a=b;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<string>\n#include<cstdio>\n#include<algorithm>\n#include<stack>\n#include<queue>\n#include<vector>\n#include<cmath>\n#include<utility>\n#include<set>\n#include<complex>\n#include<map>\n#define vi vector<int>\n#define vvi vector<vector<int> >\n#define ll long long int\n#define vl vector<ll>\n#define vvl vector<vector<ll>>\n#define vb vector<bool>\n#define vc vector<char>\n#define vs vector<string>\n#define ld long double\n#define INF 1e9\n#define EPS 0.0000000001\n#define rep(i,n) for(int i=0;i<n;i++)\n#define loop(i,s,n) for(int i=s;i<n;i++)\n#define CC puts(\"-------ok--------\");\n#define all(in) in.begin(), in.end()\nusing namespace std;\ntypedef pair<int, int> pii;\n#define MAX 99999999\ntypedef struct{\n    int time;\n    int num;\n    int qst;\n    int judge;\n}data;\ntypedef  pair<int, pair<int, int>>pi; //  seikai time number\nint main(){\n    int m,t,p,r;\n    while(cin>>m>>t>>p>>r,m+t+r+p){\n    vector<data>v;\n    vvi team(60,vi(60,0));\n    vvi lost(1000,vi(100,0));\n    rep(i,r){\n        data temp;\n        cin>>temp.time>>temp.num>>temp.qst>>temp.judge; v.push_back(temp);\n        if(!(v[i].judge)){\n            team[v[i].num][v[i].qst]=1;\n            lost[v[i].num][v[i].qst]+=v[i].time;\n        }else{\n            lost[v[i].num][v[i].qst]+=20;\n        }\n    }\n    vector<pi>ans(100,pi(0,pii(-INF,0)));\n\n    for(int i=1; i<=t;i++){\n        ans[i].second.second=i;\n        for(int j=1; j<=p;j++)\n            if(team[i][j]){\n                ans[i].first++; ans[i].second.first-=lost[i][j]; ans[i].second.second=i;\n        }\n    }\n    sort(ans.begin()+1,ans.begin()+t+1,greater<pi>());\n        rep(i,t){\n            if(i){\n                if(ans[i].first==ans[i+1].first&&ans[i].second.first==ans[i+1].second.first)\n                    cout<<\"=\";\n                else\n                    cout<<\",\";\n            }\n            cout<<ans[i+1].second.second;\n        }\n        cout<<endl;\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <stdio.h>\n#include <algorithm>\n#include <vector>\nusing namespace std;\n\n#define rep(i, j) for(int i= 0; i < j;i++)\n#define all(i) i.begin(), i.end()\n\nstruct team { int num, ac, time; };\n\n// t0<t1\nbool compare(team &t0, team &t1)\n{\n\tif (t0.ac == t1.ac) \n\t{\n\t\tif (t0.time == t1.time){ return t0.num < t1.num; }\n\t\treturn t0.time > t1.time; \n\t}\n\treturn t0.ac < t1.ac;\n}\nint main()\n{\n\tint M, T, P, R;\n\twhile (cin >> M >> T >> P >> R && (M != 0 && T != 0))\n\t{\n\t\tvector<int> m(R, 0), t(R, 0), p(R, 0), j(R, 0);\n\t\tvector<team> dat(T + 10);\n\t\tvector<vector<int>> wa(T + 10, vector<int>(P + 10, 0));\n\t\trep(i, R)\n\t\t{\n\t\t\tint tmp[4] = { 0 };\n\t\t\tcin >> tmp[0] >> tmp[1] >> tmp[2] >> tmp[3];\n\t\t\tif (tmp[3] > 0) { wa[tmp[1]][tmp[2]] += 20; }\n\t\t\telse if(tmp[3] == 0)\n\t\t\t{\n\t\t\t\tdat[tmp[1]].time += tmp[0] + wa[tmp[1]][tmp[2]];\n\t\t\t\tdat[tmp[1]].ac += 1;\n\t\t\t\tdat[tmp[1]].num = tmp[1];\n\t\t\t}\n\t\t}\n\t\trep(i, T + 1) { dat[i].num = i; }\n\t\tsort(dat.rbegin(), dat.rend(), compare);\n\t\trep(i, T)\n\t\t{\n\t\t\tif (i == T - 1){ printf(\"%d\\n\", dat[i].num); }\n\t\t\telse if(dat[i].time == dat[i+1].time && i != T - 1){ printf(\"%d=\", dat[i].num); }\n\t\t\telse{ printf(\"%d,\", dat[i].num); }\n\t\t}\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\nusing namespace std;\nint main() {\n\tint m, t, p, r;\n\twhile (cin >> m >> t >> p >> r, m) {\n\t\tpair<pair<int, int>, pair<int, int>>log[2014];\n\t\t//time team problem result\n\t\tfor (int i = 0; i < r; i++) \n\t\t\tcin >> log[i].first.first >> log[i].first.second >> log[i].second.first >> log[i].second.second;\n\t\tpair<pair<int, int>, int>point[60];\n\t\t//problems penalty teamnum\n\t\tint penalty[60][15] = {};\n\t\tfor (int i = 1; i <= t; i++) {\n\t\t\tpoint[i].first.first = 15;\n\t\t\tpoint[i].first.second = 0;\n\t\t\tpoint[i].second = i;\n\t\t}\n\t\tfor (int i = 0; i < r; i++) {\n\t\t\tif (log[i].second.second) {\n\t\t\t\t//WRONG ANSWER\n\t\t\t\tpenalty[log[i].first.second][log[i].second.first]++;\n\t\t\t}\n\t\t\telse{\n\t\t\t\t//ACCEPTED\n\t\t\t\tpoint[log[i].first.second].first.first--;\n\t\t\t\tpoint[log[i].first.second].first.second += penalty[log[i].first.second][log[i].second.first] * 20 + log[i].first.first;\n\t\t\t}\n\t\t}\n\t\tfor (int i = 1; i < t; i++) {\n\t\t\tfor (int j = i + 1; j <= t; j++) {\n\t\t\t\tif (point[i].first > point[j].first)swap(point[i], point[j]);\n\t\t\t\telse if (point[i].first == point[j].first)if (point[i].second < point[j].second)swap(point[i], point[j]);\n\t\t\t}\n\t\t}\n\t\tcout << point[1].second;\n\t\tfor (int i = 2; i <= t; i++) {\n\t\t\tif (point[i].first == point[i - 1].first)cout << '=';\n\t\t\telse cout << ',';\n\t\t\tcout << point[i].second;\n\t\t}\n\t\tcout << endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n#define rep(i,n) for(int i=0;i<(int)n;++i)\n#define fi first\n#define se second\n#define mp make_pair\n#define pb push_back\n#define ALL(x) x.begin(),x.end()\n\nstruct team {\n    int id, pro, tm;\n    team(int id, int pro, int tm) : id(id), pro(pro), tm(tm) {}\n    bool operator < (const team& a) const {\n\tif (pro != a.pro) { return pro < a.pro; }\n\tif (tm != a.tm) { return tm > a.tm; }\n\tif (id != a.id) { return id < a.id; }\n    }\n};\n\nvector<team> vec;\n\nint M, T, P, R;\nint pn[50][10];\nint ac[50][10];\n\nint main() {\n    while (scanf(\"%d %d %d %d\", &M, &T, &P, &R), M) {\n\tvec.clear();\n\tmemset(pn, 0, sizeof(pn));\n\tmemset(ac, 0, sizeof(ac));\n\n\trep(i, R) {\n\t    int m, t, p, j;\n\t    scanf(\"%d %d %d %d\", &m, &t, &p, &j);\n\t    --t; --p;\n\t    if (j) ++pn[t][p];\n\t    else ac[t][p] = m;\n\t}\n\n\trep(i, T) {\n\t    int sol = 0, tm = 0;\n\t    rep(j, P) {\n\t\tif (!ac[i][j]) continue;\n\t\t++sol;\n\t\ttm += ac[i][j] + pn[i][j] * 20;\n\t    }\n\t    vec.push_back(team(i + 1, sol, tm));\n\n\t    cout << i + 1 << \" \" << sol << \" \" << tm << endl;\n\t}\n\n\tsort(ALL(vec));\n\treverse(ALL(vec));\n\n\tint i;\n\tfor (i = 0; i < T; ++i) {\n\t    if (i) printf(\",\");\n\t    team &tt = vec[i];\n\t    int j = i;\n\n\t    while (j + 1 < T && vec[j + 1].pro == vec[i].pro && vec[j + 1].tm == vec[i].tm) ++j;\n\n\t    for (int k = i; k <= j; ++k) {\n\t\tif (k != i) printf(\"=\");\n\t\tprintf(\"%d\", vec[k].id);\n\t    }\n\t    i = j;\n\t}\n\tputs(\"\");\n    }\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<vector>\n#include<algorithm>\nusing namespace std;\nstruct team{\nint id;\nint ac;\nint time[100];\nbool ok[200];\n};\n\tint m,t,p,r;\nint or(team a,team b){//aのほうが強ければ1,bなら0,同じなら2\n\nif(a.ac>b.ac)return 1;\nelse if(a.ac<b.ac)return 0;\nint at=0,bt=0;\nfor(int i=0;i<=p;i++){\nif(a.ok[i]==true)at+=a.time[i];\nif(b.ok[i]==true)bt+=b.time[i];\n}\nif(at<bt)return 1;\nelse if(at>bt)return 0;\nelse return 2;\n}\nint main(){\n\n\twhile(true){\n\tcin>>m>>t>>p>>r;\n\tif(m+t+p+r==0)break;\n\tvector<team>ta(0);\n\tta.resize(200);\n\n\tfor(int i=0;i<=t;i++)for(int j=0;j<200;j++)ta[i].time[j]=0,ta[i].ok[j]=0;\n\tfor(int i=0;i<=t;i++)ta[i].id=i,ta[i].ac=0;\n\tfor(int i=0;i<r;i++){\n\tint a,b,c,d;\n\tcin>>a>>b>>c>>d;//a:経過時間:bチーム番号c:問題番号j:0奈良正解それ以外不正解\n\tif(d==0){\n\tta[b].time[c]+=a;\n\tta[b].ac++;\n\tta[b].ok[c]=true;\n\t}\n\telse {\n\tta[b].time[c]+=20;\n\t}\n\t}\n\tta.erase(ta.begin());\n\tfor(int i=0;i<t;i++){\n\tfor(int j=0;j<t;j++){\n\tif(or(ta[i],ta[j])==1)swap(ta[i],ta[j]);\n\tif(or(ta[i],ta[j])==2&&ta[i].id>ta[j].id)swap(ta[i],ta[j]);\n\t}\n\t}\n\tfor(int i=0;i<t-1;i++){\n\tif(or(ta[i],ta[i+1])!=2)cout<<ta[i].id<<\",\";\n\telse cout<<ta[i].id<<\"=\";\n\t}\n\tcout<<ta[t-1].id<<endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\nusing namespace std;\n\nint main(){\n while(true){\n  int M, T, P, R;\n  cin >> M >> T >> P >> R;\n\n  if(M==0 && T==0 && P==0 && R==0) break;\n\n  int CP[50],  TT[50],  PT[50][10]; //正解数、時間計、ペナルティ\n  for(int i=0; i<T; i++){\n   CP[i] = TT[i] = 0;\n   for(int j=0; j<P; j++){\n    PT[i][j] = 0;\n   }\n  }\n\n  for(int i=0; i<R; i++){ //各チームの正解数、時間計を求める\n   int m, t, p, j;\n   cin >> m >> t >> p >> j;\n   \n   if(j==0){ //正解\n    CP[t-1]++;\n    TT[t-1] += (m+PT[t-1][p-1]);\n   }else{ //不正解\n    PT[t-1][p-1] += 20;\n   }\n  }\n\n   int t_now, t_pre = -1; //今のチーム、1つ前のチーム\n   bool flag[50]; //処理済みフラグ\n   for(int i=0; i<T; i++){\n    flag[i] = false;\n   }\n   \n   for(int i=0; i<T; i++){\n    t_now = -1;\n    for(int j=0; j<T; j++){ //今のチームを求める\n     if(flag[j]) continue;\n     if(t_now==-1){\n      t_now = j;\n     }else{\n      if(CP[j]>CP[t_now] || (CP[j]==CP[t_now] && TT[j]<=TT[t_now])){\n       t_now = j;\n      }\n     }\n    }\n\n    if(t_pre!=-1){\n     if(CP[t_now]==CP[t_pre] && TT[t_now]==TT[t_pre]){\n      cout << '=';\n     }else{\n      cout << ','\n     }\n    }\n    cout<<t_now+1;\n\n    flag[t_now] = true;\n    t_pre = t_now;\n   }\n   cout << endl;\n  }\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define rep(i,n) for(int i=0;i<n;i++)\nusing namespace std;\n\nint m,t,p,r,a[50][10];\npair<pair<int,int>,int> b[50];\n\nint main(){\n\twhile(cin>>m>>t>>p>>r,m||t||p||r){\n\t\tmemset(a,0,sizeof(a));\n\t\tmemset(b,0,sizeof(b));\n\t\trep(i,r){\n\t\t\tint M,T,P,R;cin>>M>>T>>P>>R;T--;P--;\n\t\t\tif(R) a[T][P]++;\n\t\t\telse b[T].first.first--,b[T].first.second+=a[T][P]*20+M;\n\t\t}\n\t\trep(i,t)b[i].second-=i+1;\n\t\tsort(b,b+t);\n\t\trep(i,t){\n\t\t\tif(i) cout<<(b[i].first==b[i-1].first?'=':',');\n\t\t\tcout<<-b[i].second;\n\t\t}\n\t\tcout<<endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "// Header {{{\n// includes {{{\n#include <algorithm>\n#include <cassert>\n#include <cctype>\n#include <climits>\n#include <cmath>\n#include <complex>\n#include <cstdio>\n#include <cstdlib>\n#include <cstring>\n#include <ctime>\n#include <iostream>\n#include <iterator>\n#include <limits>\n#include <list>\n#include <map>\n#include <numeric>\n#include <queue>\n#include <set>\n#include <sstream>\n#include <stack>\n#include <string>\n#include <sys/time.h>\n#include <unistd.h>\n#include <vector>\n// }}}\nusing namespace std;\n// consts {{{\nstatic const int INF = 1e9;\nstatic const double PI = acos(-1.0);\nstatic const double EPS = 1e-10;\n// }}}\n// typedefs {{{\ntypedef long long int LL;\ntypedef unsigned long long int ULL;\ntypedef vector<int> VI;\ntypedef vector<VI> VVI;\ntypedef vector<LL> VLL;\ntypedef vector<VLL> VVLL;\ntypedef vector<ULL> VULL;\ntypedef vector<VULL> VVULL;\ntypedef vector<double> VD;\ntypedef vector<VD> VVD;\ntypedef vector<bool> VB;\ntypedef vector<VB> VVB;\ntypedef vector<char> VC;\ntypedef vector<VC> VVC;\ntypedef vector<string> VS;\ntypedef vector<VS> VVS;\ntypedef pair<int, int> PII;\ntypedef complex<int> P;\n// }}}\n// macros & inline functions {{{\n// syntax sugars {{{\n#define FOR(i, b, e) for (typeof(e) i = (b); i < (e); ++i)\n#define FORI(i, b, e) for (typeof(e) i = (b); i <= (e); ++i)\n#define REP(i, n) FOR(i, 0, n)\n#define REPI(i, n) FORI(i, 0, n)\n#define OPOVER(_op, _type) inline bool operator _op (const _type &t) const\n// }}}\n// conversion {{{\ninline int toInt(string s) { int v; istringstream sin(s); sin>>v; return v; }\ntemplate<class T> inline string toString(T x) { ostringstream sout; sout<<x; return sout.str(); }\n// }}}\n// array and STL {{{\n#define ARRSIZE(a) ( sizeof(a) / sizeof(a[0]) )\n#define ZERO(a, v) ( assert(v == 0 || v == -1), memset(a, v, sizeof(a)) )\n#define F first\n#define S second\n#define MP(a, b) make_pair(a, b)\n#define SIZE(a) ((LL)a.size())\n#define PB(e) push_back(e)\n#define SORT(v) sort((v).begin(), (v).end())\n#define RSORT(v) sort((v).rbegin(), (v).rend())\n#define ALL(a) (a).begin(), (a).end()\n#define RALL(a) (a).rbegin(), (a).rend()\n#define EACH(c, it) for(typeof((c).begin()) it=(c).begin(); it!=(c).end(); ++it)\n#define REACH(c, it) for(typeof((c).rbegin()) it=(c).rbegin(); it!=(c).rend(); ++it)\n#define EXIST(s, e) ((s).find(e) != (s).end())\n// }}}\n// bit manipulation {{{\n// singed integers are not for bitwise operations, specifically arithmetic shifts ('>>', and maybe not good for '<<' too)\n#define IS_UNSIGNED(n) (!numeric_limits<typeof(n)>::is_signed)\n#define BIT(n) (assert(IS_UNSIGNED(n)), assert(n < 64), (1ULL << (n)))\n#define BITOF(n, m) (assert(IS_UNSIGNED(n)), assert(m < 64), ((ULL)(n) >> (m) & 1))\ninline int BITS_COUNT(ULL b) { int c = 0; while(b != 0) { c += (b & 1); b >>= 1; } return c; }\ninline int MSB(ULL b) { int c = 0; while(b != 0) { ++c; b >>= 1; } return c-1; }\ninline int MAKE_MASK(ULL upper, ULL lower) { assert(lower < 64 && upper < 64 && lower <= upper); return (BIT(upper) - 1) ^ (BIT(lower) - 1); }\n// }}}\n// for readable code {{{\n#define EVEN(n) (n % 2 == 0)\n#define ODD(n) (!EVEN(n))\n// }}}\n// debug {{{\n#define arrsz(a) ( sizeof(a) / sizeof(a[0]) )\n#define dprt(fmt, ...) if (opt_debug) { fprintf(stderr, fmt, ##__VA_ARGS__); }\n#define darr(a) if (opt_debug) { copy( (a), (a) + arrsz(a), ostream_iterator<int>(cerr, \" \") ); cerr << endl; }\n#define darr_range(a, f, t) if (opt_debug) { copy( (a) + (f), (a) + (t), ostream_iterator<int>(cerr, \" \") ); cerr << endl; }\n#define dvec(v) if (opt_debug) { copy( ALL(v), ostream_iterator<int>(cerr, \" \") ); cerr << endl; }\n#define darr2(a) if (opt_debug) { FOR(__i, 0, (arrsz(a))){ darr( (a)[__i] ); } }\n#define dvec2(v) if (opt_debug) { FOR(__i, 0, v.size()){ dvec( (v)[__i] ); } }\n#define WAIT() if (opt_debug) { string _wait_; cerr << \"(hit return to continue)\" << endl; getline(cin, _wait_); }\n#define dump(x) if (opt_debug) { cerr << \" [L\" << __LINE__ << \"] \" << #x << \" = \" << (x) << endl; }\n#define dumpf() if (opt_debug) { cerr << __PRETTY_FUNCTION__ << endl; }\n#define dumpv(x) if (opt_debug) { cerr << \" [L:\" << __LINE__ << \"] \" << #x << \" = \"; REP(q, (x).size()) cerr << (x)[q] << \" \"; cerr << endl; }\n#define where() if (opt_debug) { cerr << __FILE__ << \": \" << __PRETTY_FUNCTION__ << \" [L: \" << __LINE__ << \"]\" << endl; }\n#define show_bits(b, s) if(opt_debug) { REP(i, s) { cerr << BITOF(b, s-1-i); if(i%4 == 3) cerr << ' '; } cerr << endl; }\ntemplate<typename T1, typename T2> ostream& operator<<(ostream& s, const pair<T1, T2>& d) {return s << \"(\" << d.first << \", \" << d.second << \")\";}\ntemplate<typename T> ostream& operator<<(ostream& s, const complex<T>& d) {return s << \"(\" << d.real() << \", \" << d.imag() << \")\";}\n// }}}\n// }}}\n// time {{{\ninline double now(){ struct timeval tv; gettimeofday(&tv, NULL); return (static_cast<double>(tv.tv_sec) + static_cast<double>(tv.tv_usec) * 1e-6); }\n// }}}\n// string manipulation {{{\ninline VS split(string s, char delimiter) { VS v; string t; REP(i, s.length()) { if(s[i] == delimiter) v.PB(t), t = \"\"; else t += s[i]; } v.PB(t); return v; }\ninline string join(VS s, string j) { string t; REP(i, s.size()) { t += s[i] + j; } return t; }\n// }}}\n// geometry {{{\n#define Y real()\n#define X imag()\n// }}}\n// 2 dimentional array {{{\nP dydx4[4] = { P(-1, 0), P(0, 1), P(1, 0), P(0, -1) };\nP dydx8[8] = { P(-1, 0), P(0, 1), P(1, 0), P(0, -1), P(-1, 1), P(1, 1), P(1, -1), P(-1, -1) };\nint g_height, g_width;\nbool in_field(P p) {\n\treturn (0 <= p.Y && p.Y < g_height) && (0 <= p.X && p.X < g_width);\n}\n// }}}\n// }}}\nbool opt_debug = false;\n\nclass Team {\n\tpublic:\n\t\tint id;\n\t\tmap<int, int> wc_count_by_problem_id;\n\t\tint ac_count;\n\t\tint total_time;\n\t\tTeam(int _id);\n\t\tvoid submit(int m, int p, bool j) {\n\t\t\tif (j) {\n\t\t\t\tac_count++;\n\t\t\t\ttotal_time += m;\n\t\t\t\tif (EXIST(wc_count_by_problem_id, p)) {\n\t\t\t\t\ttotal_time += 20 * wc_count_by_problem_id[p];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (!EXIST(wc_count_by_problem_id, p)) {\n\t\t\t\t\twc_count_by_problem_id[p] = 0;\n\t\t\t\t}\n\t\t\t\twc_count_by_problem_id[p]++;\n\t\t\t}\n\t\t}\n\n\t\tOPOVER(<, Team) {\n\t\t\tTeam self = *this;\n\t\t\tif (self.ac_count != t.ac_count) {\n\t\t\t\treturn self.ac_count < t.ac_count;\n\t\t\t} else {\n\t\t\t\tif (self.total_time != t.total_time) {\n\t\t\t\t\treturn self.total_time > t.total_time;\n\t\t\t\t} else {\n\t\t\t\t\treturn self.id < t.id;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tOPOVER(==, Team) {\n\t\t\tTeam self = *this;\n\t\t\tif (self.ac_count == t.ac_count && self.total_time == t.total_time) {\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n};\nTeam::Team(int _id) : id(_id) {\n\tac_count = 0;\n\ttotal_time = 0;\n}\n\nint main(int argc, char** argv) {\n\tstd::ios_base::sync_with_stdio(false);\n\t// set options {{{\n\tint __c;\n\twhile ( (__c = getopt(argc, argv, \"d\")) != -1 ) {\n\t\tswitch (__c) {\n\t\t\tcase 'd':\n\t\t\t\topt_debug = true;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tabort();\n\t\t}\n\t}\n\t// }}}\n\n\tint M, T, P, R;\n\twhile (cin >> M >> T >> P >> R, M || T || P || R) {\n\t\tvector<Team> teams;\n\t\tREP (i, T) {\n\t\t\tTeam t(i + 1);\n\t\t\tteams.PB(t);\n\t\t}\n\n\t\tREP (i, R) {\n\t\t\tint m, t, p, j; cin >> m >> t >> p >> j;\n\t\t\tteams[t-1].submit(m, p, (j == 0));\n\t\t}\n\n\t\tRSORT(teams);\n\n\t\tREP (i, teams.size()) {\n\t\t\tif (i > 0) {\n\t\t\t\tif (teams[i] == teams[i-1]) {\n\t\t\t\t\tcout << '=';\n\t\t\t\t} else {\n\t\t\t\t\tcout << ',';\n\t\t\t\t}\n\t\t\t}\n\t\t\tcout << teams[i].id;\n\t\t}\n\t\tcout << endl;\n\t}\n\n\treturn 0;\n}\n\n// vim: foldmethod=marker"
  },
  {
    "language": "C++",
    "code": "//include\n//------------------------------------------\n#include <vector>\n#include <list>\n#include <map>\n#include <set>\n#include <deque>\n#include <stack>\n#include <bitset>\n#include <algorithm>\n#include <functional>\n#include <numeric>\n#include <utility>\n#include <sstream>\n#include <iostream>\n#include <iomanip>\n#include <cstdio>\n#include <cmath>\n#include <cstdlib>\n#include <cctype>\n#include <string>\n#include <cstring>\n#include <ctime>\n#include <climits>\n#include <queue>\n\nusing namespace std;\n\n//typedef\n//------------------------------------------\ntypedef vector<int> VI;\ntypedef vector<VI> VVI;\ntypedef vector<string> VS;\ntypedef pair<int, int> PII;\ntypedef long long LL;\n\n//container util\n//------------------------------------------\n#define ALL(a)  (a).begin(),(a).end()\n#define RALL(a) (a).rbegin(), (a).rend()\n#define PB push_back\n#define MP make_pair\n#define SZ(a) int((a).size())\n#define EACH(i,c) for(typeof((c).begin()) i=(c).begin(); i!=(c).end(); ++i)\n#define EXIST(s,e) ((s).find(e)!=(s).end())\n#define SORT(c) sort((c).begin(),(c).end())\n\n//repetition\n//------------------------------------------\n#define FOR(i,a,b) for(int i=(a);i<(b);++i)\n#define REP(i,n)  FOR(i,0,n)\n\n//constant\n//--------------------------------------------\nconst double EPS = 1e-10;\nconst double PI  = acos(-1.0);\n\nstruct Score{\n  int c, s, p, t;\n  \n  Score(): c(0), s(0), p(0), t(0){}\n  bool operator>(const Score& rhs) const{\n\treturn c > rhs.c || (c == rhs.c &&\n\t\t\t\t\t\t (s < rhs.s || (s == rhs.s && t > rhs.t)));\n  }\n};\n\nbool eq(Score& s1, Score& s2){\n  return s1.c == s2.c && s1.s == s2.s;\n}\n\nint main(){\n  cin.tie(0);\n  ios_base::sync_with_stdio(false);\n\n  while(true){\n\tint M, T, P, R; cin >> M >> T >> P >> R; if(T == 0) break;\n\tint wrong[51][11];\n\tfill((int*)wrong, (int*)wrong+51*11, 0);\n\tvector<Score> sc(T);\n\tREP(i,T) sc[i].t = i+1;\n\tREP(r,R){\n\t  int m, tid, pid, res;\n\t  cin >> m >> tid >> pid >> res;\n\t  if(!res){\n\t\tsc[tid-1].s += m;\n\t\tsc[tid-1].p += wrong[tid-1][pid];\n\t\t++sc[tid-1].c;\n\t  }\n\t  else\n\t\t++wrong[tid-1][pid];\n\t}\n\tfor(int i=1;i<=T;++i)\n\t  sc[i].s += 20 * sc[i].p;\n\n\tsort(ALL(sc), greater<Score>());\n\tcout << sc[0].t;\n\tfor(int i=1;i<T;++i){\n\t  if(eq(sc[i-1], sc[i])) cout << \"=\";\n\t  else cout << \",\";\n\t  cout << sc[i].t;\n\t}\n\tcout << endl;\n  }\n  \n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstdio>\n#include<vector> \n#include<algorithm>\nusing namespace std;\n\nclass Present{\npublic:\n  int m;\n  int t;\n  int p;\n  int j;\n  Present():m(0),t(0),p(0),j(0){}\n};\nclass Team{\npublic:\n  int num;\n  int solve;\n  int time;\n  Team():num(0),solve(0),time(0){}\n};\n\nbool compare_solve(const Team& left, const Team& right){\n  return left.solve > right.solve;\n}\nbool compare_time(const Team& left, const Team& right){\n  return left.time <= right.time;\n}\n\nint main(){\n  int H, T, P, R;\n  for(;;){\n    scanf(\"%d %d %d %d\", &H, &T, &P, &R);\n    if( H == 0 && T == 0 && P == 0 && R == 0)\n      return 0;\n    vector<Present> pr(R);\n    for(int i = 0; i < R; i++){\n      scanf(\"%d %d %d %d\", &pr[i].m, &pr[i].t, &pr[i].p, &pr[i].j);\n    }\n    vector<Team> team(T);\n    for(int i = 0; i < T; i++){  \n      team[i].num = i + 1;\n      for(int j = 0; j < R; j++){\n\tif(pr[j].t == team[i].num){\n\t  if(pr[j].j == 0){\n\t    team[i].solve += 1; \n\t    team[i].time += pr[j].m;\n\t    for(int k = 0; k < R; k++){\n\t      if(pr[k].t == team[i].num && pr[k].p == pr[j].p && pr[k].j != 0 )\n\t\tteam[i].time += 20;\n\t    }\n\t  }\n\t}\n      }\n    }\n    sort(team.begin(),team.end(),compare_time);\n    stable_sort(team.begin(),team.end(),compare_solve);\n    \n    cout << team[0].num;\n    for(int i = 1; i < T; i++){\n      if(team[i-1].solve == team[i].solve && team[i-1].time == team[i].time)\n\tcout << \"=\";\n      else\n\tcout << \",\";\n      cout << team[i].num;\n    }\n    cout << endl;\n  }\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<vector>\n#include<algorithm>\nusing namespace std;\n\nstruct T{\n  T(){ac=0;t=0;}\n  int n,ac,t;\n  vector<int> p;\n};\nbool operator<(T a,T b){\n  if(a.ac!=b.ac){\n    return a.ac>b.ac;\n  }else if(a.t!=b.t){\n    return a.t<b.t;\n  }else{\n    return a.n>b.n;\n  }\n}\nbool operator==(T a,T b){\n  return a.ac==b.ac && a.t==b.t;\n}\n\nvector<T> team;\nint M,T,P,R;\n\n\nbool input(){\n  cin>>M>>T>>P>>R;\n  if(M==0&&T==0&&P==0&&R==0)return false;\n  team.clear();team.resize(T);\n  for(int i=0;i<T;i++){\n    team[i].n=i+1;\n    team[i].p.resize(P+1);\n  }\n  return true;\n}\n\nvoid que(){\n  for(int i=0;i<R;i++){\n    int m,t,p,j;\n    cin>>m>>t>>p>>j;\n    t--;p--;\n    if(j==0){\n      team[t].t += team[t].p[p] + m;\n      team[t].ac++;\n    }else{\n      team[t].p[p]+=20;\n    }\n  }\n}\n\nvoid solve(){\n  sort(team.begin(),team.end());\n}\n\nvoid print(){\n  for(int i=0;i<team.size()-1;i++){\n    cout<<team[i].n;\n    if(team[i]==team[i+1]){\n      cout<<\"=\";\n    }else{\n      cout<<\",\";\n    }\n  }\n  cout<<team[team.size()-1].n<<endl;\n}\n\nint main(){\n  while(input()){\n    que();\n    solve();\n    print();\n  }\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\n#define REP(i,n) for(int i=0;i<(n);i++)\n#define ALL(v) (v).begin(),(v).end()\n#define int long long\ntypedef pair<int,int> P;\n\n//-----------------------------------------------------------------------\n\npair<P,int> t[55];\nint wrong[55][15];\n\nsigned main()\n{\n    cin.tie(0);\n    ios::sync_with_stdio(false);\n\n    int a,b,c,d;\n    while(cin>>a>>b>>c>>d,a)\n    {\n\tREP(i,b) t[i]=make_pair(P(0,0),-i-1);\n\tREP(i,b) REP(j,c) wrong[i][j]=0;\n\n\tREP(i,d){\n\t    int e,f,g,h;\n\t    cin>>e>>f>>g>>h;\n\t    f--,g--;\n\t    if(h==0){\n\t\tt[f].first.first--;\n\t\tt[f].first.second+=e+20*wrong[f][g];\n\t    }else{\n\t\twrong[f][g]++;\n\t    }\n\t}\n\tsort(t,t+b);\n\tcout<<-t[0].second;\n\tfor(int i=1;i<b;i++){\n\t    if(t[i-1].first.first==t[i].first.first &&\n\t       t[i-1].first.second==t[i].first.second){\n\t\tcout<<\"=\";\n\t    } else cout<<\",\";\n\t    cout<<-t[i].second;\n\t}\n\tcout<<endl;\n    }\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <stdio.h>\n#include <algorithm>\n#include <vector>\nusing namespace std;\n\n#define rep(i, j) for(int i= 0; i < j;i++)\n#define all(i) i.begin(), i.end()\n\nstruct team { int num, ac, time; };\n\n// t0<t1\nbool compare(team &t0, team &t1)\n{\n\tif (t0.ac == t1.ac) \n\t{\n\t\tif (t0.time == t1.time){ return t0.num < t1.num; }\n\t\treturn t0.time > t1.time; \n\t}\n\treturn t0.ac < t1.ac;\n}\nint main()\n{\n\tint M, T, P, R;\n\twhile (cin >> M >> T >> P >> R && (M != 0 && T != 0))\n\t{\n\t\tvector<int> m(R, 0), t(R, 0), p(R, 0), j(R, 0);\n\t\tvector<team> dat(T + 10);\n\t\tvector<vector<int>> wa(T + 10, vector<int>(P + 10, 0));\n\t\trep(i, R)\n\t\t{\n\t\t\tint tmp[4] = { 0 };\n\t\t\tcin >> tmp[0] >> tmp[1] >> tmp[2] >> tmp[3];\n\t\t\tif (tmp[3] > 0) { wa[tmp[1]][tmp[2]] += 20; }\n\t\t\telse if(tmp[3] == 0)\n\t\t\t{\n\t\t\t\tdat[tmp[1]].time += tmp[0] + wa[tmp[1]][tmp[2]];\n\t\t\t\tdat[tmp[1]].ac += 1;\n\t\t\t\tdat[tmp[1]].num = tmp[1];\n\t\t\t}\n\t\t}\n\t\trep(i, T + 1) { dat[i].num = i; }\n\t\tsort(dat.rbegin(), dat.rend(), compare);\n\t\trep(i, T)\n\t\t{\n\t\t\tif (i == T - 1){ printf(\"%d\\n\", dat[i].num); }\n\t\t\telse if(dat[i].time == dat[i+1].time && i != T - 1){ printf(\"%d=\", dat[i].num); }\n\t\t\telse{ printf(\"%d,\", dat[i].num); }\n\t\t}\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <vector>\n#include <algorithm>\nusing namespace std;\n\nstruct info{\n\tint ac, pn, id;\n\tvector<int> wa;\n\n\tinfo(): ac(0), pn(0), id(0) {}\n\n\tbool operator< (const info &i) const{\n\t\tif(ac != i.ac){ return ac < i.ac; }\n\t\tif(pn != i.pn){ return pn > i.pn; }\n\t\treturn id < i.id;\n\t}\n};\n\nint main(){\n\tint T, P, R;\n\tint m, t, p, j;\n\twhile(scanf(\"%*d%d%d%d\", &T, &P, &R), T){\n\t\tvector<info> team(T + 1);\n\t\tfor(int i = 1; i <= T; ++i){\n\t\t\tteam[i].wa.assign(P + 1, 0);\n\t\t\tteam[i].id = i;\n\t\t}\n\t\t\n\t\tfor(int i = 0; i < R; ++i){\n\t\t\tscanf(\"%d%d%d%d\", &m, &t, &p, &j);\n\t\t\tinfo &tm = team[t];\n\t\t\tif(j == 0){\n\t\t\t\t++tm.ac;\n\t\t\t\ttm.pn += m + 20 * tm.wa[p];\n\t\t\t}\n\t\t\telse{\n\t\t\t\t++tm.wa[p];\n\t\t\t}\n\t\t}\n\t\t\n\t\tsort(team.begin() + 1, team.end());\n\t\tfor(int k = T; k > 0; --k){\n\t\t\tchar ch = ',';\n\t\t\tif(k == 1){\n\t\t\t\tch = '\\n';\n\t\t\t}\n\t\t\telse if(team[k].ac == team[k - 1].ac && team[k].pn == team[k - 1].pn){\n\t\t\t\tch = '=';\n\t\t\t}\n\t\t\tprintf(\"%d%c\", team[k].id, ch);\n\t\t}\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n\nusing namespace std;\n\ntypedef pair< int, int> pii;\ntypedef pair< int, pii> piii;\n\nint M, T, P, R;\n\nint main() {\n\twhile (1) {\n\t\tcin >> M >> T >> P >> R; if (M==0 && T==0 && P==0 && R==0) break;\n\t\t\n\t\tvector<piii> pv(T);\n\t\tvector< vector<bool> > end(T, vector<bool>(P, false) );\n\t\tfor (int i = 0; i < T; i++) pv[i] = make_pair(0, make_pair(0, i + 1) );\n\t\tfor (int i = 0; i < R; i++) {\n\t\t\tint m, t, p, j; cin >> m >> t >> p >> j;\n\t\t\tif (end[t-1][p-1]) continue;\n\t\t\tif (j==0) {\n\t\t\t\tpv[t-1].first++;\n\t\t\t\tpv[t-1].second.first -= m;\n\t\t\t\tend[t-1][p-1] = true;\n\t\t\t} else {\n\t\t\t\tpv[t-1].second.first -= 20;\n\t\t\t}\n\t\t}\n\n\t\tsort(pv.begin(), pv.end());\n\t\tfor (int i = T-1; i >= 0; i--) {\n\t\t\tif (i > 0 && pv[i].first == pv[i-1].first && pv[i].second.first == pv[i-1].second.first) {\n\t\t\t\tcout << pv[i].second.second << \"=\";\n\t\t\t} else {\n\t\t\t\tcout << pv[i].second.second;\n\t\t\t\tif (i > 0) cout << \",\";\n\t\t\t}\n\t\t}\n\t\tcout << endl;\n\t}\t\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\n#include<string.h>\n#define MAX 50\n#define MP \t11\nusing namespace std;\n\nstruct team{\n\tint id;\n\tint problems;\n\tint time;\n\tint pm[MP];\n\tint ep[MP];\n};\n\nbool mycomp(const team &t1,const team &t2)\n{\n\tif(t1.problems==t2.problems)return t1.time<t2.time;\n\treturn t1.problems>t2.problems;\n}\n\nint M,T,P,R;\nteam teams[MAX];\n\nint solve()\n{\n\tfor(int i=0;i<T;i++)\n\t{\n\t\tteams[i].id=i+1;\n\t\tfor(int j=1;j<=P;j++)\n\t\t{\n\t\t\tif(teams[i].ep[j]==0)continue;\n\t\t\telse teams[i].time+=teams[i].ep[j]+teams[i].pm[j];\n\t\t}\n\t}\n\tsort(teams,teams+P,mycomp);\n\tcout<<teams[0].id;\n\tfor(int i=1;i<T;i++)\n\t{\n\t\tif(teams[i].problems==teams[i-1].problems&&teams[i].time==teams[i-1].time)\n\t\t{\n\t\t\tcout<<\"=\";\n\t\t}else\n\t\t{\n\t\t\tcout<<\",\";\n\t\t}\n\t\tcout<<teams[i].id;\n\t}\n\tcout<<endl;\t\n}\n\nvoid input()\n{\n\tint m,t,p,j;\n\twhile(scanf(\"%d%d%d%d\",&M,&T,&P,&R))\n\t{\n\t\tif(M==0&&T==0&&P==0&&R==0)break;\n\t\tmemset(teams,0,sizeof(teams));\n\t\tfor(int i=0;i<R;i++)\n\t\t{\n\t\t\tscanf(\"%d%d%d%d\",&m,&t,&p,&j);\n\t\t\tif(j==0)\n\t\t\t{\n\t\t\t\tteams[t-1].problems++;\n\t\t\t\tteams[t-1].ep[p]=m;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tteams[t-1].pm[p]+=20;\n\t\t\t}\n\t\t}\n\t\tsolve();\n\t}\n}\n\nint main()\n{\n\tinput();\n\treturn 0;\n}\n\n\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n// #define rep(i,n) for(int i=0;i<(n);i++)\n// #define fi first\n// #define se second\n// #define pb push_back\n// #define mp make_pair\n\nusing vi = vector<int>;\nusing vvi = vector<vi>;\nusing ll = long long;\nusing pii = pair<int,int>;\n\ntemplate<typename T> ostream& operator<< (ostream& os,const vector<T>& vec){ os << \"{\"; for(T v:vec) os << v << \",\"; os << \"}\"; } template<typename T> ostream& operator<< (ostream& os,const set<T>& st){ os << \"{\"; for(T v:st) os << v << \",\"; os << \"}\"; }\ntemplate<typename T,typename U> ostream& operator<< (ostream& os,const pair<T,U>& p){ os << \"{\" << p.first << \",\" << p.second << \"}\"; return os; }\n\nstruct Result {\n    int num;\n    int ac;\n    int pen;\n\n    Result() : num(-1), ac(0), pen(0) {}\n\n    bool operator < (const Result& o) const {\n        return ac == o.ac ? pen == o.pen ? num > o.num : pen < o.pen : ac > o.ac;\n    }\n};\n\nint main(){\n    int M, T, P, R;\n    while (true) {\n        cin >> M >> T >> P >> R;\n        if (M == 0 && T == 0 && P == 0 && R == 0) break;\n\n        int ac[50][10], wa[50][10], pen[50][10];\n        for (int j = 0; j < T; ++j) {\n            fill(ac[j], ac[j]+P, 0);\n            fill(wa[j], wa[j]+P, 0);\n            fill(pen[j], pen[j]+P, -1);\n        }\n\n        for (int i = 0; i < R; ++i) {\n            int m, t, p, j;\n            cin >> m >> t >> p >> j;\n            --t; --p;\n            if (j == 0 && ac[t][p] == 0) {\n                ac[t][p] = 1;\n                pen[t][p] = m;\n            }\n            if (j != 0 == ac[t][p] == 0) {\n                wa[t][p]++;\n            }\n        }\n\n        Result res[50];\n        for (int j = 0; j < T; ++j) {\n            res[j].num = j+1;\n            for (int k = 0; k < P; ++k) {\n                if (ac[j][k] == 1) {\n                    res[j].ac ++;\n                    res[j].pen += wa[j][k] * 20 + pen[j][k];\n                }\n            }\n        }\n\n        sort(res, res+T);\n        cout << res[0].num;\n        for (int j = 1; j < T; ++j) {\n            if (res[j-1].ac == res[j].ac && res[j-1].pen == res[j].pen) {\n                cout << \"=\";\n            } else {\n                cout << \",\";\n            }\n            cout << res[j].num;\n        }\n        cout << endl;\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n#define rep(i, n) for (int i = 0; i < (n); i++)\n#define REP(i, s, n) for (int i = (s); i < (n); i++)\n#define all(co) begin(co), end(co)\n\nint main() {\n\tint m,t,p,r;\nwhile (cin >> m >> t >> p >> r && m) {\n\tvector<vector<int>> v(t, vector<int>(p));\n\trep(i, r) {\n\t\tint m, t, p, j; cin >> m >> t >> p >> j;\n\t\tt--;\n\t\tif (j == 0) {\n\t\t\tif(v[t][p] == 0) v[t][p] = m;\n\t\t\telse v[t][p] = m + -v[t][p] * 20;\n\t\t}\n\t\telse v[t][p]--;\n\t}\n\tmap<int, vector<int>> rank;\n\trep(i, t) {\n\t\tint s = -accumulate(all(v[i]), 0);\n\t\tif(rank.count(s)) rank[s].push_back(i + 1);\n\t\telse rank.emplace(s, vector<int>{i+1});\n\t}\n\tfor(auto it = rank.begin(); it != --rank.end(); it++) {\n\t\tauto& v = it->second;\n\t\trep(i, v.size() - 1) cout << v.at(i) << '=';\n\t\tcout << v.back();\n\t\tcout << ',';\n\t}\n\t{\n\t\tauto it = --rank.end();\n\t\tauto& v = it->second;\n\t\trep(i, v.size() - 1) cout << v.at(i) << '=';\n\t\tcout << v.back();\n\t}\n\tcout << endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstdio>\n#include <cstdlib>\n#include <string>\n#include <vector>\n#include <deque>\n#include <list>\n#include <algorithm>\n#include <numeric>\n#include <functional>\n#include <cmath>\n#include <cstring>\n#include <cctype>\n#include <sstream>\n#include <set>\n#include <map>\n#include <queue>\n#include <complex>\nusing namespace std;\n#define REP(i,n) for(int i = 0; i < (int)n; i++)\n#define FOR(i,a,b) for(int i = a; i < (int)b; i++)\nconst int INF = 1<<28;\n\nstruct team {\n\tint no, ac, wa[10], time;\n\tbool operator < (const team& a) const {\n\t\tif(ac == a.ac) {\n\t\t\tif(time == a.time)\n\t\t\t\treturn no > a.no;\n\t\t\telse\n\t\t\t\treturn time < a.time;\n\t\t}\n\t\telse\n\t\t\treturn ac > a.ac;\n\t}\n};\n\nint main() {\n\tint M, T, P, R;\n\twhile(cin >> M >> T >> P >> R, M|T|P|R) {\n\t\tvector<team> vt;\n\t\tREP(i, T) {\n\t\t\tteam t;\n\t\t\tt.no = i + 1;\n\t\t\tt.ac = t.time = 0;\n\t\t\tmemset(t.wa, 0, sizeof(t.wa));\n\t\t\tvt.push_back(t);\n\t\t}\n\t\tREP(i, R) {\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tif(j)\n\t\t\t\tvt[t-1].wa[p-1]++;\n\t\t\telse {\n\t\t\t\tvt[t-1].ac++;\n\t\t\t\tvt[t-1].time += m + vt[t-1].wa[p-1] * 20;\n\t\t\t}\n\t\t}\n\t\tsort(vt.begin(), vt.end());\n\t\tint a = vt[0].ac, t = vt[0].time;\n\t\tcout << vt[0].no;\n\t\tFOR(i, 1, vt.size()) {\n\t\t\tif(vt[i].ac == a && vt[i].time == t)\n\t\t\t\tcout << '=';\n\t\t\telse {\n\t\t\t\ta = vt[i].ac;\n\t\t\t\tt = vt[i].time;\n\t\t\t\tcout << ',';\n\t\t\t}\n\t\t\tcout << vt[i].no;\n\t\t}\n\t\tcout << endl;\n//\t\tREP(i, vt.size()) cout << vt[i].no << ' ' << vt[i].ac << ' ' << vt[i].time << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#iniclude<iostream>\nusing namespace std;\n\nint main(){\n\twhile(true){\n\t\tint M, T, P, R;\n \t\tcin >> M >> T >> P >> R;\n\t\n\t\tif(M==0 && T==0 && P==0 && R==0)\n\t\t\tbreak;\n\t\t\n\t\tint CP[50], TT[50], PT[50][10];\n\t\tfor(int i=0;\ti<T; i++){\n\t\t\tCP[i] = TT[i] = 0;\n\t\t\tfor(int j=0; j<P; j++)\n\t\t\t\tPT[i][j] = 0;\n\t\t}\n\n\t\tfor(int i=0; i<R; i++){\n\t\t\tint m, t, p, r;\n\t\t\tcin >> m >> t >> p >> r;\n\t\t\t\n\t\t\tif(j==0){\n\t\t\t\tCP[t-1]++;\n\t\t\t\tTT[t-1] += (m+PT[t-1[p-1]);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tPT[t-1][p-1] += 20;\n\t\t\t}\n\t\t}\n\t\n\t\tint tnow, tpre = -1;\n\t\tbool flg[50];\n\t\t\tflg[i] = false;\n\t\t\t\t\n\t\tfor(int i=0; i<T; i++){\n\t\t\ttnow = -1;\n\t\t\tfor(int j=0; j<T; j++){\n\t\t\t\tif(flg[j])\n\t\t\t\t\tcontinue;\n\t\t\t\tif(tnow==-1){\n\t\t\t\t\ttnow = j;\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tif(CP[j]>CP[tnow] || (CP[j]==CP[tnow] && TT[j]==TT[tnow])){\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(tpre!=-1){\n\t\t\t\tif(CP[tnow]==CP[tpre] && tt[tnow]==TT[tpre])\n\t\t\t\t\tcout << '=';\n\t\t\t\telse\n\t\t\t\t\tcout << ',';\n\t\t\t\t}\n\t\t\t\tcout << tnow+1;\n\t\t\t\t\n\t\t\t\tflg [tnow] = true;\n\t\t\t\ttpre = tnow;\n\n\t\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}\n\n\n"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <algorithm>\n\n#define rep(i,n) for(int i=0;i<(n);i++)\n\nusing namespace std;\n\nint main(){\n\tfor(int M,T,P,R;scanf(\"%d%d%d%d\",&M,&T,&P,&R),M;){\n\t\tint AC[50]={},penalty[50]={},submit[50][10]={};\n\t\trep(_,R){\n\t\t\tint m,t,p,j; scanf(\"%d%d%d%d\",&m,&t,&p,&j); t--; p--;\n\t\t\tif(j==0){\n\t\t\t\tAC[t]++;\n\t\t\t\tpenalty[t]+=m+20*submit[t][p];\n\t\t\t}\n\t\t\tsubmit[t][p]++;\n\t\t}\n\n\t\tpair<pair<int,int>,int> tmp[50];\n\t\trep(i,T) tmp[i]=make_pair(make_pair(-AC[i],penalty[i]),-i);\n\t\tsort(tmp,tmp+T);\n\t\trep(i,T) printf(\"%d%c\",-tmp[i].second+1,i<T-1?tmp[i].first<tmp[i+1].first?',':'=':'\\n');\n\t}\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<vector>\n#include<cstring>\n#include<algorithm>\nusing namespace std;\n\ntypedef pair<int,int> pii;\ntypedef pair<pii,int> tri;\nint main(){\n  int m,t,p,r;\n  int team[55][15];\n  while(cin>>m>>t>>p>>r,m){\n    memset(team,0,sizeof(team));\n    vector<tri> ans;\n    int a,b,c,d;\n    for(int i=0;i<r;i++){\n      cin>>a>>b>>c>>d;\n      if(d!=0){\n\tteam[b][c]++;\n      }else{\n\tteam[b][p+1]+=a+20*team[b][c];\n\tteam[b][p+2]++;\n      }\n    }\n    for(int i=1;i<=t;i++){\n      ans.push_back(tri(pii(-team[i][p+2],team[i][p+1]),-i));\n    }\n    sort(ans.begin(),ans.end());\n    for(int i=0;i<t;i++){\n      cout<<-ans[i].second;\n      if(i+1==t)cout<<endl;\n      else if(ans[i].first == ans[i+1].first)cout<<\"=\";\n      else cout<<\",\";\n    }\n  }\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstdio>\n#include <vector>\n#include <functional>\nusing namespace std;\n\ntypedef pair<int, int> P;\n\ntypedef struct{\n\tint id;\n\tint solve;\n\tint time;\n\tint penal[20];\n\tint sort_s;\n\tint sort_t;\n}Team;\n\nTeam teams[100];\nvector< P > ssolve;\n\nint main(void){\n\twhile(1){\n\t\tint m, t, p, r;\n\t\tcin >> m >> t >> p >> r;\n\t\tif(m == 0 && t == 0 && p == 0 && r == 0) break;\n\n\t\tssolve.clear();\n\t\tfor(int i=0; i<t; i++){\n\t\t\tteams[i].id = i;\n\t\t\tteams[i].solve = 0;\n\t\t\tteams[i].time = 0;\n\t\t\tfor(int j=0; j<p; j++){\n\t\t\t\tteams[i].penal[j] = 0;\n\t\t\t}\n\t\t}\n\n\t\tfor(int i=0; i<r; i++){\n\t\t\tint tm, tt, tp, tj;\n\t\t\tcin >> tm >> tt >> tp >> tj;\n\n\t\t\ttt--;\n\t\t\tif(tj == 0){\n\t\t\t\tteams[tt].solve++;  \n\t\t\t\tteams[tt].time += tm;\n\t\t\t\tif(teams[tt].penal[tp] != 0) {\n\t\t\t\t\tteams[tt].time += teams[tt].penal[tp];\n\t\t\t\t\tteams[tt].penal[tp] = 0;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tteams[tt].penal[tp] += 20;\n\t\t\t}\n\n\t\t}\n\n\t\t/*\n\t\tfor(int i=0; i<t; i++){\n\t\t\tssolve.push_back(P(teams[i].solve, i));\n\t\t\t//cout << \"sol:\" << teams[i].time << endl;\n\t\t}\n\t\tsort(ssolve.begin(), ssolve.end(), greater<P>());\n\n\t\tint cnt = 0;\n\t\tteams[ssolve[0].second].sort_s = cnt;\n\t\tint same_s = ssolve[0].first;\n\t\tfor(int i=1; i<t; i++){\n\t\t\tif(same_s == ssolve[i].first){\n\t\t\t\tteams[ssolve[i].second].sort_s = teams[ssolve[i-1].second];\n\t\t\t}else{\n\t\t\t\tcnt++;\n\t\t\t\tteams[ssolve[i].second].sort_s = cnt;\n\t\t\t}\n\t\t}\n\n\t\t//timeテ」ツ?ォテ」ツ?、テ」ツ??」ツ?ヲテ」ツつステ」ツδシテ」ツδ?\n\t\tfor(int i=0; i<t; i++){\n\t\t\tstime.push_back(P(teams[i].time, i));\n\t\t\t//cout << \"sol:\" << teams[i].time << endl;\n\t\t}\n\t\tsort(stime.begin(), stime.end());\n\t\tcnt = 0;\n\t\tteams[stime[0].second].sort_t = cnt;\n\t\tint same_t = stime[0].first;\n\t\tfor(int i=1; i<t; i++){\n\t\t\tif(same_t == stime[i].first){\n\t\t\t\tteams[stime[i].second].sort_t = teams[stime[i-1].second];\n\t\t\t}else{\n\t\t\t\tcnt++;\n\t\t\t\tteams[stime[i].second].sort_t = cnt;\n\t\t\t}\n\t\t}\n\t\t*/\n\n\t\t/*\n\t\tfor(int i=0; i<t; i++){\n\t\t\tprintf(\"%d %d\\n\", ssolve[i].first, ssolve[i].second + 1);\n\n\t\t}\n\t\t*/\n\n\t\tfor(int i=0; i<t-1; i++){\n\t\t\tfor(int j=t-1; j>i; j--){\n\t\t\t\tif(teams[j].solve > teams[j-1].solve){\n\t\t\t\t\tTeam tmp = teams[j];\n\t\t\t\t\tteams[j] = teams[j-1];\n\t\t\t\t\tteams[j-1] = tmp;\n\t\t\t\t}else if(teams[j].solve == teams[j-1].solve && teams[j].time < teams[j-1].time){\n\t\t\t\t\tTeam tmp = teams[j];\n\t\t\t\t\tteams[j] = teams[j-1];\n\t\t\t\t\tteams[j-1] = tmp;\n\t\t\t\t}else if(teams[j].solve == teams[j-1].solve && teams[j].time == teams[j-1].time && teams[j].id > teams[j-1].id){\n\t\t\t\t\tTeam tmp = teams[j];\n\t\t\t\t\tteams[j] = teams[j-1];\n\t\t\t\t\tteams[j-1] = tmp;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor(int i=0; i<t; i++){\n\t\t\tprintf(\"%d\", teams[i].id + 1);\n\t\t\tif(i + 1 != t){\n\t\t\t\tif(teams[i+1].solve != teams[i].solve){\n\t\t\t\t\tprintf(\",\");\n\t\t\t\t}else if(teams[i+1].solve == teams[i].solve && teams[i+1].time != teams[i].time){\n\t\t\t\t\tprintf(\",\");\n\t\t\t\t}else{\n\t\t\t\t\tprintf(\"=\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tputs(\"\");\n\n\t}\n\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define _ ios_base::sync_with_stdio(0);cin.tie(0);\n#define REP(i,n) for(int i=0;i<(int)(n);i++)\n\nusing namespace std;\n\ntypedef pair<int,pair<int,int> > triple;\n#define mkt(i,j,k) make_pair((i),make_pair((j),(k)))\n#define solved first\n#define time second.first\n#define teamid second.second \n\nconst int MAX_T=50;\nconst int MAX_P=10;\nint wa[MAX_T][MAX_P];\ntriple team[MAX_T];\n\nint main(){ _;\n  int M,T,P,R,m,t,p,j;\n  while(cin>>M>>T>>P>>R,(M|T|P|R)!=0){\n    REP(i,MAX_T)REP(j,MAX_P)wa[i][j]=0;\n    REP(i,MAX_T)team[i]=mkt(0,0,i);\n    REP(i,R){\n      cin>>m>>t>>p>>j;\n      t--;p--;\n      if(j==0){\n\tteam[t].solved++;\n\tteam[t].time-=m+wa[t][p]*20;\n      }\n      else{\n\twa[t][p]++;\n      }\n    }\n    sort(team,team+T,greater<pair<int,pair<int,int> > >());\n    int cursolved=team[0].solved;\n    int curtime=team[0].time;\n    cout<<team[0].teamid+1;\n    for(int i=1;i<T;i++){\n      cout<<((cursolved==team[i].solved&&curtime==team[i].time)?\"=\":\",\")<<team[i].teamid+1;\n      cursolved=team[i].solved;\n      curtime=team[i].solved;\n    }\n    cout<<endl;\n  }\n}"
  },
  {
    "language": "C++",
    "code": "\n#include <iostream>\n#include <cmath>\n#include <vector>\n#include <string>\n#include <map>\n#include <algorithm>\n#include <tuple>\n#include <set>\n\nusing namespace std;\nusing ll = long long;\nusing ull = unsigned long long;\nusing vi = vector<int>;\nusing vvi = vector<vi>;\nusing vl = vector<ll>;\nusing pii = pair<int, int>;\n#define out(S) cout<<(S)<<endl;\n#define REP(i,b) for(size_t i=0;i<(b);i++)\n#define rREP(i,b) for(int i=(b)-1;i>=0;i--)\n#define FOR(i,a,b) for(size_t i=(a);i<(b);i++)\n#define rFOR(i,a,b) for(int i=(a)-1;i>=(b);i--)\n#define Foreach(item,collection) for(auto item:collection)\n#define mod(i) ((i) % (ll)(1e9 + 7))\nll modpow(ll i, ll j) { ll tmp = 1; while (j) { if (j % 2)tmp = mod(tmp*i); i = mod(i*i); j /= 2; }return tmp; }\n#define divmod(a,b) (mod(a * modpow((ll)b,(ll)(1e9 + 5))))\n#define Yes out(\"Yes\")\n#define No out(\"No\")\n#define NO out(\"NO\")\n#define YES out(\"YES\")\n#define INF 1e10;\n#define ShowAll(collection) for(auto i:collection){out(i);}\n#define IfOut(condition,text) if((condition)){out(text);return 0;}\n#define IfeOut(condition,itext,etext) if(condition){out(itext);return 0;}else{out(etext);return 0;}\n#define Select(collection,condition,result) Foreach(i,collection){result+=condition;}\n#define GetAuto(_N,vect) {cin>>_N;vect.resize(_N);REP(i,_N){cin>>vect[i];}}\n#define beginend(vec) (vec).begin(),(vec).end()\n#define pb(item) push_back(item)\n#define removeAll(vec,deleg) auto itr=remove_if(beginend(vec),deleg);vec.erase(itr,vec.end());\n#define WhileCin(n) while(cin>>n)\nvoid removeAt(string& s, int index) { s.erase(index, 1); }\ntemplate<typename T> void removeAt(vector<T>& v, int index) { v.erase(v.begin() + index); }\nll manhattanDistance(ll x1, ll y1, ll x2, ll y2) { return (abs(x2 - x1) + abs(y2 - y1)); }\nvector<ll> sieveOfEratosthenes(int max) { ll prime; double sqrtmax = sqrt(max); vector<ll> primeVec, searchVec; FOR(i, 2, max + 1) searchVec.push_back(i); do { prime = searchVec[0]; primeVec.push_back(prime); auto itr = remove_if(beginend(searchVec), [=](ll x)->bool {return x%prime == 0; }); searchVec.erase(itr, searchVec.end()); } while (prime < sqrtmax); primeVec.reserve(primeVec.size() + searchVec.size()); primeVec.insert(primeVec.end(), beginend(searchVec)); return primeVec; }\n\n\nstruct Team\n{\n\tint tNum;\n\tint sTime;\n\tint cCount;\n};\n\nint main()\n{\n\tint M, T, P, R;\n\tbool w_flag = true;\n\tvector<string> ans;\n\n\tWhileCin(M >> T >> P >> R) {\n\t\tvector<Team> team;\n\t\tvvi teamPenalty;\n\t\tteamPenalty.resize(T);\n\t\tREP(i, T) { Team t; t.cCount = 0; t.sTime = 0; t.tNum = i+1;team.pb(t);\tteamPenalty[i].resize(P,0);\t}\n\t\tint n = 0;\n\t\tdo\n\t\t{\n\t\t\tint mi, ti, pi, ji;\n\t\t\tcin >> mi >> ti >> pi >> ji;\n\t\t\tif (!mi && !ti && !pi && !ji) { w_flag = false; break; }\n\t\t\tif (ji) { n++; teamPenalty[ti - 1][pi-1] += 20; continue; }\n\t\t\tteam[ti - 1].sTime += mi + teamPenalty[ti - 1][pi-1];\n\t\t\tteam[ti - 1].cCount++;\n\t\t\tn++;\n\t\t} while (n<R);\n\t\tsort(beginend(team), [](Team t1, Team t2) {return (t1.cCount == t2.cCount) ? (t1.sTime == t2.sTime) ? (t1.tNum < t2.tNum) : (t1.sTime > t2.sTime) : (t1.cCount < t2.cCount); });\n\t\treverse(beginend(team));\n\t\tint bfTime = 0, bfCount = 0;\n\t\tbool out_flag = false;\n\t\tstring q = \"\";\n\t\tForeach(i, team) {if (out_flag) {if (bfCount == i.cCount&&bfTime == i.sTime) q += \"=\";else q += \",\";}bfCount = i.cCount;bfTime = i.sTime;out_flag = true;q += to_string(i.tNum);}\n\t\tans.pb(q);\n\t\tif (!w_flag) break;\n\t}\n\tForeach(i, ans) out(i);\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n#define rep(i,n) for(int i=0;i<(int)n;++i)\n#define fi first\n#define se second\n#define mp make_pair\n#define pb push_back\n#define ALL(x) x.begin(),x.end()\n\nstruct team {\n    int id, pro, tm;\n    team(int id, int pro, int tm) : id(id), pro(pro), tm(tm) {}\n    bool operator < (const team& a) const {\n\tif (pro != a.pro) { return pro < a.pro; }\n\tif (tm != a.tm) { return tm > a.tm; }\n\tif (id != a.id) { return id < a.id; }\n    }\n};\n\nvector<team> vec;\n\nint M, T, P, R;\nint pn[50][10];\nint ac[50][10];\n\nint main() {\n    while (scanf(\"%d %d %d %d\", &M, &T, &P, &R), M) {\n\tvec.clear();\n\tmemset(pn, 0, sizeof(pn));\n\tmemset(ac, -1, sizeof(ac));\n\n\trep(i, R) {\n\t    int m, t, p, j;\n\t    scanf(\"%d %d %d %d\", &m, &t, &p, &j);\n\t    --t; --p;\n\t    if (j) ++pn[t][p];\n\t    else ac[t][p] = m;\n\t}\n\n\trep(i, T) {\n\t    int sol = 0, tm = 0;\n\t    rep(j, P) {\n\t\tif (ac[i][j] == -1) continue;\n\t\t++sol;\n\t\ttm += ac[i][j] + pn[i][j] * 20;\n\t    }\n\t    vec.push_back(team(i + 1, sol, tm));\n\n\t    //cout << i + 1 << \" \" << sol << \" \" << tm << endl;\n\t}\n\n\tsort(ALL(vec));\n\treverse(ALL(vec));\n\n\tint i;\n\tfor (i = 0; i < T; ++i) {\n\t    if (i) printf(\",\");\n\t    team &tt = vec[i];\n\t    int j = i;\n\n\t    while (j + 1 < T && vec[j + 1].pro == vec[i].pro && vec[j + 1].tm == vec[i].tm) ++j;\n\n\t    for (int k = i; k <= j; ++k) {\n\t\tif (k != i) printf(\"=\");\n\t\tprintf(\"%d\", vec[k].id);\n\t    }\n\t    i = j;\n\t}\n\tputs(\"\");\n    }\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#define N 2001\nusing namespace std;\nstruct team{\n  int tnum;\n  int correct;\n  int time;\n};\nint main(){\n  int m,t,p,r,im[N],it[N],ip[N],ij[N],incorrect,i,j;\n  struct team data[51];\n  while(1){\n    cin >> m >> t >> p >> r;\n    if(m==0&&t==0&&p==0&&r==0) break;\n    for(i=0;i<r;i++) cin >> im[i] >> it[i] >> ip[i] >> ij[i];\n    for(i=1;i<=t;i++){\n      data[i].tnum=i;\n      data[i].correct=0;\n      data[i].time=0;\n    }\n    for(i=0;i<r;i++){\n      if(ij[i]==0){\n\tdata[it[i]].correct++;\n      \tincorrect=0;\n\tfor(j=0;j<i;j++){\n\t  if(it[i]==it[j]&&ip[i]==ip[j]) incorrect++;\n\t}\n\tdata[it[i]].time+=incorrect*20+im[i];\n      }\n    }\n    for(i=1;i<=t;i++){\n      for(j=2;j<=t;j++){\n\tif(data[j].tnum>data[j-1].tnum) swap(data[j],data[j-1]);\n      }\n    }\n    for(i=1;i<=t;i++){\n      for(j=2;j<=t;j++){\n\tif(data[j].time<data[j-1].time) swap(data[j],data[j-1]);\n      }\n    }\n    for(i=1;i<=t;i++){\n      for(j=2;j<=t;j++){\n\tif(data[j].correct>data[j-1].correct) swap(data[j],data[j-1]);\n      }\n    }\n    for(i=1;i<t;i++){\n      cout << data[i].tnum;\n      if(data[i].correct==data[i+1].correct&&data[i].time==data[i+1].time)\n\tcout << '=';\n      else cout << ',';\n      if(i==t-1) cout << data[i+1].tnum;\n    }\n    cout << endl;\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <iomanip>\n#include <algorithm>\n#include <string>\n#include <cstdio>\n#include <cmath>\n#include <cstdlib>\n#include <cstring>\n#include <vector>\n#include <list>\n#include <map>\n#include <set>\n#include <queue>\n#include <stack>\n\nusing std::cin;\nusing std::cout;\nusing std::endl;\nusing std::setprecision;\nusing std::fixed;\nusing std::pair;\nusing std::make_pair;\nusing std::string;\nusing std::vector;\nusing std::list;\nusing std::map;\nusing std::set;\nusing std::queue;\nusing std::priority_queue;\nusing std::stack;\n\ntypedef vector<int> VI;\ntypedef vector<vector<int> > VII;\ntypedef vector<string> VS;\ntypedef pair<int, int> PII;\ntypedef pair<int, bool> PIB;\n\nstruct SCORE {\n    vector<PIB> time;\n    int total_time;\n    int solve;\n    SCORE() {\n        total_time = 0; \n        solve = 0; \n    }\n};\n\nint main(void) {\n    int m; // time\n    int t; // number of team\n    int p; // number of problems\n    int r; // number of post records\n    while (1) {\n        cin >> m >> t >> p >> r;\n        if (m == 0 && t == 0 && p == 0 && r == 0) {\n            break; \n        }\n        vector<SCORE> rec(t);\n\n        // constructor????????????????????????????????????????????????\n        vector<PIB> temp(p, make_pair(0, false));\n        for (int i = 0; i < t; i++) {\n            rec[i].time = temp;\n        }\n\n        for (int loop = 0; loop < r; loop++) {\n            int m2;\n            int t2;\n            int p;\n            int j;\n            cin >> m2 >> t2 >> p >> j;\n            t2--;\n            p--;\n            if (j == 0) {\n                rec[t2].solve++; \n                rec[t2].time[p].first += (m - m2);\n                rec[t2].time[p].second = true;\n                rec[t2].total_time += rec[t2].time[p].first;\n            } else {\n                rec[t2].time[p].first -= 20;\n            }\n        }\n        priority_queue<pair<int, pair<int, int> > > pq;\n        for (int i = 0; i < t; i++) {\n           pq.push(make_pair(rec[i].solve, make_pair(rec[i].total_time, i + 1))); \n        }\n\n        /*\n        priority_queue<pair<int, pair<int, int> > > pq2 = pq;\n        while (!pq2.empty()) {\n            cout << pq2.top().first << \" \" << pq2.top().second.first << \" \" << pq2.top().second.second << endl;\n            pq2.pop();\n        }\n        */\n        int first = pq.top().first;\n        int second = pq.top().second.first;\n        cout << pq.top().second.second;\n        pq.pop();\n        for (int i = 1; i < t; i++) {\n            if (first == pq.top().first && second == pq.top().second.first) {\n                cout << \"=\" << pq.top().second.second;\n            } else {\n                first = pq.top().first;\n                second = pq.top().second.first;\n                cout << \",\" << pq.top().second.second;\n            }\n            pq.pop();\n        }\n        cout << endl;\n    }\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstdio>\n#include<vector>\n#include<string>\n#include<functional>\n#include<queue>\n#include<algorithm>\n#include<complex>\n#include<cstdlib>\n#include<cctype>\n\n#define REP(i,n) for(int i = 0;i < (n);i++)\n#define PB push_back\n#define MP make_pair\n#define FI first\n#define SE second\n#define SHOW1d(v,n) {for(int i = 0;i < (n);i++)cout << v[i] << ' ';cout << endl << endl;}\n#define SHOW2d(v,i,j) {for(int a = 0;a < i;a++){for(int b = 0;b < j;b++)cout << v[a][b] << ' ';cout << endl;}cout << endl;}\n#define ALL(v) v.begin(),v.end()\n\nusing namespace std;\n\ntypedef long long ll;\ntypedef vector<int> iv;\ntypedef vector<iv> iiv;\ntypedef vector<string> sv;\n\nstruct score\n{\n\tint team,pro,wrong[11];\n\tll _time;\n\t\n\tscore(int n){team = n;pro = 0;_time = 0;REP(i,11)wrong[i] = 0;}\n\t\n\tbool operator<(const score& right) const\n\t{\n\t\treturn pro != right.pro ? pro > right.pro :\n\t\t_time != right._time ? _time < right._time : team > right.team ;\n\t}\n};\n\n\nint main()\n{\n\tint m,t,p,r;\n\t\n\twhile(cin>>m>>t>>p>>r,m|t|p|r)\n\t{\n\t\tvector<score> v;\n\t\tREP(i,t)\n\t\t{\n\t\t\tscore tmp(i);\n\t\t\tv.PB(tmp);\n\t\t}\n\t\t\n\t\t\n\t\tREP(i,r)\n\t\t{\n\t\t\tint mm,tt,pp,jj;\n\t\t\tcin>>mm>>tt>>pp>>jj;\n\t\t\tif(!jj)\n\t\t\t{\n\t\t\t\tv[tt-1].pro++;\n\t\t\t\tv[tt-1]._time+=mm+20*v[tt-1].wrong[pp];\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tv[tt-1].wrong[pp]++;\n\t\t\t}\n\t\t}\n\t\t\n\t\tsort(ALL(v));\n//\t\tREP(i,t)\n//\t\t{\n//\t\t\tcout << v[i].team << ' ' << v[i].pro << ' ' << v[i]._time << endl;\n//\t\t}\n\t\t\n\t\tcout << v[0].team+1 ;\n\t\tfor(int i = 1;i < t;i++)\n\t\t{\n\t\t\tif(v[i].pro == v[i-1].pro && v[i]._time == v[i-1]._time)\n\t\t\t{\n\t\t\t\tcout << '=' << v[i].team+1;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tcout << ',' << v[i].team+1;\n\t\t\t}\n\t\t}\n\t\tcout << endl;\n\t}\n\t\t\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\nusing namespace std;\n\nclass team{\npublic:\n\tint num, ans, time;\n\tteam(int n){\n\t\tnum = n;\n\t\tans = time = 0;\n\t}\n\tbool operator<(const team &t2)const{\n\t\tif (ans != t2.ans)\n\t\t\treturn ans > t2.ans;\n\t\telse if (time != t2.time)\n\t\t\treturn time < t2.time;\n\t\telse\n\t\t\treturn num > t2.num;\n\t}\n};\n\nint main()\n{\n\tint M, T, P, R, m[2001], t[2001], p[2001], r[2001],before;\n\twhile (cin >> M >> T >> P >> R, (M || T || P || R)){\n\t\tvector<team> v;\n\t\tvector<team>::iterator pv;\n\t\t//入力\n\t\tfor (int i = 0; i < R; i++){\n\t\t\tcin >> m[i] >> t[i] >> p[i] >> r[i];\n\t\t}\n\n\t\t//各チームの時間\n\t\tfor (int i = 1; i <= T; i++){\n\t\t\tteam te = team(i);\n\t\t\tfor (int j = 0; j < R; j++){\n\t\t\t\t//正解時間の計算\n\t\t\t\tif (t[j] == i && r[j] == 0){\n\t\t\t\t\tte.time += m[j];\n\t\t\t\t\tte.ans++;\n\t\t\t\t\t//以前のペナルティを計算\n\t\t\t\t\tfor (int k = 0; k < j; k++){\n\t\t\t\t\t\tif (t[k] == i && p[k] == p[j]){\n\t\t\t\t\t\t\tte.time += 20;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tv.push_back(te);\n\t\t}\n\n\t\t//ソート\n\t\tsort(v.begin(), v.end());\n\t\tpv = v.begin();\n\t\tbefore = -1;\n\t\twhile (pv != v.end()){\n\t\t\tif (before == pv->time)\n\t\t\t\tcout << \"=\" << pv->num;\n\t\t\telse {\n\t\t\t\tif (pv == v.begin())\n\t\t\t\t\tcout << pv->num;\n\t\t\t\telse\n\t\t\t\t\tcout << \",\" << pv->num;\n\t\t\t\tbefore = pv->time;\n\t\t\t}\n\t\t\tpv++;\n\t\t}\n\t\tcout << endl;\n\t\tv.~vector();\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\nusing namespace std;\n\nstruct Team {\n  int time,correct,team_num;\n};\n\nint main(){\n  Team data[51];\n  int i,j,M,T,P,R,m,t,p,wrong[51][11];\n  while(1){\n     for( i = 0; i < 51; i++ ){\n    for( j = 0; j < 51; j++ ){\n    \twrong[i][j] = 0;\n     }\n      }\n    cin >> M >> T >> P >> R;\n    if ( M == 0 && T == 0 && P == 0 && R == 0 ) break;\n\n    for( i = 1; i <= T; i++ ){\n      data[i].time = 0;\n      data[i].correct = 0;\n      data[i].team_num = i;\n    }\n  \n    for( i = 1; i <= R; i++ ){\n      cin >> m >> t >> p >> j;\n      if( j == 0 ){\n\tdata[t].correct++;\n\tdata[t].time += m + wrong[t][p] * 20;\n      }else wrong[t][p]++; \n    }\n\n    for( i = 1; i <= T; i++ ){\n      for( j = 1; j < T; j++ ){\n\tif( data[j].team_num < data[j+1].team_num ) \n\t  swap( data[j],data[j+1] );\n      }\n    }\n\n    for( i = 1; i <= T; i++ ){\n      for( j = 1; j < T; j++ ){\n\tif( data[j].time > data[j+1].time ) swap( data[j],data[j+1] );\n      }\n    }\n\n    for( i = 1; i <= T; i++ ){\n      for( j = 1; j < T; j++ ){\n\tif( data[j].correct < data[j+1].correct )\n\t  swap( data[j],data[j+1] );\n      }\n    }\n   \n    for( i = 1; i <= T-1; i++ ){\n      cout << data[i].team_num;\n      if( data[i].correct > data[i+1].correct )\tcout << \",\";\n      else if( data[i].time < data[i+1].time ) cout <<  \",\";\n      else cout << \"=\";\n      }\n    cout << data[T].team_num << endl;\n\n  }\n\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\ntypedef pair<int, int> P;\nP info[51][11];\n//bool team[51];\nvector<P> v;\n\nmap<int, P> mp;\n//int D[51];\nvector<int> order;\n\nstring ans = \"A\";\n//自作の比較関数\nbool comp(P lhs, P rhs){\n\tif(lhs.first != rhs.first){\n\t\treturn lhs.first < rhs.first;\n\t}\n\tif(lhs.second != rhs.second){\n\t\treturn lhs.second > rhs.second;\n\t}\n}\n\nint main(){\nwhile(1){//start\n\n\n\tint M, T, P, R;\n\tcin >> M >> T >> P >> R;\n\tif(M == 0 and T == 0 and P == 0 and R == 0) break;\n\n\t//初期化\n\tfor(int i = 0; i < 51; i++){\n\t\tfor(int j = 0; j < 11; j++){\n\t\t\tinfo[i][j].first = 0;\n\t\t\tinfo[i][j].second = 0;\n\t\t}\n\t}\n\tbool team[51] = {0};\n\tint D[51] = {0};\n\tint OK[51] = {0};\n\n\t//データを格納\n\tfor(int i = 0; i < R; i++){\n\t\tint m, t, p, j;\n\t\tcin >> m >> t >> p >> j;\n\t\tteam[t] = true;\n\n\t\tif(j == 0){\n\t\t\tinfo[t][p].second = m + 20*info[t][p].first;\n\t\t\tOK[t-1] += 1;\n\t\t}\n\t\telse{\n\t\t\tinfo[t][p].first += 1;\n\t\t}\n\t}\n\n\t//vの内部はキーがチーム名(解いた数/合計時間)\n\tfor(int i = 1; i <= T; i++){\n\t\t\tint sum = 0, ok = 0;\n\t\t\tfor(int j = 0; j < 11; j++) sum += info[i][j].second;\n\t\t\t//for(int j = 0; j < 11; j++) if(info[i][j].second) ok += 1;\n\t\t\tint tmp = OK[i-1];\n\t\t\tv.push_back(make_pair(tmp, sum));\n\t\t\tmp[i] = make_pair(tmp, sum);\n\t}\n\n\tsort(v.begin(), v.end(), comp);\n\treverse(v.begin(), v.end());\n\t//debug\n\t//for(int i = 0; i < (int)v.size(); i++) cout << v[i].first << \" \" << v[i].second << endl;\n\n\t//重複カウンタを作成\n\tint d = 1;\n\tD[0] = 1;\n\tfor(int i = 1; i < (int)v.size(); i++){\n\t\tif(v[i-1].first == v[i].first and v[i-1].second == v[i].second){\n\t\t\tD[i] = d;\n\t\t}\n\t\telse{\n\t\t\td++;\n\t\t\tD[i] = d;\n\t\t}\n\t}\n\n\t//debug\n\t//for(int i = 0; i < (int)v.size(); i++) cout << D[i] << endl;\n\n\t//ソート結果にチーム名を割り当てる\n\tbool vis[51] = {false};\n\tfor(int i = 0; i < (int)v.size(); i++){\n\t\tfor(int j = (int)v.size(); 1 <= j; j--){\n\t\t\tif(v[i] == mp[j]){\n\t\t\t\tif(vis[j] == false){\n\t\t\t\t\torder.push_back(j);\n\t\t\t\t\tvis[j] = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t//debug\n\t//for(int i = 0; i < (int)v.size(); i++) cout << order[i] << endl;\n\n\t//出力\n\t//まず重複数を記録する\n\tint num[51] = {0};\n\tfor(int i = 0; i < 51; i++) num[D[i]] += 1;\n\n\n\tint idx = 0;\n\tfor(int i = 1; i <= (int)order.size(); i++){\n\t\tif(num[i] == 0) break;\n\t\telse if(num[i] == 1){\n\t\t\tans += to_string(order[idx]);\n\t\t\tidx++;\n\t\t}\n\t\telse{\n\t\t\tfor(int j = 0; j < num[i]; j++){\n\t\t\t\tif(j == num[i]-1) ans += to_string(order[idx]);\n\t\t\t\telse ans += to_string(order[idx]) + \"=\";\n\t\t\t\tidx++;\n\t\t\t}\n\t\t}\n\t\tans += \",\";\n\t}\n\n\tans.erase(ans.begin() + 0);\n\tans.erase(ans.end() - 1);\n\tcout << ans << endl;\n\n\t//初期化\n\tv.clear();\n\tmp.clear();\n\torder.clear();\n\t\n\tans=\"A\";\n\n\n}//end\n\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n#define rep(i,n) for(int i=0;i<n;++i)\n#define Rep(i,n) for(int i=1;i<=n;++i)\n#define rrep(i,n) for(int i=n-1;0<=i;--i)\n#define rRep(i,n) for(int i=n;0<i;--i)\n#define range(i,a,b) for(int i=(a);i<(b);++i)\n#define mp make_pair\n#define pb push_back\n#define all(x) x.begin(), x.end()\n#define EPS 1e-8\n#define INF 1e8\n\ntypedef double Real;\ntypedef int Int;\ntypedef vector<Int> vi;\ntypedef vector<vector<Int> > vvi;\ntypedef pair<Int,Int> pii;\n\ninline Real sr(Real a) {return sqrt(max(a, (Real)0));}\nconst vi dy = {-1, 0, 1, 0}, dx = {0, -1, 0, 1};\n\ntemplate <typename K, typename V> ostream& operator<< (ostream& out, const pair<K, V>& p) {\n  out << '(' << p.first << \", \" << p.second << ')';\n  return out;\n}\n\ntemplate <typename T> ostream& operator<< (ostream& out, const vector<T>& v) {\n  out << '[';\n  rep(i, v.size()) out << v[i] << \",\";\n  out << \"\\b], \" << v.size();\n  return out;\n}\n\nvoid solve(){\n  Int M, T, P, R, m, t, p, j;\nfor(;;){\n  cin >> M >> T >> P >> R;\n  if(M == 0) return;\n\n  vvi penalty(T, vi(P, 0));\n  map<Int, pii> scores; // <teamnum, <correctprobrems, time>>\n  rep(i, T) scores[i] = make_pair(0, 0);\n\n  rep(i, R){\n    cin >> m >> t >> p >> j;\n    --t; --p;\n\n    if(j){\n      penalty[t][p]++;\n      continue;\n    }\n\n    pii &ct = scores[t];\n    ct.first++;\n    ct.second += m + 20 * penalty[t][p];\n  }\n\n  vector<pair<Int, pii> > v(all(scores));\n  sort(all(v), [&](pair<Int, pii> a, pair<Int, pii> b) {\n    if(a.second.first != b.second.first) return a.second.first > b.second.first;\n    if(a.second.second != b.second.second) return a.second.second < b.second.second;\n    return a.first < b.first;\n  });\n\n//  cout << v << endl;\n\n  Int lastnums = v[0].second.first, lasttime = v[0].second.second;\n  cout << v[0].first + 1;\n  for (int i = 1; i < T; ++i)\n  {\n    cout << (v[i].second.first == lastnums ? (v[i].second.second == lasttime ? '=' : ',') : ',') << v[i].first + 1;\n    lastnums = v[i].second.first;\n    lasttime = v[i].second.second;\n  }\n  cout << endl;\n}\n}\n\nsigned main()\n{\n  cin.tie(0);\n  ios::sync_with_stdio(false);\n  cout << fixed << setprecision(9);\n\n  solve();\n\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <algorithm>\n#include <vector>\n#include <cstring>\n\nusing namespace std;\n\nstruct Team\n{\n\tint solved, penalty, no;\n\tbool operator < (const Team &a) const\n\t{\n\t\tif(solved != a.solved) return solved > a.solved;\n\t\tif(penalty != a.penalty) return penalty < a.penalty;\n\t\treturn no > a.no;\n\t}\n\tint compareTo(Team a)\n\t{\n\t\tif(solved != a.solved) \n\t\t{\n\t\t\tif(solved > a.solved) return 1;\n\t\t\telse return -1;\n\t\t}\n\t\tif(penalty != a.penalty) \n\t\t{\n\t\t\tif(penalty < a.penalty) return 1;\n\t\t\telse return -1;\n\t\t}\n\t\treturn 0;\n\t}\n} team[50];\n\nint wrongCnt[50][10];\n\nint main(void)\n{\n\tint m, t, p, r;\n\twhile(scanf(\"%d %d %d %d\", &m, &t, &p, &r), m)\n\t{\n\t\tmemset(wrongCnt, 0, sizeof(wrongCnt));\n\t\tfor(int i=0;i<t;i++) \n\t\t{\n\t\t\tteam[i].solved = team[i].penalty = 0;\n\t\t\tteam[i].no = i;\n\t\t}\n\n\t\tfor(int i=0;i<r;i++)\n\t\t{\n\t\t\tint mk, tk, pk, jk;\n\t\t\tscanf(\"%d %d %d %d\", &mk, &tk, &pk, &jk);\n\t\t\ttk--, pk--;\n\t\t\tif(jk == 0) \n\t\t\t{\n\t\t\t\tteam[tk].penalty += mk + wrongCnt[tk][pk] * 20;\n\t\t\t\tteam[tk].solved++;\n\t\t\t}\n\t\t\telse wrongCnt[tk][pk]++;\n\t\t}\n\n\t\tsort(team, team + t);\n\t\tfor(int i=0;i<t;i++)\n\t\t{\n\t\t\tint e = i;\n\t\t\twhile(e < t && team[i].compareTo(team[e]) == 0) e++;\n\t\t\tif(i) printf(\",\");\n\t\t\tfor(int j=i;j<e;j++)\n\t\t\t{\n\t\t\t\tif(j != i) printf(\"=\");\n\t\t\t\tprintf(\"%d\", team[j].no + 1);\n\t\t\t}\n\t\t\ti = e - 1;\n\t\t}\n\t\tprintf(\"\\n\");\n\t}\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define syosu(x) fixed<<setprecision(x)\nusing namespace std;\ntypedef long long ll;\ntypedef unsigned int uint;\ntypedef unsigned long long ull;\ntypedef pair<int,int> P;\ntypedef pair<double,double> pdd;\ntypedef pair<ll,ll> pll;\ntypedef vector<int> vi;\ntypedef vector<vi> vvi;\ntypedef vector<double> vd;\ntypedef vector<vd> vvd;\ntypedef vector<ll> vl;\ntypedef vector<vl> vvl;\ntypedef vector<string> vs;\ntypedef vector<P> vp;\ntypedef vector<vp> vvp;\ntypedef vector<pll> vpll;\ntypedef pair<P,int> pip;\ntypedef vector<pip> vip;\nconst int inf=1<<30;\nconst ll INF=1ll<<60;\nconst double pi=acos(-1);\nconst double eps=1e-11;\nconst ll mod=1e9+7;\nconst int dx[4]={-1,0,1,0},dy[4]={0,-1,0,1};\nconst int DX[8]={-1,0,1,0,-1,-1,1,1},DY[8]={0,-1,0,1,-1,1,-1,1};\n\n\nint main(){\n\twhile(1){\n\t\tint tmp,n,m,k;\n\t\tcin>>tmp>>n>>m>>k;\n\t\tif(tmp==0) break;\n\t\tvip a(n);\n\t\tvvi b(n,vi(m));\n\t\tfor(int i=0;i<n;i++) a[i].second=-i-1;\n\t\tfor(int i=0;i<k;i++){\n\t\t\tint x,y,z,w;\n\t\t\tcin>>x>>y>>z>>w;\n\t\t\ty--;z--;\n\t\t\tif(w!=0) b[y][z]++;\n\t\t\telse{\n\t\t\t\ta[y].first.first--;\n\t\t\t\ta[y].first.second+=b[y][z]*20+x;\n\t\t\t}\n\t\t}\n\t\tsort(a.begin(),a.end());\n\t\tfor(int i=0;i<n;i++){\n\t\t\tif(i){\n\t\t\t\tif(a[i-1].first==a[i].first) cout<<'=';\n\t\t\t\telse cout<<',';\n\t\t\t}\n\t\t\tcout<<-a[i].second;\n\t\t}\n\t\tcout<<endl;\n\t}\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n#include <cstdio>\n\n#define REP(i,n) for( int i = 0; i < n; i++ )\n\n\nusing namespace std;\n\n/*\n より多くの問題に正解したチームを上位とする．\n 正解した問題数が同じ場合は，所要時間合計の少ないチームを上位とする．\n 複数のチームが同数の問題に正解し，所要時間合計も同じなら，それらのチームを同順位とする．\n */\n\nstruct team{\n\tint ans,time,name;\n    int q[50]={0};\n    \n\tteam() : ans(0), time(0), name(0) {}\n    \n    bool operator <( const team& Right )const {\n        return  ans != Right.ans ? ans < Right.ans :\n        time != Right.time ? time > Right.time :\n        name <  Right.name;\n    }\n};\n\n\nint main()\n{\n\tint M,T,P,R;\n\t// Mは，コンテストの始まりから終わりまでの時間である． Tは，チーム数である． Pは，問題数である． Rは，提出記録の数である\n\twhile( cin >> M >> T >> P >> R )\n\t{\n\t\tint m,t,p,k;\n\t\tvector<team> team_array(T+1);\n\t\tif( T == 0 ) return 0;\n\t\tfor( int i = 1; i <= T; i++)\n\t\t\tteam_array[i].name = i;\n\t\t// mkは，経過時間である． tkは，チーム番号である． pkは，問題番号である． jkは，判定結果を表す（0なら正解，0以外なら不正解）\n\t\tREP(i,R)\n\t\t{\n\t\t\tcin >> m >> t >> p >> k;\n\t\t\tteam &tm = team_array[t];\n\t\t\tif( !k ){\n\t\t\t\ttm.ans++;\n\t\t\t\ttm.time += m;\n                if( tm.q[p] )\n                    tm.time += 20 * tm.q[p];\n\t\t\t}\n            else{\n                tm.q[p]++;\n            }\n            \n\t\t}\n\t\t\n        sort( team_array.begin() + 1 , team_array.end() );\n\t\t\n        for( int i = T; i > 0; i-- )\n        {\n            char c;\n            if( i == 1 ){\n                cout << team_array[i].name << endl;\n                continue;\n            }\n            else if ( team_array[i].ans == team_array[i-1].ans &&\n                team_array[i].time == team_array[i-1].time) {\n                c = '=';\n            }\n            else{\n                c = ',';\n            }\n\t\t\tcout << team_array[i].name << c;\n        }\n        \n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n#include <cstdio>\n#include <cmath>\n#include <math.h>\n#include <string>\n#include <string.h>\n#include <stack>\n#include <queue>\n#include <vector>\n#include <utility>\n#include <set>\n#include <map>\n#include <stdlib.h>\n\nusing namespace std;\n\n#define ll long long\n#define ld long double\n#define EPS 0.0000000001\n#define INF 10000000000\n#define rep(i,n) for(i=0;i<n;i++)\n\ntypedef pair<int,int> pii;\n\n\nint main() {\n    while(1){\n        int m,t,p,r;\n        cin>>m>>t>>p>>r;\n        if(m==0 && t==0 && p==0 && r==0)break;\n        int i;\n        pair<pii,int> team[50]; //solved_num, time, team_num\n        int v[50][10]={};//team_num, problem_num, wrong_num\n        int time,tnum,pnum,j;\n        rep(i,t)\n            team[i].second=i+1;\n        rep(i,r){\n            cin>>time>>tnum>>pnum>>j;\n            tnum--;\n            pnum--;\n            if(j){//WA\n                v[tnum][pnum]++;\n            }else{//AC\n                team[tnum].first.first++;\n                team[tnum].first.second-=time+v[tnum][pnum]*20;\n            }\n        }\n        rep(i,t)\n            if(team[i].first.second==0)team[i].first.second=-1000000;\n        \n        sort(team,team+t);\n        for(i=t-1;i>0;i--){\n            cout<<team[i].second;\n            if(team[i].first.first==team[i-1].first.first &&\n               team[i].first.second==team[i-1].first.second)\n                cout<<\"=\";\n            else\n                cout<<\",\";\n            \n        }\n        cout<<team[0].second<<endl;\n    \n    }\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n\nusing namespace std;\n\nclass Question{\npublic:\n    bool isAC;\n    int p;\n    Question() : isAC(false),p(0){}\n};\nclass Team{\npublic:\n    int ID;\n    int AC;\n    int ptime;\n    vector<Question> q;\n\n    Team() : ID(-1), q(vector<Question>(21)), ptime(0), AC(0) {}\n    Team(int id)\n        : ID(id), q(vector<Question>(21)) , ptime(0), AC(0)\n    {\n    }\n\n    void submit(int m,int p,int j){\n        if(j == 0){\n            q[p].p += m;\n            q[p].isAC = true;\n            AC++;\n            ptime += q[p].p;\n        }else{\n            q[p].p += 20;\n        }\n    }\n};\n\nbool operator==(const Team& a,const Team& b){\n    return a.AC == b.AC && a.ptime == b.ptime;\n}\nbool operator!=(const Team& a,const Team& b){\n    return !(a == b);\n}\n\n//M:テァツオツづ、ツコツ?ヲツ卍づゥツ鳴?\n//T:テ」ツδ?」ツδシテ」ツδ?ヲツ閉ー\n//P:テ・ツ閉湘ゥツ。ツ古ヲツ閉ー\n//R:テヲツ渉静・ツ?コテヲツ閉ー\nvoid solve(int M,int T,int P,int R){\n    vector<Team> team;\n    for(int i=1;i<=T;i++){\n        team.push_back(Team(i));\n    }\n    for(int i=0;i<R;i++){\n        int m,t,p,j;\n        cin >> m >> t >> p >> j;\n        team[t-1].submit(m,p,j);\n    }\n    std::sort(team.begin(),team.end(),\n            [](const Team& a,const Team& b)->bool{\n                if(a.AC < b.AC)\n                    return true;\n                if(a.AC > b.AC)\n                    return false;\n                if(a.ptime > b.ptime)\n                    return true;\n                return a.ID < b.ID;\n            }\n            );\n    std::reverse(team.begin(),team.end());\n    //for(auto t : team)\n    //{\n    //    cout << t.ID << \" :\" << t.AC << \" ,\" << t.ptime << endl;\n    //}\n    cout << team[0].ID;\n    for(int i=1;i<T;i++){\n        if(team[i-1] == team[i]){\n            cout << \"=\" << team[i].ID;\n        }else{\n            cout << \",\" << team[i].ID;\n        }\n    }\n    cout << endl;\n}\n\nint main(){\n    while(true){\n        int M,T,P,R;\n        cin >> M >> T >> P >> R;\n        if(!M&&!T&&!P&&!R)\n            return 0;\n        solve(M,T,P,R);\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\nstruct Score {\n    int team;\n    int times=0;\n    int correct=0;\n};\nint main(void){\n    int M,T,P,R;\n    while (cin>>M>>T>>P>>R) {\n        if (M==0&&T==0&&P==0&&R==0) {\n            break;\n        }\n        int incorrect[T+1][P+1];\n        for (int i=1;i<=T;i++) {\n            for (int j=1;j<=P;j++) {\n                incorrect[i][j]=0;\n            }\n        }\n        struct Score score[T+1];\n        for (int i=1;i<=T;i++) {\n            score[i].team=i;\n        }\n        int m,t,p,j;\n        for (int i=0;i<R;i++) {\n            cin>>m>>t>>p>>j;\n            if (j==0) {\n                score[t].correct++;\n                score[t].times+=incorrect[t][p]+m;\n            } else {\n                incorrect[t][p]+=20;\n            }\n        }\n        for (int i=1;i<T;i++) {\n            for (int j=i+1;j<=T;j++) {\n                if (score[i].correct<score[j].correct) {\n                    swap(score[i],score[j]);\n                }\n            }\n        }\n        for (int i=1;i<T;i++) {\n            for (int j=i+1;j<=T;j++) {\n                if (score[i].correct==score[j].correct) {\n                    if (score[i].times>score[j].times) {\n                        swap(score[i],score[j]);\n                    } else if (score[i].times==score[j].times) {\n                        if (score[i].team<score[j].team) {\n                            swap(score[i],score[j]);\n                        }\n                    }\n                }\n            }\n        }\n        int tmp_correct;\n        int tmp_times;\n        for (int i=1;i<=T;i++) {\n            if (i==1) {\n                cout<<score[i].team;\n            } else {\n                if (score[i].correct==tmp_correct) {\n                    if (score[i].times==tmp_times) {\n                        cout<<\"=\"<<score[i].team;\n                    } else {\n                        cout<<\",\"<<score[i].team;\n                    }\n                } else {\n                    cout<<\",\"<<score[i].team;\n                }\n            }\n            tmp_correct=score[i].correct;\n            tmp_times=score[i].times;\n        }\n        cout<<endl;\n    }\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<string.h>\nusing namespace std;\n\nconst int INF=50000000;\n\nint data[51][12];\n\nint main(){\n\tint M,T,P,R;\n\twhile(cin>>M>>T>>P>>R && M){\n\t\tfill((int*)data,(int*)(data+12),0);\n\t\tfor(int i=0;i<R;i++){\n\t\t\tint m,t,p,j;\n\t\t\tcin>>m>>t>>p>>j;\n\t\t\tif(j==0){\n\t\t\t\tdata[t][0]++;\n\t\t\t\tdata[t][11]+=m+data[t][p]*20;\n\t\t\t}\n\t\t\telse data[t][p]++;\n\t\t}\n\t\tint prev[2]={INF,0};\n\t\tfor(int i=0;i<T;i++){\n\t\t\tint ans=0;\n\t\t\tint now[2]={0,INF};\n\t\t\tfor(int j=T;j>=0;j--){\n\t\t\t\tif(data[j][0]>now[0]){\n\t\t\t\t\tnow[0]=data[j][0];\n\t\t\t\t\tnow[1]=data[j][11];\n\t\t\t\t\tans=j;\n\t\t\t\t}\n\t\t\t\telse if(data[j][0]==now[0] && data[j][11]<now[1]){\n\t\t\t\t\tnow[1]=data[j][11];\n\t\t\t\t\tans=j;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(i){\n\t\t\t\tif(memcmp(now,prev,sizeof(now))==0)cout<<\"=\";\n\t\t\t\telse cout<<\",\";\n\t\t\t}\n\t\t\tcout<<ans*1000;\n\t\t\tmemcpy(prev,now,sizeof(now));\n\t\t\tdata[ans][0]=-1;\n\t\t}\n\t\tcout<<endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#define _USE_MATH_DEFINES\n#define INF 0x3f3f3f3f\n#include <cstdio>\n#include <iostream>\n#include <sstream>\n#include <cmath>\n#include <cstdlib>\n#include <algorithm>\n#include <queue>\n#include <stack>\n#include <limits>\n#include <map>\n#include <string>\n#include <cstring>\n#include <set>\n#include <deque>\n#include <bitset>\n#include <list>\n#include <cctype>\n#include <utility>\n \nusing namespace std;\n \ntypedef long long ll;\ntypedef pair <int,int> P;\ntypedef pair <int,P > PP;\n \nint tx[] = {0,1,0,-1};\nint ty[] = {-1,0,1,0};\n \nstatic const double EPS = 1e-8;\n\nstruct Team{\npublic:\n  int solved;\n  int elapsed_time;\n  int penalty;\n  int id;\n  Team() : solved(0),elapsed_time(0),penalty(0),id(0){}\n  bool operator<(const Team& t) const{\n    if(__builtin_popcount(solved) == __builtin_popcount(t.solved)){\n      if((elapsed_time + penalty) == (t.elapsed_time + t.penalty)){\n\treturn id > t.id;\n      }\n      else{\n\treturn ((elapsed_time + penalty) < (t.elapsed_time + t.penalty)); \n      }\n    }\n    else{\n      return (__builtin_popcount(solved) > __builtin_popcount(t.solved));\n    }\n  }\n  bool operator>(const Team& t) const{\n    if(__builtin_popcount(solved) == __builtin_popcount(t.solved)){\n      if((elapsed_time + penalty) == (t.elapsed_time + t.penalty)){\n\treturn id > t.id;\n      }\n      else{\n\treturn ((elapsed_time + penalty) > (t.elapsed_time + t.penalty)); \n      }\n    }\n    else{\n      return (__builtin_popcount(solved) > __builtin_popcount(t.solved));\n    }\n  }\n  bool operator==(const Team& t) const{\n    if(__builtin_popcount(solved) == __builtin_popcount(t.solved)\n       && (elapsed_time + penalty) == (t.elapsed_time + t.penalty)){\n      return true;\n    }\n    return false;\n  }\n};\n\nint main(){\n  int duration;\n  int total_teams;\n  int total_problems;\n  int total_submission_records;\n  while(~scanf(\"%d %d %d %d\",\n\t       &duration,\n\t       &total_teams,\n\t       &total_problems,\n\t       &total_submission_records)){\n\n    if(duration == 0\n       && total_teams == 0\n       && total_problems == 0\n       && total_submission_records == 0) break;\n\n    Team teams[51];\n    int freq[51][11];\n    \n    memset(freq,0,sizeof(freq));\n    for(int team_idx=0;team_idx < total_teams; team_idx++){\n      teams[team_idx].id = team_idx+1;\n    }\n    for(int submit_idx=0;submit_idx< total_submission_records; submit_idx++){\n      int elapsed_time;\n      int team_number;\n      int problem_number;\n      int judgement;\n      scanf(\"%d %d %d %d\",\n\t    &elapsed_time,\n\t    &team_number,\n\t    &problem_number,\n\t    &judgement);\n      if(judgement == 0){\n\tteams[team_number-1].elapsed_time\n\t  += elapsed_time;\n\tteams[team_number-1].penalty\n\t  += freq[team_number-1][problem_number-1] * 20;\n\tfreq[team_number-1][problem_number-1] = 0;\n\tteams[team_number-1].solved |= (1<<(problem_number-1));\n      }\n      else{\n\tif(!(teams[team_number-1].solved & (1<<(problem_number-1)))){\n\t  freq[team_number-1][problem_number-1]++;\n\t}\n      }\n    }\n\n    sort(teams,teams+total_teams);\n    for(int team_idx=0;team_idx+1 < total_teams; team_idx++){\n      if(teams[team_idx] == teams[team_idx+1]){\n\tprintf(\"%d=\",teams[team_idx].id);\n      }\n      else{\n\tprintf(\"%d,\",teams[team_idx].id);\n      }\n    }\n    printf(\"%d\\n\",teams[total_teams-1].id);\n  }\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<vector>\n#include<string.h>\n\nusing namespace std;\n\nstruct TeamData{\n\tint cn;\n\tint pnp;\n\tint pn[10];\n};\n\nstruct ansData{\n\tint tn;\n\tint same;\n};\n\nvector<vector<ansData> > ans;\n\nint main(){\n\twhile(1){\n\t\tint M,T,P,R;\n\t\tcin >> M >> T >> P >> R;\n\t\tif(M+T+P+R == 0) break;\n\t\tTeamData td[50];\n\t\t\n\t\tmemset(td,0,sizeof(td));\n\t\t\n\t\tfor(int i = 0;i < R;i++){\n\t\t\tint m,t,p,j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tif(j == 0){\n\t\t\t\ttd[t - 1].cn++;\n\t\t\t\ttd[t - 1].pnp += td[t - 1].pn[p - 1] * 20 + m;\n\t\t\t}else{\n\t\t\t\ttd[t - 1].pn[p - 1]++;\n\t\t\t}\n\t\t}\n\t\t\n\t\t\n\t\tint index[50];\n\t\tfor(int i = 0;i < 50;i++) index[i] = i;\n\t\t\n\t\tfor(int i = 0;i < T;i++){\n\t\t\tint now = index[i];\n\t\t\tfor(int j = T-1;j > i;j--){\n\t\t\t\tint target = index[j];\n\t\t\t\tif(td[now].cn < td[target].cn){\n\t\t\t\t\tindex[i] = target;\n\t\t\t\t\tindex[j] = now;\n\t\t\t\t\tnow = target;\n\t\t\t\t}else if(td[now].cn == td[target].cn){\n\t\t\t\t\tif(td[now].pnp > td[target].pnp){\n\t\t\t\t\t\tindex[i] = target;\n\t\t\t\t\t\tindex[j] = now;\n\t\t\t\t\t\tnow = target;\n\t\t\t\t\t}else if(td[now].pnp == td[target].pnp){\n\t\t\t\t\t\tif(now < target){\n\t\t\t\t\t\t\tindex[i] = target;\n\t\t\t\t\t\t\tindex[j] = now;\n\t\t\t\t\t\t\tnow = target;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvector<ansData> tans;\n\t\t\n\t\tfor(int i=0;i<T;i++){\n\t\t\tansData ad;\n\t\t\tad.tn = index[i]+1;\n\t\t\tif(i == 0){\n\t\t\t\tad.same = 0;\n\t\t\t}else{\n\t\t\t\tif((td[index[i]].cn == td[index[i-1]].cn) && (td[index[i]].pnp == td[index[i-1]].pnp)){\n\t\t\t\t\tad.same = 1;\n\t\t\t\t}else ad.same = 0;\n\t\t\t}\n\t\t\ttans.push_back(ad);\n\t\t}\n\t\tans.push_back(tans);\n\t}\n\tfor(int i = 0;i < ans.size();i++){\n\t\tfor(int j = 0;j < ans[i].size();j++){\n\t\t\tif(j == 0){\n\t\t\t\tcout << ans[i][j].tn;\n\t\t\t}else{\n\t\t\t\tif(ans[i][j].same == 0){\n\t\t\t\t\tcout << \",\" << ans[i][j].tn;\n\t\t\t\t}else{\n\t\t\t\t\tcout << \"=\" << ans[i][j].tn;\n\t\t\t\t}\n\t\t\t}\n\t\t}cout << endl;\n\t}\n\t\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include \"bits/stdc++.h\"\n#define REP(i, n ,N) for(ll i = (n); i < (N); i++)\n#define P(s) cout<<(s)<< endl\n#define P2(a, b) cout<<(a) << \" \" << (b) << endl\nusing namespace std;\ntypedef long long ll;\n\nstruct teams{\n\tint ac=0;\n\tint time=0;\n\tint team_name=0;\n};\n\nbool cmp(const teams &A, const teams &B){\n\treturn A.ac > B.ac ||\n\t\t(A.ac == B.ac && A.time < B.time) ||\n\t\t(A.ac == B.ac && A.time == B.time && A.team_name > B.team_name);\n}\n\nint main() {\n\tint M,T,P,R;\n\twhile(cin >> M >> T >> P >> R && M){\n\t\tint m,t,p,j;\n\t\tvector<vector<int>> ac(T,vector<int>(P,0));\n\t\tvector<vector<int>> time(T,vector<int>(P,0));\n\t\tvector<vector<int>> pena(T,vector<int>(P,0));\n\n\t\tREP(i,0,R){\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tt--;p--;\n\t\t\tif(j==0){\n\t\t\t\tac[t][p]++;\n\t\t\t\ttime[t][p]+=m+pena[t][p]*20;\n\t\t\t}else{\n\t\t\t\tpena[t][p]++;\n\t\t\t}\n\t\t}\n\t\tvector<teams> ranp;\n\t\tREP(i,0,T){\n\t\t\tteams team;\n\t\t\tREP(j,0,P){\n\t\t\t\tteam.ac+=ac[i][j];\n\t\t\t\tteam.time+=time[i][j];\n\t\t\t}\n\t\t\tteam.team_name=i+1;\n\t\t\tranp.push_back(team);\n\t\t}\n\n\t\tsort(ranp.begin(),ranp.end(),cmp);\n\t\t/**\n\t\tfor(auto r : ranp){\n\t\t\tP2(r.team_name,r.ac);\n\t\t}\n\t\t **/\n\n\t\tcout << ranp[0].team_name;\n\t\tREP(i,1,ranp.size()){\n\t\t\tif(ranp[i-1].ac==ranp[i].ac && ranp[i-1].time==ranp[i].time){\n\t\t\t\tcout << '=' << ranp[i].team_name;\n\t\t\t}else{\n\t\t\t\tcout << ',' << ranp[i].team_name;\n\t\t\t}\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\n#define LOG(...) fprintf(stderr, __VA_ARGS__)\n//#define LOG(...)\n#define FOR(i, a, b) for (int i = (int)(a); i < (int)(b); ++i)\n#define RFOR(i, a, b) for (int i = (int)(b - 1); i >= (int)(a); --i)\n#define REP(i, n) for (int i = 0; i < (int)(n); ++i)\n#define RREP(i, n) for (int i = (int)(n - 1); i >= 0; --i)\n#define ALL(a) (a).begin(), (a).end()\n#define RALL(a) (a).rbegin(), (a).rend()\n#define EXIST(s, e) ((s).find(e) != (s).end())\n#define SORT(c) sort(ALL(c))\n#define RSORT(c) sort(RALL(c))\n#define SZ(a) ((int)(a).size())\n#define BIT(x, i) (((x) >> (i)) & 1)\n#define SQ(x) ((x) * (x))\n\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef vector<bool> vb;\ntypedef vector<int> vi;\ntypedef vector<ll> vll;\ntypedef vector<vb> vvb;\ntypedef vector<vi> vvi;\ntypedef vector<vll> vvll;\ntypedef vector<char> vc;\ntypedef vector<vc> vvc;\ntypedef vector<string> vs;\ntypedef pair<int, int> pii;\ntypedef pair<ll, ll> pll;\n\nint main() {\n    int M, T, P, R;\n    while (cin >> M >> T >> P >> R, M|T|P|R) {\n        vector<pair<pii, int>> score(T);\n        REP(i, T) {\n            score[i] = {{0, 0}, i+1};\n        }\n\n        vvi penalty(T, vi(P));\n        REP(i, R) {\n            int m, t, p, j;\n            cin >> m >> t >> p >> j;\n            t--;\n            p--;\n            if (j == 0) {\n                score[t].first.first++;\n                score[t].first.second -= m + 20 * penalty[t][p];\n            } else {\n                penalty[t][p]++;\n            }\n        }\n\n        RSORT(score);\n        printf(\"%d\", score[0].second);\n        FOR(i, 1, SZ(score)) {\n            if (score[i-1].first.first == score[i].first.first &&\n                score[i-1].first.second == score[i].first.second) {\n                printf(\"=\");\n            } else {\n                printf(\",\");\n            }\n            printf(\"%d\", score[i].second);\n        }\n        printf(\"\\n\");\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<vector>\n#include<algorithm>\nusing namespace std;\nstruct data{\n    int ac,all_time,n;\n    data(int a,int b,int c):ac(a),all_time(b),n(c){}\n    data(){}\n    bool operator<(const data &d)const{\n        return ac<d.ac||(ac==d.ac&&(all_time>d.all_time||all_time==d.all_time&&n<d.n));\n    }\n};\nint main(){\n    int M,T,P,R;\n    while(scanf(\"%d%d%d%d\",&M,&T,&P,&R),M||T||P||R){\n        int wa[50][10];\n        vector<data>V(T);\n        for(int i=0;i<T;i++)V[i]=data(0,0,i+1);\n        fill_n(*wa,500,0);\n        while(R--){\n            int m,t,p,j;\n            scanf(\"%d%d%d%d\",&m,&t,&p,&j);\n            if(j){\n                t--;p--;\n                wa[t][p]++;\n            }\n            else{\n                t--;p--;\n                V[t].ac++;\n                V[t].all_time+=m+wa[t][p]*20;\n            }\n        }\n        sort(V.begin(),V.end());\n        reverse(V.begin(),V.end());\n        printf(\"%d\",V[0].n);\n        for(int i=1;i<T;i++){\n            if(V[i].ac==V[i-1].ac&&V[i].all_time==V[i-1].all_time){\n                printf(\"=\");\n            }\n            else{\n                printf(\",\");\n            }\n            printf(\"%d\",V[i].n);\n        }\n        puts(\"\");\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n\nusing namespace std;\n\n#define rep(i,n) for(int i=0;i<(n);i++)\n#define all(a)  (a).begin(),(a).end()\n\nclass TEAM{\npublic:\n    int pena[20];\n    int sum;\n    int time;\n    int num;\n    int point;\n    \n    \n    TEAM(){\n        rep(i,20)pena[i]=0;\n        sum=time=num=point=0;\n    }\n};\n\nint main(){\n    int M,T,P,R;\n    while(cin>>M>>T>>P>>R){\n        TEAM team[100];\n        \n        \n        if(M==0 && T==0 && P==0 && R==0)break;\n        \n        rep(i,T)team[i].num=i+1;\n        \n        rep(i,R){\n            int m,t,p,j;\n            cin>>m>>t>>p>>j;\n            t--;\n            if(j==0){\n                team[t].sum++;\n                team[t].time+=m+team[t].pena[p]*20;\n            }else{\n                team[t].pena[p]++;\n            }\n        }\n        \n        rep(i,T){\n            team[i].point=team[i].sum*100000000 + 10000000-team[i].time;\n        }\n\n        for(int i=0;i<T-1;i++){\n            for(int j=T-1;j>i;j--){\n                if(team[j].point<team[j-1].point)swap(team[j],team[j-1]);\n            }\n        }\n        \n        cout<<team[T-1].num;\n//        cout<<\" \"<<team[T-1].point<<endl;\n        for(int i=T-2;i>=0;i--){\n            if(team[i+1].point==team[i].point){\n                cout<<\"=\"<<team[i].num;\n//                cout<<\" \"<<team[i].point<<endl;\n            }\n            else{\n                cout<<\",\"<<team[i].num;\n//                cout<<\" \"<<team[i].point<<endl;\n            }\n        }\n        cout<<endl;\n    }\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n#define FOR(i,a,b) for(int i=(a);i<(b);++i)\n#define REP(i,n) FOR(i,0,n)\n#define ALL(v) (v).begin(),(v).end()\n#define fi first\n#define se second\ntemplate<typename A, typename B> inline bool chmax(A &a, B b) { if (a<b) { a=b; return 1 ; } return 0; }\ntemplate<typename A, typename B> inline bool chmin(A &a, B b) { if (a>b) { a=b; return 1 ; } return 0; }\ntypedef long long ll;\ntypedef pair<int, int> pii;\nconst ll INF = 1e9+100;\nconst bool debug = 0;\n/***************************************/\n\nint M, T, P, R; // M:コンテスト時間, T:チーム数, P:問題数, R:提出数\n\nint main() {\n\twhile (cin >> M >> T >> P >> R, M || T || P || R) {\n\t\t\n\t\tint wacnt[50][2000] = {};\n\t\tint score[50] = {};\n\t\tREP(i, R) {\n\t\t\t// m:経過時間, t:チーム番号, p:問題番号, j:ジャッジ結果(0:AC,otherwise:WA)\n\t\t\tint m, t, p, jud;\n\t\t\tscanf(\"%d %d %d %d\", &m, &t, &p, &jud);\n\t\t\tt--; p--;\n\t\t\t\n\t\t\tif (jud == 0) {\n\t\t\t\tscore[t] -= m + wacnt[t][p] * 20;\n\t\t\t\tscore[t] += 100000000;\n\t\t\t}\n\t\t\telse wacnt[t][p]++;\n\t\t}\n\t\t\n\t\tvector<pii> ans;\n\t\tREP(i, T) ans.push_back(pii(score[i], i));\n\t\tsort(ALL(ans), greater<pii>());\n\t\t\n\t\tif (debug) putchar('@');\n\t\t\n\t\tREP(i, ans.size()) {\n\t\t\tif (i > 0 && ans[i - 1].fi == ans[i].fi) putchar('=');\n\t\t\telse if (i > 0) putchar(',');\n\t\t\tprintf(\"%d\", ans[i].se + 1);\n\t\t}\n\t\t\t\n\t\tputs(\"\");\n\t}\n\t\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n \nusing namespace std;\ntypedef long long ll;\n \n#define rep(i, n) for(int i=0; i<(n); ++i)\n\nclass team {\npublic:\n    int id, solve, time, miss[11];\n    bool operator<(const team & rhs) const{\n        return solve < rhs.solve || (solve==rhs.solve && time > rhs.time); \n    }  \n};\nint main(void){\n    int M, T, P, R;\n    int m, t, p, j;\n    team teams[51];\n    while(cin >> M >> T >> P >> R && M) {\n        rep(i, T) {\n            teams[i].id = i+1;\n            teams[i].solve = 0;\n            teams[i].time = 0;\n            rep(j, P) teams[i].miss[j] = 0;\n        }\n        rep(i, R) {\n            cin >> m >> t >> p >> j;\n            t--;\n            if(j == 0) {\n                teams[t].solve++;\n                teams[t].time += m + teams[t].miss[p] * 20;\n            } else {\n                teams[t].miss[p]++;\n            }\n        }\n        sort(teams, teams+T);\n        for(int i=T-1; i>0; --i) {\n            cout << teams[i].id;\n            if(teams[i].solve==teams[i-1].solve && teams[i].time==teams[i-1].time) {\n                cout << \"=\";\n            } else {\n                cout << \",\";\n            }\n        }\n        cout << teams[0].id << endl;\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n#include <string>\n#include <vector>\n#include <cstdio>\n#include <cstdlib>\n#include <cmath>\n#include <set>\n#include <map>\n#include <queue>\n#include <stack>\n\nusing namespace std;\n\n#define INF 1010001000\n#define EPS 1e-10\n#define rep(i, N) for (int i = 0; i < N; i++)\n#define pb push_back\n\ntypedef pair<int, int> i_i;\ntypedef long long int llong;\ntypedef pair<llong, llong> ll_ll;\ntypedef struct edge {int f, t;}Edge;\ntypedef pair<int, pair<int, int> > Team;\ntypedef pair<int, pair<int, pair<int, int> > > input;\n\nint m, t, p, r;\n\nint main()\n{\n    while (cin >> m >> t >> p >> r, m) {\n        vector<Team > team(t);\n        vector<vector<int> > check(t, vector<int>(t, 0));\n        vector<input > data(r);\n        rep(i, t) {\n            team[i].second.second = i+1;\n            team[i].first = 0;\n            team[i].second.first = 0;\n        }\n        rep(i, r) {\n            cin >> data[i].first >> data[i].second.first\n                >> data[i].second.second.first \n                >> data[i].second.second.second;\n            data[i].first;\n            data[i].second.first--;\n            data[i].second.second.first--;\n            data[i].second.second.second;\n        }\n        sort(data.begin(), data.end());\n        rep(i, r) {\n            int a = data[i].first, b = data[i].second.first, \n                c = data[i].second.second.first, \n                d = data[i].second.second.second;\n            if (d) {\n                if (check[b][c] != -1) {\n                    check[b][c]++;\n                }\n            } else {\n                if (check[b][c] != -1) {\n                    team[b].first++;\n                    team[b].second.first \n                        -= data[i].first + check[b][c] * 20;\n                    check[b][c] = -1;\n                }\n            }\n        }\n        sort(team.begin(), team.end(), greater<Team>());\n        cout << team[0].second.second;\n        for (int i = 1; i < t; i++) {\n            if (team[i].first == team[i-1].first && \n                    team[i].second.first == team[i-1].second.first) {\n                cout << \"=\" << team[i].second.second;\n            } else {\n                cout << \",\" << team[i].second.second;\n            }\n        }\n        cout << endl;\n    }\n\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n#include <string>\n#include <vector>\n#include <tuple>\n#include <queue>\n#include <stack>\n#include <set>\n#include <map>\n\nusing namespace std;\n\nclass Solver {\n};\n\nint main() {\n\twhile (true) {\n\t\tint m, t, p, r;\n\t\tcin >> m >> t >> p >> r;\n\t\tif (m == 0)break;\n\n\t\tvector<vector<int>> status(t, vector<int>(p));\n\t\tvector<tuple<int, int, int>> results;\n\t\tfor (int i = 0; i < t; i++)results.emplace_back(make_tuple(0, i, 0));\n\n\t\tfor (int i = 0; i < r; i++) {\n\t\t\tint mi, ti, pi, ji;\n\t\t\tcin >> mi >> ti >> pi >> ji;\n\t\t\tif (ji == 0) {\n\t\t\t\tget<0>(results[ti - 1]) += mi + status[ti - 1][pi - 1] * 20;\n\t\t\t\tget<2>(results[ti - 1])++;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tstatus[ti - 1][pi - 1]++;\n\t\t\t}\n\t\t}\n\n\t\tstable_sort(results.begin(), results.end(),\n\t\t\t[](auto a,auto b) {\n\t\t\t\tint delta0 = get<0>(a) - get<0>(b);\n\t\t\t\tint delta1 = get<1>(a) - get<1>(b);\n\t\t\t\tint delta2 = get<2>(a) - get<2>(b);\n\t\t\t\tif (delta2 == 0) {\n\t\t\t\t\tif (delta0 == 0)return delta1 > 0;\n\t\t\t\t\telse return delta0 < 0;\n\t\t\t\t}\n\t\t\t\telse return delta2 > 0;\n\t\t\t}); \n\t\tfor (int i = 0; i < t; i++) {\n\t\t\tif (i > 0) {\n\t\t\t\tif (get<0>(results[i]) == get<0>(results[i - 1]))cout << '=';\n\t\t\t\telse cout << ',';\n\t\t\t}\n\t\t\tcout << get<1>(results[i]) + 1;\n\t\t}\n\t\tcout << endl;\n\t}\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<tuple>\n#include<vector>\n#include<algorithm>\nusing namespace std;\nint T,N,M,Q,A,B,C,D;\nint b[999],c[999][999],d[999][999];\nint main(){\n\twhile(true){\n\t\tfor(int i=0;i<999;i++){\n\t\t\tfor(int j=0;j<999;j++){\n\t\t\t\tb[i]=0;\n\t\t\t\tc[i][j]=-1;\n\t\t\t\td[i][j]=0;\n\t\t\t}\n\t\t}\n\t\tcin>>T>>N>>M>>Q;\n\t\tif(T==0){break;}\n\t\tfor(int i=0;i<Q;i++){\n\t\t\tcin>>A>>B>>C>>D;\n\t\t\tif(c[B][C]==-1){\n\t\t\t\tif(D==0){\n\t\t\t\t\tc[B][C]=A;\n\t\t\t\t\tb[B]++;\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\td[B][C]+=20;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tvector<tuple<int,int,int>>vec;\n\t\tfor(int i=1;i<=N;i++){\n\t\t\tint sum=0;\n\t\t\tfor(int j=1;j<=M;j++){\n\t\t\t\tif(c[i][j]>=0){\n\t\t\t\t\tsum+=c[i][j]+d[i][j];\n\t\t\t\t}\n\t\t\t}\n\t\t\tvec.push_back(make_tuple(b[i],-sum,i));\n\t\t}\n\t\tsort(vec.begin(),vec.end());\n\t\tcout<<get<2>(vec[vec.size()-1]);\n\t\tfor(int i=(int)(vec.size())-2;i>=0;i--){\n\t\t\tif(get<0>(vec[i])==get<0>(vec[i+1]) && get<1>(vec[i])==get<1>(vec[i+1])){\n\t\t\t\tcout<<\"=\";\n\t\t\t}\n\t\t\telse{cout<<',';}\n\t\t\tcout<<get<2>(vec[i]);\n\t\t}\n\t\tcout<<endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#include <cstdlib>\n#include <cmath>\n#include <algorithm>\nusing namespace std;\nusing ll = long long;\nusing P = pair<ll,ll>;\nusing Graph= vector<vector<ll>>;\nstruct edge{ll to ; ll cost ;} ;\nusing graph =vector<vector<edge>> ;\n#define rep(i,n) for (ll i=0; i < (n); ++i)\n#define rep2(i,n,m) for(ll i=n;i<=m;i++)\n#define rep3(i,n,m) for(ll i=n;i>=m;i--)\n#define pb push_back\n#define eb emplace_back\n#define ppb pop_back\n#define mpa make_pair\n#define fi first\n#define se second \n#define set20 cout<<fixed<<setprecision(20) ;\nconst ll INF=1e18 ;\ninline void chmax(ll& a,ll b){a=max(a,b);}\ninline void chmin(ll& a,ll b){a=min(a,b);}\ndouble pi=acos(-1) ;\nll gcd(ll a, ll b) { return b?gcd(b,a%b):a;}\nll lcm(ll a, ll b) { return a/gcd(a,b)*b;}\n\n\nint main(){\n\n  while(1){\n  int m,t,p,r ;cin>>m>>t>>p>>r ;\n  if(m==0) break ;\n  int d[r][4] ;\n  rep(i,r){\n      rep(j,4){\n          cin>> d[i][j] ;\n      }\n  }\n  vector<pair<pair<int,int>,int>> A(t) ;\n  rep(i,t){\n   A[i].se = i+1 ;\n  }\n  int pe[t][p] ;\n  rep(i,t){\n      rep(j,p) pe[i][j]= 0 ;\n  }\n  rep(i,r){\n  \n  if(d[i][3]==0){\n      A[d[i][1]-1].fi.fi ++ ;\n      A[d[i][1]-1].fi.se = (A[d[i][1]-1].fi.se+d[i][0])\n      +pe[d[i][1]-1][d[i][2]-1]*20 ;\n\n  }\n  else pe[d[i][1]-1][d[i][2]-1]++ ;\n  }\n  rep(i,t) A[i].fi.se *= -1 ;\n  sort(A.rbegin(),A.rend()) ;\n  rep(i,t){\n      auto x= A[i] ;\n      int w= A[i].se ;\n      if(t==1){\n          cout<<1<<endl ;\n          break ;\n      }\n  if(i==0) cout<<w ;\n  else if(i==t-1){\n     auto y= A[i-1] ;\n\n      if(x.fi.fi==y.fi.fi && x.fi.se==y.fi.se){\n          cout<<\"=\"<< w <<endl;\n      }\n      else{\n          cout<<\",\"<< w <<endl;\n      } \n  }\n  else{\n      auto y= A[i-1] ;\n\n      if(x.fi.fi==y.fi.fi && x.fi.se==y.fi.se){\n          cout<<\"=\"<< w ;\n      }\n      else{\n          cout<<\",\"<< w ;\n      }\n  }\n  }\n\n  }\n  return 0 ; \n}\n\n\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\nusing namespace std;\n\nstruct data{\n  int ac,pe,id;\n  bool operator == (const data& p) const{\n    return ac==p.ac && pe==p.pe;\n  }\n  bool operator < (const data& p) const{\n    if(ac!=p.ac)return ac>p.ac;\n    if(pe!=p.pe)return pe<p.pe;\n    return id>p.id;\n  }\n};\n\nint wa_cnt[51][11];\n\ndata team[51];\n\nvoid init();\n\nint main(){\n  int M,T,P,R;\n  while(1){\n    cin>>M>>T>>P>>R;\n    if(M==0&&T==0&&P==0&&R==0)break;\n    init();\n    for(int i=0;i<R;i++){\n      int m,t,p,j;\n      cin>>m>>t>>p>>j;t--;\n      if(m>M)continue;\n      if(j==0){\n\tteam[t].ac++;\n\tteam[t].pe+=(wa_cnt[t][p]*20);\t\n\tteam[t].pe+=m;\n      }else wa_cnt[t][p]++;\n    }\n\n    sort(team,team+T);\n    for(int i=0;i<T;i++){\n      if(i>0)cout<<(team[i-1]==team[i]?'=':',');\n      cout<<team[i].id;\n    }\n    cout<<endl;\n  }\n  return 0;\n}\n\nvoid init(){\n  for(int i=0;i<51;i++)for(int j=0;j<11;j++)wa_cnt[i][j]=0;\n  for(int i=0;i<51;i++){\n    team[i].id=i+1;\n    team[i].pe=team[i].ac=0;\n  }\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<vector>\n#include<map>\n#include<cstdlib>\n#include<cmath>\n#include<cstring>\n#include<string>\n#include<algorithm>\n#define INF 1e9\n#define M_Team 50\n#define M_Pro 10\n\ntypedef long long int ll;\nusing namespace std;\n\nint wacount[M_Team+1][M_Pro+1]={};\nint timesum[M_Team+1]={},anssum[M_Team+1];\nvector<char> ans;\n\n\nvoid set(int n){\n\tif(n <10){\n\t\tans.push_back(n+'0');\n\t}\n\telse{\n\t\tans.push_back(n/10+'0');\n\t\tans.push_back(n%10+'0');\n\t}\n}\n\nvoid out(int timesum[M_Team+1],int grad[M_Team+1],int T){\n\tset(grad[1]);\n\tfor(int i=2;i<=T;i++){\n\t\tif(anssum[ grad[i] ]==anssum[ grad[i-1] ]  &&  timesum[ grad[i] ] == timesum[ grad[i-1] ] ){\n\t\t\tans.push_back('=');\n\n\t\t\tset(grad[i]);\n\t\t}\n\t\telse{\n\t\t\tans.push_back(',');\n\n\t\t\tset(grad[i]);\n\t\t}\n\t}\n\tfor(int i=0;i<ans.size();i++){\n\t\tcout<<ans[i];\n\t}\n\tcout<<endl;\n}\n\nbool checkOver(int a,int b){\n\tif(anssum[a] <  anssum[b])return true;\n\tif( (anssum[a] == anssum[b]) && (timesum[a]>timesum[b]) )return true;\n\treturn false;\n}\n\n\nvoid babu_sort(int anssum[M_Team+1],int timesum[M_Team+1],int grad[M_Team+1],int T){\n\tfor(int i=0;i<T;i++){\n\t\tfor(int j=1;j<T-i;j++){\n\t\t\tif( checkOver(grad[j],grad[j+1]) ){\n\t\t\t\tswap(grad[j],grad[j+1]);\n\t\t\t}\n\t\t}\n\t}\n}\n\nvoid solve(int anssum[M_Team+1],int timesum[M_Team+1],int M,int T,int P,int R){\n\tint grad[M_Team+1];\n\tfor(int i=T;i>=1;i--){\n\t\tgrad[T-i+1]=i;\n\t}\n\tbabu_sort(anssum,timesum,grad,T);\n\tout(timesum,grad,T);\n}\n\n/*\nint wacount[51][11]={};\nint timesum[11]={},anssum[11];\n\n*/\n\nint main(){\n\twhile(1){\n//初期化\n\t\tans.clear();\n\t\tfor(int i=0;i<M_Pro+1;i++){\n\t\t\tfor(int j=0;j<M_Team+1;j++){\n\t\t\t\twacount[i][j]=0;\n\t\t\t}\n\t\t\ttimesum[i]=0;\n\t\t\tanssum[i]=0;\n\t\t}\n///////\n\t\tint M,T,P,R;\n\t\tint m,t,p,J;\n\t\tcin>>M>>T>>P>>R;\n\t\tif(M==0 && T==0 && P==0 && R==0)break;\n\t\tfor(int i=0;i<R;i++){\n\t\t\tcin>>m>>t>>p>>J;\n\t\t\tif(J!=0){\n\t\t\t\twacount[t][p]++;\n\t\t\t}\n\t\t\telse{\n\t\t\t\ttimesum[t]+=m+wacount[t][p]*20;\n\t\t\t\tanssum[t]++;\n\t\t\t}\n\t\t}\n\t\tsolve(anssum,timesum,M,T,P,R);\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\n#define FOR(i,s,e) for((i)=(s);(i)<(int)(e);(i)++)\n#define REP(i,e) FOR(i,0,e)\n\n#define all(o) (o).begin(), (o).end()\n#define psb(x) push_back(x)\n#define mp(x,y) make_pair((x),(y))\n\ntypedef long long ll;\ntypedef pair<int, int> PII;\n\nconst double EPS = 1e-10;\n\nconst int M = 300;\nconst int T = 50;\nconst int P = 10;\nconst int R = 2000;\nint m, t, p, r;\n\ntypedef struct team_def {\n  int idx;  //index of the team\n  int tac;  //total number of AC\n  int tt;   //total time with penalty\n  team_def() {idx = tac = tt = 0;}\n  team_def(int _idx, int _tac, int _tt) {\n    idx = _idx;\n    tac = _tac;\n    tt  = _tt;\n  }\n} team;\n\nint my_compare(const void *pl, const void *pr) {\n  team *tl = (team *)pl;\n  team *tr = (team *)pr;\n  \n  if (tl->tac < tr->tac)\n    return 1;\n  else if (tl->tac > tr->tac)\n    return -1;\n\n  if (tl->tt < tr->tt)\n    return -1;\n  else if (tl->tt > tr->tt)\n    return 1;\n\n  if (tl->idx < tr->idx)\n    return 1;\n  else if (tl->idx > tr->idx)\n    return -1;\n\n  return 0;\n}\n\nint ac[T][P]; //1:AC, 0:not AC\nint wa[T][P]; //time with penalty\nteam tms[T];\n\nint main() {\n  int i, j;\n\n  while (1) {\n    memset(ac, 0, sizeof(ac));\n    memset(wa, 0, sizeof(wa));\n    scanf(\"%d%d%d%d \", &m, &t, &p, &r);\n    if (!m && !p && !t && !r) break;\n    for (i=0; i<r; i++) {\n      int mm, tt, pp, rr;\n      scanf(\"%d%d%d%d \", &mm, &tt, &pp, &rr);\n      tt--; pp--;\n      if (!rr) {\n        ac[tt][pp] = 1; \n        wa[tt][pp] += mm;\n      } else\n        wa[tt][pp] += 20;\n    }\n\n    for (i=0; i<t; i++) {\n      tms[i].idx = i; \n      tms[i].tac = tms[i].tt = 0;\n    }\n    for (i=0; i<t; i++)\n      for (j=0; j<p; j++) {\n        if (ac[i][j]) {\n          tms[i].tac++;\n          tms[i].tt += wa[i][j];\n        }\n      }\n\n    qsort(tms, t, sizeof(team), my_compare);\n\n    printf(\"%d\", tms[0].idx + 1);\n    for (i=1; i<t; i++) {\n      if (tms[i].tac == tms[i-1].tac && tms[i].tt == tms[i-1].tt)\n        printf(\"=\");\n      else\n        printf(\",\");\n      printf(\"%d\", tms[i].idx + 1);\n    }\n    printf(\"\\n\");\n  }\n\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <bitset>\n#include <cassert>\n#include <cctype>\n#include <climits>\n#include <cmath>\n#include <complex>\n#include <cstdio>\n#include <cstdlib>\n#include <cstring>\n#include <ctime>\n#include <deque>\n#include <fstream>\n#include <iomanip>\n#include <iostream>\n#include <map>\n#include <numeric>\n#include <queue>\n#include <set>\n#include <sstream>\n#include <stack>\n#include <string>\n#include <valarray>\n#include <vector>\n\n#define EPS 1e-9\n#define INF 1070000000LL\n#define MOD 1000000007LL\n#define fir first\n#define foreach(it,X) for(auto it=(X).begin();it!=(X).end();it++)\n#define ite iterator\n#define mp make_pair\n#define mt make_tuple\n#define rep(i,n) rep2(i,0,n)\n#define rep2(i,m,n) for(int i=m;i<(n);i++)\n#define pb push_back\n#define sec second\n#define sz(x) ((int)(x).size())\n\nusing namespace std;\n\nstruct timer{\n\ttime_t start;\n\ttimer(){start=clock();}\n\t~timer(){cerr<<1.*(clock()-start)/CLOCKS_PER_SEC<<\" secs\"<<endl;}\n};\n\ntypedef istringstream iss;\ntypedef long long ll;\ntypedef pair<ll,ll> pi;\ntypedef stringstream sst;\ntypedef vector<ll> vi;\n\nint M,T,P,R,m[2010],t[2010],p[2010],J[2010];\n\nvoid main2(){\n\tint solved[55]={},penal[55]={},failed[55][11]={};\n\trep(i,R){\n\t\tif(J[i]==0){\n\t\t\tsolved[t[i]]++;\n\t\t\tpenal[t[i]]+=m[i]+failed[t[i]][p[i]]*20;\n\t\t}else{\n\t\t\tfailed[t[i]][p[i]]++;\n\t\t}\n\t}\n\tpair<pi,int> team[55];\n\trep2(i,1,T+1){\n\t\tteam[i] = mp(mp(-solved[i],penal[i]),-i);\n\t}\n\tsort(team+1,team+T+1);\n\trep2(i,1,T+1){\n\t\tcout<<-team[i].sec;\n\t\tif(i==T)cout<<endl;\n\t\telse cout<<(team[i].fir == team[i+1].fir ? \"=\":\",\");\n\t}\n}\n\nint main(){\n\tcin.tie(0);\n\tios_base::sync_with_stdio(0);\n\t\n\twhile(cin>>M>>T>>P>>R && M){\n\t\trep(i,R)cin>>m[i]>>t[i]>>p[i]>>J[i];\n\t\tmain2();\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\nstruct Team{\n    int solved, penalty, num;\n    bool operator<(const Team &obj)const{\n        if(solved == obj.solved && penalty != obj.penalty)return penalty > obj.penalty;\n        if(solved != obj.solved)return solved < obj.solved;\n        return num < obj.num;\n    }\n    bool operator==(const Team &obj)const{\n        return solved == obj.solved && penalty == obj.penalty;\n    }\n};\n\nint penalty[52][12]={0};\n\nvoid init(){\n    for(int i=0;i<=50;++i){\n        for(int j=0;j<=10;++j){\n            penalty[i][j] = 0;\n        }\n    }\n}\n\nint main(){\n    int m, t, p, r;\n    while(cin >> m >> t >> p >> r, m != 0){\n        init();\n        vector<Team> v(t);\n        for(int i=0;i<t;++i)v[i].num = i+1;\n        for(int i=0;i<r;++i){\n            int mi, ti, pi, ji;\n            cin >> mi >> ti >> pi >> ji;\n            if(ji == 0){\n                v[ti-1].solved++;\n                v[ti-1].penalty += mi + (penalty[ti-1][pi-1]*20);\n            }else{\n                penalty[ti-1][pi-1]++;\n            }\n        }\n        sort(v.rbegin(), v.rend());\n        for(int i=0;i<t;++i){\n            if(i){\n                if(v[i] == v[i-1])cout << \"=\";\n                else cout << \",\";\n            }\n            cout << v[i].num;\n        }\n        cout << endl;\n    }\n\n    return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\nusing namespace std;\n\nint main(){\n\twhile(1){\n\t\tint M,T,P,R;\n\t\tcin>>M>>T>>P>>R;\n\n\t\tif(M==0&&T==0&&P==0&&R==0)\n\t\t\tbreak;\n\n\t\tint CP[50],TT[50],PT[50][10];\n\t\tfor(int i=0;i<R;i++){\n\t\t\tCP[i]==TT[i]=0;\n\t\t\tfor(int j=0;j<P;j++){\n\t\t\t\tPT[i][j]=0;\n\t\t\t}\n\t\t}\n\n\t\tfor(int i=0;i<R;i++){\n\t\t\tint m,t,p,j;\n\t\t\tcin>>m>>t>>p>>j;\n\t\t\n\t\t\tif(j==0){\n\t\t\t\tCP[t-1]++;\n\t\t\t\tTT[t-1]+=(m+PT[t-1][p-1]);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tPT[t-1][p-1]+=20;\n\t\t\t}\n\t\t}\n\n\t\tint  tnow,tpre=-1;\n\t\tbool flg[50];\n\t\tfor(int i=0;i<T;i++){\n\t\t\tflg[i]=false;\n\t\t}\n\n\t\tfor(int i=0;i<T;i++){\n\t\t\ttnow=-1;\n\t\t\tfor(int j=0;j<T;j++){\n\t\t\t\tif(flg[j])\n\t\t\t\t\t continue;\n\n\t\t\t\tif(tnow=-1){\n\t\t\t\t\ttnow=j;\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tif(CO[j]>CP[tnow]||(CP[j==CP[tnow]&&TT[j]<=TT[tnow])){\n\t\t\t\t\t\ttnow=j;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(tpre!=-1){\n\t\t\t\tif(CP[tnow]==CP[tpre]&&TT[tpre]<=TT[tnow]){\n\t\t\t\t\tcout<<'=';\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tcout<<'.';\n\t\t\t\t}\n\t\t\t}\n\t\t\tcout<<tnow+1;\n\t\t\n\t\t\tflg[tnow]=true;\n\t\t\ttpre=tnow;\n\t\t}\n\t\tcout<<endl;\n\t}\n\t\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <stdio.h>\n#include<algorithm>\n#include<iostream>\n#include<string.h>\nusing namespace std;\ntypedef pair<int,int> P;\ntypedef pair<int,pair<int,int> > L;\nint main(void) {\n  P team[55][12];\n  L mama[55];\n  int M, T, Q, R;\n  int m, t, p, j;\n  while(1){\n    memset(team,0,sizeof(team));\n    memset(mama,0,sizeof(mama));\n    scanf(\"%d %d %d %d\", &M, &T, &Q, &R);\n    if(M==0 & T==0) break;\n    for ( int i = 0; i < R; i++ ) {\n      scanf(\"%d%d%d%d\",&m,&t,&p,&j);\n      t--;\n      if(j==0) team[t][p]=P(m+team[t][p].first,1);\n      else team[t][p]=P(20+team[t][p].first,0);\n    }\n\n    for(int i=0;i<T;i++){\n      for(int l=1;l<=Q;l++){\n        if(team[i][l].second==1){\n          mama[i].first--;\n          mama[i].second.first+=team[i][l].first;\n        }\n      }\n\n      mama[i].second.second= -i;\n    }\n\n    sort(mama,mama+T);\n\n//    for(int i=0;i<T;i++) cout << \"first :\" << mama[i].first << \"second.first :\" << mama[i].second.first << \"second.second :\" << mama[i].second.second << endl;\n\n    for(int i=0;i<T;i++){\n    if(i==T-1) {\n      printf(\"%d\\n\",-mama[i].second.second+1);\n      break;\n    }\n    if(mama[i].first==mama[i+1].first && mama[i].second.first == mama[i+1].second.first){\n      printf(\"%d=\",-mama[i].second.second+1);\n    }\n    else  printf(\"%d,\",-mama[i].second.second+1);\n    }\n  }\n\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std ;\n\n#define pb(n) push_back(n)\n#define fi first\n#define se second\n#define all(r) begin(r),end(r)\n#define vmax(ary) *max_element(all(ary))\n#define vmin(ary) *min_element(all(ary))\n#define debug(x) cout<<#x<<\": \"<<x<<endl\n#define fcout(n) cout<<fixed<<setprecision((n))\n#define scout(n) cout<<setw(n)\n#define vary(type,name,size,init) vector< type> name(size,init)\n#define vvl(v,w,h,init) vector<vector<ll>> v(w,vector<ll>(h,init))\n#define mp(a,b) make_pair(a,b)\n\n#define rep(i,n) for(int i = 0; i < (int)(n);++i)\n#define REP(i,a,b) for(int i = (a);i < (int)(b);++i)\n#define repi(it,array) for(auto it = array.begin(),end = array.end(); it != end;++it)\n#define repa(n,array) for(auto &n :(array))\n\nusing ll = long long;\nusing pii = pair<int,int> ;\nusing pll = pair<ll,ll> ;\n\nstruct team{\n  int id,ac,sec;\n  vector<ll> v;\n  bool operator<(const team& a){\n    if(ac == a.ac){\n      if(sec == a.sec) return id < a.id;\n      return sec > a.sec;\n    }\n    return ac < a.ac;\n  }\n  bool operator>(const team& a){\n    if(ac == a.ac){\n      return sec > a.sec;\n    }\n    return ac < a.ac;\n  }\n};\n\nint main(){\n  cin.tie(0);\n  ios::sync_with_stdio(false);\n  ll M,T,P,R;\n  while(cin >> M >> T >> P >> R && M+T+P+R){\n    vector<team> v(T);\n    rep(i,T){\n      v[i].id = i+1;\n      v[i].v.resize(P);\n    }\n    ll m,t,p,j;\n    rep(i,R){\n      cin >> m >> t >> p >> j;\n      if(j == 0){\n        v[t-1].ac++;\n        v[t-1].sec += m + 20 * v[t-1].v[p-1];\n      }\n      else{\n        v[t-1].v[p-1]++;\n      }\n    }\n    sort(all(v));\n    reverse(all(v));\n    cout << v[0].id;\n    REP(i,1,T){\n      if(v[i] > v[i-1]){\n        cout << ',' << v[i].id ;\n      }\n      else{\n        cout << '=' << v[i].id ;\n      }\n    }\n    cout << endl;\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\n#include<map>\n\nusing namespace std;\n\nint M,T,P,R;\n\nclass Trem {\npublic:\n\n    int id;\n    int AC_cnt;\n    int WA_cnt[13];\n    int time;\n    bool is_AC[13];\n    Trem() {\n    }\n    Trem(int i) {\n        this->id = i;\n        AC_cnt=0;\n        time=0;\n        for(int i=0;i<13;i++) {\n            WA_cnt[i]=0;\n            is_AC[i]=false;\n        }\n    }\n    void submit(int m,int t,int p,int j) {\n        if(j==0) {\n            AC_cnt++;\n            is_AC[t]=true;\n            time += m;\n            time += WA_cnt[t]*20;\n        }\n        else {\n            WA_cnt[t]++;\n            \n        }\n    }\n    bool operator<(const Trem& t1) const {\n        if(this->AC_cnt == t1.AC_cnt) {\n            if(this->time == t1.time) return this->id > t1.id;\n            else return this->time < t1.time;\n        }\n        else {\n            return this->AC_cnt > t1.AC_cnt;\n        }\n    }\n\n};\n\nvoid solve() {\n    Trem trem[53];\n    for(int i=0;i<53;i++) trem[i]=Trem(i);\n    for(int i=0;i<R;i++) {\n        int m,t,p,j;\n        cin>>m>>t>>p>>j;\n        trem[t].submit(m,t,p,j);\n    }\n    sort(trem+1,trem+T+1);\n    for(int i=1;i<=T;i++) {\n        Trem t = trem[i];\n        Trem next = trem[i+1];\n        char c = ((t.AC_cnt==next.AC_cnt && \n                t.time == next.time)?'=':',');\n        if(i==T) c='\\n';\n        cout<<t.id;\n        cout<<(c);\n    }\n        cout<<endl;\n\n    \n\n}\n\nint main() {\n    while(cin>>M>>T>>P>>R) {\n        if(M+T+P+R==0) return 0;\n        solve();\n    }\n\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#define N 2002\nusing namespace std;\nstruct team{\n  int tnum;\n  int correct;\n  int time;\n};\nint main(){\n  int m,t,p,r,im[N],it[N],ip[N],ij[N],incorrect,i,j;\n  struct team data[51];\n  while(1){\n    cin >> m >> t >> p >> r;\n    if(m==0&&t==0&&p==0&&r==0) break;\n    for(i=0;i<r;i++) cin >> im[i] >> it[i] >> ip[i] >> ij[i];\n    for(i=1;i<=t;i++){\n      data[i].tnum=i;\n      data[i].correct=0;\n      data[i].time=0;\n    }\n    for(i=0;i<r;i++){\n      if(ij[i]==0){\n\tdata[it[i]].correct++;\n      \tincorrect=0;\n\tfor(j=0;j<i;j++){\n\t  if(it[i]==it[j]&&ip[i]==ip[j]) incorrect++;\n\t}\n\tdata[it[i]].time=data[it[i]].time+incorrect*20+im[i];\n      }\n    }\n    for(i=0;i<=t;i++){\n      for(j=2;j<=t;j++){\n\tif(data[j].tnum>data[j-1].tnum) swap(data[j],data[j-1]);\n      }\n    }\n    for(i=0;i<=t;i++){\n      for(j=2;j<=t;j++){\n\tif(data[j].time<data[j-1].time) swap(data[j],data[j-1]);\n      }\n    }\n    for(i=0;i<=t;i++){\n      for(j=2;j<=t;j++){\n\tif(data[j].correct>data[j-1].correct) swap(data[j],data[j-1]);\n      }\n    }\n    for(i=1;i<t;i++){\n      cout << data[i].tnum;\n      if(data[i].correct==data[i+1].correct&&data[i].time==data[i+1].time)\n\tcout << '=';\n      else cout << ',';\n      // if(i==t-1) cout << data[i+1].tnum;\n    }\n    cout << data[t].tnum << endl;\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n#include <functional>\nusing namespace std;\n\nint main(){\n    while(true){\n        vector<pair<int, int> >term; //solved, time\n        int time[100][100];\n        int M, T, P, R;\n        cin >> M >> T >> P >> R;\n\n        if(M+R+P+R == 0) break;\n\n        for(int i=0; i < 100; i++)for(int j=0; j < 100; j++) time[i][j] = 0;\n\n        for(int i=0; i < T; i++){\n            term.push_back(pair<int, int>(0, 0));\n        }\n\n        for(int i=0; i < R; i++){\n            int m, t, p, j;\n            cin >> m >> t >> p >> j;\n            t--;\n            if(j == 0){\n                term[t].first = term[t].first - 1;\n                term[t].second = term[t].second + m + time[t][p];\n            }\n            else {\n                time[t][p] += 20;\n            }\n        }\n        vector<pair<int, int> > copyTerm = term;\n\n        sort(term.begin(), term.end());//, pairCompare);\n\n        for(int i=0; i < term.size(); i++){\n            for(int j=term.size()-1; j != -1; j--){\n                if(i != 0){\n                    if(term[i].first == copyTerm[j].first && term[i].second == copyTerm[j].second){\n                        if(term[i-1].first != term[i].first || term[i-1].second != term[i].second){\n                            cout << \",\" << j+1;\n                            copyTerm[j].first = 100000;\n                            break;\n                        }\n                        else {\n                            cout << \"=\" << j+1;\n                            copyTerm[j].first = 100000;\n                            break;\n                        }\n                    }\n                }\n                else if(term[i].first == copyTerm[j].first && term[i].second == copyTerm[j].second){\n                    cout << j+1;\n                    copyTerm[j].first = 1000000;\n                    break;\n                }\n            }\n        }\n        cout << endl;\n\n        term.clear();\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#define _USE_MATH_DEFINES \n#include <iomanip> \n#include <cmath>  \n#include<iostream>\n#include <fstream>\n#include<vector>\n#include<algorithm>\n#include<bitset>\n#include<map>\n#include<queue>\n#include<stack>\nusing namespace std;\ntypedef long long ll;\n#define repi(i,a,b) for(ll i = (ll)(a) ; i < (ll)(b) ; i++)\n#define repd(i,a,b) for(ll i = (ll)(a) ; i > (ll)(b) ; i--)\n#define rd(x) cin >> x\n#define wr(x)  cout << x\n#define wrln(x) cout << x << endl\n\nint M, T, P, R;\n\nint main() {\n\tstruct team {\n\t\tint number, point, time;\n\t\tbool operator<(const team& right) const {\n\t\t\t// ポイントは大きい方が↑、同じなら時間小さい方が↑\n\t\t\treturn point == right.point ? time > right.time : point < right.point;\n\t\t}\n\t};\n\twhile (1) {\n\t\tcin >> M >> T >> P >> R;\n\t\tif (M == 0 && T == 0 && P == 0 && R == 0) break;\n\t\tvector<team> teams;\n\t\tteam ttemp;\n\t\trepi(i, 0, T) {\n\t\t\tteam t;\n\t\t\tt.number = i, t.point = 0, t.time = 0;\n\t\t\tteams.push_back(t);\n\t\t}\n\t\tint mi, ti, pi, ji;//経過時間、チーム番号、問題番号、ジャッジの種類\n\t\tint timetemps[51][11] = {};//[チーム番号][問題番号]\n\t\trepi(i, 0, R) {\n\t\t\tcin >> mi >> ti >> pi >> ji;\n\t\t\tif (ji == 0) {\n\t\t\t\t//正解\n\t\t\t\tteams[ti - 1].point++;\n\t\t\t\tteams[ti - 1].time += (timetemps[ti - 1][pi] + mi);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t//不正解\n\t\t\t\ttimetemps[ti-1][pi] += 20;\n\t\t\t}\n\t\t}\n\t\tsort(teams.begin(), teams.end());\n\t\treverse(teams.begin(), teams.end());\n\t\trepi(i, 0, teams.size()) {\n\t\t\tif (i > 0) {\n\t\t\t\tif (teams[i].point == teams[i - 1].point && teams[i].time == teams[i - 1].time) {\n\t\t\t\t\twr(\"=\");\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\twr(\",\");\n\t\t\t\t}\n\t\t\t}\n\t\t\twr(teams[i].number + 1);\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\n#include<functional>\n#include<vector>\n#include<string>\n#include<map>\n#include<queue>\nusing namespace std;\n#define REP(i, a, n) for(int i=a; i<n; i++)\n#define RREP(i, a, n) for(int i=n-1; i>=a; i--)\n#define INF 1000000000\n#define MP(a, b) make_pair(a, b)\n#define F first\n#define S second\n\nint main() {\n\tint M, T, P, R;\n\twhile (cin >> M >> T >> P >> R) {\n\t\tvector<pair<int, pair<int, int>>> vp;  // correct, time, team\n\t\tint pena[51][11];\n\n\t\tREP(i, 0, T) vp.push_back(MP(0, MP(0, -i - 1)));\n\t\tREP(i, 0, 51) REP(j, 0, 11) pena[i][j] = 0;\n\n\t\tREP(i, 0, R) {\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tt--;\n\t\t\tp--;\n\n\t\t\tif (j == 0) {\n\t\t\t\tvp[t].F--;\n\t\t\t\tvp[t].S.F += (pena[t][p] + m);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tpena[t][p] += 20;\n\t\t\t}\n\t\t}\n\n\t\tsort(vp.begin(), vp.end());\n\t\t//reverse(vp.begin(), vp.end());\n\n\t\tcout << -vp[0].S.S;\n\t\tREP(i, 1, vp.size()) {\n\t\t\tif (vp[i - 1].F < vp[i].F) {\n\t\t\t\tcout << \",\" << -vp[i].S.S;\n\t\t\t}\n\t\t\telse if (vp[i - 1].S.F < vp[i].S.F) {\n\t\t\t\tcout << \",\" << -vp[i].S.S;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcout << \"=\" << -vp[i].S.S;\n\t\t\t}\n\t\t}\n\n\t\tcout << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#define N 2001\nusing namespace std;\n\n struct Tm{\n   int qans,time,ans;\n };\n\nint main(){\n  \n  Tm d[N];\n  while(1){\n  int M,T,P,R,m,t,p,j,tans[11][N]={},ti[11][N]={};\n  cin>>M>>T>>P>>R;\n  if(M+T+P+R==0) break;\n  for(int i=1;i<=T;i++) d[i].ans=i,d[i].time=0,d[i].qans=0;\n    for(int i=0;i<R;i++){\n    cin>>m>>t>>p>>j;\n    if(j==0) {\n      d[t].qans++;\n      ti[p][t]+=m;\n      tans[p][t]=1;\n    }else ti[p][t]+=20;\n  }\n  for(int i=1;i<=T;i++)\n    for(int j=1;j<=P;j++) if(tans[j][i]==1) d[i].time+=ti[j][i];\n      for(int i=1;i<=T-1;i++)\n    for(int j=i;j<=T;j++){\n      if(d[i].qans < d[j].qans) swap(d[i],d[j]);\n     else if(d[i].qans==d[j].qans && d[i].time>d[j].time) swap(d[i],d[j]);\n     else if(d[i].ans<d[j].ans && d[i].qans==d[j].qans && d[i].time==d[j].time) swap(d[i].ans,d[j].ans);\n    }\n  \n  for(int i=1;i<=T;i++){\n    cout<<d[i].ans;\n  if(i<T && d[i].qans==d[i+1].qans && d[i].time==d[i+1].time) cout<<\"=\";\n  else if(i<T) cout<<\",\";\n  }\n  cout<<endl;\n  }\n  return 0;\n}\n  "
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n \nusing namespace std;\n \nstruct team{\n    int tID;\n    int pID;        //問題ID\n    vector<int> p;  //誤答数\n    int ansnum;     //正答数\n    int time;       //時間\n\tint place;\n \n    bool operator<( const team& right ) const {\n        return ( ansnum == right.ansnum ? \n            (time == right.time ? tID < right.tID : time > right.time) \n\t\t\t: ansnum < right.ansnum );\n    }\n\tbool operator==( const team& right ) const {\n        return ( ansnum == right.ansnum ? \n            time == right.time : false );\n    }\n};\n \nint main(void){\n  //  FILE* fp_in = freopen(\"data.txt\", \"r\", stdin);\n \n    while(1) {\n        int M, T, P, R;\n        cin >> M >> T >> P >> R;\n        if( M == 0 && T == 0 && P == 0 && R == 0 ) break; \n \n        //■■■■チームテーブル作成■■■■\n        vector<team> teams;\n        team newteam;\n        for(int i = 0; i <= P; i++)\n            newteam.p.push_back(0);\n \n        for(int i = 0; i < T; i++) {\n            newteam.tID = i + 1;\n            newteam.ansnum = 0;\n\t\t\tnewteam.time = 0;\n            teams.push_back( newteam );\n        }\n \n        //■■■■レコード取得■■■■\n        for(int i = 0; i < R; i++) {\n            int tID, pID, time_i, j;\n            cin >> time_i >> tID >> pID >> j;\n           \n\t\t\tif( j == 0 ) {\n\t\t\t\tteams.at(tID - 1).ansnum ++;\n\t\t\t\tteams.at(tID - 1).time += time_i + 20 * teams.at(tID - 1).p.at(pID);\n\t\t\t} else {\n\t\t\t\tteams.at( tID - 1 ).p.at( pID ) ++;\n\t\t\t}\n\n        }\n\n        sort( teams.begin(), teams.end() );\n\t\t\n\t\tcout << teams.at(teams.size() - 1).tID;\n\t\tfor(int i = teams.size() - 2; i >= 0 ; i--) {\n\t\t\tif( teams.at(i) == teams.at(i + 1) ) {\n\t\t\t\tcout << \"=\" << teams.at(i).tID;\n\t\t\t} else {\n\t\t\t\tcout << \",\" << teams.at(i).tID;\n\t\t\t}\n\t\t}\n\t\tcout << endl;\n \n    }\n \n   // while(1){}\n \n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<iostream>\n#include<vector>\n#include<string>\n#include<algorithm>\n#include<set>\n\nusing namespace std;\n\n#define reps(i,f,n) for(int i=f;i<int(n);i++)\n#define rep(i,n) reps(i,0,n)\n\ntypedef pair<int,int> pii;\ntypedef pair<pii,int> piii;\n\npiii mk(int a, int b, int c){\n\treturn piii(pii(a,b), c);\n}\n\nint main(){\n\tA:;\n\t\n\tint teemwrong[55][11]={0};\n\tint teemcost[11]={0};\n\tint teemac[11]={0};\n\t\n\tint M,T,P,R;\n\tcin>>M>>T>>P>>R;\n\t\n\tif(M==0&&T==0&&R==0&&P==0)return 0;\n\t\n\trep(i,R){\n\t\tint m,t,p,j;\n\t\tcin>>m>>t>>p>>j;\n\t\t\n\t\tif(j==0){\n\t\t\tteemac[t]++;\n\t\t\tteemcost[t]+=m+teemwrong[t][p]*20;\n\t\t}else{\n\t\t\tteemwrong[t][p]++;\n\t\t}\n\t}\n\t\n\tvector<piii> rank;\n\treps(i,1,T+1){\n\t\trank.push_back(mk(teemac[i], -teemcost[i], i));\n\t}\n\t\n\tsort(rank.begin(),rank.end());\n\treverse(rank.begin(),rank.end());\n\t\n\trep(i,rank.size()){\n\t\tif(i!=0){\n\t\t\tif(rank[i].first==rank[i-1].first)printf(\"=\");\n\t\t\telse printf(\",\");\n\t\t}\n\t\tprintf(\"%d\",rank[i].second);\n\t}puts(\"\");\n\t\n\t\n\tgoto A;\n}"
  },
  {
    "language": "C++",
    "code": "a#include <iostream>\nusing namespace std;\n \nint main()\n{\n    while(true){\n        int M, T, P, R;\n        cin >> M >> T >> P >> R;\n \n        if(M==0 && T==0 && P==0 && R==0)\n            break;\n \n        int CP[50], TT[50], PT[50][10];\n        for(int i=0; i<T; i++){\n            CP[i] = TT[i] = 0;\n            for(int j=0; j<P; j++)\n                PT[i][j] = 0;\n        }\n \n        for(int i=0; i<R; i++){\n            int m, t, p, j;\n            cin >> m >> t >> p >> j;\n \n            if(j==0){\n                CP[t-1]++;\n                TT[t-1] += (m+PT[t-1][p-1]);\n            }\n            else{\n                PT[t-1][p-1] += 20;\n            }\n        }\n \n        int tnow, tpre = -1;\n        bool flg[50];\n        for(int i=0; i<T; i++)\n            flg[i] = false;\n \n        for(int i=0; i<T; i++){\n            tnow = -1;\n            for(int j=0; j<T; j++){\n                if(flg[j])\n                    continue;\n \n                if(tnow==-1){\n                    tnow = j;\n                }\n                else{\n                    if(CP[j]>CP[tnow] || (CP[j]==CP[tnow] && TT[j]<=TT[tnow])){\n                        tnow = j;\n                    }\n                }\n            }\n \n            if(tpre!=-1){\n                if(CP[tnow]==CP[tpre] && TT[tnow]==TT[tpre])\n                    cout << '=';\n                else\n                    cout << ',';\n            }\n            cout << tnow+1;\n \n            flg[tnow] = true;\n            tpre = tnow;\n        }\n        cout << endl;\n    }\n \n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstring>\n\n#define PENALTY_TIME 20\n\nusing namespace std;\n\ntypedef struct TeamResult {\n  int teamNo;\n  int solved;\n  int totalTime;\n  int *incorrect;\n} TeamResult;\n\nstatic void sort(TeamResult *teamResult, int numOfTeam);\nstatic void PrintResult(TeamResult *teamResult, int numOfTeam);\n\nint main(void)\n{\n  int M, T, P, R;\n  while (cin >> M >> T >> P >> R) {\n    if (T == 0) break;\t// 入力の条件は 1<=T なので0で終了\n\n    TeamResult teamResult[T];\n    // TeamResultの初期化\n    memset(teamResult, 0, sizeof(teamResult));\n    for (int i = 0; i < T; i++) {\n      teamResult[i].teamNo = i;\n      teamResult[i].incorrect = new int[P];\n      for (int j = 0; j < P; j++) {\n\tteamResult[i].incorrect[j] = 0;\n      }\n    }\n    \n    for (int i = 0; i < R; i++) {\n      int m, t, p, j;\n      cin >> m >> t >> p >> j;\n      if (p == 0) goto FINISH;\n\n      t = t - 1;\n      p = p - 1;\n      if (j != 0) {\n\tteamResult[t].incorrect[p]++;\n      } else {\n\tteamResult[t].totalTime += m + teamResult[t].incorrect[p] * PENALTY_TIME;\n\tteamResult[t].solved++;\n      }\n    }\n\n    sort(teamResult, T);\n    PrintResult(teamResult, T);\n\n    for (int i = 0; i < T; i++) {\n      delete [] teamResult[i].incorrect;\n    }\n  }\nFINISH:\n  return 0;\n}\n\nstatic void sort(TeamResult *teamResult, int numOfTeam)\n{\n  TeamResult tmp;\n\n  for (int i = 0; i < numOfTeam; i++) {\n    for (int j = i+1; j < numOfTeam; j++) {\n      // 正当数で昇順にソート\n      if (teamResult[i].solved > teamResult[j].solved) {\n\ttmp = teamResult[i];\n\tteamResult[i] = teamResult[j];\n\tteamResult[j] = tmp;\n      } else if (teamResult[i].solved == teamResult[j].solved) {\n\t// 正当数が同じ場合、総所要時間で昇順にソート\n\tif (teamResult[i].totalTime < teamResult[j].totalTime) {\n\t  tmp = teamResult[i];\n\t  teamResult[i] = teamResult[j];\n\t  teamResult[j] = tmp;\n\t} else if (teamResult[i].totalTime == teamResult[j].totalTime) {\n\t  // 正当数および総所要時間がともに同じ場合、チーム番号で降順にソート\n\t  if (teamResult[i].teamNo > teamResult[j].teamNo) {\n\t    tmp = teamResult[i];\n\t    teamResult[i] = teamResult[j];\n\t    teamResult[j] = tmp;\n\t  }\n\t}\n      }\n    }\n  }\n}\n\nstatic void PrintResult(TeamResult *teamResult, int numOfTeam)\n{\n  /*\n  for (int i = 0; i < numOfTeam; i++) {\n    cout << \"Team:\" << teamResult[i].teamNo + 1\n\t << \", Solved:\" << teamResult[i].solved\n\t << \", Time:\" << teamResult[i].totalTime << endl;\n  }\n  */\n  for (int i = numOfTeam; i > 0; i--) {\n    cout << teamResult[i - 1].teamNo + 1;\n    if (i - 1 > 0 &&\n\tteamResult[i - 1].solved == teamResult[i - 2].solved &&\n\tteamResult[i - 1].totalTime == teamResult[i - 2].totalTime) {\n      cout << \"=\";\n    } else if (i - 1 > 0) {\n      cout << ',';\n    } else {\n      cout << endl;\n    }\n  }\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nint main(void){\n    int M,T,P,R,m,t,p,j;\n\n    while(cin>>M>>T>>P>>R, M|T|P|R){\n        int cnt[51]={};\n        int time[51]={};\n        int penalty[51][11]={};\n        int s[51]={};\n\n        /*????????¨??????????????£????¨????*/\n        while(R--){\n            cin>>m>>t>>p>>j;\n            if(j==0){\n                ++cnt[t];\n                time[t] += m+penalty[t][p];\n            }\n            else penalty[t][p]+=20;\n        }\n\n        /*???????????¨??????*/\n        for(t=1;t<=T;t++)s[t]=t;\n\n        /*??????????????????*/\n        for(int a=1;a<T;a++){\n            for(int b=T;b>a;b--){\n                if(cnt[s[b]]<cnt[s[b-1]]\n                   ||(cnt[s[b]]==cnt[s[b-1]] && time[s[b]]>time[s[b-1]])\n                   ||(cnt[s[b]]==cnt[s[b-1]] && time[s[b]]==time[s[b-1]] && s[b]<s[b-1]))\n                    swap(s[b],s[b-1]);\n            }\n        }\n\n        /*??????????????????????????????*/\n        for(t=T;t>=1;t--){\n            cout<<s[t];\n            if(t==1)break;\n            if(cnt[s[t]]==cnt[s[t-1]] && time[s[t]]==time[s[t-1]])cout<<\"=\";\n            else cout<<\",\";\n        }\n        cout<<endl;\n\n    }\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n\nusing namespace std;\n\nstruct Score{\n\tint team_num;\n\tint ac=0;\n\tint time=0;\n\tint miss_tmp[20]={0};\n\tint miss_sum=0;\n};\n\nbool asc(const Score& left, const Score& right) {\n\treturn left.ac == right.ac ? (left.time == right.time ?  left.team_num > right.team_num : left.time < right.time) :\n\t\t   left.ac > right.ac;\n}\n\nint main(){\n\twhile(1){\n\t\tint M, T, P, R; cin>>M>>T>>P>>R;\n\t\tif(!M && !T && !P && !R) break;\n\t\tvector <Score> score(T);\n\t\tfor(int i=0; i<T; i++) score[i].team_num = i;\n\t\tint m, t, p, j;\n\t\tfor(int i=0; i<R; i++){\n\t\t\tcin>>m>>t>>p>>j;\n\t\t\tt=t-1;//0オリジン\n\t\t\tif(j == 0){\n\t\t\t\tscore[t].ac++;\n\t\t\t\tif(score[t].miss_tmp != 0){\n\t\t\t\t\tscore[t].miss_sum += score[t].miss_tmp[p];\n\t\t\t\t}\n\t\t\t\tscore[t].time += m+(score[t].miss_tmp[p]*20);\n\t\t\t} else{\n\t\t\t\tscore[t].miss_tmp[p]++;\n\t\t\t}\n\t\t}\n\t\tsort(score.begin(), score.end(), asc);\n\t\tfor(int i=0; i<T; i++){\n\t\t\tcout << score[i].team_num+1;\n\t\t\tif(i!=T-1){\n\t\t\t\tif(score[i].ac == score[i+1].ac && score[i].time == score[i+1].time) cout << \"=\";\n\t\t\t\telse cout << \",\";\n\t\t\t}\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\nusing pii = pair<int, int>;\n\nint main()\n{\n    while (true) {\n        int M, T, P, R;\n        cin >> M >> T >> P >> R;\n        if (M == 0 and T == 0 and P == 0 and R == 0) {\n            break;\n        }\n        vector<vector<int>> wa(T, vector<int>(P, 0));\n        vector<pair<pii, int>> score(T, make_pair(make_pair(P, 0), 0));\n        for (int i = 0; i < T; i++) {\n            score[i].second = T - i;\n        }\n        for (int i = 0; i < R; i++) {\n            int m, t, p, j;\n            cin >> m >> t >> p >> j;\n            t--, p--;\n            if (j == 0) {\n                score[t].first.first--;\n                score[t].first.second += (m + wa[t][p] * 20);\n            } else {\n                wa[t][p]++;\n            }\n        }\n        sort(score.begin(), score.end());\n        for (int i = 0; i < T; i++) {\n            if (i > 0) {\n                if (score[i - 1].first.first == score[i].first.first and score[i - 1].first.second == score[i].first.second) {\n                    cout << '=';\n                } else {\n                    cout << ',';\n                }\n            }\n            cout << T - score[i].second + 1;\n        }\n        cout << endl;\n    }\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <utility>\n#include <algorithm>\nusing namespace std;\n\nint main(void){\n  while(true){\n    int M, T, P, R;\n    cin >> M >> T >> P >> R;\n    if(M == 0 && T == 0 && P == 0 && R == 0){ break; }\n\n\n    vector<vector<pair<bool, int> > > status(T, vector<pair<bool, int> >(P, make_pair(false, 0)));\n    for(int i = 0; i < R; i++){\n      int m, t, p, j;\n      cin >> m >> t >> p >> j;\n      --t;\n      --p;\n      if(status[t][p].first){ continue; }\n      if(j == 0){\n        status[t][p].first = true;\n        status[t][p].second += m;\n      }\n      else{ status[t][p].second += 20; }\n    }\n\n    vector<pair<pair<int, int>, int> > team(T, make_pair(make_pair(0, 0), 0));\n    for(int i = 0; i < T; i++){\n      for(int j = 0; j < P; j++){\n        if(status[i][j].first){\n          --team[i].first.first;\n          team[i].first.second += status[i][j].second;\n        }\n      }\n      team[i].second = -(i + 1);\n    }\n    \n    sort(team.begin(), team.end());\n    for(int i = 0; i < T; i++){\n      if(i != 0){\n        if(team[i - 1].first.first == team[i].first.first\n           && team[i - 1].first.second == team[i].first.second){\n          cout << \"=\";\n        }else{ cout << \",\"; }\n      }\n      cout << -team[i].second;\n    }\n    cout << endl;\n  }\n\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\nusing namespace std;\n\nint main(){\n\twhile(true){\n\t\tint M,T,P,R;\n\t\tcin>>M>>T>>P>>R;\n\t\tif(M==0&&T==0&&P==0&&R==0)\n\t\t\tbreak;\n\t\tint CP[50],TT[50],PT[50][10];\n\t\tfor(int i=0;i<T;i++){\n\t\t\tCP[i]=TT[i]=0;\n\t\t\tfor(int j=0;j<P;j++)\n\t\t\t\tPT[i][j]=0;\n\t\t}\n\t\tfor(int i=0;i<R;i++){\nq\t\t\tint m,t,p,j;\n\t\t\tcin>>m>>t>>p>>j;\n\t\t\tif(j==0){\n\t\t\t\tCP[t-1]++;\n\t\t\t\tTT[t-1] += (m+PT[t-1][p-1]);\n\t\t\t}else{\n\t\t\t\tPT[t-1][p-1] +=20;\n\t\t\t}\n\t\t}\n\n\t\tint tnow,tpre=-1;\n\t\tbool flg[50];\n\t\tfor(int i=0;i<T;i++)\n\t\t\tflg=[i]=false;\n\t\tfor(int i=0;i<T;i++){\n\t\t\ttnow=-1;\n\t\t\tfor(int j=0;j<T;j++){\n\t\t\t\tif(flg[j])\n\t\t\t\t\tcontinue;\n\t\t\t\tif(tnow==-1){\n\t\t\t\t\ttnow=j;\n\t\t\t\t}else{\n\t\t\t\t\tif(CP[j]>CP[tnow]||(CP[j]==CP[tnow]&&TT[j]<=TT[tnow])){\n\t\t\t\t\t\ttnow=j;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\tif(tpre!=-1){\n\t\t\tif(CP[tnow]==CP[tpre]&&TT[tnow]==TT[tpre])\n\t\t\t\tcout<<'=';\n\t\t\telse\n\t\t\t\tcout<<',';\n\t\t}\n\t\tcout << tnow+1;\n\t\t\tflg[tnow]=true;\n\t\t\ttpre=tnow;\n\t\t}\n\tcout<<endl;\n\t}\n\treturn 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <stdio.h>\n#include <iostream>\n#include <math.h>\n#include <string>\n#include <vector>\n#include <algorithm>\n#include <map>\n\nusing namespace std;\n#define ll long long\n#define pb push_back\n\nint main()\n{\n    int m, t, p, r;\n    vector<string> x;\n    while (1)\n    {\n        cin >> m >> t >> p >> r;\n        if (m == 0)\n        {\n            break;\n        }\n        vector<pair<pair<int, int>, int> >team(t); // 得点：時間: チーム番号: <ペナルティ番号,ペナルティ数>\n        vector<vector<int> > wrong(t,vector<int>(p,0)); // チーム番号：間違えた問題番号\n        int m1, t1, p1, j1;\n        //チーム番号を入れていく\n        for (int i = 0; i < team.size(); i++)\n        {\n            team[i].second = i + 1;\n        }\n\n        for (int k = 0; k < r; k++)\n        { // 提出回数だけ繰り返す\n            cin >> m1 >> t1 >> p1 >> j1;\n            if (j1 == 0)\n            {\n                team[t1 - 1].first.second = team[t1 - 1].first.second - m1 - wrong[t1-1][p1-1] * 20; // 時間を代入\n                team[t1 - 1].first.first += 100;\n            }\n            else\n            { //　不正解だった場合\n                wrong[t1-1][p1-1]++;\n            }\n        }\n        sort(team.begin(), team.end());\n        string x_chi = \"\";\n        char numStr[512];\n        string formatStr;\n        //debugよう\n        for (int i = team.size() - 1; i > 0; i--)\n        {\n            if (team[i].first.first == team[i - 1].first.first)\n            {\n                if (team[i].first.second == team[i - 1].first.second)\n                {\n                    sprintf(numStr, \"%d=\", team[i].second);\n                }\n                else\n                {\n                    sprintf(numStr, \"%d,\", team[i].second);\n                }\n            }\n            else\n            {\n                sprintf(numStr, \"%d,\", team[i].second);\n            }\n            formatStr += numStr;\n            // cout << team[i].second << \": \" << team[i].first.first << \" \" << team[i].first.second << endl; // 0に得点：i+1番のペナルティ\n        }\n        // 最後の一つを追加\n        // cout << team[0].second << \": \" << team[0].first.first << \" \" << team[0].first.second << endl; // 0に得点：i+1番のペナルティ\n        sprintf(numStr, \"%d\", team[0].second);\n        formatStr += numStr;\n        x.push_back(formatStr);\n    }\n    for (int i = 0; i < x.size(); i++)\n    {\n        cout << x[i] << endl;\n    }\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <climits>\n#include <cmath>\n#include <cstdio>\n#include <cstdlib>\n#include <cstring>\n#include <functional>\n#include <iostream>\n#include <map>\n#include <ostream>\n#include <queue>\n#include <set>\n#include <stack>\n#include <string>\n#include <vector>\n#define INF 1000000000\n#define rep(i,a,b) for (int i=(a);i<(b);i++)\n#define rev(i,a,b) for (int i=(a)-1;i>=b;i--)\nusing namespace std;\ntypedef long long ll;\ntypedef pair<int, int> pii;\ntypedef queue<int> qi;\ntypedef vector<int> vi;\ntypedef vector<string> vs;\nint dx[4] = { 0, 1, 0, -1 };\nint dy[4] = { 1, 0, -1, 0 };\n\nint ac[55] = {0};\nint ac2[55][12] = {0};\nint wa[55][12] = {0};\nint ti[55] = {0};\n\nbool func(int a, int b) {\n\ta--;\n\tb--;\n\n\tif(ac[a] > ac[b]) return true;\n\telse if(ac[a] < ac[b]) return false;\n\telse {\n\t\tif(ti[a] < ti[b]) return true;\n\t\telse if(ti[a] > ti[b]) return false;\n\t\telse {\n\t\t\tif(a > b) return true;\n\t\t\telse return false;\n\t\t}\n\t}\n}\n\nint main() {\n\tcin.tie(0);\n\tios::sync_with_stdio(false);\n\n\twhile(true) {\n\n\t\tint M,T,P,R;\n\t\tcin >> M >> T >> P >> R;\n\t\tif(!(M || T || P || R)) break;\n\n\t\tvi rank(T);\n\t\trep(i,0,T) {\n\t\t\trank[i] = i+1;\n\t\t\tac[i] = 0;\n\t\t\tti[i] = 0;\n\t\t\trep(j,0,P) {\n\t\t\t\tac2[i][j] = 0;\n\t\t\t\twa[i][j] = 0;\n\t\t\t}\n\t\t}\n\n\t\trep(i,0,R) {\n\t\t\tint m,t,p,j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tif(j == 0) {\n\t\t\t\tac[t-1]++;\n\t\t\t\tac2[t-1][p-1] = 1;\n\t\t\t\tti[t-1] = m;\n\t\t\t\trep(j,0,P) if(ac2[t-1][j] == 1) ti[t-1] += wa[t-1][j] * 20;\n\t\t\t}\n\t\t\telse wa[t-1][p-1]++;\n\t\t}\n\n\t\tsort(rank.begin(), rank.end(), func);\n\n\t\trep(i,0,rank.size()-1) {\n\t\t\tcout << rank[i];\n\t\t\tif(ac[rank[i]-1] > ac[rank[i+1]-1]) cout << ',';\n\t\t\telse if(ti[rank[i]-1] < ti[rank[i+1]-1]) cout << ',';\n\t\t\telse cout << '=';\n\t\t}\n\t\tcout << rank[rank.size()-1] <<endl;\n\t}\n\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <string>\n#include <vector>\n#include <sstream>\n#include <map>\n#include <set>\n#include <queue>\n#include <algorithm>\n#include <cmath>\n#include <cstdio>\n#include <cstdlib>\n#include <cstring>\n\nusing namespace std;\nusing ll = long long;\n\n#define all(c) (c).begin(), (c).end()\n#define rep(i, n) for (int i = 0; i < (int)(n); i++)\n#define pb(e) push_back(e)\n#define mp(a, b) make_pair(a, b)\n#define fr first\n#define sc second\n\nconst ll INF = 1e9;\nconst ll MOD = 1e9 + 7;\nint dx[4] = {1, 0, -1, 0};\nint dy[4] = {0, 1, 0, -1};\n\nint M, T, P, R;\nint m[2003], t[2003], p[2003], j[2003];\nint correct[51], penalty[51][11], times[51][11];\nint is_correct[51][11];\nvoid solve() {\n    memset(correct, 0, sizeof(correct));\n    memset(penalty, 0, sizeof(penalty));\n    memset(times, 0, sizeof(times));\n    memset(is_correct, 0, sizeof(is_correct));\n    rep(i, R) {\n        if (j[i] == 0) {\n            if (is_correct[t[i]][p[i]]) continue;\n            is_correct[t[i]][p[i]] = 1;\n            correct[t[i]]++;\n            times[t[i]][p[i]] += m[i];\n            times[t[i]][p[i]] += penalty[t[i]][p[i]] * 20;\n        } else {\n            penalty[t[i]][p[i]]++;\n        }\n    }\n    vector<tuple<int, int, int>> vec;\n    rep(i, T) {\n        int sum = 0;\n        rep(k, P) sum += times[i][k];\n        vec.emplace_back(-correct[i], sum, -i);\n    }\n    sort(all(vec));\n    tuple<int, int, int> pre{-1, -1, -1};\n    rep(i, vec.size()) {\n        auto x = vec[i];\n        if (get<0>(x) == get<0>(pre) and get<1>(x) == get<1>(pre)) {\n            cout << \"=\";\n        } else {\n            if (i) cout << \",\";\n        }\n        cout << -get<2>(x) + 1;\n\n        pre = x;\n    }\n    cout << endl;\n}\nint main() {\n    while (cin >> M >> T >> P >> R, M) {\n        rep(i, R) cin >> m[i] >> t[i] >> p[i] >> j[i];\n        rep(i, R) t[i]--;\n        solve();\n    }\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<vector>\n#include<algorithm>\n#include<queue>\nusing namespace std;\n\nstruct team{\n    int cor=0,pen=0,id=0;\n    vector<int>AC;\n    vector<int>correct;\n    vector<int>penalty;\n};\nbool com(team t1,team t2){\n    return t1.cor==t2.cor?t1.pen==t2.pen?t1.id>t2.id:t1.pen<t2.pen:t1.cor>t2.cor;\n}\nbool com2(team t1,team t2){\n    return t1.cor==t2.cor?t1.pen<t2.pen:t1.cor>t2.cor;\n}\nint main(){\n    int M,T,P,R,m,t,p,j;\n    while(cin>>M>>T>>P>>R,M){\n        vector<team>vec(T);\n        for(int i=0;i<T;i++){\n            vec[i].id=i;\n            vec[i].correct.resize(P,0);\n            vec[i].penalty.resize(P,0);\n            vec[i].AC.resize(P,0);\n        }\n        for(int i=0;i<R;i++){\n            cin>>m>>t>>p>>j;\n            t--;p--;\n            if(j==0){\n                vec[t].correct[p]=vec[t].penalty[p]+m;\n                vec[t].AC[p]=1;\n            }\n            else{\n                vec[t].penalty[p]+=20;\n            }\n        }\n        for(int i=0;i<T;i++){\n            for(int a=0;a<P;a++){\n                if(vec[i].AC[a]>0){\n                    vec[i].cor++;\n                    vec[i].pen+=vec[i].correct[a];\n                }\n            }\n        }\n        sort(vec.begin(),vec.end(),com);\n        \n        for(int i=0;i<T-1;i++){\n            if(com2(vec[i],vec[i+1]))\n                cout<<vec[i].id+1<<\",\";\n            else\n                cout<<vec[i].id+1<<\"=\";\n        }\n        cout<<vec[T-1].id+1<<endl;\n        vec.clear();\n    }\n    \n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <cstdio>\n#include <iostream>\n#include <map>\n#include <cmath>\n#include <queue>\n#include <set>\n#include <sstream>\n#include <stack>\n#include <string>\n#include <vector>\n#include <stdlib.h>\n#include <stdio.h>\n#include <bitset>\n#include <cstring>\nusing namespace std;\n#define FOR(I,A,B) for(int I = (A); I < (B); ++I)\n#define CLR(mat) memset(mat, 0, sizeof(mat))\ntypedef long long ll;\ntypedef pair<ll, int> pll;\n\nint main()\n{\n  int M,T,P,R;\n  int k = 0;\n  while(cin>>M>>T>>P>>R, M||T||P||R) {\n    if(k) cout << '\\n';\n    int A[T+1],times[T+1],pena[T+1],miss[T+1][P+1];\n    CLR(A);CLR(times);CLR(pena);CLR(miss);\n    FOR(i,0,R) {\n      int m,t,p,j; cin >> m >> t >> p >> j;\n      if(j==0) {\n        A[t]++;\n        times[t] = m;\n        pena[t] += miss[t][p] * 20;\n      } else {\n        miss[t][p]++;\n      }\n    }\n    vector<pll> score(T);\n    FOR(i,1,T+1) {\n      ll s = A[i] * 10000000000000 - pena[i] - times[i];\n      score[i-1] = pll(s, i);\n    }\n    sort(score.rbegin(), score.rend());\n    int j = 1;\n    ll now = score[0].first;\n    vector<vector<int> > ans(T+1);\n    FOR(i,0,T) {\n      if(now > score[i].first) {\n        j++;\n        now = score[i].first;\n      }\n      ans[j].push_back(score[i].second);\n    }\n    FOR(i,1,T+1) {\n      if((int)ans[i].size() > 0) {\n        if(i!=1) cout << ',';\n        vector<int> pr;\n        FOR(j,0,(int)ans[i].size()) {\n          pr.push_back(ans[i][j]);\n        }\n        sort(pr.rbegin(), pr.rend());\n        FOR(j,0,(int)pr.size()) {\n          if(j!=0) cout<<'=';\n          cout << pr[j];\n        }\n      }\n    }\n    k++;\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <algorithm>\n#include <utility>\n\nusing namespace std;\n\nconst int max_num_teams = 50;\nconst int max_num_probs = 10;\n\n// time, num_errors\npair<int, int> probrems[max_num_teams + 1][max_num_probs + 1];\n// num_corrects, time\nstruct team {\n    int team_id;\n    int num_corrects;\n    int time;\n};\n\nbool operator<(const team& l, const team& r) {\n    if (l.num_corrects == r.num_corrects) {\n        if (l.time == r.time) {\n            return l.team_id > r.team_id;\n        }\n        return l.time < r.time;\n    }\n    return l.num_corrects > r.num_corrects;\n}\n\nbool same_place(const team& l, const team& r) {\n    return l.num_corrects == r.num_corrects && l.time == r.time;\n}\n\nteam teams[max_num_teams];\n\nint main() {\n    for (;;) {\n        int M, T, P, R;\n        scanf(\"%d%d%d%d\", &M, &T, &P, &R);\n\n        if (!M && !T && !P && !R) { break; }\n\n        for (int i = 1; i <= max_num_teams; i++) {\n            for (int j = 1; j <= max_num_probs; j++) {\n                probrems[i][j] = make_pair(-1, 0);\n            }\n            teams[i].team_id = i;\n            teams[i].num_corrects = 0;\n            teams[i].time = 0;\n        }\n\n        for (int i = 0; i < R; i++) {\n            int m, t, p, j;\n            scanf(\"%d%d%d%d\", &m, &t, &p, &j);\n            if (j == 0) { // Correct answer\n                probrems[t][p].first = m;\n            } else { // Wrong answer\n                probrems[t][p].second++;\n            }\n        }\n\n        for (int i = 1; i <= T; i++) {\n            for (int j = 1; j <= P; j++) {\n                if (probrems[i][j].first != -1) {\n                    teams[i].num_corrects++;\n                    teams[i].time += probrems[i][j].first;\n                    teams[i].time += probrems[i][j].second * 20;\n                }\n            }\n        }\n\n        sort(&teams[1], &teams[T + 1]);\n\n        for (int i = 1; i <= T - 1; i++) {\n            printf(\"%d\", teams[i].team_id);\n            if (same_place(teams[i], teams[i + 1])) {\n                printf(\"=\");\n            } else {\n                printf(\",\");\n            }\n        }\n        printf(\"%d\\n\", teams[T].team_id);\n    }\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <iomanip>\n#include <cmath>\n#include <cstdio>\n#include <algorithm>\n#include <vector>\n#include <memory>\n#include <cstring>\n#include <cassert>\n#include <numeric>\n#include <sstream>\n#include <map>\n#include <set>\n#include <queue>\n#include <stack>\n#include <cctype>\n#include <unordered_map>\n#include <unordered_set>\nusing namespace std;\n\n#define REP2(i, m, n) for (int i = (int)(m); i < (int)(n); i++)\n#define REP(i, n) REP2(i, 0, n)\n#define ALL(S) (S).begin(), (S).end()\ntypedef long long ll;\n\nint main(){\n  ios::sync_with_stdio(false);\n  int M, T, P, R;\n  while (cin >> M >> T >> P >> R && M + T + P + R > 0){\n    vector<int> sum(T);\n    vector<int> num(T);\n    vector<vector<int> > wa(T, vector<int>(P));\n    REP(i, R){\n      int m, t, p, j;\n      cin >> m >> t >> p >> j;\n      t--, p--;\n      if (j == 0){\n        num[t]++;\n        sum[t] += wa[t][p] * 20;\n      } else {\n        wa[t][p]++;\n      }\n    }\n    vector<tuple<int, int, int> > vp;\n    REP(i, T){\n      vp.push_back(make_tuple(-num[i], sum[i], -i));\n    }\n    sort(ALL(vp));\n\n    REP(i, T){\n      if (i > 0){\n        if (get<0>(vp[i]) == get<0>(vp[i - 1]) && get<1>(vp[i]) == get<1>(vp[i - 1])){\n          cout << \"=\";\n        } else {\n          cout << \",\";\n        }\n      } \n      cout << - get<2>(vp[i]) + 1;\n    }\n    cout << endl;\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstdio>\n#include <algorithm>\n#include <string>\n#include <cstring>\n#include <cctype>\n#include <cmath>\n#include <stack>\n#include <queue>\n#include <vector>\n#include <set>\n#include <map>\n#include <list>\n#include <stdio.h>\n#include <string.h>\n#include <cstdlib>\n#include <math.h>\n#include <bitset>\n#define INF 2000000000\nusing namespace std;\nint dx[4]={1,0,-1,0},dy[4]={0,1,0,-1};\n#define ll long long\n#define PL pair<long long, long long>\n#define PR pair<int,int>\n#define mk make_pair\n#define en endl;\n#define WHITE 0\n#define BLACK 2\n#define GRAY 1\n#define RE return 0;\n#define int ll\n\n//ICPC Ranking  AOJ\n\n#define MAX 60\nint tt[55];\nint pena[55][15];\nint point[55];\nbool done[MAX];\n\nsigned main(){\n  int M,T,P,R;\n  while(cin>>M>>T>>P>>R&&!(M==0&&T==0&&P==0&&R==0)){\n    for(int i=0; i<=55; i++){\n      for(int j=0; j<=15; j++){\n        pena[i][j]=0;\n      }\n      tt[i]=0;\n      point[i]=0;\n      done[i]=false;\n    }\n    \n    for(int i=0; i<R; i++){\n      int m,t,p,j;\n      cin>>m>>t>>p>>j;\n      if(j){\n        pena[t][p]++;\n      }else{\n        tt[t]+=m;\n        tt[t]+=pena[t][p]*20;\n        point[t]++;\n      }\n    }\n    \n    PR pre;\n    for(int i=1; i<=T; i++){\n      int m=0,t=0;\n      int nowt=0;\n      for(int j=1; j<=T; j++){\n        if(done[j]) continue;\n        if(point[j]>m){\n          nowt=j;\n          m=point[j];\n          t=tt[j];\n        }else if(point[j]==m){\n          if(tt[j]<=t){\n            nowt=j;\n            m=point[j];\n            t=tt[j];\n          }\n        }\n      }\n      \n      done[nowt]=true;\n      if(i==1) cout<<nowt;\n      else{\n        if(pre.first==m&&pre.second==t){\n          cout<<'='<<nowt;\n        }else{\n          cout<<','<<nowt;\n        }\n      }\n      \n      pre.first=m; pre.second=t;\n    }\n    cout<<en\n  }\n  RE\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n#define rep(i, n) for (int i = 0; i < (n); i++)\n#define REP(i, s, n) for (int i = (s); i < (n); i++)\n#define all(co) begin(co), end(co)\n\nint main() {\n\tint m,t,p,r;\nwhile (cin >> m >> t >> p >> r && m) {\n\tvector<vector<int>> v(t, vector<int>(p));\n\trep(i, r) {\n\t\tint m, t, p, j; cin >> m >> t >> p >> j;\n\t\tt--;\n\t\tif (j == 0) {\n\t\t\tif(v[t][p] == 0) v[t][p] = m;\n\t\t\telse v[t][p] = m + -v[t][p] * 20;\n\t\t}\n\t\telse v[t][p]--;\n\t}\n\tmap<int, vector<int>> rank;\n\trep(i, t) {\n\t\tint s = -accumulate(all(v[i]), 0);\n\t\tif(rank.count(s)) rank.push_back(i + 1);\n\t\telse rank.insert(s, vector<int>{i+1});\n\t}\n\tfor(auto it = rank.begin(); it != --rank.end(); it++) {\n\t\trep(i, it->size() - 1) cout << it->at(i) << '=';\n\t\tcout << it->back();\n\t\tcout << ',';\n\t}\n\t{\n\t\tauto it = --rank.end();\n\t\trep(i, it->size() - 1) cout << it->at(i) << '=';\n\t\tcout << it->back();\n\t}\n\tcout << endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <iostream>\n#include <algorithm>\n#include <vector>\n#include <functional>\n#define rep(i,n) for(int i=0;i<n;i++)\nusing namespace std;\ntypedef pair<int,int> P;\ntypedef pair<P,int> PP;\nint main(){\n\twhile(true){\n\t\tint m,t,p,r;\n\t\tscanf(\"%d%d%d%d\",&m,&t,&p,&r);\n\t\tif(m==0) break;\n\t\tint tim[50][10]={},wa[50][10]={};\n\t\trep(i,50) rep(j,10) tim[i][j]=-1;\n\t\trep(i,r){\n\t\t\tint mm,tt,pp,jj;\n\t\t\tscanf(\"%d%d%d%d\",&mm,&tt,&pp,&jj);\n\t\t\ttt--,pp--;\n\t\t\tif(jj==0) tim[tt][pp]=mm+wa[tt][pp]*20;\n\t\t\telse wa[tt][pp]++;\n\t\t}\n\t\tint pen[50]={},acp[50]={};\n\t\trep(i,t) rep(j,p){\n\t\t\tif(tim[i][j]==-1) continue;\n\t\t\tacp[i]++;\n\t\t\tpen[i]+=tim[i][j];\n\t\t}\n\t\tvector<PP> vc;\n\t\trep(i,t) vc.push_back(PP(P(acp[i],-pen[i]),i+1));\n\t\tsort(vc.begin(),vc.end(),greater<PP>());\n\t\trep(i,t){\n\t\t\tif(i==0){\n\t\t\t\tprintf(\"%d\",vc[i].second);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif(vc[i].first==vc[i-1].first) printf(\"=%d\",vc[i].second);\n\t\t\telse printf(\",%d\",vc[i].second);\n//\t\t\tcout << vc[i].second << \" acp \" << vc[i].first.first << \" pen \" << vc[i].first.second << endl;\n\t\t}\n\t\tprintf(\"\\n\");\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <iostream>\n#include <string>\n#include <sstream>\n#include <stack>\n#include <algorithm>\n#include <cmath>\n#include <queue>\n#include <map>\n#include <set>\n#include <cstdlib>\n#include <bitset>\n#include <tuple>\n#include <assert.h>\n#include <deque>\n#include <bitset>\n#include <iomanip>\n#include <limits>\n#include <chrono>\n#include <random>\n#include <array>\n#include <unordered_map>\n#include <functional>\n#include <complex>\n\ntemplate<class T> inline bool chmax(T& a, T b) { if (a < b) { a = b; return 1; } return 0; }\ntemplate<class T> inline bool chmin(T& a, T b) { if (a > b) { a = b; return 1; } return 0; }\n\nconstexpr long long MAX = 5100000;\nconstexpr long long INF = 1LL << 60;\nconstexpr int inf = 1 << 28;\nconstexpr long long mod = 1000000007LL;\n//constexpr long long mod = 998244353LL;\n\nusing namespace std;\ntypedef unsigned long long ull;\ntypedef long long ll;\n\n\nstruct SCORE {\n\tll ac, pena, id;\n\tSCORE(ll _ac, ll _pena, ll _id) :ac(_ac), pena(_pena), id(_id) {}\n\tSCORE() :ac(0), pena(0), id(0) {}\n\tbool operator<(const SCORE& s) {\n\t\tif (ac == s.ac) {\n\t\t\tif (pena == s.pena) return id > s.id;\n\t\t\telse return pena < s.pena;\n\t\t}\n\t\telse {\n\t\t\treturn ac > s.ac;\n\t\t}\n\t}\n\tbool operator ==(const SCORE& s) {\n\t\treturn pena == s.pena && ac == s.ac;\n\t}\n};\nint main()\n{\n\t/*\n\tcin.tie(nullptr);\n\tios::sync_with_stdio(false);\n\t*/\n\tint kkt = 89;\n\twhile (kkt) {\n\t\tll M, T, P, R; scanf(\"%lld %lld %lld %lld\", &M, &T, &P, &R); if (M == 0 && T == 0 && P == 0 && R == 0) break;\n\t\tvector<SCORE> score(T); for (int i = 0; i < T; i++) score[i].id = i + 1;\n\t\tvector<vector<ll>> miss(T, vector<ll>(P));\n\t\tfor (int i = 0; i < R; i++) {\n\t\t\tll m, t, p, j; scanf(\"%lld %lld %lld %lld\", &m, &t, &p, &j); t--; p--;\n\t\t\tif (j == 0) {\n\t\t\t\tscore[t].ac++;\n\t\t\t\tscore[t].pena += m + miss[t][p];\n\t\t\t}\n\t\t\telse {\n\t\t\t\tmiss[t][p] += 20;\n\t\t\t}\n\t\t}\n\t\tsort(score.begin(), score.end());\n\t\tfor (int i = 0; i < T; i++) {\n\t\t\tcout << score[i].id;\n\t\t\tif (i == T - 1) cout << \"\\n\";\n\t\t\telse {\n\t\t\t\tif (score[i] == score[i + 1]) cout << \"=\";\n\t\t\t\telse cout << \",\";\n\t\t\t}\n\t\t}\n\t}\n\treturn 0;\n\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<vector>\n#include<string>\n#include<algorithm>\t\n#include<map>\n#include<set>\n#include<utility>\n#include<cmath>\n#include<cstring>\n#include<queue>\n#include<stack>\n#include<cstdio>\n#include<sstream>\n#include<iomanip>\n#define loop(i,a,b) for(int i=a;i<b;i++) \n#define rep(i,a) loop(i,0,a)\n#define pb push_back\n#define mp make_pair\n#define all(in) in.begin(),in.end()\n#define shosu(x) fixed<<setprecision(x)\nusing namespace std;\n//kaewasuretyuui\ntypedef long long ll;\ntypedef pair<int,int> pii;\ntypedef vector<int> vi;\ntypedef vector<vi> vvi;\ntypedef vector<pii> vp;\ntypedef vector<vp> vvp;\ntypedef vector<string> vs;\ntypedef vector<double> vd;\ntypedef vector<vd> vvd;\ntypedef pair<int,pii> pip;\ntypedef vector<pip>vip;\nconst double PI=acos(-1);\nconst double EPS=1e-9;\nconst int inf=1e8;\nint main(){\n\tint T,team,pro,n;\n\twhile(cin>>T>>team>>pro>>n,T){\n\t\tvvi co(team,vi(pro));\n\t\tvip in(team);\n\t\trep(i,team)in[i].second.second=-i-1;\n\t\trep(i,n){\n\t\t\tint a,b,c,d;\n\t\t\tcin>>a>>b>>c>>d;\n\t\t\tif(d){\n\t\t\t\tco[b-1][c-1]++;\n\t\t\t}else{\n\t\t\t\tin[b-1].first--;\n\t\t\t\tin[b-1].second.first+=a+20*co[b-1][c-1];\n\t\t\t}\n\t\t}\n\t\tsort(all(in));\n//\t\trep(i,team)cout<<in[i].first<<\" \"<<in[i].second.first<<\" \"<<in[i].second.second<<endl;\n\t\trep(i,team-1)cout<<-in[i].second.second<<(in[i].first==in[i+1].first&&in[i].second.first==in[i+1].second.first?\"=\":\",\");\n\t\tcout<<-in[team-1].second.second<<endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <sstream>\n#include <fstream>\n#include <algorithm>\n#include <string>\n#include <stack>\n#include <queue>\n#include <map>\n#include <list>\n#include <vector>\n#include <cstdio>\n#include <cmath>\n#include <cstdlib>\n#include <climits>\nusing namespace std;\n\nstruct score {\n\tint teamNum;\n\tint accepted;\n\tint time;\n\tvector<int> miss;\n\tbool operator==(score s) const {\n\t\treturn this->accepted == s.accepted && this->time == s.time;\n\t};\n\tbool operator<(score s) const {\n\t\treturn this->accepted != s.accepted ? this->accepted > s.accepted : (this->time != s.time ? this->time < s.time : this->teamNum > s.teamNum);\n\t};\n};\n\nint main() {\n\twhile(1){\n\t\tint M, T, P, R;\n\t\tcin >> M >> T >> P >> R;\n\t\t\n\t\tif(!M && !T && !P && !R) break;\n\t\t\n\t\tscore *sc = new score[1+T];\n\t\tfor(int i = 1; i <= T; i++){\n\t\t\tsc[i].teamNum = i;\n\t\t}\n\t\tfor(int i = 0; i < R; i++){\n\t\t\tint m, t, p, r;\n\t\t\tcin >> m >> t >> p >> r;\n\t\t\t\n\t\t\tif(r){\n\t\t\t\tsc[t].miss.push_back(p);\n\t\t\t}else{\n\t\t\t\tsc[t].accepted++;\n\t\t\t\tsc[t].time += m + 20 * count(sc[t].miss.begin(), sc[t].miss.end(), p);\n\t\t\t}\n\t\t}\n\t\t\n\t\tsort(&sc[1], &sc[1+T]);\n\t\tfor(int i = 1; i <= T; i++){\n\t\t\tcout << sc[i].teamNum << (i==T ? '\\n' : (sc[i]==sc[i+1] ? '=' : ','));\n\t\t}\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <cstdlib>\n#include <cstring>\n#include <climits>\n#include <cassert>\n#include <iostream>\n#include <iomanip>\n#include <sstream>\n#include <algorithm>\n#include <numeric>\n#include <complex>\n#include <stack>\n#include <queue>\n#include <list>\n#include <set>\n#include <map>\n#include <unordered_set>\n#include <unordered_map>\n#include <bitset>\n#include <functional>\n#include <iterator>\n\nusing namespace std;\n\n#define dump(n) cout<<\"# \"<<#n<<'='<<(n)<<endl\n#define repi(i,a,b) for(int i=int(a);i<int(b);i++)\n#define peri(i,a,b) for(int i=int(b);i-->int(a);)\n#define rep(i,n) repi(i,0,n)\n#define per(i,n) peri(i,0,n)\n#define foreach(i,c) for(auto i=(c).begin();i!=(c).end();++i)\n#define all(c) begin(c),end(c)\n#define mp make_pair\n\ntypedef unsigned int uint;\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef vector<int> vi;\ntypedef vector<vi> vvi;\ntypedef vector<ll> vl;\ntypedef vector<vl> vvl;\ntypedef vector<double> vd;\ntypedef vector<vd> vvd;\ntypedef vector<string> vs;\ntypedef pair<int,int> pii;\n\nconst int INFTY=1<<29;\nconst double EPS=1e-9;\n\ntemplate<typename T1,typename T2>\nostream& operator<<(ostream& os,const pair<T1,T2>& p){\n\treturn os<<'('<<p.first<<','<<p.second<<')';\n}\ntemplate<typename T>\nostream& operator<<(ostream& os,const vector<T>& a){\n\tos<<'[';\n\trep(i,a.size()) os<<(i?\" \":\"\")<<a[i];\n\treturn os<<']';\n}\n\nint main()\n{\n\tfor(int M,T,P,R;cin>>M>>T>>P>>R,M|T|P|R;){\n\t\tvector<pii> res(T); // solved,penalty\n\t\tvvi cnt(T,vi(P));\n\t\trep(i,R){\n\t\t\tint m,t,p,j; cin>>m>>t>>p>>j; t--,p--;\n\t\t\tif(j==0){\n\t\t\t\tres[t].first++;\n\t\t\t\tres[t].second-=m+20*cnt[t][p];\n\t\t\t}\n\t\t\telse\n\t\t\t\tcnt[t][p]++;\n\t\t}\n\t\tvi is(T); iota(all(is),0); reverse(all(is));\n\t\tstable_sort(all(is),[&](int i,int j){return res[i]>res[j];});\n\t\tcout<<is[0]+1;\n\t\trepi(i,1,T)\n\t\t\tcout<<(res[is[i]]==res[is[i-1]]?'=':',')<<is[i]+1;\n\t\tcout<<endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\n#define ALL(a) (a).begin(), (a).end()\n#define ll long long\n#define INF (int)1e7\nusing namespace std;\n\nstruct S{\n    int p,t,i;\n};\n\nbool cmp(const S &left, const S &right){\n    return left.p == right.p ? left.t == right.t ? left.i > right.i : left.t < right.t : left.p > right.p;\n}\nbool eq(const S &l, const S &r){\n    return l.p == r.p && l.t == r.t;\n}\n\n\nsigned main(){\n    while(true){\n        int M,T,P,R; cin >> M >> T >> P >> R;\n        if(M == 0)break;\n        vector<S> s(T);\n        vector<vector<int> > c(T,vector<int>(P,0));\n        for(int i = 0; i < T; i++){\n            S temp = {0, 0, i+1};\n            s[i] = temp;\n        }\n\n        for(int i = 0; i < R; i++){\n            int m,t,p,j;\n            t--;\n            cin >> m >> t >> p >> j;\n            if(j == 0){\n                if(c[t-1][p-1] != 1){\n                    s[t-1].p++;\n                    s[t-1].t += m+c[t-1][p-1];\n                    c[t-1][p-1] = 1;\n                }\n            }\n            else{\n                c[t-1][p-1] += 20;\n            }\n        }\n        sort(ALL(s),cmp);\n        cout << s[0].i;// << \":\" << s[0].p << \":\" << s[0].t;\n        for(int i = 1; i < T; i++){\n            if(eq(s[i-1],s[i])){\n                cout << \"=\";\n            }\n            else{\n                cout << \",\";\n            }\n            cout << s[i].i;// << \":\" << s[i].p << \":\" << s[i].t;\n        }\n        cout << endl;\n    }\n                \n\n\n    return 0;\n}\n\n\n"
  },
  {
    "language": "C++",
    "code": "\n//http://judge.u-aizu.ac.jp/onlinejudge/description.jsp?id=1187&lang=jp\n\n#include<iostream>\n#include<map>\n#include<vector>\n#include<algorithm>\n#include<cmath>\n#include<climits>\n#include<ctime>\n#include<cstring>\n#include<numeric>\n\n#define ALL(v) (v).begin(),(v).end()\n#define REP(i,p,n) for(int i=p;i<(int)(n);++i)\n#define rep(i,n) REP(i,0,n)\n#define dump(a) (cerr << #a << \"=\" << (a) << endl)\n#define DUMP(list) cout << \"{ \"; for(auto nth : list){ cout << nth << \" \"; } cout << \"}\" << endl;\n\nusing namespace std;\n\nstruct Team \n{\n\tint id;\n\tint AC;\n\tint time;\n\tvector<int> WA;\n\tTeam(int ID,int P):id(ID),AC(0),time(0),WA(P+1,0){}\n\n\tvoid accepted(int m, int p){\n\t\tAC += 1;\n\t\ttime += (m + 20*WA[p]);\n\t}\n\n\tvoid wrongAnswer(int p){\n\t\tWA[p] += 1;\n\t}\n\n\tbool operator<( const Team& right ) const \n\t{\n\t\tif(AC == right.AC)\n\t\t{\n\t\t\tif(time == right.time){\n\t\t\t\treturn id > right.id;\n\t\t\t}else{\n\t\t\t\treturn time < right.time;\n\t\t\t}\n\t\t}\n\t\telse{\n\t\t\treturn AC > right.AC;\n\t\t}\n\t}\n};\n\n\nint main()\n{\n\tint M,T,P,R;\n\tint m,t,p,j;\n\twhile(true)\n\t{\n\t\tcin >> M >> T >> P >> R;\n\t\tif( !M && !T && !P && !R ){ break; }\n\t\tvector<Team> teams;\n\t\trep(i,T){\n\t\t\tteams.push_back(Team(i+1,P));\n\t\t}\n\n\t\trep(nth,R)\n\t\t{\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tif(j==0){\n\t\t\t\tteams[--t].accepted(m,p);\n\t\t\t}else{\n\t\t\t\tteams[--t].wrongAnswer(p);\n\t\t\t}\n\t\t}\n\n\t\tsort(ALL(teams));\n\t\t\n\t\trep(i,T){\n\t\t\tif(i!=0){\n\t\t\t\tchar sep=',';\n\t\t\t\tTeam prev = teams[i-1];\n\t\t\t\tif(teams[i].AC==prev.AC && teams[i].time==prev.time){ sep='='; }\n\t\t\t\tcout << sep;\n\t\t\t}\n\t\t\tcout << teams[i].id;\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstdio>\n#include <iomanip>\n#include <vector>\n#include <map>\n#include <set>\n#include <queue>\n#include <bitset>\n#include <stack>\n#include <utility>\n#include <numeric>\n#include <algorithm>\n#include <functional>\n#include <cctype>\n#include <complex>\n#include <string>\n#include <sstream>\n#include <fstream>\n#include <cassert>\nusing namespace std;\n\n//common\ntypedef long long i64,ll;\n\n#define BR \"\\n\"\n#define ALL(c) (c).begin(),(c).end()\n#define REP(i,n) for(int i=0;i<(int)(n);++i)\n#define FOR(i,l,r) for(int i=(l);i<(int)(r);++i)\n#define EACH(it,o) for(auto it = (o).begin(); it != (o).end(); ++it)\n#define IN(l,v,r) ((l)<=(v) && (v)<(r))\n\n//debug\n#ifdef NDEBUG\n#define DUMP(x)\n#define DUMPLN(x)\n#define DEBUG(x)\n#define DEBUGLN(x)\n#define LINE()\n#define LINELN()\n#define CHECK(exp,act)\n#define STOP(e)\n#else\n#define DUMP(x)  cerr << #x << \" = \" << (x)\n#define DUMPLN(x)  DUMP(x) <<endl\n#define DEBUG(x) DUMP(x) << LINE() << \" \" << __FILE__\n#define DEBUGLN(x) DEBUG(x)<<endl\n#define LINE()    cerr<< \" (L\" << __LINE__ << \")\"\n#define LINELN()    LINE()<<endl\n#define CHECK(exp,act)  if(exp!=act){DUMPLN(exp);DEBUGLN(act);}\n#define STOP(e)  CHECK(e,true);if(!(e)) exit(1);\n#endif\n\ntemplate<class T> inline string toString(const vector<T>& x) {\n\tstringstream ss;\n\tREP(i,x.size()){\n\t\tif(i!=0)ss<<\" \";\n\t\tss<< x[i];\n\t}\n\treturn ss.str();\n}\n\ntemplate<class T> inline string toString(const vector<vector<T> >& map) {\n\tstringstream ss;\n\tREP(i,map.size()){\n\t\tif(i!=0)ss<<BR;\n\t\tss<< toString(map[i]);\n\t}\n\treturn ss.str();\n}\ntemplate<class K,class V>  string toString(map<K,V>& x) {\n\tstring res;stringstream ss;\n\tfor(auto& p:x)ss<< p.first<<\":\" << p.second<<\" \";\n\treturn ss.str();\n}\n\nstring BITtoString(int bit){\n    stringstream ss;\n    while(bit!=0){ss<<(bit%2);bit/=2;}\n    string res=ss.str();reverse(ALL(res));\n    return res;\n}\n\ntemplate<typename T,typename V> inline T pmod(T v,V MOD){\n\treturn (v%MOD+MOD)%MOD;\n}\n\n\nint M,T,P,R;\nclass Team{\npublic:\n\tint id;int sc;\n\tvector<int> wts;\n\tint time;\n\tTeam(int id,int sc,int time):id(id),sc(sc),time(time){\n\t\twts=vector<int>(P);\n\t}\n\n\tbool operator < (const Team& r) const{\n\t\tif(sc!=r.sc)return sc<r.sc;\n\t\telse if(time!=r.time)return time>r.time;\n\t\treturn id<r.id;\n\t}\n\n\tbool operator > (const Team& r) const{\n\t\tif(sc!=r.sc)return sc>r.sc;\n\t\telse if(time!=r.time)return time<r.time;\n\t\treturn id>r.id;\n\t}\n};\n\nclass Main{\npublic:\n\t\n\tvector<int> ms,ts,ps,js;\n\n\tbool input(){\n\t\tcin >> M >> T >> P >> R;if(M==0)return false;\n\n\t\tms=vector<int>(R);ts=vector<int>(R);\n\t\tps=vector<int>(R);js=vector<int>(R);\n\n\t\tREP(i,R){\n\t\t\tcin >> ms[i] >> ts[i] >> ps[i] >> js[i];ts[i]--;ps[i]--;\n\t\t}\n\t\treturn true;\n\t}\n\n\tvoid run(){\n\n\t\twhile(input()){\n\t\t\tvector<Team> teams;  \n\t\t\tREP(i,T)teams.push_back(Team(i,0,0));\n\t\t\t\n\t\t\tREP(i,R){\n\t\t\t\tTeam& t=teams[ts[i]];\n\t\t\t\tif(js[i]==0){\n\t\t\t\t\tt.sc++;\n\t\t\t\t\tt.time+=ms[i];\n\t\t\t\t\tt.time+=t.wts[ps[i]];\n\t\t\t\t}else{\n\t\t\t\t\tt.wts[ps[i]]+=20;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//REP(i,T)teams[i].time/=60;\n\n\t\t\tsort(ALL(teams),greater<Team>());\n\t\t\tint psc=-1,ptime=-1;\n\t\t\tstringstream res;\n\t\t\tREP(i,T){\n\t\t\t\tif(i!=0){\n\t\t\t\t\tif(teams[i].sc==psc && teams[i].time==ptime){\n\t\t\t\t\t\tres<<\"=\";\n\t\t\t\t\t}else{\n\t\t\t\t\t\tres<<\",\";\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tres<<teams[i].id+1;\n\t\t\t\tpsc=teams[i].sc;\n\t\t\t\tptime=teams[i].time;\n\t\t\t}\n\t\t\tcout << res.str()<<endl;\n\t\t}\n\t\t\n\t}\n};\n\n int main(){\n\t//ios::sync_with_stdio(false);\n \tMain().run();\n \treturn 0;\n }"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#define N 2002\nusing namespace std;\nstruct team{\n  int tnum;\n  int correct;\n  int time;\n};\nint main(){\n  int m,t,p,r,im[N],it[N],ip[N],ij[N],incorrect,i,j;\n  struct team data[51];\n  while(1){\n    cin >> m >> t >> p >> r;\n    if(m==0&&t==0&&p==0&&r==0) break;\n    for(i=0;i<r;i++) cin >> im[i] >> it[i] >> ip[i] >> ij[i];\n    for(i=1;i<=t;i++){\n      data[i].tnum=i;\n      data[i].correct=0;\n      data[i].time=0;\n    }\n    for(i=0;i<r;i++){\n      if(ij[i]==0){\n\tdata[it[i]].correct++;\n      \tincorrect=0;\n\tfor(j=0;j<i;j++){\n\t  if(it[i]==it[j]&&ip[i]==ip[j]) incorrect++;\n\t}\n\tdata[it[i]].time=data[it[i]].time+incorrect*20+im[i];\n      }\n    }\n    // for(i=1;i<=t;i++) cout << \"team=\" << i << \"time=\" << data[i].time << endl;\n    for(i=0;i<=t;i++){\n      for(j=2;j<=t;j++){\n\tif(data[j].tnum>data[j-1].tnum) swap(data[j],data[j-1]);\n      }\n    }\n    for(i=0;i<=t;i++){\n      for(j=2;j<=t;j++){\n\tif(data[j].time<data[j-1].time) swap(data[j],data[j-1]);\n      }\n    }\n    for(i=0;i<=t;i++){\n      for(j=2;j<=t;j++){\n\tif(data[j].correct>data[j-1].correct) swap(data[j],data[j-1]);\n      }\n    }\n    for(i=1;i<t;i++){\n      cout << data[i].tnum;\n      if(data[i].correct==data[i+1].correct&&data[i].time==data[i+1].time)\n\tcout << '=';\n      else cout << ',';\n      if(i==t-1) cout << data[i+1].tnum;\n    }\n    cout << endl;\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\nusing namespace std;\n\nint main(){\n while(true){\n  int M, T, P, R;\n  cin >> M >> T >> P >> R;\n\n  if(M==0 && T==0 && P==0 && R==0) break;\n\n  int CP[T],  TT[T],  PT[T][P]; //正解数、時間計、ペナルティ\n  for(int i=0; i<T; i++){\n   CP[i] = TT[i] = 0;\n   for(int j=0; j<P; j++){\n    PT[i][j] = 0;\n   }\n  }\n\n  for(int i=0; i<R; i++){ //各チームの正解数、時間計を求める\n   int m, t, p, j;\n   cin >> m >> t >> p >> j;\n   \n   if(j==0){ //正解\n    CP[t-1]++;\n    TT[t-1] += (m+PT[t-1][p-1]);\n   }else{ //不正解\n    PT[t-1][p-1] += 20;\n   }\n  }\n\n   int t_now, t_pre = -1; //今のチーム、1つ前のチーム\n   bool flag[50]; //処理済みフラグ\n   for(int i=0; i<T; i++){\n    flag[i] = false;\n   }\n   \n   for(int i=0; i<T; i++){\n    t_now = -1;\n    for(int j=0; j<T; j++){ //今のチームを求める\n     if(flag[j]) continue;\n     if(t_now==-1){\n      t_now = j;\n     }else{\n      if(CP[j]>CP[t_now] || (CP[j]==CP[t_now] && TT[j]<=TT[t_now])){\n       t_now = j;\n      }\n     }\n    }\n\n    if(t_pre!=-1){\n     if(CP[t_now]==CP[t_pre] && TT[t_now]==TT[t_pre]){\n      cout << '=';\n     }else{\n      cout << ',';\n     }\n    }\n    cout<<t_now+1;\n\n    flag[t_now] = true;\n    t_pre = t_now;\n   }\n   cout << endl;\n  }\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n\nusing namespace std;\n\nstruct Team{\n\tint score;\n\tint time;\n\tint team;\n\t//各問題の間違えた回数\n\tvector<int> wrong;\n\tTeam(){\n\t\tscore = time = team = 0;\n\t\twrong.assign(11,0);\n\t}\n\n\tbool operator==(const Team& rhs) const{\n\t\treturn score == rhs.score && time == rhs.time;\n\t}\n};\n\n\n\t//　順位の降順でソート\n\tbool operator<(const Team& lhs, const Team& rhs){\n\t\treturn lhs.score > rhs.score || (lhs.score == rhs.score && \n\t\t\t(lhs.time < rhs.time ||\n\t\t\t(lhs.time == rhs.time && lhs.team > rhs.team)));\n\t}\n\nint main(){\n\tint M, T, P, R;\n\twhile(cin>>M>>T>>P>>R,M){\n\t\tvector<Team> ts(T);\n\t\tfor(int i=0;i<T;++i) ts[i].team = i+1;\n\t\tfor(int i=0;i<R;++i){\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tTeam& tm = ts[t-1];\n\t\t\tif(j == 0){\n\t\t\t\ttm.score++;\n\t\t\t\ttm.time += m + tm.wrong[p] * 20;\n\t\t\t}\n\t\t\telse\n\t\t\t\ttm.wrong[p]++;\n\t\t}\n\t\tfor(int i=0;i<T;++i)\n\t\t\tfor(int j=0;j<T;++j)\n\t\t\t\tif(ts[i] < ts[j])\n\t\t\t\t\tswap(ts[i],ts[j]);\n\n\t\tfor(int i=0;i+1<T;++i){\n\t\t\tcout << ts[i].team << (ts[i]==ts[i+1]?\"=\":\",\");\t\t\t\n\t\t}\n\t\tcout << ts[T-1].team << endl;\n\t}\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nint main () {\n  int m, t, p, r;\n  while(true) {\n    cin >> m >> t >> p >> r;\n    if (m == 0) break;\n    vector<vector<int>> b(t);\n    vector<vector<int>> c(t);\n    for (int i = 0; i < t; i++) {\n      b[i].resize(p);\n      c[i].resize(p);\n\n      for (int j = 0; j < p; j++) b[i][j] = 10000000;\n    }\n    for (int i = 0; i < r; i++) {\n      int m2, t, p, j;\n      cin >> m2 >> t >> p >> j;\n      if (j == 0 && m2 <= m) {\n        b[t - 1][p - 1] = min(b[t - 1][p - 1], m2);\n      } else {\n        if (b[t - 1][p - 1] == 10000000)\n          c[t - 1][p - 1]++;\n      }\n    }\n    vector<pair<int, int>> ps(t);\n    for (int i = 0; i < t; i++) {\n      ps[i].first = i;\n      for (int j = 0; j < p; j++) {\n        ps[i].second += b[i][j];\n        if (b[i][j] < 1000) ps[i].second += 20 * c[i][j];\n      }\n    }\n    sort(ps.begin(), ps.end(), [](const pair<int, int> &l, const pair<int, int> &r) {\n      if (l.second == r.second) return l.first > r.first;\n      return l.second < r.second;\n    });\n    cout << ps[0].first + 1;\n    for (int i = 1; i < t; i++) {\n      if (ps[i - 1].second == ps[i].second) cout << \"=\";\n      else cout << \",\";\n      cout << ps[i].first + 1;\n    }\n    cout << endl;\n  }\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<vector>\n#include<algorithm>\n#include<string>\nusing namespace std;\nint m,t,p,r;\nclass team{\npublic:\nint id;\nint ac;\nint time[200];\nbool ok[200];\n};\n\nint or(team a,team b){//aのほうが強ければ1,bなら0,同じなら2\nif(a.ac>b.ac)return 1;\nelse if(a.ac<b.ac)return 0;\nint at=0,bt=0;\nfor(int i=0;i<=p;i++){\nif(a.ok[i]==true)at+=a.time[i];\nif(b.ok[i]==true)bt+=b.time[i];\n}\nif(at<bt)return 1;\nelse if(at>bt)return 0;\nelse return 2;\n}\nint main(){\n\n\twhile(true){\n\tcin>>m>>t>>p>>r;\n\tif(m+t+p+r==0)break;\n\tvector<team>ta(0);\n\tta.resize(200);\n\n\tfor(int i=0;i<=t;i++)for(int j=0;j<200;j++)ta[i].time[j]=0,ta[i].ok[j]=0;\n\tfor(int i=0;i<=t;i++)ta[i].id=i,ta[i].ac=0;\n\tfor(int i=0;i<r;i++){\n\tint a,b,c,d;\n\tcin>>a>>b>>c>>d;//a:経過時間:bチーム番号c:問題番号j:0奈良正解それ以外不正解\n\tif(d==0){\n\tta[b].time[c]+=a;\n\tta[b].ac++;\n\tta[b].ok[c]=true;\n\t}\n\telse {\n\tta[b].time[c]+=20;\n\t}\n\t}\n\tta.erase(ta.begin());\n\tfor(int i=0;i<t;i++){\n\tfor(int j=0;j<t;j++){\n\tif(or(ta[i],ta[j])==1)swap(ta[i],ta[j]);\n\tif(or(ta[i],ta[j])==2&&ta[i].id>ta[j].id)swap(ta[i],ta[j]);\n\t}\n\t}\n\tfor(int i=0;i<t-1;i++){\n\tif(or(ta[i],ta[i+1])!=2)cout<<ta[i].id<<\",\";\n\telse cout<<ta[i].id<<\"=\";\n\t}\n\tcout<<ta[t-1].id<<endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n\nusing namespace std;\n\nstruct Score{\n\tint team_num;\n\tint ac=0;\n\tint time=0;\n\tint miss_tmp[20]={0};\n};\n\nbool asc(const Score& left, const Score& right) {\n\treturn left.ac == right.ac ? (left.time == right.time ?  left.team_num > right.team_num : left.time < right.time) :\n\t\t   left.ac > right.ac;\n}\n\nint main(){\n\twhile(1){\n\t\tint M, T, P, R; cin>>M>>T>>P>>R;\n\t\tif(!M && !T && !P && !R) break;\n\t\tvector <Score> score(T);\n\t\tfor(int i=0; i<T; i++) score[i].team_num = i;\n\t\tint m, t, p, j;\n\t\tfor(int i=0; i<R; i++){\n\t\t\tcin>>m>>t>>p>>j;\n\t\t\tt=t-1;//0オリジン\n\t\t\tif(j == 0){\n\t\t\t\tscore[t].ac++;\n\t\t\t\tscore[t].time += m+(score[t].miss_tmp[p]*20);\n\t\t\t} else{\n\t\t\t\tscore[t].miss_tmp[p]++;\n\t\t\t}\n\t\t}\n\t\tsort(score.begin(), score.end(), asc);\n\t\tfor(int i=0; i<T; i++){\n\t\t\tcout << score[i].team_num+1;\n\t\t\tif(i!=T-1){\n\t\t\t\tif(score[i].ac == score[i+1].ac && score[i].time == score[i+1].time) cout << \"=\";\n\t\t\t\telse cout << \",\";\n\t\t\t}\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n#define REP(i,n) for(int i=0;i<(n);i++)\nusing namespace std;\n\nstruct teamscore{\n  int team, correct, time;\n  int wrong[10];\n};\n\nbool comp(const teamscore &a, const teamscore &b)\n{\n  if(a.correct != b.correct)\n    return a.correct > b.correct;\n  else if(a.time != b.time)\n    return a.time < b.time;\n  else\n    return a.team > b.team;\n}\n\nint main()\n{\n  while(1){\n    int M,T,P,R;\n    cin >> M >> T >> P >> R;\n    if(M == 0 && T == 0 && P == 0 && R == 0) break;\n    vector<teamscore> v(T);\n    REP(i,T){\n      v[i].team = i+1;\n      v[i].correct = v[i].time = 0;\n      REP(j,10)\n        v[i].wrong[j] = 0;\n    }\n    REP(i,R){\n      int m, t, p, j;\n      cin >> m >> t >> p >> j;\n      if(j != 0){\n        v[t-1].wrong[p-1]++;\n      }else{\n        v[t-1].time += v[t-1].wrong[p-1]*20 + m;\n        v[t-1].correct++;\n      }\n    }\n    sort(v.begin(), v.end(), comp);\n    cout << v[0].team;\n    for(int i = 1; i < T; i++){\n      if(v[i].correct == v[i-1].correct && v[i].time == v[i-1].time)\n        cout << \"=\" << v[i].team;\n      else\n        cout << \",\" << v[i].team;\n    }\n    cout << endl;\n  }\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <iomanip>\n#include <sstream>\n#include <stdio.h>\n#include <list>\n#include <vector>\n#include <stack>\n#include <queue>\n#include <map>\n#include <set>\n#include <algorithm>\n#include <math.h>\n#include <utility>\n#include <string>\n#include <ctype.h>\n#include <cstring>\n#include <cstdio>\n#include <sstream>\n#include <functional>\n\nusing namespace std;\n\n#define FOR(i,k,n) for(int i = (k); i < (n); i++)\n#define REP(i,n) FOR(i,0,n)\n#define INF 114514810\n#define ll long long\n#define SORT(v) sort((v).begin(),(v).end())\n//#define scanf scanf_s\n\nint ice[100005];\n\nstruct record\n{\n\tint ac, pe, t;\n};\nbool comp(const record&  r1, const record& r2)\n{\n\tif (r1.ac != r2.ac) return r1.ac > r2.ac;\n\telse if(r1.pe!=r2.pe) return r1.pe < r2.pe;\n\telse return r1.t>r2.t;\n}\n\nint main()\n{\n\tint m, t, p, r;\n\twhile (cin >> m >> t >> p >> r, (m || t || p || r))\n\t{\n\t\tint rec[55][11][2] = {};\n\t\tbool solved[55][11] = {};\n\t\tint a, b, c, d;\n\t\tREP(i, r)\n\t\t{\n\t\t\tcin >> a >> b >> c >> d;\n\t\t\tif (d == 0)\n\t\t\t{\n\t\t\t\trec[b][c][0] = rec[b][c][1] + a;\n\t\t\t\tsolved[b][c] = true;\n\t\t\t}\n\t\t\telse rec[b][c][1] += 20;\n\t\t}\n\n\t\tvector<record> v;\n\t\tFOR(i,1, t+1)\n\t\t{\n\t\t\tint ac = 0;\n\t\t\tint pe = 0;\n\t\t\tFOR(j,1, p+1)\n\t\t\t{\n\t\t\t\tif (solved[i][j] == true) ac++;\n\t\t\t\tpe += rec[i][j][0];\n\t\t\t}\n\t\t\trecord r = { ac, pe, i };\n\t\t\tv.push_back(r);\n\t\t}\n\n\t\tsort(v.begin(), v.end(), comp);\n\t\t\n\t\tREP(i, v.size())\n\t\t{\n\t\t\tcout << v[i].t;\n\t\t\tif (i == v.size() - 1) cout << endl;\n\t\t\telse if (v[i].ac == v[i + 1].ac&&v[i].pe == v[i + 1].pe)cout << \"=\";\n\t\t\telse cout << \",\";\n\t\t}\n\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<sstream>\n#include<algorithm>\n#include<climits>\n#include<cmath>\n#include<cstdio>\n#include<cstdlib>\n#include<ctime>\n#include<cfloat>\n#include<functional>\n#include<map>\n#include<string>\n#include<cstring>\n#include<vector>\n#include<queue>\n#include<stack>\n#include<deque>\n#include<set>\n#include<bitset>\n#include<list>\n#include<numeric>\n#include<complex>\n\nusing namespace std;\n\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef pair<int, int> i_i;\ntypedef pair<long long, int> ll_i;\ntypedef pair<double, int> d_i;\ntypedef pair<long long, long long> ll_ll;\ntypedef pair<double, double> d_d;\ntypedef vector<int> Vint;\n\n#define PI 3.141592653589793238462643383279\n#define mod 1000000007LL\n#define rep(i, n) for(i = 0;i < n;++i)\n#define rep1(i, n) for(i = 1;i < n;++i)\n#define rep2d(i, j, n) for(i = 0;i < n;++i)for(j = i + 1;j < n;++j)\n#define per(i, n) for(i = n - 1;i > -1;--i)\n#define int(x) int x; scanf(\"%d\",&x)\n#define int2(x, y) int x, y; scanf(\"%d%d\",&x, &y)\n#define int3(x, y, z) int x, y, z; scanf(\"%d%d%d\",&x, &y, &z)\n#define scn(n, a) rep(i, n)cin >> a[i]\n#define sc2n(n, a, b) rep(i, n)cin >> a[i] >> b[i]\n#define pri(x) cout << x << \"\\n\"\n#define pri2(x, y) cout << x << \" \" << y << \"\\n\"\n#define pri3(x, y, z) cout << x << \" \" << y << \" \" << z << \"\\n\"\n#define pb push_back\n#define mp make_pair\n#define all(a) (a).begin(),(a).end()\n#define endl \"\\n\"\n#define kabe puts(\"---------------------------\")\n#define kara puts(\"\")\n#define debug(x) cout << \" --- \" << x << \"\\n\"\n#define debug2(x, y) cout << \" --- \" << x << \" \" << y << \"\\n\"\n#define debug3(x, y, z) cout << \" --- \" << x << \" \" << y << \" \" << z << \"\\n\"\n#define X first\n#define Y second\n#define eps 0.0001\n#define prid(x) printf(\"%.15lf\\n\", x)\n\nstruct result{\n  int id, ac, time;\n  Vint pena;\n  void use(int n){ pena.assign(n, 0); return; }\n};\n\nbool myc(result a, result b){\n  if(a.ac == b.ac && a.time == b.time)return a.id > b.id;\n  if(a.ac == b.ac)return a.time < b.time;\n  return a.ac > b.ac;\n}\nbool my(result a, result b){\n  return (a.ac == b.ac && a.time == b.time);\n}\n\n\nsigned main(void){\n  int i, j, k;\n  for(int testcase = 0;testcase < 1234567;testcase++){\n    int m, t, p, r;\n    cin >> m >> t >> p >> r;\n    if((m | t | p | r) == 0)break;\n\n    vector<result> team;\n    team.resize(t);\n    rep(i, t){\n      team[i].use(p); team[i].id = i + 1;\n    }\n\n    for(;r--;){\n      int x, y, z, v;\n      cin >> v >> x >> y >> z;\n      x--; y--;\n      if(z)team[x].pena[y]++;\n      else{\n        team[x].ac++;\n        team[x].time += v + team[x].pena[y] * 20;\n      }\n    }\n\n    sort(all(team), myc);\n    cout << team[0].id;\n    rep1(i, t){\n      if(my(team[i - 1], team[i]))printf(\"=%d\", team[i].id);\n      else printf(\",%d\", team[i].id);\n    }\n    kara;\n\n//*/\n\n//*/ break;\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<stdio.h>\n\nint main(){\n\nint M,T,P,R;\n\nwhile(1){\nscanf(\"%d%d%d%d\",&M,&T,&P,&R);\nif(M==0&&T==0&&P==0&&R==0)break;\n\nint n[51][11]={};int n2[51][11]={};\n\nint m,t,p,j;\nfor(int i=0;i<R;i++)\n{\nscanf(\"%d%d%d%d\",&m,&t,&p,&j);\nif(j==0){n[t][p]+=m;n2[t][p]=1;}\nelse{n[t][p]+=20;}\n}\nfor(int i=1;i<=T;i++)\nfor(int k=1;k<=P;k++)\n\tif(n2[i][k]==0){n[i][k]=0;}\n\n\nint N[51][3]={};\nfor(int i=1;i<=T;i++)\nfor(int k=1;k<=P;k++)\n{\nN[i][0]+=n[i][k];\nN[i][1]+=n2[i][k];\nN[i][2]=i;\n}\n\nfor(int i=1;i<=T;i++)\nfor(int k=T;k>i;k--)\nif(N[k][1]>N[k-1][1]){\nint t=N[k][1];N[k][1]=N[k-1][1];N[k-1][1]=t;\nint t2=N[k][0];N[k][0]=N[k-1][0];N[k-1][0]=t2;\nint t3=N[k][2];N[k][2]=N[k-1][2];N[k-1][2]=t3;\n}\nfor(int i=1;i<=T;i++)\nfor(int k=T;k>i;k--)\n\tif(N[k][1]==N[k-1][1]&&N[k][0]<N[k-1][0]){\n\t\tint t=N[k][1];N[k][1]=N[k-1][1];N[k-1][1]=t;\nint t2=N[k][0];N[k][0]=N[k-1][0];N[k-1][0]=t2;\nint t3=N[k][2];N[k][2]=N[k-1][2];N[k-1][2]=t3;\n\t}\n\n\nfor(int i=1;i<=T;i++)\nfor(int k=T;k>i;k--)\n\tif(N[k][1]==N[k-1][1]&&N[k][0]==N[k-1][0]&&N[k][2]>N[k-1][2]){\n\t\tint t3=N[k][2];N[k][2]=N[k-1][2];N[k-1][2]=t3;\n\t}\n\n\nfor(int i=1;i<=T;i++)\n{if(i>1){if(N[i][1]==N[i-1][1]&&N[i][0]==N[i-1][0])printf(\"=\");\nelse printf(\",\");}\n\nprintf(\"%d\",N[i][2]);\n}\nprintf(\"\\n\");\n}\nreturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\nbool cmp(pair<pair<int,int>,int> a, pair<pair<int,int>,int> b){\n  if(a.first.first==b.first.first){\n    if(a.first.second==b.first.second) return a.second > b.second;\n    return a.first.second < b.first.second;\n  }else return a.first.first > b.first.first;\n}\n\nint main(){\n  int m,t,p,r;\n  while(cin >> m >> t >> p >> r && (m || t || p || r)){\n    vector<vector<int> > unc(t,vector<int>(p,0));\n    vector<pair<int,int> > cntc(t,make_pair(0,0)),cost(t,make_pair(0,0));\n    for(int i=0;i<t;++i) { cntc[i].second=i; cost[i].second=i; }\n    for(int i=0;i<r;++i){\n      int mi,ti,pi,ji; cin >> mi >> ti >> pi >> ji;\n      if(ji==0) {\n\tcost[ti-1].first+=(mi + unc[ti-1][pi-1]*20);\n\tcntc[ti-1].first++;\n      } else unc[ti-1][pi-1]++;\n    }\n    vector<pair<pair<int,int>,int> > rank(t);\n    for(int i=0;i<t;++i) {\n      rank[i].first.first=cntc[i].first;\n      rank[i].first.second=cost[i].first;\n      rank[i].second=i + 1;\n    }\n    sort(rank.begin(),rank.end(),cmp);\n    cout << rank[0].second;\n    for(int i=1;i<t;++i){\n      if(rank[i-1].first.first==rank[i].first.first &&\n\t rank[i-1].first.second==rank[i].first.second)\n\tcout << \"=\";\n      else cout << \",\";\n      cout << rank[i].second;\n    }\n    cout << endl;\n  }\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <string>\n#include <map>\n#include <vector>\n#include <algorithm>\n#include <queue>\n#include <stack>\n#include <cstdio>\n#include <cmath>\n\nusing namespace std;\n\n#define REP(i,k,n) for(int i=k;i<n;i++)\n#define rep(i,n) for(int i=0;i<n;i++)\n\n\n#define all(v) v.begin(),v.end()\n#define rall(v) v.rbegin(),v.rend()\n#define INF 1<<30\n#define mp make_pair\n#define pb push_back\n\n#define fi first\n#define se second\n\n#define each(it,c) for(auto it=(c).begin();it!=(c).end();it++)\n\ntypedef vector<int> vi;\ntypedef vector<vi> vii;\ntypedef pair<int,int> pii;\n\ntypedef long long ll;\n\nclass team{\npublic:\n\tint id;\n\tint clear;\n\tvi fail;\n\tint time;\n\tteam(){\n\t\tid=0;\n\t\tclear=0;\n\t\tfail = vi(10,0);\n\t\ttime=0;\n\t}\n};\n\nint main(){\n\twhile(1){\n\t\tint M,T,P,R;\n\t\tint m,t,p,j;\n\t\tvector<team> tev;\n\t\tvector<pii> ap; \n\t\tcin>>M>>T>>P>>R;\n\t\tif(M==0)break;\n\t\trep(i,T){\n\t\t\tteam te;\n\t\t\tte.id=i+1;\n\t\t\tte.clear=0;\n\t\t\tte.time=0;\n\t\t\ttev.pb(te);\n\t\t\t//????????§id??????????????°??????????????????clear,time???0??§?????????\n\t\t}\n\t\trep(i,R){\n\t\t\tcin>>m>>t>>p>>j;\n\t\t\tif(j==0){\n\t\t\t\tint time=m;\n\t\t\t\t//????????§?????£?§£??°????????????????????????????????£?§£??°??¨????????????????????????\n\t\t\t\ttime += tev[t-1].fail[p]*20;\n\t\t\t\ttev[t-1].clear++;\n\t\t\t\ttev[t-1].time+=time;\n\t\t\t}else{\n\t\t\t\t//????????§???????????????????????¨????????£?§£?????°?????????\n\t\t\t\ttev[t-1].fail[p]++;\n\t\t\t}\n\t\t}\n\t\trep(i,T){\n\t\t\tap.pb(mp(tev[i].clear*100000+(90000-tev[i].time),tev[i].id));\n\t\t}\n\t\tsort(rall(ap));\n\n\t\tcout<<ap[0].se;\n\t\tREP(i,1,T){\n\t\t\tif(ap[i-1].fi==ap[i].fi) cout<<\"=\";\n\t\t\telse cout<<\",\";\n\t\t\tcout<<ap[i].se;\n\t\t}\n\t\tcout<<endl;\n\t\t// rep(i,T){\n\t\t// \tcout<<\"debug clear:\"<<tev[i].clear<<\" time:\"<<tev[i].time;\n\t\t// \tcout<<endl;\n\t\t// \trep(j,P){\n\t\t// \t\tcout<<\" fail:\"<<tev[i].fail[j];\n\t\t// \t}\n\t\t// \tcout<<endl;\n\t\t// }\n\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <cstdlib>\n#include <iostream>\n#include <vector>\nusing namespace std;\n\nint M, T, P, R;\nconst int PENALTY = 20;\n\nstruct team {\n\tint ac, time, id;\n\tvector<int> wrong;\n\tteam(int id):ac(0), time(0), id(id), wrong(P, 0){}\n\n\tbool operator<(const team& t) const {\n\t\tif(ac != t.ac)\n\t\t\treturn ac < t.ac;\n\n\t\tif(time != t.time)\n\t\t\treturn time > t.time;\n\n\t\treturn id < t.id;\n\t}\n\n\tbool operator==(const team& t) const {\n\t\treturn ac == t.ac && time == t.time;\n\t}\n\n\tvoid accept(int p_id, int t) {\n\t\t++ac;\n\t\ttime += wrong[p_id] * PENALTY + t;\n\t}\n\n\tvoid wrong_answer(int p_id) {\n\t\t++wrong[p_id];\n\t}\n};\n\nint main() {\n\tcin.tie(0);\n\tios::sync_with_stdio(false);\n\n\twhile(cin >> M >> T >> P >> R, M) {\n\t\tvector<team> teams;\n\t\tteams.reserve(T);\n\n\t\tfor(int i = 1; i <= T; ++i) {\n\t\t\tteams.push_back(team(i));\n\t\t}\n\n\t\tfor(int i = 0; i < R; ++i) {\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >> j;\n\n\t\t\tif(j == 0) {\n\t\t\t\tteams[t - 1].accept(p - 1, m);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tteams[t - 1].wrong_answer(p - 1);\n\t\t\t}\n\t\t}\n\n\t\tsort(teams.rbegin(), teams.rend());\n\t\tfor(int i = 0; i < T; ++i) {\n\t\t\tcout << teams[i].id;\n\t\t\tif(i == T - 1) {\n\t\t\t\tcout << endl;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif(teams[i] == teams[i + 1])\n\t\t\t\t\tcout << '=';\n\t\t\t\telse\n\t\t\t\t\tcout << ',';\n\t\t\t}\n\t\t}\n\t}\n\n\treturn EXIT_SUCCESS;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n\nusing namespace std;\n\nint main() {\n    while(true) {\n        int M, T, P, R;\n        cin >> M >> T >> P >> R;\n\n        int m, t, p, j;\n        int result[T];\n        fill(result, result + T, 0);\n        int time[T];\n        fill(time, time + T, 0);\n        int failure[T];\n        fill(failure, failure + T, 0);\n        for (int submit = 0; submit < R; submit++) {\n            cin >> m >> t >> p >> j;\n            if (j == 0) {\n                result[t - 1] += 1;\n                time[t - 1] += m + failure[t - 1] * 20;\n            } else {\n                ++failure[t - 1];\n            }\n        }\n\n        bool done[T];\n        fill(done, done + T, false);\n        int prevPoint, prevTime;\n        for (int count = 0; count < T; count++) {\n            int maxPoint = -1;\n            int maxTeam = 0;\n            int minTime = 100000;\n            for (int i = T - 1; i >= 0; i--) {\n                if (done[i]) continue;\n                if (maxPoint < result[i]) {\n                    maxPoint = result[i];\n                    maxTeam = i + 1;\n                    minTime = time[i];\n                } else if (maxPoint == result[i]) {\n                    if (minTime > time[i]) {\n                        minTime = time[i];\n                        maxTeam = i + 1;\n                    }\n                }\n            }\n            minTime = time[maxTeam - 1];\n            if (count != 0) {\n                if (maxPoint == prevPoint && minTime == prevTime) cout << \"=\";\n                else cout << \",\";\n            }\n            cout << maxTeam;\n            done[maxTeam - 1] = true;\n            prevPoint = maxPoint;\n            prevTime = minTime;\n        }\n        cout << endl;\n    }\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n\nusing namespace std;\n\nclass Question{\npublic:\n    bool isAC;\n    int p;\n    Question() : isAC(false),p(0){}\n};\nclass Team{\npublic:\n    int ID;\n    int AC;\n    int ptime;\n    vector<Question> q;\n\n    Team() : ID(-1), q(vector<Question>(21)), ptime(0), AC(0) {}\n    Team(int id)\n        : ID(id), q(vector<Question>(21)) , ptime(0), AC(0)\n    {\n    }\n\n    void submit(int m,int p,int j){\n        if(j == 0){\n            q[p].p += m;\n            q[p].isAC = true;\n            AC++;\n            ptime += q[p].p;\n        }else{\n            q[p].p += 20;\n        }\n    }\n};\n\nbool operator==(const Team& a,const Team& b){\n    return a.AC == b.AC && a.ptime == b.ptime;\n}\nbool operator!=(const Team& a,const Team& b){\n    return !(a == b);\n}\n\n//M:テァツオツづ、ツコツ?ヲツ卍づゥツ鳴?\n//T:テ」ツδ?」ツδシテ」ツδ?ヲツ閉ー\n//P:テ・ツ閉湘ゥツ。ツ古ヲツ閉ー\n//R:テヲツ渉静・ツ?コテヲツ閉ー\nvoid solve(int M,int T,int P,int R){\n    vector<Team> team;\n    for(int i=1;i<=T;i++){\n        team.push_back(Team(i));\n    }\n    for(int i=0;i<R;i++){\n        int m,t,p,j;\n        cin >> m >> t >> p >> j;\n        team[t-1].submit(m,p,j);\n    }\n    std::sort(team.begin(),team.end(),\n            [](const Team& a,const Team& b)->bool{\n                if(a.AC < b.AC)\n                    return true;\n                if(a.AC > b.AC)\n                    return false;\n                if(a.ptime > b.ptime)\n                    return true;\n                return a.ID < b.ID;\n            }\n            );\n    std::reverse(team.begin(),team.end());\n    //for(auto t : team)\n    //{\n    //    cout << t.ID << \" :\" << t.AC << \" ,\" << t.ptime << endl;\n    //}\n    cout << team[0].ID;\n    for(int i=1;i<T;i++){\n        if(team[i-1] == team[i]){\n            cout << \"=\" << team[i].ID;\n        }else{\n            cout << \",\" << team[i].ID;\n        }\n    }\n    cout << endl;\n}\n\nint main(){\n    while(true){\n        int M,T,P,R;\n        cin >> M >> T >> P >> R;\n        if(!M&&!T&&!P&&!R)\n            return 0;\n        solve(M,T,P,R);\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nint main() {\n  for(int M, T, P, R; cin >> M >> T >> P >> R && (M|T|P|R);) {\n    vector<int> ac(T, 0), ti(T, 0);\n    set<pair<int,int> > vis;\n    for(int i = 0; i < R; ++i) {\n      int m, t, p, j;\n      cin >> m >> t >> p >> j;\n      if(!j && !vis.count(make_pair(t,p))) {\n        vis.insert(make_pair(t,p));\n        ++ac[t-1];\n        ti[t-1] += m;\n      }\n    }\n    vector<vector<int> > v;\n    for(int i = 0; i < T; ++i) {\n      vector<int> u(3);\n      u[0] = ac[i];\n      u[1] = -ti[i];\n      u[2] = i+1;\n      v.push_back(u);\n    }\n    sort(v.begin(), v.end(), greater<vector<int> >());\n    for(int i = 0; i < v.size(); ++i) {\n      if(i) {\n        cout << (v[i-1][0] == v[i][0] && v[i-1][1] == v[i][1] ? '=' : ',');\n      }\n      cout << v[i][2];\n    }\n    cout << endl;\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n#include <map>\nusing namespace std;\n\ntypedef vector<int> vi;\ntypedef vector<vi> vvi;\n\n#define loop(i,a,b) for(int i=(a); i<int(b); i++)\n#define rep(i,b) loop(i,0,b)\n\nint main(){\n    int M,T,P,R;\n    while(cin>>M>>T>>P>>R && M){\n        vector<vector<vector<pair<int,bool>>>> v(T,vector<vector<pair<int,bool>>>(P));\n        rep(i,R){\n            int m,t,p,j;\n            cin>>m>>t>>p>>j;\n            t--,p--;\n            v[t][p].push_back(make_pair(m,j==0));\n        }\n        // solved, time, id\n        vvi rank(T);\n        rep(i,T){\n            int s = 0;\n            int t = 0;\n            rep(j,P)if(v[i][j].size()!=0 && v[i][j].back().second){\n                s++;\n                t+=v[i][j].back().first;\n                t+=20*(v[i][j].size()-1);\n            }\n            rank[i] = vi{s,t,i+1};\n        }\n        sort(rank.begin(),rank.end(),[](const vi& a, const vi& b){\n                if(a[0]!=b[0]) return a[0]>b[0];\n                if(a[1]!=b[1]) return a[1]<b[1];\n                else return a[2]>b[2];\n            });\n        cout << rank[0][2];\n        rep(i,T-1){\n            if(rank[i+1][0]==rank[i][0] && rank[i+1][1]==rank[i][1]){\n                cout << \"=\";\n            }\n            else cout << \",\";\n            cout << rank[i+1][2];\n        }\n        cout << endl;\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <map>\n#include <algorithm>\nusing namespace std;\n\nstruct TEAM{\n  int correct;\n  int time;\n  int num;\n};\n\nbool compare(const TEAM &a,const TEAM &b){\n  if(a.correct==b.correct){\n  \tif(a.time==b.time) return a.num>b.num;\n  \telse return b.time>a.time;\n  }\n  else return a.correct>b.correct;\n}\n\n\nint main(void){\n  int M,T,P,R;\n  while(cin>>M>>T>>P>>R,M||T||P||R){\n    int m,t,p,j;\n    map<int,map<int,int> > ttime;\n    map<int,int> times,correct;\n    for(int i=0;i<R;++i){\n      cin>>m>>t>>p>>j;\n      if(j==0){\n        correct[t]++;\n        ttime[p][t]+=m;\n        times[t]+=ttime[p][t];\n      }else{\n        ttime[p][t]+=20;\n      }\n    }\n    vector<TEAM> tt(T);\n    for(int i=1;i<=T;++i){\n      tt[i-1].time=times[i];\n      tt[i-1].correct=correct[i];\n      tt[i-1].num=i;\n    }\n    sort(tt.begin(),tt.end(),compare);\n    int oc=tt[0].correct,ot=tt[0].time;\n    cout<<tt[0].num;\n    for(int i=1;i<T;++i){\n      if(oc==tt[i].correct,ot==tt[i].time)cout<<\"=\";\n      else cout<<\",\";\n      cout<<tt[i].num;\n      oc=tt[i].correct,ot=tt[i].time;\n    }\n    cout<<endl;\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <utility>\n#include <vector>\n#include <tuple>\n#include <algorithm>\n\nusing namespace std;\n\ntypedef tuple<int, int, int, int> RECORD;\n\nclass Team\n{\npublic:\n\tint _id;\n\tint _time;\n\tint _solveNum;\n\tvector<int> _probs;\n\n\tvoid init(int i, int M, int P, int R)\n\t{\n\t\t_id = i;\n\t\t_time = 0;\n\t\t_solveNum = 0;\n\t\t_probs.resize(P, 0);\n\t}\n\n\tvoid in(int time, int probNum, int b)\n\t{\n\t\tif (!b){\n\t\t\t_time += _probs[probNum] * 20 + time;\n\t\t\t_solveNum++;\n\t\t}\n\t\telse{\n\t\t\t++_probs[probNum];\n\t\t}\n\t}\n\n\tvoid dump() const\n\t{\n\t\tcout << \"id=\" << _id;\n\t\tcout << \"time=\" << _time;\n\t\tcout << \"solvenum=\" << _solveNum;\n\t}\n\n\tbool operator==(const Team& r)\n\t{\n\t\tif ( this->_solveNum == r._solveNum && this->_time == r._time ){\n//\t\t\tthis->dump();\n//\t\t\tr.dump();\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n};\n\nint main()\n{\n\twhile(1){\n\t\tint M, T, P, R;\n\n\t\tcin >> M >> T >> P >> R;\n\t\tif ( M+T+P+R == 0)\n\t\t\tbreak;\n//\t\tif ( R <= 0)\n//\t\t\tcontinue;\n\n\t\tvector<Team> teams(T);\n\t\tfor(int i=0; i<T; ++i){\n\t\t\tteams[i].init(i+1, M, P, R);\n\t\t}\n\n\t\tfor(int i=0; i<R; ++i){\n\t\t\tint time, teamNum, probNum, ret;\n\t\t\tcin >> time >> teamNum >> probNum >> ret;\n\t\t\tteams[teamNum-1].in(time, probNum, ret);\n\t\t}\n\n\t\tstable_sort(teams.begin(), teams.end(), [](Team t1, Team t2) -> bool{\n\t\t\tint a = t1._solveNum - t2._solveNum;\n\n\t\t\tif (a > 0)\n\t\t\t\treturn true;\n\t\t\tif (a < 0)\n\t\t\t\treturn false;\n\t\t\t\n\t\t\tif ( t1._time < t2._time)\n\t\t\t\treturn true;\n\n\t\t\tif (t1._id > t2._id)\n\t\t\t\treturn true;\n\n\t\t\treturn false;\n\t\t});\n\n\t\tauto it = teams.begin();\n\t\tcout << (*it)._id;\n\t\tfor(it += 1; it != teams.end(); ++it)\n\t\t{\n\t\t\tif ( *(it-1) == *(it) )\n\t\t\t\tcout << \"=\";\n\t\t\telse\n\t\t\t\tcout << \",\";\n\t\t\tcout << (*it)._id;\n\t\t}\n\t\tcout << endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include <stdio.h>\n#include <algorithm>\n#include <vector>\n#include <utility>\nusing namespace std;\ntypedef pair<int,int> pi;\ntypedef pair<pi,int> ppii;\n#define F first\n#define S second\n#define PB push_back\nconst int N=1e2+10;\nbool cmp(ppii a,ppii b){\n    if(a.F.F==b.F.F){\n        if(a.F.S==b.F.S)return a.S>b.S;\n        return a.F.S<b.F.S;\n    }\n    return a.F.F>b.F.F;\n}\nint main(){\n    int m,t,p,q,a,b,c,d,add[N][N];\n    ppii ans[N];\n    while(true){\n        scanf(\"%d%d%d%d\",&m,&t,&p,&q);\n        if(m==0&&q==0&&t==0&&p==0)return 0;\n        for(int i=1;i<=t;i++)for(int j=1;j<=q;j++)add[i][j]=0;\n        for(int i=1;i<=t;i++)ans[i]={{0,0},i};\n        while(q--){\n            scanf(\"%d%d%d%d\",&a,&b,&c,&d);\n            if(d==1)add[b][c]+=20;\n            else {\n                ans[b].F.S+=add[b][c]+a;\n                ans[b].F.F++;\n            }\n        }\n        sort(ans+1,ans+1+t,cmp);\n        printf(\"%d\",ans[1].S);\n        for(int i=2;i<=t;i++){\n            if(ans[i].F==ans[i-1].F)printf(\"=\");\n            else printf(\",\");\n            printf(\"%d\",ans[i].S);\n        }\n        printf(\"\\n\");    \n    }\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n#define rep(i,a,b) for (int i = (a); i < (b); i++)\n#define REP(i,n) rep(i,0,n)\n\nint main()\n{\n    int m,t,p,j;\n    while(cin>>m>>t>>p>>j,m||t||p||j){\n        vector<pair<pair<int,int>,int> >team(t);\n        REP(i,t)team[i].second=-i-1;\n        vector<vector<int> >pro(t,vector<int>(p,0));\n        int a,b,c,d;\n        REP(i,j){\n            cin>>a>>b>>c>>d;b--;c--;\n            if(d) pro[b][c]++;\n            else {\n                team[b].first.first--;\n                team[b].first.second+=a+pro[b][c]*20;\n            }\n            \n        }\n        sort(team.begin(),team.end());\n        cout<<-team[0].second;\n        rep(i,1,t) cout<<(team[i].first==team[i-1].first?\"=\":\",\")<<-team[i].second;cout<<endl;\n    }\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nint main() {\n  cin.tie(nullptr);\n  ios::sync_with_stdio(false);\n  int M, T, P, R;\n  while (cin >> M >> T >> P >> R, M) {\n    vector<vector<int>> time(T, vector<int>(P));\n    vector<vector<int>> ac(T, vector<int>(P));\n    while (R--) {\n      int m, t, p, j;\n      cin >> m >> t >> p >> j;\n      --t, --p;\n      if (j == 0) {\n        time[t][p] += m;\n        ac[t][p] = 1;\n      } else {\n        time[t][p] += 20;\n      }\n    }\n    vector<pair<int, int>> v(T);\n    for (int t = 0; t < T; ++t) {\n      int sum = 0;\n      for (int p = 0; p < P; ++p) {\n        if (ac[t][p]) {\n          sum += time[t][p];\n        }\n      }\n      v[t] = {accumulate(begin(ac[t]), end(ac[t]), 0), -sum};\n    }\n    vector<int> idx(T);\n    iota(rbegin(idx), rend(idx), 0);\n    stable_sort(begin(idx), end(idx), [&](int l, int r) {\n      return v[l] > v[r];\n    });\n    bool first = true;\n    for (int i = 0; i < T; ++i) {\n      int t = idx[i];\n      if (not exchange(first, false)) {\n        cout << (v[t] == v[idx[i - 1]] ? '=' : ',');\n      }\n      cout << t + 1;\n    }\n    cout << '\\n';\n  }\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#define N 2002\nusing namespace std;\nstruct team{\n  int tnum;\n  int correct;\n  int time;\n};\nint main(){\n  int m,t,p,r,im[N],it[N],ip[N],ij[N],incorrect,i,j;\n  struct team data[51];\n  while(1){\n    cin >> m >> t >> p >> r;\n    if(m==0&&t==0&&p==0&&r==0) break;\n    for(i=0;i<r;i++) cin >> im[i] >> it[i] >> ip[i] >> ij[i];\n    for(i=1;i<=t;i++){\n      data[i].tnum=i;\n      data[i].correct=0;\n      data[i].time=0;\n    }\n    for(i=0;i<r;i++){\n      if(ij[i]==0){\n\tdata[it[i]].correct++;\n      \tincorrect=0;\n\tfor(j=0;j<i;j++){\n\t  if(it[i]==it[j]&&ip[i]==ip[j]) incorrect++;\n\t}\n\tdata[it[i]].time=data[it[i]].time+incorrect*20+im[i];\n      }\n    }\n    for(i=0;i<=t;i++){\n      for(j=2;j<=t;j++){\n\tif(data[j].tnum>data[j-1].tnum) swap(data[j],data[j-1]);\n      }\n    }\n    for(i=0;i<=t;i++){\n      for(j=2;j<=t;j++){\n\tif(data[j].time<data[j-1].time) swap(data[j],data[j-1]);\n      }\n    }\n    for(i=0;i<=t;i++){\n      for(j=2;j<=t;j++){\n\tif(data[j].correct>data[j-1].correct) swap(data[j],data[j-1]);\n      }\n    }\n    for(i=1;i<t;i++){\n      cout << data[i].tnum;\n      if(data[i].correct==data[i+1].correct&&data[i].time==data[i+1].time)\n\tcout << '=';\n      else cout << ',';\n      if(i==t-1) cout << data[i+1].tnum;\n    }\n    cout << endl;\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\nint main()\n{\n\tint M, T, P, R;\n\n\twhile (scanf(\"%d %d %d %d\", &M, &T, &P, &R), M){\n\t\tint m, t, p, j;\n\t\t//score, penalty, team\n\t\tvector<pair<int, pair<int, int> > > table(T);\n\t\tint wa[64][16] = {0};\n\n\t\tfor (int i = 0; i < T; i++){\n\t\t\ttable[i].second.second = i + 1;\n\t\t}\n\n\t\tfor (int i = 0; i < R; i++){\n\t\t\tscanf(\"%d %d %d %d\", &m, &t, &p, &j);\n\n\t\t\tif (j){\n\t\t\t\twa[t - 1][p] += 20;\n\t\t\t}\n\t\t\telse {\n\t\t\t\ttable[t - 1].first++;\n\t\t\t\ttable[t - 1].second.first -= wa[t - 1][p];\n\t\t\t\ttable[t - 1].second.first -= m;\n\t\t\t}\n\t\t}\n\n\t\tsort(table.begin(), table.end(), greater<pair<int, pair<int, int> > >());\n\n\t\tfor (int i = 0; i < table.size(); i++){\n\t\t\tcout << table[i].second.second;\n\n\t\t\tif (table[i].second.first == table[i + 1].second.first && i < T - 1){\n\t\t\t\tcout << '=';\n\t\t\t}\n\t\t\telse if (i < T - 1){\n\t\t\t\tcout << ',';\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcout << endl;\n\t\t\t}\n\t\t}\n\t}\n\n\n\treturn (0);\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <bitset>\n#include <cctype>\n#include <complex>\n#include <cmath>\n#include <cstdio>\n#include <cstdlib>\n#include <cstring>\n#include <ctime>\n#include <deque>\n#include <functional>\n#include <iomanip>\n#include <iostream>\n#include <list>\n#include <map>\n#include <numeric>\n#include <queue>\n#include <set>\n#include <sstream>\n#include <stack>\n#include <string>\n#include <utility>\n#include <vector>\n\nusing namespace std;\n\ninline int toInt(string s) {int v; istringstream sin(s);sin>>v;return v;}\ntemplate<class T> inline string toString(T x) {ostringstream sout;sout<<x;return sout.str();}\ntemplate<class T> inline T sqr(T x) {return x*x;}\n\ntypedef vector<int> vi;\ntypedef vector<vi> vvi;\ntypedef vector<string> vs;\ntypedef pair<int, int> pii;\ntypedef long long ll;\n\n#define all(a)  (a).begin(),(a).end()\n#define rall(a) (a).rbegin(), (a).rend()\n#define pb push_back\n#define mp make_pair\n#define each(i,c) for(typeof((c).begin()) i=(c).begin(); i!=(c).end(); ++i)\n#define exist(s,e) ((s).find(e)!=(s).end())\n#define range(i,a,b) for(int i=(a);i<(b);++i)\n#define rep(i,n)  range(i,0,n)\n#define clr(a,b) memset((a), (b) ,sizeof(a))\n#define dump(x)  cerr << #x << \" = \" << (x) << endl;\n#define debug(x) cerr << #x << \" = \" << (x) << \" (L\" << __LINE__ << \")\" << \" \" << __FILE__ << endl;\n\n#define cn first\n#define pn second.first\n#define tn second.second\n\nconst double eps = 1e-10;\nconst double pi  = acos(-1.0);\nconst ll INF =1LL << 62;\nconst int inf =1 << 29;\n\nint main(void){\n    for(int m, t, p, r; cin >> m >> t >> p >> r, t;){\n        vector<vi> wc = vector<vi>(t, vi(p, 0));\n\n        vector< pair<int, pii> > res(t);\n        rep(i, t) res[i].tn = (-1) * i;\n\n        rep(i, r){\n            int tid, pid, tm, msg; cin >> tm >> tid >> pid >> msg;\n            tid--, pid--;\n\n            if(msg == 0){\n                res[tid].cn--;\n                res[tid].pn += wc[tid][pid] * 20 + tm;\n            }\n            else{\n                wc[tid][pid]++;\n            }\n        }\n\n        sort(all(res));\n        cout << res[0].tn * (-1) + 1;\n        range(i, 1, t){\n            if(res[i - 1].cn == res[i].cn &&\n               res[i - 1].pn == res[i].pn){\n                cout << \"=\";\n            }\n            else cout << \",\";\n            cout << res[i].tn * (-1) + 1;\n        }\n        cout << endl;\n    }\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "// #ifdef DEBUG\n// #define _GLIBCXX_DEBUG\n// #endif\n#include <iostream>\n#include <iomanip>\n#include <vector>\n#include <valarray>\n#include <map>\n#include <set>\n#include <list>\n#include <queue>\n#include <stack>\n#include <bitset>\n#include <utility>\n#include <numeric>\n#include <algorithm>\n#include <functional>\n#include <complex>\n#include <string>\n#include <sstream>\n\n#include <cstdio>\n#include <cstdlib>\n#include <cctype>\n#include <cstring>\n\n// these require C++11\n#include <unordered_set>\n#include <unordered_map>\n#include <random>\n#include <thread>\n#include <chrono>\n\nusing namespace std;\n\n#define int long long\n\n#define all(c) c.begin(), c.end()\n#define repeat(i, n) for (int i = 0; i < static_cast<int>(n); i++)\n#define debug(x) #x << \"=\" << (x)\n\n#ifdef DEBUG\n#define dump(x) std::cerr << debug(x) << \" (L:\" << __LINE__ << \")\" << std::endl\n#else\n#define dump(x) \n#endif\n\ntemplate<typename A,typename B>\nostream &operator<<(ostream&os,const pair<A,B>& p){\n    os << \"(\" << p.first << \",\" << p.second << \")\";\n    return os;\n}\n\ntypedef complex<double> point;\n\n// template<typename T,std::size_t N>\n// struct _v_traits {using type = std::vector<typename _v_traits<T,N-1>::type>;};\n// template<typename T>\n// struct _v_traits<T,1> {using type = std::vector<T>;};\n// template<typename T,std::size_t N=1>\n// using vec = typename _v_traits<T,N>::type;\n\ntemplate <typename T>\nostream &operator<<(ostream &os, const vector<T> &vec) {\n    os << \"[\";\n    for (const auto &v : vec) {\n        os << v << \",\";\n    }\n    os << \"]\";\n    return os;\n}\n\nstruct Team{\n    int id;\n    vector<int> time;\n    vector<int> try_count;\n    vector<char> ok;\n};\n\nint succeeded(const Team& t){\n    int ret = 0;\n    for(int i : t.time){\n        ret += (0 < i);\n    }\n    return ret;\n}\n\nint get_time(const Team& t){\n    int ret = 0;\n    for(int i=0;i<t.time.size();i++){\n        if(t.time[i] > 0){\n            ret += (t.time[i]-1) + 20 * t.try_count[i];\n        }\n    }\n    return ret;\n}\n\nsigned main() {\n    ios::sync_with_stdio(false);\n    cin.tie(0);\n\n    while(true){\n        int M,T,P,R;\n        cin >> M >> T >> P >> R;\n        if(M == 0 and T == 0 and P == 0 and R == 0) break;\n\n        vector<Team> teams;\n        for(int i=0;i<T;i++){\n            teams.push_back(Team{i+1,vector<int>(P,0),vector<int>(P,0)});\n        }\n        for(int i=0;i<R;i++){\n            int m,t,p,j;\n            cin >> m >> t >> p >> j;\n            t--;p--;\n            if(j == 0){\n                teams[t].time[p] = m+1;\n            }else{\n                teams[t].try_count[p]++;\n            }\n        }\n\n        sort(teams.begin(),teams.end(),[](const Team& left,const Team& right){\n                if(succeeded(left) != succeeded(right)){\n                    return succeeded(left) > succeeded(right);\n                }\n                if(get_time(left) != get_time(right)){\n                    return get_time(left) < get_time(right);\n                }\n                return left.id > right.id;\n            });\n\n        for(int i=0;i<T;i++){\n            if(i > 0){\n                if(([](const Team& left,const Team& right){\n                            return succeeded(left) == succeeded(right) and \n                                get_time(left) == get_time(right);\n\n                        })(teams[i-1],teams[i])){\n                    cout << \"=\";\n                }else{\n                    cout << \",\";\n                }\n            }\n            cout << teams[i].id;\n        }\n        cout << endl;\n    }\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\nusing namespace std;\n\nint main(){\n\twhile(1){\n\t\tint M,T,P,R;\n\t\tcin>>M>>T>>P>>R;\n\n\t\tif(M==0&&T==0&&P==0&&R==0)\n\t\t\tbreak;\n\n\t\tint CP[50],TT[50],PT[50][10];\n\t\tfor(int i=0;i<T;i++){\n\t\t\tCP[i]=TT[i]=0;\n\t\t\tfor(int j=0;j<P;j++){\n\t\t\t\tPT[i][j]=0;\n\t\t\t}\n\t\t}\n\n\t\tfor(int i=0;i<R;i++){\n\t\t\tint m,t,p,j;\n\t\t\tcin>>m>>t>>p>>j;\n\t\t\n\t\t\tif(j==0){\n\t\t\t\tCP[t-1]++;\n\t\t\t\tTT[t-1]+=(m+PT[t-1][p-1]);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tPT[t-1][p-1]+=20;\n\t\t\t}\n\t\t}\n\n\t\tint  tnow,tpre=-1;\n\t\tbool flg[50];\n\t\tfor(int i=0;i<T;i++){\n\t\t\tflg[i]=false;\n\t\t}\n\n\t\tfor(int i=0;i<T;i++){\n\t\t\ttnow=-1;\n\t\t\tfor(int j=0;j<T;j++){\n\t\t\t\tif(flg[j])\n\t\t\t\t\t continue;\n\n\t\t\t\tif(tnow==-1){\n\t\t\t\t\ttnow=j;\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tif(CP[j]>CP[tnow]||(CP[j]==CP[tnow]&&TT[j]<=TT[tnow])){\n\t\t\t\t\t\ttnow=j;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(tpre!=-1){\n\t\t\t\tif(CP[tnoaw]==CP[tpre]&&TT[tpre]==TT[tnow]){\n\t\t\t\t\tcout<<'=';\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tcout<<'.';\n\t\t\t\t}\n\t\t\t}\n\t\t\tcout<<tnow+1;\n\t\t\n\t\t\tflg[tnow]=true;\n\t\t\ttpre=tnow;\n\t\t}\n\t\tcout<<endl;\n\t}\n\t\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n#include <numeric>\n#include <set>\n#include <map>\n#include <queue>\n#include <sstream>\n#include <string>\n#include <cstdlib>\n#include <cstdio>\n#include <cstring>\n#include <cctype>\n#include <ctime>\n#include <cmath>\n#include <cassert>\n#include <limits>\n#include <functional>\nusing namespace std;\n#define rep(i,n) for (int (i)=0;(i)<(int)(n);++(i))\n\ntypedef struct {\n    int id, ac, time;\n    vector<int> logTime;\n} data;\n\nbool comp(data& a, data& b) {\n    if (a.ac != b.ac)\n        return a.ac > b.ac;\n    if (a.time != b.time)\n        return a.time < b.time;\n    return a.id > b.id;\n}\n\n\nint main() {\n    int M, T, P, R;\n    while (true) {\n        cin >> M >> T >> P >> R;\n        if (!M && !T && !P && !R) break;\n        vector<data> team(T);\n        rep(i, T) {\n            team[i].id = i+1;\n            team[i].ac = 0;\n            team[i].time = 0;\n            rep(j, P) {\n                team[i].logTime.push_back(0);\n            }\n        }\n        rep(i, R) {\n            int m, t, p, j; cin >> m >> t >> p >> j; t--; p--;\n            if (!j) {\n                team[t].ac++;\n                team[t].time += m + team[t].logTime[p];\n            } else {\n                team[t].logTime[p] += 20;\n            }\n        }\n        sort(team.begin(), team.end(), comp);\n        rep(i, team.size()) {\n            if (i) {\n                if (team[i-1].ac == team[i].ac && team[i-1].time == team[i].time)\n                    cout << \"=\";\n                else\n                    cout << \",\";\n            }\n            cout << team[i].id;\n        }\n        cout << endl;\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nint main(){\n    int M, T, P, R;\n    cin >> M >> T >> P >> R;\n    while(M > 0){\n        vector<pair<pair<int, int>, int>> ans(T);\n        for(int i=0; i<T; i++){\n            ans[i].first = make_pair(P, 0);\n            ans[i].second = -i;\n        }\n        vector<vector<int>> pen(T, vector<int>(P, 0));\n        for(int i=0; i<R; i++){\n            int m, t, p, j;\n            cin >> m >> t >> p >> j;\n            t--; p--;\n            if(j == 0){\n                ans[t].first.first--;\n                ans[t].first.second += m + pen[t][p];\n            }else{\n                pen[t][p] += 20;\n            }\n        }\n        sort(ans.begin(), ans.end());\n        for(int i=0; i<T; i++){\n            cout << -ans[i].second+1;\n            if(i<T-1) cout << (ans[i].first == ans[i+1].first ? \"=\":\",\");\n        }\n        cout << endl;\n\n        cin >> M >> T >> P >> R;\n    }\n}\n\n"
  },
  {
    "language": "C++",
    "code": "//#define USE_CPP11\n// #define USE_PRINTF\n\n#include <iostream>\n#include <iomanip>\n#include <map>\n#include <set>\n#include <utility>\n#include <vector>\n#include <string>\n#include <algorithm>\n#include <cmath>\n#include <cstdio>\n#include <cstdlib>\n#include <cstring>\n#include <climits>\n#include <list>\n#include <queue>\n#include <deque>\n#include <stack>\n#include <numeric>\n#include <complex>\n#include <memory>\n#include <sstream>\n\n#ifdef USE_CPP11\n#include <unordered_map>\n#include <unordered_set>\n#include <functional>\n#endif\n\n#define PRINT(obj) cout << obj << endl\n#define REP(i, n) for(int (i) = 0; (i) < (n); i++)\n#define SPACE \" \"\n\ntypedef long long ll;\n\nconst int INF = 1e9 + 10;\n\nusing namespace std;\n\nnamespace Scanner {\n#ifdef USE_PRINTF\n  int    nextInt()    { int    d; scanf(\"%d\" , &d); return d; }\n  float  nextFloat()  { float  f; scanf(\"%f\" , &f); return f; }\n  double nextDouble() { double f; scanf(\"%lf\", &f); return f; }  \n  string nextString() { string s; scanf(\"%s\" , &s); return s; }\n  ll     nextll()     { ll     l; scanf(\"%ll\", &l); return l; }\n#else\n  int    nextInt()    { int    d; cin >> d; return d; }\n  float  nextFloat()  { float  f; cin >> f; return f; }\n  double nextDouble() { double f; cin >> f; return f; }  \n  string nextString() { string s; cin >> s; return s; }\n  ll     nextll()     { ll     l; cin >> l; return l; }\n#endif\n\n  string getLine() { \n    string input;\n    getline(cin, input);\n    return input;\n  }\n};\n\nnamespace myLibrary {\n  vector<string> split(const string& str, char delim) {\n    vector<string> ret;\n    size_t current = 0, found;\n    while ((found = str.find_first_of(delim, current)) != string::npos) {\n      ret.push_back(string(str, current, found - current));\n      current = found + 1;\n    }\n    ret.push_back(string(str, current, str.size() - current));\n    return ret;\n  }\n  \n#ifdef USE_CPP11\n  ///\n  /// higher-order functional\n  /// This is something like map in haskell, python, etc.\n  /// Sample usage:\n  ///   vector<int> a = {1, 2, 3, 4, 5};\n  ///   vector<int> b = myLibrary::_Map<int, int>(a, [](int n){\n  ///     return n * n;\n  ///   });\n  /// Result:\n  ///   b = 1, 4, 9, 16, 25\n  ///\n  template<typename T_IN, typename T_OUT, class Functor>\n  vector<T_OUT> _Map(vector<T_IN> src, Functor func) {\n    vector<T_OUT> ret;\n    for (int i = 0; i < src.size(); i++) {\n      ret.push_back(func(src[i]));\n    }\n    return ret;\n  }\n#endif\n\n};\n\n/// BEGIN //////////////////////////////////////////////////////////\n\nstruct State {\npublic:\n  int teamID;\n  int acCount;\n  int waCount[11];\n  int penalty;\n\n  State():acCount(0), penalty(0) { \n    memset(waCount, 0, sizeof(waCount));\n  }\n};\n\nint main() {\n  while (true) {\n    int M = Scanner::nextInt();\n    int T = Scanner::nextInt();\n    int P = Scanner::nextInt();\n    int R = Scanner::nextInt();\n    \n    if (M + T + P + R == 0) {\n      break;\n    }\n\n    vector<State> score(T);\n    \n    REP(i, T) {\n      score[i].teamID = i + 1;\n    }\n\n    REP(i, R) {\n      int time = Scanner::nextInt();\n      int tID  = Scanner::nextInt() - 1;\n      int pID  = Scanner::nextInt() - 1;\n      int j    = Scanner::nextInt();\n      if (j != 0) {\n        score[tID].waCount[pID]++;\n      } else {\n        score[tID].acCount++;\n        score[tID].penalty += score[tID].waCount[pID] * 20 + time;\n      }\n    }\n\n    sort(score.begin(), score.end(), [](State a, State b) {\n      if (a.acCount == b.acCount) {\n        if (a.penalty == b.penalty) {\n          return a.teamID > b.teamID;\n        }\n        return a.penalty < b.penalty;\n      }\n      return a.acCount > b.acCount;\n    });\n\n    REP(i, T) {\n      cout << score[i].teamID;\n      if (i == T - 1) {\n        cout << endl;\n      } else if ((score[i].acCount == score[i + 1].acCount) && \n                 (score[i].penalty == score[i + 1].penalty)) {\n        cout << \"=\";\n      } else {\n        cout << \",\";\n      }\n    }\n  }  \n\n  return 0;\n}\n/// END   //////////////////////////////////////////////////////////"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n\nusing namespace std;\n\nstruct data_t {\n\tint ID;\n\tint time;\n\tint ac;\n\n\tbool operator<(const data_t& right) const {\n\t\tif (ac == right.ac) {\n\t\t\tif (time == right.time) {\n\t\t\t\treturn (ID > right.ID);\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn (time < right.time);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\treturn (ac > right.ac);\n\t\t}\n\t}\n};\n\nint main(void) {\n\tint M,T,P,R;\n\twhile (cin >> M >> T >> P >> R, M) {\n\t\tvector<data_t> data(T);\n\t\tfor (int i = 0; i < T; ++i) {\n\t\t\tdata[i].ID = i+1;\n\t\t\tdata[i].time = 0;\n\t\t\tdata[i].ac = 0;\n\t\t}\n\n\t\tint m,t,p,judge;\n\t\tvector< vector<int> > wrong(T,vector<int>(P,0));\n\t\tfor (int i = 0; i < R; ++i) {\n\t\t\tcin >> m >> t >> p >> judge;\n\t\t\tif (judge != 0) {\n\t\t\t\t++wrong[t-1][p-1];\n\t\t\t}\n\t\t\telse {\n\t\t\t\t++data[t-1].ac;\n\t\t\t\tdata[t-1].time += m + (20 * wrong[t-1][p-1]);\n\t\t\t}\n\t\t}\n\t\tsort(data.begin(),data.end());\n\t\tfor (int i = 0; i < T; ++i) {\n\t\t\tcout << data[i].ID;\n\t\t\tif (i < T-1) {\n\t\t\t\tif (data[i].ac == data[i+1].ac && data[i].time == data[i+1].time) {\n\t\t\t\t\tcout << \"=\";\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tcout << \",\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n//#include<fstream>\n#include<vector>\n\nusing namespace std;\n\nint main(){\n\t\n\t//ifstream fin;\n\t//fin.open(\"input.txt\");\n\n\tint M, T, P, R;//input\n\tint m, t, p, j;//input\n\n\tint time[50];\t//経過時間\n\tint solve[50];\t//正解数\n\tint miss[50][10];\t//間違えた数\n\tint count;\n\tvector<int> v,s;//解けた問題数ごとに...\n\t\n\twhile(true){\n\t\tfor (int i = 0; i < 50; i++){//初期化\n\t\t\tfor (int k = 0; k < 10; k++)miss[i][k] = 0;\n\t\t\ttime[i] = solve[i] = 0;\n\t\t}\n\t\tM = T = P = R = m = t = p = j = 0;\n\n\t\tcin >> M >> T >> P >> R;\n\t\tif (M == 0)break;\n\n\t\twhile (R > 0){//結果計算\n\t\t\tR--;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tt--;\n\t\t\tif (j == 0){\n\t\t\t\ttime[t] += m;\n\t\t\t\ttime[t] += miss[t][p] * 20;\n\t\t\t\tsolve[t]++;\n\t\t\t}\n\t\t\telse miss[t][p]++;\n\t\t}\n\t\t\n\t\tfor (int i = 0; i < T; i++){\n\t\t\tcout << \"チーム\" << i+1 << endl << \" 経過時間：\" << time[i] << \" 回答数：\" << solve[i];\n\t\t\tcout << endl;\n\t\t}\n\t\t\n\n\t\t//以下ソート\n\t\tcount = 0;//初期化\n\t\tfor (int i = 0; i < T; i++)if (count < solve[i])count = solve[i];\n\n\t\twhile (count >= 0){\n\t\t\tfor (int i = 0; i < T; i++)if (count == solve[i]){\n\t\t\t\tv.push_back(i);//countだけ解けたチームを記憶\n\t\t\t\ts.push_back(time[i]);//解けたチームの時間を記憶\n\t\t\t}\n\n\t\t\t//バブルソート\n\t\t\tif (s.size() > 1){\n\t\t\t\tfor (int i = 0; i < (int)v.size() - 1; i++)\n\t\t\t\t\tfor (int k = (int)v.size() - 1; k > i; k--){\n\t\t\t\t\t\tif (s[k] > s[k - 1]){\n\t\t\t\t\t\t\tint tmp = s[k];\n\t\t\t\t\t\t\tint temp = v[k];\n\n\t\t\t\t\t\t\ts[k] = s[k - 1];\n\t\t\t\t\t\t\tv[k] = v[k - 1];\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\ts[k - 1] = tmp;\n\t\t\t\t\t\t\tv[k - 1] = temp;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t}\n\t\t\tif (v.size() > 1){\n\t\t\t\tfor (int i = 0; i < (int)v.size() - 1; i++)\n\t\t\t\t\tfor (int k = (int)v.size() - 1; k > i; k--)\n\t\t\t\t\t\tif (s[k] == s[k - 1] && v[k] < v[k - 1]){\n\t\t\t\t\t\t\tint tmp = v[k];\n\t\t\t\t\t\t\tv[k] = v[k - 1];\n\t\t\t\t\t\t\tv[k - 1] = tmp;\n\t\t\t\t\t\t}\n\t\t\t}\n\t\t\t//ソート終了\n\n\t\t\t//output\n\t\t\twhile (v.size() > 2){\n\t\t\t\tif (s[v.size() - 1] == s[v.size() - 2]/* || s[v.size()] == s[v.size() - 1]*/)\n\t\t\t\t\tcout << v.back() + 1 << '=';\n\t\t\t\telse cout << v.back() + 1 << \",\";\n\t\t\t\tv.pop_back();\n\t\t\t}\n\t\t\tif (v.size() == 2){//最後の二つだけ例外処理\n\n\t\t\t\tif (s[1] == s[0])\n\t\t\t\t\t cout << v.back()+1 << \"=\";\n\t\t\t\telse cout << v.back()+1 << ',';\n\t\t\t\t\tv.pop_back();\n\t\t\t\t\tcout << v.back()+1;\n\t\t\t\t\tif (s[v.size()-1] != 0)cout << ',';\n\t\t\t\t\tv.pop_back();\n\t\t\t}\n\t\t\tif (v.size() == 1){\n\t\t\t\tcout << v.back()+1 << ',';\n\t\t\t\tv.pop_back();\n\t\t\t}\n\t\t\tv.clear();\n\t\t\ts.clear();\n\t\t\tcount--;\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n \nusing namespace std;\n \nstruct team{\n    int tID;\n    int pID;        //問題ID\n    vector<int> p;  //誤答数\n    int ansnum;     //正答数\n    int time;       //時間\n\tint place;\n \n    bool operator<( const team& right ) const {\n        return ( ansnum == right.ansnum ? \n            time > right.time : ansnum < right.ansnum );\n    }\n\tbool operator==( const team& right ) const {\n        return ( ansnum == right.ansnum ? \n            time == right.time : false );\n    }\n};\n \nint main(void){\n   // FILE* fp_in = freopen(\"data.txt\", \"r\", stdin);\n \n    while(1) {\n        int M, T, P, R;\n        cin >> M >> T >> P >> R;\n        if( M == 0 && T == 0 && P == 0 && R == 0 ) break; \n \n        //■■■■チームテーブル作成■■■■\n        vector<team> teams;\n        team newteam;\n        for(int i = 0; i <= P; i++)\n            newteam.p.push_back(0);\n \n        for(int i = 0; i < T; i++) {\n            newteam.tID = i + 1;\n            newteam.ansnum = 0;\n\t\t\tnewteam.time = 0;\n            teams.push_back( newteam );\n        }\n \n        //■■■■レコード取得■■■■\n        for(int i = 0; i < R; i++) {\n            int tID, pID, time_i, j;\n            cin >> time_i >> tID >> pID >> j;\n           \n\t\t\tif( j == 0 ) {\n\t\t\t\tteams.at(tID - 1).ansnum ++;\n\t\t\t\tteams.at(tID - 1).time += time_i + 20 * teams.at(tID - 1).p.at(pID);\n\t\t\t} else {\n\t\t\t\tteams.at( tID - 1 ).p.at( pID ) ++;\n\t\t\t}\n\n        }\n \n        sort( teams.begin(), teams.end() );\n\t\t\n\t\tcout << teams.at(teams.size() - 1).tID;\n\t\tfor(int i = teams.size() - 2; i >= 0 ; i--) {\n\t\t\tif( teams.at(i) == teams.at(i + 1) ) {\n\t\t\t\tcout << \"=\" << teams.at(i).tID;\n\t\t\t} else {\n\t\t\t\tcout << \",\" << teams.at(i).tID;\n\t\t\t}\n\t\t}\n\t\tcout << endl;\n \n    }\n \n   // while(1){}\n \n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <iomanip>\n#include <cmath>\n#include <cstdio>\n#include <algorithm>\n#include <vector>\n#include <memory>\n#include <cstring>\n#include <cassert>\n#include <numeric>\n#include <sstream>\n#include <map>\n#include <set>\n#include <queue>\n#include <stack>\n#include <cctype>\n#include <unordered_map>\n#include <unordered_set>\nusing namespace std;\n\n#define REP2(i, m, n) for (int i = (int)(m); i < (int)(n); i++)\n#define REP(i, n) REP2(i, 0, n)\n#define ALL(S) (S).begin(), (S).end()\ntypedef long long ll;\n\nint main(){\n  ios::sync_with_stdio(false);\n  int M, T, P, R;\n  while (cin >> M >> T >> P >> R && M + T + P + R > 0){\n    vector<int> sum(T);\n    vector<int> num(T);\n    vector<vector<int> > wa(T, vector<int>(P));\n    REP(i, R){\n      int m, t, p, j;\n      cin >> m >> t >> p >> j;\n      t--, p--;\n      if (j == 0){\n        num[t]++;\n        sum[t] += wa[t][p] * 20 + m;\n      } else {\n        wa[t][p]++;\n      }\n    }\n    vector<tuple<int, int, int> > vp;\n    REP(i, T){\n      vp.push_back(make_tuple(-num[i], sum[i], -i));\n    }\n    sort(ALL(vp));\n\n    REP(i, T){\n      if (i > 0){\n        if (get<0>(vp[i]) == get<0>(vp[i - 1]) && get<1>(vp[i]) == get<1>(vp[i - 1])){\n          cout << \"=\";\n        } else {\n          cout << \",\";\n        }\n      } \n      cout << - get<2>(vp[i]) + 1;\n    }\n    cout << endl;\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n \ntypedef struct {\n  int ch[11];\n  int num;\n  int time;\n  int tnum;\n} lg;\nint M,T,R,P;\nvector<lg> team;\n \nbool asc(lg t1,lg t2);\n \nint main(){\n  int i,j,m,t,p;\n \n  for(i=0;i<51;i++){\n    lg x;\n    team.push_back(x);\n  }\n  while(1){\n    cin >> M >> T >> P >> R;\n    if(M==0&&T==0&&P==0&&R==0)break;\n    for(i=0;i<=T;i++){\n      team[i].num=0;\n      team[i].time=0;\n      team[i].tnum=i+1;\n      for(j=0;j<=P;j++)team[i].ch[j]=0;\n    }\n    for(i=0;i<R;i++){\n      cin >> m >> t >> p >> j;\n      if(j!=0)team[t-1].ch[p]++;\n      else{\n    team[t-1].time+=20*team[t-1].ch[p];\n    team[t-1].num++;\n    team[t-1].time+=m;\n      }\n    }\n \n    sort(team.begin(),team.begin()+T,asc);\n \n    for(i=0;i<T;i++){\n      if(i==0)cout << team[i].tnum;\n      else if(team[i-1].num==team[i].num&&team[i-1].time==team[i].time)cout << \"=\"<<team[i].tnum;\n      else cout << \",\"<<team[i].tnum;\n    }\n    cout << endl;\n  }\n  return 0;\n}\n \nbool asc(lg t1,lg t2){\n  if(t1.num>t2.num)return 1;\n  else if(t1.num==t2.num&&t1.time<t2.time)return 1;\n  else if(t1.num==t2.num&&t1.time==t2.time&&t1.tnum>t2.tnum)return 1;\n  else return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstdio>\n#include<vector> \n#include<algorithm>\nusing namespace std;\n\nclass Team{\npublic:\n  int num;\n  int solve;\n  int time;\n  vector<int> plist;\n  Team():num(0),solve(0),time(0),plist(vector<int>(10,0)){}\n};\n\nbool compare_solve(const Team& left, const Team& right){\n  return left.solve > right.solve;\n}\nbool compare_time(const Team& left, const Team& right){\n  return left.time <= right.time;\n}\n\nint main(){\n  int M, T, P, R;\n  int m, t, p, j;\n  vector<Team> team;\n  for(;;){\n    scanf(\"%d %d %d %d\", &M, &T, &P, &R);\n    if( M == 0 && T == 0 && P == 0 && R == 0)\n      return 0;\n    for(int i = 0; i < T; i++){  \n      Team temp;\n      temp.num = i+1;\n      team.push_back(temp);\n    }\n    for(int i = 0; i < R; i++){\n      scanf(\"%d %d %d %d\", &m, &t, &p, &j);\n      if(j != 0)\n\tteam.at(t-1).plist.at(p) += 1;\n      else{\n\tteam.at(t-1).solve += 1; \n\tteam.at(t-1).time += m;\n\tteam.at(t-1).time += team.at(t-1).plist.at(p) * 20;\n      }\n    }\n    sort(team.begin(),team.end(),compare_time);\n    stable_sort(team.begin(),team.end(),compare_solve);\n    cout << team.at(0).num;\n    for(int i = 1; i < T; i++){\n      if(team.at(i-1).solve == team.at(i).solve && team.at(i-1).time == team.at(i).time)\n\tcout << \"=\";\n      else\n\tcout << \",\";\n      cout << team.at(i).num;\n    }\n    cout << endl;\n    team.clear();\n  }\n}"
  },
  {
    "language": "C++",
    "code": "#define _CRT_SECURE_NO_WARNINGS // #pragma warning(disable:4996)\n#include <iostream>\n#include <cstdio>\n#include <cstring>\n#include <algorithm>\n#include <vector>\n#include <string>\n#include <queue>\n#include <functional>\n#include <sstream>\n#include <cmath>\n#include <set>\n#include <map>\n#include <stack>\nusing namespace std; \n\n#define rep(i,a,b) for(int i=(a);i<(b);i++)\n#define rrep(i,a,b) for(int i=(a);i>=(b);i--)\n#define pb push_back\n#define mp(a,b) make_pair(a,b)\n#define all(a) a.begin(),a.end()\n#define len(x) ((int)(x).size())\n#define tmax(a,b,c) max((a),max((b),(c)))\n#define tmin(a,b,c) min((a),min((b),(c)))\n#define debug(x) cerr << #x << \" is \" << x << endl;\n\ntypedef pair<int, int> Pii;\ntypedef map<int, int> Mii;\ntypedef vector<int> Vi;\ntypedef long long ll;\nconst int inf = 2e9;\nconst ll ll_inf = 1e17;\nconst int mod = 1e9 + 7;\nconst long double eps = 1e-10;\n\nstruct sol{\n\tint n, s, ti, wr[20];\n\tsol(){};\n\tbool operator<(const sol& rhs) {\n\t\tif (s == rhs.s) \n\t\t\tif (ti == rhs.ti) {\n\t\t\t\treturn n > rhs.n;\n\t\t\t} else \n\t\t\t\treturn  ti < rhs.ti;\n\t\treturn s > rhs.s;\n\t}\n};\nsol x[55];\n\nint main()\n{\n\twhile (1) {\n\t\tint M, T, P, R;\n\t\tcin >> M >> T >> P >> R;\n\t\tif (M==0) break;\n\t\tmemset(x, 0, sizeof(x));\n\n\t\trep(i,0,T) x[i].n = i+1;\n\t\trep(i,0,R) {\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tt--;\n\t\t\tif (j==0) {\n\t\t\t\tx[t].s++;\n\t\t\t\tx[t].ti += m + x[t].wr[p];\n\t\t\t}\n\t\t\telse {\n\t\t\t\tx[t].wr[p] += 20;\n\t\t\t}\n\t\t}\n\t\tsort(x, x+T+1);\n\t\tcout << x[0].n;\n\t\trep(i,1,T) {\n\t\t\tif (x[i].s == x[i-1].s && x[i].ti == x[i-1].ti) cout << \"=\";\n\t\t\telse cout << \",\";\n\t\t\tcout << x[i].n;\n\t\t}\n\t\tcout << endl;\n\t}\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<vector>\n#include<algorithm>\nusing namespace std;\n\nstruct Info{\n\tint id,cost,ac;\n};\n\nbool operator < (const Info &a,const Info &b){\n\tif(a.ac!=b.ac) return a.ac>b.ac;\n\tif(a.cost!=b.cost) return a.cost<b.cost;\n\treturn a.id>b.id;\n}\n\nint main()\n{\n\tint M,T,P,R;\n\twhile(cin>>M>>T>>P>>R){\n\t\tif(M==0) break;\n\t\tvector<vector<int> >num_WA(T,vector<int>(P,0));\n\t\tvector<int> cost(T,0);\n\t\tvector<int> num_AC(T,0);\n\t\tfor(int i=0;i<R;i++){\n\t\t\tint m,t,p,j;\n\t\t\tcin>>m>>t>>p>>j;\n\t\t\tt--;\n\t\t\tif(j==0){\n\t\t\t\tcost[t] += m+num_WA[t][p]*20;\n\t\t\t\tnum_AC[t]++;\n\t\t\t}\n\t\t\telse{\n\t\t\t\tnum_WA[t][p]++;\n\t\t\t}\n\t\t}\n\t\tvector<Info> temp;\n\t\tfor(int i=0;i<T;i++){\n\t\t\tInfo hoge;\n\t\t\thoge.cost=cost[i];\n\t\t\thoge.id=i+1;\n\t\t\thoge.ac=num_AC[i];\n\t\t\ttemp.push_back(hoge);\n\t\t}\n\t\tsort(temp.begin(),temp.end());\n\t\tint bef_ac=0,bef_cost=0;\n\t\tfor(int i=0;i<temp.size();i++){\n\t\t\tif(i!=0){\n\t\t\t\tif(bef_ac==temp[i].ac && bef_cost==temp[i].cost){\n\t\t\t\t\tcout<<\"=\";\n\t\t\t\t}\n\t\t\t\telse cout<<\",\";\n\t\t\t}\n\t\t\tcout<<temp[i].id;\n\t\t\tbef_ac=temp[i].ac;\n\t\t\tbef_cost=temp[i].cost;\n\t\t}\n\t\tcout<<endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#define _USE_MATH_DEFINES\n#include<iostream>\n#include<string>\n#include<cmath>\n#include<queue>\n#include<map>\n#include<set>\n#include<list>\n#include<iomanip>\n#include<vector>\n#include<random>\n#include<functional>\n#include<algorithm>\n#include<cstdio>\n#include<unordered_map>\nusing namespace std;\n//---------------------------------------------------\n//ライブラリゾーン！！！！\ntypedef long long ll;\ntypedef long double ld;\n#define str string\n#define rep(i,j) for(ll i=0;i<(long long)(j);i++)\nconst ll Mod = 1000000007;\nconst ll gosenchou = 5000000000000000;\nshort gh[2][4] = { { 0,0,-1,1 },{ -1,1,0,0 } };\nstruct P {\n\tll pos, cost;\n};\nbool operator<(P a, P b) { return a.cost < b.cost; }\nbool operator>(P a, P b) { return a.cost > b.cost; }\nstruct B {//隣接リスト表現\n\tll to;\n\tld cost;\n};\nstruct E {//辺の情報を入れる変数\n\tll from, to, cost;\n};\nbool operator<(E a, E b) {\n\treturn a.cost < b.cost;\n}\nstruct H {\n\tll x, y;\n};\nbool operator<(H a, H b) {\n\tif (a.x != b.x) return a.x < b.x;\n\treturn a.y < b.y;\n}\nbool operator>(H a, H b) {\n\tif (a.x != b.x) return a.x > b.x;\n\treturn a.y > b.y;\n}\nbool operator==(H a, H b) {\n\treturn a.x == b.x&&a.y == b.y;\n}\nbool operator!=(H a, H b) {\n\treturn a.x != b.x || a.y != b.y;\n}\nll gcm(ll i, ll j) {//最大公約数\n\tif (i > j) swap(i, j);\n\tif (i == 0) return j;\n\treturn gcm(j%i, i);\n}\nld rad(H a, H b) {\n\treturn sqrt(pow(a.x - b.x, 2.0) + pow(a.y - b.y, 2.0));\n}//rad＝座標上の2点間の距離\nll ari(ll a, ll b, ll c) {\n\treturn (a + b)*c / 2;\n}//等差数列の和\nbool suf(ld a, ld b, ld c, ld d) {\n\tif (b <= c || d <= a) return 0;\n\treturn 1;\n}//[a,b),[c,d)\nll fact(ll x, ll k,ll p) {//最大値、個数\n\tll sum = 1;\n\tfor (int i = 0; i < k; i++) {\n\t\tsum *= (x--);\n\t\tsum %= p;\n\t}\n\treturn sum;\n}//階乗(正）\nll mod_pow(ll x, ll n, ll p) {\n\tll res = 1;\n\twhile (n > 0) {\n\t\tif (n & 1) res = res*x%p;\n\t\tx = x*x%p;\n\t\tn >>= 1;\n\t}\n\treturn res;\n}//x^n%p\n#define int long long\nconst long long inf = 4523372036854775807;\nconst int iinf = 1500000000;\n//----------------------------------------------------\n//++++++++++++++++++++++++++++++++++++++++++++++++++++\nint m, t, p, r;\nstruct A {\n\tint cost, time, id;\n};\nbool operator<(A a, A b) {\n\tif (a.cost != b.cost) return a.cost > b.cost;\n\tif (a.time != b.time) return a.time < b.time;\n\treturn a.id > b.id;\n}\nA a[51];\nint w[51][11];//間違えた数\nbool b[51][11];//正解した？\nsigned main() {\n\twhile (cin >> m >> t >> p >> r&&m + t + p + r > 0) {\n\t\tfor (int i = 0; i < 51; i++) {\n\t\t\tfor (int j = 0; j < 11; j++)\n\t\t\t\tw[i][j] = 0;\n\t\t\ta[i].cost = 0;\n\t\t\ta[i].time = 0;\n\t\t\ta[i].id = i;\n\t\t}\n\t\tfor (int i = 0; i < r; i++) {\n\t\t\tint mi, ti, pi, ji;\n\t\t\tcin >> mi >> ti >> pi >> ji;\n\t\t\t\tif (!ji) {\n\t\t\t\t\ta[ti].cost++;\n\t\t\t\t\ta[ti].time += w[ti][pi] * 20 + mi;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tw[ti][pi]++;\n\t\t}\n\t\tsort(a + 1, a + t + 1);\n\t\tfor (int i = 1; i <= t;) {\n\t\t\tint j = i;\n\t\t\twhile (j <= t&&a[i].cost == a[j].cost&&a[i].time == a[j].time) {\n\t\t\t\tif (i == j) cout << a[i].id;\n\t\t\t\telse cout << \"=\" << a[j].id;\n\t\t\t\tj++;\n\t\t\t}\n\t\t\ti = j;\n\t\t\tif (i <= t)cout << \",\";\n\t\t}\n\t\tcout << endl;\n\t}\n\tgetchar(); getchar();\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n#include <cstdio>\n\n#define REP(i,n) for( int i = 0; i < n; i++ )\n\n\nusing namespace std;\n\n/*\n より多くの問題に正解したチームを上位とする．\n 正解した問題数が同じ場合は，所要時間合計の少ないチームを上位とする．\n 複数のチームが同数の問題に正解し，所要時間合計も同じなら，それらのチームを同順位とする．\n */\n\nstruct team{\n\tint ans,time,name;\n    int q[50]={0};\n    \n\tteam() : ans(0), time(0), name(0) {}\n    \n    bool operator <( const team& Right )const {\n        return  ans != Right.ans ? ans < Right.ans :\n        time != Right.time ? time > Right.time :\n        name <  Right.name;\n    }\n};\n\n\nint main()\n{\n\tint M,T,P,R;\n\t// Mは，コンテストの始まりから終わりまでの時間である． Tは，チーム数である． Pは，問題数である． Rは，提出記録の数である\n\twhile( cin >> M >> T >> P >> R )\n\t{\n\t\tint m,t,p,k;\n\t\tvector<team> team_array(T+1);\n\t\tif( T == 0 ) return 0;\n\t\tfor( int i = 1; i <= T; i++)\n\t\t\tteam_array[i].name = i;\n\t\t// mkは，経過時間である． tkは，チーム番号である． pkは，問題番号である． jkは，判定結果を表す（0なら正解，0以外なら不正解）\n\t\tREP(i,R)\n\t\t{\n\t\t\tcin >> m >> t >> p >> k;\n\t\t\tteam &tm = team_array[t];\n\t\t\tif( !k ){\n\t\t\t\ttm.ans++;\n\t\t\t\ttm.time += m;\n                if( tm.q[p] )\n                    tm.time += 20 * tm.q[p];\n\t\t\t}\n            else{\n                tm.q[p]++;\n            }\n            \n\t\t}\n\t\t\n        sort( team_array.begin() + 1 , team_array.end() );\n\t\t\n        for( int i = T; i > 0; i-- )\n        {\n            char c;\n            if( i == 1 ){\n                cout << team_array[i].name << endl;\n                continue;\n            }\n            else if ( team_array[i].ans == team_array[i-1].ans &&\n                team_array[i].time == team_array[i-1].time) {\n                c = '=';\n            }\n            else{\n                c = ',';\n            }\n\t\t\tcout << team_array[i].name << c;\n        }\n        \n\t}\n\treturn 0;"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<vector>\n#include<string>\n#include<algorithm>\n#define loop(i,a,b) for(int i=a;i<b;i++)\n#define rep(i,a) loop(i,0,a)\n#define pb push_back\n#define all(in) in.begin(),in.end()\nusing namespace std;\ntypedef long long ll;\ntypedef int Def;\ntypedef pair<Def,Def> pii;\ntypedef vector<Def> vi;\ntypedef vector<vi> vvi;\nDef inf = sizeof(Def) == sizeof(long long) ?  2e18:1e9+10;\nint main(){\n\tint T,te,pr,n;\n\twhile(cin>>T>>te>>pr>>n,T){\n\t\tvvi wa(te,vi(pr));\n\t\tvector<pair<int,pii> >out(te);//team mis pr team\n\t\trep(i,te)out[i].second.second=i;\n\t\trep(i,n){\n\t\t\tint t,e,p,j;\n\t\t\tcin>>t>>e>>p>>j;\n\t\t\tif(j){\n\t\t\t\twa[e-1][p-1]++;\n\t\t\t}else{\n\t\t\t\tout[e-1].second.first++;\n\t\t\t\tout[e-1].first+=20*wa[e-1][p-1]+t;\n\t\t\t}\n\t\t}\n\t\tsort(all(out),[](pair<int,pii>a,pair<int,pii>b){\n\t\t\treturn a.second.first!=b.second.first?a.second.first>b.second.first:(a.first!=b.first?a.first<b.first:a.second.second>b.second.second);\n\t\t});\n\t\trep(i,te){\n\t\t\tif(i){\n\t\t\t\tif(out[i-1].first-out[i].first==0&&out[i-1].second.first-out[i].second.first==0)cout<<\"=\";else cout<<\",\";\n\t\t\t}\n\t\t\tcout<<out[i].second.second+1;\n\t\t\tif(i==te-1)cout<<endl;\n\t\t\t\n\t\t}\n\t}\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#define N 2002\nusing namespace std;\nstruct team{\n  int tnum;\n  int correct;\n  int time;\n};\nint main(){\n  int m,t,p,r,im[N],it[N],ip[N],ij[N],incorrect,i,j;\n  struct team data[51];\n  while(1){\n    cin >> m >> t >> p >> r;\n    if(m==0&&t==0&&p==0&&r==0) break;\n    for(i=0;i<r;i++) cin >> im[i] >> it[i] >> ip[i] >> ij[i];\n    for(i=1;i<=t;i++){\n      data[i].tnum=i;\n      data[i].correct=0;\n      data[i].time=0;\n    }\n    for(i=0;i<r;i++){\n      if(ij[i]==0){\n\tdata[it[i]].correct++;\n      \tincorrect=0;\n\tfor(j=0;j<i;j++){\n\t  if(it[i]==it[j]&&ip[i]==ip[j]) incorrect++;\n\t}\n\tdata[it[i]].time=data[it[i]].time+incorrect*20+im[i];\n      }\n    }\n    for(i=0;i<=t;i++){\n      for(j=2;j<=t;j++){\n\tif(data[j].tnum>data[j-1].tnum) swap(data[j],data[j-1]);\n      }\n    }\n    for(i=0;i<=t;i++){\n      for(j=2;j<=t;j++){\n\tif(data[j].time<data[j-1].time) swap(data[j],data[j-1]);\n      }\n    }\n    for(i=0;i<=t;i++){\n      for(j=2;j<=t;j++){\n\tif(data[j].correct>data[j-1].correct) swap(data[j],data[j-1]);\n      }\n    }\n    /*    for(i=1;i<t;i++){\n      cout << data[i].tnum;\n      if(data[i].correct==data[i+1].correct&&data[i].time==data[i+1].time)\n\tcout << '=';\n      else cout << ',';\n      if(i==t-1) cout << data[i+1].tnum;\n      }*/\n    //cout << endl;\n        for( i = 1; i <= t-1; i++ ){\n      cout << data[i].tnum;\n      if( data[i].correct > data[i+1].correct )  cout << \",\";\n      else if( data[i].time < data[i+1].time ) cout <<  \",\";\n      else cout << \"=\";\n      }\n    cout << data[t].tnum << endl;\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include \"iostream\"\n#include \"cstring\"\n#include \"vector\"\nusing namespace std;\ntypedef struct res\n{\n\tint solve;\n\tint time;\n\tint id;\n\n\tstatic bool comp(const res& l, const res& r)\n\t{\n\t\tif(l.solve!=r.solve) return l.solve>r.solve;\n\t\tif(l.time!=r.time) return l.time<r.time;\n\t\treturn l.id>r.id;\n\t}\n}res;\n\n\nint main(void)\n{\n\tint M,T,P,R;\n\twhile (cin>>M>>T>>P>>R,M) {\n\t\tint penalty[M][P];\n\t\tmemset(penalty,0,sizeof(penalty));\n\t\tres result[T];\n\t\tfor (int i = 0; i < T; i++) {\n\t\t\tresult[i].solve=0;\n\t\t\tresult[i].time=0;\n\t\t\tresult[i].id=i+1;\n\t\t}\n\t\tfor (int i = 0; i < R; i++) {\n\t\t\tint m,t,p,r;\n\t\t\tcin>>m>>t>>p>>r;\n\t\t\tif(!r)\n\t\t\t{\n\t\t\t\tresult[t-1].solve+=1;\n\t\t\t\tresult[t-1].time+=m+20*penalty[t-1][p-1];\n\t\t\t}\n\t\t\telse penalty[t-1][p-1]++;\n\t\t}\n\t\tsort(result,result+T,res::comp);\n\t\tfor (int i = 0; i < T; i++) {\n\t\t\tif(i!=0)\n\t\t\t{\n\t\t\t\tif(result[i-1].solve==result[i].solve&&result[i-1].time==result[i].time)\n\t\t\t\t{\n\t\t\t\t\tcout<<\"=\";\n\t\t\t\t}\n\t\t\t\telse cout<<\",\";\n\t\t\t}\n\t\t\tcout<<result[i].id;\n\t\t}\n\n\t\tcout<<endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "//(各チーム,各問題)ごとに(正解問題,時間)2つのようそを持っておくと簡単。\n#include<iostream>\n#include<stdlib.h>\nusing namespace std;\n#define rep(i,N) for(i=0;i<N;i++)\n\nint M,T,P,R;\nint m,t,p,j;\n\nstruct TEAM{\n\tint sac;\n\tint stime;\n\tint id;\n\tint ac[10];\n\tint time[10];\n}team[50],syukei_team[50];\n\nint compare( const void *s1,const void *s2 ){\n\tint t1 = ((TEAM*)s2)->sac - ((TEAM*)s1)->sac;\n\tint t2 = ((TEAM*)s1)->stime - ((TEAM*)s2)->stime;\n\tint t3 = ((TEAM*)s2)->id - ((TEAM*)s1)->id;\n\tif( t1 )\n\t\treturn t1;\n\tif( t2 )\n\t\treturn t2;\n\treturn t3;\n}\n\nint main(){\n\tint y,x;\n\twhile( cin >> M >> T >> P >> R ){\n\t\tif(!M)break;\n\t\trep(y,T){\n\t\t\trep(x,P){\n\t\t\t\tteam[y].ac[x] = 0;\n\t\t\t\tteam[y].time[x] = 0;\n\t\t\t}\n\t\t\tsyukei_team[y].sac = 0;\n\t\t\tsyukei_team[y].stime = 0;\n\t\t\tsyukei_team[y].id = y+1;\n\t\t}\n\t\trep(y,R){\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tt--;\n\t\t\tp--;\n\t\t\tif( j == 0 ){\n\t\t\t\tteam[t].ac[p] = 1;\n\t\t\t\tteam[t].time[p] += m;\n\t\t\t}\n\t\t\telse{\n\t\t\t\tteam[t].time[p] += 20;\n\t\t\t}\n\t\t}\n\t\trep(y,T){\n\t\t\trep(x,P){\n\t\t\t\tif( team[y].ac[x] == 1 ){\n\t\t\t\t\tsyukei_team[y].stime += team[y].time[x];\n\t\t\t\t\tsyukei_team[y].sac++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tqsort( syukei_team, T, sizeof(syukei_team[0]), compare );\n\t\t\n\t\trep(y,T){\n\t\t\tcout << syukei_team[y].id;\n\t\t\tif( y < T-1 ){\n\t\t\t\tif( syukei_team[y].sac == syukei_team[y+1].sac && syukei_team[y].stime == syukei_team[y+1].stime ){\n\t\t\t\t\tcout << \"=\";\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tcout << \",\";\n\t\t\t\t}\n\t\t\t}\n\t\t\telse{\n\t\t\t\tcout << endl;\n\t\t\t}\n\t\t\t//printf(\" team=%d ac=%d time=%d\\n\",syukei_team[y].id,syukei_team[y].sac,syukei_team[y].stime);\n\t\t}\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define f first \n#define sf second.first \n#define ss second.second \nusing namespace std;\ntypedef pair<int,int> P;\ntypedef pair<int,P > iP;\n\nint main(){\n  int t,p,r,b;\n  while(cin>>b>>t>>p>>r&&t){\n    iP a[51];\n    int k[11][51]={};\n    a[0]=iP(-1,P(-1,-1));\n    for(int i=1;i<=t;i++)a[i]=iP(0,P(0,i));\n    for(int i=0;i<r;i++){\n      int ti,pi,m,s;\n      cin>>m>>ti>>pi>>s;\n      if(!s)a[ti].f++,a[ti].sf-=m+k[pi][ti]*20;\n      else k[pi][ti]++;\n    }\n    sort(a+1,a+t+1);\n    for(int i=t;i>0;i--){\n      cout<<a[i].ss;\n      if(i!=1)\n\tif(a[i-1].f==a[i].f&&a[i-1].sf==a[i].sf)cout<<\"=\";\n\telse cout<<\",\";\n    }\n    cout<<endl;\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#include <limits.h>\n#include <math.h>\n#include <set>\n#include <stack>\n#include <stdlib.h>\n#include <string>\n#include <vector>\n\n#define el endl\n#define fd fixed\n#define INF INT_MAX/2-1\n#define pb push_back\n\nusing namespace std;\n\nclass Team\n{\nprivate:\n  int m_id;\n  int m_time;\n  bool m_correct[10];\n  int m_incorrect[10];\npublic:\n  void setId(int id);\n  void setTime(int time);\n  void addTime(int time);\n  void initCor();\n  void success(int qid);\n  void initIncor();\n  void incIncor(int qid);\n  int getId();\n  int getTime();\n  bool getCor(int qid);\n  int getIncor(int qid);\n  int getSolved();\n  Team(int id) {\n    setId(id);\n    setTime(0);\n    initCor();\n    initIncor();\n  }\n};\n\nvoid Team::setId(int id) {\n  m_id = id;\n}\n\nvoid Team::setTime(int time) {\n  m_time = time;\n}\n\nvoid Team::addTime(int time) {\n  m_time += time;\n}\n\nvoid Team::initCor() {\n  for (int i = 0; i < 10; i++) {\n    m_correct[i] = false;\n  }\n}\n\nvoid Team::success(int qid) {\n  m_correct[qid-1] = true;\n}\n\nvoid Team::initIncor() {\n  for (int i = 0; i < 10; i++) {\n    m_incorrect[i] = 0;\n  }\n}\n\nvoid Team::incIncor(int qid) {\n  m_incorrect[qid-1]++;\n}\n\nint Team::getId() {\n  return m_id;\n}\n\nint Team::getTime() {\n  return m_time;\n}\n\nbool Team::getCor(int qid) {\n  return m_correct[qid-1];\n}\n\nint Team::getIncor(int qid) {\n  return m_incorrect[qid-1];\n}\n\nint Team::getSolved() {\n  int count = 0;\n  for (int i = 0; i < 10; i++) {\n    if (m_correct[i]) {\n      count++;\n    }\n  }\n  return count;\n}\n\nint main() {\n  int M, T, P, R, m, t, p, j;\n  while (cin >> M >> T >> P >> R, M | T | P | R) {\n    vector<Team> teams;\n    for (int i = 0; i < T; i++) {\n      teams.pb(Team(i+1));\n    }\n    while (R--) {\n      cin >> m >> t >> p >> j;\n      if (j == 0) {\n        teams[t-1].success(p);\n        teams[t-1].addTime(m);\n      } else {\n        teams[t-1].incIncor(p);\n      }\n    }\n    for (int i = 0; i < T; i++) {\n      for (int j = 1; j <= 10; j++) {\n        if (teams[i].getCor(j)) {\n          teams[i].addTime(teams[i].getIncor(j)*20);\n        }\n      }\n    }\n    for (int i = 0; i < T; i++) {\n      for (int j = i+1; j < T; j++) {\n        if ((teams[i].getSolved() < teams[j].getSolved()) || ((teams[i].getSolved() == teams[j].getSolved()) && (teams[i].getTime() > teams[j].getTime())) || ((teams[i].getSolved() == teams[j].getSolved()) && (teams[i].getTime() == teams[j].getTime()) && (teams[i].getId() < teams[j].getId()))) {\n          swap(teams[i], teams[j]);\n        }\n      }\n    }\n    for (int i = 0; i < T-1; i++) {\n      cout << teams[i].getId();\n      if ((teams[i].getSolved() == teams[i+1].getSolved()) && (teams[i].getTime() == teams[i+1].getTime())) {\n        cout << '=';\n      } else {\n        cout << ',';\n      }\n    }\n    cout << teams[T-1].getId() << el;\n  }\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\nusing namespace std;\n\nstruct team{\n\tint n, c, t, p;\n};\n\nbool operator<(const team team1, const team team2){\n\tbool rep;\n\tif(team1.c == team2.c){\n\t\trep = (team1.t == team2.t) ? team1.n > team2.n : team1.t < team2.t;\n\t}else{\n\t\trep = (team1.c > team2.c);\n\t}\n\treturn rep;\n}\n\nint main(){\n\tint M, T, P, R;\n\twhile( cin >> M >> T >> P >> R, M || T || P || R ){\n\t\tvector<team> teams(T);\n\t\tfor(int i = 0; i < T; i++){\n\t\t\tteams[i].n = i+1;\n\t\t\tteams[i].c = 0;\n\t\t\tteams[i].t = 0;\n\t\t\tteams[i].p = 0;\n\t\t}\n\t\tfor(int i = 0; i < R; i++){\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tif( j == 0 ){\n\t\t\t\tteams[t-1].c++;\n\t\t\t\tteams[t-1].t += (m + 20 * teams[t-1].p);\n\t\t\t\tteams[t-1].p = 0;\n\t\t\t}else{\n\t\t\t\tteams[t-1].p++;\n\t\t\t}\n\t\t}\n\t\tsort(teams.begin(), teams.end());\n\t\tcout << teams[0].n;\n\t\tfor(int i = 1; i < T; i++){\n\t\t\tif( teams[i].c == teams[i-1].c && teams[i].t == teams[i-1].t ) cout << \"=\";\n\t\t\telse cout << \",\";\n\t\t\tcout << teams[i].n;\n\t\t}\n\t\tcout << endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n//#include<fstream>\n#include<vector>\n\nusing namespace std;\n\nint main(){\n\t\n\t//ifstream fin;\n\t//fin.open(\"input.txt\");\n\n\tint M, T, P, R;//input\n\tint m, t, p, j;//input\n\n\tint time[50];\t//経過時間\n\tint solve[50];\t//正解数\n\tint miss[50][10];\t//間違えた数\n\tint count;\n\tvector<int> v,s;//解けた問題数ごとに...\n\t\n\twhile(true){\n\t\tfor (int i = 0; i < 50; i++){//初期化\n\t\t\tfor (int k = 0; k < 10; k++)miss[i][k] = 0;\n\t\t\ttime[i] = solve[i] = 0;\n\t\t}\n\t\tM = T = P = R = m = t = p = j = 0;\n\n\t\tcin >> M >> T >> P >> R;\n\t\tif (M == 0)break;\n\n\t\twhile (R > 0){//結果計算\n\t\t\tR--;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tt--;\n\t\t\tif (j == 0){\n\t\t\t\ttime[t] += m;\n\t\t\t\ttime[t] += miss[t][p] * 20;\n\t\t\t\tsolve[t]++;\n\t\t\t}\n\t\t\telse miss[t][p]++;\n\t\t}\n\t\t/*\n\t\tfor (int i = 0; i < T; i++){\n\t\t\tcout << \"チーム\" << i+1 << endl << \" 経過時間：\" << time[i] << \" 回答数：\" << solve[i];\n\t\t\tcout << endl;\n\t\t}\n\t\t*/\n\n\t\t//以下ソート\n\t\tcount = 0;//初期化\n\t\tfor (int i = 0; i < T; i++)if (count < solve[i])count = solve[i];\n\n\n\t\twhile (count >= 0){\n\t\t\tfor (int i = 0; i < T; i++)if (count == solve[i]){\n\t\t\t\tv.push_back(i);//countだけ解けたチームを記憶\n\t\t\t\ts.push_back(time[i]);//解けたチームの時間を記憶\n\t\t\t}\n\n\t\t\t//バブルソート\n\t\t\tif (s.size() > 1){\n\t\t\t\tfor (int i = 0; i < (int)v.size() - 1; i++)\n\t\t\t\t\tfor (int k = (int)v.size() - 1; k > i; k--){\n\t\t\t\t\t\tif (s[k] > s[k - 1]){\n\t\t\t\t\t\t\tint tmp = s[k];\n\t\t\t\t\t\t\tint temp = v[k];\n\n\t\t\t\t\t\t\ts[k] = s[k - 1];\n\t\t\t\t\t\t\tv[k] = v[k - 1];\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\ts[k - 1] = tmp;\n\t\t\t\t\t\t\tv[k - 1] = temp;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t}\n\t\t\tif (v.size() > 1){\n\t\t\t\tfor (int i = 0; i < (int)v.size() - 1; i++)\n\t\t\t\t\tfor (int k = (int)v.size() - 1; k > i; k--)\n\t\t\t\t\t\tif (s[k] == s[k - 1] && v[k] < v[k - 1]){\n\t\t\t\t\t\t\tint tmp = v[k];\n\t\t\t\t\t\t\tv[k] = v[k - 1];\n\t\t\t\t\t\t\tv[k - 1] = tmp;\n\t\t\t\t\t\t}\n\t\t\t}\n\t\t\t//ソート終了\n\n\t\t\t//output\n\t\t\twhile (v.size() > 2){\n\t\t\t\tif (s[v.size() - 1] == s[v.size() - 2] || s[v.size()] == s[v.size() - 1])\n\t\t\t\t\tcout << v.back()+1 << '=';\n\t\t\t\telse cout << v.back()+1 << \",\";\n\t\t\t\tv.pop_back();\n\t\t\t}\n\t\t\tif (v.size() == 2){//最後の二つだけ例外処理\n\n\t\t\t\tif (s[1] == s[0])\n\t\t\t\t\t cout << v.back()+1 << \"=\";\n\t\t\t\telse cout << v.back()+1 << ',';\n\t\t\t\t\tv.pop_back();\n\t\t\t\t\tcout << v.back()+1;\n\t\t\t\t\tif (s[v.size()-1] != 0)cout << ',';\n\t\t\t\t\tv.pop_back();\n\t\t\t}\n\t\t\tif (v.size() == 1){\n\t\t\t\tcout << v.back()+1 << ',';\n\t\t\t\tv.pop_back();\n\t\t\t}\n\t\t\tv.clear();\n\t\t\ts.clear();\n\t\t\tcount--;\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<strstream>\n#include<stack>\n#include<utility>\n#include<cstdio>\n#include<algorithm>\n#include<vector>\n#include<cmath>\n#include<climits>\n#include<map>\n#include<string>\n#include<sstream>\n\nusing namespace std;\n\n#define mp make_pair\n#define rep(i,n) for( int i = 0; i < n; i++ )\ntypedef long long int ll;\n\nint main()\n{\n\tint n;\n\twhile( cin >> n, n )\n\t{\n\t\tvector<int> v(n);\n\t\trep(i,n)\n\t\t{\n\t\t\tcin >> v[i];\n\t\t}\n\t\tstring s;\n\t\tcin >> s;\n\n\t\tint v_i = 0;\n\t\tfor( int i = 0; i < s.size(); i++)\n\t\t{\n\t\t\tif( v_i > n-1 ){\n\t\t\t\tv_i = 0;\n\t\t\t}\n\t\t\trep(j,v[v_i])\n\t\t\t{\n\t\t\t\ts[i]--;\n\t\t\t\tif( s[i] == 64 ){\n\t\t\t\t\ts[i] = 'z';\n\t\t\t\t}\n\t\t\t\tif( s[i] == 96 ){\n\t\t\t\t\ts[i] = 'Z';\n\t\t\t\t}\n\t\t\t}\n\t\t\tv_i++;\n\t\t}\n\t\tcout << s << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\nusing namespace std;\n \nint main()\n{\n    while(true){\n        int M, T, P, R;\n        cin >> M >> T >> P >> R;\n \n        if(M==0 && T==0 && P==0 && R==0)\n            break;\n \n        int CP[50], TT[50], PT[50][10];\n        for(int i=0; i<T; i++){\n            CP[i] = TT[i] = 0;\n            for(int j=0; j<P; j++)\n                PT[i][j] = 0;\n        }\n \n        for(int i=0; i<R; i++){\n            int m, t, p, j;\n            cin >> m >> t >> p >> j;\n \n            if(j==0){\n                CP[t-1]++;\n                TT[t-1] += (m+PT[t-1][p-1]);\n            }\n            else{\n                PT[t-1][p-1] += 20;\n            }\n        }\n \n        int tnow, tpre = -1;\n        bool flg[50];\n        for(int i=0; i<T; i++)\n            flg[i] = false;\n \n        for(int i=0; i<T; i++){\n            tnow = -1;\n            for(int j=0; j<T; j++){\n                if(flg[j])\n                    continue;\n \n                if(tnow==-1){\n                    tnow = j;\n                }\n                else{\n                    if(CP[j]>CP[tnow] || (CP[j]==CP[tnow] && TT[j]<=TT[tnow])){\n                        tnow = j;\n                    }\n                }\n            }\n \n            if(tpre!=-1){\n                if(CP[tnow]==CP[tpre] && TT[tnow]==TT[tpre])\n                    cout << '=';\n                else\n                    cout << ',';\n            }\n            cout << tnow+1;\n \n            flg[tnow] = true;\n            tpre = tnow;\n        }\n        cout << endl;\n    }\n \n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <algorithm>\n\nusing namespace std;\n\nstruct team {\n\tteam() {\n\t\tfor (int i = 0; i < 10; ++i) {\n\t\t\tac[i] = -1;\n\t\t\tfa[i] = 0;\n\t\t}\n\t}\n\tint no;\n\tint ac[10];\n\tint fa[10];\n\t\n\tint na() const {\n\t\tint ans = 0;\n\t\tfor (int i = 0; i < 10; ++i)\n\t\t\tif (ac[i] != -1)\n\t\t\t\t++ans;\n\t\treturn ans;\n\t}\n\t\n\tint st() const {\n\t\tint ans = 0;\n\t\tfor (int i = 0; i < 10; ++i)\n\t\t\tif (ac[i] != -1)\n\t\t\t\tans += ac[i] + fa[i] * 20;\n\t\treturn ans;\n\t}\n\t\n\tbool operator==(const team &rh) {\n\t\treturn this->na() == rh.na() && this->st() == rh.st();\n\t}\n\t\n\tbool operator<(const team &rh) const {\n\t\tif (this->na() > rh.na())\n\t\t\treturn true;\n\t\telse if (this->na() < rh.na())\n\t\t\treturn false;\n\t\t\n\t\tif (this->st() < rh.st())\n\t\t\treturn true;\n\t\telse if (this->st() > rh.st())\n\t\t\treturn false;\n\t\t\n\t\treturn this->no > rh.no;\n\t}\n};\n\nint main()\n{\n\tfor (;;) {\n\t\tint m, t, p, r;\n\t\tscanf(\"%d %d %d %d\", &m, &t, &p, &r);\n\t\tif (m == 0 && t == 0 && p == 0 && r == 0)\n\t\t\tbreak;\n\t\t\t\n\t\tteam teams[10];\n\t\tfor (int i = 0; i < t; ++i)\n\t\t\tteams[i].no = i + 1;\n\t\t\n\t\tfor (int i = 0; i < r; ++i) {\n\t\t\tint m, t, p, j;\n\t\t\tscanf(\"%d %d %d %d\", &m, &t, &p, &j);\n\t\t\t\n\t\t\tif (j == 0)\n\t\t\t\tteams[t - 1].ac[p - 1] = m;\n\t\t\telse if (j == 1)\n\t\t\t\tteams[t - 1].fa[p - 1] += 1;\n\t\t}\n\t\t\n\t\tsort(teams, teams + t);\n\t\t\n\t\tfor (int i = 0; i < t; ++i) {\n\t\t\tprintf(\"%d\", teams[i].no);\n\t\t\tif (i == t - 1)\n\t\t\t\tprintf(\"\\n\");\n\t\t\telse if (teams[i] == teams[i + 1])\n\t\t\t\tprintf(\"=\");\n\t\t\telse\n\t\t\t\tprintf(\",\");\n\t\t}\n\t}\n\t\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n\nusing namespace std;\n\nclass Question{\npublic:\n    bool isAC = false;\n    int p = 0;\n};\nclass Team{\npublic:\n    int ID;\n    int AC = 0;\n    int ptime = 0;\n    vector<Question> q;\n\n    Team() : ID(-1){}\n    Team(int id,int qn)\n        : ID(id), q(qn+1)\n    {\n    }\n\n    void submit(int m,int p,int j){\n        if(j == 0){\n            q[p].p += m;\n            q[p].isAC = true;\n            AC++;\n            ptime += q[p].p;\n        }else{\n            q[p].p += 20;\n        }\n    }\n};\n\nbool operator==(const Team& a,const Team& b){\n    return a.AC == b.AC && a.ptime == b.ptime;\n}\nbool operator!=(const Team& a,const Team& b){\n    return !(a == b);\n}\n\n//M:テァツオツづ、ツコツ?ヲツ卍づゥツ鳴?\n//T:テ」ツδ?」ツδシテ」ツδ?ヲツ閉ー\n//P:テ・ツ閉湘ゥツ。ツ古ヲツ閉ー\n//R:テヲツ渉静・ツ?コテヲツ閉ー\nvoid solve(int M,int T,int P,int R){\n    vector<Team> team;\n    for(int i=1;i<=T;i++){\n        team.push_back(Team(i,P));\n    }\n    for(int i=0;i<R;i++){\n        int m,t,p,j;\n        cin >> m >> t >> p >> j;\n        team[t-1].submit(m,p,j);\n    }\n    std::sort(team.begin(),team.end(),\n            [](const Team& a,const Team& b)->bool{\n                if(a.AC < b.AC)\n                    return true;\n                if(a.AC > b.AC)\n                    return false;\n                return a.ptime > b.ptime;\n            }\n            );\n    std::reverse(team.begin(),team.end());\n    bool f = false;\n    cout << team[0].ID;\n    for(int i=1;i<T;i++){\n        if(team[i-1] == team[i]){\n            cout << \"=\" << team[i].ID;\n        }else{\n            cout << \",\" << team[i].ID;\n        }\n    }\n    //for(auto t : team)\n    //{\n    //    //cout << t.ID << \" :\" << t.AC << \" ,\" << t.ptime << endl;\n    //}\n    cout << endl;\n}\n\nint main(){\n    while(true){\n        int M,T,P,R;\n        cin >> M >> T >> P >> R;\n        if(!M&&!T&&!P&&!R)\n            return 0;\n        solve(M,T,P,R);\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\nusing namespace std;\n\nint main(){\n\twhile(true){\n\t\tint M,T,P,R;\n\t\tcin>>M>>T>>P>>R;\n\t\tif(M==0&&T==0&&P==0&&R==0)\n\t\t\tbreak;\n\t\tint CP[50],YY[50],PT[50][10];\n\t\tfor(int i=0;i<T;i++){\n\t\t\tCP[i]=TT[i]=0;\n\t\t\tfor(int j=0;j<P;j++)\n\t\t\t\tPT[i][j]=0;\n\t\t}\n\t\tfor(int i=0;i<R;i++){\nq\t\t\tint m,t,p,j;\n\t\t\tcin>>m>>t>>p>>j;\n\t\t\tif(j==0){\n\t\t\t\tCP[t-1]++;\n\t\t\t\tTT[t-1] += (m+PT[t-1][p-1]);\n\t\t\t}else{\n\t\t\t\tPT[t-1][p-1] +=20;\n\t\t\t}\n\t\t}\n\n\t\tint tnow,tpre=-1;\n\t\tbool flg[50];\n\t\tfor(int i=0;i<T;i++)\n\t\t\tflg=[i]=false;\n\t\tfor(int i=0;i<T;i++){\n\t\t\ttnow=-1;\n\t\t\tfor(int j=0;j<T;j++){\n\t\t\t\tif(flg[j])\n\t\t\t\t\tcontinue;\n\t\t\t\tif(tnow==-1){\n\t\t\t\t\ttnow=j;\n\t\t\t\t}else{\n\t\t\t\t\tif(CP[j]>CP[tnow]||(CP[j]==CP[tnow]&&TT[j]<=TT[tnow])){\n\t\t\t\t\t\ttnow=j;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\tif(tpre!=-1){\n\t\t\tif(CP[tnow]==CP[tpre]&&TT[tnow]==TT[tpre])\n\t\t\t\tcout<<'=';\n\t\t\telse\n\t\t\t\tcout<<',';\n\t\t}\n\t\tcout << tnow+1;\n\t\t\tflg[tnow]=true;\n\t\t\ttpre=tnow;\n\t\t}\n\tcout<<endl;\n\t}\n\treturn 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstdio>\n#include<iostream>\nusing namespace std;\n\nint m,t,p,r;\nint zi,na,mo,ans;\nint noa[52][12];\nint acs[52];\nint minu[52];\nint check[52];\nint o;\nint num;\n\nmain(){\n  while(cin >> m >> t >> p >> r, m||t||p||r){\n    for(int i=1;i<=t;i++){\n      for(int j=1;j<=p;j++){\n        noa[i][j]=0;\n      }\n      acs[i]=0;\n      minu[i]=0;\n      check[i]=0;\n    }\n\n    for(int i=0;i<r;i++){\n      cin >> zi >> na >> mo >> ans;\n      if(ans==0){\n        acs[na]++;\n        minu[na]+=zi+noa[na][mo]*20;\n      }\n      else{\n        noa[na][mo]++;\n      }\n    }\n\n    for(int i=0;i<t;i++){\n      num=-1;\n      for(int j=t;j>0;j--){\n        if(check[j]==0){\n          if(num==-1){\n            num=j;\n          }\n          else if(acs[num]<acs[j]){\n            num=j;\n          }\n          else if(acs[num]==acs[j] && minu[num]>minu[j]){\n            num=j;\n          }\n        }\n      }\n      if(i!=0){\n        if(minu[num]==minu[o] && acs[num]==acs[o]){\n          cout << \"=\";\n        }\n        else{\n          cout << \",\";\n        }\n      }\n      cout << num;\n      check[num]=1;\n      o=num;\n    }\n    cout << endl;\n  }\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n\nusing namespace std;\n\nstruct team{\n    int ac,time,num;\n    team(int ac,int time,int num):\n    ac(ac),time(time),num(num){}\n};\n\nauto operator < (const team &e,const team &f){\n    if(e.ac!=f.ac)return e.ac>f.ac;\n    else if(e.time!=f.time)return e.time<f.time;\n    else return e.num>f.num;\n}\n\nint main(){\n    int M,T,P,R;\n    while(cin>>M>>T>>P>>R,M){\n        vector<team>tm;\n        int plus[100][100]={};\n        for(int i=0;i<T;++i){\n            tm.emplace_back(0,0,i);\n        }\n        for(int i=0;i<R;++i){\n            int m,t,p,j;\n            cin>>m>>t>>p>>j;\n            --t;\n            if(!j){\n                tm[t].time+=m+plus[t][p];\n                tm[t].ac++;\n            }else{\n                plus[t][p]+=20;\n            }\n        }\n        sort(tm.begin(),tm.end());\n        cout<<tm[0].num+1;\n        for(int i=1;i<T;++i){\n            if(tm[i-1].ac==tm[i].ac && tm[i-1].time==tm[i].time){\n                cout<<\"=\";\n            }else{\n                cout<<\",\";\n            }\n            cout<<tm[i].num+1;\n        }\n        cout<<endl;\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define rep(i,n) for(int i=0; i<n; i++)\n#define F first\n#define S second \nusing namespace std;\ntypedef pair<int,int> Pi;\n\nint main(){\n    int M,T,P,R;\n    while(cin >> M >> T >> P >> R,M|T|P|R){\n        vector<Pi> ST(T);\n        vector<vector<int> > cnt(T, vector<int>(P));\n        rep(i,R){\n            int m,t,p,r;\n            cin >> m >> t >> p >> r;\n            t--; p--;\n            if(r == 0){\n                ST[t].F++;\n                ST[t].S -= m+20*cnt[t][p];\n            }\n            else cnt[t][p]++;\n        }\n        vector<int> num(T);\n        iota(num.begin(),num.end(),0);\n        reverse(num.begin(),num.end());\n\t\tstable_sort(num.begin(),num.end(),[&](int i,int j){return ST[i]>ST[j];});\n\t\tcout << num[0]+1;\n        for(int i=1; i<T; i++){\n            if(ST[num[i]]==ST[num[i-1]]) cout << '=';\n            else cout << ',';\n            cout << num[i]+1;\n        }\n        cout << endl;\n    }\n    return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n\nusing namespace std;\n\nint main() {\n    while(true) {\n        int M, T, P, R;\n        cin >> M >> T >> P >> R;\n\n        if(M == 0 && T==0 && P == 0 && R == 0) return 0;\n\n        int m, t, p, j;\n        int result[T];\n        fill(result, result + T, 0);\n        int time[T];\n        fill(time, time + T, 0);\n        int failure[T][P];\n        fill(failure[0], failure[T] + P, 0);\n        for (int submit = 0; submit < R; submit++) {\n            cin >> m >> t >> p >> j;\n            if (j == 0) {\n                result[t - 1] += 1;\n                time[t - 1] += m + failure[t - 1][p-1] * 20;\n            } else {\n                ++failure[t - 1][p-1];\n            }\n        }\n\n        bool done[T];\n        fill(done, done + T, false);\n        int prevPoint, prevTime;\n        for (int count = 0; count < T; count++) {\n            int maxPoint = -1;\n            int maxTeam = 0;\n            int minTime = 100000;\n            for (int i = T - 1; i >= 0; i--) {\n                if (done[i]) continue;\n                if (maxPoint < result[i]) {\n                    maxPoint = result[i];\n                    maxTeam = i + 1;\n                    minTime = time[i];\n                } else if (maxPoint == result[i]) {\n                    if (minTime > time[i]) {\n                        minTime = time[i];\n                        maxTeam = i + 1;\n                    }\n                }\n            }\n            minTime = time[maxTeam - 1];\n            if (count != 0) {\n                if (maxPoint == prevPoint && minTime == prevTime) cout << \"=\";\n                else cout << \",\";\n            }\n            cout << maxTeam;\n            done[maxTeam - 1] = true;\n            prevPoint = maxPoint;\n            prevTime = minTime;\n        }\n        cout << endl;\n    }\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstdio>\n#include<vector> \n#include<algorithm>\nusing namespace std;\n\nclass Present{\npublic:\n  int m;\n  int t;\n  int p;\n  int j;\n  Present():m(0),t(0),p(0),j(0){}\n};\nclass Team{\npublic:\n  int num;\n  int solve;\n  int time;\n  Team():num(0),solve(0),time(0){}\n};\n\nbool compare_solve(const Team& left, const Team& right){\n  return left.solve > right.solve;\n}\nbool compare_time(const Team& left, const Team& right){\n  return left.time <= right.time;\n}\n\nint main(){\n  int H, T, P, R;\n  for(;;){\n    scanf(\"%d %d %d %d\", &H, &T, &P, &R);\n    if( H == 0 && T == 0 && P == 0 && R == 0)\n      return 0;\n    vector<Present>  *pr = new vector<Present>(R);\n    for(int i = 0; i < R; i++){\n      scanf(\"%d %d %d %d\", &pr->at(i).m, &pr->at(i).t, &pr->at(i).p, &pr->at(i).j);\n    }\n    vector<Team> *team = new vector<Team>(T);\n    for(int i = 0; i < T; i++){  \n      team->at(i).num = i + 1;\n      for(int j = 0; j < R; j++){\n\tif(pr->at(j).t == team->at(i).num){\n\t  if(pr->at(j).j == 0){\n\t    team->at(i).solve += 1; \n\t    team->at(i).time += pr->at(j).m;\n\t    for(int k = 0; k < R; k++){\n\t      if(pr->at(k).t == team->at(i).num && pr->at(k).p == pr->at(j).p && pr->at(k).j != 0 )\n\t\tteam->at(i).time += 20;\n\t    }\n\t  }\n\t}\n      }\n    }\n    sort(team->begin(),team->end(),compare_time);\n    stable_sort(team->begin(),team->end(),compare_solve);\n    \n    cout << team->at(0).num;\n    for(int i = 1; i < T; i++){\n      if(team->at(i-1).solve == team->at(i).solve && team->at(i-1).time == team->at(i).time)\n\tcout << \"=\";\n      else\n\tcout << \",\";\n      cout << team->at(i).num;\n    }\n    cout << endl;\n    delete pr;\n    delete team;\n  }\n}"
  },
  {
    "language": "C++",
    "code": "//#include <bits/stdc++.h>\n\n#include <algorithm>\n#include <cstring>\n#include <functional>\n#include <iostream>\n#include <map>\n#include <set>\n#include <string>\n#include <utility>\n#include <vector>\n#define rep(i, n) for (int i = 0; i < (n); i++)\n#define loop(i, x, n) for (int i = (x); i < (n); i++)\n#define all(v) (v).begin(), (v).end()\n#define int long long\nusing namespace std;\nconst int MOD = 1e9 + 7;\nconst int INF = 1e10;\ntemplate<typename T> void cmax(T &a, T b) { a = max(a, b); }\ntemplate<typename T> void cmin(T &a, T b) { a = min(a, b); }\nint M, T, P, R;\nstruct Team {\n  int ACtime[11] = {-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1};\n  int WAcnt[11] = {};\n  int timecost = 0;\n  int ACcnt = 0;\n  int id;\n  bool operator<(const Team &o) const {\n    if (ACcnt == o.ACcnt) {\n      if (timecost == o.timecost) {\n        return id > o.id;\n      } else {\n        return timecost < o.timecost;\n      }\n    } else {\n      return ACcnt > o.ACcnt;\n    }\n  }\n};\nsigned main() {\n  while (cin >> M >> T >> P >> R) {\n    if (M == 0 && T == 0 && P == 0 && R == 0) break;\n    vector<Team> tm(T);\n    rep(i, T) tm[i].id = i + 1;\n    rep(i, R) {\n      int m, t, p, j;\n      cin >> m >> t >> p >> j;\n      t--;\n      p--;\n      if (j == 0) { // AC\n        tm[t].ACtime[p] = m;\n        tm[t].ACcnt++;\n      } else { // WA\n        // int tmp = tm[i].WAcnt[p];\n        // tmp++;\n        // tm[t].WAcnt[p] = tmp;\n        tm[t].WAcnt[p]++;\n      }\n    }\n    // rep(i, T) {\n    //   rep(j, P) cout << tm[i].WAcnt[j] << ' ';\n    //   cout << endl;\n    // }\n\n    // score計算\n    rep(i, T) rep(j, P) tm[i].timecost += (tm[i].ACtime[j] >= 0 ? tm[i].ACtime[j] + tm[i].WAcnt[j] * 20 : 0);\n    sort(all(tm));\n    // cout << '\\n';\n    //\n    // cout << \"id\" << ' ' << \"ACcnt\" << ' ' << \"timecost\" << endl;\n    // rep(i, T) { cout << tm[i].id << ' ' << tm[i].ACcnt << ' ' << tm[i].timecost << ' ' << endl; }\n    // cout << '\\n';\n\n    rep(i, T) {\n      if (i == 0)\n        cout << tm[i].id;\n      else {\n        if (tm[i - 1].ACcnt == tm[i].ACcnt && tm[i - 1].timecost == tm[i].timecost) {\n          cout << \"=\" << tm[i].id;\n        } else\n          cout << ',' << tm[i].id;\n      }\n    }\n    cout << endl;\n  }\n\n  return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\nusing namespace std;\n\nint M, T, P, R;\n\nstruct Team{\n\tint id, ac, timecost;\n\tint wa[11];\n\tTeam(int i){\n\t\tid = i;\n\t\tac = 0; timecost = 0;\n\t\tfor(int i = 0; i < 11; i++) wa[i] = 0;\n\t}\n};\n\nbool compare(const Team &a, const Team &b){\n\tif(a.ac != b.ac) return a.ac > b.ac;\n\telse if(a.timecost != b.timecost) return a.timecost < b.timecost;\n\telse return a.id > b.id;\n}\n\nint main(){\n\twhile(cin >> M >> T >> P >> R && M != 0){\n\t\tvector<Team> teams;\n\t\tfor(int i = 0; i < T; i++){\n\t\t\tTeam t(i);\n\t\t\tteams.push_back(t);\n\t\t}\n\n\t\tfor(int i = 0; i < R; i++){\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >>j;\n\t\t\tif(j == 0){\n\t\t\t\tteams[t-1].ac++;\n\t\t\t\tteams[t-1].timecost = m + teams[t-1].wa[p] * 20;\n\t\t\t}else{\n\t\t\t\tteams[t-1].wa[p]++;\n\t\t\t}\n\t\t}\n\n\t\tsort(teams.begin(), teams.end(), compare);\n\n\t\tint p_ac = -1, p_tc = -1;\n\t\tfor(int i = 0; i < T; i++){\n\t\t\tif(p_ac == teams[i].ac && p_tc == teams[i].timecost){\n\t\t\t\tcout << \"=\" << teams[i].id + 1;\n\t\t\t}else if(i != 0){\n\t\t\t\tcout << \",\" << teams[i].id + 1;\n\t\t\t\tp_ac = teams[i].ac;\n\t\t\t\tp_tc = teams[i].timecost;\n\t\t\t}else{\n\t\t\t\tcout << teams[i].id + 1;\n\t\t\t}\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define REP(i,n) for(int i=0; i<(int)(n); ++i)\n\nusing namespace std;\n\nstruct Team{\n    int solve;\n    int time;\n    int id;\n    vector<int> wa;\n    vector<bool> solved;\n    Team(int P){\n        solve = time = 0;\n        solved.resize(P);\n        wa.resize(P);\n    }\n    bool operator < (const Team& t) const {\n        if(solve != t.solve) return solve > t.solve;\n        if(time != t.time)  return time < t.time;\n        return id > t.id;\n    }\n};\n\nint main(){\n    int M, T, P, R;\n    while(cin >> M >> T >> P >> R && M > 0) {\n        vector<Team> teams(T, Team(P));\n        REP(i, T) teams[i].id = i + 1;\n\n        REP(i, R) {\n            int m, t, p, j;\n            cin >> m >> t >> p >> j;\n            t--;\n            p--;\n            if(j == 0) {\n                if(teams[t].solved[p]) continue;\n                teams[t].solved[p] = true;\n                teams[t].time += 20 * teams[t].wa[p] + m;\n                teams[t].solve += 1;\n            } else {\n                teams[t].wa[p] += 1;\n            }\n        }\n\n        sort(teams.begin(), teams.end());\n\n        for(int i = 0; i < T; i++) {\n            if(i > 0) {\n                if(teams[i - 1].solve == teams[i].solve && teams[i - 1].time == teams[i].time) {\n                    cout << \"=\";\n                } else {\n                    cout << \",\";\n                }\n            }\n            cout << teams[i].id;\n        }\n        cout << endl;\n    }\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\nusing namespace std;\n\nint main(){\n while(true){\n  int M, T, P, R;\n  cin >> M >> T >> P >> R;\n\n  if(M==0 && T==0 && P==0 && R==0) break;\n\n  int CP[50],  TT[50],  PT[50][10]; //正解数、時間計、ペナルティ\n  for(int i=0; i<T; i++){\n   CP[i] = TT[i] = 0;\n   for(int j=0; j<P; j++){\n    PT[i][j] = 0;\n   }\n  }\n\n  for(int i=0; i<R; i++){ //各チームの正解数、時間計を求める\n   int m, t, p, j;\n   cin >> m >> t >> p >> j;\n   \n   if(j==0){ //正解\n    CP[t-1]++;\n    TT[t-1] += (m+PT[t-1][p-1]);\n   }else{ //不正解\n    PT[t-1][p-1] += 20;\n   }\n  }\n\n   int t_now, t_pre = -1; //今のチーム、1つ前のチーム\n   bool flag[50]; //処理済みフラグ\n   for(int i=0; i<T; i++){\n    flag[i] = false;\n   }\n   \n   for(int i=0; i<T; i++){\n    t_now = -1;\n    for(int j=0; j<T; j++){ //今のチームを求める\n     if(flag[j]) continue;\n     if(t_now==-1){\n      t_now = j;\n     }else{\n      if(CP[j]>CP[t_now] || (CP[j]==CP[t_now] && TT[j]<=TT[t_now])){\n       t_now = j;\n      }\n     }\n    }\n\n    if(t_pre!=-1){\n     if(CP[t_now]==CP[t_pre] && TT[t_now]==TT[t_pre]){\n      cout << '=';\n     }else{\n      cout << ', ';\n     }\n    }\n    cout<<t_now+1;\n\n    flag[t_now] = true;\n    t_pre = t_now;\n   }\n   cout << endl;\n  }\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nstruct S {\n    int id, ac, time, wa[10];\n};\n\nbool comp(S a, S b) {\n    if (a.ac != b.ac) return a.ac > b.ac;\n    if (a.time != b.time) return a.time < b.time;\n    return a.id > b.id;\n}\n\nbool comp2(S a, S b) {\n    if (a.ac != b.ac) return a.ac > b.ac;\n    if (a.time != b.time) return a.time < b.time;\n    return false;\n}\n\nint main() {\n    int M, T, P, R;\n    while (cin >> M >> T >> P >> R, M) {\n        S team[50];\n        for (int i = 0; i < T; i++) {\n            team[i].id = i + 1;\n            team[i].ac = 0;\n            team[i].time = 0;\n            fill_n((int*)team[i].wa, 10, 0);\n        }\n        for (int i = 0; i < R; i++) {\n            int m, t, p, j;\n            cin >> m >> t >> p >> j;\n            t--;\n            p--;\n            if (!j) {\n                team[t].ac++;\n                team[t].time += m + team[t].wa[p] * 20;\n            } else {\n                team[t].wa[p]++;\n            }\n        }\n        sort(team, team + T, comp);\n        for (int i = 0; i + 1 < T; i++) {\n            cout << team[i].id;\n            if (comp2(team[i], team[i + 1])) {\n                cout << \",\";\n            } else {\n                cout << \"=\";\n            }\n        }\n        cout << team[T - 1].id << endl;\n    }\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n\nusing namespace std;\n\nclass Question{\npublic:\n    bool isAC;\n    int p;\n\n    Question() : isAC(false),p(0){}\n};\nclass Team{\npublic:\n    int ID;\n    int AC;\n    int ptime;\n    vector<Question> q;\n\n    Team() : ID(-1){}\n    Team(int id,int qn)\n        : ID(id), q(qn+1) , ptime(0), AC(0)\n    {\n    }\n\n    void submit(int m,int p,int j){\n        if(j == 0){\n            q[p].p += m;\n            q[p].isAC = true;\n            AC++;\n            ptime += q[p].p;\n        }else{\n            q[p].p += 20;\n        }\n    }\n};\n\nbool operator==(const Team& a,const Team& b){\n    return a.AC == b.AC && a.ptime == b.ptime;\n}\nbool operator!=(const Team& a,const Team& b){\n    return !(a == b);\n}\n\n//M:テァツオツづ、ツコツ?ヲツ卍づゥツ鳴?\n//T:テ」ツδ?」ツδシテ」ツδ?ヲツ閉ー\n//P:テ・ツ閉湘ゥツ。ツ古ヲツ閉ー\n//R:テヲツ渉静・ツ?コテヲツ閉ー\nvoid solve(int M,int T,int P,int R){\n    vector<Team> team;\n    for(int i=1;i<=T;i++){\n        team.push_back(Team(i,P));\n    }\n    for(int i=0;i<R;i++){\n        int m,t,p,j;\n        cin >> m >> t >> p >> j;\n        team[t-1].submit(m,p,j);\n    }\n    std::sort(team.begin(),team.end(),\n            [](const Team& a,const Team& b)->bool{\n                if(a.AC < b.AC)\n                    return true;\n                if(a.AC > b.AC)\n                    return false;\n                if(a.ptime > b.ptime)\n                    return true;\n                return a.ID < b.ID;\n            }\n            );\n    std::reverse(team.begin(),team.end());\n    bool f = false;\n    //for(auto t : team)\n    //{\n    //    cout << t.ID << \" :\" << t.AC << \" ,\" << t.ptime << endl;\n    //}\n    cout << team[0].ID;\n    for(int i=1;i<T;i++){\n        if(team[i-1] == team[i]){\n            cout << \"=\" << team[i].ID;\n        }else{\n            cout << \",\" << team[i].ID;\n        }\n    }\n    cout << endl;\n}\n\nint main(){\n    while(true){\n        int M,T,P,R;\n        cin >> M >> T >> P >> R;\n        if(!M&&!T&&!P&&!R)\n            return 0;\n        solve(M,T,P,R);\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\n\nusing namespace std;\n\nclass team\n{\npublic:\n\tint number;\n\tint alltime;\n\tint acnum;\n\tint wa[11];\n\tteam(){}\n\tbool operator<(const team &t)const\n\t{\n\t\treturn acnum==t.acnum?alltime==t.alltime?number>t.number:alltime<t.alltime:acnum>t.acnum;\n\t}\n\tbool operator==(const team &t)const\n\t{\n\t\treturn acnum==t.acnum&&alltime==t.alltime;\n\t}\n};\n\nint main()\n{\n\tint m,t,p,r;\n\twhile(1)\n\t{\n\t\tcin>>m>>t>>p>>r;\n\t\tif(!(m||t||p||r))break;\n\t\tteam te[50];\n\t\tfor(int i=0;i<t;i++)\n\t\t{\n\t\t\tte[i]=team();\n\t\t\tte[i].number=i;\n\t\t}\n\t\tint a,b,c,d;\n\t\tfor(int i=0;i<r;i++)\n\t\t{\n\t\t\tcin>>a>>b>>c>>d;\n\t\t\tif(d)te[--b].wa[c]++;\n\t\t\telse\n\t\t\t{\n\t\t\t\tb--;\n\t\t\t\tte[b].acnum++;\n\t\t\t\tte[b].alltime+=a+20*te[b].wa[c];\n\t\t\t}\n\t\t}\n\t\tsort(te,te+t);\n\t\tfor(int i=0;i<t;i++)\n\t\t{\n\t\t\tif(i)\n\t\t\t{\n\t\t\t\tif(te[i-1]==te[i])cout<<\"=\";\n\t\t\t\telse cout<<\",\";\n\t\t\t}\n\t\t\tcout<<te[i].number+1;\n\t\t}\n\t\tcout<<endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <stdio.h>\n#include <iostream>\n#include <algorithm>\n#include <vector>\n\nusing namespace std;\n\nstruct Team{\n\tint s_point, s_time, num;\n\tint w_prob[10];\n\t\n\tbool operator<(const Team& another) const{\n\t\tif (s_point != another.s_point){\n\t\t\treturn (s_point > another.s_point);\n\t\t}\n\t\tif (s_time != another.s_time){\n\t\t\treturn (s_time < another.s_time);\n\t\t}\n\t\treturn(num > another.num);\n\t}\n};\n\nint main(void)\n{\n\tint i, j;\n\tvector<Team> team(50);\n\n\twhile(1)\n\t{\n\t\tint m, p ,t, r;\n\t\tint m2, p2, t2, r2;\n\n\t\tscanf(\"%d %d %d %d\", &m, &t, &p, &r);\n\t\tif (m == 0) break;\n\t\t\n\t\tfor (i = 0; i < t; i++){\n\t\t\t team[i].num = i+1;\n\t\t\t team[i].s_point = 0;\n\t\t\t team[i].s_time = 0;\n\t\t\t for (j = 0; j < p; j++) team[i].w_prob[j] = 0;\n\t\t}\n\n\t\tfor (i = 0; i < r; i++){\n\t\t\tscanf(\"%d %d %d %d\", &m2, &t2, &p2, &r2);\n\t\t\tif (r2 == 0){\n\t\t\t\tteam[t2 - 1].s_point++;\n\t\t\t\tteam[t2 - 1].s_time += m2 + 20 * team[t2 - 1].w_prob[p2 - 1];\n\t\t\t}\n\t\t\telse{\n\t\t\t\tteam[t2 - 1].w_prob[p2 - 1]++;\n\t\t\t}\n\t\t}\n\n\t\tsort(team.begin(), team.begin() + t );\n\t\tfor (i = 0; i < t; i++){\n\t\t\tprintf(\"%d\", team[i].num);\n\t\t\tif (i != t - 1 && team[i].s_point == team[i + 1].s_point && team[i].s_time == team[i + 1].s_time){\n\t\t\t\tprintf(\"=\");\n\t\t\t}\n\t\t\telse if (i != t - 1){\n\t\t\t\tprintf(\",\");\n\t\t\t}\n\t\t}\n\t\tprintf(\"\\n\");\n\t}\n\t\n\treturn(0);\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<vector>\n#include<algorithm>\nusing namespace std;\n\tint m,t,p,r;\nstruct team{\nint id=0;\nint ac=0;\nint time[100];\nbool ok[200];\n};\nint or(team a,team b){//aのほうが強ければ1,bなら0,同じなら2\n\nif(a.ac>b.ac)return 1;\nelse if(a.ac<b.ac)return 0;\nint at=0,bt=0;\nfor(int i=0;i<=p;i++){\nif(a.ok[i]==true)at+=a.time[i];\nif(b.ok[i]==true)bt+=b.time[i];\n}\nif(at<bt)return 1;\nelse if(at>bt)return 0;\nelse return 2;\n}\nint main(){\n\n\twhile(true){\n\tcin>>m>>t>>p>>r;\n\tif(m+t+p+r==0)break;\n\tvector<team>ta(0);\n\tta.resize(200);\n\n\tfor(int i=0;i<=t;i++)for(int j=0;j<200;j++)ta[i].time[j]=0,ta[i].ok[j]=0;\n\tfor(int i=0;i<=t;i++)ta[i].id=i,ta[i].ac=0;\n\tfor(int i=0;i<r;i++){\n\tint a,b,c,d;\n\tcin>>a>>b>>c>>d;//a:経過時間:bチーム番号c:問題番号j:0奈良正解それ以外不正解\n\tif(d==0){\n\tta[b].time[c]+=a;\n\tta[b].ac++;\n\tta[b].ok[c]=true;\n\t}\n\telse {\n\tta[b].time[c]+=20;\n\t}\n\t}\n\tta.erase(ta.begin());\n\tfor(int i=0;i<t;i++){\n\tfor(int j=0;j<t;j++){\n\tif(or(ta[i],ta[j])==1)swap(ta[i],ta[j]);\n\tif(or(ta[i],ta[j])==2&&ta[i].id>ta[j].id)swap(ta[i],ta[j]);\n\t}\n\t}\n\tfor(int i=0;i<t-1;i++){\n\tif(or(ta[i],ta[i+1])!=2)cout<<ta[i].id<<\",\";\n\telse cout<<ta[i].id<<\"=\";\n\t}\n\tcout<<ta[t-1].id<<endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n#include <utility>\n\nusing namespace std;\n\nconst int T = 50, P = 10;\n\nstruct team{\n\tint id, time, score;\n\tint counts[P];\n};\n\nteam teams[T] = { };\n\nbool comp(const team& a, const team& b){\n\tif(a.score == b.score){\n\t\tif(a.time == b.time){\n\t\t\treturn a.id > b.id;\n\t\t}\n\t\treturn a.time < b.time;\n\t}\n\telse{\n\t\treturn a.score > b.score;\n\t}\n}\n\nint main(){\n\tint m, t, p, r;\n\twhile(cin >> m >> t >> p >> r){\n\t\tint a, b, c, d;\n\t\tfor(int i = 0;i < t;++i){\n\t\t\tteams[i].id = i + 1;\n\t\t\tteams[i].time = teams[i].score = 0;\n\t\t\tfill(teams[i].counts, teams[i].counts + P, 0);\n\t\t}\n\t\tfor(int i = 0;i < r;++i){\n\t\t\tcin >> a >> b >> c >> d;\n\t\t\t--b;\n\t\t\tif(!d){\n\t\t\t\tteams[b].time += a + teams[b].counts[--c] * 20;\n\t\t\t\t++teams[b].score;\n\t\t\t}\n\t\t\telse{\n\t\t\t\t++teams[b].counts[--c];\n\t\t\t}\n\t\t}\n\t\tsort(teams, teams + t, comp);\n\t\tfor(int i = 0;i < t;++i){\n\t\t\tif(i > 0){\n\t\t\t\tif(teams[i - 1].time == teams[i].time && teams[i - 1].score == teams[i].score) cout << \"=\";\n\t\t\t\telse cout << \",\";\n\t\t\t}\n\t\t\tcout << teams[i].id;\n\t\t\tif(i == t - 1) cout << endl;\n\t\t}\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<string.h>\nusing namespace std;\n\nconst int INF=50000000;\n\nint data[51][12];\n\nint main(){\n\tint M,T,P,R;\n\twhile(cin>>M>>T>>P>>R && M){\n\t\tfill((int*)data,(int*)(data+51),0);\n\t\tfor(int i=0;i<R;i++){\n\t\t\tint m,t,p,j;\n\t\t\tcin>>m>>t>>p>>j;\n\t\t\tif(j==0){\n\t\t\t\tdata[t][0]++;\n\t\t\t\tdata[t][11]+=m+data[t][p]*20;\n\t\t\t}\n\t\t\telse data[t][p]++;\n\t\t}\n\t\tint prev[2]={INF,0};\n\t\tfor(int i=0;i<T;i++){\n\t\t\tint ans=0;\n\t\t\tint now[2]={0,INF};\n\t\t\tfor(int j=T;j>=0;j--){\n\t\t\t\tif(data[j][0]>now[0]){\n\t\t\t\t\tnow[0]=data[j][0];\n\t\t\t\t\tnow[1]=data[j][11];\n\t\t\t\t\tans=j;\n\t\t\t\t}\n\t\t\t\telse if(data[j][0]==now[0] && data[j][11]<now[1]){\n\t\t\t\t\tnow[1]=data[j][11];\n\t\t\t\t\tans=j;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(i){\n\t\t\t\tif(memcmp(now,prev,sizeof(now))==0)cout<<\"=\";\n\t\t\t\telse cout<<\",\";\n\t\t\t}\n\t\t\tcout<<ans;\n\t\t\tmemcpy(prev,now,sizeof(now));\n\t\t\tdata[ans][0]=-1;\n\t\t}\n\t\tcout<<endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include <stdio.h>\n#include<algorithm>\n#include<iostream>\n#include<string.h>\nusing namespace std;\ntypedef pair<int,int> P;\ntypedef pair<int,pair<int,int> > L;\nint main(void) {\n  P team[55][12];\n  L mama[55];\n  int M, T, Q, R;\n  int m, t, p, j;\n  while(1){\n    memset(team,0,sizeof(team));\n    memset(mama,0,sizeof(mama));\n    scanf(\"%d %d %d %d\", &M, &T, &Q, &R);\n    if(M==0 & T==0) break;\n    for ( int i = 0; i < R; i++ ) {\n      scanf(\"%d%d%d%d\",&m,&t,&p,&j);\n      t--;\n      if(j==0) team[t][p]=P(m+team[t][p].first,1);\n      else team[t][p]=P(20+team[t][p].first,0);\n    }\n\n    for(int i=0;i<T;i++){\n      for(int l=1;l<=Q;l++){\n        if(team[i][l].second==1){\n          mama[i].first--;\n          mama[i].second.first+=team[i][l].first;\n        }\n      }\n\n      mama[i].second.second= -i;\n    }\n\n    sort(mama,mama+T);\n\n//    for(int i=0;i<T;i++) cout << \"first :\" << mama[i].first << \"second.first :\" << mama[i].second.first << \"second.second :\" << mama[i].second.second << endl;\n\n    printf(\"\\n\");\n    for(int i=0;i<T;i++){\n    if(i==T-1) {\n      printf(\"%d\",-mama[i].second.second+1);\n      break;\n    }\n    if(mama[i].first==mama[i+1].first && mama[i].second.first == mama[i+1].second.first){\n      printf(\"%d=\",-mama[i].second.second+1);\n    }\n    else  printf(\"%d,\",-mama[i].second.second+1);\n    }\n  }\n\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\n#define fst(t) std::get<0>(t)\n#define snd(t) std::get<1>(t)\n#define thd(t) std::get<2>(t)\n#define fth(t) std::get<3>(t)\n#define unless(p) if(!(p))\n#define until(p) while(!(p))\n\nusing ll = long long;\nusing P3 = std::tuple<int,int,int>;\n\nconst int dx[8] = {-1, 1, 0, 0, -1, -1, 1, 1}, dy[8] = {0, 0, -1, 1, -1, 1, -1, 1};\n\nP3 ps[60];\nbool solved[60][20];\nint WAs[60][20];\n\nint main(){\n    std::cin.tie(nullptr);\n    std::ios::sync_with_stdio(false);\n\n    while(true){\n        int M, T, P, R;\n        std::cin >> M >> T >> P >> R;\n        if(!M){break;}\n    \n        for(int i=1;i<=T;++i){\n            ps[i] = std::make_tuple(0, 0, 0);\n        }\n        memset(solved, 0, sizeof(solved));\n        memset(WAs, 0, sizeof(WAs));\n    \n        for(int i=0;i<R;++i){\n            int tid, pid, t, c;\n\n            std::cin >> t >> tid >> pid >> c;\n\n            if(solved[tid][pid]){continue;}\n            if(c == 0){\n                ++fst(ps[tid]);\n                snd(ps[tid]) += WAs[tid][pid] * 20 + t;\n                solved[tid][pid] = true;\n            }else{\n                ++WAs[tid][pid];\n            }\n        }\n\n        for(int i=1;i<=T;++i){\n            fst(ps[i]) = -fst(ps[i]);\n            thd(ps[i]) = -i;\n        }\n\n        sort(ps+1, ps+1+T);\n\n        for(int i=1,j=1;i<=T;i=j){\n            if(i > 1){\n                std::cout << \",\";\n            }\n            \n            while(j <= T && std::make_tuple(fst(ps[j]), snd(ps[j])) == std::make_tuple(fst(ps[i]), snd(ps[i]))){\n                if(j > i){std::cout << \"=\";}\n                std::cout << (-thd(ps[j]));\n                ++j;\n            }\n        }\n\n        std::cout << std::endl;\n    }\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n//#include<fstream>\n#include<vector>\n\nusing namespace std;\n\nint main(){\n\t\n\t//ifstream fin;\n\t//fin.open(\"input.txt\");\n\n\tint M, T, P, R;//input\n\tint m, t, p, j;//input\n\n\tint time[50];\t//経過時間\n\tint solve[50];\t//正解数\n\tint miss[50][10];\t//間違えた数\n\tint count,teamcount;\n\tvector<int> v,s;//解けた問題数ごとに...\n\t\n\twhile(true){\n\t\tfor (int i = 0; i < 50; i++){//初期化\n\t\t\tfor (int k = 0; k < 10; k++)miss[i][k] = 0;\n\t\t\ttime[i] = solve[i] = 0;\n\t\t}\n\t\tM = T = P = R = m = t = p = j = 0;\n\n\t\tcin >> M >> T >> P >> R;\n\t\tif (M == 0)break;\n\n\t\twhile (R > 0){//結果計算\n\t\t\tR--;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tt--;\n\t\t\tif (j == 0){\n\t\t\t\ttime[t] += m;\n\t\t\t\ttime[t] += miss[t][p] * 20;\n\t\t\t\tsolve[t]++;\n\t\t\t}\n\t\t\telse miss[t][p]++;\n\t\t}\n/*\n\t\tfor (int i = 0; i < T; i++){//チーム別表示\n\t\t\tcout << \"チーム\" << i+1 << endl << \" 経過時間：\" << time[i] << \" 回答数：\" << solve[i];\n\t\t\tcout << endl;\n\t\t}\t\t*/\n\n\t\t//以下ソート\n\t\tcount = 0;//初期化\n\t\tteamcount = 0;\n\t\tfor (int i = 0; i < T; i++)if (count < solve[i])count = solve[i];//countを解けた問題数の最大値に\n\n\t\twhile (count >= 0){\n\t\t\tfor (int i = 0; i < T; i++)if (count == solve[i]){\n\t\t\t\tv.push_back(i);//countだけ解けたチームを記憶\n\t\t\t\ts.push_back(time[i]);//解けたチームの時間を記憶\n\t\t\t\tteamcount++;//pushしたチーム数を記憶\n\t\t\t}\n\n\t\t\t//バブルソート\n\t\t\tif (s.size() > 1){\n\t\t\t\tfor (int i = 0; i < (int)v.size() - 1; i++)\n\t\t\t\t\tfor (int k = (int)v.size() - 1; k > i; k--){//時間順にソート\n\t\t\t\t\t\tif (s[k] > s[k - 1]){\n\t\t\t\t\t\t\tint tmp = s[k];\n\t\t\t\t\t\t\tint temp = v[k];\n\n\t\t\t\t\t\t\ts[k] = s[k - 1];\n\t\t\t\t\t\t\tv[k] = v[k - 1];\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\ts[k - 1] = tmp;\n\t\t\t\t\t\t\tv[k - 1] = temp;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t}\n\t\t\tif (v.size() > 1){\n\t\t\t\tfor (int i = 0; i < (int)v.size() - 1; i++)\n\t\t\t\t\tfor (int k = (int)v.size() - 1; k > i; k--)\n\t\t\t\t\t\tif (s[k] == s[k - 1] && v[k] < v[k - 1]){//時間が同じときにチーム番号でソート\n\t\t\t\t\t\t\tint tmp = v[k];\n\t\t\t\t\t\t\tv[k] = v[k - 1];\n\t\t\t\t\t\t\tv[k - 1] = tmp;\n\t\t\t\t\t\t}\n\t\t\t}\n\t\t\t//ソート終了\n\n\t\t\t//output\n\t\t\twhile (v.size() > 2){\n\t\t\t\tif (s[v.size() - 1] == s[v.size() - 2])\n\t\t\t\t\tcout << v.back() + 1 << '=';\n\t\t\t\telse cout << v.back() + 1 << \",\";\n\t\t\t\tv.pop_back();\n\t\t\t}\n\t\t\tif (v.size() == 2){//最後の二つだけ例外処理\n\t\t\t\tif (s[1] == s[0])\n\t\t\t\t\t cout << v.back()+1 << \"=\";\n\t\t\t\telse cout << v.back()+1 << ',';\n\t\t\t\t\tv.pop_back();\n\t\t\t\t\tcout << v.back()+1;\n\t\t\t\t\tv.pop_back();\n\t\t\t\t\tif (teamcount != T)cout << ',';\n\t\t\t}\n\t\t\tif (v.size() == 1){//一つ残ったとき\n\t\t\t\tcout << v.back() + 1;\n\t\t\t\tif(teamcount != T)cout << ',';\n\t\t\t\tv.pop_back();\n\t\t\t}\n\t\t\tv.clear();//vector初期化\n\t\t\ts.clear();\n\t\t\tcount--;\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#define max_T 50\n#define max_P 10\n\nusing namespace std;\n\nint cmp(const void *,const void *);\n\nint main(void){\n\tfor(int M,T,P,R;cin >> M >> T >> P >> R,M;){\n\t\tint solve[max_T][3]={0};\n\t\tfor(int i=0;i<T;i++)\n\t\t\tsolve[i][0]=i+1;\n\n\t\tint p_min[max_T][max_P]={0};\n\t\tfor(int m,t,p,j,i=0;i<R&&cin >> m >> t >> p >> j;i++){\n\t\t\tp_min[t-1][p-1]+=j?20:m;\n\t\t\tif(!j){\n\t\t\t\tsolve[t-1][1]++;\n\t\t\t\tsolve[t-1][2]+=p_min[t-1][p-1];\n\t\t\t}\n\t\t}\n\n\t\tqsort((void *)solve,T,sizeof(solve[0]),cmp);\n\n\t\tfor(int i=0;i<T;i++)\n\t\t\tcout << solve[i][0] << (i<T-1?solve[i][1]!=solve[i+1][1]||solve[i][2]!=solve[i+1][2]?\",\":\"=\":\"\");\n\t\tcout << endl;\n\t}\n}\n\nint cmp(const void *a,const void *b){\n\tint *s[2]={(int *)a,(int *)b},ret;\n\n\tif(s[0][1]>s[1][1])\n\t\tret=-1;\n\telse if(s[0][1]<s[1][1])\n\t\tret=1;\n\telse\n\t\tif(s[0][2]<s[1][2])\n\t\t\tret=-1;\n\t\telse if(s[0][2]>s[1][2])\n\t\t\tret=1;\n\t\telse\n\t\t\tret=s[0][0]>s[1][0]?-1:1;\n\n\treturn ret;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n#include <iomanip>\n#include <map>\n#include <set>\n#include <queue>\n#include <stack>\n#include <numeric>\n#include <bitset>\n#include <cmath>\n\nstatic const int MOD = 1000000007;\nusing ll = long long;\nusing u32 = uint32_t;\nusing namespace std;\n\ntemplate<class T> constexpr T INF = ::numeric_limits<T>::max() / 32 * 15 + 208;\n\nint main() {\n    int m, t, p, r;\n    while(cin >> m >> t >> p >> r, m){\n        vector<array<int, 3>> v(t);\n        vector<vector<int>> u(t, vector<int>(p));\n        for (int i = 0; i < t; ++i) {\n            v[i][2] = i+1;\n        }\n        for (int i = 0; i < r; ++i) {\n            int a, b, c, d;\n            scanf(\"%d%d%d%d\", &a, &b, &c, &d);\n            if(d == 0){\n                v[b-1][0]++;\n                v[b-1][1] -= a+u[b-1][c-1];\n            }else {\n                u[b-1][c-1] += 20;\n            }\n        }\n        sort(v.begin(), v.end(), greater<>());\n        printf(\"%d\", v[0][2]);\n        for (int i = 1; i < t; ++i) {\n            if(v[i-1][0] == v[i][0] && v[i-1][1] == v[i][1]) printf(\"=\");\n            else printf(\",\");\n            printf(\"%d\", v[i][2]);\n        }\n        puts(\"\");\n    }\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#define _CRT_SECURE_NO_WARNINGS\n\n#include<fstream>\n#include<iostream>\n#include <stdio.h>\n#include <functional>\n#include<string>\n#include<iomanip>\n#include<list>\n#include<math.h>\n#include<stack>\n#include<queue>\n#include<vector>\n#include<algorithm>\n#include<utility>\n\nusing namespace std;\n\nstring x(string s, const string cs, const string se) {\n\tint pos = 0;\n\twhile ((pos = s.find_first_of(se)) != string::npos) {\n\t\ts.replace(pos, 1, cs);\n\t}\n\treturn s;\n}\n\nstring y(string a) {\n\tint pos4 = 0, pos9 = 0;\n\ta = x(a, \"3\", \"5\");\n\ta = x(a, \"5\", \"6\");\n\ta = x(a, \"6\", \"7\");\n\ta = x(a, \"7\", \"8\");\n\tint pos = a.length();\n\tif ((pos4 = a.find_first_of(\"4\")) != string::npos && (pos9 = a.find_first_of(\"9\")) != string::npos)\n\t{\n\t\tif (pos4 > pos9) {//4>9\n\t\t\ta = a.replace(pos9, 1, \"7\");\n\t\t\tpos = pos9 + 1;\n\t\t}\n\t\telse {\n\t\t\ta = a.replace(pos4, 1, \"3\");\n\t\t\tpos = pos4 + 1;\n\t\t}\n\t}\n\telse if ((pos4 = a.find_first_of(\"4\")) != string::npos) {\n\t\ta = a.replace(pos4, 1, \"3\");\n\t\tpos = pos4 + 1;\n\t}\n\telse if ((pos9 = a.find_first_of(\"9\")) != string::npos) {\n\t\ta = a.replace(pos9, 1, \"7\");\n\t\tpos = pos9 + 1;\n\t}\n\twhile (pos != a.length()) {\n\t\ta = a.replace(pos, 1, \"7\");\n\t\tpos++;\n\t}\n\treturn a;\n}\n\nint n;\nint m;\nint aji[100000];\n\nint saiki(){\n\treturn 0;\n}\n\nint main(){\n\tint m, t, p, r;\n\twhile (cin >> m >> t >> p >> r && !(m == 0 && t == 0 && p == 0 && r == 0)){\n\t\tvector<pair<int, pair<int, int>>> juni; // 正解数 時間 チーム名(答えのためのvector)\n\t\tint teamscore[50]; // 各チームのスコア\n\t\tint teamsecond[50]; // 各チームの時間\n\t\tint teamincorr[50][2000]; // 各チーム各問題の間違えた回数\n\t\tint teamincorrcnt[50]; // 各チームの正解した問題の間違えた回数\n\t\tfor (int i = 0; i < 50; i++) {\n\t\t\tteamscore[i] = 0;\n\t\t\tteamsecond[i] = 100000;\n\t\t\tteamincorrcnt[i] = 0;\n\t\t\tfor (int j = 0; j < 2000; j++) {\n\t\t\t\tteamincorr[i][j] = 0;\n\t\t\t}\n\t\t}\n\t\tfor (int i = 0; i < r; i++) {\n\t\t\tint mk, tk, pk, jk;\n\t\t\tcin >> mk >> tk >> pk >> jk;\n\t\t\tif (jk == 0) { // 正解\n\t\t\t\tteamscore[tk - 1]++; // 正解数を増やす\n\t\t\t\tteamincorrcnt[tk - 1] += teamincorr[tk - 1][pk];\n\t\t\t\tteamsecond[tk - 1] = 100000 - (mk + 20 * teamincorrcnt[tk - 1]);\n\t\t\t}\n\t\t\telse { // 間違い\n\t\t\t\tteamincorr[tk - 1][pk]++;\n\t\t\t}\n\t\t}\n\t\tfor (int i = 0; i < t; i++) {\n\t\t\tjuni.push_back(make_pair(teamscore[i], make_pair(teamsecond[i], i + 1)));\n\t\t}\n\t\tsort(juni.begin(), juni.end());\n\n\t\tint score = -1;\n\t\tint jikan = -1;\n\t\tfor (int i = t - 1; i >= 0; i--) {\n\t\t\tif (i != t - 1) {\n\t\t\t\tif (score == juni[i].first && jikan == juni[i].second.first) {\n\t\t\t\t\tcout << \"=\";\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tcout << \",\";\n\t\t\t\t}\n\t\t\t}\n\t\t\tcout << juni[i].second.second;\n\t\t\tscore = juni[i].first;\n\t\t\tjikan = juni[i].second.first;\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\nusing namespace std;\nint main(){\n  int a,b,c,d,a1,b1,c1,d1,i,j;\n  while(cin>>a1>>b1>>c1>>d1,a1){\n    int t[55][2]={0},q[51][11]={0};\n  while(d1--){\n    cin>>a>>b>>c>>d;\n    if(d){\n      q[b][c]++;\n    }\n    else{\n      if(q[b][c])t[b][1]+=20*q[b][c];\n      t[b][1]+=a;\n      t[b][0]++;\n  }\n  }\n  int w,pre=-9,pr=-2,max,lp=0;\n  for(i=1;i<b1+1;i++){\n    max=w=-1;\n    for(j=b1;j>0;j--){\n      if(max<t[j][0]){max=t[j][0];w=j;}\n      else if(max==t[j][0]){\n\tif(t[j][1]<t[w][1]){max=t[j][0];w=j;}\n      }\n    }\n    if(lp){\n      if(pre==t[w][0]&&pr==t[w][1])cout<<'='<<w;\n      else cout<<','<<w;\n    }\n    else cout<<w;\n    pre=t[w][0];\n    pr=t[w][1];\n    t[w][0]=-1;\n    lp++;\n  }\n  cout<<endl;\n  }\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <map>\n#include <algorithm>\n#include <utility>\n#include <cmath>\nusing P = std::pair<int, int>;\nusing namespace std;\n\nstruct team_data {\n    int team_num = -1;\n    int solved_num = 0;\n    int sum_time = 0;    // minute\n    //vector<int> solved_time;\n    vector<int> penalty;\n};\n\nint main() {\n    int M, T, P, R;\n    while(cin >> M >> T >> P >> R, M) {\n        vector<team_data> v(T);\n        for(int i=0; i<v.size(); ++i) {\n            v[i].team_num = i+1;\n            v[i].penalty.resize(P);\n        }\n        for(int i=0; i<R; ++i) {\n            int m, t, p, j;\n            cin >> m >> t >> p >> j;\n            if(j != 0) {\n                v[t-1].penalty[p-1] += 20;\n            } else {\n                v[t-1].sum_time += m;\n                v[t-1].solved_num += 1;\n                v[t-1].sum_time += v[t-1].penalty[p-1];\n            }\n        }\n        vector<vector<team_data>> v2(P);\n        for(auto& x : v) {\n            v2[x.solved_num].push_back(x);\n        }\n        for(auto& x : v2) {\n            sort(x.begin(), x.end(), [](team_data const& t1, team_data const& t2) {\n                    return t1.team_num > t2.team_num;\n                    });\n            stable_sort(x.begin(), x.end(), [](team_data const& t1, team_data const& t2) {\n                    return t1.sum_time < t2.sum_time;\n                    });\n        }\n        vector<team_data> ret;\n        for(int i=v2.size()-1; i>=0; --i) {\n            for(auto& x2 : v2[i]) {\n                ret.push_back(x2);\n            }\n        }\n        for(int i=0; i<ret.size(); ++i) {\n            if(i != 0) {\n                if(ret[i-1].solved_num == ret[i].solved_num) {\n                    if(ret[i-1].sum_time == ret[i].sum_time) cout << '=';\n                    else cout << ',';\n                } else {\n                    cout << ',';\n                }\n            }\n            cout << ret[i].team_num;\n        }\n        cout << endl;\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<vector>\n#include<algorithm>\nusing namespace std;\n\nint main(){\n  int M,T,P,R;\n  while(cin >> M >> T >> P >> R){\n    if(M==0)break;\n    vector<int> times(T,0), solved(T,0);\n    vector< vector<int> > WA(T, vector<int>(10,0) );\n\n    for(int i=0;i<R;i++){\n      int m,t,p,j;\n      cin >> m >> t >> p >> j;\n      t--; p--;\n      if(j==0){\n\tsolved[t]++;\n\ttimes[t] += m + WA[t][p] * 20;\n      }else{\n\tWA[t][p]++;\n      }\n    }\n\n    vector< vector<int> > rank;\n    for(int i=0;i<T;i++){\n      vector<int> tmp;\n      tmp.push_back(-solved[i]);\n      tmp.push_back(times[i]);\n      tmp.push_back(-i);\n     \n      rank.push_back(tmp);\n    }\n\n    sort(rank.begin(),rank.end());\n\n    for(int i=0;i<T;i++){\n      cout << -rank[i][2]+1;\n      if(i+1==T)cout << endl;\n      else if(rank[i][0] == rank[i+1][0] && rank[i][1] == rank[i+1][1]){\n\tcout << \"=\";\n      }else cout << \",\";\n    }\n  }\n}"
  },
  {
    "language": "C++",
    "code": "#include <cmath>\n#include <bitset>\n#include <cstdio>\n#include <cstdlib>\n#include <cstring>\n#include <iostream>\n#include <algorithm>\n\nusing namespace std;\n\nclass team\n{\npublic:\n\tint num;\t// number of team\n\tint cnt;\t// solved problems\n\tint tim;\t// total consumed time\n\n\tteam(void) {};\n\tteam(int _num, int _cnt, int _tim) :\n\t\tnum(_num), cnt(_cnt), tim(_tim) {};\n\n\tfriend bool operator == (const team &a, const team &b)\n\t{\n\t\treturn a.cnt == b.cnt && a.tim == b.tim;\n\t}\n\n\tfriend bool operator < (const team &a, const team &b)\n\t{\n\t\tif (a.cnt != b.cnt)\n\t\t\treturn a.cnt > b.cnt;\n\t\telse if (a.tim != b.tim)\n\t\t\treturn a.tim < b.tim;\n\t\telse\n\t\t\treturn a.num < b.num;\n\t}\n};\n\nclass record\n{\npublic:\n\tint tim;\t// elapsed time\n\tint num;\t// number of team\n\tint pro;\t// problem number\n\tint jud;\t// judgement of submission\t\n\n\trecord(void) {};\n\trecord(int _tim, int _num, int _pro, int _jud) :\n\t\ttim(_tim), num(_num), pro(_pro), jud(_jud) {};\n};\n\nteam tm[55];\nrecord rc[2005];\nbitset<15> sl[55];\t// if team i solved problem j\n\nsigned main(void)\n{\n//\tfreopen(\"input.txt\", \"r\", stdin);\n//\tfreopen(\"output.txt\", \"w\", stdout);\n\n\tint m, t, p, r;\n\n\twhile (cin >> m >> t >> p >> r, m || t || p || r)\n\t{\n\t\tfor (int i = 1; i <= t; ++i)\n\t\t\tsl[i].reset();\n\t\t\n\t\tfor (int i = 1; i <= r; ++i)\n\t\t{\n\t\t\tint ti, ni, pi, ji;\n\t\t\tcin >> ti >> ni >> pi >> ji;\n\t\t\trc[i] = record(ti, ni, pi, ji);\n\n\t\t\tif (ji == 0)sl[ni].set(pi);\t// team ni solved pi\n\t\t}\n\n\t\tfor (int i = 1; i <= t; ++i)\n\t\t\ttm[i] = team(i, sl[i].count(), 0);\n\n\t\tfor (int i = 1; i <= r; ++i)\n\t\t{\n\t\t\tint ti = rc[i].tim;\n\t\t\tint ni = rc[i].num;\n\t\t\tint pi = rc[i].pro;\n\t\t\tint ji = rc[i].jud;\n\n\t\t\tif (ji == 0)\n\t\t\t\ttm[ni].tim += ti;\n\t\t\telse if (sl[ni][pi])\n\t\t\t\ttm[ni].tim += 20;\n\t\t}\n\n\t\tsort(tm + 1, tm + 1 + t);\n\n\t\tint stk[55], tot = 0;\n\n\t\tfor (int i = 1, j = 1; i <= t; i = j)\n\t\t{\n\t\t\twhile (j <= t && tm[i] == tm[j])\n\t\t\t\tstk[++tot] = j++;\n\t\t\t\n\t\t\tcout << tm[stk[tot--]].num;\n\n\t\t\twhile (tot)\n\t\t\t\tcout << \"=\" << tm[stk[tot--]].num;\n\n\t\t\tif (j <= t)\n\t\t\t\tcout << \",\";\n\t\t\telse \n\t\t\t\tcout << endl;\n\t\t}\n\t}\n\n//\tsystem(\"pause\");\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <cmath>\n#include <climits>\n#include <cstdio>\n#include <cstdlib>\n#include <cstring>\n#include <fstream>\n#include <iostream>\n#include <list>\n#include <map>\n#include <queue>\n#include <set>\n#include <sstream>\n#include <stack>\n#include <string>\n#include <vector>\n#include <cassert>\n#include <functional>\n\nusing namespace std;\n\n#define LOG(...) printf(__VA_ARGS__)\n//#define LOG(...)\n#define FOR(i,a,b) for(int i=(int)(a);i<(int)(b);++i)\n#define REP(i,n) for(int i=0;i<(int)(n);++i)\n#define ALL(a) (a).begin(),(a).end()\n#define RALL(a) (a).rbegin(),(a).rend()\n#define EXIST(s,e) ((s).find(e)!=(s).end())\n#define SORT(c) sort((c).begin(),(c).end())\n#define RSORT(c) sort((c).rbegin(),(c).rend())\n#define CLR(a) memset((a), 0 ,sizeof(a))\n\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef vector<bool> vb;\ntypedef vector<int> vi;\ntypedef vector<ll> vll;\ntypedef vector<vb> vvb;\ntypedef vector<vi> vvi;\ntypedef vector<vll> vvll;\ntypedef pair<int, int> pii;\ntypedef pair<ll, ll> pll;\n\nconst int dx[] = {-1,0,1,0}; const int dy[] = {0,1,0,-1};\n\nstruct Team{\n\tint no;\n\tint ac_n;\n\tint ac_t;\n\tint times[11];\n\n\tbool operator <(const Team& t)const{\n\t\tif(ac_n == t.ac_n){\n\t\t\tif(ac_t == t.ac_t){\n\t\t\t\treturn no < t.no;\n\t\t\t}\n\t\t\treturn ac_t > t.ac_t;\n\t\t}\n\t\treturn ac_n < t.ac_n;\n\t}\n\n\tbool operator ==(const Team& t)const{\n\t\treturn ac_n == t.ac_n && ac_t == t.ac_t;\n\t}\n};\n\nint main() {\n\tint contest_time, team_n, progrom_n, submit_n;\n\twhile(cin >> contest_time >> team_n >> progrom_n >> submit_n, contest_time|team_n|progrom_n|submit_n){\n\t\tvector<Team> team(team_n);\n\t\tREP(i, team_n) team[i].no = i+1;\n\t\tREP(i, submit_n){\n\t\t\tint time, team_no, progrom_no, judge;\n\t\t\tcin >> time >> team_no >> progrom_no >> judge;\n\t\t\tteam_no--;\n\t\t\tif(judge == 0){\n\t\t\t\tteam[team_no].ac_n++;\n\t\t\t\tteam[team_no].ac_t += time;\n\t\t\t\tteam[team_no].ac_t += team[team_no].times[progrom_no]*20;\n\t\t\t}else{\n\t\t\t\tteam[team_no].times[progrom_no]++;\n\t\t\t}\n\t\t}\n\n\t\tRSORT(team);\n\n\t\tcout << team[0].no;\n\t\tFOR(i, 1, team_n){\n\t\t\tcout << (team[i] == team[i-1] ? '=' : ',') << team[i].no;\n\t\t}\n\t\tcout << endl;\n\t}\n\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\nusing namespace std;\nconst int MAX_T = 51;\nconst int MAX_P = 11;\ntypedef pair<int,int> PP;\ntypedef pair<PP,int> P;\n\nint main(){\n  int m,t,p,r,team[MAX_T][MAX_P],judge[MAX_T][MAX_P];\n  int mi,ti,pi,ji,accnt[MAX_T];\n\n  while(cin >> m >> t >> p >> r , m + t + p + r){\n    vector<P> v;\n    fill(team[0],team[MAX_T],0);\n    fill(judge[0],judge[MAX_T],0);\n    fill(accnt,accnt+MAX_T,0);\n\n    for(int i = 0 ; i < r ; i++){\n      cin >> mi >> ti >> pi >> ji;\n      if(ji == 0){\n\tteam[ti][pi] += mi + judge[ti][pi];\n\taccnt[ti]--;\n      }\n      else{\n\tjudge[ti][pi] += 20;\n      }\n    }\n    int tt[MAX_T] = {0};\n    for(int i = 1 ; i < MAX_T ; i++){\n      for(int j = 1 ; j < MAX_P ; j++){\n\ttt[i] += team[i][j];\n      } \n    }\n    for(int i = 1 ; i <= t ; i++){\n\tv.push_back(P(PP(accnt[i],tt[i]),-i));\n    }\n    sort(v.begin(),v.end());\n    for(int i = 1 ; i <= v.size() ; i++){\n      if(v[i-1].first.first < v[i].first.first){\n\tcout << -v[i-1].second;\n\tif(i != v.size()) cout << ',';\n      }\n      else{\n\tif(v[i-1].first.second < v[i].first.second){\n\t  cout << -v[i-1].second;\n\t  if(i != v.size()) cout << ',';\n\t}\n\telse{\n\t  cout << -v[i-1].second;\n\t  if(i != v.size()) cout << '=';\n\t}\n      }\n    }\n    cout << endl;\n  }\n\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n// 方針: (解いた問題数, 所要時間 + ペナルティ, チームのid)の配列もって降順ソート\n// 所要時間は、(A問題を解いた時の時間) + (B問題を解いた時の時間) + .... と考えている\n// 上から出力する\n\nusing pii = pair<int, int>;\n\nint main()\n{\n    while (true)\n    {\n        int M, T, P, R;\n        cin >> M >> T >> P >> R;\n        if (M == 0)\n            break;\n\n        // List.first.first := 解いた問題数\n        // List.first.second := 所用時間 + penalty\n        // List.second := チームのid\n        vector<pair<pii, int>> List(T);\n        // 初期化\n        for (int i = 0; i < T; ++i)\n        {\n            List[i] = make_pair(make_pair(0, 0), i);\n        }\n\n        // penalty[i][j] := チームiがj問題をWAした回数\n        vector<vector<int>> penalty(T, vector<int>(P, 0));\n\n        while (R--)\n        {\n            int m, t, p, j;\n            cin >> m >> t >> p >> j;\n            --t, --p;\n            if (j == 0)\n            { // ACなら\n                List[t].first.first++;\n                List[t].first.second += m;\n                // 間違えた回数だけペナルティを加算\n                List[t].first.second += penalty[t][p] * 20;\n            }\n            else\n            { // WAなら\n                // ペナルティを記録する\n                penalty[t][p]++;\n            }\n        }\n\n        auto cmp = [](pair<pii, int> &A, pair<pii, int> &B) -> bool {\n            return (A.first.first > B.first.first) ||\n                   (A.first.first == B.first.first && A.first.second < B.first.second) ||\n                   (A.first.first == B.first.first && A.first.second == B.first.second && A.second > B.second);\n        };\n        sort(List.begin(), List.end(), cmp); // 降順ソート\n\n        // デバッグ\n        /*\n        for (auto &p : List)\n        {\n            cout << p.first.first << \" \" << p.first.second << \" \" << p.second + 1 << endl;\n        }\n        cout << endl;\n        */\n        // 結果を出力\n        int cnt = 0; // 出力したチームの数\n        //stack<pair<pii, int>> Task; // 同順位を格納するためのスタック\n        //vector<vector<int>> Rank; // Rank[i] := i位のチームの配列\n        for (int i = 0; i < T; ++i)\n        {\n            if (i == 0)\n            {\n                cout << List[i].second + 1;\n                continue;\n            }\n            if (List[i - 1].first != List[i].first)\n            {\n                // カンマを出力\n                cout << \",\" << List[i].second + 1;\n            }\n            else\n            {\n                // 「=」を出力\n                cout << \"=\" << List[i].second + 1;\n            }\n        }\n        cout << endl;\n    }\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#define _CRT_SECURE_NO_WARNINGS\n\n#include<fstream>\n#include<iostream>\n#include <stdio.h>\n#include <functional>\n#include<string>\n#include<iomanip>\n#include<list>\n#include<math.h>\n#include<stack>\n#include<queue>\n#include<vector>\n#include<algorithm>\n#include<utility>\n\nusing namespace std;\n\nstring x(string s, const string cs, const string se) {\n\tint pos = 0;\n\twhile ((pos = s.find_first_of(se)) != string::npos) {\n\t\ts.replace(pos, 1, cs);\n\t}\n\treturn s;\n}\n\nstring y(string a) {\n\tint pos4 = 0, pos9 = 0;\n\ta = x(a, \"3\", \"5\");\n\ta = x(a, \"5\", \"6\");\n\ta = x(a, \"6\", \"7\");\n\ta = x(a, \"7\", \"8\");\n\tint pos = a.length();\n\tif ((pos4 = a.find_first_of(\"4\")) != string::npos && (pos9 = a.find_first_of(\"9\")) != string::npos)\n\t{\n\t\tif (pos4 > pos9) {//4>9\n\t\t\ta = a.replace(pos9, 1, \"7\");\n\t\t\tpos = pos9 + 1;\n\t\t}\n\t\telse {\n\t\t\ta = a.replace(pos4, 1, \"3\");\n\t\t\tpos = pos4 + 1;\n\t\t}\n\t}\n\telse if ((pos4 = a.find_first_of(\"4\")) != string::npos) {\n\t\ta = a.replace(pos4, 1, \"3\");\n\t\tpos = pos4 + 1;\n\t}\n\telse if ((pos9 = a.find_first_of(\"9\")) != string::npos) {\n\t\ta = a.replace(pos9, 1, \"7\");\n\t\tpos = pos9 + 1;\n\t}\n\twhile (pos != a.length()) {\n\t\ta = a.replace(pos, 1, \"7\");\n\t\tpos++;\n\t}\n\treturn a;\n}\n\nint n;\nint m;\nint aji[100000];\n\nint saiki(){\n\treturn 0;\n}\n\nint main(){\n\tint m, t, p, r;\n\twhile (cin >> m >> t >> p >> r && !(m == 0 && t == 0 && p == 0 && r == 0)){\n\t\tvector<pair<int, pair<int, int>>> juni; // テヲツュツ」ティツァツ」テヲツ閉ー テヲツ卍づゥツ鳴?テ」ツδ?」ツδシテ」ツδ?・ツ青?テァツュツ氾」ツ?暗」ツ?ョテ」ツ?淌」ツつ?」ツ?ョvector)\n\t\tint teamscore[50]; // テ・ツ青?」ツδ?」ツδシテ」ツδ?」ツ?ョテ」ツつケテ」ツつウテ」ツつ「\n\t\tint teamsecond[50]; // テ・ツ青?」ツδ?」ツδシテ」ツδ?」ツ?ョテヲツ卍づゥツ鳴?\n\t\tint teamincorr[50][2000]; // テ・ツ青?」ツδ?」ツδシテ」ツδ?・ツ青?・ツ閉湘ゥツ。ツ古」ツ?ョテゥツ鳴禿ゥツ?陛」ツ?暗」ツ?淌・ツ崢榲ヲツ閉ー\n\t\tint teamincorrcnt[50]; // テ・ツ青?」ツδ?」ツδシテ」ツδ?」ツ?ョテヲツュツ」ティツァツ」テ」ツ?療」ツ?淌・ツ閉湘ゥツ。ツ古」ツ?ョテゥツ鳴禿ゥツ?陛」ツ?暗」ツ?淌・ツ崢榲ヲツ閉ー\n\t\tfor (int i = 0; i < 50; i++) {\n\t\t\tteamscore[i] = 0;\n\t\t\tteamsecond[i] = 0;\n\t\t\tteamincorrcnt[i] = 0;\n\t\t\tfor (int j = 0; j < 2000; j++) {\n\t\t\t\tteamincorr[i][j] = 0;\n\t\t\t}\n\t\t}\n\t\tfor (int i = 0; i < r; i++) {\n\t\t\tint mk, tk, pk, jk;\n\t\t\tcin >> mk >> tk >> pk >> jk;\n\t\t\tif (jk == 0) { // テヲツュツ」ティツァツ」\n\t\t\t\tteamscore[tk - 1]++; // テヲツュツ」ティツァツ」テヲツ閉ーテ」ツつ津・ツ「ツ療」ツつ?」ツ??\n\t\t\t\tteamincorrcnt[tk - 1] += teamincorr[tk - 1][pk];\n\t\t\t\tteamsecond[tk - 1] += mk + 20 * teamincorr[tk - 1][pk];\n\t\t\t}\n\t\t\telse { // テゥツ鳴禿ゥツ?陛」ツ??\n\t\t\t\tteamincorr[tk - 1][pk]++;\n\t\t\t}\n\t\t}\n\t\tfor (int i = 0; i < t; i++) {\n\t\t\tjuni.push_back(make_pair(teamscore[i], make_pair(1000000 - teamsecond[i], i + 1)));\n\t\t}\n\t\tsort(juni.begin(), juni.end());\n\n\t\tint score = -1;\n\t\tint jikan = -1;\n\t\tfor (int i = t - 1; i >= 0; i--) {\n\t\t\tif (i != t - 1) {\n\t\t\t\tif (score == juni[i].first && jikan == juni[i].second.first) {\n\t\t\t\t\tcout << \"=\";\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tcout << \",\";\n\t\t\t\t}\n\t\t\t}\n\t\t\tcout << juni[i].second.second;\n\t\t\tscore = juni[i].first;\n\t\t\tjikan = juni[i].second.first;\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#define MAX_TEAM 51\n#define MAX_PROBLEM 11\nusing namespace std;\n\nint main(){\n\twhile(1){\n\t\t//penaltyTime[???????????????][????????????]:?????????????????????????????£???????????????0??????accept[???????????????]:??????????????£?§£??°???time[???????????????]:????????????????¨?????????????\n\t\tint penaltyTime[MAX_TEAM][MAX_PROBLEM]={};\n\t\tint accept[MAX_TEAM]={};\n\t\tint time[MAX_TEAM]={};\n\t\t//M:???????????????????????????T:???????????°???P:????????°???R:?¨??????°\n\t\tint M,T,P,R;\n\t\tcin>>M>>T>>P>>R;\n\t\t\n\t\tif(!(M+T+P+R)) break; //????????°????????????\n\t\t\n\t\t//??\\????????????????????§??????\n\t\tfor(int r=0;r<R;r++){\n\t\t\t//m:???????????????t:??????????????????p:???????????????j:?????????0:??£?§£???\n\t\t\tint m,t,p,j;\n\t\t\tcin>>m>>t>>p>>j;\n\t\t\tif(j==0){\n\t\t\t\taccept[t]++;\n\t\t\t\ttime[t]+=m+penaltyTime[t][p];\n\t\t\t}else{\n\t\t\t\tpenaltyTime[t][p]+=20;\n\t\t\t}\n\t\t}\n\t\t\n\t\t//?????????????????§??????\n\t\tint acc=P;\n\t\tint count=0;\n\t\twhile(1){ //????????£?§£??°????????????????????¨???\n\t\t\tint temp=0;\n\t\t\tbool isSame=false;\n\t\t\tif(acc<0 || count==T) break; //??£?§£??°0???????????????????????¨???????????¨?????????????????¨????????????????????????\n\t\t\tfor(int j=1;j<=T;j++){ //????????????1??????????????????\n\t\t\t\t\n\t\t\t\tif(acc==accept[j]){\n\t\t\t\t\tif(temp==0){\n\t\t\t\t\t\ttemp = j;\n\t\t\t\t\t}else if(time[temp]==time[j]){\n\t\t\t\t\t\ttemp = j;\n\t\t\t\t\t\tisSame=true;\n\t\t\t\t\t}else if(time[temp]>time[j]){\n\t\t\t\t\t\ttemp=j;\n\t\t\t\t\t\tisSame=false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(temp!=0){\n\t\t\t\tcout<<temp;\n\t\t\t\tcount++;\n\t\t\t\tif(isSame){         //??????????????¨????????????????????¢???????????????????????´???=?¨????????????????\n\t\t\t\t\tcout<<\"=\";\n\t\t\t\t}else if(count!=T){ //??¨?????°?????????????????°??¨???????????´????¨???????????????????\n\t\t\t\t\tcout<<\",\";\n\t\t\t\t}else{\n\t\t\t\t\tcout<<endl;\n\t\t\t\t}\n\t\t\t\taccept[temp]=-1; //??¨?????????????????????????????£?§£??°???-1?????????\n\t\t\t}else{\n\t\t\t\tacc--; //?????¨??????????????£?§£??°???????????????????????????????????´?????????????????£?§£??°?????????\n\t\t\t}\n\t\t}\n\t}\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#define _CRT_SECURE_NO_WARNINGS\n\n#include<fstream>\n#include<iostream>\n#include <stdio.h>\n#include <functional>\n#include<string>\n#include<iomanip>\n#include<list>\n#include<math.h>\n#include<stack>\n#include<queue>\n#include<vector>\n#include<algorithm>\n#include<utility>\n\nusing namespace std;\n\nstring x(string s, const string cs, const string se) {\n\tint pos = 0;\n\twhile ((pos = s.find_first_of(se)) != string::npos) {\n\t\ts.replace(pos, 1, cs);\n\t}\n\treturn s;\n}\n\nstring y(string a) {\n\tint pos4 = 0, pos9 = 0;\n\ta = x(a, \"3\", \"5\");\n\ta = x(a, \"5\", \"6\");\n\ta = x(a, \"6\", \"7\");\n\ta = x(a, \"7\", \"8\");\n\tint pos = a.length();\n\tif ((pos4 = a.find_first_of(\"4\")) != string::npos && (pos9 = a.find_first_of(\"9\")) != string::npos)\n\t{\n\t\tif (pos4 > pos9) {//4>9\n\t\t\ta = a.replace(pos9, 1, \"7\");\n\t\t\tpos = pos9 + 1;\n\t\t}\n\t\telse {\n\t\t\ta = a.replace(pos4, 1, \"3\");\n\t\t\tpos = pos4 + 1;\n\t\t}\n\t}\n\telse if ((pos4 = a.find_first_of(\"4\")) != string::npos) {\n\t\ta = a.replace(pos4, 1, \"3\");\n\t\tpos = pos4 + 1;\n\t}\n\telse if ((pos9 = a.find_first_of(\"9\")) != string::npos) {\n\t\ta = a.replace(pos9, 1, \"7\");\n\t\tpos = pos9 + 1;\n\t}\n\twhile (pos != a.length()) {\n\t\ta = a.replace(pos, 1, \"7\");\n\t\tpos++;\n\t}\n\treturn a;\n}\n\nint n;\nint m;\nint aji[100000];\n\nint saiki(){\n\treturn 0;\n}\n\nint main(){\n\tint m, t, p, r;\n\twhile (cin >> m >> t >> p >> r && !(m == 0 && t == 0 && p == 0 && r == 0)){\n\t\tvector<pair<int, pair<int, int>>> juni; // 正解数 時間 チーム名(答えのためのvector)\n\t\tint teamscore[50]; // 各チームのスコア\n\t\tint teamsecond[50]; // 各チームの時間\n\t\tint teamincorr[50][2000]; // 各チーム各問題の間違えた回数\n\t\tint teamincorrcnt[50]; // 各チームの正解した問題の間違えた回数\n\t\tfor (int i = 0; i < 50; i++) {\n\t\t\tteamscore[i] = 0;\n\t\t\tteamsecond[i] = 1000000;\n\t\t\tteamincorrcnt[i] = 0;\n\t\t\tfor (int j = 0; j < 2000; j++) {\n\t\t\t\tteamincorr[i][j] = 0;\n\t\t\t}\n\t\t}\n\t\tfor (int i = 0; i < r; i++) {\n\t\t\tint mk, tk, pk, jk;\n\t\t\tcin >> mk >> tk >> pk >> jk;\n\t\t\tif (jk == 0) { // 正解\n\t\t\t\tteamscore[tk - 1]++; // 正解数を増やす\n\t\t\t\tteamincorrcnt[tk - 1] += teamincorr[tk - 1][pk];\n\t\t\t\tteamsecond[tk - 1] = 100000 - (mk + 20 * teamincorrcnt[tk - 1]);\n\t\t\t}\n\t\t\telse { // 間違い\n\t\t\t\tteamincorr[tk - 1][pk]++;\n\t\t\t}\n\t\t}\n\t\tfor (int i = 0; i < t; i++) {\n\t\t\tjuni.push_back(make_pair(teamscore[i], make_pair(teamsecond[i], i + 1)));\n\t\t}\n\t\tsort(juni.begin(), juni.end());\n\n\t\tint score = -1;\n\t\tint jikan = -1;\n\t\tfor (int i = t - 1; i >= 0; i--) {\n\t\t\tif (i != t - 1) {\n\t\t\t\tif (score == juni[i].first && jikan == juni[i].second.first) {\n\t\t\t\t\tcout << \"=\";\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tcout << \",\";\n\t\t\t\t}\n\t\t\t}\n\t\t\tcout << juni[i].second.second;\n\t\t\tscore = juni[i].first;\n\t\t\tjikan = juni[i].second.first;\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "//#include <bits/stdc++.h>\n//#include <stdio.h>\n#include<iostream>\n#include<cstdio>\n#include<bitset>\n#include<algorithm>\n#include<vector>\n#include<list>\n#include<queue>\n#include<stack>\n#include<string>\n#include<string.h>\n#include<cmath>\n#include<utility>\n#include<functional>\n#include<map>\n#include<set>\n#include<cctype>\n#include<fstream>\n\n\n#define FOR(i, a, b) for( int i=(a);i<=(b);i++)\n#define RFOR(i, a, b) for( int i=(a);i>=(b);i--)\n#define LFOR(i, a, b) for( long long int i=(a);i<=(b);i++)\n#define LRFOR(i, a, b) for(long long int i=(a);i>=(b);i--)\n#define MOD 1000000007\n#define INF 600000000 //2000000000\n#define LINF 1000000000000000000 //9000000000000000000 大きいとワ―シャルフロイドでオーバーフローを起こす\n#define PI 3.14159265358979\n\nusing namespace std;\ntypedef long long int ll;\ntypedef pair< long long int, long long  int> P;\n\nint dy[5] = { 0,0,1,-1,0 };\nint dx[5] = { 1,-1,0,0,0 };\n\n\n\nint main(void) {\n\n\twhile (1) {\n\t\tint M, T, P, R;\n\n\t\tcin >> M >> T >> P >> R;\n\t\tif (M == 0) {\n\t\t\tbreak;\n\t\t}\n\t\tint pena[51][11] = {};// ペナルティ回数　iチームのj問題に対する回数\n\t\tint ans[51] = {};//正答数\n\t\tint time[51] = {};//時間\n\t\tint m, t, p, j;\n\n\t\tFOR(i, 1, R) {\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tif (j == 0) {\n\t\t\t\tans[t]++;\n\t\t\t\ttime[t] += m + (pena[t][p] * 20);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tpena[t][p]++;\n\t\t\t}\n\t\t}\n\n\t\tvector< pair< pair<int, int>, int> > pa(T);\n\t\tFOR(i, 0, T-1) {\n\t\t\tpa[i].first.first = -ans[i + 1];\n\t\t\tpa[i].first.second = time[i + 1];\n\t\t\tpa[i].second = -(i + 1);\n\t\t}\n\n\t\tsort(pa.begin(), pa.end());\n\n\t\tint nowa, nowt;\n\n\t\tFOR(i, 0, T-1) {\n\t\t\tif (i == 0) {\n\t\t\t\tnowa = pa[i].first.first;\n\t\t\t\tnowt = pa[i].first.second;\n\t\t\t\tcout << -pa[i].second;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (pa[i].first.first == nowa && pa[i].first.second == nowt) {\n\t\t\t\t\tcout << \"=\" << -pa[i].second;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tcout << \",\" << -pa[i].second;\n\t\t\t\t\tnowa = pa[i].first.first;\n\t\t\t\t\tnowt = pa[i].first.second;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcout << endl;\n\t\t\n\t}\n\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <map>\n#include <set>\n#include <vector>\n#include <algorithm>\n\nusing namespace std;\n\n#define rep(i,n) for(int i = 0; i < n; i++)\n\nstruct Team {\n\tint no, time;\n\tmap<int, int> wa;\n\tset<int> ac;\n\tTeam() : time(0) {}\n\tbool operator < (const Team &other) {\n\t\tif (ac.size() == other.ac.size()) {\n\t\t\tif (time == other.time) {\n\t\t\t\treturn no < other.no;\n\t\t\t}\n\t\t\treturn time > other.time;\n\t\t}\n\t\treturn ac.size() < other.ac.size();\n\t}\n\tbool operator == (const Team &other) {\n\t\treturn ac.size() == other.ac.size() && time == other.time;\n\t}\n};\n\nint main() {\n\tint M, T, P, R;\n\twhile (cin >> M >> T >> P >> R && M) {\n\t\tvector<Team> teams(T);\n\t\trep(i, T) {\n\t\t\tteams[i].no = i + 1;\n\t\t}\n\t\trep(i, R) {\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tt--;\n\t\t\tif (j == 0) {\n\t\t\t\tteams[t].time += teams[t].wa[p] * 20 + m;\n\t\t\t\tteams[t].ac.insert(p);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tteams[t].wa[p]++;\n\t\t\t}\n\t\t}\n\t\tsort(teams.begin(), teams.end());\n\t\treverse(teams.begin(), teams.end());\n\t\trep(i, T-1) {\n\t\t\tcout << teams[i].no;\n\t\t\tif (teams[i] == teams[i + 1]) {\n\t\t\t\tcout << \"=\";\n\t\t\t}else{\n\t\t\t\tcout << \",\";\n\t\t\t}\n\t\t}\n\t\tcout << teams.back().no << endl;\n\t}\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#define N 2001\nusing namespace std;\nstruct team{\n  int tnum;\n  int correct;\n  int time;\n};\nint main(){\n  int m,t,p,r,im[N],it[N],ip[N],ij[N],incorrect,i,j;\n  struct team data[51];\n  while(1){\n    cin >> m >> t >> p >> r;\n    if(m==0&&t==0&&p==0&&r==0) break;\n    for(i=0;i<r;i++) cin >> im[i] >> it[i] >> ip[i] >> ij[i];\n    for(i=1;i<=t;i++){\n      data[i].tnum=i;\n      data[i].correct=0;\n      data[i].time=0;\n    }\n    for(i=0;i<r;i++){\n      if(ij[i]==0){\n\tdata[it[i]].correct++;\n      \tincorrect=0;\n\tfor(j=0;j<i;j++){\n\t  if(it[i]==it[j]&&ip[i]==ip[j]) incorrect++;\n\t}\n\tdata[it[i]].time=data[it[i]].time+incorrect*20+im[i];\n      }\n    }\n    for(i=0;i<=t;i++){\n      for(j=2;j<=t;j++){\n\tif(data[j].tnum>data[j-1].tnum) swap(data[j],data[j-1]);\n      }\n    }\n    for(i=0;i<=t;i++){\n      for(j=2;j<=t;j++){\n\tif(data[j].time<data[j-1].time) swap(data[j],data[j-1]);\n      }\n    }\n    for(i=0;i<=t;i++){\n      for(j=2;j<=t;j++){\n\tif(data[j].correct>data[j-1].correct) swap(data[j],data[j-1]);\n      }\n    }\n    for(i=1;i<t;i++){\n      cout << data[i].tnum;\n      if(data[i].correct==data[i+1].correct&&data[i].time==data[i+1].time)\n\tcout << '=';\n      else cout << ',';\n      if(i==t-1) cout << data[i+1].tnum;\n    }\n    cout << endl;\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#pragma GCC optimize(\"O3\")\n#include<bits/stdc++.h> \nusing namespace std;\nusing ll=long long;\nusing ull=unsigned long long int;\nusing P=pair<ll,ll>;\ntemplate<class T> using V=vector<T>; \n#define fi first\n#define se second\n#define all(v) (v).begin(),(v).end()\nconst ll inf=(1e18);\nconst ll mod=1000000007;\nll gcd(ll a,ll b) {return b ? gcd(b,a%b):a;}\nll lcm(ll c,ll d){return c/gcd(c,d)*d;}\nstruct __INIT{__INIT(){cin.tie(0);ios::sync_with_stdio(false);cout<<fixed<<setprecision(15);}} __init;\ntemplate<class T> bool chmax(T &a, const T &b) { if (a<b) { a=b; return 1; } return 0; }\ntemplate<class T> bool chmin(T &a, const T &b) { if (a>b) { a=b; return 1; } return 0; }\nint main(){\n\twhile(1){\n\t\tll m,t,p,r;\n\t\tcin>>m>>t>>p>>r;\n\t\tif(m==0)return 0;\n\t\tmap<P,V<int>,greater<P>> mp;\n\t\tV<P> dat(t,P(0,0));\n\t\tV<V<ll>> mis(t,V<ll>(p,0));\n\t\tV<V<bool>> ac(t,V<bool>(p,false));\n\t\tfor(int i=0;i<r;i++){\n\t\t\tll a,b,c,d;\n\t\t\tcin>>a>>b>>c>>d;\n\t\t\ta--;b--;c--;\n\t\t\tif(d==0){\n\t\t\t\tif(ac[b][c])continue;\n\t\t\t\tac[b][c]=true;\n\t\t\t\tdat[b].fi++;\n\t\t\t\tdat[b].se-=mis[b][c]*20+a;\n\t\t\t}else{\n\t\t\t\tmis[b][c]++;\n\t\t\t}\n\t\t}\n\t\tfor(int i=0;i<t;i++){\n\t\t\tmp[dat[i]].emplace_back(i+1);\n\t\t}\n\t\tint cnt=0;\n\t\tfor(auto p:mp){\n\t\t\tcnt++;\n\t\t\tsort(all(p.se),greater<int>());\n\t\t\tfor(int i=0;i<p.se.size();i++){\n\t\t\t\t\tcout<<p.se[i];\n\t\t\t\t\tif(i!=(int)p.se.size()-1)cout<<'=';\n\t\t\t}\n\t\t\tif(cnt!=(int)mp.size())cout<<',';\n\t\t}\n\t\tcout<<\"\\n\";\n\t}\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstdio>\n#include <cstring>\n#include <algorithm>\n#include <vector>\n#include <map>\nusing namespace std;\n\n#define rep(i, n) for(int i = 0 ; i < n ; i++)\n\nstruct State{\n  int solve, id, time;\n  map<int, int> wrong;\n  \n  State(): solve(0), id(0), time(0) {}\n  \n  bool operator< (const State &a) const{\n    if(solve == a.solve){\n      if(time == a.time){\n\treturn id > a.id;\n      }\n      else return time < a.time;\n    }\n    else return solve > a.solve;\n  }\n};\n\nint main(){\n  int M, T, P, R;\n  while(cin >> M >> T >> P >> R, M|T|P|R){\n    vector<State> res;\n    for(int i = 1 ; i <= T ; i++){\n      State tmp;\n      tmp.id = i;\n      res.push_back(tmp);\n    }\n    \n    int m, t, p, ac;\n    rep(i, R){\n      cin >> m >> t >> p >> ac;\n      t--;\n      if(ac == 0){\n\tres[t].solve++;\n\tres[t].time += m + res[t].wrong[p]*20;\n      }\n      else{\n\tres[t].wrong[p]++;\n      }\n    }\n    sort(res.begin(), res.end());\n    \n    for(int i = 0 ; i < res.size() ; i++){\n      cout << res[i].id;\n      if(i == res.size()-1){\n\tcout << endl;\n      }\n      else if(res[i].solve == res[i+1].solve && res[i].time == res[i+1].time){\n\tcout << '=';\n      }\n      else cout << ',';      \n    }\n  }  \n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\nint main()\n{\n    int M, T, P, R;\n    \n    while (scanf(\"%d %d %d %d\", &M, &T, &P, &R) && M){\n        vector<pair<pair<int, int>, int> > record(T);\n        int wa[64][16] = {0};\n        \n        for (int i = 0; i < T; i++) record[i].second = -(i + 1);\n        \n        for (int i = 0; i < R; i++){\n            int m, t, p, j;\n            scanf(\"%d %d %d %d\", &m, &t, &p, &j);\n            if (j) wa[t - 1][p] += 20;\n            else {\n                record[t - 1].first.first--;\n                record[t - 1].first.second += m + wa[t - 1][p];\n            }\n        }\n        \n        sort(record.begin(), record.end());\n        \n        for (int i = 0; i < T; i++){\n            printf(\"%d\", -record[i].second);\n            if (i + 1 < T && record[i].first == record[i + 1].first) printf(\"=\");\n            else if (i + 1 < T) printf(\",\");\n            else printf(\"\\n\");\n        }\n    }\n    \n    return (0);\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nint M, T, P, R;\n\nstruct score {\n  int ac;\n  int time;\n  int problem;\n};\n\nint main() {\n  long h, w;\n  while (1) {\n    cin >> M >> T >> P >> R;\n    if (M == 0) return 0;\n    int wrong[50][10] = {0};\n    vector<score> scores = vector<score>(T);\n    for (int i = 0; i < R; i++) {\n      int m, t, p, j;\n      cin >> m >> t >> p >> j;\n      t--; p--;\n      if (j) {\n        wrong[t][p]++;\n      } else {\n        scores[t].ac++;\n        scores[t].time += (m + 20 * wrong[t][p]);\n      }\n    }\n    for (int i = 0; i < T; i++) {\n      scores[i].problem = i + 1;\n    }\n    // for (int i = 0; i < T; i++) {\n    //   cout << scores[i].problem << \": \" <<scores[i].ac << ' ' << scores[i].time << endl;\n    // }\n    sort(scores.begin(), scores.end(), [](score a, score b){\n      return a.ac > b.ac || (a.ac == b.ac && a.time < b.time) || (a.ac == b.ac && a.time == b.time && a.problem > b.problem);\n    });\n    for (int i = 0; i < T; i++) {\n      if (i != 0) {\n        if (scores[i].ac == scores[i-1].ac && scores[i].time == scores[i-1].time) {\n          cout << '=';\n        } else {\n          cout << ',';\n        }\n      }\n      cout << scores[i].problem;\n    }\n    cout << endl;\n  }\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\ntypedef long long ll;\ntypedef vector<int> VI;\ntypedef vector<VI> VVI;\ntypedef vector<ll> VL;\ntypedef vector<VL> VVL;\ntypedef pair<int, int> PII;\n\n#define FOR(i, a, n) for (ll i = (ll)a; i < (ll)n; ++i)\n#define REP(i, n) FOR(i, 0, n)\n#define ALL(x) x.begin(), x.end()\n#define MP make_pair\n#define PB push_back\n#define MOD 1000000007\n#define INF (1LL<<30)\n#define LLINF (1LL<<60)\n#define PI 3.14159265359\n#define EPS 1e-12\n//#define int ll\n\nsigned main(void)\n{\n  while(true) {\n    int m, t, p, r;\n    cin >> m >> t >> p >> r;\n    if(!m && !t && !p && !r) break;\n    VVI rec;\n    REP(i, r) {\n      int a, b, c, d;\n      cin >> a >> b >> c >> d;\n      rec.PB({a, b, c, d});\n    }\n    sort(ALL(rec));\n    int wa[55][15] = {0};\n    VVI ac;\n    REP(i, t) ac.PB({0, 0, (int)i+1});\n    REP(i, r) {\n      //??£?§£\n      if(!rec[i][3]) {\n        ac[rec[i][1]-1][0]++;\n        ac[rec[i][1]-1][1] += wa[rec[i][1]-1][rec[i][2]] * 20 + rec[i][0];\n      } else {\n        wa[rec[i][1]-1][rec[i][2]]++;\n      }\n    }\n    REP(i, t) {\n      ac[i][0] *= -1;\n      ac[i][2] *= -1;\n    }\n    sort(ALL(ac));\n    cout << -1*ac[0][2];\n    FOR(i, 1, t) {\n      if(ac[i][0] == ac[i-1][0] && ac[i][1] == ac[i-1][1]) {\n        cout << \"=\";\n      } else {\n        cout << \",\";\n      }\n      cout << -1*ac[i][2];\n    }\n    cout << endl;\n  }\n\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstdio>\n#include<string>\n#include<queue>\n#include<stack>\n#include<cstdlib>\n#include<algorithm>\n#include<cmath>\n\n#define rep(n,cnt) for(int cnt=0;cnt<n;++cnt)\n\nusing namespace std;\n\ntemplate <typename TYPE>\nvoid printArray(TYPE* array, int size){\n  rep(size,i) cout << array[i] << \"\\t\" << flush;\n  cout << endl;\n}\n\nint StringToInt(string str){\n  return atoi(str.c_str());\n}\n\ndouble factorial(double n){\n  double sum=1;\n  for(int i=n;i>=1;i--){\n    sum = i*sum;\n  }\n  return sum;\n}\n\ndouble combination(double n, double k){\n  double denominator = 1;\n  for(int i=n,j=0;j<k;j++,i--) denominator*=i;\n  return denominator/factorial(k);\n}\n\n#define MAX_M 300\n#define MAX_T 50\n#define MAX_P 10\n#define MAX_R 2000\n\nclass Team{\npublic:\n    int num;\n    int collect;\n    int time;\n};\n\nint M,T,P,R;\nint m[MAX_R],t[MAX_R],p[MAX_R],j[MAX_R];\nTeam team[MAX_T];\n\nint main(){\n    while(1){\n\tcin >> M;\n\tcin >> T;\n\tcin >> P;\n\tcin >> R;\n\tif(M == 0 && T == 0 && P == 0 && R == 0) return 0;\t\n        \n\trep(T,i){\n\t    team[i].num = i+1;\n\t    team[i].collect = 0;\n            team[i].time = 0;\n\t}\n\n\trep(R,i){\n            cin >> m[i];\n\t    cin >> t[i];\n\t    cin >> p[i];\n\t    cin >> j[i];\n\t}\t\n        \n\trep(R,i){\n            if(j[i] == 0){\n\t\tteam[t[i]-1].collect++;\n\t\tteam[t[i]-1].time += m[i];                \n\t    }\n\t    else{\n\t\tteam[t[i]-1].time += 20;\n\t    }\n\t}\n\n \tfor(int i=0;i<T;i++){\n\t    for(int j=T-1;j>=i;j--){\n\t\tif(team[i].collect < team[j].collect){\n\t\t    Team buf = team[i];\n                    team[i] = team[j];\n\t\t    team[j] = buf;\n\t\t}\n\t    }\n\t}\n\n        for(int i=0;i<T;i++){\n\t    for(int j=T-1;j>=i;j--){\n\t\tif(team[i].collect < team[j].collect && team[i].time < team[j].time){\n\t\t    Team buf = team[i];\n                    team[i] = team[j];\n\t\t    team[j] = buf;\n\t\t}\n\t    }\n\t}\n\n        \n       \n        for(int i=0;i<T;i++){\n\t    for(int j=T-1;j>=i;j--){\n\t\tif(team[i].collect == team[j].collect && team[i].time == team[j].time && team[i].num < team[j].num){\n\t\t    Team buf = team[i];\n                    team[i] = team[j];\n\t\t    team[j] = buf;\n\t\t}\n\t    }\n\t}\n\n\tcout << team[0].num;\n\tfor(int i=1;i<T;i++){\n            if(team[i].collect == team[i-1].collect && team[i].time == team[i-1].time){\n\t\tcout << \"=\" << team[i].num;\n\t    }\n\t    else{\n                cout << \",\" << team[i].num;\n\t    }\n\t}\n\tcout << endl;\n\n\trep(T,i){\n\t    cout << team[i].num << \" \" << team[i].collect << \" \" << team[i].time << endl;;\n\t}\n    }\n}\n    "
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\n#define INF 1e9\n\nint MOD=1e9+7;\n\nsigned main(){\n    ios::sync_with_stdio(false);\n    cin.tie(0);\n\n    while(1){\n        int m,t,p,r;\n        cin>>m>>t>>p>>r;\n\n        if(m==0)break;\n\n        vector<pair<pair<int,int>,int>> v(t);\n        vector<int> wa(t);\n        for(int i=0;i<t;i++){\n            v[i].second=i+1;\n        }\n\n        for(int i=0;i<r;i++){\n            int a,b,c,d;\n            cin>>a>>b>>c>>d;\n            b--;\n\n            if(d!=0)wa[b]++;\n            else{\n                v[b].first.first++;\n                v[b].first.second+=a+wa[b]*20;\n            }\n        }\n        for(int i=0;i<t;i++){\n            v[i].first.second*=-1;\n        }\n        sort(v.begin(),v.end());\n        reverse(v.begin(),v.end());\n        for(int i=0;i<t;i++){\n            cout<<v[i].second;\n            if(i==t-1)cout<<endl;\n            else if(v[i].first==v[i+1].first)cout<<\"=\";\n            else cout<<\",\";\n        }\n    }\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n#include <cstring>\n\nusing namespace std;\n\nstruct Result {\n  int time, prob, No;\n  Result () {\n    time = prob = No = 0;\n  }\n  Result (int time, int prob, int No) : time(time), prob(prob), No(No) {}\n};\n\nbool comp(const Result &r1, const Result &r2) {\n  \n  if (r1.prob > r2.prob) {\n    return true;\n  } else if (r1.prob == r2.prob) {\n    if (r1.time < r2.time) {\n      return true;\n    } else if (r1.time == r2.time) {\n      return r1.No > r2.No;\n    } else {\n      return false;\n    }\n  } else {\n    return false;\n  }\n  /*\n  if (r1.prob == r2.prob) return r1.time < r2.time; \n  return r1.prob > r2.prob;\n  */\n}\n\nint M, T, P, R, m, t, p, j, penalty[60][20];\nResult r[60];\n\nint main(void) {\n  cin.tie(0);\n  ios::sync_with_stdio(false);\n\n  while (cin >> M >> T >> P >> R, M | T | P | R) {\n    memset(penalty, 0, sizeof(penalty));\n    for (int i = 0; i < T; ++i) r[i] = Result(0, 0, i);\n    for (int i = 0; i < R; ++i) {\n      cin >> m >> t >> p >> j;\n\n      if (j == 0) {\n        r[t-1].prob++;\n        r[t-1].time += m + penalty[t-1][p-1];\n      }\n      else {\n        penalty[t-1][p-1] += 20;\n      }\n    }\n    /*cerr << \"==========\" << endl;\n    for (int i = 0; i < T; ++i) cout << r[i].No + 1<< \" \" << r[i].time << \" \" << r[i].prob << endl;\n    */\n    \n    sort(r, r + T, comp);\n\n    /*cerr << \"==========\" << endl;\n      for (int i = 0; i < T; ++i) cout << r[i].No << \" \" << r[i].time << \" \" << r[i].prob << endl;*/\n    /* */\n    for (int i = 0; i < T; ++i) {\n      if (i == 0) {\n        cout << r[i].No+1;\n      }\n      else {\n        if (r[i-1].time == r[i].time && r[i-1].prob == r[i].prob) {\n          cout << \"=\";\n        }\n        else {\n          cout << \",\";\n        }\n        cout << r[i].No+1;\n      }\n    }\n    cout << endl;\n    /* */\n  }\n\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n#include <functional>\nusing namespace std;\nint main()\n{\n    while (1) {\n        int mm,m,tt,t,pp,p,rr,r;\n        cin >> mm >> tt >> pp >> rr;\n        struct Teem{\n            int judge[10] = {0};\n        }teem[50];\n        int sum[51] = {0};\n        int ans[51] = {0};\n        for (int i = 0; i < rr; i++ ) {\n            cin >> m >> t >> p >> r;\n            if (r == 0) {\n                sum[t] = sum[t] + m + teem[t].judge[p];\n                ans[t]++;\n            }else teem[t].judge[p] += 20;\n        }\n        int max = 0;\n        vector<int> times = {0};\n        int count = 0;\n        for (int i = 1; i < tt; i++ ) {\n            if (max == ans[i]) {\n                times.push_back(sum[i]);\n                count++;\n            }\n            if (max < ans[i]) {\n                max = ans[i];\n                times = {0};\n                times.push_back(sum[i]);\n                count=1;\n            }\n        }\n        sort(times.begin(), times.end(), greater<int>());\n        int tmp1 = -1,tmp2 = -1;\n        for (int i = max; i > 0; i--) {\n            for (int k = count-1; k >= 0; k--) {\n                for (int m =tt; m > 0; m--) {\n                    if (i == ans[m]) {\n                        if (times[k] == sum[m]) {\n                            if (tmp2 == ans[m]) {\n                                if (tmp1 == sum[m]) cout << \"=\" ;\n                                else cout << \",\" ;\n                            }\n                            else if(tmp2 != -1 && tmp1 != -1) cout << \",\" ;\n                            cout << m ;\n                            tmp1 = sum[m];\n                            tmp2 = ans[m];\n                            ans[m] = -1;\n                        }\n                    }\n                }\n            }\n            max = 0;\n            times = {0};\n            count = 0;\n            for (int x = 1; x < tt; x++ ) {\n                if (max == ans[x]) {\n                    times.push_back(sum[x]);\n                    count++;\n                }\n                if (max < ans[x]) {\n                    max = ans[x];\n                    times = {0};\n                    times.push_back(sum[x]);\n                    count=1;\n                }\n            }\n            sort(times.begin(), times.end(), greater<int>());\n        }\n        for (int i = tt; i > 0; i--) {       \n            if (ans[i] == 0) {\n                if (tmp2 == -1)\n                else {\n                    if (tmp2 == 0) cout << \"=\";\n                    else cout << \",\";\n                }\n                cout << i ;\n                tmp2 = 0;\n            }\n        }\n        cout << endl;\n        if (tmp1 == -1) break;\n    }\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\ntypedef pair<int, int> P;\nP info[51][11];\n//bool team[51];\nvector<P> v;\n\nmap<int, P> mp;\n//int D[51];\nvector<int> order;\n\n//自作の比較関数\nbool comp(P lhs, P rhs){\n\tif(lhs.first != rhs.first){\n\t\treturn lhs.first < rhs.first;\n\t}\n\tif(lhs.second != rhs.second){\n\t\treturn lhs.second > rhs.second;\n\t}\n}\n\nint main(){\nwhile(1){//start\n\n\n\tint M, T, P, R;\n\tcin >> M >> T >> P >> R;\n\tif(M == 0 and T == 0 and P == 0 and R == 0) break;\n\n\t//初期化\n\tfor(int i = 0; i < 51; i++){\n\t\tfor(int j = 0; j < 11; j++){\n\t\t\tinfo[i][j].first = 0;\n\t\t\tinfo[i][j].second = 0;\n\t\t}\n\t}\n\tbool team[51] = {0};\n\tint D[51] = {0};\n\tint OK[51] = {0};\n\n\t//データを格納\n\tfor(int i = 0; i < R; i++){\n\t\tint m, t, p, j;\n\t\tcin >> m >> t >> p >> j;\n\t\tteam[t] = true;\n\n\t\tif(j == 0){\n\t\t\tinfo[t][p].second = m + 20*info[t][p].first;\n\t\t\tOK[t-1] += 1;\n\t\t}\n\t\telse{\n\t\t\tinfo[t][p].first += 1;\n\t\t}\n\t}\n\n\t//vの内部はキーがチーム名(解いた数/合計時間)\n\tfor(int i = 1; i <= T; i++){\n\t\t\tint sum = 0, ok = 0;\n\t\t\tfor(int j = 0; j < 11; j++) sum += info[i][j].second;\n\t\t\t//for(int j = 0; j < 11; j++) if(info[i][j].second) ok += 1;\n\t\t\tint tmp = OK[i-1];\n\t\t\tv.push_back(make_pair(tmp, sum));\n\t\t\tmp[i] = make_pair(tmp, sum);\n\t}\n\n\tsort(v.begin(), v.end(), comp);\n\treverse(v.begin(), v.end());\n\t//debug\n\t//for(int i = 0; i < (int)v.size(); i++) cout << v[i].first << \" \" << v[i].second << endl;\n\n\t//重複カウンタを作成\n\tint d = 1;\n\tD[0] = 1;\n\tfor(int i = 1; i < (int)v.size(); i++){\n\t\tif(v[i-1].first == v[i].first and v[i-1].second == v[i].second){\n\t\t\tD[i] = d;\n\t\t}\n\t\telse{\n\t\t\td++;\n\t\t\tD[i] = d;\n\t\t}\n\t}\n\n\t//debug\n\t//for(int i = 0; i < (int)v.size(); i++) cout << D[i] << endl;\n\n\t//ソート結果にチーム名を割り当てる\n\tbool vis[51] = {false};\n\tfor(int i = 0; i < (int)v.size(); i++){\n\t\tfor(int j = (int)v.size(); 1 <= j; j--){\n\t\t\tif(v[i] == mp[j]){\n\t\t\t\tif(vis[j] == false){\n\t\t\t\t\torder.push_back(j);\n\t\t\t\t\tvis[j] = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t//debug\n\t//for(int i = 0; i < (int)v.size(); i++) cout << order[i] << endl;\n\n\t//出力\n\t//まず重複数を記録する\n\tint num[51] = {0};\n\tfor(int i = 0; i < 51; i++) num[D[i]] += 1;\n\n\tstring ans = \"A\";\n\tint idx = 0;\n\tfor(int i = 1; i <= (int)order.size(); i++){\n\t\tif(num[i] == 0) break;\n\t\telse if(num[i] == 1){\n\t\t\tans += to_string(order[idx]);\n\t\t\tidx++;\n\t\t}\n\t\telse{\n\t\t\tfor(int j = 0; j < num[i]; j++){\n\t\t\t\tif(j == num[i]-1) ans += to_string(order[idx]);\n\t\t\t\telse ans += to_string(order[idx]) + \"=\";\n\t\t\t\tidx++;\n\t\t\t}\n\t\t}\n\t\tans += \",\";\n\t}\n\n\tans.erase(ans.begin() + 0);\n\tans.erase(ans.end() - 1);\n\tcout << ans << endl;\n\n\t//初期化\n\tv.clear();\n\tmp.clear();\n\torder.clear();\n\t\n\tans=\"A\";\n\n\n}//end\n\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <stdio.h>\n\ntypedef struct{\n  int team;\n  int ans[10];\n  int time[10];\n  int anum;\n  int tnum;\n}data_t;\n\nvoid InsSort(data_t data[], int n){\n  data_t temp;\n  for(int i=1; i<n; i++){\n    for(int j=i; j>0 && data[j-1].team<temp.team ;j--){\n      temp = data[j];\n      data[j] = data[j-1];\n      data[j] = temp;\n    }\n  }\n\n  for(int i=1; i<n; i++){\n    for(int j=i; j>0 && data[j-1].tnum>temp.tnum ;j--){\n      temp = data[j];\n      data[j] = data[j-1];\n      data[j] = temp;\n    }\n  }\n  \n  for(int i=1; i<n; i++){\n    for(int j=i; j>0 && data[j-1].anum<temp.anum ;j--){\n      temp = data[j];\n      data[j] = data[j-1];\n      data[j] = temp;\n    }\n  }\n}\n\nint main(void){\n  int M, T, P, R;\n  int m, t, p, j;\n  data_t data[50];\n  while(1){\n    scanf(\"%d%d%d%d\", &M, &T, &P, &R);\n    if(M==0 && T==0 && P==0 && R==0){\n      break;\n    }\n\n    for(int i=0; i<T; i++){\n      data[i].team = i+1;\n      data[i].anum = 0;\n      data[i].tnum = 0;\n      for(int j=0; j<10; j++){\n\tdata[i].ans[j] = 1;\n\tdata[i].time[j] = 0;\n      }\n    }\n\n    for(int i=0; i<R; i++){\n      scanf(\"%d%d%d%d\", &m, &t, &p, &j);\n      if(j == 0){\n\tdata[t-1].ans[p-1] = 0;\n\tdata[t-1].time[p-1] += m;\n      }else if(j == 1){\n\tdata[t-1].time[p-1] += 20;\n      }\n    }\n    for(int i=0; i<T; i++){\n      for(int j=0; j<P; j++){\n\tif(data[i].ans[j] == 0){\n\t  data[i].anum++;\n\t  data[i].tnum += data[i].time[j];\n\t}\n      }\n    }\n    InsSort(data, T);\n\n    printf(\"%d\", data[0].team);\n    for(int i=1; i<T; i++){\n      if(data[i].anum==data[i-1].anum && data[i].tnum==data[i].tnum){\n\tprintf(\"=\");\n      }else{\n\tprintf(\",\");\n      }\n      printf(\"%d\", data[i].team);\n    }\n    printf(\"\\n\");\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n\nusing namespace std;\n\nint main(void){\n    int m,t,p,r;\n    int mk,tk,pk,jk;\n    int a[2][50][10];\n    vector<pair<int,int> > vp;\n    int i,j,k,x,y,z;\n    while(true){\n        cin >> m >> t >> p >> r;\n        if(m == 0) break;\n        memset(a,0,sizeof(a));\n        for(i = 0;i < r;i++){\n            cin >> mk >> tk >> pk >> jk;\n            tk--;pk--;\n            if(jk){\n                a[0][tk][pk] += 20;\n            }\n            else{\n                a[1][tk][pk] = mk + a[0][tk][pk];\n            }\n        }\n        vp.clear();\n        for(i = 0;i < t;i++){\n            x = 0;\n            y = 0;\n            for(j = 0;j < p;j++){\n                if(a[1][i][j]){\n                    x++;\n                    y+=a[1][i][j];\n                }\n            }\n            vp.push_back(make_pair(x*100000000-y,i));\n        }\n        sort(vp.begin(),vp.end());\n        i = vp.size();\n        x = vp[--i].first;\n        cout << vp[i].second+1;\n        for(;i > 0;){\n            if(x == vp[--i].first){\n                cout << \"=\";\n            }\n            else cout << \",\";\n            x = vp[i].first;\n            cout << vp[i].second+1;\n        }\n        cout << endl;\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\nusing namespace std;\n\nstruct Team\n{\n\tvector<bool> is_solve;\n\tvector<int> WA;\n\tint team_id, time, solved;\n\tTeam(){}\n\tTeam(int P, int id)\n\t{\n\t\tis_solve = vector<bool>(P, false);\n\t\tWA = vector<int>(P, 0);\n\t\tteam_id = id;\n\t\ttime = 0;\n\t\tsolved = 0;\n\t}\n};\nbool operator<(const Team &a, const Team &b)\n{\n\tif (a.solved == b.solved)\n\t{\n\t\tif (a.time == b.time)\n\t\t{\n\t\t\treturn a.team_id > b.team_id;\n\t\t}\n\t\treturn a.time < b.time;\n\t}\n\treturn a.solved > b.solved;\n}\nbool operator==(const Team &a, const Team &b)\n{\n\treturn a.solved == b.solved && a.time == b.time;\n}\n\nvoid solve()\n{\n\tint M, T, P, R;\n\twhile (cin >> M >> T >> P >> R, M)\n\t{\n\t\tvector<Team> v;\n\t\tfor (int i = 0; i < T; i++)\n\t\t{\n\t\t\tv.push_back(Team(P, i));\n\t\t}\n\n\t\tfor (int i = 0; i < R; i++)\n\t\t{\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tt--; p--;\n\t\t\tif (j == 0){\n\t\t\t\tfor (int k = 0; k < v.size(); k++)\n\t\t\t\t{\n\t\t\t\t\tif (v[k].team_id == t)\n\t\t\t\t\t{\n\t\t\t\t\t\tv[k].is_solve[p] = true;\n\t\t\t\t\t\tv[k].solved++;\n\t\t\t\t\t\tv[k].time += m;\n\t\t\t\t\t\tv[k].time += 20 * v[k].WA[p];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{ \n\t\t\t\tfor (int k = 0; k < v.size(); k++)\n\t\t\t\t{\n\t\t\t\t\tif (v[k].team_id == t)\n\t\t\t\t\t{\n\t\t\t\t\t\tv[k].WA[p]++;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tsort(v.begin(), v.end());\n\t\tfor (int i = 0; i < v.size(); i++)\n\t\t{\n\t\t\tif (i)\n\t\t\t{\n\t\t\t\tbool flag = (v[i - 1] == v[i]);\n\t\t\t\tcout << (flag ? \"=\" : \",\");\n\t\t\t}\n\t\t\tcout << v[i].team_id + 1;\n\t\t}\n\t\tcout << endl;\n\t}\n}\n\nint main()\n{\n\tsolve();\n\treturn(0);\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <cstdio>\n#include <iostream>\n#include <map>\n#include <cmath>\n#include <queue>\n#include <set>\n#include <sstream>\n#include <stack>\n#include <string>\n#include <vector>\n#include <stdlib.h>\n#include <stdio.h>\n#include <bitset>\n#include <cstring>\nusing namespace std;\n#define FOR(I,A,B) for(int I = (A); I < (B); ++I)\n#define CLR(mat) memset(mat, 0, sizeof(mat))\ntypedef long long ll;\ntypedef pair<ll, int> pll;\n\nint main()\n{\n  int M,T,P,R;\n  int i = 0;\n  while(cin>>M>>T>>P>>R, M||T||P||R) {\n    if(i) cout << '\\n';\n    int A[T+1],times[T+1],pena[T+1],miss[T+1][P+1];\n    CLR(A);CLR(times);CLR(pena);CLR(miss);\n    FOR(i,0,R) {\n      int m,t,p,j; cin >> m >> t >> p >> j;\n      if(j==0) {\n        A[t]++;\n        times[t] = m;\n        pena[t] += miss[t][p] * 20;\n      } else {\n        miss[t][p]++;\n      }\n    }\n    vector<pll> score(T);\n    FOR(i,1,T+1) {\n      ll s = A[i] * 10000000000 - pena[i] - times[i];\n      score[i-1] = pll(s, i);\n    }\n    sort(score.rbegin(), score.rend());\n    int j = 1;\n    ll now = score[0].first;\n    vector<vector<int> > ans(T+1);\n    FOR(i,0,T) {\n      if(now > score[i].first) {\n        j++;\n        now = score[i].first;\n      }\n      ans[j].push_back(score[i].second);\n    }\n    FOR(i,1,T+1) {\n      if((int)ans[i].size() > 0) {\n        if(i!=1) cout << ',';\n        vector<int> pr;\n        FOR(j,0,(int)ans[i].size()) {\n          pr.push_back(ans[i][j]);\n        }\n        sort(pr.rbegin(), pr.rend());\n        FOR(j,0,(int)pr.size()) {\n          if(j!=0 && j!=pr.size()) cout<<'=';\n          cout << pr[j];\n        }\n      }\n    }\n    i++;\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\nusing namespace std;\n\nstruct team {\n    int no;\n    int point;\n    int time;\n    int penalty[11];\n};\n\nvoid swap(team *a, team *b) {\n    team temp = *a;\n    *a = *b;\n    *b = temp;\n}\n\nint main() {\n    int a, b, c = 1, d;\n    int M, T, P, R;\n    int m, t, p, j;\n    int teamnum[2001] = {0};\n    team answers[2001][51];\n    \n    while (cin >> M >> T >> P >> R) {\n        if (M == 0 && T == 0 && P == 0 && R == 0)\n            break;\n        \n        teamnum[c] = T;\n        team teams[51];\n        for (a = 1; a <= T; a++) {\n            teams[a].no = a;\n            teams[a].point = 0;\n            teams[a].time = 0;\n            for (b = 1; b <= P; b++) {\n                teams[a].penalty[b] = 0;\n            }\n        }\n        \n        while (R--) {\n            cin >> m >> t >> p >> j;\n            if (j == 0) {\n                teams[t].point += 1;\n                teams[t].time += m;\n                teams[t].time += teams[t].penalty[p];\n            } else {\n                teams[t].penalty[p] += 20;\n            }\n        }\n        \n        /* ??????????????? */\n        for (a = 1; a < T; a++) {\n            for (b = a+1; b <= T; b++) {\n                if (teams[a].point < teams[b].point) {\n                    swap(&teams[a], &teams[b]);\n                } else if (teams[a].point == teams[b].point) {\n                    if (teams[a].time > teams[b].time)\n                        swap(&teams[a], &teams[b]);\n                    else if (teams[a].time == teams[b].time && teams[a].no < teams[b].no)\n                        swap(&teams[a], &teams[b]);\n                }\n            }\n        }\n        \n        for (d = 1; d <= T; d++)\n            answers[c][d] = teams[d];\n        c++;\n    }\n    \n    for (a = 1; a < c; a++) {\n        b = 1;\n        while (teamnum[a]--) {\n            if (b != 1 && answers[a][b-1].point != answers[a][b].point) cout << ',';\n            if (b != 1 && answers[a][b-1].point == answers[a][b].point) {\n                if (answers[a][b-1].time < answers[a][b].time) cout << ',';\n                else cout << '=';\n            }\n            //cout << \" point:\" << answers[a][b].point << \" time:\" << answers[a][b].time << ' ';\n            cout << answers[a][b].no;\n            b++;\n        }\n        cout << endl;\n    }\n    \n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n#define REP(i,b,e) for(int i=(b);i<(e);++i)\n#define rep(i,e) for(int i=0;i<(e);++i)\n\nint main() {\n  int M, T, P, R;\n  while(cin >> M >> T >> P >> R){\n    if(M==0) return 0;\n    int solved[T][P] = {};\n    vector<vector<int>> team(T, vector<int>(3)); // 0:solved, 1:time, 2:team number\n    rep(i, T) team[i][2] = -i-1;\n    rep(i, R){\n      int m, t, p, j;\n      cin >> m >> t >> p >> j;\n      t--;p--;\n      if(j==0){\n        if(solved[t][p]<0) team[t][1] += m + 20*abs(solved[t][p]);\n        else{\n          team[t][1] += m;\n        }\n        team[t][0] -= 1;\n      }\n      else solved[t][p] -= 1;\n    }\n    sort(team.begin(), team.end());\n    rep(i, T){\n      cout<<-team[i][2];\n      if(i!=T-1){\n        if(team[i][0]==team[i+1][0] && team[i][1]==team[i+1][1]) cout << \"=\";\n        else cout<<\",\";\n      }\n    }\n    cout<<endl;\n  }\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\nusing namespace std;\n\nint main(){\n    int M, T, P, R;\n    while(1){\n        cin >> M >> T >> P >> R;\n        if(M == 0){\n            break;\n        }\n\n        int ap[55] = {};\n        int at[55] = {};\n        int pen[55][11] = {};\n        for(int i=0;i<55;i++){\n            for(int j=0;j<11;j++){\n                pen[i][j] = 0;\n            }\n        }\n\n        for(int i=0;i<R;i++){\n            int m, t, p, j;\n            cin >> m >> t >> p >> j;\n            if(j==0){\n                ap[t]++;\n                at[t]+=m+20*pen[t][p];\n            }else{\n                pen[t][p]++;\n            }\n        }\n\n        bool c_flag = false;\n        for(int i=10;i>=0;i--){\n            for(int j=0;j<300*11;j++){\n                bool e_flag = false;\n                for(int k=T;k>=1;k--){\n                    if(ap[k]==i && at[k]==j){\n                        if(e_flag){\n                            cout << '=';\n                        }else if(c_flag){\n                            cout << ',';\n                        }\n                        c_flag = true;\n                        e_flag = true;\n                        cout << k;\n                    }\n                }\n            }\n        }\n        cout << endl;\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include <list>\n#include<stack>\n#include<queue>\n#include <vector>\n#include <set>\n#include<algorithm>\n#include<math.h>\n#include<stdlib.h>\n#include<string>\n#include <functional>\n#include<fstream>\n#include<numeric>\n\n#define FOR(k,m,n) for(int (k)=(m);(k)<(n);(k)++)\n#define REP(i,n) FOR((i),0,(n))\n#define LL long long\n#define CLR(a) memset((a),0,sizeof(a))\n#define SZ(x) (int((x).size()))\n#define WAITING(str) int str;std::cin>>str;\n#define DEBUGING(str) cout<<str<<endl\nusing namespace std;\n\nconst LL MOD = 1000000007;// 10^9+7\nconst int INF = (1 << 30);\n\nstruct Team {\n\tTeam(int id_, int P) {\n\t\tid = id_;\n\t\ttimes.resize(P, INF);\n\t\tpenalties.resize(P, 0);\n\t}\n\n\tint id;\n\tvector<int> times;\n\tvector<int> penalties;\n\n\tpair<int, int> score() const{\n\t\tint solveNum = 0;\n\t\tint penalty = 0;\n\n\t\tfor (int time : times) {\n\t\t\tif (time != INF) {\n\t\t\t\tsolveNum++;\n\t\t\t\tpenalty += time;\n\t\t\t}\n\t\t}\n\t\tREP(i, times.size()) {\n\t\t\tif (times[i] != INF) {\n\t\t\t\tpenalty += 20 * penalties[i];\n\t\t\t}\n\t\t}\n\n\t\treturn { -solveNum,penalty };\n\t}\n\n\tconst bool operator < (const Team r)const {\n\t\tif (score() == r.score()) {\n\t\t\treturn id > r.id;\n\t\t}\n\t\telse {\n\t\t\treturn score() < r.score();\n\t\t}\n\t}\n};\n\n//デバッグ\nvoid debug()\n{\n\tint N;\n\tcin>>N;\n}\n\n\n//メイン関数\nint main()\n{\n\twhile (true) {\n\t\tint M, T, P, R;\n\t\tcin >> M >> T >> P >> R;\n\t\tif (M == 0)break;\n\n\t\tvector<Team> teams;\n\t\tREP(i, T) {\n\t\t\tteams.push_back(Team(i + 1, P));\n\t\t}\n\t\tREP(i, R) {\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tt--;\n\t\t\tp--;\n\t\t\tif (j == 0) {\n\t\t\t\tteams[t].times[p] = m;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tteams[t].penalties[p]++;\n\t\t\t}\n\t\t}\n\t\tsort(teams.begin(), teams.end());\n\n\t\t//output\n\t\tREP(i, T) {\n\t\t\tcout << teams[i].id;\n\t\t\tif (i != T - 1) {\n\t\t\t\tif (teams[i].score() == teams[i + 1].score()) {\n\t\t\t\t\tcout << \"=\";\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tcout << \",\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcout << endl;\n\t}\n\t//debug();\n\t\n\treturn 0;\n}\n\n\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n\nusing namespace std;\n\nclass Question{\npublic:\n    bool isAC;\n    int p;\n};\nclass Team{\npublic:\n    int ID;\n    int AC;\n    int ptime;\n    vector<Question> q;\n\n    Team() : ID(-1){}\n    Team(int id,int qn)\n        : ID(id), q(qn+1)\n    {\n    }\n\n    void submit(int m,int p,int j){\n        if(j == 0){\n            q[p].p += m;\n            q[p].isAC = true;\n            AC++;\n            ptime += q[p].p;\n        }else{\n            q[p].p += 20;\n        }\n    }\n};\n\nbool operator==(const Team& a,const Team& b){\n    return a.AC == b.AC && a.ptime == b.ptime;\n}\nbool operator!=(const Team& a,const Team& b){\n    return !(a == b);\n}\n\n//M:テァツオツづ、ツコツ?ヲツ卍づゥツ鳴?\n//T:テ」ツδ?」ツδシテ」ツδ?ヲツ閉ー\n//P:テ・ツ閉湘ゥツ。ツ古ヲツ閉ー\n//R:テヲツ渉静・ツ?コテヲツ閉ー\nvoid solve(int M,int T,int P,int R){\n    vector<Team> team;\n    for(int i=1;i<=T;i++){\n        team.push_back(Team(i,P));\n    }\n    for(int i=0;i<R;i++){\n        int m,t,p,j;\n        cin >> m >> t >> p >> j;\n        team[t-1].submit(m,p,j);\n    }\n    std::sort(team.begin(),team.end(),\n            [](const Team& a,const Team& b)->bool{\n                if(a.AC < b.AC)\n                    return true;\n                if(a.AC > b.AC)\n                    return false;\n                return a.ptime > b.ptime;\n            }\n            );\n    std::reverse(team.begin(),team.end());\n    bool f = false;\n    cout << team[0].ID;\n    for(int i=1;i<T;i++){\n        if(team[i-1] == team[i]){\n            cout << \"=\" << team[i].ID;\n        }else{\n            cout << \",\" << team[i].ID;\n        }\n    }\n    //for(auto t : team)\n    //{\n    //    //cout << t.ID << \" :\" << t.AC << \" ,\" << t.ptime << endl;\n    //}\n    cout << endl;\n}\n\nint main(){\n    while(true){\n        int M,T,P,R;\n        cin >> M >> T >> P >> R;\n        if(!M&&!T&&!P&&!R)\n            return 0;\n        solve(M,T,P,R);\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<vector>\n#include<string>\n#include<cstdlib>\n#include<sstream>\n#include<queue>\n#include<cmath>\n#include<algorithm>\n#include<stack>\n#include<map>\n#include<set>\n#define INF 2147483647\n#define lli long long int\n\nusing namespace std;\ntypedef vector<int> vi;\ntypedef vector< vector<int> > vvi;\ntypedef pair<int,int> pii;\ntypedef vector<pair<int,int>> vpii;\n\nclass Team{\n\n\tpublic:\n\t\tint id = 0;\n\t\tint solve = 0;\n\t\tint time = 0;\n\t\tint rank = 0;\t\n\t\tvector<int> check; \n\t\tvoid set(int P,int id){\n\t\t\tthis->id = id;\n\t\t\tfor (int i = 0; i < P; i++){\n\t\t\t\tcheck.push_back(0);\n\t\t\t}\n\t\t}\n};\n\n\nbool compare(Team maxT, Team G){\n\tif (maxT.solve < G.solve){\n\t\treturn true;\n\t}else if (maxT.solve > G.solve){\n\t\treturn false;\n\t}else{\n\t\tif (maxT.time > G.time){\n\t\t\treturn true;\t\n\t\t}else if(maxT.time < G.time){\n\t\t\treturn false;\n\t\t}else{\n\t\t\tif (maxT.id < G.id){\n\t\t\t\treturn true;\n\t\t\t}else{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t}\n}\n\nvoid result_sort(vector<Team> &Group){\n\tint maxj = 0;\n\tTeam maxT;\n\tfor (int i = 0; i < Group.size(); i++){\n\t\tmaxj = i;\n\t\tmaxT.id = INF;\n\t\tmaxT.time = INF;\n\t\tmaxT.solve = 0;\n\t\tfor (int j = i; j < Group.size(); j++){\n\t\t\tif(compare(maxT,Group[j])){\n\t\t\t\tmaxT = Group[j];\n\t\t\t\tmaxj = j;\n\t\t\t}\n\t\t}\n\t\tTeam tmp = Group[i];\n\t\tGroup[i] = Group[maxj];\n\t\tGroup[maxj] = tmp;\n\t}\n\t\n}\n\nvoid result_print(vector<Team> Group){\n\tcout << Group[0].id;\n\tint old_solve = Group[0].solve;\n\tint old_time = Group[0].time;\n\tfor (int i = 1; i < Group.size(); i++){\n\t\tif (old_solve == Group[i].solve and old_time == Group[i].time){\n\t\t\tcout << \"=\" <<  Group[i].id ;\t\n\t\t}else{\n\t\t\tcout << \",\" << Group[i].id; \n\t\t}\n\t\told_solve = Group[i].solve;\n\t\told_time = Group[i].time;\n\t}\n\tcout << endl;\n}\n\nint main() {\n\n\twhile(1){\n\t\tint M,T,P,R; cin >> M >> T >> P >> R;\n\t\tif (M + T + P + R ==0) break;\n\t\t\n\t\tvector<Team> Group(T);\n\n\t\tfor (int i = 0; i < T; i++){\n\t\t\tGroup[i].set(P,i+1);\t\n\t\t}\n\t\tfor (int i = 0 ; i < R; i++){\n\t\t\tint m,t,p,r;\n\t\t\tcin >> m >> t >> p >> r;\n\t\t\tif (r == 0){//correct\n\t\t\t\tGroup[t-1].time += m + Group[t-1].check[p-1] * (20);\n\t\t\t\tGroup[t-1].check[p-1] = 0;\n\t\t\t\tGroup[t-1].solve++;\n\t\t\t}else{\n\t\t\t\tGroup[t-1].check[p-1]++;\n\t\t\t}\n\t\t}\n\t\tresult_sort(Group);\n\t\tresult_print(Group);\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "// テ・ツ淞コテヲツ慊ャテ」ツδ?」ツδウテ」ツδ療」ツδャテ」ツδシテ」ツδ?(テァツクツョテ・ツーツ湘ァツ可?\n\n#include <bits/stdc++.h>\nusing namespace std;\n#define rep(i,a,n) for(int (i)=(a); (i)<(n); (i)++)\n#define repq(i,a,n) for(int (i)=(a); (i)<=(n); (i)++)\n#define repr(i,a,n) for(int (i)=(a); (i)>=(n); (i)--)\n#define int long long\ntemplate<typename T> void chmax(T &a, T b) {a = max(a, b);}\ntemplate<typename T> void chmin(T &a, T b) {a = min(a, b);}\ntemplate<typename T> void chadd(T &a, T b) {a = a + b;}\ntypedef pair<int, int> pii;\ntypedef long long ll;\nconstexpr ll INF = 1001001001001001LL;\nconstexpr ll MOD = 1000000007LL;\n\nint M, T, P, R;\nint num[60], sum[60], wa[60][15];\n\nstruct Elem {\n    int team, solved, tm;\n};\n\nbool operator<(const Elem &a, const Elem &b) {\n    if(a.solved != b.solved) return a.solved > b.solved;\n    if(a.tm != b.tm) return a.tm < b.tm;\n    return a.team > b.team;\n}\n\nsigned main() {\n    while(cin >> M >> T >> P >> R, M) {\n        memset(num, 0, sizeof(num));\n        memset(sum, 0, sizeof(sum));\n        memset(wa , 0, sizeof(wa ));\n\n        rep(i,0,R) {\n            int m, t, p, j; cin >> m >> t >> p >> j;\n            // Accepted\n            if(j == 0) {\n                num[t]++;\n                sum[t] += m + 20 * wa[t][p];\n            }\n            // WA\n            else {\n                wa[t][p]++;\n            }\n        }\n\n        vector<Elem> v;\n        repq(i,1,T) v.push_back(Elem{i, num[i], sum[i]});\n        sort(v.begin(), v.end());\n\n        pii prev = pii(-1, -1);\n        rep(i,0,T) {\n            pii t = pii(v[i].solved, v[i].tm);\n            // printf(\"num = %lld, sum = %lld\\n\", num[i], sum[i]);\n            bool p = (t == prev);\n            if(i != 0) cout << (p ? \"=\" : \",\");\n            printf(\"%lld\", v[i].team);\n            prev = t;\n        }\n        cout << endl;\n    }\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\nusing namespace std;\nstruct S{\n  int number;\n  int AC[10]={},WA[10]={},time=0;\n  int sumAC=0;\n};\nbool cmp(S a,S b){\n  if(a.sumAC==b.sumAC){\n      if(a.time==b.time)return a.number>b.number;\n      return a.time<b.time;\n  }\n  return a.sumAC>b.sumAC;\n \n}\nsigned main (){\n  int M,T,P,R;\n  while(cin>>M>>T>>P>>R&&M){\n    vector<S> v(T);\n    for(int i=0;i<T;i++)v[i].number=i+1; //まずは番号を入れる\n    for(int i=0;i<R;i++){\n      int m,t,p,j;\n      cin>>m>>t>>p>>j;\n      t--;p--; //0-indexに\n      if(j==0){ //正解なら\n          v[t].AC[p]++;\n          v[t].time+=v[t].WA[p]*20;\n          v[t].time+=m;\n      }\n      else v[t].WA[p]++; //誤答なら\n    }\n    for(int i=0;i<T;i++){\n      for(int j=0;j<P;j++){\n        v[i].sumAC+=v[i].AC[j]; //各チームの正解数を求める\n      }\n    }\n    sort(v.begin(),v.end(),cmp); //上で書いた比較関数cmpを使ってソート。配列の中身が強い順になる\n \n    for(int i=0;i<T;i++){\n      cout<<v[i].number;\n      while(i+1<T&&v[i].sumAC==v[i+1].sumAC&&v[i].time==v[i+1].time){ //順位が同じ時の処理\n          i++;\n          cout<<'='<<v[i].number;\n      }\n      if(i!=T-1)cout<<','; //最後はカンマ打ちません\n    }\n    cout<<endl;\n  }\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n#include <tuple>\n#include <vector>\nusing namespace std;\ntypedef tuple<int,int,int> T3;\nint cnt[50];\nint tt[50];\nint penalty[50][10];\n\n\nint main(){\n    int M,T,P,R;\n    while(cin>>M>>T>>P>>R,M){\n        fill(cnt,cnt+50,0);\n        fill(tt,tt+50,0);\n        fill(penalty[0],penalty[50],0);\n        for(int i=0;i<R;i++){\n            int m,t,p,j;\n            cin>>m>>t>>p>>j;\n            t--; p--;\n            if(j){\n                penalty[t][p]+=20;\n            }else{\n                cnt[t]++;\n                tt[t]+=penalty[t][p]+m;\n            }\n        }\n        vector<T3> V;\n        for(int i=0;i<T;i++){\n            V.emplace_back(cnt[i],-tt[i],i+1);\n        }\n        sort(V.begin(), V.end(),greater<T3>());\n        for(int i=0;i<T;i++){\n            if(i){\n                int c1,c2,tt1,tt2,i1,i2;\n                tie(c1,tt1,i1)=V[i-1];\n                tie(c2,tt2,i2)=V[i];\n                if(c1==c2&&tt1==tt2){\n                    cout<<'=';\n                }else{\n                    cout<<',';\n                }\n            }\n            cout<<get<2>(V[i]);\n        }\n        cout<<endl;        \n    }\n\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<vector>\n#include<algorithm>\nusing namespace std;\n\nstruct data{\n    int team, solve, tim;\n    int pena[11] = {};\n    data() {}\n    data(int t) : team(t) {solve = 0, tim = 0;}\n    void add(int p, int r){\n        solve++;\n        tim += r + pena[p]*20;\n    }\n\n    bool operator <(const data other) const{\n        if(solve != other.solve){\n            return solve > other.solve;\n        }else if(tim != other.tim){\n            return tim < other.tim;\n        }else{\n            return team > other.team;\n        }\n    }\n\n    bool operator ==(const data other){\n        return solve == other.solve && tim == other.tim;\n    }\n};\n\nint main(){\n    int M, T, P, R;\n\n    while(cin >> M >> T >> P >> R, M+T+P+R){\n        vector<data> v(T);\n        for(int i = 0; i < T; i++)  v[i] = data(i+1);\n\n        int m, t, p, j;\n        for(int i = 0; i < R; i++){\n            cin >> m >> t >> p >> j;\n            if(j == 0){\n                v[t-1].add(p, m);\n            }else{\n                v[t-1].pena[p]++;\n            }\n        }\n\n        sort(v.begin(), v.end());\n\n        cout << v[0].team;\n        for(int i = 1; i < T; i++){\n            if(v[i] == v[i-1])  cout << \"=\";\n            else                cout << \",\";\n            cout << v[i].team;\n        }\n        cout << endl;\n    }\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <string>\n#include <queue>\n#include <stack>\n#include <algorithm>\n#include <list>\n#include <vector>\n#include <complex>\n#include <utility>\n#include <cstdio>\n#include <cstdlib>\n#include <cstring>\n#include <cmath>\n#include <climits>\n#include <bitset>\n#include <ctime>\n#include <map>\n#include <unordered_map>\n#include <set>\n#include <unordered_set>\n#include <cassert>\n#include <cstddef>\n#include <iomanip>\n#include <numeric>\n#include <tuple>\n#include <sstream>\n#include <fstream>\n\nusing namespace std;\n#define REP(i, n) for (int (i) = 0; (i) < (n); (i)++)\n#define FOR(i, a, b) for (int (i) = (a); (i) < (b); (i)++)\n#define RREP(i, a) for(int (i) = (a) - 1; (i) >= 0; (i)--)\n#define FORR(i, a, b) for(int (i) = (a) - 1; (i) >= (b); (i)--)\n#define DEBUG(C) cerr << #C << \" = \" << C << endl;\nusing LL = long long;\nusing VI = vector<int>;\nusing VVI = vector<VI>;\nusing VL = vector<LL>;\nusing VVL = vector<VL>;\nusing VD = vector<double>;\nusing VVD = vector<VD>;\nusing PII = pair<int, int>;\nusing PDD = pair<double, double>;\nusing PLL = pair<LL, LL>;\nusing VPII = vector<PII>;\n#define ALL(a) begin((a)), end((a))\n#define RALL(a) rbegin((a)), rend((a))\n#define SORT(a) sort(ALL((a)))\n#define RSORT(a) sort(RALL((a)))\n#define REVERSE(a) reverse(ALL((a)))\n#define MP make_pair\n#define FORE(a, b) for (auto &&a : (b))\n#define FIND(s, e) ((s).find(e) != (s).end())\n#define EB emplace_back\n\nconst int INF = 1e9;\nconst int MOD = INF + 7;\nconst LL LLINF = 1e18;\n\nvoid solve(int M, int T, int P, int R) {\n    vector<pair<VI, VI>> team(T);\n    REP(i, T) team[i] = MP(VI(P, -1), VI(P, 0)); //(AC?????????, WA??°)\n    REP(i, R) {\n        int m, t, p, j;\n        cin >> m >> t >> p >> j;\n        t--;p--;\n        if (j == 0) {\n            int pena = team[t].second[p] * 20;\n            team[t].first[p] = pena + m;\n        } else {\n            team[t].second[p]++;\n        }\n    }\n    vector<pair<PII, int>> ans(T); //(AC??°, ????¨??????????), ???????????????\n    REP(i, T) {\n        int ac = 0, tim = 0;\n        REP(j, P) {\n            if (team[i].first[j] != -1) {\n                ac++;\n                tim += team[i].first[j];\n            }\n        }\n        ans[i] = MP(MP(ac, tim), i);\n    }\n    sort(ALL(ans), [](const pair<PII, int>& l, pair<PII, int>& r) {\n        if (l.first.first != r.first.first) return l.first.first > r.first.first;\n        if (l.first.second != r.first.second) return l.first.second < r.first.second;\n        return l.second > r.second;\n    });\n    PII back = MP(-1, -1);\n    REP(i, T) {\n        if (i) if (ans[i].first == back) {\n            cout << \"=\";\n        } else {\n            cout << \",\";\n        }\n        cout << ans[i].second + 1;\n        back = ans[i].first;\n    }cout << endl;\n    return;\n}\n\nsigned main(void) {\n    int n, m, p, a, b, c, x, y, z, q;\n    string s;\n    bool f = false;\n    while (cin >> n >> m >> p >> a, n) {\n        solve(n, m, p, a);\n        //return 0;\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <algorithm>\n\nusing namespace std;\n\nstruct team {\n\tteam() {\n\t\tfor (int i = 0; i < 10; ++i) {\n\t\t\tac[i] = -1;\n\t\t\tfa[i] = 0;\n\t\t}\n\t}\n\tint no;\n\tint ac[10];\n\tint fa[10];\n\t\n\tint na() const {\n\t\tint ans = 0;\n\t\tfor (int i = 0; i < 10; ++i)\n\t\t\tif (ac[i] != -1)\n\t\t\t\t++ans;\n\t\treturn ans;\n\t}\n\t\n\tint st() const {\n\t\tint ans = 0;\n\t\tfor (int i = 0; i < 10; ++i)\n\t\t\tif (ac[i] != -1)\n\t\t\t\tans += ac[i] + fa[i] * 20;\n\t\treturn ans;\n\t}\n\t\n\tbool operator==(const team &rh) {\n\t\treturn this->na() == rh.na() && this->st() == rh.st();\n\t}\n\t\n\tbool operator<(const team &rh) const {\n\t\tif (this->na() > rh.na())\n\t\t\treturn true;\n\t\telse if (this->na() < rh.na())\n\t\t\treturn false;\n\t\t\n\t\tif (this->st() < rh.st())\n\t\t\treturn true;\n\t\telse if (this->st() > rh.st())\n\t\t\treturn false;\n\t\t\n\t\treturn this->no > rh.no;\n\t}\n};\n\nint main()\n{\n\tfor (;;) {\n\t\tint m, t, p, r;\n\t\tscanf(\"%d %d %d %d\", &m, &t, &p, &r);\n\t\tif (m == 0 && t == 0 && p == 0 && r == 0)\n\t\t\tbreak;\n\t\t\t\n\t\tteam teams[50];\n\t\tfor (int i = 0; i < t; ++i)\n\t\t\tteams[i].no = i + 1;\n\t\t\n\t\tfor (int i = 0; i < r; ++i) {\n\t\t\tint m, t, p, j;\n\t\t\tscanf(\"%d %d %d %d\", &m, &t, &p, &j);\n\t\t\t\n\t\t\tif (j == 0)\n\t\t\t\tteams[t - 1].ac[p - 1] = m;\n\t\t\telse if (j == 1)\n\t\t\t\tteams[t - 1].fa[p - 1] += 1;\n\t\t}\n\t\t\n\t\tsort(teams, teams + t);\n\t\t\n\t\tfor (int i = 0; i < t; ++i) {\n\t\t\tprintf(\"%d\", teams[i].no);\n\t\t\tif (i == t - 1)\n\t\t\t\tprintf(\"\\n\");\n\t\t\telse if (teams[i] == teams[i + 1])\n\t\t\t\tprintf(\"=\");\n\t\t\telse\n\t\t\t\tprintf(\",\");\n\t\t}\n\t}\n\t\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n\nusing namespace std;\n\nstruct Team {\n\tint tid, ac, penalty;\n\tTeam() { tid = -1, ac = 0, penalty = 0; }\n};\nbool operator >(const Team& t1, const Team& t2) {\n\tif (t1.ac == t2.ac) {\n\t\tif (t1.penalty == t2.penalty) return t1.tid > t2.tid;\n\t\telse return t1.penalty < t2.penalty;\n\t}\n\telse return t1.ac > t2.ac;\n}\nbool operator ==(const Team& t1, const Team& t2) {\n\treturn t1.ac == t2.ac && t1.penalty == t2.penalty;\n}\n\nint main() {\n\tint M, T, P, R;\n\twhile ( cin >> M >> T >> P >> R, M || T || P || R ) {\n\t\tint wa[50][10] = {0};\n\t\tint ac[50][10] = {0};\n\t\tvector<Team> tdt(T);\n\t\tfor (int i = 0; i < T; ++i) tdt[i].tid = i+1;\n\t\tfor (int i = 0; i < R; ++i) {\n\t\t\tint m, t, p, j; cin >> m >> t >> p >> j;\n\t\t\t--t, --p;\n\t\t\tif (j == 0) {\n\t\t\t\tif (ac[p][t] == 0) {\n\t\t\t\t\t++ac[p][t];\n\t\t\t\t\t++tdt[t].ac;\n\t\t\t\t\ttdt[t].penalty += m + 20 * wa[p][t];\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\t++wa[p][t];\n\t\t\t}\n\t\t}\n\t\tsort( tdt.begin(), tdt.end(), greater<Team>() );\n\t\tfor (int i = 0; i < tdt.size(); ++i) {\n\t\t\tif (i) {\n\t\t\t\tif (tdt[i] == tdt[i-1]) cout << \"=\";\n\t\t\t\telse cout << \",\";\n\t\t\t}\n\t\t\tcout << tdt[i].tid;\n\t\t}\n\t\tcout << endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\nusing namespace std;\n\nint M, T, P, R;\n\nstruct Team{\n\tint id, ac, timecost;\n\tint wa[11];\n\tTeam(int i){\n\t\tid = i;\n\t\tac = 0; timecost = 0;\n\t\tfor(int i = 0; i < 11; i++) wa[i] = 0;\n\t}\n};\n\nbool compare(const Team &a, const Team &b){\n\tif(a.ac != b.ac) return a.ac > b.ac;\n\telse if(a.timecost != b.timecost) return a.timecost < b.timecost;\n\telse return a.id > b.id;\n}\n\nint main(){\n\twhile(cin >> M >> T >> P >> R && M != 0 && T != 0 && P != 0 && R != 0){\n\t\tvector<Team> teams;\n\t\tfor(int i = 0; i < T; i++){\n\t\t\tTeam t(i);\n\t\t\tteams.push_back(t);\n\t\t}\n\n\t\tfor(int i = 0; i < R; i++){\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >>j;\n\t\t\tif(j == 0){\n\t\t\t\tteams[t-1].ac++;\n\t\t\t\tteams[t-1].timecost += m + teams[t-1].wa[p] * 20;\n\t\t\t}else{\n\t\t\t\tteams[t-1].wa[p]++;\n\t\t\t}\n\t\t}\n\n\t\tsort(teams.begin(), teams.end(), compare);\n\n\t\tint p_ac = -1, p_tc = -1;\n\t\tfor(int i = 0; i < T; i++){\n\t\t\tif (i>0) {\n\t\t\t\tif(teams[i-1].ac== teams[i].ac && teams[i-1].timecost == teams[i].timecost) cout << \"=\";\n\t\t\t\telse cout << \",\";\t\n\t\t\t}\n\t\t\tcout << teams[i].id+1;\n\t\t\t/*\n\t\t\tif(p_ac == teams[i].ac && p_tc == teams[i].timecost){\n\t\t\t\tcout << \"=\" << teams[i].id + 1;\n\t\t\t}else if(i != 0){\n\t\t\t\tcout << \",\" << teams[i].id + 1;\n\t\t\t\tp_ac = teams[i].ac;\n\t\t\t\tp_tc = teams[i].timecost;\n\t\t\t}else{\n\t\t\t\tcout << teams[i].id + 1;\n\t\t\t\tp_ac = teams[i].ac;\n\t\t\t\tp_tc = teams[i].timecost;\n\t\t\t}*/\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n  \nusing namespace std;\ntypedef long long ll;\n  \n#define rep(i, n) for(int i=0; i<(n); ++i)\n \nclass team {\npublic:\n    int id, solve, time, miss[11];\n    bool operator<(const team & rhs) const{\n        if(solve > rhs.solve) return true;\n        else if(solve==rhs.solve && time < rhs.time) return true;\n        else if(solve==rhs.solve && time == rhs.time && id > rhs.id) return true;\n        return false;\n    }\n};\nint main(void){\n    int M, T, P, R;\n    int m, t, p, j;\n    team teams[51];\n    while(cin >> M >> T >> P >> R && M) {\n        rep(i, T) {\n            teams[i].id = i+1;\n            teams[i].solve = 0;\n            teams[i].time = 0;\n            rep(j, P) teams[i].miss[j] = 0;\n        }\n        rep(i, R) {\n            cin >> m >> t >> p >> j;\n            t--;\n            if(j == 0) {\n                teams[t].solve++;\n                teams[t].time += m + teams[t].miss[p] * 20;\n            } else {\n                teams[t].miss[p]++;\n            }\n        }\n        sort(teams, teams+T);\n        rep(i, T-1) {\n        rep(i, T) {\n            printf(\"%d: %d %d\\n\", teams[i].id, teams[i].solve, teams[i].time);\n        }\n            cout << teams[i].id;\n            if(teams[i].solve==teams[i+1].solve && teams[i].time==teams[i+1].time) {\n                cout << \"=\";\n            } else {\n                cout << \",\";\n            }\n        }\n        cout << teams[T-1].id << endl;\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <utility>\nusing namespace std;\n\nint main(){\n  int m,t,p,r,i,j,k;\n  while(1){\n    cin >> m >> t >> p >> r;\n    if(m==0)break;\n    int ac[t]={},wa[t][p+1],actime[t]={};\n    for(i=0;i<t;i++){\n      for(j=0;j<p;j++)wa[i][j]=0;\n    }\n    for(i=0;i<r;i++){\n      int M,T,P,R;\n      cin >> M >> T >> P >> R;\n      if(R!=0)wa[T-1][P]++;\n      else{\n        ac[T-1]++;\n        actime[T-1]+=wa[T-1][P]*20+M;\n      }\n    }\n\n    //cout << actime[0] << actime[1] << endl;\n\n    bool flag[t]={};\n    int bscore=-1,bfinaltime=-1;\n    for(j=0;j<t;j++){\n      int team=-1,score=-1,finaltime=300*20;\n      for(i=0;i<t;i++){\n        if(flag[i]==true)continue;\n        if(score<ac[i]){\n          team=i;\n          score = ac[i];\n          finaltime= actime[i];\n        }else if(score == ac[i] && finaltime>=actime[i]){\n          team=i;\n          finaltime=actime[i];\n        }\n      }\n      if(j!=0){\n        if(bscore==score && bfinaltime==finaltime)cout << \"=\";\n        else cout << \",\";\n      }\n      cout << team+1;\n      flag[team]=true;\n      bscore = score;\n      bfinaltime=finaltime;\n    }\n    cout << endl;\n  }\n  return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <map>\n#include <set>\n#include <string>\n#include <queue>\n#include <stack>\n#include <algorithm>\n#include <cmath>\n#include <cstring>\n\nusing namespace std;\n\nint main() {\n    int M, T, P, R;\n    while (cin >> M >> T >> P >> R){\n        int num_solved[T];\n        int num_wrong[T][P];\n        int total_time[T];\n\n        memset(num_solved, 0, sizeof(num_solved));\n        memset(num_wrong, 0, sizeof(num_wrong));\n        memset(total_time, 0, sizeof(total_time));\n\n        for (int i = 0; i < R; i++){\n            int m, t, p, j;\n            cin >> m >> t >> p >> j; t--; p--;\n            if (j == 0){\n                num_solved[t]++;\n                total_time[t] += num_wrong[t][p] * 20 + m;\n            } else {\n                num_wrong[t][p]++;\n            }\n        }\n\n        vector<pair<pair<int, int>, int> > vs; \n\n        for (int i = 0; i < T; i++){\n            vs.push_back(make_pair(make_pair(-num_solved[i], total_time[i]), -i)); \n        }\n        sort(vs.begin(), vs.end());\n\n        for (int i = 0; i < T; i++){\n            if (i > 0){\n                if (vs[i].first == vs[i - 1].first){\n                    cout << \"=\";\n                } else {\n                    cout << \",\";\n                }\n            }\n            cout << -vs[i].second + 1 ;\n        }\n        cout << endl; \n    }\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "\n#include <iostream>\n#include <cmath>\n#include <vector>\n#include <string>\n#include <map>\n#include <algorithm>\n#include <tuple>\n#include <set>\n\nusing namespace std;\nusing ll = long long;\nusing ull = unsigned long long;\nusing vi = vector<int>;\nusing vvi = vector<vi>;\nusing vl = vector<ll>;\nusing pii = pair<int, int>;\n#define out(S) cout<<(S)<<endl;\n#define REP(i,b) for(size_t i=0;i<(b);i++)\n#define rREP(i,b) for(int i=(b)-1;i>=0;i--)\n#define FOR(i,a,b) for(size_t i=(a);i<(b);i++)\n#define rFOR(i,a,b) for(int i=(a)-1;i>=(b);i--)\n#define Foreach(item,collection) for(auto item:collection)\n#define mod(i) ((i) % (ll)(1e9 + 7))\nll modpow(ll i, ll j) { ll tmp = 1; while (j) { if (j % 2)tmp = mod(tmp*i); i = mod(i*i); j /= 2; }return tmp; }\n#define divmod(a,b) (mod(a * modpow((ll)b,(ll)(1e9 + 5))))\n#define Yes out(\"Yes\")\n#define No out(\"No\")\n#define NO out(\"NO\")\n#define YES out(\"YES\")\n#define INF 1e10;\n#define ShowAll(collection) for(auto i:collection){out(i);}\n#define IfOut(condition,text) if((condition)){out(text);return 0;}\n#define IfeOut(condition,itext,etext) if(condition){out(itext);return 0;}else{out(etext);return 0;}\n#define Select(collection,condition,result) Foreach(i,collection){result+=condition;}\n#define GetAuto(_N,vect) {cin>>_N;vect.resize(_N);REP(i,_N){cin>>vect[i];}}\n#define beginend(vec) (vec).begin(),(vec).end()\n#define pb(item) push_back(item)\n#define removeAll(vec,deleg) auto itr=remove_if(beginend(vec),deleg);vec.erase(itr,vec.end());\n#define WhileCin(n) while(cin>>n)\nvoid removeAt(string& s, int index) { s.erase(index, 1); }\ntemplate<typename T> void removeAt(vector<T>& v, int index) { v.erase(v.begin() + index); }\nll manhattanDistance(ll x1, ll y1, ll x2, ll y2) { return (abs(x2 - x1) + abs(y2 - y1)); }\nvector<ll> sieveOfEratosthenes(int max) { ll prime; double sqrtmax = sqrt(max); vector<ll> primeVec, searchVec; FOR(i, 2, max + 1) searchVec.push_back(i); do { prime = searchVec[0]; primeVec.push_back(prime); auto itr = remove_if(beginend(searchVec), [=](ll x)->bool {return x%prime == 0; }); searchVec.erase(itr, searchVec.end()); } while (prime < sqrtmax); primeVec.reserve(primeVec.size() + searchVec.size()); primeVec.insert(primeVec.end(), beginend(searchVec)); return primeVec; }\n\n\nstruct Team\n{\n\tint tNum;\n\tint sTime;\n\tint cCount;\n};\n\nint main()\n{\n\tint M, T, P, R;\n\tbool w_flag = true;\n\tstring ans = \"\";\n\n\tWhileCin(M >> T >> P >> R) {\n\t\tvector<Team> team;\n\t\tvvi teamPenalty;\n\t\tteamPenalty.resize(T);\n\t\tREP(i, T) { Team t; t.cCount = 0; t.sTime = 0; t.tNum = i+1;team.pb(t);\tteamPenalty[i].resize(P,0);\t}\n\t\tint n = 0;\n\t\tdo\n\t\t{\n\t\t\tint mi, ti, pi, ji;\n\t\t\tcin >> mi >> ti >> pi >> ji;\n\t\t\tif (!mi && !ti && !pi && !ji) { w_flag = false; break; }\n\t\t\tif (ji) { n++; teamPenalty[ti - 1][pi-1] += 20; continue; }\n\t\t\tteam[ti - 1].sTime += mi + teamPenalty[ti - 1][pi-1];\n\t\t\tteam[ti - 1].cCount++;\n\t\t\tn++;\n\t\t} while (n<R);\n\t\tsort(beginend(team), [](Team t1, Team t2) {return (t1.cCount == t2.cCount) ? (t1.sTime == t2.sTime) ? (t1.tNum < t2.tNum) : (t1.sTime > t2.sTime) : (t1.cCount < t2.cCount); });\n\t\treverse(beginend(team));\n\t\tint bfTime = 0, bfCount = 0;\n\t\tbool out_flag = false;\n\t\tForeach(i, team) {if (out_flag) {if (bfCount == i.cCount&&bfTime == i.sTime) ans += \"=\";else ans += \",\";}bfCount = i.cCount;bfTime = i.sTime;out_flag = true;ans += to_string(i.tNum);}\n\t\tans += \"\\n\";\n\t\tif (!w_flag) break;\n\t}\n\tstd::cout << ans << std::endl;\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<stdio.h>\n\nint main(){\n\nint M,T,P,R;\n\nwhile(1){\nscanf(\"%d%d%d%d\",&M,&T,&P,&R);\nif(M==0&&T==0&&P==0&&R==0)break;\n\nint n[51][11]={};int n2[51][11]={};\n\nint m,t,p,j;\nfor(int i=0;i<R;i++)\n{\nscanf(\"%d%d%d%d\",&m,&t,&p,&j);\nif(j==0){n[t][p]+=m;n2[t][p]=1;}\nelse{n[t][p]+=20;}\n}\n\n\n\nint N[51][3]={};\nfor(int i=1;i<=T;i++)\nfor(int k=1;k<=P;k++)\n{\nN[i][0]+=n[i][k];\nN[i][1]+=n2[i][k];\nN[i][2]=i;\n}\n\nfor(int i=1;i<=T;i++)\nfor(int k=T;k>i;k--)\nif(N[k][1]>N[k-1][1]){\nint t=N[k][1];N[k][1]=N[k-1][1];N[k-1][1]=t;\nint t2=N[k][0];N[k][0]=N[k-1][0];N[k-1][0]=t2;\nint t3=N[k][2];N[k][2]=N[k-1][2];N[k-1][2]=t3;\n}\n\nfor(int i=1;i<=T;i++)\nfor(int k=T;k>i;k--)\n\tif(N[k][1]==N[k-1][1]&&N[k][0]==N[k-1][0]&&N[k][2]>N[k-1][2]){\n\t\tint t3=N[k][2];N[k][2]=N[k-1][2];N[k-1][2]=t3;\n\t}\n\n\nfor(int i=1;i<=T;i++)\n{if(i>1){if(N[i][1]==N[i-1][1]&&N[i][0]==N[i-1][0])printf(\"=\");\nelse printf(\",\");}\n\nprintf(\"%d\",N[i][2]);\n}\nprintf(\"\\n\");\n}\nreturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<vector>\n#include<string>\n#include<cstdlib>\n#include<sstream>\n#include<queue>\n#include<cmath>\n#include<algorithm>\n#include<stack>\n#include<map>\n#include<set>\n#define INF 2147483647\n#define lli long long int\n\nusing namespace std;\ntypedef vector<int> vi;\ntypedef vector< vector<int> > vvi;\ntypedef pair<int,int> pii;\ntypedef vector<pair<int,int>> vpii;\n\nclass Team{\n\n\tpublic:\n\t\tint id = 0;\n\t\tint solve = 0;\n\t\tint time = 0;\n\t\tint rank = 0;\t\n\t\tvector<int> check; \n\t\tvoid set(int P,int id){\n\t\t\tthis->id = id;\n\t\t\tfor (int i = 0; i < P; i++){\n\t\t\t\tcheck.push_back(0);\n\t\t\t}\n\t\t}\n};\n\n\nbool compare(Team maxT, Team G){\n\tif (maxT.solve < G.solve){\n\t\treturn true;\n\t}else if (maxT.solve > G.solve){\n\t\treturn false;\n\t}else{\n\t\tif (maxT.time > G.time){\n\t\t\treturn true;\t\n\t\t}else if(maxT.time < G.time){\n\t\t\treturn false;\n\t\t}else{\n\t\t\tif (maxT.id < G.id){\n\t\t\t\treturn true;\n\t\t\t}else{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t}\n}\n\nvoid result_sort(vector<Team> &Group){\n\tint maxj = 0;\n\tTeam maxT;\n\tfor (int i = 0; i < Group.size(); i++){\n\t\tmaxj = i;\n\t\tmaxT.id = INF;\n\t\tmaxT.time = INF;\n\t\tmaxT.solve = 0;\n\t\tfor (int j = i; j < Group.size(); j++){\n\t\t\tif(compare(maxT,Group[j])){\n\t\t\t\tmaxT = Group[j];\n\t\t\t\tmaxj = j;\n\t\t\t}\n\t\t}\n\t\tTeam tmp = Group[i];\n\t\tGroup[i] = Group[maxj];\n\t\tGroup[maxj] = tmp;\n\t}\n\t\n}\n\nvoid result_print(vector<Team> Group){\n\tcout << Group[0].id;\n\tint old_solve = Group[0].solve;\n\tint old_time = Group[0].time;\n\tfor (int i = 1; i < Group.size(); i++){\n\t\tif (old_solve == Group[i].solve and old_time == Group[i].time){\n\t\t\tcout << \"=\" <<  Group[i].id ;\t\n\t\t}else{\n\t\t\tcout << \",\" << Group[i].id; \n\t\t}\n\t\told_solve = Group[i].solve;\n\t\told_time = Group[i].time;\n\t}\n\tcout << endl;\n}\n\nint main() {\n\n\twhile(1){\n\t\tint M,T,P,R; cin >> M >> T >> P >> R;\n\t\tif (M + T + P + R ==0) break;\n\t\t\n\t\tvector<Team> Group(T);\n\n\t\tfor (int i = 0; i < T; i++){\n\t\t\tGroup[i].set(P,i+1);\t\n\t\t}\n\t\tfor (int i = 0 ; i < R; i++){\n\t\t\tint m,t,p,r;\n\t\t\tcin >> m >> t >> p >> r;\n\t\t\tif (r == 0){//correct\n\t\t\t\tGroup[t-1].time += m + Group[t-1].check[p-1] * (20);\n\t\t\t\tGroup[t-1].check[p-1] = 0;\n\t\t\t\tGroup[t-1].solve++;\n\t\t\t}else{\n\t\t\t\tGroup[t-1].check[p-1]++;\n\t\t\t}\n\t\t}\n\t\tresult_sort(Group);\n\t\tresult_print(Group);\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n#include <cstdio>\n\n#define REP(i,n) for( int i = 0; i < n; i++ )\n\n\nusing namespace std;\n\n/*\n より多くの問題に正解したチームを上位とする．\n 正解した問題数が同じ場合は，所要時間合計の少ないチームを上位とする．\n 複数のチームが同数の問題に正解し，所要時間合計も同じなら，それらのチームを同順位とする．\n */\n\nstruct team{\n\tint ans,time,name;\n    int q[50];\n    fill( q, q + 50, 0 );\n\tteam() : ans(0), time(0), name(0) {}\n    \n    bool operator <( const team& Right )const {\n        return  ans != Right.ans ? ans < Right.ans :\n        time != Right.time ? time > Right.time :\n        name <  Right.name;\n    }\n};\n\n\nint main()\n{\n\tint M,T,P,R;\n\t// Mは，コンテストの始まりから終わりまでの時間である． Tは，チーム数である． Pは，問題数である． Rは，提出記録の数である\n\twhile( cin >> M >> T >> P >> R )\n\t{\n\t\tint m,t,p,k;\n\t\tvector<team> team_array(T+1);\n\t\tif( T == 0 ) return 0;\n\t\tfor( int i = 1; i <= T; i++)\n\t\t\tteam_array[i].name = i;\n\t\t// mkは，経過時間である． tkは，チーム番号である． pkは，問題番号である． jkは，判定結果を表す（0なら正解，0以外なら不正解）\n\t\tREP(i,R)\n\t\t{\n\t\t\tcin >> m >> t >> p >> k;\n\t\t\tteam &tm = team_array[t];\n\t\t\tif( !k ){\n\t\t\t\ttm.ans++;\n\t\t\t\ttm.time += m;\n                if( tm.q[p] )\n                    tm.time += 20 * tm.q[p];\n\t\t\t}\n            else{\n                tm.q[p]++;\n            }\n            \n\t\t}\n\t\t\n        sort( team_array.begin() + 1 , team_array.end() );\n\t\t\n        for( int i = T; i > 0; i-- )\n        {\n            char c;\n            if( i == 1 ){\n                cout << team_array[i].name << endl;\n                continue;\n            }\n            else if ( team_array[i].ans == team_array[i-1].ans &&\n                team_array[i].time == team_array[i-1].time) {\n                c = '=';\n            }\n            else{\n                c = ',';\n            }\n\t\t\tcout << team_array[i].name << c;\n        }\n        \n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstdio>\n#include <cstring>\n#include <cstdlib>\n#include <cmath>\n#include <vector>\n#include <string>\n#include <map>\n#include <set>\n#include <queue>\n#include <stack>\n#include <algorithm>\n\nusing namespace std;\n\n#define rep(i,j) REP((i), 0, (j))\n#define REP(i,j,k) for(int i=(j);(i)<(k);++i)\n#define between(a,x,b) ((a)<=(x)&&(x)<=(b))\n#define F first\n#define S second\n#define INF 1 << 30\n\ntypedef pair<int, pair<int, int> > pii;\n\nint M, T, P, R;\n\nbool cmp(const pii &a, const pii &b){\n  if(a.S.F != b.S.F) return a.S.F > b.S.F;\n  if(a.S.S != b.S.S) return a.S.S < b.S.S;\n  return a.F > b.F;\n}\n\nint main(){\n  while(scanf(\"%d%d%d%d\",&M, &T, &P, &R) && M+T+P+R){\n    vector<vector<int> >pe(T, vector<int>(P));\n    rep(i, T) rep(j, P) pe[i][j] = 0;\n    vector<pii>team(T); // team, ac, penalty\n    rep(i, T) team[i] = make_pair(i, make_pair(0, 0));\n\n    int m, t, p, j;\n    rep(i, R){\n      scanf(\"%d%d%d%d\", &m, &t, &p, &j); t--; p--;\n      if(j){\n\tpe[t][p]++;\n      }else{\n\tteam[t].S.F++;\n\tteam[t].S.S += m + (20 * pe[t][p]);\n      }\n    }\n    //    rep(i, T) printf(\"%d %d %d\\n\", team[i].F+1, team[i].S.F, team[i].S.S);\n    sort(team.begin(), team.end(), cmp);\n\n    //    rep(i, T) printf(\"%d \", team[i].F+1); puts(\"\");\n    rep(i, T) printf(i?team[i-1].S.F==team[i].S.F&&team[i-1].S.S==team[i].S.S?\"=%d\":\",%d\":\"%d\", team[i].F+1); puts(\"\");\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "/*\n *\n *\n */\n\n#include <bits/stdc++.h>\n\nusing namespace std;\n\n#define LOG(...) fprintf(stderr, __VA_ARGS__)\n//#define LOG(...)\n#define FOR(i, a, b) for(int i = (int)(a); i < (int)(b); ++i)\n#define REP(i, n) for(int i = 0; i < (int)(n); ++i)\n#define RREP(i, n) for(int i = (int)(n - 1); i >= 0; --i)\n#define ALL(a) (a).begin(), (a).end()\n#define RALL(a) (a).rbegin(), (a).rend()\n#define EXIST(s, e) ((s).find(e) != (s).end())\n#define SORT(c) sort(ALL(c))\n#define RSORT(c) sort(RALL(c))\n#define SQ(n) (n) * (n)\n\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef pair<int, int> pii;\ntypedef pair<ll, ll> pll;\ntypedef vector<bool> vb;\ntypedef vector<int> vi;\ntypedef vector<char> vc;\ntypedef vector<pii> vpi;\ntypedef vector<pll> vpl;\ntypedef vector<ll> vll;\ntypedef vector<vb> vvb;\ntypedef vector<vi> vvi;\ntypedef vector<vc> vvc;\ntypedef vector<vll> vvll;\n\nstruct Team {\n  int correct;\n  int penalty;\n  int vpenalty[10];\n  int id;\n\n  bool operator <(const Team& p) const {\n    if (correct == p.correct)\n      if (penalty == p.penalty)\n        return id < p.id;\n      else\n        return penalty > p.penalty;\n    else\n      return correct < p.correct;\n  }\n\n  bool operator ==(const Team& p) const {\n    if (correct == p.correct)\n      return penalty == p.penalty;\n    else\n      return correct == p.correct;\n  }\n};\n\nint main() {\n  int M, T, P, R;\n  while(cin >> M >> T >> P >> R, M | T | P | R) {\n    vector<Team> team(T);\n    REP(i, T){\n      team[i].id = i + 1;\n    }\n\n    REP(i, R){\n      int m, t, p, j;\n      cin >> m >> t >> p >> j;\n      t--; p--;\n\n      if (j) {\n        team[t].vpenalty[p] += 20;\n      }else{\n        team[t].correct++;\n        team[t].penalty += m + team[t].vpenalty[p];\n      }\n    }\n    RSORT(team);\n    cout << team[0].id;\n    FOR(i, 1, T){\n      if (team[i - 1] == team[i]) cout << '=';\n      else cout << ',';\n      cout << team[i].id;\n    }\n    cout << endl;\n  }\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nstruct team{\n\t  int id;\n\t  int ac,time;\n\t  vector<int> wa;\n\t  team(int i, int a, int t, int P){\n\t\t\tid = i; ac = a; time = t;\n\t\t\twa = vector<int>(P+1,0);\n\t  }\n\t  bool operator < (const team& tgt) const {\n\t\t\tif( ac != tgt.ac )\n\t\t\t\t  return ac < tgt.ac;\n\t\t\tif( time != tgt.time )\n\t\t\t\t  return time > tgt.time;\n\t\t\treturn id < tgt.id;\n\t  }\n\n};\n\nint main(){\n\t  while(1){\n\t\t\tint M,T,P,R; cin >> M >> T >> P >> R;\n\t\t\tif(!M) break;\n\t\t\tvector<team> teams;\n\t\t\tfor(int i=0; i<T; i++)\n\t\t\t\t  teams.push_back( team(i+1,0,0,P) );\n\t  \n\t\t\tfor(int i=0; i<R; i++){\n\t\t\t\t  int m,t,p,j;\n\t\t\t\t  cin >> m >> t >> p >> j;\n\t\t\t\t  if( j == 0 ){\n\t\t\t\t\t\tteams[ t-1 ].ac ++;\n\t\t\t\t\t\tteams[ t-1 ].time += m;\n\t\t\t\t\t\tteams[ t-1 ].time += teams[ t-1 ].wa[ p ]*20 ;\n\t\t\t\t\t\t\n\t\t\t\t  }\n\t\t\t\t  else{\n\t\t\t\t\t\tteams[ t-1 ].wa[ p ]++;\n\t\t\t\t  }\n\t\t\t}\n\t\t\tsort(teams.begin(),teams.end());\n\t\t\treverse(teams.begin(),teams.end());\n\t\t\t\n\t\t\tteam pre = team(-1,-1,-1,P);\n\t\t\tfor(int i=0; i<T; i++){\n\t\t\t\t  team corr = teams[i];\n\t\t\t\t  if( pre.ac == corr.ac and pre.time == corr.time )\n\t\t\t\t\t\tcout << \"=\" << corr.id;\n\t\t\t\t  else\n\t\t\t\t\t\tif(i!=0)\n\t\t\t\t\t\t\t  cout << \",\" << corr.id;\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\t  cout << corr.id;\n\t\t\t\t  pre = corr;\n\t\t\t}\n\t\t\tcout << endl;\n\t  \n\t  }\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<vector>\n#include<string.h>\n\nusing namespace std;\n\nstruct TeamData{\n\tint cn;\n\tint pnp;\n\tint pn[10];\n};\n\nstruct ansData{\n\tint tn;\n\tint same;\n};\n\nvector<vector<ansData> > ans;\n\nint main(){\n\twhile(1){\n\t\tint M,T,P,R;\n\t\tcin >> M >> T >> P >> R;\n\t\tif(M+T+P+R == 0) break;\n\t\tTeamData td[50];\n\t\t\n\t\tmemset(td,0,sizeof(td));\n\t\t\n\t\tfor(int i = 0;i < R;i++){\n\t\t\tint m,t,p,j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tif(j == 0){\n\t\t\t\ttd[t - 1].cn++;\n\t\t\t\ttd[t - 1].pnp += td[t - 1].pn[p - 1] * 20 + m;\n\t\t\t}else{\n\t\t\t\ttd[t - 1].pn[p - 1]++;\n\t\t\t}\n\t\t}\n\t\t\n\t\tint index[50];\n\t\tfor(int i = 0;i < 50;i++) index[i] = i;\n\t\t\n\t\tfor(int i = 0;i < T;i++){\n\t\t\tint now = index[i];\n\t\t\tfor(int j = T-1;j > i;j--){\n\t\t\t\tint target = index[j];\n\t\t\t\tif(td[now].cn < td[target].cn){\n\t\t\t\t\tindex[i] = target;\n\t\t\t\t\tindex[j] = now;\n\t\t\t\t\tnow = target;\n\t\t\t\t}else if(td[now].cn == td[target].cn){\n\t\t\t\t\tif(td[now].pnp > td[target].pnp){\n\t\t\t\t\t\tindex[i] = target;\n\t\t\t\t\t\tindex[j] = now;\n\t\t\t\t\t\tnow = target;\n\t\t\t\t\t}else if(td[now].pnp == td[target].pnp){\n\t\t\t\t\t\tif(now < target){\n\t\t\t\t\t\t\tindex[i] = target;\n\t\t\t\t\t\t\tindex[j] = now;\n\t\t\t\t\t\t\tnow = target;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tvector<ansData> tans;\n\t\t\n\t\tfor(int i=0;i<T;i++){\n\t\t\tansData ad;\n\t\t\tad.tn = index[i]+1;\n\t\t\tif(i == 0){\n\t\t\t\tad.same = 0;\n\t\t\t}else{\n\t\t\t\tif(td[index[i]].cn == td[index[i-1]].cn && td[index[i]].pnp == td[index[i-1]].pnp){\n\t\t\t\t\tad.same = 1;\n\t\t\t\t}\n\t\t\t}\n\t\t\ttans.push_back(ad);\n\t\t}\n\t\t\n\t\tans.push_back(tans);\n\t}\n\tfor(int i = 0;i < ans.size();i++){\n\t\tfor(int j = 0;j < ans[i].size();j++){\n\t\t\tif(j == 0){\n\t\t\t\tcout << ans[i][j].tn;\n\t\t\t}else{\n\t\t\t\tif(ans[i][j].same == 0){\n\t\t\t\t\tcout << \",\" << ans[i][j].tn;\n\t\t\t\t}else{\n\t\t\t\t\tcout << \"=\" << ans[i][j].tn;\n\t\t\t\t}\n\t\t\t}\n\t\t}cout << endl;\n\t}\n\t\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include \"bits/stdc++.h\"\nusing namespace std;\n\ntypedef long long ll;\ntypedef pair<ll, ll>P;\n\nclass Team{\n    public:\n    vector<ll>flg, tim;\n    ll name;\n    P score;\n    Team(ll _name, ll P){\n        name = _name;\n        flg = vector<ll>(P + 1, 0);\n        tim = vector<ll>(P + 1, 0);\n    }\n    void calc(){\n        score.first = 0;\n        score.second = 0;\n        for(ll i = 0; i < flg.size(); i++){\n            if(flg[i]){\n                score.first--;\n                score.second += tim[i];\n            }\n        }\n    }\n    bool operator < (const Team &t)const{\n        if(score == t.score)return name > t.name;\n        return score < t.score;\n\n    }\n};\n\nint main(){\n    \n    for(ll M, T, P, R; cin >> M >> T >> P >> R, M;){\n        vector<Team>teams;\n        for(ll i = 0; i <= T; i++)teams.push_back(Team(i, P));\n        for(ll i = 0; i < R; i++){\n            ll m, t, p, j;\n            cin >> m >> t >> p >> j;\n            if(teams[t].flg[p])continue;\n            if(j == 0){\n                teams[t].tim[p] += m;\n                teams[t].flg[p] = 1;\n            }\n            else{\n                teams[t].tim[p] += 20;\n            }\n        }\n        vector<Team>vec;\n        for(ll i = 1; i <= T; i++){\n            teams[i].calc();\n            vec.push_back(teams[i]);\n        }    \n        sort(vec.begin(), vec.end());\n        for(ll i = 0; i < T; i++){\n            cout << vec[i].name;\n            if(i + 1 == T)cout << endl;\n            else if(vec[i].score == vec[i+1].score)cout << \"=\";\n            else cout << \",\";\n        }\n    }\n    \n    return 0;    \n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\nusing namespace std;\n\nint main(){\n  while(true){\n    int M,T,P,R;\n    cin>>M>>T>>P>>R;\n\n    if(M==0&&T==0&&P==0&&R==0)\n      break;\n\n    int CP[50],TT[50],PT[50][10];\n    for (int i = 0; i < T; i++) {\n        CP[i] = TT[i] = 0;\n        for (int j = 0; j < P; j++)\n            PT[i][j] = 0;\n    }\n\n    for (int i = 0; i < R; i++) {\n        int m, t, p, j;\n        cin >> m >> t >> p >> j;\n\n        if (j == 0) {\n            CP[t - 1]++;\n            TT[t - 1] += (m + PT[t - 1][p - 1]);\n        }\n        else {\n            PT[t - 1][p - 1] += 20;\n        }\n    }\n\n    int tnow, tpre = -1;\n    bool flg[50];\n    for (int i = 0; i < T; i++)\n        flg[i] = false;\n\n    for (int i = 0; i < T; i++) {\n        tnow = -1;\n        for (int j = 0; j < T; j++) {\n            if (flg[j])\n                continue;\n\n            if (tnow == -1) {\n                tnow == j;\n            }\n            else {\n                if (CP[j] > CP[tnow] || (CP[j] == CP[tnow] && TT[j]<=TT[tnow])) {\n                    tnow = j;\n                }\n            }\n        }\n\n        if (tpre != -1) {\n            if (CP[tnow] == CP[tpre] && TT[tnow] == TT[tpre])\n                cout << '=';\n            else\n                cout << ',';\n        }\n        cout << tnow + 1;\n\n        flg[tnow] = true;\n        tpre = tnow;\n    }\n    cout << endl;\n  }\n  return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "\n// @snippet<sh19910711/contest:headers.cpp>\n#include <iostream>\n#include <sstream>\n#include <fstream>\n#include <iomanip>\n#include <vector>\n#include <set>\n#include <map>\n#include <stack>\n#include <queue>\n#include <algorithm>\n#include <numeric>\n#include <limits>\n#include <complex>\n#include <functional>\n#include <iterator>\n#include <cstdio>\n#include <cstdlib>\n#include <cstring>\n#include <cmath>\n\n// @snippet<sh19910711/contest:solution/interface.cpp>\nnamespace solution {\n  class SolutionInterface {\n  public:\n    virtual int run() = 0;\n    \n  protected:\n    virtual void pre_calc() {}\n    virtual bool action() = 0;\n    virtual void init() {};\n    virtual bool input() { return false; };\n    virtual void output() {};\n    \n    SolutionInterface() {}\n    \n  private:\n    \n  };\n}\n\n// @snippet<sh19910711/contest:solution/solution-base.cpp>\nnamespace solution {\n  class SolutionBase: public SolutionInterface {\n  public:\n    virtual int run() {\n      pre_calc();\n      while ( action() );\n      return 0;\n    }\n    \n  };\n}\n\n// @snippet<sh19910711/contest:solution/typedef.cpp>\nnamespace solution {\n  typedef std::istringstream ISS;\n  typedef std::ostringstream OSS;\n  typedef std::vector<std::string> VS;\n  typedef long long LL;\n  typedef int INT;\n  typedef std::vector<INT> VI;\n  typedef std::vector<VI> VVI;\n  typedef std::pair<INT,INT> II;\n  typedef std::vector<II> VII;\n}\n\n// @snippet<sh19910711/contest:solution/namespace-area.cpp>\nnamespace solution {\n  // namespaces, types\n  using namespace std;\n  typedef std::map<int, int> Map;\n}\n\n// @snippet<sh19910711/contest:solution/variables-area.cpp>\nnamespace solution {\n  // constant vars\n  const int SIZE = 2000 + 11;\n  const int TEAMS = 50 + 11;\n  // storages\n  int M, T, P, R;\n  int m[SIZE];\n  int t[SIZE];\n  int p[SIZE];\n  int j[SIZE];\n\n  class Team {\n  public:\n    int id;\n    int ac;\n    Map wa;\n    int score;\n\n    Team(): id(0), ac(0), wa(Map()), score(0) {}\n\n    friend bool operator > ( const Team& l, const Team& r ) {\n      if ( l.ac > r.ac )\n        return true;\n      if ( l.ac == r.ac ) {\n        if ( l.score < r.score )\n          return true;\n        if ( l.score == r.score ) {\n          if ( l.id > r.id )\n            return true;\n        }\n      }\n      return false;\n    }\n\n    friend bool operator == ( const Team& l, const Team& r ) {\n      return l.ac == r.ac && l.score == r.score;\n    }\n\n    friend ostream& operator <<( ostream& os, const Team& team ) {\n      return os << \"{ id = \" << team.id << \", ac = \" << team.ac << \", score =\" << team.score << \"}\" << endl;\n    }\n  };\n  Team teams[TEAMS];\n}\n\n// @snippet<sh19910711/contest:solution/solver-area.cpp>\nnamespace solution {\n  class Solver {\n  public:\n    void solve() {\n      normalize();\n      proc_submissions();\n      sort_teams();\n    }\n\n    void sort_teams() {\n      std::sort(teams, teams + T, std::greater<Team>());\n    }\n\n    void proc_submissions() {\n      for ( int i = 0; i < R; ++ i ) {\n        int submission_team_id = t[i];\n        int submission_judge = j[i];\n        int submission_time = m[i];\n        int submission_problem_id = p[i];\n        Team& team = teams[submission_team_id];\n        if ( submission_judge == 0 ) {\n          team.score += submission_time + 20 * team.wa[submission_problem_id];\n          team.ac ++;\n        } else {\n          team.wa[submission_problem_id] ++;\n        }\n      }\n    }\n\n    void normalize() {\n      for ( int i = 0; i < R; ++ i ) {\n        t[i] --;\n      }\n      for ( int i = 0; i < T; ++ i ) {\n        teams[i].id = i;\n      }\n    }\n    \n  private:\n    \n  };\n}\n\n// @snippet<sh19910711/contest:solution/solution.cpp>\nnamespace solution {\n  class Solution: public SolutionBase {\n  public:\n  protected:\n    virtual bool action() {\n      init();\n      if ( ! input() )\n        return false;\n      solver.solve();\n      output();\n      return true;\n    }\n\n    void init() {\n      std::fill(teams, teams + TEAMS, Team());\n    }\n\n    bool input() {\n      if ( ! ( cin >> M >> T >> P >> R ) )\n        return false;\n      if ( M == T && T == P && P == R && R == 0 )\n        return false;\n      for ( int i = 0; i < R; ++ i ) {\n        cin >> m[i] >> t[i] >> p[i] >> j[i];\n      }\n      return true;\n    }\n\n    void output() {\n      for ( int i = 0; i < T; ++ i ) {\n        cout << teams[i].id + 1;\n        if ( i + 1 < T ) {\n          if ( teams[i] == teams[i + 1] ) {\n            cout << \"=\";\n          } else {\n            cout << \",\";\n          }\n        }\n      }\n      cout << endl;\n    }\n    \n  private:\n    Solver solver;\n    \n  };\n}\n\n// @snippet<sh19910711/contest:main.cpp>\n#ifndef __MY_UNIT_TEST__\nint main() {\n  return solution::Solution().run();\n}\n#endif"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <sstream>\n#include <fstream>\n#include <algorithm>\n#include <string>\n#include <stack>\n#include <queue>\n#include <map>\n#include <list>\n#include <vector>\n#include <cstdio>\n#include <cmath>\n#include <cstdlib>\n#include <climits>\nusing namespace std;\n\nstruct score {\n\tint teamNum;\n\tint accepted;\n\tint time;\n\tvector<int> miss;\n\tbool operator==(score s) const {\n\t\treturn this->accepted == s.accepted && this->time == s.time;\n\t};\n\tbool operator<(score s) const {\n\t\treturn this->accepted != s.accepted ? this->accepted > s.accepted : (this->time != s.time ? this->time < s.time : this->teamNum > s.teamNum);\n\t};\n};\n\nint main() {\n\twhile(1){\n\t\tint M, T, P, R;\n\t\tcin >> M >> T >> P >> R;\n\t\t\n\t\tif(!M && !T && !P && !R) break;\n\t\t\n\t\tscore *sc = new score[1+T];\n\t\tfor(int i = 1; i <= T; i++){\n\t\t\tsc[i].teamNum = i;\n\t\t}\n\t\tfor(int i = 0; i < R; i++){\n\t\t\tint m, t, p, r;\n\t\t\tcin >> m >> t >> p >> r;\n\t\t\t\n\t\t\tif(r){\n\t\t\t\tsc[t].miss.push_back(p);\n\t\t\t}else{\n\t\t\t\tsc[t].accepted++;\n\t\t\t\tsc[t].time += m + 20 * count(sc[t].miss.begin(), sc[t].miss.end(), p);\n\t\t\t}\n\t\t}\n\t\t\n\t\tsort(&sc[1], &sc[1+T]);\n\t\tfor(int i = 1; i <= T; i++){\n\t\t\tcout << sc[i].teamNum << (i==T ? '\\n' : (sc[i]==sc[i+1] ? '=' : ','));\n\t\t}\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nstruct STATE\n{\n\tint num;\n\tint time;\n\tint id;\n\tint pe[10];\n\t\n\tbool operator < (const STATE& t) const{\n\t\tif (num == t.num){\n\t\t\tif (time == t.time){\n\t\t\t\treturn id < t.id;\n\t\t\t}\n\t\t\treturn time > t.time;\n\t\t}\n\t\treturn num < t.num;\n\t}\n\t\n\tbool operator == (const STATE& t) const{\n\t\treturn num == t.num && time == t.time;\n\t}\n};\n\nSTATE team[50];\n\nvoid init()\n{\n\tfor (int i = 0; i < 50; i++){\n\t\tteam[i].num = team[i].time = 0;\n\t\tteam[i].id = i + 1;\n\t\tfor (int j = 0; j < 10; j++){\n\t\t\tteam[i].pe[j] = 0;\n\t\t}\n\t}\n}\n\nint main()\n{\n\tint M, T, P, R;\n\twhile (scanf(\"%d %d %d %d\", &M, &T, &P, &R), M + T + P + R){\n\t\tinit();\n\t\t\n\t\tfor (int i = 0; i < R; i++){\n\t\t\tint m, t, p, j;\n\t\t\tscanf(\"%d %d %d %d\", &m, &t, &p, &j);\n\t\t\tt--; p--;\n\t\t\t\n\t\t\tif (j == 0){\n\t\t\t\tteam[t].num++;\n\t\t\t\tteam[t].time += m + team[t].pe[p];\n\t\t\t}\n\t\t\telse {\n\t\t\t\tteam[t].pe[p] += 20;\n\t\t\t}\n\t\t}\n\t\t\n\t\tsort(team, team + T);\n\t\treverse(team, team + T);\n\t\t\n\t\tfor (int i = 0; i < T; i++){\n\t\t\tif (i){\n\t\t\t\tif (team[i] == team[i - 1]){\n\t\t\t\t\tcout << \"=\";\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tcout << \",\";\n\t\t\t\t}\n\t\t\t}\n\t\t\tcout << team[i].id;\n\t\t}\n\t\tcout << endl;\n\t}\n\t\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstdlib>\n#define max_T 50\n#define max_P 10\n\nusing namespace std;\n\nint cmp(const void *,const void *);\n\nint main(void){\n\tfor(int M,T,P,R;cin >> M >> T >> P >> R,M;){\n\t\tint solve[max_T][3]={0};\n\t\tfor(int i=0;i<T;i++)\n\t\t\tsolve[i][0]=i+1;\n\n\t\tint p_min[max_T][max_P]={0};\n\t\tfor(int m,t,p,j,i=0;i<R&&cin >> m >> t >> p >> j;i++){\n\t\t\tp_min[t-1][p-1]+=j?20:m;\n\t\t\tif(!j){\n\t\t\t\tsolve[t-1][1]++;\n\t\t\t\tsolve[t-1][2]+=p_min[t-1][p-1];\n\t\t\t}\n\t\t}\n\n\t\tqsort((void *)solve,T,sizeof(solve[0]),cmp);\n\n\t\tfor(int i=0;i<T;i++)\n\t\t\tcout << solve[i][0] << (i<T-1?solve[i][1]!=solve[i+1][1]||solve[i][2]!=solve[i+1][2]?\",\":\"=\":\"\");\n\t\tcout << endl;\n\t}\n}\n\nint cmp(const void *a,const void *b){\n\tint *s[2]={(int *)a,(int *)b},ret;\n\n\tif(s[0][1]>s[1][1])\n\t\tret=-1;\n\telse if(s[0][1]<s[1][1])\n\t\tret=1;\n\telse\n\t\tif(s[0][2]<s[1][2])\n\t\t\tret=-1;\n\t\telse if(s[0][2]>s[1][2])\n\t\t\tret=1;\n\t\telse\n\t\t\tret=s[0][0]>s[1][0]?-1:1;\n\n\treturn ret;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n\n\nint main(){\n\tint M,T,P,R;\n\twhile(cin >> M >> T >> P >> R && M){\n\t\tmap<int,map<int,int> > wa;\n\t\tmap<int,map<int,int> > ac;\n\t\tfor(int i = 0 ; i < R ; i++){\n\t\t\tint m,t,p,j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tif( j != 0 ){\n\t\t\t\twa[t][p]++;\n\t\t\t}else{\n\t\t\t\tac[t][p] = m;\n\t\t\t}\n\t\t}\n\t\tvector< array<int,3> > v;\n\t\tfor(int i = 1 ; i <= T ; i++){\n\t\t\tarray<int,3> sub = {0,0,0};\n\t\t\tsub[2] = -i;\n\t\t\tfor(int j = 1 ; j <= P ; j++){\n\t\t\t\tif( ac[i].count(j) ){\n\t\t\t\t\tsub[0]--;\n\t\t\t\t\tsub[1] += wa[i][j] * 20 + ac[i][j];\n\t\t\t\t}\n\t\t\t}\n\t\t\tv.push_back(sub);\n\t\t}\n\t\tsort(v.begin(),v.end());\n\t\tfor(int i = 0 ; i < v.size() ; i++){\n\t\t\tif(i){\n\t\t\t\tif( v[i-1][0] == v[i][0] && v[i][1] == v[i-1][1] ){\n\t\t\t\t\tcout << \"=\";\n\t\t\t\t}else{\n\t\t\t\t\tcout <<\",\";\n\t\t\t\t}\n\t\t\t}\n\t\t\tcout << -v[i][2];\n\t\t}\n\t\tcout << endl;\n\t\t\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\nusing namespace std;\n\nint main(){\n  while(true){\n    int M,T,P,R;\n    cin>>M>>T>>P>>R;\n\n    if(M==0&&T==0&&P==0&&R==0)\n      break;\n\n    int CP[50],TT[50],PT[50][10];\n    for (int i = 0; i < T; i++) {\n        CP[i] = TT[i] = 0;\n        for (int j = 0; j < P; j++)\n            PT[i][j] = 0;\n    }\n\n    for (int i = 0; i < R; i++) {\n        int m, t, p, j;\n        cin >> m >> t >> p >> j;\n\n        if (j == 0) {\n            CP[t - 1]++;\n            TT[t - 1] += (m + PT[t - 1][p - 1]);\n        }\n        else {\n            PT[t - 1][p - 1] += 20;\n        }\n    }\n\n    int tnow, tpre = -1;\n    bool flg[50];\n    for (int i = 0; i < T; i++)\n        flg[i] = false;\n\n    for (int i = 0; i < T; i++) {\n        tnow = -1;\n        for (int j = 0; j < T; j++) {\n            if (flg[j])\n                continue;\n\n            if (tnow == -1) {\n                tnow == j;\n            }\n            else {\n                if (CP[j] > CP[tnow] || (CP[j] == CP[tnow] && TT[j]<=TT[tnow])) {\n                    tnow = j;\n                }\n            }\n        }\n\n        if (tpre != -1) {\n            if (CP[tnow] == CP[tpre] && TT[tnow] == TT[tpre])\n                cout << '=';\n            else\n                cout << ',';\n        }\n        cout << tnow + 1;\n\n        flg[tnow] = true;\n        tpre = tnow;\n    }\n    cout << endl;\n  }\n  return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n#include <cstring>\n#include <map>\n#include <set>\n#include <vector>\n#include <queue>\n#include <stack>\n#define MAX_T 50\n#define MAX_P 10\nusing namespace std;\n\ntypedef pair<int,int> S;\ntypedef vector<S> V;\ntypedef map<int,set<S>> MM;\n\nbool pairCompare(const S& firstElof, const S& secondElof)\n{\n    return firstElof.second > secondElof.second;\n}\n\nint main(void)\n{\n    int M, T, P, R;\n    while (cin >> M >> T >> P >> R) {\n        if (M == 0 && T == 0 && P == 0 && R == 0) break;\n        int m, t, p, j, data[T + 1][P + 1][2];\n        memset(data, 0, sizeof(data));\n        for (int i = 0; i < R; i++) {\n            cin >> m >> t >> p >> j;\n            if (j == 0) {\n                data[t][0][0] += (m + data[t][p][1]);\n                data[t][0][1]++;\n            } else\n                data[t][p][1] += 20;\n        }\n        V v;\n        MM mm;\n        queue<int> ans;\n        for (int i = 1; i <= T; i++) {\n            //cout << i << \" : \" << data[i][0][1] << \" : \" << data[i][0][0] << endl;\n            if (data[i][0][1] == 0) data[i][0][0] = -2;\n            mm[data[i][0][1]].insert(S(data[i][0][0],i));\n        }\n        for (int i = P; i >= 0; i--) {\n            stack<int> tmp;\n            auto f = mm[i].begin();\n            for (auto it = mm[i].begin(); it != mm[i].end(); it++) {\n                //cout << \" *f.f = \" << (*f).first << \" *it.f = \" << (*it).first << \" tmp size = \" << tmp.size() << endl;\n                if ((*f).first == (*it).first) tmp.push((*it).second); \n                else {\n                    if (ans.size()) ans.push(-1);\n                    while (tmp.size()) {\n                        advance( f, 3);\n                        auto ss = tmp.top(); tmp.pop();\n                        //cout << \"ss \" << ss << endl;\n                        ans.push(ss);\n                        if (tmp.size()) ans.push(-3);\n                    }\n                    tmp.push((*it).second);\n                    //advance( f, 2);\n                    //cout << (*f).first << endl;\n                }\n            }\n            if (tmp.size()) {\n                if (ans.size())ans.push(-1);\n                while (tmp.size()) {\n                    auto ss = tmp.top(); tmp.pop();\n                    ans.push(ss);\n                    if (tmp.size()) ans.push(-3);\n                }\n            }\n        }\n        while (ans.size()) {\n            int tmp = ans.front(); ans.pop();\n            if (tmp == -1) cout << \",\";\n            else if (tmp == -3) cout << \"=\";\n            else cout << tmp;\n        }\n        cout << endl;\n        \n    }\n    \n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nstruct team {\n  team(int p) : solved(p), penalty(p) {}\n  vector<bool> solved;\n  vector<int> penalty;\n  int time, id;\n  bool operator<(team const& t) const {\n    int s1 = count(begin(solved), end(solved), true), s2 = count(begin(t.solved), end(t.solved), true);\n    if(s1 == s2) {\n      if(time == t.time) {\n        return id > t.id;\n      }\n      return time < t.time;\n    }\n    return s1 > s2;\n  }\n  bool operator==(team const& t) const {\n    int s1 = count(begin(solved), end(solved), true), s2 = count(begin(t.solved), end(t.solved), true);\n    return s1 == s2 && time == t.time;\n  }\n};\n\nint main() {\n  int M, T, P, R;\n  while(cin >> M >> T >> P >> R, M) {\n    vector<team> ts(T, P);\n    for(int i = 0; i < T; ++i) {\n      ts[i].id = i + 1;\n    }\n    for(int i = 0; i < R; ++i) {\n      int m, t, p, j;\n      cin >> m >> t >> p >> j;\n      t--; p--;\n      if(j == 0) { // solved\n        if(!ts[t].solved[p]) {\n          ts[t].time += m + ts[t].penalty[p];\n        }\n        ts[t].solved[p] = true;\n      } else {\n        ts[t].penalty[p] += 20;\n      }\n    }\n    sort(begin(ts), end(ts));\n\n    for(int i = 0; i < T; ++i) {\n      cout << ts[i].id;\n      if(i + 1 == T) {\n        cout << endl;\n      } else {\n        if(ts[i] == ts[i + 1]) cout << \"=\";\n        else cout << \",\";\n      }\n    }\n  }\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\nusing namespace std;\n\nint main(){\n    while(true){\n        int contestTime, teamCount, probremCount, submitCount;\n        cin >> contestTime >> teamCount >> probremCount >> submitCount;\n        if(contestTime == 0){\n            break;\n        }\n        int teamPoint[teamCount], teamTime[teamCount], teamPenalty[teamCount][probremCount];\n        for(int i = 0; i < teamCount; i++){\n            teamPoint[i] = teamTime[i] = 0;\n            for(int j = 0; j < probremCount; j++){\n                teamPenalty[i][j] = 0;\n            }\n        }\n        for(int i = 0; i < submitCount; i++){\n            int m, t, p, j;\n            cin >> m >> t >> p >> j;\n            t--;\n            if(j == 0 && m <= contestTime){\n                teamPoint[t]++;\n                teamTime[t] += m + teamPenalty[t][p] * 20;\n            }else{\n                teamPenalty[t][p]++;\n            }\n        }\n        int previousIndex = -1;\n        int previousPoint = -1;\n        int previousTime = -1;\n        for(int i = 0; i < teamCount; i++){\n            int maxPoint = 0;\n            int topTime = contestTime;\n            int topIndex = 0;\n            for(int j = 0; j < teamCount; j++){\n                if(teamPoint[j] > maxPoint){\n                    maxPoint = teamPoint[j];\n                    topTime = teamTime[j];\n                    topIndex = j;\n                }else if(teamPoint[j] == maxPoint){\n                    if(topTime >= teamTime[j]){\n                        topTime = teamTime[j];\n                        topIndex = j;\n                    }\n                }\n            }\n            if(i != 0 && maxPoint == previousPoint && topTime == previousTime){\n                cout << '=' << topIndex + 1;\n            }else if(i != 0){\n                cout << ',' << topIndex + 1;\n            }else{\n                cout << topIndex + 1;\n            }\n            previousIndex = topIndex;\n            previousTime = teamTime[topIndex];\n            previousPoint = teamPoint[topIndex];\n            teamPoint[topIndex] = -1;\n            teamTime[topIndex] = contestTime + 1;\n            \n        }\n            cout << endl;\n    }\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <iostream>\n#include <algorithm>\n#include <vector>\n#include <functional>\n#define rep(i,n) for(int i=0;i<n;i++)\nusing namespace std;\ntypedef pair<int,int> P;\ntypedef pair<P,int> PP;\nint main(){\n\twhile(true){\n\t\tint m,t,p,r;\n\t\tscanf(\"%d%d%d%d\",&m,&t,&p,&r);\n\t\tif(m==0) break;\n\t\tint tim[50][10]={},wa[50][10]={};\n\t\trep(i,50) rep(j,10) tim[i][j]=-1;\n\t\trep(i,r){\n\t\t\tint mm,tt,pp,jj;\n\t\t\tscanf(\"%d%d%d%d\",&mm,&tt,&pp,&jj);\n\t\t\ttt--,pp--;\n\t\t\tif(jj==0) tim[tt][pp]=mm+wa[tt][pp]*20;\n\t\t\telse wa[tt][pp]++;\n\t\t}\n\t\tint pen[10]={},acp[10]={};\n\t\trep(i,t) rep(j,p){\n\t\t\tif(tim[i][j]==-1) continue;\n\t\t\tacp[i]++;\n\t\t\tpen[i]+=tim[i][j];\n\t\t}\n\t\tvector<PP> vc;\n\t\trep(i,t) vc.push_back(PP(P(acp[i],-pen[i]),i+1));\n\t\tsort(vc.begin(),vc.end(),greater<PP>());\n\t\trep(i,t){\n\t\t\tif(i==0){\n\t\t\t\tprintf(\"%d\",vc[i].second);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif(vc[i].first==vc[i-1].first) printf(\"=%d\",vc[i].second);\n\t\t\telse printf(\",%d\",vc[i].second);\n//\t\t\tcout << vc[i].second << \" acp \" << vc[i].first.first << \" pen \" << vc[i].first.second << endl;\n\t\t}\n\t\tprintf(\"\\n\");\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\nusing namespace std;\n\nint main(){\n\tint M, T, P, R;\n\n\tcin >> M >> T >> P >> R;\n\twhile(M != 0 || T != 0 || P != 0 || R != 0){\n\t\tint m, t, p, jx;\n\t\tint table[51][11][2];\n\t\tfor(int i=0; i<51; i++){\n\t\t\tfor(int j=1; j<11; j++){\n\t\t\t\ttable[i][j][0] = 0;\n\t\t\t\ttable[i][j][1] = -1;\n\t\t\t}\n\t\t}\n\t\tfor(int i=0; i<R; i++){\n\t\t\tcin >> m >> t >> p >> jx;\n\t\t\tif(jx != 0){\n\t\t\t\ttable[t][p][0] += 20;\n\t\t\t}else{\n\t\t\t\ttable[t][p][0] += m;\n\t\t\t}\n\t\t\ttable[t][p][1] = jx;\n\t\t}\n\n\t\tint ans[51];\n\t\tfor(int i=1; i<=T; i++){\n\t\t\tans[i] = 0;\n\t\t}\n\t\tfor(int i=1; i<=T; i++){\n\t\t\tfor(int j=1; j<=P; j++){\n\t\t\t\tif(table[i][j][1] == 0){\n\t\t\t\t\tans[i] += (table[i][j][1]+1)*10000+(500-table[i][j][0]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\tint max=0, maxp=0;\t\n\t\tint tmp = 0;\n\t\tfor(int j=1; j<=T; j++){\n\t\t\tfor(int i=1; i<=T; i++){\n\t\t\t\tif(maxp <= ans[i]){\n\t\t\t\t\tmaxp = ans[i];\n\t\t\t\t\tmax = i;\n\t\t\t\t}\n\t\t\t}\n\t\t\tans[max] = -1;\n\t\t\tif(j == 1){\n\t\t\t\tcout << max;\n\t\t\t}else{\n\t\t\t\tif(maxp == tmp){\n\t\t\t\t\tcout << '=' << max;\n\t\t\t\t}else{\n\t\t\t\t\tcout << ',' << max;\n\t\t\t\t}\n\t\t\t}\n\t\t\ttmp = maxp;\n\t\t\tmaxp = -1;\n\t\t}\n\t\tcout << endl;\n\t\tcin >> M >> T >> P >> R;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cmath>\n#include<cstdio>\n#include<algorithm>\n#include<vector>\n#include<cstring>\n\nusing namespace std;\n\n#define INF 999999999\n\nint wa[51][11];\n\nstruct team{\n\tint ac, pe, id;\n\tbool operator<(const team& a) const{\n\t\tif(ac != a.ac) return ac > a.ac;\n\t\tif(pe != a.pe) return pe < a.pe;\n\t\tif(id != a.id) return id > a.id;\n\t}\n};\n\nint main(){\n\tint i, j, M, T, P, R, m, t, p, ju;\n\tvector<team> set(51);\n\twhile(1){\n\t\tcin >> M >> T >> P >> R;\n\t\tif(!M)break;\n\t\tfor(i=0;i<=T;i++){\n\t\t\tset[i].ac = 0;\n\t\t\tset[i].pe = 0;\n\t\t\tset[i].id = i;\n\t\t\tfor(j=1;j<=P;j++){\n\t\t\t\twa[i][j] = 0;\n\t\t\t}\n\t\t}\n\t\tfor(i=0;i<R;i++){\n\t\t\tcin >> m >> t >> p >> ju;\n\t\t\tif(!ju){\n\t\t\t\tset[t].ac++;\n\t\t\t\tset[t].pe += wa[t][p] * 20 + m;\n\t\t\t}\n\t\t\telse wa[t][p]++;\n\t\t}\n\t\tsort(set.begin()+1, set.begin()+1+T);\n\t\tfor(i=1;i<=T;i++){\n\t\t\tif(i>1){\n\t\t\t\tif(set[i-1].ac==set[i].ac && set[i-1].pe==set[i].pe){\n\t\t\t\t\tcout << \"=\";\n\t\t\t\t}\n\t\t\t\telse cout << \",\";\n\t\t\t}\n\t\t\tcout << set[i].id;\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\nusing namespace std;\nint main() {\n\tint m, t, p, r;\n\twhile (cin >> m >> t >> p >> r, m) {\n\t\tpair<pair<int, int>, pair<int, int>>log[2014];\n\t\t//time team problem result\n\t\tfor (int i = 0; i < r; i++) \n\t\t\tcin >> log[i].first.first >> log[i].first.second >> log[i].second.first >> log[i].second.second;\n\t\tpair<pair<int, int>, int>point[60];\n\t\t//problems penalty teamnum\n\t\tint penalty[60][15] = {};\n\t\tfor (int i = 1; i <= t; i++) {\n\t\t\tpoint[i].first.first = 15;\n\t\t\tpoint[i].first.second = 0;\n\t\t\tpoint[i].second = i;\n\t\t}\n\t\tfor (int i = 0; i < r; i++) {\n\t\t\tif (log[i].second.second) {\n\t\t\t\t//WRONG ANSWER\n\t\t\t\tpenalty[log[i].first.second][log[i].second.first]++;\n\t\t\t}\n\t\t\telse{\n\t\t\t\t//ACCEPTED\n\t\t\t\tpoint[log[i].first.second].first.first--;\n\t\t\t\tpoint[log[i].first.second].first.second += penalty[log[i].first.second][log[i].second.first] * 20 + log[i].first.first;\n\t\t\t}\n\t\t}\n\t\tfor (int i = 1; i < t; i++) {\n\t\t\tfor (int j = i + 1; j <= t; j++) {\n\t\t\t\tif (point[i].first > point[j].first)swap(point[i], point[j]);\n\t\t\t\telse if (point[i].first == point[j].first)if (point[i].second < point[j].second)swap(point[i], point[j]);\n\t\t\t}\n\t\t}\n\t\tcout << point[1].second;\n\t\tfor (int i = 2; i <= t; i++) {\n\t\t\tif (point[i].first == point[i - 1].first)cout << '=';\n\t\t\telse cout << ',';\n\t\t\tcout << point[i].second;\n\t\t}\n\t\tcout << endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\nusing namespace std;\n\nint main(){\n    int M, T, P, R;\n    while(1){\n        cin >> M >> T >> P >> R;\n        if(M == 0){\n            break;\n        }\n\n        int ap[55] = {};\n        int at[55] = {};\n        int pen[55][11] = {};\n        for(int i=0;i<55;i++){\n            ap[i] = 0;\n            at[i] = 0;\n            for(int j=0;j<11;j++){\n                pen[i][j] = 0;\n            }\n        }\n\n        for(int i=0;i<R;i++){\n            int m, t, p, j;\n            cin >> m >> t >> p >> j;\n            if(j==0){\n                ap[t]++;\n                at[t]+=m+20*pen[t][p];\n            }else{\n                pen[t][p]++;\n            }\n        }\n\n        bool c_flag = false;\n        for(int i=10;i>=0;i--){\n            for(int j=0;j<300*11;j++){\n                bool e_flag = false;\n                for(int k=T;k>=1;k--){\n                    if(ap[k]==i && at[k]==j){\n                        if(e_flag){\n                            cout << '=';\n                        }else if(c_flag){\n                            cout << ',';\n                        }\n                        c_flag = true;\n                        e_flag = true;\n                        cout << k;\n                    }\n                }\n            }\n        }\n        cout << endl;\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h> \nusing namespace std;\n \nstruct Node {\n    int name;\n    int pen;\n    int ac;\n    vector<int> wa;\n    Node(int n, int P) : name(n), pen(0), ac(0), wa(P, 0) { }\n\n    void accept(int i, int t) {\n        ac++;\n        pen += wa[i] * 20 + t;\n    }\n \n    void wrong(int i) {\n        wa[i]++;\n    }\n \n    bool operator <(const Node & n) const {\n        if(ac != n.ac) return ac > n.ac;\n        if(pen != n.pen) return pen < n.pen;\n        return name > n.name;\n    }\n \n    bool same(const Node & n) const {\n        return ac == n.ac && pen == n.pen;\n    }\n};\n \nint main() {\n    int M,T,P,R; \n    while(1){\n        cin>>M>>T>>P>>R;\n        if(M ==0 && T == 0 && P == 0 && R == 0) break;\n        vector<Node> vec;\n        for(int i = 0; i < T; i++) vec.push_back(Node(i+1, P));\n        for(int i = 0; i < R; i++) {\n            int m, t, p, j; cin >> m >> t >> p >> j;\n            t--;\n            p--;\n            if(j == 0) {\n                vec[t].accept(p, m);\n            }\n            else {\n                vec[t].wrong(p);\n            }\n        }\n        sort(vec.begin(), vec.end());\n        cout << vec[0].name;\n        for(int i = 1; i < (int)vec.size(); i++) {\n            if(vec[i - 1].same(vec[i])) cout << \"=\";\n            else cout << \",\";\n            cout << vec[i].name;\n        }\n        cout << endl;\n    }\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n#define INF_LL (int64)1e18\n#define INF (int32)1e9\n#define REP(i, n) for(int64 i = 0;i < (n);i++)\n#define FOR(i, a, b) for(int64 i = (a);i < (b);i++)\n#define all(x) x.begin(),x.end()\n#define fs first\n#define sc second\n\nusing int32 = int_fast32_t;\nusing uint32 = uint_fast32_t;\nusing int64 = int_fast64_t;\nusing uint64 = uint_fast64_t;\nusing PII = pair<int32, int32>;\nusing PLL = pair<int64, int64>;\n\nconst double eps = 1e-10;\n\ntemplate<typename A, typename B>inline void chmin(A &a, B b){if(a > b) a = b;}\ntemplate<typename A, typename B>inline void chmax(A &a, B b){if(a < b) a = b;}\n\nusing Tup = tuple<int64, int64, int64>;\n\nint main(void){\n\tint64 M, T, P, R;\n\twhile(cin >> M >> T >> P >> R && M+T+P+R){\n\t\tvector<vector<int64>> solved(T, vector<int64>(P, 0));\n\t\tvector<Tup> res(T);\n\t\tREP(i, T) res[i] = Tup(0, 0, i);\n\t\tREP(i, R){\n\t\t\tint32 m, t, p, j;\n\t\t\tcin >> m >> t >> p >> j; t--; p--;\n\t\t\tif(solved[t][p] <= 0){\n\t\t\t\tif(j == 0){\n\t\t\t\t\tint64 a, b, c;\n\t\t\t\t\ttie(a, b, c) = res[t];\n\t\t\t\t\ta++;\n\t\t\t\t\tb += solved[t][p]-m;\n\t\t\t\t\tres[t] = Tup(a, b, c);\n\t\t\t\t\tsolved[t][p] = 1;\n\t\t\t\t}else{\n\t\t\t\t\tsolved[t][p] -= 20;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tsort(all(res), greater<Tup>());\n\t\tREP(i, T-1){\n\t\t\tcout << get<2>(res[i])+1;\n\t\t\tif(get<0>(res[i]) == get<0>(res[i+1]) && get<1>(res[i]) == get<1>(res[i+1]))\n\t\t\t\tcout << '=';\n\t\t\telse\n\t\t\t\tcout << ',';\n\t\t}\n\t\tcout << get<2>(res[T-1])+1 << endl;\n\t}\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include \"bits/stdc++.h\"\n\n#define REP(i,n) for(ll i=0;i<n;++i)\n#define RREP(i,n) for(ll i=n-1;i>=0;--i)\n#define FOR(i,m,n) for(ll i=m;i<n;++i)\n#define RFOR(i,m,n) for(ll i=n-1;i>=m;--i)\n#define ALL(v) (v).begin(),(v).end()\n#define PB(a) push_back(a)\n#define UNIQUE(v) v.erase(unique(ALL(v)),v.end());\n#define DUMP(v) REP(i, (v).size()) { cout << v[i]; if (i != v.size() - 1)cout << \" \"; else cout << endl; }\n#define INF 1000000001ll\n#define MOD 1000000007ll\n#define EPS 1e-9\n\nconst int dx[8] = { 1,1,0,-1,-1,-1,0,1 };\nconst int dy[8] = { 0,1,1,1,0,-1,-1,-1 };\n\n\nusing namespace std;\ntypedef long long ll;\ntypedef vector<int> vi;\ntypedef vector<ll> vl;\ntypedef vector<vi> vvi;\ntypedef vector<vl> vvl;\ntypedef pair<int, int> pii;\ntypedef pair<ll, ll> pll;\n///(?´????????`)(?´????????`)(?´????????`)(?´????????`)(?´????????`)(?´????????`)///\n\nint main() {\n\tcin.tie(0);\n\tios::sync_with_stdio(false);\n\twhile (1) {\n\t\tint M, T, P, R;\n\t\tcin >> M >> T >> P >> R;\n\t\tif (!M)break;\n\t\tvector<vector<bool>> ac(T, vector<bool>(P, false));\n\t\tvvi pen(T, vi(P, 0));\n\t\tvvi last(T, vi(P, 0));\n\t\tREP(i, R) {\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tif (j == 0) {\n\t\t\t\tac[t - 1][p - 1] = true;\n\t\t\t\tlast[t - 1][p - 1] = m;\n\t\t\t}\n\t\t\telse pen[t - 1][p - 1] += 20;\n\t\t}\n\t\tvector<pair<pii,ll>> point(T);\n\t\tREP(i, T) {\n\t\t\tint acc = 0, time = 0;\n\t\t\tREP(j, P) {\n\t\t\t\tif (ac[i][j]) {\n\t\t\t\t\ttime += last[i][j] + pen[i][j];\n\t\t\t\t\tacc--;\n\t\t\t\t}\n\t\t\t}\n\t\t\tpoint[i] = { { acc,time },-i };\n\t\t}\n\t\tsort(ALL(point));\n\t\tstring ret = \"\";\n\t\tREP(i, T - 1) {\n\t\t\tret += to_string((-1)*point[i].second+1);\n\t\t\tif (point[i].first == point[i + 1].first)ret += '=';\n\t\t\telse ret += ',';\n\t\t}\n\t\tret += to_string((-1)*point[T-1].second + 1);\n\t\tcout << ret << endl;\n\t}\n\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n#include <string>\n#include <vector>\n#include <cstdio>\n#include <cstdlib>\n#include <cmath>\n#include <set>\n#include <map>\n#include <queue>\n#include <stack>\n\nusing namespace std;\n\n#define INF 1010001000\n#define EPS 1e-10\n#define rep(i, N) for (int i = 0; i < N; i++)\n#define pb push_back\n\ntypedef pair<int, int> i_i;\ntypedef long long int llong;\ntypedef pair<llong, llong> ll_ll;\ntypedef struct edge {int f, t;}Edge;\ntypedef pair<int, pair<int, int> > Team;\ntypedef pair<int, pair<int, pair<int, int> > > input;\n\nint m, t, p, r;\n\nint main()\n{\n    while (cin >> m >> t >> p >> r, m) {\n        vector<Team > team(t);\n        vector<vector<int> > check(t, vector<int>(p, 0));\n        vector<input > data(r);\n        rep(i, t) {\n            team[i].second.second = i+1;\n            team[i].first = 0;\n            team[i].second.first = 0;\n        }\n        rep(i, r) {\n            cin >> data[i].first >> data[i].second.second.second\n                >> data[i].second.second.first \n                >> data[i].second.first;\n            data[i].second.second.second--;\n            data[i].second.second.first--;\n            data[i].second.first *= -1;\n        }\n        sort(data.begin(), data.end());\n        rep(i, r) {\n            int a = data[i].first, b = data[i].second.second.second, \n                c = data[i].second.second.first, \n                d = data[i].second.first;\n            if (d) {\n                if (check[b][c] != -1) {\n                    check[b][c]++;\n                }\n            } else {\n                if (check[b][c] != -1) {\n                    team[b].first++;\n                    team[b].second.first \n                        -= data[i].first + check[b][c] * 20;\n                    check[b][c] = -1;\n                }\n            }\n        }\n        sort(team.begin(), team.end(), greater<Team>());\n        cout << team[0].second.second;\n        for (int i = 1; i < t; i++) {\n            if (team[i].first == team[i-1].first && \n                    team[i].second.first == team[i-1].second.first) {\n                cout << \"=\" << team[i].second.second;\n            } else {\n                cout << \",\" << team[i].second.second;\n            }\n        }\n        cout << endl;\n    }\n\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <cmath>\n#include <climits>\n#include <cstdio>\n#include <cstdlib>\n#include <cstring>\n#include <fstream>\n#include <iostream>\n#include <list>\n#include <map>\n#include <queue>\n#include <set>\n#include <sstream>\n#include <stack>\n#include <string>\n#include <vector>\n#include <cassert>\n\nusing namespace std;\n\n#define LOG(...) printf(__VA_ARGS__)\n//#define LOG(...)\n#define FOR(i,a,b) for(int i=(int)(a);i<(int)(b);++i)\n#define REP(i,n) for(int i=0;i<(int)(n);++i)\n#define ALL(a) (a).begin(),(a).end()\n#define RALL(a) (a).rbegin(),(a).rend()\n#define EXIST(s,e) ((s).find(e)!=(s).end())\n#define SORT(c) sort((c).begin(),(c).end())\n#define RSORT(c) sort((c).rbegin(),(c).rend())\n#define CLR(a) memset((a), 0 ,sizeof(a))\n\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef vector<bool> vb;\ntypedef vector<int> vi;\ntypedef vector<ll> vll;\ntypedef vector<vb> vvb;\ntypedef vector<vi> vvi;\ntypedef vector<vll> vvll;\ntypedef pair<int, int> pii;\ntypedef pair<ll, ll> pll;\n\nstruct icpclog{\n    int number, time, id;\n    int submit_status[10 + 1];\n\n    int compare(const icpclog& o) const {\n        if(number != o.number) return o.number - number;\n        return time - o.time;\n    }\n\n    bool operator <(const icpclog& o) const {\n        int res = compare(o);\n        if(res != 0) return res < 0;\n        return o.id - id < 0;\n    }\n};\n\nint main() {\n    int contest_time, team_n, question_n, submit_n;\n    while(cin >> contest_time >> team_n >> question_n >> submit_n, contest_time|team_n|question_n|submit_n){\n        vector<icpclog> logs(team_n + 1);\n        REP(i, logs.size()) logs[i].id = i;\n        REP(i, submit_n){\n            int time, team, question, judge;\n            cin >> time >> team >> question >> judge;\n            if(judge != 0)\n                logs[team].submit_status[question]++;\n            else{\n                logs[team].time += time;\n                logs[team].time += logs[team].submit_status[question] * 20;\n                logs[team].number++;\n            }\n        }\n\n        logs.erase(logs.begin());\n        SORT(logs);\n\n        cout << logs[0].id;\n        FOR(i, 1, logs.size()){\n            cout << (logs[i-1].compare(logs[i]) == 0 ? \"=\" : \",\") << logs[i].id;\n        }\n        cout << endl;\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\nusing namespace std;\n\n// 構造体\nstruct team{\n\tint t, c, m;\t// チームNo., 正解数, 所要時間合計\n\tint p[10];\t\t// ペナルティー\n};\n\n// オーバーロード\nbool operator<(const team team1, const team team2){\n\tbool rep;\n\tif(team1.c == team2.c){\n\t\trep = (team1.m == team2.m) ? team1.t > team2.t : team1.m < team2.m;\n\t}else{\n\t\trep = (team1.c > team2.c);\n\t}\n\treturn rep;\n}\n\nint main(){\n\tint M, T, P, R;\n\twhile( cin >> M >> T >> P >> R, M || T || P || R ){\n\t\tvector<team> teams(T);\n\t\tfor(int i = 0; i < T; i++){\n\t\t\tteams[i].t = i+1;\n//\t\t\tteams[i].c = 0;\n//\t\t\tteams[i].m = 0;\n\t\t}\n\t\tfor(int i = 0; i < R; i++){\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tif( j == 0 ){\n\t\t\t\tteams[t-1].c++;\n\t\t\t\tteams[t-1].m += (m + 20 * teams[t-1].p[p-1]);\n\t\t\t}else{\n\t\t\t\tteams[t-1].p[p-1]++;\n\t\t\t}\n\t\t}\n\t\tsort(teams.begin(), teams.end());\n\t\t// 出力\n\t\tcout << teams[0].t;\n\t\tfor(int i = 1; i < T; i++){\n\t\t\tif( teams[i].c == teams[i-1].c && teams[i].m == teams[i-1].m ) cout << \"=\";\n\t\t\telse cout << \",\";\n\t\t\tcout << teams[i].t;\n\t\t}\n\t\tcout << endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\ntypedef pair<int, int> P;\ntypedef pair<int, pair<int, int>> S;\nint wa[51][11];\nint OK[11];\nvector<S> v;\n\n//比較関数\nbool comp(S lhs, S rhs){\n\tif(lhs.first != rhs.first){\n\t\treturn lhs.first < rhs.first;\n\t}\n\tif(lhs.second.first != rhs.second.first){\n\t\treturn lhs.second.first > rhs.second.first;\n\t}\n\tif(lhs.second.second != rhs.second.second){\n\t\treturn lhs.second.second < rhs.second.second;\n\t}\n}\n\nint main(){\nwhile(1){//start\n\t\n\tint M, T, P, R;\n\tcin >> M >> T >> P >> R;\n\tif(M == 0 and T == 0 and P == 0 and R == 0) break;\n\n\t//初期化\n\tv.resize(T);\n\tfor(int i = 0; i < 51; i++){\n\t\tfor(int j = 0; j < 11; j++) wa[i][j] = 0;\n\t}\n\tfor(int i = 0; i < 11; i ++) OK[i] = 0;\n\t\n\t\n\t//データを格納\n\tfor(int i = 0; i < R; i++){\n\t\tint m, t, p, j;\n\t\tcin >> m >> t >> p >> j;\n\n\t\tif(j == 0){\n\t\t\tv[t - 1].second.first += m + 20*wa[t][p]; \n\t\t\tOK[t-1] += 1;\n\t\t}\n\t\telse{\n\t\t\twa[t][p] += 1;\n\t\t}\n\t}\n\t\n\t//vectorにデータを入れる\n\tfor(int i = 1; i <= T; i++){\n\t\t//v.push_back(make_pair(OK[i-1], make_pair(sum_m, i)));\n\t\tv[i-1].first = OK[i-1];\n\t\tv[i-1].second.second = i;\n\t}\n\t\n\tsort(v.begin(), v.end(), comp);\n\treverse(v.begin(), v.end());\n\t\n\t//for(int i = 0; i < (int)v.size(); i++) cout << v[i].first << \" \" << v[i].second.first << \" \" << v[i].second.second << endl;\n\t\n\t\n\t//出力\n\tfor(int i = 1; i <= (int)v.size(); i++){\n\t\tcout << v[i-1].second.second;\n\t\tif(i == (int)v.size()) continue;\n\t\telse if(v[i-1].first == v[i].first and v[i-1].second.first == v[i].second.first) cout << \"=\";\n\t\telse cout << \",\";\n\t}\n\tcout << endl;\n\tv.clear();\n}//end\t\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <utility>\n#include <algorithm>\nusing namespace std;\n\nint main()\n{\n\tint M, T, P, R, m, t, p, j;\n\twhile (cin >> M >> T >> P >> R, M || T || P || R) {\n\t\tvector< vector< pair<int, int> > > data(T + 1, vector< pair<int, int> >(P, pair<int, int>(0,0)));\n\t\tvector< tuple<int, int, int> > score(T + 1);\n\t\tfor (int i = 0; i < R; i++) {\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tif (j == 0) {\n\t\t\t\tdata[t][p].first = m + data[t][p].second * 20;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdata[t][p].second++;\n\t\t\t}\n\t\t}\n\t\tfor (int i = 1; i <= T; i++) {\n\t\t\tint sco = 0,pena = 0;\n\t\t\tfor (int j = 0; j < P; j++) {\n\t\t\t\tif (data[i][j].first) {\n\t\t\t\t\tsco--;\n\t\t\t\t\tpena += data[i][j].first;\n\t\t\t\t}\n\t\t\t}\n\t\t\tscore[i] = tuple<int, int, int>(sco,pena,-i);\n\t\t}\n\t\tsort(score.begin()+ 1, score.end());\n\t\ttuple<int, int, int> temp = score[1];\n\t\tcout << -get<2>(score[1]);\n\t\tfor (int i = 2; i <= T; i++) {\n\t\t\tif (get<0>(temp) == get<0>(score[i]) && get<1>(temp) == get<1>(score[i])) {\n\t\t\t\tcout << \"=\";\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcout << \",\";\n\t\t\t}\n\t\t\tcout << -get<2>(score[i]);\n\t\t\ttemp = score[i];\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\nint main(){\n\n    cin.tie(0);\n    ios::sync_with_stdio(false);\n\n    while( true ){\n\n        int m, t, p, r;\n        cin >> m >> t >> p >> r;\n        if(m == 0 && t == 0 && p == 0 && r == 0)\n            break;\n\n        vector<int> correct(t, 0);\n        vector<int> time(t, 0);\n        vector<vector<int>> incorrect(t, vector<int>(p, 0));\n\n        for(int i = 0; i < r; i++){\n\n            int mi, ti, pi, ji;\n            cin >> mi >> ti >> pi >> ji;\n\n            if(ji == 0){\n                correct[ti - 1] += 1;\n                time[ti - 1] += incorrect[ti - 1][pi - 1] * 20 + mi;\n            } else {\n                incorrect[ti - 1][pi - 1]++;\n            }\n\n        }\n\n        vector<vector<int>> bucket(p + 1, vector<int>(0));\n\n        for(int i = 0; i < t; i++)\n            bucket[correct[i]].push_back(i);\n/*\n        for(auto &x : bucket){\n            for(auto &z : x)\n                cout << z << ' ';\n            cout << endl;\n        }\n*/\n        int count = 0;\n        for(int i = bucket.size() - 1; i >= 0; i--) {\n            if(bucket[i].size() == 1)\n                cout << bucket[i][0] + 1 << ( ++count != t ? \",\" : \"\");\n            if(bucket[i].size() > 1){\n                vector<pair<int, int>> p(bucket[i].size());\n                for(int j = 0; j < bucket[i].size(); j++){\n                    p[j] = make_pair(time[bucket[i][j]], bucket[i][j]);\n                }\n                sort(p.begin(), p.end());\n                stack<int> st;\n                for(int j = 0; j < bucket[i].size(); j++){\n                    if(j != bucket[i].size() - 1){\n                        if(p[j].first == p[j+1].first) {\n                            st.push(p[j].second);\n                        } else {\n                            if (!st.empty()) {\n                                st.push(p[j].second);\n                                while(!st.empty()) {\n                                    cout << st.top() + 1 << ( ++count != t ? \"=\" : \"\");\n                                    st.pop();\n                                }\n                            } else\n                                cout << p[j].second + 1 << ( ++count != t ? \",\" : \"\");\n                        }\n                    } else {\n                        if (!st.empty()) {\n                            st.push(p[j].second);\n                            while(!st.empty()) {\n                                cout << st.top() + 1 << ( ++count != t ? (st.size() != 1 ? \"=\" : \",\") : \"\");\n                                st.pop();\n                            }\n                        } else\n                            cout << p[j].second + 1 << ( ++count != t ? \",\" : \"\");\n                    }\n                }\n            }\n        }\n        cout << endl;\n\n    }\n\n    return 0;\n\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n\nusing namespace std;\n\nint main(){\n    int M, T, P, R;\n    while( true ){\n        cin >> M >> T >> P >> R;\n        \n        if( M == 0 )\n            break;\n        \n        vector<int> tans(T, 0);\n        vector<int> ttime(T, 0);\n        vector<int> pen(T * P, 0);\n        \n        int m, t, p, j;\n        for(int i = 0; i < R; i++){\n            \n            cin >> m >> t >> p >> j;\n            \n            if(j == 0){\n                tans[t-1] += 1;\n                ttime[t-1] += m;\n                ttime[t-1] += pen[(t-1)*P+p-1];\n            }\n            else{\n                pen[(t-1)*P+p-1] += 20;\n            }\n        }\n        \n        vector<int> tscore(T, 0);\n        vector<int> tss(T, 0);\n        for(int i = 0; i < T; i++){\n            tscore[i] = tans[i] * 50000 - ttime[i];\n        }\n        \n        vector<int> trank(T);\n        \n        tss = tscore;\n        sort( tss.begin(), tss.end() );\n        tss.erase( unique( tss.begin(), tss.end() ), tss.end() );\n        for(int i = 0; i < T; i++){\n            trank[i] = find( tss.begin(), tss.end(), tscore[i] ) - tss.begin();\n        }\n        bool Fl = true;\n        for(int i = T - 1; i >= 0; i--){\n            bool flag = true;\n            for(int j = T - 1; j >= 0; j--){\n                if(trank[j] == i){\n                    if(flag){\n                        if(Fl){\n                            cout << j + 1;\n                            Fl = false;\n                        }\n                        else\n                            cout << \",\" << j + 1;\n                        flag = false;\n                    }\n                    else{\n                        cout << \"=\" << j + 1;\n                    }\n                }\n            }\n        }\n        cout <<endl;\n        \n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <queue>\n#include <algorithm>\nusing namespace std;\n\ntypedef pair<int, int> P;\n\nstruct Team {\n    int number;\n    int m = 0, p = 0;\n    vector<P> question;\n};\n\ntypedef vector<Team> AdjList;\n\nAdjList team;\n\nbool comp_solved(const Team& e1, const Team& e2){\n    return e1.p > e2.p;\n}\nbool comp_m(const Team& e1, const Team& e2){\n    return e1.m < e2.m;\n}\nbool comp_n(const Team& e1, const Team& e2){\n    return e1.number < e2.number;\n}\n\nint main(void){\n    int M, T, P1, R;\n    int m[2001], t[2001], p[2001], j[2001];\n    while(cin >> M >> T >> P1 >> R){\n    \tif(M == 0 && T == 0 && P1 == 0 && R == 0){\n    \t\tbreak;\n    \t}\n        team = AdjList(T);\n        int a[100][100];\n        for(int i=0;i<R;i++){\n            cin >> m[i] >> t[i] >> p[i] >> j[i];\n            team[t[i]-1].number = t[i];\n            if(j[i] == 0){\n                team[t[i]-1].p++;\n                team[t[i]-1].m += m[i];\n                if(!team[t[i]-1].question.empty()){\n                    int j=0;\n                    while(!team[t[i]-1].question.empty()){\n                        P ans = team[t[i]-1].question[j];\n                        if(ans.first == p[i]){\n                            team[t[i]-1].m += ans.second;\n                        }\n                        j++;\n                    }\n                }\n            }else{\n                team[t[i]-1].question.push_back(P(p[i], m[i]));\n            }\n        }\n        sort(team.begin(), team.end(), comp_solved);\n        int solvedC = team[0].p;\n        int cntF=0,cntE=0;\n        for(int j=0;j<P1;j++){\n            for(int i=1;i<T;i++){\n                if( team[i].p == solvedC){\n                    cntE++;\n                }\n            }\n            sort(team.begin()+cntF,team.begin()+cntE,comp_m);\n            cntF = cntE+1;\n            cntE = cntF;\n            if(team.begin()+cntF > team.end()){\n                break;\n            }\n        }\n        // for(int i=0;i<2;i++){\n        //     cout << team[i].number << endl;\n        // }\n        \n    }\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#define _CRT_SECURE_NO_WARNINGS // #pragma warning(disable:4996)\n#include <iostream>\n#include <cstdio>\n#include <cstring>\n#include <algorithm>\n#include <vector>\n#include <string>\n#include <queue>\n#include <functional>\n#include <sstream>\n#include <cmath>\n#include <set>\n#include <map>\n#include <stack>\nusing namespace std; \n\n#define rep(i,a,b) for(int i=(a);i<(b);i++)\n#define rrep(i,a,b) for(int i=(a);i>=(b);i--)\n#define pb push_back\n#define mp(a,b) make_pair(a,b)\n#define all(a) a.begin(),a.end()\n#define len(x) ((int)(x).size())\n#define tmax(a,b,c) max((a),max((b),(c)))\n#define tmin(a,b,c) min((a),min((b),(c)))\n#define debug(x) cerr << #x << \" is \" << x << endl;\n\ntypedef pair<int, int> Pii;\ntypedef map<int, int> Mii;\ntypedef vector<int> Vi;\ntypedef long long ll;\nconst int inf = 2e9;\nconst ll ll_inf = 1e17;\nconst int mod = 1e9 + 7;\nconst long double eps = 1e-10;\n\nstruct sol{\n\tint n, s, ti, wr[20];\n\tsol(){};\n\tbool operator<(const sol& rhs) {\n\t\tif (s == rhs.s) \n\t\t\tif (ti == rhs.ti) {\n\t\t\t\treturn n > rhs.n;\n\t\t\t} else \n\t\t\t\treturn  ti < rhs.ti;\n\t\treturn s > rhs.s;\n\t}\n};\nsol x[55];\n\nint main()\n{\n\twhile (1) {\n\t\tint M, T, P, R;\n\t\tcin >> M >> T >> P >> R;\n\t\tif (M==0) break;\n\t\tmemset(x, 0, sizeof(x));\n\n\t\trep(i,0,T) x[i].n = i+1;\n\t\trep(i,0,R) {\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tt--;\n\t\t\tif (j==0) {\n\t\t\t\tx[t].s++;\n\t\t\t\tx[t].ti += m + x[t].wr[p];\n\t\t\t}\n\t\t\telse {\n\t\t\t\tx[t].wr[p] += 20;\n\t\t\t}\n\t\t}\n\t\tsort(x, x+T);\n\t\tcout << x[0].n;\n\t\trep(i,1,T) {\n\t\t\tif (x[i].s == x[i-1].s && x[i].ti == x[i-1].ti) cout << \"=\";\n\t\t\telse cout << \",\";\n\t\t\tcout << x[i].n;\n\t\t}\n\t\tcout << endl;\n\t}\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n#include <string.h>\n#include <vector>\n#include <map>\nusing namespace std;\ntypedef pair<int,int> pii;\nint miss[66][20];\nint main(){\n    \n  int M,T,P,R;\n  int m,t,p,j;\n  int i,k;\n  vector<pii> team;\n  while(cin>>M>>T>>P>>R,M|T|P|R){\n    memset(miss,0,sizeof(miss));\n    team.clear();\n    for(i=0;i<=T;i++){\n      team.push_back(pii(0,0));\n    }\n    \n    for(i=0;i<R;i++){\n      cin>>m>>t>>p>>j;\n      if(j==0){\n\tteam[t].first++;\n\tteam[t].second+=(m+miss[t][p]*20);\n      }\n      else{\n\tmiss[t][p]++;\n      }\n    }\n    /*\n    for(i=0;i<T;i++){\n      cout<<i<<\":\"<<team[i].first<<\" : \"<<team[i].second<<endl;\n    }\n    */\n    int prei,tmpi,tmp;\n    int use[60];\n    memset(use,0,sizeof(use));\n    for(j=0;j<T;j++){\n      i=T;\n      while(use[i]==1)i--;\n      tmpi=i;\n      for(i=i-1;i>0;i--){\n\tif(use[i]==1) continue;\n\tif(team[i].first>team[tmpi].first){\n\t  tmpi=i;\n\t}\n\telse if(team[i].first==team[tmpi].first){\n\t  if(team[i].second<team[tmpi].second){\n\t    tmpi=i;\n\t  }\n\t}\n\t\n      }\n      use[tmpi]=1;\n      //cout<<\"[\"<<tmpi<<\"];\"<<team[tmpi].first<<\"---\"<<team[tmpi].second<<endl;\n      if(j==0) cout<<tmpi;\n      else if(team[tmpi].first==team[prei].first&&team[tmpi].second==team[prei].second){\n\tcout<<\"=\"<<tmpi;\n      }\n      else{\n\tcout<<\",\"<<tmpi;\n      }\n      prei=tmpi;\n    }\n    cout<<endl;\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nbool comp(pair<pair<int,int>,int> p1, pair<pair<int,int>,int> p2){\n\n    if(p1.first.first == p2.first.first){\n        if(p1.first.second == p2.first.second){\n            return p1.second < p2.second;\n        }\n        return p1.first.second > p2.first.second;\n    }\n    return p1.first.first < p2.first.first;\n\n}\n\nint main() {\n\n    while(1) {\n\n        int M,T,P,R;\n\n        cin >> M >> T >> P >> R;\n\n        if(M == 0 && T == 0 && P == 0 && R == 0) break;\n\n        pair<int,int> team[T+1]; //solve_num, time\n        pair<bool,int> try_progrums[T+1][P]; //is_tried, tried_count\n\n        team[0] = make_pair(-1,-1);\n\n        for(int i=1; i<T+1; i++){\n            team[i] = make_pair(0,0);\n            for(int j=0; j<P; j++) {\n                try_progrums[i][j] = make_pair(false, 0);\n            }\n        }\n\n        for(int i=0; i<R; i++){\n\n            int m, t, p, j;\n\n            cin >> m >> t >> p >>j;\n\n            if(j == 0){\n                team[t].first++;\n                team[t].second += m + try_progrums[t][p].second * 20;\n            }\n            else{\n                try_progrums[t][p].first = true;\n                try_progrums[t][p].second++;\n\n            }\n        }\n\n        pair<pair<int,int>,int> team_result[T+1];\n\n        for(int i=0; i<T+1; i++){\n            team_result[i] = make_pair(make_pair(team[i].first,team[i].second),i);\n\n    //        cout << team[i].first << \" \";\n        }\n\n  /*      cout << endl;\n\n        for(int i=0; i<T+1; i++){\n            cout << team[i].second << \" \";\n        }\n\n        cout << endl;\n*/\n        sort(team_result,team_result+T+1,comp);\n\n        cout << team_result[T].second;\n\n        for(int i=T; i>1; i--){\n            if(team_result[i].first.first == team_result[i-1].first.first && team_result[i].first.second == team_result[i-1].first.second){\n                cout << '=' << team_result[i-1].second;\n            }\n            else{\n                cout << ',' << team_result[i-1].second;\n            }\n        }\n\n        cout << ' ' << endl;\n\n\n\n\n    }\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <iomanip>\n#include <cstdio>\n#include <string>\n#include <cstring>\n#include <deque>\n#include <list>\n#include <queue>\n#include <stack>\n#include <vector>\n#include <utility>\n#include <algorithm>\n#include <map>\n#include <set>\n#include <complex>\n#include <cmath>\n#include <limits>\n#include <cfloat>\n#include <climits>\n#include <ctime>\n#include <cassert>\n#include <numeric>\n#include <fstream>\n#include <functional>\n#include <bitset>\n#define chmin(a, b) ((a)=min((a), (b)))\n#define chmax(a, b) ((a)=max((a), (b)))\n#define fs first\n#define sc second\n#define eb emplace_back\nusing namespace std;\n\ntypedef long long ll;\ntypedef pair<int, int> Pair;\ntypedef tuple<int, int, int> Tuple;\n\nconst ll MOD=1e9+7;\nconst ll INF=1e18;\nconst double pi=acos(-1);\nconst double eps=1e-10;\n\nint dx[]={1, 0, -1, 0};\nint dy[]={0, -1, 0, 1};\nint dx2[]={1, 1, 0, -1, -1, -1, 0, 1};\nint dy2[]={0, -1, -1, -1, 0, 1, 1, 1};\n\nint main(){\n    while(1){\n        int M, T, P, R; cin>>M>>T>>P>>R;\n        if(M==0 && T==0 && P==0 && R==0) return 0;\n\n        // 0-indexed\n        // Problem, Time, Team\n        vector<Tuple> team(T);\n        for(int i=0; i<T; i++){\n            team[i]=Tuple(0, 0, i);\n        }\n\n        vector<vector<int>> penalty(T, vector<int>(P, 0));\n\n        for(int i=0; i<R; i++){\n            int m, t, p, j; cin>>m>>t>>p>>j;\n            t--, p--;\n\n            if(j==0){\n                // correct\n                get<0>(team[t])++;\n                get<1>(team[t])+=m; get<1>(team[t])+=penalty[t][p];\n            }\n            else{\n                penalty[t][p]+=20;\n            }\n        }\n\n        vector<vector<Pair>> count(P+1);\n\n        for(int i=0; i<T; i++){\n            count[get<0>(team[i])].push_back(Pair(get<1>(team[i]), get<2>(team[i])));\n        }\n\n        for(int i=0; i<=P; i++){\n            sort(count[i].begin(), count[i].end());\n        }\n\n        int CountTeam=0;\n        for(int i=P; i>=0; i--){\n            //cout << \"ProblemNumber = \" << i << endl; \n            for(int j=0; j<count[i].size(); j++){\n                //cout << \"Time = \" << count[i][j].fs << \" \" << \"Team = \" << count[i][j].sc+1 << endl;\n                \n                vector<int> allsame;\n                while(j+1<count[i].size() && count[i][j].fs==count[i][j+1].fs){\n                    // same correct and same time\n                    if(!allsame.size()) allsame.push_back(count[i][j].sc+1);\n                    allsame.push_back(count[i][j+1].sc+1);\n                    j++;\n                }\n\n                for(int k=allsame.size()-1; k>=0; k--){\n                    if(k==0){\n                        CountTeam++;\n                        if(CountTeam==T) cout << allsame[k] << endl;\n                        else cout << allsame[k] << \",\";\n                    }\n                    else{\n                        CountTeam++;\n                        cout << allsame[k] << \"=\";\n                    }\n                }\n\n                if(!allsame.size()){\n                    CountTeam++;\n                    if(CountTeam==T) cout << count[i][j].sc+1 << endl;\n                    else cout << count[i][j].sc+1 << \",\";\n                }\n                \n            }\n        }\n    }\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\n#define REP(i,n) for(int i=0;i<(int)(n);i++)\n#define ALL(x) (x).begin(),(x).end()\n\nusing namespace std;\n\nint main() {\n\tint M,T,P,R;\n\twhile(true){\n\t\tcin >> M >> T >> P >> R;\n\t\tif(M==0) return 0;\n\t\tvector<int> m(R),t(R),p(R),j(R);\n\t\tREP(i,R){\n\t\t\tcin >> m[i] >> t[i] >> p[i] >> j[i];\n\t\t\tt[i]--;\n\t\t}\n\t\tvector<vector<int>> pena(T,vector<int>(P));\n\t\tvector<vector<int>> score(T,vector<int>(2)); //seikai,jikan\n\n\t\tREP(i,R){\n\t\t\tif(j[i] == 0){\n\t\t\t\tscore[t[i]][0]++;\n\t\t\t\tscore[t[i]][1]+=pena[t[i]][p[i]] + m[i];\n\t\t\t}\n\t\t\tpena[t[i]][p[i]]+=20;\n\t\t}\n\n\t\tvector<tuple<int,int,int>> tupleScore(T);\n\t\tREP(i,T){\n\t\t\ttupleScore[i] = make_tuple(-score[i][0],score[i][1],-1-i);\n\t\t}\n\t\tsort(ALL(tupleScore));\n\n\t\tint top;\n\t\ttie(ignore,ignore,top) = tupleScore[0];\n\t\tcout << -top;\n\t\tREP(i,T-1){\n\t\t\tint ans1,tim1,ans2,tim2;\n\t\t\ttie(ans1,tim1,ignore)=tupleScore[i];\n\t\t\ttie(ans2,tim2,top)=tupleScore[i+1];\n\t\t\tif(ans1==ans2 && tim1==tim2){\n\t\t\t\tcout << \"=\" << -top;\n\t\t\t}\n\t\t\telse{\n\t\t\t\tcout << \",\" << -top;\n\t\t\t}\n\t\t}\n\n\t\tcout << endl;\t\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\nstruct Data{\n\n  int team;\n  int c_num;\n  int w_num[11];\n  int time;\n\n  bool operator<(const Data& data)const{\n    if(data.c_num != c_num)return c_num > data.c_num;\n    if(data.time != time)return time < data.time;\n    return team > data.team;\n  }\n  \n};\nvoid Init(Data *data,int T,int P){\n\n  for(int i=1 ; i <= T ; i++){\n    data[i].team=i;\n    data[i].c_num=0;\n    data[i].time=0;\n    for(int j=1 ; j <= P ; j++){\n      data[i].w_num[j]=0;\n    }\n  }\n  \n}\nbool isSame(Data *data,int a,int b){\n\n  if(data[a].c_num == data[b].c_num && data[a].time == data[b].time)return true;\n\n  return false;\n  \n}\nint main(){\n  \n  int M,T,P,R;\n  \n  while(1){\n\n    cin >>M>>T>>P>>R;\n    if(M==0 && T==0 && P==0 && R==0)break;\n\n    Data data[T+1];\n    Init(data,T,P);\n    \n    int m,t,p,j;\n    for(int i=0 ; i < R ; i++){\n      cin >>m>>t>>p>>j;\n      if(j == 0){\n\tdata[t].c_num++;\n\tdata[t].time+=m+20*data[t].w_num[p];\n      }else{\n\tdata[t].w_num[p]++;\n      }\n    }\n\n    sort(data+1,data+T+1);\n\n    for(int i=1 ; i <= T ; i++){\n      cout <<data[i].team;\n      if(i+1 <= T){\n\tif(isSame(data,i,i+1)){\n\t  cout <<\"=\"; \n\t}else{\n\t  cout <<\",\";\n\t}\n      }\n    }\n    cout <<endl;\n    \n  }\n  \n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\n#define MAX_R 2005\n\ntypedef pair<int,int> PA;\n\nint M,T,P,R;\n\nint m,t,p,j;\n\nint main(){\n    while(1){\n        cin >> M >> T >> P >> R;\n        if(M==0 && T == 0 && P==0&&R==0)break;\n        vector<int> solve(T);\n        vector<int> time(T);\n        int miss[51][11]={};\n        for(int i=0;i<R;i++){\n            cin >> m >> t >> p >> j;\n            if(j == 0){\n                solve[t-1]++;\n                time[t-1] += m + miss[t-1][p] * 20;\n            }else{\n                miss[t-1][p] ++;\n            }\n        }\n\n        vector<PA> ans1(T);\n        vector<PA> ans2(T);\n        for(int i=0;i<T;i++){\n            ans1[i] = make_pair(solve[i],i+1);\n            ans2[i] = make_pair(time[i],i+1);\n        }\n        \n        sort(ans1.begin(),ans1.end());\n        sort(ans2.begin(),ans2.end());\n        for(int s=0;s<T;s++){\n            for(int i=T-1;i>0;i--){\n                if(ans1[i].first > ans1[i-1].first){\n                }else if(ans1[i].first == ans1[i-1].first){\n                    int a,b;\n                    a=b=0;\n                    for(int j=0;j<T;j++){\n                        if(ans2[j].second == ans1[i].second){\n                            a = ans2[j].first;\n                        }\n                        if (ans2[j].second == ans1[i-1].second){\n                            b = ans2[j].first;\n                        }\n                        if(a != 0 && b== 0){\n                            break;\n                        }\n                        if(a == 0 && b != 0){\n                            swap(ans1[i].first,ans1[i-1].first);\n                            swap(ans1[i].second,ans1[i-1].second);\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n        for(int s=0;s<T;s++){\n            for(int i=T-1;i>=0;i--){\n                if(i==T-1)continue;\n                else{\n                    if(ans1[i+1].first == ans1[i].first){\n                        int a,b;\n                        for(int j=0;j<T;j++){\n                            if(ans2[j].second == ans1[i].second){\n                                a = ans2[j].first;\n                            }\n                            if (ans2[j].second == ans1[i+1].second){\n                                b = ans2[j].first;\n                            }\n                        }\n                        if(a==b && ans1[i+1].second < ans1[i].second){\n                            swap(ans1[i].first,ans1[i+1].first);\n                            swap(ans1[i].second,ans1[i+1].second);\n                        }\n                    }\n                }\n            }\n        }\n        \n        for(int i=T-1;i>=0;i--){\n            if(i==T-1){\n                printf(\"%d\",ans1[i].second);\n            }\n            else{\n                if(ans1[i+1].first > ans1[i].first){\n                    printf(\",%d\",ans1[i].second);\n                }else if(ans1[i+1].first == ans1[i].first){\n                    int a,b;\n                    for(int j=0;j<T;j++){\n                        if(ans2[j].second == ans1[i].second){\n                            a = ans2[j].first;\n                        }\n                        if (ans2[j].second == ans1[i+1].second){\n                            b = ans2[j].first;\n                        }\n                    }\n                    if(a==b){\n                        printf(\"=%d\",ans1[i].second);\n                    }else{\n                        printf(\",%d\",ans1[i].second);\n                    }\n                    \n                }\n            }\n            \n        }\n        puts(\"\");\n        \n    }\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nbool comp(pair<pair<int,int>,int> p1, pair<pair<int,int>,int> p2){\n\n    if(p1.first.first == p2.first.first){\n        if(p1.first.second == p2.first.second){\n            return p1.second < p2.second;\n        }\n        return p1.first.second > p2.first.second;\n    }\n    return p1.first.first < p2.first.first;\n\n}\n\nint main() {\n\n    while(1) {\n\n        int M,T,P,R;\n\n        cin >> M >> T >> P >> R;\n\n        if(M == 0 && T == 0 && P == 0 && R == 0) break;\n\n        pair<int,int> team[T+1]; //solve_num, time\n        int wrong_progrums[T+1][P+1]; //wrong_count\n\n        team[0] = make_pair(-1,-1);\n\n        for(int i=1; i<T+1; i++){\n            team[i] = make_pair(0,0);\n            for(int j=0; j<P+1; j++) {\n                wrong_progrums[i][j] = 0;\n            }\n        }\n\n        for(int i=0; i<R; i++){\n\n            int m, t, p, j;\n\n            cin >> m >> t >> p >> j;\n\n            if(j == 0){\n                team[t].first++;\n                team[t].second += m + wrong_progrums[t][p] * 20;\n            }\n            else{\n                wrong_progrums[t][p]++;\n            }\n        }\n\n        pair<pair<int,int>,int> team_result[T+1];\n\n        for(int i=0; i<T+1; i++){\n            team_result[i].first.first = team[i].first;\n            team_result[i].first.second = team[i].second;\n            team_result[i].second = i;\n        }\n\n        sort(team_result,team_result+T+1,comp);\n        \n        cout << team_result[T].second;\n\n        for(int i=T; i>1; i--){\n            if(team_result[i].first.first == team_result[i-1].first.first && team_result[i].first.second == team_result[i-1].first.second){\n                cout << '=' << team_result[i-1].second;\n            }\n            else{\n                cout << ',' << team_result[i-1].second;\n            }\n        }\n\n        cout << endl;\n\n    }\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstdio>\n#include<string>\n#include<cstring>\n#include<vector>\n#include<set>\n#include<list>\n#include<queue>\n#include<cmath>\n#include<functional>\n#include<algorithm>\nusing namespace std;\n\nstruct S{\n\tint id,solve,pena;\n\tbool operator<(S a)const{\n\t\tif(solve!=a.solve)return solve>a.solve;\n\t\tif(pena!=a.pena)return pena<a.pena;\n\t\treturn id>a.id;\n\t}\n\tbool operator==(S a)const{\n\t\treturn solve==a.solve&&pena==a.pena;\n\t}\n};\nint main(){\n\tint M,T,P,R;\n\tS team[50];\n\twhile(cin>>M>>T>>P>>R,M|T|P|R){\n\t\tfor(int i=0;i<T;i++){\n\t\t\tteam[i].id=i+1;\n\t\t\tteam[i].solve=team[i].pena=0;\n\t\t}\n\t\tint wrong[50][10]={};\n\t\tfor(int i=0;i<R;i++){\n\t\t\tint m,t,p,j;\n\t\t\tcin>>m>>t>>p>>j;\n\t\t\tt--;p--;\n\t\t\tif(j==0){\n\t\t\t\tteam[t].solve++;\n\t\t\t\tteam[t].pena += m+20*wrong[t][p];\n\t\t\t}else{\n\t\t\t\twrong[t][p]++;\n\t\t\t}\n\t\t}\n\t\tsort(team,team+T);\n\t\tcout<<team[0].id;\n\t\tfor(int i=1;i<T;i++){\n\t\t\tif(team[i-1]==team[i])cout<<'=';\n\t\t\telse cout<<',';\n\t\t\tcout<<team[i].id;\n\t\t}\n\t\tcout<<endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<string.h>\nusing namespace std;\n\nconst int INF=50000000;\n\nint data[51][12];\n\nint main(){\n\tint M,T,P,R;\n\twhile(cin>>M>>T>>P>>R && M){\n\t\tfill((int*)data,(int*)(data+12),0);\n\t\tfor(int i=0;i<R;i++){\n\t\t\tint m,t,p,j;\n\t\t\tcin>>m>>t>>p>>j;\n\t\t\tif(j==0){\n\t\t\t\tdata[t][0]++;\n\t\t\t\tdata[t][11]+=m+data[t][p]*20;\n\t\t\t}\n\t\t\telse data[t][p]++;\n\t\t}\n\t\tint prev[2]={INF,0};\n\t\tfor(int i=0;i<T;i++){\n\t\t\tint ans=0;\n\t\t\tint now[2]={0,INF};\n\t\t\tfor(int j=T;j>=0;j--){\n\t\t\t\tif(data[j][0]>now[0]){\n\t\t\t\t\tnow[0]=data[j][0];\n\t\t\t\t\tnow[1]=data[j][11];\n\t\t\t\t\tans=j;\n\t\t\t\t}\n\t\t\t\telse if(data[j][0]==now[0] && data[j][11]<now[1]){\n\t\t\t\t\tnow[1]=data[j][11];\n\t\t\t\t\tans=j;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(i){\n\t\t\t\tif(memcmp(now,prev,sizeof(now))==0)cout<<\"=\";\n\t\t\t\telse cout<<\",\";\n\t\t\t}\n\t\t\tcout<<ans;\n\t\t\tmemcpy(prev,now,sizeof(now));\n\t\t\tdata[ans][0]=-1;\n\t\t}\n\t\tcout<<endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\nusing namespace std;\n\nint main() {\n\n  long long int m, t, p, r, in_m, in_t, in_p, in_j;\n\n  while( true ) {\n\n    cin >> m >> t >> p >> r;\n    if ( m == 0 ) break;\n\n    vector< pair< long long int, pair< long long int, long long int > > > list;\n    for ( long long int i = 0; i < t; i++ ) {\n      list.push_back( make_pair( 0, make_pair( 0, -(i+1) ) ) );\n    }\n\n    long long int pena[51][11] = {0};\n\n    for ( long long int i = 0; i < r; i++ ) {\n      cin >> in_m >> in_t >> in_p >> in_j;\n      in_t--;\n      in_p--;\n      if ( in_j == 0 ) {\n\tlist[in_t].first--;\n\tlist[in_t].second.first += in_m + pena[in_t][in_p] * 20;\n      }else {\n\tpena[in_t][in_p]++;\n      }\n    }\n\n    sort( list.begin(), list.end() );\n\n    for ( long long int i = 0; i < t; i++ ) {\n      if ( i > 0 ) {\n\tif ( list[i].first == list[i-1].first && list[i].second.first == list[i-1].second.first ) {\n\t  cout << \"=\";\n\t}else {\n\t  cout << \",\";\n\t}\n      }\n      cout << -list[i].second.second;\n    }\n    cout << endl;\n\n  }\n\n  return 0;\n\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<string>\n#include<vector>\n\nusing namespace std;\n\nstruct teme {\n\tint num;\n\tint caPro;\n\tint sumtime;\n\tint pro[11];\n};\n\nvoid temeset(teme* t, int yoso) {\n\tfor (int i = 1; i <= yoso; i++) {\n\t\tt[i].num = i;\n\t\tt[i].caPro = 0;\n\t\tt[i].sumtime = 0;\n\t\tfor (int j = 1; j <= 10; j++) {\n\t\t\tt[i].pro[j] = 0;\n\t\t}\n\t}\n}\n\nint comp(const void*  A,const void* B) {\n\tconst teme* a = (const teme*)A;\n\tconst teme* b = (const teme*)B;\n\n\tif (b->caPro == a->caPro)\n\t{\n\t\tif (b->sumtime == a->sumtime) {\n\t\t\treturn b->num - a->num;\n\t\t}\n\t\treturn a->sumtime - b->sumtime;\n\t}\n\treturn b->caPro - a->caPro;\n}\n\nint main() {\n\tint w, t, p, r;\n\tvector<string>v;\n\twhile (cin >> w >> t >> p >> r, w || t || p || r) {\n\t\tteme te[51];\n\t\ttemeset(te, t);\n\t\tfor (int i = 0; i < r; i++) {\n\t\t\tint mk, tk, pk, jk;\n\t\t\tcin >> mk >> tk >> pk >> jk;\n\t\t\tif (jk == 0) {\n\t\t\t\tte[tk].caPro++;\n\t\t\t\tte[tk].sumtime += mk + te[tk].pro[pk];\n\t\t\t}\n\t\t\telse {\n\t\t\t\tte[tk].pro[pk] += 20;\n\t\t\t}\n\t\t}\n\t\tqsort(te+1, t, sizeof(teme), comp);\n\t\tstring s = \"\";\n\t\tfor (int i = 1; i <= t; i++) {\n\t\t\t//cout << te[i].num << \"???:\" << te[i].caPro << \" \" << te[i].sumtime << endl;\n\t\t\ts += to_string(te[i].num);\n\t\t\tif (i != t) {\n\t\t\t\tif (te[i].caPro == te[i + 1].caPro && te[i].sumtime == te[i + 1].sumtime) {\n\t\t\t\t\ts += \"=\";\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\ts += \",\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcout << s << endl;\n\t}\n\n\t/*for (int i = 0; i < v.size(); i++) {\n\t\tcout << v[i] << endl;\n\t}*/\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstring>\nusing namespace std;\nint x[100][3], n, a, b, c, d, e, f, g, h, p;\nint main() {\n\twhile (true) {\n\t\tmemset(x, 0, sizeof(x));\n\t\tcin >> n >> a >> b >> c;\n\t\tfor (int i = 0; i < c; i++) {\n\t\t\tcin >> d >> e >> f >> g;\n\t\t\tif (g) {\n\t\t\t\tx[e][2] += 20;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tx[e][1] = d + x[e][2];\n\t\t\t\tx[e][0]++;\n\t\t\t}\n\t\t}\n\t\tp = 0;\n\t\tfor (int i = 10; i >= 0; i--) {\n\t\t\tfor (int j = 1000; j >= 0; j++) {\n\t\t\t\th = 0;\n\t\t\t\tfor (int k = a; k > 0; k++) {\n\t\t\t\t\tif (x[k][0]==i && x[k][1]==j) {\n\t\t\t\t\t\tif (h >= 1) {\n\t\t\t\t\t\t\tcout << '=';\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (p >= 1) {\n\t\t\t\t\t\t\tcout << ',';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcout << k;\n\t\t\t\t\t\tp++;\n\t\t\t\t\t\th++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcout << endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n#define rep(i,n) for(int i=0;i<n;++i)\n#define Rep(i,n) for(int i=1;i<=n;++i)\n#define rrep(i,n) for(int i=n-1;0<=i;--i)\n#define rRep(i,n) for(int i=n;0<i;--i)\n#define range(i,a,b) for(int i=(a);i<(b);++i)\n#define mp make_pair\n#define pb push_back\n#define all(x) x.begin(), x.end()\n#define EPS 1e-8\n#define INF 1e8\n\ntypedef double Real;\ntypedef int Int;\ntypedef vector<Int> vi;\ntypedef vector<vector<Int> > vvi;\ntypedef pair<Int,Int> pii;\n\ninline Real sr(Real a) {return sqrt(max(a, (Real)0));}\nconst vi dy = {-1, 0, 1, 0}, dx = {0, -1, 0, 1};\n\ntemplate <typename K, typename V> ostream& operator<< (ostream& out, const pair<K, V>& p) {\n  out << '(' << p.first << \", \" << p.second << ')';\n  return out;\n}\n\ntemplate <typename T> ostream& operator<< (ostream& out, const vector<T>& v) {\n  out << '[';\n  rep(i, v.size()) out << v[i] << \",\";\n  out << \"\\b], \" << v.size();\n  return out;\n}\n\nvoid solve(){\n  Int M, T, P, R, m, t, p, j;\nfor(;;){\n  cin >> M >> T >> P >> R;\n  if(M == 0) return;\n\n  vvi penalty(T, vi(P, 0));\n  map<Int, pii> scores; // <teamnum, <correctprobrems, time>>\n  rep(i, T) scores[i] = make_pair(0, 0);\n\n  rep(i, R){\n    cin >> m >> t >> p >> j;\n    --t; --p;\n\n    if(j){\n      penalty[t][p]++;\n      continue;\n    }\n\n    pii &ct = scores[t];\n    ct.first++;\n    ct.second += m + 20 * penalty[t][p];\n  }\n\n  vector<pair<Int, pii> > v(all(scores));\n  sort(all(v), [&](pair<Int, pii> a, pair<Int, pii> b) {\n    if(a.second.first != b.second.first) return a.second.first > b.second.first;\n    if(a.second.second != b.second.second) return a.second.second < b.second.second;\n    return a.first > b.first;\n  });\n\n//  cout << v << endl;\n\n  Int lastnums = v[0].second.first, lasttime = v[0].second.second;\n  cout << v[0].first + 1;\n  for (int i = 1; i < T; ++i)\n  {\n    cout << (v[i].second.first == lastnums ? (v[i].second.second == lasttime ? '=' : ',') : ',') << v[i].first + 1;\n    lastnums = v[i].second.first;\n    lasttime = v[i].second.second;\n  }\n  cout << endl;\n}\n}\n\nsigned main()\n{\n  cin.tie(0);\n  ios::sync_with_stdio(false);\n  cout << fixed << setprecision(9);\n\n  solve();\n\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\n#include<vector>\nusing namespace std;\n#define REP(i, a, n) for(int i=a; i<n; i++)\n#define MP(a, b) make_pair(a, b)\n#define F first\n#define S second\n\nint main() {\n\tint M, T, P, R;\n\twhile (cin >> M >> T >> P >> R) {\n\t\tvector<pair<int, pair<int, int>>> vp;  // correct, time, team\n\t\tint pena[51][11];\n\n\t\tREP(i, 0, T) vp.push_back(MP(0, MP(0, i + 1)));\n\t\tREP(i, 0, 51) REP(j, 0, 11) pena[i][j] = 0;\n\n\t\tREP(i, 0, R) {\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tt--;\n\t\t\tp--;\n\n\t\t\tif (j == 0) {\n\t\t\t\tvp[t].F++;\n\t\t\t\tvp[t].S.F -= (pena[t][p] + m);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tpena[t][p] += 20;\n\t\t\t}\n\t\t}\n\n\t\tsort(vp.begin(), vp.end());\n\t\treverse(vp.begin(), vp.end());\n\n\t\tcout << vp[0].S.S;\n\t\tREP(i, 1, vp.size()) {\n\t\t\tif (vp[i - 1].F > vp[i].F) {\n\t\t\t\tcout << \",\" << vp[i].S.S;\n\t\t\t}\n\t\t\telse if (vp[i - 1].S.F > vp[i].S.F) {\n\t\t\t\tcout << \",\" << vp[i].S.S;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcout << \"=\" << vp[i].S.S;\n\t\t\t}\n\t\t}\n\n\t\tcout << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n/*{{{*/  //template\n#define rep(i,n) for(int i=0;i<(int)(n);i++)\nconstexpr int INF = numeric_limits<int>::max()/2;\nconstexpr long long LINF = numeric_limits<long long>::max()/3;\n#define mp make_pair\n#define pb push_back\n#define eb emplace_back\n#define fi first\n#define se second\n#define all(v) (v).begin(),(v).end()\n#define sz(x) (int)(x).size()\n#define debug(x) cerr<<#x<<\":\"<<x<<endl\n#define debug2(x,y) cerr<<#x<<\",\"<<#y\":\"<<x<<\",\"<<y<<endl\n//struct fin{ fin(){ cin.tie(0); ios::sync_with_stdio(false); } } fin_;\nstruct Double{ double d; explicit Double(double x) : d(x){} };\nostream& operator<<(ostream& os,const Double x){ os << fixed << setprecision(20) << x.d; return os; }\ntemplate<typename T> ostream& operator<<(ostream& os,const vector<T>& vec){ os << \"[\"; for(const auto& v : vec){ os << v << \",\"; } os << \"]\"; return os; }\ntemplate<typename T,typename U> ostream& operator<<(ostream& os,const pair<T,U>& p){ os << \"(\" << p.first << \",\"<< p.second <<\")\"; return os; }\ntemplate<typename T> ostream& operator<<(ostream& os,const set<T>& st){ os<<\"{\"; for(T v:st) os<<v<<\",\"; os <<\"}\"; return os; }\ntemplate<typename T,typename U> inline void chmax(T &x,U y){ if(y>x) x = y; }\ntemplate<typename T,typename U> inline void chmin(T &x,U y){ if(y<x) x = y; }\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef pair<int,int> pii;\ntypedef vector<int> vi;\ntypedef vector<vi> vvi;\nll gcd(ll a,ll b){ if(b==0) return a; else return gcd(b,a%b); }\n//constexpr double eps = 1e-14; \nconstexpr double eps = 1e-10; \nconstexpr ll mod = 1e9+7;\nconst int dx[]={1,0,-1,0} ,dy[] = {0,1,0,-1};\n/*}}}*/\n\nint M,T,P,R;\n\nclass Point{\n    public:\n        int ac,ti;\n        int idx;\n\n        bool operator<(const Point& p) const {\n            if(ac < p.ac) return true;\n            else if(ac == p.ac and ti > p.ti) return true;\n            return false;\n        }\n        bool operator==(const Point& p) const {\n            if(ac == p.ac and ti == p.ti) return true;\n            else return false;\n        }\n};\n\n\nvoid solve(){\n    vector<vector<int>> wa(T,vector<int>(P,0));\n    vector<vector<int>> ac(T,vector<int>(P,-1));\n    rep(i,R){\n        int m,t,p,j;\n        cin >> m >> t >> p >> j;\n        t--;\n        p--;\n        if(j==0){\n            ac[t][p] = m;\n        }else{\n            wa[t][p]++;\n        }\n    }\n\n    vector<Point> point;\n    for(int i=0;i<T;i++){\n        int po = 0;\n        int cnt = 0;\n        for(int j=0;j<P;j++){\n            if(ac[i][j] == -1) continue;\n            cnt++;\n            po += ac[i][j];\n            po += wa[i][j] * 20;\n        }\n        Point p;\n        p.ac = cnt;\n        p.ti = po;\n        p.idx = i;\n        point.push_back(p);\n    }\n    sort(all(point));\n    reverse(all(point));\n\n    int i=0;\n    while(i<T){\n        int j=i;\n        while(j<T and point[i] == point[j]){\n            j++;\n        }\n        for(int k=i;k<j;k++){\n            if(k==j-1){\n                cout << point[k].idx+1;\n                if(k==T-1) continue;\n                cout << \",\";\n            }else{\n                cout << point[k].idx+1 << \"=\";\n            }\n        }\n        i = j;\n    }\n    cout << endl;\n}\n\nint main(){\n    while(1){\n        cin >> M >> T >> P >> R;\n        if(M==0 and T==0 and P==0 and R==0) break;\n        solve();\n    }\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n \nusing namespace std;\ntypedef long long ll;\n \n#define rep(i, n) for(int i=0; i<(n); ++i)\n\nclass team {\npublic:\n    int id, solve, time, miss[11];\n    bool operator<(const team & rhs) const{\n        return solve < rhs.solve || (solve==rhs.solve && time > rhs.time) || id < rhs.id; \n    }  \n};\nint main(void){\n    int M, T, P, R;\n    int m, t, p, j;\n    team teams[51];\n    while(cin >> M >> T >> P >> R && M) {\n        rep(i, T) {\n            teams[i].id = i+1;\n            teams[i].solve = 0;\n            teams[i].time = 0;\n            rep(j, P) teams[i].miss[j] = 0;\n        }\n        rep(i, R) {\n            cin >> m >> t >> p >> j;\n            t--;\n            if(j == 0) {\n                teams[t].solve++;\n                teams[t].time += m + teams[t].miss[p] * 20;\n            } else {\n                teams[t].miss[p]++;\n            }\n        }\n        sort(teams, teams+T);\n        for(int i=T-1; i>0; --i) {\n            cout << teams[i].id;\n            if(teams[i].solve==teams[i-1].solve && teams[i].time==teams[i-1].time) {\n                cout << \"=\";\n            } else {\n                cout << \",\";\n            }\n        }\n        cout << teams[0].id << endl;\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<vector>\n#include<string.h>\n\nusing namespace std;\n\nstruct TeamData{\n\tint cn;\n\tint pnp;\n\tint pn[10];\n};\n\nstruct ansData{\n\tint tn;\n\tint same;\n};\n\nvector<vector<ansData> > ans;\n\nint main(){\n\twhile(1){\n\t\tint M,T,P,R;\n\t\tcin >> M >> T >> P >> R;\n\t\tif(M+T+P+R == 0) break;\n\t\tTeamData td[50];\n\t\t\n\t\tmemset(td,0,sizeof(td));\n\t\t\n\t\tfor(int i = 0;i < R;i++){\n\t\t\tint m,t,p,j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tif(j == 0){\n\t\t\t\ttd[t - 1].cn++;\n\t\t\t\ttd[t - 1].pnp += td[t - 1].pn[p - 1] * 20 + m;\n\t\t\t}else{\n\t\t\t\ttd[t - 1].pn[p - 1]++;\n\t\t\t}\n\t\t}\n\t\t\n\t\t\n\t\tint index[50];\n\t\tfor(int i = 0;i < 50;i++) index[i] = i;\n\t\t\n\t\tfor(int i = 0;i < T;i++){\n\t\t\tint now = index[i];\n\t\t\tfor(int j = T-1;j > i;j--){\n\t\t\t\tint target = index[j];\n\t\t\t\tif(td[now].cn < td[target].cn){\n\t\t\t\t\tindex[i] = target;\n\t\t\t\t\tindex[j] = now;\n\t\t\t\t\tnow = target;\n\t\t\t\t}else if(td[now].cn == td[target].cn){\n\t\t\t\t\tif(td[now].pnp > td[target].pnp){\n\t\t\t\t\t\tindex[i] = target;\n\t\t\t\t\t\tindex[j] = now;\n\t\t\t\t\t\tnow = target;\n\t\t\t\t\t}else if(td[now].pnp == td[target].pnp){\n\t\t\t\t\t\tif(now < target){\n\t\t\t\t\t\t\tindex[i] = target;\n\t\t\t\t\t\t\tindex[j] = now;\n\t\t\t\t\t\t\tnow = target;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvector<ansData> tans;\n\t\t\n\t\tfor(int i=0;i<T;i++){\n\t\t\tansData ad;\n\t\t\tad.tn = index[i]+1;\n\t\t\tif(i == 0){\n\t\t\t\tad.same = 0;\n\t\t\t}else{\n\t\t\t\tif((td[index[i]].cn == td[index[i-1]].cn) && (td[index[i]].pnp == td[index[i-1]].pnp)){\n\t\t\t\t\tad.same = 1;\n\t\t\t\t}else ad.same = 0;\n\t\t\t}\n\t\t\tcout << ad.same;\n\t\t\ttans.push_back(ad);\n\t\t}\n\t\tcout << endl;\n\t\tans.push_back(tans);\n\t}\n\tfor(int i = 0;i < ans.size();i++){\n\t\tfor(int j = 0;j < ans[i].size();j++){\n\t\t\tif(j == 0){\n\t\t\t\tcout << ans[i][j].tn;\n\t\t\t}else{\n\t\t\t\tif(ans[i][j].same == 0){\n\t\t\t\t\tcout << \",\" << ans[i][j].tn;\n\t\t\t\t}else{\n\t\t\t\t\tcout << \"=\" << ans[i][j].tn;\n\t\t\t\t}\n\t\t\t}\n\t\t}cout << endl;\n\t}\n\t\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <queue>\n#include <utility>\n#include <algorithm>\n\n// 必要な情報\n// AC済みかどうか\n// ペナルティは何分か\nusing namespace std;\n\nusing pr = pair<long, int>; // first: pts, second: team number;\n\nint penalty[50][10]; // [team][problem number]\n// long time[50][10]; // [team][consumed time]\npr pts[50];\npriority_queue<int> list;\nint m, t, p, r;\n\nint printout(int n, long pre) {\n\tif (n < t && pre == pts[n].first) {\n\t\tlist.push(pts[n].second);\n\t\treturn printout(n+1, pre);\n\t} else {\n\t\tint size = list.size();\n\t\tif (size == 0) return 1;\n\t\twhile (true) {\n\t\t\tcout << list.top();\n\t\t\tlist.pop();\n\t\t\tif (list.empty()) break;\n\t\t\tcout << \"=\";\n\t\t}\n\t\treturn size;\n\t}\n\n\tcout << \"ERR\" << endl;\n\treturn 0;\n}\n\nint main() {\n\twhile (true) {\n\t\tcin >> m >> t >> p >> r;\n\t\tif (m == 0 && t == 0 && p == 0 && r == 0) break;\n\n\t\tfor (int i = 0; i < t; ++i) {\n\t\t\tpts[i].second = i+1;\n\t\t\tpts[i].first = 0;\n\t\t\tfor (int j = 0; j < p; ++j)\n\t\t\t\tpenalty[i][j] = 0;\n\t\t}\n\t\tfor (int i = 0; i < r; ++i) {\n\t\t\tint a, b, c, d;\n\t\t\tcin >> a >> b >> c >> d;\n\t\t\tif (d == 0) {\n\t\t\t\tpts[b-1].first += -10000 + a + penalty[b-1][c-1];\n\t\t\t} else {\n\t\t\t\tpenalty[b-1][c-1] += 20;\n\t\t\t}\n\t\t}\n\n\t\tsort(pts, pts + t);\n\t\tint i = 0;\n\t\twhile (true) {\n\t\t\ti += printout(i, pts[i].first);\n\t\t\tif (i >= t)\n\t\t\t\tbreak;\n\t\t\tcout << \",\";\n\t\t}\n\t\tcout << endl;\n\t}\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define REP(i,n) for(int i=0; i<(int)(n); ++i)\n\nusing namespace std;\n\nstruct Team{\n    int solve;\n    int time;\n    int id;\n    vector<int> wa;\n    vector<bool> solved;\n    Team(int P){\n        solve = time = 0;\n        solved.resize(P);\n        wa.resize(P);\n    }\n    bool operator < (const Team& t) const {\n        if(solve != t.solve) return solve > t.solve;\n        if(time != t.time)  return time < t.time;\n        return id > t.id;\n    }\n};\n\nint main(){\n    int M, T, P, R;\n    while(cin >> M >> T >> P >> R) {\n        vector<Team> teams(T, Team(P));\n        REP(i, T) teams[i].id = i + 1;\n\n        REP(i, R) {\n            int m, t, p, j;\n            cin >> m >> t >> p >> j;\n            t--;\n            p--;\n            if(j == 0) {\n                if(teams[t].solved[p]) continue;\n                teams[t].solved[p] = true;\n                teams[t].time += 20 * teams[t].wa[p] + m;\n                teams[t].solve += 1;\n            } else {\n                teams[t].wa[p] += 1;\n            }\n        }\n\n        sort(teams.begin(), teams.end());\n\n        for(int i = 0; i < T; i++) {\n            if(i > 0) {\n                if(teams[i - 1].solve == teams[i].solve && teams[i - 1].time == teams[i].time) {\n                    cout << \"=\";\n                } else {\n                    cout << \",\";\n                }\n            }\n            cout << teams[i].id;\n        }\n        cout << endl;\n    }\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define REP(a,b,c) for(int a=b; a<(int)c; a++)\n#define REPE(a,b,c) for(int a=b; a<=(int)c; a++)\n#define REPD(a,b,c) for(int a=b; a>(int)c; a--)\n#define rep(a,b) REP(a,0,b)\n#define repd(a,b) REPD(a,b,0)\nclass _datas{\npublic:\n  int m;\n  int t;\n  int p;\n  int j;\n};\nclass _score{\npublic:\n  int p;\n  int t;\n  _score(int p, int t){\n    this->p = p;\n    this->t = t;\n  }\n};\ntypedef long long int ll;\nusing namespace std;\n\n  \n\nint main(){\n  while(true){\n    int M,T,P,R;\n    cin >> M >> T >> P >> R;\n    if(M == 0) break;\n    vector<_datas> datas(R);\n    rep(i,R) cin >> datas[i].m >> datas[i].t >> datas[i].p >> datas[i].j;\n    //rep(i,R) cout << datas[i].m << \" \"<< datas[i].t << \" \"<< datas[i].p << \" \"<< datas[i].j << \" \" << endl;\n    vector<_score> scores(T+1,_score(0,0));\n    REPE(i,1,T){\n      vector<int> miss_cnt(P+1,0);\n      rep(j,R){\n        _datas data = datas[j];\n        if(data.t == i){\n          if(data.j == 0){\n            scores[i].p++;\n            scores[i].t += data.m + miss_cnt[data.p]*20;\n          }else{\n            miss_cnt[data.p]++;\n          }\n        }\n      }\n    }\n    /*cout << \"score\" << endl;\n    REPE(i,1,T){\n      cout<<i<<\":\" << scores[i].p << \" \" << scores[i].t << endl;\n      }*/\n    _score b_score = _score(0,0);\n    REPE(i,1,T){\n      int max_idx = 1;\n      REPE(j,2,T){\n        if(scores[j].p > scores[max_idx].p || (scores[j].p==scores[max_idx].p && scores[j].t <= scores[max_idx].t)){\n          max_idx = j;\n        }\n      }\n      if(i != 1){\n        if(b_score.p == scores[max_idx].p && b_score.t==scores[max_idx].t) cout << \"=\";\n        else cout << \",\";\n      }\n      cout << max_idx;\n      b_score = scores[max_idx];\n      scores[max_idx] = _score(-1,0);\n    }\n    cout << endl;\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n#include <cstdio>\n\n#define REP(i,n) for( int i = 0; i < n; i++ )\n\n\nusing namespace std;\n\n/*\n より多くの問題に正解したチームを上位とする．\n 正解した問題数が同じ場合は，所要時間合計の少ないチームを上位とする．\n 複数のチームが同数の問題に正解し，所要時間合計も同じなら，それらのチームを同順位とする．\n */\n\nstruct team{\n\tint ans,time,name;\n    int q[50];\n    \n\tteam() : ans(0), time(0), name(0) {}\n    \n    bool operator <( const team& Right )const {\n        return  ans != Right.ans ? ans < Right.ans :\n        time != Right.time ? time > Right.time :\n        name <  Right.name;\n    }\n};\n\n\nint main()\n{\n\tint M,T,P,R;\n\t// Mは，コンテストの始まりから終わりまでの時間である． Tは，チーム数である． Pは，問題数である． Rは，提出記録の数である\n\twhile( cin >> M >> T >> P >> R )\n\t{\n\t\tint m,t,p,k;\n\t\tvector<team> team_array(T+1);\n\t\tif( T == 0 ) return 0;\n\t\tfor( int i = 1; i <= T; i++)\n\t\t\tteam_array[i].name = i;\n\t\t// mkは，経過時間である． tkは，チーム番号である． pkは，問題番号である． jkは，判定結果を表す（0なら正解，0以外なら不正解）\n\t\tREP(i,R)\n\t\t{\n\t\t\tcin >> m >> t >> p >> k;\n\t\t\tteam &tm = team_array[t];\n\t\t\tif( !k ){\n\t\t\t\ttm.ans++;\n\t\t\t\ttm.time += m;\n                if( tm.q[p] )\n                    tm.time += 20 * tm.q[p];\n\t\t\t}\n            else{\n                tm.q[p]++;\n            }\n            \n\t\t}\n\t\t\n        sort( team_array.begin() + 1 , team_array.end() );\n\t\t\n        for( int i = T; i > 0; i-- )\n        {\n            char c;\n            if( i == 1 ){\n                cout << team_array[i].name << endl;\n                continue;\n            }\n            else if ( team_array[i].ans == team_array[i-1].ans &&\n                team_array[i].time == team_array[i-1].time) {\n                c = '=';\n            }\n            else{\n                c = ',';\n            }\n\t\t\tcout << team_array[i].name << c;\n        }\n        \n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\nvector<vector<int>> v;\nvector<vector<int>> miss;\nvector<vector<int>> score;\nvector<vector<pair<int,int>>> rk;\n\nvoid solve(int m,int t,int p,int r){\n    int in;\n    v=vector<vector<int>>(r,vector<int>(4,0));\n    miss=vector<vector<int>>(t,vector<int>(p,0));\n    score=vector<vector<int>>(t,vector<int>(2,0));\n    rk=vector<vector<pair<int,int>>>(p+1,vector<pair<int,int>>(0));\n    for(int i=0;i<r;i++){\n        for(int j=0;j<4;j++){\n            cin>>in;\n            v[i][j]=in;\n        }\n    }\n    for(int i=0;i<r;i++){\n        if(v[i][3])miss[v[i][1]-1][v[i][2]-1]++;\n        else {\n            score[v[i][1]-1][0]++;\n            score[v[i][1]-1][1]=v[i][0]+miss[v[i][1]-1][v[i][2]-1]*20;\n        }\n    }\n    for(int i=t-1;i>=0;i--){\n        rk[score[i][0]].push_back(make_pair(i,score[i][1]));\n    }\n    for(int i=p;i>=0;i--){\n        int maxx=-1;\n        for(int j=0;j<rk[i].size();j++){\n            maxx=max(maxx,rk[i][j].second);\n        }\n        bool sw=false;\n        for(int j=0;j<=maxx;j++){\n            bool swc=false;\n            for(int k=0;k<rk[i].size();k++){\n                if(rk[i][k].second==j){\n                    if(swc)cout<<\"=\"<<rk[i][k].first+1;\n                    else {\n                        if(sw)cout<<\",\"<<rk[i][k].first+1;\n                        else{\n                            cout<<rk[i][k].first+1;\n                            sw=true;\n                        }\n                    }\n                    swc=true;\n                }\n            }\n        }\n        if(i&&sw)cout<<\",\";\n    }\n    cout<<endl;\n}\n\n\nint main(void){\n    ios::sync_with_stdio(false);\n    int a,b,c,d;\n    while(cin>>a>>b>>c>>d,a){\n        solve(a,b,c,d);\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\nusing namespace std;\n#define rep(i,n) for(int i = 0; i < n; ++i)\n\nclass Team{\npublic:\n    int time;\n    int tnum;\n    int ans;\n    Team(){ time=tnum=ans=0; }\n};\n\nbool cmp(Team &a,Team &b){\n    if(b.ans<a.ans){\n        return true;\n    } else if(b.ans==a.ans){\n        if(b.time>a.time){\n            return true;\n        } else if(b.time==a.time){\n            if(a.tnum>b.tnum){\n                return true;\n            }\n        }\n    }\n    return false;\n}\n\nbool eql(Team &a,Team &b){\n    return (b.ans==a.ans && b.time==a.time);\n}\n\nint main(){\n    while(1){\n        int M,T,P,R;\n        cin>>M>>T>>P>>R;\n        if(M==0){\n            break;\n        }\n        int miss[T][P];\n        Team ts[T];\n\n        rep(i,T){\n            rep(j,P){\n                miss[i][j]=0;\n            }\n        }\n\n        rep(k,T){\n            ts[k].tnum=k+1;\n        }\n\n        rep(i,R){\n            int m,t,p,j;\n            cin>>m>>t>>p>>j;\n            if(j==0){\n                ts[t-1].ans++;\n                ts[t-1].time+=m+miss[t-1][p-1]*20;\n            }\n            else\n            {\n                miss[t-1][p-1]++;\n            }\n        }\n\n        sort(&ts[0],&ts[T],cmp);\n        rep(i,T){\n            if(i>=1){\n                if(eql(ts[i-1],ts[i])){\n                    cout<<\"=\";\n                }\n                else{\n                    cout<<\",\";\n                }\n            }\n            cout<<ts[i].tnum;\n        }\n        cout<<endl;\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nint main() {\n  for(int M, T, P, R; cin >> M >> T >> P >> R && (M|T|P|R);) {\n    vector<int> ac(T, 0), wa(T, 0), ti(T, 0);\n    for(int i = 0; i < R; ++i) {\n      int m, t, p, j;\n      cin >> m >> t >> p >> j;\n      if(j) {\n        ++wa[t-1];\n      } else {\n        ++ac[t-1];\n        ti[t-1] += m + wa[t-1] * 20;\n      }\n    }\n    vector<vector<int> > v;\n    for(int i = 0; i < T; ++i) {\n      vector<int> u(3);\n      u[0] = ac[i];\n      u[1] = -ti[i];\n      u[2] = i+1;\n      v.push_back(u);\n    }\n    sort(v.begin(), v.end(), greater<vector<int> >());\n    for(int i = 0; i < v.size(); ++i) {\n      if(i) {\n        cout << (v[i-1][0] == v[i][0] && v[i-1][1] == v[i][1] ? '=' : ',');\n      }\n      cout << v[i][2];\n    }\n    cout << endl;\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "\n\tint M, T, P, R;\n\tcin >> M >> T >> P >> R;\n\n\tvector<Team> teams(T, Team(P));\n\n\tfor (int i = 0; i < T; ++i) {\n\t\tteams[i].num = i + 1;\n\t}\n\n\tfor (int i = 0; i < R; ++i) {\n\t\tint m, t, p, j;\n\t\tcin >> m >> t >> p >> j;\n\n\t\t// judge is incorrect.\n\t\tif (j != 0) {\n\t\t\tteams[t - 1].incorrects[p - 1]++;\n\t\t\tcontinue;\n\t\t}\n\n\t\t// judge is correct.\n\t\tteams[t - 1].corrects[p - 1] = 1;\n\n\t\tint time = m + teams[t - 1].incorrects[p - 1] * 20;\n\t\tteams[t - 1].time = time;\n\t}\n\n\tsort(teams.begin(), teams.end());\n\n\tint time = 0;\n\tfor (int i = 0; i < teams.size(); ++i) {\n\t\tauto&& t = teams[i];\n\t\t\n\t\tint c = count(t.corrects.begin(), t.corrects.end(), 1);\n\t\t\n\n\t\tif (i == teams.size() - 1) {\n\t\t\tcout << t.num << endl;\n\t\t\tbreak;\n\t\t}\n\n\t\tauto&& nt = teams[i + 1];\n\n\t\tint nc = count(nt.corrects.begin(), nt.corrects.end(), 1);\n\n\t\tif (c == nc && nt.time == t.time) {\n\t\t\tcout << t.num << '=';\n\t\t}\n\t\telse {\n\t\t\tcout << t.num << ',';\n\t\t}\n\t}"
  },
  {
    "language": "C++",
    "code": "#include \"iostream\"\n#include \"cstring\"\n#include \"vector\"\n#include \"algorithm\"\nusing namespace std;\ntypedef struct res\n{\n\tint solve;\n\tint time;\n\tint id;\n\n\tstatic bool comp(const res& l, const res& r)\n\t{\n\t\tif(l.solve!=r.solve) return l.solve>r.solve;\n\t\tif(l.time!=r.time) return l.time<r.time;\n\t\treturn l.id>r.id;\n\t}\n}res;\n\n\nint main(void)\n{\n\tint M,T,P,R;\n\twhile (cin>>M>>T>>P>>R,M) {\n\t\tint penalty[M][P];\n\t\tmemset(penalty,0,sizeof(penalty));\n\t\tres result[T];\n\t\tfor (int i = 0; i < T; i++) {\n\t\t\tresult[i].solve=0;\n\t\t\tresult[i].time=0;\n\t\t\tresult[i].id=i+1;\n\t\t}\n\t\tfor (int i = 0; i < R; i++) {\n\t\t\tint m,t,p,r;\n\t\t\tcin>>m>>t>>p>>r;\n\t\t\tif(!r)\n\t\t\t{\n\t\t\t\tresult[t-1].solve+=1;\n\t\t\t\tresult[t-1].time+=m+20*penalty[t-1][p-1];\n\t\t\t}\n\t\t\telse penalty[t-1][p-1]++;\n\t\t}\n\t\tsort(result,result+T,res::comp);\n\t\tfor (int i = 0; i < T; i++) {\n\t\t\tif(i!=0)\n\t\t\t{\n\t\t\t\tif(result[i-1].solve==result[i].solve&&result[i-1].time==result[i].time)\n\t\t\t\t{\n\t\t\t\t\tcout<<\"=\";\n\t\t\t\t}\n\t\t\t\telse cout<<\",\";\n\t\t\t}\n\t\t\tcout<<result[i].id;\n\t\t}\n\n\t\tcout<<endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\nusing namespace std;\n\nclass team{\npublic:\n\tint num, ans, time;\n\tteam(int n){\n\t\tnum = n;\n\t\tans = time = 0;\n\t}\n\tbool operator<(const team &t2)const{\n\t\tif (ans != t2.ans)\n\t\t\treturn ans > t2.ans;\n\t\telse if (time != t2.time)\n\t\t\treturn time < t2.time;\n\t\telse\n\t\t\treturn num > t2.num;\n\t}\n};\n\nint main()\n{\n\tint M, T, P, R, m[2001], t[2001], p[2001], r[2001], before;\n\twhile (cin >> M >> T >> P >> R, (M || T || P || R)){\n\t\tvector<team> v;\n\t\tvector<team>::iterator pv;\n\t\t//入力\n\t\tfor (int i = 0; i < R; i++){\n\t\t\tcin >> m[i] >> t[i] >> p[i] >> r[i];\n\t\t}\n\n\t\t//各チームの時間\n\t\tfor (int i = 1; i <= T; i++){\n\t\t\tteam te = team(i);\n\t\t\tfor (int j = 0; j < R; j++){\n\t\t\t\t//正解時間の計算\n\t\t\t\tif (t[j] == i && r[j] == 0){\n\t\t\t\t\tte.time += m[j];\n\t\t\t\t\tte.ans++;\n\t\t\t\t\t//以前のペナルティを計算\n\t\t\t\t\tfor (int k = 0; k < j; k++){\n\t\t\t\t\t\tif (t[k] == i && p[k] == p[j]){\n\t\t\t\t\t\t\tte.time += 20;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tv.push_back(te);\n\t\t}\n\n\t\t//ソート\n\t\tsort(v.begin(), v.end());\n\t\tpv = v.begin();\n\t\tbefore = -1;\n\t\twhile (pv != v.end()){\n\t\t\tif (before == pv->time)\n\t\t\t\tcout << \"=\" << pv->num;\n\t\t\telse {\n\t\t\t\tif (pv == v.begin())\n\t\t\t\t\tcout << pv->num;\n\t\t\t\telse\n\t\t\t\t\tcout << \",\" << pv->num;\n\t\t\t\tbefore = pv->time;\n\t\t\t}\n\t\t\tpv++;\n\t\t}\n\t\tcout << endl;\n\t\tv.~vector();\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\ntypedef tuple<int,int,int> Team;\nint AC[50][10],WA[50][10];\nint main() {\n    int  M,T,P,R;\n    while(cin>>M>>T>>P>>R,M) {\n        memset(AC,-1,sizeof(AC));\n        memset(WA,0,sizeof(WA));\n        for(int i=0;i<R;i++) {\n            int m,t,p,j;\n            cin>>m>>t>>p>>j;\n            t--;p--;\n            if(j==0) {\n                AC[t][p]=m;\n            }else {\n                WA[t][p]++;\n            }\n        }\n        vector<Team> v;\n        for(int i=0;i<T;i++) {\n            int solved=0,penalty=0;\n            for(int j=0;j<P;j++) {\n                if(AC[i][j]!=-1) solved++,penalty+=AC[i][j]+WA[i][j]*20;\n            }\n            v.push_back(make_tuple(-solved,penalty,-(i+1)));\n        }\n        sort(v.begin(),v.end());\n        printf(\"%d\",-get<2>(v[0]));\n        for(int i=1;i<v.size();i++) {\n            if(get<0>(v[i-1])<get<0>(v[i])||get<1>(v[i-1])<get<1>(v[i])) putchar(',');\n            else putchar('=');\n            printf(\"%d\",-get<2>(v[i]));\n        }\n        putchar('\\n');\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n\nusing namespace std;\n\n#define rep(i, n) for (int i = 0; i < n; ++i)\n\nstruct Team {\n  Team() { ac = pe = 0; rep(i, 10) p[i] = 0; }\n  int ac, pe, num, p[10];\n  bool operator<(Team t) {\n    if (ac != t.ac) return ac > t.ac;\n    if (pe != t.pe) return pe < t.pe;\n    return num > t.num;\n  }\n  bool operator==(Team t) {\n    if (ac != t.ac) return false;\n    if (pe != t.pe) return false;\n    return true;\n  }\n};\n\nint main() {\n  while (true) {\n    int M, T, P, R;\n    cin >> M >> T >> P >> R;\n    if (M == 0) break;\n    Team team[T];\n    rep(i, T) team[i].num = i + 1;\n    rep(_, R) {\n      int m, t, p, j;\n      cin >> m >> t >> p >> j;\n      --t;\n      --p;\n      if (j == 0) {\n        ++team[t].ac;\n        team[t].pe += team[t].p[p] * 20 + m;\n      } else {\n        ++team[t].p[p];\n      }\n    }\n    sort(team, team + T);\n    rep(i, T) {\n      if (i != 0) {\n        cout << (team[i] == team[i - 1] ? '=' : ',');\n      }\n      cout << team[i].num;\n    }\n    cout << endl;\n  }\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <stdio.h>\n#include<algorithm>\n#include<iostream>\n#include<string.h>\nusing namespace std;\ntypedef pair<int,int> P;\ntypedef pair<int,pair<int,int> > L;\nint main(void) {\n  P team[55][12];\n  L mama[55];\n  int M, T, Q, R;\n  int m, t, p, j;\n  while(1){\n    memset(team,0,sizeof(team));\n    memset(mama,0,sizeof(mama));\n    scanf(\"%d %d %d %d\", &M, &T, &Q, &R);\n    if(M==0 & T==0) break;\n    for ( int i = 0; i < R; i++ ) {\n      scanf(\"%d%d%d%d\",&m,&t,&p,&j);\n      t--;\n      if(j==0) team[t][p]=P(m+team[t][p].first,1);\n      else team[t][p]=P(20+team[t][p].first,0);\n    }\n\n    for(int i=0;i<T;i++){\n      for(int l=1;l<=Q;l++){\n        if(team[i][l].second==1){\n          mama[i].first--;\n          mama[i].second.first+=team[i][l].first;\n        }\n      }\n\n      mama[i].second.second= -i;\n    }\n\n    sort(mama,mama+T);\n\n//    for(int i=0;i<T;i++) cout << \"first :\" << mama[i].first << \"second.first :\" << mama[i].second.first << \"second.second :\" << mama[i].second.second << endl;\n\n    for(int i=0;i<T;i++){\n    if(i==T-1) {\n      printf(\"%d\\n\",-mama[i].second.second+1);\n      break;\n    }\n    if(mama[i].first==mama[i+1].first && mama[i].second.first == mama[i+1].second.first){\n      printf(\"%d=\",-mama[i].second.second+1);\n    }\n    else  printf(\"%d,\",-mama[i].second.second+1);\n    }\n    printf(\"\\n\");\n  }\n\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define For(i, a, b) for(int (i)=(int)(a); (i)<(int)(b); ++(i))\n#define rFor(i, a, b) for(int (i)=(int)(a)-1; (i)>=(int)(b); --(i))\n#define rep(i, n) For((i), 0, (n))\n#define rrep(i, n) rFor((i), (n), 0)\n#define fi first\n#define se second\nusing namespace std;\ntypedef long long lint;\ntypedef unsigned long long ulint;\ntypedef pair<int, int> pii;\ntypedef pair<int, lint> pil;\ntypedef pair<lint, lint> pll;\ntemplate<class T>bool chmax(T &a, const T &b){if(a<b){a=b; return true;} return false;}\ntemplate<class T>bool chmin(T &a, const T &b){if(a>b){a=b; return true;} return false;}\n\nconstexpr lint mod = 1e9+7;\nconstexpr lint INF = mod*mod;\nconstexpr int MAX = 100010;\n\nint main(){\n    int M, T, P, R;\n    while(scanf(\"%d%d%d%d\", &M, &T, &P, &R) && M){\n        int time[T][P], sum[T], num[T];\n        rep(i, T){\n            sum[i] = num[i] = 0;\n            rep(j, P) time[i][j] = 0;\n        }\n        rep(_, R){\n            int m, t, p, j;\n            scanf(\"%d%d%d%d\", &m, &t, &p, &j);\n            --t; --p;\n            if(!j){\n                sum[t] += time[t][p] + m;\n                ++num[t];\n            }\n            else time[t][p] += 20;\n        }\n        int ans[T];\n        rep(i, T) ans[i] = i;\n        auto cmp = [&](const int &a, const int &b){\n            if(num[a] == num[b]) return sum[a] == sum[b] ? a > b : sum[a] < sum[b];\n            return num[a] > num[b];\n        };\n        sort(ans, ans+T, cmp);\n        string s;\n        int l = 0;\n        while(l < T){\n            int r = l;\n            if(!s.empty()) s += \",\";\n            while(r < T && num[ans[l]]==num[ans[r]] && sum[ans[l]]==sum[ans[r]]){\n                if(l != r) s += \"=\";\n                s += to_string(ans[r]+1);\n                ++r;\n            }\n            l = r;\n        }\n        cout << s << \"\\n\";\n    }\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nbool func() {\n    int M, T, P, R;\n    typedef struct{\n        int m;\n        int t;\n        int p;\n        int j;\n    } Data;\n    vector<Data> datas;\n\n    typedef struct {\n        int id;\n        int solve;\n        int time;\n        vector<int> pena; \n    } Team;\n    vector<Team> teams;\n\n    cin >> M >> T >> P >> R;\n    if(M==0 && T==0 && P==0 && R==0) return true;\n\n    for(int i=0; i<T; i++) {\n        vector<int> tmpvec(P, 0);\n        Team t = {i+1, 0, 0, tmpvec};\n        teams.push_back(t);\n    }\n\n    for(int i=0; i<R; i++) {\n        int m, t, p, j;\n        cin >> m >> t >> p >> j;\n        Team team = teams[t-1];\n        if(j==0) {\n            team.solve += 1;\n            team.time += team.pena[p-1] * 20 + m;\n        } else {\n            team.pena[p-1] += 1;\n        }\n        teams[t-1] = team;\n    }\n    sort(teams.begin(), teams.end(), [](const Team& a, const Team& b){\n        if(a.solve == b.solve && a.time == b.time) return a.id > b.id;\n        else if(a.solve == b.solve) return a.time < b.time;\n        else return a.solve > b.solve;\n    }); \n\n    vector<int> tmpvec;\n    Team pre = {-1, -1, -1, tmpvec};\n    char delimiter = ',';\n    for(Team t: teams) {\n        if(pre.solve!=-1) {\n            if(pre.solve==t.solve && pre.time==t.time) delimiter = '=';\n            else delimiter = ',';\n            printf(\"%c\", delimiter);\n        }\n        pre = t;\n        printf(\"%d\", t.id);\n    }\n    printf(\"\\n\");\n    return false;\n}\n\nint main() {\n    bool flag = false;\n    while(!flag) {\n        flag = func();\n    }\n    return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include<stdio.h>\n#include<algorithm>\nusing namespace std;\npair<pair<int,int> ,int >wolf[50];\nint tt[50][10];\nint wa[50][10];\nint main(){\n\tint a,b,c,d;\n\twhile(scanf(\"%d%d%d%d\",&a,&b,&c,&d),a){\n\t\tfor(int i=0;i<50;i++)\n\t\t\tfor(int j=0;j<10;j++)\n\t\t\t\t{tt[i][j]=-1;wa[i][j]=0;}\n\t\t\n\t\tfor(int i=0;i<d;i++){\n\t\t\tint p,q,r,s;\n\t\t\tscanf(\"%d%d%d%d\",&p,&q,&r,&s);\n\t\t\tq--;\n\t\t\tr--;\n\t\t\tif(s)wa[q][r]++;\n\t\t\telse tt[q][r]=p;\n\t\t}\n\t\tfor(int i=0;i<b;i++){\n\t\t\tint n=0;\n\t\t\tint t=0;\n\t\t\tfor(int j=0;j<c;j++){\n\t\t\t\tif(~tt[i][j]){\n\t\t\t\t\tn++;\n\t\t\t\t\tt+=tt[i][j]+wa[i][j]*20;\n\t\t\t\t}\n\t\t\t}\n\t\t\twolf[i]=make_pair(make_pair(-n,t),-i);\n\t\t}\n\t\tstd::sort(wolf,wolf+b);\n\t\tprintf(\"%d\",-wolf[0].second+1);\n\t\tfor(int i=1;i<b;i++){\n\t\t\tif(wolf[i].first.first==wolf[i-1].first.first&&wolf[i].first.second==wolf[i-1].first.second)printf(\"=\");\n\t\t\telse printf(\",\");\n\t\t\tprintf(\"%d\",-wolf[i].second+1);\n\t\t}printf(\"\\n\");\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstdio>\n#include<string>\n#include<queue>\n#include<stack>\n#include<cstdlib>\n#include<algorithm>\n#include<cmath>\n\n#define rep(n,cnt) for(int cnt=0;cnt<n;++cnt)\n\nusing namespace std;\n\ntemplate <typename TYPE>\nvoid printArray(TYPE* array, int size){\n  rep(size,i) cout << array[i] << \"\\t\" << flush;\n  cout << endl;\n}\n\nint StringToInt(string str){\n  return atoi(str.c_str());\n}\n\ndouble factorial(double n){\n  double sum=1;\n  for(int i=n;i>=1;i--){\n    sum = i*sum;\n  }\n  return sum;\n}\n\ndouble combination(double n, double k){\n  double denominator = 1;\n  for(int i=n,j=0;j<k;j++,i--) denominator*=i;\n  return denominator/factorial(k);\n}\n\n#define MAX_M 300\n#define MAX_T 50\n#define MAX_P 10\n#define MAX_R 2000\n\nclass Team{\npublic:\n    int num;\n    int collect;\n    int time;\n    int wa[MAX_P];\n};\n\nint M,T,P,R;\nint m[MAX_R],t[MAX_R],p[MAX_R],j[MAX_R];\nTeam team[MAX_T];\n\nint main(){\n    while(1){\n\tcin >> M;\n\tcin >> T;\n\tcin >> P;\n\tcin >> R;\n\tif(M == 0 && T == 0 && P == 0 && R == 0) return 0;\t\n        \n\trep(T,i){\n\t    team[i].num = i+1;\n\t    team[i].collect = 0;\n            team[i].time = 0;\n\t    rep(5,j){\n\t\tteam[i].wa[j] = 0;\n\t    }\n\t}\n\n\trep(R,i){\n            cin >> m[i];\n\t    cin >> t[i];\n\t    cin >> p[i];\n\t    cin >> j[i];\n\t}\t\n        \n\trep(R,i){\n            if(j[i] == 0){\n\t\tteam[t[i]-1].collect++;\n\t\tteam[t[i]-1].time += m[i] + team[t[i]-1].wa[p[i]-1];\n\t    }\n\t    else{\n\t\tteam[t[i]-1].wa[p[i]-1] += 20;\n\t    }\n\t}\n\n        for(int i=0;i<T;i++){\n\t    for(int j=T-1;j>=i;j--){\n\t\tif(team[i].num < team[j].num){\n\t\t    Team buf = team[i];\n                    team[i] = team[j];\n\t\t    team[j] = buf;\n\t\t}\n\t    }\n\t}\n\n\tfor(int i=0;i<T;i++){\n\t    for(int j=T-1;j>=i;j--){\n\t\tif(team[i].collect < team[j].collect){\n\t\t    Team buf = team[i];\n                    team[i] = team[j];\n\t\t    team[j] = buf;\n\t\t}\n\t    }\n\t}\n\n\tfor(int i=0;i<T;i++){\n\t    for(int j=T-1;j>=i;j--){\n\t\tif(team[i].collect == team[j].collect && team[i].time > team[j].time){\n\t\t    Team buf = team[i];\n                    team[i] = team[j];\n\t\t    team[j] = buf;\n\t\t}\n\t    }\n\t}\n\n\tfor(int i=0;i<T;i++){\n\t    for(int j=T-1;j>=i;j--){\n\t\tif(team[i].time == team[j].time && team[i].collect == team[j].collect && team[i].num < team[j].num){\n\t\t    Team buf = team[i];\n                    team[i] = team[j];\n\t\t    team[j] = buf;\n\t\t}\n\t    }\n\t}\n\n\tcout << team[0].num;\n\tfor(int i=1;i<T;i++){\n            if(team[i].collect == team[i-1].collect && team[i].time == team[i-1].time){\n\t\tcout << \"=\" << team[i].num;\n\t    }\n\t    else{\n                cout << \",\" << team[i].num;\n\t    }\n\t}\n\tcout << endl;\n    }\n}\n    "
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define range(i,a,b) for(int i = (a); i < (b); i++)\n#define rep(i,b) for(int i = 0; i < (b); i++)\n#define all(a) (a).begin(), (a).end()\n#define debug(x) cout << \"debug \" << x << endl;\nconst int INF = 100000000;\nusing namespace std;\n\nint main(){\n    int m, t, p, r;\n    while(cin >> m >> t >> p >> r, m||t||p||r){\n        vector< pair<pair<int,int>,int> > v(51);\n        int miss_cnt[51][11] = {0};\n        rep(i,51) v[i].first.second= INF;\n        rep(i,51) v[i].second= i + 1;\n        rep(i,r){\n            int time, team, prob,jud;\n            cin >> time >> team >> prob >> jud;\n            team--; prob--;\n            if(jud == 0){\n                v[team].first.first++;\n                v[team].first.second -= time + miss_cnt[team][prob] * 20;\n            }else{\n                miss_cnt[team][prob]++;\n            }\n        }\n        sort(v.begin(), v.begin() + t, greater<pair<pair<int,int>,int>>());\n        rep(i,t){\n            if(i){\n                if(v[i - 1].first.first == v[i].first.first && v[i - 1].first.second == v[i].first.second){\n                    cout << '=';\n                }else{\n                    cout << ',';\n                }\n            }\n            cout << v[i].second;\n        }\n        cout << endl;\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstring>\nusing namespace std;\nint x[100][2], y[100][10], n, a, b, c, d, e, f, g, h, p;\nint main() {\n\twhile (true) {\n\t\tmemset(x, 0, sizeof(x));\n\t\tmemset(y, 0, sizeof(y));\n\t\tcin >> n >> a >> b >> c;\n\t\tif (n == 0) {\n\t\t\tbreak;\n\t\t}\n\t\tfor (int i = 0; i < c; i++) {\n\t\t\tcin >> d >> e >> f >> g;\n\t\t\tif (g) {\n\t\t\t\ty[e][f] += 20;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tx[e][1] += d + y[e][f];\n\t\t\t\tx[e][0]++;\n\t\t\t}\n\t\t}\n\t\tp = 0;\n\t\tfor (int i = 10; i >= 0; i--) {\n\t\t\tfor (int j = 0; j <= 1000; j++) {\n\t\t\t\th = 0;\n\t\t\t\tfor (int k = a; k > 0; k--) {\n\t\t\t\t\tif (x[k][0]==i && x[k][1]==j) {\n\t\t\t\t\t\tif (h >= 1) {\n\t\t\t\t\t\t\tcout << '=';\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (p >= 1) {\n\t\t\t\t\t\t\tcout << ',';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcout << k;\n\t\t\t\t\t\tp++;\n\t\t\t\t\t\th++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcout << endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include <stdio.h>\n#include <stdlib.h>\n#include <stdbool.h>\n\nint main(void){\n  int LM,LT,LP,LR;\n  int m, t, p, jg;\n  int accept[55][15], wrong[55][15];\n  int times[55], que[55], used[55];\n  int i, j, k, min, flag, maxque;\n\n  while(true){\n    scanf(\"%d%d%d%d\", &LM, &LT, &LP, &LR);\n    if(LM + LM + LP + LR == 0){ break; }\n\n    // テ・ツ按敕ヲツ慊淌・ツ個?\n    for(i = 0; i < 55; i++){\n      times[i] = que[i] = used[i] = 0;\n      for(j = 0; j < 15; j++){\n\twrong[i][j] = 0;\n      }\n    }\n    maxque = 0;\n\n    // テ・ツ青?・ツ?・テ・ツ環崚」ツつ津・ツ渉療」ツ?妥・ツ渉姪」ツつ?\n    for(i = 0; i < LR; i++){\n      scanf(\"%d%d%d%d\", &m, &t, &p, &jg);\n      // ifテヲツュツ」ティツァツ」\n      if(jg == 0){\n\ttimes[t] += m + 20 * wrong[t][p];\n\tque[t]++;\n\tif(maxque < que[t]){ maxque = que[t]; }\n      }\n      // ifテ、ツクツ催ヲツュツ」ティツァツ」\n      else{ wrong[t][p]++; }\n    }\n\n    // テ・ツ青?・ツ閉湘ゥツ。ツ古ヲツ閉ーテ」ツ?ョテ、ツクツュテ」ツ?ァ\n    for(i = maxque; i >= 0; i--){\n\n\n      for(j = 1; j <= LT; j++){\n\n\tmin = 1000000;\n\n\t// テヲツ慊?ゥツ?淌」ツつ津ヲツアツづ」ツつ?」ツつ?\n\tfor(k = 1; k <= LT; k++){\n\t  if(que[k] == i && used[k] == 0 && min > times[k]){\n\t    min = times[k];\n\t  }\n\n\t}\n\n\tif(min == 1000000){ break; }\n\n\t// テ・ツ?コテ・ツ環?\n\tflag = 0;\n\n\tfor(k = LT; k >= 1; k--){\n\n\n\t  if(times[k] == min && que[k] == i){\n\t    if(flag != 0) printf(\"=\");\n\t    else if(i != maxque || j != 1) printf(\",\");\n\n\t    printf(\"%d\", k);\n\t    flag = 1;\n\t    used[k] = 1;\n\t  }\n\t}\n\n\n\n      }\n    }\n    printf(\"\\n\");\n  }\n\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\nusing namespace std;\n\nint main()\n{\n\twhile(true){\n\t\tint M, T, P, R;\n\t\tcin >> M >> T >> P >> R;\n\n\t\tif(M==0 && T==0 && P==0 && R==0)\n\t\t\tbreak;\n\n\t\tint CP[50], TT[50], PT[50][10];\t\t// 正解数，時間計，ペナルティ\n\t\tfor(int i=0; i<T; i++){\n\t\t\tCP[i] = TT[i] = 0;\n\t\t\tfor(int j=0; j<P; j++)\n\t\t\t\tPT[i][j] = 0;\n\t\t}\n\n\t\tfor(int i=0; i<R; i++){\t\t\t\t// 各チームの正解数，時間計を求める\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >> j;\n\n\t\t\tif(j==0){\n\t\t\t\tCP[t-1]++;\n\t\t\t\tTT[t-1] += (m+PT[t-1][p-1]);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tPT[t-1][p-1] += 20;\n\t\t\t}\n\t\t}\n\n\t\tint tnow, tpre = -1;\t\t\t\t// 今のチーム，1つ前のチーム\n\t\tbool flg[50];\t\t\t\t\t// 処理済フラグ\n\t\tfor(int i=0; i<T; i++)\n\t\t\tflg[i] = false;\n\n\t\tfor(int i=0; i<T; i++){\n\t\t\ttnow = -1;\n\t\t\tfor(int j=0; j<T; j++){\t\t\t\t// 今のチームを求める\n\t\t\t\tif(flg[j])\n\t\t\t\t\tcontinue;\n\n\t\t\t\tif(tnow==-1){\n\t\t\t\t\ttnow = j;\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tif(CP[j]>CP[tnow] || (CP[j]==CP[tnow] && TT[j]<=TT[tnow])){\n\t\t\t\t\t\ttnow = j;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(tpre!=-1){\t\t\t\t\t\t\t// 出力\n\t\t\t\tif(CP[tnow]==CP[tpre] && TT[tnow]==TT[tpre])\n\t\t\t\t\tcout << '=';\n\t\t\t\telse\n\t\t\t\t\tcout << ',';\n\t\t\t}\n\t\t\tcout << tnow+1;\n\n\t\t\tflg[tnow] = true;\n\t\t\ttpre = tnow;\n\t\t}\n\t\tcout << endl;\n\t}\n\n\treturn 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <tuple>\n#include <algorithm>\n\ntypedef std::tuple<int, int, int, int> A;\ntypedef std::tuple<int, int, int> S;\nint main()\n{\n\twhile(true){\n\t\tint M, T, P, R;\n\t\tstd::cin >> M >> T >> P >> R;\n\t\tif ( M == 0 && T == 0 && P == 0 && R == 0 ) break;\n\n\t\tstd::vector<A> data;\n\t\tfor ( int i = 0;i < R; ++i ) {\n\t\t\tint m, t, p, j;\n\t\t\tstd::cin >> m >> t >> p >> j;\n\t\t\tdata.push_back(A(m, t, p, j));\n\t\t}\n\n\t\tstd::vector<S> team(T);\n\n\t\tfor ( int i = 0; i < team.size(); ++i ) {\n\t\t\tint ans = 0;\n\t\t\tint min = 0;\n\t\t\tint tn = i + 1;\n\n\t\t\tstd::vector<bool> pro(P, false);\n\n\t\t\tfor ( int j = data.size()-1; j >= 0; j-- ) {\n\t\t\t\tif ( std::get<1>(data[j]) != tn ) continue;\n\t\t\t\tif ( std::get<3>( data[j] ) == 0 && pro[std::get<2>( data[j] )] == false ) {\n\t\t\t\t\tans++;\n\t\t\t\t\tmin += std::get<0>(data[j]);\n\t\t\t\t\tpro[std::get<2>( data[j] )] = true;\n\t\t\t\t}\n\n\t\t\t\tif ( std::get<3>( data[j] ) != 0 && pro[std::get<2>( data[j] )] == true ) {\n\t\t\t\t\tmin += 20;\n\t\t\t\t}\n\t\t\t}\n\t\t\tstd::get<0>(team[i]) = ans;\n\t\t\tstd::get<1>(team[i]) = min;\n\t\t\tstd::get<2>(team[i]) = tn;\n\t\t}\n\n\t\tstd::sort(team.begin(), team.end(), [](const S& l, const S& r){ return std::get<2>(l) > std::get<2>(r); });\n\t\tstd::stable_sort(team.begin(), team.end(), [](const S& l, const S& r){ return std::get<1>(l) < std::get<1>(r); });\n\t\tstd::stable_sort(team.begin(), team.end(), [](const S& l, const S& r){ return std::get<0>(l) > std::get<0>(r); });\n\t\tstd::cout << std::get<2>(team[0]);\n\t\tfor ( int i  = 1; i < team.size(); ++i ) {\n\t\t\tif ( std::get<0>(team[i-1]) == std::get<0>(team[i]) && std::get<1>(team[i-1]) == std::get<1>(team[i]) ) {\n\t\t\t\tstd::cout << \"=\";\n\t\t\t} else {\n\t\t\t\tstd::cout << \",\";\n\t\t\t}\n\t\t\tstd::cout << std::get<2>(team[i]);\n\t\t}\n\t\tstd::cout << std::endl;\n\t}\n\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <map>\n\nusing namespace std;\n\nint main()\n{\n\twhile(1)\n\t{\n\t\tint m,t,p,r;\n\t\tcin >> m >> t >> p >> r;\n\t\tif(m==0&&t==0&&p==0&&r==0) break;\n\n\t\tvector < vector<int> > mt(t, vector<int>() );\n\t\tvector < vector<int> > pt(t, vector<int>() );\n\t\tvector < vector<int> > jt(t, vector<int>() );\n\n\t\tfor (int i=0;i<r;i++)\n\t\t{\n\t\t\tint M,T,P,J;\n\t\t\tcin >> M >> T >> P >> J;\n\t\t\tmt[T-1].push_back(M);\n\t\t\tpt[T-1].push_back(P);\n\t\t\tjt[T-1].push_back(J);\n\t\t}\n\t\t\n\t\tmultimap <int,int> rank;\n\n\t\tfor (int i=0;i<t;i++)\n\t\t{\n\t\t\tint SC=0,PT=0;\n\t\t\tvector <bool> solved(p);\n\t\t\tfor (int j=mt[i].size()-1;j>=0;j--)\n\t\t\t{\n\t\t\t\tif(!solved[pt[i][j]])\n\t\t\t\t{\n\t\t\t\t\tif(jt[i][j]==0)\n\t\t\t\t\t{\n\t\t\t\t\t\tsolved[pt[i][j]]=true;\n\t\t\t\t\t\tSC++;\n\t\t\t\t\t\tPT+=mt[i][j];\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tPT+=20;\n\t\t\t\t}\n\t\t\t}\n\t\t\tpair <int, int> PAIR;\n\t\t\tPAIR.first = (-(SC*50000)+PT)*5-i;\n\t\t\tPAIR.second = i;\n\t\t\trank.insert(PAIR);\n\t\t}\n\t\t\n\t\tfor (multimap<int, int>::iterator i=rank.begin();i!=(--rank.end());i++)\n\t\t{\n\t\t\tcout << i->second + 1 << ((((i->first)+(i->second))==(((++i)->first)+((i)->second)))?\"=\":\",\");\n\t\t\ti--;\n\t\t}\n\t\tcout << (--rank.end())->second + 1 << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<string>\nusing namespace std;\nint main(){\n\tint solved[51];\n\tint time[51][11];\n\tint team[51];\n\tint m,t,p,r;\n\twhile(true){\n\tcin>>m>>t>>p>>r;\n\tif(m==0&&t==0&&p==0&&r==0)\n\t\tbreak;\n\tfor(int i=0;i<t;i++){\n\t\tsolved[i]=0;\n\t\tfor(int j=0;j<p;j++)\n\t\t\ttime[i][j]=0;\n\t\tteam[i]=i+1;\n\t}\n\tfor(int i=0;i<r;i++){\n\t\tint a[4];\n\t\tfor(int j=0;j<4;j++)\n\t\t\tcin>>a[j];\n\t\tif(a[3]==0)\n\t\t\tsolved[a[1]-1]+=1000-time[a[1]-1][a[2]-1]-a[0];\n\t\telse\n\t\t\ttime[a[1]-1][a[2]-1]+=20;\n\t}\n\tfor(int i=0;i<t-1;i++){\n\t\tfor(int j=t-1;j>i;j--){\n\t\t\tif(solved[j]>solved[j-1]||(solved[j]==solved[j-1]&&team[j]>team[j-1])){\n\t\t\t\tint tmp=solved[j];\n\t\t\t\tsolved[j]=solved[j-1];\n\t\t\t\tsolved[j-1]=tmp;\n\t\t\t\ttmp=team[j];\n\t\t\t\tteam[j]=team[j-1];\n\t\t\t\tteam[j-1]=tmp;\n\t\t\t}\n\t\t}\n\t}\n\tcout<<team[0];\n\tfor(int i=1;i<t;i++){\n\t\tif(solved[i]==solved[i-1])\n\t\t\tcout<<\"=\";\n\t\telse\n\t\t\tcout<<\",\";\n\t\tcout<<team[i];\n\t}\n\tcout<<endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\ntypedef struct {\n  int ch[11];\n  int num;\n  int time;\n  int tnum;\n} lg;\nint M,T,R,P;\nvector<lg> team;\n\nbool asc(lg t1,lg t2);\n\nint main(){\n  int i,j,m,t,p;\n\n  for(i=0;i<51;i++){\n    lg x;\n    team.push_back(x);\n  }\n  while(1){\n    cin >> M >> T >> P >> R;\n    if(M==0&&T==0&&P==0&&R==0)break;\n    for(i=0;i<=T;i++){\n      team[i].num=0;\n      team[i].time=0;\n      team[i].tnum=i+1;\n      for(j=0;j<=P;j++)team[i].ch[j]=0;\n    }\n    for(i=0;i<R;i++){\n      cin >> m >> t >> p >> j;\n      if(j!=0)team[t-1].ch[p]++;\n      else{\n\tteam[t-1].time+=20*team[t-1].ch[p];\n\tteam[t-1].num++;\n\tteam[t-1].time+=m;\n      }\n    }\n\n    sort(team.begin(),team.begin()+T,asc);\n\n    for(i=0;i<T;i++){\n      if(i==0)cout << team[i].tnum;\n      else if(team[i-1].num==team[i].num&&team[i-1].time==team[i].time)cout << \"=\"<<team[i].tnum;\n      else cout << \",\"<<team[i].tnum;\n    }\n    cout << endl;\n  }\n  return 0;\n}\n\nbool asc(lg t1,lg t2){\n  if(t1.num>t2.num)return 1;\n  else if(t1.num==t2.num&&t1.time<t2.time)return 1;\n  else if(t1.num==t2.num&&t1.time==t2.time&&t1.tnum>t2.tnum)return 1;\n  else return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n#include <string>\n#include <vector>\n#include <cstdio>\n#include <cstdlib>\n#include <cmath>\n#include <set>\n#include <map>\n#include <queue>\n#include <stack>\n\nusing namespace std;\n\n#define INF 1010001000\n#define EPS 1e-10\n#define rep(i, N) for (int i = 0; i < N; i++)\n#define pb push_back\n\ntypedef pair<int, int> i_i;\ntypedef long long int llong;\ntypedef pair<llong, llong> ll_ll;\ntypedef struct edge {int f, t;}Edge;\ntypedef pair<int, pair<int, int> > Team;\ntypedef pair<int, pair<int, pair<int, int> > > input;\n\nint m, t, p, r;\n\nint main()\n{\n    while (cin >> m >> t >> p >> r, m) {\n        vector<Team > team(t);\n        vector<vector<int> > check(t, vector<int>(t, 0));\n        vector<input > data(r);\n        rep(i, t) {\n            team[i].second.second = i+1;\n            team[i].first = 0;\n            team[i].second.first = 0;\n        }\n        rep(i, r) {\n            cin >> data[i].first >> data[i].second.first\n                >> data[i].second.second.first \n                >> data[i].second.second.second;\n            data[i].first;\n            data[i].second.first--;\n            data[i].second.second.first--;\n            data[i].second.second.second;\n        }\n        sort(data.begin(), data.end());\n        rep(i, r) {\n            int a = data[i].first, b = data[i].second.first, \n                c = data[i].second.second.first, \n                d = data[i].second.second.second;\n            if (d) {\n                if (check[b][c] != -1) {\n                    check[b][c]++;\n                }\n            } else {\n                if (check[b][c] != -1) {\n                    team[b].first++;\n                    team[b].second.first \n                        -= data[i].first + check[b][c] * 20;\n                    check[b][c] = -1;\n                }\n            }\n        }\n        sort(team.begin(), team.end(), greater<Team>());\n        cout << team[0].second.second;\n        for (int i = 1; i < t; i++) {\n            if (team[i].first == team[i-1].first && \n                    team[i].second.first == team[i-1].second.first) {\n                cout << \"=\" << team[i].second.second;\n            } else {\n                cout << \",\" << team[i].second.second;\n            }\n        }\n        cout << endl;\n    }\n\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<string>\nusing namespace std;\nint main(){\n\tint solved[50];\n\tint time[50][10];\n\tint team[50];\n\tint m,t,p,r;\n\twhile(true){\n\tcin>>m>>t>>p>>r;\n\tif(m==0&&t==0&&p==0&&r==0)\n\t\tbreak;\n\tfor(int i=0;i<t;i++){\n\t\tsolved[i]=0;\n\t\tfor(int j=0;j<p;j++)\n\t\t\ttime[i][j]=0;\n\t\tteam[i]=i+1;\n\t}\n\tfor(int i=0;i<r;i++){\n\t\tint a[4];\n\t\tfor(int j=0;j<4;j++)\n\t\t\tcin>>a[j];\n\t\tif(a[3]==0)\n\t\t\tsolved[a[1]-1]+=1000-time[a[1]-1][a[2]-1]-a[0];\n\t\telse\n\t\t\ttime[a[1]-1][a[2]-1]+=20;\n\t}\n\tfor(int i=0;i<t-1;i++){\n\t\tfor(int j=t-1;j>i;j--){\n\t\t\tif(solved[j]>solved[j-1]||(solved[j]==solved[j-1]&&team[j]>team[j-1])){\n\t\t\t\tint tmp=solved[j];\n\t\t\t\tsolved[j]=solved[j-1];\n\t\t\t\tsolved[j-1]=tmp;\n\t\t\t\ttmp=team[j];\n\t\t\t\tteam[j]=team[j-1];\n\t\t\t\tteam[j-1]=tmp;\n\t\t\t}\n\t\t}\n\t}\n\tcout<<team[0];\n\tfor(int i=1;i<t;i++){\n\t\tif(solved[i]==solved[i-1])\n\t\t\tcout<<\"=\";\n\t\telse\n\t\t\tcout<<\",\";\n\t\tcout<<team[i];\n\t}\n\tcout<<endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n//#include<fstream>\n#include<vector>\n\nusing namespace std;\n\nint main(){\n\t\n\t//ifstream fin;\n\t//fin.open(\"input.txt\");\n\n\tint M, T, P, R;//input\n\tint m, t, p, j;//input\n\n\tint time[50];\t//経過時間\n\tint solve[50];\t//正解数\n\tint miss[50][10];\t//間違えた数\n\tint count,teamcount;\n\tvector<int> v,s;//解けた問題数ごとに...\n\t\n\twhile(true){\n\t\tfor (int i = 0; i < 50; i++){//初期化\n\t\t\tfor (int k = 0; k < 10; k++)miss[i][k] = 0;\n\t\t\ttime[i] = solve[i] = 0;\n\t\t}\n\t\tM = T = P = R = m = t = p = j = 0;\n\n\t\tcin >> M >> T >> P >> R;\n\t\tif (M == 0)break;\n\n\t\twhile (R > 0){//結果計算\n\t\t\tR--;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tt--;\n\t\t\tif (j == 0){\n\t\t\t\ttime[t] += m;\n\t\t\t\ttime[t] += miss[t][p] * 20;\n\t\t\t\tsolve[t]++;\n\t\t\t}\n\t\t\telse miss[t][p]++;\n\t\t}\n\n\t\tfor (int i = 0; i < T; i++){//チーム別表示\n\t\t\tcout << \"チーム\" << i+1 << endl << \" 経過時間：\" << time[i] << \" 回答数：\" << solve[i];\n\t\t\tcout << endl;\n\t\t}\t\t\n\n\t\t//以下ソート\n\t\tcount = 0;//初期化\n\t\tteamcount = 0;\n\t\tfor (int i = 0; i < T; i++)if (count < solve[i])count = solve[i];//countを解けた問題数の最大値に\n\n\t\twhile (count >= 0){\n\t\t\tfor (int i = 0; i < T; i++)if (count == solve[i]){\n\t\t\t\tv.push_back(i);//countだけ解けたチームを記憶\n\t\t\t\ts.push_back(time[i]);//解けたチームの時間を記憶\n\t\t\t\tteamcount++;//pushしたチーム数を記憶\n\t\t\t}\n\n\t\t\t//バブルソート\n\t\t\tif (s.size() > 1){\n\t\t\t\tfor (int i = 0; i < (int)v.size() - 1; i++)\n\t\t\t\t\tfor (int k = (int)v.size() - 1; k > i; k--){//時間順にソート\n\t\t\t\t\t\tif (s[k] > s[k - 1]){\n\t\t\t\t\t\t\tint tmp = s[k];\n\t\t\t\t\t\t\tint temp = v[k];\n\n\t\t\t\t\t\t\ts[k] = s[k - 1];\n\t\t\t\t\t\t\tv[k] = v[k - 1];\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\ts[k - 1] = tmp;\n\t\t\t\t\t\t\tv[k - 1] = temp;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t}\n\t\t\tif (v.size() > 1){\n\t\t\t\tfor (int i = 0; i < (int)v.size() - 1; i++)\n\t\t\t\t\tfor (int k = (int)v.size() - 1; k > i; k--)\n\t\t\t\t\t\tif (s[k] == s[k - 1] && v[k] < v[k - 1]){//時間が同じときにチーム番号でソート\n\t\t\t\t\t\t\tint tmp = v[k];\n\t\t\t\t\t\t\tv[k] = v[k - 1];\n\t\t\t\t\t\t\tv[k - 1] = tmp;\n\t\t\t\t\t\t}\n\t\t\t}\n\t\t\t//ソート終了\n\n\t\t\t//output\n\t\t\twhile (v.size() > 2){\n\t\t\t\tif (s[v.size() - 1] == s[v.size() - 2])\n\t\t\t\t\tcout << v.back() + 1 << '=';\n\t\t\t\telse cout << v.back() + 1 << \",\";\n\t\t\t\tv.pop_back();\n\t\t\t}\n\t\t\tif (v.size() == 2){//最後の二つだけ例外処理\n\t\t\t\tif (s[1] == s[0])\n\t\t\t\t\t cout << v.back()+1 << \"=\";\n\t\t\t\telse cout << v.back()+1 << ',';\n\t\t\t\t\tv.pop_back();\n\t\t\t\t\tcout << v.back()+1;\n\t\t\t\t\tv.pop_back();\n\t\t\t\t\tif (teamcount != T)cout << ',';\n\t\t\t}\n\t\t\tif (v.size() == 1){//一つ残ったとき\n\t\t\t\tcout << v.back() + 1;\n\t\t\t\tif(teamcount != T)cout << ',';\n\t\t\t\tv.pop_back();\n\t\t\t}\n\t\t\tv.clear();//vector初期化\n\t\t\ts.clear();\n\t\t\tcount--;\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstring>\nusing namespace std;\nint x[100][2], y[100][20], n, a, b, c, d, e, f, g, h, p;\nint main() {\n\twhile (true) {\n\t\tmemset(x, 0, sizeof(x));\n\t\tmemset(y, 0, sizeof(y));\n\t\tcin >> n >> a >> b >> c;\n\t\tif (n == 0) {\n\t\t\tbreak;\n\t\t}\n\t\tfor (int i = 0; i < c; i++) {\n\t\t\tcin >> d >> e >> f >> g;\n\t\t\tif (g!=0) {\n\t\t\t\ty[e][f] += 20;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tx[e][1] += d + y[e][f];\n\t\t\t\tx[e][0]++;\n\t\t\t}\n\t\t}\n\t\tp = 0;\n\t\tfor (int i = 10; i >= 0; i--) {\n\t\t\tfor (int j = 0; j <= 10000; j++) {\n\t\t\t\th = 0;\n\t\t\t\tfor (int k = a; k > 0; k--) {\n\t\t\t\t\tif (x[k][0]==i && x[k][1]==j) {\n\t\t\t\t\t\tif (h >= 1) {\n\t\t\t\t\t\t\tcout << '=';\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (p >= 1) {\n\t\t\t\t\t\t\tcout << ',';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcout << k;\n\t\t\t\t\t\tp++;\n\t\t\t\t\t\th++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcout << endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<vector>\n#include<algorithm>\nusing namespace std;\n\nstruct Info{\n\tint id,cost,ac;\n};\n\nbool operator < (const Info &a,const Info &b){\n\tif(a.ac!=b.ac) return a.ac>b.ac;\n\tif(a.cost!=b.cost) return a.cost<b.cost;\n\treturn a.id>b.id;\n}\n\nint main()\n{\n\tint M,T,P,R;\n\twhile(cin>>M>>T>>P>>R){\n\t\tif(M==0) break;\n\t\tvector<vector<int> >num_WA(T,vector<int>(P,0));\n\t\tvector<int> cost(T,0);\n\t\tvector<int> num_AC(T,0);\n\t\tfor(int i=0;i<R;i++){\n\t\t\tint m,t,p,j;\n\t\t\tcin>>m>>t>>p>>j;\n\t\t\tt--;\n\t\t\tp--;\n\t\t\tif(j==0){\n\t\t\t\tcost[t] += m+num_WA[t][p]*20;\n\t\t\t\tnum_AC[t]++;\n\t\t\t}\n\t\t\telse{\n\t\t\t\tnum_WA[t][p]++;\n\t\t\t}\n\t\t}\n\t\tvector<Info> temp;\n\t\tfor(int i=0;i<T;i++){\n\t\t\tInfo hoge;\n\t\t\thoge.cost=cost[i];\n\t\t\thoge.id=i+1;\n\t\t\thoge.ac=num_AC[i];\n\t\t\ttemp.push_back(hoge);\n\t\t}\n\t\tsort(temp.begin(),temp.end());\n\t\tint bef_ac=0,bef_cost=0;\n\t\tfor(int i=0;i<temp.size();i++){\n\t\t\tif(i!=0){\n\t\t\t\tif(bef_ac==temp[i].ac && bef_cost==temp[i].cost){\n\t\t\t\t\tcout<<\"=\";\n\t\t\t\t}\n\t\t\t\telse cout<<\",\";\n\t\t\t}\n\t\t\tcout<<temp[i].id;\n\t\t\tbef_ac=temp[i].ac;\n\t\t\tbef_cost=temp[i].cost;\n\t\t}\n\t\tcout<<endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <map>\n#include <set>\n#include <queue>\n#include <vector>\n#include <stdlib.h>\n#include <algorithm>\n\n#define rep(i,s,t) for(int i=s;i<t;i++)\n#define mp(a,b) make_pair(a,b)\n#define mii map<int,int>\n\nusing namespace std;\n\nint main(void){\n\n\twhile(true){\n\t\tint M,T,P,R;\n\t\tcin >> M >> T >> P >> R;\n\n\t\tmap<int,map<int,set<int,greater<int> > >,greater<int> > standing;\n\n\t\tint solve[T+1];\n\t\tint time[T+1];\n\t\tint pena[T+2][P+1];\n\t\trep(i,0,T+1){\n\t\t\tsolve[i]=0;\n\t\t\ttime[i]=0;\n\t\t\trep(j,0,P+1)\n\t\t\t\tpena[i][j]=0;\n\t\t}\n\n\t\tif(M==0 && T==0 && P==0 && R==0) break;\n\n\t\trep(rnd,0,R){\n\t\t\tint m,t,p,j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tif(j==0){\n\t\t\t\tsolve[t]++;\n\t\t\t\ttime[t]+=m+pena[t][p]*20;\n\t\t\t}else{\n\t\t\t\tpena[t][p]++;\n\t\t\t}\n\t\t}\n\n\t\trep(i,1,T+1)\n\t\t\tstanding[solve[i]][time[i]].insert(i);\n\n\t\tint cnt=0;\n\t\tfor(map<int,map<int,set<int,greater<int> > >,greater<int> > ::iterator it=standing.begin();it!=standing.end();it++){\n\t\t\tmap<int,set<int,greater<int> > > inmp=(*it).second;\n\t\t\tfor(map<int,set<int,greater<int> > >::iterator jt=inmp.begin();jt!=inmp.end();jt++){\n\t\t\t\tset<int,greater<int> > inset=(*jt).second;\n\t\t\t\tint size=inset.size();\n\t\t\t\tfor(set<int,greater<int> >::iterator kt=inset.begin();kt!=inset.end();kt++){\n\t\t\t\t\tcout << (*kt);\n\t\t\t\t\tcnt++;\n\t\t\t\t\tif(--size>0) cout << \"=\";\n\t\t\t\t}\n\t\t\t\tif(cnt<T) cout << \",\";\n\t\t\t}\n\t\t}\n\t\tcout << endl;\n\n\n\t}\n\t\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstdio>\n#include <algorithm>\n#include <string>\n#include <cstring>\n#include <cctype>\n#include <cmath>\n#include <stack>\n#include <queue>\n#include <vector>\n#include <set>\n#include <map>\n#include <list>\n#include <stdio.h>\n#include <string.h>\n#include <cstdlib>\n#include <math.h>\n#define INF 2000000000\nusing namespace std;\nint dx[4]={1,0,-1,0},dy[4]={0,1,0,-1};\n#define ll long long\n#define PL pair<long long, long long>\n#define P pair<int,int>\n#define mk make_pair\n#define en endl;\n#define WHITE 0\n#define BLACK 2\n#define GRAY 1\n#define RE return 0;\n\nstruct test{\n  int team_name,answers;\n};\n\nint main(){\n  while(1){\n    int m,t,p,r;\n    cin>>m>>t>>p>>r;\n//    cout<<en\n    if(m==t&&t==p&&p==r&&r==0) break;\n    test teams[55];\n    int mistake[55][11]={0};\n    int times[55]={0};\n    for(int i=0; i<55; i++){\n      teams[i].answers=0;\n      times[i]=0;\n    }\n    vector<P> ve;\n    for(int i=0; i<r; i++){\n      int time,team,id,judge;\n      cin>>time>>team>>id>>judge;\n      if(judge) mistake[team][id]++;\n      else{\n        teams[team].answers++;\n        times[team]+=mistake[team][id]*20+time;\n      }\n    }\n    \n    for(int i=1; i<=t; i++){\n      ve.push_back(mk(teams[i].answers,i));\n//      cout<<\"   i = \"<<i;\n//      cout<<\"          ans = \"<<teams[i].answers<<en\n    }\n//\n//    cout<<en\n    \n    sort(ve.begin(), ve.end(), greater<P>());\n//    for(auto v=0; v<ve.size(); v++){\n//      cout<<ve[v].second<<\"  time:  \"<<times[ve[v].second]<<en\n//    }\n//    cout<<en\n//    cout<<en\n    \n    for(int v=1; v<ve.size(); v++){\n      P now=ve[v];\n      int j=v-1;\n      while(j>=0&&ve[j].first==now.first&&times[now.second]<times[ve[j].second]){\n        ve[j+1]=ve[j];\n        j--;\n      }\n      ve[j+1]=now;\n    }\n    \n    for(int i=0; i<ve.size(); i++){\n      cout<<ve[i].second;\n      if(i==ve.size()-1) break;\n      if(ve[i].first==ve[i+1].first&&times[ve[i].second]==times[ve[i+1].second]) cout<<'=';\n      else cout<<',';\n    }\n    cout<<en\n  }\n  RE\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <iomanip>\n#include <vector>\n#include <queue>\n#include <stack>\n#include <map>\n#include <set>\n#include <cmath>\n#include <cstdio>\n#include <cstdlib>\n#include <functional>\n#include <string>\n#include <algorithm>\n#include <string>\n#include <climits>\n#include <utility>\n \n#define REP(i, n) for (int (i) = 0; (i) < (int)(n); (i)++)\n#define REG(i, a, b) for (int (i) = ((int)(a)); (i) < ((int)(b)); i++)\n#define ALL(V) (V).begin(), (V).end()\n#define PRINT(STR) cout << (STR) << endl\n#define ROUNDED(N) fixed << setprecision(N)\n#define SPACE \" \"\n \ntypedef long long ll;\nusing namespace std;\n \nint nextInt() { int n; cin >> n; return n; }\ndouble nextDouble() { double d; cin >> d; return d; }\nstring nextString() { string str; cin >> str; return str; }\n \nint main() {\n    cin.tie(0); //??????±?????????????????????\n    ios::sync_with_stdio(false); //printf???¨???±??????????????????\n    int M,T,P,R;\n    while(cin>>M>>T>>P>>R,M){\n      vector<vector<pair<bool,int>>> team(T,vector<pair<bool,int>>(P,make_pair(false,0)));//first is the number of problem\n        REP(i,R){\n            int m,t,p,j;\n            cin >> m>>t>>p>>j;\n\t    t--;\n\t    p--;\n            if(!j){\n                team[t][p].first = true;\n                team[t][p].second += m;\n            }else{\n                team[t][p].second += 20;\n            }\n        }\n        vector<pair<int,pair<int,int>>> teamres(T,make_pair(0,make_pair(15000,0)));\n        REP(i,T){\n            teamres[i].second.second = i;\n            REP(j,P){\n                if(team[i][j].first){\n                    teamres[i].first++;\n                    teamres[i].second.first -= team[i][j].second;\n                }\n            }\n        }\n        sort(ALL(teamres));\n        reverse(ALL(teamres));\n            REP(i,T-1){\n                if(teamres[i].first == teamres[i+1].first && teamres[i].second.first == teamres[i+1].second.first){\n                    cout << teamres[i].second.second + 1 << \"=\";\n                }else{\n                    cout << teamres[i].second.second + 1 << \",\";\n                }\n            }\n            cout << teamres[T-1].second.second + 1 << endl;\n \n    }\nreturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n#include <map>\nusing namespace std;\n\nstruct team_data {\n    int id;\n    int solved;\n    int time;\n    map<int, int> wrong;\n};\n\nint main() {\n    int M, T, P, R;\n    while(cin >> M >> T >> P >> R, M) {\n        vector<team_data> v(T);\n        for(int i=0; i<v.size(); ++i) {\n            v[i].id = i+1;\n        }\n\n        for(int i=0; i<R; ++i) {\n            int m, t, p, j;\n            cin >> m >> t >> p >> j;\n            if(j == 0) { // correct\n                v[t-1].time += m + v[t-1].wrong[p];\n                v[t-1].solved++;\n            } else { // wrong\n                v[t-1].wrong[p] += 20;\n            }\n        }\n        sort(v.begin(), v.end(), [](auto const& t1, auto const& t2) {\n            return t1.id > t2.id;\n        });\n        stable_sort(v.begin(), v.end(), [](auto const& t1, auto const& t2) {\n            if(t1.solved == t2.solved) {\n                return t1.time < t2.time;\n            } else {\n                return t1.solved > t2.solved;\n            }\n        });\n\n        for(int i=0; i<v.size(); ++i) {\n            cout << v[i].id;\n            if(i != v.size()-1) {\n                if(v[i].solved == v[i+1].solved && v[i].time == v[i+1].time) {\n                    cout << '=';\n                } else {\n                    cout << ',';\n                }\n            }\n        }\n        cout << endl;\n    }\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <cstring>\n#include <string>\n#include <cmath>\n#include <iostream>\n#include <algorithm>\n#include <stack>\n#include <queue>\n#include <vector>\n#include <set>\n#include <map>\nusing namespace std;\n\n#define repl(i,a,b) for(int i=(int)(a);i<(int)(b);i++)\n#define rep(i,n) repl(i,0,n)\n#define mp(a,b) make_pair(a,b)\n#define pb(a) push_back(a)\n#define all(x) (x).begin(),(x).end()\n#define dbg(x) cout<<#x\"=\"<<x<<endl\n\ntypedef long long ll;\ntypedef pair<int, int> pii;\ntypedef pair<pii, int> ppi;\n\n#define INF 1000000000\n\nstruct team{\n  int ac, t, n; // number of accepts, consumed time, team number\n  int fails[50];\n};\n\nbool sorter(const team &t1, const team &t2){\n  if(t1.ac == t2.ac){\n    if(t1.t == t2.t){\n      return t1.n > t2.n;\n    } else {\n      return t1.t < t2.t;\n    }\n  } else {\n    return t1.ac > t2.ac;\n  }\n}\n\nint main(){\n  int M,T,P,R;\n  while(cin>>M>>T>>P>>R, M|T|P|R){\n    vector<team> teams(T);\n\n    // initialize each teams info\n    rep(i,T){\n      teams[i].ac = teams[i].t = 0;\n      teams[i].n = i+1;\n      rep(j,P) teams[i].fails[j]=0;\n    }\n\n    // read input and set team info\n    rep(i,R){\n      int m,t,p,j;\n      scanf(\"%d %d %d %d\", &m, &t, &p, &j);\n      t--; p--;\n      if(j==0){ //AC\n\tteams[t].ac++;\n\tteams[t].t += m + teams[t].fails[p]*20;\n      } else { //WA\n\tteams[t].fails[p]++;\n      }\n    }\n\n    sort(all(teams), sorter);\n\n    // output results\n    printf(\"%d\", teams[0].n);\n    repl(i,1,T){\n      if(teams[i-1].ac==teams[i].ac && teams[i-1].t==teams[i].t)\n\tprintf(\"=\");\n      else\n\tprintf(\",\");\n      printf(\"%d\", teams[i].n);\n    }\n    printf(\"\\n\");\n  }\n}"
  },
  {
    "language": "C++",
    "code": "//\n//  1187.cpp\n//  \n//\n//  Created by Minote Tomoki on 2015/06/04.\n//\n//\n\n#include <iostream>\n#include <vector>\n#include <algorithm>\n\nusing namespace std;\n\ntypedef struct {\n    int m;\n    int t;\n    int p;\n    int j;\n} data;\n\ntypedef struct {\n    int team;\n    int time;\n    int collect;\n} status;\n\nstatus judge(vector<data> team,int num) {\n    int que_time[10]={0};\n    \n     status result = {num};\n    \n    for(auto k:team) {\n//        que_time[k.p-1]+=k.m;\n        if(k.j==0) {\n            result.collect++;\n            result.time+=k.m + que_time[k.p-1];\n        }\n        else {\n            que_time[k.p-1]+=20;\n        }\n        \n    }\n//    cout << result.time << endl;\n//    cout << result.collect << endl;\n    \n    cout << result.time << endl;\n    \n    return result;\n}\n\nbool cmp(const status& left, const status& right) {\n    if ( left.collect == right.collect) {\n        if(left.time == right.time) {\n            return left.team > right.team;\n        }\n        else {\n            return left.time < right.time;\n        }\n    }\n    return left.collect > right.collect;\n}\n\nbool eq(const status& left, const status& right) {\n    if(left.collect == right.collect && left.time == right.time) return true;\n    else return false;\n}\n\nint main(void) {\n    int M,T,P,R;\n    int m,t,p,j;\n    \n    while(cin >> M >> T >> P >> R, M|T|P|R) {\n    \n        vector<data> dat(R);\n        vector<vector<data>> team(T);\n        vector<status> result;\n    \n        for(int i=0;i<R;i++) {\n            cin >> m >> t >> p >> j;\n            data d={m,t,p,j};\n            team[t-1].push_back(d);\n        }\n    \n        int k=1;\n        for(auto i:team){\n            status tmp = judge(i,k++);\n            result.push_back(tmp);\n            //cout << tmp.time << \",\" << tmp.collect << endl;\n        }\n        \n        \n        //for(int i=0;i<T;i++) { cout << result[i].collect << endl; }\n        sort(result.begin(),result.end(),cmp);\n        for(int i=0;i<team.size();i++){\n            cout << result[i].team;\n            if(i<team.size()-1) {\n                if(eq(result[i],result[i+1])) cout << \"=\";\n                else cout << \",\";\n            }\n        }\n        cout << endl;\n    }\n    \n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstdio>\n#include <vector>\n#include <queue>\n#include <stack>\n#include <map>\n#include <string>\n#include <algorithm>\n\nusing namespace std;\n\nstruct Team {\n    Team(int team_number) {\n        tn_ = team_number;\n        n_ = 0;\n        t_ = 0;\n        pc_ = 0;\n    }\n    int tn_;\n    int n_;\n    int t_;\n    int pc_;\n    vector<int> p_list_;\n};\n\nint main (int argc, char *argv[]) {\n    int M, T, P, R;\n    int m, t, p, j;\n    int count = 0;\n    vector<Team> tv;\n\n    while (cin>>M>>T>>P>>R) {\n        if (count != 0 )cout<<endl;\n        count++;\n        for (int i = 0; i < T; ++i) {\n            tv.push_back(Team(i+1));\n        }\n        for (int i = 0; i < R; ++i) {\n            cin>>m>>t>>p>>j;\n            if (j != 0) {\n                tv[t-1].p_list_.push_back(p);\n            }\n            else {\n                for (auto e : tv[t-1].p_list_) {\n                    if (e == p) {\n                        tv[t-1].pc_++;\n                    }\n                }\n                tv[t-1].n_++;\n                tv[t-1].t_ += m;\n            }\n        }\n        for (auto& e : tv) {\n            e.t_ += e.pc_ * 20;\n        }\n\n        // for (auto e : tv) {\n        //     cout<<\"-----------\"<<endl;\n        //     cout<<e.tn_<<endl;\n        //     cout<<e.n_<<endl;\n        //     cout<<e.t_<<endl;\n        //     cout<<e.pc_<<endl;\n        //     for (auto c : e.p_list_) {\n        //         cout<<c<<\" \";\n        //     }\n        //     cout<<endl;\n        //     cout<<\"-----------\"<<endl;\n        // }\n\n        sort(tv.begin(), tv.end(), [](const auto& lhs, const auto& rhs) -> bool{\n            if (lhs.n_ != rhs.n_ ) {\n                return lhs.n_ > rhs.n_;\n            }\n            else if (lhs.n_ == rhs.n_ && lhs.t_ != rhs.t_) {\n                return lhs.t_ < rhs.t_;\n            }\n            else return lhs.tn_ > rhs.tn_;\n        });\n\n        const int size = static_cast<int>(tv.size());\n        for (int i = 0; i < size; ++i) {\n            cout<<tv[i].tn_;\n            if(i != size -1) {\n                if (tv[i].n_ != tv[i+1].n_ || tv[i].t_ != tv[i+1].t_ ) {\n                    cout<<\",\";\n                }\n                else cout<<\"=\";\n            }\n        }\n        tv.clear();\n    }\n\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <map>\n#include <set>\n#include <string>\n#include <queue>\n#include <stack>\n#include <algorithm>\n#include <cmath>\n#include <cstring>\n\nusing namespace std;\n\nint main() {\n    int M, T, P, R;\n    while (cin >> M >> T >> P >> R){\n        int num_solved[T];\n        int num_wrong[T][P];\n        int total_time[T];\n\n        memset(num_solved, 0, sizeof(num_solved));\n        memset(num_wrong, 0, sizeof(num_wrong));\n        memset(total_time, 0, sizeof(total_time));\n\n        for (int i = 0; i < R; i++){\n            int m, t, p, j;\n            cin >> m >> t >> p >> j; t--; p--;\n            if (j == 0){\n                num_solved[t]++;\n                total_time[t] += num_wrong[t][p] * 20 + m;\n            } else {\n                num_wrong[t][p]++;\n            }\n        }\n\n        vector<pair<pair<int, int>, int> > vs; \n\n        for (int i = 0; i < T; i++){\n            vs.push_back(make_pair(make_pair(-num_solved[i], total_time[i]), -i)); \n        }\n        sort(vs.begin(), vs.end());\n\n        for (int i = 0; i < T; i++){\n            if (i > 0){\n                if (vs[i].first == vs[i - 1].first){\n                    cout << \"=\";\n                } else {\n                    cout << \",\";\n                }\n            }\n            cout << -vs[i].second + 1 ;\n        }\n        cout << endl; \n    }\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstdlib>\n#include <algorithm>\n\nusing namespace std;\n\nstruct teaminfo {\n  int id;\n  int ac;\n  int time;\n  int wan[ 11 ];\n  bool operator<( const teaminfo &t ) const;\n  bool operator==( const teaminfo &t ) const;\n};\n\nbool teaminfo::operator<( const teaminfo &t ) const {\n  if( this->ac == t.ac ) {\n    if( this->time == t.time ) {\n      return this->id < t.id;\n    }\n    return this->time > t.time;\n  }\n  return this->ac < t.ac;\n}\n\nbool teaminfo::operator==( const teaminfo &t ) const {\n  return this->time == t.time && this->ac == t.ac;\n}\n\n\nint main() {\n  while( 1 ) {\n    int m, t, p, r;\n    teaminfo ti[ 51 ];\n    cin >> m >> t >> p >> r;\n    if( !m && !t && !p && !r ) { break; }\n    for( int i = 1; i <= t; i++ ) {\n      ti[ i ].id = i;\n      ti[ i ].ac = 0;\n      ti[ i ].time = 0;\n      for( int j = 1; j <= p; j++ ) {\n        ti[ i ].wan[ j ] = 0;\n      }\n    }\n    for( int i = 0; i < r; i++ ) {\n      int mk, tk, pk, jk;\n      cin >> mk >> tk >> pk >> jk;\n      if( jk == 0 ) { // ac\n        ti[ tk ].ac++;\n        ti[ tk ].time += ( mk + ti[ tk ].wan[ pk ] * 20 );\n      } else { // wa\n        ti[ tk ].wan[ pk ]++;\n      }\n\n    }\n    sort( ti + 1, ti + t + 1 );\n    for( int i = t; i > 0; i-- ) {\n      cout << ti[ i ].id << flush;\n      if( i != 1 ) {\n        if( ti[ i - 1 ] == ti[ i ] ) {\n          cout << \"=\" << flush;\n        } else {\n          cout << \",\" << flush;\n        }\n      }\n    }\n    cout << endl;\n  }\n\n  return EXIT_SUCCESS;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstdio>\n#include<vector> \n#include<algorithm>\nusing namespace std;\n\nclass Team{\npublic:\n  int num;\n  int solve;\n  int time;\n  vector<int> plist;\n  Team():num(0),solve(0),time(0),plist(vector<int>(11,0)){}\n};\n\nbool compare_solve(const Team& left, const Team& right){\n  return left.solve > right.solve;\n}\nbool compare_time(const Team& left, const Team& right){\n  return left.time <= right.time;\n}\n\nint main(){\n  int M, T, P, R;\n  int m, t, p, j;\n  vector<Team> team;\n  for(;;){\n    scanf(\"%d %d %d %d\", &M, &T, &P, &R);\n    if( M == 0 && T == 0 && P == 0 && R == 0)\n      return 0;\n    for(int i = 0; i < T; i++){  \n      Team temp;\n      temp.num = i+1;\n      team.push_back(temp);\n    }\n    for(int i = 0; i < R; i++){\n      scanf(\"%d %d %d %d\", &m, &t, &p, &j);\n      if(j != 0)\n\tteam.at(t-1).plist.at(p) += 1;\n      else{\n\tteam.at(t-1).solve += 1; \n\tteam.at(t-1).time += m;\n\tteam.at(t-1).time += team.at(t-1).plist.at(p) * 20;\n      }\n    }\n    sort(team.begin(),team.end(),compare_time);\n    stable_sort(team.begin(),team.end(),compare_solve);\n    cout << team.at(0).num;\n    for(int i = 1; i < T; i++){\n      if(team.at(i-1).solve == team.at(i).solve && team.at(i-1).time == team.at(i).time)\n\tcout << \"=\";\n      else\n\tcout << \",\";\n      cout << team.at(i).num;\n    }\n    cout << endl;\n    team.clear();\n  }\n}"
  },
  {
    "language": "C++",
    "code": "//include\n//------------------------------------------\n#include <vector>\n#include <list>\n#include <map>\n#include <climits>\n#include <set>\n#include <deque>\n#include <stack>\n#include <bitset>\n#include <algorithm>\n#include <functional>\n#include <numeric>\n#include <utility>\n#include <sstream>\n#include <iostream>\n#include <iomanip>\n#include <cstdio>\n#include <cmath>\n#include <cstdlib>\n#include <cctype>\n#include <string>\n#include <cstring>\n#include <ctime>\n#include <queue>\n#include <random>\n#include <cctype>\n\nusing namespace std;\n\n#define FOR(i, a, b) for(int i=(a);i<(b);++i)\n#define RFOR(i, a, b) for(int i=(b)-1;i>=(a);--i)\n#define REP(i, n)  FOR(i,0,n)\n\nstruct Team {\n\n    Team() {\n\n    }\n\n    Team(int team_id, int P) {\n        this->team_id = team_id;\n        solve_count = 0;\n        last_time = 0;\n        problems.resize(P, false);\n        error_counts.resize(P, 0);\n    }\n\n    vector<bool> problems;\n    vector<int> error_counts;\n    int team_id;\n    int solve_count;\n    int last_time;\n\n};\n\nbool comp(const Team &t1, const Team &t2) {\n\n    int t1_solve_count = 0;\n    for (int i = 0; i < t1.problems.size(); i++) {\n        if (t1.problems[i]) t1_solve_count++;\n    }\n\n    int t2_solve_count = 0;\n    for (int i = 0; i < t2.problems.size(); i++) {\n        if (t2.problems[i]) t2_solve_count++;\n    }\n\n    int t1_time = t1.last_time;\n    for (int i = 0; i < t1.error_counts.size(); i++) {\n        if (t1.problems[i]) {\n            t1_time += 20 * t1.error_counts[i];\n        }\n    }\n\n    int t2_time = t2.last_time;\n    for (int i = 0; i < t2.error_counts.size(); i++) {\n        if (t2.problems[i]) {\n            t2_time += 20 * t2.error_counts[i];\n        }\n    }\n\n    //team1の方が弱かったらtrue\n    if (t1_solve_count < t2_solve_count) {\n        return false;\n    } else if (t1_solve_count > t2_solve_count) {\n        return true;\n    } else {\n\n        if (t1_time < t2_time) {\n            return true;\n        } else if (t1_time > t2_time) {\n            return false;\n        } else {\n\n            if (t1.team_id > t2.team_id) {\n                return true;\n            } else {\n                return false;\n            }\n\n        }\n\n    }\n\n}\n\nbool same(const Team &t1, const Team &t2){\n    int t1_solve_count = 0;\n    for (int i = 0; i < t1.problems.size(); i++) {\n        if (t1.problems[i]) t1_solve_count++;\n    }\n\n    int t2_solve_count = 0;\n    for (int i = 0; i < t2.problems.size(); i++) {\n        if (t2.problems[i]) t2_solve_count++;\n    }\n\n    int t1_time = t1.last_time;\n    for (int i = 0; i < t1.error_counts.size(); i++) {\n        if (t1.problems[i]) {\n            t1_time += 20 * t1.error_counts[i];\n        }\n    }\n\n    int t2_time = t2.last_time;\n    for (int i = 0; i < t2.error_counts.size(); i++) {\n        if (t2.problems[i]) {\n            t2_time += 20 * t2.error_counts[i];\n        }\n    }\n\n    //team1の方が弱かったらtrue\n    if (t1_solve_count < t2_solve_count) {\n        return false;\n    } else if (t1_solve_count > t2_solve_count) {\n        return false;\n    } else {\n\n        if (t1_time < t2_time) {\n            return false;\n        } else if (t1_time > t2_time) {\n            return false;\n        } else {\n\n            return true;\n\n        }\n\n    }\n}\n\nint main() {\n\n    while (true) {\n\n        int M, T, P, R;\n        cin >> M >> T >> P >> R;\n\n        if (M == 0 && T == 0 && P == 0 && R == 0) {\n            break;\n        }\n\n        vector<Team> teams(T);\n        REP(i, T) {\n            teams[i] = Team(i + 1, P);\n        }\n\n        REP(i, R) {\n            int m, t, p, j;\n            cin >> m >> t >> p >> j;\n            t--;\n            p--;\n\n            if (j == 0) {\n                teams[t].last_time = m;\n                teams[t].problems[p] = true;\n            } else {\n                teams[t].error_counts[p]++;\n            }\n        }\n\n        sort(teams.begin(), teams.end(), comp);\n\n        REP(i, teams.size()) {\n            if (i != teams.size() - 1) {\n                cout << teams[i].team_id;\n                if (same(teams[i], teams[i+1])) {\n                    cout << \"=\";\n                }else{\n                    cout << \",\";\n                }\n            } else {\n                cout << teams[i].team_id << \"\\n\";\n            }\n        }\n\n    }\n\n    return 0;\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<vector>\n#include<algorithm>\n\nusing namespace std;\n\nint main(){\n\n  while(true){\n    int M,T,P,R;\n    cin>>M>>T>>P>>R;\n    if(!M and !T and !P and !R)break;\n\n    vector< vector<bool> > is_ac(T,vector<bool>(P,false));\n    vector< vector<int> > wa_num(T,vector<int>(P,0));\n    vector< pair< pair<int,int> ,int > > point(T);\n\n    for(int i=0;i<T;i++){\n      point[i].second=i+1;\n    }\n    \n    for(int i=0;i<R;i++){\n      int m,t,p,j;\n      cin>>m>>t>>p>>j;\n      //cout<<m<<\" \"<<t<<\" \"<<p<<\" \"<<j<<endl;\n      t--;\n      p--;\n      if(j==0){\n        is_ac[t][p]=true;\n        point[t].first.first++;\n        point[t].first.second+=m*(-1);\n      }\n      else{\n        wa_num[t][p]++;\n      }\n    }\n\n    for(int i=0;i<T;i++){\n      for(int j=0;j<P;j++){\n        if(is_ac[i][j]){\n          point[i].first.second-=wa_num[i][j]*20;\n        }\n      }\n    }\n    \n    sort(point.begin(),point.end());\n    reverse(point.begin(), point.end());\n\n\n    for(int i=0;i<T;i++){\n      if(i>0){\n       if(point[i].first==point[i-1].first)printf(\"=\");\n       else printf(\",\");\n      }\n      printf(\"%d\",point[i].second);\n    }\n    puts(\"\");\n  }\n  \n}"
  },
  {
    "language": "C++",
    "code": "// 1187.cpp - ICPC Ranking\n#include <iostream>\n#include <vector>\n#include <algorithm>\nusing namespace std;\n\nstruct team {\n    int id;\n    int solved;\n    int penalty;\n    vector<int> not_accepted;\n\n    team(int id, int n_problems):\n        id(id), solved(0), penalty(0), not_accepted(n_problems) {}\n\n    bool operator<(const team& rhs) const {\n        if (solved != rhs.solved)\n            return solved > rhs.solved;\n        if (penalty != rhs.penalty)\n            return penalty < rhs.penalty;\n        return id > rhs.id;\n    }\n};\n\nint main()\n{\n    ios::sync_with_stdio(false);\n\n    int M, T, P, R;\n    while (cin >> M >> T >> P >> R, M) {\n        vector<team> teams;\n        for (int t = 0; t < T; ++t) {\n            teams.emplace_back(t + 1, P);\n        }\n\n        for (int r = 0; r < R; ++r) {\n            int m, t, p, j;\n            cin >> m >> t >> p >> j;\n            team& team = teams[t - 1];\n            if (j == 0) {\n                team.solved += 1;\n                team.penalty += m + team.not_accepted[p - 1] * 20;\n            } else {\n                team.not_accepted[p - 1] += 1;\n            }\n        }\n\n        sort(teams.begin(), teams.end());\n\n        for (int t = 0; t < T; ++t) {\n            if (t > 0) {\n                if (teams[t].solved  == teams[t - 1].solved &&\n                    teams[t].penalty == teams[t - 1].penalty)\n                    cout << \"=\";\n                else\n                    cout << \",\";\n            }\n            cout << teams[t].id;\n        }\n        cout << endl;\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<vector>\nusing namespace std;\n\ntypedef pair<int,int> pii;\ntypedef pair<pii,int> tri;\nint main(){\n  int m,t,p,r;\n  int team[55][15];\n  while(cin>>m>>t>>p>>r,m){\n    memset(team,0,sizeof(team));\n    vector<tri> ans;\n    int a,b,c,d;\n    for(int i=0;i<r;i++){\n      cin>>a>>b>>c>>d;\n      if(d!=0){\n\tteam[b][c]++;\n      }else{\n\tteam[b][p+1]+=a+20*team[b][c];\n\tteam[b][p+2]++;\n      }\n    }\n    for(int i=1;i<=t;i++){\n      ans.push_back(tri(pii(-team[i][p+2],team[i][p+1]),-i));\n    }\n    sort(ans.begin(),ans.end());\n    for(int i=0;i<t;i++){\n      cout<<-ans[i].second;\n      if(i+1==t)cout<<endl;\n      else if(ans[i].first == ans[i+1].first)cout<<\"=\";\n      else cout<<\",\";\n    }\n  }\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <bitset>\n#include <cassert>\n#include <cmath>\n#include <ctime>\n#include <cstring>\n#include <functional>\n#include <iostream>\n#include <iomanip>\n#include <limits>\n#include <map>\n#include <queue>\n#include <set>\n#include <stack>\n#include <string>\n#include <regex>\n#include <vector>\n\n#define fix(n)          cout<<fixed<<setprecision(n)\n#define rep(i,n)        for (int i = 0; i < (n); ++i)\n#define all(a)          (a).begin(), (a).end()\n// #define sort(a)         sort(all(a))\n#define uniq(a)         sort(a);(a).erase(unique(all(a)), (a).end())\n#define reverse(a)      reverse(all(a))\n#define ctos(c)         string(1, (c))\n#define out(d)          cout << (d)\n#define outl(d)         std::cout<<(d)<<\"\\n\"\n#define YES()           cout << \"YES\" << endl\n#define NO()            cout << \"NO\" << endl\n#define Yes()           cout << \"Yes\" << endl\n#define No()            cout << \"No\" << endl\n#define ceil(x, y)      ((x + y - 1) / (y))\n#define debug(x)        cerr << #x << \": \" << (x) << '\\n'\n#define debug2(x, y)    cerr << #x << \": \" << (x) << \", \" << #y << \": \" << (y) << '\\n'\n#define debug3(x, y, z) cerr << #x << \": \" << (x) << \", \" << #y << \": \" << (y) << \", \" << #z << \": \" << (z) << '\\n'\n#define dbg(v)          for (size_t _ = 0; _ < v.size(); ++_){ cerr << #v << \"[\" << _ << \"] : \" << v[_] << '\\n'; }\n#define pb              push_back\n#define fst             first\n#define int             long long\n#define INF             __LONG_LONG_MAX__\n\nusing namespace std;\nusing ll = long long;\nusing ld = long double;\nusing P = pair<ll,ll>;\n\nconst ll MOD = 1000000007; // 10^9 + 7\nconst int dx[8] = {1, 0, -1, 0, 1, -1, -1, 1};\nconst int dy[8] = {0, 1, 0, -1, 1, 1, -1, -1};\n\nbool asc(const tuple<ll, ll, ll>& left, const tuple<ll, ll, ll>& right) {\n  if (get<0>(left) != get<0>(right)) return get<0>(left) > get<0>(right);\n  if (get<1>(left) != get<1>(right)) return get<1>(left) < get<1>(right);\n  return get<2>(left) > get<2>(right);\n}\n\nvoid solve() {\n  while (true) {\n    ll m, t, p, r; cin >> m >> t >> p >> r;\n    if (m == 0 && t == 0 && p == 0 && r == 0) break;\n\n    const ll MAX_T = 50, MAX_P = 10;\n    ll pnl[MAX_T][MAX_P] = {{}};\n    vector<tuple<ll, ll, ll>> result(t); // 左から正解数、所要時間、チーム番号\n    for (int i = 0; i < t; i++)\n      result[i] = make_tuple(0, 0, i+1);\n    \n    for (int i = 0; i < r; i++) {\n      ll mi, ti, pi, ji; cin >> mi >> ti >> pi >> ji;\n\n      if (ji == 0) {\n        get<0>(result[ti-1])++;\n        get<1>(result[ti-1]) += mi + pnl[ti-1][pi-1] * 20;\n      } else {\n        pnl[ti-1][pi-1]++;\n      }\n    }\n\n    sort(all(result), asc);\n\n    vector<vector<ll>> ans(1);\n    ans[0].emplace_back(get<2>(result[0]));\n    for (int i = 1; i < t; i++) {\n      ll lac = get<0>(result[i-1]);\n      ll ltm = get<1>(result[i-1]);\n      ll nac = get<0>(result[i]);\n      ll ntm = get<1>(result[i]);\n      if (lac == nac && ltm == ntm) {\n        ans[ans.size() - 1].push_back(get<2>(result[i]));\n      } else {\n        ans.push_back(vector<ll>{get<2>(result[i])});\n      }\n    }\n\n    for (int i = 0; i < ans.size(); i++) {\n      for (int j = 0; j < ans[i].size(); j++) {\n        if (j != 0) cout << \"=\";\n        cout << ans[i][j];\n      }\n\n      if (i != ans.size()-1) cout << \",\";\n    }\n    cout << endl;\n  }\n}\n\nsigned main() {\n  cin.tie(0);\n  ios::sync_with_stdio(false);\n  srand((unsigned)time(NULL));\n  fix(12);\n\n  solve();\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n#include <vector>\nstatic const int N = 2001;\nusing namespace std;\nstruct data{\n  int correctcnt,time,tnum;\n  bool operator<(const data& right)const{\n    if(correctcnt!=right.correctcnt) return correctcnt>right.correctcnt;\n    if(time!=right.time) return time<right.time;\n    return tnum>right.tnum;\n  }\n};\nint main(){\n  int M,T,P,R,i,j,m[N],t[N],p[N],in_j[N],incorrectcnt;\n  while(1){\n    cin >> M >> T >> P >> R;\n    vector<data> V(T);\n    if(M==0&&T==0&&P==0&&R==0) break;\n    for(i=0;i<R;i++){\n      cin >> m[i] >> t[i] >> p[i] >> in_j[i];\n    }\n    for(i=0;i<T;i++){\n      V[i].tnum=i;\n      V[i].correctcnt=V[i].time=0;\n    }\n    for(i=0;i<R;i++){\n      if(in_j[i]==0){\n\tV[t[i]-1].correctcnt++;\n\tincorrectcnt=0;\n\tfor(j=0;j<i;j++){\n\t  if(t[i]==t[j]&&p[i]==p[j]) incorrectcnt++;\n\t}\n\tV[t[i]-1].time+=m[i]+20*incorrectcnt;\n      }\n    }\n    sort(V.begin(),V.end());\n    for(i=0;i<T-1;i++){\n      cout << V[i].tnum+1;\n      if(V[i].correctcnt==V[i+1].correctcnt&&V[i].time==V[i+1].time) cout << '=';\n      else cout << ',';\n    }\n    cout << V[T-1].tnum+1 << endl;\n  }  \n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n#include <vector>\n\nusing namespace std;\n\nint M, T, P, R;\n\nstruct Team {\n    int id, penalty[11], score, ans;\n    Team() {\n        for (int i = 0; i < 11; ++i)\n            penalty[i] = 0;\n        score = ans = 0;\n    }\n};\n\nbool cmp(const Team &a, const Team &b)\n{\n    return (a.ans > b.ans) || (a.ans == b.ans && (a.score < b.score))\n        || ((a.ans == b.ans && a.score == b.score && a.id > b.id));\n}\n\nint main()\n{\n    while (cin >> M >> T >> P >> R) {\n        if (M + T + P + R == 0)\n            break;\n\n        Team team[T];\n        for (int i = 0; i < T; ++i)\n            team[i].id = i + 1;\n\n        int m, t, p, j;\n        for (int i = 0; i < R; ++i) {\n            cin >> m >> t >> p >> j;\n\n            --t;\n            if (j == 0) { // 正解\n                ++team[t].ans;\n                team[t].score += m + 20 * team[t].penalty[p];\n            }\n            else { // 不正解\n                ++team[t].penalty[p];\n            }\n        }\n\n        sort(team, team + T, cmp);\n\n        cout << team[0].id;\n        for (int i = 1; i < T; ++i) {\n            if (team[i - 1].ans == team[i].ans &&\n                team[i - 1].score == team[i].score)\n                cout << \"=\";\n            else\n                cout << \",\";\n            cout << team[i].id;\n        }\n        cout << endl;\n    }\n\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n#define rep(i, n) for(int i = 0; i < (n); i++)\n#define repp(i, l, r) for(int i = (l); i < (r); i++)\n#define per(i, n) for(int i = ((n)-1); i >= 0; i--)\n#define perr(i, l, r) for(int i = ((r)-1); i >= (l); i--)\n#define all(x) (x).begin(),(x).end()\n#define MOD 1000000007\n#define IINF 1000000000\n#define LINF 1000000000000000000\n#define SP <<\" \"<<\n#define CYES cout<<\"Yes\"<<endl\n#define CNO cout<<\"No\"<<endl\n#define CFS cin.tie(0);ios::sync_with_stdio(false)\n\ntypedef long long LL;\ntypedef long double LD;\n\nint main(){\n  while(1){\n    int m,t,p,r;\n    cin >> m >> t >> p >> r;\n    if(m==0) return 0;\n    vector<vector<int>> w(t,vector<int>(p,0));\n    vector<int> ac(t,0);\n    vector<int> pn(t,0);\n    int keika,team,prob,judge;\n    rep(i,r){\n      cin >> keika >> team >> prob >> judge;\n      team--,prob--;\n      if(judge==0){\n        ac[team]++;\n        pn[team]+=keika+w[team][prob]*20;\n      }else{\n        w[team][prob]++;\n      }\n    }\n    vector<int> id(t);\n    iota(all(id),0);\n    sort(all(id),[&](const int &l, const int &r){\n      return ac[l]==ac[r]?(pn[l]==pn[r]?l>r:pn[l]<pn[r]):ac[l]>ac[r];\n    });\n    rep(i,t){\n      if(i>0){\n        if(ac[id[i-1]]==ac[id[i]]&&pn[id[i-1]]==pn[id[i]]) cout << '=';\n        else cout << ',';\n      }\n      cout << id[i]+1;\n    }\n    cout << endl;\n  }\n  return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\nint x[99][2],y[99][20],n,a,b,c,d,e,f,g,h,p,i,j,k;\nint main() {\nwhile(true) {\nmemset(x,0,sizeof(x));memset(y,0,sizeof(y));\ncin>>n>>a>>b>>c;\nif(n==0){break;}\nfor(i=0;i<c;i++){\ncin>>d>>e>>f>>g;\nif(g!=0){y[e][f]+=20;}\nelse{x[e][1]+=d+y[e][f];x[e][0]++;}\n}p=0;\nfor(i=b;i>=0;i--){\nfor(j=0;j<=99999;j++){h=0;\nfor(k=a;k>0;k--){\nif(x[k][0]==i&&x[k][1]==j){\nif(h>=1){cout<<'=';}else if(p>=1){cout<<',';}cout<<k;p++;h++;\n}\n}}}\ncout<<endl;}}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\nusing namespace std;\n\nconst int INF=5000000;\n\nint data[51][12];\n\nint main(){\n\tint M,T,P,R;\n\twhile(cin>>M>>T>>P>>R && M){\n\t\tfill((int*)data,(int*)(data+12),0);\n\t\tfor(int i=0;i<R;i++){\n\t\t\tint m,t,p,j;\n\t\t\tcin>>m>>t>>p>>j;\n\t\t\tif(j==0){\n\t\t\t\tdata[t][0]++;\n\t\t\t\tdata[t][11]+=m+data[t][p]*20;\n\t\t\t}\n\t\t\telse data[t][p]++;\n\t\t}\n\t\tint prev[2]={INF,0};\n\t\tfor(int i=0;i<T;i++){\n\t\t\tint ans=0;\n\t\t\tint now[2]={0,INF};\n\t\t\tfor(int j=T;j>=0;j--){\n\t\t\t\tif(data[j][0]>now[0]){\n\t\t\t\t\tnow[0]=data[j][0];\n\t\t\t\t\tnow[1]=data[j][11];\n\t\t\t\t\tans=j;\n\t\t\t\t}\n\t\t\t\telse if(data[j][0]==now[0] && data[j][11]<now[1]){\n\t\t\t\t\tnow[1]=data[j][11];\n\t\t\t\t\tans=j;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(i){\n\t\t\t\tif(memcmp(now,prev,sizeof(now))==0)cout<<\"=\";\n\t\t\t\telse cout<<\",\";\n\t\t\t}\n\t\t\tcout<<ans;\n\t\t\tmemcpy(prev,now,sizeof(now));\n\t\t\tdata[ans][0]=-1;\n\t\t}\n\t\tcout<<endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\ntypedef pair<int, int> P;\nP info[51][11];\n//bool team[51];\nvector<P> v;\n\nmap<int, P> mp;\n//int D[51];\nvector<int> order;\n\n//自作の比較関数\nbool comp(P lhs, P rhs){\n\tif(lhs.first != rhs.first){\n\t\treturn lhs.first < rhs.first;\n\t}\n\tif(lhs.second != rhs.second){\n\t\treturn lhs.second > rhs.second;\n\t}\n}\n\nint main(){\nwhile(1){//start\n\n\n\tint M, T, P, R;\n\tcin >> M >> T >> P >> R;\n\tif(M == 0 and T == 0 and P == 0 and R == 0) break;\n\n\t//初期化\n\tfor(int i = 0; i < 51; i++){\n\t\tfor(int j = 0; j < 11; j++){\n\t\t\tinfo[i][j].first = 0;\n\t\t\tinfo[i][j].second = 0;\n\t\t}\n\t}\n\tbool team[51] = {0};\n\tint D[51] = {0};\n\tint OK[51] = {0};\n\n\t//データを格納\n\tfor(int i = 0; i < R; i++){\n\t\tint m, t, p, j;\n\t\tcin >> m >> t >> p >> j;\n\t\tteam[t] = true;\n\n\t\tif(j == 0){\n\t\t\tinfo[t][p].second = m + 20*info[t][p].first;\n\t\t\tOK[t-1] += 1;\n\t\t}\n\t\telse{\n\t\t\tinfo[t][p].first += 1;\n\t\t}\n\t}\n\n\t//vの内部はキーがチーム名(解いた数/合計時間)\n\tfor(int i = 1; i <= T; i++){\n\t\t\tint sum = 0, ok = 0;\n\t\t\tfor(int j = 0; j < 11; j++) sum += info[i][j].second;\n\t\t\t//for(int j = 0; j < 11; j++) if(info[i][j].second) ok += 1;\n\t\t\tint tmp = OK[i-1];\n\t\t\tv.push_back(make_pair(tmp, sum));\n\t\t\tmp[i] = make_pair(tmp, sum);\n\t}\n\n\tsort(v.begin(), v.end(), comp);\n\treverse(v.begin(), v.end());\n\t//debug\n\t//for(int i = 0; i < (int)v.size(); i++) cout << v[i].first << \" \" << v[i].second << endl;\n\n\t//重複カウンタを作成\n\tint d = 1;\n\tD[0] = 1;\n\tfor(int i = 1; i < (int)v.size(); i++){\n\t\tif(v[i-1].first == v[i].first and v[i-1].second == v[i].second){\n\t\t\tD[i] = d;\n\t\t}\n\t\telse{\n\t\t\td++;\n\t\t\tD[i] = d;\n\t\t}\n\t}\n\n\t//debug\n\t//for(int i = 0; i < (int)v.size(); i++) cout << D[i] << endl;\n\n\t//ソート結果にチーム名を割り当てる\n\tbool vis[51] = {false};\n\tfor(int i = 0; i < (int)v.size(); i++){\n\t\tfor(int j = (int)v.size(); 1 <= j; j--){\n\t\t\tif(v[i] == mp[j]){\n\t\t\t\tif(vis[j] == false){\n\t\t\t\t\torder.push_back(j);\n\t\t\t\t\tvis[j] = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t//debug\n\t//for(int i = 0; i < (int)v.size(); i++) cout << order[i] << endl;\n\n\t//出力\n\t//まず重複数を記録する\n\tint num[51] = {0};\n\tfor(int i = 0; i < 51; i++) num[D[i]] += 1;\n\n\tstring ans = \"A\";\n\tint idx = 0;\n\tfor(int i = 1; i <= (int)order.size(); i++){\n\t\tif(num[i] == 0) break;\n\t\telse if(num[i] == 1){\n\t\t\tans += to_string(order[idx]);\n\t\t\tidx++;\n\t\t}\n\t\telse{\n\t\t\tfor(int j = 0; j < num[i]; j++){\n\t\t\t\tif(j == num[i]-1) ans += to_string(order[idx]);\n\t\t\t\telse ans += to_string(order[idx]) + \"=\";\n\t\t\t\tidx++;\n\t\t\t}\n\t\t}\n\t\tif(idx != (int)order.size()) ans += \",\";\n\t}\n\n\tans.erase(ans.begin() + 0);\n\t//ans.erase(ans.end() - 1);\n\tcout << ans << endl;\n\n\t//初期化\n\tv.clear();\n\tmp.clear();\n\torder.clear();\n\n\n}//end\n\n\treturn 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<string.h>\n#include<vector>\n#include<list>\n#include<stdio.h>\n#include<math.h>\n#include<iomanip>\n#include<map>\n#include<stack>\n#include<queue>\n#include<algorithm>\n#define range(i,a,b) for(int i = (a); i < (b); i++)\n#define rep(i,b) range(i,0,b)\n#define debug(x) cout << \"debug \" << x << endl;\nusing namespace std;\n\nstruct result{\n    short team;\n    int accepted;\n    int time;\n};\n\nint main(){\n    int M, T, P, R;\n    while(cin >> M >> T >> P >> R, M||T||P||R){\n        int data[55][15];\n        rep(i,55){\n            rep(j,15){\n                data[i][j] = -100;\n            }\n        }\n        int m,t,p,r;\n        rep(i,R){\n            cin >> m >> t >> p >> r;\n            t--; p--;\n            if(r == 0){\n                if(data[t][p] < 0){\n                    data[t][p] = m + (-1 * data[t][p] - 100) * 20;\n                }else{\n                    data[t][p] = m;\n                }\n            }else{\n                data[t][p]--;\n            }\n        }\n        struct result res[55];\n        rep(i,T){\n            int accepted = 0;\n            int time = 0;\n            rep(j,P){\n                if(data[i][j] != -100 && data[i][j] != -1){\n                    accepted++;\n                    time+= data[i][j];\n                }\n            }\n            res[T - 1 - i].team = i + 1;\n            res[T - 1 - i].accepted = accepted;\n            res[T - 1 - i].time = time;\n        }\n        rep(i,T - 1){\n            for(int j = T - 1; j > i; j--){\n                if(res[j].accepted > res[j - 1].accepted){\n                    struct result g = res[j];\n                    res[j] = res[j - 1];\n                    res[j - 1] = g;\n                }\n            }\n        }\n        rep(i,T){\n            rep(j,T){\n                if(res[j].accepted == res[j + 1].accepted && res[j].time > res[j + 1].time){\n                    struct result g = res[j];\n                    res[j] = res[j + 1];\n                    res[j + 1] = g;\n                }\n            }\n        }\n        rep(i,T){\n            if(i && res[i - 1].accepted == res[i].accepted && res[i - 1].time == res[i].time){\n                cout << '=';\n            }else if(i){\n                cout << ',';\n            }\n            cout << res[i].team;\n        }\n        cout << endl;\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<vector>\n#include<cstring>\n#include<algorithm>\nusing namespace std;\n\ntypedef pair<int,int> pii;\ntypedef pair<pii,int> tri;\nint main(){\n  int m,t,p,r;\n  int team[55][15];\n  while(cin>>m>>t>>p>>r,m){\n    memset(team,0,sizeof(team));\n    vector<tri> ans;\n    int a,b,c,d;\n    for(int i=0;i<r;i++){\n      cin>>a>>b>>c>>d;\n      if(d!=0){\n\tteam[b][c]++;\n      }else{\n\tteam[b][p+1]+=a+20*team[b][c];\n\tteam[b][p+2]++;\n      }\n    }\n    for(int i=1;i<=t;i++){\n      ans.push_back(tri(pii(-team[i][p+2],team[i][p+1]),-i));\n    }\n    sort(ans.begin(),ans.end());\n    for(int i=0;i<t;i++){\n      cout<<-ans[i].second;\n      if(i+1==t)cout<<endl;\n      else if(ans[i].first == ans[i+1].first)cout<<\"=\";\n      else cout<<\",\";\n    }\n  }\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n#include <cstdio>\n\n#define REP(i,n) for( int i = 0; i < n; i++ )\n\n\nusing namespace std;\n\n/*\n &#227;&#130;&#136;&#227;&#130;&#138;&#229;&#164;&#154;&#227;&#129;&#143;&#227;&#129;&#174;&#229;&#149;&#143;&#233;&#161;&#140;&#227;&#129;&#171;&#230;&#173;&#163;&#232;則&#163;&#227;&#129;&#151;&#227;&#129;&#159;&#227;&#131;&#129;&#227;&#131;&#188;&#227;&#131;&#160;&#227;&#130;&#146;&#228;&#184;&#138;&#228;&#189;&#141;&#227;&#129;即&#227;&#129;&#153;&#227;&#130;&#139;&#239;&#188;&#142;\n &#230;&#173;&#163;&#232;則&#163;&#227;&#129;&#151;&#227;&#129;&#159;&#229;&#149;&#143;&#233;&#161;&#140;&#230;&#149;属&#227;&#129;&#140;&#229;&#144;&#140;&#227;&#129;&#152;&#229;&#160;卒&#229;&#144;&#136;&#227;&#129;&#175;&#239;&#188;&#140;&#230;&#137;&#128;&#232;?&#129;&#230;&#153;&#130;&#233;&#150;&#147;&#229;&#144;&#136;&#232;即&#136;&#227;&#129;&#174;&#229;属&#145;&#227;&#129;&#170;&#227;&#129;&#132;&#227;&#131;&#129;&#227;&#131;&#188;&#227;&#131;&#160;&#227;&#130;&#146;&#228;&#184;&#138;&#228;&#189;&#141;&#227;&#129;即&#227;&#129;&#153;&#227;&#130;&#139;&#239;&#188;&#142;\n &#232;&#164;&#135;&#230;&#149;属&#227;&#129;&#174;&#227;&#131;&#129;&#227;&#131;&#188;&#227;&#131;&#160;&#227;&#129;&#140;&#229;&#144;&#140;&#230;&#149;属&#227;&#129;&#174;&#229;&#149;&#143;&#233;&#161;&#140;&#227;&#129;&#171;&#230;&#173;&#163;&#232;則&#163;&#227;&#129;&#151;&#239;&#188;&#140;&#230;&#137;&#128;&#232;?&#129;&#230;&#153;&#130;&#233;&#150;&#147;&#229;&#144;&#136;&#232;即&#136;&#227;&#130;&#130;&#229;&#144;&#140;&#227;&#129;&#152;&#227;&#129;&#170;&#227;&#130;&#137;&#239;&#188;&#140;&#227;&#129;&#157;&#227;&#130;&#140;&#227;&#130;&#137;&#227;&#129;&#174;&#227;&#131;&#129;&#227;&#131;&#188;&#227;&#131;&#160;&#227;&#130;&#146;&#229;&#144;&#140;&#233;&#160;&#134;&#228;&#189;&#141;&#227;&#129;即&#227;&#129;&#153;&#227;&#130;&#139;&#239;&#188;&#142;\n */\n\nstruct team{\n\tint ans,time,name;\n    int q[50]={};\n    \n\tteam() : ans(0), time(0), name(0) {}\n    \n    bool operator <( const team& Right )const {\n        return  ans != Right.ans ? ans < Right.ans :\n        time != Right.time ? time > Right.time :\n        name <  Right.name;\n    }\n};\n\n\nint main()\n{\n\tint M,T,P,R;\n\t// M&#227;&#129;&#175;&#239;&#188;&#140;&#227;&#130;&#179;&#227;&#131;&#179;&#227;&#131;&#134;&#227;&#130;&#185;&#227;&#131;&#136;&#227;&#129;&#174;&#229;則&#139;&#227;&#129;&#190;&#227;&#130;&#138;&#227;&#129;&#139;&#227;&#130;&#137;&#231;&#181;&#130;&#227;&#130;&#143;&#227;&#130;&#138;&#227;&#129;&#190;&#227;&#129;則&#227;&#129;&#174;&#230;&#153;&#130;&#233;&#150;&#147;&#227;&#129;則&#227;&#129;&#130;&#227;&#130;&#139;&#239;&#188;&#142; T&#227;&#129;&#175;&#239;&#188;&#140;&#227;&#131;&#129;&#227;&#131;&#188;&#227;&#131;&#160;&#230;&#149;属&#227;&#129;則&#227;&#129;&#130;&#227;&#130;&#139;&#239;&#188;&#142; P&#227;&#129;&#175;&#239;&#188;&#140;&#229;&#149;&#143;&#233;&#161;&#140;&#230;&#149;属&#227;&#129;則&#227;&#129;&#130;&#227;&#130;&#139;&#239;&#188;&#142; R&#227;&#129;&#175;&#239;&#188;&#140;&#230;&#143;&#144;&#229;&#135;&#186;&#232;即&#152;&#233;&#140;&#178;&#227;&#129;&#174;&#230;&#149;属&#227;&#129;則&#227;&#129;&#130;&#227;&#130;&#139;\n\twhile( cin >> M >> T >> P >> R )\n\t{\n\t\tint m,t,p,k;\n\t\tvector<team> team_array(T+1);\n\t\tif( T == 0 ) return 0;\n\t\tfor( int i = 1; i <= T; i++)\n\t\t\tteam_array[i].name = i;\n\t\t// mk&#227;&#129;&#175;&#239;&#188;&#140;&#231;&#181;&#140;&#233;&#129;&#142;&#230;&#153;&#130;&#233;&#150;&#147;&#227;&#129;則&#227;&#129;&#130;&#227;&#130;&#139;&#239;&#188;&#142; tk&#227;&#129;&#175;&#239;&#188;&#140;&#227;&#131;&#129;&#227;&#131;&#188;&#227;&#131;&#160;&#231;&#149;&#170;&#229;&#143;&#183;&#227;&#129;則&#227;&#129;&#130;&#227;&#130;&#139;&#239;&#188;&#142; pk&#227;&#129;&#175;&#239;&#188;&#140;&#229;&#149;&#143;&#233;&#161;&#140;&#231;&#149;&#170;&#229;&#143;&#183;&#227;&#129;則&#227;&#129;&#130;&#227;&#130;&#139;&#239;&#188;&#142; jk&#227;&#129;&#175;&#239;&#188;&#140;&#229;&#136;&#164;&#229;&#174;&#154;&#231;&#181;&#144;&#230;&#158;&#156;&#227;&#130;&#146;&#232;&#161;即&#227;&#129;&#153;&#239;&#188;&#136;0&#227;&#129;&#170;&#227;&#130;&#137;&#230;&#173;&#163;&#232;則&#163;&#239;&#188;&#140;0&#228;&#187;\\&#229;&#164;&#150;&#227;&#129;&#170;&#227;&#130;&#137;&#228;&#184;&#141;&#230;&#173;&#163;&#232;則&#163;&#239;&#188;&#137;\n\t\tREP(i,R)\n\t\t{\n\t\t\tcin >> m >> t >> p >> k;\n\t\t\tteam &tm = team_array[t];\n\t\t\tif( !k ){\n\t\t\t\ttm.ans++;\n\t\t\t\ttm.time += m;\n                if( tm.q[p] )\n                    tm.time += 20 * tm.q[p];\n\t\t\t}\n            else{\n                tm.q[p]++;\n            }\n            \n\t\t}\n\t\t\n        sort( team_array.begin() + 1 , team_array.end() );\n\t\t\n        for( int i = T; i > 0; i-- )\n        {\n            char c;\n            if( i == 1 ){\n                cout << team_array[i].name << endl;\n                continue;\n            }\n            else if ( team_array[i].ans == team_array[i-1].ans &&\n                team_array[i].time == team_array[i-1].time) {\n                c = '=';\n            }\n            else{\n                c = ',';\n            }\n\t\t\tcout << team_array[i].name << c;\n        }\n        \n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<vector>\n#include<algorithm>\n#include<string>\nusing namespace std;\nint m,t,p,r;\nstruct team{\nint time[200];\nbool ok[200];\nint id;\nint ac;\n};\n//team a,team b\nint oror(team a,team b){//aのほうが強ければ1,bなら0,同じなら2\nif(a.ac>b.ac)return 1;\nelse if(a.ac<b.ac)return 0;\nint at=0,bt=0;\nfor(int i=0;i<=p;i++){\nif(a.ok[i]==true)at+=a.time[i];\nif(b.ok[i]==true)bt+=b.time[i];\n}\nif(at<bt)return 1;\nelse if(at>bt)return 0;\nelse return 2;\n}\nint main(){\n\n\twhile(true){\n\tcin>>m>>t>>p>>r;\n\tif(m+t+p+r==0)break;\n\tvector<team>ta(0);\n\tta.resize(200);\n\n\tfor(int i=0;i<=t;i++)for(int j=0;j<200;j++)ta[i].time[j]=0,ta[i].ok[j]=0;\n\tfor(int i=0;i<=t;i++)ta[i].id=i,ta[i].ac=0;\n\tfor(int i=0;i<r;i++){\n\tint a,b,c,d;\n\tcin>>a>>b>>c>>d;//a:経過時間:bチーム番号c:問題番号j:0奈良正解それ以外不正解\n\tif(d==0){\n\tta[b].time[c]+=a;\n\tta[b].ac++;\n\tta[b].ok[c]=true;\n\t}\n\telse {\n\tta[b].time[c]+=20;\n\t}\n\t}\n\tta.erase(ta.begin());\n\tfor(int i=0;i<t;i++){\n\tfor(int j=0;j<t;j++){\n\tif(oror(ta[i],ta[j])==1)swap(ta[i],ta[j]);\n\tif(oror(ta[i],ta[j])==2&&ta[i].id>ta[j].id)swap(ta[i],ta[j]);\n\t}\n\t}\n\tfor(int i=0;i<t-1;i++){\n\tif(oror(ta[i],ta[i+1])!=2)cout<<ta[i].id<<\",\";\n\telse cout<<ta[i].id<<\"=\";\n\t}\n\tcout<<ta[t-1].id<<endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nclass Team{\n  public:\n  int id;\n  int solvednum;\n  int penalty;\n  vector<bool> solved;\n  vector<int> WA;\n  Team(int id, int N){\n    this->id = id;\n    solvednum = 0;\n    penalty = 0;\n    solved.resize(N, false);\n    WA.resize(N, 0);\n  }\n  bool operator == (const Team &t)const{\n    return id == t.id;\n  }\n  bool operator < (const Team &t)const{\n    if(solvednum == t.solvednum){\n      if(penalty == t.penalty){\n        return id > t.id;\n      }\n      return penalty < t.penalty;\n    }\n    return solvednum > t.solvednum;\n  }\n  string toString(){\n    return to_string(id) + \" \" + to_string(solvednum) + \" \" + to_string(penalty);\n  }\n};\n\nint main(void){\n  ios::sync_with_stdio(false);\n  cin.tie(0);\n  int M, T, P, R;\n  while(cin >> M >> T >> P >> R, M | T | P | R){\n  vector<Team> teams;\n  for(int i = 0;  i < T; i++){\n    teams.push_back(Team(i+1, P));\n  }\n  for(int asd = 0; asd < R; asd++){\n    int m, t, p, j;\n    cin >> m >> t >> p >> j;\n    t--;\n    if(j == 0){\n      teams[t].solved[p] = true;\n      teams[t].solvednum++;\n      teams[t].penalty += m + 20*teams[t].WA[p];\n    }else{\n      teams[t].WA[p]++;\n    }\n  }\n  sort(teams.begin(), teams.end());\n\n  cout << teams[0].id;\n  for(int i = 1; i < T; i++){\n    if(teams[i].solvednum == teams[i-1].solvednum && teams[i].penalty == teams[i-1].penalty){\n      cout << '=';\n    }else{\n      cout << ',';\n    }\n    cout << teams[i].id;\n  }\n  cout << endl;\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nint main(void){\n    int M,T,P,R,m,t,p,j;\n\n    while(cin>>M>>T>>P>>R, M|T|P|R){\n        int cnt[51]={};\n        int time[51]={};\n        int penalty[51][11]={};\n        int s[51]={};\n\n        /*????????¨??????????????£????¨????*/\n        while(R--){\n            cin>>m>>t>>p>>j;\n            if(j==0){\n                ++cnt[t];\n                time[t] += m+penalty[t][p];\n            }\n            else penalty[t][p]+=20;\n        }\n\n        /*???????????¨??????*/\n        for(t=1;t<=T;t++)s[t]=t;\n\n        /*??????????????????*/\n        for(int a=1;a<T;a++){\n            for(int b=T;b>a;b--){\n                if(cnt[s[b]]<cnt[s[b-1]]\n                   ||(cnt[s[b]]==cnt[s[b-1]] && time[s[b]]>time[s[b-1]])\n                   ||(cnt[s[b]]==cnt[s[b-1]] && time[s[b]]==time[s[b-1]] && s[b]<s[b-1]))\n                    swap(&s[b],&s[b-1]);\n            }\n        }\n\n        /*??????????????????????????????*/\n        for(t=T;t>=1;t--){\n            cout<<s[t];\n            if(t==1)break;\n            if(cnt[s[t]]==cnt[s[t-1]] && time[s[t]]==time[s[t-1]])cout<<\"=\";\n            else cout<<\",\";\n        }\n        cout<<endl;\n\n    }\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n#include <vector>\nstatic const int N = 2001;\nusing namespace std;\nstruct data{\n  int correctcnt,time,tnum;\n  bool operator<(const data& right)const{\n    if(correctcnt!=right.correctcnt) return correctcnt>right.correctcnt;\n    if(time!=right.time) return time<right.time;\n    return tnum>right.tnum;\n  }\n};\nint main(){\n  int M,T,P,R,i,j,m[N],t[N],p[N],in_j[N],incorrectcnt;\n  while(1){\n    cin >> M >> T >> P >> R;\n    vector<data> V(T);\n    if(M==0&&T==0&&P==0&&R==0) break;\n    for(i=0;i<R;i++){\n      cin >> m[i] >> t[i] >> p[i] >> in_j[i];\n    }\n    for(i=0;i<T;i++){\n      V[i].tnum=i+1;\n      V[i].correctcnt=V[i].time=0;\n    }\n    for(i=0;i<R;i++){\n      if(in_j[i]==0){\n\tV[t[i]-1].correctcnt++;\n\tincorrectcnt=0;\n\tfor(j=0;j<i;j++){\n\t  if(t[i]==t[j]&&p[i]==p[j]) incorrectcnt++;\n\t}\n\tV[t[i]-1].time+=m[i]+20*incorrectcnt;\n      }\n    }\n    sort(V.begin(),V.end());\n    for(i=0;i<T-1;i++){\n      cout << V[i].tnum;\n      if(V[i].correctcnt==V[i+1].correctcnt&&V[i].time==V[i+1].time) cout << '=';\n      else cout << ',';\n    }\n    cout << V[T-1].tnum << endl;\n  }  \n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<vector>\nusing namespace std;\n\ntypedef pair<int,int> pii;\ntypedef pair<pii,int> tri;\nint main(){\n  int m,t,p,r;\n  int team[55][15];\n  while(cin>>m>>t>>p>>r,m){\n    memset(team,0,sizeof(team));\n    vector<tri> ans;\n    int a,b,c,d;\n    for(int i=0;i<r;i++){\n      cin>>a>>b>>c>>d;\n      if(d!=0){\n\tteam[b][c]++;\n      }else{\n\tteam[b][p+1]+=a+20*team[b][c];\n\tteam[b][p+2]++;\n      }\n    }\n    for(int i=1;i<=t;i++){\n      ans.push_back(tri(pii(-team[i][p+2],team[i][p+1]),-i));\n    }\n    sort(ans.begin(),ans.end());\n    for(int i=0;i<t;i++){\n      cout<<-ans[i].second;\n      if(i+1==t)cout<<endl;\n      else if(ans[i].first == ans[i+1].first)cout<<\"=\";\n      else cout<<\",\";\n    }\n  }\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\nusing namespace std;\n\nclass team{\npublic:\n\tint num, ans, time;\n\tteam(int n){\n\t\tnum = n;\n\t\tans = time = 0;\n\t}\n\tbool operator<(const team &t2)const{\n\t\tif (ans != t2.ans)\n\t\t\treturn ans > t2.ans;\n\t\telse if (time != t2.time)\n\t\t\treturn time < t2.time;\n\t\telse\n\t\t\treturn num > t2.num;\n\t}\n};\n\nint main()\n{\n\tint M, T, P, R, m[2001], t[2001], p[2001], r[2001], before;\n\twhile (cin >> M >> T >> P >> R, (M || T || P || R)){\n\t\tvector<team> v;\n\t\tvector<team>::iterator pv;\n\t\t//入力\n\t\tfor (int i = 0; i < R; i++){\n\t\t\tcin >> m[i] >> t[i] >> p[i] >> r[i];\n\t\t}\n\n\t\t//各チームの時間\n\t\tfor (int i = 1; i <= T; i++){\n\t\t\tteam te = team(i);\n\t\t\tfor (int j = 0; j < R; j++){\n\t\t\t\t//正解時間の計算\n\t\t\t\tif (t[j] == i && r[j] == 0){\n\t\t\t\t\tte.time += m[j];\n\t\t\t\t\tte.ans++;\n\t\t\t\t\t//以前のペナルティを計算\n\t\t\t\t\tfor (int k = 0; k < j; k++){\n\t\t\t\t\t\tif (t[k] == i && p[k] == p[j]){\n\t\t\t\t\t\t\tte.time += 20;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tv.push_back(te);\n\t\t}\n\n\t\t//ソート\n\t\tsort(v.begin(), v.end());\n\t\tpv = v.begin();\n\t\tbefore = -1;\n\t\twhile (pv != v.end()){\n\t\t\tif (before == pv->time)\n\t\t\t\tcout << \"=\" << pv->num;\n\t\t\telse {\n\t\t\t\tif (pv == v.begin())\n\t\t\t\t\tcout << pv->num;\n\t\t\t\telse\n\t\t\t\t\tcout << \",\" << pv->num;\n\t\t\t\tbefore = pv->time;\n\t\t\t}\n\t\t\tpv++;\n\t\t}\n\t\tcout << endl;\n\t\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#define N 2001\nusing namespace std;\nstruct team{\n  int tnum;\n  int correct;\n  int time;\n};\nint main(){\n  int m,t,p,r,im[N],it[N],ip[N],ij[N],incorrect,i,j;\n  struct team data[51];\n  while(1){\n    cin >> m >> t >> p >> r;\n    if(m==0&&t==0&&p==0&&r==0) break;\n    for(i=0;i<r;i++) cin >> im[i] >> it[i] >> ip[i] >> ij[i];\n    for(i=1;i<=t;i++){\n      data[i].tnum=i;\n      data[i].correct=0;\n      data[i].time=0;\n    }\n    for(i=0;i<r;i++){\n      if(ij[i]==0){\n\tdata[it[i]].correct++;\n      \tincorrect=0;\n\tfor(j=0;j<i;j++){\n\t  if(it[i]==it[j]&&ip[i]==ip[j]) incorrect++;\n\t}\n\tdata[it[i]].time=data[it[i]].time+incorrect*20+im[i];\n      }\n    }\n    for(i=0;i<=t;i++){\n      for(j=2;j<=t;j++){\n\tif(data[j].tnum>data[j-1].tnum) swap(data[j],data[j-1]);\n      }\n    }\n    for(i=0;i<=t;i++){\n      for(j=2;j<=t;j++){\n\tif(data[j].time<data[j-1].time) swap(data[j],data[j-1]);\n      }\n    }\n    for(i=0;i<=t;i++){\n      for(j=2;j<=t;j++){\n\tif(data[j].correct>data[j-1].correct) swap(data[j],data[j-1]);\n      }\n    }\n    for(i=1;i<t;i++){\n      cout << data[i].tnum;\n      if(data[i].correct==data[i+1].correct&&data[i].time==data[i+1].time)\n\tcout << '=';\n      else cout << ',';\n      if(i==t-1) cout << data[i+1].tnum;\n    }\n    cout << endl;\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n#include <iomanip>\n#include <stdio.h>\n#include <stdlib.h>\n#include <string.h>\n#include <math.h>\n#include <vector>\n#include <string>\n#include <queue>\n#include <deque>\n#include <list>\n#include <set>\n#include <unordered_set>\n#include <map>\n#include <unordered_map>\n#include <bitset>\n#include <random>\n#include <complex>\n#include <assert.h>\n\nusing namespace std;\ntypedef long long ll;\n#define endl '\\n'\n\ntemplate<typename T>\ninline bool chmin(T& x, T a) {\n\tif (x >= a) { x = a; return true; }\n\treturn false;\n}\n\ntemplate<typename T>\ninline bool chmax(T& x, T a) {\n\tif (x <= a) { x = a; return true; }\n\treturn false;\n}\n\nint main() {\n\tios::sync_with_stdio(false);\n\tstd::cin.tie(0);\n\n\twhile (1) {\n\t\tint M, T, P, R; cin >> M >> T >> P >> R;\n\t\tif (M == 0) { break; }\n\n\t\tvector<vector<ll>> penalty(T);\n\t\tvector<ll> solved(T, 0);\n\t\tvector<ll> elapsed(T, 0);\n\n\t\tfor (int i = 0; i < T; i++) {\n\t\t\tpenalty[i].resize(P, 0);\n\t\t}\n\t\tfor (int i = 0; i < R; i++) {\n\t\t\tint m, t, p, _j; cin >> m >> t >> p >> _j;\n\t\t\tbool judge = (_j == 0);\n\t\t\tt--;\n\t\t\tp--;\n\t\t\tif (judge == true) {\n\t\t\t\tsolved[t]++;\n\t\t\t\telapsed[t] += m + 20 * penalty[t][p];\n\t\t\t}\n\t\t\telse {\n\t\t\t\tpenalty[t][p]++;\n\t\t\t}\n\t\t}\n\t\tvector<pair<ll, int>> ans;\n\t\tfor (int i = 0; i < T; i++) {\n\t\t\tll score = -10000000LL * solved[i] + elapsed[i];\n\t\t\tans.push_back({ score, -i - 1 });\n\t\t}\n\t\tsort(ans.begin(), ans.end());\n\t\tfor (int i = 0; i < T; i++) {\n\t\t\tif (i != 0) {\n\t\t\t\tif (ans[i].first == ans[i - 1].first) {\n\t\t\t\t\tcout << \"=\";\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tcout << \",\";\n\t\t\t\t}\n\t\t\t}\n\t\t\tcout << -ans[i].second;\n\t\t}\n\t\tcout << endl;\n\t}\n\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nbool comp(pair<pair<int,int>,int> p1, pair<pair<int,int>,int> p2){\n\n    if(p1.first.first == p2.first.first){\n        if(p1.first.second == p2.first.second){\n            return p1.second < p2.second;\n        }\n        return p1.first.second > p2.first.second;\n    }\n    return p1.first.first < p2.first.first;\n\n}\n\nint main() {\n\n    while(1) {\n\n        int M,T,P,R;\n\n        cin >> M >> T >> P >> R;\n\n        if(M == 0 && T == 0 && P == 0 && R == 0) break;\n\n        pair<int,int> team[T+1]; //solve_num, time\n        pair<bool,int> try_progrums[T+1][P]; //is_tried, tried_count\n\n        team[0] = make_pair(-1,-1);\n\n        for(int i=1; i<T+1; i++){\n            team[i] = make_pair(0,0);\n            for(int j=0; j<P; j++) {\n                try_progrums[i][j] = make_pair(false, 0);\n            }\n        }\n\n        for(int i=0; i<R; i++){\n\n            int m, t, p, j;\n\n            cin >> m >> t >> p >>j;\n\n            if(j == 0){\n                team[t].first++;\n                team[t].second += m + try_progrums[t][p].second * 20;\n            }\n            else{\n                try_progrums[t][p].first = true;\n                try_progrums[t][p].second++;\n\n            }\n        }\n\n        pair<pair<int,int>,int> team_result[T+1];\n\n        for(int i=0; i<T+1; i++){\n            team_result[i] = make_pair(make_pair(team[i].first,team[i].second),i);\n\n    //        cout << team[i].first << \" \";\n        }\n\n  /*      cout << endl;\n\n        for(int i=0; i<T+1; i++){\n            cout << team[i].second << \" \";\n        }\n\n        cout << endl;\n*/\n        sort(team_result,team_result+T+1,comp);\n\n        cout << team_result[T].second;\n\n        for(int i=T; i>1; i--){\n            if(team_result[i].first.first == team_result[i-1].first.first && team_result[i].first.second == team_result[i-1].first.second){\n                cout << '=' << team_result[i-1].second;\n            }\n            else{\n                cout << ',' << team_result[i-1].second;\n            }\n        }\n\n        cout << endl;\n\n\n\n\n    }\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstring>\n#include <algorithm>\n\nusing namespace std;\n\ntypedef struct team {\n    int name;\n    int time, sol;\n} team;\n\nbool compt(const team & a, const team & b){\n    if(a.sol != b.sol) return a.sol > b.sol;\n    if(a.time != b.time) return a.time < b.time;\n    return a.name > b.name;\n}\nbool eqt(const team & a, const team & b){\n    return a.sol == b.sol && a.time == b.time;\n}\n\nint pena[51][11];\nteam teams[51];\n\nint main(){\n    int M,T,P,R;\n    while(cin >> M >> T >> P >> R, M+T+P+R){\n        memset(pena,0,sizeof(pena));\n        memset(teams,0,sizeof(teams));\n        for(int i=0; i<T; i++){\n            teams[i].name = i+1;\n        }\n        for(int i=0; i<R; i++){\n            int m,t,p,j;\n            cin >> m >> t >> p >> j; t--;\n            if(j == 0){ // ac\n                teams[t].time += pena[t][p] + m;\n                teams[t].sol++;\n            } else { // wa\n                pena[t][p] += 20;\n            }\n        }\n        sort(teams, teams+T, compt);\n        // for(int i=0; i<T; i++){\n        //     cout << \" \" << teams[i].name << \" \"\n        //          << teams[i].sol << \" \"\n        //          << teams[i].time << endl;\n        // }\n        for(int i=0; i<T-1; i++){\n            cout << teams[i].name;\n            if(eqt(teams[i],teams[i+1])) cout << \"=\";\n            else cout << \",\";\n        }\n        cout << teams[T-1].name << endl;\n    }\n}\n        \n    \n            \n            \n            \n            "
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\n#ifdef LOCAL\n#include \"../dump.hpp\"\n#else\n#define dump(...)\n#endif\n\n#define rep(i,n) for(ll i=0,i##_cond=(n);i<i##_cond;++i)\n#define FOR(i,a,b) for(ll i=(a),i##_cond=(b);i<i##_cond;++i)\n#define ROF(i,a,b) for(ll i=(a)-1,i##_cond=(b);i>=i##_cond;--i)\n#define all(a) (a).begin(),(a).end()\n#define rall(a) (a).rbegin(),(a).rend() //sortで大きい順\n#define UNIQUE(v) v.erase(unique(all(v)),v.end())\n#define SUM(a) accumulate(all(a),0)\n#define sz(x) ((ll)(x).size())\n#define pb push_back\n#define fst first\n#define snd second\n#define mp make_pair\n\ntypedef long long ll;\ntypedef vector<ll> vi;\ntypedef vector<vi> vvi;\ntypedef vector<string> vs;\ntypedef pair<ll,ll> pii;\n\nconst ll inf = 1ll<<62;\nconst ll mod = 1e9+7;\n\n#define int ll\n\nmain()\n{\n  while(1){\n    int M,T,P,R; cin >> M >> T >> P >> R;\n    if(M == 0) break;\n    vvi problem(T,vi(P)); // どのチームがどの問題に何回不正解か\n    vector<pair<pii,int>> team(T); // 正答数、所要時間合計、チーム番号\n    rep(i,T) team[i].snd = i + 1; // 本当はi+1\n    rep(i,R){\n      int m,t,p,j; cin >> m >> t >> p >> j; t--; p--;\n      if(j) problem[t][p]++;\n      else{\n\tteam[t].fst.fst++;\n\tteam[t].fst.snd -= m + 20 * problem[t][p];\n      }\n    }\n    sort(rall(team));\n    cout << team[0].snd;\n    rep(i,T-1){\n      if(team[i].fst.fst == team[i+1].fst.fst and team[i].fst.snd == team[i+1].fst.snd) cout << \"=\";\n      else cout << \",\";\n      cout << team[i+1].snd;\n    }\n    cout << endl;\n    //dump(team);\n  }\t    \n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <cmath>\n#include <iostream>\n#include <vector>\n#include <queue>\n#include <map>\n#include <set>\n#include <tuple>\n#include <algorithm>\n#include <utility>\n#include <iomanip>\n\n#define int long long int\n#define rep(i, n) for(int i = 0; i < (n); ++i)\n\nusing namespace std;\n\ntypedef pair<int, int> P;\n\nconst int INF = 1e15;\nconst int MOD = 1e9+7;\n\nbool comp(tuple<int, int, int>& x, tuple<int, int, int>& y){\n    int x_i = get<0>(x);\n    int y_i = get<0>(y);\n    int x_a = get<1>(x);\n    int y_a = get<1>(y);\n    int x_t = get<2>(x);\n    int y_t = get<2>(y);\n\n    if(x_a != y_a){\n        return x_a > y_a;\n    }\n\n    if(x_t != y_t){\n        return x_t < y_t;\n    }\n\n    return x_i > y_i;\n}\n\nsigned main(){\n    while(true){\n        int M, T, P, R;\n        cin >> M >> T >> P >> R;\n\n        if(M == 0 && T == 0 && P == 0 && R == 0){\n            break;\n        }\n\n        vector<vector<int>> res(T+1, vector<int>(P+1));\n        vector<vector<bool>> ac(T+1, vector<bool>(P+1, false));\n        vector<int> time(T+1);\n\n        rep(i, R){\n            int m, t, p, j;\n            cin >> m >> t >> p >> j;\n\n            if(j == 0){\n                ac[t][p] = true;\n                time[t] += m;\n                continue;\n            }\n            res[t][p]++;\n        }\n\n        vector<tuple<int, int, int>> rank;\n        for(int i = 1; i <= T; i++){\n            int pena = 0;\n            int AC = 0;\n            for(int j = 1; j <= P; j++){\n                if(ac[i][j]){\n                    pena += res[i][j];\n                    AC++;\n                }\n            }\n            pena *= 20;\n\n            rank.emplace_back(i, AC, time[i] + pena);\n        }\n        sort(rank.begin(), rank.end(), comp);\n\n        rep(i, T-1){\n            int r = get<0>(rank[i]);\n            int x_a = get<1>(rank[i]);\n            int y_a = get<1>(rank[i+1]);\n            int x_t = get<2>(rank[i]);\n            int y_t = get<2>(rank[i+1]);\n\n            if(x_a != y_a || x_t != y_t){\n                cout << r << \",\";\n            }else{\n                cout << r << \"=\";\n            }\n        }\n        cout << get<0>(rank[T-1]) << endl;\n\n    }\n\n    return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\nusing namespace std;\nstruct S{\n  int number;\n  int AC[10]={},WA[10]={},time=0;\n  int sumAC=0;\n};\nbool cmp(S a,S b){\n  if(a.sumAC==b.sumAC){\n      if(a.time==b.time)return a.number>b.number;\n      return a.time<b.time;\n  }\n  return a.sumAC>b.sumAC;\n \n}\nsigned main (){\n  int M,T,P,R;\n  while(cin>>M>>T>>P>>R&&M){\n    vector<S> v(T);\n    for(int i=0;i<T;i++)v[i].number=i+1; //まずは番号を入れる\n    for(int i=0;i<R;i++){\n      int m,t,p,j;\n      cin>>m>>t>>p>>j;\n      t--;p--; //0-indexに\n      if(j==0){ //正解なら\n          v[t].AC[p]++;\n          v[t].time+=v[t].WA[p]*20;\n          v[t].time+=m;\n      }\n      else v[t].WA[p]++; //誤答なら\n    }\n    for(int i=0;i<T;i++){\n      for(int j=0;j<P;j++){\n        v[i].sumAC+=v[i].AC[j]; //各チームの正解数を求める\n      }\n    }\n    sort(v.begin(),v.end(),cmp); //上で書いた比較関数cmpを使ってソート。配列の中身が強い順になる\n \n    for(int i=0;i<T;i++){\n      cout<<v[i].number;\n      while(i+1<T&&v[i].sumAC==v[i+1].sumAC&&v[i].time==v[i+1].time){ //順位が同じ時の処理\n          i++;\n          cout<<'='<<v[i].number;\n      }\n      if(i!=T-1)cout<<','; //最後はカンマ打ちません\n    }\n    cout<<endl;\n  }\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\nusing namespace std;\nint main() {\n\tint m, t, p, r;\n\twhile (cin >> m >> t >> p >> r, m) {\n\t\tpair<pair<int, int>, pair<int, int>>log[2014];\n\t\t//time team problem result\n\t\tfor (int i = 0; i < r; i++) \n\t\t\tcin >> log[i].first.first >> log[i].first.second >> log[i].second.first >> log[i].second.second;\n\t\tsort(log, log + r);\n\t\tpair<pair<int, int>, int>point[60];\n\t\t//problems penalty teamnum\n\t\tint penalty[60][15] = {};\n\t\tfor (int i = 1; i <= t; i++) {\n\t\t\tpoint[i].first.first = 15;\n\t\t\tpoint[i].first.second = 0;\n\t\t\tpoint[i].second = i;\n\t\t}\n\t\tfor (int i = 0; i < r; i++) {\n\t\t\tif (log[i].second.second) {\n\t\t\t\t//WRONG ANSWER\n\t\t\t\tpenalty[log[i].first.second][log[i].second.first]++;\n\t\t\t}\n\t\t\telse{\n\t\t\t\t//ACCEPTED\n\t\t\t\tpoint[log[i].first.second].first.first--;\n\t\t\t\tpoint[log[i].first.second].first.second += penalty[log[i].first.second][log[i].second.first] * 20 + log[i].first.first;\n\t\t\t}\n\t\t}\n\t\tfor (int i = 1; i < t; i++) {\n\t\t\tfor (int j = i + 1; j <= t; j++) {\n\t\t\t\tif (point[i].first > point[j].first)swap(point[i], point[j]);\n\t\t\t\telse if (point[i].first == point[j].first)if (point[i].second < point[j].second)swap(point[i], point[j]);\n\t\t\t}\n\t\t}\n\t\tcout << point[1].second;\n\t\tfor (int i = 2; i <= t; i++) {\n\t\t\tif (point[i].first == point[i - 1].first)cout << '=';\n\t\t\telse cout << ',';\n\t\t\tcout << point[i].second;\n\t\t}\n\t\tcout << endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\ntypedef pair<int, int> P;\nP info[51][11];\n//bool team[51];\nvector<P> v;\n\nmap<int, P> mp;\n//int D[51];\nvector<int> order;\n\n//自作の比較関数\nbool comp(P lhs, P rhs){\n\tif(lhs.first != rhs.first){\n\t\treturn lhs.first < rhs.first;\n\t}\n\tif(lhs.second != rhs.second){\n\t\treturn lhs.second > rhs.second;\n\t}\n}\n\nint main(){\nwhile(1){//start\n\n\n\tint M, T, P, R;\n\tcin >> M >> T >> P >> R;\n\tif(M == 0 and T == 0 and P == 0 and R == 0) break;\n\n\t//初期化\n\tfor(int i = 0; i < 51; i++){\n\t\tfor(int j = 0; j < 11; j++){\n\t\t\tinfo[i][j].first = 0;\n\t\t\tinfo[i][j].second = 0;\n\t\t}\n\t}\n\tbool team[51] = {0};\n\tint D[51] = {0};\n\tint OK[51] = {0};\n\n\t//データを格納\n\tfor(int i = 0; i < R; i++){\n\t\tint m, t, p, j;\n\t\tcin >> m >> t >> p >> j;\n\t\tteam[t] = true;\n\n\t\tif(j == 0){\n\t\t\tinfo[t][p].second = m + 20*info[t][p].first;\n\t\t\tOK[t-1] += 1;\n\t\t}\n\t\telse{\n\t\t\tinfo[t][p].first += 1;\n\t\t}\n\t}\n\n\t//vの内部はキーがチーム名(解いた数/合計時間)\n\tfor(int i = 1; i <= T; i++){\n\t\t\tint sum = 0, ok = 0;\n\t\t\tfor(int j = 0; j < 11; j++) sum += info[i][j].second;\n\t\t\t//for(int j = 0; j < 11; j++) if(info[i][j].second) ok += 1;\n\t\t\tint tmp = OK[i-1];\n\t\t\tv.push_back(make_pair(tmp, sum));\n\t\t\tmp[i] = make_pair(tmp, sum);\n\t}\n\n\tsort(v.begin(), v.end(), comp);\n\treverse(v.begin(), v.end());\n\t//debug\n\t//for(int i = 0; i < (int)v.size(); i++) cout << v[i].first << \" \" << v[i].second << endl;\n\n\t//重複カウンタを作成\n\tint d = 1;\n\tD[0] = 1;\n\tfor(int i = 1; i < (int)v.size(); i++){\n\t\tif(v[i-1].first == v[i].first and v[i-1].second == v[i].second){\n\t\t\tD[i] = d;\n\t\t}\n\t\telse{\n\t\t\td++;\n\t\t\tD[i] = d;\n\t\t}\n\t}\n\n\t//debug\n\t//for(int i = 0; i < (int)v.size(); i++) cout << D[i] << endl;\n\n\t//ソート結果にチーム名を割り当てる\n\tbool vis[51] = {false};\n\tfor(int i = 0; i < (int)v.size(); i++){\n\t\tfor(int j = (int)v.size(); 1 <= j; j--){\n\t\t\tif(v[i] == mp[j]){\n\t\t\t\tif(vis[j] == false){\n\t\t\t\t\torder.push_back(j);\n\t\t\t\t\tvis[j] = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t//debug\n\t//for(int i = 0; i < (int)v.size(); i++) cout << order[i] << endl;\n\n\t//出力\n\t//まず重複数を記録する\n\tint num[51] = {0};\n\tfor(int i = 0; i < 51; i++) num[D[i]] += 1;\n\n\tstring ans = \"A\";\n\tint idx = 0;\n\tfor(int i = 1; i <= (int)order.size(); i++){\n\t\tif(num[i] == 0) break;\n\t\telse if(num[i] == 1){\n\t\t\tans += to_string(order[idx]);\n\t\t\tidx++;\n\t\t}\n\t\telse{\n\t\t\tfor(int j = 0; j < num[i]; j++){\n\t\t\t\tif(j == num[i]-1) ans += to_string(order[idx]);\n\t\t\t\telse ans += to_string(order[idx]) + \"=\";\n\t\t\t\tidx++;\n\t\t\t}\n\t\t}\n\t\tans += \",\";\n\t}\n\n\tans.erase(ans.begin() + 0);\n\tans.erase(ans.end() - 1);\n\tcout << ans << endl;\n\n\t//初期化\n\tv.clear();\n\tmp.clear();\n\torder.clear();\n\t\n\tans=\"A\";\n\n\n}//end\n\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\nusing namespace std;\n\nconst int INF=5000000;\n\nint data[51][12];\n\nint main(){\n\tint M,T,P,R;\n\twhile(cin>>M>>T>>P>>R && M){\n\t\tfill((int*)data,(int*)(data+12),0);\n\t\tfor(int i=0;i<R;i++){\n\t\t\tint m,t,p,j;\n\t\t\tcin>>m>>t>>p>>j;\n\t\t\tif(j==0){\n\t\t\t\tdata[t][0]++;\n\t\t\t\tdata[t][11]+=m+data[t][p]*20;\n\t\t\t}\n\t\t\telse data[t][p]++;\n\t\t}\n\t\tint prev[2]={INF,0};\n\t\tfor(int i=0;i<T;i++){\n\t\t\tint ans=0;\n\t\t\tint now[2]={0,INF};\n\t\t\tfor(int j=T;j>=0;j--){\n\t\t\t\tif(data[j][0]>now[0]){\n\t\t\t\t\tnow[0]=data[j][0];\n\t\t\t\t\tnow[1]=data[j][11];\n\t\t\t\t\tans=j;\n\t\t\t\t}\n\t\t\t\telse if(data[j][0]==now[0] && data[j][11]<now[1]){\n\t\t\t\t\tnow[1]=data[j][11];\n\t\t\t\t\tans=j;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(i){\n\t\t\t\tif(memcmp(now,prev,sizeof(now))==0)cout<<\"=\";\n\t\t\t\telse cout<<\",\";\n\t\t\t}\n\t\t\tcout<<ans;\n\t\t\tmemcpy(prev,now,sizeof(now));\n\t\t\tdata[ans][0]=-1;\n\t\t}\n\t\tcout<<endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include \"bits/stdc++.h\"\nusing namespace std;\ntypedef long long ll;\ntypedef pair<int, int> pii;\ntypedef pair<ll, ll> pll;\nconst int INF = 1e9;\nconst ll LINF = 1e18;\ntemplate<class S,class T> ostream& operator << (ostream& out,const pair<S,T>& o){ out << \"(\" << o.first << \",\" << o.second << \")\"; return out; }\ntemplate<class T> ostream& operator << (ostream& out,const vector<T> V){ for(int i = 0; i < V.size(); i++){ out << V[i]; if(i!=V.size()-1) out << \" \";} return out; }\ntemplate<class T> ostream& operator << (ostream& out,const vector<vector<T> > Mat){ for(int i = 0; i < Mat.size(); i++) { if(i != 0) out << endl; out << Mat[i];} return out; }\ntemplate<class S,class T> ostream& operator << (ostream& out,const map<S,T> mp){ out << \"{ \"; for(auto it = mp.begin(); it != mp.end(); it++){ out << it->first << \":\" << it->second; if(mp.size()-1 != distance(mp.begin(),it)) out << \", \"; } out << \" }\"; return out; }\n\n/*\n <url:http://judge.u-aizu.ac.jp/onlinejudge/description.jsp?id=1187&lang=jp>\n 問題文============================================================\n =================================================================\n 解説=============================================================\n ================================================================\n */\nint M,T,P,R;\nstruct Team{\n    int id;\n    int correct;\n    int penalty;\n    vector<int> accept;\n    vector<int> wrong;\n    Team(){};\n    Team(int id,int P):id(id),accept(P),wrong(P),correct(0),penalty(0){}\n    void AC(int P,int time){\n        if(accept[P]) return;\n        accept[P] = 1;\n        penalty += wrong[P]*20 + time;\n        correct++;\n        return;\n    }\n    void WA(int P){\n        wrong[P]++;\n    }\n    bool operator < (const Team& o)const {\n        return correct!=o.correct?correct>o.correct:penalty!=o.penalty?penalty<o.penalty:id>o.id;\n    }\n};\nvoid solve(){\n    vector<Team> info(T);\n    for(int i = 0; i < T;i++) info[i] = Team(i,P);\n    for(int i = 0; i < R;i++){\n        int tid,pid,time,msg;\n        cin >> time >> tid >> pid >> msg;\n        tid--; pid--;\n        if(msg == 0){\n            info[tid].AC(pid,time);\n        }else{\n            info[tid].WA(pid);\n        }\n    }\n    sort(info.begin(),info.end());\n    info.push_back(Team(INF,P)); info.rbegin()->penalty = INF;\n    for(int i = 0; i < T;i++){\n        cout << info[i].id+1;\n        if(i+1==T) {cout << endl;}\n        else if(info[i].correct > info[i+1].correct) cout << \",\";\n        else if(info[i].penalty < info[i+1].penalty) cout << \",\";\n        else cout << \"=\";\n    }\n}\nint main(void) {\n    cin.tie(0); ios_base::sync_with_stdio(false);\n    while(cin >> M >> T >> P >> R,M){\n        solve();\n    }\n    return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n#define rep(i,n) for(long long int i=0;i<n;++i)\ntypedef long long int ll;\n\nint main(){\n\n    while(1){\n        int M,T,P,R;\n        cin >> M >> T >> P >> R;\n        if(M==0&&T==0&&P==0&&R==0)break;\n        vector<vector<int>> wa(T,vector<int>(P,0));\n        vector<vector<bool>> ac(T,vector<bool>(P,false));\n        vector<int> cnt(T,0);\n        vector<pair<int,int>> mt(T,{0,0});\n        rep(i,T){\n            mt[i].second=-(i+1);\n        }\n        rep(i,R){\n            int m,t,p,j;\n            cin >> m >> t >> p >> j;\n            t--;p--;\n            if(j!=0){\n                wa[t][p]++;\n            }else{\n                mt[t].first+=m;\n                ac[t][p]=true;\n            }\n        }\n        vector<vector<pair<int,int>>> accnt(P+1);\n        for(int i=T-1;i>=0;i--){\n            for(int j=0;j<P;j++){\n                if(ac[i][j]){\n                    cnt[i]++;\n                    mt[i].first+=20*wa[i][j];\n                }\n            }\n            accnt[cnt[i]].push_back(mt[i]);\n        }\n        rep(i,P+1){\n            stable_sort(accnt[i].begin(),accnt[i].end());\n        }\n        int cn=0;\n        for(int i=P;i>=0;i--){\n            for(int j=0;j<(int)accnt[i].size()-1;j++){\n                cout << -accnt[i][j].second;\n                cn++;\n                if(accnt[i][j].first==accnt[i][j+1].first){\n                    cout << \"=\";\n                }else{\n                    cout << \",\";\n                }\n            }\n            if(accnt[i].size()>0){\n                cout << -accnt[i].back().second;\n                cn++;\n                if(cn!=T)cout << \",\";\n            }\n        }\n        cout<< endl;\n    }\n\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\n#include<vector>\nusing namespace std;\nstruct team{\n\tint num,p,cnt;\n\tint w[11];\n\tvoid init(int n)\n\t{\n\t\tnum=n;\n\t\tp=0;\n\t\tcnt=0;\n\t\tfor(int i=0;i++<10;)w[i]=0;\n\t}\n\tvoid submit(int m,int i,int j)\n\t{\n\t\tif(j)w[i]++;\n\t\telse p+=m+w[i]*20,cnt++;\n\t}\n\tbool operator<(team a)\n\t{\n\t\tif(cnt!=a.cnt)return cnt>a.cnt;\n\t\telse if(p!=a.p)return p<a.p;\n\t\telse return num>a.num;\n\t}\n\tbool operator==(team a)\n\t{\n\t\treturn cnt==a.cnt&&p==a.p;\n\t}\n};\nint M,T,P,R;\nmain()\n{\n\twhile(cin>>M>>T>>P>>R,M)\n\t{\n\t\tteam a[55];\n\t\tfor(int i=0;i++<T;)a[i].init(i);\n\t\tfor(int i=0;i<R;i++)\n\t\t{\n\t\t\tint b,c,d,e;cin>>b>>c>>d>>e;\n\t\t\ta[c].submit(b,d,e);\n\t\t}\n\t\tsort(a+1,a+T+1);\n\t\tfor(int i=0;i++<T;)\n\t\t{\n\t\t\tif(i==1)cout<<a[i].num;\n\t\t\telse\n\t\t\t{\n\t\t\t\tcout<<(a[i-1]==a[i]?\"=\":\",\")<<a[i].num;\n\t\t\t}\n\t\t}\n\t\tcout<<endl;\n\t}\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\ntypedef pair<int, int> Pii;\n\nint main() {\n  int M, T, P, R;\n  while ( cin >> M >> T >> P >> R, M ) {\n    vector<int> cnt(T, 0);\n    vector<vector<int> > solved(T, vector<int>(P, 0));    \n    vector<int> times(T, M+1);\n    vector<vector<int> > pena(T, vector<int>(P, 0));    \n    while ( R-- ) {\n      int m, t, p, j;\n      cin >> m >> t >> p >> j;\n      t--; p--;\n      if ( !j ) {\n\tif ( solved[t][p] ) continue;\n\tsolved[t][p] = 1;\n\ttimes[t] += m;\n\ttimes[t] += pena[t][p]*20;\t\n\tcnt[t]++;\t\n      } else if ( !solved[t][p] ) {\n\tpena[t][p]++;\n      }\n    }\n\n    vector<Pii> ps[P+1];    \n    for ( int i = 0; i < T; i++ ) {\n      ps[cnt[i]].push_back(Pii(times[i], -i));      \n    }\n\n    int cnt_t = 0;\n    for ( int i = P; i >= 0; i-- ) {\n      if ( !ps[i].size() ) continue;\n      sort(ps[i].begin(), ps[i].end());\n      for ( int j = 0; j < (int)ps[i].size(); j++ ) {\n\tif ( !cnt_t ) cout << -ps[i][j].second+1;\n\telse if ( j && ps[i][j].first == ps[i][j-1].first ) {\n\t  cout << '=' << -ps[i][j].second+1;\n\t} else {\n\t  cout << \", \" << -ps[i][j].second+1;\t  \n\t}\n\tcnt_t++;\n      }\n    }\n    \n    cout << endl;\n  }\n\n  return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstdio>\n#include<string>\n#include<vector>\n#include<cmath>\n#include<algorithm>\n#include<functional>\n#include<iomanip>\n#include<queue>\n#include<ciso646>\n#include<random>\n#include<map>\n#include<set>\nusing namespace std;\ntypedef long long ll;\nconst ll MOD = 1000000007;\nconst ll INF = (ll)1000000007 * 1000000007;\nconst double PI = 3.14159265358979;\nconst double E = 2.718281828459045;\nconst double root2 = sqrt(2);\ntypedef pair<int, int> P;\ntypedef unsigned int ui;\nint main() {\n\tint m, t, p, r;\n\twhile (cin >> m >> t >> p >> r) {\n\t\tif (m == 0)break;\n\t\tint score[51] = {}; int pena[51] = {}; int wa[51][11];\n\t\tfor (int i = 0; i < 51; i++) {\n\t\t\tfor (int j = 0; j < 11; j++) {\n\t\t\t\twa[i][j] = 0;\n\t\t\t}\n\t\t}\n\t\tint a, b, c, d;\n\t\tfor (int i = 0; i < r; i++) {\n\t\t\tcin >> a >> b >> c >> d;\n\t\t\tif (d == 0) {\n\t\t\t\tscore[b]++;\n\t\t\t\tpena[b] += a + 20 * wa[b][c];\n\t\t\t}\n\t\t\telse {\n\t\t\t\twa[b][c]++;\n\t\t\t}\n\t\t}\n\t\tint memo; int used[51] = {};\n\t\tfor (int i = 1; i <= t; i++) {\n\t\t\tint chk=-1;\n\t\t\tfor (int j = 1; j <= t; j++) {\n\t\t\t\tif (used[j] == 0) {\n\t\t\t\t\tif (chk == -1)chk = j;\n\t\t\t\t\telse if (score[j] > score[chk] || (score[j] == score[chk] && pena[j] < pena[chk]) || (score[j] == score[chk] && pena[j] == pena[chk] && j > chk)) {\n\t\t\t\t\t\tchk = j;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (i == 1) {\n\t\t\t\tcout << chk;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (score[chk] == score[memo] && pena[chk] == pena[memo]) {\n\t\t\t\t\tcout << \"=\" << chk;\n\t\t\t\t}\n\t\t\t\telse cout << \",\" << chk;\n\n\t\t\t}\n\t\t\tused[chk] = 1; memo = chk;\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\n#define REP(i,n) for(int i=0;i<(int)(n);i++)\n#define ALL(x) (x).begin(),(x).end()\n\nusing namespace std;\n\nint main() {\n\tint M,T,P,R;\n\twhile(true){\n\t\tcin >> M >> T >> P >> R;\n\t\tif(M==0) return 0;\n\t\tvector<int> m(R),t(R),p(R),j(R);\n\t\tREP(i,R){\n\t\t\tcin >> m[i] >> t[i] >> p[i] >> j[i];\n\t\t\tt[i]--;\n\t\t\tp[i]--;\n\t\t}\n\t\tvector<vector<int>> pena(T,vector<int>(P));\n\t\tvector<vector<int>> score(T,vector<int>(2)); //seikai,jikan\n\n\t\tREP(i,R){\n\t\t\tif(j[i] == 0){\n\t\t\t\tscore[t[i]][0]++;\n\t\t\t\tscore[t[i]][1]+=pena[t[i]][p[i]] + m[i];\n\t\t\t}\n\t\t\tpena[t[i]][p[i]]+=20;\n\t\t}\n\n\t\tvector<tuple<int,int,int>> tupleScore(T);\n\t\tREP(i,T){\n\t\t\ttupleScore[i] = make_tuple(-score[i][0],score[i][1],-1-i);\n\t\t}\n\t\tsort(ALL(tupleScore));\n\n\t\tint top;\n\t\ttie(ignore,ignore,top) = tupleScore[0];\n\t\tcout << -top;\n\t\tREP(i,T-1){\n\t\t\tint ans1,tim1,ans2,tim2;\n\t\t\ttie(ans1,tim1,ignore)=tupleScore[i];\n\t\t\ttie(ans2,tim2,top)=tupleScore[i+1];\n\t\t\tif(ans1==ans2 && tim1==tim2){\n\t\t\t\tcout << \"=\" << -top;\n\t\t\t}\n\t\t\telse{\n\t\t\t\tcout << \",\" << -top;\n\t\t\t}\n\t\t}\n\n\t\tcout << endl;\t\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n#include <utility>\n\nusing namespace std;\n\nconst int T = 50, P = 10;\n\nstruct team{\n\tint id, time, score;\n\tint counts[P];\n};\n\nteam teams[T] = { };\n\nbool comp(const team& a, const team& b){\n\tif(a.score == b.score){\n\t\tif(a.time == b.time){\n\t\t\treturn a.id > b.id;\n\t\t}\n\t\treturn a.time < b.time;\n\t}\n\telse{\n\t\treturn a.score > b.score;\n\t}\n}\n\nint main(){\n\tint m, t, p, r;\n\twhile(cin >> m >> t >> p >> r){\n\t\tint a, b, c, d;\n\t\tfor(int i = 0;i < t;++i){\n\t\t\tteams[i].id = i + 1;\n\t\t\tteams[i].time = teams[i].score = 0;\n\t\t\tfill(teams[i].counts, teams[i].counts + P, 0);\n\t\t}\n\t\tfor(int i = 0;i < r;++i){\n\t\t\tcin >> a >> b >> c >> d;\n\t\t\t--b;\n\t\t\tif(!d){\n\t\t\t\tteams[b].time += a + teams[b].counts[--c] * 20;\n\t\t\t\t++teams[b].score;\n\t\t\t}\n\t\t\telse{\n\t\t\t\t++teams[b].counts[--c];\n\t\t\t}\n\t\t}\n\t\tsort(teams, teams + t, comp);\n\t\tfor(int i = 0;i < t;++i){\n\t\t\tif(i > 0){\n\t\t\t\tif(teams[i - 1].time == teams[i].time && teams[i - 1].score == teams[i].score) cout << \"=\";\n\t\t\t\telse cout << \",\";\n\t\t\t}\n\t\t\tcout << teams[i].id;\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n\nusing namespace std;\n\nstruct data_t {\n\tint ID;\n\tint time;\n\tint ac;\n\n\tbool operator<(const data_t& right) const {\n\t\tif (ac == right.ac) {\n\t\t\tif (time == right.time) {\n\t\t\t\treturn (ID > right.ID);\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn (time < right.time);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\treturn (ac > right.ac);\n\t\t}\n\t}\n};\n\nint main(void) {\n\tint M,T,P,R;\n\twhile (cin >> M >> T >> P >> R, M) {\n\t\tvector<data_t> data(T);\n\t\tfor (int i = 0; i < T; ++i) {\n\t\t\tdata[i].ID = i+1;\n\t\t\tdata[i].time = 0;\n\t\t\tdata[i].ac = 0;\n\t\t}\n\n\t\tint m,t,p,judge;\n\t\tvector< vector<int> > wrong(T,vector<int>(P,0));\n\t\tfor (int i = 0; i < R; ++i) {\n\t\t\tcin >> m >> t >> p >> judge;\n\t\t\tif (judge != 0) {\n\t\t\t\t++wrong[t-1][p-1];\n\t\t\t}\n\t\t\telse {\n\t\t\t\t++data[t-1].ac;\n\t\t\t\tdata[t-1].time += m + (20 * wrong[t-1][p-1]);\n\t\t\t}\n\t\t}\n\t\tsort(data.begin(),data.end());\n\t\tfor (int i = 0; i < T; ++i) {\n\t\t\tcout << data[i].ID;\n\t\t\tif (i < T-1) {\n\t\t\t\tif (data[i].ac == data[i+1].ac && data[i].time == data[i+1].time) {\n\t\t\t\t\tcout << \"=\";\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tcout << \",\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nint main(){\n    int M, T, P, R;\n    cin >> M >> T >> P >> R;\n    while(M > 0){\n        vector<pair<pair<int, int>, int>> ans(T);\n        for(int i=0; i<T; i++){\n            ans[i].first = make_pair(P, 0);\n            ans[i].second = -i;\n        }\n        vector<vector<int>> pen(T, vector<int>(P, 0));\n        for(int i=0; i<R; i++){\n            int m, t, p, j;\n            cin >> m >> t >> p >> j;\n            t--; p--;\n            if(j == 0){\n                ans[t].first.first--;\n                ans[t].first.second += m + pen[t][p];\n            }else{\n                pen[t][p] += 20;\n            }\n        }\n        sort(ans.begin(), ans.end());\n        for(int i=0; i<T; i++){\n            cout << -ans[i].second+1;\n            if(i<T-1) cout << (ans[i].first == ans[i+1].first ? \"=\":\",\");\n        }\n        cout << endl;\n\n        cin >> M >> T >> P >> R;\n    }\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<string>\n#include<vector>\n#include<utility>\n#include<queue>\n#include<algorithm>\n#include<cmath>\n#include<cstdio>\n#include<cstring>\n#include<cstdlib>\n#include<map>\n#include<complex>\n#define INF 2147483647\n#define llINF 9223372036854775807\n#define pb push_back\n#define mp make_pair \n#define F first\n#define S second\n#define ll long long\n\nusing namespace std;\nint main(){\n  int m,t,p,r;\n  while(cin>>m>>t>>p>>r,m+t+p+r){\n    pair<int,int>pii[t+10][p+10];\n    for(int i=0;i<t+10;i++)\n      for(int j=0;j<p+10;j++)\n\tpii[i][j]=mp(-1,0);\n    for(int i=0;i<r;i++){\n      int a,b,c,d;cin>>a>>b>>c>>d;\n      b--;c--;\n      if(d==0)\n\tpii[b][c].F=a;\n      else\n\tpii[b][c].S+=20;\n    }\n    vector<pair<int,pair<int,int> > >team(t+10);\n    for(int i=0;i<t;i++)\n      team[i]=mp(0,mp(INF,i+1));\n    for(int i=0;i<t;i++){\n      for(int j=0;j<p+10;j++){\n\tif(pii[i][j].F>=0){\n\t  team[i].S.F-=pii[i][j].F+pii[i][j].S;\n\t  team[i].F++;\n\t}\n      }\n    }\n    sort(team.begin(),team.end(),greater<pair<int,pair<int,int> > >());\n    for(int i=0;i<t;i++){\n      if(i==0)\n\tcout<<team[i].S.S;\n      else{\n\tif(team[i].F==team[i-1].F&&team[i-1].S.F==team[i].S.F){\n\t  cout<<\"=\";\n\t}else{\n\t  cout<<\",\";\n\t}\n\tcout<<team[i].S.S;\n      }\n    }\n    cout<<endl;\n  }\n  return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <vector>\n#include <cfloat>\n#include <string>\n#include <cmath>\n#include <set>\n#include <cstdlib>\n#include <map>\n#include <ctime>\n#include <iomanip>\n#include <functional>\n#include <deque>\n#include <iostream>\n#include <cstring>\n#include <queue>\n#include <cstdio>\n#include <stack>\n#include <climits>\n#include <sys/time.h>\n#include <cctype>\n\nusing namespace std;\n\ntypedef long long ll;\n\nclass team {\npublic:\n  int num;\n  int time;\n  int solveNum;\n  int p[10];\n  bool j[10];\n  int probTime[10];\n  team(int a, int b, int c) {\n    num = a;\n    time = b;\n    solveNum = c;\n    for (int i = 0; i < 10; i++) {\n      p[i] = 0;\n      j[i] = false;\n      probTime[i] = 0;\n    }\n  }\n};\n\nbool compare(team a, team b) {\n  return (a.solveNum > b.solveNum ||\n\t  (a.solveNum == b.solveNum && a.time < b.time) ||\n\t  (a.solveNum == b.solveNum && a.time == b.time && a.num > b.num));\n}\n\nbool tie(team a, team b) {\n  return (a.solveNum == b.solveNum && a.time == b.time);\n}\n\nint main() {\n  int M, T, P, R;\n  while(true) {\n    cin >> M >> T >> P >> R;\n    if (M == 0 && T == 0 && P == 0 && R == 0) break;\n\n    vector <team> myTeam;\n    for (int i = 0; i < T; i++) {\n      myTeam.push_back(team(i+1, 0, 0));\n    }\n\n    for (int i = 0; i < R; i++) {\n      int m, t, p, j;\n      cin >> m >> t >> p >> j;\n      myTeam[t-1].probTime[p-1] = m;\n      if (j == 0) {\n\tmyTeam[t-1].solveNum++;\n\tmyTeam[t-1].time += myTeam[t-1].probTime[p-1]+ myTeam[t-1].p[p-1]*20;\n      }else {\n\tmyTeam[t-1].p[p-1]++;\n      }\n    }\n    //    for (int i = 0; i < R; i++) {\n      //      for (int j = 0; j < 10; j++) {\n    //\tif (!myTeam[i].j[j]) {\n    //\t  myTeam[i].time -= myTeam[i].probTime[j-1];\n    //\t}\n    //      }\n    //    }\n\n    sort(myTeam.begin(), myTeam.end(), compare);\n    for (int i = 0; i < T-1; i++) {\n      std::cout << myTeam[i].num;\n      if (tie(myTeam[i], myTeam[i+1])) {\n\tstd::cout << \"=\";\n      }else {\n\tstd::cout << \",\";\n      }\n    }\n    std::cout << myTeam[T-1].num << std::endl;\n\n  }\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n#include <functional>\nusing namespace std;\n\n\n\nint main()\n{\n    while (1) {\n        int mm,m,tt,t,pp,p,rr,r;\n        cin >> mm >> tt >> pp >> rr;\n        \n        struct Teem{\n            int problem[10] = {0};\n            int judge[10] = {0};\n        }teem[50];\n        \n        int sum[51] = {0};\n        int ans[51] = {0};\n        \n        for (int i = 0; i < rr; i++ ) {\n            cin >> m >> t >> p >> r;\n            \n            if (r == 0) {\n                sum[t] = sum[t] + m + teem[t].judge[p];\n                ans[t]++;\n            }else{\n                teem[t].judge[p] += 20;\n            }\n        }\n        \n        int max = 0;\n        vector<int> times = {0};\n        int count = 0;\n        \n        for (int i = 1; i < tt; i++ ) {\n            if (max == ans[i]) {\n                times.push_back(sum[i]);\n                count++;\n            }\n            if (max < ans[i]) {\n                max = ans[i];\n                times = {0};\n                times.push_back(sum[i]);\n                count=1;\n            }\n        }\n        sort(times.begin(), times.end(), greater<int>());\n        \n        int tmp1 = -1,tmp2 = -1;\n        for (int i = max; i > 0; i--) {\n            for (int k = count-1; k >= 0; k--) {\n                for (int m =tt; m > 0; m--) {\n                    if (i == ans[m]) {\n                        if (times[k] == sum[m]) {\n                            if (tmp2 == ans[m]) {\n                                if (tmp1 == sum[m]) {\n                                    cout << \"=\" ;\n                                }else{\n                                    cout << \",\" ;\n                                }\n                            }\n                            else if(tmp2 != -1 && tmp1 != -1){\n                                cout << \",\" ;\n                            }\n                            cout << m ;\n                            tmp1 = sum[m];\n                            tmp2 = ans[m];\n                            ans[m] = -1;\n                        }\n                    }\n                }\n            }\n\n            max = 0;\n            times = {0};\n            count = 0;\n            for (int x = 1; x < tt; x++ ) {\n                if (max == ans[x]) {\n                    times.push_back(sum[x]);\n                    count++;\n                }\n                if (max < ans[x]) {\n                    max = ans[x];\n                    times = {0};\n                    times.push_back(sum[x]);\n                    count=1;\n                }\n            }\n            sort(times.begin(), times.end(), greater<int>());\n        }\n        for (int i = tt; i > 0; i--) {\n            \n            if (ans[i] == 0) {\n                if (tmp2 == -1) {\n                    \n                }else {\n                    if (tmp2 == 0) {\n                        cout << \"=\";\n                    }else {\n                        cout << \",\";\n                    }\n                }\n                cout << i ;\n                tmp2 = 0;\n            }\n        }\n        cout << endl;\n        if (tmp1 == -1) {\n            break;\n        }\n    }\n    \n    \n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include \"bits/stdc++.h\"\n#define pb push_back\n#define mt make_tuple\n#define all(a) (a).begin(),(a).end()\n#define frep(i,a,n) for(int i=(a);i<(n);++i)\n#define rep(i, n) for(int i=0;i<(n);++i)\n#define rrep(i, n) for(int i=n-1;i>=0;--i)\n#define debug(x) cout << #x << \" : \" << x << \" ------------ \" << endl;\nusing namespace std;\nstruct Record {\n    int id, ac, ct;\n    int acm[11], wa[11];\n    \n    bool operator<(const Record& rhs) const {\n        if (ac != rhs.ac)\n            return ac > rhs.ac;\n        if (ct != rhs.ct)\n            return ct < rhs.ct;\n        return id > rhs.id;\n    }\n};\nint main()\n{\n    int M, T, P, R;\n    while (cin >> M >> T >> P >> R, M | T | P | R) {\n        Record team[T + 1];\n        rep(i, T + 1) team[i] = {i};\n        while (R--) {\n            int m, t, p, j;\n            cin >> m >> t >> p >> j;\n            if (j > 0)\n                ++team[t].wa[p];\n            else {\n                team[t].ct += m + 20 * team[t].wa[p];\n                ++team[t].ac;\n            }\n        }\n        sort(team, team + T + 1);\n        rep(i, T + 1) {\n            if (team[i].id == 0) continue;\n            cout << team[i].id;\n            if (i < T - 1) {\n                if (team[i].ac == team[i+1].ac && team[i].ct == team[i+1].ct)\n                    cout << \"=\";\n                else cout << \",\";\n            }\n        }\n        cout << endl;\n    }\n    return EXIT_SUCCESS;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <string>\n#include <vector>\n#include <map>\n#include <algorithm>\nusing namespace std;\n\nstruct Team {\n    int team_id;\n    int ac_num;\n    int time;\n    int fail[10];\n};\n\nauto cmp = [](Team x, Team y) {\n    if (x.ac_num != y.ac_num) {\n        return x.ac_num > y.ac_num;\n    }\n    else if (x.time != y.time) {\n        return x.time < y.time;\n    }\n    else {\n        return x.team_id > y.team_id;\n    }\n};\n\nint main()\n{\n    int M, T, P, R;\n    int m, p, t, j;\n    vector<Team> team(50);\n\n    while(1) \n    {\n        cin >> M >> T >> P >> R;\n        if ((M == 0) && (T == 0) && (P == 0) && (R == 0)) {\n            break;\n        }\n\n        for (int i = 0; i < 50; i++) {\n            team[i].team_id = i+1;\n            team[i].ac_num = 0;\n            team[i].time = 0;\n            for (int j = 0; j < 10; j++) {\n                team[i].fail[j] = 0;\n            }\n        }\n        \n        for (int i = 0; i < R; i++) {\n            cin >> m >> t >> p >> j;\n            if (j != 0) {\n                team[t-1].fail[p-1] += 1;\n            }\n            else {\n                team[t-1].ac_num += 1;\n                team[t-1].time += m;\n                if (team[t-1].fail[p-1] > 0) {\n                    team[t-1].time += 20*team[t-1].fail[p-1];\n                }\n            }\n        }\n\n        sort(team.begin(), team.begin()+T, cmp);\n\n        for (int i = 0; i < T; i++) {\n            if (i == 0)\n                cout << team[i].team_id;\n            else {\n                if (team[i].ac_num != team[i-1].ac_num)\n                    cout << \",\" << team[i].team_id;\n                else if (team[i].time != team[i-1].time)\n                    cout << \",\" << team[i].team_id;\n                else {\n                    cout << \"=\" << team[i].team_id;\n                }\n            }\n        }\n        cout << endl;\n    }\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\nusing vi=vector<int>;\nusing vvi=vector<vi>;\nusing vs=vector<string>;\nusing msi=map<string,int>;\nusing pii=pair<int,int>;\nusing vlai=valarray<int>;\n#define rep(i,n) for(int i=0;i<n;i++)\n#define range(i,s,n) for(int i=s;i<n;i++)\n#define all(a) a.begin(),a.end()\n#define rall(a) a.rbegin(),a.rend()\n \nstruct Team{\n    int id,ac,pn;\n    vi wa=vi(11);\n};\n \nint main(void){\n    int m,t,p,r;\n    while(cin>>m>>t>>p>>r,t){\n        deque<Team> team(t+1);\n        rep(i,t)team[i+1].id=i+1;\n        rep(i,r){\n            int tm,id,num,res;\n            cin>>tm>>id>>num>>res;\n            if(res==0){\n                team[id].ac++;\n                team[id].pn+=team[id].wa[num]*20+tm;\n            }else{\n                team[id].wa[num]++;\n            }\n        }\n        team.pop_front();\n        sort(all(team), [](Team a,Team b){return a.ac>b.ac || (a.ac==b.ac&&(a.pn<b.pn || (a.pn==b.pn&&a.id>b.id))); });\n        rep(i,t){\n            cout<<team[i].id<<(i+1==t ? \"\" : (team[i].ac==team[i+1].ac&&team[i].pn==team[i+1].pn?\"=\":\",\"));\n        }\n        cout<<endl;\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\n#include<map>\n\nusing namespace std;\n\nint M,T,P,R;\n\nclass Trem {\npublic:\n\n    int id;\n    int AC_cnt;\n    int WA_cnt[13];\n    int time;\n    bool is_AC[13];\n    Trem() {\n    }\n    Trem(int i) {\n        this->id = i;\n        AC_cnt=0;\n        time=0;\n        for(int i=0;i<13;i++) {\n            WA_cnt[i]=0;\n            is_AC[i]=false;\n        }\n    }\n    void submit(int m,int t,int p,int j) {\n        if(j==0) {\n            AC_cnt++;\n            is_AC[p]=true;\n            time += m;\n            time += WA_cnt[p]*20;\n        }\n        else {\n            WA_cnt[p]++;\n            \n        }\n    }\n    bool operator<(const Trem& t1) const {\n        if(this->AC_cnt != t1.AC_cnt) {\n            return this->AC_cnt > t1.AC_cnt;\n        }\n        if(this->time != t1.time) return this->time < t1.time;\n        return this->id > t1.id;\n    }\n\n};\n\nvoid solve() {\n    Trem trem[53];\n    for(int i=0;i<53;i++) trem[i]=Trem(i);\n    for(int i=0;i<R;i++) {\n        int m,t,p,j;\n        cin>>m>>t>>p>>j;\n        trem[t].submit(m,t,p,j);\n    }\n    sort(trem+1,trem+T+1);\n    for(int i=1;i<=T;i++) {\n        Trem t = trem[i];\n        Trem next = trem[i+1];\n        char c = ((t.AC_cnt==next.AC_cnt && \n                t.time == next.time)?'=':',');\n        if(i==T) c='\\n';\n        cout<<t.id;\n        cout<<(c);\n    }\n\n    \n\n}\n\nint main() {\n    while(cin>>M>>T>>P>>R) {\n        if(M+T+P+R==0) return 0;\n        solve();\n    }\n\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\nusing namespace std;\n\nint M, T, P, R;\n\nstruct Team{\n\tint id, ac, timecost;\n\tint wa[11];\n\tTeam(int i){\n\t\tid = i;\n\t\tac = 0; timecost = 0;\n\t\tfor(int i = 0; i < 11; i++) wa[i] = 0;\n\t}\n};\n\nbool compare(const Team &a, const Team &b){\n\tif(a.ac != b.ac) return a.ac > b.ac;\n\telse if(a.timecost != b.timecost) return a.timecost < b.timecost;\n\telse return a.id > b.id;\n}\n\nint main(){\n\twhile(cin >> M >> T >> P >> R && M != 0){\n\t\tvector<Team> teams;\n\t\tfor(int i = 0; i < T; i++){\n\t\t\tTeam t(i);\n\t\t\tteams.push_back(t);\n\t\t}\n\n\t\tfor(int i = 0; i < R; i++){\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >>j;\n\t\t\tif(j == 0){\n\t\t\t\tteams[t-1].ac++;\n\t\t\t\tteams[t-1].timecost += m + teams[t-1].wa[p] * 20;\n\t\t\t}else{\n\t\t\t\tteams[t-1].wa[p]++;\n\t\t\t}\n\t\t}\n\n\t\tsort(teams.begin(), teams.end(), compare);\n\n\t\tint p_ac = -1, p_tc = -1;\n\t\tfor(int i = 0; i < T; i++){\n\t\t\tif (i>0) {\n\t\t\t\tif(teams[i-1].ac== teams[i].ac && teams[i-1].timecost == teams[i].timecost) cout << \"=\";\n\t\t\t\telse cout << \",\";\t\n\t\t\t}\n\t\t\tcout << teams[i].id+1;\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#include <vector>\n\nusing namespace std;\n\nstruct Score {\n    int id;\n    int solve;\n    int time;\n\n    Score () : id(0), solve(0), time(0) {}\n    ~Score () {}\n\n    Score(int a, int b, int c) : id(a), solve(b), time(c) {}\n\n    bool operator < (const Score& o) const {\n        if(solve != o.solve) return solve > o.solve;\n        if(time != o.time) return time < o.time;\n        return id > o.id;\n    }\n\n    bool operator == (const Score& o) const {\n        return solve == o.solve && time == o.time;\n    }\n};\n\nint main () {\n    int M, T, P, R;\n\n    while (true) {\n        cin >> M >> T >> P >> R;\n        if (M == 0) return 0;\n\n        vector<vector<char>> solved(T, vector<char>(P, 0));\n        vector<vector<int> > time(T, vector<int>(P, 0));\n        vector<vector<int> > miss(T, vector<int>(P, 0));\n\n        for (int i = 0; i < R; ++i) {\n            int m, t, p, j;\n            cin >> m >> t >> p >> j;\n            --t; --p;\n\n            if (j == 0) {\n                solved[t][p] = 1;\n                time[t][p] = m;\n            } else {\n                ++ miss[t][p];\n            }\n        }\n\n        vector<Score> scores;\n\n        for (int i = 0; i < T; ++i) {\n            int s = 0, t = 0;\n            for(int j = 0; j < P; ++j) {\n                if(solved[i][j]) {\n                    ++s;\n                    t += time[i][j] + miss[i][j] * 20;\n                }\n            }\n\n            scores.push_back(Score(i + 1, s, t));\n        }\n\n        sort(begin(scores), end(scores));\n\n        cout << scores[0].id;\n        for(int i = 1; i < scores.size(); ++i) {\n            cout << ((scores[i - 1] == scores[i]) ? \"=\" : \",\");\n            cout << scores[i].id;\n        }\n        cout << endl;\n    }\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n#include <cstring>\n#include <map>\n#include <set>\n#include <vector>\n#include <queue>\n#include <stack>\n#define MAX_T 50\n#define MAX_P 10\nusing namespace std;\n\ntypedef pair<int,int> S;\ntypedef vector<S> V;\ntypedef map<int,set<S>> MM;\n\nbool pairCompare(const S& firstElof, const S& secondElof)\n{\n    return firstElof.second > secondElof.second;\n}\n\nint main(void)\n{\n    int M, T, P, R;\n    while (cin >> M >> T >> P >> R) {\n        if (M == 0 && T == 0 && P == 0 && R == 0) break;\n        int m, t, p, j, data[T + 1][P + 1][2];\n        memset(data, 0, sizeof(data));\n        for (int i = 0; i < R; i++) {\n            cin >> m >> t >> p >> j;\n            if (j == 0) {\n                data[t][0][0] += (m + data[t][p][1]);\n                data[t][0][1]++;\n            } else\n                data[t][p][1] += 20;\n        }\n        V v;\n        MM mm;\n        queue<int> ans;\n        for (int i = 1; i <= T; i++) {\n            if (data[i][0][1] == 0) data[i][0][0] = -2;\n            mm[data[i][0][1]].insert(S(data[i][0][0],i));\n        }\n        for (int i = P; i >= 0; i--) {\n            stack<int> tmp;\n            auto f = mm[i].begin();\n            for (auto it = mm[i].begin(); it != mm[i].end(); it++) {\n                if ((*f).first == (*it).first) tmp.push((*it).second); \n                else {\n                    if (ans.size()) ans.push(-1);\n                    while (tmp.size()) {\n                        advance( f, 1);\n                        auto ss = tmp.top(); tmp.pop();\n                        ans.push(ss);\n                        if (tmp.size()) ans.push(-3);\n                    }\n                    tmp.push((*it).second);\n                }\n            }\n            if (tmp.size()) {\n                if (ans.size())ans.push(-1);\n                while (tmp.size()) {\n                    auto ss = tmp.top(); tmp.pop();\n                    ans.push(ss);\n                    if (tmp.size()) ans.push(-3);\n                }\n            }\n        }\n        while (ans.size()) {\n            int tmp = ans.front(); ans.pop();\n            if (tmp == -1) cout << \",\";\n            else if (tmp == -3) cout << \"=\";\n            else cout << tmp;\n        }\n        cout << endl;\n        \n    }\n    \n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\nusing namespace std;\n#define rep(i,n) for(int i = 0; i < n; ++i)\n\nclass Team{\npublic:\n    int time;\n    int tnum;\n    int ans;\n    Team(){ time=tnum=ans=0; }\n};\n\nbool cmp(const Team &a,const Team &b){\n    if(b.ans<a.ans){\n        return true;\n    } else if(b.ans==a.ans){\n        if(b.time>a.time){\n            return true;\n        } else if(b.time==a.time){\n            if(a.tnum>b.tnum){\n                return true;\n            }\n        }\n    }\n    return false;\n}\n\nbool eql(Team &a,Team &b){\n    return (b.ans==a.ans && b.time==a.time);\n}\n\nint main(){\n    while(1){\n        int M,T,P,R;\n        cin>>M>>T>>P>>R;\n        if(M==0){\n            break;\n        }\n        int miss[T][P];\n        Team ts[T];\n\n        rep(i,T){\n            rep(j,P){\n                miss[i][j]=0;\n            }\n        }\n\n        rep(k,T){\n            ts[k].tnum=k+1;\n        }\n\n        rep(i,R){\n            int m,t,p,j;\n            cin>>m>>t>>p>>j;\n            if(j==0){\n                ts[t-1].ans++;\n                ts[t-1].time+=m+miss[t-1][p-1]*20;\n            }\n            else\n            {\n                miss[t-1][p-1]++;\n            }\n        }\n\n        sort(&ts[0],&ts[T],cmp);\n        rep(i,T){\n            if(i>=1){\n                if(eql(ts[i-1],ts[i])){\n                    cout<<\"=\";\n                }\n                else{\n                    cout<<\",\";\n                }\n            }\n            cout<<ts[i].tnum;\n        }\n        cout<<endl;\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <map>\n#include <set>\n#include <string>\n#include <queue>\n#include <stack>\n#include <algorithm>\n#include <cmath>\n#include <cstring>\n\nusing namespace std;\n\nint main() {\n    int M, T, P, R;\n    while (cin >> M >> T >> P >> R){\n        int num_solved[T];\n        int num_wrong[T][P];\n        int total_time[T];\n\n        memset(num_solved, 0, sizeof(num_solved));\n        memset(num_wrong, 0, sizeof(num_wrong));\n        memset(total_time, 0, sizeof(total_time));\n\n        for (int i = 0; i < R; i++){\n            int m, t, p, j;\n            cin >> m >> t >> p >> j; t--; p--;\n            if (j == 0){\n                num_solved[t]++;\n                total_time[t] += num_wrong[t][p] * 20 + m;\n            } else {\n                num_wrong[t][p]++;\n            }\n        }\n\n        vector<pair<pair<int, int>, int> > vs; \n\n        for (int i = 0; i < T; i++){\n            vs.push_back(make_pair(make_pair(-num_solved[i], total_time[i]), -i)); \n        }\n        sort(vs.begin(), vs.end());\n\n        for (int i = 0; i < T; i++){\n            if (i > 0){\n                if (vs[i].first == vs[i - 1].first){\n                    cout << \"=\";\n                } else {\n                    cout << \",\";\n                }\n            }\n            cout << -vs[i].second + 1 ;\n        }\n        cout << endl; \n    }\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef pair<int, int> iP;\n#define REP(i, n) for (int i = 0; i < n; i++)\n#define REPR(i, n) for (int i = n; i >= 0; i--)\n#define FOR(i, m, n) for (int i = m; i < n; i++)\n\nint main() {\n    while (1) {\n        int M, T, P, R;\n        cin >> M >> T >> P >> R;\n        if (M == 0) break;\n        int mt[60]{}, pt[60]{}, f[60][15]{};\n        REP(i, R) {\n            int m, t, p, j;\n            cin >> m >> t >> p >> j;\n            if (j==0) {\n                pt[t]++;\n                mt[t] += m + f[t][p] * 20;\n            } else {\n                f[t][p]++;\n            }\n        }\n        vector<pair<iP, int> > ls;\n         for (int i = 1; i <= T; i++) {\n             ls.push_back({{pt[i],1000000-mt[i]},i});\n        }\n        sort(ls.rbegin(),ls.rend());\n        cout << ls[0].second;\n        for(int i=1;i<T;i++){\n            if(ls[i-1].first == ls[i].first){\n                cout << \"=\";\n            }\n            else cout << \",\";\n            cout << ls[i].second;\n        }\n        cout << endl;\n    }\n    return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nint main() {\n  for(int M, T, P, R; cin >> M >> T >> P >> R && (M|T|P|R);) {\n    vector<int> ac(T, 0), ti(T, 0);\n    for(int i = 0; i < R; ++i) {\n      int m, t, p, j;\n      cin >> m >> t >> p >> j;\n      if(!j) {\n        ++ac[t-1];\n        ti[t-1] += m;\n      }\n    }\n    vector<vector<int> > v;\n    for(int i = 0; i < T; ++i) {\n      vector<int> u(3);\n      u[0] = ac[i];\n      u[1] = -ti[i];\n      u[2] = i+1;\n      v.push_back(u);\n    }\n    sort(v.begin(), v.end(), greater<vector<int> >());\n    for(int i = 0; i < v.size(); ++i) {\n      if(i) {\n        cout << (v[i-1][0] == v[i][0] && v[i-1][1] == v[i][1] ? '=' : ',');\n      }\n      cout << v[i][2];\n    }\n    cout << endl;\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<vector>\n#include<algorithm>\nusing namespace std;\n\ntypedef vector<int> vi;\n\nint M,T,P,R;\nint m,t,p,j;\nvi team[60];\nint pena[60][20];\n\nint main(){\n  while(cin >> M >> T >> P >> R,M){\n    for(int i=0;i<T;i++){\n      team[i].resize(3);\n      team[i][0] = team[i][1] = 0; team[i][2] = -i-1;\n      for(int j=0;j<P;j++)pena[i][j] = 0;\n    }\n\n    for(int i=0;i<R;i++){\n      cin >> m >> t >> p >> j;\n      t--; p--;\n      if(j==0){\n\tteam[t][0]--;\n\tteam[t][1] += pena[t][p]*20 + m;\n      }else pena[t][p]++;\n    }\n\n    sort(team,team+T);\n\n    for(int i=0;i<T;i++){\n      cout << -team[i][2];\n      if(i==T-1)cout << endl;\n      else{\n\tif(team[i][0] == team[i+1][0] && team[i][1] == team[i+1][1])\n\t  cout << \"=\";\n\telse\n\t  cout << \",\";\n      }\n    }\n  }\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n\nusing namespace std;\n\nstruct Result {\n    int team;\n    int solved;\n    int time;\n    friend bool operator <(struct Result a, struct Result b) {\n        if (a.solved != b.solved) {\n            return a.solved < b.solved;\n        }\n        if (a.time != b.time) {\n            return a.time > b.time;\n        }\n        else {\n            return a.team < b.team;\n        }\n    }\n};\n\nint main() {\n    int m, t, p, r;\n    while (true) {\n        cin >> m >> t >> p >> r;\n        if (m == 0) {\n            break;\n        }\n        vector<vector<int> > time(t, vector<int>(p, 0));\n        vector<vector<bool> > is_solved(t, vector<bool>(p, false));\n        vector<struct Result> result(t);\n        for (int i=0; i<r; i++) {\n            int passed, team, problem, judge;\n            cin >> passed >> team >> problem >> judge;\n            if (judge == 0) {\n                is_solved[team-1][problem-1] = true;\n                time[team-1][problem-1] += passed;\n            }\n            else {\n                time[team-1][problem-1] += 20;\n            }\n        }\n        for (int i=0; i<t; i++) {\n            result[i].team = i+1;\n            result[i].solved = 0;\n            result[i].time = 0;\n            for (int j=0; j<p; j++) {\n                if (is_solved[i][j]) {\n                    result[i].solved++;\n                    result[i].time += time[i][j];\n                }\n            }\n        }\n        sort(result.begin(), result.end());\n        for (int i=t-1; i>=0; i--) {\n            cout << result[i].team;\n            if (i > 0) {\n                if (result[i].solved == result[i-1].solved &&\n                    result[i].time == result[i-1].time) {\n                    cout << '=';\n                }\n                else {\n                    cout << ',';\n                }\n            }\n        }\n        cout << endl;\n    }\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\n#include<map>\n\nusing namespace std;\n\nint M,T,P,R;\n\nclass Trem {\npublic:\n\n    int id;\n    int AC_cnt;\n    int WA_cnt[13];\n    int time;\n    bool is_AC[13];\n    Trem() {\n    }\n    Trem(int i) {\n        this->id = i;\n        AC_cnt=0;\n        time=0;\n        for(int i=0;i<13;i++) {\n            WA_cnt[i]=0;\n            is_AC[i]=false;\n        }\n    }\n    void submit(int m,int t,int p,int j) {\n        if(j==0) {\n            AC_cnt++;\n            is_AC[t]=true;\n            time += m;\n            time += WA_cnt[t]*20;\n        }\n        else {\n            WA_cnt[t]++;\n            \n        }\n    }\n    bool operator<(const Trem& t1) const {\n        if(this->AC_cnt == t1.AC_cnt) {\n            if(this->time == t1.time) return this->id > t1.id;\n            else return this->time < t1.time;\n        }\n        else {\n            return this->AC_cnt > t1.AC_cnt;\n        }\n    }\n\n};\n\nvoid solve() {\n    Trem trem[53];\n    for(int i=0;i<53;i++) trem[i]=Trem(i);\n    for(int i=0;i<R;i++) {\n        int m,t,p,j;\n        cin>>m>>t>>p>>j;\n        trem[t].submit(m,t,p,j);\n    }\n    sort(trem+1,trem+T+1);\n    for(int i=1;i<=T;i++) {\n        Trem t = trem[i];\n        Trem next = trem[i+1];\n        char c = ((t.AC_cnt==next.AC_cnt && \n                t.time == next.time)?'=':',');\n        if(i==T) c='\\n';\n        cout<<t.id;\n        cout<<(c);\n    }\n\n    \n\n}\n\nint main() {\n    while(cin>>M>>T>>P>>R) {\n        if(M+T+P+R==0) return 0;\n        solve();\n    }\n\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\n#define INF 1e9\n\nint MOD=1e9+7;\n\nsigned main(){\n    ios::sync_with_stdio(false);\n    cin.tie(0);\n\n    while(1){\n        int m,t,p,r;\n        cin>>m>>t>>p>>r;\n\n        if(m==0)break;\n\n        vector<pair<pair<int,int>,int>> v(t);\n        vector<int> wa(t);\n        for(int i=0;i<t;i++){\n            v[i].second=i+1;\n        }\n\n        for(int i=0;i<r;i++){\n            int a,b,c,d;\n            cin>>a>>b>>c>>d;\n            b--;\n\n            if(d!=0)wa[b]++;\n            else{\n                v[b].first.first++;\n                v[b].first.second+=a+wa[b]*20;\n            }\n        }\n        for(int i=0;i<t;i++){\n            v[i].first.second*=-1;\n        }\n        sort(v.begin(),v.end());\n        reverse(v.begin(),v.end());\n        for(int i=0;i<t;i++){\n            cout<<v[i].second;\n            if(i==t-1)cout<<endl;\n            else if(v[i].first==v[i+1].first)cout<<\"=\";\n            else cout<<\",\";\n        }\n    }\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n#include <cstdio>\n\n#define REP(i,n) for( int i = 0; i < n; i++ )\n\n\nusing namespace std;\n\n/*\n より多くの問題に正解したチームを上位とする．\n 正解した問題数が同じ場合は，所要時間合計の少ないチームを上位とする．\n 複数のチームが同数の問題に正解し，所要時間合計も同じなら，それらのチームを同順位とする．\n */\n\nstruct team{\n\tint ans,time,name;\n    int q[50]={0};\n    \n\tteam() : ans(0), time(0), name(0) {}\n    \n    bool operator <( const team& Right )const {\n        return  ans != Right.ans ? ans < Right.ans :\n        time != Right.time ? time > Right.time :\n        name <  Right.name;\n    }\n};\n\n\nint main()\n{\n\tint M,T,P,R;\n\t// Mは，コンテストの始まりから終わりまでの時間である． Tは，チーム数である． Pは，問題数である． Rは，提出記録の数である\n\twhile( cin >> M >> T >> P >> R )\n\t{\n\t\tint m,t,p,k;\n\t\tvector<team> team_array(T+1);\n\t\tif( T == 0 ) return 0;\n\t\tfor( int i = 1; i <= T; i++)\n\t\t\tteam_array[i].name = i;\n\t\t// mkは，経過時間である． tkは，チーム番号である． pkは，問題番号である． jkは，判定結果を表す（0なら正解，0以外なら不正解）\n\t\tREP(i,R)\n\t\t{\n\t\t\tcin >> m >> t >> p >> k;\n\t\t\tteam &tm = team_array[t];\n\t\t\tif( !k ){\n\t\t\t\ttm.ans++;\n\t\t\t\ttm.time += m;\n                if( tm.q[p] )\n                    tm.time += 20 * tm.q[p];\n\t\t\t}\n            else{\n                tm.q[p]++;\n            }\n            \n\t\t}\n\t\t\n        sort( team_array.begin() + 1 , team_array.end() );\n\t\t\n        for( int i = T; i > 0; i-- )\n        {\n            char c;\n            if( i == 1 ){\n                cout << team_array[i].name << endl;\n                continue;\n            }\n            else if ( team_array[i].ans == team_array[i-1].ans &&\n                team_array[i].time == team_array[i-1].time) {\n                c = '=';\n            }\n            else{\n                c = ',';\n            }\n\t\t\tcout << team_array[i].name << c;\n        }\n        \n\t}\n\treturn 0;"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\nusing namespace std;\n#define rep(i,n) for(int i = 0; i < n; ++i)\n\nclass Team{\npublic:\n    int time;\n    int tnum;\n    int ans;\n};\n\nbool cmp(Team &a,Team &b){\n    if(b.ans<a.ans){\n        return true;\n    } else if(b.ans==a.ans){\n        if(b.time>a.time){\n            return true;\n        } else if(b.time==a.time){\n            if(a.tnum>b.tnum){\n                return true;\n            }\n        }\n    }\n    return false;\n}\n\nbool eql(Team &a,Team &b){\n    return (b.ans==a.ans && b.time==a.time);\n}\n\nint main(){\n    while(1){\n        int M,T,P,R;\n        cin>>M>>T>>P>>R;\n        if(M==0){\n            break;\n        }\n        int miss[T][P]={};\n        Team ts[T]={};\n        rep(k,T){\n            ts[k].tnum=k+1;\n        }\n\n        rep(i,R){\n            int m,t,p,j;\n            cin>>m>>t>>p>>j;\n            if(j==0){\n                ts[t-1].ans++;\n                ts[t-1].time+=m+miss[t-1][p-1]*20;\n            }\n            else\n            {\n                miss[t-1][p-1]++;\n            }\n        }\n\n        sort(&ts[0],&ts[T],cmp);\n        rep(i,T){\n            if(i>=1){\n                if(eql(ts[i-1],ts[i])){\n                    cout<<\"=\";\n                }\n                else{\n                    cout<<\",\";\n                }\n            }\n            cout<<ts[i].tnum;\n        }\n        cout<<endl;\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\n#include<cstring>\n#define MAX 50\n#define MP \t11\nusing namespace std;\n\nstruct team{\n\tint id;\n\tint problems;\n\tint time;\n\tint pm[MP];\n\tint ep[MP];\n};\n\nbool mycomp(const team &t1,const team &t2)\n{\n\tif(t1.problems==t2.problems)return t1.time<t2.time;\n\treturn t1.problems>t2.problems;\n}\n\nint M,T,P,R;\nteam teams[MAX];\n\nvoid solve()\n{\n\tfor(int i=0;i<T;i++)\n\t{\n\t\tteams[i].id=i+1;\n\t\tfor(int j=1;j<=P;j++)\n\t\t{\n\t\t\tif(teams[i].ep[j]==0)continue;\n\t\t\telse teams[i].time+=teams[i].ep[j]+teams[i].pm[j];\n\t\t}\n\t}\n\tsort(teams,teams+P,mycomp);\n\tcout<<teams[0].id;\n\tfor(int i=1;i<T;i++)\n\t{\n\t\tif(teams[i].problems==teams[i-1].problems&&teams[i].time==teams[i-1].time)\n\t\t{\n\t\t\tcout<<\"=\";\n\t\t}else\n\t\t{\n\t\t\tcout<<\",\";\n\t\t}\n\t\tcout<<teams[i].id;\n\t}\n\tcout<<endl;\t\n}\n\nvoid input()\n{\n\tint m,t,p,j;\n\twhile(scanf(\"%d%d%d%d\",&M,&T,&P,&R))\n\t{\n\t\tif(M==0&&T==0&&P==0&&R==0)break;\n\t\tmemset(teams,0,sizeof(teams));\n\t\tfor(int i=0;i<R;i++)\n\t\t{\n\t\t\tscanf(\"%d%d%d%d\",&m,&t,&p,&j);\n\t\t\tif(j==0)\n\t\t\t{\n\t\t\t\tteams[t-1].problems++;\n\t\t\t\tteams[t-1].ep[p]=m;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tteams[t-1].pm[p]+=20;\n\t\t\t}\n\t\t}\n\t\tsolve();\n\t}\n}\n\nint main()\n{\n\tinput();\n\treturn 0;\n}\n\n\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\nusing namespace std;\n\nint main(){\n\twhile(true){\n\t\tint M, T, P, R;\n \t\tcin >> M >> T >> P >> R;\n\t\n\t\tif(M==0 && T==0 && P==0 && R==0)\n\t\t\tbreak;\n\t\t\n\t\tint CP[50], TT[50], PT[50][10];\n\t\tfor(int i=0;\ti<T; i++){\n\t\t\tCP[i] = TT[i] = 0;\n\t\t\tfor(int j=0; j<P; j++)\n\t\t\t\tPT[i][j] = 0;\n\t\t}\n\n\t\tfor(int i=0; i<R; i++){\n\t\t\tint m, t, p, r;\n\t\t\tcin >> m >> t >> p >> r;\n\t\t\t\n\t\t\tif(j==0){\n\t\t\t\tCP[t-1]++;\n\t\t\t\tTT[t-1] += (m+PT[t-1[p-1]);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tPT[t-1][p-1] += 20;\n\t\t\t}\n\t\t}\n\t\n\t\tint tnow, tpre = -1;\n\t\tbool flg[50];\n\t\t\tflg[i] = false;\n\t\t\t\t\n\t\tfor(int i=0; i<T; i++){\n\t\t\ttnow = -1;\n\t\t\tfor(int j=0; j<T; j++){\n\t\t\t\tif(flg[j])\n\t\t\t\t\tcontinue;\n\t\t\t\tif(tnow==-1){\n\t\t\t\t\ttnow = j;\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tif(CP[j]>CP[tnow] || (CP[j]==CP[tnow] && TT[j]==TT[tnow])){\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(tpre!=-1){\n\t\t\t\tif(CP[tnow]==CP[tpre] && tt[tnow]==TT[tpre])\n\t\t\t\t\tcout << '=';\n\t\t\t\telse\n\t\t\t\t\tcout << ',';\n\t\t\t\t}\n\t\t\t\tcout << tnow+1;\n\t\t\t\t\n\t\t\t\tflg [tnow] = true;\n\t\t\t\ttpre = tnow;\n\n\t\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}\n\n\n"
  },
  {
    "language": "C++",
    "code": "\n#include <iostream>\n#include <cmath>\n#include <vector>\n#include <string>\n#include <map>\n#include <algorithm>\n#include <tuple>\n#include <set>\n\nusing namespace std;\nusing ll = long long;\nusing ull = unsigned long long;\nusing vi = vector<int>;\nusing vvi = vector<vi>;\nusing vl = vector<ll>;\nusing pii = pair<int, int>;\n#define out(S) cout<<(S)<<endl;\n#define REP(i,b) for(size_t i=0;i<(b);i++)\n#define rREP(i,b) for(int i=(b)-1;i>=0;i--)\n#define FOR(i,a,b) for(size_t i=(a);i<(b);i++)\n#define rFOR(i,a,b) for(int i=(a)-1;i>=(b);i--)\n#define Foreach(item,collection) for(auto item:collection)\n#define mod(i) ((i) % (ll)(1e9 + 7))\nll modpow(ll i, ll j) { ll tmp = 1; while (j) { if (j % 2)tmp = mod(tmp*i); i = mod(i*i); j /= 2; }return tmp; }\n#define divmod(a,b) (mod(a * modpow((ll)b,(ll)(1e9 + 5))))\n#define Yes out(\"Yes\")\n#define No out(\"No\")\n#define NO out(\"NO\")\n#define YES out(\"YES\")\n#define INF 1e10;\n#define ShowAll(collection) for(auto i:collection){out(i);}\n#define IfOut(condition,text) if((condition)){out(text);return 0;}\n#define IfeOut(condition,itext,etext) if(condition){out(itext);return 0;}else{out(etext);return 0;}\n#define Select(collection,condition,result) Foreach(i,collection){result+=condition;}\n#define GetAuto(_N,vect) {cin>>_N;vect.resize(_N);REP(i,_N){cin>>vect[i];}}\n#define beginend(vec) (vec).begin(),(vec).end()\n#define pb(item) push_back(item)\n#define removeAll(vec,deleg) auto itr=remove_if(beginend(vec),deleg);vec.erase(itr,vec.end());\n#define WhileCin(n) while(cin>>n)\nvoid removeAt(string& s, int index) { s.erase(index, 1); }\ntemplate<typename T> void removeAt(vector<T>& v, int index) { v.erase(v.begin() + index); }\nll manhattanDistance(ll x1, ll y1, ll x2, ll y2) { return (abs(x2 - x1) + abs(y2 - y1)); }\nvector<ll> sieveOfEratosthenes(int max) { ll prime; double sqrtmax = sqrt(max); vector<ll> primeVec, searchVec; FOR(i, 2, max + 1) searchVec.push_back(i); do { prime = searchVec[0]; primeVec.push_back(prime); auto itr = remove_if(beginend(searchVec), [=](ll x)->bool {return x%prime == 0; }); searchVec.erase(itr, searchVec.end()); } while (prime < sqrtmax); primeVec.reserve(primeVec.size() + searchVec.size()); primeVec.insert(primeVec.end(), beginend(searchVec)); return primeVec; }\n\n\nstruct Team\n{\n\tint tNum;\n\tint sTime;\n\tint cCount;\n};\n\nint main()\n{\n\tint M, T, P, R;\n\tbool w_flag = true;\n\tstring ans = \"\";\n\n\tWhileCin(M >> T >> P >> R) {\n\t\tvector<Team> team;\n\t\tvvi teamPenalty;\n\t\tteamPenalty.resize(T);\n\t\tREP(i, T) { Team t; t.cCount = 0; t.sTime = 0; t.tNum = i+1;team.pb(t);\tteamPenalty[i].resize(P,0);\t}\n\t\tint n = 0;\n\t\tdo\n\t\t{\n\t\t\tint mi, ti, pi, ji;\n\t\t\tcin >> mi >> ti >> pi >> ji;\n\t\t\tif (!mi && !ti && !pi && !ji) { w_flag = false; break; }\n\t\t\tif (ji) { n++; teamPenalty[ti - 1][pi-1] += 20; continue; }\n\t\t\tteam[ti - 1].sTime += mi + teamPenalty[ti - 1][pi-1];\n\t\t\tteam[ti - 1].cCount++;\n\t\t\tn++;\n\t\t} while (n<R);\n\t\tsort(beginend(team), [](Team t1, Team t2) {return (t1.cCount == t2.cCount) ? (t1.sTime == t2.sTime) ? (t1.tNum < t2.tNum) : (t1.sTime > t2.sTime) : (t1.cCount < t2.cCount); });\n\t\treverse(beginend(team));\n\t\tint bfTime = 0, bfCount = 0;\n\t\tbool out_flag = false;\n\t\tForeach(i, team) {if (out_flag) {if (bfCount == i.cCount&&bfTime == i.sTime) ans += \"=\";else ans += \",\";}bfCount = i.cCount;bfTime = i.sTime;out_flag = true;ans += to_string(i.tNum);}\n\t\tans += \"\\n\";\n\t\tif (!w_flag) break;\n\t}\n\tout(ans);\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstring>\n#include <vector>\n#include <map>\n#include <algorithm>\nusing namespace std;\n\nstruct agg{\n  int sol,tim,num;\n  int wrg[11];\n};\n\nclass ctr{\npublic:\n  bool operator()(const agg& left,const agg& right)const{\n    if(left.sol == right.sol && left.tim == right.tim){\n      return left.num > right.num;\n    }\n    else if(left.sol == right.sol) return left.tim < right.tim;\n    else return left.sol > right.sol; \n  }\n};\n\nvoid init(int n,vector<agg> *trg){\n  for(int i=1;i<n+1;i++){\n    (*trg)[i].sol = 0;\n    (*trg)[i].tim = 0;\n    (*trg)[i].num = i;\n    memset((*trg)[i].wrg,0,sizeof((*trg)[i].wrg));\n  }\n}\n\nint main(){\n  int M,T,P,R;\n  while(cin >> M >> T >> P >> R,M||T||P||R){\n    vector<agg>info(T+1);\n    init(T,&info);\n\n    while(R--){\n      int m,t,p,j;\n      cin >> m >> t >> p >> j;\n      if(j == 0){\n\tinfo[t].tim += info[t].wrg[p] * 20 + m;\n\tinfo[t].sol++;\n      }\n      else info[t].wrg[p]++;\n    }\n\n    sort(info.begin()+1,info.end(),ctr());\n    for(int i=1;i<T;i++){\n      cout << info[i].num;\n      cout << (info[i].sol == info[i+1].sol && info[i+1].tim == info[i].tim ? '=' : ',');\n    }\n    cout << info[T].num <<  endl;\n  }\n}\n      "
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\nint main(){\n    int m,t,p,r;\n    while(cin>>m>>t>>p>>r,m){\n        vector<vector<int>> team(t,vector<int>(p,0));\n        for(int i=0;i<r;i++){\n            int mm,tt,pp,jj;\n            cin>>m>>tt>>pp>>jj;\n            if(!jj)\n                team[tt-1][pp-1]=m+(-team[tt-1][pp-1])*20;\n            else\n                team[tt-1][pp-1]--;\n\n        }\n        vector<tuple<int,int,int>> rank(t,make_tuple(0,0,0));\n        for(int i=0;i<t;i++)\n            get<2>(rank[i])=i+1;\n        for(int i=0;i<t;i++){\n            for(int j=0;j<p;j++)\n                if(team[i][j]>0){\n                    (get<0>(rank[i]))++;\n                    get<1>(rank[i])-=team[i][j];\n                }\n\n\n        }\n        sort(rank.begin(),rank.end(),greater<tuple<int,int,int>>());\n        queue<int> q;\n        pair<int,int> pre=make_pair(-1,-1);\n        string res=\"\";\n        for(int i=0;i<t;i++){\n            if(pre==make_pair(get<0>(rank[i]),get<1>(rank[i]))){\n                q.push(get<2>(rank[i]));\n                continue;\n            }\n            else{\n                if(!res.empty() && res.back()!=',')\n                    res+=\",\";\n                int s=q.size();\n                for(int j=0;j<s;j++){\n                    int a=q.front();\n                    if(j!=s-1){\n                        res+=to_string(a)+\"=\";\n                        }\n                    else\n                        res+=to_string(a);\n\n                    q.pop();\n\n                }\n                q.push(get<2>(rank[i]));\n                pre=make_pair(get<0>(rank[i]),get<1>(rank[i]));\n            }\n\n        }\n        if(!q.empty() && res.back()!=',')\n            res+=',';\n        for(int i=0;!q.empty();i++){\n            if(q.size()!=1){\n                res+=to_string(q.front())+\"=\";\n\n            }\n            else\n                res+=to_string(q.front());\n            q.pop();\n        }\n        cout<<res<<endl;\n    }\n\n    return 0;\n}\n                                      "
  },
  {
    "language": "C++",
    "code": "#include <iostream>\nusing namespace std;\n \nint main()\n{\n    while(true){\n        int M, T, P, R;\n        cin >> M >> T >> P >> R;\n \n        if(M==0 && T==0 && P==0 && R==0)\n            break;\n \n        int CP[50], TT[50], PT[50][10];\n        for(int i=0; i<T; i++){\n            CP[i] = TT[i] = 0;\n            for(int j=0; j<P; j++)\n                PT[i][j] = 0;\n        }\n \n        for(int i=0; i<R; i++){\n            int m, t, p, j;\n            cin >> m >> t >> p >> j;\n \n            if(j==0){\n                CP[t-1]++;\n                TT[t-1] += (m+PT[t-1][p-1]);\n            }\n            else{\n                PT[t-1][p-1] += 20;\n            }\n        }\n \n        int tnow, tpre = -1;\n        bool flg[50];\n        for(int i=0; i<T; i++)\n            flg[i] = false;\n \n        for(int i=0; i<T; i++){\n            tnow = -1;\n            for(int j=0; j<T; j++){\n                if(flg[j])\n                    continue;\n \n                if(tnow==-1){\n                    tnow = j;\n                }\n                else{\n                    if(CP[j]>CP[tnow] || (CP[j]==CP[tnow] && TT[j]<=TT[tnow])){\n                        tnow = j;\n                    }\n                }\n            }\n \n            if(tpre!=-1){\n                if(CP[tnow]==CP[tpre] && TT[tnow]==TT[tpre])\n                    cout << '=';\n                else\n                    cout << ',';\n            }\n            cout << tnow+1;\n \n            flg[tnow] = true;\n            tpre = tnow;\n        }\n        cout << endl;\n    }\n \n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\n#define rep(i, n) for(int i = 0; i < n; i++)\n\ntypedef long long ll;\nusing namespace std;\nint mod = 1000000007;\n\nint solve[51]; //最後にACした時間\nint num_pr[51];\nint wa[51][11]; //waした回数\nbool valid[51][11]; //acしたかどうか\n\nvoid init(){\n    rep(i, 51) {solve[i] = 0; num_pr[i] = 0;}\n    rep(i, 51) rep(j, 11) {wa[i][j] = 0; valid[i][j] = false;}\n}\n\nint main(void){\n    int M, T, P, R;\n\n    //<解いた問題数> <解いた時間(短い方がいい)> <チーム番号(大きい方が先に出力)>\n\n    while(true){\n        init();\n        cin >> M >> T >> P >> R;\n        if(M == 0) break;\n        pair<int, pair<int, int>> res[T];\n\n        rep(i, R){\n            int m, t, p, r; cin >> m >> t >> p >> r;\n            t--; p--;\n            if(r == 0){\n                valid[t][p] = true;\n                num_pr[t]++;\n                solve[t] -= m;\n            }\n            else wa[t][p]++;\n        }\n        rep(i, T){\n            rep(j, P){\n                if(valid[i][j]) solve[i] -= 20*wa[i][j];\n            }\n        }\n\n        rep(i, T){\n            res[i] = make_pair(num_pr[i], make_pair(solve[i], i+1));\n        }\n        sort(res, res+T, greater<pair<int, pair<int, int>>>());\n        rep(i, T){\n            if(i == T-1) cout << res[i].second.second << endl;\n            else if(res[i].first == res[i+1].first && res[i].second.first == res[i+1].second.first) cout << res[i].second.second << \"=\";\n            else cout << res[i].second.second << \",\";\n        }\n    }\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#define N 2001\nusing namespace std;\nstruct team{\n  int tnum;\n  int correct;\n  int time;\n};\nint main(){\n  int m,t,p,r,im[N],it[N],ip[N],ij[N],incorrect,i,j;\n  struct team data[51];\n  while(1){\n    cin >> m >> t >> p >> r;\n    if(m==0&&t==0&&p==0&&r==0) break;\n    for(i=0;i<r;i++) cin >> im[i] >> it[i] >> ip[i] >> ij[i];\n    for(i=1;i<=t;i++){\n      data[i].tnum=i;\n      data[i].correct=0;\n      data[i].time=0;\n    }\n    for(i=0;i<r;i++){\n      if(ij[i]==0){\n\tdata[it[i]].correct++;\n      \tincorrect=0;\n\tfor(j=0;j<i;j++){\n\t  if(it[i]==it[j]&&ip[i]==ip[j]) incorrect++;\n\t}\n\tdata[it[i]].time=data[it[i]].time+incorrect*20+im[i];\n      }\n    }\n    for(i=0;i<=t;i++){\n      for(j=2;j<=t;j++){\n\tif(data[j].tnum>data[j-1].tnum) swap(data[j],data[j-1]);\n      }\n    }\n    for(i=0;i<=t;i++){\n      for(j=2;j<=t;j++){\n\tif(data[j].time<data[j-1].time) swap(data[j],data[j-1]);\n      }\n    }\n    for(i=0;i<=t;i++){\n      for(j=2;j<=t;j++){\n\tif(data[j].correct>data[j-1].correct) swap(data[j],data[j-1]);\n      }\n    }\n    for(i=1;i<t;i++){\n      cout << data[i].tnum;\n      if(data[i].correct==data[i+1].correct&&data[i].time==data[i+1].time)\n\tcout << '=';\n      else cout << ',';\n      if(i==t-1) cout << data[i+1].tnum;\n    }\n    cout << endl;\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\nusing namespace std;\n\nint M, T, P, R;\n\nstruct Team{\n\tint id, ac, timecost;\n\tint wa[11];\n\tTeam(int i){\n\t\tid = i;\n\t\tac = 0; timecost = 0;\n\t\tfor(int i = 0; i < 11; i++) wa[i] = 0;\n\t}\n};\n\nbool compare(const Team &a, const Team &b){\n\tif(a.ac != b.ac) return a.ac > b.ac;\n\telse if(a.timecost != b.timecost) return a.timecost < b.timecost;\n\telse return a.id > b.id;\n}\n\nint main(){\n\twhile(cin >> M >> T >> P >> R && M != 0 && T != 0 && P != 0 && R != 0){\n\t\tvector<Team> teams;\n\t\tfor(int i = 0; i < T; i++){\n\t\t\tTeam t(i);\n\t\t\tteams.push_back(t);\n\t\t}\n\n\t\tfor(int i = 0; i < R; i++){\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >>j;\n\t\t\tif(j == 0){\n\t\t\t\tteams[t-1].ac++;\n\t\t\t\tteams[t-1].timecost = m + teams[t-1].wa[p] * 20;\n\t\t\t}else{\n\t\t\t\tteams[t-1].wa[p]++;\n\t\t\t}\n\t\t}\n\n\t\tsort(teams.begin(), teams.end(), compare);\n\n\t\tint p_ac = -1, p_tc = -1;\n\t\tfor(int i = 0; i < T; i++){\n\t\t\tif(p_ac == teams[i].ac && p_tc == teams[i].timecost){\n\t\t\t\tcout << \"=\" << teams[i].id + 1;\n\t\t\t}else if(i != 0){\n\t\t\t\tcout << \",\" << teams[i].id + 1;\n\t\t\t\tp_ac = teams[i].ac;\n\t\t\t\tp_tc = teams[i].timecost;\n\t\t\t}else{\n\t\t\t\tcout << teams[i].id + 1;\n\t\t\t\tp_ac = teams[i].ac;\n\t\t\t\tp_tc = teams[i].timecost;\n\t\t\t}\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include \"bits/stdc++.h\"\nusing namespace std;\n\n//#define int long long\n#define DBG 1\n#define dump(o) if(DBG){cerr<<#o<<\" \"<<o<<endl;}\n#define dumpc(o) if(DBG){cerr<<#o; for(auto &e:(o))cerr<<\" \"<<e;cerr<<endl;}\n#define rep(i,a,b) for(int i=(a);i<(b);i++)\n#define rrep(i,a,b) for(int i=(b)-1;i>=(a);i--)\n#define each(it,c) for(auto it=(c).begin();it!=(c).end();it++)\n#define all(c) c.begin(),c.end()\nconst int INF = sizeof(int) == sizeof(long long) ? 0x3f3f3f3f3f3f3f3fLL : 0x3f3f3f3f;\nconst int MOD = (int)(1e9 + 7);\n\nclass Team {\npublic:\n\tint id;\n\tint time = 0;\n\tvector<int> AC;\n\tvector<int> WA;\n\tTeam(int P) {\n\t\tAC.resize(P, 0);\n\t\tWA.resize(P, 0);\n\t}\n\tbool operator<(const Team &t) {\n\t\tint cntAC1 = count(AC.begin(), AC.end(), 1);\n\t\tint cntAC2 = count(t.AC.begin(), t.AC.end(), 1);\n\t\tif (cntAC1 == cntAC2) {\n\t\t\tint t1 = time, t2 = t.time;\n\t\t\trep(i, 0, AC.size())\n\t\t\t\tif (AC[i]) t1 += WA[i] * 20;\n\t\t\trep(i, 0, t.AC.size())\n\t\t\t\tif (t.AC[i]) t2 += t.WA[i] * 20;\n\t\t\tif (t1 == t2)return id < t.id;\n\t\t\telse return t1 > t2;\n\t\t}\n\t\telse return cntAC1 < cntAC2;\n\t}\n\tbool operator==(const Team &t) {\n\t\tint cntAC1 = count(AC.begin(), AC.end(), 1);\n\t\tint cntAC2 = count(t.AC.begin(), t.AC.end(), 1);\n\t\tif (cntAC1 == cntAC2) {\n\t\t\tint t1 = time, t2 = t.time;\n\t\t\trep(i, 0, AC.size())\n\t\t\t\tif (AC[i]) t1 += WA[i] * 20;\n\t\t\trep(i, 0, t.AC.size())\n\t\t\t\tif (t.AC[i]) t2 += t.WA[i] * 20;\n\t\t\treturn t1 == t2;\n\t\t}\n\t\telse return false;\n\t}\n};\n\nsigned main() {\n\tfor (int M, T, P, R; cin >> M >> T >> P >> R && (M || T || P || R);) {\n\t\tvector<Team> Teams(T, Team(P));\n\t\trep(i, 0, T) { Teams[i].id = i + 1; }\n\t\trep(i, 0, R) {\n\t\t\tint m, t, p, j; cin >> m >> t >> p >> j;\n\t\t\tt--;\n\t\t\tp--;\n\t\t\tif (j == 0) {\n\t\t\t\tTeams[t].AC[p] = 1;\n\t\t\t\tTeams[t].time += m;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tTeams[t].WA[p]++;\n\t\t\t}\n\t\t}\n\t\tsort(Teams.begin(), Teams.end());\n\t\treverse(Teams.begin(), Teams.end());\n\t\tcout << Teams[0].id;\n\t\trep(i, 1, T) {\n\t\t\tcout << \",=\"[Teams[i] == Teams[i - 1]] << Teams[i].id;\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\nusing namespace std;\n\nint main(){\n  while(true){\n    int M, T, P, R;\n    cin >> M >> T >> P >> R;\n\n    if(M==0 && T==0 && P==0 && R==0)\n      break;\n\n    int CP[50], TT[50], PT[50][10];\n    for(int i=0; i<T; i++){\n      CP[i] = TT[i] = 0;\n      for(int j=0; j<P; j++)\n\tPT[i][j] = 0;\n    }\n\n    for(int i=0; i<R; i++){\n      int m, t, p, j;\n      cin >> m >> t >> p >> j;\n\n      if(j==0){\n\tCP[t-1]++;\n\tTT[t-1] += (m+PT[t-1][p-1]);\n      }\n      else{\n\tPT[t-1][p-1] += 20;\n      }\n    }\n\n    int tnow, tpre = -1;\n    bool flg[50];\n    for(int i=0; i<T; i++)\n      flg[i] = false;\n\n    for(int i=0; i<T; i++){\n      tnow = -1;\n      for(int j=0; j<T; j++){\n\tif(flg[j])\n\t  continue;\n\n\tif(tnow==-1){\n\t  tnow = j;\n\t}\n\telse{\n\t  if(CP[j]>CP[tnow] || (CP[j]==CP[tnow] && TT[j]<=TT[tnow])){\n\t    tnow = j;\n\t  }\n\t}\n      }\n\n      if(tpre!=-1){\n\tif(CP[tnow]==CP[tpre] && TT[tnow]==TT[tpre])\n\t  cout << '=';\n\telse\n\t  cout << ',';\n      }\n      cout << tnow+1;\n\n      flg[tnow] = true;\n      tpre = tnow;\n    }\n    cout << endl;\n  }\n  return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\nusing namespace std;\n\nstruct Team\n{\n    int name, ca, time;\n    int wa[11];\n};\n\nvoid swap( Team& a, Team& b );\nvoid bubbleSort( Team* t, int x, int k );\n\nint main()\n{\n    int m, t, p, r;\n    int a, b, c, d;\n    Team team[51];\n\n    while( cin >> m >> t >> p >> r )\n    {\n        if( m + t + p + r == 0 )\n            break;\n\n        for( int i = 0; i < 51; i++ )\n        {\n            team[i].name = i;\n            team[i].ca = 0;\n            team[i].time = 0;\n            for( int j = 0; j < 11; j++ )\n                team[i].wa[j] = 0;\n        }\n        \n        for( int i = 0; i < r; i++ )\n        {\n            cin >> a >> b >> c >> d;\n            if( d == 0 )\n            {\n                team[b].ca++;\n                team[b].time += a + team[b].wa[c] * 20;\n            }\n            else\n                team[b].wa[c]++;\n        }\n\n        bubbleSort( team, t, 1 );\n        bubbleSort( team, t, 0 );\n        bubbleSort( team, t, 2 );\n\n        for( int i = 1; i <= t - 1; i++ )\n        {\n            cout << team[i].name;\n            if( team[i].ca > team[i+1].ca )\n                cout << \",\";\n            else\n            {\n                if( team[i].time < team[i+1].time )\n                    cout << \",\";\n                else\n                    cout << \"=\";\n            }\n        }\n        cout << team[t].name << endl;\n    }\n    return 0;\n}\n\nvoid swap( Team& a, Team& b )\n{\n    Team t = a;\n    a = b;\n    b = t;\n}\n\nvoid bubbleSort( Team* t, int x, int k )\n{\n    for( int i = 1; i <= x; i++ )\n        for( int j = x; j >= 1 + i; j-- )\n        {\n            if( t[j].ca > t[j-1].ca && k == 1 )\n                swap( t[j], t[j-1] );\n            if( t[j].ca == t[j-1].ca && !k && t[j].time < t[j-1].time )\n                swap( t[j], t[j-1] );\n            if( t[j].ca == t[j-1].ca && k == 2 && t[j].time == t[j-1].time && t[j].name > t[j-1].name )\n                swap( t[j], t[j-1] );\n        }\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <iomanip>\n#include <cmath>\n#include <cstdio>\n#include <algorithm>\n#include <vector>\n#include <memory>\n#include <cstring>\n#include <cassert>\n#include <numeric>\n#include <sstream>\n#include <map>\n#include <set>\n#include <queue>\n#include <stack>\n#include <cctype>\n#include <unordered_map>\n#include <unordered_set>\nusing namespace std;\n\n#define REP2(i, m, n) for (int i = (int)(m); i < (int)(n); i++)\n#define REP(i, n) REP2(i, 0, n)\n#define ALL(S) (S).begin(), (S).end()\ntypedef long long ll;\n\nint main(){\n  ios::sync_with_stdio(false);\n  int M, T, P, R;\n  while (cin >> M >> T >> P >> R && M + T + P + R > 0){\n    vector<int> sum(T);\n    vector<int> num(T);\n    vector<vector<int> > wa(T, vector<int>(P));\n    REP(i, R){\n      int m, t, p, j;\n      cin >> m >> t >> p >> j;\n      t--, p--;\n      if (j == 0){\n        num[t]++;\n        sum[t] += wa[t][p] * 20 + m;\n      } else {\n        wa[t][p]++;\n      }\n    }\n    vector<tuple<int, int, int> > vp;\n    REP(i, T){\n      vp.push_back(make_tuple(-num[i], sum[i], -i));\n    }\n    sort(ALL(vp));\n\n    REP(i, T){\n      if (i > 0){\n        if (get<0>(vp[i]) == get<0>(vp[i - 1]) && get<1>(vp[i]) == get<1>(vp[i - 1])){\n          cout << \"=\";\n        } else {\n          cout << \",\";\n        }\n      } \n      cout << - get<2>(vp[i]) + 1;\n    }\n    cout << endl;\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<vector>\n#include<algorithm>\nusing namespace std;\nint m,t,p,r;\nclass team{\npublic:\nint id;\nint ac;\nint time[100];\nbool ok[200];\n};\n\nint or(team a,team b){//aのほうが強ければ1,bなら0,同じなら2\n\nif(a.ac>b.ac)return 1;\nelse if(a.ac<b.ac)return 0;\nint at=0,bt=0;\nfor(int i=0;i<=p;i++){\nif(a.ok[i]==true)at+=a.time[i];\nif(b.ok[i]==true)bt+=b.time[i];\n}\nif(at<bt)return 1;\nelse if(at>bt)return 0;\nelse return 2;\n}\nint main(){\n\n\twhile(true){\n\tcin>>m>>t>>p>>r;\n\tif(m+t+p+r==0)break;\n\tvector<team>ta(0);\n\tta.resize(200);\n\n\tfor(int i=0;i<=t;i++)for(int j=0;j<200;j++)ta[i].time[j]=0,ta[i].ok[j]=0;\n\tfor(int i=0;i<=t;i++)ta[i].id=i,ta[i].ac=0;\n\tfor(int i=0;i<r;i++){\n\tint a,b,c,d;\n\tcin>>a>>b>>c>>d;//a:経過時間:bチーム番号c:問題番号j:0奈良正解それ以外不正解\n\tif(d==0){\n\tta[b].time[c]+=a;\n\tta[b].ac++;\n\tta[b].ok[c]=true;\n\t}\n\telse {\n\tta[b].time[c]+=20;\n\t}\n\t}\n\tta.erase(ta.begin());\n\tfor(int i=0;i<t;i++){\n\tfor(int j=0;j<t;j++){\n\tif(or(ta[i],ta[j])==1)swap(ta[i],ta[j]);\n\tif(or(ta[i],ta[j])==2&&ta[i].id>ta[j].id)swap(ta[i],ta[j]);\n\t}\n\t}\n\tfor(int i=0;i<t-1;i++){\n\tif(or(ta[i],ta[i+1])!=2)cout<<ta[i].id<<\",\";\n\telse cout<<ta[i].id<<\"=\";\n\t}\n\tcout<<ta[t-1].id<<endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstring>\n#include<vector>\n#include<tuple>\n#include<algorithm>\nusing namespace std;\n\nint q[55][2];// num, time\nint wr[55][15];\nvector<tuple<int,int,int> > v1;\n\nint main(){\n\tint m,t,p,r;\n\tint i,j,k;\n\tint a,b,c,d;\n\tint bef[3];\n\twhile(cin>>m>>t>>p>>r){\n\t\tif(!m)break;\n\t\tv1.clear();\n\t\tmemset(wr,0,sizeof(wr));\n\t\tmemset(q,0,sizeof(q));\n\t\tfor(i=0;i<r;i++){\n\t\t\tcin>>a>>b>>c>>d;\n\t\t\tb--;\n\t\t\tif(d==0){\n\t\t\t\tq[b][0]++,q[b][1]+=wr[b][c]*20+a;\n\t\t\t}else wr[b][c]++;\n\t\t}\n\t\tfor(i=0;i<t;i++){\n\t\t\tv1.push_back(make_tuple(q[i][0],-q[i][1],i));\n\t\t}\n\t\tsort(v1.rbegin(),v1.rend());\n\t\tfor(i=0;i<t;i++){\n\t\t\ttie(a,b,c)=v1[i];\n\t\t\tif(i!=0){\n\t\t\t\tif(bef[0]==a && bef[1]==b)cout<<\"=\";\n\t\t\t\telse cout<<\",\";\n\t\t\t}\n\t\t\tcout<<c+1;\n\t\t\tbef[0]=a,bef[1]=b,bef[2]=c;\n\t\t}\n\t\tcout<<endl;\n\t}\n}\n\t\n\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n\nusing namespace std;\n\nint main() {\n    int M, T, P, R;\n    cin >> M >> T >> P >> R;\n\n    int m, t, p, j;\n    int result[T];\n    fill(result, result + T, 0);\n    int time [T];\n    fill(time, time + T, 0);\n    int failure[T];\n    fill(failure, failure + T, 0);\n    for(int submit = 0; submit < R; submit++) {\n            cin >> m >> t >> p >> j;\n            if(j==0) {\n                result[t-1] += 1;\n                time[t-1] += m + failure[t-1] * 20;\n            } else {\n                ++failure[t-1];\n            }\n    }\n\n    bool done[T];\n    fill(done, done + T, false);\n    int prevPoint, prevTime;\n    for(int count = 0; count < T; count++) {\n        int maxPoint = -1;\n        int maxTeam = 0;\n        int minTime = 100000;\n        for (int i = T-1; i >= 0; i--) {\n            if (done[i]) continue;\n            if (maxPoint < result[i]) {\n                maxPoint = result[i];\n                maxTeam = i + 1;\n                minTime = time[i];\n            } else if (maxPoint == result[i]) {\n                if (minTime > time[i]) {\n                    minTime = time[i];\n                    maxTeam = i + 1;\n                }\n            }\n        }\n        minTime = time[maxTeam-1];\n        if(count != 0){\n            if(maxPoint == prevPoint && minTime == prevTime) cout << \"=\";\n            else cout << \",\";\n        }\n        cout << maxTeam;\n        done[maxTeam-1] = true;\n        prevPoint = maxPoint;\n        prevTime = minTime;\n    }\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <string>\n\nusing namespace std;\n\nclass team_obj{\n\tpublic:\n\tint ansNum;\n\tint penalty;\n\tint wrongNum[10];\n\tint teamNum;\n\tint time;\n};\n\nvoid swap(int *a,int *b){\n\tint tmp = *a;\n\t*a = *b;\n\t*b = tmp;\n}\n\nint main(){\n\n\tteam_obj team[50];\n\tint ansLine[20];\n\n\tfor(int i=0;i<50;i++){\n\t\tteam[i].ansNum=0;\n\t\tteam[i].penalty=0;\n\t\tfor(int j=0;j<10;j++){\n\t\t\tteam[i].wrongNum[j]=0;\n\t\t}\n\t\tteam[i].teamNum=i;\n\t}\n\n\tint m,t,p,r;\n\twhile(cin>>m>>t>>p>>r){\n\t\tif(m==0 && t==0 && p==0 && r==0)break;\n\t\t\t\n\t\tint tid,pid,tim;\n\t\tstring str;\n\t\tfor(int i=0;i<50;i++){\n\t\t\tteam[i].ansNum=0;\n\t\t\tteam[i].penalty=0;\n\t\t\tfor(int j=0;j<10;j++){\n\t\t\t\tteam[i].wrongNum[j]=0;\n\t\t\t}\n\t\t\tteam[i].teamNum=i;\n\t\t\tteam[i].time=0;\n\t\t}\n\t\tfor(int i=0;i<20;i++)ansLine[i]=0;\n\n\t\tfor(int i=0;i<r;i++){\n\t\t\tint jk;\n\t\t\tcin>>tim>>tid>>pid>>jk;\n\t\t\ttid--;\n\t\t\tpid--;\n\n\t\t\tif(team[tid].wrongNum[pid]==-1)continue;\n\n\t\t\tif(jk!=0){\n\t\t\t\tteam[tid].wrongNum[pid]++;\n\t\t\t}\n\t\t\telse{\n\t\t\t\tteam[tid].penalty+=team[tid].wrongNum[pid]*20;\n\t\t\t\tteam[tid].wrongNum[pid]=-1;\n\t\t\t\tteam[tid].ansNum++;\n\t\t\t\tteam[tid].time+=tim;\n\t\t\t}\n\t\t}\n\n\t\tfor(int i=0;i<t;i++){\n\t\t\tteam[i].penalty+=team[i].time;\n\t\t}\n/*\n\t\tfor(int i=0;i<t;i++){\n\t\t\tcout<<\"i=\"<<i<<endl;\n\t\t\tcout<<team[i].ansNum<<\" \"<<team[i].penalty<<endl;\n\t\t}\n\t\t*/\n\t\t//答え数のソートを行う。\n\t\tfor(int i=0;i<t;i++){\n\t\t\tfor(int j=t-1;j>i;j--){\n\t\t\t\tif(team[j].ansNum>=team[j-1].ansNum){\n\t\t\t\t\tint tmp = team[j].ansNum;\n\t\t\t\t\tteam[j].ansNum = team[j-1].ansNum;\n\t\t\t\t\tteam[j-1].ansNum =tmp;\n\t\t\t\t\t\n\t\t\t\t\ttmp = team[j].penalty;\n\t\t\t\t\tteam[j].penalty = team[j-1].penalty;\n\t\t\t\t\tteam[j-1].penalty = tmp;\n\n\t\t\t\t\ttmp = team[j].teamNum;\n\t\t\t\t\tteam[j].teamNum = team[j-1].teamNum;\n\t\t\t\t\tteam[j-1].teamNum = tmp;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t//答え数の数を数える。\n\t\tfor(int i=0;i<t;i++){\n\t\t\tansLine[team[i].ansNum]++;\n\t\t}\n\n\t\t//次はペナルティにてソートを行う。\n\t\t//ペナルティにてソートを行う際、回答数が同じ場合のみ交換を行う。\n\t\tfor(int i=0;i<t;i++){\n\t\t\tfor(int j=t-1;j>i;j--){\n\t\t\t\tif(team[j].penalty<=team[j-1].penalty && team[j].ansNum == team[j-1].ansNum){\n\t\t\t\t\tint tmp = team[j].ansNum;\n\t\t\t\t\tteam[j].ansNum = team[j-1].ansNum;\n\t\t\t\t\tteam[j-1].ansNum =tmp;\n\t\t\t\t\t\n\t\t\t\t\ttmp = team[j].penalty;\n\t\t\t\t\tteam[j].penalty = team[j-1].penalty;\n\t\t\t\t\tteam[j-1].penalty = tmp;\n\n\t\t\t\t\ttmp = team[j].teamNum;\n\t\t\t\t\tteam[j].teamNum = team[j-1].teamNum;\n\t\t\t\t\tteam[j-1].teamNum = tmp;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t//最後にチーム番号にてソートを行う。\n\t\t//回答数とペナルティ数が同じ場合のみソートを実行\n\t\tfor(int i=0;i<t;i++){\n\t\t\tfor(int j=t-1;j>i;j--){\n\t\t\t\tif(team[j].teamNum>=team[j-1].teamNum && team[j].ansNum == team[j-1].ansNum && team[j].penalty == team[j-1].penalty){\n\t\t\t\t\tint tmp = team[j].ansNum;\n\t\t\t\t\tteam[j].ansNum = team[j-1].ansNum;\n\t\t\t\t\tteam[j-1].ansNum =tmp;\n\t\t\t\t\t\n\t\t\t\t\ttmp = team[j].penalty;\n\t\t\t\t\tteam[j].penalty = team[j-1].penalty;\n\t\t\t\t\tteam[j-1].penalty = tmp;\n\n\t\t\t\t\ttmp = team[j].teamNum;\n\t\t\t\t\tteam[j].teamNum = team[j-1].teamNum;\n\t\t\t\t\tteam[j-1].teamNum = tmp;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t//解答出力\n\t\tfor(int i=0;i<t;i++){\n\t\t\tteam[i].teamNum++;\n\t\t\tif(i!=t-1){\n\t\t\t\tcout<<team[i].teamNum;\n\t\t\t\tif(team[i].ansNum==team[i+1].ansNum && team[i].penalty == team[i+1].penalty){\n\t\t\t\t\tcout<<'=';\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tcout<<',';\n\t\t\t\t}\n\t\t\t}\n\t\t\telse{\n\t\t\t\tcout<<team[i].teamNum<<endl;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n\nusing namespace std;\n\nint main() {\n    while(true) {\n        int M, T, P, R;\n        cin >> M >> T >> P >> R;\n\n        if(M == 0 && T==0 && P == 0 && R == 0) return 0;\n\n        int m, t, p, j;\n        int result[T];\n        fill(result, result + T, 0);\n        int time[T];\n        fill(time, time + T, 0);\n        int failure[T][P];\n        fill(failure[0], failure[T] + P, 0);\n        for (int submit = 0; submit < R; submit++) {\n            cin >> m >> t >> p >> j;\n            if (j == 0) {\n                result[t - 1] += 1;\n                time[t - 1] += m + failure[t - 1][p-1] * 20;\n            } else {\n                ++failure[t - 1][p-1];\n            }\n        }\n\n        bool done[T];\n        fill(done, done + T, false);\n        int prevPoint, prevTime;\n        for (int count = 0; count < T; count++) {\n            int maxPoint = -1;\n            int maxTeam = 0;\n            int minTime = 100000;\n            for (int i = T - 1; i >= 0; i--) {\n                if (done[i]) continue;\n                if (maxPoint < result[i]) {\n                    maxPoint = result[i];\n                    maxTeam = i + 1;\n                    minTime = time[i];\n                } else if (maxPoint == result[i]) {\n                    if (minTime > time[i]) {\n                        minTime = time[i];\n                        maxTeam = i + 1;\n                    }\n                }\n            }\n            minTime = time[maxTeam - 1];\n            if (count != 0) {\n                if (maxPoint == prevPoint && minTime == prevTime) cout << \"=\";\n                else cout << \",\";\n            }\n            cout << maxTeam;\n            done[maxTeam - 1] = true;\n            prevPoint = maxPoint;\n            prevTime = minTime;\n        }\n        cout << endl;\n    }\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n\nusing namespace std;\n\nstruct Team\n{\n\tint id;\n\tint crr_num;\n\tint time_sum;\n\tint fal[10];\n\n\tbool operator < (const Team& oth)const{\n\t\tif(crr_num==oth.crr_num) {\n\t\t\tif(time_sum==oth.time_sum) return id>oth.id;\n\t\t\treturn time_sum<oth.time_sum;\n\t\t}\n\t\treturn crr_num>oth.crr_num;\n\t}\n};\n\nint main(int argc, char const *argv[])\n{\n\tint m,t,p,r;\n\n\twhile(1){\n\t\tcin>>m>>t>>p>>r;\n\t\tif(m+t+p+r==0) break;\n\n\t\tvector<Team> jg(t);\n\n\t\tfor(int i1=0;i1<t;i1++){\n\t\t\tjg[i1].id=i1+1;\n\t\t\tjg[i1].crr_num=0;\n\t\t\tjg[i1].time_sum=0;\n\t\t\tfor(int i2=0;i2<10;i2++){\n\t\t\t\tjg[i1].fal[i2]=0;\n\t\t\t}\n\t\t}\n\n\t\tint tm,tt,tp,j;\n\t\tfor(int i1=0;i1<r;i1++){\n\t\t\tcin>>tm>>tt>>tp>>j;\n\n\t\t\tif(j==0){\n\t\t\t\tjg[tt-1].crr_num++;\n\t\t\t\tjg[tt-1].time_sum+=(tm+jg[tt-1].fal[tp-1]*20);\n\t\t\t}\n\t\t\telse jg[tt-1].fal[tp-1]++;\n\t\t}\n\n\t\tsort(jg.begin(),jg.end());\n\n\t\tcout<<jg[0].id;\n\t\tfor(int i1=1;i1<t;i1++){\n\t\t\tif(jg[i1].crr_num==jg[i1-1].crr_num && jg[i1].time_sum==jg[i1-1].time_sum){\n\t\t\t\tcout<<\"=\"<<jg[i1].id;\n\t\t\t}\n\t\t\telse cout<<\",\"<<jg[i1].id;\n\t\t}\n\t\tcout<<endl;\n\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<vector>\n#include<algorithm>\n\nusing namespace std;\n\nint M, T, P, R;\n\nstruct DATA{\n  int id, t, sv;\n  vector<int> pr, pt;\n  DATA(int id_): id(id_), t(0), sv(0), pr(P,false), pt(P,0){} \n  bool operator ==(const DATA& a){\n    return (sv==a.sv && t==a.t);\n  }\n};\n\nbool comp(const DATA& a, const DATA& b){\n  if(a.sv != b.sv) return a.sv > b.sv;\n  if(a.t != b.t) return a.t < b.t;\n  return a.id > b.id;\n}\n\nint main(){\n  int m, t, p, is;\n  vector<DATA> data;\n  while(1){\n    cin >> M >> T >> P >> R;\n    if(!M && !T && !P && !R) break;\n    data.clear();\n    for(int i=1; i<=T; ++i) data.push_back(DATA(i));\n    for(int i=0; i<R; ++i){\n      cin >> m >> t >> p >> is;\n      --t; --p;\n      if(is){\n\t++data[t].pt[p];\n      }else if(!data[t].pr[p]){\n\tdata[t].t += m + 20 * data[t].pt[p];\n\t++data[t].sv;\n\tdata[t].pr[p] = true;\n      }\n    }\n    sort(data.begin(), data.end(), comp);\n    cout << data[0].id;\n    for(int i=1; i<data.size(); ++i){\n      cout << (data[i]==data[i-1] ? '=' : ',') << data[i].id;\n    }\n    cout << endl;\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include \"bits/stdc++.h\"\nusing namespace std;\ntypedef long long ll;\n#define INF (1<<30)\n#define INFLL (1ll<<60)\ntypedef pair<int, int> P;\ntypedef pair<int, P> E;\n#define MOD (1000000007ll)\n#define l_ength size\n\nvoid mul_mod(ll& a, ll b){\n\ta *= b;\n\ta %= MOD;\n}\n\nvoid add_mod(ll& a, ll b){\n\tb += MOD;\n\ta += b;\n\ta %= MOD;\n}\n\nstruct team{\n\tint id;\n\tint point;\n\tint time;\n};\n\nbool y[55][11];\nint f[55][11];\nteam s[55];\n\nbool comp(team a, team b){\n\treturn ((a.point==b.point)?((a.time==b.time)?(a.id>b.id):(a.time<b.time)):(a.point>b.point));\n}\n\nint main(void){\n\tint M,T,P,R,m,t,p,j,i;\n\twhile(true){\n\t\tcin >> M >> T >> P >> R;\n\t\tif(!(M || T || P || R)){\n\t\t\tbreak;\n\t\t}\n\t\tfor(i=0; i<T; ++i){\n\t\t\ts[i].id=(i+1);\n\t\t\ts[i].point=0;\n\t\t\ts[i].time=0;\n\t\t}\n\t\tfill(y[0],y[55],true);\n\t\tfill(f[0],f[55],0);\n\t\tfor(i=0; i<R; ++i){\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\t--t; --p;\n\t\t\tif(j && y[t][p]){\n\t\t\t\t++f[t][p];\n\t\t\t}else if(!j){\n\t\t\t\ts[t].point += 1;\n\t\t\t\ts[t].time += m;\n\t\t\t\ts[t].time += 20*f[t][p];\n\t\t\t\ty[t][p] = false;\n\t\t\t}\n\t\t}\n\t\tsort(s,s+T,comp);\n\t\tfor(i=0; i<T; ++i){\n\t\t\tcout << ((i)?((s[i-1].point==s[i].point&&s[i-1].time==s[i].time)?\"=\":\",\"):\"\") << s[i].id;\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#define _USE_MATH_DEFINES\n#include <bits/stdc++.h>\n\nusing namespace std;\n\n// repetition\n#define FOR(i, a, b) for (int i = (a); i < (b); ++i)\n#define rep(i, n) for (int i = 0; i < (int)(n); i++)\n\n// container util\n#define all(x) (x).begin(), (x).end()\n\n// debug\n#define dump(x) cerr << #x << \" = \" << (x) << endl;\n#define debug(x)                                         \\\n  cerr << #x << \" = \" << (x) << \" (L\" << __LINE__ << \")\" \\\n       << \" \" << __FILE__ << endl;\n\n// typedef\ntypedef long long lint;\ntypedef unsigned long long ull;\ntypedef complex<long double> Complex;\ntypedef pair<int, int> P;\ntypedef tuple<int, int, int> TP;\ntypedef vector<int> vec;\ntypedef vector<vec> mat;\n\n// constant\nconst int MOD = (int)1e9 + 7;\nconst int INF = (int)1e18;\nconst int dx[] = {0, 1, 0, -1};\nconst int dy[] = {1, 0, -1, 0};\nconst int ddx[] = {0, 1, 1, 1, 0, -1, -1, -1};\nconst int ddy[] = {1, 1, 0, -1, -1, -1, 0, 1};\n\n// conversion\ninline int toInt(string s) {\n  int v;\n  istringstream sin(s);\n  sin >> v;\n  return v;\n}\ntemplate <class T>\ninline string toString(T x) {\n  ostringstream sout;\n  sout << x;\n  return sout.str();\n}\n\n//\ntemplate <class T>\ninline bool chmax(T& a, T b) {\n  if (a < b) {\n    a = b;\n    return 1;\n  }\n  return 0;\n}\ntemplate <class T>\ninline bool chmin(T& a, T b) {\n  if (a > b) {\n    a = b;\n    return 1;\n  }\n  return 0;\n}\n//\n\nint main() {\n  ios::sync_with_stdio(false);\n  cin.tie(0);\n\n  int M, T, P, R;\n  while (true) {\n    cin >> M >> T >> P >> R;\n    if (M == 0 && T == 0 && P == 0 && R == 0) break;\n    //正解数、チームid、経過時間、問題番号、不正解数\n    vector<tuple<int, int, int, map<int, int>>> rec(T);\n    rep(i, T) get<1>(rec[i]) = i + 1;\n    rep(i, R) {\n      int m, t, p, j;\n      cin >> m >> t >> p >> j;\n      t--;\n      if (j == 0) {\n        get<0>(rec[t]) += 1;\n        get<2>(rec[t]) += m + get<3>(rec[t])[p] * 20;\n      } else {\n        get<3>(rec[t])[p]++;\n      }\n    }\n\n    vector<vector<pair<int, int>>> ans(11);\n    rep(i, T) {\n      int tt = get<2>(rec[i]);\n      int id = get<1>(rec[i]);\n      ans[get<0>(rec[i])].push_back(make_pair(tt, -id));\n    }\n\n    rep(i, 11) sort(all(ans[i]));\n    int e = 0;\n    rep(i, 11) {\n      if (ans[i].size() == 0)\n        e++;\n      else\n        break;\n    }\n    for (int i = 10; e <= i; i--) {\n      for (int j = 0; j < ans[i].size(); j++) {\n        cout << -ans[i][j].second;\n        if (ans[i][j].first == ans[i][j + 1].first && j + 1 < ans[i].size())\n          cout << \"=\";\n        else {\n          if (j + 1 != (int)ans[i].size()) cout << \",\";\n        }\n      }\n      if (ans[i].size() != 0 && e != i) cout << \",\";\n    }\n    cout << \"\\n\";\n  }\n\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\n#include<functional>\n#include<vector>\n#include<string>\n#include<map>\n#include<queue>\nusing namespace std;\n#define REP(i, a, n) for(int i=a; i<n; i++)\n#define RREP(i, a, n) for(int i=n-1; i>=a; i--)\n#define INF 1000000000\n#define MP(a, b) make_pair(a, b)\n#define F first\n#define S second\n\nint main() {\n\tint M, T, P, R;\n\twhile (cin >> M >> T >> P >> R) {\n\t\tvector<pair<int, pair<int, int>>> vp;  // correct, time, team\n\t\tint pena[51][11];\n\n\t\tREP(i, 0, T) vp.push_back(MP(0, MP(0, i + 1)));\n\t\tREP(i, 0, 51) REP(j, 0, 11) pena[i][j] = 0;\n\n\t\tREP(i, 0, R) {\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tt--;\n\t\t\tp--;\n\n\t\t\tif (j == 0) {\n\t\t\t\tvp[t].F++;\n\t\t\t\tvp[t].S.F -= (pena[t][p] + m);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tpena[t][p] += 20;\n\t\t\t}\n\t\t}\n\n\t\tsort(vp.begin(), vp.end());\n\t\treverse(vp.begin(), vp.end());\n\n\t\tcout << vp[0].S.S;\n\t\tREP(i, 1, vp.size()) {\n\t\t\tif (vp[i - 1].F > vp[i].F) {\n\t\t\t\tcout << \",\" << vp[i].S.S;\n\t\t\t}\n\t\t\telse if (vp[i - 1].S.F > vp[i].S.F) {\n\t\t\t\tcout << \",\" << vp[i].S.S;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcout << \"=\" << vp[i].S.S;\n\t\t\t}\n\t\t}\n\n\t\tcout << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <functional>\n#include <algorithm>\n#include <iostream>\n#include <numeric>\n#include <iomanip>\n#include <utility>\n#include <cstdlib>\n#include <sstream>\n#include <bitset>\n#include <vector>\n#include <cstdio>\n#include <ctime>\n#include <queue>\n#include <deque>\n#include <cmath>\n#include <stack>\n#include <list>\n#include <map>\n#include <set>\n\nusing namespace std;\n\ntypedef vector<int> vi;\ntypedef pair<int,int> pii;\ntypedef long long ll;\n\n#define dump(x)  cerr << #x << \" = \" << (x) << endl\n#define rep(i,n) for(int i=0;i<(n);i++)\n#define all(a)  (a).begin(),(a).end()\n#define pb push_back\n#define sz size()\n\nclass TEAM{\npublic:\n    int pena[20];\n    int sum;\n    int time;\n    int num;\n    int point;\n    \n    \n    TEAM(){\n        rep(i,20)pena[i]=0;\n        sum=time=num=point=0;\n    }\n};\n\nint main(){\n    int M,T,P,R;\n    while(cin>>M>>T>>P>>R){\n        TEAM team[100];\n        \n        \n        if(M==0 && T==0 && P==0 && R==0)break;\n        \n        rep(i,T)team[i].num=i+1;\n        \n        rep(i,R){\n            int m,t,p,j;\n            cin>>m>>t>>p>>j;\n            t--;\n            if(j==0){\n                team[t].sum++;\n                team[t].time+=m+team[t].pena[p]*20;\n            }else{\n                team[t].pena[p]++;\n            }\n        }\n        \n        rep(i,T){\n            team[i].point=team[i].sum*100000000 + 10000000-team[i].time;\n        }\n\n        for(int i=0;i<T-1;i++){\n            for(int j=T-1;j>i;j--){\n                if(team[j].point<team[j-1].point)swap(team[j],team[j-1]);\n            }\n        }\n        \n        cout<<team[T-1].num;\n//        cout<<\" \"<<team[T-1].point<<endl;\n        for(int i=T-2;i>=0;i--){\n            if(team[i+1].point==team[i].point){\n                cout<<\"=\"<<team[i].num;\n//                cout<<\" \"<<team[i].point<<endl;\n            }\n            else{\n                cout<<\",\"<<team[i].num;\n//                cout<<\" \"<<team[i].point<<endl;\n            }\n        }\n        cout<<endl;\n    }\n    return 0;\n}\n\n\n/*\nint main(){\n    int M,T,P,R;\n    while(cin>>M>>T>>P>>R){\n        TEAM team[100];\n        \n        \n        if(M==0 && T==0 && P==0 && R==0)break;\n        \n        rep(i,T)team[i].num=i;\n        \n        rep(i,R){\n            int m,t,p,j;\n            cin>>m>>t>>p>>j;\n            t--;\n            if(j==0){\n                team[t].sum++;\n                team[t].time+=m+team[t].pena[p]*20;\n            }else{\n                team[t].pena[p]++;\n            }\n        }\n        \n        rep(i,T){\n            team[i].point=team[i].sum*100000000 + 10000000-team[i].time;\n        }\n        \n        for(int i=T-1;i>=1;i--){\n            for(int j=i;j>=1;j--){\n                if(team[j].point>team[j-1].point)swap(team[j],team[j-1]);\n            }\n        }\n        cout<<team[T-1].num+1;\n        cout<<\" \"<<team[T-1].point<<endl;\n        for(int i=T-2;i>=0;i--){\n            if(team[i-1].point==team[i].point){\n                cout<<\"=\"<<team[i].num+1;\n                cout<<\" \"<<team[i].point<<endl;\n            }\n            else{\n                cout<<\",\"<<team[i].num+1;\n                cout<<\" \"<<team[i].point<<endl;\n            }\n        }\n        cout<<endl;\n    }\n    \n    return 0;\n}\n */"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\ntypedef tuple<int,int,int> Team;\nint AC[50][10],WA[50][10];\nint main() {\n    int  M,T,P,R;\n    while(cin>>M>>T>>P>>R,M) {\n        memset(AC,-1,sizeof(AC));\n        memset(WA,0,sizeof(WA));\n        for(int i=0;i<R;i++) {\n            int m,t,p,j;\n            cin>>m>>t>>p>>j;\n            t--;p--;\n            if(j==0) {\n                AC[t][p]=m;\n            }else {\n                WA[t][p]++;\n            }\n        }\n        vector<Team> v;\n        for(int i=0;i<T;i++) {\n            int solved=0,penalty=0;\n            for(int j=0;j<P;j++) {\n                if(AC[i][j]!=-1) solved++,penalty+=AC[i][j]+WA[i][j]*20;\n            }\n            v.push_back(make_tuple(-solved,penalty,-(i+1)));\n        }\n        sort(v.begin(),v.end());\n        printf(\"%d\",-get<2>(v[0]));\n        for(int i=1;i<v.size();i++) {\n            if(get<0>(v[i-1])<get<0>(v[i])||get<1>(v[i-1])<get<1>(v[i])) putchar(',');\n            else putchar('=');\n            printf(\"%d\",-get<2>(v[i]));\n        }\n        putchar('\\n');\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\nusing namespace std;\n\nint main(){\n\twhile(1){\n\t\tint M,T,P,R;\n\t\tcin>>M>>T>>P>>R;\n\n\t\tif(M==0&&T==0&&P==0&&R==0)\n\t\t\tbreak;\n\n\t\tint CP[50],TT[50],PT[50][10];\n\t\tfor(int i=0;i<T;i++){\n\t\t\tCP[i]=TT[i]=0;\n\t\t\tfor(int j=0;j<P;j++){\n\t\t\t\tPT[i][j]=0;\n\t\t\t}\n\t\t}\n\n\t\tfor(int i=0;i<R;i++){\n\t\t\tint m,t,p,j;\n\t\t\tcin>>m>>t>>p>>j;\n\t\t\n\t\t\tif(j==0){\n\t\t\t\tCP[t-1]++;\n\t\t\t\tTT[t-1]+=(m+PT[t-1][p-1]);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tPT[t-1][p-1]+=20;\n\t\t\t}\n\t\t}\n\n\t\tint  tnow,tpre=-1;\n\t\tbool flg[50];\n\t\tfor(int i=0;i<T;i++){\n\t\t\tflg[i]=false;\n\t\t}\n\n\t\tfor(int i=0;i<T;i++){\n\t\t\ttnow=-1;\n\t\t\tfor(int j=0;j<T;j++){\n\t\t\t\tif(flg[j])\n\t\t\t\t\t continue;\n\n\t\t\t\tif(tnow=-1){\n\t\t\t\t\ttnow=j;\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tif(CP[j]>CP[tnow]||(CP[j]==CP[tnow]&&TT[j]<=TT[tnow])){\n\t\t\t\t\t\ttnow=j;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(tpre!=-1){\n\t\t\t\tif(CP[tnow]==CP[tpre]&&TT[tpre]<=TT[tnow]){\n\t\t\t\t\tcout<<'=';\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tcout<<'.';\n\t\t\t\t}\n\t\t\t}\n\t\t\tcout<<tnow+1;\n\t\t\n\t\t\tflg[tnow]=true;\n\t\t\ttpre=tnow;\n\t\t}\n\t\tcout<<endl;\n\t}\n\t\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<string>\n#include<vector>\n#include<tuple>\n#include<set>\n#include<map>\n#include<algorithm>\nusing namespace std;\n\nstruct Record {\n  int tid, pid, time;\n  bool correct;\n};\n\nstruct Team {\n  Team() {\n    penalty = 0;\n  }\n  set<int> solved;\n  map<int, int> WA;\n  int penalty;\n};\n\n// Solved Problems, Penalty, Team ID\ntypedef tuple<int, int, int> Score;\n\nint main() {\n  int M, T, P, R;\n  while (cin >> M >> T >> P >> R && M) {\n    vector<Record> records(R);\n    for (int i = 0; i < R; i++) {\n      int m, t, p, j;\n      cin >> m >> t >> p >> j;\n      records[i].pid = --p;\n      records[i].tid = --t;\n      records[i].time = m;\n      records[i].correct = (j == 0);\n    }\n\n    vector<Team> teams(T);\n    for (Record r : records) {\n      if (teams[r.tid].solved.find(r.pid) != teams[r.tid].solved.end()) {\n        continue;\n      } else if (r.correct) {\n        teams[r.tid].solved.insert(r.pid);\n        teams[r.tid].penalty +=\n          teams[r.tid].WA[r.pid] * 20 + r.time;\n      } else {\n        teams[r.tid].WA[r.pid]++;\n      }\n    }\n\n    vector<Score> team_result(T);\n    for (int i = 0; i < T; i++) {\n      get<0>(team_result[i]) = -teams[i].solved.size();\n      get<1>(team_result[i]) = teams[i].penalty;\n      get<2>(team_result[i]) = -i;\n    }\n\n    sort(team_result.begin(), team_result.end());\n\n    for (int i = 0, len = team_result.size(); i < len; i++) {\n      Score s = team_result[i];\n      if (i > 0) {\n        Score p = team_result[i - 1];\n        cout << \n          (get<0>(p) == get<0>(s) && get<1>(p) == get<1>(s)?\"=\":\",\");\n      }\n      cout << -get<2>(s)+1;\n    }\n    cout << endl;\n  }\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n#include <map>\n#include <numeric>\n\nusing namespace std;\n\nstruct Team\n{\n\tint num;\n\tvector<int> corrects;\n\tvector<int> incorrects;\n\tint time;\n\n\tTeam(int p) : num(0), corrects(p, 0), incorrects(p, 0), time(0) {}\n\n\tbool operator < (const Team& t) const {\n\t\tint c = count(corrects.begin(), corrects.end(), 1);\n\t\tint tc = count(t.corrects.begin(), t.corrects.end(), 1);\n\n\t\tif (c == tc) {\n\t\t\tif (time == t.time) {\n\t\t\t\treturn num > t.num;\n\t\t\t}\n\t\t\treturn time < t.time;\n\t\t}\n\n\t\treturn c > tc;\n\t}\n};\n\nint main()\n{\n\twhile (1)\n\t{\n\t\tint M, T, P, R;\n\t\tcin >> M >> T >> P >> R;\n\n\t\tif (M == 0 && T == 0 && P == 0 && R == 0) { break; }\n\n\t\tvector<Team> teams(T, Team(P));\n\n\t\tfor (int i = 0; i < T; ++i) {\n\t\t\tteams[i].num = i + 1;\n\t\t}\n\n\t\tfor (int i = 0; i < R; ++i) {\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >> j;\n\n\t\t\t// judge is incorrect.\n\t\t\tif (j != 0) {\n\t\t\t\tteams[t - 1].incorrects[p - 1]++;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// judge is correct.\n\t\t\tteams[t - 1].corrects[p - 1] = 1;\n\n\t\t\tint time = m + teams[t - 1].incorrects[p - 1] * 20;\n\t\t\tteams[t - 1].time = time;\n\t\t}\n\n\t\tsort(teams.begin(), teams.end());\n\n\t\tint time = 0;\n\t\tfor (int i = 0; i < teams.size(); ++i) {\n\t\t\tauto&& t = teams[i];\n\n\t\t\tint c = count(t.corrects.begin(), t.corrects.end(), 1);\n\n\n\t\t\tif (i == teams.size() - 1) {\n\t\t\t\tcout << t.num << endl;\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tauto&& nt = teams[i + 1];\n\n\t\t\tint nc = count(nt.corrects.begin(), nt.corrects.end(), 1);\n\n\t\t\tif (c == nc && nt.time == t.time) {\n\t\t\t\tcout << t.num << '=';\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcout << t.num << ',';\n\t\t\t}\n\t\t}\n\t}\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n#define FOR(i,a,b) for(int i=(a);i<(int)(b);i++)\n#define rep(i,n) FOR(i,0,n)\n#define pb push_back\n\nstruct Team {\n    int num=0, ac=0, pen=0;\n    int wa[15] = {0};\n};\n\nvoid solve(int M,int T,int P,int R) {\n    vector<Team> teams(T+2);\n    rep(i,T) teams[i].num=i+1;\n    rep(i,R) {\n        int time,tm, prg, msg;\n        cin>>time>>tm>>prg>>msg;\n        tm--; prg--;\n        if(msg != 0) {\n            teams[tm].wa[prg]++;\n        } else {\n            teams[tm].ac++;\n            teams[tm].pen += teams[tm].wa[prg] * 20 + time;\n        }\n    }\n    rep(i,T) rep(j,T-1) {\n        if(teams[j].ac < teams[j+1].ac) swap(teams[j], teams[j+1]);\n        if(teams[j].ac == teams[j+1].ac\n                and teams[j].pen > teams[j+1].pen) swap(teams[j], teams[j+1]);\n        if(teams[j].ac == teams[j+1].ac\n                and teams[j].pen == teams[j+1].pen\n                and teams[j].num < teams[j+1].num) swap(teams[j], teams[j+1]);\n    }\n\n    rep(i,T) {\n        cout << teams[i].num;\n        if(i+1 == T)\n            puts(\"\");\n        else if(teams[i].ac == teams[i+1].ac and teams[i].pen == teams[i+1].pen)\n            cout << '=';\n        else\n            cout << ',';\n    }\n}\n\nint main() {\n    int M,T,P,R;\n    while(cin>>M>>T>>P>>R, T) solve(M,T,P,R);\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\nusing namespace std;\n\nint main(){\n\twhile(1){\n\t\tint M,T,P,R;\n\t\tcin>>M>>T>>P>>R;\n\n\t\tif(M==0&&T==0&&P==0&&R==0)\n\t\t\tbreak;\n\n\t\tint CP[50],TT[50],PT[50][10];\n\t\tfor(int i=0;i<T;i++){\n\t\t\tCP[i]=TT[i]=0;\n\t\t\tfor(int j=0;j<P;j++){\n\t\t\t\tPT[i][j]=0;\n\t\t\t}\n\t\t}\n\n\t\tfor(int i=0;i<R;i++){\n\t\t\tint m,t,p,j;\n\t\t\tcin>>m>>t>>p>>j;\n\t\t\n\t\t\tif(j==0){\n\t\t\t\tCP[t-1]++;\n\t\t\t\tTT[t-1]+=(m+PT[t-1][p-1]);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tPT[t-1][p-1]+=20;\n\t\t\t}\n\t\t}\n\n\t\tint  tnow,tpre=-1;\n\t\tbool flg[50];\n\t\tfor(int i=0;i<T;i++){\n\t\t\tflg[i]=false;\n\t\t}\n\n\t\tfor(int i=0;i<T;i++){\n\t\t\ttnow=-1;\n\t\t\tfor(int j=0;j<T;j++){\n\t\t\t\tif(flg[j])\n\t\t\t\t\t continue;\n\n\t\t\t\tif(tnow==-1){\n\t\t\t\t\ttnow=j;\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tif(CP[j]>CP[tnow]||(CP[j]==CP[tnow]&&TT[j]<=TT[tnow])){\n\t\t\t\t\t\ttnow=j;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(tpre!=-1){\n\t\t\t\tif(CP[tnow]==CP[tpre]&&TT[tpre]==TT[tnow]){\n\t\t\t\t\tcout<<'=';\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tcout<<'.';\n\t\t\t\t}\n\t\t\t}\n\t\t\tcout<<tnow+1;\n\t\t\n\t\t\tflg[tnow]=true;\n\t\t\ttpre=tnow;\n\t\t}\n\t\tcout<<endl;\n\t}\n\t\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<string>\n#include<vector>\n\nusing namespace std;\n\nstruct teme {\n\tint num;\n\tint caPro;\n\tint sumtime;\n\tint pro[11];\n};\n\nvoid temeset(teme* t, int yoso) {\n\tfor (int i = 1; i <= yoso; i++) {\n\t\tt[i].num = i;\n\t\tt[i].caPro = 0;\n\t\tt[i].sumtime = 0;\n\t\tfor (int j = 1; j <= 10; j++) {\n\t\t\tt[i].pro[j] = 0;\n\t\t}\n\t}\n}\n\nint comp(const void*  A,const void* B) {\n\tconst teme* a = (const teme*)A;\n\tconst teme* b = (const teme*)B;\n\n\tif (b->caPro == a->caPro)\n\t{\n\t\tif (b->sumtime == a->sumtime) {\n\t\t\treturn b->num - a->num;\n\t\t}\n\t\treturn a->sumtime - b->sumtime;\n\t}\n\treturn b->caPro - a->caPro;\n}\n\nint main() {\n\tint w, t, p, r;\n\tvector<string>v;\n\twhile (cin >> w >> t >> p >> r, w || t || p || r) {\n\t\tteme te[51];\n\t\ttemeset(te, t);\n\t\tfor (int i = 0; i < r; i++) {\n\t\t\tint mk, tk, pk, jk;\n\t\t\tcin >> mk >> tk >> pk >> jk;\n\t\t\tif (jk == 0) {\n\t\t\t\tte[tk].caPro++;\n\t\t\t\tte[tk].sumtime += mk + te[tk].pro[pk];\n\t\t\t}\n\t\t\telse {\n\t\t\t\tte[tk].pro[pk] += 20;\n\t\t\t}\n\t\t}\n\t\tqsort(te+1, t, sizeof(teme), comp);\n\t\tstring s = \"\";\n\t\tfor (int i = 1; i <= t; i++) {\n\t\t\t//cout << te[i].num << \"???:\" << te[i].caPro << \" \" << te[i].sumtime << endl;\n\t\t\ts += to_string(te[i].num);\n\t\t\tif (i != t) {\n\t\t\t\tif (te[i].caPro == te[i + 1].caPro && te[i].sumtime == te[i + 1].sumtime) {\n\t\t\t\t\ts += \"=\";\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\ts += \",\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tv.push_back(s);\n\t}\n\n\tfor (int i = 0; i < v.size(); i++) {\n\t\tcout << v[i] << endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\n#define loop(n, i) for(int i=0;i<n;i++)\n#define all(v) v.begin(),v.end()\n#define HERE cout << \"HERE: \" << __LINE__ << endl;\n#define INSP(v) cout << v << \" at \" << __LINE__ << endl;\n\nusing namespace std;\ntypedef long long ll;\n\n\nint main()\n{\n    int M, T, P, R;\n    while (cin >> M >> T >> P >> R, M) {\n        vector<vector<int>> result(T, vector<int>(3+P,0));\n        loop(T,i) result[i][0] = i+1;\n        loop(R,i) {\n             int m, t, p, j;\n             cin >> m >> t >> p >> j;\n             if (j) {\n                 if (result[t-1][p+2] != -1) result[t-1][p+2]++;\n             } else {\n                 if (result[t-1][p+2] != -1) {\n                     result[t-1][1]++;\n                     result[t-1][2] += result[t-1][p+2]*20 + m;\n                     result[t-1][p+2] = -1;\n                 }\n             }\n        }\n        //cout << \"====debug====\" << endl;\n        //for(auto r:result){\n        //    cout << r[0] << ' ' << r[1] << ' ' << r[2] << endl;\n        //}\n        \n        sort(all(result),\n                [](vector<int> a, vector<int> b) {\n                    if(a[1] != b[1]) return a[1] > b[1];\n                    if(a[2] != b[2]) return a[2] < b[2];\n                    return a[0] > b[0];\n                });\n            \n        loop(T,i) {\n            cout << result[i][0];\n            if (i==T-1) {\n                cout << endl;\n            } else if (result[i][1] == result[i+1][1]\n                    && result[i][2] == result[i+1][2])\n                cout << '=';\n            else cout << ',';\n        }\n    }\n}"
  },
  {
    "language": "C++",
    "code": "/*\n *\n *\n */\n\n#include <bits/stdc++.h>\n\nusing namespace std;\n\n#define LOG(...) fprintf(stderr, __VA_ARGS__)\n//#define LOG(...)\n#define FOR(i, a, b) for(int i = (int)(a); i < (int)(b); ++i)\n#define REP(i, n) for(int i = 0; i < (int)(n); ++i)\n#define RREP(i, n) for(int i = (int)(n - 1); i >= 0; --i)\n#define ALL(a) (a).begin(), (a).end()\n#define RALL(a) (a).rbegin(), (a).rend()\n#define EXIST(s, e) ((s).find(e) != (s).end())\n#define SORT(c) sort(ALL(c))\n#define RSORT(c) sort(RALL(c))\n#define SQ(n) (n) * (n)\n\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef pair<int, int> pii;\ntypedef pair<ll, ll> pll;\ntypedef vector<bool> vb;\ntypedef vector<int> vi;\ntypedef vector<char> vc;\ntypedef vector<pii> vpi;\ntypedef vector<pll> vpl;\ntypedef vector<ll> vll;\ntypedef vector<vb> vvb;\ntypedef vector<vi> vvi;\ntypedef vector<vc> vvc;\ntypedef vector<vll> vvll;\n\nstruct Team {\n  int correct;\n  int penalty;\n  int vpenalty[10];\n  int id;\n\n  bool operator <(const Team& p) const {\n    if (correct == p.correct)\n      if (penalty == p.penalty)\n        return id < p.id;\n      else\n        return penalty > p.penalty;\n    else\n      return correct < p.correct;\n  }\n\n  bool operator ==(const Team& p) const {\n    if (correct == p.correct)\n      return penalty == p.penalty;\n    else\n      return correct == p.correct;\n  }\n};\n\nint main() {\n  int M, T, P, R;\n  while(cin >> M >> T >> P >> R) {\n    vector<Team> team(T);\n    REP(i, T){\n      team[i].id = i + 1;\n    }\n\n    REP(i, R){\n      int m, t, p, j;\n      cin >> m >> t >> p >> j;\n      t--; p--;\n\n      if (j) {\n        team[t].vpenalty[p] += 20;\n      }else{\n        team[t].correct++;\n        team[t].penalty += m + team[t].vpenalty[p];\n      }\n    }\n    RSORT(team);\n    cout << team[0].id;\n    FOR(i, 1, T){\n      if (team[i - 1] == team[i]) cout << '=';\n      else cout << ',';\n      cout << team[i].id;\n    }\n    cout << endl;\n  }\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define REP(i,n,N) for(int i=n;i<N;i++)\n#define p(S) cout<<S<<endl\n#define F first\n#define S second\nusing namespace std;\n\nint main(){\n\tint M,T,P,R;\n\twhile(cin>>M>>T>>P>>R,M){\n\t\tpair<int,pair<int,int>> ans[51];//-nans,time,team\n\t\tint pena[51][11]={0};//team,mondai\n\t\tREP(i,1,T+1){\n\t\t\tans[i].F=0;\n\t\t\tans[i].S.F=0;\n\t\t\tans[i].S.S=-i;\n\t\t}\n\n\t\tREP(i,0,R){\n\t\t\tint m,t,p,j;\n\t\t\tcin>>m>>t>>p>>j;\n\t\t\tif(j){//WA\n\t\t\t\tpena[t][p]++;\n\t\t\t}else{//AC\n\t\t\t\tans[t].F--;\n\t\t\t\tans[t].S.F+=m+pena[t][p]*20;\n\t\t\t}\n\t\t}\n\t\tsort(ans+1,ans+T+1);\n\t\tcout<<-ans[1].S.S;\n\t\tREP(i,2,T+1){\n\t\t\tif(ans[i-1].F==ans[i].F&&ans[i-1].S.F==ans[i].S.F){\n\t\t\t\tcout<<\"=\"<<-ans[i].S.S;\n\t\t\t}else{\n\t\t\t\tcout<<\",\"<<-ans[i].S.S;\n\t\t\t}\n\t\t}\n\t\tp(\"\");\n\t}\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#define _USE_MATH_DEFINES \n#include <iomanip> \n#include <cmath>  \n#include<iostream>\n#include <fstream>\n#include<vector>\n#include<algorithm>\n#include<bitset>\n#include<map>\n#include<queue>\n#include<stack>\nusing namespace std;\ntypedef long long ll;\n#define repi(i,a,b) for(ll i = (ll)(a) ; i < (ll)(b) ; i++)\n#define repd(i,a,b) for(ll i = (ll)(a) ; i > (ll)(b) ; i--)\n#define rd(x) cin >> x\n#define wr(x)  cout << x\n#define wrln(x) cout << x << endl\n\nint M, T, P, R;\n\nint main() {\n\tstruct team {\n\t\tint number, point, time;\n\t\tbool operator<(const team& right) const {\n\t\t\t// ポイントは大きい方が↑、同じなら時間小さい方が↑\n\t\t\treturn point == right.point ? time > right.time : point < right.point;\n\t\t}\n\t};\n\twhile (1) {\n\t\tcin >> M >> T >> P >> R;\n\t\tif (M == 0 && T == 0 && P == 0 && R == 0) break;\n\t\tvector<team> teams;\n\t\tteam ttemp;\n\t\trepi(i, 0, T) {\n\t\t\tteam t;\n\t\t\tt.number = i, t.point = 0, t.time = 0;\n\t\t\tteams.push_back(t);\n\t\t}\n\t\tint mi, ti, pi, ji;//経過時間、チーム番号、問題番号、ジャッジの種類\n\t\tint timetemps[51][11] = {};//[チーム番号][問題番号]\n\t\trepi(i, 0, R) {\n\t\t\tcin >> mi >> ti >> pi >> ji;\n\t\t\tif (ji == 0) {\n\t\t\t\t//正解\n\t\t\t\tteams[ti - 1].point++;\n\t\t\t\tteams[ti - 1].time += (timetemps[ti - 1][pi] + mi);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t//不正解\n\t\t\t\ttimetemps[ti-1][pi] += 20;\n\t\t\t}\n\t\t}\n\t\tsort(teams.begin(), teams.end());\n\t\treverse(teams.begin(), teams.end());\n\t\trepi(i, 0, teams.size()) {\n\t\t\tif (i > 0) {\n\t\t\t\tif (teams[i].point == teams[i - 1].point && teams[i].time == teams[i - 1].time) {\n\t\t\t\t\twr(\"=\");\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\twr(\",\");\n\t\t\t\t}\n\t\t\t}\n\t\t\twr(teams[i].number + 1);\n\t\t}\n\t}\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\ntypedef pair<int, int> P;\nP info[60][20];\n//bool team[51];\nvector<P> v;\n\nstring ans = \"A\";\n\nmap<int, P> mp;\n//int D[51];\nvector<int> order;\n\n//自作の比較関数\nbool comp(P lhs, P rhs){\n\tif(lhs.first != rhs.first){\n\t\treturn lhs.first < rhs.first;\n\t}\n\tif(lhs.second != rhs.second){\n\t\treturn lhs.second > rhs.second;\n\t}\n}\n\nint main(){\nwhile(1){//start\t\n\t\n\t\n\tint M, T, P, R;\n\tcin >> M >> T >> P >> R;\n\tif(M == 0 and T == 0 and P == 0 and R == 0) break;\n\t\n\t//初期化\n\tfor(int i = 0; i < 51; i++){\n\t\tfor(int j = 0; j < 11; j++){\n\t\t\tinfo[i][j].first = 0;\n\t\t\tinfo[i][j].second = 0;\n\t\t}\n\t}\n\tbool team[60] = {0};\n\tint D[60] = {0};\n\tint OK[60] = {0};\n\t\n\t//データを格納\n\tfor(int i = 0; i < R; i++){\n\t\tint m, t, p, j;\n\t\tcin >> m >> t >> p >> j;\n\t\tteam[t] = true;\n\t\t\n\t\tif(j == 0){\n\t\t\tinfo[t][p].second = m + 20*info[t][p].first;\n\t\t\tOK[t-1] += 1;\n\t\t}\n\t\telse{\n\t\t\tinfo[t][p].first += 1;\n\t\t}\n\t}\n\t\n\t//vの内部はキーがチーム名(解いた数/合計時間)\n\tfor(int i = 1; i <= T; i++){\n\t\t\tint sum = 0, ok = 0;\n\t\t\tfor(int j = 0; j < 11; j++) sum += info[i][j].second;\n\t\t\t//for(int j = 0; j < 11; j++) if(info[i][j].second) ok += 1;\n\t\t\tint tmp = OK[i-1];\n\t\t\tv.push_back(make_pair(tmp, sum));\n\t\t\tmp[i] = make_pair(tmp, sum);\n\t}\n\t\n\tsort(v.begin(), v.end(), comp);\n\treverse(v.begin(), v.end());\n\t//debug\n\t//for(int i = 0; i < (int)v.size(); i++) cout << v[i].first << \" \" << v[i].second << endl;\n\t\n\t//重複カウンタを作成\n\tint d = 1;\n\tD[0] = 1;\n\tfor(int i = 1; i < (int)v.size(); i++){\n\t\tif(v[i-1].first == v[i].first and v[i-1].second == v[i].second){\n\t\t\tD[i] = d;\n\t\t}\n\t\telse{\n\t\t\td++;\n\t\t\tD[i] = d;\n\t\t}\n\t}\n\t\n\t//debug\n\t//for(int i = 0; i < (int)v.size(); i++) cout << D[i] << endl;\n\t\n\t//ソート結果にチーム名を割り当てる\n\tbool vis[60] = {false};\n\tfor(int i = 0; i < (int)v.size(); i++){\n\t\tfor(int j = (int)v.size(); 1 <= j; j--){\n\t\t\tif(v[i] == mp[j]){\n\t\t\t\tif(vis[j] == false){\n\t\t\t\t\torder.push_back(j);\n\t\t\t\t\tvis[j] = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//debug\n\t//for(int i = 0; i < (int)v.size(); i++) cout << order[i] << endl;\n\t\n\t//出力\n\t//まず重複数を記録する\n\tint num[60] = {0};\n\tfor(int i = 0; i < 51; i++) num[D[i]] += 1;\n\t\n\tstring ans = \"A\";\n\tint idx = 0;\n\tfor(int i = 1; i <= (int)order.size(); i++){\n\t\tif(num[i] == 0) break;\n\t\telse if(num[i] == 1){ \n\t\t\tans += to_string(order[idx]);\n\t\t\tidx++;\n\t\t}\n\t\telse{\n\t\t\tfor(int j = 0; j < num[i]; j++){\n\t\t\t\tif(j == num[i]-1) ans += to_string(order[idx]);\n\t\t\t\telse ans += to_string(order[idx]) + \"=\";\n\t\t\t\tidx++;\n\t\t\t}\n\t\t}\n\t\tans += \",\";\n\t}\n\t\n\tans.erase(ans.begin() + 0);\n\tans.erase(ans.end() - 1);\n\tcout << ans << endl;\n\t\n\t//初期化\n\tv.clear();\n\tmp.clear();\n\torder.clear();\n\t\n\tans = \"A\";\n\t\n}//end\t\n\t\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#define REP(i,n) for(int i=0; i<(int)(n); i++)\n\n#include <queue>\n#include <set>\n#include <cstdio>\ninline int getInt(){ int s; scanf(\"%d\", &s); return s; }\n\nusing namespace std;\n\nint main(){\n  while(true){\n    const int m = getInt();\n    const int t = getInt();\n    const int p = getInt();\n    const int r = getInt();\n\n    if(m + t + p + r == 0) break;\n\n    vector<vector<int> > memo(t, vector<int>(p));\n    vector<pair<int, pair<int, int> > > ans(t);\n\n    REP(i,t) ans[i].second.second = i + 1;\n\n    REP(i,r){\n      const int mm = getInt();\n      const int tt = getInt() - 1;\n      const int pp = getInt() - 1;\n      const int jj = getInt();\n\n      if(jj == 0){\n        ans[tt].first        += 1;\n        ans[tt].second.first -= memo[tt][pp] * 20 + mm;\n      }else{\n        memo[tt][pp]++;\n      }\n    }\n\n    sort(ans.rbegin(), ans.rend());\n\n    REP(i,t){\n      const pair<int, pair<int, int> > now = ans[i];\n      if(i != 0){\n        const pair<int, pair<int, int> > prev = ans[i - 1];\n        if(now.first == prev.first && now.second.first == prev.second.first)\n          printf(\"=\");\n        else\n          printf(\",\");\n      }\n      printf(\"%d\", now.second.second);\n    }\n    puts(\"\");\n  }\n\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <sstream>\n#include <string>\n#include <algorithm>\n#include <vector>\n#include <stack>\n#include <queue>\n#include <set>\n#include <map>\n#include <cstdio>\n#include <cstdlib>\n#include <cstring>\n#include <cmath>\n#include <cassert>\n\nusing namespace std;\n\n#define FOR(i,k,n) for(int i=(k); i<(int)(n); ++i)\n#define REP(i,n) FOR(i,0,n)\n#define FORIT(i,c) for(__typeof((c).begin())i=(c).begin();i!=(c).end();++i)\n\ntemplate<class T> void debug(T begin, T end){ for(T i = begin; i != end; ++i) cerr<<*i<<\" \"; cerr<<endl; }\ninline bool valid(int x, int y, int W, int H){ return (x >= 0 && y >= 0 && x < W && y < H); }\n\ntypedef long long ll;\nconst int INF = 100000000;\nconst double EPS = 1e-8;\nconst int MOD = 1000000007;\nint dx[8] = {1, 0, -1, 0, 1, -1, -1, 1};\nint dy[8] = {0, 1, 0, -1, 1, 1, -1, -1};\nstruct Team{\n  int id;\n  int solve;\n  int time;\n  int wa[20];\n  Team(int n){\n    id = n;\n    solve = 0;\n    time = 0;\n    REP(i, 20) wa[i] = 0;\n  }\n  bool operator < (const Team& t) const {\n    if(solve != t.solve) return solve > t.solve;\n    if(time != t.time) return time < t.time;\n    return id > t.id;\n  }\n};\n\nint main(){\n  int M, T, P, R;\n  while(cin >> M >> T >> P >> R && M){\n    vector<Team> teams;\n    REP(i, T) teams.push_back(Team(i + 1));\n    REP(i, R){\n      int m, t, p, j;\n      cin >> m >> t >> p >> j;\n      if(j == 0){\n        teams[t - 1].time += m + teams[t - 1].wa[p - 1] * 20;\n        teams[t - 1].solve ++;\n      }else{\n        teams[t - 1].wa[p - 1] += 1;\n      }\n    }\n    sort(teams.begin(), teams.end());\n    REP(i, teams.size()){\n      if(i != 0) {\n        if(teams[i - 1].time == teams[i].time && teams[i - 1].solve == teams[i].solve) cout <<\"=\";\n        else cout << \",\";\n      }\n      cout << teams[i].id;\n    }\n    cout << endl;\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <utility>\n#include <algorithm>\nusing namespace std;\n\nint main(){\n  vector<pair<int , pair<int,int> > > vppa;\n  pair<int,int> pa;\n  pair<int,pair<int,int> > ppa;\n  int m,t,p,r,mm,tt,pp,jj,seikai[60],h[60][20];\n  while(1){\n    cin>>m>>t>>p>>r;\n    if(m==0)break;\n    for(int i=0;i<=t;i++){\n      for(int j=0;j<=p;j++){\n\th[i][j]=0;\n      }\n    }\n    for(int i=0;i<=t;i++)seikai[i]=0;\n    \n    for(int i=0;i<r;i++){\n      cin>>mm>>tt>>pp>>jj;\n      if(jj!=0)h[tt][pp]--;\n      else {\n\th[tt][pp]=(h[tt][pp]*-1)*20+mm;\n\tseikai[tt]++;\n      }\n    }\n    /* for(int i=0;i<=t;i++){////////////\n      for(int j=0;j<=p;j++){\n\tcout<<h[i][j]<<\" \";\n      }\n      cout<<endl;\n      }*/\n\n    vppa.clear();\n    for(int i=1;i<=t;i++){\n      pa.second=i*-1;\n      pa.first=0;\n      for(int j=1;j<=p;j++){\n\tif(h[i][j]>0) {\n\t  pa.first+=h[i][j];\n\t}\n      }\n      ppa.second=pa;\n      ppa.first=seikai[i]*-1;\n      vppa.push_back(ppa);\n    }\n\n    sort(vppa.begin() , vppa.end());\n\n    for(int i=0;i<vppa.size()-1;i++){\n      cout<<vppa[i].second.second*-1;\n      if(vppa[i].first==vppa[i+1].first && vppa[i].second.first==vppa[i+1].second.first){\n\tcout<<\"=\";\n      }else cout<<\",\";\n    }\n    cout<<vppa[vppa.size()-1 ].second.second*-1<<endl;\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<vector>\n#include<algorithm>\nusing namespace std;\n\nint main(){\n  int M,T,P,R;\n  while(cin >> M >> T >> P >> R){\n    if(M==0)break;\n    vector<int> times(T,0), solved(T,0);\n    vector< vector<int> > WA(T, vector<int>(10,0) );\n\n    for(int i=0;i<R;i++){\n      int m,t,p,j;\n      cin >> m >> t >> p >> j;\n      t--; p--;\n      if(j==0){\n\tsolved[t]++;\n\ttimes[t] += m + WA[t][p] * 20;\n      }else{\n\tWA[t][p]++;\n      }\n    }\n\n    vector< vector<int> > rank;\n    for(int i=0;i<T;i++){\n      vector<int> tmp;\n      tmp.push_back(-solved[i]);\n      tmp.push_back(times[i]);\n      tmp.push_back(-i);\n     \n      rank.push_back(tmp);\n    }\n\n    sort(rank.begin(),rank.end());\n\n    for(int i=0;i<T;i++){\n      cout << rank[i][2];\n      if(i+1==T)cout << endl;\n      else if(rank[i][0] == rank[i+1][0] && rank[i][1] == rank[i+1][1]){\n\tcout << \"=\";\n      }else cout << \",\";\n    }\n  }\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\n#include<vector>\nusing namespace std;\nstruct team{\n\tint num,p,cnt;\n\tint w[11];\n\tvoid init(int n)\n\t{\n\t\tnum=n;\n\t\tp=0;\n\t\tcnt=0;\n\t\tfor(int i=0;i++<10;)w[i]=0;\n\t}\n\tvoid submit(int m,int i,int j)\n\t{\n\t\tif(j)w[i]++;\n\t\telse p+=m+w[i]*20,cnt++;\n\t}\n\tbool operator<(team a)\n\t{\n\t\tif(cnt!=a.cnt)return cnt>a.cnt;\n\t\telse if(p!=a.p)return p<a.p;\n\t\telse return num>a.num;\n\t}\n\tbool operator==(team a)\n\t{\n\t\treturn cnt==a.cnt&&p==a.p;\n\t}\n};\nint M,T,P,R;\nmain()\n{\n\twhile(cin>>M>>T>>P>>R,M)\n\t{\n\t\tteam a[55];\n\t\tfor(int i=0;i++<T;)a[i].init(i);\n\t\tfor(int i=0;i<R;i++)\n\t\t{\n\t\t\tint b,c,d,e;cin>>b>>c>>d>>e;\n\t\t\ta[c].submit(b,d,e);\n\t\t}\n\t\tsort(a+1,a+T+1);\n\t\tfor(int i=0;i++<T;)\n\t\t{\n\t\t\tif(i==1)cout<<a[i].num;\n\t\t\telse\n\t\t\t{\n\t\t\t\tcout<<(a[i-1]==a[i]?\"=\":\",\")<<a[i].num;\n\t\t\t}\n\t\t}\n\t\tcout<<endl;\n\t}\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\nusing namespace std;\n\nstruct team{\n\tint n, c, m, p;\n};\n\nbool operator<(const team team1, const team team2){\n\tbool rep;\n\tif(team1.c == team2.c){\n\t\trep = (team1.m == team2.m) ? team1.n > team2.n : team1.m < team2.m;\n\t}else{\n\t\trep = (team1.c > team2.c);\n\t}\n\treturn rep;\n}\n\nint main(){\n\tint M, T, P, R;\n\twhile( cin >> M >> T >> P >> R, M || T || P || R ){\n\t\tvector<team> teams(T);\n\t\tfor(int i = 0; i < T; i++){\n\t\t\tteams[i].n = i+1;\n\t\t\tteams[i].c = 0;\n\t\t\tteams[i].m = 0;\n\t\t\tteams[i].p = 0;\n\t\t}\n\t\tfor(int i = 0; i < R; i++){\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tif( j == 0 ){\n\t\t\t\tteams[t-1].c++;\n\t\t\t\tteams[t-1].m += (m + 20 * teams[t-1].p);\n\t\t\t\tteams[t-1].p = 0;\n\t\t\t}else{\n\t\t\t\tteams[t-1].p++;\n\t\t\t}\n\t\t}\n\t\tsort(teams.begin(), teams.end());\n\t\tcout << teams[0].n;\n\t\tfor(int i = 1; i < T; i++){\n\t\t\tif( teams[i].c == teams[i-1].c && teams[i].m == teams[i-1].m ) cout << \"=\";\n\t\t\telse cout << \",\";\n\t\t\tcout << teams[i].n;\n\t\t}\n\t\tcout << endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n#include <vector>\nusing namespace std;\nconst int MAX_T = 51;\nconst int MAX_P = 11;\ntypedef pair<int,int> PP;\ntypedef pair<PP,int> P;\n\nint main(){\n  int m,t,p,r,team[MAX_T][MAX_P],judge[MAX_T][MAX_P];\n  int mi,ti,pi,ji,accnt[MAX_T];\n\n  while(cin >> m >> t >> p >> r , m + t + p + r){\n    vector<P> v;\n    fill(team[0],team[MAX_T],0);\n    fill(judge[0],judge[MAX_T],0);\n    fill(accnt,accnt+MAX_T,0);\n\n    for(int i = 0 ; i < r ; i++){\n      cin >> mi >> ti >> pi >> ji;\n      if(ji == 0){\n\tteam[ti][pi] += mi + judge[ti][pi];\n\taccnt[ti]--;\n      }\n      else{\n\tjudge[ti][pi] += 20;\n      }\n    }\n    int tt[MAX_T] = {0};\n    for(int i = 1 ; i < MAX_T ; i++){\n      for(int j = 1 ; j < MAX_P ; j++){\n\ttt[i] += team[i][j];\n      } \n    }\n    for(int i = 1 ; i <= t ; i++){\n\tv.push_back(P(PP(accnt[i],tt[i]),-i));\n    }\n    sort(v.begin(),v.end());\n    for(int i = 1 ; i <= v.size() ; i++){\n      if(v[i-1].first.first < v[i].first.first){\n\tcout << -v[i-1].second;\n\tif(i != v.size()) cout << ',';\n      }\n      else{\n\tif(v[i-1].first.second < v[i].first.second){\n\t  cout << -v[i-1].second;\n\t  if(i != v.size()) cout << ',';\n\t}\n\telse{\n\t  cout << -v[i-1].second;\n\t  if(i != v.size()) cout << '=';\n\t}\n      }\n    }\n    cout << endl;\n  }\n\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\n#define rep(i, n) for (int i = 0; i < (int) n; i++)\n#define reps(i, n, m) for (int i = (int) n; i < (int) m; i++)\n\nint M, T, P, R;\nvector<vector<int>> v;\n\nbool init() {\n\tcin >> M >> T >> P >> R;\n\tv.clear();\n\tv.resize(T, vector<int>(P, 0));\n\treturn M != 0;\n}\n\nbool check(int a, int b, int c, int d) {\n\tint A = a * a + b * b;\n\tint B = c * c + d * d;\n\tif (A != B) return A < B;\n\treturn a < c;\n}\n\nstruct score {\n\tint x;\n\tint s;\n\tint t;\n};\n\nvoid solve() {\n\tvector<score> S(T);\n\trep(i, T) S[i].x = i+1;\n\trep(i, R) {\n\t\tint m, t, p, j;\n\t\tcin >> m >> t >> p >> j;\n\t\tif (j) {\n\t\t\tv[t-1][p-1] += 20;\n\t\t} else { // AC\n\t\t\tS[t-1].s++;\n\t\t\tS[t-1].t += m + v[t-1][p-1];\n\t\t}\n\t}\n\tsort(S.rbegin(), S.rend(), [](auto a, auto b) {\n\t\treturn a.s == b.s ? \n\t\t\t\ta.t == b.t ? a.x < b.x :\n\t\t\t\ta.t > b.t : a.s < b.s;\n\t});\n\tcout << S[0].x;\n\treps(i, 1, T) {\n\t\tif (S[i-1].s == S[i].s && S[i-1].t == S[i].t) cout << \"=\";\n\t\telse cout << \",\";\n\t\tcout << S[i].x;\n\t}\n\tcout << endl;\n}\n\nint main() {\n\twhile (init()) {\n\t\tsolve();\n\t}\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n#include <functional>\n\nusing namespace std;\n\ntypedef pair<int, int> P;\ntypedef pair<int, P> Q;\n\nint main() {\n\tint m, t, p, r;\n\n\twhile (cin >> m >> t >> p >> r) {\n\t\tif (m == 0 && t == 0 && p == 0 && r == 0) {\n\t\t\tbreak;\n\t\t}\n\n\t\tvector<Q> krank(t);\n\n\t\tfor (int i = 0; i < t; i++) {\n\t\t\tkrank[i] = Q(0, P(0, i + 1));\n\t\t}\n\n\t\tvector< vector<int> > wa(t, vector<int>(p, 0));\n\n\t\tint mm, tt, pp, jj;\n\n\t\tfor (int i = 0; i < r; i++) {\n\t\t\tcin >> mm >> tt >> pp >> jj;\n\t\t\tif (jj == 0) {\n\t\t\t\tkrank[tt - 1].first++;\n\t\t\t\t(krank[tt - 1].second).first -= mm;\n\t\t\t\t(krank[tt - 1].second).first -= 20 * wa[tt - 1][pp - 1];\n\t\t\t}\n\t\t\telse {\n\t\t\t\twa[tt - 1][pp - 1]++;\n\t\t\t}\n\t\t}\n\n\t\tsort(krank.begin(), krank.end(), greater<Q>());\n\n\t\tcout << (krank[0].second).second;\n\t\tfor (int i = 1; i < t; i++) {\n\t\t\tif (krank[i].first == krank[i - 1].first) {\n\t\t\t\tif ((krank[i].second).first == (krank[i - 1].second).first) {\n\t\t\t\t\tcout << '=' << (krank[i].second).second;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tcout << ',' << (krank[i].second).second;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcout << ',' << (krank[i].second).second;\n\t\t\t}\n\t\t}\n\t\tcout << endl;\n\n\t}\n\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define range(i,a,b) for(int i = (a); i < (b); i++)\n#define rep(i,b) for(int i = 0; i < (b); i++)\n#define all(a) (a).begin(), (a).end()\n#define debug(x) cout << \"debug \" << x << endl;\nconst int INF = 100000000;\nusing namespace std;\n\nint main(){\n    int m, t, p, r;\n    while(cin >> m >> t >> p >> r, m||t||p||r){\n        vector< pair<pair<int,int>,int> > v(51);\n        int miss_cnt[51][11] = {0};\n        rep(i,51) v[i].first.second= INF;\n        rep(i,51) v[i].second= i + 1;\n        rep(i,r){\n            int time, team, prob,jud;\n            cin >> time >> team >> prob >> jud;\n            team--; prob--;\n            if(jud == 0){\n                v[team].first.first++;\n                v[team].first.second -= time + miss_cnt[team][prob] * 20;\n            }else{\n                miss_cnt[team][prob]++;\n            }\n        }\n        sort(v.begin(), v.begin() + t, greater<pair<pair<int,int>,int>>());\n        rep(i,t){\n            if(i){\n                if(v[i - 1].first.first == v[i].first.first && v[i - 1].first.second == v[i].first.second){\n                    cout << '=';\n                }else{\n                    cout << ',';\n                }\n            }\n            cout << v[i].second;\n        }\n        cout << endl;\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstring>\nusing namespace std;\nint x[100][2], y[100][20], n, a, b, c, d, e, f, g, h, p;\nint main() {\n\twhile (true) {\n\t\tmemset(x, 0, sizeof(x));\n\t\tmemset(y, 0, sizeof(y));\n\t\tcin >> n >> a >> b >> c;\n\t\tif (n == 0) {\n\t\t\tbreak;\n\t\t}\n\t\tfor (int i = 0; i < c; i++) {\n\t\t\tcin >> d >> e >> f >> g;\n\t\t\tif (g!=0) {\n\t\t\t\ty[e][f] += 20;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tx[e][1] += d + y[e][f];\n\t\t\t\tx[e][0]++;\n\t\t\t}\n\t\t}\n\t\tp = 0;\n\t\tfor (int i = b; i >= 0; i--) {\n\t\t\tfor (int j = 0; j <= 100000; j++) {\n\t\t\t\th = 0;\n\t\t\t\tfor (int k = a; k > 0; k--) {\n\t\t\t\t\tif (x[k][0]==i && x[k][1]==j) {\n\t\t\t\t\t\tif (h >= 1) {\n\t\t\t\t\t\t\tcout << '=';\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (p >= 1) {\n\t\t\t\t\t\t\tcout << ',';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcout << k;\n\t\t\t\t\t\tp++;\n\t\t\t\t\t\th++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcout << endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\ntypedef pair<pair<int, int>, int> P;\nbool comp(P hl, P hr){\n\tif(hl.first.first != hr.first.first) return hl.first.first > hr.first.first;\n\tif(hl.first.second != hr.first.second) return hl.first.second < hr.first.second;\n\treturn hl.second > hr.second;\n}\n\nint main(){\nwhile(1){//start\n\n\t//init\n\tint pm[51];\n\tint solved[51];\n\tint wa[51][11];\n\tfor(int i = 0; i < 51; i++){\n\t\tpm[i] = 0;\n\t\tsolved[i] = 0;\n\t\tfor(int j = 0; j < 11; j++) wa[i][j] = 0;\n\t}\n\n\n\tint M, T, P, R;\n\tcin >> M >> T >> P >> R;\n\tif(M == 0 and T == 0 and P == 0 and R == 0) break;\n\n\tfor(int i = 0; i < R; i++){\n\t\tint m, t, p, j;\n\t\tcin >> m >> t >> p >> j;\n\n\t\t//ac\n\t\tif(j == 0){\n\t\t\tsolved[t]++;\n\t\t\tpm[t] += m + wa[t][p] * 20;\n\t\t}\n\t\t//wa\n\t\telse wa[t][p]++;\n\t}\n\n\tvector<pair<pair<int, int>, int> > v;\n\tfor(int i = 1; i <= T; i++){\n\t\tv.push_back(make_pair(make_pair(solved[i], pm[i]), i));\n\t}\n\n\tsort(v.begin(), v.end(), comp);\n\n\n\t//debug\n\t//for(int i = 0; i < (int)v.size(); i++) cout << v[i].first.first << \" \" << v[i].first.second << \" \" << v[i].second << endl;\n\n\tint tm = v[0].first.second;\n\tint sol = v[0].first.first;\n\tcout << v[0].second;\n\tfor(int i = 1; i < (int)v.size(); i++){\n\t\tif(sol == v[i].first.first and tm == v[i].first.second) cout << \"=\";\n\t\telse cout << \",\";\n\t\tcout << v[i].second;\n\t\tsol = v[i].first.first;\n\t\ttm = v[i].first.second;\n\t}\n\tcout << endl;\n\n}//end\n\treturn 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nstruct teaminfo {\n    int team_id;\n    int AC_num;\n    int WA_num[11];\n    int elapsed_time;\n\n    teaminfo(int id) {\n        this->team_id = id;\n        this->AC_num = 0;\n        for (int i = 0; i <= 10; i++) this->WA_num[i] = 0;\n        this->elapsed_time = 0;\n    }\n\n    bool operator< (const teaminfo& another) const {\n        if (this->AC_num == another.AC_num) {\n            if (this->elapsed_time == another.elapsed_time) {\n                return this->team_id > another.team_id;\n            }\n            return this->elapsed_time < another.elapsed_time;\n        }\n        return this->AC_num > another.AC_num;\n    }\n};\n\nint main(void) {\n\n    int M, T, P, R;\n    while (cin >> M >> T >> P >> R, M||T||P||R) {\n        vector<teaminfo> teams;\n        for (int i = 1; i <= T; i++) {\n            teams.emplace_back(i);\n        }\n        for (int i = 0; i < R; i++) {\n            int m, t, p, j; cin >> m >> t >> p >> j; t--;\n            if (j) {\n                teams[t].WA_num[p]++;\n            } else {\n                teams[t].AC_num++;\n                teams[t].elapsed_time += m + (teams[t].WA_num[p]*20);\n            }\n        }\n\n        sort(teams.begin(), teams.end());\n        cout << teams[0].team_id;\n        for (auto i = 1; i < teams.size(); i++) {\n            if (teams[i-1].AC_num == teams[i].AC_num && \\\n                teams[i-1].elapsed_time == teams[i].elapsed_time) {\n                cout << '=' << teams[i].team_id;\n            } else {\n                cout << ',' << teams[i].team_id;\n            }\n        }\n        cout << endl;\n    }\n\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <utility>\n#include <algorithm>\n#include <functional>\n\nusing namespace std;\n\nint time_memo[51][11];\nbool memo[51][11];\n\nint main(void){\n  int M, T, P, R;\n  int m, t, p, j;\n  vector<pair<int, pair<int, int> > > v;\n\n  while(cin >> M >> T >> P >> R, M || T || P || R){\n    v.clear();\n\n    for(int i=1; i<=T; i++){\n      for(int k=1; k<=P; k++){\n        time_memo[i][k] = 0;\n        memo[i][k] = false;\n      }\n    }\n\n    for(int i=0; i<R; i++){\n      cin >> m >> t >> p >> j;\n      if(j == 0){\n        time_memo[t][p] += m;\n        memo[t][p] = true;\n      } else {\n        time_memo[t][p] += 20;\n      }\n    }\n\n    for(int i=1; i<=T; i++){\n      int t = 0, c = 0;\n      for(int k=1; k<=P; k++){\n        if(memo[i][k] == true){\n          ++c;\n          t += time_memo[i][k];\n        }\n      }\n\n      v.push_back(make_pair(c, make_pair(-1 * t, i)));\n    }\n    sort(v.begin(), v.end(), greater<pair<int, pair<int, int> > >());\n    \n    cout << v[0].second.second;\n    int tbuf = v[0].second.first, mbuf = v[0].first;\n    for(int i=1; i<v.size(); i++){\n      if(tbuf == v[i].second.first && mbuf == v[i].first){\n        cout << \"=\" << v[i].second.second;\n      } else {\n        cout << \",\" << v[i].second.second;\n        tbuf = v[i].second.first; mbuf = v[i].first;\n      }\n    }\n    cout << endl;\n  }\n\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define rep(i, a, n) for(int i = a; i < n; i++)\n#define REP(i, n) rep(i, 0, n)\n#define repb(i, a, b) for(int i = a; i >= b; i--)\n#define all(a) a.begin(), a.end()\n#define int long long\n#define chmax(x, y) x = max(x, y)\n#define chmin(x, y) x = min(x, y)\nusing namespace std;\ntypedef pair<int, int> P;\nconst int mod = 1000000007;\nconst int INF = 1e12;\n\nstruct S{\n   int id, ac, time;\n   vector<int> wa;\n};\nbool cmp(S p1, S p2){\n   if(p1.ac == p2.ac){\n       if(p1.time == p2.time){\n           return p1.id > p2.id;\n       }\n       return p1.time < p2.time;\n   }\n   return p1.ac > p2.ac;\n}\n\nsigned main(){\n    ios::sync_with_stdio(false);\n    cin.tie(0);\n    int m, t, p, r;\n    while(1){\n        cin >> m >> t >> p >> r;\n        if(m + t + p + r == 0) break;\n        vector<S> d(t);\n        rep(i, 0, t){\n            d[i].id = i; d[i].ac = 0; d[i].time = 0; d[i].wa.resize(p);\n        }\n        rep(i, 0, r){\n            int mi, ti, pi, ji;\n            cin >> mi >> ti >> pi >> ji;\n            ti--; pi--;\n            if(ji == 0){\n                d[ti].ac++;\n                d[ti].time += mi + 20 * d[ti].wa[pi];\n            }else{\n                d[ti].wa[pi]++;\n            }\n        }\n        sort(all(d), cmp);\n        rep(i, 0, t){\n            cout << d[i].id + 1;\n            if(i != t - 1){\n                if(d[i].ac == d[i + 1].ac && d[i].time == d[i + 1].time) cout << \"=\";\n                else cout << \",\";\n            }\n        }\n        cout << endl;\n    }\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\nusing namespace std;\n\nstruct team{\n\tint n, c, m, p;\n};\n\nbool operator<(const team team1, const team team2){\n\tbool rep;\n\tif(team1.c == team2.c){\n\t\trep = (team1.m == team2.m) ? team1.n > team2.n : team1.m < team2.m;\n\t}else{\n\t\trep = (team1.c > team2.c);\n\t}\n\treturn rep;\n}\n\nint main(){\n\tint M, T, P, R;\n\twhile( cin >> M >> T >> P >> R, M || T || P || R ){\n\t\tvector<team> teams(T);\n\t\tfor(int i = 0; i < T; i++){\n\t\t\tteams[i].n = i+1;\n\t\t\tteams[i].c = 0;\n\t\t\tteams[i].m = 0;\n\t\t\tteams[i].p = 0;\n\t\t}\n\t\tfor(int i = 0; i < R; i++){\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tif( j == 0 ){\n\t\t\t\tteams[t-1].c++;\n\t\t\t\tteams[t-1].m = (m + 20 * teams[t-1].p);\n\t\t\t\t//teams[t-1].p = 0;\n\t\t\t}else{\n\t\t\t\tteams[t-1].p++;\n\t\t\t}\n\t\t}\n\t\tsort(teams.begin(), teams.end());\n\t\tcout << teams[0].n;\n\t\tfor(int i = 1; i < T; i++){\n\t\t\tif( teams[i].c == teams[i-1].c && teams[i].m == teams[i-1].m ) cout << \"=\";\n\t\t\telse cout << \",\";\n\t\t\tcout << teams[i].n;\n\t\t}\n\t\tcout << endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define range(i, a, b) for(int i = (a); i < (b); i++)\n#define rep(i, a) range(i, 0, a)\nusing namespace std;\n\nconst double PI  = acos(-1);\nconst double EPS = 1e-10;\ntypedef complex <double> P;\n/*\n * 実数         : p.real() or real(p)\n * 虚数         : p.imag() or imag(p)\n * 偏角         : arg(p)\n * 長さ         : abs(p)\n * ノルム       : norm(p)\n * 共役な複素数 : conj(p)\n */\n\nP turn(P p,double t){ //t度回転\n    return p * exp( P(.0, t * PI / 180.0 ) ); // ベクトルにe^θiをかけている\n}\n\nint main() {\n    int n;\n    while (cin >> n, n) {\n        vector <vector <P>> line, gen(4);\n        rep (i, n + 1) {\n            int m;\n            cin >> m;\n            vector <P> tmp;\n            int x0, y0;\n            rep (j, m) {\n                int x, y;\n                cin >> x >> y;\n                if (j == 0) {\n                    x0 = x, y0 = y;\n                    x = y = 0;\n                }\n                else {\n                    x -= x0, y -= y0;\n                }\n                if (i == 0) {\n                    gen[0].emplace_back(x * -1, y * -1);\n                    gen[1].emplace_back(x, y);\n                    swap(x, y);\n                    gen[2].emplace_back(x, y * -1);\n                    gen[3].emplace_back(x * -1, y);\n                }\n                else {\n                    tmp.emplace_back(x, y);\n                }\n            }\n            if (i == 0) {\n                int sz = gen.size();\n                rep (j, sz) {\n                    vector <P> rev = gen[j];\n                    int x0 = rev.back().real(), y0 = rev.back().imag();\n                    rep (k, gen[j].size()) {\n                        rev[k].real(rev[k].real() - x0);\n                        rev[k].imag(rev[k].imag() - y0);\n                    }\n                    reverse(rev.begin(), rev.end());\n                    gen.push_back(rev);\n                }\n            }\n\n            if (i != 0) line.push_back(tmp);\n        }\n\n        rep (i, line.size()) {\n            rep (j, gen.size()) {\n                bool flag = true;\n                rep (k, gen[j].size()) {\n                    flag &= gen[j][k] == line[i][k];\n                }\n                if (flag) {\n                    cout << i + 1 << endl;\n                    break;\n                }\n            }\n        }\n        cout << \"+++++\" << endl;\n    }\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <sstream>\n#include <string>\n#include <algorithm>\n\nusing namespace std;\n\nclass Solver {\ntypedef vector<int> V;\ntypedef vector<V> VV;\n    private:\n        string i2s(int n) {\n            stringstream ss;\n            ss << n;\n            return ss.str();\n        }\n    public:\n        int mn, tn, pn, rn;\n        int m[2000], t[2000], p[2000], j[2000];\n        string solve() {\n            string retval;\n            VV last_solved(tn, V(pn, -1));\n            VV answer(tn, V(pn, 0));\n            VV score(tn, V(3, 0));\n            for (int i = 0; i < rn; ++i) {\n                last_solved[t[i] - 1][p[i] - 1] = (j[i] == 0? m[i]: -1);\n                ++answer[t[i] - 1][p[i] - 1];\n            }\n            for (int ti = 0; ti < tn; ++ti) {\n                score[ti][2] = -ti - 1;\n                for (int pi = 0; pi < pn; ++pi) {\n                    if (last_solved[ti][pi] >= 0) {\n                        --score[ti][0];\n                        score[ti][1] += last_solved[ti][pi] + 20 * (answer[ti][pi] - 1);\n                    }\n                }\n            }\n            sort(score.begin(), score.end());\n            retval = i2s(-score[0][2]);\n            for (int i = 1; i < tn; ++i) {\n                if (score[i][0] == score[i - 1][0] && score[i][1] == score[i - 1][1]) {\n                    retval += \"=\";\n                } else {\n                    retval += \",\";\n                }\n                retval += i2s(-score[i][2]);\n            }\n            return retval;\n        }\n};\n\nint main() {\n    while (true) {\n        Solver s;\n        cin >> s.mn >> s.tn >> s.pn >> s.rn;\n        if (s.mn == 0) {\n            return 0;\n        }\n        for (int i = 0; i < s.rn; ++i) {\n            cin >> s.m[i] >> s.t[i] >> s.p[i] >> s.j[i];\n        }\n        string answer = s.solve();\n        cout << answer << endl;\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n  \nusing namespace std;\n  \n#define rep(i,n) REP(i,0,n)\n#define REP(i,s,e) for(int i=(s); i<(int)(e); i++)\n#define repr(i, n) REPR(i, n, 0)\n#define REPR(i, s, e) for(int i=(int)(s-1); i>=(int)(e); i--)\n#define pb push_back\n#define all(r) r.begin(),r.end()\n#define rall(r) r.rbegin(),r.rend()\n#define fi first\n#define se second\n  \ntypedef long long ll;\ntypedef vector<int> vi;\ntypedef vector<ll> vl;\ntypedef pair<int, int> pii;\ntypedef pair<ll, ll> pll;\n \nconst int INF = 1e9;\nconst ll MOD = 1e9 + 7;\ndouble EPS = 1e-8;\n\nstruct S\n{\n    int id;\n    int ac, time, rank;\n    int check[11], wa[11];\n    S(){\n        ac = time = rank = 0;\n        rep(i, 11) check[i] = wa[i] = 0;\n    }\n    bool operator < (const S& s) const {\n        if(ac != s.ac) return ac > s.ac;\n        if(time != s.time) return time < s.time;\n        return id > s.id;\n    }\n    bool operator > (const S& s) const{\n        return s < *this;\n    }\n    bool operator == (const S& s) const{\n        return (!(*this < s)) && (!(s < *this));\n    }\n    bool operator != (const S& s) const {\n        return !(*this == s);\n    }\n    void add(int prob, int judge, int t) {\n        if(check[prob] != 0) return;\n        if(judge == 0) {\n            ac++;\n            check[prob]=1;\n            time += t + wa[prob] * 20;\n        }\n        else {\n            wa[prob]++;\n        }\n    }\n};\n\nint main(){\n    int m, t, p, r;\n    while(cin >> m >> t >> p >> r) {\n        if(m == 0 && t == 0 && p == 0 && r == 0) break;\n        vector<S> s(t);\n        rep(i, t) s[i].id = i+1;\n        rep(i, r) {\n            int a, b, c, d;\n            cin >> a >> b >> c >> d;\n            b--;\n            s[b].add(c, d, a);\n        }\n        sort(all(s));\n        cout << s[0].id;\n        REP(i, 1, t) {\n            if(s[i].ac == s[i-1].ac && s[i].time == s[i-1].time) cout << \"=\";\n            else cout << \",\";\n            cout << s[i].id;\n        }\n        cout << endl;\n        // rep(i, t) {\n        //     cout << s[i].id << \" \" << s[i].ac << \" \" << s[i].time << endl;\n        // }\n    }\n\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <stdio.h>\n#include <iostream>\n#include <vector>\n#include <queue>\n#include <algorithm>\n#include <sstream>\n#include <set>\n#include <map>\n#include <stack>\n#include <cmath>\n#include <cstdlib>\n#include <cstring>\n#include <string>\n\nusing namespace std;\n\n#define ll long long\n#define pi pair<int,int>\n#define pll pair<ll,ll>\n#define pii pair<int,pi>\n#define X first\n#define Y second\n#define pb push_back\n#define ab(x) ((x)<0?(-(x)):(x))\n#define xx(x) ((x)*(x))\n#define mp make_pair\n#define vi vector<int>\n#define vll vector<ll>\n#define vs vector<string>\n#define vpi vector<pi>\n#define vpll vector<pll>\n#define ALL(x) (x).begin(),(x).end()\n#define Max (1<<30)\n#define LLMax (1ll<<60)\ntemplate<class T>string ToString(T t){stringstream s;s<<t;return s.str();}\ntemplate<class T>void ToOther(T&t,string a){stringstream s(a);s>>t;}\n\n\nint M,T,P,R;\nint a[105][12];\nbool ac[105][12];\nint pe[105];\n\nstruct data{\n\tint sol,pe,idx;\n\tdata(int A,int B,int C){\n\t\tsol=A;\n\t\tpe=B;\n\t\tidx=C;\n\t}\n};\nbool sf(data a,data b){\n\tif(a.sol==b.sol){\n\t\tif(a.pe==b.pe)return a.idx>b.idx;\n\t\treturn a.pe<b.pe;\n\t}return a.sol>b.sol;\n}\nvector<data> v;\n\nint main(){\n\n\twhile(cin>>M>>T>>P>>R,M){\n\t\tmemset(a,0,sizeof(a));\n\t\tmemset(ac,0,sizeof(ac));\n\t\tmemset(pe,0,sizeof(pe));\n\n\t\tfor(int i=0;i<R;i++){\n\t\t\tint m,t,p,r;\n\t\t\tscanf(\"%d%d%d%d\",&m,&t,&p,&r);\n\n\t\t\tif(ac[t][p])continue;\n\n\t\t\tif(r==0){\n\t\t\t\tac[t][p]=1;\n\t\t\t\tpe[t]+=m;\n\t\t\t\tpe[t]+= 20*a[t][p];\n\t\t\t}else a[t][p]++;\n\t\t}\n\n\t\tv.clear();\n\t\tfor(int i=1;i<=T;i++){\n\t\t\tint cnt=0;\n\t\t\tfor(int k=1;k<=P;k++)if(ac[i][k])cnt++;\n\t\t\tv.pb( data(cnt,pe[i],i) );\n\t\t}\n\t\tsort(ALL(v),sf);\n\n\t\tprintf(\"%d\",v[0].idx);\n\t\tfor(int i=1;i<v.size();i++){\n\t\t\tif(v[i-1].sol== v[i].sol && v[i-1].pe==v[i].pe)printf(\"=\");\n\t\t\telse printf(\",\");\n\t\t\tprintf(\"%d\",v[i].idx);\n\t\t}\n\t\tputs(\"\");\n\t}\n\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n#include <cstdio>\n\n#define REP(i,n) for( int i = 0; i < n; i++ )\n\n\nusing namespace std;\n\n/*\n より多くの問題に正解したチームを上位とする．\n 正解した問題数が同じ場合は，所要時間合計の少ないチームを上位とする．\n 複数のチームが同数の問題に正解し，所要時間合計も同じなら，それらのチームを同順位とする．\n */\n\nstruct team{\n\tint ans,time,name;\n    int q[50]={0};\n    \n\tteam() : ans(0), time(0), name(0) {}\n    \n    bool operator <( const team& Right )const {\n        return  ans != Right.ans ? ans < Right.ans :\n        time != Right.time ? time > Right.time :\n        name <  Right.name;\n    }\n};\n\n\nint main()\n{\n\tint M,T,P,R;\n\t// Mは，コンテストの始まりから終わりまでの時間である． Tは，チーム数である． Pは，問題数である． Rは，提出記録の数である\n\twhile( cin >> M >> T >> P >> R )\n\t{\n\t\tint m,t,p,k;\n\t\tvector<team> team_array(T+1);\n\t\tif( T == 0 ) return 0;\n\t\tfor( int i = 1; i <= T; i++)\n\t\t\tteam_array[i].name = i;\n\t\t// mkは，経過時間である． tkは，チーム番号である． pkは，問題番号である． jkは，判定結果を表す（0なら正解，0以外なら不正解）\n\t\tREP(i,R)\n\t\t{\n\t\t\tcin >> m >> t >> p >> k;\n\t\t\tteam &tm = team_array[t];\n\t\t\tif( !k ){\n\t\t\t\ttm.ans++;\n\t\t\t\ttm.time += m;\n                if( tm.q[p] )\n                    tm.time += 20 * tm.q[p];\n\t\t\t}\n            else{\n                tm.q[p]++;\n            }\n            \n\t\t}\n\t\t\n        sort( team_array.begin() + 1 , team_array.end() );\n\t\t\n        for( int i = T; i > 0; i-- )\n        {\n            char c;\n            if( i == 1 ){\n                cout << team_array[i].name << endl;\n                continue;\n            }\n            else if ( team_array[i].ans == team_array[i-1].ans &&\n                team_array[i].time == team_array[i-1].time) {\n                c = '=';\n            }\n            else{\n                c = ',';\n            }\n\t\t\tcout << team_array[i].name << c;\n        }\n        \n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\nusing namespace std;\nint main() {\n\tint m, t, p, r;\n\twhile (cin >> m >> t >> p >> r, m) {\n\t\tpair<pair<int, int>, pair<int, int>>log[2014];\n\t\t//time team problem result\n\t\tfor (int i = 0; i < r; i++) \n\t\t\tcin >> log[i].first.first >> log[i].first.second >> log[i].second.first >> log[i].second.second;\n\t\tsort(log, log + r);\n\t\tpair<pair<int, int>, int>point[60];\n\t\t//problems penalty teamnum\n\t\tint penalty[60][15] = {};\n\t\tfor (int i = 1; i <= t; i++) {\n\t\t\tpoint[i].first.first = 15;\n\t\t\tpoint[i].first.second = 0;\n\t\t\tpoint[i].second = i;\n\t\t}\n\t\tfor (int i = 0; i < r; i++) {\n\t\t\tif (log[i].second.second) {\n\t\t\t\t//WRONG ANSWER\n\t\t\t\tpenalty[log[i].first.second][log[i].second.first]++;\n\t\t\t}\n\t\t\telse{\n\t\t\t\t//ACCEPTED\n\t\t\t\tpoint[log[i].first.second].first.first--;\n\t\t\t\tpoint[log[i].first.second].first.second += penalty[log[i].first.second][log[i].second.first] * 20 + log[i].first.first;\n\t\t\t}\n\t\t}\n\t\tfor (int i = 1; i < t; i++) {\n\t\t\tfor (int j = i + 1; j <= t; j++) {\n\t\t\t\tif (point[i].first > point[j].first)swap(point[i], point[j]);\n\t\t\t\telse if (point[i].first == point[j].first)if (point[i].second < point[j].second)swap(point[i], point[j]);\n\t\t\t}\n\t\t}\n\t\tcout << point[1].second;\n\t\tfor (int i = 2; i <= t; i++) {\n\t\t\tif (point[i].first == point[i - 1].first)cout << '=';\n\t\t\telse cout << ',';\n\t\t\tcout << point[i].second;\n\t\t}\n\t\tcout << endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<vector>\n#include<algorithm>\nusing namespace std;\nstruct team{\n  int id,score,time,wrong[11];\n  bool operator<(const team& a) const{\n    return score == a.score ? (time == a.time ? id > a.id : time < a.time ) : score > a.score;\n  }\n};\nint main(){\n  int m,t,p,r,i,j,k;\n  cin >> m >> t >> p >> r;\n  while(m!=0){\n    vector <team> teams;\n    team te;\n    for(j=0;j<11;j++) te.wrong[j]=0;\n    te.score=0;\n    te.time=0;\n    for(i=1;i<=t;i++){\n      te.id=i;\n      teams.push_back(te);\n    }\n    int a,b,c,d;\n    for(i=0;i<r;i++){\n      cin >> a >> b >> c >> d;\n      if(d==0){\n\tteams[b-1].score++;\n\tteams[b-1].time+=a+20*teams[b-1].wrong[c];\n      }else{\n\tteams[b-1].wrong[c]++;\n      }\n    }\n    sort(teams.begin(),teams.end());\n    for(i=0;i<t;i++){\n      if(i>0){\n\tif(teams[i-1].score==teams[i].score&&teams[i-1].time==teams[i].time) cout << \"=\";\n\telse cout << \",\";\n      }\n      cout << teams[i].id;\n    }\n    cout << endl;\n    cin >> m >> t >> p >> r;\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n#include <cstring>\n\nusing namespace std;\n\nstruct Result {\n  int time, prob, No;\n  Result () {\n    time = prob = No = 0;\n  }\n  Result (int time, int prob, int No) : time(time), prob(prob), No(No) {}\n};\n\nbool comp(const Result &r1, const Result &r2) {\n  \n  if (r1.prob > r2.prob) {\n    return true;\n  } else if (r1.prob == r2.prob) {\n    if (r1.time < r2.time) {\n      return true;\n    } else if (r1.time < r2.time) {\n      return true;\n    } else {\n      return r1.No > r2.No;\n    }\n  } else {\n    return false;\n  }\n  /*\n  if (r1.prob == r2.prob) return r1.time < r2.time; \n  return r1.prob > r2.prob;\n  */\n}\n\nint M, T, P, R, m, t, p, j, penalty[51][11];\nResult r[51];\n\nint main(void) {\n  cin.tie(0);\n  ios::sync_with_stdio(false);\n\n  while (cin >> M >> T >> P >> R, M | T | P | R) {\n    memset(penalty, 0, sizeof(penalty));\n    for (int i = 0; i < T; ++i) r[i] = Result(0, 0, i);\n    for (int i = 0; i < R; ++i) {\n      cin >> m >> t >> p >> j;\n\n      if (j == 0) {\n        r[t-1].prob++;\n        r[t-1].time += m + penalty[t-1][p-1];\n      }\n      else {\n        penalty[t-1][p-1] += 20;\n      }\n    }\n    /*cerr << \"==========\" << endl;\n    for (int i = 0; i < T; ++i) cout << r[i].No + 1<< \" \" << r[i].time << \" \" << r[i].prob << endl;\n    */\n    \n    sort(r, r + T, comp);\n\n    /*cerr << \"==========\" << endl;\n      for (int i = 0; i < T; ++i) cout << r[i].No << \" \" << r[i].time << \" \" << r[i].prob << endl;*/\n    /* */\n    for (int i = 0; i < T; ++i) {\n      if (i == 0) {\n        cout << r[i].No+1;\n      }\n      else {\n        if (r[i-1].time == r[i].time && r[i-1].prob == r[i].prob) {\n          cout << \"=\";\n        }\n        else {\n          cout << \",\";\n        }\n        cout << r[i].No+1;\n      }\n    }\n    cout << endl;\n    /* */\n  }\n\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\n\npair<int,int> bd[50][10]; // (間違い数, 経過時間)\n\nvoid clear() {\n    for (int i=0; i<50; ++i) {\n        for (int j=0; j<10; ++j) {\n            bd[i][j] = make_pair(0, -1);\n        }\n    }\n}\n\nint main() {\n    int M, T, P, R;\n    while (cin >> M >> T >> P >> R, M) {\n        clear();\n        for (int i=0; i<R; ++i) {\n            int m, t, p, j;\n            cin >> m >> t >> p >> j;\n            if (j) bd[t-1][p-1].first ++;\n            else bd[t-1][p-1].second = m;\n        }\n        vector<tuple<int,int,int>> scores(T); // (正解数, -所要時間, チーム番号)\n        for (int i=0; i<T; ++i) {\n            scores[i] = make_tuple(0, 0, i+1);\n            for (int j=0; j<P; ++j) {\n                if (bd[i][j].second < 0) continue;\n                get<1>(scores[i]) -= bd[i][j].second + bd[i][j].first * 20;;\n                get<0>(scores[i]) ++;\n            }\n        }\n        sort(scores.rbegin(), scores.rend());\n\n        for (int i=0; i<T; ++i) {\n            if (i == 0) {\n                cout << get<2>(scores[i]);\n            } else {\n                bool tie = get<0>(scores[i-1]) == get<0>(scores[i]) && get<1>(scores[i-1]) == get<1>(scores[i]);\n                cout << (tie ? \"=\" : \",\") << get<2>(scores[i]);\n            }\n        }\n        cout << endl;\n    }\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n\nusing namespace std;\n\nstruct Team {\n\tint tid, ac, penalty;\n\tTeam() { tid = -1, ac = 0, penalty = 0; }\n};\nbool operator >(const Team& t1, const Team& t2) {\n\tif (t1.ac == t2.ac) {\n\t\tif (t1.penalty == t2.penalty) return t1.tid > t2.tid;\n\t\telse return t1.penalty < t2.penalty;\n\t}\n\telse return t1.ac > t2.ac;\n}\nbool operator ==(const Team& t1, const Team& t2) {\n\treturn t1.ac == t2.ac && t1.penalty == t2.penalty;\n}\n\nint main() {\n\tint M, T, P, R;\n\twhile ( cin >> M >> T >> P >> R, M || T || P || R ) {\n\t\tint wa[50][10] = {0};\n\t\tint ac[50][10] = {0};\n\t\tvector<Team> tdt(T);\n\t\tfor (int i = 0; i < T; ++i) {\n\t\t\ttdt[i].tid = i+1;\n\t\t\ttdt[i].ac = 0;\n\t\t\ttdt[i].penalty = 0;\n\t\t}\n\t\tfor (int i = 0; i < R; ++i) {\n\t\t\tint m, t, p, j; cin >> m >> t >> p >> j;\n\t\t\t--t, --p;\n\t\t\tif (j == 0) {\n\t\t\t\tif (ac[p][t] == 0) {\n\t\t\t\t\t++ac[p][t];\n\t\t\t\t\t++tdt[t].ac;\n\t\t\t\t\ttdt[t].penalty += m + 20 * wa[p][t];\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\t++wa[p][t];\n\t\t\t}\n\t\t}\n\t\tsort( tdt.begin(), tdt.end(), greater<Team>() );\n\t\tfor (int i = 0; i < tdt.size(); ++i) {\n\t\t\tif (i) {\n\t\t\t\tif (tdt[i] == tdt[i-1]) cout << \"=\";\n\t\t\t\telse cout << \",\";\n\t\t\t}\n\t\t\tcout << tdt[i].tid;\n\t\t}\n\t\tcout << endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\ntypedef pair<int, int> Data;\ntypedef pair<Data, Data> Pair;\n\nint M;\nint T;\nint P;\nint R;\nint teams[114514];\nint penalty[114514];\nint correct[114514];\nint wrong[1145][1419];\nPair ps[114514];\n\nbool CompareScore(int a, int b) {\n  if (correct[a] != correct[b]) return correct[a] > correct[b];\n  if (penalty[a] != penalty[b]) return penalty[a] < penalty[b];\n  return false;\n}\n\nbool Compare(int a, int b) {\n  if (correct[a] != correct[b]) return correct[a] > correct[b];\n  if (penalty[a] != penalty[b]) return penalty[a] < penalty[b];\n  return a > b;\n}\n\nint main() {\n  while (1) {\n    scanf(\"%d%d%d%d\", &M, &T, &P, &R);\n    if ((M|T|P|R) == 0) return 0;\n\n    for (int i=0; i<T; i++) teams[i] = i+1;\n    fill(wrong[0], wrong[114], 0);\n    fill(penalty, penalty+114, 0);\n    fill(correct, correct+114, 0);\n\n    for (int i=0; i<R; i++) {\n      int m, t, p, ji;\n      scanf(\"%d%d%d%d\", &m, &t, &p, &ji);\n      ps[i] = Pair(Data(m, -ji), Data(t, p));\n    }\n    sort(ps, ps+R);\n  \n    for (int i=0; i<R; i++) {\n      Pair pa = ps[i];\n      Data d1 = pa.first;\n      Data d2 = pa.second;\n      int m = d1.first;\n      int ji = -d1.second;\n      int t = d2.first;\n      int p = d2.second;\n  \n      if (ji != 0) {\n        wrong[t][p]++;\n      } else {\n        correct[t]++;\n        penalty[t] += m + 20*wrong[t][p];\n      }\n    }\n  \n    sort(teams, teams+T, Compare);\n    printf(\"%d\", teams[0]);\n    for (int i=1; i<T; i++) {\n      if (!CompareScore(teams[i-1], teams[i])) printf(\"=\");\n      else printf(\",\");\n      printf(\"%d\", teams[i]);\n    }\n    puts(\"\");\n  }\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <iomanip>\n#include <algorithm>\n#include <string>\n#include <cstdio>\n#include <cmath>\n#include <cstdlib>\n#include <cstring>\n#include <vector>\n#include <list>\n#include <map>\n#include <set>\n#include <queue>\n#include <stack>\n\nusing std::cin;\nusing std::cout;\nusing std::endl;\nusing std::setprecision;\nusing std::fixed;\nusing std::pair;\nusing std::make_pair;\nusing std::string;\nusing std::vector;\nusing std::list;\nusing std::map;\nusing std::set;\nusing std::queue;\nusing std::priority_queue;\nusing std::stack;\n\ntypedef vector<int> VI;\ntypedef vector<vector<int> > VII;\ntypedef vector<string> VS;\ntypedef pair<int, int> PII;\ntypedef pair<int, bool> PIB;\n\nstruct SCORE {\n    vector<PIB> time;\n    int total_time;\n    int solve;\n    SCORE() {\n        total_time = 0; \n        solve = 0; \n    }\n};\n\nint main(void) {\n    int m; // time\n    int t; // number of team\n    int p; // number of problems\n    int r; // number of post records\n    while (1) {\n        cin >> m >> t >> p >> r;\n        if (m == 0 && t == 0 && p == 0 && r == 0) {\n            break; \n        }\n        vector<SCORE> rec(t);\n\n        // constructor????????????????????????????????????????????????\n        vector<PIB> temp(p, make_pair(0, false));\n        for (int i = 0; i < t; i++) {\n            rec[i].time = temp;\n        }\n\n        for (int loop = 0; loop < r; loop++) {\n            int m2;\n            int t2;\n            int p;\n            int j;\n            cin >> m2 >> t2 >> p >> j;\n            t2--;\n            p--;\n            if (j == 0) {\n                rec[t2].solve++; \n                rec[t2].time[p].first += m2;\n                rec[t2].time[p].second = true;\n                rec[t2].total_time += rec[t2].time[p].first;\n            } else {\n                rec[t2].time[p].second += 20;\n            }\n        }\n        priority_queue<pair<int, pair<int, int> > > pq;\n        for (int i = 0; i < t; i++) {\n           pq.push(make_pair(rec[i].solve, make_pair(m * rec[i].solve - rec[i].total_time, i + 1))); \n        }\n\n        /*\n        priority_queue<pair<int, pair<int, int> > > pq2 = pq;\n        while (!pq2.empty()) {\n            cout << pq2.top().first << \" \" << pq2.top().second.first << \" \" << pq2.top().second.second << endl;\n            pq2.pop();\n        }\n        */\n        int first = pq.top().first;\n        int second = pq.top().second.first;\n        cout << pq.top().second.second;\n        pq.pop();\n        for (int i = 1; i < t; i++) {\n            if (first == pq.top().first && second == pq.top().second.first) {\n                cout << \"=\" << pq.top().second.second;\n            } else {\n                first = pq.top().first;\n                second = pq.top().second.first;\n                cout << \",\" << pq.top().second.second;\n            }\n            pq.pop();\n        }\n        cout << endl;\n    }\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstdio>\n#include <iomanip>\n#include <vector>\n#include <map>\n#include <set>\n#include <queue>\n#include <bitset>\n#include <stack>\n#include <utility>\n#include <numeric>\n#include <algorithm>\n#include <functional>\n#include <cctype>\n#include <complex>\n#include <string>\n#include <sstream>\n#include <fstream>\n#include <cassert>\nusing namespace std;\n\n//common\ntypedef long long i64,ll;\n\n#define BR \"\\n\"\n#define ALL(c) (c).begin(),(c).end()\n#define REP(i,n) for(int i=0;i<(int)(n);++i)\n#define FOR(i,l,r) for(int i=(l);i<(int)(r);++i)\n#define EACH(it,o) for(auto it = (o).begin(); it != (o).end(); ++it)\n#define IN(l,v,r) ((l)<=(v) && (v)<(r))\n\n//debug\n#ifdef NDEBUG\n#define DUMP(x)\n#define DUMPLN(x)\n#define DEBUG(x)\n#define DEBUGLN(x)\n#define LINE()\n#define LINELN()\n#define CHECK(exp,act)\n#define STOP(e)\n#else\n#define DUMP(x)  cerr << #x << \" = \" << (x)\n#define DUMPLN(x)  DUMP(x) <<endl\n#define DEBUG(x) DUMP(x) << LINE() << \" \" << __FILE__\n#define DEBUGLN(x) DEBUG(x)<<endl\n#define LINE()    cerr<< \" (L\" << __LINE__ << \")\"\n#define LINELN()    LINE()<<endl\n#define CHECK(exp,act)  if(exp!=act){DUMPLN(exp);DEBUGLN(act);}\n#define STOP(e)  CHECK(e,true);if(!(e)) exit(1);\n#endif\n\ntemplate<class T> inline string toString(const vector<T>& x) {\n\tstringstream ss;\n\tREP(i,x.size()){\n\t\tif(i!=0)ss<<\" \";\n\t\tss<< x[i];\n\t}\n\treturn ss.str();\n}\n\ntemplate<class T> inline string toString(const vector<vector<T> >& map) {\n\tstringstream ss;\n\tREP(i,map.size()){\n\t\tif(i!=0)ss<<BR;\n\t\tss<< toString(map[i]);\n\t}\n\treturn ss.str();\n}\ntemplate<class K,class V>  string toString(map<K,V>& x) {\n\tstring res;stringstream ss;\n\tfor(auto& p:x)ss<< p.first<<\":\" << p.second<<\" \";\n\treturn ss.str();\n}\n\nstring BITtoString(int bit){\n    stringstream ss;\n    while(bit!=0){ss<<(bit%2);bit/=2;}\n    string res=ss.str();reverse(ALL(res));\n    return res;\n}\n\ntemplate<typename T,typename V> inline T pmod(T v,V MOD){\n\treturn (v%MOD+MOD)%MOD;\n}\n\n\nint M,T,P,R;\nclass Team{\npublic:\n\tint id;int sc;\n\tvector<int> wts;\n\tint time;\n\tTeam(int id,int sc,int time):id(id),sc(sc),time(time){\n\t\twts=vector<int>(P);\n\t}\n\n\tbool operator < (const Team& r) const{\n\t\tif(sc!=r.sc)return sc<r.sc;\n\t\telse if(time!=r.time)return time>r.time;\n\t\treturn id<r.id;\n\t}\n\n\tbool operator > (const Team& r) const{\n\t\tif(sc!=r.sc)return sc>r.sc;\n\t\telse if(time!=r.time)return time<r.time;\n\t\treturn id>r.id;\n\t}\n};\n\nclass Main{\npublic:\n\t\n\tvector<int> ms,ts,ps,js;\n\n\tbool input(){\n\t\tcin >> M >> T >> P >> R;if(M==0)return false;\n\n\t\tms=vector<int>(R);ts=vector<int>(R);\n\t\tps=vector<int>(R);js=vector<int>(R);\n\n\t\tREP(i,R){\n\t\t\tcin >> ms[i] >> ts[i] >> ps[i] >> js[i];ts[i]--;\n\t\t}\n\t\treturn true;\n\t}\n\n\tvoid run(){\n\n\t\twhile(input()){\n\t\t\tvector<Team> teams;  \n\t\t\tREP(i,T)teams.push_back(Team(i,0,0));\n\t\t\t\n\t\t\tREP(i,R){\n\t\t\t\tif(js[i]==0){\n\t\t\t\t\tTeam& t=teams[ts[i]];\n\t\t\t\t\tt.sc++;\n\t\t\t\t\tt.time+=ms[i];\n\t\t\t\t\tt.time+=t.wts[ps[i]];\n\t\t\t\t}else{\n\t\t\t\t\tTeam& t=teams[ts[i]];\n\t\t\t\t\tt.wts[ps[i]]+=20;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//REP(i,T)teams[i].time/=60;\n\n\t\t\tsort(ALL(teams),greater<Team>());\n\t\t\tint psc=-1,ptime=-1;\n\t\t\tstringstream res;\n\t\t\tREP(i,T){\n\t\t\t\tif(i!=0){\n\t\t\t\t\tif(teams[i].sc==psc && teams[i].time==ptime){\n\t\t\t\t\t\tres<<\"=\";\n\t\t\t\t\t}else{\n\t\t\t\t\t\tres<<\",\";\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tres<<teams[i].id+1;\n\t\t\t\tpsc=teams[i].sc;\n\t\t\t\tptime=teams[i].time;\n\t\t\t}\n\t\t\tcout << res.str()<<endl;\n\t\t}\n\t\t\n\t}\n};\n\n int main(){\n\t//ios::sync_with_stdio(false);\n \tMain().run();\n \treturn 0;\n }"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <utility>\n#include <algorithm>\n#include <tuple>\nusing namespace std;\n\nint main()\n{\n\tint M, T, P, R, m, t, p, j;\n\twhile (cin >> M >> T >> P >> R, M || T || P || R) {\n\t\tvector< vector< pair<int, int> > > data(T + 1, vector< pair<int, int> >(P, pair<int, int>(0,0)));\n\t\tvector< tuple<int, int, int> > score(T + 1);\n\t\tfor (int i = 0; i < R; i++) {\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tif (j == 0) {\n\t\t\t\tdata[t][p].first = m + data[t][p].second * 20;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdata[t][p].second++;\n\t\t\t}\n\t\t}\n\t\tfor (int i = 1; i <= T; i++) {\n\t\t\tint sco = 0,pena = 0;\n\t\t\tfor (int j = 0; j < P; j++) {\n\t\t\t\tif (data[i][j].first) {\n\t\t\t\t\tsco--;\n\t\t\t\t\tpena += data[i][j].first;\n\t\t\t\t}\n\t\t\t}\n\t\t\tscore[i] = tuple<int, int, int>(sco,pena,-i);\n\t\t}\n\t\tsort(score.begin()+ 1, score.end());\n\t\ttuple<int, int, int> temp = score[1];\n\t\tcout << -get<2>(score[1]);\n\t\tfor (int i = 2; i <= T; i++) {\n\t\t\tif (get<0>(temp) == get<0>(score[i]) && get<1>(temp) == get<1>(score[i])) {\n\t\t\t\tcout << \"=\";\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcout << \",\";\n\t\t\t}\n\t\t\tcout << -get<2>(score[i]);\n\t\t\ttemp = score[i];\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "\n\tint M, T, P, R;\n\tcin >> M >> T >> P >> R;\n\n\tvector<Team> teams(T, Team(P));\n\n\tfor (int i = 0; i < T; ++i) {\n\t\tteams[i].num = i + 1;\n\t}\n\n\tfor (int i = 0; i < R; ++i) {\n\t\tint m, t, p, j;\n\t\tcin >> m >> t >> p >> j;\n\n\t\t// judge is incorrect.\n\t\tif (j != 0) {\n\t\t\tteams[t - 1].incorrects[p - 1]++;\n\t\t\tcontinue;\n\t\t}\n\n\t\t// judge is correct.\n\t\tteams[t - 1].corrects[p - 1] = 1;\n\n\t\tint time = m + teams[t - 1].incorrects[p - 1] * 20;\n\t\tteams[t - 1].time = time;\n\t}\n\n\tsort(teams.begin(), teams.end());\n\n\tint time = 0;\n\tfor (int i = 0; i < teams.size(); ++i) {\n\t\tauto&& t = teams[i];\n\t\t\n\t\tint c = count(t.corrects.begin(), t.corrects.end(), 1);\n\t\t\n\n\t\tif (i == teams.size() - 1) {\n\t\t\tcout << t.num << endl;\n\t\t\tbreak;\n\t\t}\n\n\t\tauto&& nt = teams[i + 1];\n\n\t\tint nc = count(nt.corrects.begin(), nt.corrects.end(), 1);\n\n\t\tif (c == nc && nt.time == t.time) {\n\t\t\tcout << t.num << '=';\n\t\t}\n\t\telse {\n\t\t\tcout << t.num << ',';\n\t\t}\n\t}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <queue>\n#include <utility>\n#include <algorithm>\n\n// 必要な情報\n// AC済みかどうか\n// ペナルティは何分か\nusing namespace std;\n\nusing pr = pair<long, int>; // first: pts, second: team number;\n\nint penalty[50][10]; // [team][problem number]\n// long time[50][10]; // [team][consumed time]\npr pts[50];\npriority_queue<int> list;\nint m, t, p, r;\n\nint printout(int n, long pre) {\n\tif (n < t && pre == pts[n].first) {\n\t\tlist.push(pts[n].second);\n\t\treturn printout(n+1, pre);\n\t} else {\n\t\tint size = list.size();\n\t\tif (size == 0) return 1;\n\t\twhile (true) {\n\t\t\tcout << list.top();\n\t\t\tlist.pop();\n\t\t\tif (list.empty()) break;\n\t\t\tcout << \"=\";\n\t\t}\n\t\treturn size;\n\t}\n\n\tcout << \"ERR\" << endl;\n\treturn 0;\n}\n\nint main() {\n\twhile (true) {\n\t\tcin >> m >> t >> p >> r;\n\t\tif (m == 0 && t == 0 && p == 0 && r == 0) break;\n\n\t\tfor (int i = 0; i < t; ++i) {\n\t\t\tpts[i].second = i+1;\n\t\t\tpts[i].first = 0;\n\t\t\tfor (int j = 0; j < p; ++j)\n\t\t\t\tpenalty[i][j] = 0;\n\t\t}\n\t\tfor (int i = 0; i < r; ++i) {\n\t\t\tint a, b, c, d;\n\t\t\tcin >> a >> b >> c >> d;\n\t\t\tif (d == 0) {\n\t\t\t\tpts[b-1].first += -10000 + a + penalty[b-1][c-1];\n\t\t\t} else {\n\t\t\t\tpenalty[b-1][c-1] += 20;\n\t\t\t}\n\t\t}\n\n\t\tsort(pts, pts + t);\n\t\tint i = 0;\n\t\twhile (true) {\n\t\t\ti += printout(i, pts[i].first);\n\t\t\tif (i >= t)\n\t\t\t\tbreak;\n\t\t\tcout << \",\";\n\t\t}\n\t\tcout << endl;\n\t}\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <string>\n#include <vector>\n#include <cmath>\n#include <algorithm>\n#include <cstdlib>\n#include <ctime>\n#include <cstdio>\n#include <functional>\n#include <set>\n#include <sstream>\n#include <map>\n#include <queue>\n \nusing namespace std;\n\nclass team{\npublic:\n\tint ac,pe,num;\n\tvector<int> wa;\n\tteam(int n){\n\t\tac=0;pe=0;\n\t\twa=vector<int>(n);\n\t}\n\n\tbool operator<(const team& t) const{\n\t\treturn ac<t.ac || ac==t.ac && pe>t.pe || ac==t.ac && pe==t.pe && num<t.num;\n\t}\n\tbool operator==(const team& t) const{\n\t\treturn ac==t.ac && pe==t.pe;\n\t}\n\n};\n\nint main()\n{\n\n\tint M,T,P,R;\n\twhile(cin>>M>>T>>P>>R,M){\n\t\tvector<team> vt(T,team(P));\n\t\tfor(int i=0;i<T;i++) vt[i].num=i+1;\n\t\tfor(int i=0;i<R;i++){\n\t\t\tint m,t,p,j;\n\t\t\tcin>>m>>t>>p>>j;\n\n\t\t\tif(j){\n\t\t\t\tvt[t-1].wa[p-1]++;\n\t\t\t}else{\n\t\t\t\tvt[t-1].ac++;\n\t\t\t\t//vt[t-1].last=m;\n\t\t\t\tvt[t-1].pe+=m+vt[t-1].wa[p-1]*20;\n\t\t\t}\n\t\t}\n\t\tsort(vt.begin(),vt.end());\n\t\treverse(vt.begin(),vt.end());\n\n\n\t\tfor(int i=0;i<vt.size()-1;i++){\n\t\t\tcout<<vt[i].num;\n\t\t\tif(vt[i]==vt[i+1]) cout<<\"=\";\n\t\t\telse cout<<\",\";\n\t\t}\n\t\tcout<<vt.back().num<<endl;\n\t}\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<vector>\n#include<algorithm>\nusing namespace std;\nint m,t,p,r;\nstruct team{\nint id;\nint ac;\nint time[100];\nbool ok[200];\n};\n\nint or(team a,team b){//aのほうが強ければ1,bなら0,同じなら2\n\nif(a.ac>b.ac)return 1;\nelse if(a.ac<b.ac)return 0;\nint at=0,bt=0;\nfor(int i=0;i<=p;i++){\nif(a.ok[i]==true)at+=a.time[i];\nif(b.ok[i]==true)bt+=b.time[i];\n}\nif(at<bt)return 1;\nelse if(at>bt)return 0;\nelse return 2;\n}\nint main(){\n\n\twhile(true){\n\tcin>>m>>t>>p>>r;\n\tif(m+t+p+r==0)break;\n\tvector<team>ta(0);\n\tta.resize(200);\n\n\tfor(int i=0;i<=t;i++)for(int j=0;j<200;j++)ta[i].time[j]=0,ta[i].ok[j]=0;\n\tfor(int i=0;i<=t;i++)ta[i].id=i,ta[i].ac=0;\n\tfor(int i=0;i<r;i++){\n\tint a,b,c,d;\n\tcin>>a>>b>>c>>d;//a:経過時間:bチーム番号c:問題番号j:0奈良正解それ以外不正解\n\tif(d==0){\n\tta[b].time[c]+=a;\n\tta[b].ac++;\n\tta[b].ok[c]=true;\n\t}\n\telse {\n\tta[b].time[c]+=20;\n\t}\n\t}\n\tta.erase(ta.begin());\n\tfor(int i=0;i<t;i++){\n\tfor(int j=0;j<t;j++){\n\tif(or(ta[i],ta[j])==1)swap(ta[i],ta[j]);\n\tif(or(ta[i],ta[j])==2&&ta[i].id>ta[j].id)swap(ta[i],ta[j]);\n\t}\n\t}\n\tfor(int i=0;i<t-1;i++){\n\tif(or(ta[i],ta[i+1])!=2)cout<<ta[i].id<<\",\";\n\telse cout<<ta[i].id<<\"=\";\n\t}\n\tcout<<ta[t-1].id<<endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<iomanip>\n#include<cstdlib>\n#include<stdio.h>\n#include<time.h>\n#include<math.h>\n#include<algorithm>\n#include<string>\n#include<vector>\n#include<list>\n#include<queue>\n#include<stack>\n#include<deque>\n#include<set>\n#include<map>\n#define REP(i, N) for(ll i = 0; i < N; ++i)\n#define FOR(i, a, b) for(ll i = a; i < b; ++i)\n#define ALL(a) (a).begin(),(a).end()\n#define pb push_back\n#define INF 1000000000\n#define MOD 1000000007\nusing namespace std;\ntypedef long long ll;\ntypedef pair<ll, ll> P;\nint dx[4] = {1, 0, -1, 0};\nint dy[4] = {0, 1, 0, -1};\nint qx[8] = {1, 1, 0, -1, -1, -1, 0, 1};\nint qy[8] = {0, 1, 1, 1, 0, -1, -1, -1};\n\nint main(void) {\n\twhile(true) {\n\t\tll M, T, P, R;\n\t\tcin>>M>>T>>P>>R;\n\t\tif(M == 0 && T == 0 && P == 0 && R == 0) break;\n\t\tvector<vector<ll> > wa(T, vector<ll>(P, 0));\n\t\tvector<vector<ll> > tm(T, vector<ll>(P, -1));\n\t\tREP(i, R) {\n\t\t\tll m, t, p, j;\n\t\t\tcin>>m>>t>>p>>j;\n\t\t\t--t;\n\t\t\t--p;\n\t\t\tif(j == 0) {\n\t\t\t\ttm[t][p] = m;\n\t\t\t} else {\n\t\t\t\t++wa[t][p];\n\t\t\t}\n\t\t}\n\t\tvector<pair<pair<ll, ll>, ll> > ans(T, pair<pair<ll, ll>, ll>(pair<ll, ll>(0, 0), 0));\n\t\tREP(i, T) {\n\t\t\tans[i].second = i + 1;\n\t\t}\n\t\tREP(i, T) {\n\t\t\tREP(j, P) {\n\t\t\t\tif(tm[i][j] != -1) {\n\t\t\t\t\t++ans[i].first.first;\n\t\t\t\t\tans[i].first.second -= tm[i][j];\n\t\t\t\t\tans[i].first.second -= wa[i][j] * 20;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tsort(ALL(ans), greater<pair<pair<ll, ll>, ll> >());\n\t\tREP(i, T) {\n\t\t\tcout<<ans[i].second;\n\t\t\tif(i + 1 < T && ans[i].first == ans[i + 1].first) {\n\t\t\t\tcout<<'=';\n\t\t\t} else if(i + 1 < T) {\n\t\t\t\tcout<<',';\n\t\t\t}\n\t\t}\n\t\tcout<<endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\nusing namespace std;\n\nint main(){\n  while(1){\n    int M,T,P,R;\n    cin>>M>>T>>P>>R;\n    if(M==0 && T==0 && P==0 && R==0)\n      break;\n\n    int cp[50],tt[50],pt[50][10];\n    for(int i=0; i<T; i++){\n      cp[i] = tt[i] = 0;\n      for(int j=0; j<P; j++){\n        pt[i][j] =0;\n      }\n    }\n    for(int i=0; i<R; i++){\n      int m,t,p,j;\n      cin>>m>>t>>p>>j;\n      if(j==0){\n        cp[t-1]++;\n        tt[t-1] += (m+pt[t-1][p-1]);\n      }\n      else{\n        pt[t-1][p-1] += 20;\n      }\n    }\n\n    int tnow, tpre = 01;\n    bool flg[50];\n    for(int i=0; i<T; i++)\n      flg[i] = false;\n\n    for(int i=0; i<T; i++){\n      tnow =-1;\n      for(int j=0; j<T; j++){\n        if(flg[j])\n          continue;\n\n        if(tnow==-1){\n          tnow = j;\n        }\n        else{\n          if(cp[j]>cp[tnow] || (cp[j]==cp[tnow] &&tt[j]<=tt[tnow])){\n            tnow = j;\n          }\n        }\n      }\n\n      if(tpre!=-1){\n        if(cp[tnow]==cp[tpre] && tt[tnow]==tt[tpre])\n          cout<<'=';\n        else\n          cout<<',';\n      }\n      cout<<tnow+1;\n\n      flg[tnow] = true;\n      tpre = tnow;\n    }\n    cout<<endl;\n  }\n  return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<map>\n#include<vector>\n#include<algorithm>\n#include<cmath>\n#include<climits>\n#include<ctime>\n#include<cstring>\n#include<stack>\n#include<queue>\n#include<sstream>\n#include<string>\n#include<set>\n#include<array>\n#include<cassert>\n\n#define ALL(v) (v).begin(),(v).end()\n#define REP(i,p,n) for(int i=p;i<(int)(n);++i)\n#define rep(i,n) REP(i,0,n)\n#define DUMP(list) cout << \"{ \"; for(auto nth : list){ cout << nth << \" \"; } cout << \"}\" << endl\n#define FOR(i,c) for(__typeof((c).begin())i=(c).begin();i!=(c).end();++i);\n\nusing namespace std;\n\n\nstruct state{\n\tint id,cost,ac;\n};\n\nbool operator < (const state &a,const state &b){\n\tif(a.ac!=b.ac) return a.ac>b.ac;\n\tif(a.cost!=b.cost) return a.cost<b.cost;\n\treturn a.id>b.id;\n}\n\nint main()\n{\n\tint M,T,P,R;\n\twhile(cin>>M>>T>>P>>R){\n\t\tif(M==0) break;\n\t\tvector<vector<int> >num_WA(T,vector<int>(P,0));\n\t\tvector<int> cost(T,0);\n\t\tvector<int> num_AC(T,0);\n\t\trep(i,R){\n\t\t\tint m,t,p,j;\n\t\t\tcin>>m>>t>>p>>j;\n\t\t\tt--;\n\t\t\tp--;\n\t\t\tif(j==0){\n\t\t\t\tcost[t] += m+num_WA[t][p]*20;\n\t\t\t\tnum_AC[t]++;\n\t\t\t}\n\t\t\telse{\n\t\t\t\tnum_WA[t][p]++;\n\t\t\t}\n\t\t}\n\t\tvector<state> temp;\n\t\trep(i,T){\n\t\t\tstate hoge;\n\t\t\thoge.cost=cost[i];\n\t\t\thoge.id=i+1;\n\t\t\thoge.ac=num_AC[i];\n\t\t\ttemp.push_back(hoge);\n\t\t}\n\t\tsort(temp.begin(),temp.end());\n\t\tint bef_ac=0,bef_cost=0;\n\t\trep(i,temp.size()){\n\t\t\tif(i!=0){\n\t\t\t\tif(bef_ac==temp[i].ac && bef_cost==temp[i].cost){\n\t\t\t\t\tcout<<\"=\";\n\t\t\t\t}\n\t\t\t\telse cout<<\",\";\n\t\t\t}\n\t\t\tcout<<temp[i].id;\n\t\t\tbef_ac=temp[i].ac;\n\t\t\tbef_cost=temp[i].cost;\n\t\t}\n\t\tcout<<endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "//include\n//------------------------------------------\n#include <vector>\n#include <list>\n#include <map>\n#include <climits>\n#include <set>\n#include <deque>\n#include <stack>\n#include <bitset>\n#include <algorithm>\n#include <functional>\n#include <numeric>\n#include <utility>\n#include <sstream>\n#include <iostream>\n#include <iomanip>\n#include <cstdio>\n#include <cmath>\n#include <cstdlib>\n#include <cctype>\n#include <string>\n#include <cstring>\n#include <ctime>\n#include <queue>\n#include <random>\n#include <cctype>\n\nusing namespace std;\n\n#define FOR(i, a, b) for(int i=(a);i<(b);++i)\n#define RFOR(i, a, b) for(int i=(b)-1;i>=(a);--i)\n#define REP(i, n)  FOR(i,0,n)\n\nstruct Team {\n\n    Team() {\n\n    }\n\n    Team(int team_id, int P) {\n        this->team_id = team_id;\n        solve_count = 0;\n        last_time = 0;\n        problems.resize(P, false);\n        error_counts.resize(P, 0);\n        times.resize(P, 0);\n    }\n\n    vector<bool> problems;\n    vector<int> error_counts;\n    vector<int> times;\n    int team_id;\n    int solve_count;\n    int last_time;\n\n};\n\nbool comp(const Team &t1, const Team &t2) {\n\n    int t1_solve_count = 0;\n    for (int i = 0; i < t1.problems.size(); i++) {\n        if (t1.problems[i]) t1_solve_count++;\n    }\n\n    int t2_solve_count = 0;\n    for (int i = 0; i < t2.problems.size(); i++) {\n        if (t2.problems[i]) t2_solve_count++;\n    }\n\n    int t1_time = 0;\n    for (int i = 0; i < t1.error_counts.size(); i++) {\n        if (t1.problems[i]) {\n            t1_time += (t1.times[i] + 20 * t1.error_counts[i]);\n        }\n    }\n\n    int t2_time = 0;\n    for (int i = 0; i < t2.error_counts.size(); i++) {\n        if (t2.problems[i]) {\n            t2_time += (t2.times[i] + 20 * t2.error_counts[i]);\n        }\n    }\n\n    //team1の方が弱かったらtrue\n    if (t1_solve_count < t2_solve_count) {\n        return false;\n    } else if (t1_solve_count > t2_solve_count) {\n        return true;\n    } else {\n\n        if (t1_time < t2_time) {\n            return true;\n        } else if (t1_time > t2_time) {\n            return false;\n        } else {\n\n            if (t1.team_id > t2.team_id) {\n                return true;\n            } else {\n                return false;\n            }\n\n        }\n\n    }\n\n}\n\nbool same(const Team &t1, const Team &t2) {\n    int t1_solve_count = 0;\n    for (int i = 0; i < t1.problems.size(); i++) {\n        if (t1.problems[i]) t1_solve_count++;\n    }\n\n    int t2_solve_count = 0;\n    for (int i = 0; i < t2.problems.size(); i++) {\n        if (t2.problems[i]) t2_solve_count++;\n    }\n\n    int t1_time = 0;\n    for (int i = 0; i < t1.error_counts.size(); i++) {\n        if (t1.problems[i]) {\n            t1_time += (t1.times[i] + 20 * t1.error_counts[i]);\n        }\n    }\n\n    int t2_time = 0;\n    for (int i = 0; i < t2.error_counts.size(); i++) {\n        if (t2.problems[i]) {\n            t2_time += (t2.times[i] + 20 * t2.error_counts[i]);\n        }\n    }\n\n    //team1の方が弱かったらtrue\n    if (t1_solve_count < t2_solve_count) {\n        return false;\n    } else if (t1_solve_count > t2_solve_count) {\n        return false;\n    } else {\n\n        if (t1_time < t2_time) {\n            return false;\n        } else if (t1_time > t2_time) {\n            return false;\n        } else {\n\n            return true;\n\n        }\n\n    }\n}\n\nint main() {\n\n    while (true) {\n\n        int M, T, P, R;\n        cin >> M >> T >> P >> R;\n\n        if (M == 0 && T == 0 && P == 0 && R == 0) {\n            break;\n        }\n\n        vector<Team> teams(T);\n        REP(i, T) {\n            teams[i] = Team(i + 1, P);\n        }\n\n        REP(i, R) {\n            int m, t, p, j;\n            cin >> m >> t >> p >> j;\n            t--;\n            p--;\n\n            if (j == 0) {\n                teams[t].times[p] = m;\n                teams[t].problems[p] = true;\n            } else {\n                teams[t].error_counts[p]++;\n            }\n        }\n\n        sort(teams.begin(), teams.end(), comp);\n\n        REP(i, teams.size()) {\n            if (i != teams.size() - 1) {\n                cout << teams[i].team_id;\n                if (same(teams[i], teams[i + 1])) {\n                    cout << \"=\";\n                } else {\n                    cout << \",\";\n                }\n            } else {\n                cout << teams[i].team_id << \"\\n\";\n            }\n        }\n\n    }\n\n    return 0;\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include <cmath>\n#include <vector>\n#include <functional>\n#include <algorithm>\n\nusing namespace std;\n\nstruct Prob { bool ok;int ngcnt; int time; };\nstruct Team { int cnt; int time; };\n\nstruct Pred{\n    bool operator()(const Team& a, const Team& b){\n        if(a.cnt==b.cnt) return a.time < b.time;\n        else return a.cnt > b.cnt;\n    }\n};\n\n\nbool isEq(const Team& a, const Team& b){\n    return a.cnt == b.cnt && a.time == b.time;\n}\n\nint main()\n{\n    int M, T, P, R;\n    while(cin >> M >> T >> P >> R, M){\n        vector<vector<Prob>> ps(T, vector<Prob>(P, {false, 0, 0}));\n        \n        for(int i=0;i<R;++i){\n            int m, t, p, j;\n            cin >> m >> t >> p >> j;\n            t-=1;p-=1;\n            auto& e = ps[t][p];\n            if(!j){\n                e.ok=true;\n                e.time=m;\n            }else{\n                ++e.ngcnt;\n            }\n        }\n        \n        vector<int> tsInt(T, 0);\n        vector<Team> ts(T, {0, 0});\n        for(int i=0;i<T;++i){\n            tsInt[i] = i;\n            auto& t = ts[i];\n            for(auto& p: ps[i]) if(p.ok){\n                ++t.cnt;\n                t.time += p.time + p.ngcnt*20;\n            }\n        }\n        \n        Pred pred;\n        sort(tsInt.begin(), tsInt.end(), [&](int i, int j){ return pred(ts[i], ts[j]); });\n        \n        vector<vector<int>> merge{};\n        int size = 0;\n        for(auto& e: tsInt){\n            if(merge.size() == 0){\n                vector<int> vs(1); vs[0]=e; merge.push_back(vs);\n                ++size;\n            }\n            else{\n                if(isEq(ts[merge[size-1][0]], ts[e]))\n                    merge[size-1].push_back(e);\n                else{\n                    vector<int> vs(1); vs[0]=e; merge.push_back(vs);\n                    ++size;\n                }\n            }\n        }\n        \n        for(int i=0;i<size;++i){\n            sort(merge[i].begin(), merge[i].end(), greater<int>());\n            int s = merge[i].size();\n            for(int j=0;j<s;++j){\n                cout << merge[i][j]+1;\n                if(j==s-1) break;\n                cout << \"=\";\n            }\n            if(i==size-1) break;\n            cout << \",\";\n        }\n        cout << endl;\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstdlib>\n#include<vector>\n#include<map>\n#include<algorithm>\n\nusing namespace std;\n\nclass results {\npublic:\n  int orgNum;\n  int tTime;\n  int tSolved;\n\n  bool operator<(const results& right) const {\n    if(tSolved < right.tSolved) {\n      return 0;\n    }\n    else if(tSolved > right.tSolved) {\n      return 1;\n    }\n    else {\n      if(tTime < right.tTime) {\n\treturn 1;\n      }\n      else if(tTime > right.tTime) {\n\treturn 0;\n      }\n      else {\n\tif(orgNum > right.orgNum) {\n\t  return 1;\n\t}\n\telse {\n\t  return 0;\n\t}\n      }\n    }\n  };\n\n  void init(int num) {\n    orgNum = num;\n    tTime = 0;\n    tSolved = 0;\n  }\n  void update(int t) {\n    tTime += t;\n    tSolved += 1;\n  }\n};\n\nclass problems {\npublic:\n  int pTime;\n  int pSolved;\n\n  void init() {\n    pTime = 0;\n    pSolved = 0;\n  }\n  void init(int t, int s) {\n    if(s == 0) {\n      pTime = t;\n      pSolved = 1;\n    }\n    else {\n      pTime = 20;\n      pSolved = 0;\n    }\n  }\n  void update(int t, int s) {\n    //pTime += t;\n    if(s == 0) {\n      pTime += t;\n      pSolved = 1;\n    }\n    else {\n      pTime += 20;\n    }\n  }\n};\n\nint main() {\n  int m, t, p, r;\n  while(cin>>m>>t>>p>>r && m>0) {\n    map<pair<int, int>, problems> inputs;\n    int tmpM, tmpT, tmpP, tmpJ;\n    for(int i=0; i<r; i++) {\n      cin>>tmpM>>tmpT>>tmpP>>tmpJ;\n      tmpT--;\n      tmpP--;\n      if(!inputs.count(make_pair(tmpT, tmpP))) {\n\tproblems tmpData;\n\ttmpData.init(tmpM, tmpJ);\n\tinputs.insert(make_pair(make_pair(tmpT, tmpP), tmpData));\n      }\n      else {\n\tinputs[make_pair(tmpT, tmpP)].update(tmpM, tmpJ);\n      }\n    }\n\n    vector<results> ans;\n    for(int i=0; i<t; i++) { // team\n      results tmp;\n      tmp.init(i);\n      //for(int j=0; j<inputs.size(); j++) { // problem\n      for(int j=0; j<p; j++) {\n\tmap<pair<int, int>, problems>::iterator itr;\n\t//auto itr = inputs.find(make_pair(i,j)); // C++11\n\titr = inputs.find(make_pair(i,j)); // チーム i の問題 j を確認\n\tif(itr != inputs.end()) {\n\t  if(inputs[itr->first].pSolved == 1) { // ???\n\t    tmp.update(inputs[itr->first].pTime);\n\t  }\n\t}\n      }\n      //cout<<tmp.orgNum<<\" \"<<tmp.tSolved<<\" \"<<tmp.tTime<<endl;\n      ans.push_back(tmp);\n    }\n\n    // print\n    /*\n    for(int i=0; i<ans.size(); i++) {\n      cout<<ans[i].orgNum<<\" \"<<ans[i].tSolved<<\" \"<<ans[i].tTime<<endl;\n    }\n    */\n\n    sort(ans.begin(), ans.end());\n    /*\n    for(int i=0; i<ans.size(); i++) {\n      cout<<ans[i].orgNum<<\" \"<<ans[i].tSolved<<\" \"<<ans[i].tTime<<endl;\n    }\n    */\n\n    for(int i=0; i<ans.size()-1; i++) {\n      cout<<ans[i].orgNum+1;\n      if(ans[i].tSolved==ans[i+1].tSolved && ans[i].tTime==ans[i+1].tTime) {\n\tcout<<\"=\";\n      }\n      else {\n\tcout<<\",\";\n      }\n    }\n    //int tmp = ans.size();\n    cout<<ans[ans.size()-1].orgNum+1<<endl;\n  }\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define REP(a,b,c) for(int a=b; a<(int)c; a++)\n#define REPE(a,b,c) for(int a=b; a<=(int)c; a++)\n#define REPD(a,b,c) for(int a=b; a>(int)c; a--)\n#define rep(a,b) REP(a,0,b)\n#define repd(a,b) REPD(a,b,0)\ntypedef struct{\n  int m;\n  int t;\n  int p;\n  int j;\n}_datas;\ntypedef struct{\n  int p;\n  int t;\n}_score;\ntypedef long long int ll;\nusing namespace std;\n\n  \n\nint main(){\n  while(true){\n    int M,T,P,R;\n    cin >> M >> T >> P >> R;\n    if(M == 0) break;\n    vector<_datas> datas(R);\n    rep(i,R) cin >> datas[i].m >> datas[i].t >> datas[i].p >> datas[i].j;\n    //rep(i,R) cout << datas[i].m << \" \"<< datas[i].t << \" \"<< datas[i].p << \" \"<< datas[i].j << \" \" << endl;\n    vector<_score> scores(T+1,{0,0});\n    REPE(i,1,T){\n      vector<int> miss_cnt(P+1,0);\n      rep(j,R){\n        _datas data = datas[j];\n        if(data.t == i){\n          if(data.j == 0){\n            scores[i].p++;\n            scores[i].t += data.m + miss_cnt[data.p]*20;\n          }else{\n            miss_cnt[data.p]++;\n          }\n        }\n      }\n    }\n    /*cout << \"score\" << endl;\n    REPE(i,1,T){\n      cout<<i<<\":\" << scores[i].p << \" \" << scores[i].t << endl;\n      }*/\n    _score b_score = {0,0};\n    REPE(i,1,T){\n      int max_idx = 1;\n      REPE(j,2,T){\n        if(scores[j].p > scores[max_idx].p || (scores[j].p==scores[max_idx].p && scores[j].t <= scores[max_idx].t)){\n          max_idx = j;\n        }\n      }\n      if(i != 1){\n        if(b_score.p == scores[max_idx].p && b_score.t==scores[max_idx].t) cout << \"=\";\n        else cout << \",\";\n      }\n      cout << max_idx;\n      b_score = scores[max_idx];\n      scores[max_idx] = {-1,0};\n    }\n    cout << endl;\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstdio>\n#include <algorithm>\n#include <string>\n#include <cstring>\n#include <cctype>\n#include <cmath>\n#include <stack>\n#include <queue>\n#include <vector>\n#include <set>\n#include <map>\n#include <list>\n#include <stdio.h>\n#include <string.h>\n#include <cstdlib>\n#include <math.h>\n#define INF 2000000000\nusing namespace std;\nint dx[4]={1,0,-1,0},dy[4]={0,1,0,-1};\n#define ll long long\n#define PL pair<long long, long long>\n#define P pair<int,int>\n#define mk make_pair\n#define en endl;\n#define WHITE 0\n#define BLACK 2\n#define GRAY 1\n#define RE return 0;\n\nstruct test{\n  int team_name,answers;\n};\n\nint main(){\n  while(1){\n    int m,t,p,r;\n    cin>>m>>t>>p>>r;\n//    cout<<en\n    if(m==t&&t==p&&p==r&&r==0) break;\n    test teams[55];\n    int mistake[55][11]={0};\n    int times[55]={0};\n    for(int i=0; i<55; i++){\n      teams[i].answers=0;\n      times[i]=0;\n    }\n    vector<P> ve;\n    for(int i=0; i<r; i++){\n      int time,team,id,judge;\n      cin>>time>>team>>id>>judge;\n      if(judge) mistake[team][id]++;\n      else{\n        teams[team].answers++;\n        times[team]+=mistake[team][id]*20+time;\n      }\n    }\n    \n    for(int i=1; i<=t; i++){\n      ve.push_back(mk(teams[i].answers,i));\n//      cout<<\"   i = \"<<i;\n//      cout<<\"          ans = \"<<teams[i].answers<<en\n    }\n//\n//    cout<<en\n    \n    sort(ve.begin(), ve.end(), greater<P>());\n//    for(auto v=0; v<ve.size(); v++){\n//      cout<<ve[v].second<<\"  time:  \"<<times[ve[v].second]<<en\n//    }\n//    cout<<en\n//    cout<<en\n    \n    for(auto v=1; v<ve.size(); v++){\n      P now=ve[v];\n      int j=v-1;\n      while(j>=0&&ve[j].first==now.first&&times[now.second]<times[ve[j].second]){\n        ve[j+1]=ve[j];\n        j--;\n      }\n      ve[j+1]=now;\n    }\n    \n    for(int i=0; i<ve.size(); i++){\n      cout<<ve[i].second;\n      if(i==ve.size()-1) break;\n      if(ve[i].first==ve[i+1].first&&times[ve[i].second]==times[ve[i+1].second]) cout<<'=';\n      else cout<<',';\n    }\n    cout<<en\n  }\n  RE\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#define MAX_R 2001\n#define MAX_T 51\n#define MAX_P 11\nusing namespace std;\n\nvoid mysort(int ac[MAX_T], int sum[MAX_T], int rank[MAX_T], int n) {\n  for (int i = 1; i <= n; i++) {\n    for (int j = i; j > 1; j--) {\n      if (ac[j - 1] < ac[j] || ac[j - 1] == ac[j] && sum[j - 1] > sum[j]\n\t  || ac[j - 1] == ac[j] && sum[j - 1] == sum[j] && rank[j - 1] < rank[j]) {\n\tswap(ac[j - 1], ac[j]);\n\tswap(sum[j - 1], sum[j]);\n\tswap(rank[j - 1], rank[j]);\n      }\n    }\n  }\n}\n\nint main() {\n  while (true) {\n    int m[MAX_R], t[MAX_R], p[MAX_R], j[MAX_R];\n    int ac[MAX_T], sum[MAX_T], wa[MAX_T][MAX_P], rank[MAX_T];\n    int M, T, P, R;\n    cin >> M >> T >> P >> R;\n    if (M == 0 && T == 0 && P == 0 && R == 0) return 0;\n\n    for (int i = 0; i < MAX_R; i++) {\n      m[i] = t[i] = p[i] = j[i] = 0;\n    }\n    for (int i = 0; i < MAX_T; i++) {\n      ac[i] = sum[i] = 0;\n      for (int j = 0; j < MAX_P; j++) {\n\twa[i][j] = 0;\n      }\n    }\n    for (int i = 0; i < MAX_T; i++) {\n      rank[i] = i;\n    }\n    \n    for (int i = 0; i < R; i++) {\n      cin >> m[i] >> t[i] >> p[i] >> j[i];\n    }\n\n    for (int i = 0; i < R; i++) {\n      int team = t[i];\n      int minute = m[i];\n      int problem = p[i];\n      if (j[i] == 0) {\n\tac[team]++;\n\tsum[team] += minute + wa[team][problem] * 20;\n      } else {\n\twa[team][problem]++;\n      }\n    }\n\n    mysort(ac, sum, rank, T);\n\n    for (int i = 1; i <= T; i++) {\n      if (i == T) {\n\tcout << rank[i] << endl;\n      } else if (ac[i] == ac[i + 1] && sum[i] == sum[i + 1]) {\n\tcout << rank[i] << '=';\n      } else {\n\tcout << rank[i] << ',';\n      }\n    }\n  }\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\ntypedef pair<int,int>P;\ntypedef pair<P,int>PP;\n\nint main(){\n\tint M,T,P,R;\n\twhile(cin>>M>>T>>P>>R,M){\n\t\tint d[55][15][2]={0};//チーム///問題///フラグ/時間\n\t\tvector<PP>V(T);\n\t\tfor(int i=0;i<V.size();i++){\n\t\t\tV[i].first.first=0;\n\t\t\tV[i].first.second=0;\n\t\t\tV[i].second=i+1;\n\t\t}\n\t\tfor(;R--;){\n\t\t\tint m,t,p,j;\n\t\t\tcin>>m>>t>>p>>j;\n\t\t\tif(j==0 && d[t][p][0]==0){\n\t\t\t\td[t][p][1]+=m;\n\t\t\t\td[t][p][0]=1;\n\t\t\t\tV[t-1].first.first++;//解いた数\n\t\t\t\tV[t-1].first.second-=d[t][p][1];//合計時間\n\t\t\t}\n\t\t\tif(j!=0 && d[t][p][0]==0){\n\t\t\t\td[t][p][1]+=20;\n\t\t\t}\n\t\t}\n\t\tsort(V.begin(),V.end());\n\t\tfor(int i=V.size()-1;i>=0;i--){\n\t\t\tcout<<V[i].second;\n\t\t\tif(i==0)cout<<endl;\n\t\t\telse if(V[i].first==V[i-1].first)cout<<\"=\";\n\t\t\telse cout<<\",\";\n\t\t}\n\t}\n\t\n\t\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\ntypedef long long ll;\ntypedef pair<int, int> pii;\ntypedef vector<int> VI;\ntypedef vector<VI> VVI;\nconst double PI = 3.14159265358979323846;\nconst double EPS = 1e-12;\nconst int INF = numeric_limits<int>::max() / 2;\nconst int NEG_INF = numeric_limits<int>::min() / 2;\n\nint main()\n{\n    cin.tie(0);\n    ios::sync_with_stdio(false);\n\n    int m, t, p, r;\n    while (true)\n    {\n        cin >> m >> t >> p >> r; //???????????°???????????°?????¬???????????°\n        if (t == 0)\n            break;\n        int seikai[t + 1] = {0}, penalty[t + 1] = {0}, gotou[t + 1][p + 1] = {0};\n        for (int i = 0; i < r; i++)\n        {\n            int j, tID, pID, time;\n            cin >> time >> tID >> pID >> j;\n            if (j == 0)\n            {\n                seikai[tID]++;\n                penalty[tID] += gotou[tID][pID] * 20 + time;\n            }\n            else\n            {\n                gotou[tID][pID]++;\n            }\n        }\n        bool checked[t + 1] = {false};\n        int preseikai = -1, prepena = -1;\n        for (int i = t; i >= 1; i--)\n        {\n            int team, seikaimax = -1, pena = INF;\n            for (int j = t; j >= 1; j--)\n            {\n                if (!checked[j])\n                {\n                    if (seikaimax < seikai[j])\n                    {\n                        seikaimax = seikai[j];\n                        team = j;\n                        pena = penalty[j];\n                    }\n                    else if (seikaimax == seikai[j])\n                    {\n                        if (pena > penalty[j])\n                        {\n                            team = j;\n                            pena = penalty[j];\n                        }\n                    }\n                }\n            }\n            checked[team] = true;\n            if (prepena == -1)\n                cout << team;\n            else if (prepena == pena && preseikai == seikaimax)\n                cout << \"=\" << team;\n            else\n                cout << \",\" << team;\n            preseikai = seikaimax, prepena = pena;\n        }\n        cout << endl;\n    }\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstring>\nusing namespace std;\nint x[100][3], n, a, b, c, d, e, f, g, h, p;\nint main() {\n\twhile (true) {\n\t\tmemset(x, 0, sizeof(x));\n\t\tcin >> n >> a >> b >> c;\n\t\tfor (int i = 0; i < c; i++) {\n\t\t\tcin >> d >> e >> f >> g;\n\t\t\tif (g) {\n\t\t\t\tx[e][2] += 20;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tx[e][1] = d + x[e][2];\n\t\t\t\tx[e][0]++;\n\t\t\t}\n\t\t}\n\t\tp = 0;\n\t\tfor (int i = 10; i >= 0; i--) {\n\t\t\tfor (int j = 0; j <= 1000; j++) {\n\t\t\t\th = 0;\n\t\t\t\tfor (int k = a; k > 0; k--) {\n\t\t\t\t\tif (x[k][0]==i && x[k][1]==j) {\n\t\t\t\t\t\tif (h >= 1) {\n\t\t\t\t\t\t\tcout << '=';\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (p >= 1) {\n\t\t\t\t\t\t\tcout << ',';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcout << k;\n\t\t\t\t\t\tp++;\n\t\t\t\t\t\th++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcout << endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include <map>\n#include <set>\n#include <list>\n#include <cmath>\n#include <queue>\n#include <stack>\n#include <cstdio>\n#include <string>\n#include <vector>\n#include <complex>\n#include <cstdlib>\n#include <cstring>\n#include <numeric>\n#include <sstream>\n#include <iostream>\n#include <algorithm>\n#include <functional>\n\n#define mp       make_pair\n#define pb       push_back\n#define all(x)   (x).begin(),(x).end()\n#define rep(i,n) for(int i=0;i<(n);i++)\n#define repi(i,a,b) for(int i = (a); i < (b); i++)\n\nusing namespace std;\n\ntypedef    long long          ll;\ntypedef    unsigned long long ull;\ntypedef    vector<bool>       vb;\ntypedef    vector<int>        vi;\ntypedef    vector<vb>         vvb;\ntypedef    vector<vi>         vvi;\ntypedef    pair<int,int>      pii;\n\nconst int INF=1<<29;\nconst double EPS=1e-9;\n\nconst int dx[]={1,0,-1,0},dy[]={0,-1,0,1};\nint M,T,P,R;\nstruct team\n{\n\tint id,ac,miss;\n\tteam(int id,int ac,int miss):id(id),ac(ac),miss(miss){}\n\tbool operator <(const team &T)const{\n\t\tif(ac!=T.ac)return ac >T.ac;\n\t\tif(miss!=T.miss)return miss >T.miss;\n\t\treturn id >T.id;\n\t}\n\tbool operator ==(const team &T)const{\n\t\treturn (ac==T.ac&&miss ==T.miss);\n\t}\n};\nint main(){\n\twhile(cin>>M>>T>>P>>R,M||T||P||R){\n\t\tvector<team> data;\n\t\tint failed[400][20]={{0}};\n\t\trep(i, T)data.push_back(team(i+1,0,0));\n\t\trep(i,R){\n\t\t\tint m,t,p,j;\n\t\t\tcin>>m>>t>>p>>j;\n\t\t\tt--;\n\t\t\tif(j==0){\n\t\t\t\tdata[t].ac++;\n\t\t\t\tdata[t].miss+=(m+failed[t][p]);\n\t\t\t}else{\n\t\t\t\tfailed[t][p]+=20;\n\t\t\t}\n\t\t}\n\t\tsort(all(data));\n\t\trep(i, T){\n\t\t\tcout <<data[i].id;\n\t\t\tif(i==T-1){\n\t\t\t\tcout <<endl;\n\t\t\t}else{\n\t\t\t\tcout <<((data[i]==data[i+1])?\"=\": \",\");\n\t\t\t}\n\t\t}\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <vector>\n#include <algorithm>\n\nusing namespace std;\n\nint a[50][2];\nint b[50][10];\n\nint main()\n{\n  while (1) {\n    int m, t, p, r, i, j;\n    vector <pair<int, pair<int, int> > > v;\n\n    scanf(\"%d %d %d %d\", &m, &t, &p, &r);\n\n    if (m == 0 && t == 0 && p == 0 && r == 0) break;\n\n    for (i = 0; i < t; i++) a[i][0] = a[i][1] = 0;\n    for (i = 0; i < t; i++) {\n      for (j = 0; j < p; j++) {\n        b[i][j] = 0;\n      }\n    }\n\n    for (i = 0; i < r; i++) {\n      int m, t, p, j;\n\n      scanf(\"%d %d %d %d\", &m, &t, &p, &j);\n\n      t--;\n      p--;\n\n      if (j == 0) {\n        a[t][0]++;\n        a[t][1] += b[t][p];\n        a[t][1] += m;\n      } else {\n        b[t][p] += 20;\n      }\n    }\n\n    for (i = 0; i < t; i++) v.push_back(make_pair(a[i][0], make_pair(-a[i][1], i + 1)));\n\n    sort(v.begin(), v.end());\n    reverse(v.begin(), v.end());\n\n    printf(\"%d\", v[0].second.second);\n\n    for (i = 1; i < v.size(); i++) {\n      if (v[i].first == v[i - 1].first && v[i].second.first == v[i - 1].second.first) {\n        putchar('=');\n      } else {\n        putchar(',');\n      }\n\n      printf(\"%d\", v[i].second.second);\n    }\n\n    puts(\"\");\n  }\n\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\n#define FOR(i, a, b) for(long long int i=(a);i<=(b);i++)\n#define RFOR(i, a, b) for(long long int i=(a);i>=(b);i--)\n#define MOD 1000000007\n#define INF 1000000000 //2000000000\n#define LLINF 1000000000000000000 //9000000000000000000\n#define PI 3.14159265358979\n\nusing namespace std;\ntypedef long long int ll;\ntypedef pair< long long int, long long  int> P;\n\n\n\nint main(void) {\n\t\n\twhile (1) {\n\t\tint M, T, P, R;\n\t\tint tmp1, tmp2;\n\t\tint dp[51][11] = {};\n\n\n\t\tcin >> M >> T >> P >> R;\n\t\tif (M == 0) {\n\t\t\tbreak;\n\t\t}\n\t\tvector<int>m(R), t(R), p(R), j(R), time(T+1, 0), count(T+1, 0);\n\t\tvector< pair<int, int> > res(T);\n\t\tFOR(i, 0, R - 1) {\n\t\t\tcin >> m[i] >> t[i] >> p[i] >> j[i];\n\t\t\tif (j[i] == 0) {\n\t\t\t\tcount[t[i]]++;\n\t\t\t\ttime[t[i]] += dp[t[i]][p[i]] * 20 + m[i];\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdp[t[i]][p[i]]++;\n\t\t\t}\n\t\t}\n\t\tFOR(i, 0, T - 1) {\n\t\t\tres[i].first = count[i + 1];\n\t\t\tres[i].second = i + 1;\n\t\t}\n\t\tsort(res.begin(), res.end());\n\n\t\tFOR(i, 0, T) {\n\t\t\tFOR(s, i + 1, T - 1) {\n\t\t\t\tif (res[i].first == res[s].first) {\n\t\t\t\t\tif (time[res[i].second] < time[res[s].second]) {\n\t\t\t\t\t\ttmp1 = res[i].second;\n\t\t\t\t\t\tres[i].second = res[s].second;\n\t\t\t\t\t\tres[s].second = tmp1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tbool flag = true;\n\t\tbool check = true;\n\t\tif (T == 1) {\n\t\t\tcout << 1 << endl;\n\t\t}\n\t\telse {\n\t\t\tRFOR(i, T - 1, 1) {\n\t\t\t\tif (res[i].first != res[i - 1].first) {\n\t\t\t\t\tif (check == false) {\n\t\t\t\t\t\tcout << \"=\" << res[i].second;\n\t\t\t\t\t\tcheck = true;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tcheck = true;\n\t\t\t\t\tif (flag == true) {\n\t\t\t\t\t\tcout << res[i].second;\n\t\t\t\t\t\tflag = false;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tcout << \",\" << res[i].second;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (time[res[i].second] != time[res[i - 1].second]) {\n\t\t\t\t\tif (check == false) {\n\t\t\t\t\t\tcout << \"=\" << res[i].second;\n\t\t\t\t\t\tcheck = true;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tcheck = true;\n\t\t\t\t\tif (flag == true) {\n\t\t\t\t\t\tcout << res[i].second;\n\t\t\t\t\t\tflag = false;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tcout << \",\" << res[i].second;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif (flag == true) {\n\t\t\t\t\t\tflag = false;\n\t\t\t\t\t\tif (check == true) {\n\t\t\t\t\t\t\tcout << res[i].second;\n\t\t\t\t\t\t\tcheck = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tcout << \"=\" << res[i].second;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (check == true) {\n\t\t\t\t\t\t\tcout << \",\" << res[i].second;\n\t\t\t\t\t\t\tcheck = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tcout << \"=\" << res[i].second;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (res[1].first != res[0].first) {\n\t\t\t\tcout << \",\" << res[0].second;\n\t\t\t}\n\t\t\telse if (time[res[1].second] != time[res[0].second]) {\n\t\t\t\tcout << \",\" << res[0].second;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcout << \"=\" << res[0].second;\n\t\t\t}\n\n\t\t\tcout << endl;\n\t\t}\n\t\t\n\t}\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <vector>\n#include <utility>\n#include <iostream>\n#include <algorithm>\n#include <functional>\n\nusing namespace std;\n\nint main()\n{\n\twhile (true)\n\t{\n\t\tint M, T, P, R;\n\n\t\tcin >> M >> T >> P >> R;\n\n\t\tif (M == 0 && T == 0 && P == 0 && R == 0) { break; }\n\n\t\tvector<vector<int> > time(T, vector<int>(P, 0));\n\t\tvector<vector<bool> > cor(T, vector<bool>(P, false));\n\n\t\tvector<int> score(T, 0);\n\t\tvector<int> rank(T, 0);\n\n\t\tfor (int i = 0; i < R; i++) \n\t\t{ \n\t\t\tint m, t, p, j;\n\n\t\t\tcin >> m >> t >> p >> j;\n\n\t\t\tif (j == 0)\n\t\t\t{\n\t\t\t\ttime[t - 1][p - 1] += m;\n\n\t\t\t\tcor[t - 1][p - 1] = true;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\ttime[t - 1][p - 1] += 20;\n\t\t\t}\n\t\t}\n\n\t\tfor (int i = 0; i < T; i++)\n\t\t{\n\t\t\tfor (int j = 0; j < P; j++)\n\t\t\t{\n\t\t\t\tif (cor[i][j] == true)\n\t\t\t\t{ \n\t\t\t\t\tscore[i] += 100000; \n\n\t\t\t\t\tscore[i] -= time[i][j];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor (int i = 0; i < T; i++) { rank[i] = i + 1; }\n\n\t\tfor (int i = 0; i < T; i++)\n\t\t{\n\t\t\tfor (int j = i + 1; j < T; j++)\n\t\t\t{\n\t\t\t\tif (score[i] < score[j])\n\t\t\t\t{\n\t\t\t\t\tswap(score[i], score[j]);\n\n\t\t\t\t\tswap(rank[i], rank[j]);\n\t\t\t\t}\n\t\t\t\telse if (score[i] == score[j] && rank[i] < rank[j])\n\t\t\t\t{\n\t\t\t\t\tswap(rank[i], rank[j]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor (int i = 0; i < T; i++)\n\t\t{\n\t\t\tif (i + 2 == T)\n\t\t\t{\n\t\t\t\tcout << rank[i] << endl;\n\t\t\t}\n\t\t\telse if (score[i] == score[i + 1])\n\t\t\t{\n\t\t\t\tcout << rank[i] << '=';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tcout << rank[i] << ',';\n\t\t\t}\n\t\t}\n\t}\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "// {{{ include\n#include <cstdio>\n#include <cmath>\n#include <cstring>\n#include <iostream>\n#include <vector>\n#include <string>\n#include <set>\n#include <map>\n#include <queue>\n#include <algorithm>\n// }}}\n#include <tuple>\n\nusing namespace std;\n\ntypedef long long ll;\ninline int in(){int x;scanf(\"%d\",&x);return x;}\n\nstruct Team {\n  int accept;\n  int penalty;\n  int id;\n  Team(int id) : id(id), accept(0), penalty(0) {}\n  bool operator<(const Team& rhs) const {\n    return make_tuple(-accept, penalty, -id) < make_tuple(-rhs.accept, rhs.penalty, -rhs.id);\n  }\n  bool operator==(const Team& rhs) const {\n    return accept == rhs.accept && penalty == rhs.penalty;\n  }\n};\n\nint main()\n{\n  int M, T, P, R;\n  while (M = in(), T = in(), P = in(), R = in(), M || T || P || R){\n    vector<vector<int>> wa(T, vector<int>(P, 0));\n\n    vector<Team> teams;\n    teams.reserve(T);\n    for (int i = 0; i < T; i++){\n      teams.emplace_back(i + 1);\n    }\n    for (int i = 0; i < R; i++){\n      int m = in(), t = in() - 1, p = in() - 1, j = in();\n      if (j != 0) wa[t][p]++;\n      else teams[t].penalty += wa[t][p] * 20 + m, teams[t].accept++;\n    }\n    sort(begin(teams), end(teams));\n    auto prev = teams[0];\n    for (int i = 0; i < T; i++){\n      if (i != 0) putchar(\",=\"[prev == teams[i]]);\n      printf(\"%d\", teams[i].id);\n      prev = teams[i];\n    }\n    puts(\"\");\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\nusing namespace std;\n\nint main(){\n    int M, T, P, R;\n    while(1){\n        cin >> M >> T >> P >> R;\n        if(M == 0){\n            break;\n        }\n\n        int ap[55] = {};\n        int at[55] = {};\n        int pen[55][11] = {};\n\n        for(int i=0;i<R;i++){\n            int m, t, p, j;\n            cin >> m >> t >> p >> j;\n            if(j==0){\n                ap[t]++;\n                at[t]+=m+20*pen[t][p];\n            }else{\n                pen[t][p]++;\n            }\n        }\n\n        bool c_flag = false;\n        for(int i=10;i>=0;i--){\n            for(int j=0;j<300*11;j++){\n                bool e_flag = false;\n                for(int k=T;k>=1;k--){\n                    if(ap[k]==i && at[k]==j){\n                        if(e_flag){\n                            cout << '=';\n                        }else if(c_flag){\n                            cout << ',';\n                        }\n                        c_flag = true;\n                        e_flag = true;\n                        cout << k;\n                    }\n                }\n            }\n        }\n        cout << endl;\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <algorithm>\n\nusing namespace std;\n\nstruct team {\n\tteam() {\n\t\tfor (int i = 0; i < 10; ++i) {\n\t\t\tac[i] = -1;\n\t\t\tfa[i] = 0;\n\t\t}\n\t}\n\tint no;\n\tint ac[10];\n\tint fa[10];\n\t\n\tint na() const {\n\t\tint ans = 0;\n\t\tfor (int i = 0; i < 10; ++i)\n\t\t\tif (ac[i] != -1)\n\t\t\t\t++ans;\n\t\treturn ans;\n\t}\n\t\n\tint st() const {\n\t\tint ans = 0;\n\t\tfor (int i = 0; i < 10; ++i)\n\t\t\tif (ac[i] != -1)\n\t\t\t\tans += ac[i] + fa[i] * 20;\n\t\treturn ans;\n\t}\n\t\n\tbool operator==(const team &rh) const {\n\t\treturn this->na() == rh.na() && this->st() == rh.st();\n\t}\n\t\n\tbool operator<(const team &rh) const {\n\t\tif (this->na() > rh.na())\n\t\t\treturn true;\n\t\telse if (this->na() < rh.na())\n\t\t\treturn false;\n\t\t\n\t\tif (this->st() < rh.st())\n\t\t\treturn true;\n\t\telse if (this->st() > rh.st())\n\t\t\treturn false;\n\t\t\n\t\treturn this->no > rh.no;\n\t}\n};\n\nint main()\n{\n\tfor (;;) {\n\t\tint m, t, p, r;\n\t\tscanf(\"%d %d %d %d\", &m, &t, &p, &r);\n\t\tif (m == 0 && t == 0 && p == 0 && r == 0)\n\t\t\tbreak;\n\t\t\t\n\t\tteam teams[50];\n\t\tfor (int i = 0; i < t; ++i)\n\t\t\tteams[i].no = i + 1;\n\t\t\n\t\tfor (int i = 0; i < r; ++i) {\n\t\t\tint m, t, p, j;\n\t\t\tscanf(\"%d %d %d %d\", &m, &t, &p, &j);\n\t\t\t\n\t\t\tif (j == 0)\n\t\t\t\tteams[t - 1].ac[p - 1] = m;\n\t\t\telse\n\t\t\t\tteams[t - 1].fa[p - 1] += 1;\n\t\t}\n\t\t\n\t\tsort(teams, teams + t);\n\t\t\n\t\tfor (int i = 0; i < t; ++i) {\n\t\t\tprintf(\"%d\", teams[i].no);\n\t\t\tif (i == t - 1)\n\t\t\t\tprintf(\"\\n\");\n\t\t\telse if (teams[i] == teams[i + 1])\n\t\t\t\tprintf(\"=\");\n\t\t\telse\n\t\t\t\tprintf(\",\");\n\t\t}\n\t}\n\t\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstdio>\n#include<vector> \n#include<algorithm>\nusing namespace std;\n\nclass Present{\npublic:\n  int m;\n  int t;\n  int p;\n  int j;\n  Present():m(0),t(0),p(0),j(0){}\n};\nclass Team{\npublic:\n  int num;\n  int solve;\n  int time;\n  Team():num(0),solve(0),time(0){}\n};\n\nbool compare_solve(const Team& left, const Team& right){\n  return left.solve > right.solve;\n}\nbool compare_time(const Team& left, const Team& right){\n  return left.time <= right.time;\n}\n\nint main(){\n  int H, T, P, R;\n  for(;;){\n    scanf(\"%d %d %d %d\", &H, &T, &P, &R);\n    if( H == 0 && T == 0 && P == 0 && R == 0)\n      return 0;\n    vector<Present> pr(R);\n    for(int i = 0; i < R; i++){\n      scanf(\"%d %d %d %d\", &pr[i].m, &pr[i].t, &pr[i].p, &pr[i].j);\n    }\n    vector<Team> team(T);\n    for(int i = 0; i < T; i++){  \n      team[i].num = i + 1;\n      for(int j = 0; j < R; j++){\n\tif(pr[j].t == team[i].num){\n\t  if(pr[j].j == 0){\n\t    team[i].solve += 1; \n\t    team[i].time += pr[j].m;\n\t    for(int k = 0; k < R; k++){\n\t      if(pr[k].t == team[i].num && pr[k].p == pr[j].p && pr[k].j != 0 )\n\t\tteam[i].time += 20;\n\t    }\n\t  }\n\t}\n      }\n    }\n    sort(team.begin(),team.end(),compare_time);\n    stable_sort(team.begin(),team.end(),compare_solve);\n    \n    cout << team[0].num;\n    for(int i = 1; i < T; i++){\n      if(team[i-1].solve == team[i].solve && team[i-1].time == team[i].time)\n\tcout << \"=\";\n      else\n\tcout << \",\";\n      cout << team[i].num;\n    }\n    cout << endl;\n    pr.clear();\n    team.clear();\n  }\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\ntypedef pair<int,int> PI;\ntypedef pair<PI,int> PII;\nint last_submit[50][10];\nint AC[50][10];\nint WA[50][10];\n\nint main() {\n  int M,T,P,R;\n  while(cin>>M>>T>>P>>R,M) {\n    for(int i=0;i<T;i++) {\n      for(int j=0;j<P;j++) {\n        last_submit[i][j]=AC[i][j]=WA[i][j]=0;\n      }\n    }\n    for(int i=0;i<R;i++) {\n      int m,t,p,j;\n      scanf(\"%d %d %d %d\",&m,&t,&p,&j);\n      t--;p--;\n      last_submit[t][p]=m;\n      if(j==0) AC[t][p]=1;\n      else WA[t][p]++;\n    }\n    vector<PII> v;\n    for(int i=0;i<T;i++) {\n      int AC_count=0;\n      int penalty=0;\n      for(int j=0;j<P;j++) {\n        AC_count+=AC[i][j];\n        if(AC[i][j]) {\n          penalty+=last_submit[i][j];\n          penalty+=WA[i][j]*20;\n        }\n      }\n      v.push_back(PII(PI(-AC_count,penalty),-i));\n    }\n    sort(v.begin(),v.end());\n    printf(\"%d\",-v[0].second+1);\n    for(int i=1;i<T;i++) {\n      if(v[i-1].first<v[i].first) {\n        printf(\",\");\n      }else {\n        printf(\"=\");\n      }\n      printf(\"%d\",-v[i].second+1);\n    }\n    printf(\"\\n\");\n  }\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\n\n#define MAX 51\n#define PROB 11\n\nusing namespace std;\n\nint Task[MAX][PROB];\nint Solved[MAX];\nint sum[MAX];\n\nbool Compare(const std::pair<std::pair<int, int>, int> &a,\n             const std::pair<std::pair<int, int>, int> &b\n             ) {\n    if (a.first.first > b.first.first) { return true; }\n    else if (a.first.first == b.first.first) {\n        if (a.first.second < b.first.second) { return true; }\n        else if (a.first.second == b.first.second) {\n            if (a.second > b.second) { return true; }\n            else { return false; }\n        }\n        else { return false; }\n    } else {\n        return false;\n    }\n}\n\n\nint main() {\n\n\n    int N, T, P, R;\n\n    int elTime, teamNum, probNum, judge;\n\n    while (cin >> N >> T >> P >> R, N) {\n\n\n        std::memset(Task, 0, sizeof(Task));\n        std::memset(Solved, 0, sizeof (Solved));\n        std::memset(sum, 0, sizeof (Solved));\n\n\n\n\n        for (int i = 0; i < R; i++) {\n            std::cin >> elTime >> teamNum >> probNum >> judge;\n            if (judge == 0) {\n                sum[teamNum] += elTime + Task[teamNum][probNum] * 20;\n                Solved[teamNum]++;\n            } else {\n                Task[teamNum][probNum]++;\n            }\n        }\n\n        std::vector<std::pair<std::pair<int, int>, int> > vt;\n\n        for (int i = 1; i <= T; i++) {\n            vt.push_back(std::make_pair(std::make_pair(Solved[i], sum[i]), i));\n        }\n\n        sort(vt.begin(), vt.end(), Compare);\n\n        for (unsigned long i = 0; i < vt.size() - 1; i++) {\n            std::cout << vt[i].second;\n            if (vt[i].first.first == vt[i+1].first.first && vt[i].first.second == vt[i+1].first.second) std::cout << \"=\";\n            else { std::cout <<\",\"; }\n        }\n        std::cout << vt[vt.size()-1].second << std::endl;\n\n    }\n\n    return 0;\n\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <cmath>\n#include <cstdio>\n#include <deque>\n#include <iomanip>\n#include <iostream>\n#include <map>\n#include <queue>\n#include <set>\n#include <stack>\n#include <unordered_map>\n#include <unordered_set>\n#include <utility>\n#include <vector>\nusing std::cerr;\nusing std::cin;\nusing std::cout;\nusing std::endl;\n\nstruct Team{\n  int team_id=-1;\n  int wa_count[11]={};\n  int ac_time=9999;\n  int penalty_time=9999;\n  int result_time=999999;\n  int ac_count=-1;\n  bool operator==(const Team& another)const{\n    return ac_count==another.ac_count&&result_time==another.result_time;\n  }\n};\n\nbool Comp(const Team& a,const Team& b){\n  if(a.ac_count!=b.ac_count){\n    return a.ac_count>b.ac_count;\n  }else if(a.result_time!=b.result_time){\n    return a.result_time<b.result_time;\n  }else{\n    return a.team_id>b.team_id;\n  }\n}\n\n\nvoid Solve(int m,int t,int p,int r){\n  std::vector<Team> team(t+1);\n\n  for(int i=1;i<=t;i++){\n    team[i].team_id=i;\n    team[i].ac_time=0;\n    team[i].penalty_time=0;\n    team[i].result_time=0;\n    team[i].ac_count=0;\n  }\n  for(int i=0;i<r;i++){\n    int mk,tk,pk,jk;\n    cin>>mk>>tk>>pk>>jk;\n    Team& tgt=team[tk];\n    if(jk==0){\n      //AC\n      tgt.ac_time+=mk;\n      tgt.penalty_time+=tgt.wa_count[pk]*20;\n      tgt.ac_count++;\n    }else{\n      //WA\n      tgt.wa_count[pk]++;\n    }\n  }\n\n  for(int i=1;i<=t;i++){\n    team[i].result_time=team[i].penalty_time+team[i].ac_time;\n  }\n\n  std::sort(team.begin(),team.end(),Comp);\n\n  for(int i=0;i<t-1;i++){\n    if(team[i]==team[i+1]){\n      cout<<team[i].team_id<<\"=\";\n    }else{\n      cout<<team[i].team_id<<\",\";\n    }\n  }\n  cout<<team[t-1].team_id<<endl;\n\n\n}\n\n\n\nint main(void) {\n  cout << std::fixed << std::setprecision(10);\n  cin.tie(0);\n  std::ios::sync_with_stdio(false);\n\n\n  while(true){\n    int m,t,p,r;\n    cin>>m>>t>>p>>r;\n    if(m==0&&t==0&&p==0&&r==0){\n      break;\n    }\n    Solve(m,t,p,r);\n\n  }\n\n\n\n\n  return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<string.h>\n#include<vector>\n#include<list>\n#include<stdio.h>\n#include<math.h>\n#include<iomanip>\n#include<map>\n#include<stack>\n#include<queue>\n#include<algorithm>\n#define range(i,a,b) for(int i = (a); i < (b); i++)\n#define rep(i,b) range(i,0,b)\n#define debug(x) cout << \"debug \" << x << endl;\nusing namespace std;\n\nstruct result{\n    short team;\n    int accepted;\n    int time;\n};\n\nint main(){\n    int M, T, P, R;\n    while(cin >> M >> T >> P >> R, M||T||P||R){\n        int data[55][15];\n        rep(i,55){\n            rep(j,15){\n                data[i][j] = -100;\n            }\n        }\n        int m,t,p,r;\n        rep(i,R){\n            cin >> m >> t >> p >> r;\n            t--; p--;\n            if(r == 0){\n                if(data[t][p] == -1){\n                    data[t][p] = m + 20;\n                }else{\n                    data[t][p] = m;\n                }\n            }else{\n                data[t][p] = -1;\n            }\n        }\n        struct result res[55];\n        rep(i,T){\n            int accepted = 0;\n            int time = 0;\n            rep(j,P){\n                if(data[i][j] != -100 && data[i][j] != -1){\n                    accepted++;\n                    time+= data[i][j];\n                }\n            }\n            res[T - 1 - i].team = i + 1;\n            res[T - 1 - i].accepted = accepted;\n            res[T - 1 - i].time = time;\n        }\n        rep(i,T){\n            rep(j,T){\n                if(res[j].accepted < res[j + 1].accepted){\n                    struct result g = res[j];\n                    res[j] = res[j + 1];\n                    res[j + 1] = g;\n                }\n            }\n            rep(j,T){\n                if(res[j].accepted == res[j + 1].accepted && res[j].time > res[j + 1].time){\n                    struct result g = res[j];\n                    res[j] = res[j + 1];\n                    res[j + 1] = g;\n                }\n            }\n        }\n        rep(i,T){\n            if(i && res[i - 1].accepted == res[i].accepted && res[i - 1].time == res[i].time){\n                cout << '=';\n            }else if(i){\n                cout << ',';\n            }\n            cout << res[i].team;\n        }\n        cout << endl;\n    }\n}"
  },
  {
    "language": "C++",
    "code": "// Header {{{\n// includes {{{\n#include <algorithm>\n#include <cassert>\n#include <cctype>\n#include <climits>\n#include <cmath>\n#include <complex>\n#include <cstdio>\n#include <cstdlib>\n#include <cstring>\n#include <ctime>\n#include <iostream>\n#include <iterator>\n#include <limits>\n#include <list>\n#include <map>\n#include <numeric>\n#include <queue>\n#include <set>\n#include <sstream>\n#include <stack>\n#include <string>\n#include <sys/time.h>\n#include <unistd.h>\n#include <vector>\n// }}}\nusing namespace std;\n// consts {{{\nstatic const int INF = 1e9;\nstatic const double PI = acos(-1.0);\nstatic const double EPS = 1e-10;\n// }}}\n// typedefs {{{\ntypedef long long int LL;\ntypedef unsigned long long int ULL;\ntypedef vector<int> VI;\ntypedef vector<VI> VVI;\ntypedef vector<LL> VLL;\ntypedef vector<VLL> VVLL;\ntypedef vector<ULL> VULL;\ntypedef vector<VULL> VVULL;\ntypedef vector<double> VD;\ntypedef vector<VD> VVD;\ntypedef vector<bool> VB;\ntypedef vector<VB> VVB;\ntypedef vector<char> VC;\ntypedef vector<VC> VVC;\ntypedef vector<string> VS;\ntypedef vector<VS> VVS;\ntypedef pair<int, int> PII;\ntypedef complex<int> P;\n// }}}\n// macros & inline functions {{{\n// syntax sugars {{{\n#define FOR(i, b, e) for (typeof(e) i = (b); i < (e); ++i)\n#define FORI(i, b, e) for (typeof(e) i = (b); i <= (e); ++i)\n#define REP(i, n) FOR(i, 0, n)\n#define REPI(i, n) FORI(i, 0, n)\n#define OPOVER(_op, _type) inline bool operator _op (const _type &t) const\n// }}}\n// conversion {{{\ninline int toInt(string s) { int v; istringstream sin(s); sin>>v; return v; }\ntemplate<class T> inline string toString(T x) { ostringstream sout; sout<<x; return sout.str(); }\n// }}}\n// array and STL {{{\n#define ARRSIZE(a) ( sizeof(a) / sizeof(a[0]) )\n#define ZERO(a, v) ( assert(v == 0 || v == -1), memset(a, v, sizeof(a)) )\n#define F first\n#define S second\n#define MP(a, b) make_pair(a, b)\n#define SIZE(a) ((LL)a.size())\n#define PB(e) push_back(e)\n#define SORT(v) sort((v).begin(), (v).end())\n#define RSORT(v) sort((v).rbegin(), (v).rend())\n#define ALL(a) (a).begin(), (a).end()\n#define RALL(a) (a).rbegin(), (a).rend()\n#define EACH(c, it) for(typeof((c).begin()) it=(c).begin(); it!=(c).end(); ++it)\n#define REACH(c, it) for(typeof((c).rbegin()) it=(c).rbegin(); it!=(c).rend(); ++it)\n#define EXIST(s, e) ((s).find(e) != (s).end())\n// }}}\n// bit manipulation {{{\n// singed integers are not for bitwise operations, specifically arithmetic shifts ('>>', and maybe not good for '<<' too)\n#define IS_UNSIGNED(n) (!numeric_limits<typeof(n)>::is_signed)\n#define BIT(n) (assert(IS_UNSIGNED(n)), assert(n < 64), (1ULL << (n)))\n#define BITOF(n, m) (assert(IS_UNSIGNED(n)), assert(m < 64), ((ULL)(n) >> (m) & 1))\ninline int BITS_COUNT(ULL b) { int c = 0; while(b != 0) { c += (b & 1); b >>= 1; } return c; }\ninline int MSB(ULL b) { int c = 0; while(b != 0) { ++c; b >>= 1; } return c-1; }\ninline int MAKE_MASK(ULL upper, ULL lower) { assert(lower < 64 && upper < 64 && lower <= upper); return (BIT(upper) - 1) ^ (BIT(lower) - 1); }\n// }}}\n// for readable code {{{\n#define EVEN(n) (n % 2 == 0)\n#define ODD(n) (!EVEN(n))\n// }}}\n// debug {{{\n#define arrsz(a) ( sizeof(a) / sizeof(a[0]) )\n#define dprt(fmt, ...) if (opt_debug) { fprintf(stderr, fmt, ##__VA_ARGS__); }\n#define darr(a) if (opt_debug) { copy( (a), (a) + arrsz(a), ostream_iterator<int>(cerr, \" \") ); cerr << endl; }\n#define darr_range(a, f, t) if (opt_debug) { copy( (a) + (f), (a) + (t), ostream_iterator<int>(cerr, \" \") ); cerr << endl; }\n#define dvec(v) if (opt_debug) { copy( ALL(v), ostream_iterator<int>(cerr, \" \") ); cerr << endl; }\n#define darr2(a) if (opt_debug) { FOR(__i, 0, (arrsz(a))){ darr( (a)[__i] ); } }\n#define dvec2(v) if (opt_debug) { FOR(__i, 0, v.size()){ dvec( (v)[__i] ); } }\n#define WAIT() if (opt_debug) { string _wait_; cerr << \"(hit return to continue)\" << endl; getline(cin, _wait_); }\n#define dump(x) if (opt_debug) { cerr << \" [L\" << __LINE__ << \"] \" << #x << \" = \" << (x) << endl; }\n#define dumpf() if (opt_debug) { cerr << __PRETTY_FUNCTION__ << endl; }\n#define dumpv(x) if (opt_debug) { cerr << \" [L:\" << __LINE__ << \"] \" << #x << \" = \"; REP(q, (x).size()) cerr << (x)[q] << \" \"; cerr << endl; }\n#define where() if (opt_debug) { cerr << __FILE__ << \": \" << __PRETTY_FUNCTION__ << \" [L: \" << __LINE__ << \"]\" << endl; }\n#define show_bits(b, s) if(opt_debug) { REP(i, s) { cerr << BITOF(b, s-1-i); if(i%4 == 3) cerr << ' '; } cerr << endl; }\ntemplate<typename T1, typename T2> ostream& operator<<(ostream& s, const pair<T1, T2>& d) {return s << \"(\" << d.first << \", \" << d.second << \")\";}\ntemplate<typename T> ostream& operator<<(ostream& s, const complex<T>& d) {return s << \"(\" << d.real() << \", \" << d.imag() << \")\";}\n// }}}\n// }}}\n// time {{{\ninline double now(){ struct timeval tv; gettimeofday(&tv, NULL); return (static_cast<double>(tv.tv_sec) + static_cast<double>(tv.tv_usec) * 1e-6); }\n// }}}\n// string manipulation {{{\ninline VS split(string s, char delimiter) { VS v; string t; REP(i, s.length()) { if(s[i] == delimiter) v.PB(t), t = \"\"; else t += s[i]; } v.PB(t); return v; }\ninline string join(VS s, string j) { string t; REP(i, s.size()) { t += s[i] + j; } return t; }\n// }}}\n// geometry {{{\n#define Y real()\n#define X imag()\n// }}}\n// 2 dimentional array {{{\nP dydx4[4] = { P(-1, 0), P(0, 1), P(1, 0), P(0, -1) };\nP dydx8[8] = { P(-1, 0), P(0, 1), P(1, 0), P(0, -1), P(-1, 1), P(1, 1), P(1, -1), P(-1, -1) };\nint g_height, g_width;\nbool in_field(P p) {\n\treturn (0 <= p.Y && p.Y < g_height) && (0 <= p.X && p.X < g_width);\n}\n// }}}\n// }}}\nbool opt_debug = false;\n\nclass Team {\n\tpublic:\n\t\tint id;\n\t\tmap<int, int> wc_count_by_problem_id;\n\t\tint ac_count;\n\t\tint total_time;\n\t\tTeam(int _id);\n\t\tvoid submit(int m, int p, bool j) {\n\t\t\tif (j) {\n\t\t\t\tac_count++;\n\t\t\t\ttotal_time += m;\n\t\t\t\tif (EXIST(wc_count_by_problem_id, p)) {\n\t\t\t\t\ttotal_time += 20 * wc_count_by_problem_id[p];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (!EXIST(wc_count_by_problem_id, p)) {\n\t\t\t\t\twc_count_by_problem_id[p] = 0;\n\t\t\t\t}\n\t\t\t\twc_count_by_problem_id[p]++;\n\t\t\t}\n\t\t}\n\n\t\tOPOVER(<, Team) {\n\t\t\tTeam self = *this;\n\t\t\tif (self.ac_count != t.ac_count) {\n\t\t\t\treturn self.ac_count < t.ac_count;\n\t\t\t} else {\n\t\t\t\tif (self.total_time != t.total_time) {\n\t\t\t\t\treturn self.total_time > t.total_time;\n\t\t\t\t} else {\n\t\t\t\t\treturn self.id < t.id;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tOPOVER(==, Team) {\n\t\t\tTeam self = *this;\n\t\t\tif (self.ac_count == t.ac_count && self.total_time == t.total_time) {\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n};\nTeam::Team(int _id) : id(_id) {\n\tac_count = 0;\n\ttotal_time = 0;\n}\n\nint main(int argc, char** argv) {\n\tstd::ios_base::sync_with_stdio(false);\n\t// set options {{{\n\tint __c;\n\twhile ( (__c = getopt(argc, argv, \"d\")) != -1 ) {\n\t\tswitch (__c) {\n\t\t\tcase 'd':\n\t\t\t\topt_debug = true;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tabort();\n\t\t}\n\t}\n\t// }}}\n\n\tint M, T, P, R;\n\twhile (cin >> M >> T >> P >> R, M || T || P || R) {\n\t\tvector<Team> teams;\n\t\tREP (i, T) {\n\t\t\tTeam* t = new Team(i + 1);\n\t\t\tteams.PB(*t);\n\t\t}\n\n\t\tREP (i, R) {\n\t\t\tint m, t, p, j; cin >> m >> t >> p >> j;\n\t\t\tteams[t-1].submit(m, t, (j == 0));\n\t\t}\n\n\t\tRSORT(teams);\n\n\t\tREP (i, teams.size()) {\n\t\t\tif (i > 0) {\n\t\t\t\tif (teams[i] == teams[i-1]) {\n\t\t\t\t\tcout << '=';\n\t\t\t\t} else {\n\t\t\t\t\tcout << ',';\n\t\t\t\t}\n\t\t\t}\n\t\t\tcout << teams[i].id;\n\t\t}\n\t\tcout << endl;\n\t}\n\n\treturn 0;\n}\n\n// vim: foldmethod=marker"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define REP(i,n,N) for(int i=n;i<(int)N;i++)\n#define ck(n,a,b) ((a)<=(n)&&(n)<(b))\n#define p(s) cout<<(s)<<endl\n#define F first\n#define S second\ntypedef long long ll;\nusing namespace std;\n\nint main() {\n\tint M, T, P, R;\n\twhile(cin>>M>>T>>P>>R, M||T||P||R){\n\t\tint pena[51][11];\n\t\tREP(i,0,51) REP(j,0,11) pena[i][j]=0;\n//int ok[51][11]={};\n//int alltime[51]={};\n\t\tpair<int,pair<int,int>> allt[51];\n\t\tREP(i,0,51) allt[i]={0,{0,-i-1}};\n\t\t//pair<int,int> prob[51];\n\t\t//REP(i,0,T) prob[i]={0,-i-1};//p,team\n\t\tREP(i, 0, R){\n\t\t\tint m, t, p, j;\n\t\t\tcin>>m>>t>>p>>j;\n\t\t\tt--;\n\t\t\tp--;\n\t\t\tif(j!=0){\n\t\t\t\tpena[t][p]++;\n\t\t\t}\n\t\t\telse if(j==0){\n\t\t\t\tallt[t].S.F+=(pena[t][p]*20 + m);\n\t\t\t\tallt[t].F--;\n\t\t\t}\n\t\t}\n/*\t\tREP(i, 0, T){\n\t\t\tREP(j, 0, P){\n\t\t\t\tallt[i].F+=ok[i][j];\n\t\t\t}\n\t\t}\n*/\n\t\tsort(allt, allt+T);\n\t\tcout<<-allt[0].S.S;\n\t\tREP(i, 1, T){\n\t\t\tif(allt[i-1].F==allt[i].F && allt[i-1].S.F==allt[i].S.F){\n\t\t\t\tcout<<\"=\"<<-allt[i].S.S;\n\t\t\t}\n\t\t\telse{\n\t\t\t\tcout<<\",\"<<-allt[i].S.S;\n\t\t\t}\n\t\t}\n\t\tcout<<endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\nint main(){\n\n    cin.tie(0);\n    ios::sync_with_stdio(false);\n\n    while( true ){\n\n        int m, t, p, r;\n        cin >> m >> t >> p >> r;\n        if(m == 0 && t == 0 && p == 0 && r == 0)\n            break;\n\n        vector<int> correct(t, 0);\n        vector<int> time(t, 0);\n        vector<vector<int>> incorrect(t, vector<int>(p, 0));\n\n        for(int i = 0; i < r; i++){\n\n            int mi, ti, pi, ji;\n            cin >> mi >> ti >> pi >> ji;\n\n            if(ji == 0){\n                correct[ti - 1] += 1;\n                time[ti - 1] += incorrect[ti - 1][pi - 1] * 20 + mi;\n            } else {\n                incorrect[ti - 1][pi - 1]++;\n            }\n\n        }\n\n        vector<vector<int>> bucket(p + 1, vector<int>(0));\n\n        for(int i = 0; i < t; i++)\n            bucket[correct[i]].push_back(i);\n/*\n        for(auto &x : bucket){\n            for(auto &z : x)\n                cout << z << ' ';\n            cout << endl;\n        }\n*/\n        int count = 0;\n        for(int i = bucket.size() - 1; i >= 0; i--) {\n            if(bucket[i].size() == 1)\n                cout << bucket[i][0] + 1 << ( ++count != t ? \",\" : \"\");\n            if(bucket[i].size() > 1){\n                vector<pair<int, int>> p(bucket[i].size());\n                for(int j = 0; j < bucket[i].size(); j++){\n                    p[j] = make_pair(time[bucket[i][j]], bucket[i][j]);\n                }\n                sort(p.begin(), p.end());\n                stack<int> st;\n                for(int j = 0; j < bucket[i].size(); j++){\n                    if(j != bucket[i].size() - 1){\n                        if(p[j].first == p[j+1].first) {\n                            st.push(p[j].second);\n                        } else {\n                            if (!st.empty()) {\n                                st.push(p[j].second);\n                                while(!st.empty()) {\n                                    cout << st.top() + 1 << ( ++count != t ? (st.size() != 1 ? \"=\" : \",\") : \"\");\n                                    st.pop();\n                                }\n                            } else\n                                cout << p[j].second + 1 << ( ++count != t ? \",\" : \"\");\n                        }\n                    } else {\n                        if (!st.empty()) {\n                            st.push(p[j].second);\n                            while(!st.empty()) {\n                                cout << st.top() + 1 << ( ++count != t ? (st.size() != 1 ? \"=\" : \",\") : \"\");\n                                st.pop();\n                            }\n                        } else\n                            cout << p[j].second + 1 << ( ++count != t ? \",\" : \"\");\n                    }\n                }\n            }\n        }\n        cout << endl;\n\n    }\n\n    return 0;\n\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<string.h>\nusing namespace std;\n\nconst int INF=50000000;\n\nint data[51][12];\n\nint main(){\n\tint M,T,P,R;\n\twhile(cin>>M>>T>>P>>R && M){\n\t\tfill((int*)data,(int*)(data+12),0);\n\t\tfor(int i=0;i<R;i++){\n\t\t\tint m,t,p,j;\n\t\t\tcin>>m>>t>>p>>j;\n\t\t\tif(j==0){\n\t\t\t\tdata[t][0]++;\n\t\t\t\tdata[t][11]+=m+data[t][p]*20;\n\t\t\t}\n\t\t\telse data[t][p]++;\n\t\t}\n\t\tint prev[2]={INF,0};\n\t\tfor(int i=0;i<T;i++){\n\t\t\tint ans=0;\n\t\t\tint now[2]={0,INF};\n\t\t\tfor(int j=T;j>=0;j--){\n\t\t\t\tif(data[j][0]>now[0]){\n\t\t\t\t\tnow[0]=data[j][0];\n\t\t\t\t\tnow[1]=data[j][11];\n\t\t\t\t\tans=j;\n\t\t\t\t}\n\t\t\t\telse if(data[j][0]==now[0] && data[j][11]<now[1]){\n\t\t\t\t\tnow[1]=data[j][11];\n\t\t\t\t\tans=j;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(i){\n\t\t\t\tif(memcmp(now,prev,sizeof(now))==0)cout<<\"=\";\n\t\t\t\telse cout<<\",\";\n\t\t\t}\n\t\t\tcout<<ans;\n\t\t\tmemcpy(prev,now,sizeof(now));\n\t\t\tdata[ans][0]=-1;\n\t\t}\n\t\tcout<<endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include <vector>\n#include <list>\n#include <map>\n#include <set>\n#include <unordered_set>\n#include <unordered_map>\n#include <deque>\n#include <stack>\n#include <bitset>\n#include <algorithm>\n#include <functional>\n#include <numeric>\n#include <utility>\n#include <sstream>\n#include <queue>\n#include <iostream>\n#include <iomanip>\n#include <cstdio>\n#include <cmath>\n#include <cstdlib>\n#include <cctype>\n#include <string>\n#include <cstring>\n#include <ctime>\n#include <fstream>\n#include <cstdio>\n#include <climits>\n#include <complex>\n#include <cstdint>\n#include <tuple>\n\n#define M_PI       3.14159265358979323846\n\nusing namespace std;\n\n//conversion\n//------------------------------------------\ninline int toInt(string s) { int v; istringstream sin(s); sin >> v; return v; }\ntemplate<class T> inline string toString(T x) { ostringstream sout; sout << x; return sout.str(); }\ninline int readInt() { int x; scanf(\"%d\", &x); return x; }\n\n//typedef\n//------------------------------------------\ntypedef vector<int> VI;\ntypedef vector<VI> VVI;\ntypedef vector<string> VS;\ntypedef pair<int, int> PII;\ntypedef pair<int, PII> TIII;\ntypedef long long LL;\ntypedef unsigned long long ULL;\ntypedef vector<LL> VLL;\ntypedef vector<VLL> VVLL;\n\n//container util\n\n//------------------------------------------\n#define ALL(a)  (a).begin(),(a).end()\n#define RALL(a) (a).rbegin(), (a).rend()\n#define PB push_back\n#define MP make_pair\n#define SZ(a) int((a).size())\n#define SQ(a) ((a)*(a))\n#define EACH(i,c) for(typeof((c).begin()) i=(c).begin(); i!=(c).end(); ++i)\n#define EXIST(s,e) ((s).find(e)!=(s).end())\n#define SORT(c) sort((c).begin(),(c).end())\n\n//repetition\n//------------------------------------------\n#define FOR(i,s,n) for(int i=s;i<(int)n;++i)\n#define REP(i,n) FOR(i,0,n)\n#define MOD 1000000007\n\n#define rep(i, a, b) for(int i = a; i < (b); ++i)\n#define trav(a, x) for(auto& a : x)\n#define all(x) x.begin(), x.end()\n#define sz(x) (int)(x).size()\n\n\nstruct Edge {\n    int to, cost, nm;\n    Edge(int to, int cost, int nm): to(to), cost(cost), nm(nm) {}\n};\n\ntypedef long long ll;\ntypedef pair<int, int> pii;\ntypedef vector<int> vi;\ntypedef vector<vector<Edge>> AdjList;\nAdjList graph;\n#define chmin(x,y) x=min(x,y)\n#define chmax(x,y) x=max(x,y)\nconst int INF = 100000000;\n\nll GCD(ll a, ll b){\n    if(a < b) swap(a, b);\n    if(b == 0) return a;\n    return GCD(b, a%b);\n}\n\nbool cmp(const pii& a, const pii& b){\n    if(a.first == b.first){\n        return a.second < b.second;\n    }\n    return a.first < b.first;\n}\n\nstruct Point{\n    int y, x;\n};\n\nint N, M;\nint arr[100010];\n\nstruct S{\n\n    int penalty[15];\n    int AC[15];\n    S(){\n        for(int i=0; i<15; ++i) {\n            penalty[i]=0;\n            AC[i]=-1;\n        }\n    }\n\n\n};\n\nstruct SS{\n    int num;\n    int AC;\n    int time;\n\n    bool operator<(const SS& t) const{\n        if(AC == t.AC){\n            if(time == t.time){\n                return num < t.num;\n            }else{\n                return time > t.time;\n            }\n        }else{\n            return AC < t.AC;\n        }\n    }\n};\nint main() {\n\n    //cout << fixed << setprecision(2);\n\n    int M, T, P,R;\n    while(cin >> M >> T >> P >> R){\n        if(M == 0 && T==0 && P==0&&R==0) break;\n        S arr[60];\n        for(int i=0; i<T; ++i){\n            arr[i] = S();\n        }\n\n\n        for(int i=0; i<R; ++i){\n            int m, t, p, j; cin >> m >> t >> p >> j;\n            t--; p--;\n            if(j==0){\n                arr[t].AC[p] = m;\n            }else{\n                arr[t].penalty[p]++;\n            }\n        }\n\n        SS arr1[60];\n        for(int i=0; i<T; ++i){\n            int maxT=0;\n            for(int j=0; j<P; ++j){\n                if(arr[i].AC[j] != -1){\n                    maxT += arr[i].AC[j];\n                }\n            }\n\n            int cnt=0;\n            for(int j=0; j<P; ++j){\n                if(arr[i].AC[j]!=-1){\n                    cnt++;\n                    maxT += arr[i].penalty[j]*20;\n                }\n            }\n\n            arr1[i].num = i;\n            arr1[i].time = maxT;\n            arr1[i].AC = cnt;\n        }\n        sort(arr1, arr1+T);\n        reverse(arr1, arr1+T);\n\n\n        for(int i=0; i<T; ++i){\n            if(i==T-1){\n                cout << arr1[i].num+1;\n            }else{\n                cout << arr1[i].num+1;\n\n                if(arr1[i].AC == arr1[i+1].AC && arr1[i].time == arr1[i+1].time){\n                    cout << '=';\n                }else{\n                    cout << ',';\n                }\n            }\n        }\n        cout << endl;\n\n\n    }\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <string>\n#include <vector>\n#include <sstream>\n#include <map>\n#include <set>\n#include <queue>\n#include <algorithm>\n#include <cmath>\n#include <cstdio>\n#include <cstdlib>\n#include <cstring>\n\nusing namespace std;\nusing ll = long long;\n\n#define all(c) (c).begin(), (c).end()\n#define rep(i, n) for (int i = 0; i < (int)(n); i++)\n#define pb(e) push_back(e)\n#define mp(a, b) make_pair(a, b)\n#define fr first\n#define sc second\n\nconst ll INF = 1e9;\nconst ll MOD = 1e9 + 7;\nint dx[4] = {1, 0, -1, 0};\nint dy[4] = {0, 1, 0, -1};\n\nint M, T, P, R;\nint m[2003], t[2003], p[2003], j[2003];\nint correct[51], penalty[51][11], times[51][11];\nvoid solve() {\n    memset(correct, 0, sizeof(correct));\n    memset(penalty, 0, sizeof(penalty));\n    memset(times, 0, sizeof(times));\n    rep(i, R) {\n        if (j[i] == 0) {\n            correct[t[i]]++;\n            times[t[i]][p[i]] += m[i];\n            times[t[i]][p[i]] += penalty[t[i]][p[i]] * 20;\n        } else {\n            penalty[t[i]][p[i]]++;\n        }\n    }\n    vector<tuple<int, int, int>> vec;\n    rep(i, T) {\n        int sum = 0;\n        rep(k, P + 1) sum += times[i][k];\n        vec.emplace_back(-correct[i], sum, -i);\n    }\n    sort(all(vec));\n    tuple<int, int, int> pre{-1, -1, -1};\n    rep(i, vec.size()) {\n        auto x = vec[i];\n        if (get<0>(x) == get<0>(pre) and get<1>(x) == get<1>(pre)) {\n            cout << \"=\";\n        } else {\n            if (i) cout << \",\";\n        }\n        cout << -get<2>(x) + 1;\n\n        pre = x;\n    }\n    cout << endl;\n}\nint main() {\n    while (cin >> M >> T >> P >> R, M) {\n        rep(i, R) cin >> m[i] >> t[i] >> p[i] >> j[i];\n        rep(i, R) t[i]--;\n        solve();\n    }\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\nusing namespace std;\n\nconst int INF=50000000;\n\nint data[51][12];\n\nint main(){\n\tint M,T,P,R;\n\twhile(cin>>M>>T>>P>>R && M){\n\t\tfill((int*)data,(int*)(data+12),0);\n\t\tfor(int i=0;i<R;i++){\n\t\t\tint m,t,p,j;\n\t\t\tcin>>m>>t>>p>>j;\n\t\t\tif(j==0){\n\t\t\t\tdata[t][0]++;\n\t\t\t\tdata[t][11]+=m+data[t][p]*20;\n\t\t\t}\n\t\t\telse data[t][p]++;\n\t\t}\n\t\tint prev[2]={INF,0};\n\t\tfor(int i=0;i<T;i++){\n\t\t\tint ans=0;\n\t\t\tint now[2]={0,INF};\n\t\t\tfor(int j=T;j>=0;j--){\n\t\t\t\tif(data[j][0]>now[0]){\n\t\t\t\t\tnow[0]=data[j][0];\n\t\t\t\t\tnow[1]=data[j][11];\n\t\t\t\t\tans=j;\n\t\t\t\t}\n\t\t\t\telse if(data[j][0]==now[0] && data[j][11]<now[1]){\n\t\t\t\t\tnow[1]=data[j][11];\n\t\t\t\t\tans=j;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(i){\n\t\t\t\tif(memcmp(now,prev,sizeof(now))==0)cout<<\"=\";\n\t\t\t\telse cout<<\",\";\n\t\t\t}\n\t\t\tcout<<ans;\n\t\t\tmemcpy(prev,now,sizeof(now));\n\t\t\tdata[ans][0]=-1;\n\t\t}\n\t\tcout<<endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\nusing namespace std;\n \nint main()\n{\n    while(true){\n        int M, T, P, R;\n        cin >> M >> T >> P >> R;\n \n        if(M==0 && T==0 && P==0 && R==0)\n            break;\n \n        int CP[50], TT[50], PT[50][10];\n        for(int i=0; i<T; i++){\n            CP[i] = TT[i] = 0;\n            for(int j=0; j<P; j++)\n                PT[i][j] = 0;\n        }\n \n        for(int i=0; i<R; i++){\n            int m, t, p, j;\n            cin >> m >> t >> p >> j;\n \n            if(j==0){\n                CP[t-1]++;\n                TT[t-1] += (m+PT[t-1][p-1]);\n            }\n            else{\n                PT[t-1][p-1] += 20;\n            }\n        }\n \n        int tnow, tpre = -1;\n        bool flg[50];\n        for(int i=0; i<T; i++)\n            flg[i] = false;\n \n        for(int i=0; i<T; i++){\n            tnow = -1;\n            for(int j=0; j<T; j++){\n                if(flg[j])\n                    continue;\n \n                if(tnow==-1){\n                    tnow = j;\n                }\n                else{\n                    if(CP[j]>CP[tnow] || (CP[j]==CP[tnow] && TT[j]<=TT[tnow])){\n                        tnow = j;\n                    }\n                }\n            }\n \n            if(tpre!=-1){\n                if(CP[tnow]==CP[tpre] && TT[tnow]==TT[tpre])\n                    cout << '=';\n                else\n                    cout << ',';\n            }\n            cout << tnow+1;\n \n            flg[tnow] = true;\n            tpre = tnow;\n        }\n        cout << endl;\n    }\n \n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n#include <map>\nusing namespace std;\n\ntypedef vector<int> vi;\ntypedef vector<vi> vvi;\n\n#define loop(i,a,b) for(int i=(a); i<int(b); i++)\n#define rep(i,b) loop(i,0,b)\n\nint main(){\n    int M,T,P,R;\n    while(cin>>M>>T>>P>>R && M){\n        vector<vector<vector<pair<int,bool>>>> v(T,vector<vector<pair<int,bool>>>(P));\n        rep(i,R){\n            int m,t,p,j;\n            cin>>m>>t>>p>>j;\n            t--,p--;\n            v[t][p].push_back(make_pair(m,j==0));\n        }\n        // solved, time, id\n        vvi rank(T);\n        rep(i,T){\n            int s = 0;\n            int t = 0;\n            rep(j,P)if(v[i][j].size()!=0 && v[i][j].back().second){\n                s++;\n                t+=v[i][j].back().first;\n                t+=20*(v[i][j].size()-1);\n            }\n            rank[i] = vi{s,t,i+1};\n        }\n        sort(rank.begin(),rank.end(),[](const vi& a, const vi& b){\n                if(a[0]!=b[0]) return a[0]>b[0];\n                if(a[1]!=b[1]) return a[1]<b[1];\n                else return a[2]>b[2];\n            });\n        cout << rank[0][2];\n        rep(i,T-1){\n            if(rank[i+1][0]==rank[i][0] && rank[i+1][1]==rank[i][1]){\n                cout << \"=\";\n            }\n            else cout << \",\";\n            cout << rank[i+1][2];\n        }\n        cout << endl;\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n//#include<fstream>\n#include<vector>\n\nusing namespace std;\n\nint main(){\n\t\n\t//ifstream fin;\n\t//fin.open(\"input.txt\");\n\n\tint M, T, P, R;//input\n\tint m, t, p, j;//input\n\n\tint time[50];\t//経過時間\n\tint solve[50];\t//正解数\n\tint miss[50][10];\t//間違えた数\n\tint count,teamcount;\n\tvector<int> v,s;//解けた問題数ごとに...\n\t\n\twhile(true){\n\t\tfor (int i = 0; i < 50; i++){//初期化\n\t\t\tfor (int k = 0; k < 10; k++)miss[i][k] = 0;\n\t\t\ttime[i] = solve[i] = 0;\n\t\t}\n\t\tM = T = P = R = m = t = p = j = 0;\n\n\t\tcin >> M >> T >> P >> R;\n\t\tif (M == 0)break;\n\n\t\twhile (R > 0){//結果計算\n\t\t\tR--;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tt--;\n\t\t\tif (j == 0){\n\t\t\t\ttime[t] += m;\n\t\t\t\ttime[t] += miss[t][p] * 20;\n\t\t\t\tsolve[t]++;\n\t\t\t}\n\t\t\telse miss[t][p]++;\n\t\t}\n\t\t\n\t\tfor (int i = 0; i < T; i++){\n\t\t\tcout << \"チーム\" << i+1 << endl << \" 経過時間：\" << time[i] << \" 回答数：\" << solve[i];\n\t\t\tcout << endl;\n\t\t}\n\t\t\n\n\t\t//以下ソート\n\t\tcount = 0;//初期化\n\t\tteamcount = 0;\n\t\tfor (int i = 0; i < T; i++)if (count < solve[i])count = solve[i];\n\n\t\twhile (count >= 0){\n\t\t\tfor (int i = 0; i < T; i++)if (count == solve[i]){\n\t\t\t\tv.push_back(i);//countだけ解けたチームを記憶\n\t\t\t\ts.push_back(time[i]);//解けたチームの時間を記憶\n\t\t\t\tteamcount++;\n\t\t\t}\n\n\t\t\t//バブルソート\n\t\t\tif (s.size() > 1){\n\t\t\t\tfor (int i = 0; i < (int)v.size() - 1; i++)\n\t\t\t\t\tfor (int k = (int)v.size() - 1; k > i; k--){\n\t\t\t\t\t\tif (s[k] > s[k - 1]){\n\t\t\t\t\t\t\tint tmp = s[k];\n\t\t\t\t\t\t\tint temp = v[k];\n\n\t\t\t\t\t\t\ts[k] = s[k - 1];\n\t\t\t\t\t\t\tv[k] = v[k - 1];\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\ts[k - 1] = tmp;\n\t\t\t\t\t\t\tv[k - 1] = temp;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t}\n\t\t\tif (v.size() > 1){\n\t\t\t\tfor (int i = 0; i < (int)v.size() - 1; i++)\n\t\t\t\t\tfor (int k = (int)v.size() - 1; k > i; k--)\n\t\t\t\t\t\tif (s[k] == s[k - 1] && v[k] < v[k - 1]){\n\t\t\t\t\t\t\tint tmp = v[k];\n\t\t\t\t\t\t\tv[k] = v[k - 1];\n\t\t\t\t\t\t\tv[k - 1] = tmp;\n\t\t\t\t\t\t}\n\t\t\t}\n\t\t\t//ソート終了\n\n\t\t\t//output\n\t\t\twhile (v.size() > 2){\n\t\t\t\tif (s[v.size() - 1] == s[v.size() - 2]/* || s[v.size()] == s[v.size() - 1]*/)\n\t\t\t\t\tcout << v.back() + 1 << '=';\n\t\t\t\telse cout << v.back() + 1 << \",\";\n\t\t\t\tv.pop_back();\n\t\t\t}\n\t\t\tif (v.size() == 2){//最後の二つだけ例外処理\n\n\t\t\t\tif (s[1] == s[0])\n\t\t\t\t\t cout << v.back()+1 << \"=\";\n\t\t\t\telse cout << v.back()+1 << ',';\n\t\t\t\t\tv.pop_back();\n\t\t\t\t\tcout << v.back()+1;\n\t\t\t\t\tif (teamcount != T)cout << ',';\n\t\t\t\t\tv.pop_back();\n\t\t\t}\n\t\t\tif (v.size() == 1){\n\t\t\t\tif(teamcount != T)cout << v.back() + 1 << ',';\n\t\t\t\tv.pop_back();\n\t\t\t}\n\t\t\tv.clear();\n\t\t\ts.clear();\n\t\t\tcount--;\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <utility>\n#include <cmath>\n#include <algorithm>\n#include <iostream>\n#include <iomanip>\n#include <vector>\n#include <string>\n#define REP(i,n) for(int i=0;i<n;i++)\ntypedef long long ll;\nusing namespace std;\ntypedef vector<ll> vl;\ntypedef pair<ll,ll> pll;\ntypedef vector<pll> vpll;\ntypedef vector<string> vs;\n\nint main() \n{\n\tint M,T,P,R;\n\twhile(cin >> M >> T >>P >> R  && !(M==0 && T==0 && P==0 && R==0))\n\t{\n\t\t\n\t\tint a[50][50]={}; // Team * Problem の成否 正解なら1\n\t\tint b[50][50]={}; // 同、得点（候補）\n\t\t\n\t\tint m[2000]={0};\n\t\tint t[2000]={0};\n\t\tint p[2000]={0};\n\t\tint j[2000]={0};\n\t\t\n\t\tREP(i,R){\n\t\tcin >> m[i] >> t[i] >> p[i] >> j[i];\n\t\tt[i]--;p[i]--;}\n\t\t\n\t\tREP(i,R){\n\t\t\tif(j[i]==0)\n\t\t\t{\n\t\t\t\ta[t[i]][p[i]]=1;\n\t\t\t\tb[t[i]][p[i]]+=m[i];\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tb[t[i]][p[i]]+=20;\n\t\t\t}\n\t\t}\n\t\t\n\t\tint xa[50]={}; //正解数\n\t\tint xb[50]={}; //得点合計\n\t\tREP(i,T){REP(j,P){\n\t\t\t\txa[i]+=a[i][j];\n\t\t\t\txb[i]+=a[i][j]*b[i][j];\n\t\t\t}\n\t\t}\n\t\t\n\t\tint po[50]; // 得点のパターンを照準に\n\t\tREP(i,T){po[i]=xb[i];}\n\t\tsort(po,po+T);\n\t\t\n//\t\tREP(i,T){cout << xa[i] << \" \" << xb[i] << endl;}\n//\t\tREP(i,T){cout << po[i] << \" \";}\n\t\t\n\t\tbool flag1=false; // １チームでも出力したらフラグ立てる\n\t\tfor(int i=P;i>-1;i--)\n\t\t{\n\t\t\tfor(int j=0;j<T;j++)\n\t\t\t{\n\t\t\t\tbool flag2 = false;  //同一正解、同一得点のチームが出力されていたらフラグ立てる\n\t\t\t\tbool flag3 = false; //同一得点を検索していたらフラグ立てる\n\t\t\t\tif(po[j-1]==po[j] && j>0){flag3=true;}\n\t\t\t\tfor(int k=(T-1);k>-1;k--)\n\t\t\t\t{\n\t\t\t\t\tif(flag3){break;}\n\t\t\t\t\tif(\txa[k]==i && xb[k]==po[j] )\n\t\t\t\t\t{\n\t\t\t\t\t\tif(!flag1){cout << k+1; flag1=true;flag2=true;}\n\t\t\t\t\t\telse if(flag1 && !flag2){cout<<\",\" << k+1;flag2=true;}\n\t\t\t\t\t\telse {cout << \"=\" << k+1;}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n//#include<fstream>\n#include<vector>\n\nusing namespace std;\n\nint main(){\n\t\n\tifstream fin;\n\tfin.open(\"input.txt\");\n\n\tint M, T, P, R;//input\n\tint m, t, p, j;//input\n\n\tint time[50];\t//経過時間\n\tint solve[50];\t//正解数\n\tint miss[50][10];\t//間違えた数\n\tint count;\n\tvector<int> v,s;//解けた問題数ごとに...\n\t\n\twhile(true){\n\t\tfor (int i = 0; i < 50; i++){//初期化\n\t\t\tfor (int k = 0; k < 10; k++)miss[i][k] = 0;\n\t\t\ttime[i] = solve[i] = 0;\n\t\t}\n\t\tM = T = P = R = m = t = p = j = 0;\n\n\t\tcin >> M >> T >> P >> R;\n\t\tif (M == 0)break;\n\n\t\twhile (R > 0){//結果計算\n\t\t\tR--;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tt--;\n\t\t\tif (j == 0){\n\t\t\t\ttime[t] += m;\n\t\t\t\ttime[t] += miss[t][p] * 20;\n\t\t\t\tsolve[t]++;\n\t\t\t}\n\t\t\telse miss[t][p]++;\n\t\t}\n\t\t\n\t\tfor (int i = 0; i < T; i++){\n\t\t\tcout << \"チーム\" << i+1 << endl << \" 経過時間：\" << time[i] << \" 回答数：\" << solve[i];\n\t\t\tcout << endl;\n\t\t}\n\t\t\n\n\t\t//以下ソート\n\t\tcount = 0;//初期化\n\t\tfor (int i = 0; i < T; i++)if (count < solve[i])count = solve[i];\n\n\t\twhile (count >= 0){\n\t\t\tfor (int i = 0; i < T; i++)if (count == solve[i]){\n\t\t\t\tv.push_back(i);//countだけ解けたチームを記憶\n\t\t\t\ts.push_back(time[i]);//解けたチームの時間を記憶\n\t\t\t}\n\n\t\t\t//バブルソート\n\t\t\tif (s.size() > 1){\n\t\t\t\tfor (int i = 0; i < (int)v.size() - 1; i++)\n\t\t\t\t\tfor (int k = (int)v.size() - 1; k > i; k--){\n\t\t\t\t\t\tif (s[k] > s[k - 1]){\n\t\t\t\t\t\t\tint tmp = s[k];\n\t\t\t\t\t\t\tint temp = v[k];\n\n\t\t\t\t\t\t\ts[k] = s[k - 1];\n\t\t\t\t\t\t\tv[k] = v[k - 1];\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\ts[k - 1] = tmp;\n\t\t\t\t\t\t\tv[k - 1] = temp;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t}\n\t\t\tif (v.size() > 1){\n\t\t\t\tfor (int i = 0; i < (int)v.size() - 1; i++)\n\t\t\t\t\tfor (int k = (int)v.size() - 1; k > i; k--)\n\t\t\t\t\t\tif (s[k] == s[k - 1] && v[k] < v[k - 1]){\n\t\t\t\t\t\t\tint tmp = v[k];\n\t\t\t\t\t\t\tv[k] = v[k - 1];\n\t\t\t\t\t\t\tv[k - 1] = tmp;\n\t\t\t\t\t\t}\n\t\t\t}\n\t\t\t//ソート終了\n\n\t\t\t//output\n\t\t\twhile (v.size() > 2){\n\t\t\t\tif (s[v.size() - 1] == s[v.size() - 2]/* || s[v.size()] == s[v.size() - 1]*/)\n\t\t\t\t\tcout << v.back() + 1 << '=';\n\t\t\t\telse cout << v.back() + 1 << \",\";\n\t\t\t\tv.pop_back();\n\t\t\t}\n\t\t\tif (v.size() == 2){//最後の二つだけ例外処理\n\n\t\t\t\tif (s[1] == s[0])\n\t\t\t\t\t cout << v.back()+1 << \"=\";\n\t\t\t\telse cout << v.back()+1 << ',';\n\t\t\t\t\tv.pop_back();\n\t\t\t\t\tcout << v.back()+1;\n\t\t\t\t\tif (s[v.size()-1] != 0)cout << ',';\n\t\t\t\t\tv.pop_back();\n\t\t\t}\n\t\t\tif (v.size() == 1){\n\t\t\t\tcout << v.back()+1 << ',';\n\t\t\t\tv.pop_back();\n\t\t\t}\n\t\t\tv.clear();\n\t\t\ts.clear();\n\t\t\tcount--;\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "\n#include <string>\n#include <vector>\n#include <algorithm>\n#include <iostream>\n#include <cstdio>\n#include <cstdlib>\n#include <cmath>\n#include <queue>\n#include <map>\n#define INF 1000000\n \nusing namespace std;\ntypedef long long ll;\n \nbool checkmtpj(int m,int t,int p,int j){\n\tif(m==0 && t==0 && p==0 && j==0) return true;\n\telse return false;\n}\n\nint main(){\n\tint M,T,P,R;\n\tint mk[2000],tk[2000],pk[2000],jk[2000];\n\n\n\tstruct Teishutsu{\n\t\tint team;\n\t\tint ansN;\n\t\tint time;\n\t\tint problem[11];\n\t\tbool flag;\n\t};\n\t\n\n\twhile(1){\n\t\tcin>>M>>T>>P>>R;\n\t\tTeishutsu juni[51],tmp;\n\n\n\t\tfor(int i=0;i<2000;i++){\n\t\t\tmk[i]=0;\n\t\t\ttk[i]=0;\n\t\t\tpk[i]=0;\n\t\t\tjk[i]=0;\n\t\t}\n\n\t\tfor(int i=1;i<=R;i++){\n\t\t\tcin>>mk[i]>>tk[i]>>pk[i]>>jk[i];\n\t\t}\n\t\t\n\n\t\t/*-------------------構造体初期化処理-----------------*/\n\t\tfor(int i=1;i<=T;i++){\n\t\t\tjuni[i].team=i;\n\t\t\tjuni[i].ansN=0;\n\t\t\tjuni[i].time=0;\n\t\t\tfor(int j=1;j<=11;j++){\n\t\t\t\tjuni[i].problem[j]=0;\n\t\t\t}\n\t\t\tjuni[i].flag=false;\n\t\t}\n\t\t/*-------------------------------------------------------*/\n\n\t\t/*---------------------構造体への入力---------------------*/\n\t\tfor(int i=1;i<=R;i++){\n\t\t\tif(jk[i]==0){\n\t\t\t\tjuni[tk[i]].ansN++;\n\t\t\t\tjuni[tk[i]].time+=mk[i];\n\t\t\t\tif(juni[tk[i]].problem[pk[i]] != 0){\n\t\t\t\t\tjuni[tk[i]].time+=juni[tk[i]].problem[pk[i]]*20;\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tjuni[tk[i]].problem[pk[i]]++;\n\t\t\t}\n//cout<<tk[i]<<\" \"<<juni[tk[i]].ansN<<\" \"<<juni[tk[i]].time<<endl;\n\t\t}\n\t\t\n\t\t/*----------------------------------------------------------*/\n\t\t\n\t\tfor(int i=1;i<=T;i++){\n\t\t\tfor(int j=1;j<=T-i;j++){\n\t\t\t\tif(juni[j].ansN<juni[j+1].ansN){\n\t\t\t\t\ttmp.team=juni[j+1].team;\n\t\t\t\t\ttmp.ansN=juni[j+1].ansN;\n\t\t\t\t\ttmp.time=juni[j+1].time;\n\t\t\t\t\ttmp.flag=juni[j+1].flag;\n\t\t\t\t\t\n\t\t\t\t\tjuni[j+1].team=juni[j].team;\n\t\t\t\t\tjuni[j+1].ansN=juni[j].ansN;\n\t\t\t\t\tjuni[j+1].time=juni[j].time;\n\t\t\t\t\tjuni[j+1].flag=juni[j].flag;\n\t\t\t\t\t\n\t\t\t\t\tjuni[j].team=tmp.team;\n\t\t\t\t\tjuni[j].ansN=tmp.ansN;\n\t\t\t\t\tjuni[j].time=tmp.time;\n\t\t\t\t\tjuni[j].flag=tmp.flag;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor(int i=1;i<=T;i++){\n\t\t\tfor(int j=1;j<=T-i;j++){\n\t\t\t\tif(juni[j].time>juni[j+1].time && juni[j].ansN==juni[j+1].ansN){\n\t\t\t\t\ttmp.team=juni[j+1].team;\n\t\t\t\t\ttmp.ansN=juni[j+1].ansN;\n\t\t\t\t\ttmp.time=juni[j+1].time;\n\t\t\t\t\ttmp.flag=juni[j+1].flag;\n\t\t\t\t\t\n\t\t\t\t\tjuni[j+1].team=juni[j].team;\n\t\t\t\t\tjuni[j+1].ansN=juni[j].ansN;\n\t\t\t\t\tjuni[j+1].time=juni[j].time;\n\t\t\t\t\tjuni[j+1].flag=juni[j].flag;\n\n\t\t\t\t\tjuni[j].team=tmp.team;\n\t\t\t\t\tjuni[j].ansN=tmp.ansN;\n\t\t\t\t\tjuni[j].time=tmp.time;\n\t\t\t\t\tjuni[j].flag=tmp.flag;\n\t\t\t\t}else if(juni[j].time==juni[j+1].time && juni[j].ansN==juni[j+1].ansN){\n\t\t\t\t\tjuni[j].flag=true;\n\t\t\t\t\t\n\t\t\t\t\tif(juni[j].team<juni[j+1].team){\n\t\t\t\t\t\ttmp.team=juni[j+1].team;\n\t\t\t\t\t\ttmp.ansN=juni[j+1].ansN;\n\t\t\t\t\t\ttmp.time=juni[j+1].time;\n\t\t\t\t\t\ttmp.flag=juni[j+1].flag;\n\t\t\t\t\t\n\t\t\t\t\t\tjuni[j+1].team=juni[j].team;\n\t\t\t\t\t\tjuni[j+1].ansN=juni[j].ansN;\n\t\t\t\t\t\tjuni[j+1].time=juni[j].time;\n\t\t\t\t\t\tjuni[j+1].flag=juni[j].flag;\n\n\t\t\t\t\t\tjuni[j].team=tmp.team;\n\t\t\t\t\t\tjuni[j].ansN=tmp.ansN;\n\t\t\t\t\t\tjuni[j].time=tmp.time;\n\t\t\t\t\t\tjuni[j].flag=tmp.flag;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\n\t\tfor(int i=1;i<=T;i++){\n\t\t\tif(i==1){}\n\t\t\telse{\n\t\t\t\tif(juni[i].flag) cout<<\"=\";\n\t\t\t\telse cout<<\",\";\n\t\t\t}\n\t\t\tcout<<juni[i].team;\n\t\t\t\n\t\t}\n\t\tcout<<endl;\n\t\tif(checkmtpj(mk[R],tk[R],pk[R],jk[R])) break;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "// Header {{{\n// includes {{{\n#include <algorithm>\n#include <cassert>\n#include <cctype>\n#include <climits>\n#include <cmath>\n#include <complex>\n#include <cstdio>\n#include <cstdlib>\n#include <cstring>\n#include <ctime>\n#include <iostream>\n#include <iterator>\n#include <limits>\n#include <list>\n#include <map>\n#include <numeric>\n#include <queue>\n#include <set>\n#include <sstream>\n#include <stack>\n#include <string>\n#include <sys/time.h>\n#include <unistd.h>\n#include <vector>\n// }}}\nusing namespace std;\n// consts {{{\nstatic const int INF = 1e9;\nstatic const double PI = acos(-1.0);\nstatic const double EPS = 1e-10;\n// }}}\n// typedefs {{{\ntypedef long long int LL;\ntypedef unsigned long long int ULL;\ntypedef vector<int> VI;\ntypedef vector<VI> VVI;\ntypedef vector<LL> VLL;\ntypedef vector<VLL> VVLL;\ntypedef vector<ULL> VULL;\ntypedef vector<VULL> VVULL;\ntypedef vector<double> VD;\ntypedef vector<VD> VVD;\ntypedef vector<bool> VB;\ntypedef vector<VB> VVB;\ntypedef vector<char> VC;\ntypedef vector<VC> VVC;\ntypedef vector<string> VS;\ntypedef vector<VS> VVS;\ntypedef pair<int, int> PII;\ntypedef complex<int> P;\n// }}}\n// macros & inline functions {{{\n// syntax sugars {{{\n#define FOR(i, b, e) for (typeof(e) i = (b); i < (e); ++i)\n#define FORI(i, b, e) for (typeof(e) i = (b); i <= (e); ++i)\n#define REP(i, n) FOR(i, 0, n)\n#define REPI(i, n) FORI(i, 0, n)\n#define OPOVER(_op, _type) inline bool operator _op (const _type &t) const\n// }}}\n// conversion {{{\ninline int toInt(string s) { int v; istringstream sin(s); sin>>v; return v; }\ntemplate<class T> inline string toString(T x) { ostringstream sout; sout<<x; return sout.str(); }\n// }}}\n// array and STL {{{\n#define ARRSIZE(a) ( sizeof(a) / sizeof(a[0]) )\n#define ZERO(a, v) ( assert(v == 0 || v == -1), memset(a, v, sizeof(a)) )\n#define F first\n#define S second\n#define MP(a, b) make_pair(a, b)\n#define SIZE(a) ((LL)a.size())\n#define PB(e) push_back(e)\n#define SORT(v) sort((v).begin(), (v).end())\n#define RSORT(v) sort((v).rbegin(), (v).rend())\n#define ALL(a) (a).begin(), (a).end()\n#define RALL(a) (a).rbegin(), (a).rend()\n#define EACH(c, it) for(typeof((c).begin()) it=(c).begin(); it!=(c).end(); ++it)\n#define REACH(c, it) for(typeof((c).rbegin()) it=(c).rbegin(); it!=(c).rend(); ++it)\n#define EXIST(s, e) ((s).find(e) != (s).end())\n// }}}\n// bit manipulation {{{\n// singed integers are not for bitwise operations, specifically arithmetic shifts ('>>', and maybe not good for '<<' too)\n#define IS_UNSIGNED(n) (!numeric_limits<typeof(n)>::is_signed)\n#define BIT(n) (assert(IS_UNSIGNED(n)), assert(n < 64), (1ULL << (n)))\n#define BITOF(n, m) (assert(IS_UNSIGNED(n)), assert(m < 64), ((ULL)(n) >> (m) & 1))\ninline int BITS_COUNT(ULL b) { int c = 0; while(b != 0) { c += (b & 1); b >>= 1; } return c; }\ninline int MSB(ULL b) { int c = 0; while(b != 0) { ++c; b >>= 1; } return c-1; }\ninline int MAKE_MASK(ULL upper, ULL lower) { assert(lower < 64 && upper < 64 && lower <= upper); return (BIT(upper) - 1) ^ (BIT(lower) - 1); }\n// }}}\n// for readable code {{{\n#define EVEN(n) (n % 2 == 0)\n#define ODD(n) (!EVEN(n))\n// }}}\n// debug {{{\n#define arrsz(a) ( sizeof(a) / sizeof(a[0]) )\n#define dprt(fmt, ...) if (opt_debug) { fprintf(stderr, fmt, ##__VA_ARGS__); }\n#define darr(a) if (opt_debug) { copy( (a), (a) + arrsz(a), ostream_iterator<int>(cerr, \" \") ); cerr << endl; }\n#define darr_range(a, f, t) if (opt_debug) { copy( (a) + (f), (a) + (t), ostream_iterator<int>(cerr, \" \") ); cerr << endl; }\n#define dvec(v) if (opt_debug) { copy( ALL(v), ostream_iterator<int>(cerr, \" \") ); cerr << endl; }\n#define darr2(a) if (opt_debug) { FOR(__i, 0, (arrsz(a))){ darr( (a)[__i] ); } }\n#define dvec2(v) if (opt_debug) { FOR(__i, 0, v.size()){ dvec( (v)[__i] ); } }\n#define WAIT() if (opt_debug) { string _wait_; cerr << \"(hit return to continue)\" << endl; getline(cin, _wait_); }\n#define dump(x) if (opt_debug) { cerr << \" [L\" << __LINE__ << \"] \" << #x << \" = \" << (x) << endl; }\n#define dumpf() if (opt_debug) { cerr << __PRETTY_FUNCTION__ << endl; }\n#define dumpv(x) if (opt_debug) { cerr << \" [L:\" << __LINE__ << \"] \" << #x << \" = \"; REP(q, (x).size()) cerr << (x)[q] << \" \"; cerr << endl; }\n#define where() if (opt_debug) { cerr << __FILE__ << \": \" << __PRETTY_FUNCTION__ << \" [L: \" << __LINE__ << \"]\" << endl; }\n#define show_bits(b, s) if(opt_debug) { REP(i, s) { cerr << BITOF(b, s-1-i); if(i%4 == 3) cerr << ' '; } cerr << endl; }\ntemplate<typename T1, typename T2> ostream& operator<<(ostream& s, const pair<T1, T2>& d) {return s << \"(\" << d.first << \", \" << d.second << \")\";}\ntemplate<typename T> ostream& operator<<(ostream& s, const complex<T>& d) {return s << \"(\" << d.real() << \", \" << d.imag() << \")\";}\n// }}}\n// }}}\n// time {{{\ninline double now(){ struct timeval tv; gettimeofday(&tv, NULL); return (static_cast<double>(tv.tv_sec) + static_cast<double>(tv.tv_usec) * 1e-6); }\n// }}}\n// string manipulation {{{\ninline VS split(string s, char delimiter) { VS v; string t; REP(i, s.length()) { if(s[i] == delimiter) v.PB(t), t = \"\"; else t += s[i]; } v.PB(t); return v; }\ninline string join(VS s, string j) { string t; REP(i, s.size()) { t += s[i] + j; } return t; }\n// }}}\n// geometry {{{\n#define Y real()\n#define X imag()\n// }}}\n// 2 dimentional array {{{\nP dydx4[4] = { P(-1, 0), P(0, 1), P(1, 0), P(0, -1) };\nP dydx8[8] = { P(-1, 0), P(0, 1), P(1, 0), P(0, -1), P(-1, 1), P(1, 1), P(1, -1), P(-1, -1) };\nint g_height, g_width;\nbool in_field(P p) {\n\treturn (0 <= p.Y && p.Y < g_height) && (0 <= p.X && p.X < g_width);\n}\n// }}}\n// }}}\nbool opt_debug = false;\n\nclass Team {\n\tpublic:\n\t\tint id;\n\t\tmap<int, int> wc_count_by_problem_id;\n\t\tint ac_count;\n\t\tint total_time;\n\t\tTeam(int _id);\n\t\tvoid submit(int m, int p, bool j) {\n\t\t\tif (j) {\n\t\t\t\tac_count++;\n\t\t\t\ttotal_time += m;\n\t\t\t\tif (EXIST(wc_count_by_problem_id, p)) {\n\t\t\t\t\ttotal_time += 20 * wc_count_by_problem_id[p];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (!EXIST(wc_count_by_problem_id, p)) {\n\t\t\t\t\twc_count_by_problem_id[p] = 0;\n\t\t\t\t}\n\t\t\t\twc_count_by_problem_id[p]++;\n\t\t\t}\n\t\t}\n\n\t\tOPOVER(<, Team) {\n\t\t\tTeam self = *this;\n\t\t\tif (self.ac_count != t.ac_count) {\n\t\t\t\treturn self.ac_count < t.ac_count;\n\t\t\t} else {\n\t\t\t\tif (self.total_time != t.total_time) {\n\t\t\t\t\treturn self.total_time > t.total_time;\n\t\t\t\t} else {\n\t\t\t\t\treturn self.id < t.id;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tOPOVER(==, Team) {\n\t\t\tTeam self = *this;\n\t\t\tif (self.ac_count == t.ac_count && self.total_time == t.total_time) {\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n};\nTeam::Team(int _id) : id(_id) {\n\tac_count = 0;\n\ttotal_time = 0;\n}\n\nbool comp(Team* a, Team* b) {\n\treturn *a < *b;\n}\n\nbool same(Team* a, Team* b) {\n\treturn *a == *b;\n}\n\nint main(int argc, char** argv) {\n\tstd::ios_base::sync_with_stdio(false);\n\t// set options {{{\n\tint __c;\n\twhile ( (__c = getopt(argc, argv, \"d\")) != -1 ) {\n\t\tswitch (__c) {\n\t\t\tcase 'd':\n\t\t\t\topt_debug = true;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tabort();\n\t\t}\n\t}\n\t// }}}\n\n\tint M, T, P, R;\n\twhile (cin >> M >> T >> P >> R, M || T || P || R) {\n\t\tvector<Team*> teams;\n\t\tREP (i, T) {\n\t\t\tTeam* t = new Team(i + 1);\n\t\t\tteams.PB(t);\n\t\t}\n\n\t\tREP (i, R) {\n\t\t\tint m, t, p, j; cin >> m >> t >> p >> j;\n\t\t\tteams[t-1]->submit(m, t, (j == 0));\n\t\t}\n\n\t\tsort(RALL(teams), comp);\n\n\t\tREP (i, teams.size()) {\n\t\t\tif (i > 0) {\n\t\t\t\tif (same(teams[i], teams[i-1])) {\n\t\t\t\t\tcout << '=';\n\t\t\t\t} else {\n\t\t\t\t\tcout << ',';\n\t\t\t\t}\n\t\t\t}\n\t\t\tcout << teams[i]->id;\n\t\t}\n\t\tcout << endl;\n\t}\n\n\treturn 0;\n}\n\n// vim: foldmethod=marker"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n#include <string>\n#include <vector>\n#include <cstdio>\n#include <cmath>\n#include <cstdlib>\n#include <stack>\n#include <queue>\n#include <set>\n#include <map>\n#include <utility>\n\n#define INF 999999999\n#define mod 1000000007\n\n#define rep(i,n) for(int i=0;i<int(n);i++)\n#define rrep(i,n) for(int i=(n);i>=0;i--)\n#define REP(i,a,b) for(int i=(a);i<int(b);i++)\n#define all(x) (x).begin(),x.end()\n#define pb push_back\n#define MOD(x) (x%(mod))\nusing namespace std;\n\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef vector<int> vi;\ntypedef pair<int,int> pi;\n\n/*---------------------------------------------------*/\n\nbool debug=false;\n\npair<pi,int> data[55];\nint miss[55][15];\nint M,T,P,R;\n\nvoid init(){\n  rep(i,55){\n    data[i].first.first=0;\n    data[i].first.second=0;\n    data[i].second=i+1;\n    rep(j,15){\n      miss[i][j]=0;\n    }\n  }\n}\n\nvoid solve(){\n  int m,t,p,j;\n  rep(i,R){\n    cin>>m>>t>>p>>j;\n    if(j==0&&miss[t-1][p]!=-1){\n      data[t-1].first.first++;\n      data[t-1].first.second-=(m+miss[t-1][p]*20);\n      miss[t-1][p]=-1;\n    }else if(miss[t-1][p]!=-1){\n      miss[t-1][p]++;\n    }\n  }\n\n  sort(data,data+T);reverse(data,data+T);\n  \n  if(debug){cout<<\"tema \";rep(i,T)cout<<data[i].second<<\" \";cout<<endl;}\n  if(debug){cout<<\"solv \";rep(i,T)cout<<data[i].first.first<<\" \";cout<<endl;}\n  if(debug){cout<<\"time \";rep(i,T)cout<<data[i].first.second<<\" \";cout<<endl;}\n  \n  cout<<data[0].second;\n  REP(i,1,T){\n    if(data[i].first.first==data[i-1].first.first&&data[i].first.second==data[i-1].first.second){\n      cout<<'='<<data[i].second;\n    }else{\n      cout<<','<<data[i].second;\n    }\n  }\n  cout<<endl;\n}\n\nint main(){\n\n  while(cin>>M>>T>>P>>R){\n    if(M==0&&T==0&&P==0&&R==0)break;\n    init();\n    solve();\n  }\n  \n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "//\n//  main.cpp\n//  AOJ1187\n//\n//  Created by aki33524 on 2014/07/07.\n//  Copyright (c) 2014年 aki33524. All rights reserved.\n//\n\n#include <iostream>\n#include <string.h>\n#include <algorithm>\nusing namespace std;\n\ntypedef struct {int m, t, p; bool ac;} Submit;\n\ntypedef struct _Team{\n    int solved, penalty[20], alltime, id;\n    \n    bool operator<(const _Team& right) const{\n        return (solved < right.solved) || (solved == right.solved && alltime > right.alltime);\n    }\n    bool operator==(const _Team& right) const{\n        return solved == right.solved && alltime == right.alltime;\n    }\n    \n} Team;\n\nint M, T, P, R;\n\nSubmit submits[3000];\nTeam teams[60];\n\nvoid solve(){\n    memset(teams, 0, sizeof(teams));\n    for(int t=0; t<T; t++)\n        teams[t].id = t+1;\n    \n    for(int r=0; r<R; r++){\n        Submit &submit = submits[r];\n        Team &team = teams[submit.t];\n        \n        if(submit.ac){\n            team.solved++;\n            team.alltime += team.penalty[submit.p] + submit.m;\n        }else{\n            team.penalty[submit.p] += 20;\n        }\n    }\n    \n    sort(teams, teams+T);\n    \n    for(int t=T-1; 0<=t; t--){\n        Team &team = teams[t];\n        if(0<t){\n            cout << team.id;\n            cout << (team==teams[t-1] ? \"=\" : \",\");\n        }else{\n            cout << team.id << endl;\n        }\n    }\n}\n\nint main(int argc, const char * argv[])\n{\n    while(cin>>M>>T>>P>>R, M|T|P|R){\n        for(int r=0; r<R; r++){\n            Submit &s = submits[r];\n            int m, t, p, j;\n            cin>>m>>t>>p>>j;\n            s.m = m;\n            s.t = t-1;\n            s.p = p-1;\n            s.ac = j==0;\n        }\n        solve();\n    }\n    \n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include\"bits/stdc++.h\"\nusing namespace std;\n#define FOR(i, a, b) for (int i = a; i < b; i++)\n#define REP(i, n) FOR(i, 0, n)\n#define RFOR(i, a, b) for (int i = (b - 1); i >= a; i--)\n#define RREP(i, n) RFOR(i, 0, n)\n#define rep(i, a, b) for (auto i = a; i < b; i++)\n#define rrep(i, a, b) for (auto i = a; i > b; i--)\n#define fs first\n#define sc second\n//typedef pair<int, int> P;\n\n\nint M, T, P, R;\n\n\nclass Team\n{\npublic:\n\tint id;\n\tint score = 0;\n\tint time = 0;\n\tvector<int> pena = vector<int>(P);\n\n\tbool operator<(const Team & a)const\n\t{\n\t\tif (score == a.score)\n\t\t{\n\t\t\tif (time == a.time)\n\t\t\t{\n\t\t\t\treturn id > a.id;\n\t\t\t}\n\t\t\treturn time < a.time;\n\t\t}\n\t\treturn score > a.score;\n\t}\n\n};\n\n\nbool solve()\n{\n\tcin >> M >> T >> P >> R;\n\tif (M == 0)return false;\n\n\tvector<Team> tL(T);\n\tREP(i, T)\n\t{\n\t\ttL[i].id = i + 1;\n\t}\n\n\tREP(i, R)\n\t{\n\t\tint m, t, p, j;\n\t\tcin >> m >> t >> p >> j;\n\t\t--t; --p;\n\t\tif (j == 0)\n\t\t{\n\t\t\ttL[t].score++;\n\t\t\ttL[t].time += m + tL[t].pena[p];\n\t\t}\n\t\telse\n\t\t{\n\t\t\ttL[t].pena[p] += 20;\n\t\t}\n\t}\n\n\tsort(tL.begin(), tL.end());\n\n\tcout << tL[0].id;\n\tFOR(i, 1, T)\n\t{\n\t\tif (tL[i].score == tL[i - 1].score && tL[i].time == tL[i - 1].time)\n\t\t{\n\t\t\tcout << \"=\";\n\t\t}\n\t\telse\n\t\t{\n\t\t\tcout << \",\";\n\t\t}\n\t\tcout << tL[i].id;\n\t}\n\tcout << endl;\n\n\treturn true;\n}\n\n\nint main()\n{\n\twhile (solve())\n\t{\n\n\t}\n\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n#include <map>\n#include <numeric>\n\nusing namespace std;\n\nstruct Team\n{\n\tint num;\n\tvector<int> corrects;\n\tvector<int> incorrects;\n\tint time;\n\n\tTeam(int p) : num(0), corrects(p, 0), incorrects(p, 0), time(0) {}\n\n\tbool operator < (const Team& t) const {\n\t\tint c = count(corrects.begin(), corrects.end(), 1);\n\t\tint tc = count(t.corrects.begin(), t.corrects.end(), 1);\n\n\t\tif (c == tc) {\n\t\t\tif (time == t.time) {\n\t\t\t\treturn num > t.num;\n\t\t\t}\n\t\t\treturn time < t.time;\n\t\t}\n\n\t\treturn c > tc;\n\t}\n};\n\nint main()\n{\n\twhile (1)\n\t{\n\t\tint M, T, P, R;\n\t\tcin >> M >> T >> P >> R;\n\n\t\tif (M == 0 && T == 0 && P == 0 && R == 0) { break; }\n\n\t\tvector<Team> teams(T, Team(P));\n\n\t\tfor (int i = 0; i < T; ++i) {\n\t\t\tteams[i].num = i + 1;\n\t\t}\n\n\t\tfor (int i = 0; i < R; ++i) {\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >> j;\n\n\t\t\t// judge is incorrect.\n\t\t\tif (j != 0) {\n\t\t\t\tteams[t - 1].incorrects[p - 1]++;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// judge is correct.\n\t\t\tteams[t - 1].corrects[p - 1] = 1;\n\n\t\t\tint time = m + teams[t - 1].incorrects[p - 1] * 20;\n\t\t\tteams[t - 1].time += time;\n\t\t}\n\n\t\tsort(teams.begin(), teams.end());\n\n\t\tint time = 0;\n\t\tfor (int i = 0; i < teams.size(); ++i) {\n\t\t\tauto&& t = teams[i];\n\n\t\t\tint c = count(t.corrects.begin(), t.corrects.end(), 1);\n\n\t\t\t//cout << t.num << \": \" << c << \" \" << t.time << endl;\n\t\t\t//continue;\n\n\t\t\tif (i == teams.size() - 1) {\n\t\t\t\tcout << t.num << endl;\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tauto&& nt = teams[i + 1];\n\n\t\t\tint nc = count(nt.corrects.begin(), nt.corrects.end(), 1);\n\n\t\t\tif (c == nc && nt.time == t.time) {\n\t\t\t\tcout << t.num << '=';\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcout << t.num << ',';\n\t\t\t}\n\t\t}\n\t}\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <utility>\n#include <vector>\n#include <tuple>\n#include <algorithm>\n\nusing namespace std;\n\ntypedef tuple<int, int, int, int> RECORD;\n\nclass Team\n{\npublic:\n\tint _id;\n\tint _time;\n\tint _solveNum;\n\tvector<int> _probs;\n\n\tvoid init(int i, int M, int P, int R)\n\t{\n\t\t_id = i;\n\t\t_time = 0;\n\t\t_solveNum = 0;\n\t\t_probs.resize(P+1, 0);\n\t}\n\n\tvoid in(int time, int probNum, int b)\n\t{\n\t\tif (!b){\n\t\t\t_time += _probs[probNum] * 20 + time;\n\t\t\t_solveNum++;\n\t\t}\n\t\telse{\n\t\t\t++_probs[probNum];\n\t\t}\n\t}\n\n\tvoid dump() const\n\t{\n\t\tcout << \"id=\" << _id;\n\t\tcout << \"time=\" << _time;\n\t\tcout << \"solvenum=\" << _solveNum;\n\t}\n\n\tbool operator==(const Team& r)\n\t{\n\t\tif ( this->_solveNum == r._solveNum && this->_time == r._time ){\n//\t\t\tthis->dump();\n//\t\t\tr.dump();\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n};\n\nint main()\n{\n\twhile(1){\n\t\tint M, T, P, R;\n\n\t\tcin >> M >> T >> P >> R;\n\t\tif ( M+T+P+R == 0)\n\t\t\tbreak;\n//\t\tif ( R <= 0)\n//\t\t\tcontinue;\n\n\t\tvector<Team> teams(T);\n\t\tfor(int i=0; i<T; ++i){\n\t\t\tteams[i].init(i+1, M, P, R);\n\t\t}\n\n\t\tfor(int i=0; i<R; ++i){\n\t\t\tint time, teamNum, probNum, ret;\n\t\t\tcin >> time >> teamNum >> probNum >> ret;\n\t\t\tteams[teamNum-1].in(time, probNum, ret);\n\t\t}\n\n\t\tsort(teams.begin(), teams.end(), [](Team t1, Team t2) -> bool{\n\t\t\tint a = t1._solveNum - t2._solveNum;\n\n\t\t\tif (a > 0)\n\t\t\t\treturn true;\n\n\t\t\tif (a < 0)\n\t\t\t\treturn false;\n\t\t\t\n\t\t\tif ( t1._time < t2._time)\n\t\t\t\treturn true;\n\n\t\t\tif (t1._time > t2._time)\n\t\t\t\treturn false;\n\n\t\t\tif (t1._id > t2._id)\n\t\t\t\treturn true;\n\n\t\t\treturn false;\n\t\t});\n\n\t\tauto it = teams.begin();\n\t\tcout << (*it)._id;\n\t\tfor(it += 1; it != teams.end(); ++it)\n\t\t{\n\t\t\tif ( *(it-1) == *(it) )\n\t\t\t\tcout << \"=\";\n\t\t\telse\n\t\t\t\tcout << \",\";\n\t\t\tcout << (*it)._id;\n\t\t}\n\t\tcout << endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\n#include<string.h>\n#define MAX 50\n#define MP \t11\nusing namespace std;\n\nstruct team{\n\tint id;\n\tint problems;\n\tint time;\n\tint pm[MP];\n\tint ep[MP];\n};\n\nbool mycomp(const team &t1,const team &t2)\n{\n\tif(t1.problems==t2.problems)return t1.time<t2.time;\n\treturn t1.problems>t2.problems;\n}\n\nint M,T,P,R;\nteam teams[MAX];\n\nint solve()\n{\n\tfor(int i=0;i<T;i++)\n\t{\n\t\tteams[i].id=i+1;\n\t\tfor(int j=1;j<=P;j++)\n\t\t{\n\t\t\tif(teams[i].ep[j]==0)continue;\n\t\t\telse teams[i].time+=teams[i].ep[j]+teams[i].pm[j];\n\t\t}\n\t}\n\tsort(teams,teams+P,mycomp);\n\tcout<<teams[0].id;\n\tfor(int i=1;i<T;i++)\n\t{\n\t\tif(teams[i].problems==teams[i-1].problems&&teams[i].time==teams[i-1].time)\n\t\t{\n\t\t\tcout<<\"=\";\n\t\t}else\n\t\t{\n\t\t\tcout<<\",\";\n\t\t}\n\t\tcout<<teams[i].id;\n\t}\n\tcout<<endl;\t\n}\n\nvoid input()\n{\n\tint m,t,p,j;\n\twhile(scanf(\"%d%d%d%d\",&M,&T,&P,&R))\n\t{\n\t\tif(M==0&&T==0&&P==0&&R==0)break;\n\t\tmemset(teams,0,sizeof(teams));\n\t\tfor(int i=0;i<R;i++)\n\t\t{\n\t\t\tscanf(\"%d%d%d%d\",&m,&t,&p,&j);\n\t\t\tif(j==0)\n\t\t\t{\n\t\t\t\tteams[t-1].problems++;\n\t\t\t\tteams[t-1].ep[p]=m;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tteams[t-1].pm[p]+=20;\n\t\t\t}\n\t\t}\n\t\tsolve();\n\t}\n}\n\nint main()\n{\n\tinput();\n\treturn 0;\n}\n\n\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\n#define FOR(i, a, b) for(long long int i=(a);i<=(b);i++)\n#define RFOR(i, a, b) for(long long int i=(a);i>=(b);i--)\n#define MOD 1000000007\n#define INF 1000000000 //2000000000\n#define LLINF 1000000000000000000 //9000000000000000000\n#define PI 3.14159265358979\n\nusing namespace std;\ntypedef long long int ll;\ntypedef pair< long long int, long long  int> P;\n\n\n\nint main(void) {\n\t\n\twhile (1) {\n\t\tint M, T, P, R;\n\t\tint tmp1, tmp2;\n\t\tint dp[51][11] = {};\n\t\tint pos = 50;\n\n\n\t\tcin >> M >> T >> P >> R;\n\t\tif (M == 0) {\n\t\t\tbreak;\n\t\t}\n\t\tvector<int>m(R), t(R), p(R), j(R), time(T+1, 0), count(T+1, 0);\n\t\tvector< pair<int, int> > res(T);\n\t\tFOR(i, 0, R - 1) {\n\t\t\tcin >> m[i] >> t[i] >> p[i] >> j[i];\n\t\t\tif (j[i] == 0) {\n\t\t\t\tcount[t[i]]++;\n\t\t\t\ttime[t[i]] += dp[t[i]][p[i]] * 20 + m[i];\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdp[t[i]][p[i]]++;\n\t\t\t}\n\t\t}\n\t\tFOR(i, 0, T - 1) {\n\t\t\tres[i].first = count[i + 1];\n\t\t\tres[i].second = i + 1;\n\t\t}\n\t\tsort(res.begin(), res.end());\n\n\t\tFOR(i, 0, T-2) {\n\t\t\tFOR(s, i + 1, T - 1) {\n\t\t\t\tif (res[i].first == res[s].first) {\n\t\t\t\t\tif (time[res[i].second] < time[res[s].second]) {\n\t\t\t\t\t\ttmp1 = res[i].second;\n\t\t\t\t\t\tres[i].second = res[s].second;\n\t\t\t\t\t\tres[s].second = tmp1;\n\t\t\t\t\t}\n\t\t\t\t\tif (time[res[i].second] == time[res[s].second]) {\n\t\t\t\t\t\tif (res[i].second > res[s].second) {\n\t\t\t\t\t\t\ttmp1 = res[i].second;\n\t\t\t\t\t\t\tres[i].second = res[s].second;\n\t\t\t\t\t\t\tres[s].second = tmp1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\n\t\tbool flag = true;\n\t\tbool check = true;\n\t\tif (T == 1) {\n\t\t\tcout << 1 << endl;\n\t\t}\n\t\telse {\n\t\t\tRFOR(i, T - 1, 1) {\n\t\t\t\tif (res[i].first != res[i - 1].first) {\n\t\t\t\t\tif (check == false) {\n\t\t\t\t\t\tcout << \"=\" << res[i].second;\n\t\t\t\t\t\tcheck = true;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tcheck = true;\n\t\t\t\t\tif (flag == true) {\n\t\t\t\t\t\tcout << res[i].second;\n\t\t\t\t\t\tflag = false;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tcout << \",\" << res[i].second;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (time[res[i].second] != time[res[i - 1].second]) {\n\t\t\t\t\tif (check == false) {\n\t\t\t\t\t\tcout << \"=\" << res[i].second;\n\t\t\t\t\t\tcheck = true;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tcheck = true;\n\t\t\t\t\tif (flag == true) {\n\t\t\t\t\t\tcout << res[i].second;\n\t\t\t\t\t\tflag = false;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tcout << \",\" << res[i].second;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif (flag == true) {\n\t\t\t\t\t\tflag = false;\n\t\t\t\t\t\tif (check == true) {\n\t\t\t\t\t\t\tcout << res[i].second;\n\t\t\t\t\t\t\tcheck = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tcout << \"=\" << res[i].second;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (check == true) {\n\t\t\t\t\t\t\tcout << \",\" << res[i].second;\n\t\t\t\t\t\t\tcheck = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tcout << \"=\" << res[i].second;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (res[1].first != res[0].first) {\n\t\t\t\tcout << \",\" << res[0].second;\n\t\t\t}\n\t\t\telse if (time[res[1].second] != time[res[0].second]) {\n\t\t\t\tcout << \",\" << res[0].second;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcout << \"=\" << res[0].second;\n\t\t\t}\n\n\t\t\tcout << endl;\n\t\t}\n\t\t\n\t}\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <cmath>\n#include <cstdio>\n#include <deque>\n#include <iomanip>\n#include <iostream>\n#include <map>\n#include <queue>\n#include <set>\n#include <stack>\n#include <unordered_map>\n#include <unordered_set>\n#include <utility>\n#include <vector>\nusing std::cerr;\nusing std::cin;\nusing std::cout;\nusing std::endl;\n\nstruct Team{\n  int team_id=-1;\n  int wa_count[11]={};\n  int last_ac_time=9999;\n  int penalty_time=9999;\n  int result_time=999999;\n  int ac_count=-1;\n  bool operator==(const Team& another)const{\n    return ac_count==another.ac_count&&result_time==another.result_time;\n  }\n};\n\nbool Comp(const Team& a,const Team& b){\n  if(a.ac_count!=b.ac_count){\n    return a.ac_count>b.ac_count;\n  }else if(a.result_time!=b.result_time){\n    return a.result_time<b.result_time;\n  }else{\n    return a.team_id>b.team_id;\n  }\n}\n\n\nvoid Solve(int m,int t,int p,int r){\n  std::vector<Team> team(t+1);\n\n  for(int i=1;i<=t;i++){\n    team[i].team_id=i;\n    team[i].last_ac_time=0;\n    team[i].penalty_time=0;\n    team[i].result_time=0;\n    team[i].ac_count=0;\n  }\n  for(int i=0;i<r;i++){\n    int mk,tk,pk,jk;\n    cin>>mk>>tk>>pk>>jk;\n    Team& tgt=team[tk];\n    if(jk==0){\n      //AC\n      tgt.last_ac_time=mk;\n      tgt.penalty_time+=tgt.wa_count[pk]*20;\n      tgt.ac_count++;\n    }else{\n      //WA\n      tgt.wa_count[pk]++;\n    }\n  }\n\n  for(int i=1;i<=t;i++){\n    team[i].result_time=team[i].penalty_time+team[i].last_ac_time;\n  }\n\n  std::sort(team.begin(),team.end(),Comp);\n\n  for(int i=0;i<t-1;i++){\n    if(team[i]==team[i+1]){\n      cout<<team[i].team_id<<\"=\";\n    }else{\n      cout<<team[i].team_id<<\",\";\n    }\n  }\n  cout<<team[t-1].team_id<<endl;\n\n\n}\n\n\n\nint main(void) {\n  cout << std::fixed << std::setprecision(10);\n  cin.tie(0);\n  std::ios::sync_with_stdio(false);\n\n\n  while(true){\n    int m,t,p,r;\n    cin>>m>>t>>p>>r;\n    if(m==0&&t==0&&p==0&&r==0){\n      break;\n    }\n    Solve(m,t,p,r);\n\n  }\n\n\n\n\n  return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstdio>\n#include<vector> \n#include<algorithm>\nusing namespace std;\n\nclass Team{\npublic:\n  int num;\n  int solve;\n  int time;\n  vector<int> plist;\n  Team():num(0),solve(0),time(0),plist(vector<int>(11,0)){}\n};\n\nbool compare_num(const Team& left, const Team& right){\n  return left.num > right.num;\n}\nbool compare_solve(const Team& left, const Team& right){\n  return left.solve > right.solve;\n}\nbool compare_time(const Team& left, const Team& right){\n  return left.time < right.time;\n}\n\nint main(){\n  int M, T, P, R;\n  int m, t, p, j;\n  vector<Team> team;\n  for(;;){\n    scanf(\"%d %d %d %d\", &M, &T, &P, &R);\n    if( M == 0 && T == 0 && P == 0 && R == 0)\n      return 0;\n    for(int i = 0; i < T; i++){  \n      Team temp;\n      temp.num = i+1;\n      team.push_back(temp);\n    }\n    for(int i = 0; i < R; i++){\n      scanf(\"%d %d %d %d\", &m, &t, &p, &j);\n      if(j != 0)\n\tteam.at(t-1).plist.at(p) += 1;\n      else{\n\tteam.at(t-1).solve += 1; \n\tteam.at(t-1).time += m;\n\tteam.at(t-1).time += team.at(t-1).plist.at(p) * 20;\n      }\n    }\n    stable_sort(team.begin(),team.end(),compare_num);\n    stable_sort(team.begin(),team.end(),compare_time);\n    stable_sort(team.begin(),team.end(),compare_solve);\n    cout << team.at(0).num;\n    for(int i = 1; i < T; i++){\n      if(team.at(i-1).solve == team.at(i).solve && team.at(i-1).time == team.at(i).time)\n\tcout << \"=\";\n      else\n\tcout << \",\";\n      cout << team.at(i).num;\n    }\n    cout << endl;\n    team.clear();\n  }\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\nusing namespace std;\n\nint main(){\n    while(1){\n        int M,T,P,R;\n        cin>>M>>T>>P>>R;\n\n        if(M==0&&T==0&&P==0&&R==0){\n            break;\n        }\n\n        int CP[50],TT[50],PT[50][10];\n        for(int i=0;i<T;i++){\n            CP[i]=TT[i]=0;\n            for(int j=0;j<P;j++){\n                PT[i][j] = 0;\n            }\n        }\n\n        for(int i=0;i<R;i++){\n            int m,t,p,j;\n            cin>>m>>t>>p>>j;\n\n            if(j==0){\n                CP[t-1]++;\n                TT[t-1]+=(m+PT[t-1][p-1]);\n            }\n            else{\n                PT[t-1][p-1]+=20;\n            }\n        }\n\n        int tnow,tpre=-1;\n        bool flg[50];\n        for(int i=0;i<T;i++)\n            flg[i]=0;\n\n        for(int i=0;i<T;i++){\n            tnow=-1;\n            for(int j=0;j<T;j++){\n                if(flg[j]){\n                    continue;\n                }\n\n                if(tnow==-1){\n                    tnow=j;\n                }\n                else{\n                    if(CP[j]>CP[tnow]||(CP[j]==CP[tnow]&&TT[j]<=TT[tnow])){\n                        tnow=j;\n                    }\n                }\n            }\n\n            if(tpre!=-1){\n                if(CP[tnow]==CP[tpre]&&TT[tnow]==TT[tpre]){\n                    cout << '=';\n                }\n                else{\n                    cout << ',';\n                }\n            }\n            cout<<tnow+1;\n\n            flg[tnow]=1;\n            tpre=tnow;\n        }\n        cout<<endl;\n    }\n\n    return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <queue>\n#include <utility>\n#include <algorithm>\n\nusing namespace std;\n\ntypedef pair<long, int> pr; // first: pts, second: team number;\n\nint penalty[50][10]; // [team][problem number]\npr pts[50];\npriority_queue<int> list;\nint m, t, p, r;\n\nint printout(int n, long pre) {\n\tif (n < t && pre == pts[n].first) {\n\t\tlist.push(pts[n].second);\n\t\treturn printout(n+1, pre);\n\t} else {\n\t\tint size = list.size();\n\t\tif (size == 0) return 1;\n\t\twhile (true) {\n\t\t\tcout << list.top();\n\t\t\tlist.pop();\n\t\t\tif (list.empty()) break;\n\t\t\tcout << \"=\";\n\t\t}\n\t\treturn size;\n\t}\n\n\tcout << \"ERR\" << endl;\n\treturn 0;\n}\n\nint main() {\n\twhile (true) {\n\t\tcin >> m >> t >> p >> r;\n\t\tif (m == 0 && t == 0 && p == 0 && r == 0) break;\n\n\t\tfor (int i = 0; i < t; ++i) {\n\t\t\tpts[i].second = i+1;\n\t\t\tpts[i].first = 0;\n\t\t\tfor (int j = 0; j < p; ++j)\n\t\t\t\tpenalty[i][j] = 0;\n\t\t}\n\t\tfor (int i = 0; i < r; ++i) {\n\t\t\tint a, b, c, d;\n\t\t\tcin >> a >> b >> c >> d;\n\t\t\tif (d == 0) {\n\t\t\t\tpts[b-1].first += -10000 + a + penalty[b-1][c-1];\n\t\t\t} else {\n\t\t\t\tpenalty[b-1][c-1] += 20;\n\t\t\t}\n\t\t}\n\n\t\tsort(pts, pts + t);\n\t\tint i = 0;\n\t\twhile (true) {\n\t\t\ti += printout(i, pts[i].first);\n\t\t\tif (i >= t)\n\t\t\t\tbreak;\n\t\t\tcout << \",\";\n\t\t}\n\t\tcout << endl;\n\t}\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <fstream>\n#include <cstdio>\n#include <cmath>\n#include <vector>\n#include <cstring>\n#include <string>\n#include <set>\n#include <map>\n#include <stack>\n#include <queue>\n#include <algorithm>\nusing namespace std;\n \n#define REP(i,n) for(int i=0; i<n; ++i)\n#define FOR(i,a,b) for(int i=a; i<=b; ++i)\n#define FORR(i,a,b) for (int i=a; i>=b; --i)\n#define pi M_PI\n \ntypedef long long ll;\ntypedef vector<int> VI;\ntypedef vector<ll> VL;\ntypedef vector<VI> VVI;\ntypedef pair<int,int> P;\ntypedef pair<ll,ll> PL;\n\nint main() {\n    int m, t, p, r;\n    while (cin >> m >> t >> p >> r && m){\n        vector<pair<P, int> > a(t);\n        REP(i,t) a[i].second = -(i+1);\n        int w[50][10] = {};\n        while (r--){\n            int x, y, z, j;\n            cin >> z >> x >> y >> j;\n            x--;\n            y--;\n            if (j != 0){\n                w[x][y]++;\n            }else{\n                a[x].first.first--;\n                a[x].first.second += z + 20 * w[x][y];\n            }\n        }\n        sort(a.begin(), a.end());\n        cout << -a[0].second;\n        FOR(i,1,t-1){\n            if (a[i].first == a[i-1].first) cout << \"=\";\n            else cout << \",\";\n            cout << -a[i].second;\n        }\n        cout << endl;\n    }\n\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\nusing namespace std;\n\nint main()\n{\n\tint x, k, y, t;\n\twhile (cin >> x >> k)\n\t{\n\t\tt = 1, y = 0;\n\t\twhile (k)\n\t\t{\n\t\t\tif (x % 2 == 0)y += t*(k % 2), k /= 2;\n\t\t\tx /= 2, t *= 2;\n\t\t}\n\t\tcout << y << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\n#include<cstring>\n#include<vector>\n#include<map>\nusing namespace std;\ntypedef pair<int,int> pii;\ntypedef pair<pii,int> tri;\n\nint main(){\n  int M,T,P,R;\n  int m,t,p,x;\n  int wa[55][55], ac[55];\n  int sum[55];\n\n  while(cin >> M >> T >> P >> R, M){\n    memset(wa,0,sizeof(wa));\n    memset(ac,0,sizeof(ac));\n    memset(sum,0,sizeof(sum));\n\n    for(int i=0;i<R;i++){\n      cin >> m >> t >> p >> x;\n      if(x==0)sum[t] += m + wa[t][p]*20, ac[t]++;\n      else wa[t][p]++;\n    }\n\n    vector<tri> rank;\n    for(int i=1;i<=T;i++){\n      rank.push_back(tri(pii(-ac[i],sum[i]),-i));\n    }\n\n    sort(rank.begin(),rank.end());\n\n    for(int i=0;i<T;i++){\n      cout << -rank[i].second;\n      if(i+1==T)cout << endl;\n      else if(rank[i].first == rank[i+1].first)cout << \"=\";\n      else cout << \",\";\n    }\n  }\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define rep(i,j,k) for(int i=(int)j;i<(int)k;i++)\n#define itrep(i,x) for(auto i=(x).begin(); i!=(x).end();i++)\n#define Sort(x) sort((x).begin(),(x).end())\n#define all(x) (x).begin(),(x).end()\n#define fi first\n#define se second\n#define vi vector<int>\n#define INF (int)1e9\n#define INFL 1e18\n#define MOD 1000000007\n#define pb push_back\n#define MP make_pair\n#define PI 3.1415926535\ntypedef long long int ll;\n//typedef std::pair<int,int> P;\nint D=1;\nint dx[4]={0,1,0,-1},dy[4]={-1,0,1,0};\n\nusing namespace std;\n\nint main(){\n    int M,T,PP,R;\n    while(cin>>M>>T>>PP>>R && M){\n        vector<int> tim(T,0);\n        vector<vector<bool>> solve(T,vector<bool>(PP,false));\n        vector<vector<int>> WA(T,vector<int>(PP,0));\n    \n        rep(i,0,R){\n            int m,t,p,r;\n            cin>>m>>t>>p>>r;\n            t--; p--; \n            if(r==0){\n                solve[t][p]=true;\n                tim[t]+=m;   \n            }\n            else WA[t][p]++;\n        }\n    \n        vector<int> solve_count(T,0);\n        rep(i,0,T){\n            rep(j,0,PP){\n                if(solve[i][j]){\n                    solve_count[i]++;\n                    tim[i]+=WA[i][j]*20;   \n                }\n            }\n        }\n        vector<pair<int,pair<int,int>>> rank;\n        rep(i,0,T){\n            rank.pb(MP(-solve_count[i],MP(tim[i],-(i+1))));\n        }\n        Sort(rank);\n        \n        /*rep(i,0,T){\n            cout<<rank[i].fi<<\" \"<<rank[i].se.fi<<\" \"<<-rank[i].se.se<<endl;\n        }*/\n    \n        rep(i,0,T){\n            if(i)cout<<\",\";\n            cout<<-rank[i].se.se;\n            while(i+1<T && rank[i].fi==rank[i+1].fi && rank[i].se.fi==rank[i+1].se.fi){\n                i++;\n                cout<<\"=\";\n                cout<<-rank[i].se.se;\n            }\n        }\n        cout<<endl;\n    }\n    \n    return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#define N 2001\nusing namespace std;\nstruct team{\n  int tnum;\n  int correct;\n  int time;\n};\nint main(){\n  int m,t,p,r,im[N],it[N],ip[N],ij[N],incorrect,i,j;\n  struct team data[51];\n  while(1){\n    cin >> m >> t >> p >> r;\n    if(m==0&&t==0&&p==0&&r==0) break;\n    for(i=0;i<r;i++) cin >> im[i] >> it[i] >> ip[i] >> ij[i];\n    for(i=1;i<=t;i++){\n      data[i].tnum=i;\n      data[i].correct=0;\n      data[i].time=0;\n    }\n    for(i=0;i<r;i++){\n      if(ij[i]==0){\n\tdata[it[i]].correct++;\n      \tincorrect=0;\n\tfor(j=0;j<i;j++){\n\t  if(it[i]==it[j]&&ip[i]==ip[j]) incorrect++;\n\t}\n\tdata[it[i]].time=data[it[i]].time+incorrect*20+im[i];\n      }\n    }\n    for(i=0;i<=t;i++){\n      for(j=2;j<=t;j++){\n\tif(data[j].tnum>data[j-1].tnum) swap(data[j],data[j-1]);\n      }\n    }\n    for(i=0;i<=t;i++){\n      for(j=2;j<=t;j++){\n\tif(data[j].time<data[j-1].time) swap(data[j],data[j-1]);\n      }\n    }\n    for(i=0;i<=t;i++){\n      for(j=2;j<=t;j++){\n\tif(data[j].correct>data[j-1].correct) swap(data[j],data[j-1]);\n      }\n    }\n    for(i=1;i<t;i++){\n      cout << data[i].tnum;\n      if(data[i].correct==data[i+1].correct&&data[i].time==data[i+1].time)\n\tcout << '=';\n      else cout << ',';\n      if(i==t-1) cout << data[i+1].tnum;\n    }\n    cout << endl;\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "\\\n#include <bits/stdc++.h>\n\n#define rep(i, from, to) for (int i = from; i < to; ++i)\n#define REP(i, from, to) for (int i = from; i <= to; ++i)\n#define dbp(x) cout<<#x<<\": \"<<x<<endl;\n#define dbp2(x,y) cout<<#x<<\",\"<<#y<<\": \"<<x<<\",\"<<y<<endl;\n#define dbp3(x,y,z) cout<<#x<<\",\"<<#y<<\",\"<<#z<<\": \"<<x<<\",\"<<y<<\",\"<<z<<endl;\n#define dbp4(w,x,y,z) cout<<#w<<\",\"<<#x<<\",\"<<#y<<\",\"<<#z<<\": \"<<w<<\",\"<<x<<\",\"<<y<<\",\"<<z<<endl;\n\nusing namespace std;\nstruct team {\n\tint total, p, id;\n\tint miss[11], isOk[11], time[11];\n\tteam() {\n\t\tfill(miss, miss + 11, 0);\n\t\tfill(isOk, isOk + 11, 0);\n\t\tfill(time, time + 11, 0);\n\t\ttotal = 0;\n\t\tp = 0;\n\t\tid = 0;\n\t}\n};\n\nbool cmp(const team &t1, const team &t2) {\n\tif (t1.p > t2.p)\n\t\treturn true;\n\tif (t1.p < t2.p)\n\t\treturn false;\n\tif (t1.total > t2.total)\n\t\treturn true;\n\tif (t1.total < t2.total)\n\t\treturn false;\n\tif (t1.id > t2.id)\n\t\treturn true;\n\treturn false;\n}\n\nbool cmp2(const team &t1, const team &t2) {\n\tif (t1.p == t2.p) {\n\t\tif (t1.total == t2.total) {\n\t\t\treturn t1.id < t2.id;\n\t\t} else {\n\t\t\treturn t1.total > t2.total;\n\t\t}\n\t} else {\n\t\treturn t1.p < t2.p;\n\t}\n}\n\nbool eq(team t1, team t2) {\n\treturn t1.p == t2.p && t1.total == t2.total;\n}\nteam data[51];\n\nvoid solve() {\n\tint M, T, P, R, m, t, p, j;\n\n\twhile (cin >> M >> T >> P >> R, M || T || P || R) {\n\t\tfill(data, data + 51, team());\n\t\trep(i, 0, R)\n\t\t{\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tif (j == 0) {\n\t\t\t\tdata[t].isOk[p] = 1;\n\t\t\t\tdata[t].time[p] = m;\n\t\t\t\tdata[t].p++;\n\t\t\t} else {\n\t\t\t\tdata[t].miss[p]++;\n\t\t\t}\n\t\t}\n\n\t\tREP(i, 1, T)\n\t\t{\n\t\t\tdata[i].id = i;\n\t\t\tREP(j, 1, P)\n\t\t\t{\n\t\t\t\tdata[i].total += data[i].isOk[j] * data[i].time[j]\n\t\t\t\t\t\t+ data[i].isOk[j] * data[i].miss[j] * 20;\n\n\t\t\t}\n\t\t\tteam di = data[i];\n//\t\t\tdbp3(di.id, di.p, di.total);\n\t\t}\n\t\tsort(data + 1, data + T + 1, cmp2);\n\t\treverse(data + 1, data + T + 1);\n\t\tteam before = data[1];\n\t\tcout << data[1].id;\n\t\tREP(i, 2, T)\n\t\t{\n\t\t\tteam now = data[i];\n\t\t\tif (eq(before, now))\n\t\t\t\tcout << \"=\" << now.id;\n\t\t\telse\n\t\t\t\tcout << \",\" << now.id;\n\t\t\tbefore = now;\n\t\t}\n\t\tcout << endl;\n\t}\n}\n\nint main() {\n\tsolve();\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <utility>\n#include <algorithm>\n#include <tuple>\nusing namespace std;\n\nint main()\n{\n\tint M, T, P, R, m, t, p, j;\n\twhile (cin >> M >> T >> P >> R, M || T || P || R) {\n\t\tvector< vector< pair<int, int> > > data(T + 1, vector< pair<int, int> >(P + 1, pair<int, int>(0,0)));\n\t\tvector< tuple<int, int, int> > score(T + 1);\n\t\tfor (int i = 0; i < R; i++) {\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tif (j == 0) {\n\t\t\t\tdata[t][p].first = m + data[t][p].second * 20;\n\t\t\t\tget<0>(score[t])--;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdata[t][p].second++;\n\t\t\t}\n\t\t}\n\t\tfor (int i = 1; i <= T; i++) {\n\t\t\tint sco = 0,pena = 0;\n\t\t\tfor (int j = 0; j <= P; j++) {\n\t\t\t\tif (data[i][j].first) {\n\t\t\t\t\tsco--;\n\t\t\t\t\tpena += data[i][j].first;\n\t\t\t\t}\n\t\t\t}\n\t\t\tscore[i] = tuple<int, int, int>(get<0>(score[i]),pena,-i);\n\t\t}\n\t\tsort(score.begin() + 1, score.end());\n\t\ttuple<int, int, int> temp = score[1];\n\t\tcout << -get<2>(score[1]);\n\t\tfor (int i = 2; i <= T; i++) {\n\t\t\tif (get<0>(temp) == get<0>(score[i]) && get<1>(temp) == get<1>(score[i])) {\n\t\t\t\tcout << \"=\";\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcout << \",\";\n\t\t\t}\n\t\t\tcout << -get<2>(score[i]);\n\t\t\ttemp = score[i];\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#define _CRT_SECURE_NO_WARNINGS\n\n#include<fstream>\n#include<iostream>\n#include <stdio.h>\n#include <functional>\n#include<string>\n#include<iomanip>\n#include<list>\n#include<math.h>\n#include<stack>\n#include<queue>\n#include<vector>\n#include<algorithm>\n#include<utility>\n\nusing namespace std;\n\nstring x(string s, const string cs, const string se) {\n\tint pos = 0;\n\twhile ((pos = s.find_first_of(se)) != string::npos) {\n\t\ts.replace(pos, 1, cs);\n\t}\n\treturn s;\n}\n\nstring y(string a) {\n\tint pos4 = 0, pos9 = 0;\n\ta = x(a, \"3\", \"5\");\n\ta = x(a, \"5\", \"6\");\n\ta = x(a, \"6\", \"7\");\n\ta = x(a, \"7\", \"8\");\n\tint pos = a.length();\n\tif ((pos4 = a.find_first_of(\"4\")) != string::npos && (pos9 = a.find_first_of(\"9\")) != string::npos)\n\t{\n\t\tif (pos4 > pos9) {//4>9\n\t\t\ta = a.replace(pos9, 1, \"7\");\n\t\t\tpos = pos9 + 1;\n\t\t}\n\t\telse {\n\t\t\ta = a.replace(pos4, 1, \"3\");\n\t\t\tpos = pos4 + 1;\n\t\t}\n\t}\n\telse if ((pos4 = a.find_first_of(\"4\")) != string::npos) {\n\t\ta = a.replace(pos4, 1, \"3\");\n\t\tpos = pos4 + 1;\n\t}\n\telse if ((pos9 = a.find_first_of(\"9\")) != string::npos) {\n\t\ta = a.replace(pos9, 1, \"7\");\n\t\tpos = pos9 + 1;\n\t}\n\twhile (pos != a.length()) {\n\t\ta = a.replace(pos, 1, \"7\");\n\t\tpos++;\n\t}\n\treturn a;\n}\n\nint n;\nint m;\nint aji[100000];\n\nint saiki(){\n\treturn 0;\n}\n\nint main(){\n\tint m, t, p, r;\n\twhile (cin >> m >> t >> p >> r && !(m == 0 && t == 0 && p == 0 && r == 0)){\n\t\tvector<pair<int, pair<int, int>>> juni; // 正解数 時間 チーム名(答えのためのvector)\n\t\tint teamscore[50]; // 各チームのスコア\n\t\tint teamsecond[50]; // 各チームの時間\n\t\tint teamincorr[50][2000]; // 各チーム各問題の間違えた回数\n\t\tint teamincorrcnt[50]; // 各チームの正解した問題の間違えた回数\n\t\tfor (int i = 0; i < 50; i++) {\n\t\t\tteamscore[i] = 0;\n\t\t\tteamsecond[i] = 100000;\n\t\t\tteamincorrcnt[i] = 0;\n\t\t\tfor (int j = 0; j < 2000; j++) {\n\t\t\t\tteamincorr[i][j] = 0;\n\t\t\t}\n\t\t}\n\t\tfor (int i = 0; i < r; i++) {\n\t\t\tint mk, tk, pk, jk;\n\t\t\tcin >> mk >> tk >> pk >> jk;\n\t\t\tif (jk == 0) { // 正解\n\t\t\t\tteamscore[tk - 1]++; // 正解数を増やす\n\t\t\t\tteamincorrcnt[tk - 1] += teamincorr[tk - 1][pk];\n\t\t\t\tteamsecond[tk - 1] = 100000 - (mk + 20 * teamincorrcnt[tk - 1]);\n\t\t\t}\n\t\t\telse { // 間違い\n\t\t\t\tteamincorr[tk - 1][pk]++;\n\t\t\t}\n\t\t}\n\t\tfor (int i = 0; i < t; i++) {\n\t\t\tjuni.push_back(make_pair(teamscore[i], make_pair(teamsecond[i], i + 1)));\n\t\t}\n\t\tsort(juni.begin(), juni.end());\n\n\t\tint score = -1;\n\t\tint jikan = -1;\n\t\tfor (int i = t - 1; i >= 0; i--) {\n\t\t\tif (i != t - 1) {\n\t\t\t\tif (score == juni[i].first && jikan == juni[i].second.first) {\n\t\t\t\t\tcout << \"=\";\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tcout << \",\";\n\t\t\t\t}\n\t\t\t}\n\t\t\tcout << juni[i].second.second;\n\t\t\tscore = juni[i].first;\n\t\t\tjikan = juni[i].second.first;\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <vector>\n#include <list>\n#include <map>\n#include <set>\n#include <stack>\n#include <queue>\n#include <deque>\n#include <algorithm>\n#include <utility>\n#include <functional>\n#include <sstream>\n#include <iostream>\n#include <cstdio>\n#include <cmath>\n#include <cstdlib>\n#include <cctype>\n#include <string>\n#include <cstring>\n#include <ctime>\n#include <climits>\n#include <cassert>\n#include <memory>\n#include <time.h>\nusing namespace std;\ninline int toInt(string s) {int v; istringstream sin(s);sin>>v;return v;}\ntemplate<class T> inline string toString(T x) {ostringstream sout;sout<<x;return sout.str();}\ntypedef vector<int> vi;\ntypedef vector<vi> vvi;\ntypedef vector<string> vs;\ntypedef pair<int, int> pii;\ntypedef long long ll;\n#define ALL(a) (a).begin(),(a).end()\n#define RALL(a) (a).rbegin(),(a).rend()\n#define EXIST(s,e) ((s).find(e)!=(s).end())\n#define FOR(i,a,b) for(int i=(a);i<(b);++i)\n#define REP(i,n) FOR(i,0,n)\nconst double EPS = 1e-9;\nconst double PI  = acos(-1.0);\n\nstruct team{\n\tint ac,penalty,id;\n\tvi penalties;\n//\tteam(int ac,int penalty,int id):ac(ac),penalty(penalty),id(id){}\n\tteam(int numP):penalties(vi(numP)),ac(0),penalty(0){}\n\tbool operator<(const team &other)const{\n\t\tif(ac==other.ac){\n\t\t\tif(penalty==other.penalty){\n\t\t\t\treturn id>other.id;\n\t\t\t}else{\n\t\t\t\treturn penalty<other.penalty;\n\t\t\t}\n\t\t}else{\n\t\t\treturn ac>other.ac;\n\t\t}\n\t}\n\tbool same(const team &other) const{\n\t\treturn(ac==other.ac&&penalty==other.penalty);\n\t}\n};\n\n\nint main(){\n\tint M,T,P,R;\n\twhile(cin>>M>>T>>P>>R,M|T|P|R){\n\t\tvector<team> teams(T,team(P));\n\t\tREP(i,T){\n\t\t\tteams[i].id=i+1;\n\t\t}\n\t\tREP(i,R){\n\t\t\tint m,t,p,j;\n\t\t\tcin>>m>>t>>p>>j;\n\t\t\tt--;p--;\n\t\t\tif(j==0){\n\t\t\t\tteams[t].ac++;\n\t\t\t\tteams[t].penalty+=teams[t].penalties[p]+m;\n\t\t\t}else{\n\t\t\t\tteams[t].penalties[p]+=20;\n\t\t\t}\n\t\t}\n\t\tsort(ALL(teams));\n\t\tcout<<teams[0].id;\n\t\tFOR(i,1,T){\n\t\t\tif(teams[i-1].same(teams[i])){\n\t\t\t\tcout<<\"=\";\n\t\t\t}else{\n\t\t\t\tcout<<\",\";\n\t\t\t}\n\t\t\tcout<<teams[i].id;\n\t\t}\n\t\tcout<<endl;\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <stack>\n#include <utility>\n#include <algorithm>\n\nusing namespace std;\ntypedef pair<int,int> mp;\n\nint main(){\n    while(true){\n        int m,t,p,r;\n        cin >> m >> t >> p >> r;\n        if(m==0)break;\n        vector<vector<int> > score(t,vector<int>(p,-1));\n        for(int i=0;i<r;i++){\n            int m1,t1,p1,j;\n            cin >> m1 >> t1 >> p1 >> j;\n            t1--;\n            p1--;\n            if(j!=0){\n                score[t1][p1]-=20;\n            }\n            else{\n                if(score[t1][p1]<-1){\n                    score[t1][p1]=m1-score[t1][p1]-1;\n                }\n                else{\n                    score[t1][p1]=m1;\n                }\n            }\n        }\n        vector<pair<mp,int> > pr(t);\n        pair<mp,int> temp;\n        for(int i=0;i<t;i++){\n            temp.first.first=0;\n            temp.first.second=0;\n            temp.second=-(i+1);\n            pr[i]=temp;\n            for(int j=0;j<p;j++){\n                if(score[i][j]>=0){\n                    temp.first.first--;\n                    temp.first.second+=score[i][j];\n                    pr[i]=temp;\n                }\n            }\n        }\n        sort(pr.begin(),pr.end());\n        for(int i=0;i<t;i++){\n            cout << -pr[i].second;\n            if(i<t-1 && pr[i].first==pr[i+1].first)cout << '=';\n            else if(i!=t-1)cout << ',';\n        }\n        cout << endl;\n\n    }\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstdio>\n#include <cstdlib>\n#include <cmath>\n#include <cstring>\n#include <vector>\n#include <algorithm>\n#include <set>\n#include <queue>\n#include <map>\n#include <climits>\nusing namespace std;\n\n#define REP(i,n) for(int i=0; i<(int)(n); i++)\n#define RREP(i,n) for(int i=(int)n-1; i>=0; i--)\n#define FOR(i,c) for(__typeof((c).begin())i=(c).begin();i!=(c).end();++i)\n#define RFOR(i,c) for(__typeof((c).rbegin())i=(c).rbegin();i!=(c).rend();++i)\n#define ALL(c) (c).begin(), (c).end()\n\ntypedef long long int ll;\ntypedef pair<int, int> pii;\ntypedef pair<int, pair<int, int> > pipii;\ntypedef vector<int> vi;\n\nclass data{\npublic:\n\tint team;\n\tint solve;\n\tint miss_pro[11];\n\tll time;\n\t\n\tdata(){\n\t\tsolve = 0;\n\t\tREP(i, 11) miss_pro[i] = 0;\n\t\ttime = 0;\n\t}\n\tvoid c(int t, int pro){\n\t\tsolve++;\n\t\ttime += t + miss_pro[pro] * 20;\n\t}\n\t\n\tvoid w(int pro){\n\t\tmiss_pro[pro]++;\n\t}\n\t\n\tvoid print(data d){\n\t\tif(solve == d.solve && time == d.time) cout << \"=\";\n\t\telse cout << \",\";\n\t\tcout << team;\n\t}\n\t\n\tbool operator < (const data& rdata)const{\n\t\tif(solve != rdata.solve) return solve > rdata.solve;\n\t\telse if(time != rdata.solve) return time < rdata.time;\n\t\telse return team > rdata.team;\n\t}\n};\n\n\nint main(void){\n\tint M, T, P, R;\n\twhile(cin >> M >> T >> P >> R, M){\n\t\tvector<data> teams(T);\n\t\tREP(i,teams.size()) teams[i].team = i+1;\n\t\tREP(i,R){\n\t\t\tint m, t, p, j;\n\t\t\tcin >> m >> t >> p >> j;\n\t\t\tt--;\n\t\t\tif(!j) teams[t].c(t, p);\n\t\t\telse teams[t].w(p);\n\t\t}\n\t\tsort(ALL(teams));\n\t\tcout << teams[0].team;\n\t\tREP(i,teams.size()){\n\t\t\tif(!i) continue;\n\t\t\tteams[i].print(teams[i-1]);\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "Haskell",
    "code": "import Data.List\nimport Data.Ord\nimport Data.Maybe\n\ndata Record = Record {tid::Int, p::Int, score::Int}\ninstance Eq Record where\n (==) (Record tid1 p1 t1) (Record tid2 p2 t2) = p1 == p2 && t1 == t2\ninstance Ord Record where\n (<=) (Record tid1 p1 t1) (Record tid2 p2 t2) = \n  (p1 > p2) || (p1 == p2 && t1 < t2) || (p1 == p2 && t1 == t2 && tid1 > tid2)\ninstance Show Record where\n show (Record tid _ _) = show tid\n\nmain = interact $ unlines . map (show' . group . sort . judge) . read' . lines\n where\n  read' (\"0 0 0 0\":_) = []\n  read' (mtpr:xs) = (m,t,p,logs) : read' xs'\n   where\n    [m,t,p,r] = map read (words mtpr)\n    (logs',xs') = splitAt r xs\n    logs = map (map read . words) logs'\n  show' [rs] = wordsBy \"=\" (map show . reverse . sortBy (comparing tid) $ rs)\n  show' (rs:rss) = wordsBy \"=\" (map show . reverse . sortBy (comparing tid) $ rs) ++ \",\" ++ show' rss\n\nwordsBy _ [] = []\nwordsBy _ [x] = x\nwordsBy punc (x:xs) = x ++ punc ++ wordsBy punc xs\n\njudge (m,t,p,logs) = map rec (foldl' total initr logs)\n where\n  rec (t,pr,s,_) = Record t (length pr) s\n  fst' (x,_,_,_) = x\n  initr = [(tid,[],0,replicate p 0) | tid<-[1..t]]\n  total acc [time,tid,pid,stat]\n   | stat /= 0 = let (t,pr,s,pe) = query tid acc in (t,pr,s,wrong pe) : (filter ((/=tid).fst') acc)\n   | otherwise = let (t,pr,s,pe) = query tid acc in (t,pid:pr,score pe s,pe) : (filter ((/=tid).fst') acc)\n   where\n    score pe s' = s' + time + (pe!!(pid-1)*20)\n    wrong = map (\\(i,w) -> if i==pid then w+1 else w) . zip [1..]\n    query i = fromJust . find ((==i) . fst')"
  },
  {
    "language": "Haskell",
    "code": "import Control.Monad        -- unless, replicateM\nimport Control.Applicative  -- <$>\nimport Data.List            -- sort, group\n\nmain :: IO ()\nmain = do\n  [m,t,p,r] <- (map read . words) <$> getLine\n  unless (m == 0 && t == 0 && p == 0 && r == 0) $ do\n    ds <- replicateM r ((map read . words) <$> getLine)\n    putStrLn . ranking t $ ds\n    main\n\n{-\n   [[m,t,p,j] | m - elapsed time\n                t - team\n                p - problem\n                j - judge (0 = accepted)]\n -}\ntype Log = [[Int]]\n\n-- Result team solved total\ndata Result = Result Int Int Int deriving Show\ninstance Eq Result where\n  (Result t s total) == (Result t' s' total') = s == s' && total == total'\ninstance Ord Result where\n  compare (Result t s total) (Result t' s' total')\n    | s > s' = LT\n    | s < s' = GT\n    | total < total' = LT\n    | total > total' = GT\n    | otherwise = EQ\n\n\nranking ::  Int -> Log -> String\nranking nt ds = join ',' . map (join '=' . reverse . map (show . team)) .\n  group . sort $ [accum t ds | t<-[1..nt]]\n  where\n    team (Result t s total) = t\n    join :: Char -> [String] -> String\n    join c [x]    = x\n    join c (x:xs) = x ++ [c] ++ join c xs\n\naccum :: Int -> Log -> Result\naccum team ds = Result team (length solved) total\n  where\n    ts      = [d | d<-ds, d!!1 == team]   -- log for the team\n    correct = [d | d<-ts, d!!3 == 0]      -- accepted submissions\n    wrong   = [d | d<-ts, d!!3 /= 0]\n    solved  = map (!!2) correct           -- solved problems\n    consumed p =                          -- consumed time for a problem\n      head [d!!0 | d<-correct, d!!2 == p]\n      + (length [d | d<-wrong, d!!2 == p]) * 20\n    total   = sum . map consumed $ solved -- total consumed time"
  },
  {
    "language": "C",
    "code": "#include <stdio.h>\n#include <stdlib.h>\n\ntypedef struct data { int solved, penalty, id, wa[11]; } data;\n\nint comp(const void* a, const void* b)\n{\n    data x=*((data*)a), y=*((data*)b);\n    if (x.solved>y.solved) return -1;\n    if (x.solved<y.solved) return 1;\n    if (x.penalty<y.penalty) return -1;\n    if (x.penalty>y.penalty) return -1;\n    if (x.id>y.id) return -1;\n    if (x.id<y.id) return 1;\n    return 0;\n}\n\nint comp2(data* a, data* b)\n{\n    data x=*a, y=*b;\n    if (x.solved>y.solved) return -1;\n    if (x.solved<y.solved) return 1;\n    if (x.penalty<y.penalty) return -1;\n    if (x.penalty>y.penalty) return -1;\n    return 0;\n}\n\n\nint main(void)\n{\n    data a[52];\n    int M, T, P, R;\n    while (scanf(\"%d%d%d%d\", &M, &T, &P, &R), M) {\n        int i, j;\n        for(i=0;i<T;++i) {\n            a[i].solved=a[i].penalty=0;\n            a[i].id=i+1;\n            for(j=0;j<P;++j) a[i].wa[j]=0;\n        }\n        while (R--) {\n            int m, t, p;\n            scanf(\"%d%d%d%d\", &m, &t, &p, &j);\n            --t, --p;\n            if (j==0) {\n                a[t].solved++;\n                a[t].penalty+=m+a[t].wa[p]*20;\n            }\n            else {\n                a[t].wa[p]++;\n            }\n        }\n        qsort(a, T, sizeof(data), comp);\n        printf(\"%d\", a[0].id);\n        for(i=1;i<T;++i)\n            printf(\"%c%d\", comp2(a+i-1, a+i)==0?'=':',', a[i].id);\n        puts(\"\");\n    }\n    return 0;\n}"
  },
  {
    "language": "C",
    "code": "#include<stdio.h>\n\ntypedef struct{\n  int id;\n  int a;\n  int time;\n}T;\nT Team[51],tmp;\n\nint main()\n{\n  int i,j,M,T,P,R,m,t,p;\n  int mis[51][11];\n  while(1){\n    scanf(\"%d%d%d%d\",&M,&T,&P,&R);\n    if(M==0&&T==0&&P==0&&R==0)break;\n    for(i=1;i<51;i++){\n      for(j=0;j<11;j++)mis[i][j]=0;\n      Team[i].id=i;\n      Team[i].a=0;\n      Team[i].time=0;\n    }\n    for(i=0;i<R;i++){\n      scanf(\"%d%d%d%d\",&m,&t,&p,&j);\n      if(j!=0)mis[t][p]++;\n      else{\n\tTeam[t].a++;\n        Team[t].time+=(m+mis[t][p]*20);\n      }\n    }\n    for(i=1;i<T+1;i++){\n      for(j=T;j>i;j--){\n\tif(Team[j].a>Team[j-1].a){\n\t  tmp=Team[j];\n\t  Team[j]=Team[j-1];\n\t  Team[j-1]=tmp;\n\t}\n\tif(Team[j].a==Team[j-1].a &&Team[j].time<Team[j-1].time){\n\t  tmp=Team[j];\n\t  Team[j]=Team[j-1];\n\t  Team[j-1]=tmp;\n\t}\t\n\tif(Team[j].a==Team[j-1].a &&Team[j].time==Team[j-1].time && Team[j].id>Team[j-1].id){\n\t  tmp=Team[j];\n\t  Team[j]=Team[j-1];\n\t  Team[j-1]=tmp;\n\t}\n      }\n    }\n    printf(\"%d\",Team[1].id);\n    for(i=2;i<T+1;i++){\n      if(Team[i].a==Team[i-1].a &&Team[i].time==Team[i+1].time)printf(\"=\");\n      else printf(\",\");\n      printf(\"%d\",Team[i].id);\n    }\n    printf(\"\\n\");\n  }\n  return 0;\n}"
  },
  {
    "language": "C",
    "code": "#include <stdio.h>\n\nvoid swap(int *x,int *y){\n    int tmp;\n    \n    tmp = *x;\n    *x = *y;\n    *y = tmp;\n    \n}\n\n\nint main(int argc, const char * argv[]) {\n    int m=0,t=0,p=0,r=0;\n    int mk=0,tk=0,pk=0,jk=0;//????????????????????????????????????????????????????????????????????°????????????????????°??£???\n    int i=0,j=0,k=0,l=0;\n    int fp[51][4] = {0};//?????????????????????(??????),??£??????????¨???????,??£???????????°,???????????\\??????\n    \n    do {\n        \n        scanf(\"%d %d %d %d\",&m,&t,&p,&r);\n        \n        for (i = t-1; i >= 0 ; i--) { // ????????????????????????????´?\n            fp[t-i-1][0] = i+1;\n        }\n        \n        \n        //????????????????????\\??? ??????\n        for (i = 0;i < r; i++) {\n            \n            scanf(\"%d %d %d %d\",&mk,&tk,&pk,&jk);\n            \n            if (mk==0 && tk==0 && pk==0 && jk==0) {\n                break;\n            }\n            //??£???????????¨????????????\n            if (jk==0) {\n                fp[(tk-1 -9) * -1][1] += mk;//?????????????????????\n                fp[(tk-1 -9) * -1][2] += 1;//??£???????????°?????????\n            }\n            \n        }\n        \n        //output\n        //????????????\n        //??£???????????°?????????\n        for (i = 0; i < t-1; i++) { //8???\n            for (j = t-1; j > i; j--) { //9..8..7..6..5..4..3..2..1???\n                if (fp[j][2] > fp[j-1][2]) {\n                    //swap\n                    //????¬?????????????swap????????¨????????¢?????¬?????§??????????????????\n                    swap(&fp[j][0],&fp[j-1][0]);\n                    swap(&fp[j][1],&fp[j-1][1]);\n                    swap(&fp[j][2],&fp[j-1][2]);\n                    swap(&fp[j][3],&fp[j-1][3]);\n                }\n            }\n        }\n        \n        //????????°??§?????????\n        for (i = 0; i < 10; i++) {\n            if (fp[i][2] != fp[i+1][2]) {\n                printf(\"%d %d\\n\",fp[i][2],fp[i+1][2]);\n                for (j = i + 1; j < 10; j++) {\n                    fp[j][3] += 1;\n                }\n            }\n        }\n        \n        j=0;\n        for (i = 0; i < t; i++) {\n            //???????????§?????????????????¢???\n            while (fp[j+i][3] == fp[j+i+1][3]) {\n                j++;\n            }\n            \n            for (k = i; k < i+j; k++) {\n                for (l = i+j; l > k; l--) {\n                    if (fp[l][1] > fp[l-1][1]) {\n                        swap(&fp[l][0], &fp[l-1][0]);\n                        swap(&fp[l][1], &fp[l-1][1]);\n                        swap(&fp[l][2], &fp[l-1][2]);\n                        swap(&fp[l][3],&fp[l-1][3]);\n                    }\n                }\n            }\n            //\n            for (k = i; k < i+j; k++) {\n                if (fp[k][1] != fp[k+1][1]) {\n                    for (l = k + 1; l < t; l++) {\n                        fp[l][3] += 1;\n                    }\n                }\n            }\n            \n            i = i + j;\n            j = 0;\n        }\n        \n        //??¨???\n        for (i = 0; i < t; i++) {\n            printf(\"%d\",fp[i][0]);\n            \n            if (fp[i][3] == fp[i+1][3] && i != t-1) {\n                printf(\"=\");\n            } else if (fp[i][3] < fp[i+1][3] && i != t-1) {\n                printf(\",\");\n            } else {\n                \n            }\n        }\n        printf(\"\\n\");\n        \n        for (i = 0; i < t ; i++) {\n            for (j = 0; j < 4; j++) {\n                printf(\"%d \",fp[i][j]);\n            }\n        printf(\"\\n\");\n        }\n        \n        printf(\"\\n\");//??????????????????\n        \n    } while (mk==0 && tk==0 && pk==0 && jk==0);\n    \n    \n    return 0;\n}"
  },
  {
    "language": "C",
    "code": "//\n//  main.c\n//  ICPC Ranking\n//\n//  Created by x15071xx on 2016/06/16.\n//  Copyright ?? 2016??´ AIT. All rights reserved.\n//\n\n#include <stdio.h>\n#include <math.h>\n\nvoid swap(int team[50][4],int x,int i){\n    int tmp;\n    \n    tmp = team[x][i];\n    team[x][i] = team[x-1][i];\n    team[x-1][i] = tmp;\n    \n}\n\nint main(int argc, const char * argv[]) {\n    \n    \n    while (1) {\n        int m,t,p,r;\n        int sm,st,sp,sr;\n        int i,j,k,l;\n        \n        int team[50][4];//0,???????????°1,??£?????°2,??????3,??????\n        int team_wrong[50][10];\n        \n        for (i=0; i<50; i++) {\n            for (j=0; j<4; j++) {\n                team[i][j] = 0;\n            }\n        }\n        for (i=0; i<50; i++) {\n            for (j=0; j<10; j++) {\n                team_wrong[i][j] = 0;\n            }\n        }\n        \n        \n        \n        scanf(\"%d %d %d %d\",&m,&t,&p,&r);\n        \n        \n        for (i=t; i>0; i--) {\n            team[t-i][0] = i;\n        }\n        \n        if (m==0&&t==0&&p==0&&r==0) {\n            break;\n        }\n        \n        for (i=0; i<r; i++) {\n            scanf(\"%d %d %d %d\",&sm,&st,&sp,&sr);\n            \n            if (sr == 0) {\n                //seikai\n                team[abs(st-t)][1]++;\n                team[abs(st-t)][2] += st + (team_wrong[abs(st-t)][abs(sp-t)] * 20);\n            } else {\n                //huseikai\n                team_wrong[abs(st-t)][abs(sp-t)]++;\n            }\n        }\n        //seitousuu\n        for (i=0; i<t-1; i++) {\n            for (j=t-1; j>i; j--) {\n                if (team[j][1] > team[j-1][1]) {\n                    swap(team,j,0);\n                    swap(team,j,1);\n                    swap(team,j,2);\n                    swap(team,j,3);\n                }\n            }\n        }\n        \n        //zyunniduke\n        for (i=0; i<t; i++) {\n            if (team[i][1] != team[i+1][1]) {\n                for (j=i+1; j<t; j++) {\n                    team[j][3]++;\n                }\n            }\n        }\n        \n        \n        //??????\n        for (i=0; i<t-1; i++) {\n            j=0;\n            while (team[i+j][3]  == team[i+j+1][3]) {\n                j++;\n            }\n            \n            for (k=0; k<i+j; k++) {\n                for (l=i+j; l > k; l--) {\n                    if ((team[l][2] < team[l-1][2] )&& (team[l][3] == team[l-1][3])) {\n                        swap(team,l,0);\n                        swap(team,l,1);\n                        swap(team,l,2);\n                        swap(team,l,3);\n                    }\n                }\n            }\n        }\n        \n        for (i=0; i<t-1; i++) {\n            printf(\"%d\",team[i][0]);\n            \n            if ((team[i][3] != team[i+1][3]) || (team[i][2] != team[i+1][2])) {\n                printf(\",\");\n            } else if ((team[i][3] == team[i+1][3])&&(team[i][2] == team[i+1][2])){\n                printf(\"=\");\n            }\n            \n            if (t-2 == i) {\n                printf(\"%d\\n\",team[i+1][0]);\n                break;\n            }\n        }\n        \n    }\n    \n    return 0;\n}"
  },
  {
    "language": "C",
    "code": "#include<stdio.h>\nint main(){\n  int m,t,p,R,a,b,c,d,i,j,r[51];\n  while(scanf(\"%d %d %d %d\",&m,&t,&p,&R),m||t||p||R){\n    int pn[51][11]={0};\n    int s[51]={0};\n    while(R--){\n      scanf(\"%d %d %d %d\",&a,&b,&c,&d);\n      if(d)pn[b][c]+=20;\n      else s[b]+=(100000-a-pn[b][c]);\n    }\n    for(i=1;i<=t;i++)s[i]=s[i]*100+i;\n    for(i=1;i<=t;i++){\n      r[i]=i;\n      for(j=i;j>1;j--){\n\tif(s[r[j-1]]<s[r[j]]){\n\t  m=r[j];\n\t  r[j]=r[j-1];\n\t  r[j-1]=m;\n\t}\n      }\n    }\n    for(i=1;i<=t;i++){\n      if(i-1){\n\tif(s[r[i-1]]/100==s[r[i]]/100)printf(\"=\");\n\telse                          printf(\",\");\n      }\n      printf(\"%d\",r[i]);\n    }\n    printf(\"\\n\");\n  }\n  return 0;\n}"
  },
  {
    "language": "C",
    "code": "#include <stdio.h>\n#include <stdlib.h>\n\ntypedef struct{\n\tint id;\n\tint score;\n\tint time;\n\tint wrong[10];\n}team;\n\nint comp(const void* c1, const void*c2){\n\tteam* t1 = (team*)c1;\n\tteam* t2 = (team*)c2;\n\tif(t1->score!=t2->score){\n\t\treturn t2->score - t1->score;\n\t}else if(t1->time!=t2->time){\n\t\treturn t1->time - t2->time;\n\t}else{\n\t\treturn t2->id - t1->id;\n\t}\n}\n\nint M,T,P,R;\nteam teams[50];\n\nint main(void){\n\tint i,j;\n\twhile(scanf(\"%d %d %d %d\",&M,&T,&P,&R),M|T|P|R){\n\t\tfor(i=0;i<T;i++){\n\t\t\tteams[i].id=i+1;\n\t\t\tteams[i].score=0;\n\t\t\tteams[i].time=0;\n\t\t\tfor(j=0;j<10;j++){\n\t\t\t\tteams[i].wrong[j]=0;\n\t\t\t}\n\t\t}\n\t\tint m,t,p,j;\n\t\tfor(i=0;i<R;i++){\n\t\t\tscanf(\"%d %d %d %d\",&m,&t,&p,&j);\n\t\t\tif(j==0){\n\t\t\t\tteams[t-1].score++;\n\t\t\t\tteams[t-1].time=m+20*(teams[t-1].wrong[p-1]);\n\t\t\t}else{\n\t\t\t\tteams[t-1].wrong[p-1]++;\n\t\t\t}\n\t\t}\n\t\tqsort(teams,T,sizeof(team),comp);\n\t\tfor(i=0;i<T;i++){\n\t\t\tif(i==0){\n\t\t\t\tprintf(\"%d\",teams[i].id);\n\t\t\t}else{\n\t\t\t\tif(teams[i-1].score==teams[i].score&&teams[i-1].time==teams[i].time){\n\t\t\t\t\tprintf(\"=%d\",teams[i].id);\n\t\t\t\t}else{\n\t\t\t\t\tprintf(\",%d\",teams[i].id);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tprintf(\"\\n\");\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C",
    "code": "#include<stdio.h>\nint main(){\n  int m,t,p,R,a,b,c,d,i,j,r[50];\n  while(scanf(\"%d %d %d %d\",&m,&t,&p,&R),m||t||p||R){\n    int pn[51][11]={0};\n    int s[51]={0};\n    while(R--){\n      scanf(\"%d %d %d %d\",&a,&b,&c,&d);\n      if(d)pn[b][c]+=20;\n      else s[b]+=1000-a-pn[b][c];\n    }\n    for(i=1;i<=t;i++)r[i]=i;\n    for(i=1;i<=t;i++){\n      for(j=i;j>1;j--){\n\tif(s[r[j-1]]<=s[r[j]]){\n\t  m=r[j];\n\t  r[j]=r[j-1];\n\t  r[j-1]=m;\n\t}\n      }\n    }\n    for(i=1;i<=t;i++){\n      if(i-1){\n\tif(s[r[i-1]]==s[r[i]])printf(\"=\");\n\telse                    printf(\",\");\n      }\n      printf(\"%d\",r[i]);\n    }\n    printf(\"\\n\");\n  }\n  return 0;\n}"
  },
  {
    "language": "C",
    "code": "//\n//  main.c\n//  ICPC Ranking\n//\n//  Created by x15071xx on 2016/06/16.\n//  Copyright ?? 2016??´ AIT. All rights reserved.\n//\n\n#include <stdio.h>\n#include <math.h>\n\nvoid swap(int team[50][4],int x,int i){\n    int tmp;\n    \n    tmp = team[x][i];\n    team[x][i] = team[x-1][i];\n    team[x-1][i] = tmp;\n    \n}\n\nint main(int argc, const char * argv[]) {\n    \n    \n    while (1) {\n        int m,t,p,r;\n        int sm,st,sp,sr;\n        int i,j,k,l;\n        \n        int team[50][4];//0,???????????°1,??£?????°2,??????3,??????\n        int team_wrong[50][10];\n        \n        for (i=0; i<50; i++) {\n            for (j=0; j<4; j++) {\n                team[i][j] = 0;\n            }\n        }\n        for (i=0; i<50; i++) {\n            for (j=0; j<10; j++) {\n                team_wrong[i][j] = 0;\n            }\n        }\n        \n        \n        \n        scanf(\"%d %d %d %d\",&m,&t,&p,&r);\n        \n        \n        for (i=t; i>0; i--) {\n            team[t-i][0] = i;\n        }\n        \n        if (m==0&&t==0&&p==0&&r==0) {\n            break;\n        }\n        \n        for (i=0; i<r; i++) {\n            scanf(\"%d %d %d %d\",&sm,&st,&sp,&sr);\n            \n            if (sr == 0) {\n                //seikai\n                team[abs(st-t)][1]++;\n                team[abs(st-t)][2] += st + (team_wrong[abs(st-t)][abs(sp-t)] * 20);\n            } else {\n                //huseikai\n                team_wrong[abs(st-t)][abs(sp-t)]++;\n            }\n        }\n        printf(\"\\n\");\n        for (i=0; i<t; i++) {\n            for (j=0; j<4; j++) {\n                printf(\"%d \",team[i][j]);\n            }\n            printf(\"\\n\");\n        }\n        //seitousuu\n        for (i=0; i<t-1; i++) {\n            for (j=t-1; j>i; j--) {\n                if (team[j][1] > team[j-1][1]) {\n                    swap(team,j,0);\n                    swap(team,j,1);\n                    swap(team,j,2);\n                    swap(team,j,3);\n                }\n            }\n        }\n        \n        //zyunniduke\n        for (i=0; i<t; i++) {\n            if (team[i][1] != team[i+1][1]) {\n                for (j=i+1; j<t; j++) {\n                    team[j][3]++;\n                }\n            }\n        }\n        \n        \n        //??????\n        for (i=0; i<t-1; i++) {\n            j=0;\n            while (team[i+j][3]  == team[i+j+1][3]) {\n                j++;\n            }\n            \n            for (k=0; k<i+j; k++) {\n                for (l=i+j; l > k; l--) {\n                    if ((team[l][2] < team[l-1][2] )&& (team[l][3] == team[l-1][3])) {\n                        swap(team,l,0);\n                        swap(team,l,1);\n                        swap(team,l,2);\n                        swap(team,l,3);\n                    }\n                }\n            }\n        }\n        \n        for (i=0; i<t; i++) {\n            for (j=0; j<4; j++) {\n                printf(\"%d \",team[i][j]);\n            }\n            printf(\"\\n\");\n        }\n        for (i=0; i<t-1; i++) {\n            printf(\"%d\",team[i][0]);\n            \n            if ((team[i][3] != team[i+1][3]) || (team[i][2] != team[i+1][2])) {\n                printf(\",\");\n            } else if ((team[i][3] == team[i+1][3])&&(team[i][2] == team[i+1][2])){\n                printf(\"=\");\n            }\n            \n            if (t-2 == i) {\n                printf(\"%d\\n\",team[i+1][0]);\n                break;\n            }\n        }\n        \n    }\n    \n    return 0;\n}"
  },
  {
    "language": "C",
    "code": "#include <stdio.h>\n#include <stdlib.h>\n\n\n\nint main(){\n\n    int M, T, P, R;\n    int i, j;\n    int team[2000][5] = {{0,}};\n    int team_tmp[2000][5] = {{0,}};\n    int pen[50][10] = {{0,}};\n    int m, t, p, r;\n\n    int rank[2000] = {0,};\n    int tmp1, tmp0;\n    int g, L;\n    int f = 0;\n\n    while(1){\n        scanf(\"%d%d%d%d\", &M, &T, &P, &R);\n\n        if(M==0 && T==0 && P ==0 && R==0){\n            break;\n        }\n\n        //loop\n\n        // start\n        for(i=0; i<R; i++){\n            scanf(\"%d%d%d%d\", &m, &t, &p, &j);\n\n            if(j==0){\n                team[t][0] = team[t][0] + pen[t][p] + m;\n                team[t][1] ++;\n                team_tmp[t][0] = team[t][0];\n                team_tmp[t][1] = team[t][1];\n            }else{\n                pen[t][p] += 20;\n            }\n\n\n        }\n\n        /*\n        for(t=1; t<=10; t++){\n            //printf(\"0: %d\\n1: %d\\n\\n\", team[t][0], team[t][1]);\n        }\n        */\n\n        for(t=1; t<=T; t++){\n            //printf(\"0: %d\\n1: %d\\n\\n\", team[t][0], team[t][1]);\n        }\n\n        //printf(\"---------------\\n\");\n\n        for(i=1; i<=T; i++){\n            rank[i] = i;\n        }\n\n        /*\n           for(i=1; i<=T; i++){\n           for(L=1; L<=T; L++){\n\n           if(team[L][1] <= team[L+1][1]){\n           tmp0 = rank[L];\n           rank[L] = rank[L+1];\n           rank[L+1] = tmp0;\n\n           tmp0 = team[L][0];\n           team[L][0] = team[L+1][0];\n           team[L+1][0] = tmp0;\n\n           tmp0 = team[L][1];\n           team[L][1] = team[L+1][1];\n           team[L+1][1] = tmp0;\n\n           if(team[L][1] == team[L+1][1] && team[L][0] >= team[L+1][0]){\n           tmp0 = rank[L];\n           rank[L] = rank[L+1];\n           rank[L+1] = tmp0;\n\n           tmp0 = team[L][0];\n           team[L][0] = team[L+1][0];\n           team[L+1][0] = tmp0;\n\n           tmp0 = team[L][1];\n           team[L][1] = team[L+1][1];\n           team[L+1][1] = tmp0;\n\n           if(team[L][1] == team[L+1][1]){\n           tmp0 = rank[L];\n           rank[L] = rank[L+1];\n           rank[L+1] = tmp0;\n\n           tmp0 = team[L][0];\n           team[L][0] = team[L+1][0];\n           team[L+1][0] = tmp0;\n\n           tmp0 = team[L][1];\n           team[L][1] = team[L+1][1];\n           team[L+1][1] = tmp0;\n           }\n           }\n           }\n           }\n           }\n         */\n\n\n        for(i=1; i<T; i++){\n            for(L=i+1; L<=T; L++){\n\n                if(team[i][1] <= team[L][1]){\n                    tmp0 = rank[i];\n                    rank[i] = rank[L];\n                    rank[L] = tmp0;\n\n                    tmp0 = team[i][0];\n                    team[i][0] = team[L][0];\n                    team[L][0] = tmp0;\n\n                    tmp0 = team[i][1];\n                    team[i][1] = team[L][1];\n                    team[L][1] = tmp0;\n                    if(team[i][1] == team[L][1] && team[i][0] >= team[L][0]){\n                        tmp0 = rank[i];\n                        rank[i] = rank[L];\n                        rank[L] = tmp0;\n\n                        tmp0 = team[i][0];\n                        team[i][0] = team[L][0];\n                        team[L][0] = tmp0;\n\n                        tmp0 = team[i][1];\n                        team[i][1] = team[L][1];\n                        team[L][1] = tmp0;\n\n                        if(team[i][0] == team[L][0] && team[i][1] == team[L][1]){\n                            tmp0 = rank[i];\n                            rank[i] = rank[L];\n                            rank[L] = tmp0;\n                            tmp0 = team[i][0];\n                            team[i][0] = team[L][0];\n                            team[L][0] = tmp0;\n\n                            tmp0 = team[i][1];\n                            team[i][1] = team[L][1];\n                            team[L][1] = tmp0;\n                        }\n                    }\n                }\n            }\n        }\n\n        if(f!=0){\n                printf(\"\\n\");\n        }\n        f++;\n        for(t=1; t<=T; t++){\n            //printf(\"0: %d\\n1: %d\\n\\n\", team[t][0], team[t][1]);\n        }\n\n        printf(\"%d\", rank[1]);\n        for(i=2; i<=T; i++){\n            if(team[i-1][0] == team[i][0] && team[i-1][1] == team[i][1]){\n                printf(\"=\");\n            }else{\n                printf(\",\");\n            }\n            printf(\"%d\", rank[i]);\n\n        }\n\n        //printf(\"========================================\\n\\n\");\n\n        // init\n        for(i=0; i<=T; i++){\n            team[i][0] = 0;\n            team[i][1] = 0;\n        }\n\n        for(i=0; i<2000; i++){\n            rank[i] = 0;\n        }\n\n        for(i=0; i<50; i++){\n            for(L=0; L<10; L++){\n                pen[i][L] = 0;\n            }\n        }\n\n    }\n\n    return 0;\n}"
  },
  {
    "language": "C",
    "code": "#include <stdio.h>\n\nint main() {\n  //M:contest's time T:team P:problem R:number of log\n  //m:time t:team number p:problem number ju:jajji\n\n  int M,T,P,R;\n  int m,t,p,ju;\n  int i,j,k,n,o;\n  int tpw[51][11];\n  int tmp;\n  int tn[51] = {0};\n\n  while(1) {\n    int tw[51] = {0};\n    int tc[51] = {0};\n    int tp[51] = {0};\n    int pr[11] = {0};\n    int teq[51] = {0};\n\n    scanf(\"%d %d %d %d\",&M,&T,&P,&R);\n    if(M+T+P+R == 0) break;\n    //    printf(\"R = %d\\n\",R);\n\n    for(i=1;i<51;i++) {\n      tn[i] = i;\n      for(j=0;j<11;j++) {\n\ttpw[i][j] = 0;\n      }\n    }\n\n    tmp = 1;\n    /*    for(i=T;i>0;i--) {\n      tn[tmp] = i;\n      tmp++;\n      } */\n\n    for(i=0;i<R;i++) {\n\n      scanf(\"%d %d %d %d\",&m,&t,&p,&ju);\n\n      if(ju == 0) {\n\ttc[t]++;\n\ttp[t] = m;\n\t//\tprintf(\"tp[%d] = %d\\ntc[%d] = %d\\n\",t,tp[t],t,tc[t]);\n\ttw[t] += tpw[t][p];\n\t//\tprintf(\"tw[%d] = %d\\n\",t,tw[t]);\n      } \n      else {\n\ttpw[t][p]++;\n      }\n    }\n\n   \n    for(i=1;i<=T;i++) {\n      for(j=i+1;j<=T;j++) {\n\n\tif(tc[i] < tc[j]) {\n\t  //  printf(\"tc[%d](%d) <=> tc[%d](%d)\\n\",i,tc[i],j,tc[j]);\n\t  tmp = tn[i];\n\t  tn[i] = tn[j];\n\t  tn[j] = tmp;\n\n\t  tmp = tc[i];\n\t  tc[i] = tc[j];\n\t  tc[j] = tmp;\n\n\t  tmp = tw[i];\n\t  tw[i] = tw[j];\n\t  tw[j] = tmp;\n\t  // printf(\"before :tp[%d](%d) =  tp[%d](%d)\\n\",i,tp[i],j,tp[j]);\n\t  tmp = tp[i];\n\t  tp[i] = tp[j];\n\t  tp[j] =tmp;\n\t  teq[i] = 0;\n\t  //printf(\"tp[%d](%d) =  tp[%d](%d)\\n\",i,tp[i],j,tp[j]);\n\n\t}\n\telse if(tc[i] == tc[j]) {\n\t  //printf(\"tp[%d](%d)+ 20*tw[%d](%d){%d} ?=? tp[%d](%d)+20*tw[%d](%d){%d}\\n\",i,tp[i],i,tw[i],tp[i]+ (20*tw[i]),j,tp[j],j,tw[j],tp[j]+ (20*tw[j]));\n\t  if(tp[i]+ (20*tw[i]) > tp[j]+(20*tw[j])) {\n\t    tmp = tn[i];\n\t    tn[i] = tn[j];\n\t    tn[j] = tmp;\n\n\t    tmp = tw[i];\n\t    tw[i] = tw[j];\n\t    tw[j] = tmp;\n\n\t    tmp = tp[i];\n\t    tp[i] = tp[j];\n\t    tp[j] =tmp;\n\t  }else if(tp[i]+ 20*tw[i] ==  tp[j]+20*tw[j]) {\n\t    //  printf(\"teq[%d][%d] == 1\\n\",i,j);\n\t    if(tn[i] < tn[j] ) {\n\t      tmp = tn[i];\n\t      tn[i] = tn[j];\n\t      tn[j] = tmp;\n\t    }\n\t    teq[i] = 1;\n\t    teq[j] = 1;\n\t  }\n       \n\t}\n\t//\tfor(k=1;k<=T;k++)  printf(\"%d\",tn[k]);\n\t//\tprintf(\"\\n\");\n      }\n    }\n\n    for(i=1;i<=T;i++) {\n\n      printf(\"%d\",tn[i]);\n\t     if(i < T){ \n\t       if(teq[i] == 1 && teq[i+1] == 1) printf(\"=\");\n\t       else printf(\",\");\n\t     }\n    }\n\n    printf(\"\\n\");\n\n  }\n\n  return 0;\n\n}\n\t     \n\t    \n  "
  },
  {
    "language": "C",
    "code": "#include \"stdio.h\"\n#define TEAM_MAX 300\n\nint main(int argc, char const *argv[])\n{\n    int ti,team,probrem,record;\n    int ti_keika,team_num,pro_num,gouhi;\n    int i,j,k;\n    int score[TEAM_MAX][50];\n    int score_sin[TEAM_MAX];\n    int min;\n    int min_num;\n    int syuturyoku_count = 0;\n    int dataset = 0;\n\n    while(1){\n        dataset++;\n        //?????????\n        for(i = 0;i < TEAM_MAX;i++){\n            for(j = 0;j < 50;j++){\n                score[i][j] = 0;\n            }\n        }\n            score_sin[i] = 0;\n        }\n        // ???????????????????????¢?????????????????\\??????0 0 ???????????????\n        scanf(\"%d %d %d %d\",&ti,&team,&probrem,&record);//???????????????????????°???????????°???????????°\n        if(probrem == 0 && record == 0 && team == 0 && ti == 0){\n            break;\n        }\n        for(i = 0; i < record;i++){\n            // ???????????\\???\n            scanf(\"%d %d %d %d\",&ti_keika,&team_num,&pro_num,&gouhi);\n            // ??????????????£???????????????????????£???????????????\n            // ??£?§£????????????????????¢????????????\n            if(gouhi != 0){\n                score[team_num][pro_num] += 20;\n            } else {\n                score_sin[team_num] += score[team_num][pro_num]+ti_keika;\n                score_sin[team_num] -= 1000000;\n            }\n        }\n        syuturyoku_count = 0;\n        // ????????¢?????????????????????????????????\n        while(syuturyoku_count != team) {\n            min = 100000000;\n            //?????§???????????¢???????????????\n            for(j = team;j >= 1;j--){\n                if(min > score_sin[j]){\n                    min_num=1;\n                    min = score_sin[j];\n                } else if(min == score_sin[j]) {\n                    min_num++;\n                }\n            }\n            // ????????¨???\n            for(j = team;j >= 1;j--){\n                //?????????????????° \n                if(min == score_sin[j]){\n                    printf(\"%d\", j);\n                    syuturyoku_count++;\n                    if(syuturyoku_count == team){\n                        printf(\"\\n\");\n                        break;\n                    } else {\n                        if(min_num >= 2){\n                            printf(\"=\");\n                        }\n                        else {\n                            printf(\",\");\n                        }\n                    }\n                    score_sin[j] = 100000000;\n                    break;\n                }\n            }\n        }\n\n\n    }\n\n    return 0;\n}"
  },
  {
    "language": "C",
    "code": "#include<iostream>\n#include<string.h>\nusing namespace std;\n\nconst int INF=5000000;\n\nint data[51][12];\n\nint main(){\n\tint M,T,P,R;\n\twhile(cin>>M>>T>>P>>R && M){\n\t\tfill((int*)data,(int*)(data+12),0);\n\t\tfor(int i=0;i<R;i++){\n\t\t\tint m,t,p,j;\n\t\t\tcin>>m>>t>>p>>j;\n\t\t\tif(j==0){\n\t\t\t\tdata[t][0]++;\n\t\t\t\tdata[t][11]+=m+data[t][p]*20;\n\t\t\t}\n\t\t\telse data[t][p]++;\n\t\t}\n\t\tint prev[2]={INF,0};\n\t\tfor(int i=0;i<T;i++){\n\t\t\tint ans=0;\n\t\t\tint now[2]={0,INF};\n\t\t\tfor(int j=T;j>=0;j--){\n\t\t\t\tif(data[j][0]>now[0]){\n\t\t\t\t\tnow[0]=data[j][0];\n\t\t\t\t\tnow[1]=data[j][11];\n\t\t\t\t\tans=j;\n\t\t\t\t}\n\t\t\t\telse if(data[j][0]==now[0] && data[j][11]<now[1]){\n\t\t\t\t\tnow[1]=data[j][11];\n\t\t\t\t\tans=j;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(i){\n\t\t\t\tif(memcmp(now,prev,sizeof(now))==0)cout<<\"=\";\n\t\t\t\telse cout<<\",\";\n\t\t\t}\n\t\t\tcout<<ans;\n\t\t\tmemcpy(prev,now,sizeof(now));\n\t\t\tdata[ans][0]=-1;\n\t\t}\n\t\tcout<<endl;\n\t}\n}"
  },
  {
    "language": "C",
    "code": "#include<stdio.h>\nint main(){\n  int m,t,p,R,a,b,c,d,i,j,r[50];\n  while(scanf(\"%d %d %d %d\",&m,&t,&p,&R),m||t||p||R){\n    int pn[51][11]={0};\n    int s[51]={0};\n    while(R--){\n      scanf(\"%d %d %d %d\",&a,&b,&c,&d);\n      if(d)pn[b][c]+=20;\n      else s[b]+=100000-a-pn[b][c];\n    }\n    for(i=1;i<=t;i++)r[i]=i;\n    for(i=1;i<=t;i++){\n      for(j=i;j>1;j--){\n\tif(s[r[j-1]]<=s[r[j]]){\n\t  m=r[j];\n\t  r[j]=r[j-1];\n\t  r[j-1]=m;\n\t}\n      }\n    }\n    for(i=1;i<=t;i++){\n      if(i-1){\n\tif(s[r[i-1]]==s[r[i]])printf(\"=\");\n\telse                  printf(\",\");\n      }\n      printf(\"%d\",r[i]);\n    }\n    printf(\"\\n\");\n  }\n  return 0;\n}"
  },
  {
    "language": "C",
    "code": "#include <stdio.h>\n#include <stdlib.h>\n#include <string.h>\n#include <stdbool.h>\n\nconst int MAX_T = 50;\nconst int MAX_P = 10;\n\ntypedef struct {\n\tint id;\n\tint time;\n\tint problem_submit[MAX_P];\n\tbool problem_accepted[MAX_P];\n} team_log;\n\nteam_log logs[MAX_T];\nint M, T, P, R;\n\nint count_of_accepted(team_log *t)\n{\n\tint cnt = 0;\n\tfor (int i = 0; i < P; i++)\n\t\tif (t->problem_accepted[i])\n\t\t\tcnt++;\n\treturn cnt;\n}\n\nint calc_time(team_log *t)\n{\n\tint time = t->time;\n\tfor (int i = 0; i < P; i++) {\n\t\tif (t->problem_accepted[i]) {\n\t\t\tint count_of_rejected = t->problem_submit[i]-1;\n\t\t\tint penalty_time = 20*count_of_rejected;\n\t\t\ttime += penalty_time;\n\t\t}\n\t}\n\treturn time;\n}\n\nvoid calc_count_and_time(team_log *t, int *cnt, int *time)\n{\n\t*cnt = count_of_accepted(t);\n\t*time = calc_time(t);\n}\n\nint equal(team_log *l, team_log *r)\n{\n\tint cnt_l, cnt_r;\n\tint time_l, time_r;\n\n\tcalc_count_and_time(l, &cnt_l, &time_l);\n\tcalc_count_and_time(r, &cnt_r, &time_r);\n\treturn cnt_l == cnt_r && time_l == time_r;\n}\n\nint compare(const void *x, const void *y)\n{\n\tteam_log *l, *r;\n\tint cnt_l, cnt_r;\n\tint time_l, time_r;\n\n\tl = (team_log *)x;\n\tr = (team_log *)y;\n\tcalc_count_and_time(l, &cnt_l, &time_l);\n\tcalc_count_and_time(r, &cnt_r, &time_r);\n\n\treturn !(cnt_l > cnt_r\n\t\t|| (cnt_l == cnt_r && time_l < time_r)\n\t\t|| (cnt_l == cnt_r && time_l == time_r && l->id > r->id));\n}\n\nvoid initialize()\n{\n\tfor (int i = 0; i < T; i++) {\n\t\tlogs[i].id = i+1;\n\t\tlogs[i].time = 0;\n\t\tmemset(logs[i].problem_submit, 0, sizeof(logs[i].problem_submit));\n\t\tmemset(logs[i].problem_accepted, 0, sizeof(logs[i].problem_accepted));\n\t}\n}\n\nint main(void)\n{\n\tfor (;;) {\n\t\tscanf(\"%d %d %d %d\", &M, &T, &P, &R);\n\t\tif (M == 0 && T == 0 && P == 0 && R == 0)\n\t\t\tbreak;\n\n\t\tinitialize();\n\t\tfor (int i = 0; i < R; i++) {\n\t\t\tint m, t, p, j;\n\t\t\tscanf(\"%d %d %d %d\", &m, &t, &p, &j);\n\t\t\tt--;\n\t\t\tp--;\n\n\t\t\tlogs[t].problem_submit[p]++;\n\t\t\tif (j == 0) {\n\t\t\t\tlogs[t].time += m;\n\t\t\t\tlogs[t].problem_accepted[p] = true;\n\t\t\t}\n\t\t}\n\n\t\tqsort(logs, T, sizeof(team_log), compare);\n\t\t\n\t\tfor (int i = 1; i < T; i++)\n\t\t\tprintf(\"%d%c\", logs[i-1].id, (equal(&logs[i-1], &logs[i])?'=':','));\n\t\tprintf(\"%d\\n\", logs[T-1].id);\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C",
    "code": "#include <stdio.h>\n#include <memory.h>\nstruct Data{\n\tint team,solve,time,wrong[10];\n};\nint main(void){\n\tstruct Data D[50];\n\tint M,T,P,R,m,t,p,j,i;\n\twhile(1){\n\t\tscanf(\"%d %d %d %d\",&M,&T,&P,&R);\n\t\tif(!M)\n\t\t\tbreak;\n\t\tmemset(D,0,sizeof(D));\n\t\tfor(i=0;i<T;i++)\n\t\t\tD[i].team=i+1;\n\t\tfor(i=0;i<R;i++){\n\t\t\tscanf(\"%d %d %d %d\",&m,&t,&p,&j);\n\t\t\tif(j){\n\t\t\t\tD[t-1].wrong[p-1]++;\n\t\t\t}\n\t\t\telse{\n\t\t\t\tD[t-1].solve++;\n\t\t\t\tD[t-1].time+=m+20*D[t-1].wrong[p-1];\n\t\t\t}\n\t\t}\n\t\tfor(i=0;i<T-1;i++){\n\t\t\tfor(j=T-1;j>i;j--){\n\t\t\t\tif(D[j-1].solve<D[j].solve||D[j-1].solve==D[j].solve&&D[j-1].time>D[j].time||D[j-1].solve==D[j].solve&&D[j-1].time==D[j].time&&D[j-1].team<D[j].team){\n\t\t\t\t\tstruct Data tmp=D[j-1];\n\t\t\t\t\tD[j-1]=D[j];\n\t\t\t\t\tD[j]=tmp;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tfor(i=0;i<T-1;i++){\n\t\t\tprintf(\"%d\",D[i].team);\n\t\t\tif(D[i].solve==D[i+1].solve&&D[i].time==D[i+1].time)\n\t\t\t\tprintf(\"=\");\n\t\t\telse\n\t\t\t\tprintf(\",\");\n\t\t}\n\t\tprintf(\"%d\\n\",D[i].team);\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C",
    "code": "// Aizu 1187: ICPC Ranking\n// 2017.9.13 bal4u@uu\n\n#include <stdio.h>\n#include <stdlib.h>\n#include <string.h>\n\ntypedef struct { int id, sr, st, c[11]; } TM;\nTM tm[55];\n\nint cmp(TM *a, TM *b)\n{\n\tif (b->sr - a->sr) return b->sr - a->sr;\n\tif (a->st - b->st) return a->st - b->st;\n\treturn b->id - a->id;\n}\n\nint main()\n{\n\tint M, T, P, R;\n\tint m, t, p, j, i;\n\n\twhile (scanf(\"%d%d%d%d\", &M, &T, &P, &R) && M) {\n\t\tmemset(tm, 0, sizeof(tm)); for (i = 1; i <= T; i++) tm[i].id = i;\n\t\twhile (R-- > 0) {\n\t\t\tscanf(\"%d%d%d%d\", &m, &t, &p, &j);\n\t\t\tif (j == 0) tm[t].sr++, tm[t].st += m + 20*tm[t].c[p];\n\t\t\telse        tm[t].c[p]++;\n\t\t}\n\t\tqsort(tm+1, T, sizeof(TM), cmp);\n\t\tprintf(\"%d\", tm[1].id);\n\t\tfor (i = 2; i <= T; i++) {\n\t\t\tif (tm[i].sr == tm[i-1].sr && tm[i].st == tm[i-1].st) putchar('=');\n\t\t\telse putchar(',');\n\t\t\tprintf(\"%d\", tm[i].id);\n\t\t}\n\t\tputchar('\\n');\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C",
    "code": "#include<stdio.h>\n#include<stdlib.h>\n#include<string.h>\ntypedef struct D{int n,s,t,p[15];}D;\nD team[55];\nint M,T,P,R,i,m,t,p,j;\n\nint cmp(const void *a,const void*b)\n{\n\tD x=(*(D*)a),y=(*(D*)b);\n\tif(x.s==y.s&&x.t==y.t)return y.n-x.n;\n\tif(x.s==y.s)return x.t-y.t;\n\treturn y.s-x.s;\n}\n\nint main()\n{\n\tfor(;scanf(\"%d%d%d%d\",&M,&T,&P,&R),M;)\n\t{\n\t\tmemset(team,0,sizeof(team));\n\t\tfor(i=0;i<T;i++)team[i].n=i+1;\n\t\tfor(i=0;i<R;i++)\n\t\t{\n\t\t\tscanf(\"%d%d%d%d\",&m,&t,&p,&j);\n\t\t\tif(j==0)\n\t\t\t{\n\t\t\t\tteam[t-1].s++;\n\t\t\t\tteam[t-1].t+=m+team[t-1].p[p]*20;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tteam[t-1].p[p]++;\n\t\t\t}\n\t\t}\n\t\tqsort(team,T,sizeof(D),cmp);\n\t\tfor(i=0;i<T;i++)\n\t\t\tprintf(\"%s%d%s\",i==0?\"\":team[i-1].s==team[i].s&&team[i-1].t==team[i].t?\"=\":\",\",team[i].n,i==T-1?\"\\n\":\"\");\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C",
    "code": "#include <stdio.h>\ntypedef struct{\n    int team_num;\n    int num;\n    int min;\n    int rank;\n}TEAM;\n\nint main(){\n    TEAM team[50],tmp;\n    int i,j,rank=1;\n    int m,t,p,k;\n    int M,T,P,R;\n    int fault[50][10];\n    while(1){\n    scanf(\"%d %d %d %d\", &M, &T, &P, &R);\n    if(M==0&&T==0&&P==0&&R==0) break;\n    for(i=0;i<T;i++){\n        for(j=0;j<P;j++){\n            fault[i][j] = 0;\n        }\n    }\n    for(i=0;i<T;i++){\n        team[i].team_num = i+1;\n        team[i].num      = 0;\n        team[i].min      = 0;\n        team[i].rank     = 0;\n    }\n    for(i=0;i<R;i++){\n        scanf(\"%d %d %d %d\", &m, &t, &p, &k);\n        if(k==0){\n            team[t-1].num++;\n            team[t-1].min += m;\n            team[t-1].min += fault[t-1][p]*20;\n        }\n        else fault[t-1][p] ++;\n    }\n\n    for(i=0;i<T;i++){\n        for(j=i+1;j<T;j++){\n            if(team[i].num < team[j].num){\n                tmp     = team[i];\n                team[i] = team[j];\n                team[j] = tmp;\n            }\n            else if(team[i].num == team[j].num){\n                if(team[i].min > team[j].min){\n                    tmp     = team[i];\n                    team[i] = team[j];\n                    team[j] = tmp;\n                }\n                else if((team[i].min == team[j].min)&&(team[i].team_num < team[j].team_num)){\n                    tmp     = team[i];\n                    team[i] = team[j];\n                    team[j] = tmp;\n                }\n            }\n        }\n    }\n    for(i=0;i<T;i++){\n        team[i].rank = rank;\n        if(i!=T-1){\n            if(team[i].num != team[i+1].num || team[i].min != team[i+1].min) rank++;\n        }\n    }\n    printf(\"%d\",team[0].team_num);\n    for(i=1;i<T;i++){\n        if(team[i].rank == team[i-1].rank) printf(\"=\");\n        else                               printf(\",\");\n        printf(\"%d\",team[i].team_num);\n    }\n    printf(\"\\n\");\n    }\n    return 0;\n}"
  },
  {
    "language": "C",
    "code": "#define _USE_MATH_DEFINES\n#include <stdio.h>\n#include <stdlib.h>\n#include <string.h>\n#include <math.h>\n#include <ctype.h>\n#include <limits.h>\n#define EPS 1e-10\n#define sq(n) ((n)*(n))\n#define rep(i,n) for(i=0;i<n;i++)\n#define rev(i,n) for(i=n-1;i>=0;i--)\n#define sort(a,n) qsort(a,n,sizeof(TYPE),cmp)\n#define sort_r(a,n) qsort(a,n,sizeof(TYPE),cmp_r);\n#define chsort(s,n) qsort(s,n,sizeof(char),cmp)\n#define chsort_r(s,n) qsort(s,n,sizeof(char),char_cmp_r);\n#define TYPE int\n#define MEMSET(a) memset(a,0,sizeof(a))\nlong long mod=(long long)1e09+7;\nint inf=1<<30;\nlong long llinf=1ll<<60;\n\nint in(void){\n    int i;scanf(\"%d\",&i);\n    return i;\n}\nlong long llin(void){\n    long long i;scanf(\"%lld\",&i);\n    return i;\n}\ndouble din(void){\n    double i;scanf(\"%lf\",&i);\n    return i;\n}\nvoid chin(char s[]){\n    scanf(\"%s\",s);\n}\nvoid print(int a){\n    printf(\"%d\\n\",a);\n}\nvoid llprint(long long a){\n    printf(\"%lld\\n\",a);\n}\nvoid dprint(double a){\n    printf(\"%.10f\\n\",a);\n}\nvoid print2(int a,int b){\n    printf(\"%d %d\\n\",a,b);\n}\nlong long max(long long a,long long b){\n    return a>b?a:b;\n}\nlong long min(long long a,long long b){\n    return a<b?a:b;\n}\nint cmp(const void *a,const void *b){\n    return *(TYPE *)a-*(TYPE *)b;\n}\nint cmp_r(const void *a,const void *b){\n    return *(TYPE *)b-*(TYPE *)a;\n}\nint char_cmp(const void *a,const void *b){\n    return strcmp((char *)a,(char *)b);\n}\nint char_cmp_r(const void *a,const void *b){\n    return strcmp((char *)b,(char *)a);\n}\nvoid swap(int *a,int *b){\n    int t=*a;\n    *a=*b;\n    *b=t;\n}\nlong long gcd(long long x,long long y){\n    return x%y?gcd(y,x%y):y;\n}\nlong long lcm(long long x,long long y){\n    return x/gcd(x,y)*y;\n}\n\n// write codes below this\n// when you use 'sort',\n// make sure TYPE macro is correct\ntypedef struct{\n    int id,ac,time,wa[301];\n}data;\nint main(void){\n    int M,T,P,R,i,m,t,p,j;\n    data team[50],tmp;\n    while(1){\n        M=in();\n        T=in();\n        P=in();\n        R=in();\n        if(!M)break;\n        MEMSET(team);\n        rep(i,T)team[i].id=i+1;\n        rep(i,R){\n            m=in();\n            t=in();\n            p=in();\n            j=in();\n            t--;\n            if(!j){\n                team[t].ac++;\n                team[t].time+=m+team[t].wa[p]*20;\n            }\n            else\n                team[t].wa[p]++;\n        }\n        for(i=0;i<T-1;i++){\n            for(j=T-1;j>i;j--){\n                if(team[j-1].ac<team[j].ac\n                ||team[j-1].ac==team[j].ac&&team[j-1].time>team[j].time\n                ||team[j-1].ac==team[j].ac&&team[j-1].time==team[j].time&&team[j-1].id<team[j].id){\n                    tmp=team[j-1];\n                    team[j-1]=team[j];\n                    team[j]=tmp;\n                }\n            }\n        }\n        rep(i,T){\n            printf(\"%d%c\",team[i].id,i==T-1?'\\n':team[i].ac==team[i+1].ac&&team[i].time==team[i+1].time?'=':',');\n        }\n    }\n    return 0;\n}\n"
  },
  {
    "language": "C",
    "code": "#include<stdio.h>\n#include<stdlib.h>\ntypedef struct{\n    int time;\n    int number;\n    int ans;\n    int q[10];\n}Data;\nData d[50];\nint M, T, P, R;\nint m, t, p, j;\nvoid init(void){\n    for(int i=0; i<50; i++){\n        d[i].time=0;\n        d[i].number=i;\n        d[i].ans=0;\n        for(int j=0; j<10; j++){\n            d[i].q[j]=0;\n        }\n    }\n}\nint compare(const void *a, const void *b){\n    Data c = *(Data *)a;\n    Data d = *(Data *)b;\n    if(c.ans > d.ans) return -1;\n    else if(d.ans > c.ans) return 1;\n    else{\n        if(c.time > d.time) return 1;\n        else if(d.time > c.time) return -1;\n        else{\n            if(c.number > d.number) return -1;\n            else return 1;\n        }\n    }\n}\nint main(void){\n    while(1){\n        init();\n        scanf(\"%d%d%d%d\",&M,&T,&P,&R);\n        if(M==0 && T==0 && P==0 && R==0) break;\n        for(int i=0; i<R; i++){\n            scanf(\"%d%d%d%d\",&m,&t,&p,&j);\n            if(j==0){\n                d[t-1].time+=(m+d[t-1].q[p-1]*20);\n                d[t-1].ans++;\n            }\n            else{\n                d[t-1].q[p-1]++;\n            }\n        }\n        qsort(d,T,sizeof(Data),compare);\n        for(int i=0; i<T-1; i++){\n            printf(\"%d\",d[i].number+1);\n            if(d[i].time==d[i+1].time && d[i].ans==d[i+1].ans) printf(\"=\");\n            else printf(\",\");\n        }\n        printf(\"%d\\n\",d[T-1].number+1);\n    }\n    return 0;\n}\n\n"
  },
  {
    "language": "C",
    "code": "#include<stdio.h>\n\ntypedef struct{\n  int id;\n  int a;\n  int time;\n}T;\nT Team[51],tmp;\n\nint main()\n{\n  int i,j,M,T,P,R,m,t,p;\n  int mis[51][11];\n  while(1){\n    scanf(\"%d%d%d%d\",&M,&T,&P,&R);\n    if(M==0&&T==0&&P==0&&R==0)break;\n    for(i=1;i<51;i++){\n      for(j=0;j<11;j++)mis[i][j]=0;\n      Team[i].id=i;\n      Team[i].a=0;\n      Team[i].time=0;\n    }\n    for(i=0;i<R;i++){\n      scanf(\"%d%d%d%d\",&m,&t,&p,&j);\n      if(j!=0)mis[t][p]++;\n      else{\n\tTeam[t].a++;\n        Team[t].time+=(m+mis[t][p]*20);\n      }\n    }\n    for(i=1;i<T+1;i++){\n      for(j=T;j>i;j--){\n\tif(Team[j].a>Team[j-1].a){\n\t  tmp=Team[j];\n\t  Team[j]=Team[j-1];\n\t  Team[j-1]=tmp;\n\t}\n\tif(Team[j].a==Team[j-1].a &&Team[j].time<Team[j-1].time){\n\t  tmp=Team[j];\n\t  Team[j]=Team[j-1];\n\t  Team[j-1]=tmp;\n\t}\t\n\tif(Team[j].a==Team[j-1].a &&Team[j].time==Team[j-1].time && Team[j].id>Team[j-1].id){\n\t  tmp=Team[j];\n\t  Team[j]=Team[j-1];\n\t  Team[j-1]=tmp;\n\t}\n      }\n    }\n    printf(\"%d\",Team[1].id);\n    for(i=2;i<T+1;i++){\n      if(Team[i].a==Team[i-1].a &&Team[i].time==Team[i-1].time)printf(\"=\");\n      else printf(\",\");\n      printf(\"%d\",Team[i].id);\n    }\n    printf(\"\\n\");\n  }\n  return 0;\n}"
  },
  {
    "language": "C",
    "code": "#include<stdio.h>\nint main(){\n  int m,t,p,R,a,b,c,d,i,j,r[51];\n  while(scanf(\"%d %d %d %d\",&m,&t,&p,&R),m||t||p||R){\n    int pn[51][11]={0};\n    int s[51]={0};\n    while(R--){\n      scanf(\"%d %d %d %d\",&a,&b,&c,&d);\n      if(d)pn[b][c]+=20;\n      else s[b]+=100000-a-pn[b][c];\n    }\n    for(i=1;i<=t;i++)r[i]=i;\n    for(i=1;i<=t;i++){\n      for(j=i;j>1;j--){\n\tif(s[r[j-1]]<=s[r[j]]){\n\t  m=r[j];\n\t  r[j]=r[j-1];\n\t  r[j-1]=m;\n\t}\n      }\n    }\n    for(i=1;i<=t;i++){\n      if(i-1){\n\tif(s[r[i-1]]==s[r[i]])printf(\"=\");\n\telse                  printf(\",\");\n      }\n      printf(\"%d\",r[i]);\n    }\n    printf(\"\\n\");\n  }\n  return 0;\n}"
  },
  {
    "language": "C",
    "code": "#include<stdio.h>\nint main(){\n  int m,t,p,R,a,b,c,d,i,j,r[50];\n  while(scanf(\"%d %d %d %d\",&m,&t,&p,&R),m||t||p||R){\n    int pn[51][11]={0};\n    int s[51]={0};\n    while(R--){\n      scanf(\"%d %d %d %d\",&a,&b,&c,&d);\n      if(d)pn[b][c]+=20;\n      else s[b]+=100000-a-pn[b][c];\n    }\n    for(i=1;i<=t;i++)r[i]=i;\n    for(i=1;i<=t;i++){\n      for(j=i;j>1;j--){\n\tif(s[r[j-1]]<=s[r[j]]){\n\t  m=r[j];\n\t  r[j]=r[j-1];\n\t  r[j-1]=m;\n\t}\n      }\n    }\n    for(i=1;i<=t;i++){\n      if(i-1){\n\tif(s[r[i-1]]==s[r[i]])printf(\"=\");\n\telse                  printf(\",\");\n      }\n      printf(\"%d\",r[i]);\n    }\n    printf(\"\\n\");\n  }\n  return 0;\n}"
  },
  {
    "language": "C",
    "code": "#include <stdio.h>\n#include <stdlib.h>\n\ntypedef struct data { int solved, penalty, id, wa[11]; } data;\n\nint comp(const void* a, const void* b)\n{\n    data x=*((data*)a), y=*((data*)b);\n    if (x.solved>y.solved) return -1;\n    if (x.solved<y.solved) return 1;\n    if (x.penalty<y.penalty) return -1;\n    if (x.penalty>y.penalty) return 1;\n    if (x.id>y.id) return -1;\n    if (x.id<y.id) return 1;\n    return 0;\n}\n\nint comp2(data* a, data* b)\n{\n    data x=*a, y=*b;\n    if (x.solved>y.solved) return -1;\n    if (x.solved<y.solved) return 1;\n    if (x.penalty<y.penalty) return -1;\n    if (x.penalty>y.penalty) return 1;\n    return 0;\n}\n\n\nint main(void)\n{\n    data a[52];\n    int M, T, P, R;\n    while (scanf(\"%d%d%d%d\", &M, &T, &P, &R), M) {\n        int i, j;\n        for(i=0;i<T;++i) {\n            a[i].solved=a[i].penalty=0;\n            a[i].id=i+1;\n            for(j=0;j<P;++j) a[i].wa[j]=0;\n        }\n        while (R--) {\n            int m, t, p;\n            scanf(\"%d%d%d%d\", &m, &t, &p, &j);\n            --t, --p;\n            if (j==0) {\n                a[t].solved++;\n                a[t].penalty+=m+a[t].wa[p]*20;\n            }\n            else {\n                a[t].wa[p]++;\n            }\n        }\n        qsort(a, T, sizeof(data), comp);\n        printf(\"%d\", a[0].id);\n        for(i=1;i<T;++i)\n            printf(\"%c%d\", comp2(a+i-1, a+i)==0?'=':',', a[i].id);\n        puts(\"\");\n    }\n    return 0;\n}"
  },
  {
    "language": "C",
    "code": "#include \"stdio.h\"\n#define TEAM_MAX 300\n\nint main(int argc, char const *argv[])\n{\n    int ti,team,probrem,record;\n    int ti_keika,team_num,pro_num,gouhi;\n    int i,j,k;\n    int score[TEAM_MAX][50];\n    int score_sin[TEAM_MAX];\n    int min;\n    int min_num;\n    int syuturyoku_count = 0;\n    int dataset = 0;\n\n    while(1){\n        dataset++;\n        //?????????\n        for(i = 0;i < TEAM_MAX;i++){\n            for(j = 0;j < 50;j++){\n                score[i][j] = 0;                    \n            }\n            score_sin[i] = 0;\n        }\n\n    \n    // ???????????????????????¢?????????????????\\??????0 0 ???????????????\n    scanf(\"%d %d %d %d\",&ti,&team,&probrem,&record);//???????????????????????°???????????°???????????°\n    if(probrem == 0 && record == 0 && team == 0 && ti == 0){\n        break;\n    }\n    for(i = 0; i < record;i++){\n        // ???????????\\???\n        scanf(\"%d %d %d %d\",&ti_keika,&team_num,&pro_num,&gouhi);\n        // ??????????????£???????????????????????£???????????????\n        // ??£?§£????????????????????¢????????????\n        if(gouhi != 0){\n            score[team_num][pro_num] += 20;\n        } else {\n            score_sin[team_num] += score[team_num][pro_num]+ti_keika;\n            score_sin[team_num] -= 1000000;\n        }\n    }\n    syuturyoku_count = 0;\n    // ????????¢?????????????????????????????????\n    while(syuturyoku_count != team) {\n        min = 100000001;\n        //?????§???????????¢???????????????\n        for(j = team;j >= 1;j--){\n            if(min > score_sin[j]){\n                min_num=1;\n                min = score_sin[j];\n            } else if(min == score_sin[j]) {\n                min_num++;\n            }\n        }\n        // ????????¨???\n        for(j = team;j >= 1;j--){\n            //?????????????????° \n            if(min == score_sin[j]){\n                printf(\"%d\", j);\n                syuturyoku_count++;\n                if(syuturyoku_count == team){\n                    printf(\"\\n\");\n                    break;\n                } else {\n                    if(min_num >= 2){\n                        printf(\"=\");\n                    }\n                    else {\n                        printf(\",\");\n                    }\n                }\n                score_sin[j] = 100000000;\n                break;\n            }\n        }\n    }\n}\nreturn 0;\n}"
  },
  {
    "language": "C",
    "code": "//\n//  main.c\n//  ICPC Ranking\n//\n//  Created by x15071xx on 2016/06/16.\n//  Copyright ?? 2016??´ AIT. All rights reserved.\n//\n\n#include <stdio.h>\n#include <stdlib.h>\n#include <math.h>\n\nvoid swap(int team[50][4],int x,int i){\n    int tmp;\n    \n    tmp = team[x][i];\n    team[x][i] = team[x-1][i];\n    team[x-1][i] = tmp;\n    \n}\n\nint main(int argc, const char * argv[]) {\n    \n   \n    while (1) {\n        int m,t,p,r;\n        int sm,st,sp,sr;\n        int i,j,k,l;\n        \n        int team[50][4];//0,???????????°1,??£?????°2,??????3,??????\n        int team_wrong[50][10];\n        \n        \n        scanf(\"%d %d %d %d\",&m,&t,&p,&r);\n        for (i=0; i<50; i++) {\n            for (j=0; j<4; j++) {\n                team[i][j] = 0;\n            }\n        }\n        for (i=0; i<50; i++) {\n            for (j=0; j<10; j++) {\n                team_wrong[i][j] = 0;\n            }\n        }\n\n        for (i=t; i>0; i--) {\n            team[t-i][0] = i;\n        }\n        \n        if (m==0&&t==0&&p==0&&r==0) {\n            break;\n        }\n        \n        for (i=0; i<r; i++) {\n            \n            scanf(\"%d %d %d %d\",&sm,&st,&sp,&sr);\n            \n            if (sr == 0) {\n                //seikai\n                team[abs(st-t)][1]++;\n                team[abs(st-t)][2] += sm + (team_wrong[abs(st-t)][abs(sp-p)] * 20);\n            } else {\n                //huseikai\n                team_wrong[abs(st-t)][abs(sp-p)]++;\n            }\n        }\n        //seitousuu\n        for (i=0; i<t-1; i++) {\n            for (j=t-1; j>i; j--) {\n                if (team[j][1] > team[j-1][1]) {\n                    swap(team,j,0);\n                    swap(team,j,1);\n                    swap(team,j,2);\n                    swap(team,j,3);\n                }\n            }\n        }\n        \n        //zyunniduke\n        for (i=0; i<t; i++) {\n            if (team[i][1] != team[i+1][1]) {\n                for (j=i+1; j<t; j++) {\n                    team[j][3]++;\n                }\n            }\n        }\n        \n        \n        //??????\n        for (i=0; i<t-1; i++) {\n            j=0;\n            while (team[i+j][1]  == team[i+j+1][1]) {\n                j++;\n            }\n            \n            for (k=0; k<i+j; k++) {\n                for (l=i+j; l > k; l--) {\n                    if ((team[l][2] < team[l-1][2] )&& (team[l][3] == team[l-1][3])) {\n                        swap(team,l,0);\n                        swap(team,l,1);\n                        swap(team,l,2);\n                        swap(team,l,3);\n                    }\n                }\n            }\n        }\n        \n//        for (i=0; i<t; i++) {\n//            for (j=0; j<4; j++) {\n//                printf(\"%d \",team[i][j]);\n//            }\n//            printf(\"\\n\");\n//        }\n        for (i=0; i<t-1; i++) {\n            printf(\"%d\",team[i][0]);\n            \n            if ((team[i][3] != team[i+1][3]) || (team[i][2] != team[i+1][2])) {\n                printf(\",\");\n            } else if ((team[i][3] == team[i+1][3])&&(team[i][2] == team[i+1][2])){\n                printf(\"=\");\n            }\n            \n            if (t-2 == i) {\n                printf(\"%d\\n\",team[i+1][0]);\n                break;\n            }\n        }\n        \n    }\n    \n    return 0;\n}"
  },
  {
    "language": "C",
    "code": "//\n//  main.c\n//  ICPC Ranking\n//\n//  Created by x15071xx on 2016/06/16.\n//  Copyright ?? 2016??´ AIT. All rights reserved.\n//\n\n#include <stdio.h>\n#include <math.h>\n\nvoid swap(int team[50][4],int x,int i){\n    int tmp;\n    \n    tmp = team[x][i];\n    team[x][i] = team[x-1][i];\n    team[x-1][i] = tmp;\n    \n}\n\nint main(int argc, const char * argv[]) {\n    \n   \n    while (1) {\n        int m,t,p,r;\n        int sm,st,sp,sr;\n        int i,j,k,l;\n        \n        int team[50][4];//0,???????????°1,??£?????°2,??????3,??????\n        int team_wrong[50][10];\n        \n        \n        scanf(\"%d %d %d %d\",&m,&t,&p,&r);\n        for (i=0; i<50; i++) {\n            for (j=0; j<4; j++) {\n                team[i][j] = 0;\n            }\n        }\n        for (i=0; i<50; i++) {\n            for (j=0; j<10; j++) {\n                team_wrong[i][j] = 0;\n            }\n        }\n\n        for (i=t; i>0; i--) {\n            team[t-i][0] = i;\n        }\n        \n        if (m==0&&t==0&&p==0&&r==0) {\n            break;\n        }\n        \n        for (i=0; i<r; i++) {\n            \n            scanf(\"%d %d %d %d\",&sm,&st,&sp,&sr);\n            \n            if (sr == 0) {\n                //seikai\n                team[abs(st-t)][1]++;\n                team[abs(st-t)][2] += sm + (team_wrong[abs(st-t)][abs(sp-p)] * 20);\n            } else {\n                //huseikai\n                team_wrong[abs(st-t)][abs(sp-p)]++;\n            }\n        }\n        //seitousuu\n        for (i=0; i<t-1; i++) {\n            for (j=t-1; j>i; j--) {\n                if (team[j][1] > team[j-1][1]) {\n                    swap(team,j,0);\n                    swap(team,j,1);\n                    swap(team,j,2);\n                    swap(team,j,3);\n                }\n            }\n        }\n        \n        //zyunniduke\n        for (i=0; i<t; i++) {\n            if (team[i][1] != team[i+1][1]) {\n                for (j=i+1; j<t; j++) {\n                    team[j][3]++;\n                }\n            }\n        }\n        \n        \n        //??????\n        for (i=0; i<t-1; i++) {\n            j=0;\n            while (team[i+j][1]  == team[i+j+1][1]) {\n                j++;\n            }\n            \n            for (k=0; k<i+j; k++) {\n                for (l=i+j; l > k; l--) {\n                    if ((team[l][2] < team[l-1][2] )&& (team[l][3] == team[l-1][3])) {\n                        swap(team,l,0);\n                        swap(team,l,1);\n                        swap(team,l,2);\n                        swap(team,l,3);\n                    }\n                }\n            }\n        }\n        \n        for (i=0; i<t; i++) {\n            for (j=0; j<4; j++) {\n                printf(\"%d \",team[i][j]);\n            }\n            printf(\"\\n\");\n        }\n        for (i=0; i<t-1; i++) {\n            printf(\"%d\",team[i][0]);\n            \n            if ((team[i][3] != team[i+1][3]) || (team[i][2] != team[i+1][2])) {\n                printf(\",\");\n            } else if ((team[i][3] == team[i+1][3])&&(team[i][2] == team[i+1][2])){\n                printf(\"=\");\n            }\n            \n            if (t-2 == i) {\n                printf(\"%d\\n\",team[i+1][0]);\n                break;\n            }\n        }\n        \n    }\n    \n    return 0;\n}"
  },
  {
    "language": "C",
    "code": "#include <stdio.h>\ntypedef struct{\n    int team_num;\n    int num;\n    int min;\n    int rank;\n}TEAM;\n\nint main(){\n    TEAM team[50],tmp;\n    int i,j,rank;\n    int m,t,p,k;\n    int M,T,P,R;\n    int fault[50][10];\n    while(1){\n    rank =1;\n    scanf(\"%d %d %d %d\", &M, &T, &P, &R);\n    if(M==0&&T==0&&P==0&&R==0) break;\n    for(i=0;i<T;i++){\n        for(j=0;j<P;j++){\n            fault[i][j] = 0;\n        }\n    }\n    for(i=0;i<T;i++){\n        team[i].team_num = i+1;\n        team[i].num      = 0;\n        team[i].min      = 0;\n        team[i].rank     = 0;\n    }\n    for(i=0;i<R;i++){\n        scanf(\"%d %d %d %d\", &m, &t, &p, &k);\n        if(k==0){\n            team[t-1].num++;\n            team[t-1].min += m;\n            team[t-1].min += fault[t-1][p]*20;\n        }\n        else fault[t-1][p]++;\n    }\n\n    for(i=0;i<T-1;i++){\n        for(j=i+1;j<T;j++){\n            if(team[i].num < team[j].num){\n                tmp     = team[i];\n                team[i] = team[j];\n                team[j] = tmp;\n            }\n            else if(team[i].num == team[j].num){\n                if(team[i].min > team[j].min){\n                    tmp     = team[i];\n                    team[i] = team[j];\n                    team[j] = tmp;\n                }\n                else if((team[i].min == team[j].min)&&(team[i].team_num < team[j].team_num)){\n                    tmp     = team[i];\n                    team[i] = team[j];\n                    team[j] = tmp;\n                }\n            }\n        }\n    }\n    for(i=0;i<T;i++){\n        team[i].rank = rank;\n        if(i!=T-1){\n            if(team[i].num != team[i+1].num || team[i].min != team[i+1].min) rank++;\n        }\n    }\n    printf(\"%d\",team[0].team_num);\n    for(i=1;i<T;i++){\n        if(team[i].rank == team[i-1].rank) printf(\"=\");\n        else                               printf(\",\");\n        printf(\"%d\",team[i].team_num);\n    }\n    printf(\"\\n\");\n    }\n    return 0;\n}"
  },
  {
    "language": "C",
    "code": "#include <stdio.h>\n#include <stdlib.h>\n\n#define PENALTY 20\n#define P_MAX 10\n#define T_MAX 50\n\nint wa_count[T_MAX][P_MAX], solved[T_MAX], time[T_MAX], t;\nint teams[T_MAX], comp_stable = 1;\n\nvoid init()\n{\n    int tt, p;\n\n    for(tt = 0; tt < t; tt++)\n    {\n        solved[tt] = time[tt] = 0;\n        teams[tt] = tt;\n        for(p = 0; p < P_MAX; p++) wa_count[tt][p] = 0;\n    }\n}\n\nint comp_team(const void* a, const void* b)\n{\n    int t = solved[*(int*)b] - solved[*(int*)a];\n    t = t ? t : time[*(int*)a] - time[*(int*)b];\n\n    return t ? t : comp_stable ? *(int*)b - *(int*)a : 0;\n}\n\nint main(void)\n{\n    int m, tt, p, r, j;\n\n    while(scanf(\"%d%d%d%d\", &m, &t, &p, &r), m + t + p + r)\n    {\n        init();\n\n        while(r--)\n        {\n            scanf(\"%d%d%d%d\", &m, &tt, &p, &j);\n            tt--;\n\n            if(j) wa_count[tt][p]++;\n            else solved[tt]++, time[tt] += wa_count[tt][p] * PENALTY + m;\n        }\n\n        comp_stable = 1;\n        qsort(teams, t, sizeof(int), comp_team);\n\n        comp_stable = 0;\n        for(tt = 0; tt < t - 1; tt++)\n        {\n            printf(\"%d\", teams[tt] + 1);\n            if(comp_team(&teams[tt], &teams[tt + 1])) printf(\",\");\n            else printf(\"=\");\n        }\n        printf(\"%d\\n\", teams[tt] + 1);\n    }\n\n    return 0;\n}"
  },
  {
    "language": "C",
    "code": "#include <stdio.h>\n#include <stdlib.h>\n#include <string.h>\n\ntypedef struct {\n\tint id;\n\tint score;\n\tint penalty;\n} team_t;\n\nint compTeam(const void* x,const void* y) {\n\tconst team_t* a=(const team_t*)x;\n\tconst team_t* b=(const team_t*)y;\n\tif((a->score)<(b->score))return 1;\n\tif((a->score)>(b->score))return -1;\n\tif((a->penalty)>(b->penalty))return 1;\n\tif((a->penalty)<(b->penalty))return -1;\n\tif((a->id)<(b->id))return 1;\n\tif((a->id)>(b->id))return -1;\n\treturn 0;\n}\n\nteam_t teams[50];\nint solved[50][10];\n\nint main(void) {\n\tint M,T,P,R;\n\twhile(scanf(\"%d%d%d%d\",&M,&T,&P,&R)==4 && (M|T|P|R)!=0) {\n\t\tint i,j;\n\t\tmemset(teams,0,sizeof(teams));\n\t\tmemset(solved,0,sizeof(solved));\n\t\tfor(i=0;i<R;i++) {\n\t\t\tint m,t,p,jj;\n\t\t\tscanf(\"%d%d%d%d\",&m,&t,&p,&jj);\n\t\t\tif(solved[t-1][p-1]<=0) {\n\t\t\t\tif(jj==0)solved[t-1][p-1]=-solved[t-1][p-1]*20+m+1;\n\t\t\t\telse solved[t-1][p-1]--;\n\t\t\t}\n\t\t}\n\t\tfor(i=0;i<T;i++) {\n\t\t\tteams[i].id=i+1;\n\t\t\tfor(j=0;j<P;j++) {\n\t\t\t\tif(solved[i][j]>0) {\n\t\t\t\t\tteams[i].score++;\n\t\t\t\t\tteams[i].penalty+=solved[i][j]-1;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tqsort(teams,T,sizeof(team_t),compTeam);\n\t\tprintf(\"%d\",teams[0].id);\n\t\tfor(i=1;i<T;i++) {\n\t\t\tif(teams[i-1].score==teams[i].score &&\n\t\t\tteams[i-1].penalty==teams[i].penalty) {\n\t\t\t\tputchar('=');\n\t\t\t} else {\n\t\t\t\tputchar(',');\n\t\t\t}\n\t\t\tprintf(\"%d\",teams[i].id);\n\t\t}\n\t\tputchar('\\n');\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C",
    "code": "#include <stdio.h>\n\nint main() {\n  //M:contest's time T:team P:problem R:number of log\n  //m:time t:team number p:problem number ju:jajji\n\n  int M,T,P,R;\n  int m,t,p,ju;\n  int i,j,k,n,o;\n  int tpw[51][11];\n  int tmp;\n  int tn[51] = {0};\n\n  while(1) {\n    int tw[51] = {0};\n    int tc[51] = {0};\n    int tp[51] = {0};\n    int pr[11] = {0};\n    int teq[51] = {0};\n\n    scanf(\"%d %d %d %d\",&M,&T,&P,&R);\n    if(M+T+P+R == 0) break;\n    //    printf(\"R = %d\\n\",R);\n\n    for(i=1;i<51;i++) {\n      tn[i] = i;\n      for(j=0;j<11;j++) {\n\ttpw[i][j] = 0;\n      }\n    }\n\n    tmp = 1;\n    /*    for(i=T;i>0;i--) {\n      tn[tmp] = i;\n      tmp++;\n      } */\n\n    for(i=0;i<R;i++) {\n\n      scanf(\"%d %d %d %d\",&m,&t,&p,&ju);\n\n      if(ju == 0) {\n\ttc[t]++;\n\ttp[t] += m;\n\t//\tprintf(\"tp[%d] = %d\\ntc[%d] = %d\\n\",t,tp[t],t,tc[t]);\n\ttw[t] += tpw[t][p];\n\t//\tprintf(\"tw[%d] = %d\\n\",t,tw[t]);\n      } \n      else {\n\ttpw[t][p]++;\n      }\n    }\n\n   \n    for(i=1;i<=T;i++) {\n      for(j=i+1;j<=T;j++) {\n\n\tif(tc[i] < tc[j]) {\n\t  //  printf(\"tc[%d](%d) <=> tc[%d](%d)\\n\",i,tc[i],j,tc[j]);\n\t  tmp = tn[i];\n\t  tn[i] = tn[j];\n\t  tn[j] = tmp;\n\n\t  tmp = tc[i];\n\t  tc[i] = tc[j];\n\t  tc[j] = tmp;\n\n\t  tmp = tw[i];\n\t  tw[i] = tw[j];\n\t  tw[j] = tmp;\n\n\t  // printf(\"before :tp[%d](%d) =  tp[%d](%d)\\n\",i,tp[i],j,tp[j]);\n\t  tmp = tp[i];\n\t  tp[i] = tp[j];\n\t  tp[j] =tmp;\n\t  //printf(\"tp[%d](%d) =  tp[%d](%d)\\n\",i,tp[i],j,tp[j]);\n\t}\n\telse if(tc[i] == tc[j]) {\n\t  //\t  printf(\"tp[%d](%d)+ 20*tw[%d](%d){%d} ?=? tp[%d](%d)+20*tw[%d](%d){%d}\\n\",i,tp[i],i,tw[i],tp[i]+ (20*tw[i]),j,tp[j],j,tw[j],tp[j]+ (20*tw[j]));\n\t  if(tp[i]+ (20*tw[i]) > tp[j]+(20*tw[j])) {\n\t    tmp = tn[i];\n\t    tn[i] = tn[j];\n\t    tn[j] = tmp;\n\n\t    tmp = tw[i];\n\t    tw[i] = tw[j];\n\t    tw[j] = tmp;\n\n\t    tmp = tp[i];\n\t    tp[i] = tp[j];\n\t    tp[j] =tmp;\n\n\t  }else if(tp[i]+ 20*tw[i] ==  tp[j]+20*tw[j]) {\n\t    \n\t    if(tn[i] < tn[j] ) {\n\t      tmp = tn[i];\n\t      tn[i] = tn[j];\n\t      tn[j] = tmp;\n\t    }\n\t  }\n       \n\t}\n\t//\tfor(k=1;k<=T;k++)  printf(\"%d\",tn[k]);\n\t//\tprintf(\"\\n\");\n      }\n    }\n\n    for(i=1;i<=T;i++) {\n      if(tc[i] == tc[i+1] && tp[i]+ 20*tw[i] ==  tp[i+1]+20*tw[i+1]){\n\tteq[i] = 1;\n      }\n    }\n\n\n    for(i=1;i<=T;i++) {\n\n      printf(\"%d\",tn[i]);\n\t     if(i < T){ \n\t       if(teq[i] == 1) printf(\"=\");\n\t       else printf(\",\");\n\t     }\n    }\n\n    printf(\"\\n\");\n\n  }\n\n  return 0;\n\n}\n\t     \n\t    \n  "
  },
  {
    "language": "C",
    "code": "#include <stdio.h>\n#include <stdlib.h>\n\n\n\nint main(){\n\n    int M, T, P, R;\n    int i, j;\n    int team[2000][5] = {{0,}};\n    int team_tmp[2000][5] = {{0,}};\n    int pen[50][10] = {{0,}};\n    int m, t, p, r;\n\n    int rank[2000] = {0,};\n    int tmp1, tmp0;\n    int g, L;\n    int f = 0;\n\n    while(1){\n        scanf(\"%d%d%d%d\", &M, &T, &P, &R);\n\n        if(M==0 && T==0 && P ==0 && R==0){\n            break;\n        }\n\n        //loop\n\n        // start\n        for(i=0; i<R; i++){\n            scanf(\"%d%d%d%d\", &m, &t, &p, &j);\n\n            if(j==0){\n                team[t][0] = team[t][0] + pen[t][p] + m;\n                team[t][1] ++;\n                team_tmp[t][0] = team[t][0];\n                team_tmp[t][1] = team[t][1];\n            }else{\n                pen[t][p] += 20;\n            }\n\n\n        }\n\n        /*\n        for(t=1; t<=10; t++){\n            //printf(\"0: %d\\n1: %d\\n\\n\", team[t][0], team[t][1]);\n        }\n        */\n\n        for(t=1; t<=T; t++){\n            //printf(\"0: %d\\n1: %d\\n\\n\", team[t][0], team[t][1]);\n        }\n\n        //printf(\"---------------\\n\");\n\n        for(i=1; i<=T; i++){\n            rank[i] = i;\n        }\n\n        /*\n           for(i=1; i<=T; i++){\n           for(L=1; L<=T; L++){\n\n           if(team[L][1] <= team[L+1][1]){\n           tmp0 = rank[L];\n           rank[L] = rank[L+1];\n           rank[L+1] = tmp0;\n\n           tmp0 = team[L][0];\n           team[L][0] = team[L+1][0];\n           team[L+1][0] = tmp0;\n\n           tmp0 = team[L][1];\n           team[L][1] = team[L+1][1];\n           team[L+1][1] = tmp0;\n\n           if(team[L][1] == team[L+1][1] && team[L][0] >= team[L+1][0]){\n           tmp0 = rank[L];\n           rank[L] = rank[L+1];\n           rank[L+1] = tmp0;\n\n           tmp0 = team[L][0];\n           team[L][0] = team[L+1][0];\n           team[L+1][0] = tmp0;\n\n           tmp0 = team[L][1];\n           team[L][1] = team[L+1][1];\n           team[L+1][1] = tmp0;\n\n           if(team[L][1] == team[L+1][1]){\n           tmp0 = rank[L];\n           rank[L] = rank[L+1];\n           rank[L+1] = tmp0;\n\n           tmp0 = team[L][0];\n           team[L][0] = team[L+1][0];\n           team[L+1][0] = tmp0;\n\n           tmp0 = team[L][1];\n           team[L][1] = team[L+1][1];\n           team[L+1][1] = tmp0;\n           }\n           }\n           }\n           }\n           }\n         */\n\n\n        for(i=1; i<T; i++){\n            for(L=i+1; L<=T; L++){\n\n                if(team[i][1] <= team[L][1]){\n                    tmp0 = rank[i];\n                    rank[i] = rank[L];\n                    rank[L] = tmp0;\n\n                    tmp0 = team[i][0];\n                    team[i][0] = team[L][0];\n                    team[L][0] = tmp0;\n\n                    tmp0 = team[i][1];\n                    team[i][1] = team[L][1];\n                    team[L][1] = tmp0;\n                    if(team[i][1] == team[L][1] && team[i][0] >= team[L][0]){\n                        tmp0 = rank[i];\n                        rank[i] = rank[L];\n                        rank[L] = tmp0;\n\n                        tmp0 = team[i][0];\n                        team[i][0] = team[L][0];\n                        team[L][0] = tmp0;\n\n                        tmp0 = team[i][1];\n                        team[i][1] = team[L][1];\n                        team[L][1] = tmp0;\n\n                        if(team[i][0] == team[L][0] && team[i][1] == team[L][1]){\n                            tmp0 = rank[i];\n                            rank[i] = rank[L];\n                            rank[L] = tmp0;\n                            tmp0 = team[i][0];\n                            team[i][0] = team[L][0];\n                            team[L][0] = tmp0;\n\n                            tmp0 = team[i][1];\n                            team[i][1] = team[L][1];\n                            team[L][1] = tmp0;\n                        }\n                    }\n                }\n            }\n        }\n\n        if(f!=0){\n                printf(\"\\n\");\n        }\n        f++;\n        for(t=1; t<=T; t++){\n            //printf(\"0: %d\\n1: %d\\n\\n\", team[t][0], team[t][1]);\n        }\n\n        printf(\"%d\", rank[1]);\n        for(i=2; i<=T; i++){\n            if(team[i-1][0] == team[i][0] && team[i-1][1] == team[i][1]){\n                printf(\"=\");\n            }else{\n                printf(\",\");\n            }\n            printf(\"%d\", rank[i]);\n\n        }\n\n        //printf(\"========================================\\n\\n\");\n\n        // init\n        for(i=0; i<=T; i++){\n            team[i][0] = 0;\n            team[i][1] = 0;\n        }\n\n        for(i=0; i<2000; i++){\n            rank[i] = 0;\n        }\n\n        for(i=0; i<50; i++){\n            for(L=0; L<10; L++){\n                pen[i][L] = 0;\n            }\n        }\n\n    }\n\n    return 0;\n}"
  },
  {
    "language": "C",
    "code": "#include <stdio.h>\n\n/* 1 チームの記録 */\ntypedef struct team {\n\tint no;\n    int time;\n\tint score;\n} Team;\n\n/* チームの記録を入れ換える */\nvoid swap(Team *a, Team *b){\n\tTeam c;\n\tc = *b;\n\t*b = *a;\n\t*a = c;\n}\n\n/* チームの順位を判定する (sort で使用, 入れ換えるか否かを返す) */\nint compare(Team a, Team b){\n\tif (a.score < b.score){\n\t\treturn 1;\n\t}else if (a.score > b.score){\n\t\treturn 0;\n\t}\n\n\tif (a.time > b.time){\n\t\treturn 1;\n\t}else if (a.time < b.time){\n\t\treturn 0;\n\t}\n\n\tif (a.no < b.no){\n\t\treturn 1;\n\t}\n\treturn 0;\n}\n\n/* チームの順位を判定し並び替える */\nvoid sort(Team *t, int length){\n\tint i, j;\n\tfor (i = 0; i < length - 1; i++){\n\t\tfor (j = 0; j < length - 1 - i; j++){\n\t\t\tif (compare(t[j], t[j+1])){\n\t\t\t\tswap(&t[j], &t[j+1]);\n\t\t\t}\n\t\t}\n\t}\n}\n\nint main(void){\n\tint M, T, P, R;\n\tint m, t, p, j;\n\tTeam teams[50];\n\tint penalty_num[50][10];\n\tint i, k;\n\n\twhile (scanf(\"%d %d %d %d\", &M, &T, &P, &R) == 4){\n\t\tif (M == 0 && T == 0 && P == 0 && R == 0){\n\t\t\tbreak;\n\t\t}\n\n\t\t/* 初期化 */\n\t\tfor (i = 0; i < T; i++){\n\t\t\tteams[i].no = i + 1;\n\t\t\tteams[i].time = 0;\n\t\t\tteams[i].score = 0;\n\t\t\tfor (k = 0; k < P; k++){\n\t\t\t\tpenalty_num[i][k] = 0;\n\t\t\t}\n\t\t}\n\n\t\t/* 解答提出ログを読み込む */\n\t\tfor (i = 0; i < R; i++){\n\t\t\tscanf(\"%d %d %d %d\", &m, &t, &p, &j);\n\t\t\tt--;\n\t\t\tp--;\n\t\t\tif (j != 0){\n\t\t\t\t/* 不正解 */\n\t\t\t\tpenalty_num[t][p]++;  /* 誤答回数を記録する */\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t/* 正解 */\n\t\t\t/* 誤答回数 * 20 分をペナルティとして加算する */\n\t\t\tteams[t].time += m + penalty_num[t][p] * 20;\n\t\t\tteams[t].score++;\n\t\t}\n\n\t\t/* 順位の高い順に並び替える */\n\t\tsort(teams, T);\n\n\t\t/* 順位の高い順に出力する */\n\t\tfor (i = 0; i < T; i++){\n\t\t\tprintf(\"%d\", teams[i].no);\n\t\t\t/* 区切り文字 */\n\t\t\tif (i < T - 1){\n\t\t\t\tif (teams[i].score == teams[i+1].score && teams[i].time == teams[i+1].time){\n\t\t\t\t\tprintf(\"=\");  /* 同順位 */\n\t\t\t\t}else{\n\t\t\t\t\tprintf(\",\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tprintf(\"\\n\");\n\t}\n\n    return 0;\n}"
  },
  {
    "language": "C",
    "code": "#include \"stdio.h\"\n#define TEAM_MAX 300\n\nint main(int argc, char const *argv[])\n{\n    int ti,team,probrem,record;\n    int ti_keika,team_num,pro_num,gouhi;\n    int i,j,k;\n    int score[TEAM_MAX][50][10];\n    int score_sin[50];\n    int min;\n    int min_num;\n    int syuturyoku_count = 0;\n    int dataset = 0;\n\n    while(1){\n        dataset++;\n        //?????????\n        for(i = 0;i < TEAM_MAX;i++){\n            for(j = 0;j < 50;j++){\n                for(k = 0;k < 10;k++){\n                    score[i][j][k] = 0;\n                }\n            }\n            score_sin[i] = 0;\n        }\n        // ???????????????????????¢?????????????????\\??????0 0 ???????????????\n        scanf(\"%d %d %d %d\",&ti,&team,&probrem,&record);//???????????????????????°???????????°???????????°\n        if(probrem == 0 && record == 0 && team == 0 && ti == 0){\n            break;\n        }\n        for(i = 0; i < record;i++){\n            // ???????????\\???\n            scanf(\"%d %d %d %d\",&ti_keika,&team_num,&pro_num,&gouhi);\n            // ??????????????£???????????????????????£???????????????\n            // ??£?§£????????????????????¢????????????\n            if(gouhi != 0){\n                score[team_num][pro_num][1] += 20;\n            } else {\n                score_sin[team_num] += score[team_num][pro_num][1]+ti_keika;\n                score_sin[team_num] -= 1000000;\n            }\n        }\n        syuturyoku_count = 0;\n        // ????????¢?????????????????????????????????\n        while(syuturyoku_count != team) {\n            min = 100000000;\n            //?????§???????????¢???????????????\n            for(j = team;j >= 1;j--){\n                if(min > score_sin[j]){\n                    min_num=1;\n                    min = score_sin[j];\n                } else if(min == score_sin[j]) {\n                    min_num++;\n                }\n            }\n            // ????????¨???\n            for(j = team;j >= 1;j--){\n                //?????????????????° \n                if(min == score_sin[j]){\n                    printf(\"%d\", j);\n                    syuturyoku_count++;\n                    if(syuturyoku_count == team){\n                        printf(\"\\n\");\n                        break;\n                    } else {\n                        if(min_num >= 2){\n                            printf(\"=\");\n                        }\n                        else {\n                            printf(\",\");\n                        }\n                    }\n                    score_sin[j] = 100000000;\n                    break;\n                }\n            }\n        }\n\n\n    }\n\n    return 0;\n}"
  },
  {
    "language": "C",
    "code": "#include <stdio.h>\n#include <stdlib.h>\n#define ll long long\n#define rep(i,l,r)for(ll i=l;i<r;i++)\n\nint downll(const void*a, const void*b){return*(ll*)a<*(ll*)b?1:*(ll*)a>*(ll*)b?-1:0;}\nvoid sortdown(ll*a,int n){qsort(a,n,sizeof(ll),downll);}\n\nint main(){\n\tll t,p,r;\n\twhile(scanf(\"%*lld%lld%lld%lld\",&t,&p,&r),t){\n\t\tll a[60][20]={};\n\t\tll f[60][20]={};\n\t\twhile(r--){\n\t\t\tll x,i,j,q;\n\t\t\tscanf(\"%lld%lld%lld%lld\",&x,&i,&j,&q);\n\t\t\tif(q)a[i][j]+=20;\n\t\t\telse{\n\t\t\t\ta[i][j]+=x;\n\t\t\t\tf[i][j]=1;\n\t\t\t}\n\t\t}\n\t\tll temp[60]={};\n\t\trep(i,1,t+1){\n\t\t\tll co=0,ti=0;\n\t\t\trep(j,1,p+1)if(f[i][j]){\n\t\t\t\tco++;\n\t\t\t\tti+=a[i][j];\n\t\t\t}\n\t\t\ttemp[i]=co*2700000-ti*60+i;\n\t\t}\n\t\tsortdown(temp+1,t);\n\t\trep(i,1,t+1){\n\t\t\tprintf(\"%d\",temp[i]%60);\n\t\t\tif(i!=t)printf(\"%c\",temp[i]/60==temp[i+1]/60?'=':',');\n\t\t}\n\t\tputs(\"\");\n\t}\n}\n"
  },
  {
    "language": "C",
    "code": "#include <stdio.h>\n#include <stdlib.h>\n\n\n\nint main(){\n\n    int M, T, P, R;\n    int i, j;\n    int team[2000][5] = {{0,}};\n    int team_tmp[2000][5] = {{0,}};\n    int pen[50][10] = {{0,}};\n    int m, t, p, r;\n\n    int rank[2000] = {0,};\n    int tmp1, tmp0;\n    int g, L;\n\n    while(1){\n        scanf(\"%d%d%d%d\", &M, &T, &P, &R);\n\n        if(M==0 && T==0 && P ==0 && R==0){\n            break;\n        }\n\n        //loop\n\n        // start\n        for(i=0; i<R; i++){\n            scanf(\"%d%d%d%d\", &m, &t, &p, &j);\n\n            if(j==0){\n                team[t][0] = team[t][0] + pen[t][p] + m;\n                team[t][1] ++;\n                team_tmp[t][0] = team[t][0];\n                team_tmp[t][1] = team[t][1];\n            }else{\n                pen[t][p] += 20;\n            }\n\n\n        }\n\n        /*\n        for(t=1; t<=10; t++){\n            //printf(\"0: %d\\n1: %d\\n\\n\", team[t][0], team[t][1]);\n        }\n        */\n\n        for(t=1; t<=T; t++){\n            //printf(\"0: %d\\n1: %d\\n\\n\", team[t][0], team[t][1]);\n        }\n\n        //printf(\"---------------\\n\");\n\n        for(i=1; i<=T; i++){\n            rank[i] = i;\n        }\n\n        /*\n           for(i=1; i<=T; i++){\n           for(L=1; L<=T; L++){\n\n           if(team[L][1] <= team[L+1][1]){\n           tmp0 = rank[L];\n           rank[L] = rank[L+1];\n           rank[L+1] = tmp0;\n\n           tmp0 = team[L][0];\n           team[L][0] = team[L+1][0];\n           team[L+1][0] = tmp0;\n\n           tmp0 = team[L][1];\n           team[L][1] = team[L+1][1];\n           team[L+1][1] = tmp0;\n\n           if(team[L][1] == team[L+1][1] && team[L][0] >= team[L+1][0]){\n           tmp0 = rank[L];\n           rank[L] = rank[L+1];\n           rank[L+1] = tmp0;\n\n           tmp0 = team[L][0];\n           team[L][0] = team[L+1][0];\n           team[L+1][0] = tmp0;\n\n           tmp0 = team[L][1];\n           team[L][1] = team[L+1][1];\n           team[L+1][1] = tmp0;\n\n           if(team[L][1] == team[L+1][1]){\n           tmp0 = rank[L];\n           rank[L] = rank[L+1];\n           rank[L+1] = tmp0;\n\n           tmp0 = team[L][0];\n           team[L][0] = team[L+1][0];\n           team[L+1][0] = tmp0;\n\n           tmp0 = team[L][1];\n           team[L][1] = team[L+1][1];\n           team[L+1][1] = tmp0;\n           }\n           }\n           }\n           }\n           }\n         */\n\n\n        for(i=1; i<T; i++){\n            for(L=i+1; L<=T; L++){\n\n                if(team[i][1] <= team[L][1]){\n                    tmp0 = rank[i];\n                    rank[i] = rank[L];\n                    rank[L] = tmp0;\n\n                    tmp0 = team[i][0];\n                    team[i][0] = team[L][0];\n                    team[L][0] = tmp0;\n\n                    tmp0 = team[i][1];\n                    team[i][1] = team[L][1];\n                    team[L][1] = tmp0;\n                    if(team[i][1] == team[L][1] && team[i][0] >= team[L][0]){\n                        tmp0 = rank[i];\n                        rank[i] = rank[L];\n                        rank[L] = tmp0;\n\n                        tmp0 = team[i][0];\n                        team[i][0] = team[L][0];\n                        team[L][0] = tmp0;\n\n                        tmp0 = team[i][1];\n                        team[i][1] = team[L][1];\n                        team[L][1] = tmp0;\n\n                        if(team[i][0] == team[L][0] && team[i][1] == team[L][1]){\n                            tmp0 = rank[i];\n                            rank[i] = rank[L];\n                            rank[L] = tmp0;\n                            tmp0 = team[i][0];\n                            team[i][0] = team[L][0];\n                            team[L][0] = tmp0;\n\n                            tmp0 = team[i][1];\n                            team[i][1] = team[L][1];\n                            team[L][1] = tmp0;\n                        }\n                    }\n                }\n            }\n        }\n\n        for(t=1; t<=T; t++){\n            //printf(\"0: %d\\n1: %d\\n\\n\", team[t][0], team[t][1]);\n        }\n\n        printf(\"%d\", rank[1]);\n        for(i=2; i<=T; i++){\n            if(team[i-1][0] == team[i][0] && team[i-1][1] == team[i][1]){\n                printf(\"=\");\n            }else{\n                printf(\",\");\n            }\n            printf(\"%d\", rank[i]);\n\n        }\n        printf(\"\\n\");\n\n        //printf(\"========================================\\n\\n\");\n\n        // init\n        for(i=0; i<=T; i++){\n            team[i][0] = 0;\n            team[i][1] = 0;\n        }\n\n        for(i=0; i<2000; i++){\n            rank[i] = 0;\n        }\n\n        for(i=0; i<50; i++){\n            for(L=0; L<10; L++){\n                pen[i][L] = 0;\n            }\n        }\n\n    }\n\n    return 0;\n}"
  },
  {
    "language": "C",
    "code": "#include <stdio.h>\ntypedef struct{\n    int team_num;\n    int num;\n    int min;\n    int rank;\n}TEAM;\n\nint main(){\n    TEAM team[50],tmp;\n    int i,j,rank=1;\n    int m,t,p,k;\n    int M,T,P,R;\n    int fault[50][10];\n    while(1){\n    scanf(\"%d %d %d %d\", &M, &T, &P, &R);\n    if(M==0&&T==0&&P==0&&R==0) break;\n    for(i=0;i<T;i++){\n        for(j=0;j<P;j++){\n            fault[i][j] = 0;\n        }\n    }\n    for(i=0;i<T;i++){\n        team[i].team_num = i+1;\n        team[i].num      = 0;\n        team[i].min      = 0;\n        team[i].rank     = 0;\n    }\n    for(i=0;i<R;i++){\n        scanf(\"%d %d %d %d\", &m, &t, &p, &k);\n        if(m>M-1) continue;\n        if(k==0){\n            team[t-1].num++;\n            team[t-1].min += m;\n            team[t-1].min += fault[t-1][p]*20;\n        }\n        else fault[t-1][p] ++;\n    }\n\n    for(i=0;i<T;i++){\n        for(j=i+1;j<T;j++){\n            if(team[i].num < team[j].num){\n                tmp     = team[i];\n                team[i] = team[j];\n                team[j] = tmp;\n            }\n            else if(team[i].num == team[j].num){\n                if(team[i].min > team[j].min){\n                    tmp     = team[i];\n                    team[i] = team[j];\n                    team[j] = tmp;\n                }\n                else if((team[i].min == team[j].min)&&(team[i].team_num < team[j].team_num)){\n                    tmp     = team[i];\n                    team[i] = team[j];\n                    team[j] = tmp;\n                }\n            }\n        }\n    }\n    for(i=0;i<T;i++){\n        team[i].rank = rank;\n        if(i!=T-1){\n            if(team[i].num != team[i+1].num || team[i].min != team[i+1].min) rank++;\n        }\n    }\n    printf(\"%d\",team[0].team_num);\n    for(i=1;i<T;i++){\n        if(team[i].rank == team[i-1].rank) printf(\"=\");\n        else                               printf(\",\");\n        printf(\"%d\",team[i].team_num);\n    }\n    printf(\"\\n\");\n    }\n    return 0;\n}"
  },
  {
    "language": "C",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n\nusing namespace std;\n\nstruct Score{\n\tint team_num;\n\tint ac=0;\n\tint time=0;\n\tint miss_tmp[20]={0};\n\tint miss_sum=0;\n};\n\nbool asc(const Score& left, const Score& right) {\n\treturn left.ac == right.ac ? (left.time == right.time ?  left.team_num > right.team_num : left.time < right.time) :\n\t\t   left.ac > right.ac;\n}\n\nint main(){\n\twhile(1){\n\t\tint M, T, P, R; cin>>M>>T>>P>>R;\n\t\tif(!M && !T && !P && !R) break;\n\t\tvector <Score> score(T);\n\t\tfor(int i=0; i<T; i++) score[i].team_num = i;\n\t\tint m, t, p, j;\n\t\tfor(int i=0; i<R; i++){\n\t\t\tcin>>m>>t>>p>>j;\n\t\t\tt=t-1;//0オリジン\n\t\t\tif(j == 0){\n\t\t\t\tscore[t].ac++;\n\t\t\t\tif(score[t].miss_tmp != 0){\n\t\t\t\t\tscore[t].miss_sum += score[t].miss_tmp[p];\n\t\t\t\t}\n\t\t\t\tscore[t].time += m+(score[t].miss_tmp[p]*20);\n\t\t\t} else{\n\t\t\t\tscore[t].miss_tmp[p]++;\n\t\t\t}\n\t\t}\n\t\tsort(score.begin(), score.end(), asc);\n\t\tfor(int i=0; i<T; i++){\n\t\t\tcout << score[i].team_num+1;\n\t\t\tif(i!=T-1){\n\t\t\t\tif(score[i].ac == score[i+1].ac && score[i].time == score[i+1].time) cout << \"=\";\n\t\t\t\telse cout << \",\";\n\t\t\t}\n\t\t}\n\t\tcout << endl;\n\t}\n\treturn 0;\n}\n"
  },
  {
    "language": "C",
    "code": "#include <stdio.h>\n#include <stdlib.h>\n\ntypedef struct{\n\tint id;\n\tint score;\n\tint time;\n\tint wrong[10];\n}team;\n\nint comp(const void* c1, const void*c2){\n\tteam* t1 = (team*)c1;\n\tteam* t2 = (team*)c2;\n\tif(t1->score - t2->score){\n\t\treturn t2->score - t1->score;\n\t}else if(t1->time - t2->time){\n\t\treturn t1->time - t2->time;\n\t}else{\n\t\treturn t2->id - t1->id;\n\t}\n}\n\nint M,T,P,R;\nteam teams[50];\n\nint main(void){\n\tint i,j;\n\twhile(scanf(\"%d %d %d %d\",&M,&T,&P,&R),M|T|P|R){\n\t\tfor(i=0;i<T;i++){\n\t\t\tteams[i].id=i+1;\n\t\t\tteams[i].score=0;\n\t\t\tteams[i].time=0;\n\t\t\tfor(j=0;j<10;j++){\n\t\t\t\tteams[i].wrong[j]=0;\n\t\t\t}\n\t\t}\n\t\tint m,t,p,j;\n\t\tfor(i=0;i<R;i++){\n\t\t\tscanf(\"%d %d %d %d\",&m,&t,&p,&j);\n\t\t\tif(j==0){\n\t\t\t\tteams[t-1].score++;\n\t\t\t\tteams[t-1].time+=m+20*(teams[t-1].wrong[p-1]);\n\t\t\t}else{\n\t\t\t\tteams[t-1].wrong[p-1]++;\n\t\t\t}\n\t\t}\n\t\tqsort(teams,T,sizeof(team),comp);\n\t\tfor(i=0;i<T;i++){\n\n\t\t\tif(i==0){\n\t\t\t\tprintf(\"%d\",teams[i].id);\n\t\t\t}else{\n\t\t\t\tif(teams[i-1].score==teams[i].score && teams[i-1].time==teams[i].time){\n\t\t\t\t\tprintf(\"=%d\",teams[i].id);\n\t\t\t\t}else{\n\t\t\t\t\tprintf(\",%d\",teams[i].id);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tprintf(\"\\n\");\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C",
    "code": "#include <stdio.h>\ntypedef struct{\n    int team_num;\n    int num;\n    int min;\n    int fault;\n    int rank;\n}TEAM;\n\nint main(){\n    TEAM team[50],tmp;\n    int i,j,rank=1;\n    int m,t,p,k;\n    int M,T,P,R;\n    while(1){\n    scanf(\"%d %d %d %d\", &M, &T, &P, &R);\n    if(M==0&&T==0&&P==0&&R==0) break;\n    for(i=0;i<T;i++){\n        team[i].team_num = i+1;\n        team[i].num      = 0;\n        team[i].min      = 0;\n        team[i].fault    = 0;\n        team[i].rank     = 0;\n    }\n    for(i=0;i<R;i++){\n        scanf(\"%d %d %d %d\", &m, &t, &p, &k);\n        if(m>M) continue;\n        if(k==0){\n            team[t-1].num++;\n            team[t-1].min += m;\n            team[t-1].min += team[t-1].fault*20;\n            team[t-1].fault = 0;\n        }\n        else team[t-1].fault++;\n    }\n\n    for(i=0;i<T;i++){\n        for(j=i+1;j<T;j++){\n            if(team[i].num < team[j].num){\n                tmp     = team[i];\n                team[i] = team[j];\n                team[j] = tmp;\n            }\n            else if(team[i].num == team[j].num){\n                if(team[i].min > team[j].min){\n                    tmp     = team[i];\n                    team[i] = team[j];\n                    team[j] = tmp;\n                }\n                else if((team[i].min == team[j].min)&&(team[i].team_num < team[j].team_num)){\n                    tmp     = team[i];\n                    team[i] = team[j];\n                    team[j] = tmp;\n                }\n            }\n        }\n    }\n    for(i=0;i<T;i++){\n        team[i].rank = rank;\n        if(i!=T-1){\n            if(team[i].num != team[i+1].num || team[i].min != team[i+1].min) rank++;\n        }\n    }\n    printf(\"%d\",team[0].team_num);\n    for(i=1;i<T;i++){\n        if(team[i].rank == team[i-1].rank) printf(\"=\");\n        else                               printf(\",\");\n        printf(\"%d\",team[i].team_num);\n    }\n    printf(\"\\n\");\n    }\n    return 0;\n}"
  },
  {
    "language": "C",
    "code": "#include <stdio.h>\n#include <stdlib.h>\n\ntypedef struct {\n\tint id;\n\tint ac;\n\tint wa[ 11 ];\n\tint time;\n} Data;\n\nData data[ 51 ];\n\nint compare( const void *a, const void *b ) {\n\tData d1 = *(Data *)a, d2 = *(Data *)b;\n\tif ( d1.ac > d2.ac )\n\t\treturn -1;\n\telse if ( d1.ac < d2.ac )\n\t\treturn 1;\n\telse\n\t\tif ( d1.time < d2.time )\n\t\t\treturn -1;\n\t\telse if ( d1.time > d2.time )\n\t\t\treturn 1;\n\t\telse\n\t\t\treturn d2.id - d1.id;\n}\n\nint main( void ) {\n\tint i, T, R;\n\n\twhile ( scanf( \"%*d %d %*d %d\", &T, &R ), T ) {\n\t\tmemset( data + 1, 0, sizeof(Data) * 50 );\n\t\tfor ( i = 1; i <= T; i++ )\n\t\t\tdata[ i ].id = i;\n\n\t\twhile ( R-- ) {\n\t\t\tint m, t, p, j;\n\n\t\t\tscanf( \"%d %d %d %d\", &m, &t, &p, &j );\n\n\t\t\tif ( j )\n\t\t\t\tdata[ t ].wa[ p ]++;\n\t\t\telse {\n\t\t\t\tdata[ t ].ac++;\n\t\t\t\tdata[ t ].time += m + data[ t ].wa[ p ] * 20;\n\t\t\t}\n\t\t}\n\n\t\tqsort( data + 1, T, sizeof(Data), &compare );\n\n\t\tfor ( i = 1; i <= T; i++ )\n\t\t\tprintf( \"%d%c\", data[ i ].id, i == T ? '\\n' : data[ i ].ac == data[ i + 1 ].ac && data[ i ].time == data[ i + 1 ].time ? '=' : ',' );\n\t}\n\n\treturn 0;\n}"
  },
  {
    "language": "C",
    "code": "#include <stdio.h>\n#include <stdlib.h>\n\n\n\nint main(){\n\n    int M, T, P, R;\n    int i, j;\n    int team[2000][5] = {{0,}};\n    int team_tmp[2000][5] = {{0,}};\n    int pen[50][10] = {{0,}};\n    int m, t, p, r;\n\n    int rank[2000] = {0,};\n    int tmp1, tmp0;\n    int g, L;\n\n    while(1){\n        scanf(\"%d%d%d%d\", &M, &T, &P, &R);\n\n        if(M==0 && T==0 && P ==0 && R==0){\n            break;\n        }\n\n        //loop\n\n        // start\n        for(i=0; i<R; i++){\n            scanf(\"%d%d%d%d\", &m, &t, &p, &j);\n\n            if(j==0){\n                team[t][0] = team[t][0] + pen[t][p] + m;\n                team[t][1] ++;\n                team_tmp[t][0] = team[t][0];\n                team_tmp[t][1] = team[t][1];\n            }else{\n                pen[t][p] += 20;\n            }\n\n\n        }\n\n        /*\n        for(t=1; t<=10; t++){\n            //printf(\"0: %d\\n1: %d\\n\\n\", team[t][0], team[t][1]);\n        }\n        */\n\n        for(t=1; t<=T; t++){\n            //printf(\"0: %d\\n1: %d\\n\\n\", team[t][0], team[t][1]);\n        }\n\n        //printf(\"---------------\\n\");\n\n        for(i=1; i<=T; i++){\n            rank[i] = i;\n        }\n\n        /*\n           for(i=1; i<=T; i++){\n           for(L=1; L<=T; L++){\n\n           if(team[L][1] <= team[L+1][1]){\n           tmp0 = rank[L];\n           rank[L] = rank[L+1];\n           rank[L+1] = tmp0;\n\n           tmp0 = team[L][0];\n           team[L][0] = team[L+1][0];\n           team[L+1][0] = tmp0;\n\n           tmp0 = team[L][1];\n           team[L][1] = team[L+1][1];\n           team[L+1][1] = tmp0;\n\n           if(team[L][1] == team[L+1][1] && team[L][0] >= team[L+1][0]){\n           tmp0 = rank[L];\n           rank[L] = rank[L+1];\n           rank[L+1] = tmp0;\n\n           tmp0 = team[L][0];\n           team[L][0] = team[L+1][0];\n           team[L+1][0] = tmp0;\n\n           tmp0 = team[L][1];\n           team[L][1] = team[L+1][1];\n           team[L+1][1] = tmp0;\n\n           if(team[L][1] == team[L+1][1]){\n           tmp0 = rank[L];\n           rank[L] = rank[L+1];\n           rank[L+1] = tmp0;\n\n           tmp0 = team[L][0];\n           team[L][0] = team[L+1][0];\n           team[L+1][0] = tmp0;\n\n           tmp0 = team[L][1];\n           team[L][1] = team[L+1][1];\n           team[L+1][1] = tmp0;\n           }\n           }\n           }\n           }\n           }\n         */\n\n\n        for(i=1; i<T; i++){\n            for(L=i+1; L<=T; L++){\n\n                if(team[i][1] <= team[L][1]){\n                    tmp0 = rank[i];\n                    rank[i] = rank[L];\n                    rank[L] = tmp0;\n\n                    tmp0 = team[i][0];\n                    team[i][0] = team[L][0];\n                    team[L][0] = tmp0;\n\n                    tmp0 = team[i][1];\n                    team[i][1] = team[L][1];\n                    team[L][1] = tmp0;\n                    if(team[i][1] == team[L][1] && team[i][0] >= team[L][0]){\n                        tmp0 = rank[i];\n                        rank[i] = rank[L];\n                        rank[L] = tmp0;\n\n                        tmp0 = team[i][0];\n                        team[i][0] = team[L][0];\n                        team[L][0] = tmp0;\n\n                        tmp0 = team[i][1];\n                        team[i][1] = team[L][1];\n                        team[L][1] = tmp0;\n\n                        if(team[i][0] == team[L][0] && team[i][1] == team[L][1]){\n                            tmp0 = rank[i];\n                            rank[i] = rank[L];\n                            rank[L] = tmp0;\n                            tmp0 = team[i][0];\n                            team[i][0] = team[L][0];\n                            team[L][0] = tmp0;\n\n                            tmp0 = team[i][1];\n                            team[i][1] = team[L][1];\n                            team[L][1] = tmp0;\n                        }\n                    }\n                }\n            }\n        }\n\n        for(t=1; t<=T; t++){\n            //printf(\"0: %d\\n1: %d\\n\\n\", team[t][0], team[t][1]);\n        }\n\n        printf(\"%d\", rank[1]);\n        for(i=2; i<=T; i++){\n            if(team[i-1][0] == team[i][0] && team[i-1][1] == team[i][1]){\n                printf(\"=\");\n            }else{\n                printf(\",\");\n            }\n            printf(\"%d\", rank[i]);\n\n        }\n        printf(\"\\n\");\n\n        //printf(\"========================================\\n\\n\");\n\n        // init\n        for(i=0; i<T; i++){\n            team[i][0] = 0;\n            team[i][1] = 0;\n        }\n\n        for(i=0; i<2000; i++){\n            rank[i] = 0;\n        }\n\n        for(i=0; i<50; i++){\n            for(L=0; L<10; L++){\n                pen[i][L] = 0;\n            }\n        }\n\n    }\n\n\n}"
  },
  {
    "language": "C",
    "code": "#include <stdio.h>\n#include <stdlib.h>\n\n\n\nint main(){\n\n    int M, T, P, R;\n    int i, j;\n    int team[2000][5] = {{0,}};\n    int team_tmp[2000][5] = {{0,}};\n    int pen[50][10] = {{0,}};\n    int m, t, p, r;\n\n    int rank[2000] = {0,};\n    int tmp1, tmp0;\n    int g, L;\n\n    while(1){\n        scanf(\"%d%d%d%d\", &M, &T, &P, &R);\n\n        if(M==0 && T==0 && P ==0 && R==0){\n            break;\n        }\n\n        //loop\n\n        // start\n        for(i=0; i<R; i++){\n            scanf(\"%d%d%d%d\", &m, &t, &p, &j);\n\n            if(j==0){\n                team[t][0] = team[t][0] + pen[t][p] + m;\n                team[t][1] ++;\n                team_tmp[t][0] = team[t][0];\n                team_tmp[t][1] = team[t][1];\n            }else{\n                pen[t][p] += 20;\n            }\n\n\n        }\n\n        /*\n        for(t=1; t<=10; t++){\n            //printf(\"0: %d\\n1: %d\\n\\n\", team[t][0], team[t][1]);\n        }\n        */\n\n        for(t=1; t<=T; t++){\n            //printf(\"0: %d\\n1: %d\\n\\n\", team[t][0], team[t][1]);\n        }\n\n        //printf(\"---------------\\n\");\n\n        for(i=1; i<=T; i++){\n            rank[i] = i;\n        }\n\n        /*\n           for(i=1; i<=T; i++){\n           for(L=1; L<=T; L++){\n\n           if(team[L][1] <= team[L+1][1]){\n           tmp0 = rank[L];\n           rank[L] = rank[L+1];\n           rank[L+1] = tmp0;\n\n           tmp0 = team[L][0];\n           team[L][0] = team[L+1][0];\n           team[L+1][0] = tmp0;\n\n           tmp0 = team[L][1];\n           team[L][1] = team[L+1][1];\n           team[L+1][1] = tmp0;\n\n           if(team[L][1] == team[L+1][1] && team[L][0] >= team[L+1][0]){\n           tmp0 = rank[L];\n           rank[L] = rank[L+1];\n           rank[L+1] = tmp0;\n\n           tmp0 = team[L][0];\n           team[L][0] = team[L+1][0];\n           team[L+1][0] = tmp0;\n\n           tmp0 = team[L][1];\n           team[L][1] = team[L+1][1];\n           team[L+1][1] = tmp0;\n\n           if(team[L][1] == team[L+1][1]){\n           tmp0 = rank[L];\n           rank[L] = rank[L+1];\n           rank[L+1] = tmp0;\n\n           tmp0 = team[L][0];\n           team[L][0] = team[L+1][0];\n           team[L+1][0] = tmp0;\n\n           tmp0 = team[L][1];\n           team[L][1] = team[L+1][1];\n           team[L+1][1] = tmp0;\n           }\n           }\n           }\n           }\n           }\n         */\n\n\n        for(i=1; i<T; i++){\n            for(L=i+1; L<=T; L++){\n\n                if(team[i][1] <= team[L][1]){\n                    tmp0 = rank[i];\n                    rank[i] = rank[L];\n                    rank[L] = tmp0;\n\n                    tmp0 = team[i][0];\n                    team[i][0] = team[L][0];\n                    team[L][0] = tmp0;\n\n                    tmp0 = team[i][1];\n                    team[i][1] = team[L][1];\n                    team[L][1] = tmp0;\n                    if(team[i][1] == team[L][1] && team[i][0] >= team[L][0]){\n                        tmp0 = rank[i];\n                        rank[i] = rank[L];\n                        rank[L] = tmp0;\n\n                        tmp0 = team[i][0];\n                        team[i][0] = team[L][0];\n                        team[L][0] = tmp0;\n\n                        tmp0 = team[i][1];\n                        team[i][1] = team[L][1];\n                        team[L][1] = tmp0;\n\n                        if(team[i][0] == team[L][0] && team[i][1] == team[L][1]){\n                            tmp0 = rank[i];\n                            rank[i] = rank[L];\n                            rank[L] = tmp0;\n                            tmp0 = team[i][0];\n                            team[i][0] = team[L][0];\n                            team[L][0] = tmp0;\n\n                            tmp0 = team[i][1];\n                            team[i][1] = team[L][1];\n                            team[L][1] = tmp0;\n                        }\n                    }\n                }\n            }\n        }\n\n        for(t=1; t<=T; t++){\n            //printf(\"0: %d\\n1: %d\\n\\n\", team[t][0], team[t][1]);\n        }\n\n        printf(\"%d\", rank[1]);\n        for(i=2; i<=T; i++){\n            if(team[i-1][0] == team[i][0] && team[i-1][1] == team[i][1]){\n                printf(\"=\");\n            }else{\n                printf(\",\");\n            }\n            printf(\"%d\", rank[i]);\n\n        }\n        printf(\"\\n\");\n\n        //printf(\"========================================\\n\\n\");\n\n        // init\n        for(i=0; i<T; i++){\n            team[i][0] = 0;\n            team[i][1] = 0;\n        }\n\n        for(i=0; i<2000; i++){\n            rank[i] = 0;\n        }\n\n        for(i=0; i<50; i++){\n            for(L=0; L<10; L++){\n                pen[i][L] = 0;\n            }\n        }\n\n    }\n\n\n    return 0;\n}"
  },
  {
    "language": "C",
    "code": "#include <stdio.h>\n\nint main(void)\n{\n  int M,T,P,R,tID,pID,time,i,j,tmp,jud,rank[50];\n\n  for(;;){\n    scanf(\"%d %d %d %d\", &M, &T, &P, &R);\n    if(!(M|T|P|R)) break;\n\n    int cor[50][10]={0}; int wro[50][10]={0};\n    int sum[50]={0}; int pen[50]={0};\n    for(i=0;i<R;i++){\n      scanf(\"%d %d %d %d\", &time, &tID, &pID, &jud);\n      if(!jud){\n\tcor[tID-1][pID-1]=1; pen[tID-1]+=wro[tID-1][pID-1]*20+time;\n      } else {\n\twro[tID-1][pID-1]++;\n      }\n    }\n    for(i=0;i<T;i++){\n      for(j=0;j<P;j++){\n\tsum[i]+=cor[i][j];\n      }\n      rank[i]=T-1-i;\n    }\n    for(i=1;i<T;i++){\n      for(j=1;j<T;j++){\n\tif(sum[rank[j-1]]<sum[rank[j]]){\n\t  tmp=rank[j-1]; rank[j-1]=rank[j]; rank[j]=tmp;\n\t} else if(sum[rank[j-1]]==sum[rank[j]]&&pen[rank[j-1]]>pen[rank[j]]){\n\t  tmp=rank[j-1]; rank[j-1]=rank[j]; rank[j]=tmp;\n\t}\n      }\n    }\n    for(i=0;i<T-1;i++){\n      if(sum[rank[i]]>sum[rank[i+1]])\n\tprintf(\"%d,\", rank[i]+1);\n      else if(sum[rank[i]]==sum[rank[i+1]]&&pen[rank[i]]<pen[rank[i+1]])\n\tprintf(\"%d,\", rank[i]+1);\n      else if(sum[rank[i]]==sum[rank[i+1]]&&pen[rank[i]]==pen[rank[i+1]])\n\tprintf(\"%d=\", rank[i]+1);\n    }\n    printf(\"%d\\n\", rank[T-1]+1);\n  }\n  \n  return 0;\n}\n"
  },
  {
    "language": "C",
    "code": "#include <stdio.h>\ntypedef struct{\n    int team_num;\n    int num;\n    int min;\n    int fault;\n    int rank;\n}TEAM;\n\nint main(){\n    TEAM team[50],tmp;\n    int i,j,rank=1;\n    int m,t,p,k;\n    int M,T,P,R;\n    while(1){\n    scanf(\"%d %d %d %d\", &M, &T, &P, &R);\n    if(M==0&&T==0&&P==0&&R==0) break;\n    for(i=0;i<T;i++){\n        team[i].team_num = i+1;\n        team[i].num      = 0;\n        team[i].min      = 0;\n        team[i].fault    = 0;\n        team[i].rank     = 0;\n    }\n    for(i=0;i<R;i++){\n        scanf(\"%d %d %d %d\", &m, &t, &p, &k);\n        if(k==0){\n            team[t-1].num++;\n            team[t-1].min += m;\n            team[t-1].min += team[t-1].fault*20;\n            team[t-1].fault = 0;\n        }\n        else team[t-1].fault++;\n    }\n\n    for(i=0;i<T;i++){\n        for(j=i+1;j<T;j++){\n            if(team[i].num < team[j].num){\n                tmp     = team[i];\n                team[i] = team[j];\n                team[j] = tmp;\n            }\n            else if(team[i].num == team[j].num){\n                if(team[i].min > team[j].min){\n                    tmp     = team[i];\n                    team[i] = team[j];\n                    team[j] = tmp;\n                }\n                else if((team[i].min == team[j].min)&&(team[i].team_num < team[j].team_num)){\n                    tmp     = team[i];\n                    team[i] = team[j];\n                    team[j] = tmp;\n                }\n            }\n        }\n    }\n    for(i=0;i<T;i++){\n        team[i].rank = rank;\n        if(i!=T-1){\n            if(team[i].num != team[i+1].num || team[i].min != team[i+1].min) rank++;\n        }\n    }\n    printf(\"%d\",team[0].team_num);\n    for(i=1;i<T;i++){\n        if(team[i].rank == team[i-1].rank) printf(\"=\");\n        else                               printf(\",\");\n        printf(\"%d\",team[i].team_num);\n    }\n    printf(\"\\n\");\n    }\n    return 0;\n}"
  },
  {
    "language": "C",
    "code": "#include <stdio.h>\n#include <stdlib.h>\n#include <memory.h>\nint team[51],wrong[51][11],time[51],count[51];\nint main(void){\n    int M,T,P,R,i,o,m,t,p,j,temp;\n    while(1){\n        for(i=0;i<51;i++)\n            team[i]=time[i]=count[i]=0;\n        memset(wrong,0,sizeof(wrong));\n        scanf(\"%d %d %d %d\",&M,&T,&P,&R);\n        if(!(M+T+P+R))\n            break;\n        for(o=T;o>=1;o--)\n            team[T-o+1]=o;\n        for(i=0;i<R;i++){\n            scanf(\"%d %d %d %d\",&m,&t,&p,&j);\n            if(j)\n                wrong[t][p]++;\n            else{\n                if(wrong[t][p])\n                    time[t]+=wrong[t][p]*20;\n                time[t]+=m;\n                count[t]++;\n            }\n        }\n        for(i=2;i<=T;i++){\n            temp=team[i];\n            for(o=i;o>1;o--){\n                if(count[temp] > count[team[o-1]])\n                    team[o]=team[o-1];\n                else if(count[temp] == count[team[o-1]] && time[temp] < time[team[o-1]])\n                    team[o]=team[o-1];\n                else\n                    break;\n            }\n            team[o]=temp;\n        }\n        for(i=1;i<=T;i++)\n            printf(\"%d%s\",team[i],i==T?\"\\n\":(count[team[i]]==count[team[i+1]] && time[team[i]]==time[team[i+1]]?\"=\":\",\"));\n    }\n    return 0;\n}"
  },
  {
    "language": "C",
    "code": "#include <stdio.h>\ntypedef struct{\n    int team_num;\n    int num;\n    int min;\n    int rank;\n}TEAM;\n\nint main(){\n    TEAM team[50],tmp;\n    int i,j,rank=1;\n    int m,t,p,k;\n    int M,T,P,R;\n    int fault[50][10];\n    while(1){\n    scanf(\"%d %d %d %d\", &M, &T, &P, &R);\n    if(M==0&&T==0&&P==0&&R==0) break;\n    for(i=0;i<T;i++){\n        for(j=0;j<P;j++){\n            fault[i][j] = 0;\n        }\n    }\n    for(i=0;i<T;i++){\n        team[i].team_num = i+1;\n        team[i].num      = 0;\n        team[i].min      = 0;\n        team[i].rank     = 0;\n    }\n    for(i=0;i<R;i++){\n        scanf(\"%d %d %d %d\", &m, &t, &p, &k);\n        if(k==0){\n            team[t-1].num++;\n            team[t-1].min += m;\n            team[t-1].min += fault[t-1][p]*20;\n        }\n        else fault[t-1][p]++;\n    }\n\n    for(i=0;i<T-1;i++){\n        for(j=i+1;j<T;j++){\n            if(team[i].num < team[j].num){\n                tmp     = team[i];\n                team[i] = team[j];\n                team[j] = tmp;\n            }\n            else if(team[i].num == team[j].num){\n                if(team[i].min > team[j].min){\n                    tmp     = team[i];\n                    team[i] = team[j];\n                    team[j] = tmp;\n                }\n                else if((team[i].min == team[j].min)&&(team[i].team_num < team[j].team_num)){\n                    tmp     = team[i];\n                    team[i] = team[j];\n                    team[j] = tmp;\n                }\n            }\n        }\n    }\n    for(i=0;i<T;i++){\n        team[i].rank = rank;\n        if(i!=T-1){\n            if(team[i].num != team[i+1].num || team[i].min != team[i+1].min) rank++;\n        }\n    }\n    printf(\"%d\",team[0].team_num);\n    for(i=1;i<T;i++){\n        if(team[i].rank == team[i-1].rank) printf(\"=\");\n        else                               printf(\",\");\n        printf(\"%d\",team[i].team_num);\n    }\n    printf(\"\\n\");\n    }\n    return 0;\n}"
  },
  {
    "language": "C",
    "code": "#include <stdio.h>\n\nvoid swap(int x,int y){\n    int tmp;\n    \n    tmp = x;\n    x = y;\n    y = tmp;\n    \n}\n\n\nint main(int argc, const char * argv[]) {\n    int m,t,p,r;\n    int mk,tk,pk,jk;\n    int i,j,k,l;\n    \n    \n    while (1) {\n//input\n        scanf(\"%d %d %d %d\",&m,&t,&p,&r);\n        \n        int fp[t][4];//?????????????????????(??????),??£??????????¨???????,??£???????????°,???????????\\??????\n        \n        for (i = t; i > 0 ; t--) { // ????????????????????????????´?\n            fp[t-i][0] = i;\n        }\n        \n        for (i = 0;i < r; i++) {\n            \n            scanf(\"%d %d %d %d\",&mk,&tk,&pk,&jk);\n            \n            if (mk==0 && tk==0 && pk==0 && jk==0) {\n                break;\n            }\n            \n            if (jk==0) {\n                fp[tk][1] += m;\n                fp[tk][2] += 1;\n            }\n\n        }\n        \n//output\n    //????????????\n        //??£???????????°?????????\n        for (i = 0; i < t - 1; i++) {\n            for (j = t-1; j > i; j--) {\n                if (fp[j-1][2] < fp[j][2]) {\n                    //swap\n                    swap(fp[j][0],fp[j-1][0]);\n                    swap(fp[j][1],fp[j-1][1]);\n                    swap(fp[j][2],fp[j-1][2]);\n                }\n            }\n        }\n        \n    //???????±????\n        //????????°??§????????¨??????????????????\n        for (i = 0; i < 10; i++) {\n            if (fp[i][3] != fp[i+1][3]) {\n                for (j = i + 1; j < 10; j++) {\n                    fp[j][3] += 1;\n                }\n            }\n        }\n        //???????????????????????????\n        j=0;\n        for (i = 0; i < 10; i++) {\n            //???????????§?????????????????¢???\n            while (fp[j+i][3] == fp[j+i+1][3]) {\n                j++;\n            }\n            \n            for (k = i; k <= i+j-1; k++) {\n                for (l = i+j; l > k; l--) {\n                    if (fp[l][1] < fp[l-1][1]) {\n                        swap(fp[l][0], fp[l-1][0]);\n                        swap(fp[l][1], fp[l-1][1]);\n                        swap(fp[l][2], fp[l-1][2]);\n                    }\n                }\n            }\n            \n            i = i + j;\n    \n        }\n        \n        for (i = 0; i < 10; i++) {\n            //???????????§?????????????????¢???\n            while (fp[j+i][3] == fp[j+i+1][3]) {\n                j++;\n            }\n            \n            for (k = i; k <= i+j; k++) {\n                if (fp[j+i][1] != fp[j+i+1][1]) {\n                    for (l = i + 1; l < 10; l++) {\n                        fp[j][3] += 1;\n                    }\n                }\n            }\n            \n            i = i + j;\n            \n        }\n        \n        //??¨???\n        for (i = 0; i < t-1; i++) {\n            printf(\"%d\",fp[i][0]);\n            if (fp[i][3] == fp[i+1][3]) {\n                printf(\"=\");\n            }\n            if (fp[i][3] > fp[i+1][3]) {\n                printf(\",\");\n            }\n        }\n        \n    }\n    return 0;\n}"
  },
  {
    "language": "C",
    "code": "//\n//  main.c\n//  ICPC Ranking\n//\n//  Created by x15071xx on 2016/06/16.\n//  Copyright ?? 2016??´ AIT. All rights reserved.\n//\n\n#include <stdio.h>\n#include <stdlib.h>\n#include <math.h>\n\nvoid swap(int team[50][4],int x,int i){\n    int tmp;\n    \n    tmp = team[x][i];\n    team[x][i] = team[x-1][i];\n    team[x-1][i] = tmp;\n    \n}\n\nint main(int argc, const char * argv[]) {\n    \n    while (1) {\n        int m,t,p,r;\n        int sm,st,sp,sr;\n        int i,j,k,l;\n        \n        int team[50][4];//0,???????????°1,??£?????°2,??????3,??????\n        int team_wrong[50][10];\n        \n        \n        scanf(\"%d %d %d %d\",&m,&t,&p,&r);\n        for (i=0; i<50; i++) {\n            for (j=0; j<4; j++) {\n                team[i][j] = 0;\n            }\n        }\n        for (i=0; i<50; i++) {\n            for (j=0; j<10; j++) {\n                team_wrong[i][j] = 0;\n            }\n        }\n\n        for (i=t; i>0; i--) {\n            team[t-i][0] = i;\n        }\n        \n        if (m==0&&t==0&&p==0&&r==0) {\n            break;\n        }\n        \n        for (i=0; i<r; i++) {\n            \n            scanf(\"%d %d %d %d\",&sm,&st,&sp,&sr);\n            \n            if (sr == 0) {\n                //seikai\n                team[abs(st-t)][1]++;\n                team[abs(st-t)][2] += sm + (team_wrong[abs(st-t)][abs(sp-p)] * 20);\n            } else {\n                //huseikai\n                team_wrong[abs(st-t)][abs(sp-p)]++;\n            }\n        }\n        //seitousuu\n        for (i=0; i<t-1; i++) {\n            for (j=t-1; j>i; j--) {\n                if (team[j][1] > team[j-1][1]) {\n                    swap(team,j,0);\n                    swap(team,j,1);\n                    swap(team,j,2);\n                    swap(team,j,3);\n                }\n            }\n        }\n        \n        //zyunniduke\n        for (i=0; i<t; i++) {\n            if (team[i][1] != team[i+1][1]) {\n                for (j=i+1; j<t; j++) {\n                    team[j][3]++;\n                }\n            }\n        }\n        \n        \n        //??????\n        for (i=0; i<t-1; i++) {\n            j=0;\n            while (team[i+j][1]  == team[i+j+1][1]) {\n                j++;\n            }\n            \n            for (k=0; k<i+j; k++) {\n                for (l=i+j; l > k; l--) {\n                    if ((team[l][2] < team[l-1][2] )&& (team[l][3] == team[l-1][3])) {\n                        swap(team,l,0);\n                        swap(team,l,1);\n                        swap(team,l,2);\n                        swap(team,l,3);\n                    }\n                }\n            }\n        }\n        \n        for (i=0; i<t-1; i++) {\n            printf(\"%d\",team[i][0]);\n            \n            if ((team[i][3] != team[i+1][3]) || (team[i][2] != team[i+1][2])) {\n                printf(\",\");\n            } else if ((team[i][3] == team[i+1][3])&&(team[i][2] == team[i+1][2])){\n                printf(\"=\");\n            }\n            \n            if (t-2 == i) {\n                printf(\"%d\\n\",team[i+1][0]);\n                break;\n            }\n        }\n        \n        if (t == 1) {\n            printf(\"%d\\n\",team[0][0]);\n        }\n        \n    }\n    \n    return 0;\n}"
  },
  {
    "language": "C",
    "code": "#include <stdio.h>\n#include <stdlib.h>\n#include <string.h>\n\ntypedef struct {\n    int m;\n    int t;\n    int p;\n    int j;\n} LOG;\n\ntypedef struct {\n    int team;\n    int score;  // 問題数*10000 + 5000 - 合計(提出時間 + ペナルティ) \n} TEAM;\n\n\n\n\nint comp(const void *a, const void *b)\n{\n    int score;\n    \n    score = (*(TEAM *)b).score - (*(TEAM *)a).score;\n\n    if (score != 0){\n        return (score);\n    }\n    return ((*(TEAM *)b).team - (*(TEAM *)a).team);\n}\n\n\nint main(void)\n{\n    int M, T, P, R;\n    LOG log[2000];\n    TEAM team[50];\n    int i, k;\n    \n    while (1){\n        scanf(\"%d%d%d%d\", &M, &T, &P, &R);\n        if (M == 0 && T == 0 && P == 0 && R == 0){\n            break;\n        }\n        \n        for (i = 0; i < T; i++){\n            team[i].team = i + 1;\n            team[i].score = 90000;\n        }\n        \n        for (i = 0; i < R; i++){\n            scanf(\"%d%d%d%d\", &log[i].m, &log[i].t, &log[i].p, &log[i].j);\n            if (log[i].j == 0){\n                team[log[i].t - 1].score += 100000;\n                team[log[i].t - 1].score -= log[i].m;\n                for (k = i - 1; k >= 0; k--){\n                    if (log[k].t == log[i].t && log[k].p == log[i].p && log[k].j != 0){\n                        team[log[i].t - 1].score -= 20;\n                    }\n                }\n            }\n        }\n        \n        qsort(team, T, sizeof(TEAM), comp);\n        \n        for (i = 0; i < T; i++){\n            printf(\"%d\", team[i].team);\n            if (i < T - 1){\n                if (team[i].score > team[i + 1].score){\n                    printf(\",\");\n                }\n                else {\n                    printf(\"=\");\n                }\n            }\n        }\n        printf(\"\\n\");\n    }\n    return (0);\n}\n\n"
  },
  {
    "language": "C",
    "code": "/* \n   AOJ 1187\n   ICPC Ranking\n   2015/7/25\n*/\n\n#include<stdio.h>\n#include<stdlib.h>\n\n#define TEAM_MAX 51\n#define PROB_MAX 11\n\nstruct team_property\n{\n  int solved_prob, total_time, team_n, equal_flag;\n  int problem[PROB_MAX];\n};\n\nvoid aggregate_results(int minutes, int team_num, int problem_num, int penalty, struct team_property* team_results)\n{\n\n\n  if(penalty == 0)\n    {\n      team_results[team_num].solved_prob++;\n      team_results[team_num].total_time += team_results[team_num].problem[problem_num] * 20 + minutes;\n    }\n  else\n    {\n      team_results[team_num].problem[problem_num]++;\n    }\n\n}\n\nint comp(const void* a, const void* b)\n{\n  struct team_property a_team = *(struct team_property*)a;\n  struct team_property b_team = *(struct team_property*)b;\n\n  if(a_team.solved_prob > b_team.solved_prob)\n    {\n      return -1;\n    }\n  else if(a_team.solved_prob < b_team.solved_prob)\n    {\n      return 1;\n    }\n  else\n    {\n      if(a_team.total_time > b_team.total_time)\n\t{\n\t  return 1;\n\t}\n      else if(a_team.total_time < b_team.total_time)\n\t{\n\t  return -1;\n\t}\n      else\n\t{\n\t  if(a_team.team_n > b_team.team_n)\n\t    {\n\t      return -1;\n\t    }\n\t  else\n\t    {\n\t      return 1;\n\t    }\n\t}\n    }\n}\n\nvoid print_result(struct team_property* team_results, int total_teams)\n{\n  \n  int i , solved = -2, time = -2;\n  for(i = 0; i <= total_teams; i++)\n    {\n      if(team_results[i].team_n == 0)\n\t{\n\t  continue;\n\t}\n      \n      /* printf(\"%d.solved_prob = %d\\n%d.total_time = %d\\n\", team_results[i].team_n, team_results[i].solved_prob, team_results[i].team_n, team_results[i].total_time); */\n      /* continue; */\n\n      if(i == 0)\n\t{\n\t  printf(\"%d\", team_results[i].team_n);\n\t  solved = team_results[i].solved_prob;\n\t  time = team_results[i].total_time;\n\t  continue;\n\t}\n\n\n      if(solved == team_results[i].solved_prob && time == team_results[i].total_time)\n\t{\n\t  printf(\"=%d\", team_results[i].team_n);\n\t  continue;\n\t}\n      else\n\t{\n\t  printf(\",%d\", team_results[i].team_n);\t  \n\t}\n      solved = team_results[i].solved_prob;\n      time = team_results[i].total_time;\n    }\n  printf(\"\\n\");\n}\n\nint main(void)\n{\n  int total_minutes, total_teams, total_problems, total_records, minutes, team, problem, penalty, i, j;\n  struct team_property team_results[TEAM_MAX];\n\n\n  while(1)\n    {\n\n      for(i = 0; i < TEAM_MAX; i++)\n\t{\n\t  team_results[i].solved_prob = 0;\n\t  team_results[i].total_time = 0;\n\t  team_results[i].team_n = 0;\n\t  team_results[i].equal_flag = 0;\n\t  for(j = 0; j < PROB_MAX; j++)\n\t    {\n\t      team_results[i].problem[j] = 0;\n\t    }\n\t}\n\n      team_results[0].solved_prob = -1;\n      scanf(\"%d %d %d %d\", &total_minutes, &total_teams, &total_problems, &total_records);\n      \n      for(i = 0; i <= total_teams; i++)\n\t{\n\t  team_results[i].team_n = i;\n\t}\n\n      if(total_minutes == 0 && total_teams == 0 && total_problems == 0 && total_records == 0)\n\t{\n\t  break;\n\t}\n\n      for(i = 0; i < total_records; i++)\n\t{\n\t  scanf(\"%d %d %d %d\", &minutes, &team, &problem, &penalty);\n\t  aggregate_results(minutes, team, problem, penalty, team_results);\n\t}\n      \n      qsort(team_results, total_teams + 1, sizeof(struct team_property), comp);\n      print_result(team_results, total_teams);\n    }\n    \n  return 0;\n}"
  },
  {
    "language": "C",
    "code": "/*\n  ICPCの解答提出のログが与えられたとき， 各チームの順位を表示\n */\n\n#include <stdio.h>\n\n#define T_MAX 50 // チーム数の上限\n#define P_MAX 10 // 問題数の上限\n\n// フラグ\n#define SORTED 0 \n#define NOT_SORTED -1\n\n/* 構造体Team_score: チームあたりのデータ */\ntypedef struct {\n  long time; // 所要時間\n  int num; // 回答問題数\n  int penalty[P_MAX]; // 問題\n} Team_score;\n\nint main(void) {\n  int M, T, P, R; // コンテストの始まりから終わりまでの時間、チーム数、問題数、提出記録の数\n  \n  while (scanf(\"%d %d %d %d\", &M, &T, &P, &R) != EOF) { // 一行ずつデータを読み込む\n    int i, k;\n    int m, t, p, j; // 経過時間、チーム番号、問題番号、正誤\n    Team_score scores[T_MAX];\n    int ranking[T_MAX]; // 順位の順番にチーム番号を格納（ただしチーム番号は-1されている）\n    int flag_sorted;\n    \n    if (M==0 && T==0 && P==0 && R==0) // 終了判定\n      break;\n\n    /* チーム記録（構造体）を0で初期化 */\n    for (i=0; i<T; i++) {\n      scores[i].time = 0;\n      scores[i].num = 0;\n      for (k=0; k<P; k++) {\n\tscores[i].penalty[k] = 0;\n      }\n    }\n\n\n    /* 提出記録を順番に読み込んで、各チームの正解数、所要時間などを計算 */\n    for (i=0; i<R; i++) {\n      \n      scanf(\"%d %d %d %d\", &m, &t, &p, &j); // 提出記録を読み込む\n      if (j == 0) { // もし問題に正解していれば\n\tscores[t-1].time += m + scores[t-1].penalty[p-1] * 20; // 所要時間を加算\n\tscores[t-1].num += 1; // 正解問題数をインクリメント\n      } else { // もし誤答だったら\n\tscores[t-1].penalty[p-1] += 1; // 問題あたりの誤答数をインクリメント\n      }\n    }\n\n    /* 順位を表す配列を初期化 */\n    for (i=0; i<T; i++) \n      ranking[i] = i;\n\n    /* 順位付け: 順位の基準にしたがって、チームの順番をソートして順位付け */\n    do {\n      flag_sorted = NOT_SORTED;\n      \n      for (k=0; k<=T-2; k++) {\n\tif (/* 正答数が多いか */\n\t    (scores[ranking[k]].num < scores[ranking[k+1]].num)\n\t    /* 正当数は同じであるが、所要時間が短いか */\n\t    || (scores[ranking[k]].num == scores[ranking[k+1]].num\n\t\t&& scores[ranking[k]].time > scores[ranking[k+1]].time)\n\t    /* 同じ順位であるが、後ろのほうがチーム番号が多いとき */\n\t    || (scores[ranking[k]].num == scores[ranking[k+1]].num\n\t\t&& scores[ranking[k]].time == scores[ranking[k+1]].time\n\t\t&& ranking[k] < ranking[k+1])) {\n\t  /* チーム番号を入れ替え */\n\t  int tmp = ranking[k];\n\t  ranking[k] = ranking[k+1];\n\t  ranking[k+1] = tmp;\n\n\t  flag_sorted = SORTED; // 入れ替えられた\n\t}\n      }\n    } while (flag_sorted == SORTED); // 入れ替えられなくなったら終了\n\n    /* 順位を表示 */\n    printf(\"%d\", ranking[0]+1); // トップのチームの番号を表示 \n    for (i=1; i<T; i++) {\n      if (scores[ranking[i-1]].num == scores[ranking[i]].num\n\t  && scores[ranking[i-1]].time == scores[ranking[i]].time) { // 前のチームと同順だったら\n\tprintf(\"=%d\", ranking[i]+1); // '='を使って表示\n      } else { //そうでなかったら\n\tprintf(\",%d\", ranking[i]+1); // ','を使って表示\n      }\n    }\n    putchar('\\n');\n  }\n  \n  return 0;\n}"
  },
  {
    "language": "C",
    "code": "#include <stdio.h>\n#include <stdlib.h>\n#include <string.h>\n#include <stdbool.h>\n\n#define MAX_T 50\n#define MAX_P 10\n\ntypedef struct {\n\tint id;\n\tint time;\n\tint problem_submit[MAX_P];\n\tbool problem_accepted[MAX_P];\n} team_log;\n\nteam_log logs[MAX_T];\nint M, T, P, R;\n\nint count_of_accepted(team_log *t)\n{\n\tint i;\n\tint cnt = 0;\n\tfor (i = 0; i < P; i++)\n\t\tif (t->problem_accepted[i])\n\t\t\tcnt++;\n\treturn cnt;\n}\n\nint calc_time(team_log *t)\n{\n\tint i;\n\tint time = t->time;\n\tfor (i = 0; i < P; i++) {\n\t\tif (t->problem_accepted[i]) {\n\t\t\tint count_of_rejected = t->problem_submit[i]-1;\n\t\t\tint penalty_time = 20*count_of_rejected;\n\t\t\ttime += penalty_time;\n\t\t}\n\t}\n\treturn time;\n}\n\nvoid calc_count_and_time(team_log *t, int *cnt, int *time)\n{\n\t*cnt = count_of_accepted(t);\n\t*time = calc_time(t);\n}\n\nint equal(team_log *l, team_log *r)\n{\n\tint cnt_l, cnt_r;\n\tint time_l, time_r;\n\n\tcalc_count_and_time(l, &cnt_l, &time_l);\n\tcalc_count_and_time(r, &cnt_r, &time_r);\n\treturn cnt_l == cnt_r && time_l == time_r;\n}\n\nint compare(const void *x, const void *y)\n{\n\tteam_log *l, *r;\n\tint cnt_l, cnt_r;\n\tint time_l, time_r;\n\n\tl = (team_log *)x;\n\tr = (team_log *)y;\n\tcalc_count_and_time(l, &cnt_l, &time_l);\n\tcalc_count_and_time(r, &cnt_r, &time_r);\n\n\treturn !(cnt_l > cnt_r\n\t\t|| (cnt_l == cnt_r && time_l < time_r)\n\t\t|| (cnt_l == cnt_r && time_l == time_r && l->id > r->id));\n}\n\nvoid initialize()\n{\n\tint i;\n\tfor (i = 0; i < T; i++) {\n\t\tlogs[i].id = i+1;\n\t\tlogs[i].time = 0;\n\t\tmemset(logs[i].problem_submit, 0, sizeof(logs[i].problem_submit));\n\t\tmemset(logs[i].problem_accepted, 0, sizeof(logs[i].problem_accepted));\n\t}\n}\n\nint main(void)\n{\n\tfor (;;) {\n\t\tint i;\n\n\t\tscanf(\"%d %d %d %d\", &M, &T, &P, &R);\n\t\tif (M == 0 && T == 0 && P == 0 && R == 0)\n\t\t\tbreak;\n\n\t\tinitialize();\n\t\tfor (i = 0; i < R; i++) {\n\t\t\tint m, t, p, j;\n\t\t\tscanf(\"%d %d %d %d\", &m, &t, &p, &j);\n\t\t\tt--;\n\t\t\tp--;\n\n\t\t\tlogs[t].problem_submit[p]++;\n\t\t\tif (j == 0) {\n\t\t\t\tlogs[t].time += m;\n\t\t\t\tlogs[t].problem_accepted[p] = true;\n\t\t\t}\n\t\t}\n\n\t\tqsort(logs, T, sizeof(team_log), compare);\n\t\t\n\t\tfor (i = 1; i < T; i++)\n\t\t\tprintf(\"%d%c\", logs[i-1].id, (equal(&logs[i-1], &logs[i])?'=':','));\n\t\tprintf(\"%d\\n\", logs[T-1].id);\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C",
    "code": "\n#include<stdio.h>\n\n#define MaxT 50\n#define MaxP 10\n\nint rank[MaxT];\nint time[MaxT];\nint correct[MaxT];\nint wrong[MaxT][MaxP];\n\nint less(int a, int b) {\n    if(correct[a] != correct[b]) return correct[a] < correct[b];\n    if(time[a] != time[b]) return time[a] > time[b];\n    return a < b;\n}\n\nint main(void) {\n    int M, T, P, R;\n    int m, t, p, j;\n    int i, ii;\n    while(scanf(\"%d %d %d %d\", &M, &T, &P, &R), M | T | P | R) {\n        for(i = 0; i < T; i++) {\n            rank[i] = i;\n            time[i] = 0;\n            correct[i] = 0;\n            for(ii = 0; ii < P; ii++) wrong[i][ii] = 0;\n        }\n\n        for(i = 0; i < R; i++) {\n            scanf(\"%d %d %d %d\", &m, &t, &p, &j);\n            t--;\n            p--;\n            if(j) {\n                wrong[t][p]++;\n            } else {\n                correct[t]++;\n                time[t] += m + 20 * wrong[t][p];\n            }\n        }\n\n        for(i = 0; i < T; i++) {\n            for(ii = 0; ii < T - i - 1; ii++) {\n                if(less(rank[ii], rank[ii + 1])) {\n                    rank[ii] ^= rank[ii + 1];\n                    rank[ii + 1] ^= rank[ii];\n                    rank[ii] ^= rank[ii + 1];\n                }\n            }\n        }\n\n        printf(\"%d\", rank[0] + 1);\n        for(i = 1; i < T; i++) {\n            if((correct[rank[i]] == correct[rank[i - 1]]) && (time[rank[i]] == time[rank[i - 1]])) {\n                printf(\"=\");\n            } else {\n                printf(\",\");\n            }\n            printf(\"%d\", rank[i] + 1);\n        }\n        printf(\"\\n\");\n    }\n    return 0;\n}"
  },
  {
    "language": "C",
    "code": "//\n//  main.c\n//  ICPC Ranking\n//\n//  Created by x15071xx on 2016/06/16.\n//  Copyright ?? 2016??´ AIT. All rights reserved.\n//\n\n#include <stdio.h>\n#include <math.h>\n\nvoid swap(int team[50][4],int x,int i){\n    int tmp;\n    \n    tmp = team[x][i];\n    team[x][i] = team[x-1][i];\n    team[x-1][i] = tmp;\n    \n}\n\nint main(int argc, const char * argv[]) {\n    \n   \n    while (1) {\n        int m,t,p,r;\n        int sm,st,sp,sr;\n        int i,j,k,l;\n        \n        int team[50][4];//0,???????????°1,??£?????°2,??????3,??????\n        int team_wrong[50][10];\n        \n        \n        scanf(\"%d %d %d %d\",&m,&t,&p,&r);\n        for (i=0; i<50; i++) {\n            for (j=0; j<4; j++) {\n                team[i][j] = 0;\n            }\n        }\n        for (i=0; i<50; i++) {\n            for (j=0; j<10; j++) {\n                team_wrong[i][j] = 0;\n            }\n        }\n\n        for (i=t; i>0; i--) {\n            team[t-i][0] = i;\n        }\n        \n        if (m==0&&t==0&&p==0&&r==0) {\n            break;\n        }\n        \n        for (i=0; i<r; i++) {\n            \n            scanf(\"%d %d %d %d\",&sm,&st,&sp,&sr);\n            \n            if (sr == 0) {\n                //seikai\n                team[abs(st-t)][1]++;\n                team[abs(st-t)][2] += sm + (team_wrong[abs(st-t)][abs(sp-p)] * 20);\n            } else {\n                //huseikai\n                team_wrong[abs(st-t)][abs(sp-p)]++;\n            }\n        }\n        //seitousuu\n        for (i=0; i<t-1; i++) {\n            for (j=t-1; j>i; j--) {\n                if (team[j][1] > team[j-1][1]) {\n                    swap(team,j,0);\n                    swap(team,j,1);\n                    swap(team,j,2);\n                    swap(team,j,3);\n                }\n            }\n        }\n        \n        //zyunniduke\n        for (i=0; i<t; i++) {\n            if (team[i][1] != team[i+1][1]) {\n                for (j=i+1; j<t; j++) {\n                    team[j][3]++;\n                }\n            }\n        }\n        \n        \n        //??????\n        for (i=0; i<t-1; i++) {\n            j=0;\n            while (team[i+j][1]  == team[i+j+1][1]) {\n                j++;\n            }\n            \n            for (k=0; k<i+j; k++) {\n                for (l=i+j; l > k; l--) {\n                    if ((team[l][2] < team[l-1][2] )&& (team[l][3] == team[l-1][3])) {\n                        swap(team,l,0);\n                        swap(team,l,1);\n                        swap(team,l,2);\n                        swap(team,l,3);\n                    }\n                }\n            }\n        }\n        \n//        for (i=0; i<t; i++) {\n//            for (j=0; j<4; j++) {\n//                printf(\"%d \",team[i][j]);\n//            }\n//            printf(\"\\n\");\n//        }\n        for (i=0; i<t-1; i++) {\n            printf(\"%d\",team[i][0]);\n            \n            if ((team[i][3] != team[i+1][3]) || (team[i][2] != team[i+1][2])) {\n                printf(\",\");\n            } else if ((team[i][3] == team[i+1][3])&&(team[i][2] == team[i+1][2])){\n                printf(\"=\");\n            }\n            \n            if (t-2 == i) {\n                printf(\"%d\\n\",team[i+1][0]);\n                break;\n            }\n        }\n        \n    }\n    \n    return 0;\n}"
  },
  {
    "language": "C",
    "code": "#include <stdio.h>\n#include <stdlib.h>\nint team[51],wrong[51],time[51],count[51];\nint main(void){\n    int M,T,P,R,i,o,m,t,p,j,temp;\n    while(1){\n        for(i=0;i<51;i++)\n            team[i]=wrong[i]=time[i]=count[i]=0;\n        scanf(\"%d %d %d %d\",&M,&T,&P,&R);\n        if(!(M+T+P+R))\n            break;\n        for(o=T;o>=1;o--)\n            team[T-o+1]=o;\n        for(i=0;i<R;i++){\n            scanf(\"%d %d %d %d\",&m,&t,&p,&j);\n            if(j)\n                wrong[t]++;\n            else{\n                if(wrong[t]){\n                    time[t]+=wrong[t]*20;\n                    wrong[t]=0;\n                }\n                time[t]+=m;\n                count[t]++;\n            }\n        }\n        for(i=2;i<=T;i++){\n            temp=team[i];\n            for(o=i;o>1;o--){\n                if(count[temp] > count[team[o-1]])\n                    team[o]=team[o-1];\n                else if(count[temp] == count[team[o-1]] && time[temp] < time[team[o-1]])\n                    team[o]=team[o-1];\n                else\n                    break;\n            }\n            team[o]=temp;\n        }\n        for(i=1;i<=T;i++)\n            printf(\"%d%s\",team[i],i==T?\"\\n\":(count[team[i]]==count[team[i+1]] && time[team[i]]==time[team[i+1]]?\"=\":\",\"));\n    }\n    return 0;\n}"
  },
  {
    "language": "Kotlin",
    "code": "import java.util.*\n\nfun main(args:Array<String>?): Unit {\n    while (true) {\n        val (m, t, p, r) = readLine()!!.trim().split(' ').map(String::toInt)\n        if (m == 0 && t == 0 && p == 0 && r == 0) return\n        val teams = Array(t) { Team(it + 1, p) }\n        repeat(r) {\n            val (time, team, problem, status) = readLine()!!.trim().split(' ').map(String::toInt)\n            teams[team - 1].submit(problem, time, status)\n        }\n        val sorted = teams.sortedDescending()\n        val result = Stack<Any>()\n        result.push(sorted.first().id)\n        for (id in sorted.indices.drop(1)) {\n            val team = sorted[id]\n            if (result.isEmpty()) {\n                result.push(team.id)\n            } else if (sorted[id - 1].isSameScore(team)) {\n                result.push(\"=\")\n                result.push(team.id)\n            } else {\n                result.push(\",\")\n                result.push(team.id)\n            }\n        }\n        println(result.joinToString(\"\"))\n    }\n}\nclass Team(val id: Int, problemSize: Int): Comparable<Team> {\n    private val problems = Array(problemSize){History()}\n    fun submit(problem: Int, time: Int, status: Int): Unit {\n        problems[problem - 1].submit(time, status)\n    }\n    private fun acCount(): Int = problems.count{it.accepted}\n    private fun sumTime(): Int = problems.sumBy{it.acTime}\n    fun isSameScore(other: Team): Boolean {\n        return acCount() == other.acCount() && sumTime() == other.sumTime()\n    }\n    override fun compareTo(other: Team): Int {\n        return if (acCount() != other.acCount()) acCount().compareTo(other.acCount())\n            else if (sumTime() != other.sumTime()) other.sumTime().compareTo(sumTime())\n            else id.compareTo(other.id)\n    }\n\n    override fun equals(other: Any?): Boolean {\n        return when(other){\n            is Team -> this.compareTo(other) == 0\n            else -> super.equals(other)\n        }\n    }\n}\n\nclass History {\n    private var submitCount: Int = 0\n    private var acceptedTime: Int = -1\n    fun submit(time: Int, status: Int): Unit {\n        if (acceptedTime == -1){\n            if (status == 0){\n                acceptedTime = time\n            }else {\n                submitCount++\n            }\n        }\n    }\n    val accepted: Boolean\n        get() = acceptedTime != -1\n    val acTime: Int\n        get() {\n            return if (accepted) acceptedTime + 20 * submitCount else 0\n        }\n}\n\n"
  },
  {
    "language": "Java",
    "code": "import java.io.BufferedReader;\nimport java.io.BufferedWriter;\nimport java.io.FileInputStream;\nimport java.io.FileNotFoundException;\nimport java.io.FileWriter;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.io.PrintWriter;\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.Comparator;\n\npublic class Main {\n\tpublic static void main(String[] args) throws NumberFormatException,\n\tIOException {\n\t\tContestScanner in = new ContestScanner();\n\t\twhile(true){\n\t\t\tint m = in.nextInt();\n\t\t\tint t = in.nextInt();\n\t\t\tint p = in.nextInt();\n\t\t\tint r = in.nextInt();\n\t\t\tif(m==0) break;\n\t\t\tint[][] wtime = new int[t][p];\n\t\t\tTeam[] team = new Team[t];\n\t\t\tfor(int i=0; i<t; i++){\n\t\t\t\tteam[i] = new Team(i+1);\n\t\t\t}\n\t\t\tfor(int i=0; i<r; i++){\n\t\t\t\tint mi = in.nextInt();\n\t\t\t\tint ti = in.nextInt()-1;\n\t\t\t\tint pi = in.nextInt()-1;\n\t\t\t\tint ji = in.nextInt();\n\t\t\t\tif(ji!=0){\n\t\t\t\t\t// incorrect\n\t\t\t\t\twtime[ti][pi] += 20;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\t// correct\n\t\t\t\tteam[ti].score++;\n\t\t\t\tteam[ti].time += mi + wtime[ti][pi];\n\t\t\t}\n\t\t\tArrays.sort(team);\n\t\t\tStringBuilder sb = new StringBuilder();\n\t\t\tsb.append(team[0].id);\n\t\t\tfor(int i=1; i<t; i++){\n\t\t\t\tif(team[i].comp(team[i-1]) == 0) sb.append(\"=\");\n\t\t\t\telse sb.append(\",\");\n\t\t\t\tsb.append(team[i].id);\n\t\t\t}\n\t\t\tSystem.out.println(sb.toString());\n\t\t}\n\t}\n}\n\nclass Team implements Comparable<Team>{\n\tint time;\n\tint id;\n\tint score;\n\tpublic Team(int id) {\n\t\tthis.id = id;\n\t}\n\t\n\tpublic int comp(Team o) {\n\t\tif(score != o.score) return o.score - score;\n\t\treturn time - o.time;\n\t}\n\t\n\t@Override\n\tpublic int compareTo(Team o) {\n\t\tif(score != o.score) return o.score - score;\n\t\telse if(time != o.time) return time - o.time;\n\t\treturn o.id - id;\n\t}\n}\n\nclass Node{\n\tint id;\n\tint sink;\n\tArrayList<Node> edge = new ArrayList<Node>();\n\tpublic Node(int id) {\n\t\tthis.id = id;\n\t}\n\tpublic void createEdge(Node node) {\n\t\tedge.add(node);\n\t}\n}\n\nclass MyComp implements Comparator<int[]> {\n\tfinal int idx;\n\tpublic MyComp(int idx){\n\t\tthis.idx = idx;\n\t}\n\tpublic int compare(int[] a, int[] b) {\n\t\treturn a[idx] - b[idx];\n\t}\n}\n\nclass Reverse implements Comparator<Integer> {\n\tpublic int compare(Integer arg0, Integer arg1) {\n\t\treturn arg1 - arg0;\n\t}\n}\n\n\nclass ContestWriter {\n\tprivate PrintWriter out;\n\n\tpublic ContestWriter(String filename) throws IOException {\n\t\tout = new PrintWriter(new BufferedWriter(new FileWriter(filename)));\n\t}\n\n\tpublic ContestWriter() throws IOException {\n\t\tout = new PrintWriter(System.out);\n\t}\n\n\tpublic void println(String str) {\n\t\tout.println(str);\n\t}\n\t\n\tpublic void println(Object obj) {\n\t\tout.println(obj);\n\t}\n\n\tpublic void print(String str) {\n\t\tout.print(str);\n\t}\n\t\n\tpublic void print(Object obj) {\n\t\tout.print(obj);\n\t}\n\n\tpublic void close() {\n\t\tout.close();\n\t}\n}\n\nclass ContestScanner {\n\tprivate BufferedReader reader;\n\tprivate String[] line;\n\tprivate int idx;\n\n\tpublic ContestScanner() throws FileNotFoundException {\n\t\treader = new BufferedReader(new InputStreamReader(System.in));\n\t}\n\n\tpublic ContestScanner(String filename) throws FileNotFoundException {\n\t\treader = new BufferedReader(new InputStreamReader(new FileInputStream(\n\t\t\t\tfilename)));\n\t}\n\n\tpublic String nextToken() throws IOException {\n\t\tif (line == null || line.length <= idx) {\n\t\t\tline = reader.readLine().trim().split(\" \");\n\t\t\tidx = 0;\n\t\t}\n\t\treturn line[idx++];\n\t}\n\t\n\tpublic String readLine() throws IOException{\n\t\treturn reader.readLine();\n\t}\n\n\tpublic long nextLong() throws IOException, NumberFormatException {\n\t\treturn Long.parseLong(nextToken());\n\t}\n\n\tpublic int nextInt() throws NumberFormatException, IOException {\n\t\treturn (int) nextLong();\n\t}\n\n\tpublic double nextDouble() throws NumberFormatException, IOException {\n\t\treturn Double.parseDouble(nextToken());\n\t}\n}"
  },
  {
    "language": "Java",
    "code": "import java.util.Arrays;\nimport java.util.Comparator;\nimport java.util.Scanner;\n\npublic class Main {\n\tpublic static void main(String[] args) {\n\t\tScanner sc = new Scanner(System.in);\n\n\t\tStringBuilder sb = new StringBuilder();\n\t\twhile(true) {\n\t\t\tint M = sc.nextInt();\n\t\t\tint T = sc.nextInt();\n\t\t\tint P = sc.nextInt();\n\t\t\tint R = sc.nextInt();\n\t\t\tif(M == 0 && T == 0 && P == 0 && R == 0) {\n\t\t\t\tsc.close();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tint[] m = new int[R];\n\t\t\tint[] t = new int[R];\n\t\t\tint[] p = new int[R];\n\t\t\tint[] j = new int[R];\n\t\t\tfor(int i = 0; i < R; i++) {\n\t\t\t\tm[i] = sc.nextInt();\n\t\t\t\tt[i] = sc.nextInt();\n\t\t\t\tp[i] = sc.nextInt();\n\t\t\t\tj[i] = sc.nextInt();\n\t\t\t}\n\t\t\tsb.append(solve(T, P, R, m, t, p, j));\n\t\t\tsb.append(\"\\n\");\n\t\t}\n\t\tSystem.out.print(sb.toString());\n\t\t//System.out.print(debug.toString());\n\t}\n\tstatic StringBuilder debug = new StringBuilder();\n\tstatic String solve(int T, int P, int R, int[] m, int[] t, int[] p, int[] j) {\n\t\tStringBuilder sb = new StringBuilder();\n\t\tData[] d = new Data[T];\n\t\tfor(int i = 0; i < T; i++) {\n\t\t\td[i] = new Data(i + 1, 0, 0);\n\t\t\td[i].setP(P);\n\t\t}\n\t\tfor(int i = 0; i < R; i++) {\n\t\t\tif(j[i] == 0) {\n\t\t\t\td[t[i] - 1].n += 1;\n\t\t\t\td[t[i] - 1].time += m[i] + 20 * d[t[i] - 1].cnt[p[i] - 1];\n\t\t\t}else {\n\t\t\t\td[t[i] - 1].cnt[p[i] - 1] += 1;\n\t\t\t}\n\t\t}\n\t\tArrays.sort(d, new MyComparator());\n\t\tfor(int i = 0; i < T; i++) {\n\t\t\tdebug.append(d[i].id).append(\" \");\n\t\t}\n\t\tdebug.append(\"\\n\");\n\t\tint[] rank = new int[T];\n\t\tfor(int i = 1; i < T; i++) {\n\t\t\tif(d[i - 1].n > d[i].n) {\n\t\t\t\trank[i] = rank[i - 1] + 1;\n\t\t\t}else {\n\t\t\t\tif(d[i - 1].time == d[i].time) {\n\t\t\t\t\trank[i] = rank[i - 1];\n\t\t\t\t}else {\n\t\t\t\t\trank[i] = rank[i - 1] + 1;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tint[] g = new int[rank[T - 1] + 1];\n\t\tif(g.length == 1) {\n\t\t\tString temp = \"\";\n\t\t\tfor(int i = T; i >= 1; i--) {\n\t\t\t\tif(i == T) {\n\t\t\t\t\ttemp += Integer.toString(i);\n\t\t\t\t}else {\n\t\t\t\t\ttemp += \"=\" + Integer.toString(i);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn temp;\n\t\t}\n\t\tfor(int i = 0; i < T; i++) {\n\t\t\tg[rank[i]]++;\n\t\t}\n\t\tString[] s = new String[g.length];\n\t\tint idx = 0;\n\t\tfor(int i = 0; i < g.length; i++) {\n\t\t\tif(g[i] == 1) {\n\t\t\t\ts[i] = Integer.toString(d[idx].id);\n\t\t\t\tidx++;\n\t\t\t}else {\n\t\t\t\tString temp = \"\";\n\t\t\t\tfor(int l = 0; l < g[i]; l++) {\n\t\t\t\t\tif(l == 0) {\n\t\t\t\t\t\ttemp += Integer.toString(d[idx].id);\n\t\t\t\t\t}else {\n\t\t\t\t\t\ttemp += \"=\" + Integer.toString(d[idx].id);\n\t\t\t\t\t}\n\t\t\t\t\tidx++;\n\t\t\t\t}\n\t\t\t\ts[i] = temp;\n\t\t\t}\n\t\t}\n\t\tfor(int i = 0; i < g.length; i++) {\n\t\t\tif(i == 0) {\n\t\t\t\tsb.append(s[i]);\n\t\t\t}else {\n\t\t\t\tsb.append(\",\").append(s[i]);\n\t\t\t}\n\t\t}\n\t\treturn sb.toString();\n\t}\n\tstatic class Data{\n\t\tint id, n, time, P;\n\t\tint []cnt;\n\t\tpublic Data(int id, int n, int time) {\n\t\t\tthis.id = id;\n\t\t\tthis.n = n;\n\t\t\tthis.time = time;\n\t\t}\n\t\tpublic void setP(int P) {\n\t\t\tcnt = new int[P];\n\t\t}\n\t}\n\tstatic class MyComparator implements Comparator<Data>{\n\t\t@Override\n\t\tpublic int compare(Data d2, Data d1) {\n\t\t\tif(d1.n > d2.n) {\n\t\t\t\treturn 1;\n\t\t\t}else if(d1.n < d2.n){\n\t\t\t\treturn -1;\n\t\t\t}else {\n\t\t\t\tif(d1.time > d2.time) {\n\t\t\t\t\treturn -1;\n\t\t\t\t}else if(d1.time == d2.time) {\n\t\t\t\t\tif(d1.id > d2.id) {\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t}else {\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t}\n\t\t\t\t}else {\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n"
  },
  {
    "language": "Java",
    "code": "import java.util.Arrays;\nimport java.util.Scanner;\nimport java.util.stream.IntStream;\n\npublic class Main {\n    static class Team {\n    \tint team, solved, elapsed;\n    \tint[] penalty;\n    \tTeam(int t) {\n    \t\tteam =t ; \n    \t\tpenalty= new int[11];\n    \t}\n    }\n    \n    public static void main(String[] args) {\n        try(Scanner sc = new Scanner(System.in)){\n            while(sc.hasNext()) {\n                int M = sc.nextInt();\n                int T = sc.nextInt();\n                int P = sc.nextInt();\n                int R = sc.nextInt();\n                if(T == 0) break;\n                Team[] ts = IntStream.range(0, T).mapToObj(t -> new Team(t+1)).toArray(Team[]::new);\n                \n                IntStream.range(0, R).forEach(dummy -> {\n                    int m = sc.nextInt();\n                    int t = sc.nextInt()-1;\n                    int p = sc.nextInt();\n                    int j = sc.nextInt();\n                    if(j == 0) {\n                        ts[t].solved++;\n                        ts[t].elapsed += m;\n                        ts[t].elapsed += ts[t].penalty[p];\n                    }\n                    else {\n                        ts[t].penalty[p] += 20;\n                    }\n                });//準備\n                \n                Arrays.sort(ts, (t1, t2)->{\n                \tif(t1.solved != t2.solved) {\n                \t\treturn t2.elapsed - t1.elapsed;\n                \t}\n                \telse if(t1.elapsed != t2.elapsed) {\n                \t\treturn t1.solved - t2.solved;\n                \t}\n                \treturn t2.team - t1.team;\n                });//問題数降順→経過時間で昇順\n\n                int score = ts[0].solved * M + ts[0].elapsed;\n                \n                System.out.print(ts[0].team);\n                for(int i = 1; i < T; i++) {\n                    int s = ts[i].solved * M + ts[i].elapsed;//同順位のものを探す\n                    System.out.print(s == score ? \"=\" : \",\");\n                    System.out.print(ts[i].team);\n                    score = s;\n                }\n                \n                System.out.println();\n            }\n        }\n    }\n}\n"
  },
  {
    "language": "Java",
    "code": "import java.io.BufferedReader;\nimport java.io.BufferedWriter;\nimport java.io.FileInputStream;\nimport java.io.FileNotFoundException;\nimport java.io.FileWriter;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.io.PrintWriter;\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.Comparator;\n\npublic class Main {\n\tpublic static void main(String[] args) throws NumberFormatException,\n\tIOException {\n\t\tContestScanner in = new ContestScanner();\n\t\twhile(true){\n\t\t\tint m = in.nextInt();\n\t\t\tint t = in.nextInt();\n\t\t\tint p = in.nextInt();\n\t\t\tint r = in.nextInt();\n\t\t\tif(m==0) break;\n\t\t\tint[][] wtime = new int[t][p];\n\t\t\tTeam[] team = new Team[t];\n\t\t\tfor(int i=0; i<t; i++){\n\t\t\t\tteam[i] = new Team(i+1);\n\t\t\t}\n\t\t\tfor(int i=0; i<r; i++){\n\t\t\t\tint mi = in.nextInt();\n\t\t\t\tint ti = in.nextInt()-1;\n\t\t\t\tint pi = in.nextInt()-1;\n\t\t\t\tint ji = in.nextInt();\n\t\t\t\tif(ji==1){ // incorrect\n\t\t\t\t\twtime[ti][pi] += 20;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tteam[ti].score++;\n\t\t\t\tteam[ti].time += mi + wtime[ti][pi];\n\t\t\t}\n\t\t\tArrays.sort(team);\n\t\t\tStringBuilder sb = new StringBuilder();\n\t\t\tsb.append(team[0].id);\n\t\t\tfor(int i=1; i<t; i++){\n\t\t\t\tif(team[i].comp(team[i-1]) == 0) sb.append(\"=\");\n\t\t\t\telse sb.append(\",\");\n\t\t\t\tsb.append(team[i].id);\n\t\t\t}\n\t\t\tSystem.out.println(sb.toString());\n\t\t}\n\t}\n}\n\nclass Team implements Comparable<Team>{\n\tint time;\n\tint id;\n\tint score;\n\tpublic Team(int id) {\n\t\tthis.id = id;\n\t}\n\t\n\tpublic int comp(Team o) {\n\t\tif(score != o.score) return o.score - score;\n\t\treturn time - o.time;\n\t}\n\t\n\t@Override\n\tpublic int compareTo(Team o) {\n\t\tif(score != o.score) return o.score - score;\n\t\telse if(time != o.time) return time - o.time;\n\t\treturn o.id - id;\n\t}\n}\n\nclass Node{\n\tint id;\n\tint sink;\n\tArrayList<Node> edge = new ArrayList<Node>();\n\tpublic Node(int id) {\n\t\tthis.id = id;\n\t}\n\tpublic void createEdge(Node node) {\n\t\tedge.add(node);\n\t}\n}\n\nclass MyComp implements Comparator<int[]> {\n\tfinal int idx;\n\tpublic MyComp(int idx){\n\t\tthis.idx = idx;\n\t}\n\tpublic int compare(int[] a, int[] b) {\n\t\treturn a[idx] - b[idx];\n\t}\n}\n\nclass Reverse implements Comparator<Integer> {\n\tpublic int compare(Integer arg0, Integer arg1) {\n\t\treturn arg1 - arg0;\n\t}\n}\n\n\nclass ContestWriter {\n\tprivate PrintWriter out;\n\n\tpublic ContestWriter(String filename) throws IOException {\n\t\tout = new PrintWriter(new BufferedWriter(new FileWriter(filename)));\n\t}\n\n\tpublic ContestWriter() throws IOException {\n\t\tout = new PrintWriter(System.out);\n\t}\n\n\tpublic void println(String str) {\n\t\tout.println(str);\n\t}\n\t\n\tpublic void println(Object obj) {\n\t\tout.println(obj);\n\t}\n\n\tpublic void print(String str) {\n\t\tout.print(str);\n\t}\n\t\n\tpublic void print(Object obj) {\n\t\tout.print(obj);\n\t}\n\n\tpublic void close() {\n\t\tout.close();\n\t}\n}\n\nclass ContestScanner {\n\tprivate BufferedReader reader;\n\tprivate String[] line;\n\tprivate int idx;\n\n\tpublic ContestScanner() throws FileNotFoundException {\n\t\treader = new BufferedReader(new InputStreamReader(System.in));\n\t}\n\n\tpublic ContestScanner(String filename) throws FileNotFoundException {\n\t\treader = new BufferedReader(new InputStreamReader(new FileInputStream(\n\t\t\t\tfilename)));\n\t}\n\n\tpublic String nextToken() throws IOException {\n\t\tif (line == null || line.length <= idx) {\n\t\t\tline = reader.readLine().trim().split(\" \");\n\t\t\tidx = 0;\n\t\t}\n\t\treturn line[idx++];\n\t}\n\t\n\tpublic String readLine() throws IOException{\n\t\treturn reader.readLine();\n\t}\n\n\tpublic long nextLong() throws IOException, NumberFormatException {\n\t\treturn Long.parseLong(nextToken());\n\t}\n\n\tpublic int nextInt() throws NumberFormatException, IOException {\n\t\treturn (int) nextLong();\n\t}\n\n\tpublic double nextDouble() throws NumberFormatException, IOException {\n\t\treturn Double.parseDouble(nextToken());\n\t}\n}"
  },
  {
    "language": "Java",
    "code": "import java.util.Arrays;\nimport java.util.Scanner;\nimport java.util.stream.IntStream;\n\npublic class Main {\n    static class Team {\n    \tint team, solved, elapsed, penalty;\n    \tTeam(int t) {\n    \t\tteam =t ; \n    \t}\n    }\n    \n    public static void main(String[] args) {\n        try(Scanner sc = new Scanner(System.in)){\n            while(sc.hasNext()) {\n                int M = sc.nextInt();\n                int T = sc.nextInt();\n                int P = sc.nextInt();\n                int R = sc.nextInt();\n                if(T == 0) break;\n                Team[] ts = IntStream.range(0, T).mapToObj(t -> new Team(t+1)).toArray(Team[]::new);\n                \n                IntStream.range(0, R).forEach(dummy -> {\n                    int m = sc.nextInt();\n                    int t = sc.nextInt()-1;\n                    int p = sc.nextInt();\n                    int j = sc.nextInt();\n                    if(j == 0) {\n                        ts[t].solved |=  (1 << p);//bitで何問解いたかカウント\n                        ts[t].elapsed = m;\n                    }\n                    else {\n                        ts[t].penalty += 20;\n                    }\n                });//準備\n                \n                IntStream.range(0, T).forEach(t -> {\n                    ts[t].solved= Integer.bitCount(ts[t].solved);\n                    ts[t].elapsed += ts[t].penalty;\n                });//解いてたらペナルティ分を足す\n                \n                Arrays.sort(ts, (t1, t2)->{\n                    if(t1.solved == t2.solved) {\n                        return t1.elapsed - t2.elapsed;\n                    }\n                    return t2.solved - t1.solved;\n                });//問題数降順→経過時間で昇順\n                \n                int score = ts[0].solved * M + ts[0].elapsed;\n                \n                System.out.print(ts[0].team);\n                for(int i = 1; i < T; i++) {\n                    int s = ts[i].solved * M + ts[i].elapsed;//同順位のものを探す\n                    System.out.print(s == score ? \"=\" : \",\");\n                    System.out.print(ts[i].team);\n                    score = s;\n                }\n                \n                System.out.println();\n            }\n        }\n    }\n}\n"
  },
  {
    "language": "Java",
    "code": "\nimport java.io.*;\nimport java.util.*;\n \npublic class Main{\n\tclass Team{\n\t\tint solve;\n\t\tint pena;\n\t\tint idx;\n\t\tint[] problems;\n\t\t\n\t\tpublic Team(int idx, int P){\n\t\t\tthis.idx = idx;\n\t\t\tproblems = new int[P];\n\t\t}\n\t\t\n\t\tpublic boolean equals(Team o){\n\t\t\tif(solve == o.solve && pena == o.pena){\n\t\t\t\treturn true;\n\t\t\t}else{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t}\n \n\tpublic void solve(){\n\t\twhile(true){\n\t\t\tint M = nextInt();\n\t\t\tint T = nextInt();\n\t\t\tint P = nextInt();\n\t\t\tint R = nextInt();\n\t\t\tif(M == 0) return;\n\t\t\tTeam[] teams = new Team[T];\n\t\t\tfor(int i = 0; i < T; i++){\n\t\t\t\tteams[i] = new Team(i, P);\n\t\t\t}\n\t\t\t\n\t\t\tfor(int i = 0; i < R; i++){\n\t\t\t\tint m = nextInt();\n\t\t\t\tint t = nextInt() - 1;\n\t\t\t\tint p = nextInt() - 1;\n\t\t\t\tint j = nextInt();\n\t\t\t\tif(j == 0){\n\t\t\t\t\tteams[t].pena += m + teams[t].problems[p] * 20;\n\t\t\t\t\tteams[t].solve ++;\n\t\t\t\t}else{\n\t\t\t\t\tteams[t].problems[p]++;\n\t\t\t\t}\n\t\t\t}\n\t\t\tArrays.sort(teams, (a,b) -> {\n\t\t\t\tif(a.solve == b.solve){\n\t\t\t\t\tif(a.pena == b.pena){\n\t\t\t\t\t\treturn Integer.compare(b.idx, a.idx);\n\t\t\t\t\t}else{\n\t\t\t\t\t\treturn Integer.compare(a.pena, b.pena);\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\treturn Integer.compare(b.solve, a.solve);\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tout.print(teams[0].idx + 1);\n\t\t\tTeam prev = teams[0];\n\t\t\tfor(int i = 1; i < T; i++){\n\t\t\t\tif(prev.equals(teams[i])){\n\t\t\t\t\tout.print(\"=\");\n\t\t\t\t}else{\n\t\t\t\t\tout.print(\",\");\n\t\t\t\t}\n\t\t\t\tprev = teams[i];\n\t\t\t\tout.print(teams[i].idx + 1);\n\t\t\t}\n\t\t\tout.println();\n\t\t}\n\t}\n\tpublic int sqrt(int v){\n\t\tfor(int i = 1; i * i <= v; i++){\n\t\t\tif(i * i == v) return i;\n\t\t}\n\t\treturn -1;\n\t}\n\t\n\tprivate static PrintWriter out;\n\tpublic static void main(String[] args){\n\t\tout = new PrintWriter(System.out);\n\t\tnew Main().solve();\n\t\tout.flush();\n\t}\n\t\n\t\n\t\n\tpublic static int nextInt(){\n\t\tint num = 0;\n\t\tString str = next();\n\t\tboolean minus = false;\n\t\tint i = 0;\n\t\tif(str.charAt(0) == '-'){\n\t\t\tminus = true;\n\t\t\ti++;\n\t\t}\n\t\tint len = str.length();\n\t\tfor(;i < len; i++){\n\t\t\tchar c = str.charAt(i);\n\t\t\tif(!('0' <= c && c <= '9')) throw new RuntimeException();\n\t\t\tnum = num * 10 + (c - '0');\n\t\t}\n\t\treturn minus ? -num : num;\n\t}\n\t\n\tpublic static long nextLong(){\n\t\tlong num = 0;\n\t\tString str = next();\n\t\tboolean minus = false;\n\t\tint i = 0;\n\t\tif(str.charAt(0) == '-'){\n\t\t\tminus = true;\n\t\t\ti++;\n\t\t}\n\t\tint len = str.length();\n\t\tfor(;i < len; i++){\n\t\t\tchar c = str.charAt(i);\n\t\t\tif(!('0' <= c && c <= '9')) throw new RuntimeException();\n\t\t\tnum = num * 10l + (c - '0');\n\t\t}\n\t\treturn minus ? -num : num;\n\t}\n\tpublic static String next(){\n\t\tint c;\n\t\twhile(!isAlNum(c = read())){}\n\t\tStringBuilder build = new StringBuilder();\n\t\tbuild.append((char)c);\n\t\twhile(isAlNum(c = read())){\n\t\t\tbuild.append((char)c);\n\t\t}\n\t\treturn build.toString();\n\t}\n\t\n\t\n\tprivate static byte[] inputBuffer = new byte[1024];\n\tprivate static int bufferLength = 0;\n\tprivate static int bufferIndex = 0;\n\tprivate static int read(){\n\t\tif(bufferLength < 0) throw new RuntimeException();\n\t\tif(bufferIndex >= bufferLength){\n\t\t\ttry{\n\t\t\t\tbufferLength = System.in.read(inputBuffer);\n\t\t\t\tbufferIndex = 0;\n\t\t\t}catch(IOException e){\n\t\t\t\tthrow new RuntimeException(e);\n\t\t\t}\n\t\t\tif(bufferLength <= 0) return (bufferLength = -1);\n\t\t}\n\t\treturn inputBuffer[bufferIndex++];\n\t}\n\t\n\tprivate static boolean isAlNum(int c){\n\t\treturn '!' <= c && c <= '~';\n\t}\n}"
  },
  {
    "language": "Java",
    "code": "import java.util.*;\nimport java.lang.*;\nimport java.math.*;\nimport java.io.*;\nimport static java.lang.Math.*;\nimport static java.util.Arrays.*;\nimport static java.util.Collections.*;\n\n// Integral Rectangles\n// 2013/08/13\npublic class Main{\n\tScanner sc=new Scanner(System.in);\n\n\tint nTeams, nProblems, nTick;\n\tint[] ticks, teams, problems, results;\n\n\tvoid run(){\n\t\tfor(;;){\n\t\t\tint M=sc.nextInt();\n\t\t\tnTeams=sc.nextInt();\n\t\t\tnProblems=sc.nextInt();\n\t\t\tnTick=sc.nextInt();\n\t\t\tif((M|nTeams|nProblems|nTick)==0){\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tticks=new int[nTick];\n\t\t\tteams=new int[nTick];\n\t\t\tproblems=new int[nTick];\n\t\t\tresults=new int[nTick];\n\t\t\tfor(int i=0; i<nTick; i++){\n\t\t\t\tticks[i]=sc.nextInt();\n\t\t\t\tteams[i]=sc.nextInt()-1;\n\t\t\t\tproblems[i]=sc.nextInt()-1;\n\t\t\t\tresults[i]=sc.nextInt();\n\t\t\t}\n\t\t\tsolve();\n\t\t}\n\t}\n\n\tvoid solve(){\n\t\tint[][] states=new int[nTeams][nProblems];\n\t\tint[][] times=new int[nTeams][nProblems];\n\t\tfor(int i=0; i<nTick; i++){\n\t\t\tif(results[i]==0){\n\t\t\t\tstates[teams[i]][problems[i]]=1;\n\t\t\t\ttimes[teams[i]][problems[i]]+=ticks[i];\n\t\t\t}else{\n\t\t\t\ttimes[teams[i]][problems[i]]+=20;\n\t\t\t}\n\t\t}\n\t\tint[] ACs=new int[nTeams];\n\t\tint[] penalties=new int[nTeams];\n\t\tfor(int j=0; j<nTeams; j++){\n\t\t\tfor(int i=0; i<nProblems; i++){\n\t\t\t\tACs[j]+=states[j][i];\n\t\t\t\tpenalties[j]+=states[j][i]*times[j][i];\n\t\t\t}\n\t\t}\n\t\tint[] _=new int[nTeams];\n\t\tfor(int i=0; i<nTeams; i++){\n\t\t\t_[i]=i;\n\t\t}\n\t\tfor(int i=0; i<nTeams; i++){\n\t\t\tfor(int j=i+1; j<nTeams; j++){\n\t\t\t\tif(comp(ACs[_[i]], penalties[_[i]], _[i], ACs[_[j]],\n\t\t\t\t\t\tpenalties[_[j]], _[j])>0){\n\t\t\t\t\tint t=_[i];\n\t\t\t\t\t_[i]=_[j];\n\t\t\t\t\t_[j]=t;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tfor(int i=0; i<nTeams; i++){\n\t\t\tprint(1+_[i]+\"\");\n\t\t\tif(i<nTeams-1){\n\t\t\t\tprint(comp(ACs[_[i]], penalties[_[i]], ACs[_[i+1]],\n\t\t\t\t\t\tpenalties[_[i+1]])==0?\"=\":\",\");\n\t\t\t}\n\t\t}\n\t\tprintln(\"\");\n\t}\n\n\tint comp(int ac1, int time1, int ac2, int time2){\n\t\tif(ac1!=ac2){\n\t\t\treturn -(ac1-ac2);\n\t\t}else{\n\t\t\treturn time1-time2;\n\t\t}\n\t}\n\n\tint comp(int ac1, int time1, int id1, int ac2, int time2, int id2){\n\t\tif(comp(ac1, time1, ac2, time2)!=0){\n\t\t\treturn comp(ac1, time1, ac2, time2);\n\t\t}else{\n\t\t\treturn -(id1-id2);\n\t\t}\n\t}\n\n\tvoid print(String s){\n\t\tSystem.out.print(s);\n\t}\n\n\tvoid println(String s){\n\t\tSystem.out.println(s);\n\t}\n\n\tpublic static void main(String[] args){\n\t\tnew Main().run();\n\t}\n}"
  },
  {
    "language": "Java",
    "code": "import java.util.Arrays;\nimport java.util.Scanner;\nimport java.util.stream.IntStream;\n\npublic class Main {\n    static class Team {\n    \tint team, solved, elapsed, penalty;\n    \tTeam(int t) {\n    \t\tteam =t ; \n    \t}\n    }\n    \n    public static void main(String[] args) {\n        try(Scanner sc = new Scanner(System.in)){\n            while(sc.hasNext()) {\n                int M = sc.nextInt();\n                int T = sc.nextInt();\n                int P = sc.nextInt();\n                int R = sc.nextInt();\n                if(T == 0) break;\n                Team[] ts = IntStream.range(0, T).mapToObj(t -> new Team(t+1)).toArray(Team[]::new);\n                \n                IntStream.range(0, R).forEach(dummy -> {\n                    int m = sc.nextInt();\n                    int t = sc.nextInt()-1;\n                    int p = sc.nextInt();\n                    int j = sc.nextInt();\n                    if(j == 0) {\n                        ts[t].solved |=  (1 << p);//bitで何問解いたかカウント\n                        ts[t].elapsed = m;\n                    }\n                    else {\n                        ts[t].penalty += 20;\n                    }\n                });//準備\n                \n                IntStream.range(0, T).forEach(t -> {\n                    ts[t].solved= Integer.bitCount(ts[t].solved);\n                    ts[t].elapsed += ts[t].penalty;\n                });//解いてたらペナルティ分を足す\n                \n                Arrays.sort(ts, (t1, t2)->{\n                    if(t1.solved == t2.solved) {\n                        return t1.elapsed - t2.elapsed;\n                    }\n                    return t2.solved - t1.solved;\n                });//問題数降順→経過時間で昇順\n                \n                int score = ts[0].solved * M + ts[0].elapsed;\n                \n                System.out.print(ts[0].team);\n                for(int i = 1; i < T; i++) {\n                    int s = ts[i].solved * M + ts[i].elapsed;//同順位のものを探す\n                    System.out.print(s == score ? \"=\" : \",\");\n                    System.out.print(ts[i].team);\n                    score = s;\n                }\n                \n                //IntStream.range(0, T).forEach(i -> System.out.print(” ” + ts[i].team + “(” + ts[i].solved + “,” + ts[i].elapsed + “)”));\n                System.out.println();\n            }\n        }\n    }\n}\n"
  },
  {
    "language": "Java",
    "code": "import java.util.*;\nimport java.util.stream.Collectors;\n\n/**\n * Created by ctare on 2017/05/08.\n */\npublic class Main {\n    private static final int Tn = 50 + 1;\n    private static final int Mn = 300 + 1;\n    private static final int Pn = 10 + 1;\n    private static ArrayList<String> buf;\n    private static int[][] simple_rank(int[][] team, Set<Integer> exteam){\n        int[][] winner = new int[Pn][Tn];\n        for (int i = 0; i < team.length; i++) {\n            int[] ints = team[i];\n            if(exteam.contains(i)) winner[Arrays.stream(ints).sum()][i] = 1;\n        }\n        return winner;\n    }\n\n    private static void rank(int[] team, int[][][] team_sub){\n        TreeMap<Integer, ArrayList<Integer>> rankresult = new TreeMap<>();\n        for (int i = 0; i < team.length; i++) {\n            if(team[i] == 1){\n                int sum_time = 0;\n                for (int[] ms : team_sub[i]) {\n                    sum_time += calc_point(ms);\n                }\n                ArrayList<Integer> rr = rankresult.getOrDefault(sum_time, new ArrayList<>());\n                rr.add(i);\n                rankresult.put(sum_time, rr);\n//                System.out.print(\"--- \");\n//                System.out.print(sum_time);\n//                System.out.println(\" : \" + i);\n            }\n        }\n//        System.out.println(rankresult.values());\n//        rankresult.values().forEach(e -> {\n//            System.out.println(String.join(\"=\", e.stream().sorted(Comparator.reverseOrder()).map(Object::toString).collect(Collectors.toList())));\n//        });\n        rankresult.values().forEach(e -> {\n            buf.add(String.join(\"=\", e.stream().sorted(Comparator.reverseOrder()).map(Object::toString).collect(Collectors.toList())));\n        });\n    }\n\n    private static int calc_point(int[] times){\n//        System.out.println(\"calcpoint\");\n//        System.out.println(Arrays.toString(times));\n        int result = 0;\n        forelse: {\n            for (int i = 0; i < times.length; i++) {\n                if(times[i] == -1) result += 20;\n                else if(times[i] == 1) {\n                    result += i;\n                    break forelse;\n                }\n            }\n            result = 0;\n        }\n//        System.out.println(result);\n//        System.out.println(\"calcpoint end\");\n        return result;\n    }\n\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n\n        while(true){\n            buf = new ArrayList<>();\n            int M = sc.nextInt(), T = sc.nextInt(), P = sc.nextInt(), R = sc.nextInt();\n            if(M == 0 && T == 0 && P == 0 && R == 0) break;\n            int[][] team = new int[Tn][Pn];\n            int[][][] team_sub = new int[Tn][Pn][Mn];\n            Set<Integer> exteam = new HashSet<>();\n            for (int i = 1; i <= T; i++) {\n                exteam.add(i);\n            }\n            for (int i = 0; i < R; i++) {\n                int m = sc.nextInt(), t = sc.nextInt(), p = sc.nextInt(), j = sc.nextInt();\n                team[t][p] |= (j == 0 ? 1 : 0);\n                team_sub[t][p][m] = (j == 0 ? 1 : 0)*2 - 1;\n            }\n\n            int[][] winner = simple_rank(team, exteam);\n            for (int i = winner.length - 1; i >= 0; i--) {\n                int sum = Arrays.stream(winner[i]).sum();\n                if(sum > 1){\n                    rank(winner[i], team_sub);\n                } else if(sum > 0) {\n                    buf.add(String.valueOf(Arrays.stream(winner[i]).boxed().collect(Collectors.toList()).indexOf(1)));\n//                    System.out.println(String.valueOf(Arrays.stream(winner[i]).boxed().collect(Collectors.toList()).indexOf(1)));\n                }\n            }\n\n            System.out.println(String.join(\",\", buf));\n        }\n    }\n}"
  },
  {
    "language": "Java",
    "code": "import java.util.*;\nimport java.io.*;\nimport java.awt.geom.*;\nimport java.math.*;\n\npublic class Main {\n\n\tstatic final Scanner in = new Scanner(System.in);\n\tstatic final PrintWriter out = new PrintWriter(System.out,false);\n\tstatic boolean debug = false;\n\n\tstatic boolean solve() {\n\t\tint M = in.nextInt();\n\t\tint T = in.nextInt();\n\t\tint P = in.nextInt();\n\t\tint r = in.nextInt();\n\t\tif (M + T + P + r == 0) return false;\n\n\t\tint[][] a = new int[T][3];\n\t\tfor (int i=0; i<T; i++) {\n\t\t\ta[i][0] = i+1;\n\t\t}\n\n\t\tint[][] wrong = new int[T][P];\n\n\t\tfor (int i=0; i<r; i++) {\n\t\t\tint m = in.nextInt();\n\t\t\tint t = in.nextInt() - 1;\n\t\t\tint p = in.nextInt() - 1;\n\t\t\tint j = in.nextInt();\n\t\t\tif (j == 0) {\n\t\t\t\ta[t][1]++;\n\t\t\t\ta[t][2] += m + 20*wrong[t][p];\n\t\t\t} else {\n\t\t\t\twrong[t][p]++;\n\t\t\t}\n\t\t}\n\n\t\tArrays.sort(a, new Comparator<int[]>(){\n\t\t\tpublic int compare(int[] a, int[] b) {\n\t\t\t\tif (a[1] != b[1]) return b[1] - a[1];\n\t\t\t\tif (a[2] != b[2]) return a[2] - b[2];\n\t\t\t\treturn b[0] - a[0];\n\t\t\t}\n\t\t});\n\n\t\tboolean f = true;\n\t\tArrayList<Integer> ans = new ArrayList<>();\n\t\tfor (int i=0; i<T; ) {\n\t\t\tans.add(a[i][0]);\n\t\t\ti++;\n\t\t\twhile (i < T && a[i][1] == a[i-1][1] && a[i][2] == a[i-1][2]) {\n\t\t\t\tans.add(a[i][0]);\n\t\t\t\ti++;\n\t\t\t}\n\t\t\tif (!f) {\n\t\t\t\tout.print(\",\");\n\t\t\t} else {\n\t\t\t\tf = false;\n\t\t\t}\n\t\t\tfor (int j=0; j<ans.size(); j++) {\n\t\t\t\tif (j != 0) out.print(\"=\");\n\t\t\t\tout.print(ans.get(j));\n\t\t\t}\n\t\t\tans.clear();\n\t\t}\n\t\tout.println();\n\n\t\treturn true;\n\t}\n\n\tpublic static void main(String[] args) {\n\t\tdebug = args.length > 0;\n\t\tlong start = System.nanoTime();\n\n\t\twhile(solve());\n\t\tout.flush();\n\n\t\tlong end = System.nanoTime();\n\t\tdump((end - start) / 1000000 + \" ms\");\n\t\tin.close();\n\t\tout.close();\n\t}\n\n\tstatic void dump(Object... o) { if (debug) System.err.println(Arrays.deepToString(o)); }\n}"
  },
  {
    "language": "Java",
    "code": "import java.util.Arrays;\nimport java.util.Scanner;\nimport java.util.stream.IntStream;\n\npublic class Main {\n    static class Team {\n    \tint team, solved, elapsed;\n    \tint[] penalty;\n    \tTeam(int t) {\n    \t\tteam =t ; \n    \t\tpenalty= new int[11];\n    \t}\n    }\n    \n    public static void main(String[] args) {\n        try(Scanner sc = new Scanner(System.in)){\n            while(sc.hasNext()) {\n                int M = sc.nextInt();\n                int T = sc.nextInt();\n                int P = sc.nextInt();\n                int R = sc.nextInt();\n                if(T == 0) break;\n                Team[] ts = IntStream.range(0, T).mapToObj(t -> new Team(t+1)).toArray(Team[]::new);\n                \n                IntStream.range(0, R).forEach(dummy -> {\n                    int m = sc.nextInt();\n                    int t = sc.nextInt()-1;\n                    int p = sc.nextInt();\n                    int j = sc.nextInt();\n                    if(j == 0) {\n                        ts[t].solved++;\n                        ts[t].elapsed += m;\n                        ts[t].elapsed += ts[t].penalty[p];\n                    }\n                    else {\n                        ts[t].penalty[p] += 20;\n                    }\n                });//準備\n                \n                Arrays.sort(ts, (t1, t2)->{\n                    if(t1.solved == t2.solved) {\n                        return t1.elapsed - t2.elapsed;\n                    }\n                    return t2.solved - t1.solved;\n                });//問題数降順→経過時間で昇順\n                \n                int score = ts[0].solved * M + ts[0].elapsed;\n                \n                System.out.print(ts[0].team);\n                for(int i = 1; i < T; i++) {\n                    int s = ts[i].solved * M + ts[i].elapsed;//同順位のものを探す\n                    System.out.print(s == score ? \"=\" : \",\");\n                    System.out.print(ts[i].team);\n                    score = s;\n                }\n                \n                System.out.println();\n            }\n        }\n    }\n}\n"
  },
  {
    "language": "Java",
    "code": "import java.io.InputStream;\nimport java.io.IOException;\nimport java.io.PrintWriter;\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.Comparator;\nimport java.util.InputMismatchException;\nimport java.util.NoSuchElementException;\nimport java.math.BigInteger;\n \npublic class Main{\n \nstatic PrintWriter out;\nstatic InputReader ir;\n \nstatic void solve(){\n for(;;){\n  int m=ir.nextInt();\n  if(m==0) return;\n  int t=ir.nextInt();\n  int p=ir.nextInt();\n  int r=ir.nextInt();\n  int[][] dat=new int[t][3];\n  int[][] ct=new int[t][p];\n  for(int i=0;i<t;i++) dat[i][0]=i+1;\n  for(int i=0;i<r;i++){\n   int tID=ir.nextInt()-1;\n   int pID=ir.nextInt()-1;\n   int time=ir.nextInt();\n   int cond=ir.nextInt();\n   if(ct[tID][pID]<0) continue;\n   if(cond==0){\n    dat[tID][1]++;\n    dat[tID][2]+=ct[tID][pID]*20+time;\n    ct[tID][pID]=-1;\n   }\n   else{\n    ct[tID][pID]++;\n   }\n  }\n  Arrays.sort(dat,new Comparator<int[]>(){\n   public int compare(int[] a,int[] b){\n    if(a[1]!=b[1]) return -Integer.compare(a[1],b[1]);\n    if(a[2]!=b[2]) return Integer.compare(a[2],b[2]);\n    return -Integer.compare(a[0],b[0]);\n   }\n  });\n  for(int i=0;i<t;){\n   int st=i;\n   while(i<t&&dat[i][1]==dat[st][1]&&dat[i][2]==dat[st][2]) i++;\n   for(int j=st;j<i;j++){\n    out.print(dat[j][0]);\n    if(j!=i-1) out.print(\"=\");\n   }\n   if(i!=t) out.print(\",\");\n  }\n  out.println();\n }\n}\n \npublic static void main(String[] args) throws Exception{\n ir=new InputReader(System.in);\n out=new PrintWriter(System.out);\n solve();\n out.flush();\n}\n \nstatic class InputReader {\n private InputStream in;\n private byte[] buffer=new byte[1024];\n private int curbuf;\n private int lenbuf;\n \n public InputReader(InputStream in) {this.in=in; this.curbuf=this.lenbuf=0;}\n  \n public boolean hasNextByte() {\n  if(curbuf>=lenbuf){\n   curbuf= 0;\n   try{\n    lenbuf=in.read(buffer);\n   }catch(IOException e) {\n    throw new InputMismatchException();\n   }\n   if(lenbuf<=0) return false;\n  }\n  return true;\n }\n \n private int readByte(){if(hasNextByte()) return buffer[curbuf++]; else return -1;}\n  \n private boolean isSpaceChar(int c){return !(c>=33&&c<=126);}\n  \n private void skip(){while(hasNextByte()&&isSpaceChar(buffer[curbuf])) curbuf++;}\n  \n public boolean hasNext(){skip(); return hasNextByte();}\n  \n public String next(){\n  if(!hasNext()) throw new NoSuchElementException();\n  StringBuilder sb=new StringBuilder();\n  int b=readByte();\n  while(!isSpaceChar(b)){\n   sb.appendCodePoint(b);\n   b=readByte();\n  }\n  return sb.toString();\n }\n  \n public int nextInt() {\n  if(!hasNext()) throw new NoSuchElementException();\n  int c=readByte();\n  while (isSpaceChar(c)) c=readByte();\n  boolean minus=false;\n  if (c=='-') {\n   minus=true;\n   c=readByte();\n  }\n  int res=0;\n  do{\n   if(c<'0'||c>'9') throw new InputMismatchException();\n   res=res*10+c-'0';\n   c=readByte();\n  }while(!isSpaceChar(c));\n  return (minus)?-res:res;\n }\n  \n public long nextLong() {\n  if(!hasNext()) throw new NoSuchElementException();\n  int c=readByte();\n  while (isSpaceChar(c)) c=readByte();\n  boolean minus=false;\n  if (c=='-') {\n   minus=true;\n   c=readByte();\n  }\n  long res = 0;\n  do{\n   if(c<'0'||c>'9') throw new InputMismatchException();\n   res=res*10+c-'0';\n   c=readByte();\n  }while(!isSpaceChar(c));\n  return (minus)?-res:res;\n }\n \n public double nextDouble(){return Double.parseDouble(next());}\n \n public int[] nextIntArray(int n){\n  int[] a=new int[n];\n  for(int i=0;i<n;i++) a[i]=nextInt();\n  return a;\n }\n \n public long[] nextLongArray(int n){\n  long[] a=new long[n];\n  for(int i=0;i<n;i++) a[i]=nextLong();\n  return a;\n }\n \n public char[][] nextCharMap(int n,int m){\n  char[][] map=new char[n][m];\n  for(int i=0;i<n;i++) map[i]=next().toCharArray();\n  return map;\n }\n}\n}"
  },
  {
    "language": "Java",
    "code": "import java.util.Arrays;\nimport java.util.Comparator;\nimport java.util.Scanner;\nimport java.util.TreeMap;\nimport java.util.TreeSet;\nimport java.util.stream.Collectors;\nimport java.util.stream.IntStream;\n\npublic class Main{\n\tstatic final Scanner s=new Scanner(System.in);\n\tstatic int getInt(){\n\t\treturn Integer.parseInt(s.next());\n\t}\n\tstatic int m,t,p,r;\n\tstatic class Team{\n\t\tint wa[],time=0,id,ac;\n\t\tTeam(int ID){\n\t\t\tid=ID;\n\t\t\twa=new int[p];\n\t\t}\n\t\tint getId(){\n\t\t\treturn id;\n\t\t}\n\t\tint getTime(){\n\t\t\treturn time;\n\t\t}\n\t\tint getAc(){\n\t\t\treturn ac;\n\t\t}\n\t\tInteger getRank(){\n\t\t\treturn ac*10000000-time;\n\t\t}\n\t}\n\tpublic static void main(String[] __){\n\t\twhile(true){\n\t\t\tm=getInt();\n\t\t\tif(m==0) return;\n\t\t\tt=getInt();\n\t\t\tp=getInt();\n\t\t\tr=getInt();\n\t\t\t\n\t\t\tTeam[] teams=IntStream.rangeClosed(1,t).mapToObj(Team::new).toArray(Team[]::new);\n\t\t\tfor(int i=0;i<r;i++){\n\t\t\t\tint m=getInt(),t=getInt(),p=getInt(),j=getInt();\n\t\t\t\tfinal Team team=teams[t-1];\n\t\t\t\tswitch(j){\n\t\t\t\tcase 0:\n\t\t\t\t\tteam.time+=m+team.wa[p-1]*20;\n\t\t\t\t\tteam.ac++;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tteam.wa[p-1]++;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tTreeMap<Integer,TreeSet<Integer>> v=Arrays.stream(teams)\n\t\t\t\t\t.collect(Collectors.groupingBy(\n\t\t\t\t\t\t\tTeam::getRank,\n\t\t\t\t\t\t\t()->new TreeMap<>(Comparator.<Integer> reverseOrder()),\n\t\t\t\t\t\t\tCollectors.mapping(Team::getId,Collectors.toCollection(\n\t\t\t\t\t\t\t\t\t()->new TreeSet<>(Comparator.<Integer> reverseOrder())))));\n\t\t\tSystem.out.println(\n\t\t\t\t\tv.entrySet().stream().map(\n\t\t\t\t\t\t\to->o.getValue().stream()\n\t\t\t\t\t\t\t\t\t.map(Object::toString)\n\t\t\t\t\t\t\t\t\t.collect(Collectors.joining(\"=\")))\n\t\t\t\t\t\t\t.collect(Collectors.joining(\",\")));\n\t\t}\n\t}\n}"
  },
  {
    "language": "Java",
    "code": "import java.util.*;\nimport java.lang.*;\nimport java.math.*;\nimport java.io.*;\nimport static java.lang.Math.*;\nimport static java.util.Arrays.*;\nimport static java.util.Collections.*;\n\n// Integral Rectangles\n// 2013/08/13\npublic class Main{\n\tScanner sc=new Scanner(System.in);\n\n\tint INF=1<<28;\n\tdouble EPS=1e-12;\n\n\tint nTeams, nProblems, nTick;\n\tint[] ticks, teams, problems, results;\n\n\tvoid run(){\n\t\tfor(;;){\n\t\t\tsc.nextInt();\n\t\t\tnTeams=sc.nextInt();\n\t\t\tnProblems=sc.nextInt();\n\t\t\tnTick=sc.nextInt();\n\t\t\tticks=new int[nTick];\n\t\t\tteams=new int[nTick];\n\t\t\tproblems=new int[nTick];\n\t\t\tresults=new int[nTick];\n\t\t\tfor(int i=0; i<nTick; i++){\n\t\t\t\tticks[i]=sc.nextInt();\n\t\t\t\tteams[i]=sc.nextInt()-1;\n\t\t\t\tproblems[i]=sc.nextInt()-1;\n\t\t\t\tresults[i]=sc.nextInt();\n\t\t\t}\n\t\t\tsolve();\n\t\t}\n\t}\n\n\tvoid solve(){\n\t\tint[][] states=new int[nTeams][nProblems];\n\t\tint[][] times=new int[nTeams][nProblems];\n\t\tfor(int i=0; i<nTick; i++){\n\t\t\tif(results[i]==0){\n\t\t\t\tstates[teams[i]][problems[i]]=1;\n\t\t\t\ttimes[teams[i]][problems[i]]+=ticks[i];\n\t\t\t}else{\n\t\t\t\ttimes[teams[i]][problems[i]]+=20;\n\t\t\t}\n\t\t}\n\t\tint[] ACs=new int[nTeams];\n\t\tint[] penalties=new int[nTeams];\n\t\tfor(int j=0; j<nTeams; j++){\n\t\t\tfor(int i=0; i<nProblems; i++){\n\t\t\t\tACs[j]+=states[j][i];\n\t\t\t\tpenalties[j]+=states[j][i]*times[j][i];\n\t\t\t}\n\t\t}\n\t\t// debug(\"AC\", AC);\n\t\t// debug(\"pena\", pena);\n\t\tint[] _=new int[nTeams];\n\t\tfor(int i=0; i<nTeams; i++){\n\t\t\t_[i]=i;\n\t\t}\n\t\tfor(int i=0; i<nTeams; i++){\n\t\t\tfor(int j=i+1; j<nTeams; j++){\n\t\t\t\tif(comp(ACs[_[i]], penalties[_[i]], _[i], ACs[_[j]],\n\t\t\t\t\t\tpenalties[_[j]], _[j])>0){\n\t\t\t\t\tint t=_[i];\n\t\t\t\t\t_[i]=_[j];\n\t\t\t\t\t_[j]=t;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// debug(_);\n\t\tfor(int i=0; i<nTeams; i++){\n\t\t\tprint(1+_[i]+\"\");\n\t\t\tif(i<nTeams-1){\n\t\t\t\tprint(comp(ACs[_[i]], penalties[_[i]], ACs[_[i+1]],\n\t\t\t\t\t\tpenalties[_[i+1]])==0?\"=\":\",\");\n\t\t\t}\n\t\t}\n\t\tprintln(\"\");\n\t}\n\n\tint comp(int ac1, int time1, int ac2, int time2){\n\t\tif(ac1!=ac2){\n\t\t\treturn -(ac1-ac2);\n\t\t}else{\n\t\t\treturn time1-time2;\n\t\t}\n\t}\n\n\tint comp(int ac1, int time1, int id1, int ac2, int time2, int id2){\n\t\tif(comp(ac1, time1, ac2, time2)!=0){\n\t\t\treturn comp(ac1, time1, ac2, time2);\n\t\t}else{\n\t\t\treturn -(id1-id2);\n\t\t}\n\t}\n\n\tvoid debug(Object... os){\n\t\tSystem.err.println(Arrays.deepToString(os));\n\t}\n\n\tvoid print(String s){\n\t\tSystem.out.print(s);\n\t}\n\n\tvoid println(String s){\n\t\tSystem.out.println(s);\n\t}\n\n\tpublic static void main(String[] args){\n\t\tnew Main().run();\n\t}\n}"
  },
  {
    "language": "Java",
    "code": "\nimport java.util.Scanner;\n\n\npublic class Main {\n\tpublic static void main(String[] args) {\n\t\tScanner sc = new Scanner(System.in);\n\t\twhile(sc.hasNext()){\n\t\t\tint n = sc.nextInt();\n\t\t\tint p = sc.nextInt();\n\t\t\tif(p+n==0)break;\n\t\t\t\n\t\t\tint[] a = new int[n];\n\t\t\tint i = 0;\n\t\t\twhile(true) {\n\t\t\t\tif(p>0) {\n\t\t\t\t\tp--;\n\t\t\t\t\ta[i]++;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tp = a[i];\n\t\t\t\t\ta[i] = 0;\n\t\t\t\t}\n\t\t\t\tif(p==0) {\n\t\t\t\t\tint flag = 1;\n\t\t\t\t\tfor(int j=0;j<n;j++)\n\t\t\t\t\t\tif(a[j] != 0 && i != j)\n\t\t\t\t\t\t\tflag = 0;\n\t\t\t\t\tif(flag==1) break;\n\t\t\t\t}\n\t\t\t\ti = (i+1)%n;\n\t\t\t}\n\t\t\tSystem.out.println(i);\n\t\t}\n\t\t\n\t}\n}\n"
  },
  {
    "language": "Java",
    "code": "/*{\n300 50 10 736\n0 49 8 8\n0 45 10 3\n0 32 2 8\n0 19 5 3\n1 45 1 10\n1 8 2 10\n1 32 2 6\n1 32 2 0\n1 45 1 0\n1 15 6 3\n1 33 1 8\n2 21 3 6\n2 32 7 0\n2 35 7 5\n2 45 6 4\n2 21 3 9\n2 21 3 0\n3 16 1 4\n3 32 9 9\n3 6 8 4\n3 45 10 0\n4 8 2 8\n4 5 4 2\n4 23 1 8\n4 33 6 8\n5 42 1 2\n5 1 5 9\n5 47 9 6\n5 33 6 9\n6 27 7 3\n6 19 4 0\n6 6 8 3\n6 13 4 10\n6 6 8 0\n6 33 1 0\n6 46 7 6\n6 19 10 10\n7 6 3 8\n7 6 1 2\n7 5 10 3\n7 49 2 3\n8 25 2 7\n8 15 10 5\n8 30 10 6\n8 28 5 3\n9 17 9 2\n9 8 4 9\n9 47 9 9\n9 47 9 0\n9 45 9 5\n10 7 4 3\n10 20 8 4\n10 7 4 10\n10 40 9 10\n10 20 8 0\n11 10 2 9\n11 24 6 4\n12 36 3 1\n12 16 1 3\n13 44 9 0\n13 33 6 0\n13 50 7 7\n13 31 2 1\n13 12 9 6\n13 6 6 10\n14 39 2 10\n14 32 10 2\n15 14 4 0\n15 40 2 4\n15 49 2 0\n15 4 6 4\n15 29 4 8\n15 8 4 0\n16 6 3 5\n16 30 8 6\n16 7 2 1\n16 23 10 8\n16 32 9 2\n17 8 6 7\n17 16 4 0\n17 7 4 0\n18 6 3 0\n18 5 4 2\n18 8 3 7\n18 5 4 0\n18 19 1 0\n18 25 3 10\n19 1 1 5\n19 49 3 5\n19 2 7 0\n19 37 10 6\n19 16 1 0\n19 31 9 8\n20 36 6 1\n20 8 3 8\n20 1 5 6\n21 16 6 6\n21 15 10 9\n22 25 3 8\n22 49 6 4\n22 42 1 2\n22 21 9 4\n22 32 6 3\n22 32 4 1\n22 25 4 3\n22 23 6 4\n22 27 3 5\n23 11 9 7\n23 23 6 5\n23 47 6 8\n24 7 5 10\n24 31 4 8\n24 23 5 3\n24 45 3 0\n24 31 9 4\n25 45 6 10\n25 31 2 0\n25 12 9 6\n25 15 3 0\n25 21 8 5\n25 42 9 8\n25 41 4 0\n26 41 10 5\n26 16 2 4\n26 33 2 6\n26 23 6 0\n26 8 2 0\n27 15 2 7\n27 6 4 3\n28 29 10 2\n28 24 6 3\n29 12 5 2\n29 41 3 1\n29 41 10 1\n29 42 3 4\n29 23 3 9\n30 45 6 0\n30 40 7 7\n30 32 1 6\n30 8 3 0\n31 30 3 9\n31 19 10 5\n31 33 7 7\n31 49 4 5\n31 4 2 5\n31 36 6 0\n31 31 6 8\n31 19 8 9\n32 44 8 0\n32 49 4 4\n32 50 7 0\n32 4 5 8\n33 49 8 6\n33 18 2 5\n33 20 1 3\n34 19 2 7\n34 5 6 5\n34 22 2 1\n34 33 4 0\n34 34 2 10\n35 20 10 5\n35 28 7 4\n35 41 10 0\n35 17 8 4\n35 49 9 0\n35 49 6 7\n36 18 7 6\n36 26 6 4\n37 49 3 7\n37 23 1 7\n37 21 8 2\n37 35 6 4\n37 1 5 0\n37 27 6 7\n37 49 3 0\n38 39 1 1\n38 22 2 8\n38 35 6 10\n38 25 3 0\n38 13 10 6\n39 37 2 6\n39 41 3 7\n40 31 7 5\n40 2 4 10\n40 49 1 6\n41 37 1 5\n41 14 1 5\n41 25 10 9\n41 34 3 3\n41 22 9 5\n42 20 1 2\n43 23 1 0\n43 5 8 1\n43 3 2 8\n44 20 1 0\n44 24 2 8\n44 5 8 3\n45 34 6 8\n45 22 3 6\n46 33 2 5\n46 34 1 4\n46 33 2 0\n46 14 3 4\n46 18 2 0\n47 9 2 9\n47 18 6 7\n47 8 10 8\n48 20 4 0\n48 21 8 0\n48 42 6 1\n48 18 3 8\n49 4 7 10\n49 44 6 1\n49 50 9 7\n49 8 10 5\n49 50 3 4\n50 18 8 9\n50 30 5 7\n50 33 8 0\n50 1 1 6\n51 35 6 0\n51 49 4 0\n51 9 8 9\n51 2 8 1\n52 5 7 0\n52 14 5 7\n52 2 2 8\n52 17 5 1\n53 32 1 0\n53 27 7 2\n53 41 1 3\n54 23 3 7\n54 9 2 5\n54 18 3 5\n54 40 10 2\n54 42 1 0\n54 15 6 0\n55 16 5 3\n55 45 8 8\n56 21 10 3\n56 27 5 4\n56 23 9 3\n57 20 7 5\n57 17 4 1\n57 19 8 0\n57 12 6 10\n57 40 1 8\n58 9 8 6\n58 42 9 6\n58 23 2 4\n58 11 6 2\n58 17 9 8\n58 49 1 0\n58 34 7 9\n59 23 4 2\n59 30 10 0\n59 6 2 9\n59 9 8 0\n59 34 6 0\n59 18 5 1\n60 11 5 8\n60 10 7 6\n61 15 2 0\n61 33 3 7\n61 9 7 10\n61 5 2 0\n62 22 3 3\n63 38 5 4\n63 44 5 6\n63 43 7 3\n63 18 10 6\n63 20 6 1\n64 10 5 0\n64 31 3 6\n64 19 7 9\n65 38 5 8\n65 49 7 3\n65 48 9 9\n65 9 10 0\n65 11 6 0\n67 29 3 9\n67 9 3 5\n67 11 4 0\n67 37 5 7\n68 44 4 2\n68 40 6 1\n68 3 7 7\n68 13 9 6\n69 28 5 8\n69 49 5 2\n69 1 7 0\n70 20 7 6\n70 21 7 8\n71 17 7 8\n71 10 10 5\n72 35 7 10\n72 4 4 9\n72 24 2 6\n73 30 3 0\n73 44 4 0\n73 32 3 4\n73 1 1 0\n73 36 3 5\n73 32 9 0\n74 5 3 4\n75 33 7 10\n76 47 6 3\n76 42 8 9\n76 16 2 1\n76 2 8 2\n77 16 2 0\n77 9 2 0\n78 35 7 0\n78 12 5 7\n78 25 7 3\n78 29 4 4\n79 34 4 8\n79 23 5 4\n80 17 9 0\n80 30 8 0\n81 16 3 10\n82 34 9 2\n82 23 9 0\n83 15 4 8\n83 6 2 7\n83 12 8 8\n83 26 5 8\n84 12 3 7\n84 32 6 0\n85 21 10 0\n85 1 3 7\n85 45 8 10\n85 8 9 3\n85 46 10 4\n85 44 7 0\n86 16 6 3\n86 1 6 6\n86 11 8 4\n86 35 3 4\n87 20 10 0\n87 6 2 0\n87 42 5 7\n88 44 10 7\n89 10 4 10\n89 31 1 0\n89 42 4 8\n89 38 5 0\n91 23 7 4\n91 18 3 0\n91 5 6 0\n91 6 1 0\n91 25 7 0\n92 6 9 2\n92 7 10 4\n92 23 3 0\n92 18 5 7\n93 36 7 7\n93 27 5 5\n94 47 6 0\n95 3 9 2\n95 36 7 8\n96 31 5 3\n96 30 1 0\n97 5 9 4\n97 18 8 10\n97 36 10 10\n98 16 9 3\n98 26 1 4\n99 3 7 1\n99 20 9 0\n99 16 7 7\n100 25 9 7\n101 22 6 6\n101 11 1 7\n101 11 1 0\n102 44 5 1\n102 45 8 0\n102 46 3 6\n103 2 5 6\n103 13 7 3\n103 24 5 0\n104 18 8 0\n104 9 5 9\n104 36 9 3\n104 2 4 6\n104 38 8 5\n105 13 7 3\n106 6 4 3\n106 9 6 0\n106 2 4 0\n106 48 3 0\n107 5 9 8\n107 42 5 3\n108 6 9 0\n109 45 7 0\n110 3 6 7\n110 21 2 7\n110 9 4 7\n112 7 10 1\n112 3 7 0\n112 29 10 1\n112 5 3 0\n112 4 6 3\n112 36 7 0\n112 35 2 3\n113 29 10 0\n113 38 6 6\n113 13 6 6\n114 4 8 8\n114 49 5 0\n115 15 7 10\n115 15 9 0\n116 31 3 7\n116 23 10 1\n117 3 8 7\n117 36 5 3\n118 42 8 10\n118 1 10 7\n119 1 10 2\n119 2 8 0\n120 5 8 0\n121 30 9 0\n121 22 9 0\n122 14 8 0\n122 38 2 0\n122 23 10 0\n123 47 3 3\n123 50 1 4\n123 21 5 9\n123 44 3 4\n123 12 8 8\n124 26 9 4\n124 45 9 9\n124 40 9 9\n125 33 9 2\n125 44 5 0\n125 30 2 6\n126 18 4 0\n126 9 4 7\n126 34 7 3\n127 45 2 6\n128 32 10 5\n128 19 7 6\n128 41 6 1\n129 47 3 7\n130 32 4 10\n130 35 10 0\n130 11 3 10\n131 10 6 4\n131 38 10 9\n131 13 1 10\n132 17 8 10\n132 18 10 0\n134 22 4 0\n135 8 1 8\n135 26 7 4\n136 12 4 9\n138 17 1 5\n138 10 1 10\n139 50 6 6\n139 35 5 5\n139 22 3 0\n140 40 2 1\n140 15 7 8\n140 1 4 0\n141 6 4 0\n142 27 5 0\n142 13 6 7\n143 33 3 7\n143 23 7 0\n144 23 4 8\n145 16 8 6\n147 15 8 0\n148 40 4 1\n148 34 8 3\n148 12 7 7\n149 11 7 9\n149 49 7 3\n150 24 10 1\n151 2 3 0\n151 18 6 0\n151 40 4 7\n151 26 9 8\n152 12 2 8\n152 32 3 7\n152 39 3 1\n153 10 1 0\n155 11 8 1\n155 46 4 4\n155 8 8 2\n156 29 6 3\n156 45 9 0\n156 49 8 0\n157 39 3 8\n157 4 7 0\n157 11 7 7\n158 38 9 8\n159 32 3 0\n159 35 8 6\n160 19 3 3\n162 42 9 0\n162 46 8 1\n162 41 7 0\n162 27 9 10\n163 19 2 0\n163 30 7 0\n164 22 6 0\n164 40 10 0\n165 4 10 2\n165 44 2 0\n165 20 6 0\n168 18 5 0\n169 11 7 0\n169 29 1 2\n169 28 6 10\n170 23 2 4\n172 10 4 0\n172 15 7 0\n172 22 5 0\n173 50 6 3\n173 18 7 8\n173 24 7 9\n174 6 10 0\n174 3 3 8\n175 31 3 0\n175 24 7 1\n175 26 10 4\n177 12 7 3\n177 11 3 10\n177 6 6 0\n178 43 1 4\n178 8 7 7\n178 33 3 0\n180 12 3 8\n180 39 6 3\n180 16 9 0\n181 6 7 0\n181 32 4 0\n182 10 8 8\n183 18 7 0\n183 40 3 9\n184 15 1 0\n184 32 10 0\n185 6 5 0\n185 38 7 8\n185 22 2 0\n185 49 6 0\n186 43 4 7\n187 31 5 8\n188 44 10 0\n188 5 5 0\n190 8 10 0\n190 17 7 5\n190 12 4 8\n191 23 8 0\n191 14 2 9\n191 20 7 0\n192 28 1 4\n192 26 6 10\n192 42 4 10\n193 35 8 0\n194 41 2 8\n194 8 7 10\n195 33 9 0\n195 8 8 4\n196 11 9 7\n196 8 6 2\n196 38 9 1\n196 40 3 9\n198 50 3 3\n198 17 2 6\n198 5 10 2\n199 25 8 6\n199 29 3 7\n199 47 2 9\n200 50 10 5\n200 41 9 10\n201 15 10 0\n201 25 6 6\n201 45 4 4\n201 3 10 2\n202 11 2 3\n204 4 10 0\n204 24 9 10\n204 12 5 0\n204 34 2 3\n204 43 5 7\n205 45 4 0\n205 31 9 0\n206 33 5 5\n207 16 10 0\n207 39 2 10\n207 34 4 6\n207 15 5 0\n208 38 7 9\n209 30 5 0\n210 8 6 0\n212 43 1 0\n212 27 9 3\n213 49 7 0\n214 13 10 6\n216 42 2 9\n217 28 2 6\n217 46 3 3\n217 5 1 0\n218 41 3 0\n218 12 8 0\n218 43 5 0\n218 4 4 0\n218 44 1 0\n219 25 8 0\n220 46 4 5\n220 17 6 2\n220 27 1 10\n220 17 8 0\n222 5 10 0\n222 44 3 5\n223 22 7 0\n223 9 9 0\n224 1 3 7\n224 35 9 9\n225 4 1 2\n225 14 2 4\n225 30 4 0\n226 11 10 7\n226 29 9 9\n227 11 2 0\n227 32 5 0\n227 40 9 0\n227 39 6 3\n228 21 6 0\n230 40 6 7\n230 2 10 9\n230 5 9 0\n230 35 1 6\n231 37 6 1\n231 24 10 8\n231 28 1 8\n233 49 10 1\n234 45 2 3\n235 35 2 0\n236 43 8 0\n236 50 1 3\n236 28 7 3\n237 16 3 0\n237 34 9 2\n237 9 3 0\n237 49 10 9\n238 8 7 0\n238 35 5 3\n239 23 4 0\n240 19 10 0\n240 14 3 1\n240 17 6 9\n241 38 9 0\n241 43 9 6\n242 27 10 4\n242 38 4 0\n243 21 1 3\n244 29 9 10\n244 17 3 3\n245 14 9 10\n246 44 3 0\n248 50 5 6\n249 22 10 0\n251 36 5 0\n251 22 8 7\n251 36 8 0\n251 50 10 1\n252 39 4 10\n252 8 9 10\n253 22 8 0\n254 10 10 1\n254 23 5 0\n255 1 9 6\n256 38 10 4\n258 41 1 4\n259 26 7 1\n259 3 10 6\n259 17 7 0\n260 30 2 0\n260 3 1 7\n261 38 3 6\n261 42 2 8\n262 24 4 0\n262 47 4 0\n262 40 6 0\n263 9 1 0\n263 17 5 7\n264 31 10 0\n265 14 9 1\n266 29 8 10\n266 49 10 0\n266 39 1 9\n266 4 8 0\n268 50 5 3\n268 3 4 0\n268 3 10 0\n269 47 7 0\n270 2 6 5\n271 42 10 6\n271 39 7 8\n271 21 5 0\n273 39 9 8\n273 21 7 0\n274 3 1 1\n276 35 3 9\n276 40 5 7\n277 20 2 0\n277 4 5 10\n278 1 10 0\n278 21 2 0\n279 2 2 1\n280 48 1 10\n280 1 9 0\n281 17 1 10\n283 27 1 7\n283 31 7 0\n283 46 5 3\n283 15 4 0\n284 44 6 0\n284 8 1 0\n285 19 3 10\n286 30 6 0\n287 16 5 0\n287 40 5 0\n287 38 6 9\n289 13 4 4\n290 36 3 0\n291 34 1 3\n291 41 9 0\n291 41 2 4\n295 26 10 2\n296 25 2 4\n296 43 6 9\n297 31 5 0\n }*/\npackage icpc.icpcranking;\n\nimport java.util.*;\nimport java.util.stream.Collectors;\n\n/**\n * Created by ctare on 2017/05/08.\n */\npublic class Main {\n    private static final int Tn = 50 + 1;\n    private static final int Mn = 300 + 1;\n    private static final int Pn = 10 + 1;\n    private static ArrayList<String> buf;\n    private static int[][] simple_rank(int[][] team, Set<Integer> exteam){\n        int[][] winner = new int[Pn][Tn];\n        for (int i = 0; i < team.length; i++) {\n            int[] ints = team[i];\n            if(exteam.contains(i)) winner[Arrays.stream(ints).sum()][i] = 1;\n        }\n        return winner;\n    }\n\n    private static void rank(int[] team, int[][][] team_sub){\n        TreeMap<Integer, ArrayList<Integer>> rankresult = new TreeMap<>();\n        for (int i = 0; i < team.length; i++) {\n            if(team[i] == 1){\n                int sum_time = 0;\n                for (int[] ms : team_sub[i]) {\n                    sum_time += calc_point(ms);\n                }\n                ArrayList<Integer> rr = rankresult.getOrDefault(sum_time, new ArrayList<>());\n                rr.add(i);\n                rankresult.put(sum_time, rr);\n//                System.out.print(\"--- \");\n//                System.out.print(sum_time);\n//                System.out.println(\" : \" + i);\n            }\n        }\n//        System.out.println(rankresult.values());\n//        rankresult.values().forEach(e -> {\n//            System.out.println(String.join(\"=\", e.stream().sorted(Comparator.reverseOrder()).map(Object::toString).collect(Collectors.toList())));\n//        });\n        rankresult.values().forEach(e -> {\n            buf.add(String.join(\"=\", e.stream().sorted(Comparator.reverseOrder()).map(Object::toString).collect(Collectors.toList())));\n        });\n    }\n\n    private static int calc_point(int[] times){\n//        System.out.println(\"calcpoint\");\n//        System.out.println(Arrays.toString(times));\n        int result = 0;\n        forelse: {\n            for (int i = 0; i < times.length; i++) {\n                if(times[i] == -1) result += 20;\n                else if(times[i] == 1) {\n                    result += i;\n                    break forelse;\n                }\n            }\n            result = 0;\n        }\n//        System.out.println(result);\n//        System.out.println(\"calcpoint end\");\n        return result;\n    }\n\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n\n        System.out.println(\"hoge\");\n        while(true){\n            buf = new ArrayList<>();\n            int M = sc.nextInt(), T = sc.nextInt(), P = sc.nextInt(), R = sc.nextInt();\n            if(M == 0 && T == 0 && P == 0 && R == 0) break;\n            int[][] team = new int[Tn][Pn];\n            int[][][] team_sub = new int[Tn][Pn][Mn];\n            Set<Integer> exteam = new HashSet<>();\n            for (int i = 1; i <= T; i++) {\n                exteam.add(i);\n            }\n            for (int i = 0; i < R; i++) {\n                int m = sc.nextInt(), t = sc.nextInt(), p = sc.nextInt(), j = sc.nextInt();\n                team[t][p] |= (j == 0 ? 1 : 0);\n                team_sub[t][p][m] = (j == 0 ? 1 : 0)*2 - 1;\n            }\n\n            int[][] winner = simple_rank(team, exteam);\n            for (int i = winner.length - 1; i >= 0; i--) {\n                int sum = Arrays.stream(winner[i]).sum();\n                if(sum > 1){\n                    rank(winner[i], team_sub);\n                } else if(sum > 0) {\n                    buf.add(String.valueOf(Arrays.stream(winner[i]).boxed().collect(Collectors.toList()).indexOf(1)));\n//                    System.out.println(String.valueOf(Arrays.stream(winner[i]).boxed().collect(Collectors.toList()).indexOf(1)));\n                }\n            }\n\n            System.out.println(String.join(\",\", buf));\n        }\n    }\n}"
  },
  {
    "language": "Java",
    "code": "\nimport java.util.*;\nimport java.io.*;\nimport java.math.BigDecimal;\nimport java.awt.geom.*;\nimport static java.util.Arrays.*;\nimport static java.lang.Math.*;\n\npublic class Main{\n\n    static final Reader sc = new Reader();\n    static final PrintWriter out = new PrintWriter(System.out,false);\n\n    public static void main(String[] args) throws Exception {\n        while(true){\n        \tint m = sc.nextInt();\n        \tint t = sc.nextInt();\n        \tint p = sc.nextInt();\n        \tint r = sc.nextInt();\n\t\t\tif(m==0 && t==0 && p==0 && r==0){\n        \t\tbreak;\n        \t}\n        \tint[] time = new int[t];\n        \tint[] team = new int[t];\n        \tint[] ac = new int[t];\n        \tint[][] wa = new int[t][p];\n        \tfor(int i=0;i<t;i++){\n        \t\tteam[i] = i+1;\n        \t}\n        \tfor(int i=0;i<r;i++){\n        \t\tint a = sc.nextInt();\n        \t\tint b = sc.nextInt();\n        \t\tint c = sc.nextInt();\n        \t\tint d = sc.nextInt();\n        \t\tif(d==0){\n        \t\t\tac[b-1]++;\n        \t\t\ttime[b-1] = time[b-1] + a + wa[b-1][c-1]*20;  \n        \t\t}\n        \t\telse{\n        \t\t\twa[b-1][c-1]++;\n        \t\t}\n        \t}\n        \tfor(int i=0;i<t;i++){\n        \t\tfor(int j=i+1;j<t;j++){\n        \t\t\tif(ac[i]<ac[j] || (ac[i]==ac[j] && time[i]>=time[j])){\n        \t\t\t\tint tmp = ac[i];\n        \t\t\t\tac[i] = ac[j];\n        \t\t\t\tac[j] = tmp;\n        \t\t\t\ttmp = team[j];\n        \t\t\t\tteam[j] = team[i];\n        \t\t\t\tteam[i] = tmp;\n        \t\t\t\ttmp = time[i];\n        \t\t\t\ttime[i] = time[j];\n        \t\t\t\ttime[j] = tmp;\n        \t\t\t}\n        \t\t}\n        \t}\n        \tfor(int i=0;i<t;i++){\n        \t\tout.print(team[i]);\n        \t\tif(i!=t-1 && ac[i]==ac[i+1] && time[i]==time[i+1]){\n        \t\t\tout.print(\"=\");\n        \t\t}\n        \t\telse if(i!=t-1){\n        \t\t\tout.print(\",\");\n        \t\t}\n        \t}\n        \tout.println();\n        \tout.flush();\n        }\n        sc.close();\n        out.close();\n    }\n\n    static void trace(Object... o) { System.out.println(Arrays.deepToString(o));}\n}\n\nclass Reader {\n    private final InputStream sc;\n    private final byte[] buf = new byte[1024];\n    private int ptr = 0;\n    private int buflen = 0;\n\n    public Reader() { this(System.in);}\n    public Reader(InputStream source) { this.sc = source;}\n\n    private boolean hasNextByte() {\n        if (ptr < buflen) return true;\n        ptr = 0;\n        try{\n            buflen = sc\n\n.read(buf);\n        }catch (IOException e) {e.printStackTrace();}\n        if (buflen <= 0) return false;\n        return true;\n    }\n\n    private int readByte() { if (hasNextByte()) return buf[ptr++]; else return -1;}\n\n    private boolean isPrintableChar(int c) { return 33 <= c && c <= 126;}\n\n    private void skip() { while(hasNextByte() && !isPrintableChar(buf[ptr])) ptr++;}\n\n    public boolean hasNext() {skip(); return hasNextByte();}\n\n    public String next() {\n        if (!hasNext()) throw new NoSuchElementException();\n        StringBuilder sb = new StringBuilder();\n        int b = readByte();\n        while (isPrintableChar(b)) {\n            sb.appendCodePoint(b);\n            b = readByte();\n        }\n        return sb.toString();\n    }\n\n    public long nextLong() {\n        if (!hasNext()) throw new NoSuchElementException();\n        boolean minus = false;\n        long num = readByte();\n\n        if(num == '-'){\n            num = 0;\n            minus = true;\n        }else if (num < '0' || '9' < num){\n            throw new NumberFormatException();\n        }else{\n            num -= '0';\n        }\n        \n        while(true){\n            int b = readByte();\n            if('0' <= b && b <= '9')\n                num = num * 10 + (b - '0');\n            else if(b == -1 || !isPrintableChar(b))\n                return minus ? -num : num;\n            else\n                throw new NoSuchElementException();\n        }\n    }\n\n    public int nextInt() {\n        long num = nextLong();\n        if (num < Integer.MIN_VALUE || Integer.MAX_VALUE < num)\n            throw new NumberFormatException();\n        return (int)num;\n    }\n\n    public double nextDouble() {\n        return Double.parseDouble(next());\n    }\n\n    public char nextChar() {\n        if (!hasNext()) throw new NoSuchElementException();\n        return (char)readByte();\n    }\n\n    public String nextLine() {\n        while (hasNextByte() && (buf[ptr] == '\\n' || buf[ptr] == '\\r')) ptr++;\n        if (!hasNextByte()) throw new NoSuchElementException();\n\n        StringBuilder sb = new StringBuilder();\n        int b = readByte();\n        while (b != '\\n' && b != '\\r') {\n            sb.appendCodePoint(b);\n            b = readByte();\n        }\n\n        return sb.toString();\n    }\n\n    public int[] nextIntArray(int n) {\n        int[] res = new int[n];\n        for (int i=0; i<n; i++) res[i] = nextInt();\n        return res;\n    }\n\n    public char[] nextCharArray(int n) {\n        char[] res = new char[n];\n        for (int i=0; i<n; i++) res[i] = nextChar();\n        return res;\n    }\n\n    public void close() {try{ sc.close();}catch(IOException e){ e.printStackTrace();}};\n}"
  },
  {
    "language": "Java",
    "code": "import java.util.*;\npublic class Main{\n    public static void main(String[] args){\n\tnew Main().run();\n    }\n\n    Scanner kbd = new Scanner(System.in);\n\n    void run(){\n\twhile(kbd.hasNext()){\n\t    int m = kbd.nextInt();\n\t    int t = kbd.nextInt();\n\t    int p = kbd.nextInt();\n\t    int r = kbd.nextInt();\n\t    if(m!=0) solve(m, t, p, r); // m>=120より\n\t}\n    }\n\n    void solve(int m, int t, int p, int r){\n\tData[] data = new Data[t]; // チームごとのデータ記録\n\tfor(int i=0; i<t; i++){\n\t    data[i] = new Data(i+1, p);\n\t}\n\twhile(r>0){\n\t    int time = kbd.nextInt();\n\t    int team = kbd.nextInt();\n\t    int pro = kbd.nextInt();\n\t    boolean cor;\n\t    int c = kbd.nextInt();\n\t    if(c==0)  cor = true;\n\t    else cor = false;\n\t\n\t    // 読み込み\n\t    data[team-1].sendPro(time, pro, cor);\n\t    r--;\n\t}\n\t// ソート\n\t final boolean[][] same = new boolean[t+1][t+1];\n\tArrays.sort(data, new Comparator<Data>(){\n\t\tpublic int compare(Data d1, Data d2){\n\t\t    int p1 = d1.getSolved();\n\t\t    int p2 = d2.getSolved();\n\t\t    if(p1 != p2) return p2-p1;\n\t\t    int time1 = d1.getTime();\n\t\t    int time2 = d2.getTime();\n\t\t    if(time1 != time2) return time1-time2;\n\t\t    int t1 = d1.getN();\n\t\t    int t2 = d2.getN();\n\t\t    same[t1][t2] = same[t2][t1] = true;\n\t\t    return t2-t1;\n\t\t}\n\t    }\n\t    );\n\n\t// 出力\n\tSystem.out.print(data[0].getN());\n\tfor(int i=1; i<data.length; i++){\n\t    if(same[data[i].getN()][data[i-1].getN()])\n\t\tSystem.out.print(\"=\");\n\t    else\n\t\tSystem.out.print(\",\");\n\t    System.out.print(data[i].getN());\n\t}\n\tSystem.out.println();\n    }\n}\n\nclass Data{\n    int team;  //チーム番号\n    int solved; // 解けた問題数\n    int alltime; // かかった時間\n    int[] pena;  // ペナルティ保存\n    boolean[] solve;  // 解けているかどうか\n\n    Data(int t, int p){  // p = 問題数\n \tteam = t;\n\tpena = new int[p];\n\tsolve = new boolean[p];\n    }\n\n    void sendPro(int t, int p, boolean c){\n\tif(c){\n\t    alltime += (t + pena[p-1]);\n\t    solved++;\n\t    pena[p-1] = 0;\n\t}\n\telse pena[p-1] += 20;\n    }\n\n    int getTime(){ return alltime; }\n    int getSolved(){ return solved; }\n    int getN(){ return team;}\n}"
  },
  {
    "language": "Java",
    "code": "import java.util.*;\nimport java.util.stream.Collectors;\n\n/**\n * Created by ctare on 2017/05/08.\n */\npublic class Main {\n    private static final int Tn = 50 + 1;\n    private static final int Mn = 300 + 1;\n    private static final int Pn = 10 + 1;\n    private static ArrayList<String> buf;\n    private static int[][] simple_rank(int[][] team, Set<Integer> exteam){\n        int[][] winner = new int[Pn][Tn];\n        for (int i = 0; i < team.length; i++) {\n            int[] ints = team[i];\n            if(exteam.contains(i)) winner[Arrays.stream(ints).sum()][i] = 1;\n        }\n        return winner;\n    }\n\n    private static void rank(int[] team, int[][][] team_sub){\n        TreeMap<Integer, ArrayList<Integer>> rankresult = new TreeMap<>();\n        for (int i = 0; i < team.length; i++) {\n            if(team[i] == 1){\n                int sum_time = 0;\n                for (int[] ms : team_sub[i]) {\n                    sum_time += calc_point(ms);\n                }\n                ArrayList<Integer> rr = rankresult.getOrDefault(sum_time, new ArrayList<>());\n                rr.add(i);\n                rankresult.put(sum_time, rr);\n//                System.out.print(\"--- \");\n//                System.out.print(sum_time);\n//                System.out.println(\" : \" + i);\n            }\n        }\n//        System.out.println(rankresult);\n        rankresult.values().forEach(e -> {\n            buf.add(String.join(\"=\", e.stream().sorted(Comparator.reverseOrder()).map(Object::toString).collect(Collectors.toList())));\n        });\n    }\n\n    private static int calc_point(int[] times){\n//        System.out.println(\"calcpoint\");\n//        System.out.println(Arrays.toString(times));\n        int result = 0;\n        forelse: {\n            for (int i = 0; i < times.length; i++) {\n                if(times[i] == -1) result += 20;\n                else if(times[i] == 1) {\n                    result += i;\n                    break forelse;\n                }\n            }\n            result = 0;\n        }\n//        System.out.println(result);\n//        System.out.println(\"calcpoint end\");\n        return result;\n    }\n\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n\n        while(true){\n            buf = new ArrayList<>();\n            int M = sc.nextInt(), T = sc.nextInt(), P = sc.nextInt(), R = sc.nextInt();\n            if(M == 0 && T == 0 && P == 0 && R == 0) break;\n            int[][] team = new int[Tn][Pn];\n            int[][][] team_sub = new int[Tn][Pn][Mn];\n            Set<Integer> exteam = new HashSet<>();\n            for (int i = 1; i <= T; i++) {\n                exteam.add(i);\n            }\n            for (int i = 0; i < R; i++) {\n                int m = sc.nextInt(), t = sc.nextInt(), p = sc.nextInt(), j = sc.nextInt();\n                team[t][p] |= (j == 0 ? 1 : 0);\n                team_sub[t][p][m] = (j == 0 ? 1 : 0)*2 - 1;\n            }\n\n            int[][] winner = simple_rank(team, exteam);\n            for (int i = winner.length - 1; i >= 0; i--) {\n                int sum = Arrays.stream(winner[i]).sum();\n                if(sum > 1){\n                    rank(winner[i], team_sub);\n                } else if(sum > 0) {\n                    buf.add(String.valueOf(Arrays.stream(winner[i]).boxed().collect(Collectors.toList()).indexOf(1)));\n                }\n            }\n\n            System.out.println(String.join(\",\", buf));\n        }\n    }\n}"
  },
  {
    "language": "Java",
    "code": "import java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.Scanner;\n\nclass Team implements Comparable<Team>{\n\tint passCnt = 0;\n\tint time = 0;\n\tint num;\n\tArrayList<Integer> wrongAnswer = new ArrayList<>();\n\t\n\tTeam(int num){\n\t\tthis.num = num;\n\t}\n\t\n\tvoid record(int time, int questionNum,int isPassed){\n\t\t\t\t\n\t\tif(isPassed == 0){\n\t\t\tpassCnt++;\n\t\t\tthis.time += time + 20*getPenalty(questionNum);\n\t\t} else wrongAnswer.add(questionNum);\n\t}\n\t@Override\n\tpublic int compareTo(Team that) {\n\t\tif(this.passCnt == that.passCnt){\n\t\t\tif(this.time == that.time){\n\t\t\t\treturn that.num - this.num;\n\t\t\t}else return this.time - that.time;\n\t\t} else{\n\t\t\treturn that.passCnt - this.passCnt;\n\t\t}\n\t}\n\t\n\tboolean equals(Team that){\n\t\t\treturn this.passCnt == that.passCnt && this.time == that.time;\n\t}\n\t\n\tpublic String toString(){\n\t\treturn this.num+\"\";\n\t}\n\t\n\tint getPenalty(int questionNum){\n\t\tint cnt = 0;\n\t\tfor(int i : wrongAnswer)\n\t\t\tif(i == questionNum) cnt++;\n\t\treturn cnt;\n\t}\n\t\n}\n\n\npublic class Main {\n\tpublic static void main(String[] args){\n\t\tScanner sn = new Scanner(System.in);\n\t\tint teamNum = 0 ,n = 0;\n\t\twhile(true){\n\t\t\tint k = sn.nextInt();\n\t\t\tteamNum = sn.nextInt();\n\t\t\tint qn = sn.nextInt();\n\t\t\tn = sn.nextInt();\n\t\t\tif(k == 0 && teamNum == 0 && qn == 0 && n == 0) break;\n\t\t\tTeam[] teams = new Team[teamNum];\n\t\t\tfor(int i = 0; i < teamNum; i++) teams[i] = new Team(i+1);\n\t\t\tfor(int i = 0; i < n; i++){\n\t\t\t\tint time = sn.nextInt();\n\t\t\t\tteams[sn.nextInt()-1].record(time, sn.nextInt(), sn.nextInt());\n\t\t\t}\n\t\t\tArrays.sort(teams);\n\t\t\tSystem.out.println(getResult(teams));\n\t\t}\n\t}\n\t\n\tstatic String getResult(Team[] ts){\n\t\tString out = ts[0].toString();\n\t\tfor(int i = 1; i < ts.length; i++){\n\t\t\tif(ts[i-1].equals(ts[i])){\n\t\t\t\tout += \"=\" + ts[i];\n\t\t\t} else out += \",\" + ts[i].num;\n\t\t}\n\t\treturn out;\n\t}\n}"
  },
  {
    "language": "Java",
    "code": "import java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.Scanner;\n\nclass Team implements Comparable<Team>{\n\tint passCnt = 0;\n\tint time = 0;\n\tint num;\n\tArrayList<Integer> wrongAnswer = new ArrayList<Integer>();\n\t\n\tTeam(int num){\n\t\tthis.num = num;\n\t}\n\t\n\tvoid record(int time, int questionNum,int isPassed){\n\t\t\t\t\n\t\tif(isPassed == 0){\n\t\t\tpassCnt++;\n\t\t\tthis.time += time + 20*getPenalty(questionNum);\n\t\t} else wrongAnswer.add(questionNum);\n\t}\n\t@Override\n\tpublic int compareTo(Team that) {\n\t\tif(this.passCnt == that.passCnt){\n\t\t\tif(this.time == that.time){\n\t\t\t\treturn that.num - this.num;\n\t\t\t}else return this.time - that.time;\n\t\t} else{\n\t\t\treturn that.passCnt - this.passCnt;\n\t\t}\n\t}\n\t\n\tboolean equals(Team that){\n\t\t\treturn this.passCnt == that.passCnt && this.time == that.time;\n\t}\n\t\n\tpublic String toString(){\n\t\treturn this.num+\"\";\n\t}\n\t\n\tint getPenalty(int questionNum){\n\t\tint cnt = 0;\n\t\tfor(int i : wrongAnswer)\n\t\t\tif(i == questionNum) cnt++;\n\t\treturn cnt;\n\t}\n\t\n}\n\n\npublic class Main {\n\tpublic static void main(String[] args){\n\t\tScanner sn = new Scanner(System.in);\n\t\tint teamNum = 0 ,n = 0;\n\t\twhile(true){\n\t\t\tint k = sn.nextInt();\n\t\t\tteamNum = sn.nextInt();\n\t\t\tint qn = sn.nextInt();\n\t\t\tn = sn.nextInt();\n\t\t\tif(k == 0 && teamNum == 0 && qn == 0 && n == 0) break;\n\t\t\tTeam[] teams = new Team[teamNum];\n\t\t\tfor(int i = 0; i < teamNum; i++) teams[i] = new Team(i+1);\n\t\t\tfor(int i = 0; i < n; i++){\n\t\t\t\tint time = sn.nextInt();\n\t\t\t\tteams[sn.nextInt()-1].record(time, sn.nextInt(), sn.nextInt());\n\t\t\t}\n\t\t\tArrays.sort(teams);\n\t\t\tSystem.out.println(getResult(teams));\n\t\t}\n\t}\n\t\n\tstatic String getResult(Team[] ts){\n\t\tString out = ts[0].toString();\n\t\tfor(int i = 1; i < ts.length; i++){\n\t\t\tif(ts[i-1].equals(ts[i])){\n\t\t\t\tout += \"=\" + ts[i];\n\t\t\t} else out += \",\" + ts[i].num;\n\t\t}\n\t\treturn out;\n\t}\n}"
  },
  {
    "language": "Java",
    "code": "\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.Scanner;\n\npublic class Main {\n\tpublic static void main(String[]args) {\n\t\tList<Team> team_list = new ArrayList<Team>();\n\t\tScanner sc = new Scanner(System.in);\n\t\t\n\t\tint M = sc.nextInt(), T = sc.nextInt(), P = sc.nextInt(), R = sc.nextInt();\n\t\tfor(int i = 0; i < T; i++) {\n\t\t\tTeam team = new Team();\n\t\t\tteam.setId(i);\n\t\t\tteam_list.add(team);\n\t\t}\n\t\t\n\t\tfor(int i = 0; i< R; i++) {\n\t\t\tint mk = sc.nextInt(), tk = sc.nextInt(), pk = sc.nextInt(), jk = sc.nextInt();\n\t\t\t\n\t\t\tif(jk == 0) {\n\t\t\t\tteam_list.get(tk-1).addCount();\n\t\t\t\tteam_list.get(tk-1).addTime(mk);\n\t\t\t\tif(team_list.get(tk-1).getMisCount() > 0) {\n\t\t\t\t\tfor(int j = 0; j < team_list.get(tk-1).getMisCount(); j++) {\n\t\t\t\t\t\tteam_list.get(tk-1).addTime(20);\n\t\t\t\t\t\tteam_list.get(tk-1).setMisCount(0);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tfor(int i = 0; i < T-1;i++) {\n\t\t\tfor(int j =i+1; j < T; j++) {\n\t\t\t\tif(team_list.get(i).getCount() < team_list.get(j).getCount()) {\n\t\t\t\t\tTeam team_tmp = team_list.get(i);\n\t\t\t\t\tteam_list.get(j) = team_list.get(j);\n\t\t\t\t\tteam_list.get(j) = team_tmp;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t}\n}\n\n\nclass Team{\n\t\n\tpublic Team() {\n\t  this.setCount(0);\n\t  this.setMisCount(0);\n\t  this.setTime(0);\n\t}\n\t\n\tpublic int getId() {\n\t\treturn id;\n\t}\n\tpublic void setId(int id) {\n\t\tthis.id = id;\n\t}\n\tpublic int getCount() {\n\t\treturn count;\n\t}\n\tpublic void setCount(int count) {\n\t\tthis.count = count;\n\t}\n\tpublic void addCount() {\n\t\tthis.count++;\n\t}\n\tpublic int getTime() {\n\t\treturn time;\n\t}\n\tpublic void setTime(int time) {\n\t\tthis.time = time;\n\t}\n\tpublic void addTime(int time) {\n\t\tthis.time += time;\n\t}\n\tpublic int getMisCount() {\n\t\treturn misCount;\n\t}\n\tpublic void setMisCount(int misCount) {\n\t\tthis.misCount = misCount;\n\t}\n\tprivate int id;\n\tprivate int count;\n\tprivate int time;\n\tprivate int misCount;\n}\n"
  },
  {
    "language": "Java",
    "code": "import java.util.Arrays;\nimport java.util.Scanner;\n\npublic class Main {\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n        while (true) {\n            int M = sc.nextInt();\n            int T = sc.nextInt();\n            int P = sc.nextInt();\n            int R = sc.nextInt();\n            if ((M | T | P | R) == 0) {\n                break;\n            }\n            Team[] teams = new Team[T];\n            for (int i = 0; i < T; i++) {\n                teams[i] = new Team(i, P);\n            }\n            for (int i = 0; i < R; i++) {\n                int m = sc.nextInt();\n                int t = sc.nextInt() - 1;\n                int p = sc.nextInt() - 1;\n                int j = sc.nextInt();\n                if (j == 0 && !teams[t].solves[p]) {\n                    teams[t].solve++;\n                    teams[t].solves[p] = true;\n                    teams[t].lastTime += m + teams[t].pena;\n                    teams[t].pena = 0;\n                } else {\n                    teams[t].pena += 20;\n                }\n            }\n            // for (int i = 0; i < teams.length; i++) {\n            //     System.out.println((i + 1) + \": \" + teams[i].solve + \", \" + teams[i].lastTime);\n            // }\n\n            Arrays.sort(teams);\n            System.out.print(teams[0].id + 1);\n            for (int i = 1; i < teams.length; i++) {\n                System.out.print((teams[i - 1].equalsRank(teams[i]) ? \"=\" : \",\") + (teams[i].id + 1));\n            }\n            // System.out.println();\n            System.out.println();\n        }\n    }\n\n    public static class Team implements Comparable {\n        public int solve;\n        public boolean[] solves;\n        public int lastTime;\n        public int pena;\n        int id;\n\n        Team(int id, int m) {\n            this.id = id;\n            this.solve = 0;\n            this.solves = new boolean[m];\n            this.pena = 0;\n            this.lastTime = 0;\n        }\n\n        public boolean equalsRank(Team t) {\n            return this.solve == t.solve && this.lastTime == t.lastTime;\n        }\n\n        @Override\n        public int compareTo(Object o) {\n            Team ot = (Team) o;\n            int solveC = Integer.compare(this.solve, ot.solve);\n            int timeC = Integer.compare(this.lastTime, ot.lastTime);\n            if (solveC == 0) {\n                if (timeC == 0) {\n                    return -Integer.compare(this.id, ot.id);\n                }\n                return timeC;\n            }\n            return -solveC;\n        }\n    }\n}"
  },
  {
    "language": "Java",
    "code": "import java.util.*;\n\npublic class Main {\n  Scanner sc;\n  \n  static int M, T, P, R;\n  void run() {\n    while(true){\n      M = ni();\n      T = ni();\n      P = ni();\n      R = ni();\n      if(M==0&&T==0&&P==0&&R==0)break;\n      Team[] team = new Team[T];\n      for(int i=0;i<T;i++){\n        team[i] = new Team(i);\n      }\n      for(int i=0;i<R;i++){\n        int m = ni();\n        int t = ni();\n        int p = ni();\n        int j = ni();\n        if(j==0){\n          team[t-1].ans++;\n          int tt = (team[t-1].submits[p-1])*20;\n          team[t-1].time += (tt + m);\n        }else{\n          team[t-1].submits[p-1]++;\n        }\n      }\n      Arrays.sort( team, new Comparator<Team>(){\n        public int compare(Team t1, Team t2){\n          if(t1.ans == t2.ans){\n            if(t1.time == t2.time){\n              return t2.number - t1.number;\n            }else{\n              return t1.time - t2.time;\n            }\n          }else{\n            return t2.ans - t1.ans;\n          }\n        }\n      });\n//      for(Team tm : team)System.out.println(tm);\n      System.out.print(team[0].number+1);\n      for(int i=1;i<T;i++){\n        if(team[i-1].ans == team[i].ans && team[i-1].time == team[i].time){\n          System.out.printf(\"=%d\", team[i].number+1);\n        }else{\n          System.out.printf(\",%d\", team[i].number+1);\n        }\n      }\n      System.out.println();\n    }\n  }\n  \n  Main() {\n    sc = new Scanner(System.in);\n  }\n  \n  int ni() {\n    return sc.nextInt();\n  }\n  \n  public static void main(String[] args) {\n    new Main().run();\n  }\n  \n  void debug(Object... os) {\n    System.err.println(Arrays.deepToString( os ));\n  }\n}\nclass Team{\n  public int number;\n  public int time;\n  public int ans;\n  public int[] submits;\n  public Team(int number){\n    this.number = number;\n    submits = new int[Main.P];\n    \n  }\n  public String toString(){\n    return String.format(\"%2d, %4d, %2d, %s\", number, time, ans, Arrays.toString(submits));\n  }\n}"
  },
  {
    "language": "Java",
    "code": "public class Main {\n\t\n\tpublic void run(java.util.Scanner sc, java.io.PrintStream out) {\n\t\tfor (;;) {\n\t\t\tfinal int M = sc.nextInt();\n\t\t\tfinal int T = sc.nextInt();\n\t\t\tfinal int P = sc.nextInt();\n\t\t\tfinal int R = sc.nextInt();\n\t\t\tif (M == 0 && T == 0 && P == 0 && R == 0) break ;\n\t\t\t\n\t\t\tfinal Record[] records = new Record[R];\n\t\t\tfor (int i = 0; i < R; ++i) {\n\t\t\t\tfinal int m = sc.nextInt();\n\t\t\t\tfinal int t = sc.nextInt();\n\t\t\t\tfinal int p = sc.nextInt();\n\t\t\t\tfinal int j = sc.nextInt();\n\t\t\t\trecords[i] = new Record(m, t, p, j);\n\t\t\t}\n\t\t\t\n\t\t\tfinal Team[] teams = new Team[T];\n\t\t\tfor (int i = 1; i <= T; ++i)\n\t\t\t\tteams[i - 1] = new Team(i);\n\t\t\tfor (int i = 0; i < R; ++i) {\n\t\t\t\tif (records[i].status != 0)\n\t\t\t\t\tcontinue ;\n\t\t\t\tteams[records[i].team - 1].solved += 1;\n\t\t\t\tteams[records[i].team - 1].penalties += records[i].time;\n\t\t\t\tfor (int j = 0; j < i; ++j) {\n\t\t\t\t\tif (records[j].team == records[i].team && records[j].problem == records[i].problem)\n\t\t\t\t\t\tteams[records[i].team - 1].penalties += 20;\n\t\t\t\t}\n\t\t\t}\n\t\t\tjava.util.Arrays.sort(teams);\n\t\t\tout.print(teams[0].id);\n\t\t\tfor (int i = 1; i < T; ++i) {\n\t\t\t\tif (teams[i - 1].solved == teams[i].solved && teams[i - 1].penalties == teams[i].penalties)\n\t\t\t\t\tout.print('=');\n\t\t\t\telse\n\t\t\t\t\tout.print(',');\n\t\t\t\tout.print(teams[i].id);\n\t\t\t}\n\t\t\tout.println();\n\t\t}\n\t}\n\n\tpublic static void main(String[] args) {\n\t\t(new Main()).run(new java.util.Scanner(System.in), System.out);\n\t}\n\n\tprivate static class Team implements Comparable<Team> {\n\t\tpublic final int id;\n\t\tpublic int solved;\n\t\tpublic int penalties;\n\t\tpublic Team(int id) {\n\t\t\tthis.id = id;\n\t\t\tthis.solved = 0;\n\t\t\tthis.penalties = 0;\n\t\t}\n\t\t@Override\n\t\tpublic int compareTo(Team o) {\n\t\t\tif (this.solved > o.solved)\n\t\t\t\treturn -1;\n\t\t\telse if (o.solved > this.solved)\n\t\t\t\treturn 1;\n\t\t\tif (this.penalties < o.penalties)\n\t\t\t\treturn -1;\n\t\t\telse if (o.penalties < this.penalties)\n\t\t\t\treturn 1;\n\t\t\tif (this.id > o.id)\n\t\t\t\treturn -1;\n\t\t\telse if (o.id > this.id)\n\t\t\t\treturn 1;\n\t\t\treturn 0;\n\t\t}\n\t}\n\t\n\tprivate static class Record {\n\t\tpublic final int time;\n\t\tpublic final int team;\n\t\tpublic final int problem;\n\t\tpublic final int status;\n\t\tpublic Record(int time, int team, int problem, int status) {\n\t\t\tthis.time = time;\n\t\t\tthis.team = team;\n\t\t\tthis.problem = problem;\n\t\t\tthis.status = status;\n\t\t}\n\t}\n\t\n}"
  },
  {
    "language": "Java",
    "code": "import java.util.*;\nclass Main{\n    public static void main(String []args){\n\tScanner sc = new Scanner(System.in);\n\tint m = sc.nextInt();\n\tint t = sc.nextInt();\n\tint p = sc.nextInt();\n\tint r = sc.nextInt();\n\twhile (!(m == 0 && t == 0 && p == 0 && r == 0)){\n\t    Team []team = new Team[t+1];\n\t    for(int i=0;i<team.length;i++){\n\t\tteam[i]=new Team(p);\n\t    }\n\t    for(int i=0;i<r;i++){\n\t\tint min =sc.nextInt();\n\t\tint teamCount = sc.nextInt();\n\t\tint problem = sc.nextInt();\n\t\tint judge = sc.nextInt();\n\t\tif(judge == 0){\n\t\t    team[teamCount].success(problem,min);\n\t\t}else{\n\t\t    team[teamCount].wrong(problem);\n\t\t}\n\t    }\n\n\t    String[][] rank = new String[p+1][m+1];\n\t    for(int i=team.length-1;i>0;i--){\n\t\tif(rank[team[i].count][team[i].time] ==null){\n\t\t    rank[team[i].count][team[i].time] = i+\"\";\n\t\t}else{\n\t\t    rank[team[i].count][team[i].time] =rank[team[i].count][team[i].time] + \"=\" +i;\n\t\t}\n\t    }\n\t    String res = \"\";\n\t    for(int i=rank.length-1;i>=0;i--){\n\t\tfor(int j=0;j<rank[i].length;j++){\n\t\t    if(rank[i][j] !=null){\n\t\t\tres += rank[i][j]+\",\";\n\t\t    }\n\t\t}\n\t    }\n\t    System.out.println(res.substring(0, res.length() - 1));\n\n\n\t    m = sc.nextInt();\n\t    t = sc.nextInt();\n\t    p = sc.nextInt();\n\t    r = sc.nextInt();\n\t}\n    }\n\n}\nclass Team {\n     int count;\n     int time;\n     int penaltytime;\n     int [] pro;\n    Team(int problemCount){\n\tcount = 0;\n\ttime = 0;\n\tpenaltytime = 0;\n\tpro = new int[problemCount];\n    }\n     void wrong(int problemNumber){\n\tpro[problemNumber-1]++;\n    }\n     void success(int problemNumber,int min){\n\tpenaltytime = pro[problemNumber-1]*20;\n\ttime += (min+penaltytime);\n\tcount++;\n    }\n}"
  },
  {
    "language": "Java",
    "code": "import java.util.Arrays;\nimport java.util.Scanner;\n\npublic class Main {\n    static Scanner sc;\n\n    final static int INF = Integer.MAX_VALUE;\n\n    static int M;\n    static int P;\n\n    public static void main(String[] args) {\n        sc = new Scanner(System.in);\n        while (true) {\n            M = sn();\n            int T = sn();\n            P = sn();\n            int R = sn();\n            if ((M | T | P | R) == 0) {\n                break;\n            }\n            Team[] teams = new Team[T];\n            for (int i = 0; i < T; i++) {\n                teams[i] = new Team(i, P);\n            }\n            for (int i = 0; i < R; i++) {\n                int m = sn();\n                int t = sn();\n                int p = sn();\n                int j = sn();\n                teams[t - 1].addScore(p, m, j == 0);\n            }\n\n            for (int i = 0; i < T; i++) {\n                teams[i].calc();\n            }\n            Arrays.sort(teams, (Team o1, Team o2) -> {\n                        if (o1.getSucsessNum() != o2.getSucsessNum()) {\n                            return o2.getSucsessNum() - o1.getSucsessNum();\n                        }\n                        if (o1.time != o2.time) {\n                            return o1.time - o2.time ;\n                        }\n                        return o2.id - o1.id;\n                    }\n            );\n\n            for (int i = 0; i < T; i++) {\n                System.out.print(teams[i].id);\n                if (i != T - 1) {\n                    System.out.print((teams[i + 1].point() == teams[i].point()) ? \"=\" : \",\");\n                }\n            }\n            System.out.println();\n        }\n    }\n\n    public static void solve(int w, int h) {\n\n    }\n\n    public static int sn() {\n        return sc.nextInt();\n    }\n\n    static class Team {\n        public int[] penarlty;\n        public boolean[] sucsess;\n        public int time;\n        public int id;\n\n        public Team(int id, int n) {\n            this.id = id + 1;\n            this.time = 0;\n            this.penarlty = new int[n];\n            this.sucsess = new boolean[n];\n            Arrays.fill(this.penarlty, 0);\n            Arrays.fill(this.sucsess, false);\n        }\n\n        public void addScore(int n, int time, boolean isScusess) {\n            this.sucsess[n - 1] |= isScusess;\n            if (this.sucsess[n - 1]) {\n                this.time += time;\n            } else {\n                this.penarlty[n - 1]++;\n            }\n        }\n\n        public void calc() {\n            for (int i = 0; i < this.sucsess.length; i++) {\n                if (sucsess[i]) {\n                    this.time += this.penarlty[i] * 20;\n                }\n            }\n        }\n\n        public int getSucsessNum() {\n            int sum = 0;\n            for (boolean b : this.sucsess) {\n                sum += b ? 1 : 0;\n            }\n            return sum;\n        }\n\n        public int point() {\n            return this.getSucsessNum() * M * P + this.time;\n        }\n    }\n}"
  },
  {
    "language": "Java",
    "code": "import java.util.*;\nimport java.util.stream.Collectors;\n\n/**\n * Created by ctare on 2017/05/08.\n */\npublic class Main {\n    private static final int Tn = 50 + 1;\n    private static final int Mn = 300 + 1;\n    private static final int Pn = 10 + 1;\n    private static ArrayList<String> buf;\n    private static int[][] simple_rank(int[][] team, Set<Integer> exteam){\n        int[][] winner = new int[Pn][Tn];\n        for (int i = 0; i < team.length; i++) {\n            int[] ints = team[i];\n            if(exteam.contains(i)) winner[Arrays.stream(ints).sum()][i] = 1;\n        }\n        return winner;\n    }\n\n    private static void rank(int[] team, int[][][] team_sub){\n        TreeMap<Integer, ArrayList<Integer>> rankresult = new TreeMap<>();\n        for (int i = 0; i < team.length; i++) {\n            if(team[i] == 1){\n                int sum_time = 0;\n                for (int[] ms : team_sub[i]) {\n                    sum_time += calc_point(ms);\n                }\n                ArrayList<Integer> rr = rankresult.getOrDefault(sum_time, new ArrayList<>());\n                rr.add(i);\n                rankresult.put(sum_time, rr);\n//                System.out.print(\"--- \");\n//                System.out.print(sum_time);\n//                System.out.println(\" : \" + i);\n            }\n        }\n//        System.out.println(rankresult.values());\n//        rankresult.values().forEach(e -> {\n//            System.out.println(String.join(\"=\", e.stream().sorted(Comparator.reverseOrder()).map(Object::toString).collect(Collectors.toList())));\n//        });\n        rankresult.values().forEach(e -> {\n            buf.add(String.join(\"=\", e.stream().sorted(Comparator.reverseOrder()).map(Object::toString).collect(Collectors.toList())));\n        });\n    }\n\n    private static int calc_point(int[] times){\n//        System.out.println(\"calcpoint\");\n//        System.out.println(Arrays.toString(times));\n        int result = 0;\n        forelse: {\n            for (int i = 0; i < times.length; i++) {\n                if(times[i] == -1) result += 20;\n                else if(times[i] == 1) {\n                    result += i;\n                    break forelse;\n                }\n            }\n            result = 0;\n        }\n//        System.out.println(result);\n//        System.out.println(\"calcpoint end\");\n        return result;\n    }\n\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n\n        while(true){\n            buf = new ArrayList<>();\n            int M = sc.nextInt(), T = sc.nextInt(), P = sc.nextInt(), R = sc.nextInt();\n            if(M == 0 && T == 0 && P == 0 && R == 0) break;\n            int[][] team = new int[Tn][Pn];\n            int[][][] team_sub = new int[Tn][Pn][Mn];\n            Set<Integer> exteam = new HashSet<>();\n            for (int i = 1; i <= T; i++) {\n                exteam.add(i);\n            }\n            for (int i = 0; i < R; i++) {\n                int m = sc.nextInt(), t = sc.nextInt(), p = sc.nextInt(), j = sc.nextInt();\n                team[t][p] |= (j == 0 ? 1 : 0);\n                team_sub[t][p][m] = (j == 0 ? 1 : 0)*2 - 1;\n            }\n\n            int[][] winner = simple_rank(team, exteam);\n            for (int i = winner.length - 1; i >= 0; i--) {\n                int sum = Arrays.stream(winner[i]).sum();\n                if(sum > 1){\n                    rank(winner[i], team_sub);\n                } else if(sum > 0) {\n                    buf.add(String.valueOf(Arrays.stream(winner[i]).boxed().collect(Collectors.toList()).indexOf(1)));\n//                    System.out.println(String.valueOf(Arrays.stream(winner[i]).boxed().collect(Collectors.toList()).indexOf(1)));\n                }\n            }\n\n            System.out.println(String.join(\",\", buf));\n        }\n    }\n}"
  },
  {
    "language": "Java",
    "code": "import java.util.*;\n\nclass Main {\n\n  static class Info {\n    private int acCount, acTime;\n    public Info(int count, int time) {\n      this.acCount = count;\n      this.acTime = time;\n    }\n    public int getCount() {\n      return acCount;\n    }\n    public int getTime() {\n      return acTime;\n    }\n  }\n\n  public static void main(String args[]) {\n    Scanner sc = new Scanner(System.in);\n\n    while (true) {\n      int M = sc.nextInt();\n      int T = sc.nextInt();\n      int P = sc.nextInt();\n      int R = sc.nextInt();\n      if (M == 0 && T == 0 && P == 0 && R == 0) return;\n\n      Map<Integer, Info> info_map = new HashMap<>();\n      int waCount[][] = new int[T][P];\n\n      for (int i = 0; i < T; i++) {\n        info_map.put(i, new Info(0, 0));\n      }\n\n      for (int i = 0; i < R; i++) {\n        int m = sc.nextInt();\n        int t = sc.nextInt()-1;\n        int p = sc.nextInt()-1;\n        int j = sc.nextInt();\n        if (j != 0) {\n          waCount[t][p]++;\n        }\n        else {\n          int count = info_map.get(t).getCount() + 1;\n          int time = info_map.get(t).getTime() + m + (waCount[t][p]*20);\n          info_map.put(t, new Info(count, time));\n        }\n      }\n\n      List<Map.Entry<Integer, Info>> info_list = new ArrayList<>(info_map.entrySet());\n      Collections.sort(info_list, new MyComparator());\n\n      /*\n      for (Map.Entry<Integer, Info> entry : info_list) {\n        System.out.println(\"Team\" + (entry.getKey() + 1) + \" : \" +\n                          entry.getValue().getCount() + \"AC, \" +\n                          entry.getValue().getTime() + \"time\");\n      }\n      */\n\n      for (int i = 0; i < T; i++) {\n        if (i == 0) {\n          System.out.print(info_list.get(0).getKey() + 1);\n        }\n        else {\n          String s = \"\";\n          Info xInfo = info_list.get(i-1).getValue();\n          Info yInfo = info_list.get(i).getValue();\n          if (xInfo.getCount() == yInfo.getCount()\n           && xInfo.getTime() == yInfo.getTime()) s = \"=\";\n           else s = \",\";\n           System.out.print(s + (info_list.get(i).getKey() + 1) );\n        }\n      }\n      System.out.println();\n    }\n  }\n\n  static class MyComparator implements Comparator<Map.Entry<Integer, Info>> {\n    public int compare(Map.Entry<Integer, Info> x, Map.Entry<Integer, Info> y) {\n      int xCount = x.getValue().getCount();\n      int yCount = y.getValue().getCount();\n      int xTime = x.getValue().getTime();\n      int yTime = y.getValue().getTime();\n      int xTeamNo = x.getKey();\n      int yTeamNo = y.getKey();\n\n      if (xCount == yCount) {\n        if (xTime == yTime) return yTeamNo - xTeamNo;\n        else return xTime - yTime;\n      }\n      return yCount - xCount;\n    }\n  }\n}\n\n"
  },
  {
    "language": "Java",
    "code": "\nimport java.util.*;\nimport java.io.*;\nimport static java.util.Arrays.*;\nimport static java.util.Collections.*;\nimport static java.lang.Math.*;\n\npublic class Main {\n\n\tint INF = 1 << 28;\n\t//long INF = 1L << 62;\n\tdouble EPS = 1e-10;\n\tint m, t, p, r;\n\t\n\tvoid run() {\n\t\tScanner sc = new Scanner(System.in);\n\t\tfor(;;) {\n\t\t\tm = sc.nextInt(); t = sc.nextInt(); p = sc.nextInt(); r = sc.nextInt();\n\t\t\tif( (m|t|p|r) == 0 ) break;\n\t\t\tT[] team = new T[t];\n\t\t\tfor(int i=0;i<t;i++) team[i] = new T(i+1);\n\t\t\tfor(int i=0;i<r;i++) {\n\t\t\t\tint m = sc.nextInt(), t = sc.nextInt(), p = sc.nextInt(), j = sc.nextInt();\n\t\t\t\tteam[t-1].solve(p, m, j);\n\t\t\t}\n\t\t\tsort(team);\n\t\t\tSystem.out.print(team[0].id);\n\t\t\tfor(int i=1;i<t;i++) System.out.print((team[i].sol == team[i-1].sol && team[i].pen == team[i-1].pen? \"=\": \",\") + team[i].id);\n\t\t\tSystem.out.println();\n\t\t}\n\t}\n\t\n\tclass T implements Comparable<T> {\n\t\tint id, sol, pen;\n\t\tint[] pt;\n\t\tT(int id) {\n\t\t\tthis.id = id;\n\t\t\tsol = 0; pen = 0;\n\t\t\tpt = new int[p];\n\t\t}\n\t\t\n\t\tvoid solve(int p, int t, int j) {\n\t\t\tif(j == 0) {\n\t\t\t\tsol++; pen += t + pt[p-1] * 20;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tpt[p-1]++;\n\t\t\t}\n\t\t}\n\n\t\tpublic int compareTo(T o) {\n\t\t\tif( sol != o.sol ) return o.sol - sol;\n\t\t\tif( pen != o.pen ) return pen - o.pen;\n\t\t\treturn o.id - id;\n\t\t}\n\t}\n\n\tvoid debug(Object... os) {\n\t\tSystem.err.println(Arrays.deepToString(os));\n\t}\n\n\tpublic static void main(String[] args) {\n\t\tnew Main().run();\n\t}\n}"
  },
  {
    "language": "Java",
    "code": "import java.util.*;\nimport java.util.stream.Collectors;\n\n/**\n * Created by ctare on 2017/05/08.\n */\npublic class Main {\n    private static final int Tn = 50 + 1;\n    private static final int Mn = 300 + 1;\n    private static final int Pn = 10 + 1;\n    private static ArrayList<String> buf;\n    private static int[][] simple_rank(int[][] team, Set<Integer> exteam){\n        int[][] winner = new int[Pn][Tn];\n        for (int i = 0; i < team.length; i++) {\n            int[] ints = team[i];\n            if(exteam.contains(i)) winner[Arrays.stream(ints).sum()][i] = 1;\n        }\n        return winner;\n    }\n\n    private static void rank(int[] team, ArrayList<Integer>[][][] team_sub){\n        TreeMap<Integer, ArrayList<Integer>> rankresult = new TreeMap<>();\n        for (int i = 0; i < team.length; i++) {\n            if(team[i] == 1){\n                int sum_time = 0;\n                for (ArrayList<Integer>[] ms : team_sub[i]) {\n                    sum_time += calc_point(ms);\n                }\n                ArrayList<Integer> rr = rankresult.getOrDefault(sum_time, new ArrayList<>());\n                rr.add(i);\n                rankresult.put(sum_time, rr);\n//                System.out.print(\"--- \");\n//                System.out.print(sum_time);\n//                System.out.println(\" : \" + i);\n            }\n        }\n//        System.out.println(rankresult.values());\n//        rankresult.values().forEach(e -> {\n//            System.out.println(String.join(\"=\", e.stream().sorted(Comparator.reverseOrder()).map(Object::toString).collect(Collectors.toList())));\n//        });\n        rankresult.values().forEach(e -> {\n            buf.add(String.join(\"=\", e.stream().sorted(Comparator.reverseOrder()).map(Object::toString).collect(Collectors.toList())));\n        });\n    }\n\n    private static int calc_point(ArrayList<Integer>[] times){\n//        System.out.println(\"calcpoint\");\n//        System.out.println(Arrays.toString(times));\n        int result = 0;\n        forelse: {\n            for (int i = 0; i < times.length; i++) {\n                for (Integer integer : times[i]) {\n                    if(integer == -1) result += 20;\n                    else if(integer == 1) {\n                        result += i;\n                        break forelse;\n                    }\n                }\n            }\n            result = 0;\n        }\n//        System.out.println(result);\n//        System.out.println(\"calcpoint end\");\n        return result;\n    }\n\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n\n        while(true){\n            buf = new ArrayList<>();\n            int M = sc.nextInt(), T = sc.nextInt(), P = sc.nextInt(), R = sc.nextInt();\n            if(M == 0 && T == 0 && P == 0 && R == 0) break;\n            int[][] team = new int[Tn][Pn];\n            ArrayList<Integer>[][][] team_sub = new ArrayList[Tn][Pn][Mn];\n            for (int i = 0; i < team_sub.length; i++) {\n                for (int i1 = 0; i1 < team_sub[i].length; i1++) {\n                    for (int i2 = 0; i2 < team_sub[i][i1].length; i2++) {\n                        team_sub[i][i1][i2] = new ArrayList<>();\n                    }\n                }\n            }\n            Set<Integer> exteam = new HashSet<>();\n            for (int i = 1; i <= T; i++) {\n                exteam.add(i);\n            }\n            for (int i = 0; i < R; i++) {\n                int m = sc.nextInt(), t = sc.nextInt(), p = sc.nextInt(), j = sc.nextInt();\n                team[t][p] |= (j == 0 ? 1 : 0);\n                team_sub[t][p][m].add((j == 0 ? 1 : 0)*2 - 1);\n            }\n\n            int[][] winner = simple_rank(team, exteam);\n            for (int i = winner.length - 1; i >= 0; i--) {\n                int sum = Arrays.stream(winner[i]).sum();\n                if(sum > 1){\n                    rank(winner[i], team_sub);\n                } else if(sum > 0) {\n                    buf.add(String.valueOf(Arrays.stream(winner[i]).boxed().collect(Collectors.toList()).indexOf(1)));\n//                    System.out.println(String.valueOf(Arrays.stream(winner[i]).boxed().collect(Collectors.toList()).indexOf(1)));\n                }\n            }\n\n            System.out.println(String.join(\",\", buf));\n        }\n    }\n}"
  },
  {
    "language": "Java",
    "code": "// ICPC Ranking\nimport java.util.Arrays;\nimport java.util.Scanner;\n\npublic class Main {\n\tpublic static void main(String[] args) {\n\t\tScanner sc = new Scanner(System.in);\n\t\twhile (true) {\n\t\t\tint minutes = sc.nextInt();\n\t\t\tint teams = sc.nextInt();\n\t\t\tint problems = sc.nextInt();\n\t\t\tint records = sc.nextInt();\n\t\t\tif ((minutes | teams | problems | records) == 0)\n\t\t\t\tbreak;\n\t\t\tTeam[] team = new Team[teams];\n\t\t\tfor (int i = 0; i < teams; i++)\n\t\t\t\tteam[i] = new Team(i + 1, problems);\n\t\t\tfor (int i = 0; i < records; i++) {\n\t\t\t\tint m = sc.nextInt();\n\t\t\t\tint t = sc.nextInt() - 1;\n\t\t\t\tint p = sc.nextInt() - 1;\n\t\t\t\tint j = sc.nextInt();\n\t\t\t\tif (j == 0) {\n\t\t\t\t\tteam[t].solved++;\n\t\t\t\t\tteam[t].time += m + team[t].wrong[p] * 20;\n\t\t\t\t} else\n\t\t\t\t\tteam[t].wrong[p]++;\n\t\t\t}\n\t\t\tArrays.sort(team);\n\t\t\tStringBuilder result = new StringBuilder();\n\t\t\tresult.append(team[0].id);\n\t\t\tfor (int i = 1; i < teams; i++) {\n\t\t\t\tif (team[i].solved == team[i - 1].solved\n\t\t\t\t\t\t&& team[i].time == team[i - 1].time)\n\t\t\t\t\tresult.append('=');\n\t\t\t\telse\n\t\t\t\t\tresult.append(',');\n\t\t\t\tresult.append(team[i].id);\n\t\t\t}\n\t\t\tSystem.out.println(result);\n\t\t}\n\t\tsc.close();\n\t}\n\n\tpublic static class Team implements Comparable<Team> {\n\t\tint id;\n\t\tint solved;\n\t\tint time;\n\t\tint[] wrong;\n\n\t\tTeam(int id, int problems) {\n\t\t\tthis.id = id;\n\t\t\tsolved = 0;\n\t\t\ttime = 0;\n\t\t\twrong = new int[problems];\n\t\t}\n\n\t\t@Override\n\t\tpublic int compareTo(Team anotherTeam) {\n\t\t\tif (solved != anotherTeam.solved)\n\t\t\t\treturn anotherTeam.solved - solved;\n\t\t\telse if (time != anotherTeam.time)\n\t\t\t\treturn time - anotherTeam.time;\n\t\t\treturn anotherTeam.id - id;\n\t\t}\n\t}\n}"
  },
  {
    "language": "Java",
    "code": "public class Main {\n\n\tprivate java.util.Scanner sc;\n\tprivate java.io.PrintStream out;\n\t\n\tpublic Main(java.io.InputStream in, java.io.PrintStream out) {\n\t\tthis.sc = new java.util.Scanner(in);\n\t\tthis.out = out;\n\t}\n\t\n\tpublic void run() {\n\t\tfor (;;) {\n\t\t\tfinal int M = sc.nextInt();\n\t\t\tfinal int T = sc.nextInt();\n\t\t\tfinal int P = sc.nextInt();\n\t\t\tfinal int R = sc.nextInt();\n\t\t\tif (M == 0 && T == 0 && P == 0 && R == 0)\n\t\t\t\tbreak ;\n\t\t\t\n\t\t\tfinal Team[] teams = new Team[T];\n\t\t\tfor (int i = 0; i < T; ++i)\n\t\t\t\tteams[i] = new Team(i + 1, P);\n\t\t\tfor (int i = 0; i < R; ++i) {\n\t\t\t\tfinal int m = sc.nextInt();\n\t\t\t\tfinal int t = sc.nextInt();\n\t\t\t\tfinal int p = sc.nextInt();\n\t\t\t\tfinal int j = sc.nextInt();\n\t\t\t\tif (j == 0)\n\t\t\t\t\tteams[t - 1].accept(m, p - 1);\n\t\t\t\telse\n\t\t\t\t\tteams[t - 1].reject(m, p - 1);\n\t\t\t}\n\t\t\tjava.util.Arrays.sort(teams, (new java.util.Comparator<Team>() {\n\t\t\t\t@Override\n\t\t\t\tpublic int compare(Team o1, Team o2) {\n\t\t\t\t\tfinal int det = o1.compareTo(o2);\n\t\t\t\t\tif (det != 0) return -det;\n\t\t\t\t\tif (o2.id < o1.id) return -1;\n\t\t\t\t\tif (o1.id < o2.id) return 1;\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\t\t\t}));\n\t\t\tfor (int i = 0; i < T; ++i) {\n\t\t\t\tif (i > 0) {\n\t\t\t\t\tif (teams[i-1].equals(teams[i]))\n\t\t\t\t\t\tout.print('=');\n\t\t\t\t\telse\n\t\t\t\t\t\tout.print(',');\n\t\t\t\t}\n\t\t\t\tout.print(teams[i].id);\n\t\t\t}\n\t\t\tout.println();\n\t\t}\n\t}\n\t\n\tpublic static void main(String[] args) {\n\t\t(new Main(System.in, System.out)).run();\n\t}\n\t\n\tprivate static class Team implements Comparable<Team> {\n\t\tpublic final int id;\n\t\tprivate final boolean[] solved;\n\t\tprivate final int[] penalty;\n\t\t\n\t\tpublic Team(int id, int n) {\n\t\t\tthis.id = id;\n\t\t\tthis.solved = new boolean[n];\n\t\t\tthis.penalty = new int[n];\n\t\t}\n\t\t\n\t\tpublic void accept(int m, int p) {\n\t\t\tthis.solved[p] = true;\n\t\t\tthis.penalty[p] += m;\n\t\t}\n\t\t\n\t\tpublic void reject(int m, int p) {\n\t\t\tthis.penalty[p] += 20;\n\t\t}\n\t\t\n\t\t@Override\n\t\tpublic boolean equals(Object obj) {\n\t\t\tif (obj == this) return true;\n\t\t\tif (!(obj instanceof Team)) return false;\n\t\t\tfinal Team o = (Team) obj;\n\t\t\treturn this.getSolved() == o.getSolved() && this.getPenalty() == o.getPenalty();\n\t\t}\n\n\t\t@Override\n\t\tpublic int compareTo(Team o) {\n\t\t\tfinal int ss = this.getSolved();\n\t\t\tfinal int os = o.getSolved();\n\t\t\tif (ss < os) return -1;\n\t\t\tif (os < ss) return 1;\n\t\t\tfinal int sp = this.getPenalty();\n\t\t\tfinal int op = o.getPenalty();\n\t\t\tif (op < sp) return -1;\n\t\t\tif (sp < op) return 1;\n\t\t\treturn 0;\n\t\t}\n\t\t\n\t\tprivate int getSolved() {\n\t\t\tint rval = 0;\n\t\t\tfor (int i = 0; i < this.solved.length; ++i) {\n\t\t\t\tif (solved[i])\n\t\t\t\t\t++rval;\n\t\t\t}\n\t\t\treturn rval;\n\t\t}\n\t\t\n\t\tprivate int getPenalty() {\n\t\t\tint rval = 0;\n\t\t\tfor (int i = 0; i < this.solved.length; ++i) {\n\t\t\t\tif (this.solved[i])\n\t\t\t\t\trval += this.penalty[i];\n\t\t\t}\n\t\t\treturn rval;\n\t\t}\n\t}\n\n}"
  },
  {
    "language": "Java",
    "code": "\n\nimport java.util.Arrays;\nimport java.util.Comparator;\nimport java.util.Scanner;\n\npublic class Main \n{\n\tstatic class C implements Comparator<Team>\n\t{\n\n\t\t@Override\n\t\tpublic int compare(Team arg0, Team arg1) \n\t\t{\n\t\t\tint a = arg1.solved - arg0.solved;\n\t\t\tif(a == 0) a = arg0.time - arg1.time;\n\t\t\t\n\t\t\treturn a;\n\t\t}\n\t\t\n\t}\n\t\n\tstatic class C2 implements Comparator<Team>\n\t{\n\n\t\t@Override\n\t\tpublic int compare(Team arg0, Team arg1) \n\t\t{\n\t\t\tint a = arg1.solved - arg0.solved;\n\t\t\tif(a == 0) a = arg0.time - arg1.time;\n\t\t\tif(a == 0) a = arg1.index - arg0.index;\n\t\t\t\n\t\t\treturn a;\n\t\t}\n\t\t\n\t}\n\t\n\tstatic class Team\n\t{\n\t\tint index;\n\t\tint solved;\n\t\tint time;\n\t\t\n\t\tpublic Team(int i)\n\t\t{\n\t\t\tindex = i;\n\t\t}\n\t}\n\n\tpublic static void main(String[] args) \n\t{\n\t\tScanner sc = new Scanner(System.in);\n\t\t\n\t\twhile(true)\n\t\t{\n\t\t\tint m = sc.nextInt();\n\t\t\tint t = sc.nextInt();\n\t\t\tint p = sc.nextInt();\n\t\t\tint r = sc.nextInt();\n\t\t\t\n\t\t\tif(m == 0 && t == 0 && p == 0 && r == 0)return;\n\t\t\t\n\t\t\tint[][] attempts = new int[p][t];\n\t\t\t\n\t\t\tTeam[] tim = new Team[t];\n\t\t\tfor(int i = 0; i < t; i++)\n\t\t\t{\n\t\t\t\ttim[i] = new Team(i+1);\n\t\t\t}\n\t\t\t\n\t\t\tfor(int i = 0; i < r; i++)\n\t\t\t{\n\t\t\t\tint min = sc.nextInt();\n\t\t\t\tint team = sc.nextInt()-1;\n\t\t\t\tint prob = sc.nextInt()-1;\n\t\t\t\tboolean solved = sc.nextInt() == 0;\n\t\t\t\t\n\t\t\t\tif(solved)\n\t\t\t\t{\n\t\t\t\t\t\n\t\t\t\t\ttim[team].solved++;\n\t\t\t\t\ttim[team].time += min + (attempts[prob][team] * 20);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tattempts[prob][team]++;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tC c = new C();\n\t\t\tC2 c2 = new C2();\n\t\t\tArrays.sort(tim, c2);\n\t\t\t\n\t\t\tfor(int i = 0; i < t; i++)\n\t\t\t{\n\t\t\t\tSystem.out.print(tim[i].index);\n\t\t\t\t\n\t\t\t\tif(i < t-1)\n\t\t\t\t{\n\t\t\t\t\tif(c.compare(tim[i], tim[i+1]) == 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tSystem.out.print(\"=\");\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tSystem.out.print(\",\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tSystem.out.print(\"\\n\");\n\t\t}\n\n\t}\n\n}\n\n"
  },
  {
    "language": "Java",
    "code": "import java.util.Arrays;\nimport java.util.Comparator;\nimport java.util.Scanner;\n\npublic class Main {\n\n    Scanner sc = new Scanner(System.in);\n\n    int M;\n    int T;\n    int P;\n    int R;\n    int[][] ps;\n    int[] ss;\n    int[] as;\n\n    void run() {\n        while (true) {\n            M = sc.nextInt();\n            T = sc.nextInt();\n            P = sc.nextInt();\n            R = sc.nextInt();\n            if ((M | T | P | R) == 0) {\n                break;\n            }\n\n            ps = new int[T + 1][P + 1]; // penaruty count\n            ss = new int[T + 1]; // keikazikan\n            as = new int[T + 1];\n\n            Integer[] nums = new Integer[T];\n            for (int i = 0; i < T; i++) {\n                nums[i] = i + 1;\n            }\n\n            for (int i = 0; i < R; i++) {\n                int m = sc.nextInt();\n                int t = sc.nextInt();\n                int p = sc.nextInt();\n                int j = sc.nextInt();\n\n                if (j == 0) {\n                    ss[t] += m + ps[t][p] * 20;\n                    as[t]++;\n                } else {\n                    ps[t][p] += 1;\n                }\n            }\n\n            Arrays.sort(nums, new Comparator<Integer>() {\n                @Override\n                public int compare(Integer a, Integer b) {\n                    if (as[a] != as[b]) {\n                        return as[b] - as[a];\n                    } else if (ss[a] != ss[b]) {\n                        return ss[a] - ss[b];\n                    } else {\n                        return b - a;\n                    }\n                }\n            });\n\n            int idx = 0;\n            boolean init = true;\n            while (true) {\n                if (init) {\n                    init = false;\n                    System.out.print(nums[idx]);\n                    if (idx + 1 >= T) {\n                        break;\n                    }\n                    if (as[nums[idx]] == as[nums[idx + 1]]\n                            && ss[nums[idx]] == ss[nums[idx + 1]]) {\n\n                        System.out.print(\"=\");\n                    } else {\n                        System.out.print(\",\");\n                    }\n                } else {\n                    System.out.print(nums[idx]);\n                    if (idx + 1 >= T) {\n                        break;\n                    } else {\n                        if (as[nums[idx]] == as[nums[idx + 1]]\n                                && ss[nums[idx]] == ss[nums[idx + 1]]) {\n\n                            System.out.print(\"=\");\n                        } else {\n                            System.out.print(\",\");\n                        }\n                    }\n                }\n                idx++;\n            }\n            System.out.println();\n        }\n    }\n\n    public static void main(String[] args) {\n        new Main().run();\n    }\n}"
  },
  {
    "language": "Java",
    "code": "import java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.util.ArrayList;\nimport java.util.Collections;\n\npublic class Main {\n\tpublic static void main(String args[]) throws IOException {\n\t\tBufferedReader br = new BufferedReader(new InputStreamReader(System.in));\n\n\t\twhile (true) {\n\t\t\tString str[] = br.readLine().split(\" \");\n\t\t\tint M = Integer.parseInt(str[0]);\n\t\t\tint T = Integer.parseInt(str[1]);\n\t\t\tint P = Integer.parseInt(str[2]);\n\t\t\tint R = Integer.parseInt(str[3]);\n\n\t\t\tif (M == 0 && T == 0 && P == 0 && R == 0)\n\t\t\t\tbreak;\n\n\t\t\tArrayList<Team> teams = new ArrayList<>();\n\t\t\tfor (int i = 0; i < T; i++) {\n\t\t\t\tteams.add(new Team(i + 1, P));\n\t\t\t}\n\t\t\tfor (int i = 0; i < R; i++) {\n\t\t\t\tstr = br.readLine().split(\" \");\n\t\t\t\tint m = Integer.parseInt(str[0]);\n\t\t\t\tint t = Integer.parseInt(str[1]) - 1;\n\t\t\t\tint p = Integer.parseInt(str[2]) - 1;\n\t\t\t\tint j = Integer.parseInt(str[3]);\n\t\t\t\tteams.get(t).setJudge(m, p, j);\n\t\t\t}\n\t\t\tCollections.sort(teams);\n\t\t\tfor (int i = 0; i < T; i++) {\n\t\t\t\tif (i != 0) {\n\t\t\t\t\tif (teams.get(i).answer != teams.get(i - 1).answer || teams.get(i).time != teams.get(i - 1).time) {\n\t\t\t\t\t\tSystem.out.print(\",\" + teams.get(i).id);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tSystem.out.print(\"=\" + teams.get(i).id);\n\t\t\t\t\t}\n\t\t\t\t} else\n\t\t\t\t\tSystem.out.print(teams.get(i).id);\n\t\t\t}\n\t\t\tSystem.out.print(\"\\n\");\n\t\t}\n\t}\n}\n\nclass Team implements Comparable<Team> {\n\n\tint id;\n\tint time;\n\tint answer;\n\tArrayList<Integer> incorrect = new ArrayList<>();\n\n\tpublic Team(int id, int p) {\n\t\tthis.id = id;\n\t\ttime = 0;\n\t\tanswer = 0;\n\t\tfor (int i = 0; i < p; i++) {\n\t\t\tincorrect.add(0);\n\t\t}\n\t}\n\n\tpublic void setJudge(int time, int problem, int judge) {\n\t\tif (judge == 0) {\n\t\t\tint sum = time;\n\t\t\tfor (int i = 0; i < incorrect.get(problem); i++) {\n\t\t\t\tsum += 20;\n\t\t\t}\n\t\t\tthis.time += sum;\n\t\t\tthis.answer++;\n\t\t} else\n\t\t\tincorrect.set(problem, incorrect.get(problem) + 1);\n\t}\n\n\t@Override\n\tpublic int compareTo(Team arg0) {\n\t\tif (this.answer > arg0.answer) {\n\t\t\treturn -1;\n\t\t} else if (this.answer < arg0.answer) {\n\t\t\treturn 1;\n\t\t} else {\n\t\t\tif (this.time < arg0.time) {\n\t\t\t\treturn -1;\n\t\t\t} else if (this.time > arg0.time) {\n\t\t\t\treturn 1;\n\t\t\t} else {\n\t\t\t\tif (this.id > arg0.id) {\n\t\t\t\t\treturn -1;\n\t\t\t\t} else {\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\n"
  },
  {
    "language": "Java",
    "code": "import java.util.Arrays;\nimport java.util.Comparator;\nimport java.util.Scanner;\n\npublic class Main {\n\tScanner sc = new Scanner(System.in);\n\tint M, T, P, R;\n\n\tvoid run() {\n\t\tfor (;;) {\n\t\t\tM = sc.nextInt();\n\t\t\tT = sc.nextInt();\n\t\t\tP = sc.nextInt();\n\t\t\tR = sc.nextInt();\n\t\t\tif ((M | T | P | R) == 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tTeam[] team = new Team[T];\n\t\t\tfor (int i = 0; i < T; i++) {\n\t\t\t\tTeam t = new Team(i + 1);\n\t\t\t\tteam[i] = t;\n\t\t\t}\n\t\t\tfor (int i = 0; i < R; i++) {\n\t\t\t\tint m = sc.nextInt();\n\t\t\t\tint t = sc.nextInt();\n\t\t\t\tint p = sc.nextInt();\n\t\t\t\tint j = sc.nextInt();\n\n\t\t\t\tif (j != 0) {\n\t\t\t\t\tteam[t - 1].wrong[p] += 20;\n\t\t\t\t} else {\n\t\t\t\t\tteam[t - 1].time += m;\n\t\t\t\t\tteam[t - 1].time += team[t - 1].wrong[p];\n\t\t\t\t\tteam[t - 1].solve++;\n\t\t\t\t}\n\t\t\t}\n\t\t\tArrays.sort(team);\n\t\t\tStringBuilder sb = new StringBuilder();\n\t\t\tfor (int i = 0; i < T; i++) {\n\t\t\t\tsb.append(team[i].num);\n\t\t\t\tif (i != T - 1) {\n\t\t\t\t\tsb.append(team[i].solve == team[i + 1].solve\n\t\t\t\t\t\t\t&& team[i].time == team[i + 1].time ? \"=\" : \",\");\n\t\t\t\t}\n\t\t\t}\n\t\t\tSystem.out.println(sb);\n\t\t}\n\t}\n\n\tpublic static void main(String[] args) {\n\t\tnew Main().run();\n\t}\n\n\tvoid debug(Object... o) {\n\t\tSystem.out.println(Arrays.deepToString(o));\n\t}\n\n\tclass Team implements Comparable<Team> {\n\t\tint num;\n\t\tint solve;\n\t\tint time;\n\t\tint[] wrong;\n\n\t\tTeam(int num) {\n\t\t\tthis.num = num;\n\t\t\twrong = new int[P + 1];\n\t\t}\n\n\t\t@Override\n\t\tpublic int compareTo(Team arg0) {\n\t\t\tif (arg0.solve != this.solve) {\n\t\t\t\treturn arg0.solve - this.solve;\n\t\t\t} else if (arg0.time != this.time) {\n\t\t\t\treturn this.time - arg0.time;\n\t\t\t} else {\n\t\t\t\treturn arg0.num - this.num;\n\t\t\t}\n\t\t}\n\t}\n}"
  },
  {
    "language": "Java",
    "code": "import java.util.*;\n\nclass Main {\n    public static void main(String[] args){\n        Scanner sc = new Scanner(System.in);\n        \n        while(true){\n            int M = sc.nextInt(); //試合時間\n            int T = sc.nextInt(); //チーム数\n            int P = sc.nextInt(); //問題数\n            int R = sc.nextInt(); //提出記録の数\n            if(M==0)break;\n            \n            int[][] teamdata = new int[1+T][3+P];\n            //teamdata[0]は欠番\n            //↓チーム番号\n            //→正解数→所要時間合計→各問題の最終的な正誤（正解1誤答0）（P個）→チーム番号\n            \n            for(int i=0;i<1+T;i++){\n                for(int j=0;j<3+P;j++){\n                    teamdata[i][j]=0;\n                }\n            }\n            \n            for(int i=1; i<T+1;i++)\n                teamdata[i][2+P]=i;\n            \n            \n            int[][] teidata = new int[R][4];\n            //→経過時間→チーム番号→問題番号→正誤（正解0誤答0以外（←注意！上と逆））\n            \n            for(int i=0;i<R;i++){\n                for(int j=0;j<4;j++){\n                    teidata[i][j] = sc.nextInt();\n                }\n            }\n            \n            for(int i=0;i<R;i++){\n                if(teidata[i][3]==0){\n                    teamdata[teidata[i][1]][1+teidata[i][2]]=1; //正解した問題にチェックを入れる\n                    teamdata[teidata[i][1]][1] += teidata[i][0]; //正答時の経過時間を加算\n                    teamdata[teidata[i][1]][0]++; //正解数を増やした\n                }\n            }\n            \n            for(int i=0;i<R;i++){\n                if(teamdata[teidata[i][1]][1+teidata[i][2]]==1&&teidata[i][3]!=0){                    \n                     teamdata[teidata[i][1]][1]+=20;     //正解する前にした誤答のペナルティを加算\n                }   \n            }\n            \n            /*\n             正解数、合計所要時間、チーム番号だけソートする\n             */\n            \n            int[] temp = new int[3];\n            for(int i=2;i<1+T;i++){\n                for(int j=i-1;j>0;j--){\n                    if(teamdata[j][0]<teamdata[j+1][0]){    //正解数でソート\n                        \n                        temp[0] = teamdata[j][0];\n                        temp[1] = teamdata[j][1];\n                        temp[2] = teamdata[j][2+P];\n                        teamdata[j][0] = teamdata[j+1][0];\n                        teamdata[j][1] = teamdata[j+1][1];\n                        teamdata[j][2+P] = teamdata[j+1][2+P];\n                        teamdata[j+1][0] = temp[0];\n                        teamdata[j+1][1] = temp[1];\n                        teamdata[j+1][2+P] = temp[2];\n                                \n                    }else if(teamdata[j][0]==teamdata[j+1][0]){     //合計所要時間でソート\n                        if(teamdata[j][1]>teamdata[j+1][1]){\n                            \n                            temp[0] = teamdata[j][0];\n                            temp[1] = teamdata[j][1];\n                            temp[2] = teamdata[j][2+P];\n                            teamdata[j][0] = teamdata[j+1][0];\n                            teamdata[j][1] = teamdata[j+1][1];\n                            teamdata[j][2+P] = teamdata[j+1][2+P];\n                            teamdata[j+1][0] = temp[0];\n                            teamdata[j+1][1] = temp[1];\n                            teamdata[j+1][2+P] = temp[2];\n                        }else if(teamdata[j][1]==teamdata[j+1][1]){ //チーム番号でソート\n                            if(teamdata[j][2+P]<teamdata[j+1][2+P]){\n                                temp[0] = teamdata[j][0];\n                                temp[1] = teamdata[j][1];\n                                temp[2] = teamdata[j][2+P];\n                                teamdata[j][0] = teamdata[j+1][0];\n                                teamdata[j][1] = teamdata[j+1][1];\n                                teamdata[j][2+P] = teamdata[j+1][2+P];\n                                teamdata[j+1][0] = temp[0];\n                                teamdata[j+1][1] = temp[1];\n                                teamdata[j+1][2+P] = temp[2];\n                            \n                            }\n                        }else{\n                        break;\n                     } \n                  }\n                }\n            }\n            \n            \n            System.out.print(teamdata[1][P+2]);\n            for(int i=2;i<=T;i++){\n                if(teamdata[i-1][0]==teamdata[i][0]&&teamdata[i-1][1]==teamdata[i][1]){\n                    System.out.print(\"=\"+teamdata[i][P+2]);\n                }else{\n                    System.out.print(\",\"+teamdata[i][P+2]);\n                }\n            }\n            System.out.println();\n            \n            \n        }        \n    }   \n}"
  },
  {
    "language": "Java",
    "code": "import java.util.Arrays;\nimport java.util.Scanner;\npublic class Main {\n\tstatic class Team implements Comparable<Team> {\n\t\tint c,t,i;\n\t\tpublic Team(int c, int t, int i) {\n\t\t\tthis.c = c;\n\t\t\tthis.t = t;\n\t\t\tthis.i = i;\n\t\t}\n\t\tpublic int compareTo(Team o) {\n\t\t\tif (this.c - o.c == 0) {\n\t\t\t\tif (this.t - o.t == 0) {\n\t\t\t\t\tif (o.i - this.i > 0)\n\t\t\t\t\t\treturn Integer.MAX_VALUE;\n\t\t\t\t\telse\n\t\t\t\t\t\treturn Integer.MIN_VALUE;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\treturn this.t - o.t;\n\t\t\t}\n\t\t\telse\n\t\t\t\treturn o.c - this.c;\n\t\t}\n\t}\n\tpublic static void main(String[] args) {\n\t\tScanner sc = new Scanner(System.in);\n\t\twhile (true) {\n\t\t\tint m = Integer.parseInt(sc.next());\n\t\t\tint t = Integer.parseInt(sc.next());\n\t\t\tint p = Integer.parseInt(sc.next());\n\t\t\tint r = Integer.parseInt(sc.next());\n\t\t\tif (m == 0 && t == 0 && p == 0 && r == 0) break;\n\t\t\tTeam[] T = new Team[t];\n\t\t\tint[][] miss = new int[t][p];\n\t\t\tfor (int i = 0; i < t; i++)\n\t\t\t\tT[i] = new Team(0, 0, i + 1);\n\t\t\tfor (int i = 0; i < r; i++) {\n\t\t\t\tint mt = Integer.parseInt(sc.next());\n\t\t\t\tint tt = Integer.parseInt(sc.next()) - 1;\n\t\t\t\tint pt = Integer.parseInt(sc.next()) - 1;\n\t\t\t\tint jt = Integer.parseInt(sc.next());\n\t\t\t\tif (jt != 0)\n\t\t\t\t\tmiss[tt][pt]++;\n\t\t\t\tif (jt != 0 || mt > m) continue;\n\t\t\t\tT[tt].c++;\n\t\t\t\tT[tt].t += mt + 20 * miss[tt][pt];\n\t\t\t}\n\t\t\tArrays.sort(T);\n\t\t\tfor (int i = 0; i < t; i++) {\n\t\t\t\tSystem.out.print(T[i].i);\n\t\t\t\tif (i != t - 1 && T[i].compareTo(T[i + 1]) == Integer.MIN_VALUE) {\n\t\t\t\t\tSystem.out.print(\"=\");\n\t\t\t\t}\n\t\t\t\telse if (i != t - 1)\n\t\t\t\t\tSystem.out.print(\",\");\n\t\t\t\telse\n\t\t\t\t\tSystem.out.println();\n\t\t\t}\n\t\t}\n\t}\n}\n"
  },
  {
    "language": "Java",
    "code": "import java.util.Arrays;\nimport java.util.Comparator;\nimport java.util.Scanner;\n\npublic class Main {\n\tScanner sc = new Scanner(System.in);\n\tint M, T, P, R;\n\n\tvoid run() {\n\t\tfor (;;) {\n\t\t\tM = sc.nextInt();\n\t\t\tT = sc.nextInt();\n\t\t\tP = sc.nextInt();\n\t\t\tR = sc.nextInt();\n\t\t\tif ((M | T | P | R) == 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tTeam[] team = new Team[T];\n\t\t\tfor (int i = 0; i < T; i++) {\n\t\t\t\tTeam t = new Team(i + 1);\n\t\t\t\tteam[i] = t;\n\t\t\t}\n\t\t\tfor (int i = 0; i < R; i++) {\n\t\t\t\tint m = sc.nextInt();\n\t\t\t\tint t = sc.nextInt();\n\t\t\t\tint p = sc.nextInt();\n\t\t\t\tint j = sc.nextInt();\n\n\t\t\t\tif (j == 1) {\n\t\t\t\t\tteam[t - 1].wrong[p] += 20;\n\t\t\t\t} else {\n\t\t\t\t\tteam[t - 1].time += m;\n\t\t\t\t\tteam[t - 1].time += team[t - 1].wrong[p];\n\t\t\t\t\tteam[t - 1].solve++;\n\t\t\t\t}\n\t\t\t}\n\t\t\tArrays.sort(team);\n\t\t\tfor (int i = 0; i < T; i++) {\n\t\t\t\tSystem.out.print(team[i].num);\n\t\t\t\tif (i != T - 1) {\n\t\t\t\t\tif (team[i].solve == team[i + 1].solve\n\t\t\t\t\t\t\t&& team[i].time == team[i + 1].time) {\n\t\t\t\t\t\tSystem.out.print(\"=\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tSystem.out.print(\",\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tSystem.out.println();\n\t\t}\n\t}\n\n\tpublic static void main(String[] args) {\n\t\tnew Main().run();\n\t}\n\n\tvoid debug(Object... o) {\n\t\tSystem.out.println(Arrays.deepToString(o));\n\t}\n\n\tclass Team implements Comparable<Team> {\n\t\tint num;\n\t\tint solve;\n\t\tint time;\n\t\tint[] wrong;\n\n\t\tTeam(int num) {\n\t\t\tthis.num = num;\n\t\t\twrong = new int[P + 1];\n\t\t}\n\n\t\t@Override\n\t\tpublic int compareTo(Team arg0) {\n\t\t\tif (arg0.solve != this.solve) {\n\t\t\t\treturn arg0.solve - this.solve;\n\t\t\t} else if (arg0.time != this.time) {\n\t\t\t\treturn this.time - arg0.time;\n\t\t\t} else {\n\t\t\t\treturn arg0.num - this.num;\n\t\t\t}\n\t\t}\n\t}\n}"
  },
  {
    "language": "Java",
    "code": "import java.io.InputStream;\nimport java.io.IOException;\nimport java.io.PrintWriter;\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.Comparator;\nimport java.util.InputMismatchException;\nimport java.util.NoSuchElementException;\nimport java.math.BigInteger;\n \npublic class Main{\n \nstatic PrintWriter out;\nstatic InputReader ir;\n \nstatic void solve(){\n for(;;){\n  int m=ir.nextInt();\n  if(m==0) return;\n  int t=ir.nextInt();\n  int p=ir.nextInt();\n  int r=ir.nextInt();\n  int[][] dat=new int[t][3];\n  int[][] ct=new int[t][p];\n  for(int i=0;i<t;i++) dat[i][0]=i+1;\n  for(int i=0;i<r;i++){\n   int time=ir.nextInt();\n   int tID=ir.nextInt()-1;\n   int pID=ir.nextInt()-1;\n   int cond=ir.nextInt();\n   if(ct[tID][pID]<0) continue;\n   if(cond==0){\n    dat[tID][1]++;\n    dat[tID][2]+=ct[tID][pID]*20+time;\n    ct[tID][pID]=-1;\n   }\n   else{\n    ct[tID][pID]++;\n   }\n  }\n  Arrays.sort(dat,new Comparator<int[]>(){\n   public int compare(int[] a,int[] b){\n    if(a[1]!=b[1]) return -Integer.compare(a[1],b[1]);\n    if(a[2]!=b[2]) return Integer.compare(a[2],b[2]);\n    return -Integer.compare(a[0],b[0]);\n   }\n  });\n  for(int i=0;i<t;){\n   int st=i;\n   while(i<t&&dat[i][1]==dat[st][1]&&dat[i][2]==dat[st][2]) i++;\n   for(int j=st;j<i;j++){\n    out.print(dat[j][0]);\n    if(j!=i-1) out.print(\"=\");\n   }\n   if(i!=t) out.print(\",\");\n  }\n  out.println();\n }\n}\n \npublic static void main(String[] args) throws Exception{\n ir=new InputReader(System.in);\n out=new PrintWriter(System.out);\n solve();\n out.flush();\n}\n \nstatic class InputReader {\n private InputStream in;\n private byte[] buffer=new byte[1024];\n private int curbuf;\n private int lenbuf;\n \n public InputReader(InputStream in) {this.in=in; this.curbuf=this.lenbuf=0;}\n  \n public boolean hasNextByte() {\n  if(curbuf>=lenbuf){\n   curbuf= 0;\n   try{\n    lenbuf=in.read(buffer);\n   }catch(IOException e) {\n    throw new InputMismatchException();\n   }\n   if(lenbuf<=0) return false;\n  }\n  return true;\n }\n \n private int readByte(){if(hasNextByte()) return buffer[curbuf++]; else return -1;}\n  \n private boolean isSpaceChar(int c){return !(c>=33&&c<=126);}\n  \n private void skip(){while(hasNextByte()&&isSpaceChar(buffer[curbuf])) curbuf++;}\n  \n public boolean hasNext(){skip(); return hasNextByte();}\n  \n public String next(){\n  if(!hasNext()) throw new NoSuchElementException();\n  StringBuilder sb=new StringBuilder();\n  int b=readByte();\n  while(!isSpaceChar(b)){\n   sb.appendCodePoint(b);\n   b=readByte();\n  }\n  return sb.toString();\n }\n  \n public int nextInt() {\n  if(!hasNext()) throw new NoSuchElementException();\n  int c=readByte();\n  while (isSpaceChar(c)) c=readByte();\n  boolean minus=false;\n  if (c=='-') {\n   minus=true;\n   c=readByte();\n  }\n  int res=0;\n  do{\n   if(c<'0'||c>'9') throw new InputMismatchException();\n   res=res*10+c-'0';\n   c=readByte();\n  }while(!isSpaceChar(c));\n  return (minus)?-res:res;\n }\n  \n public long nextLong() {\n  if(!hasNext()) throw new NoSuchElementException();\n  int c=readByte();\n  while (isSpaceChar(c)) c=readByte();\n  boolean minus=false;\n  if (c=='-') {\n   minus=true;\n   c=readByte();\n  }\n  long res = 0;\n  do{\n   if(c<'0'||c>'9') throw new InputMismatchException();\n   res=res*10+c-'0';\n   c=readByte();\n  }while(!isSpaceChar(c));\n  return (minus)?-res:res;\n }\n \n public double nextDouble(){return Double.parseDouble(next());}\n \n public int[] nextIntArray(int n){\n  int[] a=new int[n];\n  for(int i=0;i<n;i++) a[i]=nextInt();\n  return a;\n }\n \n public long[] nextLongArray(int n){\n  long[] a=new long[n];\n  for(int i=0;i<n;i++) a[i]=nextLong();\n  return a;\n }\n \n public char[][] nextCharMap(int n,int m){\n  char[][] map=new char[n][m];\n  for(int i=0;i<n;i++) map[i]=next().toCharArray();\n  return map;\n }\n}\n}"
  },
  {
    "language": "Java",
    "code": "import java.util.Arrays;\nimport java.util.Scanner;\nimport java.util.stream.IntStream;\n\npublic class Main {\n    static class Team {\n    \tint team, solved, elapsed, penalty;\n    \tTeam(int t) {\n    \t\tteam =t ; \n    \t}\n    }\n    \n    public static void main(String[] args) {\n        try(Scanner sc = new Scanner(System.in)){\n            while(sc.hasNext()) {\n                int M = sc.nextInt();\n                int T = sc.nextInt();\n                int P = sc.nextInt();\n                int R = sc.nextInt();\n                if(T == 0) break;\n                Team[] ts = IntStream.range(0, T).mapToObj(t -> new Team(t+1)).toArray(Team[]::new);\n                \n                IntStream.range(0, R).forEach(dummy -> {\n                    int m = sc.nextInt();\n                    int t = sc.nextInt()-1;\n                    int p = sc.nextInt();\n                    int j = sc.nextInt();\n                    if(j == 0) {\n                        ts[t].solved |=  (1 << p);//bitで何問解いたかカウント\n                        ts[t].elapsed = m;\n                    }\n                    else {\n                        ts[t].penalty += 20;\n                    }\n                });//準備\n                \n                IntStream.range(0, T).forEach(t -> {\n                    ts[t].solved= Integer.bitCount(ts[t].solved);\n                    ts[t].elapsed += ts[t].penalty;\n                });//解いてたらペナルティ分を足す\n                \n                Arrays.sort(ts, (t1, t2)->{\n                    if(t1.solved == t2.solved) {\n                        return t1.elapsed - t2.elapsed;\n                    }\n                    return t2.solved - t1.solved;\n                });//問題数降順→経過時間で昇順\n                \n                int score = ts[0].solved * M + ts[0].elapsed;\n                \n                System.out.print(ts[0].team);\n                for(int i = 1; i < T; i++) {\n                    int s = ts[i].solved * M + ts[i].elapsed;//同順位のものを探す\n                    System.out.print(s == score ? \"=\" : \",\");\n                    System.out.print(ts[i].team);\n                    score = s;\n                }\n                \n                //IntStream.range(0, T).forEach(i -> System.out.print(” ” + ts[i].team + “(” + ts[i].solved + “,” + ts[i].elapsed + “)”));\n                System.out.println();\n            }\n        }\n    }\n}\n"
  },
  {
    "language": "Java",
    "code": "import java.util.*;\npublic class Main{\n    public static void main(String[] args){\n\tnew Main().run();\n    }\n\n    Scanner kbd = new Scanner(System.in);\n\n    void run(){\n\t// 高さと、対角線のセットを作成\n\tint[][] a = new int[23000][2];\n\t// ↑ 0:高さ、1:幅\n\tint k = 0;\n\tfor(int i=1; i<=150; i++){  // 高さ\n\t    for(int j=i+1; j<=150; j++){ // 幅\n\t\ta[k][0] = i;\n\t\ta[k][1] = j;\n\t\tk++;\n\t    }\n\t}\n\n\tArrays.sort(a, new Comparator<int[]>(){\n\t\tpublic int compare(int[]a, int[]b){\n\t\t    int x1 = a[0]*a[0]+a[1]*a[1];\n\t\t    int x2 = b[0]*b[0]+b[1]*b[1];\n\t\t    if(x1 != x2) return x1-x2;\n\t\t    else return a[0]-b[0];\n\t\t}\n\t    }\n\t    );\n\n\n\twhile(kbd.hasNext()){\n\t    int h = kbd.nextInt();\n\t    int w = kbd.nextInt();\n\t    if(h!=0 && w!=0) solve(h, w, a);\n\t}\n    }\n\n    void solve(int h, int w, int[][] a){\n\tint t = h*h+w*w;\n\tint i=0;\n\twhile((h!=a[i][0] || w!=a[i][1])) i++;\n\tSystem.out.println(a[i+1][0]+\" \"+a[i+1][1]);\n    }\n}\n\t    "
  },
  {
    "language": "Java",
    "code": "import java.awt.geom.Point2D;\nimport java.util.*;\n\n\npublic class Main {\n\tScanner in = new Scanner(System.in);\n\tpublic static void main(String[] args) {\n\t\tnew Main();\n\t}\n\tpublic Main() {\n\n\t\tnew AOJ1187();\n\t\t\n\t}\n\n\tclass AOJ1187{\n\t\tint all_time,all_team,all_problem,all_submit;\n\t\tpublic AOJ1187() {\n\t\t\twhile(true){\n\t\t\t\tall_time = in.nextInt();\n\t\t\t\tall_team = in.nextInt();\n\t\t\t\tall_problem = in.nextInt();\n\t\t\t\tall_submit = in.nextInt();\n\t\t\t\tArrayList<AOJTeam> list = new ArrayList<AOJTeam>();\n\t\t\t\t\n\t\t\t\tfor(int i=0;i<all_team;i++)list.add(new AOJTeam(i));\n\t\t\t\t\n\t\t\t\tif(all_time+all_team+all_problem+all_submit==0)break;\n\t\t\t\tfor(int i=0;i<all_submit;i++){\n\t\t\t\t\tint m = in.nextInt(),t = in.nextInt(),p = in.nextInt(),j = in.nextInt();\n\t\t\t\t\tlist.get(t-1).doIt(m, p, j);\n\t\t\t\t}\n\t\t\t\tCollections.sort(list);\n\t\t\t\t\n//\t\t\t\tfor(int i=0;i<list.size();i++)System.out.println(list.get(i));\n\t\t\t\tSystem.out.print(list.get(0).num);\n\t\t\t\tfor(int i=1;i<list.size();i++){\n\t\t\t\t\tif(list.get(i-1).accept==list.get(i).accept&&\n\t\t\t\t\t\t\tlist.get(i-1).time==list.get(i).time)System.out.print(\"=\");\n\t\t\t\t\telse System.out.print(\",\");\n\t\t\t\t\tSystem.out.print(list.get(i).num);\n\t\t\t\t}\n\t\t\t\tSystem.out.println();\n\t\t\t}\n\t\t}\n\t\t\n\t\tclass AOJTeam implements Comparable<AOJTeam>{\n\t\t\tint time;//過ぎた時間\n\t\t\tint num;//チーム番号\n\t\t\tint accept;//正解数\n\t\t\tint[] cnt;//不正解した回数をカウント\n\t\t\tpublic AOJTeam(int t){//初めて呼び出される\n\t\t\t\ttime = 0;\n\t\t\t\tnum = t+1;\n\t\t\t\taccept = 0;\n\t\t\t\tcnt = new int[all_problem+1];\n\t\t\t}\n\t\t\t\n\t\t\tvoid doIt(int m,int p,int j){//経過時間,問題番号,判定結果\n\t\t\t\tif(j==0){//AC\n\t\t\t\t\ttime+=cnt[p]*20+m;\n\t\t\t\t\taccept++;\n\t\t\t\t}else{//WA\n\t\t\t\t\tcnt[p]++;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tpublic String toString(){\n\t\t\t\treturn \"num= \"+num+\" \"+accept;\n\t\t\t}\n\n\t\t\tpublic int compareTo(AOJTeam o) {\n\t\t\t\tif(this.accept>o.accept)return -1;\n\t\t\t\telse if(this.accept<o.accept)return 1;\n\t\t\t\telse if(this.time<o.time)return -1;\n\t\t\t\telse if(this.time>o.time)return 1;\n\t\t\t\telse if(this.num>o.num)return -1;\n\t\t\t\telse if(this.num<o.num)return 1;\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t}\n\t}\n\n\tclass problem_A{\n\t\tpublic problem_A() {\n\t\t\t//\t\t\tScanner in = new Scanner(System.in);\n\t\t\tint n = in.nextInt();\n\t\t\tint[] list = new int[n];\n\t\t\tfor(int i=0;i<n;i++)list[i] = in.nextInt();\n\t\t\tArrays.sort(list);\n\n\t\t}\n\t}\n\n\n}"
  },
  {
    "language": "Java",
    "code": "\nimport java.io.*;\nimport java.util.*;\n \npublic class Main{\n\tclass Team{\n\t\tint solve;\n\t\tint pena;\n\t\tint idx;\n\t\tint[] problems;\n\t\t\n\t\tpublic Team(int idx, int P){\n\t\t\tthis.idx = idx;\n\t\t\tproblems = new int[P];\n\t\t}\n\t\t\n\t\tpublic boolean equals(Team o){\n\t\t\tif(solve == o.solve && pena == o.pena){\n\t\t\t\treturn true;\n\t\t\t}else{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t}\n \n\tpublic void solve(){\n\t\twhile(true){\n\t\t\tint M = nextInt();\n\t\t\tint T = nextInt();\n\t\t\tint P = nextInt();\n\t\t\tint R = nextInt();\n\t\t\tif(M == 0) return;\n\t\t\tTeam[] teams = new Team[T];\n\t\t\tfor(int i = 0; i < T; i++){\n\t\t\t\tteams[i] = new Team(i, P);\n\t\t\t}\n\t\t\t\n\t\t\tfor(int i = 0; i < R; i++){\n\t\t\t\tint m = nextInt();\n\t\t\t\tint t = nextInt() - 1;\n\t\t\t\tint p = nextInt() - 1;\n\t\t\t\tint j = nextInt();\n\t\t\t\tif(j == 0){\n\t\t\t\t\tteams[t].pena = m + teams[t].problems[p] * 20;\n\t\t\t\t\tteams[t].solve ++;\n\t\t\t\t}else{\n\t\t\t\t\tteams[t].problems[p]++;\n\t\t\t\t}\n\t\t\t}\n\t\t\tArrays.sort(teams, (a,b) -> {\n\t\t\t\tif(a.solve == b.solve){\n\t\t\t\t\tif(a.pena == b.pena){\n\t\t\t\t\t\treturn Integer.compare(b.idx, a.idx);\n\t\t\t\t\t}else{\n\t\t\t\t\t\treturn Integer.compare(a.pena, b.pena);\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\treturn Integer.compare(b.solve, a.solve);\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tout.print(teams[0].idx + 1);\n\t\t\tTeam prev = teams[0];\n\t\t\tfor(int i = 1; i < T; i++){\n\t\t\t\tif(prev.equals(teams[i])){\n\t\t\t\t\tout.print(\"=\");\n\t\t\t\t}else{\n\t\t\t\t\tout.print(\",\");\n\t\t\t\t}\n\t\t\t\tprev = teams[i];\n\t\t\t\tout.print(teams[i].idx + 1);\n\t\t\t}\n\t\t\tout.println();\n\t\t}\n\t}\n\tpublic int sqrt(int v){\n\t\tfor(int i = 1; i * i <= v; i++){\n\t\t\tif(i * i == v) return i;\n\t\t}\n\t\treturn -1;\n\t}\n\t\n\tprivate static PrintWriter out;\n\tpublic static void main(String[] args){\n\t\tout = new PrintWriter(System.out);\n\t\tnew Main().solve();\n\t\tout.flush();\n\t}\n\t\n\t\n\t\n\tpublic static int nextInt(){\n\t\tint num = 0;\n\t\tString str = next();\n\t\tboolean minus = false;\n\t\tint i = 0;\n\t\tif(str.charAt(0) == '-'){\n\t\t\tminus = true;\n\t\t\ti++;\n\t\t}\n\t\tint len = str.length();\n\t\tfor(;i < len; i++){\n\t\t\tchar c = str.charAt(i);\n\t\t\tif(!('0' <= c && c <= '9')) throw new RuntimeException();\n\t\t\tnum = num * 10 + (c - '0');\n\t\t}\n\t\treturn minus ? -num : num;\n\t}\n\t\n\tpublic static long nextLong(){\n\t\tlong num = 0;\n\t\tString str = next();\n\t\tboolean minus = false;\n\t\tint i = 0;\n\t\tif(str.charAt(0) == '-'){\n\t\t\tminus = true;\n\t\t\ti++;\n\t\t}\n\t\tint len = str.length();\n\t\tfor(;i < len; i++){\n\t\t\tchar c = str.charAt(i);\n\t\t\tif(!('0' <= c && c <= '9')) throw new RuntimeException();\n\t\t\tnum = num * 10l + (c - '0');\n\t\t}\n\t\treturn minus ? -num : num;\n\t}\n\tpublic static String next(){\n\t\tint c;\n\t\twhile(!isAlNum(c = read())){}\n\t\tStringBuilder build = new StringBuilder();\n\t\tbuild.append((char)c);\n\t\twhile(isAlNum(c = read())){\n\t\t\tbuild.append((char)c);\n\t\t}\n\t\treturn build.toString();\n\t}\n\t\n\t\n\tprivate static byte[] inputBuffer = new byte[1024];\n\tprivate static int bufferLength = 0;\n\tprivate static int bufferIndex = 0;\n\tprivate static int read(){\n\t\tif(bufferLength < 0) throw new RuntimeException();\n\t\tif(bufferIndex >= bufferLength){\n\t\t\ttry{\n\t\t\t\tbufferLength = System.in.read(inputBuffer);\n\t\t\t\tbufferIndex = 0;\n\t\t\t}catch(IOException e){\n\t\t\t\tthrow new RuntimeException(e);\n\t\t\t}\n\t\t\tif(bufferLength <= 0) return (bufferLength = -1);\n\t\t}\n\t\treturn inputBuffer[bufferIndex++];\n\t}\n\t\n\tprivate static boolean isAlNum(int c){\n\t\treturn '!' <= c && c <= '~';\n\t}\n}"
  },
  {
    "language": "Java",
    "code": "import java.util.Scanner;\nimport java.util.Arrays;\n\npublic class Main{\n\tpublic static void main(String[] args) {\n\t\tScanner sc = new Scanner(System.in);\n\n\t\twhile(true){\n\t\t\tint timelimit = sc.nextInt();\n\t\t\tint team_num = sc.nextInt();\n\t\t\tint q_num = sc.nextInt();\n\t\t\tint record_num = sc.nextInt();\n\t\t\tif(timelimit==0) break;\n\n\t\t\tTeam[] team = new Team[team_num];\n\t\t\tint[][] solved = new int[q_num + 1][team_num];\n\t\t\tfor(int i=0; i<team_num; i++){\n\t\t\t\tteam[i] = new Team();\n\t\t\t\tsolved[0][i] = 100-i-1;\n\t\t\t}\n\n\t\t\tfor(int i=1; i<q_num+1; i++){\n\t\t\t\tArrays.fill(solved[i], 30000);\n\t\t\t}\n\n\t\t\tfor(int i=0; i<record_num; i++){\n\t\t\t\tint minute = sc.nextInt();\n\t\t\t\tint t = sc.nextInt();\n\t\t\t\tint q = sc.nextInt();\n\t\t\t\tint judge = sc.nextInt();\n\t\t\t\tif(judge!=0){\n\t\t\t\t\tteam[t-1].wrong++;\n\t\t\t\t}else{\n\t\t\t\t\tsolved[team[t-1].cnt][t-1] = 30000;\n\t\t\t\t\tteam[t-1].cnt++;\n\t\t\t\t\tteam[t-1].duration += (minute + team[t-1].wrong*20)*100;\n\t\t\t\t\tsolved[team[t-1].cnt][t-1] = -t + team[t-1].duration;\n\t\t\t\t\tteam[t-1].wrong = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\tString str = \"\";\n\t\t\tfor(int i=q_num; i>=0; i--){\n\t\t\t\tArrays.sort(solved[i]);\n\t\t\t\tif(solved[i][0]==30000) continue;\t\n\t\t\t\tstr += str.valueOf(100-solved[i][0]%100);\n\t\t\t\tfor(int j=1; j<team_num; j++){\n\t\t\t\t\tif(solved[i][j]==30000)\tbreak;\n\t\t\t\t\tif(solved[i][j]/100 == solved[i][j-1]/100){\n\t\t\t\t\t\tstr += \"=\" + str.valueOf(100-solved[i][j]%100);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tstr += \",\" + str.valueOf(100-solved[i][j]%100);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tstr += \",\";\n\t\t\t}\n\t\t\tstr = str.substring(0, str.length()-1);\n\t\t\tSystem.out.println(str);\n\t\t}\n\t}\n\n\tpublic static class Team{\n\t\tint duration = 100;\n\t\tint cnt = 0;\n\t\tint wrong = 0;\n\t}\n}"
  },
  {
    "language": "Java",
    "code": "import java.util.Arrays;\nimport java.util.Scanner;\n\n//ICPC Ranking\npublic class Main{\n\n\tclass R implements Comparable<R>{\n\t\tint id, correct, time, score;\n\t\tint[] penalty;\n\t\tint[] submit;\n\t\tboolean[] corrected;\n\t\tpublic R(int id) {\n\t\t\tthis.id = id;\n\t\t\tcorrected = new boolean[11];\n\t\t\tpenalty = new int[11];\n\t\t\tsubmit = new int[11];\n\t\t}\n\t\tpublic void calc(){\n\t\t\tscore = correct * 100000000 - time;\n\t\t}\n\t\t@Override\n\t\tpublic int compareTo(R r) {\n\t\t\tif (score != r.score) return r.score - score;\n\t\t\treturn r.id-id;\n\t\t}\n\t}\n\t\n\tpublic void run(){\n\t\tScanner sc = new Scanner(System.in);\n\t\tfor(;;){\n\t\t\tint M = sc.nextInt(), T = sc.nextInt(), P = sc.nextInt(), R = sc.nextInt();\n\t\t\tif ((M|T|P|R)==0)break;\n\t\t\tR[] teams = new R[T];\n\t\t\tfor(int i=0;i<T;i++)teams[i]=new R(i+1);\n\t\t\twhile(R--!=0){\n\t\t\t\tint m = sc.nextInt(), t = sc.nextInt()-1, p = sc.nextInt(), j = sc.nextInt();\n\t\t\t\tif (j!=0) {\n\t\t\t\t\tteams[t].penalty[p]++;\n\t\t\t\t} else {\n\t\t\t\t\tteams[t].submit[p] = m;\n\t\t\t\t\tteams[t].corrected[p] = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor(int i=0;i<T;i++){\n\t\t\t\tfor(int j=1;j<=P;j++){\n\t\t\t\t\tif (teams[i].corrected[j]){\n\t\t\t\t\t\tteams[i].correct++;\n\t\t\t\t\t\tteams[i].time += teams[i].submit[j] + 20 * teams[i].penalty[j];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tteams[i].calc();\n\t\t\t}\n\t\t\tArrays.sort(teams);\n\t\t\tSystem.out.print(teams[0].id);\n\t\t\tfor(int i=1;i<T;i++){\n\t\t\t\tif (teams[i].score == teams[i-1].score) System.out.print(\"=\"+teams[i].id);\n\t\t\t\telse System.out.print(\",\"+teams[i].id);\n\t\t\t}\n\t\t\tSystem.out.println();\n\t\t}\n\t}\n\t\n\tpublic static void main(String[] args) {\n\t\tnew Main().run();\n\t}\n}"
  },
  {
    "language": "Java",
    "code": "import java.util.*;\npublic class Main {\n\n\tpublic static void main(String[] args) {\n\t\tScanner in=new Scanner(System.in);\n\t\twhile(true){\n\t\t\tint M=in.nextInt(),T=in.nextInt(),P=in.nextInt(),R=in.nextInt();\n\t\t\tif(M==0 && T==0)break;\n\n\t\t\tteam data[]=new team[T];\n\t\t\tfor(int i=0;i<T;i++)data[i]=new team(i+1,0,0);\n\n\t\t\tfor(int i=0;i<R;i++){\n\t\t\t\tint m=in.nextInt(),t=in.nextInt(),p=in.nextInt(),j=in.nextInt();\n\t\t\t\tif(j==0){\n\t\t\t\t\tdata[t-1].prob++;\n\t\t\t\t\tdata[t-1].wasWA(p);\n\t\t\t\t\tdata[t-1].time+=m;\n\t\t\t\t}\n\t\t\t\telse data[t-1].WA.add(p);\n\t\t\t}\n\t\t\t\n\t\t\t//for(int i=0;i<T;i++)System.out.printf(\"team=%d, solved=%d, time=%d\\n\",data[i].no,data[i].prob,data[i].time);\n\t\t\t\n\t\t\t//sort\n\t\t\tboolean flag=true;\n\t\t\tfor(int i=0;flag;i++){\n\t\t\t\tflag=false;\n\t\t\t\tfor(int j=T-1;j>=i+1;j--){\n\t\t\t\t\tif(data[j].prob>data[j-1].prob){\n\t\t\t\t\t\tswap(data,j,j-1);\n\t\t\t\t\t\tflag=true;\n\t\t\t\t\t}\n\t\t\t\t\telse if(data[j].prob==data[j-1].prob && data[j].time<data[j-1].time){\n\t\t\t\t\t\tswap(data,j,j-1);\n\t\t\t\t\t\tflag=true;\n\t\t\t\t\t}\n\t\t\t\t\telse if(data[j].prob==data[j-1].prob && data[j].time==data[j-1].time && data[j].no>data[j-1].no){\n\t\t\t\t\t\tswap(data,j,j-1);\n\t\t\t\t\t\tflag=true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t//System.out.println();\n\t\t\t//for(int i=0;i<T;i++)System.out.printf(\"team=%d, solved=%d, time=%d\\n\",data[i].no,data[i].prob,data[i].time);\n\t\t\tfor(int i=0;i<T-1;i++){\n\t\t\t\tif(data[i].prob==data[i+1].prob && data[i].time==data[i+1].time)System.out.printf(\"%d=\",data[i].no);\n\t\t\t\telse System.out.printf(\"%d,\",data[i].no);\n\t\t\t}\n\t\t\tSystem.out.printf(\"%d\\n\",data[T-1].no);\n\t\t}\n\t}\n\t\n\tstatic void swap(team[] A,int i,int j){\n\t\tteam tt=A[i];\n\t\tA[i]=A[j];\n\t\tA[j]=tt;\n\t}\n\n}\n\nclass team{\n\tint no,prob,time;\n\tList<Integer> WA;\n\n\tteam(int n,int p,int t){\n\t\tno=n; prob=p; time=t;\n\t\tWA=new ArrayList<>();\n\t}\n\n\tvoid wasWA(int p){\n\t\tfor(int i=0;i<WA.size();i++){\n\t\t\tif(WA.get(i)==p)time+=20;\n\t\t}\n\t}\n}\n\n"
  },
  {
    "language": "Java",
    "code": "import java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.util.Arrays;\n\n\npublic class Main {\n\n\t/**\n\t * @param args\n\t * @throws IOException \n\t */\n\tpublic static void main(String[] args) throws IOException {\n\t\t// TODO Auto-generated method stub\n\t\tBufferedReader br = new BufferedReader(new InputStreamReader(System.in));\n\t\t\n\t\twhile(true){\n\t\t\tString[] tmpArray = br.readLine().split(\" \");\n\t\t\tint time = Integer.parseInt(tmpArray[0]);\n\t\t\tint teamNum = Integer.parseInt(tmpArray[1]);\n\t\t\tint probNum = Integer.parseInt(tmpArray[2]);\n\t\t\tint recNum = Integer.parseInt(tmpArray[3]);\n\t\t\t\n\t\t\tif(time == 0){\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\n\t\t\tString[] records = new String[recNum];\n\t\t\tfor(int i = 0; i < recNum; i++){\n\t\t\t\trecords[i] = br.readLine();\n\t\t\t}\n\t\t\t\n\t\t\tsolve(time, teamNum, probNum, records);\n\t\t}\n\t\t\n\t}\n\t\n\tstatic void solve(int time, int teamNum, int probNum, String[] records){\n\t\tTeam[] teams = new Team[teamNum];\n\t\t\n\t\tfor(int i = 0; i < teamNum; i++){\n\t\t\tteams[i] = new Team(i + 1, probNum);\n\t\t}\n\t\t\n\t\tfor(int i = 0; i < records.length ; i++){\n\t\t\tString[] tmpArray = records[i].split(\" \");\n\t\t\tint m = Integer.parseInt(tmpArray[0]);\n\t\t\tint t = Integer.parseInt(tmpArray[1]) - 1;\n\t\t\tint p = Integer.parseInt(tmpArray[2]);\n\t\t\t\n\t\t\tif(tmpArray[3].equals(\"0\")){\n\t\t\t\tteams[t].AC(p, m);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tteams[t].WA(p);\n\t\t\t}\n\t\t}\n\t\t\n\t\t//debug\n//\t\tfor(int i = 0; i < teams.length ; i++){\n//\t\t\tSystem.out.println(teams[i].toString());\n//\t\t}\n\t\tArrays.sort(teams);\n\t\tSystem.out.print(teams[0].id);\n\t\tfor(int i = 1; i < teams.length ; i++){\n\t\t\tif(teams[i-1].equals(teams[i])){\n\t\t\t\tSystem.out.print(\"=\");\n\t\t\t}\n\t\t\telse {\n\t\t\t\tSystem.out.print(\",\");\n\t\t\t}\n\t\t\tSystem.out.print(teams[i].id);\n\t\t}\n\t\tSystem.out.println();\n\t\t\n\t}\n\n}\n\nclass Team implements Comparable<Team>{\n\tint id;\n\tboolean[] ac;\n\tint numOfAC;\n\tint time;\n\tint[] wa;\n\t\n\tpublic Team(int id, int probNum) {\n\t\tthis.id = id;\n\t\tthis.ac = new boolean[probNum + 1];\n\t\tthis.time = 0;\n\t\tthis.numOfAC = 0;\n\t\tthis.wa = new int[probNum + 1];\n\t}\n\t\n\tpublic void AC(int pid, int time){\n\t\tac[pid] = true;\n\t\tnumOfAC++;\n\t\tthis.time += time + 20*wa[pid];\n\t}\n\t\n\tpublic void WA(int pid){\n\t\twa[pid]++;\n\t}\n\n\t@Override\n\t//AC??°????????§???????????????????????£??????????????§?????????\n\t//?????????????????????id??§??????\n\tpublic int compareTo(Team t) {\n\t\treturn this.numOfAC == t.numOfAC ?\n\t\t\t\t(this.time == t.time ? t.id - this.id : this.time - t.time) :\n\t\t\t\t\tt.numOfAC - this.numOfAC;\n\t}\n\t\n\tpublic boolean equals(Team t) {\n\t\treturn this.numOfAC == t.numOfAC && this.time == t.time;\n\t}\n\t\n\tpublic String toString(){\n\t\treturn \"ID \"+id+\"AC \"+numOfAC+\" time \"+time;\n\t}\n}"
  },
  {
    "language": "Java",
    "code": "import java.util.Arrays;\nimport java.util.Scanner;\n\npublic class Main {\n\n\tpublic static void main(String[] args) {\n\t\tMain m = new Main();\n\t\tm.run();\n\t}\n\n\tScanner sc = new Scanner(System.in);\n\n\tvoid run() {\n\n\t\tfor (;;) {\n\t\t\tint m = sc.nextInt();\n\t\t\tint t = sc.nextInt();\n\t\t\tint p = sc.nextInt();\n\t\t\tint r = sc.nextInt();\n\n\t\t\tif (m == 0 && t == 0 && p == 0 && r == 0) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tint score[][] = new int[t][p];\n\t\t\tint solved[][] = new int[t][p];\n\t\t\tfor (int i = 0; i < r; i++) {\n\t\t\t\tint mm = sc.nextInt();\n\t\t\t\tint tt = sc.nextInt()-1;\n\t\t\t\tint pp = sc.nextInt()-1;\n\t\t\t\tint jj = sc.nextInt();\n\t\t\t\t\n\t\t\t\tif(jj == 0){\n\t\t\t\t\tscore[tt][pp] += mm;\n\t\t\t\t\tsolved[tt][pp] = 1;\n\t\t\t\t}else{\n\t\t\t\t\tscore[tt][pp] += 20;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tE[] ee = new E[t];\n\t\t\tfor(int i = 0; i < t; i++){\n\t\t\t\tE e = new E();\n\t\t\t\te.sol = 0;\n\t\t\t\te.pen = 0;\n\t\t\t\te.id = i+1;\n\t\t\t\tfor(int j = 0 ; j < p ;j++){\n\t\t\t\t\te.sol += solved[i][j];\n\t\t\t\t\te.pen += solved[i][j] * score[i][j];\n\t\t\t\t}\n\t\t\t\tee[i] = e;\n\t\t\t}\n\t\t\tArrays.sort(ee,Main::compare);\n\t\t\t\n\t\t\tfor(int i =0 ; i< t-1;i++){\n\t\t\t\tSystem.out.print(ee[i].id);\n\t\t\t\tSystem.out.print(ee[i].sol == ee[i+1].sol && ee[i].pen == ee[i+1].pen ?\"=\":\",\");\n\t\t\t}\n\t\t\tSystem.out.println(ee[t-1].id);\n\t\t}\n\t}\n\tclass E{\n\t\tint sol;\n\t\tint pen;\n\t\tint id;\n\t}\n\tstatic int compare(E a, E b){\n\t\treturn a.sol == b.sol? a.pen == b.pen? b.id-a.id:a.pen-b.pen:b.sol-a.sol;\n\t}\n\t\n}\n\n"
  },
  {
    "language": "Java",
    "code": "\nimport java.io.*;\nimport java.util.*;\n\npublic class Main {\n\tFastScanner in = new FastScanner(System.in);\n\tPrintWriter out = new PrintWriter(System.out);\n\n\tpublic void run() {\n\t\twhile (true) {\n\t\t\tint M = in.nextInt(), T = in.nextInt(), P = in.nextInt(), R = in.nextInt();\n\t\t\tif ((M|T|P|R) == 0) break;\n\t\n\t\t\tint[] solved = new int[T+1];\n\t\t\tint[] penalty = new int[T+1];\n\t\t\tint[][] missCount = new int[T+1][P+1];\n\t\t\t\n\t\t\tfor (int i = 0; i < R; i++) {\n\t\t\t\tint m = in.nextInt(), t = in.nextInt(), p = in.nextInt(), j = in.nextInt();\n\t\t\t\tif (j == 0) {\n\t\t\t\t\tsolved[t]++;\n\t\t\t\t\tpenalty[t] += (missCount[t][p] * 20) + m;\n\t\t\t\t} else {\n\t\t\t\t\tmissCount[t][p]++;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tboolean[] used = new boolean[T+1];\n\t\t\tint beforeSolved = -1, beforePenalty = 1000000;\n\t\t\tfor (int i = 1; i <= T; i++) {\n\t\t\t\tint nextTeam = -1;\n\t\t\t\tint maxSolved = -1, minPenalty = 10000000;\n\t\t\t\tfor (int j = 1; j <= T; j++) {\n\t\t\t\t\tif (used[j]) continue;\n\t\t\t\t\tif (maxSolved < solved[j] || (maxSolved == solved[j] && minPenalty >= penalty[j])) {\n\t\t\t\t\t\tnextTeam = j;\n\t\t\t\t\t\tmaxSolved = solved[j];\n\t\t\t\t\t\tminPenalty = penalty[j];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (i != 1)\n\t\t\t\t\tif (minPenalty == beforePenalty && maxSolved == beforeSolved) {\n\t\t\t\t\t\tSystem.out.print(\"=\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tSystem.out.print(\",\");\n\t\t\t\t\t}\n\t\t\t\tSystem.out.print(nextTeam);\n\t\t\t\tbeforeSolved = maxSolved;\n\t\t\t\tbeforePenalty = minPenalty;\n\t\t\t\tused[nextTeam] = true;\n\t\t\t}\n\t\t\t\n\t\t\tSystem.out.println();\n\t\t}\n\t}\n\n\tpublic static void main(String[] args) {\n\t\tnew Main().run();\n\t}\n\n\tpublic void debug(Object... obj) {\n\t\tSystem.out.println(Arrays.deepToString(obj));\n\t}\n\n\tclass FastScanner {\n\t\tprivate InputStream stream;\n\t\tprivate byte[] buf = new byte[1024];\n\t\tprivate int curChar;\n\t\tprivate int numChars;\n\n\t\tpublic FastScanner(InputStream stream) {\n\t\t\tthis.stream = stream;\n\t\t\t//stream = new FileInputStream(new File(\"dec.in\"));\n\n\t\t}\n\n\t\tint read() {\n\t\t\tif (numChars == -1)\n\t\t\t\tthrow new InputMismatchException();\n\t\t\tif (curChar >= numChars) {\n\t\t\t\tcurChar = 0;\n\t\t\t\ttry {\n\t\t\t\t\tnumChars = stream.read(buf);\n\t\t\t\t} catch (IOException e) {\n\t\t\t\t\tthrow new InputMismatchException();\n\t\t\t\t}\n\t\t\t\tif (numChars <= 0)\n\t\t\t\t\treturn -1;\n\t\t\t}\n\t\t\treturn buf[curChar++];\n\t\t}\n\n\t\tboolean isSpaceChar(int c) {\n\t\t\treturn c == ' ' || c == '\\n' || c == '\\r' || c == '\\t' || c == -1;\n\t\t}\n\n\t\tboolean isEndline(int c) {\n\t\t\treturn c == '\\n' || c == '\\r' || c == -1;\n\t\t}\n\n\t\tint nextInt() {\n\t\t\treturn Integer.parseInt(next());\n\t\t}\n\n\t\tlong nextLong() {\n\t\t\treturn Long.parseLong(next());\n\t\t}\n\n\t\tdouble nextDouble() {\n\t\t\treturn Double.parseDouble(next());\n\t\t}\n\n\t\tString next() {\n\t\t\tint c = read();\n\t\t\twhile (isSpaceChar(c))\n\t\t\t\tc = read();\n\t\t\tStringBuilder res = new StringBuilder();\n\t\t\tdo {\n\t\t\t\tres.appendCodePoint(c);\n\t\t\t\tc = read();\n\t\t\t} while (!isSpaceChar(c));\n\t\t\treturn res.toString();\n\t\t}\n\n\t\tString nextLine() {\n\t\t\tint c = read();\n\t\t\twhile (isEndline(c))\n\t\t\t\tc = read();\n\t\t\tStringBuilder res = new StringBuilder();\n\t\t\tdo {\n\t\t\t\tres.appendCodePoint(c);\n\t\t\t\tc = read();\n\t\t\t} while (!isEndline(c));\n\t\t\treturn res.toString();\n\t\t}\n\t}\n}"
  },
  {
    "language": "Java",
    "code": "import java.util.Arrays;\nimport java.util.Comparator;\nimport java.util.Scanner;\n\npublic class Main {\n\tScanner sc = new Scanner(System.in);\n\tint M, T, P, R;\n\n\tvoid run() {\n\t\tfor (;;) {\n\t\t\tM = sc.nextInt();\n\t\t\tT = sc.nextInt();\n\t\t\tP = sc.nextInt();\n\t\t\tR = sc.nextInt();\n\t\t\tif ((M | T | P | R) == 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tTeam[] team = new Team[T];\n\t\t\tfor (int i = 0; i < T; i++) {\n\t\t\t\tTeam t = new Team(i + 1);\n\t\t\t\tteam[i] = t;\n\t\t\t}\n\t\t\tfor (int i = 0; i < R; i++) {\n\t\t\t\tint m = sc.nextInt();\n\t\t\t\tint t = sc.nextInt();\n\t\t\t\tint p = sc.nextInt();\n\t\t\t\tint j = sc.nextInt();\n\n\t\t\t\tif (j != 0) {\n\t\t\t\t\tteam[t - 1].wrong[p] += 20;\n\t\t\t\t} else {\n\t\t\t\t\tteam[t - 1].time += m;\n\t\t\t\t\tteam[t - 1].time += team[t - 1].wrong[p];\n\t\t\t\t\tteam[t - 1].solve++;\n\t\t\t\t}\n\t\t\t}\n\t\t\tArrays.sort(team);\n\t\t\tfor (int i = 0; i < T; i++) {\n\t\t\t\tSystem.out.print(team[i].num);\n\t\t\t\tif (i != T - 1) {\n\t\t\t\t\tif (team[i].solve == team[i + 1].solve\n\t\t\t\t\t\t\t&& team[i].time == team[i + 1].time) {\n\t\t\t\t\t\tSystem.out.print(\"=\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tSystem.out.print(\",\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tSystem.out.println();\n\t\t}\n\t}\n\n\tpublic static void main(String[] args) {\n\t\tnew Main().run();\n\t}\n\n\tvoid debug(Object... o) {\n\t\tSystem.out.println(Arrays.deepToString(o));\n\t}\n\n\tclass Team implements Comparable<Team> {\n\t\tint num;\n\t\tint solve;\n\t\tint time;\n\t\tint[] wrong;\n\n\t\tTeam(int num) {\n\t\t\tthis.num = num;\n\t\t\twrong = new int[P + 1];\n\t\t}\n\n\t\t@Override\n\t\tpublic int compareTo(Team arg0) {\n\t\t\tif (arg0.solve != this.solve) {\n\t\t\t\treturn arg0.solve - this.solve;\n\t\t\t} else if (arg0.time != this.time) {\n\t\t\t\treturn this.time - arg0.time;\n\t\t\t} else {\n\t\t\t\treturn arg0.num - this.num;\n\t\t\t}\n\t\t}\n\t}\n}"
  },
  {
    "language": "Java",
    "code": "import java.awt.Point;\nimport java.io.FileInputStream;\nimport java.io.PrintStream;\nimport java.util.ArrayList;\nimport java.util.Scanner;\n \npublic class Main {\n     \n    static int M, T, P, R;\n    static int[] m, t, p, j;\n\t\n    static void start()\n    {\n    \tint[] ans = new int[T];\n        int[] times = new int[T];\n        \n        \n        for(int team = 0;team < T;team++)\n        {\n        \tans[team] = times[team] = 0;\n        \tfor(int pro = 0;pro < P;pro++)\n        \t{\n        \t\tint sum = 0;\n        \t\tfor(int i = 0;i < R;i++)\n        \t\t{\n        \t\t\tif(t[i] == (team+1) && p[i] == (pro+1))\n        \t\t\t{\n        \t\t\t\tif(j[i] == 0)\n        \t\t\t\t{\n        \t\t\t\t\tans[team]++;\n        \t\t\t\t\ttimes[team] += sum + m[i];\n        \t\t\t\t\tbreak;\n        \t\t\t\t}\n        \t\t\t\telse\n        \t\t\t\t{\n        \t\t\t\t\tsum += 20;\n        \t\t\t\t}\n        \t\t\t}\n        \t\t}\n        \t}\n        }\n        \n        int[] order = new int[T];\n        for (int i = 0; i < T; i++) {\n\t\t\torder[i] = i+1;\n\t\t}\n        \n        // ひっくり返す\n        int[] anss = ans;\n        int[] timess = times;\n        int[] orderr = order;\n        \n        ans = new int[T];\n        times = new int[T];\n        order = new int[T];\n        \n        for (int i = 0; i < T; i++) {\n\t\t\tans[i] = anss[T-1-i];\n\t\t\ttimes[i] = timess[T-1-i];\n\t\t\torder[i] = orderr[T-1-i];\n\t\t}\n        \n        for (int i = T; i > 0; i--) {\n\t\t\tfor (int k = 0; k < (i - 1); k++) {\n\t\t\t\tif ( (ans[k] < ans[k + 1]) || (ans[k] == ans[k + 1] && times[k] > times[k + 1])) {\n\t\t\t\t\tint tmp;\n\t\t\t\t\ttmp = ans[k];      ans[k] = ans[k+1];    ans[k+1] = tmp;\n\t\t\t\t\ttmp = times[k];      times[k] = times[k+1];    times[k+1] = tmp;\n\t\t\t\t\ttmp = order[k];      order[k] = order[k+1];    order[k+1] = tmp;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n        \n        System.out.print(order[0]);\n        for (int i = 1; i < T; i++) {\n        \tif( (ans[i] == ans[i-1]) && (times[i] == times[i-1]) )\n        \t\tSystem.out.print(\"=\");\n        \telse\n        \t\tSystem.out.print(\",\");\n        \t\n        \tSystem.out.print(order[i]);\n\t\t}\n        System.out.print(\"\\n\");\n    }\n     \n    public static void main(String[] args)\n    {\n         \n        Scanner sca = new Scanner(System.in);\n        \n        while(true)\n        {\n        \tM = sca.nextInt();\n            T = sca.nextInt();\n            P = sca.nextInt();\n            R = sca.nextInt();\n            \n            if(M == 0) break;\n            \n            m = new int[R];\n            t = new int[R];\n            p = new int[R];\n            j = new int[R];\n            \n            for(int i = 0;i < R;i++)\n            {\n            \tm[i] = sca.nextInt();\n            \tt[i] = sca.nextInt();\n            \tp[i] = sca.nextInt();\n            \tj[i] = sca.nextInt();\n            }\n            \n            start();\n        }\n        \n    }\n}"
  },
  {
    "language": "Java",
    "code": "import java.util.Scanner;\nimport java.util.ArrayList;\n\npublic class Main {\n\tScanner sc = new Scanner(System.in);\n\tpublic void run(){\n\t\twhile(true){\n\t\t\tint m = sc.nextInt();\n\t\t\tint t = sc.nextInt();\n\t\t\tint p = sc.nextInt();\n\t\t\tint r = sc.nextInt();\n\t\t\tif(m==0 && t==0 && p==0 && r==0) break;\n\t\t\tcalc(m, t, p, r);\n\t\t}\n\t}\n\tpublic void calc(int m, int t, int p, int r){\n\t\tint[][] ptimes = new int[50][10];\n\t\tint[] rtimes = new int[50];\n\t\tint[] rnum = new int[50];\n\t\t\n\t\tfor(int k = 0; k < r; k++){\n\t\t\tint mk = sc.nextInt();\n\t\t\tint tk = sc.nextInt();\n\t\t\tint pk = sc.nextInt();\n\t\t\tint jk = sc.nextInt();\n\t\t\t\n\t\t\tif(jk == 0){\n\t\t\t\trtimes[tk-1] += mk + ptimes[tk-1][pk-1];\n\t\t\t\trnum[tk-1] += 1;\n\t\t\t}\n\t\t\telse{\n\t\t\t\tptimes[tk-1][pk-1] += 20;\n\t\t\t}\n\t\t}\n\t\t\n\t\tint beforetimes = 0;\n\t\tint beforenum = 0;\n\t\tint mintimes = Integer.MAX_VALUE;\n\t\tint maxnum = -1;\n\t\tint team = 0;\n\t\tint flug = 0;\n\t\tfor(int i = 0; i < t; i++){\n\t\t\tfor(int k = t; k > 0; k--){\n\t\t\t\tif(rnum[k-1] > maxnum){\n\t\t\t\t\tmaxnum = rnum[k-1];\n\t\t\t\t\tmintimes = rtimes[k-1];\n\t\t\t\t\tteam = k;\n\t\t\t\t}\n\t\t\t\telse if(rnum[k-1] == maxnum && rtimes[k-1] < mintimes){\n\t\t\t\t\tmaxnum = rnum[k-1];\n\t\t\t\t\tmintimes = rtimes[k-1];\n\t\t\t\t\tteam = k;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(flug == 0){\n\t\t\t\tflug = 1;\n\t\t\t}\n\t\t\telse{\n\t\t\t\tif(beforenum == maxnum && beforetimes == mintimes) System.out.print(\"=\");\n\t\t\t\telse System.out.print(\",\");\n\t\t\t}\n\t\t\tSystem.out.print(team);\n\t\t\tbeforetimes = mintimes;\n\t\t\tbeforenum = maxnum;\n\t\t\tmintimes = Integer.MAX_VALUE;\n\t\t\tmaxnum = -1;\n\t\t\trnum[team-1] = -1;\n\t\t\trtimes[team-1] = Integer.MAX_VALUE;\n\t\t}\n\t\tSystem.out.println();\n\t}\n\t\n\tpublic static void main(String[] args){\n\t\tnew Main().run();\n\t}\n\t\n}"
  },
  {
    "language": "Java",
    "code": "\nimport java.util.*;\nimport java.util.stream.Collectors;\n\n/**\n * Created by ctare on 2017/05/08.\n */\npublic class Main {\n    private static final int Tn = 50 + 1;\n    private static final int Mn = 300 + 1;\n    private static final int Pn = 10 + 1;\n    private static ArrayList<String> buf;\n    private static int[][] simple_rank(int[][] team, Set<Integer> exteam){\n        int[][] winner = new int[Pn][Tn];\n        for (int i = 0; i < team.length; i++) {\n            int[] ints = team[i];\n            if(exteam.contains(i)) winner[Arrays.stream(ints).sum()][i] = 1;\n        }\n        return winner;\n    }\n\n    private static void rank(int[] team, int[][][] team_sub){\n        TreeMap<Integer, ArrayList<Integer>> rankresult = new TreeMap<>();\n        for (int i = 0; i < team.length; i++) {\n            if(team[i] == 1){\n                int sum_time = 0;\n                for (int[] ms : team_sub[i]) {\n                    sum_time += calc_point(ms);\n                }\n                ArrayList<Integer> rr = rankresult.getOrDefault(sum_time, new ArrayList<>());\n                rr.add(i);\n                rankresult.put(sum_time, rr);\n//                System.out.print(\"--- \");\n//                System.out.print(sum_time);\n//                System.out.println(\" : \" + i);\n            }\n        }\n//        System.out.println(rankresult.values());\n//        rankresult.values().forEach(e -> {\n//            System.out.println(String.join(\"=\", e.stream().sorted(Comparator.reverseOrder()).map(Object::toString).collect(Collectors.toList())));\n//        });\n        rankresult.values().forEach(e -> {\n            buf.add(String.join(\"=\", e.stream().sorted(Comparator.reverseOrder()).map(Object::toString).collect(Collectors.toList())));\n        });\n    }\n\n    private static int calc_point(int[] times){\n//        System.out.println(\"calcpoint\");\n//        System.out.println(Arrays.toString(times));\n        int result = 0;\n        forelse: {\n            for (int i = 0; i < times.length; i++) {\n                if(times[i] == -1) result += 20;\n                else if(times[i] == 1) {\n                    result += i;\n                    break forelse;\n                }\n            }\n            result = 0;\n        }\n//        System.out.println(result);\n//        System.out.println(\"calcpoint end\");\n        return result;\n    }\n\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n\n        System.out.println(\"hoge\");\n        while(true){\n            buf = new ArrayList<>();\n            int M = sc.nextInt(), T = sc.nextInt(), P = sc.nextInt(), R = sc.nextInt();\n            if(M == 0 && T == 0 && P == 0 && R == 0) break;\n            int[][] team = new int[Tn][Pn];\n            int[][][] team_sub = new int[Tn][Pn][Mn];\n            Set<Integer> exteam = new HashSet<>();\n            for (int i = 1; i <= T; i++) {\n                exteam.add(i);\n            }\n            for (int i = 0; i < R; i++) {\n                int m = sc.nextInt(), t = sc.nextInt(), p = sc.nextInt(), j = sc.nextInt();\n                team[t][p] |= (j == 0 ? 1 : 0);\n                team_sub[t][p][m] = (j == 0 ? 1 : 0)*2 - 1;\n            }\n\n            int[][] winner = simple_rank(team, exteam);\n            for (int i = winner.length - 1; i >= 0; i--) {\n                int sum = Arrays.stream(winner[i]).sum();\n                if(sum > 1){\n                    rank(winner[i], team_sub);\n                } else if(sum > 0) {\n                    buf.add(String.valueOf(Arrays.stream(winner[i]).boxed().collect(Collectors.toList()).indexOf(1)));\n//                    System.out.println(String.valueOf(Arrays.stream(winner[i]).boxed().collect(Collectors.toList()).indexOf(1)));\n                }\n            }\n\n            System.out.println(String.join(\",\", buf));\n        }\n    }\n}"
  },
  {
    "language": "Java",
    "code": "import java.util.Arrays;\nimport java.util.Scanner;\n\npublic class Main {\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n        while (true) {\n            int M = sc.nextInt();\n            int T = sc.nextInt();\n            int P = sc.nextInt();\n            int R = sc.nextInt();\n            if ((M | T | P | R) == 0) {\n                break;\n            }\n            Team[] teams = new Team[T];\n            for (int i = 0; i < T; i++) {\n                teams[i] = new Team(i, P);\n            }\n            for (int i = 0; i < R; i++) {\n                int m = sc.nextInt();\n                int t = sc.nextInt() - 1;\n                int p = sc.nextInt() - 1;\n                int j = sc.nextInt();\n                if (j == 0 && !teams[t].solves[p]) {\n                    teams[t].solve++;\n                    teams[t].solves[p] = true;\n                    teams[t].lastTime += m + teams[t].pena;\n                    teams[t].pena = 0;\n                } else {\n                    teams[t].pena += 20;\n                }\n            }\n            // for (int i = 0; i < teams.length; i++) {\n            //     System.out.println((i + 1) + \": \" + teams[i].solve + \", \" + teams[i].lastTime);\n            // }\n\n            Arrays.sort(teams);\n            System.out.print(teams[0].id + 1);\n            for (int i = 1; i < teams.length; i++) {\n                System.out.print((teams[i - 1].equalsRank(teams[i]) ? \"=\" : \",\") + (teams[i].id + 1));\n            }\n            // System.out.println();\n            System.out.println();\n        }\n    }\n\n    public static class Team implements Comparable {\n        public int solve;\n        public boolean[] solves;\n        public int lastTime;\n        public int pena;\n        int id;\n\n        Team(int id, int m) {\n            this.id = id;\n            this.solve = 0;\n            this.solves = new boolean[m];\n            this.pena = 0;\n            this.lastTime = 0;\n        }\n\n        public boolean equalsRank(Team t) {\n            return this.solve == t.solve && this.lastTime == t.lastTime;\n        }\n\n        @Override\n        public int compareTo(Object o) {\n            Team ot = (Team) o;\n            int solveC = Integer.compare(this.solve, ot.solve);\n            int timeC = Integer.compare(this.lastTime, ot.lastTime);\n            if (solveC == 0) {\n                if (timeC == 0) {\n                    return -Integer.compare(this.id, ot.id);\n                }\n                return timeC;\n            }\n            return -solveC;\n        }\n    }\n}"
  },
  {
    "language": "Java",
    "code": "import java.util.*;\nimport java.lang.*;\nimport java.math.*;\nimport java.io.*;\nimport static java.lang.Math.*;\nimport static java.util.Arrays.*;\nimport static java.util.Collections.*;\n\n// Integral Rectangles\n// 2013/08/13\npublic class Main{\n\tScanner sc=new Scanner(System.in);\n\n\tint INF=1<<28;\n\tdouble EPS=1e-12;\n\n\tint nTeams, nProblems, nTick;\n\tint[] ticks, teams, problems, results;\n\n\tvoid run(){\n\t\tfor(;;){\n\t\t\tint M=sc.nextInt();\n\t\t\tnTeams=sc.nextInt();\n\t\t\tnProblems=sc.nextInt();\n\t\t\tnTick=sc.nextInt();\n\t\t\tif((M|nTeams|nProblems|nTick)==0){\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tticks=new int[nTick];\n\t\t\tteams=new int[nTick];\n\t\t\tproblems=new int[nTick];\n\t\t\tresults=new int[nTick];\n\t\t\tfor(int i=0; i<nTick; i++){\n\t\t\t\tticks[i]=sc.nextInt();\n\t\t\t\tteams[i]=sc.nextInt()-1;\n\t\t\t\tproblems[i]=sc.nextInt()-1;\n\t\t\t\tresults[i]=sc.nextInt();\n\t\t\t}\n\t\t\tsolve();\n\t\t}\n\t}\n\n\tvoid solve(){\n\t\tint[][] states=new int[nTeams][nProblems];\n\t\tint[][] times=new int[nTeams][nProblems];\n\t\tfor(int i=0; i<nTick; i++){\n\t\t\tif(results[i]==0){\n\t\t\t\tstates[teams[i]][problems[i]]=1;\n\t\t\t\ttimes[teams[i]][problems[i]]+=ticks[i];\n\t\t\t}else{\n\t\t\t\ttimes[teams[i]][problems[i]]+=20;\n\t\t\t}\n\t\t}\n\t\tint[] ACs=new int[nTeams];\n\t\tint[] penalties=new int[nTeams];\n\t\tfor(int j=0; j<nTeams; j++){\n\t\t\tfor(int i=0; i<nProblems; i++){\n\t\t\t\tACs[j]+=states[j][i];\n\t\t\t\tpenalties[j]+=states[j][i]*times[j][i];\n\t\t\t}\n\t\t}\n\t\t// debug(\"AC\", AC);\n\t\t// debug(\"pena\", pena);\n\t\tint[] _=new int[nTeams];\n\t\tfor(int i=0; i<nTeams; i++){\n\t\t\t_[i]=i;\n\t\t}\n\t\tfor(int i=0; i<nTeams; i++){\n\t\t\tfor(int j=i+1; j<nTeams; j++){\n\t\t\t\tif(comp(ACs[_[i]], penalties[_[i]], _[i], ACs[_[j]],\n\t\t\t\t\t\tpenalties[_[j]], _[j])>0){\n\t\t\t\t\tint t=_[i];\n\t\t\t\t\t_[i]=_[j];\n\t\t\t\t\t_[j]=t;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// debug(_);\n\t\tfor(int i=0; i<nTeams; i++){\n\t\t\tprint(1+_[i]+\"\");\n\t\t\tif(i<nTeams-1){\n\t\t\t\tprint(comp(ACs[_[i]], penalties[_[i]], ACs[_[i+1]],\n\t\t\t\t\t\tpenalties[_[i+1]])==0?\"=\":\",\");\n\t\t\t}\n\t\t}\n\t\tprintln(\"\");\n\t}\n\n\tint comp(int ac1, int time1, int ac2, int time2){\n\t\tif(ac1!=ac2){\n\t\t\treturn -(ac1-ac2);\n\t\t}else{\n\t\t\treturn time1-time2;\n\t\t}\n\t}\n\n\tint comp(int ac1, int time1, int id1, int ac2, int time2, int id2){\n\t\tif(comp(ac1, time1, ac2, time2)!=0){\n\t\t\treturn comp(ac1, time1, ac2, time2);\n\t\t}else{\n\t\t\treturn -(id1-id2);\n\t\t}\n\t}\n\n\tvoid debug(Object... os){\n\t\tSystem.err.println(Arrays.deepToString(os));\n\t}\n\n\tvoid print(String s){\n\t\tSystem.out.print(s);\n\t}\n\n\tvoid println(String s){\n\t\tSystem.out.println(s);\n\t}\n\n\tpublic static void main(String[] args){\n\t\tnew Main().run();\n\t}\n}"
  },
  {
    "language": "Java",
    "code": "import java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.util.ArrayList;\nimport java.util.Collections;\n\npublic class Main {\n\n\t/**\n\t * @param args\n\t * @throws IOException\n\t */\n\tpublic static void main(String[] args) throws IOException {\n\t\tBufferedReader in = new BufferedReader(new InputStreamReader(System.in));\n\t\tString[] ia;\n\n\t\twhile (true) {\n\t\t\tia = in.readLine().split(\" \");\n\t\t\tint M = Integer.parseInt(ia[0]);\n\t\t\tint T = Integer.parseInt(ia[1]);\n\t\t\tint P = Integer.parseInt(ia[2]);\n\t\t\tint R = Integer.parseInt(ia[3]);\n\t\t\tif(M == 0 && T == 0 && P == 0 && R == 0){\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tArrayList<team> al = new ArrayList<team>();\n\t\t\tfor(int x = 1;x <= T; ++x){\n\t\t\t\tal.add(new team(x, P));\n\t\t\t}\n\t\t\tfor(int x = 0;x < R; ++x){\n\t\t\t\tia = in.readLine().split(\" \");\n\t\t\t\tint m = Integer.parseInt(ia[0]);\n\t\t\t\tint t = Integer.parseInt(ia[1]);\n\t\t\t\tint p = Integer.parseInt(ia[2]);\n\t\t\t\tint j = Integer.parseInt(ia[3]);\n\t\t\t\tteam tmp = al.get(t-1);\n\t\t\t\tif(j == 0){\n\t\t\t\t\ttmp.solved[p-1] = true;\n\t\t\t\t\ttmp.time[p-1] = m;\n\t\t\t\t} else {\n\t\t\t\t\t++tmp.submit[p-1];\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor(int x = 0;x < T; ++x){\n\t\t\t\tal.get(x).solve();\n\t\t\t}\n\t\t\tCollections.sort(al);\n\t\t\tfor(int x = 0;x < T-1; ++x){\n\t\t\t\tSystem.out.print(al.get(x).teamnum);\n\t\t\t\tif(al.get(x).place(al.get(x+1))){\n\t\t\t\t\tSystem.out.print(\"=\");\n\t\t\t\t} else {\n\t\t\t\t\tSystem.out.print(\",\");\n\t\t\t\t}\n\t\t\t} System.out.print(al.get(T-1).teamnum);\n\t\t\tSystem.out.println();\n\t\t}\n\t}\n\n\tstatic class team implements Comparable<team>{\n\t\tint teamnum;\n\t\tint problems;\n\t\tint point;\n\t\tboolean[] solved;\n\t\tint[] submit;\n\t\tint[] time;\n\t\tteam(int x, int p){\n\t\t\tthis.teamnum = x;\n\t\t\tthis.problems = 0;\n\t\t\tthis.point = 0;\n\t\t\tthis.solved = new boolean[p];\n\t\t\tthis.submit = new int[p];\n\t\t\tthis.time   = new int[p];\n\t\t}\n\t\tvoid solve(){\n\t\t\tfor(int i = 0;i < solved.length; ++i){\n\t\t\t\tif(solved[i]){\n\t\t\t\t\t++this.problems;\n\t\t\t\t\tthis.point += time[i] + submit[i] * 20;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t@Override\n\t\tpublic int compareTo(team o) {\n\t\t\tif(o.problems != this.problems){\n\t\t\t\treturn o.problems - this.problems;\n\t\t\t} else if(o.point != this.point){\n\t\t\t\treturn  -1 * (o.point - this.point);\n\t\t\t} else {\n\t\t\t\treturn o.teamnum - this.teamnum;\n\t\t\t}\n\t\t}\n\n\t\tpublic boolean place(team o){\n\t\t\tif(o.problems != this.problems){\n\t\t\t\treturn false;\n\t\t\t} else if(o.point != this.point){\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n}"
  },
  {
    "language": "Java",
    "code": "import java.util.Arrays;\nimport java.util.Scanner;\nimport java.util.stream.IntStream;\n \npublic class Main {\n    static class Team {\n        int team, solved, elapsed;\n        int[] penalty;\n        Team(int t) {\n            team =t ; \n            penalty= new int[11];\n        }\n    }\n     \n    public static void main(String[] args) {\n        try(Scanner sc = new Scanner(System.in)){\n            while(sc.hasNext()) {\n                int M = sc.nextInt();\n                int T = sc.nextInt();\n                int P = sc.nextInt();\n                int R = sc.nextInt();\n                if(T == 0) break;\n                Team[] ts = IntStream.range(0, T).mapToObj(t -> new Team(t+1)).toArray(Team[]::new);\n                 \n                IntStream.range(0, R).forEach(dummy -> {\n                    int m = sc.nextInt();\n                    int t = sc.nextInt()-1;\n                    int p = sc.nextInt();\n                    int j = sc.nextInt();\n                    if(j == 0) {\n                        ts[t].solved++;\n                        ts[t].elapsed += m;\n                        ts[t].elapsed += ts[t].penalty[p];\n                    }\n                    else {\n                        ts[t].penalty[p] += 20;\n                    }\n                });//準備\n                 \n                Arrays.sort(ts, (t1, t2)->{\n                    if(t1.solved != t2.solved) {\n                        return t2.solved - t1.solved;\n                    }\n                    else if(t1.elapsed != t2.elapsed) {\n                        return t1.elapsed - t2.elapsed;\n                    }\n                    return t2.team - t1.team;\n                });//問題数降順→経過時間で昇順\n \n                int score = ts[0].solved * M + ts[0].elapsed;\n                 \n                System.out.print(ts[0].team);\n                for(int i = 1; i < T; i++) {\n                    int s = ts[i].solved * M + ts[i].elapsed;//同順位のものを探す\n                    System.out.print(s == score ? \"=\" : \",\");\n                    System.out.print(ts[i].team);\n                    score = s;\n                }\n                 \n                System.out.println();\n            }\n        }\n    }\n}\n"
  },
  {
    "language": "Java",
    "code": "import java.util.*;\n \npublic class Main {\n\t     \n\tpublic static void main(String[] args) {\n\t\tScanner sc = new Scanner(System.in);\n\t\t \n\t\twhile(true){\n\t\t\tint m = sc.nextInt();\n\t\t\tint t = sc.nextInt();\n\t\t\tint p = sc.nextInt();\n\t\t\tint r = sc.nextInt();\n\t\t\tif(m==0 && t==0 && p==0 && r==0) break;\n\t\t\t\n\t\t\tint[][] a = new int[t][3];\n\t\t\tfor(int i=0;i<t;i++) a[i][0] = i+1;\n\t\t\tint[][] b = new int[t][p];\n\t\t\t\n\t\t\tfor(int i=0;i<r;i++){\n\t\t\t\tint c = sc.nextInt();\n\t\t\t\tint d = sc.nextInt()-1;\n\t\t\t\tint e = sc.nextInt()-1;\n\t\t\t\tint f = sc.nextInt();\n\t\t\t\tif(f==0){\n\t\t\t\t\ta[d][1] += (c + b[d][e]*20);\n\t\t\t\t\ta[d][2]++;\n\t\t\t\t}\n\t\t\t\telse b[d][e]++;\n\t\t\t}\n\t\t\t\n\t\t\tArrays.sort(a, new Comparator<int[]>(){\n\t\t\t\tpublic int compare(int[] o1, int[] o2) {\n\t\t\t\t\tif(o1[2]==o2[2]){\n\t\t\t\t\t\tif(o1[1]==o2[1]) return o2[0]-o1[0];\n\t\t\t\t\t\telse return o1[1]-o2[1];\n\t\t\t\t\t}\n\t\t\t\t\treturn o2[2]-o1[2];\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tSystem.out.print(a[0][0]);\n\t\t\tfor(int i=1;i<t;i++){\n\t\t\t\tif(a[i-1][2]==a[i][2] && a[i-1][1]==a[i][1]) System.out.print(\"=\");\n\t\t\t\telse System.out.print(\",\");\n\t\t\t\tSystem.out.print(a[i][0]);\n\t\t\t}\n\t\t\tSystem.out.println();\n\t\t}\n    }   \n}"
  },
  {
    "language": "Java",
    "code": "import java.util.*;\nimport java.util.stream.Collectors;\n\n/**\n * Created by ctare on 2017/05/08.\n */\npublic class Main {\n    private static final int Tn = 50 + 1;\n    private static final int Mn = 300 + 1;\n    private static final int Pn = 10 + 1;\n    private static ArrayList<String> buf;\n    private static int[][] simple_rank(int[][] team, Set<Integer> exteam){\n        int[][] winner = new int[Pn][Tn];\n        for (int i = 0; i < team.length; i++) {\n            int[] ints = team[i];\n            if(exteam.contains(i)) winner[Arrays.stream(ints).sum()][i] = 1;\n        }\n        return winner;\n    }\n\n    private static void rank(int[] team, ArrayList<Integer>[][][] team_sub){\n        TreeMap<Integer, ArrayList<Integer>> rankresult = new TreeMap<>();\n        for (int i = 0; i < team.length; i++) {\n            if(team[i] == 1){\n                int sum_time = 0;\n                for (ArrayList<Integer>[] ms : team_sub[i]) {\n                    sum_time += calc_point(ms);\n                }\n                ArrayList<Integer> rr = rankresult.getOrDefault(sum_time, new ArrayList<>());\n                rr.add(i);\n                rankresult.put(sum_time, rr);\n//                System.out.print(\"--- \");\n//                System.out.print(sum_time);\n//                System.out.println(\" : \" + i);\n            }\n        }\n//        System.out.println(rankresult.values());\n//        rankresult.values().forEach(e -> {\n//            System.out.println(String.join(\"=\", e.stream().sorted(Comparator.reverseOrder()).map(Object::toString).collect(Collectors.toList())));\n//        });\n        rankresult.values().forEach(e -> {\n            buf.add(String.join(\"=\", e.stream().sorted(Comparator.reverseOrder()).map(Object::toString).collect(Collectors.toList())));\n        });\n    }\n\n    private static int calc_point(ArrayList<Integer>[] times){\n//        System.out.println(\"calcpoint\");\n//        System.out.println(Arrays.toString(times));\n        int result = 0;\n        forelse: {\n            for (int i = 0; i < times.length; i++) {\n                for (Integer integer : times[i]) {\n                    if(integer == -1) result += 20;\n                    else if(integer == 1) {\n                        result += i;\n                        break forelse;\n                    }\n                }\n            }\n            result = 0;\n        }\n//        System.out.println(result);\n//        System.out.println(\"calcpoint end\");\n        return result;\n    }\n\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n\n        while(true){\n            buf = new ArrayList<>();\n            int M = sc.nextInt(), T = sc.nextInt(), P = sc.nextInt(), R = sc.nextInt();\n            if(M == 0 && T == 0 && P == 0 && R == 0) break;\n            int[][] team = new int[Tn][Pn];\n            ArrayList<Integer>[][][] team_sub = new ArrayList[Tn][Pn][Mn];\n            Set<Integer> exteam = new HashSet<>();\n            for (int i = 1; i <= T; i++) {\n                exteam.add(i);\n            }\n            for (int i = 0; i < R; i++) {\n                int m = sc.nextInt(), t = sc.nextInt(), p = sc.nextInt(), j = sc.nextInt();\n                team[t][p] |= (j == 0 ? 1 : 0);\n                team_sub[t][p][m].add((j == 0 ? 1 : 0)*2 - 1);\n            }\n\n            int[][] winner = simple_rank(team, exteam);\n            for (int i = winner.length - 1; i >= 0; i--) {\n                int sum = Arrays.stream(winner[i]).sum();\n                if(sum > 1){\n                    rank(winner[i], team_sub);\n                } else if(sum > 0) {\n                    buf.add(String.valueOf(Arrays.stream(winner[i]).boxed().collect(Collectors.toList()).indexOf(1)));\n//                    System.out.println(String.valueOf(Arrays.stream(winner[i]).boxed().collect(Collectors.toList()).indexOf(1)));\n                }\n            }\n\n            System.out.println(String.join(\",\", buf));\n        }\n    }\n}"
  },
  {
    "language": "Java",
    "code": "import java.util.*;\nimport java.util.stream.Collectors;\n\n/**\n * Created by ctare on 2017/05/08.\n */\npublic class Main {\n    private static final int Tn = 50 + 1;\n    private static final int Mn = 300 + 1;\n    private static final int Pn = 10 + 1;\n    private static ArrayList<String> buf;\n    private static int[][] simple_rank(int[][] team, Set<Integer> exteam){\n        int[][] winner = new int[Pn][Tn];\n        for (int i = 0; i < team.length; i++) {\n            int[] ints = team[i];\n            if(exteam.contains(i)) winner[Arrays.stream(ints).sum()][i] = 1;\n        }\n        return winner;\n    }\n\n    private static void rank(int[] team, ArrayList<Integer>[][][] team_sub){\n        TreeMap<Integer, ArrayList<Integer>> rankresult = new TreeMap<>();\n        for (int i = 0; i < team.length; i++) {\n            if(team[i] == 1){\n                int sum_time = 0;\n                for (ArrayList<Integer>[] ms : team_sub[i]) {\n                    sum_time += calc_point(ms);\n                }\n                ArrayList<Integer> rr = rankresult.getOrDefault(sum_time, new ArrayList<>());\n                rr.add(i);\n                rankresult.put(sum_time, rr);\n//                System.out.print(\"--- \");\n//                System.out.print(sum_time);\n//                System.out.println(\" : \" + i);\n            }\n        }\n//        System.out.println(rankresult.values());\n//        rankresult.values().forEach(e -> {\n//            System.out.println(String.join(\"=\", e.stream().sorted(Comparator.reverseOrder()).map(Object::toString).collect(Collectors.toList())));\n//        });\n        rankresult.values().forEach(e -> {\n            buf.add(String.join(\"=\", e.stream().sorted(Comparator.reverseOrder()).map(Object::toString).collect(Collectors.toList())));\n        });\n    }\n\n    private static int calc_point(ArrayList<Integer>[] times){\n//        System.out.println(\"calcpoint\");\n//        System.out.println(Arrays.toString(times));\n        int result = 0;\n        forelse: {\n            for (int i = 0; i < times.length; i++) {\n                for (Integer integer : times[i]) {\n                    if(integer == -1) result += 20;\n                    else if(integer == 1) {\n                        result += i;\n                        break forelse;\n                    }\n                }\n            }\n            result = 0;\n        }\n//        System.out.println(result);\n//        System.out.println(\"calcpoint end\");\n        return result;\n    }\n\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n\n        while(true){\n            buf = new ArrayList<>();\n            int M = sc.nextInt(), T = sc.nextInt(), P = sc.nextInt(), R = sc.nextInt();\n            if(M == 0 && T == 0 && P == 0 && R == 0) break;\n            int[][] team = new int[Tn][Pn];\n            ArrayList<Integer>[][][] team_sub = new ArrayList[Tn][Pn][Mn];\n            for (int i = 0; i < team_sub.length; i++) {\n                for (int i1 = 0; i1 < team_sub[i].length; i1++) {\n                    for (int i2 = 0; i2 < team_sub[i][i1].length; i2++) {\n                        team_sub[i][i1][i2] = new ArrayList<>();\n                    }\n                }\n            }\n            Set<Integer> exteam = new HashSet<>();\n            for (int i = 1; i <= T; i++) {\n                exteam.add(i);\n            }\n            for (int i = 0; i < R; i++) {\n                int m = sc.nextInt(), t = sc.nextInt(), p = sc.nextInt(), j = sc.nextInt();\n                team[t][p] |= (j == 0 ? 1 : 0);\n                team_sub[t][p][m].add((j == 0 ? 1 : 0)*2 - 1);\n            }\n\n            int[][] winner = simple_rank(team, exteam);\n            for (int i = winner.length - 1; i >= 0; i--) {\n                int sum = Arrays.stream(winner[i]).sum();\n                if(sum > 1){\n                    rank(winner[i], team_sub);\n                } else if(sum > 0) {\n                    buf.add(String.valueOf(Arrays.stream(winner[i]).boxed().collect(Collectors.toList()).indexOf(1)));\n//                    System.out.println(String.valueOf(Arrays.stream(winner[i]).boxed().collect(Collectors.toList()).indexOf(1)));\n                }\n            }\n\n            System.out.println(String.join(\",\", buf));\n        }\n    }\n}"
  },
  {
    "language": "Java",
    "code": "import java.util.Scanner;\nimport java.util.Arrays;\n\npublic class Main{\n\tpublic static void main(String[] args) {\n\t\tScanner sc = new Scanner(System.in);\n\n\t\twhile(true){\n\t\t\tint timelimit = sc.nextInt();\n\t\t\tint team_num = sc.nextInt();\n\t\t\tint q_num = sc.nextInt();\n\t\t\tint record_num = sc.nextInt();\n\t\t\tif(timelimit==0) break;\n\n\t\t\tTeam[] team = new Team[team_num];\n\t\t\tint[][] solved = new int[q_num + 1][team_num];\n\t\t\tfor(int i=0; i<team_num; i++){\n\t\t\t\tteam[i] = new Team();\n\t\t\t\tsolved[0][i] = 100-i-1;\n\t\t\t}\n\n\t\t\tfor(int i=1; i<q_num+1; i++){\n\t\t\t\tArrays.fill(solved[i], 10000000);\n\t\t\t}\n\n\t\t\tfor(int i=0; i<record_num; i++){\n\t\t\t\tint minute = sc.nextInt();\n\t\t\t\tint t = sc.nextInt();\n\t\t\t\tint q = sc.nextInt();\n\t\t\t\tint judge = sc.nextInt();\n\t\t\t\tif(judge!=0){\n\t\t\t\t\tteam[t-1].wrong++;\n\t\t\t\t}else{\n\t\t\t\t\tsolved[team[t-1].cnt][t-1] = 10000000;\n\t\t\t\t\tteam[t-1].cnt++;\n\t\t\t\t\tteam[t-1].duration += (minute + team[t-1].wrong*20)*100;\n\t\t\t\t\tsolved[team[t-1].cnt][t-1] = -t + team[t-1].duration;\n\t\t\t\t\tteam[t-1].wrong = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\tString str = \"\";\n\t\t\tfor(int i=q_num; i>=0; i--){\n\t\t\t\tArrays.sort(solved[i]);\n\t\t\t\tif(solved[i][0]==10000000) continue;\t\n\t\t\t\tstr += str.valueOf(100-solved[i][0]%100);\n\t\t\t\tfor(int j=1; j<team_num; j++){\n\t\t\t\t\tif(solved[i][j]==10000000) break;\n\t\t\t\t\tif(solved[i][j]/100 == solved[i][j-1]/100){\n\t\t\t\t\t\tstr += \"=\" + str.valueOf(100-solved[i][j]%100);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tstr += \",\" + str.valueOf(100-solved[i][j]%100);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tstr += \",\";\n\t\t\t}\n\t\t\tstr = str.substring(0, str.length()-1);\n\t\t\tSystem.out.println(str);\n\t\t}\n\t}\n\n\tpublic static class Team{\n\t\tint duration = 100;\n\t\tint cnt = 0;\n\t\tint wrong = 0;\n\t}\n}"
  },
  {
    "language": "Java",
    "code": "import java.util.Scanner;\nimport java.util.Comparator;\nimport java.util.Collections;\nimport java.util.ArrayList;\n\npublic class Main {\n\tpublic static void main(String[] args) {\n\t\tScanner sc = new Scanner(System.in);\n\t\twhile (true) {\n\t\t\tint M, T, P, R;\n\t\t\tM = sc.nextInt();\n\t\t\tT = sc.nextInt();\n\t\t\tP = sc.nextInt();\n\t\t\tR = sc.nextInt();\n\t\t\tif (M == 0) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\n\t\t\tArrayList<Team> teams = new ArrayList<Team>();\n\t\t\tfor (int i = 0; i < T; i++) {\n\t\t\t\tteams.add(new Team(i + 1, P));\n\t\t\t}\n\t\t\t//System.out.println(teams.size());\n\t\t\tfor (int i = 0; i < R; i++) {\n\t\t\t\tint m, t, p, j;\n\t\t\t\tm = sc.nextInt();\n\t\t\t\tt = sc.nextInt();\n\t\t\t\tp = sc.nextInt();\n\t\t\t\tj = sc.nextInt();\n\t\t\t\tTeam tmp = teams.get(t - 1);\n\t\t\t\tif (j == 0) {\n\t\t\t\t\t// 正解\n\t\t\t\t\ttmp.solved++;\n\t\t\t\t\ttmp.time += m + 20 * tmp.wa[p];\n\t\t\t\t} else {\n\t\t\t\t\t// 不正解\n\t\t\t\t\ttmp.wa[p]++;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tCollections.sort(teams, new TeamComp());\n\t\t\tfor (int i = 0; i < T; i++) {\n\t\t\t\tTeam tmp1 = teams.get(i);\n\t\t\t\tif (i > 0) {\n\t\t\t\t\tTeam tmp2 = teams.get(i - 1);\n\t\t\t\t\tif (tmp1.equals(tmp2)) {\n\t\t\t\t\t\tSystem.out.print(\"=\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tSystem.out.print(\",\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tSystem.out.print(tmp1.num);\n\t\t\t}\n\t\t\tSystem.out.println();\n\t\t}\n\t}\n}\n\nclass Team {\n\tint num; // チーム番号\n\tint solved; // 正解数\n\tint time; // ペナルティタイム\n\tint[] wa; // 各問題の不正解回数\n\t\n\tpublic Team(int n, int p) {\n\t\tthis.num = n;\n\t\twa = new int[p+1];\n\t}\n\t\n\tpublic boolean equals(Team t) {\n\t\treturn this.solved == t.solved && this.time == t.time;\n\t}\n}\n\nclass TeamComp implements Comparator<Team> {\n\tpublic int compare(Team a, Team b) {\n\t\tif (a.solved != b.solved) {\n\t\t\treturn -(a.solved - b.solved);\n\t\t} else if (a.time != b.time) {\n\t\t\treturn a.time - b.time;\n\t\t} else {\n\t\t\treturn -(a.num - b.num);\n\t\t}\n\t}\n}"
  },
  {
    "language": "Java",
    "code": "import java.util.*;\n \nclass Main {\n\t\n    public static void main(String[] args) {\n         \n       Scanner cin=new Scanner(System.in);\n       \n       while(true) {\n    \t   int M=cin.nextInt(),T=cin.nextInt(),P=cin.nextInt(),R=cin.nextInt();\n    \t   \n    \t   if(M==0)break;\n    \t   \n    \t   Score data[]=new Score[T+1];\n    \t   for(int i=0;i<=T;i++) {\n    \t\t   data[i]=new Score();\n    \t\t   data[i].team=i;\n    \t   }\n    \t   \n    \t   int wa[][]=new int[T+1][P+1];\n    \t   \n    \t   for(int i=0;i<R;i++) {\n    \t\t   int m=cin.nextInt(),t=cin.nextInt(),p=cin.nextInt(),j=cin.nextInt();\n    \t\t   if(j==0) {\n    \t\t\t   data[t].acpt++;\n    \t\t\t   if(wa[t][p]>0)data[t].tt+=m+20*wa[t][p];\n    \t\t\t   else data[t].tt+=m;\n    \t\t   }\n    \t\t   else {\n    \t\t\t   wa[t][p]++;\n    \t\t   }\n    \t\t   \n    \t   }\n    \t   \n    \t   //sort\n    \t   boolean flag=true;\n    \t   for(int i=0;flag;i++) {\n    \t\t   flag=false;\n    \t\t   for(int j=data.length-1;j>=2;j--) {\n    \t\t\t   \n    \t\t\t   if(data[j].acpt>data[j-1].acpt) {\n    \t\t\t\t   \n    \t\t\t\t   Score temp=data[j-1];\n    \t\t\t\t   data[j-1]=data[j];\n    \t\t\t\t   data[j]=temp;\n    \t\t\t\t   flag=true;\n    \t\t\t   }\n    \t\t\t   else if(data[j].acpt==data[j-1].acpt && data[j].tt<data[j-1].tt) {\n    \t\t\t\t   \n    \t\t\t\t   Score temp=data[j-1];\n    \t\t\t\t   data[j-1]=data[j];\n    \t\t\t\t   data[j]=temp;\n    \t\t\t\t   flag=true;\n    \t\t\t   }\n    \t\t\t   else if(data[j].acpt==data[j-1].acpt && data[j].tt == data[j-1].tt && data[j].team>data[j-1].team) {\n    \t\t\t\t   \n    \t\t\t\t   Score temp=data[j-1];\n    \t\t\t\t   data[j-1]=data[j];\n    \t\t\t\t   data[j]=temp;\n    \t\t\t\t   flag=true;\n    \t\t\t   }\n    \t\t\t   \n    \t\t   }\n    \t   }\n    \t   \n    \t   System.out.print(data[1].team);\n    \t   for(int i=2;i<=T;i++) {\n    \t\t   if(data[i].acpt<data[i-1].acpt || (data[i].acpt == data[i-1].acpt && data[i].tt > data[i-1].tt))System.out.print(\",\"+data[i].team);\n    \t\t   else System.out.print(\"=\"+data[i].team);\n    \t   }\n    \t   System.out.println();\n       }\n    }\n}\n\nclass Score{\n\tint team=0,acpt=0,tt=0;\n}\n"
  },
  {
    "language": "Java",
    "code": "import java.util.Arrays;\nimport java.util.Comparator;\nimport java.util.Scanner;\n\npublic class Main {\n    static Scanner sc;\n\n    final static int INF = Integer.MAX_VALUE;\n\n    static int M;\n    static int P;\n\n    public static void main(String[] args) {\n        sc = new Scanner(System.in);\n        while (true) {\n            M = sn();\n            int T = sn();\n            P = sn();\n            int R = sn();\n            if ((M | T | P | R) == 0) {\n                break;\n            }\n            Team[] teams = new Team[T];\n            for (int i = 0; i < T; i++) {\n                teams[i] = new Team(i, P);\n            }\n            for (int i = 0; i < R; i++) {\n                int m = sn();\n                int t = sn();\n                int p = sn();\n                int j = sn();\n                teams[t - 1].addScore(p, m, j == 0);\n            }\n\n            for (int i = 0; i < T; i++) {\n                teams[i].calc();\n            }\n            Arrays.sort(teams, new Comparator<Team>() {\n                @Override\n                public int compare(Team o1, Team o2) {\n                    if (o1.getSucsessNum() != o2.getSucsessNum()) {\n                        return o2.getSucsessNum() - o1.getSucsessNum();\n                    }\n                    if (o1.time != o2.time) {\n                        return o1.time - o2.time ;\n                    }\n                    return o2.id - o1.id;\n\n                }\n            });\n\n            for (int i = 0; i < T; i++) {\n                System.out.print(teams[i].id);\n                if (i != T - 1) {\n                    System.out.print((teams[i + 1].point() == teams[i].point()) ? \"=\" : \",\");\n                }\n            }\n            System.out.println();\n        }\n    }\n\n    public static void solve(int w, int h) {\n\n    }\n\n    public static int sn() {\n        return sc.nextInt();\n    }\n\n    static class Team {\n        public int[] penarlty;\n        public boolean[] sucsess;\n        public int time;\n        public int id;\n\n        public Team(int id, int n) {\n            this.id = id + 1;\n            this.time = 0;\n            this.penarlty = new int[n];\n            this.sucsess = new boolean[n];\n            Arrays.fill(this.penarlty, 0);\n            Arrays.fill(this.sucsess, false);\n        }\n\n        public void addScore(int n, int time, boolean isScusess) {\n            this.sucsess[n - 1] |= isScusess;\n            if (this.sucsess[n - 1]) {\n                this.time += time;\n            } else {\n                this.penarlty[n - 1]++;\n            }\n        }\n\n        public void calc() {\n            for (int i = 0; i < this.sucsess.length; i++) {\n                if (sucsess[i]) {\n                    this.time += this.penarlty[i] * 20;\n                }\n            }\n        }\n\n        public int getSucsessNum() {\n            int sum = 0;\n            for (boolean b : this.sucsess) {\n                sum += b ? 1 : 0;\n            }\n            return sum;\n        }\n\n        public int point() {\n            return this.getSucsessNum() * M * P + this.time;\n        }\n    }\n}"
  },
  {
    "language": "Java",
    "code": "import java.util.Arrays;\nimport java.util.Comparator;\nimport java.util.Scanner;\n\npublic class Main {\n\n    /**\n     * @param args\n     */\n    public static void main(String[] args) {\n        Scanner sc=new Scanner(System.in);\n        while(true){\n            int M = sc.nextInt();\n            int T = sc.nextInt();\n            int P = sc.nextInt();\n            int R = sc.nextInt();\n            if(M+T+P+R==0)break;\n            int[][] pena = new int[T][P];\n            int[][] score = new int[T][3];\n            for (int i = 0; i < score.length; i++) {\n                score[i][0]=i;\n            }\n            for (int i = 0; i < R; i++) {\n                int m = sc.nextInt();\n                int t = sc.nextInt()-1;\n                int p = sc.nextInt()-1;\n                int r = sc.nextInt();\n                if(r==0){\n                    score[t][1]++;\n                    score[t][2]+=m+pena[t][p]*20;\n                } else {\n                    pena[t][p]++;\n                }\n            }\n            Arrays.sort(score,new Comparator<int[]>(){\n                @Override\n                public int compare(int[] a, int[] b) {\n                    if(a[1]==b[1]){\n                        if(a[2]==b[2]){\n                            return b[0]-a[0];\n                        }\n                        return a[2]-b[2];\n                    }\n                    return b[1]-a[1];\n                }\n            });\n            StringBuilder ans=new StringBuilder();\n            for (int i = 0; i < score.length; i++) {\n                ans.append(score[i][0]+1);\n                while(i+1<score.length && score[i][1]==score[i+1][1]&&score[i][2]==score[i+1][2]){\n                    ans.append(\"=\");\n                    ans.append(score[i+1][0]+1);\n                    i++;\n                }\n                ans.append(\",\");\n            }\n            System.out.println(ans.substring(0,ans.length()-1));\n        }\n    }\n\n}"
  },
  {
    "language": "Java",
    "code": "import java.util.*;\nimport java.util.stream.Collectors;\n\n/**\n * Created by ctare on 2017/05/08.\n */\npublic class Main {\n    private static final int Tn = 50 + 1;\n    private static final int Mn = 300 + 1;\n    private static final int Pn = 10 + 1;\n    private static ArrayList<String> buf;\n    private static int[][] simple_rank(int[][] team, Set<Integer> exteam){\n        int[][] winner = new int[Pn][Tn];\n        for (int i = 0; i < team.length; i++) {\n            int[] ints = team[i];\n            if(exteam.contains(i)) winner[Arrays.stream(ints).sum()][i] = 1;\n        }\n        return winner;\n    }\n\n    private static void rank(int[] team, ArrayList<Integer>[][][] team_sub){\n        TreeMap<Integer, ArrayList<Integer>> rankresult = new TreeMap<>();\n        for (int i = 0; i < team.length; i++) {\n            if(team[i] == 1){\n                int sum_time = 0;\n                for (ArrayList<Integer>[] ms : team_sub[i]) {\n                    sum_time += calc_point(ms);\n                }\n                ArrayList<Integer> rr = rankresult.getOrDefault(sum_time, new ArrayList<>());\n                rr.add(i);\n                rankresult.put(sum_time, rr);\n//                System.out.print(\"--- \");\n//                System.out.print(sum_time);\n//                System.out.println(\" : \" + i);\n            }\n        }\n//        System.out.println(rankresult.values());\n//        rankresult.values().forEach(e -> {\n//            System.out.println(String.join(\"=\", e.stream().sorted(Comparator.reverseOrder()).map(Object::toString).collect(Collectors.toList())));\n//        });\n        rankresult.values().forEach(e -> {\n            buf.add(String.join(\"=\", e.stream().sorted(Comparator.reverseOrder()).map(Object::toString).collect(Collectors.toList())));\n        });\n    }\n\n    private static int calc_point(ArrayList<Integer>[] times){\n//        System.out.println(\"calcpoint\");\n//        System.out.println(Arrays.toString(times));\n        int result = 0;\n        forelse: {\n            for (int i = 0; i < times.length; i++) {\n                for (Integer integer : times[i]) {\n                    if(integer == -1) result += 20;\n                    else if(integer == 1) {\n                        result += i;\n                        break forelse;\n                    }\n                }\n            }\n            result = 0;\n        }\n//        System.out.println(result);\n//        System.out.println(\"calcpoint end\");\n        return result;\n    }\n\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n\n        while(true){\n            buf = new ArrayList<>();\n            int M = sc.nextInt(), T = sc.nextInt(), P = sc.nextInt(), R = sc.nextInt();\n            if(M == 0 && T == 0 && P == 0 && R == 0) break;\n            int[][] team = new int[Tn][Pn];\n            ArrayList[][][] team_sub = new ArrayList[Tn][Pn][Mn];\n            for (int i = 0; i < team_sub.length; i++) {\n                for (int i1 = 0; i1 < team_sub[i].length; i1++) {\n                    for (int i2 = 0; i2 < team_sub[i][i1].length; i2++) {\n                        team_sub[i][i1][i2] = new ArrayList<>();\n                    }\n                }\n            }\n            Set<Integer> exteam = new HashSet<>();\n            for (int i = 1; i <= T; i++) {\n                exteam.add(i);\n            }\n            for (int i = 0; i < R; i++) {\n                int m = sc.nextInt(), t = sc.nextInt(), p = sc.nextInt(), j = sc.nextInt();\n                team[t][p] |= (j == 0 ? 1 : 0);\n                team_sub[t][p][m].add((j == 0 ? 1 : 0)*2 - 1);\n            }\n\n            int[][] winner = simple_rank(team, exteam);\n            for (int i = winner.length - 1; i >= 0; i--) {\n                int sum = Arrays.stream(winner[i]).sum();\n                if(sum > 1){\n                    rank(winner[i], team_sub);\n                } else if(sum > 0) {\n                    buf.add(String.valueOf(Arrays.stream(winner[i]).boxed().collect(Collectors.toList()).indexOf(1)));\n//                    System.out.println(String.valueOf(Arrays.stream(winner[i]).boxed().collect(Collectors.toList()).indexOf(1)));\n                }\n            }\n\n            System.out.println(String.join(\",\", buf));\n        }\n    }\n}"
  },
  {
    "language": "Java",
    "code": "import java.util.Scanner;\nimport java.util.Arrays;\n\npublic class Main{\n\tpublic static void main(String[] args) {\n\t\tScanner sc = new Scanner(System.in);\n\n\t\twhile(true){\n\t\t\tint timelimit = sc.nextInt();\n\t\t\tint team_num = sc.nextInt();\n\t\t\tint q_num = sc.nextInt();\n\t\t\tint record_num = sc.nextInt();\n\t\t\tif(timelimit==0) break;\n\n\t\t\tTeam[] team = new Team[team_num];\n\t\t\tint[][] solved = new int[q_num + 1][team_num];\n\t\t\tfor(int i=0; i<team_num; i++){\n\t\t\t\tteam[i] = new Team(q_num);\n\t\t\t\tsolved[0][i] = 100-i-1;\n\t\t\t}\n\n\t\t\tfor(int i=1; i<q_num+1; i++){\n\t\t\t\tArrays.fill(solved[i], 1000000000);\n\t\t\t}\n\n\t\t\tfor(int i=0; i<record_num; i++){\n\t\t\t\tint minute = sc.nextInt();\n\t\t\t\tint t = sc.nextInt();\n\t\t\t\tint q = sc.nextInt();\n\t\t\t\tint judge = sc.nextInt();\n\t\t\t\tif(judge!=0){\n\t\t\t\t\tteam[t-1].wrong[q-1]++;\n\t\t\t\t}else{\n\t\t\t\t\tsolved[team[t-1].cnt++][t-1] = 1000000000;\n\t\t\t\t\tteam[t-1].duration += (minute + team[t-1].wrong[q-1]*20)*100;\n\t\t\t\t\tsolved[team[t-1].cnt][t-1] = -t + team[t-1].duration;\n\t\t\t\t\tteam[t-1].wrong[q-1] = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\tString str = \"\";\n\t\t\tfor(int i=q_num; i>=0; i--){\n\t\t\t\tArrays.sort(solved[i]);\n\t\t\t\tif(solved[i][0]==1000000000) continue;\t\n\t\t\t\tstr += str.valueOf(100-solved[i][0]%100);\n\t\t\t\tfor(int j=1; j<team_num; j++){\n\t\t\t\t\tif(solved[i][j]==1000000000) break;\n\t\t\t\t\tif(solved[i][j]/100 == solved[i][j-1]/100){\n\t\t\t\t\t\tstr += \"=\" + str.valueOf(100-solved[i][j]%100);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tstr += \",\" + str.valueOf(100-solved[i][j]%100);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tstr += \",\";\n\t\t\t}\n\t\t\tstr = str.substring(0, str.length()-1);\n\t\t\tSystem.out.println(str);\n\t\t}\n\t}\n\n\tpublic static class Team{\n\t\tint duration = 100;\n\t\tint cnt = 0;\n\t\tint[] wrong;\n\t\tTeam(int q_num){\n\t\t\twrong = new int[q_num];\n\t\t}\n\t}\n}"
  },
  {
    "language": "Java",
    "code": "import java.util.Scanner;\n\npublic class Main {\n\tpublic static void main(String[] args) {\n\t\tScanner sc = new Scanner(System.in);\n\t\twhile(true){\n\t\t\tint m=sc.nextInt();\n\t\t\tint t=sc.nextInt();\n\t\t\tint p=sc.nextInt();\n\t\t\tint r=sc.nextInt();\n\t\t\tif((m==0&&t==0)&&(p==0&&r==0)) break;\n\t\t\tint[][] data = new int[3+p][t];\n\t\t\tfor(int i=0;i<r;++i){\n\t\t\t\tint mi=sc.nextInt();\n\t\t\t\tint ti=sc.nextInt();\n\t\t\t\tint pi=sc.nextInt();\n\t\t\t\tint ji=sc.nextInt();\n\t\t\t\tif(ji==0){\n\t\t\t\t\tdata[0][ti-1]++;\n\t\t\t\t\tdata[1][ti-1]+=mi+20*data[2+pi][ti-1];\n\t\t\t\t} else {\n\t\t\t\t\tdata[2+pi][ti-1]++;\n\t\t\t\t}\n\t\t\t}\n\t\t\tint item=0;\n\t\t\twhile(true){\n\t\t\t\tint max=0,time=0,count=0;\n\t\t\t\tif(item==t) break;\n\t\t\t\tfor(int j=0;j<t;++j){\n\t\t\t\t\tif(max<data[0][j]&&data[2][j]==0){\n\t\t\t\t\t\tmax=data[0][j]; time=data[1][j]; count=1;\n\t\t\t\t\t} else if(max==data[0][j]&&data[2][j]==0){\n\t\t\t\t\t\tif(data[1][j]<time){\n\t\t\t\t\t\t\ttime=data[1][j]; count=1;\n\t\t\t\t\t\t} else if(data[1][j]==time){\n\t\t\t\t\t\t\tcount++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor(int i=0;i<count;++i){\n\t\t\t\t\tfor(int j=t-1;j>=0;--j){\n\t\t\t\t\t\tif((data[0][j]==max && data[1][j]==time)&&data[2][j]==0){\n\t\t\t\t\t\t\tSystem.out.print(j+1);\n\t\t\t\t\t\t\tdata[2][j]=1;\n\t\t\t\t\t\t\tj=-1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(item+1!=t){\n\t\t\t\t\t\tif(count==1||i==count-1&&(item+count!=t)){ System.out.print(\",\"); }\n\t\t\t\t\t\telse if(i<count-1){ System.out.print(\"=\"); }\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\titem+=count;\n\t\t\t}\n\t\t\tSystem.out.println();\n\t\t}\n\t}\n}\n\n"
  },
  {
    "language": "Java",
    "code": "import java.util.Arrays;\nimport java.util.Scanner;\n\npublic class Main {\n\tpublic static void main(String[] args) {\n\t\tScanner sc = new Scanner(System.in);\n\t\twhile(true){\n\t\t\tint m=sc.nextInt();\n\t\t\tint t=sc.nextInt();\n\t\t\tint p=sc.nextInt();\n\t\t\tint r=sc.nextInt();\n\t\t\tif((m==0&&t==0)&&(p==0&&r==0)) break;\n\t\t\tint[][] data = new int[4][t];\n\t\t\tfor(int i=0;i<r;++i){\n\t\t\t\tint mi=sc.nextInt();\n\t\t\t\tint ti=sc.nextInt();\n\t\t\t\tint pi=sc.nextInt();\n\t\t\t\tint ji=sc.nextInt();\n\t\t\t\tif(ji==0){\n\t\t\t\t\tdata[0][ti-1]++;\n\t\t\t\t\tdata[2][ti-1]+=mi+20*data[1][ti-1];\n\t\t\t\t\tdata[1][ti-1]=0;\n\t\t\t\t} else {\n\t\t\t\t\tdata[1][ti-1]++;\n\t\t\t\t}\n\t\t\t}\n\t\t\tint item=0;\n\t\t\twhile(true){\n\t\t\t\tint max=0,time=0,count=0;\n\t\t\t\tif(item==t) break;\n\t\t\t\tfor(int j=0;j<t;++j){\n\t\t\t\t\tif(max<data[0][j]&&data[3][j]==0){\n\t\t\t\t\t\tmax=data[0][j]; time=data[2][j]; count=1;\n\t\t\t\t\t} else if(max==data[0][j]&&data[3][j]==0){\n\t\t\t\t\t\tif(data[2][j]<time){\n\t\t\t\t\t\t\ttime=data[2][j]; count=1;\n\t\t\t\t\t\t} else if(data[2][j]==time){\n\t\t\t\t\t\t\tcount++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor(int i=0;i<count;++i){\n\t\t\t\t\tfor(int j=t-1;j>=0;--j){\n\t\t\t\t\t\tif((data[0][j]==max && data[2][j]==time)&&data[3][j]==0){\n\t\t\t\t\t\t\tSystem.out.print(j+1);\n\t\t\t\t\t\t\tdata[3][j]=1;\n\t\t\t\t\t\t\tj=-1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(item+1!=t){\n\t\t\t\t\t\tif(count==1||i==count-1&&(item+count!=t)){ System.out.print(\",\"); }\n\t\t\t\t\t\telse if(i<count-1){ System.out.print(\"=\"); }\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\titem+=count;\n\t\t\t}\n\t\t\tSystem.out.println();\n\t\t}\n\t}\n}\n\n"
  },
  {
    "language": "Java",
    "code": "import java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Scanner;\n\npublic class Main {\n\tstatic Scanner sc = new Scanner(System.in);\n\tint T, P, R;\n\tList<Team> teams;\n\tMap<Integer, Integer> pena;\n\n\n\tpublic static void main(String[] args) {\n\t\twhile(true) {\n\t\t\tint m = sc.nextInt();\n\t\t\tint t = sc.nextInt();\n\t\t\tint p = sc.nextInt();\n\t\t\tint r = sc.nextInt();\n\t\t\tif(m==0 && t==0 && p==0 && r==0) break;\n\t\t\tMain main = new Main(t, p, r);\n\t\t\tmain.action();\n\t\t\tmain.print();\n\t\t}\n\t}\n\n\tMain(int T, int P, int R) {\n\t\tthis.T=T; this.P=P; this.R=R;\n\t\tteams = new ArrayList<Team>(T+1);\n\t\tfor(int i=0; i<T; i++) {\n\t\t\tteams.add(new Team(i+1));\n\t\t}\n\t\tpena = new HashMap<Integer, Integer>();\n\t}\n\n\tvoid action() {\n\t\tfor(int i=0; i<R; i++) {\n\t\t\tint m = sc.nextInt();\n\t\t\tint t = sc.nextInt() - 1;\n\t\t\tint p = sc.nextInt();\n\t\t\tint r = sc.nextInt();\n\n\t\t\tif(r == 0) {\n\t\t\t\tTeam team = teams.get(t);\n\t\t\t\tteam.maru++;\n\t\t\t\tteam.time += m + getPena(t, p);\n\t\t\t} else {\n\t\t\t\tsetPena(t, p);\n\t\t\t};\n\t\t}\n\t\tCollections.sort(teams);\n\t}\n\n\tvoid print() {\n\t\tfor(int i=0; i<T; i++) {\n\t\t\tSystem.out.print(teams.get(i).numb);\n\t\t\tif(i == T-1) continue;\n\t\t\tif(teams.get(i).eq(teams.get(i+1))) {\n\t\t\t\tSystem.out.print(\"=\");\n\t\t\t} else {\n\t\t\t\tSystem.out.print(\",\");\n\t\t\t}\n\t\t}\n\t\tSystem.out.println();\n\t}\n\n\tint getPena(int t, int p) {\n\t\tint key = (P+1)*t + p;\n\t\tif(pena.containsKey(key)) {\n\t\t\treturn pena.get(key);\n\t\t} else {\n\t\t\treturn 0;\n\t\t}\n\t}\n\n\tvoid setPena(int t, int p) {\n\t\tint key = (P+1)*t + p;\n\t\tint val = 20;\n\t\tif(pena.containsKey(key)) {\n\t\t\tval += pena.get(key);\n\t\t}\n\t\tpena.put(key, val);\n\t}\n}\n\n\nclass Team implements Comparable<Team> {\n\tint numb;\n\tint maru = 0;\n\tint time = 0;\n\n\tTeam(int n) {\n\t\tnumb = n;\n\t}\n\n\tboolean eq(Team op) {\n\t\tif(maru != op.maru) return false;\n\t\tif(time != op.time) return false;\n\t\treturn true;\n\t}\n\n\t@Override\n\tpublic int compareTo(Team op) {\n\t\tint ret = op.maru - maru;\n\t\tif(ret == 0) ret = time - op.time;\n\t\tif(ret == 0) ret = op.numb - numb;\n\t\treturn ret;\n\t}\n}"
  },
  {
    "language": "Java",
    "code": "import java.util.Arrays;\nimport java.util.Scanner;\n\npublic class Main {\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n        while (true) {\n            int M = sc.nextInt();\n            int T = sc.nextInt();\n            int P = sc.nextInt();\n            int R = sc.nextInt();\n            if ((M | T | P | R) == 0) {\n                break;\n            }\n            Team[] teams = new Team[T];\n            for (int i = 0; i < T; i++) {\n                teams[i] = new Team(i, P);\n            }\n            for (int i = 0; i < R; i++) {\n                int m = sc.nextInt();\n                int t = sc.nextInt() - 1;\n                int p = sc.nextInt() - 1;\n                int j = sc.nextInt();\n                if (j == 0 && !teams[t].solves[p]) {\n                    teams[t].solve++;\n                    teams[t].solves[p] = true;\n                    teams[t].lastTime += m + teams[t].pena;\n                    teams[t].pena = 0;\n                } else {\n                    teams[t].pena += 20;\n                }\n            }\n            for (int i = 0; i < teams.length; i++) {\n                System.out.println((i + 1) + \": \" + teams[i].solve + \", \" + teams[i].lastTime);\n            }\n\n            Arrays.sort(teams);\n            System.out.print(teams[0].id + 1);\n            for (int i = 1; i < teams.length; i++) {\n                System.out.print((teams[i - 1].equalsRank(teams[i]) ? \"=\" : \",\") + (teams[i].id + 1));\n            }\n            System.out.println();\n            System.out.println();\n        }\n    }\n\n    public static class Team implements Comparable {\n        public int solve;\n        public boolean[] solves;\n        public int lastTime;\n        public int pena;\n        int id;\n\n        Team(int id, int m) {\n            this.id = id;\n            this.solve = 0;\n            this.solves = new boolean[m];\n            this.pena = 0;\n            this.lastTime = 0;\n        }\n\n        public boolean equalsRank(Team t) {\n            return this.solve == t.solve && this.lastTime == t.lastTime;\n        }\n\n        @Override\n        public int compareTo(Object o) {\n            Team ot = (Team) o;\n            int solveC = Integer.compare(this.solve, ot.solve);\n            int timeC = Integer.compare(this.lastTime, ot.lastTime);\n            if (solveC == 0) {\n                if (timeC == 0) {\n                    return -Integer.compare(this.id, ot.id);\n                }\n                return timeC;\n            }\n            return -solveC;\n        }\n    }\n}"
  },
  {
    "language": "Java",
    "code": "import java.util.Arrays;\nimport java.util.Scanner;\n\npublic class Main {\n\tpublic static void main(String[] args) {\n\t\tScanner sc = new Scanner(System.in);\n\t\twhile (true) {\n\t\t\tint M = sc.nextInt();\n\t\t\tint T = sc.nextInt();\n\t\t\tint P = sc.nextInt();\n\t\t\tint R = sc.nextInt();\n\t\t\tif (M == 0)\n\t\t\t\tbreak;\n\t\t\tTeam[] team = new Team[T];\n\t\t\tfor (int i = 0; i < T; i++) {\n\t\t\t\tteam[i] = new Team(i + 1, P);\n\t\t\t}\n\t\t\tfor (int i = 0; i < R; i++) {\n\t\t\t\tint m = sc.nextInt();\n\t\t\t\tint t = sc.nextInt();\n\t\t\t\tint p = sc.nextInt();\n\t\t\t\tint j = sc.nextInt();\n\t\t\t\tif (j == 0) {\n\t\t\t\t\tteam[t - 1].judge_true(p, m);\n\t\t\t\t} else {\n\t\t\t\t\tteam[t - 1].judge_false(p);\n\t\t\t\t}\n\t\t\t}\n\t\t\tArrays.sort(team);\n\t\t\tint prev_answer = -1;\n\t\t\tint prev_time = 0;\n\t\t\tfor (Team t : team) {\n\t\t\t\tif (prev_answer == t.answer && prev_time == t.time)\n\t\t\t\t\tSystem.out.print(\"=\");\n\t\t\t\telse if (prev_answer != -1)\n\t\t\t\t\tSystem.out.print(\",\");\n\t\t\t\tSystem.out.print(t.t);\n\t\t\t\tprev_answer = t.answer;\n\t\t\t\tprev_time = t.time;\n\t\t\t}\n\t\t\tSystem.out.println(\"\");\n\t\t}\n\t}\n}\n\nclass Team implements Comparable<Team> {\n\tint t;\n\tint p[];\n\tint time;\n\tint answer;\n\n\tTeam(int t, int P) {\n\t\tthis.answer = 0;\n\t\tthis.time = 0;\n\t\tthis.t = t;\n\t\tthis.p = new int[P];\n\t}\n\n\tvoid judge_false(int no) {\n\t\tp[no - 1] += 20;\n\t}\n\n\tvoid judge_true(int no, int m) {\n\t\ttime += m + p[no - 1];\n\t\tanswer++;\n\t}\n\n\t@Override\n\tpublic int compareTo(Team o) {\n\t\tif (answer == o.answer) {\n\t\t\tif (time == o.time) {\n\t\t\t\tif (t == o.t)\n\t\t\t\t\treturn 0;\n\t\t\t\telse if (t < o.t)\n\t\t\t\t\treturn 1;\n\t\t\t\telse\n\t\t\t\t\treturn -1;\n\t\t\t} else if (time > o.time)\n\t\t\t\treturn 1;\n\t\t\telse\n\t\t\t\treturn -1;\n\t\t} else if (answer < o.answer)\n\t\t\treturn 1;\n\t\telse\n\t\t\treturn -1;\n\t}\n}"
  },
  {
    "language": "Java",
    "code": "/**\n * ICPC Ranking\n */\n\nimport java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.util.Arrays;\nimport java.util.StringTokenizer;\n\nimport static java.lang.Integer.parseInt;\n\npublic class Main {\n\n\tpublic static void main(String[] args) throws IOException {\n\t\tBufferedReader br = new BufferedReader(new InputStreamReader(System.in));\n\t\tString line;\n\n\t\twhile ((line = br.readLine()) != null && !line.isEmpty()) {\n\t\t\tint M, T, P, R;\n\t\t\tStringTokenizer st = new StringTokenizer(line);\n\t\t\tM = parseInt(st.nextToken());\n\t\t\tT = parseInt(st.nextToken());\n\t\t\tP = parseInt(st.nextToken());\n\t\t\tR = parseInt(st.nextToken());\n\t\t\tif ((M | T | P | R) == 0) break;\n\n\t\t\tTeam[] teams = new Team[T + 1];\n\t\t\tfor (int i = 0; i <= T; i++) {\n\t\t\t\tteams[i] = new Team(i, P);\n\t\t\t}\n\t\t\tteams[0].passed = -1;\n\n\t\t\tfor (int i = 0; i < R; i++) {\n\t\t\t\tint m, t, p, j;\n\t\t\t\tst = new StringTokenizer(br.readLine());\n\t\t\t\tm = parseInt(st.nextToken());\n\t\t\t\tt = parseInt(st.nextToken());\n\t\t\t\tp = parseInt(st.nextToken());\n\t\t\t\tj = parseInt(st.nextToken());\n\t\t\t\tteams[t].submit(m, p, j);\n\t\t\t}\n\t\t\tArrays.sort(teams);\n\n\t\t\tStringBuilder sb = new StringBuilder();\n\t\t\tfor (int i = 0; i < T; i++) {\n\t\t\t\tif (i == 0) {\n\t\t\t\t\tsb.append(teams[i].id);\n\t\t\t\t} else {\n\t\t\t\t\tif (teams[i - 1].passed == teams[i].passed && teams[i - 1].elapsed == teams[i].elapsed) {\n\t\t\t\t\t\tsb.append(\"=\" + teams[i].id);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsb.append(\",\" + teams[i].id);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tSystem.out.println(sb.toString());\n\t\t} //end while\n\t} //end main\n}\n\nclass Team implements Comparable<Team> {\n\tint id;\n\tint elapsed = 0;\n\tint passed = 0;\n\tint[] penalty;\n\n\tTeam(int id, int problem) {\n\t\tthis.id = id;\n\t\tpenalty = new int[problem + 1];\n\t}\n\n\tvoid submit(int m, int p, int j) {\n\t\tif (j == 0) {\n\t\t\telapsed += m + penalty[p] * 20;\n\t\t\tpassed++;\n\t\t} else {\n\t\t\tpenalty[p]++;\n\t\t}\n\t}\n\n\tpublic String toString() {\n\t\treturn String.format(\"%d,%d,%d\", id, passed, elapsed);\n\t}\n\n\t@Override\n\tpublic int compareTo(Team o) {\n\t\tint ret = 0;\n\t\tif (this.passed != o.passed) {\n\t\t\tret = -(this.passed - o.passed);\n\t\t} else {\n\t\t\tif (this.elapsed != o.elapsed) {\n\t\t\t\tret = this.elapsed - o.elapsed;\n\t\t\t} else {\n\t\t\t\tret = -(this.id - o.id);\n\t\t\t}\n\t\t}\n\t\treturn ret;\n\t}\n}"
  },
  {
    "language": "Java",
    "code": "import java.io.InputStream;\nimport java.io.IOException;\nimport java.io.PrintWriter;\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.Comparator;\nimport java.util.InputMismatchException;\nimport java.util.NoSuchElementException;\nimport java.math.BigInteger;\n \npublic class Main{\n \nstatic PrintWriter out;\nstatic InputReader ir;\n \nstatic void solve(){\n for(;;){\n  int m=ir.nextInt();\n  if(m==0) return;\n  int t=ir.nextInt();\n  int p=ir.nextInt();\n  int r=ir.nextInt();\n  int[][] dat=new int[t][3];\n  int[][] ct=new int[t][p];\n  for(int i=0;i<t;i++) dat[i][0]=i+1;\n  for(int i=0;i<r;i++){\n   int tID=ir.nextInt()-1;\n   int pID=ir.nextInt()-1;\n   int time=ir.nextInt();\n   int cond=ir.nextInt();\n   if(ct[tID][pID]<0) continue;\n   if(cond==0){\n    dat[tID][1]++;\n    dat[tID][2]+=ct[tID][pID]*20+time;\n    ct[tID][pID]=-1;\n   }\n   else{\n    ct[tID][pID]++;\n   }\n  }\n  Arrays.sort(dat,new Comparator<int[]>(){\n   public int compare(int[] a,int[] b){\n    if(a[1]!=b[1]) return -Integer.compare(a[1],b[1]);\n    if(a[2]!=b[2]) return Integer.compare(a[2],b[2]);\n    return -Integer.compare(a[0],b[0]);\n   }\n  });\n  for(int i=0;i<n;){\n   int st=i;\n   while(i<n&&dat[i][1]==dat[st][1]&&dat[i][2]==dat[st][2]) i++;\n   for(int j=st;j<i;j++){\n    out.print(dat[j][0]);\n    if(j!=i-1) out.print(\"=\");\n   }\n   if(i!=n) out.print(\",\");\n  }\n  out.println();\n }\n}\n \npublic static void main(String[] args) throws Exception{\n ir=new InputReader(System.in);\n out=new PrintWriter(System.out);\n solve();\n out.flush();\n}\n \nstatic class InputReader {\n private InputStream in;\n private byte[] buffer=new byte[1024];\n private int curbuf;\n private int lenbuf;\n \n public InputReader(InputStream in) {this.in=in; this.curbuf=this.lenbuf=0;}\n  \n public boolean hasNextByte() {\n  if(curbuf>=lenbuf){\n   curbuf= 0;\n   try{\n    lenbuf=in.read(buffer);\n   }catch(IOException e) {\n    throw new InputMismatchException();\n   }\n   if(lenbuf<=0) return false;\n  }\n  return true;\n }\n \n private int readByte(){if(hasNextByte()) return buffer[curbuf++]; else return -1;}\n  \n private boolean isSpaceChar(int c){return !(c>=33&&c<=126);}\n  \n private void skip(){while(hasNextByte()&&isSpaceChar(buffer[curbuf])) curbuf++;}\n  \n public boolean hasNext(){skip(); return hasNextByte();}\n  \n public String next(){\n  if(!hasNext()) throw new NoSuchElementException();\n  StringBuilder sb=new StringBuilder();\n  int b=readByte();\n  while(!isSpaceChar(b)){\n   sb.appendCodePoint(b);\n   b=readByte();\n  }\n  return sb.toString();\n }\n  \n public int nextInt() {\n  if(!hasNext()) throw new NoSuchElementException();\n  int c=readByte();\n  while (isSpaceChar(c)) c=readByte();\n  boolean minus=false;\n  if (c=='-') {\n   minus=true;\n   c=readByte();\n  }\n  int res=0;\n  do{\n   if(c<'0'||c>'9') throw new InputMismatchException();\n   res=res*10+c-'0';\n   c=readByte();\n  }while(!isSpaceChar(c));\n  return (minus)?-res:res;\n }\n  \n public long nextLong() {\n  if(!hasNext()) throw new NoSuchElementException();\n  int c=readByte();\n  while (isSpaceChar(c)) c=readByte();\n  boolean minus=false;\n  if (c=='-') {\n   minus=true;\n   c=readByte();\n  }\n  long res = 0;\n  do{\n   if(c<'0'||c>'9') throw new InputMismatchException();\n   res=res*10+c-'0';\n   c=readByte();\n  }while(!isSpaceChar(c));\n  return (minus)?-res:res;\n }\n \n public double nextDouble(){return Double.parseDouble(next());}\n \n public int[] nextIntArray(int n){\n  int[] a=new int[n];\n  for(int i=0;i<n;i++) a[i]=nextInt();\n  return a;\n }\n \n public long[] nextLongArray(int n){\n  long[] a=new long[n];\n  for(int i=0;i<n;i++) a[i]=nextLong();\n  return a;\n }\n \n public char[][] nextCharMap(int n,int m){\n  char[][] map=new char[n][m];\n  for(int i=0;i<n;i++) map[i]=next().toCharArray();\n  return map;\n }\n}\n}"
  },
  {
    "language": "Java",
    "code": "import java.util.*;\npublic class Main {\n\tpublic static void main(String[] args) {\n\t\tScanner stdIn = new Scanner(System.in);\n\t\tTeam[] list;\n\t\twhile(true) {\n\t\t\tint M = stdIn.nextInt();\n\t\t\tint T = stdIn.nextInt();\n\t\t\tint P = stdIn.nextInt();\n\t\t\tint R = stdIn.nextInt();\n\t\t\tif(M == 0 && T == 0 && P == 0 && R == 0) break;\n\t\t\tlist = new Team[T];\n\t\t\tfor(int i = 0; i < T; i++) {\n\t\t\t\tlist[i] = new Team(i+1,P);\n\t\t\t}\n\t\t\t\n\t\t\tfor(int i = 0; i < R; i++) {\n\t\t\t\tint m = stdIn.nextInt();\n\t\t\t\tint t = stdIn.nextInt();\n\t\t\t\tint p = stdIn.nextInt();\n\t\t\t\tint j = stdIn.nextInt();\n\t\t\t\t\n\t\t\t\tif(j == 0) {\n\t\t\t\t\tlist[t-1].correct++;\n\t\t\t\t\tlist[t-1].time += m + list[t-1].wrong[p-1]*20;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tlist[t-1].wrong[p-1]++;\n\t\t\t\t}\n\t\t\t}\n\t\t\tArrays.sort(list, new MyComp());\n\t\t\tSystem.out.print(list[0].id);\n\t\t\tfor(int i = 1; i < T; i++) {\n\t\t\t\tif(list[i-1].correct == list[i].correct && list[i-1].time == list[i].time) {\n\t\t\t\t\tSystem.out.print(\"=\"+list[i].id);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tSystem.out.print(\",\"+list[i].id);\n\t\t\t\t}\n\t\t\t}\n\t\t\tSystem.out.println();\n\t\t}\n\t}\n\t\n}\n\nclass Team {\n\tint id;\n\tint[] wrong;\n\tint correct;\n\tint time;\n\tpublic Team(int id, int r) {\n\t\tthis.id = id;\n\t\twrong = new int[r+1];\n\t\tcorrect = 0;\n\t\ttime = 0;\n\t}\n}\n\nclass MyComp implements Comparator<Team> {\n\n\tpublic int compare(Team o1, Team o2) {\n\t\tif(o1.correct < o2.correct) {\n\t\t\treturn 1;\n\t\t}\n\t\telse if(o1.correct > o2.correct) {\n\t\t\treturn -1;\n\t\t}\n\t\telse if(o1.time < o2.time) {\n\t\t\treturn -1;\n\t\t}\n\t\telse if(o1.time > o2.time) {\n\t\t\treturn 1;\n\t\t}\n\t\telse if(o1.id < o2.id) {\n\t\t\treturn 1;\n\t\t}\n\t\telse if(o1.id > o2.id) {\n\t\t\treturn -1;\n\t\t}\n\t\treturn 0;\n\t}\n\t\n}"
  },
  {
    "language": "Java",
    "code": "import java.io.*;\nimport java.math.*;\nimport java.util.*;\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\nimport java.lang.ArrayIndexOutOfBoundsException;\n\n/**\n * @author yoshikyoto\n */\nclass Main extends MyUtil{\n\t// public static ArrayList<ArrayList<Integer>> g;\n\tpublic static Graph g;\n\t\n\tpublic static void main(String[] args) throws Exception{\n\t\twhile(true){\n\t\t\tint m = readIntMap(0), t = readIntMap(1), p = readIntMap(2), r = readIntMap(3);\n\t\t\t// 正解数 -時間 id\n\t\t\tif(m+t+p+r == 0) break;\n\t\t\tint[][] result = new int[t][3], gotou = new int[t][p];\n\t\t\tfor(int i = 0; i < t; i++) result[i][2] = i;\n\t\t\tfor (int i = 0; i < r; i++) {\n\t\t\t\tint mi = readIntMap(0), ti = readIntMap(1)-1, pi = readIntMap(2)-1, ji = readIntMap(3);\n\t\t\t\tif(ji == 0){\n\t\t\t\t\tresult[ti][0]++;\n\t\t\t\t\tresult[ti][1] -= mi + gotou[ti][pi] * 20;\n\t\t\t\t}else{\n\t\t\t\t\tgotou[ti][pi]++;\n\t\t\t\t}\n\t\t\t}\n\t\t\tArrayComp comp = new ArrayComp();\n\t\t\tArrays.sort(result, comp);\n\t\t\t\n\t\t\t\n\t\t\tStringBuffer str = new StringBuffer(String.format(\"%d\", result[0][2]+1));\n\t\t\tfor(int i = 1; i < result.length; i++){\n\t\t\t\tif(comp.compare2(result[i-1], result[i]) == 0){\n\t\t\t\t\tstr.append(\"=\");\n\t\t\t\t}else{\n\t\t\t\t\tstr.append(\",\");\n\t\t\t\t}\n\t\t\t\tstr.append(result[i][2]+1);\n\t\t\t}\n\t\t\tSystem.out.println(str.toString());\n\t\t}\n\t}\n}\n\nclass Data extends MyUtil{\n\tString name;\n\tint time, finishedAt;\n\tData(String str){\n\t\tString[] strs = str.split(\" \");\n\t\tname = strs[0];\n\t\ttime = parseInt(strs[1]);\n\t}\n}\n\n\nclass DataComparator implements Comparator<Data>{\n    public int compare(Data a, Data b) {\n    \treturn a.finishedAt - b.finishedAt;\n    \t// a-bで昇順\n    \t/*\n        if (a.point != b.point) {\n            return a.point - b.point;\n        } else {\n        \treturn a.name.compareTo(b.name);\n        }\n        */\n    }\n}\n\nclass ArrayComp implements Comparator<int[]>{\n\tpublic int compare(int[] a, int[] b){\n\t\tint l = Math.min(a.length, b.length);\n\t\tfor(int i = 0; i < l; i++){\n\t\t\tif(a[i] == b[i]) continue;\n\t\t\treturn b[i] - a[i];\n\t\t}\n\t\treturn 0;\n\t}\n\n\tpublic int compare2(int[] a, int[] b){\n\t\tint l = Math.min(a.length, b.length);\n\t\tfor(int i = 0; i < l-1; i++){\n\t\t\tif(a[i] == b[i]) continue;\n\t\t\treturn b[i] - a[i];\n\t\t}\n\t\treturn 0;\n\t}\n}\n\nclass Node extends ArrayList<Edge>{\n\tint index, depth = -1, dist = -1;\n\tNode(int index){this.index = index;}\n\tNode parent;\n\tboolean visited = false;\n}\nclass Edge{\n\tint from, to, cost;\n\tEdge(int from, int to, int cost){\n\t\tthis.from = from;\n\t\tthis.to = to;\n\t\tthis.cost = cost;\n\t}\n}\nclass NodeComparator implements Comparator<Node>{\n\tpublic int compare(Node a, Node b){\n\t\treturn a.dist - b.dist;\n\t}\n}\n\nclass Graph{\n\tNode n[];\n\tGraph(int node_count){\n\t\tn = new Node[node_count];\n\t\tfor(int i = 0; i < node_count; i++) n[i] = new Node(i);\n\t}\n\tpublic void add(Edge e){\n\t\tn[e.from].add(e);\n\t}\n\tpublic Node get(int i){return n[i];}\n\tpublic Node lca(int a, int b){\n\t\t// 浅い方をaとする\n\t\tNode nodeA, nodeB;\n\t\tif(n[a].depth < n[b].depth){\n\t\t\tnodeA = n[a];\n\t\t\tnodeB = n[b];\n\t\t}else{\n\t\t\tnodeA = n[b];\n\t\t\tnodeB = n[a];\n\t\t}\n\t\t// 同じ深さまで親をたどる\n\t\tint diff = nodeB.depth - nodeA.depth;\n\t\tfor(int k = 0; k < diff; k++){\n\t\t\tnodeB = nodeB.parent;\n\t\t}\n\t\t// 共通祖先を見つける\n\t\twhile(nodeA != nodeB){\n\t\t\tnodeA = nodeA.parent;\n\t\t\tnodeB = nodeB.parent;\n\t\t}\n\t\treturn nodeA;\n\t}\n\tpublic void calcDepth(int root){\n\t\tArrayDeque<Integer> que = new ArrayDeque<Integer>();\n\t\tque.push(root);\n\t\tn[root].depth = 0;\n\t\t\n\t\twhile(que.size() > 0){\n\t\t\tint curr = que.pop();\n\t\t\tNode curr_node = n[curr];\n\t\t\tfor(Edge e : curr_node){\n\t\t\t\tint next = e.to;\n\t\t\t\tNode next_node = n[next];\n\t\t\t\tif(next_node.depth == -1){\n\t\t\t\t\tnext_node.depth = curr_node.depth + 1;\n\t\t\t\t\tnext_node.parent = curr_node;\n\t\t\t\t\tque.push(next);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\tpublic int[] dijkstra(int s){\n\t\tPriorityQueue<Node> q = new PriorityQueue<Node>(n.length, new NodeComparator());\n\t\tNode start_node = new Node(s);\n\t\tstart_node.dist = 0;\n\t\tq.add(start_node);\n\t\tint[] dist = new int[n.length];\n\t\tfor (int i = 0; i < dist.length; i++)  dist[i] = -1;\n\t\tdist[s] = 0;\n\t\t\n\t\twhile(q.size() > 0){\n\t\t\tNode currNode = q.poll();\n\t\t\tif(dist[currNode.index] < currNode.dist) continue;\n\t\t\tfor(Edge e : n[currNode.index]){\n\t\t\t\tNode nextNode = new Node(e.to);\n\t\t\t\tnextNode.dist = currNode.dist + e.cost;\n\t\t\t\tif(dist[e.to] == -1 || dist[e.to] > nextNode.dist){\n\t\t\t\t\tdist[e.to] = nextNode.dist;\n\t\t\t\t\tq.add(nextNode);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn dist;\n\t}\n}\n\n\n\nclass Regex{\n\tPattern p; Matcher m; String str;\n\tRegex(String regex_str){p = Pattern.compile(regex_str);}\n\tvoid setStr(String str){m = p.matcher(str);}\n\tboolean find(){return m.find();}\n\tString group(int i){return m.group(i);}\n\tString group(){return m.group();}\n}\n\n/**\n * UnionFindTree \n * @author yoshikyoto\n */\nclass UnionFindTree{\n    public int[] parent, rank;\n    public int n;\n    public int count;\n    // 初期化\n    UnionFindTree(int n){\n        this.n = n;\n        count = n;\n    \tparent = new int[n];\n    \trank = new int[n];\n        for(int i = 0; i < n; i++){\n            parent[i] = i;\n            rank[i] = 0;\n        }\n    }\n    // 根を求める\n    int find(int x){\n        if(parent[x] == x){\n            return x;\n        }else{\n            return parent[x] = find(parent[x]);\n        }\n    }\n    // xとyの集合を結合\n    void unite(int x, int y){\n        x = find(x);\n        y = find(y);\n        if(x == y){\n            return;\n        }\n        if(rank[x] < rank[y]){\n            parent[x] = y;\n            count--;\n        }else{\n            parent[y] = x;\n            if(rank[x] == rank[y]) rank[x]++;\n            count--;\n        }\n    }\n    // xとyが同じ集合か\n    boolean same(int x, int y){\n        return find(x) == find(y);\n    }\n};\n\n\n/**\n * 整数を数え上げたりするクラス\n * new Prime(int n) でnまでエラトステネスの篩を実行。\n * @author yoshikyoto\n * @param a[i] iが素数の時true\n * @param count[i] i以下の素数の数\n */\nclass Prime{\n\tboolean[] a;\n\tint[] count;\n\tPrime(int n){\n\t\ta = new boolean[n+1];\n\t\ta[0] = false; a[1] = false;\n\t\tfor(int i = 2; i <= n; i++) a[i] = true;\n\t\t// ふるい\n\t\tfor(int i = 2; i < (n - 3) / 2; i++)\n\t\t\tif(a[i]) for(int j = 2; j * i <= n; j++)\n\t\t\t\t\ta[j * i] = false;\n\t\t\n\t\t// 数え上げ\n\t\tcount = new int[n+1];\n\t\tcount[0] = 0;\n\t\tfor(int i = 1; i <= n; i++){\n\t\t\tint gain = 0;\n\t\t\tif(a[i]) gain = 1;\n\t\t\tcount[i] = count[i-1] + gain;\n\t\t}\n\t}\n\tboolean isPrime(int i){return a[i];}\n\tstatic boolean calcPrime(int i){\n\t\tif(i <= 1) return false;\n\t\tif(i == 2) return true;\n\t\tif(i % 2 == 0) return false;\n\t\tfor(int j = 3; j <= Math.sqrt(i); j+=2){\n\t\t\tif(i % j == 0) return false;\n\t\t}\n\t\treturn true;\n\t}\n}\n\nclass CountHashMap<E> extends HashMap<E, Integer>{\n\tArrayList<E> keyArray = new ArrayList<E>();\n\tpublic void add(E key){add(key, 1);}\n\tpublic void add(E key, Integer value){\n\t\tif(containsKey(key)){value += get(key);\n\t\t}else{keyArray.add(key);}\n\t\tput(key, value);\n\t}\n}\n\n/**\n * MyUtil\n * @author yoshikyoto\n */\nclass MyUtil extends MyIO{\n\tpublic static Random rand = new Random();\n\tpublic static int digit(int n){return String.valueOf(n).length();}\n\tpublic static String reverse(String s){return (new StringBuffer(s)).reverse().toString();}\n\tpublic static void dsort(int[] a){\n\t\tArrays.sort(a);\n\t\tint l = a.length;\n\t\tfor(int i = 0; i < l/2; i++){\n\t\t\tint tmp = a[i]; a[i] = a[l-1-i]; a[l-1-i] = tmp;\n\t\t}\n\t}\n\tpublic static void sleep(int t){try{Thread.sleep(t);}catch(Exception e){}}\n\tpublic static int sum(int[] a){int s = 0; for(int i = 0; i < a.length; i++)s+=a[i]; return s;}\n\tpublic static int[] cp(int[] a){\n\t\tint[] b = new int[a.length];\n\t\tfor(int i = 0; i < a.length; i++) b[i] = a[i];\n\t\treturn b;\n\t}\n\tpublic static int randomInt(int min, int max){return min + rand.nextInt(max - min + 1);}\n\tstatic boolean inside(int y, int x, int h, int w){return 0 <= y && y <= (h-1) && 0 <= x && x <= (w-1);};\n\tpublic static boolean isUpper(char c){return 'A'<=c&&c<='Z';}\n\tpublic static boolean isLower(char c){return 'a'<=c&&c<='z';}\n\tpublic static char toUpper(char c){\n\t\tif(isLower(c)) return (char)(c - 'a' + 'A');\n\t\treturn c;\n\t}\n\tpublic static char toLower(char c){\n\t\tif(isUpper(c)) return (char)(c - 'A' + 'a');\n\t\treturn c;\n\t}\n\tpublic static int[] swap(int[] arr, int i, int j){\n\t\tint[] ret = cp(arr);\n\t\tint tmp = ret[i];\n\t\tret[i] = ret[j];\n\t\tret[j] = tmp;\n\t\treturn ret;\n\t}\n}\n\n/**\n * MyIO\n * @author yoshikyoto\n */\nclass MyIO extends MyMath{\n\tstatic Scanner sc = new Scanner(new InputStreamReader(System.in));\n\tpublic static char scNextChar(){return sc.next().charAt(0);}\n\tstatic BufferedReader br = new BufferedReader(new InputStreamReader(System.in));\n\tpublic static String line;\n\t\n\tpublic static int ins[];\n\tpublic static int[] readIntMap() throws IOException{return parseInt(readLine().split(\" \"));}\n\tpublic static int readIntMap(int i) throws Exception{\n\t\tif(i == 0) ins = readIntMap();\n\t\treturn ins[i];\n\t}\n\tpublic static int[] readIntToMap(int n) throws IOException{\n\t\tint[] ret = new int[n];\n\t\tfor(int i = 0; i < n; i++) ret[i] = readInt();\n\t\treturn ret;\n\t}\n\tpublic static int[] readNoDistIntMap() throws IOException{\n\t\tString[] strs = readLine().split(\"\");\n\t\tint l = strs.length;\n\t\tint[] ret = new int[l-1];\n\t\tfor(int i = 1; i < l; i++)\n\t\t\tret[i-1] = parseInt(strs[i]);\n\t\treturn ret;\n\t}\n\tpublic static boolean readToLine() throws IOException{return (line = br.readLine()) != null;}\n\tpublic static String readLine() throws IOException{return br.readLine();}\n\tpublic static int readInt() throws IOException{return Integer.parseInt(br.readLine());}\n\tpublic static int[] parseInt(String[] arr){\n\t\tint[] res = new int[arr.length];\n\t\tfor(int i = 0; i < arr.length; i++)res[i] = Integer.parseInt(arr[i]);\n\t\treturn res;\n\t}\n\tpublic static double[] parseDouble(String[] arr){\n\t\tdouble[] res = new double[arr.length];\n\t\tfor(int i = 0; i < arr.length; i++)res[i] = Double.parseDouble(arr[i]);\n\t\treturn res;\n\t}\n\tpublic static boolean[] parseBool(String[] arr){\n\t\tint[] t = parseInt(arr);\n\t\tboolean[] res = new boolean[t.length];\n\t\tfor(int i = 0; i < t.length; i++){\n\t\t\tif(t[i] == 1){res[i] = true;\n\t\t\t}else{res[i] = false;}\n\t\t}\n\t\treturn res;\n\t}\n\tpublic static int parseInt(Object o){return Integer.parseInt(o.toString());}\n}\n\nclass MyMath{\n\tpublic static int max(int[] arr){return max(arr, 0, arr.length-1);}\n\tpublic static int max(int[] arr, int l, int r){\n\t\tint max = arr[l];\n\t\tfor(int i = l+1; i <= r; i++)\n\t\t\tmax = Math.max(max, arr[i]);\n\t\treturn max;\n\t}\n\tpublic static int min(int[] arr){return min(arr, 0, arr.length-1);}\n\tpublic static int min(int[] arr, int l, int r){\n\t\tint min = arr[l];\n\t\tfor(int i = l+1; i <= r; i++)\n\t\t\tmin = Math.min(min, arr[i]);\n\t\treturn min;\n\t}\n\tpublic static boolean isCross(int x1, int y1, int x2, int y2, int x3, int y3, int x4, int y4){\n\t    // 並行な場合\n\t    int m = (x2-x1)*(y4-y3)-(y2-y1)*(x4-x3);\n\t    if(m == 0) return false;\n\t    // 媒介変数の値が0より大きく1以下なら交差する、これは問題の状況によって変わるかも。\n\t    double r =(double)((y4-y3)*(x3-x1)-(x4-x3)*(y3-y1))/m;\n\t    double s =(double)((y2-y1)*(x3-x1)-(x2-x1)*(y3-y1))/m;\n\t    return (0 < r && r <= 1 && 0 < s && s <= 1);\n\t}\n\tpublic static boolean isParallel(int x1, int y1, int x2, int y2, int x3, int y3, int x4, int y4){\n\t    if((x2-x1)*(y4-y3) == (y2-y1)*(x4-x3)) return true;\n\t    else return false;\n\t}\n\tpublic static double sq(double d){return d*d;}\n\tpublic static int sq(int i){return i*i;}\n\tpublic static int sqdist(int x1, int y1, int x2, int y2){return (x1-x2) + sq(y1-y2);}\n\tpublic static double sqdist(double x1, double y1, double x2, double y2){return sq(x1-x2) + sq(y1-y2);}\n\tpublic static double dist(int x1, int y1, int x2, int y2){return Math.sqrt(sqdist(x1, y1, x2, y2));}\n\tpublic static double dist(double x1, double y1, double x2, double y2){return Math.sqrt(sqdist(x1, y1, x2, y2));}\n\tlong comb(long n, long m){\n\t\tif(n < m) return 0;\n    \tlong c = 1; m = (n - m < m ? n - m : m);\n    \tfor(long ns = n - m + 1, ms = 1; ms <= m; ns ++, ms ++){c *= ns; c /= ms;}\n    \treturn c;\n    }\n\tstatic int gcd(int a, int b){if(a%b==0){return(b);}else{return(gcd(b,a%b));}};\n\t/**\n\t * aの中から、合計がborderを超えるペア（重複除く）の数を数える\n\t */\n\tstatic int countPair(int[] a, int border){\n\t\tint count = 0, l = a.length, i = 0, j = l-1;\n\t\tfor (; i < l; i++) {\n\t\t\tfor (; j >= 0; j--) if(a[i] + a[j] <= border) break;\n\t\t\tcount += l - (j + 1);\n\t\t\tif(j < i) count--;\n\t\t}\n\t\treturn count/2;\n\t}\n}"
  },
  {
    "language": "Java",
    "code": "import java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.Collections;\nimport java.util.Scanner;\n\npublic class Main {\n  Scanner sc;\n\n  int INF = 1 << 28;\n\n  class Pair implements Comparable<Pair> {\n    int f;\n    int s;\n    int retrof;\n    int retros;\n\n    Pair(int f_, int s_, boolean retrof_, boolean retros_) {\n      f = f_;\n      s = s_;\n      retrof = retrof_ ? -1 : 1;\n      retros = retros_ ? -1 : 1;\n    }\n\n    Pair(int f_, int s_) {\n      this( f_, s_, false, false );\n    }\n\n    public int compareTo(Pair o) {\n      if ( f > o.f ) {\n        return 1 * retrof;\n      } else if ( f < o.f ) {\n        return -1 * retrof;\n      } else {\n        if ( s > o.s ) {\n          return 1 * retros;\n\n        } else if ( s < o.s ) {\n          return -1 * retros;\n        } else {\n          return 0;\n        }\n      }\n    }\n\n    public String toString() {\n      return \"{\" + f + \", \" + s + \"}\";\n    }\n  }\n\n  class Problem {\n    boolean isAC;\n    int time;\n    int cntWA;\n  }\n\n  class Tri implements Comparable<Tri> {\n    Pair p;\n    int id;\n\n    Tri(Pair p, int id) {\n      this.p = p;\n      this.id = id;\n    }\n\n    public int compareTo(Tri o) {\n      if ( p.compareTo( o.p ) == 0 ) {\n        if ( id > o.id ) {\n          return -1;\n        } else if ( id < o.id ) {\n          return 1;\n        } else {\n          return 0;\n        }\n      } else {\n        return p.compareTo( o.p );\n      }\n    }\n\n    public String toString() {\n      return \"{\" + p.toString() + \" \" + id + \"}\";\n    }\n  }\n\n  class Team {\n    ArrayList<Problem> list;\n\n    Team(int p) {\n      list = new ArrayList<Problem>();\n      for ( int i = 0; i < p; ++i ) {\n        list.add( new Problem() );\n      }\n    }\n\n    Pair getResult() {\n      Pair res = new Pair( 0, 0, true, false );\n      for ( int i = 0; i < list.size(); ++i ) {\n        Problem pro = list.get( i );\n        if ( pro.isAC ) {\n          ++res.f;\n          res.s += pro.time + pro.cntWA * 20;\n        }\n      }\n      return res;\n    }\n  }\n\n  void run() {\n    for ( ;; ) {\n      int M = ni();\n      int T = ni();\n      int P = ni();\n      int R = ni();\n\n      if ( ( M | T | P | R ) == 0 ) {\n        break;\n      }\n\n      ArrayList<Team> list = new ArrayList<Team>();\n      for ( int i = 0; i < T; ++i ) {\n        list.add( new Team( P ) );\n      }\n\n      for ( int i = 0; i < R; ++i ) {\n        int m = ni();\n        int t = ni();\n        int p = ni();\n        int j = ni();\n\n        Team team = list.get( t - 1 );\n        Problem pro = team.list.get( p - 1 );\n        if ( j == 0 ) {\n          pro.time = m;\n          pro.isAC |= true;\n        } else {\n          ++pro.cntWA;\n        }\n      }\n\n      ArrayList<Tri> ansl = new ArrayList<Tri>();\n      for ( int i = 0; i < T; ++i ) {\n        Pair pair = list.get( i ).getResult();\n        ansl.add( new Tri( pair, i + 1 ) );\n      }\n\n      // debug(ansl);\n\n      Collections.sort( ansl );\n\n      for ( int i = 0; i < T; ++i ) {\n        if ( i > 0 ) {\n          Pair prev = ansl.get( i - 1 ).p;\n          if ( ansl.get( i ).p.compareTo( prev ) == 0 ) {\n            System.out.print( \"=\" );\n          } else {\n            System.out.print( \",\" );\n          }\n        }\n        System.out.print( ansl.get( i ).id );\n      }\n      System.out.println();\n    }\n  }\n\n  Main() {\n    sc = new Scanner( System.in );\n  }\n\n  int ni() {\n    return sc.nextInt();\n  }\n\n  public static void main(String[] args) {\n    new Main().run();\n  }\n\n  void debug(Object... os) {\n    System.err.println( Arrays.deepToString( os ) );\n  }\n}"
  },
  {
    "language": "Java",
    "code": "import java.util.Arrays;\nimport java.util.Collections;\nimport java.util.LinkedList;\nimport java.util.ListIterator;\nimport java.util.PriorityQueue;\nimport java.util.Scanner;\n\npublic class Main {\n\n\tpublic static class Team implements Comparable<Team> {\n\t\tint team_num;\n\t\tint ac_num;\n\t\tint time;\n\t\t\n\t\tboolean[] ac_ed;\n\t\tint[] penalty;\n\n\t\tpublic Team(int team_num, int ac_num, int time, boolean[] ac_ed, int[] penalty) {\n\t\t\tsuper();\n\t\t\tthis.team_num = team_num;\n\t\t\tthis.ac_num = ac_num;\n\t\t\tthis.ac_ed = ac_ed;\n\t\t\tthis.penalty = penalty;\n\t\t\tthis.time = time;\n\t\t}\n\t\t\n\t\tvoid answer(int number, int time){\n\t\t\tif(ac_ed[number]){\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tac_ed[number] = true;\n\t\t\tac_num++;\n\t\t\tthis.time += time + penalty[number] * 20;\n\t\t\tpenalty[number] = 0;\n\t\t}\n\t\t\n\t\tvoid wrong(int number){\n\t\t\tif(ac_ed[number]){\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tpenalty[number]++;\n\t\t}\n\n\t\t@Override\n\t\tpublic int compareTo(Team o) {\n\t\t\tif (this.ac_num > o.ac_num) {\n\t\t\t\treturn -1;\n\t\t\t} else if (this.ac_num < o.ac_num) {\n\t\t\t\treturn 1;\n\t\t\t} else if (this.time < o.time) {\n\t\t\t\treturn -1;\n\t\t\t} else if (this.time > o.time) {\n\t\t\t\treturn 1;\n\t\t\t} else {\n\t\t\t\treturn o.team_num - this.team_num;\n\t\t\t}\n\t\t}\n\n\t}\n\n\tpublic static void main(String[] args) {\n\t\tScanner sc = new Scanner(System.in);\n\n\t\twhile (true) {\n\t\t\tfinal int M = sc.nextInt();\n\t\t\tfinal int T = sc.nextInt();\n\t\t\tfinal int P = sc.nextInt();\n\t\t\tfinal int R = sc.nextInt();\n\n\t\t\tif(M == 0 && T == 0 && P == 0 && R == 0){\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\n\t\t\tTeam[] team = new Team[T];\n\t\t\tfor(int i = 0; i < T; i++){\n\t\t\t\tteam[i] = new Team(i + 1, 0, 0, new boolean[P], new int[P]);\n\t\t\t}\n\t\t\t\n\t\t\tfor (int count = 0; count < R; count++) {\n\t\t\t\tfinal int m = sc.nextInt();\n\t\t\t\tfinal int t = sc.nextInt();\n\t\t\t\tfinal int p = sc.nextInt();\n\t\t\t\tfinal int j = sc.nextInt();\n\t\t\t\t\n\t\t\t\tboolean ac = j == 0;\n\t\t\t\tif(ac){\n\t\t\t\t\tteam[t - 1].answer(p - 1, m);\n\t\t\t\t}else{\n\t\t\t\t\tteam[t - 1].wrong(p - 1);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tArrays.sort(team);\n\t\t\t\n\t\t\tfor(int i = 0; i < T; i++){\n\t\t\t\tSystem.out.print(team[i].team_num/* + \"(\" + team[i].ac_num + \")\"*/);\n\t\t\t\t\n\t\t\t\tif(i != T - 1 && team[i+1].ac_num == team[i].ac_num && team[i+1].time == team[i].time){\n\t\t\t\t\tSystem.out.print(\"=\");\n\t\t\t\t}else if(i != T - 1){\n\t\t\t\t\tSystem.out.print(\",\");\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tSystem.out.println();\n\t\t}\n\t}\n}"
  },
  {
    "language": "Java",
    "code": "import java.util.Arrays;\nimport java.util.Scanner;\n\npublic class Main {\n\tstatic Scanner sc = new Scanner(System.in);\n\tstatic int M, T, P, R;\n\n\tpublic static void main(String[] args) {\n\t\twhile (true) {\n\t\t\tM = sc.nextInt();\n\t\t\tT = sc.nextInt();\n\t\t\tP = sc.nextInt();\n\t\t\tR = sc.nextInt();\n\t\t\tif (M == 0) break;\n\t\t\tTeam[] teams = new Team[T];\n\t\t\tfor (int i = 0; i < T; ++i) {\n\t\t\t\tteams[i] = new Team(i + 1);\n\t\t\t}\n\t\t\tfor (int i = 0; i < R; ++i) {\n\t\t\t\tint m = sc.nextInt();\n\t\t\t\tint t = sc.nextInt();\n\t\t\t\tint p = sc.nextInt();\n\t\t\t\tint j = sc.nextInt();\n\t\t\t\tTeam team = teams[t - 1];\n\t\t\t\tif (j == 0) {\n\t\t\t\t\tteam.ac++;\n\t\t\t\t\tteam.pena += m + team.submit[p - 1] * 20;\n\t\t\t\t} else {\n\t\t\t\t\tteam.submit[p - 1]++;\n\t\t\t\t}\n\t\t\t}\n\t\t\tArrays.sort(teams);\n\t\t\tfor (int i = 0; i < T - 1; ++i) {\n\t\t\t\tSystem.out.print(teams[i].idx);\n\t\t\t\tSystem.out.print(teams[i].equiv(teams[i + 1]) ? '=' : ',');\n\t\t\t}\n\t\t\tSystem.out.println(teams[T - 1].idx);\n\t\t}\n\t}\n\n\tstatic class Team implements Comparable<Team> {\n\t\tint[] submit = new int[10];\n\t\tint ac, pena, idx;\n\n\t\tTeam(int i) {\n\t\t\tidx = i;\n\t\t}\n\n\t\tpublic int compareTo(Team o) {\n\t\t\tif (this.ac != o.ac) {\n\t\t\t\treturn o.ac - this.ac;\n\t\t\t}\n\t\t\tif (this.pena != o.pena) {\n\t\t\t\treturn this.pena - o.pena;\n\t\t\t}\n\t\t\treturn o.idx - this.idx;\n\t\t}\n\n\t\tboolean equiv(Team o) {\n\t\t\treturn this.ac == o.ac && this.pena == o.pena;\n\t\t}\n\t}\n\n}"
  },
  {
    "language": "Java",
    "code": "import java.util.*;\npublic class Main{\n    public static void main(String[] args){\n\tnew Main().run();\n    }\n    Scanner sc = new Scanner(System.in);\n    ArrayList<Data> data;\n    boolean debug = false;\n    \n    //global hensuu except for templete\n\n    //method except for templete\n\n    void run(){\n\tinput();\n\tfor(int i=0;i<data.size();i++){\n\t    if(debug){\n\t\tSystem.out.println(\"-----------\");\n\t\tdata.get(i).print_M();\n\t\tdata.get(i).print_T();\n\t\tdata.get(i).print_P();\n\t\tdata.get(i).print_R();\n\t\tdata.get(i).print_m();\n\t\tdata.get(i).print_t();\n\t\tdata.get(i).print_p();\n\t\tdata.get(i).print_j();\n\t\t\n\t    }\n\t    solve(i);\n\t    data.get(i).print_ans();\n\t}\n    }\n    void solve(int dataset){\n\tData d = data.get(dataset);\n\tint M = d.M, T = d.T, P = d.P, R = d.R;\n\tint[] m = d.m, t = d.t, p = d.p, j = d.j;\n\n\tint[][] solve = new int[T][2];\n\tint[][] penalty = new int[T][P];\n\tfor(int i=0; i<R; i++){\n\t    if(j[i]==0){\n\t\tsolve[t[i]][0]++;\n\t\tsolve[t[i]][1] += penalty[t[i]][p[i]] * 20 + m[i];\n\t    }else{\n\t\tpenalty[t[i]][p[i]]++;\n\t    }\n\t}\n\t/*\n\tfor(int i=0; i<T; i++){\n\t    System.out.println(Arrays.toString(solve[i]));\n\t}\n\t*/\n\n\tboolean[] checked = new boolean[T];\n\tString ans = \"\";\n\tint before = -1;\n\tfor(int i=0; i<T; i++){\n\t    int max = -1;\n\t    for(int k=0; k<T; k++){\n\t\tif(checked[k]) continue;\n\t\tif(max==-1 || solve[max][0] < solve[k][0]){\n\t\t    max = k;\n\t\t}else if(solve[max][0] == solve[k][0]){\n\t\t    if(solve[max][1]>=solve[k][1]) max = k;\n\t\t}\n\t    }\n\n\t    if(i==0) ans += (max+1);\n\t    else{\n\t\tif(solve[max][0] == solve[before][0]\n\t\t   && solve[max][1] == solve[before][1]){\n\t\t    ans += \"=\" + (max+1);\n\t\t}else{\n\t\t    ans += \",\" + (max+1);\n\t\t}\n\t    }\n\t    checked[max] = true;\n\t    before = max;\n\t}\n\n\tdata.get(dataset).set_ans(ans);\n    }\n\n    void input(){\n\tdata=new ArrayList<Data>();\n\twhile(true){\n\t    int M = sc.nextInt(); int T = sc.nextInt();\n\t    int P = sc.nextInt(); int R = sc.nextInt();\n\t    if(M==0 && T==0 && P==0 && R==0) break;\n\t    int[] m = new int[R];\n\t    int[] t = new int[R];\n\t    int[] p = new int[R];\n\t    int[] j = new int[R];\n\t    for(int i=0; i<R; i++){\n\t\tm[i] = sc.nextInt();\n\t\tt[i] = sc.nextInt()-1;\n\t\tp[i] = sc.nextInt()-1;\n\t\tj[i] = sc.nextInt();\n\t    }\n\t    data.add(new Data(M, T, P, R, m, t, p, j));\n\t}\n    }\n}\n\nclass Data{\n    int M;\n    int T;\n    int P;\n    int R;\n    int[] m;\n    int[] t;\n    int[] p;\n    int[] j;\n    String ans;\n    \n    Data(int M,int T,int P,int R,int[] m,int[] t,int[] p,int[] j){\n\tthis.M=M;\n\tthis.T=T;\n\tthis.P=P;\n\tthis.R=R;\n\tthis.m=m;\n\tthis.t=t;\n\tthis.p=p;\n\tthis.j=j;\n\t }\n  \n    void set_ans(String a){ans=a;}\n    \n    void print_M(){System.out.println(\"M= \"+M);}\n    void print_T(){System.out.println(\"T= \"+T);}\n    void print_P(){System.out.println(\"P= \"+P);}\n    void print_R(){System.out.println(\"R= \"+R);}\n    void print_m(){System.out.println(\"m[]= \"+Arrays.toString(m));}\n    void print_t(){System.out.println(\"t[]= \"+Arrays.toString(t));}\n    void print_p(){System.out.println(\"p[]= \"+Arrays.toString(p));}\n    void print_j(){System.out.println(\"j[]= \"+Arrays.toString(j));}\n    void print_ans(){System.out.println(ans);}\n}"
  },
  {
    "language": "Java",
    "code": "import java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.Collections;\nimport java.util.Scanner;\n\npublic class Main {\n  Scanner sc;\n\n  class Pair<T extends Comparable<T>, U extends Comparable<U>> implements\n      Comparable<Pair<T, U>> {\n    T f;\n    U s;\n    int retro_f;\n    int retro_s;\n\n    Pair(T f_, U s_, boolean retro_ff, boolean retro_sf) {\n      f = f_;\n      s = s_;\n      retro_f = retro_ff ? -1 : 1;\n      retro_s = retro_sf ? -1 : 1;\n    }\n\n    Pair(T f_, U s_) {\n      this( f_, s_, false, false );\n    }\n\n    @Override\n    public int compareTo(Pair<T, U> o) {\n      if ( f.compareTo( o.f ) == 0 ) {\n        if ( s.compareTo( o.s ) == 0 ) {\n          return 0;\n        } else {\n          return s.compareTo( o.s ) * retro_s;\n        }\n      } else {\n        return f.compareTo( o.f ) * retro_f;\n      }\n    }\n\n    public String toString() {\n      return \"{\" + f.toString() + \", \" + s.toString() + \"}\";\n    }\n  }\n\n  class Team {\n    ArrayList<Problem> list;\n\n    Team() {\n      list = new ArrayList<Problem>();\n    }\n\n    Pair<Integer, Integer> result() {\n      int cnt = 0;\n      int time = 0;\n      for ( Problem v : list ) {\n        if ( v.isAC ) {\n          ++cnt;\n          time += v.time;\n          time += v.cntWA * 20;\n        }\n      }\n\n      return new Pair<Integer, Integer>( cnt, time, true, false );\n    }\n  }\n\n  class Problem {\n    boolean isAC;\n    int cntWA;\n    int time;\n\n    Problem() {\n      isAC = false;\n      cntWA = 0;\n      time = 0;\n    }\n  }\n\n  void run() {\n    for ( ;; ) {\n      int M = ni();\n      int T = ni();\n      int P = ni();\n      int R = ni();\n\n      if ( ( M | T | P | R ) == 0 ) {\n        break;\n      }\n\n      ArrayList<Team> list = new ArrayList<Team>();\n      for ( int i = 0; i < T; ++i ) {\n        Team t = new Team();\n        for ( int j = 0; j < P; ++j ) {\n          Problem p = new Problem();\n          t.list.add( p );\n        }\n        list.add( t );\n      }\n      for ( int i = 0; i < R; ++i ) {\n        int m = ni();\n        int t = ni();\n        int p = ni();\n        int j = ni();\n\n        Team team = list.get( t - 1 );\n        Problem prob = team.list.get( p - 1 );\n        if ( j == 0 ) {\n          prob.isAC = true;\n          prob.time = m;\n        } else {\n          ++prob.cntWA;\n        }\n        // debug( prob.isAC, prob.time, prob.cntWA );\n      }\n\n      ArrayList<Pair<Pair<Integer, Integer>, Integer>> ansl = new ArrayList<Pair<Pair<Integer, Integer>, Integer>>();\n      for ( int i = 0; i < list.size(); ++i ) {\n        Team v = list.get( i );\n        ansl.add( new Pair<Pair<Integer, Integer>, Integer>( v.result(), i,\n            false, true ) );\n      }\n      // debug( ansl );\n\n      Collections.sort( ansl );\n      // debug( ansl );\n\n      Pair<Pair<Integer, Integer>, Integer> buf = null;\n      for ( int i = 0; i < ansl.size(); ++i ) {\n        Pair<Pair<Integer, Integer>, Integer> v = ansl.get( i );\n        if ( i > 0 ) {\n          if ( v.f.compareTo( buf.f ) == 0 ) {\n            System.out.print( \"=\" );\n          } else {\n            System.out.print( \",\" );\n          }\n        }\n        System.out.print( v.s + 1 );\n        buf = v;\n      }\n      System.out.println();\n    }\n  }\n\n  Main() {\n    sc = new Scanner( System.in );\n  }\n\n  int ni() {\n    return sc.nextInt();\n  }\n\n  public static void main(String[] args) {\n    new Main().run();\n  }\n\n  void debug(Object... os) {\n    System.err.println( Arrays.deepToString( os ) );\n  }\n}"
  },
  {
    "language": "Java",
    "code": "import java.io.IOException;\nimport java.util.Arrays;\nimport java.util.InputMismatchException;\n\npublic class Main {\n\tclass Team implements Comparable<Team>{\n\t\tint id;\n\t\tint[] pena;\n\t\tint ac, score;\n\n\t\tTeam(int id, int P) {\n\t\t\tthis.id = id;\n\t\t\tthis.pena = new int[P];\n\t\t\tthis.ac = 0;\n\t\t\tthis.score = 0;\n\t\t}\n\n\t\t@Override\n\t\tpublic int compareTo(Team o) {\n\t\t\tif (this.ac != o.ac) {\n\t\t\t\treturn o.ac - this.ac;\n\t\t\t}\n\t\t\tif (this.score != o.score) {\n\t\t\t\treturn this.score - o.score;\n\t\t\t}\n\t\t\treturn o.id - this.id;\n\t\t}\n\n\t\t@Override\n\t\tpublic boolean equals(Object obj) {\n\t\t\tTeam o = (Team)obj;\n\t\t\treturn o.ac == this.ac && this.score == o.score;\n\t\t}\n\t}\n\n\tvoid run() {\n\t\tMyScanner sc = new MyScanner();\n\n\t\twhile (true) {\n\t\t\tsc.nextInt();\n\t\t\tint T = sc.nextInt();\n\t\t\tint P = sc.nextInt();\n\t\t\tint Q = sc.nextInt();\n\t\t\tif ((T | P | Q) == 0) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tTeam[] t = new Team[T];\n\t\t\tfor (int i = 0; i < T; i++) {\n\t\t\t\tt[i] = new Team(i + 1, P);\n\t\t\t}\n\n\t\t\tfor (int i = 0; i < Q; i++) {\n\t\t\t\tint time = sc.nextInt();\n\t\t\t\tint team = sc.nextInt() - 1;\n\t\t\t\tint prob = sc.nextInt() - 1;\n\t\t\t\tint judg = sc.nextInt();\n\n\t\t\t\tif (judg == 0) {\n\t\t\t\t\tt[team].score += time + t[team].pena[prob] * 20;\n\t\t\t\t\tt[team].ac++;\n\t\t\t\t} else {\n\t\t\t\t\tt[team].pena[prob]++;\n\t\t\t\t}\n\t\t\t}\n\t\t\tArrays.sort(t);\n\n\t\t\tSystem.out.print(t[0].id);\n\t\t\tfor (int i = 1; i < T; i++) {\n\t\t\t\tString tab = (t[i].equals(t[i - 1])) ? \"=\" : \",\";\n\t\t\t\tSystem.out.print(tab + t[i].id);\n\t\t\t}\n\t\t\tSystem.out.println();\n\t\t}\n\t}\n\n\tpublic static void main(String[] args) {\n\t\tnew Main().run();\n\t}\n\n\tpublic void mapDebug(int[][] a) {\n\t\tSystem.out.println(\"--------map display---------\");\n\t\tfor (int i = 0; i < a.length; i++) {\n\t\t\tfor (int j = 0; j < a[i].length; j++) {\n\t\t\t\tSystem.out.printf(\"%3d \", a[i][j]);\n\t\t\t}\n\t\t\tSystem.out.println();\n\t\t}\n\t\tSystem.out.println(\"----------------------------\" + '\\n');\n\t}\n\n\tclass MyScanner {\n\t\tint read() {\n\t\t\ttry {\n\t\t\t\treturn System.in.read();\n\t\t\t} catch (IOException e) {\n\t\t\t\tthrow new InputMismatchException();\n\t\t\t}\n\t\t}\n\n\t\tboolean isSpaceChar(int c) {\n\t\t\treturn c == ' ' || c == '\\n' || c == '\\r' || c == '\\t' || c == -1;\n\t\t}\n\n\t\tboolean isEndline(int c) {\n\t\t\treturn c == '\\n' || c == '\\r' || c == -1;\n\t\t}\n\n\t\tint nextInt() {\n\t\t\treturn Integer.parseInt(next());\n\t\t}\n\n\t\tint[] nextIntArray(int n) {\n\t\t\tint[] array = new int[n];\n\t\t\tfor (int i = 0; i < n; i++)\n\t\t\t\tarray[i] = nextInt();\n\t\t\treturn array;\n\t\t}\n\n\t\tlong nextLong() {\n\t\t\treturn Long.parseLong(next());\n\t\t}\n\n\t\tlong[] nextLongArray(int n) {\n\t\t\tlong[] array = new long[n];\n\t\t\tfor (int i = 0; i < n; i++)\n\t\t\t\tarray[i] = nextLong();\n\t\t\treturn array;\n\t\t}\n\n\t\tdouble nextDouble() {\n\t\t\treturn Double.parseDouble(next());\n\t\t}\n\n\t\tdouble[] nextDoubleArray(int n) {\n\t\t\tdouble[] array = new double[n];\n\t\t\tfor (int i = 0; i < n; i++)\n\t\t\t\tarray[i] = nextDouble();\n\t\t\treturn array;\n\t\t}\n\n\t\tString next() {\n\t\t\tint c = read();\n\t\t\twhile (isSpaceChar(c))\n\t\t\t\tc = read();\n\t\t\tStringBuilder res = new StringBuilder();\n\t\t\tdo {\n\t\t\t\tres.appendCodePoint(c);\n\t\t\t\tc = read();\n\t\t\t} while (!isSpaceChar(c));\n\t\t\treturn res.toString();\n\t\t}\n\n\t\tString[] nextStringArray(int n) {\n\t\t\tString[] array = new String[n];\n\t\t\tfor (int i = 0; i < n; i++)\n\t\t\t\tarray[i] = next();\n\n\t\t\treturn array;\n\t\t}\n\n\t\tString nextLine() {\n\t\t\tint c = read();\n\t\t\twhile (isEndline(c))\n\t\t\t\tc = read();\n\t\t\tStringBuilder res = new StringBuilder();\n\t\t\tdo {\n\t\t\t\tres.appendCodePoint(c);\n\t\t\t\tc = read();\n\t\t\t} while (!isEndline(c));\n\t\t\treturn res.toString();\n\t\t}\n\t}\n}"
  },
  {
    "language": "Java",
    "code": "import java.io.IOException;\nimport java.util.Arrays;\n\npublic class Main {\n\n\tpublic static void main(String[] args) {\n\t\twhile (true) {\n\t\t\tint allMinutes = nextInt();\n\t\t\tif (allMinutes == 0) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tint teamNum = nextInt();\n\t\t\tint problemNum = nextInt();\n\t\t\tint submitNum = nextInt();\n\n\t\t\tTeam[] teams = new Team[teamNum];\n\t\t\tfor (int i = 0; i < teams.length; i++) {\n\t\t\t\tteams[i] = new Team(i + 1);\n\t\t\t\tteams[i].penalty = new int[problemNum];\n\t\t\t}\n\n\t\t\tfor (int i = 0; i < submitNum; i++) {\n\t\t\t\tint time = nextInt();\n\t\t\t\tint team = nextInt();\n\t\t\t\tint problem = nextInt();\n\t\t\t\tint judge = nextInt();\n\n\t\t\t\tif (judge == 0) {\n\t\t\t\t\tteams[team - 1].correct++;\n\t\t\t\t\tteams[team - 1].minutes += time;\n\t\t\t\t\tteams[team - 1].minutes += teams[team - 1].penalty[problem - 1];\n\t\t\t\t} else {\n\t\t\t\t\tteams[team - 1].penalty[problem - 1] += 20;\n\t\t\t\t}\n\t\t\t}\n\t\t\tArrays.sort(teams);\n\n\t\t\tfor (int i = 0; i < teams.length; i++) {\n\t\t\t\tif (i != 0) {\n\t\t\t\t\tif (teams[i - 1].correct == teams[i].correct\n\t\t\t\t\t\t\t&& teams[i - 1].minutes == teams[i].minutes) {\n\t\t\t\t\t\tSystem.out.print(\"=\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tSystem.out.print(\",\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tSystem.out.print(teams[i].id);\n\t\t\t}\n\t\t\tSystem.out.print(\"\\n\");\n\t\t}\n\n\t}\n\n\tstatic int nextInt() {\n\t\tint c;\n\t\ttry {\n\t\t\tc = System.in.read();\n\t\t\twhile (c != '-' && (c < '0' || c > '9'))\n\t\t\t\tc = System.in.read();\n\t\t\tif (c == '-')\n\t\t\t\treturn -nextInt();\n\t\t\tint res = 0;\n\t\t\twhile (c >= '0' && c <= '9') {\n\t\t\t\tres = res * 10 + c - '0';\n\t\t\t\tc = System.in.read();\n\t\t\t}\n\t\t\treturn res;\n\t\t} catch (IOException e) {\n\t\t\te.printStackTrace();\n\t\t}\n\t\treturn -1;\n\t}\n\n}\n\nclass Team implements Comparable<Team> {\n\tint id = 0, minutes = 0, correct = 0, realPenalty = 0;\n\tint[] penalty;\n\n\tTeam(int id) {\n\t\tthis.id = id;\n\t}\n\n\tpublic int compareTo(Team team) {\n\t\tif (team.correct == this.correct) {\n\t\t\tif (this.minutes == team.minutes) {\n\t\t\t\treturn team.id - this.id;// 降順\n\t\t\t} else {\n\t\t\t\treturn this.minutes - team.minutes;// 昇順\n\t\t\t}\n\t\t} else {\n\t\t\treturn team.correct - this.correct;// 降順\n\t\t}\n\t}\n}"
  },
  {
    "language": "Java",
    "code": "import java.util.Scanner;\nimport java.util.Arrays;\n\npublic class Main{\n\tpublic static void main(String[] args) {\n\t\tScanner sc = new Scanner(System.in);\n\n\t\twhile(true){\n\t\t\tint timelimit = sc.nextInt();\n\t\t\tint team_num = sc.nextInt();\n\t\t\tint q_num = sc.nextInt();\n\t\t\tint record_num = sc.nextInt();\n\t\t\tif(timelimit==0) break;\n\n\t\t\tTeam[] team = new Team[team_num];\n\t\t\tint[][] solved = new int[q_num + 1][team_num];\n\t\t\tfor(int i=0; i<team_num; i++){\n\t\t\t\tteam[i] = new Team(q_num);\n\t\t\t\tsolved[0][i] = 100-i-1;\n\t\t\t}\n\n\t\t\tfor(int i=1; i<q_num+1; i++){\n\t\t\t\tArrays.fill(solved[i], 1000000000);\n\t\t\t}\n\n\t\t\tfor(int i=0; i<record_num; i++){\n\t\t\t\tint minute = sc.nextInt();\n\t\t\t\tint t = sc.nextInt();\n\t\t\t\tint q = sc.nextInt();\n\t\t\t\tint judge = sc.nextInt();\n\t\t\t\tif(judge!=0){\n\t\t\t\t\tteam[t-1].wrong[q-1]++;\n\t\t\t\t}else{\n\t\t\t\t\tsolved[team[t-1].cnt++][t-1] = 1000000000;\n\t\t\t\t\tteam[t-1].duration += (minute + team[t-1].wrong[q-1]*20)*100;\n\t\t\t\t\tsolved[team[t-1].cnt][t-1] = -t + team[t-1].duration;\n\t\t\t\t\tteam[t-1].wrong[q-1] = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\tString str = \"\";\n\t\t\tfor(int i=q_num; i>=0; i--){\n\t\t\t\tArrays.sort(solved[i]);\n\t\t\t\tif(solved[i][0]==1000000000) continue;\t\n\t\t\t\tstr += str.valueOf(100-solved[i][0]%100);\n\t\t\t\tfor(int j=1; j<team_num; j++){\n\t\t\t\t\tif(solved[i][j]==1000000000) break;\n\t\t\t\t\tif((solved[i][j]+j)/100 == (solved[i][j-1]+j-1)/100){\n\t\t\t\t\t\tstr += \"=\" + str.valueOf(100-solved[i][j]%100);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tstr += \",\" + str.valueOf(100-solved[i][j]%100);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tstr += \",\";\n\t\t\t}\n\t\t\tstr = str.substring(0, str.length()-1);\n\t\t\tSystem.out.println(str);\n\t\t}\n\t}\n\n\tpublic static class Team{\n\t\tint duration = 100;\n\t\tint cnt = 0;\n\t\tint[] wrong;\n\t\tTeam(int q_num){\n\t\t\twrong = new int[q_num];\n\t\t}\n\t}\n}"
  },
  {
    "language": "C#",
    "code": "using System.Linq;\nusing System.Collections.Generic;\nusing System;\n\npublic class Team\n{\n    public int tid { get; set; }\n    public int acc { get; set; }\n    public List<int> ac { get; set; }\n    public int[] wa { get; set; }\n    public int score { get; set; }\n}\n\npublic class Hello\n{\n    public const int INF = 999999999;\n    public static void Main()\n    {\n        while (true)\n        {\n            string[] line = Console.ReadLine().Trim().Split(' ');\n            var M = int.Parse(line[0]);\n            var T = int.Parse(line[1]);\n            var P = int.Parse(line[2]);\n            var R = int.Parse(line[3]);\n            if (M == 0 && T == 0 && P == 0 && R == 0) break;\n            var teams = new Team[T];\n            for (int i = 0; i < T; i++)\n                teams[i] = new Team { tid = i + 1, ac = new List<int>(), acc = 0,  wa = new int[10] };\n            for (int i = 0; i < R; i++)\n            {\n                line = Console.ReadLine().Trim().Split(' ');\n                var m = int.Parse(line[0]);\n                var t = int.Parse(line[1]) - 1;\n                var p = int.Parse(line[2]) - 1;\n                var j = int.Parse(line[3]);\n                if (j == 0)\n                {\n                    teams[t].ac.Add(p);\n                    teams[t].score += m;\n                    teams[t].acc++;\n                }\n                else teams[t].wa[p]++;\n            }\n            foreach (var x in teams)\n            {\n                if (x.score == 0 && x.acc == 0) x.score = INF;\n                else\n                    foreach (var y in x.ac) x.score += x.wa[y] * 20;\n            }\n            print(teams);\n        }\n    }\n    public static void print(Team[] t)\n    {\n        var a = t.OrderByDescending(x => x.acc).ThenBy(x => x.score).ThenByDescending(x => x.tid).ToArray();\n        var pre1 = a[0].acc;\n        var pre2 = a[0].score;\n        Console.Write(a[0].tid);\n        for (int i = 1; i < t.Length; i++)\n        {\n            if (a[i].acc < pre1) Console.Write(\",{0}\", a[i].tid);\n            else if (a[i].score > pre2) Console.Write(\",{0}\", a[i].tid);\n            else Console.Write(\"={0}\", a[i].tid);\n            pre1 = a[i].acc; pre2 = a[i].score;\n        }\n        Console.WriteLine();\n    }\n}\n\n"
  },
  {
    "language": "C#",
    "code": "using System;\nusing System.Collections.Generic;\nusing System.Linq;\n\nnamespace CSharpSample01\n{\n    struct Team\n    {\n        public int sum_time;\n        public int solve_pro_num;\n        public Problem[] pro_data;\n        public int team_number;\n\n        public Team(int P, int sum_time, int solve_pro_num, int num)\n        {\n            pro_data = new Problem[P];\n            this.sum_time = sum_time;\n            this.solve_pro_num = solve_pro_num;\n            team_number = num;\n            for(int i = 0; i < P; i++)\n            {\n                pro_data[i] = new Problem(0, 0, 1);\n            }\n        }      \n    }\n\n    struct Problem\n    {\n        public int num_submit;\n        public int last_solved_time;\n        public int result;\n\n        public Problem(int n, int f, int r)\n        {\n            num_submit = n;\n            last_solved_time = f;\n            result = r;\n        }\n    }\n\n    class Contest\n    {\n        int num_of_pro;\n        int num_of_team;\n        int open_period;        \n        public Team[] team_data;\n\n        public Contest(int M, int T, int P)\n        {\n            num_of_pro = P;\n            num_of_team = T;\n            open_period = M;\n            CreateTeamStruct(T, P);\n        }\n\n        void CreateTeamStruct(int T, int P)\n        {\n            team_data = new Team[T];\n            for(int i = 0; i < T; i++)\n            {\n                team_data[i] = new Team(P, 0, 0, i + 1);\n            }\n        }\n\n        //問題の提出回数、結果、最終提出時間、チームの正解回数を更新\n        public void Updata_Team_Data(int time, int team, int pro, int result)\n        {            \n            team_data[team].pro_data[pro].result = result;\n            team_data[team].pro_data[pro].num_submit++;\n            team_data[team].pro_data[pro].last_solved_time = time;\n            if(result == 0)\n            {\n                team_data[team].solve_pro_num++;\n            }\n        }\n\n        public void Calc_AllTeam_SumTime()\n        {\n\n            for(int i = 0; i < num_of_team; i++)\n            {\n                for(int j = 0; j < num_of_pro; j++)\n                {\n                    //解けていたらペナルティーを付加してチームの合計所要時間に加算\n                    if(team_data[i].pro_data[j].result == 0)\n                    {\n                        int sub_num = team_data[i].pro_data[j].num_submit;\n                        int last_time = team_data[i].pro_data[j].last_solved_time;\n                        team_data[i].sum_time += last_time + 20 * (sub_num - 1);\n                    }\n                }\n            }\n\n        }\n\n        public void Show_Ranking()\n        {\n            Calc_AllTeam_SumTime();\n\n            var team_data_sorted = team_data.OrderByDescending(x => x.solve_pro_num).ThenBy(x => x.sum_time).ThenByDescending(x => x.team_number).ToArray();\n\n            int old_solve_num = team_data_sorted[0].solve_pro_num;\n            int old_sum_time = team_data_sorted[0].sum_time;\n            int old_team = team_data_sorted[0].team_number;\n            Console.Write(old_team);\n            for(int i = 1; i < num_of_team; i++)\n            {\n                string head_str;\n\n                if(team_data_sorted[i].solve_pro_num == old_solve_num && team_data_sorted[i].sum_time == old_sum_time)\n                {\n                    head_str = \"=\";\n                }\n                else\n                {\n                    head_str = \",\";\n                }\n\n                old_solve_num = team_data_sorted[i].solve_pro_num;\n                old_sum_time = team_data_sorted[i].sum_time;\n                old_team = team_data_sorted[i].team_number;\n\n                Console.Write(head_str + team_data_sorted[i].team_number.ToString());\n\n            }\n\n            Console.WriteLine();\n\n        }\n        \n    }\n    \n\n    class Program\n    {\n        \n        \n        static void Main(string[] args)\n        {\n\n            while (true)\n            {\n                string[] input = Console.ReadLine().Split(' ');\n                int M = int.Parse(input[0]);\n                int T = int.Parse(input[1]);\n                int P = int.Parse(input[2]);\n                int R = int.Parse(input[3]);\n\n                if(M == 0 && T == 0 && P == 0 && R == 0)\n                {\n                    break;\n                }\n\n                Contest contest = new Contest(M, T, P);\n\n                for(int i = 0; i < R; i++)\n                {\n                    int[] sub_data = Console.ReadLine().Split(' ').Select(x => int.Parse(x)).ToArray();\n                    contest.Updata_Team_Data(sub_data[0], sub_data[1] - 1, sub_data[2] - 1, sub_data[3]);\n                }\n\n                contest.Show_Ranking();\n              \n            }\n            \n        }\n    }\n}\n"
  },
  {
    "language": "C#",
    "code": "using System.Linq;\nusing System;\n\npublic class Team\n{\n    public int tid { get; set; }\n    public int ac { get; set; }\n    public int[] wa { get; set; }\n    public int score { get; set; }\n}\n\npublic class Hello\n{\n    public const int INF = 999999999;\n    public static void Main()\n    {\n        while (true)\n        {\n            string[] line = Console.ReadLine().Trim().Split(' ');\n            var M = int.Parse(line[0]);\n            var T = int.Parse(line[1]);\n            var P = int.Parse(line[2]);\n            var R = int.Parse(line[3]);\n            if (M == 0 && T == 0 && P == 0 && R == 0) break;\n            var teams = new Team[T];\n            for (int i = 0; i < T; i++)\n                teams[i] = new Team { tid = i + 1, ac = 0, wa = new int[10], score = INF };\n            for (int i = 0; i < R; i++)\n            {\n                line = Console.ReadLine().Trim().Split(' ');\n                var m = int.Parse(line[0]);\n                var t = int.Parse(line[1]) - 1;\n                var p = int.Parse(line[2]) - 1;\n                var j = int.Parse(line[3]);\n                if (j == 0)\n                {\n                    teams[t].ac++;\n                    teams[t].score += m + teams[t].wa[p] * 20;\n                }\n                else teams[t].wa[p]++;\n            }\n            print(teams);\n        }\n    }\n    public static void print(Team[] t)\n    {\n        var a = t.OrderByDescending(x => x.ac).ThenBy(x => x.score).ThenByDescending(x => x.tid).ToArray();\n        var pre1 = a[0].ac;\n        var pre2 = a[0].score;\n        Console.Write(a[0].tid);\n        for (int i = 1; i < t.Length; i++)\n        {\n            if (a[i].ac < pre1) Console.Write(\",{0}\", a[i].tid);\n            else if (a[i].score > pre2) Console.Write(\",{0}\", a[i].tid);\n            else Console.Write(\"={0}\", a[i].tid);\n            pre1 = a[i].ac; pre2 = a[i].score;\n        }\n        Console.WriteLine();\n    }\n}\n\n"
  },
  {
    "language": "C#",
    "code": "using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Text;\nusing System.IO;\n\nusing CHY72;\n\nnamespace CHY72{\n    \n    public class PointXY{\n        public int X , Y;\n        public int SQLength() { return X * X + Y * Y; }\n        public bool Flag = false;\n        public PointXY(int _X,int _Y) {\n            X = _X; Y = _Y;\n        }\n        public PointXY(PointXY P1, int _X = 0, int _Y = 0) {\n            X = P1.X +  _X; Y =P1.Y + _Y;\n        }\n        public static bool operator ==(PointXY P1, PointXY P2) {\n            return (P1.X== P2.X && P1.Y == P2.Y);\n        }\n        public static bool operator !=(PointXY P1, PointXY P2) {return !(P1 ==P2);}\n        public override int GetHashCode() {return X.GetHashCode() ^ Y.GetHashCode();}\n        public override bool Equals(object obj) {\n            if (obj == null || this.GetType() != obj.GetType()) {return false;}\n            return (this == (PointXY)obj);\n        }\n\n    }\n\n    public class Lib72 {\n        public static int NumFromChar(char CNUM) { return CNUM - 48; }\n        public static char LoopChar52(char _C, int n) {\n            //Char(C#) uses Uni-Code\n            //33 !  \"#$%&'(  41 )\n            //42 * +,-.  47/\n            //48 0  .... 57 9\n            //58 :;<=>? 64 @\n            //65 A .... 90 Z\n            //91 [\\]^_ 96`\n            //97 a .... 122 z\n            int i_C = (int)_C;\n            if (i_C > 64 && i_C < 91) i_C -= 65;//0~25 AZ\n            else if (i_C > 96 && i_C < 123) i_C -= 71;//26~51 az\n            else return '0';\n            int RESULT = Modulo ((i_C + n ) , 52);\n            if(RESULT < 26) return (char)(RESULT+65);\n            else return (char)(RESULT + 71);\n        }\n        public static int Modulo(int A, int B)  {\n            // -6 % 5 == -1\n            // -6 % 5 == 4\n            int Result = A % B;\n            if (Result >= 0) { return Result; }\n            else return Result + B;\n        }\n\n\n        public static int[] KETAArray(int Num) {return KETAArray(Num.ToString()); }\n        public static int[] KETAArray(string Num) {\n            char[] cKETA = Num.ToCharArray();\n            int[] iKETA = new int[cKETA.Length];\n            for (int i = 0; i < iKETA.Length; i++) {\n                iKETA[i] = NumFromChar(cKETA[i]);\n            }\n            return iKETA;\n        }\n        public static int KETA(int Num) { return Num.ToString().ToCharArray().Length; }\n        public static int FromKETAArray(int[] _ketaarray) {\n            int result = 0;\n            int[] R_ketaarray = _ketaarray.Reverse().ToArray(); \n            for (int i = 0,j=1; i < R_ketaarray.Length; i++,j *=10) {\n                result += j * R_ketaarray[i];\n            }\n            return result;\n        }\n        public static bool isPrime(int p) {\n            if (p != 2 && p % 2 == 0) return false;\n            if (p == 1) return false;\n            int SQp = (int)(Math.Sqrt(p));\n            for (int i = 3; i <= SQp; i++) {\n                if (p % i == 0) return false;\n            }\n            return true;\n        } \n    }\n}    \n\npublic class Program {\n    static bool ReadLine_1(ref int num1, bool Fin0 = true) {\n        string str = Console.ReadLine();\n        num1 = int.Parse(str);\n        return (Fin0 && num1 == 0);\n    }\n    static int  ReadLine_1() {\n        return  int.Parse(Console.ReadLine());\n    }\n    static bool ReadLine_2(ref int num1, ref int num2, char Spliter = ' ', bool Fin0 = true,int FinNum =0) {\n        string str = Console.ReadLine();\n        num1 = int.Parse(str.Split(Spliter)[0]);\n        num2 = int.Parse(str.Split(Spliter)[1]);\n        return (Fin0 && num1 == FinNum && num2 == FinNum);\n    }\n    static int[] ReadLine_Array(char Spliter = ' ') {\n        return Console.ReadLine().Split(Spliter).Select(s => int.Parse(s)).ToArray();\n    }\n\n    const int DefaultMax = 72727272;\n\n    public class ICPCTEAM {\n        public int[] MissNum = new int[1];\n        public int CorrectNum = 0;\n        public int Penalty = 0;\n        public int TeamID;\n        public ICPCTEAM(int _tID, int _ProblemNum) {\n            TeamID = _tID;\n            MissNum = new int[_ProblemNum];\n        }\n        public int CulcPENALTY(int _ProblemNum, int TIME) {\n            return MissNum[_ProblemNum] * 20 + TIME;\n        }\n\n        public bool POINTEQUAL(ICPCTEAM other) {\n            return ((CorrectNum == other.CorrectNum )&& (Penalty ==other.Penalty ) );\n        }\n\n    }\n\n    static void Main(string[] args) {\n        while (true) {\n            int[] MTPR = ReadLine_Array();\n            if (MTPR[0] == 0) return;\n            //Teams[0],Penalty[0] is Dummy\n            ICPCTEAM[] Teams = new ICPCTEAM[MTPR[1] + 1];\n            Teams[0] = new ICPCTEAM(0, MTPR[2] + 1);\n            for (int i = 1; i < MTPR[1] + 1; i++) {\n                Teams[i] = new ICPCTEAM(i, MTPR[2] + 1);\n            }\n            for (int i = 0; i < MTPR[3]; i++) {\n                string str = Console.ReadLine();\n                int Time = int.Parse(str.Split(' ')[0]);\n                int tID = int.Parse(str.Split(' ')[1]);\n                int pID = int.Parse(str.Split(' ')[2]);\n                int isCorrect = int.Parse(str.Split(' ')[3]);//if 0 then correct\n                if (isCorrect == 0) {\n                    Teams[tID].CorrectNum++;\n                    Teams[tID].Penalty += Teams[tID].CulcPENALTY(pID, Time);\n                }else {\n                    Teams[tID].MissNum[pID]++;\n\n                }\n            }\n            //tID,CorrectNum .penalty\n            ICPCTEAM[] OrderedByTeams = Teams. OrderByDescending(x => x.TeamID ).ToArray().\n                                               OrderBy(x => x.Penalty).ToArray().\n                                               OrderByDescending(x => x.CorrectNum).ToArray()\n                                                ;\n            string RESULT = \"\";\n            \n            for (int i = 0; i < OrderedByTeams.Length; i++) {\n                if (OrderedByTeams[i].TeamID != 0) {\n                    if (i != 0) {\n                        if (OrderedByTeams[i].POINTEQUAL(OrderedByTeams[i - 1])) {\n                            RESULT += \"=\";\n                        }else {\n                            RESULT += \",\";\n                        }\n                    }\n                    RESULT += OrderedByTeams[i].TeamID;\n                }\n            }\n            Console.WriteLine(RESULT );\n\n        }\n    }\n}"
  },
  {
    "language": "C#",
    "code": "using System.Linq;\nusing System;\n\npublic class Team\n{\n    public int tid { get; set; }\n    public int ac { get; set; }\n    public int score { get; set; }\n}\n\npublic class Hello\n{\n    public const int INF = 999999999;\n    public static void Main()\n    {\n        while (true)\n        {\n            string[] line = Console.ReadLine().Trim().Split(' ');\n            var M = int.Parse(line[0]);\n            var T = int.Parse(line[1]);\n            var P = int.Parse(line[2]);\n            var R = int.Parse(line[3]);\n            if (M == 0 && T == 0 && P == 0 && R == 0) break;\n            var wa = new int[T, 10];\n            var teams = new Team[T];\n            for (int i = 0; i < T; i++)\n                teams[i] = new Team { tid = i + 1, ac = 0,  score = INF };\n            for (int i = 0; i < R; i++)\n            {\n                line = Console.ReadLine().Trim().Split(' ');\n                var m = int.Parse(line[0]);\n                var t = int.Parse(line[1]) - 1;\n                var p = int.Parse(line[2]) - 1;\n                var j = int.Parse(line[3]);\n                if (j == 0)\n                {\n                    teams[t].ac++;\n                    teams[t].score += m + wa[t,p] * 20;\n                }\n                else wa[t,p]++;\n            }\n            print(teams);\n        }\n    }\n    public static void print(Team[] t)\n    {\n        var a = t.OrderByDescending(x => x.ac).ThenBy(x => x.score).ThenByDescending(x => x.tid).ToArray();\n        var pre1 = a[0].ac;\n        var pre2 = a[0].score;\n        Console.Write(a[0].tid);\n        for (int i = 1; i < t.Length; i++)\n        {\n            Console.Write(a[i].ac == pre1 && a[i].score == pre2 ? '=' : ',');\n            Console.Write(a[i].tid);\n            pre1 = a[i].ac; pre2 = a[i].score;\n        }\n        Console.WriteLine();\n    }\n}\n"
  },
  {
    "language": "C#",
    "code": "using System.Linq;\nusing System;\n\npublic class Team\n{\n    public int tid { get; set; }\n    public int ac { get; set; }\n    public int[] wa { get; set; }\n    public int score { get; set; }\n}\n\npublic class Hello\n{\n    public const int INF = 999999999;\n    public static void Main()\n    {\n        while (true)\n        {\n            string[] line = Console.ReadLine().Trim().Split(' ');\n            var M = int.Parse(line[0]);\n            var T = int.Parse(line[1]);\n            var P = int.Parse(line[2]);\n            var R = int.Parse(line[3]);\n            if (M == 0 && T == 0 && P == 0 && R == 0) break;\n            var teams = new Team[T];\n            for (int i = 0; i < T; i++)\n                teams[i] = new Team { tid = i + 1, ac = 0, wa = new int[10], score = INF };\n            for (int i = 0; i < R; i++)\n            {\n                line = Console.ReadLine().Trim().Split(' ');\n                var m = int.Parse(line[0]);\n                var t = int.Parse(line[1]) - 1;\n                var p = int.Parse(line[2]) - 1;\n                var j = int.Parse(line[3]);\n                if (j == 0)\n                {\n                    teams[t].ac++;\n                    teams[t].score += m + teams[t].wa[p] * 20;\n                }\n                else teams[t].wa[p]++;\n            }\n            print(teams);\n        }\n    }\n    public static void print(Team[] t)\n    {\n        var a = t.OrderByDescending(x => x.ac).ThenBy(x => x.score).ThenByDescending(x => x.tid).ToArray();\n        var pre1 = a[0].ac;\n        var pre2 = a[0].score;\n        Console.Write(a[0].tid);\n        for (int i = 1; i < t.Length; i++)\n        {\n            Console.Write(a[i].ac == pre1 && a[i].score == pre2 ? '=' : ',');\n            Console.Write(a[i].tid);\n            pre1 = a[i].ac; pre2 = a[i].score;\n        }\n        Console.WriteLine();\n    }\n}\n"
  },
  {
    "language": "JavaScript",
    "code": "var input = require('fs').readFileSync('/dev/stdin', 'utf8');\nvar arr=input.trim().split(\"\\n\");\nwhile(true){\n   var MTPR=arr.shift();\n   if(MTPR==\"0 0 0 0\")break;\n   MTPR=MTPR.split(\" \").map(Number);\n   var team=[];\n   for(var i=0;i<MTPR[1];i++)team.push([0,0,[0,0,0,0,0,0,0,0,0,0],i]);\n   for(var i=0;i<MTPR[3];i++){\n      var mtpj=arr.shift().split(\" \").map(Number);\n      var m=mtpj[0];\n      var t=mtpj[1]-1;\n      var p=mtpj[2]-1;\n      var j=mtpj[3];\n      if(j==0){\n         team[t][0]++;\n         team[t][1]+=m+team[t][2][p]*20;\n      }\n      if(j!=0)team[t][2][p]++;\n   }\n   team.sort(function(a,b){\n      if(a[0]==b[0] && a[1]==b[1])return b[3]-a[3];\n      else if(a[0]==b[0])return a[1]-b[1];\n      else return b[0]-a[0];\n   });\n   var ans=[];\n   var same=[-1,-1];\n   team.forEach(function(v,i){\n      if(same[0]==v[0] && same[1]==v[1])ans[ans.length-1]+=\"=\"+(v[3]+1);\n      else {ans.push(v[3]+1);same=[v[0],v[1]];}\n   });\n   console.log(ans.join(\",\"));\n}"
  },
  {
    "language": "Ruby",
    "code": "loop do\n    m, t, p, r = gets.split.map(&:to_i)\n    break if m == 0 && t == 0 && p == 0 && r == 0\n    rec = r.times.map{gets.split.map(&:to_i)}\n    wa = Array.new(t).map{Array.new(p+1,0)}\n    grade = Array.new(t).map{Array.new(2,0)}\n    rec.each do |rr|\n        case rr[3]\n        when 0\n            grade[rr[1]-1][0] += 1\n            grade[rr[1]-1][1] += rr[0] + 20 * wa[rr[1]-1][rr[2]]\n        else\n            wa[rr[1]-1][rr[2]] += 1\n        end\n    end\n    gr = grade.map.with_index(1){|g,i| [i] + g}.sort{\n        |a,b| (b[1] <=> a[1]).nonzero? || (a[2] <=> b[2]).nonzero? || b[0]<=>a[0]\n    }\n    pb = pc = -1\n    ret = \"\"\n    gr.each_with_index {|a,i|\n        if a[1] == pb && a[2] == pc\n            ret += \"=#{a[0]}\"\n        else\n            ret += \"#{a[0]}\" if i == 0\n            ret += \",#{a[0]}\" if i != 0\n        end\n        pb = a[1]\n        pc = a[2]\n    }\n    puts ret\nend"
  },
  {
    "language": "Ruby",
    "code": "loop do\n  m, t, pr, r = gets.split.map(&:to_i)\n  break if m == 0\n\n  durations = [0] * t\n  scores = [0] * t\n  penalties = [[]] * t\n  r.times do\n    inp = gets.split.map(&:to_i)\n    te = inp[1] - 1\n    pb = inp[2] - 1\n    if inp[3] == 0 # ??£?§£\n      scores[te] += 1\n      durations[te] += inp[0]\n      durations[te] += penalties[te][pb] * 20 if penalties[te][pb]\n    else # ?????£?§£\n      penalties[te][pb] ||= 0\n      penalties[te][pb] += 1\n    end\n  end\n\n  arr = scores.zip(durations).map.with_index { |a, i| [*a, i] }\n  sorted = arr.sort do |a, b|\n    if b[0] == a[0]\n      if b[1] == a[1]\n        b[2] - a[2]\n      else\n        a[1] - b[1]\n      end\n    else\n      b[0] - a[0]\n    end\n  end\n\n  sorted.each_with_index do |v, i|\n    print v[2] + 1\n    break if i == sorted.size - 1\n    if sorted[i+1][0..1] == v[0..1]\n      print \"=\"\n    else\n      print \",\"\n    end\n  end\n\n  print \"\\n\"\nend"
  },
  {
    "language": "Ruby",
    "code": "loop do\n    m0, t0, p0, r = gets.split.map &:to_i\n    break if m0 == 0\n    submission = (0..t0).map {Hash.new(-1)}\n\n    r.times do\n        m, t, p, j = gets.split.map &:to_i\n        if j == 0\n            submission[t][p] = m - submission[t][p] - 1 \n        else\n            submission[t][p] -= 20\n        end\n    end \n    \n    point = (1..t0).map do |t| \n        tmp = submission[t].select{|p, m| m >= 0}\n        [-tmp.size, tmp.values.inject(0, :+), t]\n    end \n\n    point.sort!\n    puts point.group_by{|c, m, _| [c, m]}.map{|_, a| a.map(&:last).sort.reverse * '='} * ',' \nend"
  },
  {
    "language": "Ruby",
    "code": "objects = []\n\nwhile line = gets do\n  # time, number, question, bool\n  arr = line.split(\" \").map(&:to_i)\n  break if arr == [0, 0, 0, 0]\n  objects.push arr\nend\n\n#objects = [\n#  [300,10,8,5], [50,5,2,1], [70,5,2,0], [75,1,1,0], [100,3,1,0], [150,3,2,0], [240,5,5,7],\n#  [50,1,1,0], [60,2,2,0], [70,2,3,0]\n#]\n\nteam = {}\n\nobjects.each do |o|\n  if !team.has_key?(o[1])\n    team[o[1]] = {}\n    team[o[1]][:sum] = 0\n    team[o[1]][:time] = 0\n  end\n  if o[3] == 0\n    team[o[1]][:sum] += 1\n    team[o[1]][:time] += o[2]\n  end\nend\n\nresults = team.to_a.sort do |a, b|\n  if a[1][:sum] == b[1][:sum]\n    a[1][:time] <=> b[1][:time]\n  else\n    b[1][:sum] <=> a[1][:sum]\n  end\nend\n\ni = 0\nj = 10000000000\nwhile i < results.size\n  ii = i\n  arr = []\n  arr.push results[i]\n  while ii < j\n    ii = ii + 1\n    break unless results[ii]\n    if results[ii][1][:sum] == results[i][1][:sum] && results[ii][1][:time] == results[i][1][:time]\n      arr.push results[j]\n      i = i + 1\n    else\n      break\n    end\n  end\n  arr.sort! do |a, b|\n    b[0] <=> a[0]\n  end\n  puts arr.map{|x| x[0] }.join(\"=\")\n  i = i + 1\n  unless i == results.size\n    puts \",\"\n  end\nend"
  },
  {
    "language": "Ruby",
    "code": "class Array\n  def sb\n    sort_by.with_index{ |e, index| [yield(e), index] }\n  end\nend\n\nwhile true do\n  mm, tt, pp, rr = gets.split.map(&:to_i)\n  break if mm + tt + pp + rr == 0\n  wa = Array.new(tt, Array.new(pp, 0))\n  solved = Array.new(tt, 0)\n  time = Array.new(tt, 0)\n  rr.times do\n    m, t, p, j = gets.split.map(&:to_i)\n    t -= 1\n    p -= 1\n    if j == 0\n      solved[t] += 1\n      time[t] += m + wa[t][p] * 20\n    else\n      wa[t][p] += 1\n    end\n  end\n  teams = (0...tt).to_a.reverse\n  result = teams.sb{|x| time[x]}.sb{|x| - solved[x]}\n  tt.times do |i|\n    t = result[i]\n    if i != 0\n      s = result[i-1]\n      print time[s] == time[t] && solved[s] == solved[t] ? '=' : ','\n    end\n    print t + 1\n  end\n  puts\nend"
  },
  {
    "language": "Ruby",
    "code": "while true\n    limit, n_t, n_p, n_r = gets.chomp.split.map(&:to_i)\n    break if [limit, n_t, n_p, n_r] == [0, 0, 0, 0]\n    result = Array.new(n_t){[0, 0, nil, Hash.new(0)]}\n    1.upto(n_t){|team| result[team - 1][2] = team}\n    n_r.times{\n        time, team, problem, judge = gets.chomp.split.map(&:to_i)\n        if judge == 0\n            result[team - 1][0] += 1\n            result[team - 1][1] += (time + 20 * result[team - 1][3][problem])\n        else\n            result[team - 1][3][problem] += 1\n        end\n    }\n    result.sort_by!{|n_solved, total, team, n_mis| [-n_solved, total, -team]}\n    prev = nil\n    result.each{|team|\n        if prev\n            if prev[0] == team[0] && prev[1] == team[1]\n                print \"=\"\n            else\n                print \",\"\n            end\n        end\n        print team[2]\n        prev = team\n    }\n    puts\nend\n"
  },
  {
    "language": "Ruby",
    "code": "#!/bin/ruby\nclass Team\n  def initialize(t,p)\n    @t=t\n    @f=Array.new(p){0}\n    @ac=Array.new(p){false}\n    @time=0\n  end\n  attr_reader :t\n  attr_accessor :f\n  attr_accessor :time\n  attr_accessor :ac\n  def penalty\n    p=0\n    (0...f.size).each do |e|\n      p+=20*f[e] if ac[e]\n    end\n    return time+p\n  end\n  def <(t)\n    if @ac.count(true)!=t.ac.count(true) then\n      return @ac.count(true)>t.ac.count(true)\n    else\n      return penalty<t.penalty\n    end\n  end\n  def <=>(t)\n    return -1 if self<t\n    return 1 if t<self\n    return 0\n  end\nend\n                \nloop do\n  m,t,p,r=gets.split.map(&:to_i)\n  break if m==0&&t==0&&r==0&&p==0\n  teams=(0...t).map{|e|Team.new(e,p)}\n  r.times do\n    mk,tk,pk,jk=gets.split.map(&:to_i)\n    if jk==0 then\n      teams[tk-1].time+=mk;\n      teams[tk-1].ac[pk-1]=true\n    else\n      teams[tk-1].f[pk-1]+=1\n    end\n  end\n  teams.sort!{|a,b|((a<=>b)!=0)?a<=>b : -(a.t-b.t)}\n  (0...teams.size-1).each do |e|\n    print \"#{teams[e].t+1}#{((teams[e]<=>teams[e+1])==0)? '=':','}\"\n  end\n  puts teams[-1].t+1\nend"
  },
  {
    "language": "Ruby",
    "code": "loop do\n  m, t, pr, r = gets.split.map(&:to_i)\n  break if m == 0\n\n  durations = [0] * t\n  scores = [0] * t\n  penalties = [[]] * t\n  r.times do\n    inp = gets.split.map(&:to_i)\n    te = inp[1] - 1\n    pb = inp[2] - 1\n    if inp[3] == 0 # ??£?§£\n      scores[te] += 1\n      durations[te] += inp[0]\n      durations[te] += penalties[te][pb] * 20 if penalties[te][pb]\n    else # ?????£?§£\n      penalties[te][pb] ||= 0\n      penalties[te][pb] += 1\n    end\n  end\n\n  arr = scores.zip(durations).map.with_index { |a, i| [*a, i] }\n  sorted = arr.sort do |a, b|\n    if b[0] == a[0]\n      if b[1] == a[1]\n        b[2] - a[2]\n      else\n        a[1] - b[1]\n      end\n    else\n      b[0] - a[0]\n    end\n  end\n\n  sorted.each_with_index do |v, i|\n    print v[2] + 1\n    break if i == sorted.size - 1\n    if sorted[i+1][0..1] == v[0..1]\n      print \"=\"\n    else\n      print \",\"\n    end\n  end\n\n  print \"\\n\"\nend"
  },
  {
    "language": "Ruby",
    "code": "### constant\n\nPNLTY = 20\n\n### subroutines\n\ndef cmp_t(a, b)\n  ($rights[a] != $rights[b]) ?\n    $rights[b] <=> $rights[a] : $times[a] <=> $times[b]\nend\n\ndef cmp_t_s(a, b)\n  ct = cmp_t(a, b)\n  (ct != 0) ? ct : b <=> a\nend\n\n### main\n\nloop do\n  m, tn, pn, rn = gets.split.map(&:to_i)\n  break if (m | tn | pn | rn) == 0\n\n  $rights = tn.times.map{0}\n  $times = tn.times.map{0}\n  ngs = tn.times.map{pn.times.map{0}}\n  \n  rn.times do\n    mi, ti, pi, ji = gets.split.map(&:to_i)\n    ti -= 1\n    pi -= 1\n\n    if ji == 0\n      $rights[ti] += 1\n      $times[ti] += ngs[ti][pi] * PNLTY + mi\n    else\n      ngs[ti][pi] += 1\n    end\n  end\n  #p [$rights, $times]\n\n  ts = (0...tn).sort{|a, b| cmp_t_s(a, b)}\n\n  print (ts[0] + 1)\n  for i in (1...tn)\n    print (cmp_t(ts[i - 1], ts[i]) != 0 ? ',' : '=')\n    print (ts[i] + 1)\n  end\n  puts\nend"
  },
  {
    "language": "Ruby",
    "code": "require 'scanf'\nrequire 'pp'\n\n# ????¨?\nclass Submit\n  attr_accessor :time, :judge\n\n  def initialize(time, judge)\n    @time = time\n    @judge = judge\n  end\n\n  def ok?\n    @judge == 0\n  end\nend\n\n# ????????????????????????????¨?????????¨??????\nclass Problem < Array\n  def penalty\n    if ok?\n      (self.size - 1) * 20\n    else\n      0\n    end\n  end\n\n  def ok?\n    last.ok?\n  end\n\n  def time\n    if ok?\n      last.time + penalty\n    else\n      0\n    end\n  end\nend\n\n# ?????????\nclass Team\n  attr_reader :problems, :id\n\n  def initialize(id)\n    @id = id\n    @problems = {}\n  end\n\n  def submit(problem, submit)\n    log = @problems[problem] ||= Problem.new\n    log << submit\n  end\n\n  def n_solved\n    @problems\n      .select { |id, problem| problem.ok? }\n      .count\n  end\n\n  def total_time\n    @problems\n      .map { |id, problem| problem.time }\n      .inject(0, :+)\n  end\n\n  def <=>(other)\n    c = other.n_solved <=> self.n_solved\n    unless c == 0\n      c\n    else\n      self.total_time <=> other.total_time\n    end\n  end\nend\n\nwhile true\n  line = gets\n  break unless line\n\n  mm, tt, pp, r = line.scanf('%d %d %d %d')\n  break if [mm, tt, pp, r].all?(&:zero?)\n\n  teams = Array.new(tt) do |t|\n    Team.new(t + 1)\n  end\n  \n  r.times do\n    line = gets\n    break unless line\n\n    m, t, p, j = line.scanf('%d %d %d %d')\n    teams[t - 1].submit(p, Submit.new(m, j))\n  end\n\n  sorted_teams = teams.sort\n\n  rank = 1\n  ranks = []\n\n  sorted_teams.each_with_index do |t, i|\n    prev = i == 0 ? nil : sorted_teams[i - 1]\n\n    if !prev.nil? && t.n_solved == prev.n_solved && t.total_time == prev.total_time\n      ranks.last << t.id\n    else\n      ranks << [t.id]\n    end\n  end\n\n  puts ranks.map{|sr| sr.sort.reverse.join('=')}.join(',')\nend"
  },
  {
    "language": "Ruby",
    "code": "class Array\n  def sb\n    sort_by.with_index{ |e, index| [yield(e), index] }\n  end\nend\n\nwhile true do\n  mm, tt, pp, rr = gets.split.map(&:to_i)\n  break if mm + tt + pp + rr == 0\n  wa = Array.new(tt).map{Array.new(pp,0)}\n  solved = Array.new(tt, 0)\n  time = Array.new(tt, 0)\n  rr.times do\n    m, t, p, j = gets.split.map(&:to_i)\n    t -= 1\n    p -= 1\n    if j == 0\n      solved[t] += 1\n      time[t] += m + wa[t][p] * 20\n    else\n      wa[t][p] += 1\n    end\n  end\n  teams = (0...tt).to_a.reverse\n  result = teams.sb{|x| time[x]}.sb{|x| - solved[x]}\n  tt.times do |i|\n    t = result[i]\n    if i != 0\n      s = result[i-1]\n      print time[s] == time[t] && solved[s] == solved[t] ? '=' : ','\n    end\n    print t + 1\n  end\n  puts\nend"
  },
  {
    "language": "Ruby",
    "code": "loop do\n  m, t, pr, r = gets.split.map(&:to_i)\n  break if m == 0\n\n  durations = [0] * t\n  scores = [0] * t\n  penalties = [[]] * t\n  r.times do\n    inp = gets.split.map(&:to_i)\n    te = inp[1] - 1\n    pb = inp[2] - 1\n    if inp[3] == 0 # ??£?§£\n      scores[te] += 1\n      durations[te] += inp[0]\n      durations[te] += penalties[te][pb] * 20 if penalties[te][pb]\n    else # ?????£?§£\n      penalties[te][pb] ||= 0\n      penalties[te][pb] += 1\n    end\n  end\n\n  arr = scores.zip(durations).map.with_index { |a, i| [*a, i] }\n  sorted = arr.sort do |a, b|\n    if b[0] == a[0]\n      if b[1] == a[1]\n        b[2] - a[2]\n      else\n        a[1] - b[1]\n      end\n    else\n      b[0] - a[0]\n    end\n  end\n\n  sorted.each_with_index do |v, i|\n    print v[2] + 1\n    break if i == sorted.size - 1\n    if sorted[i+1][0..1] == v[0..1]\n      print \"=\"\n    else\n      print \",\"\n    end\n  end\n\n  print \"\\n\"\nend"
  },
  {
    "language": "Ruby",
    "code": "require 'scanf'\nrequire 'pp'\n\n# ????¨?\nclass Submit\n  attr_accessor :time, :judge\n\n  def initialize(time, judge)\n    @time = time\n    @judge = judge\n  end\n\n  def ok?\n    @judge == 0\n  end\nend\n\n# ????????????????????????????¨?????????¨??????\nclass Problem < Array\n  def penalty\n    if ok?\n      (self.size - 1) * 20\n    else\n      0\n    end\n  end\n\n  def ok?\n    last.ok?\n  end\n\n  def time\n    if ok?\n      last.time + penalty\n    else\n      0\n    end\n  end\nend\n\n# ?????????\nclass Team\n  attr_reader :problems, :id\n\n  def initialize(id)\n    @id = id\n    @problems = {}\n  end\n\n  def submit(problem, submit)\n    log = @problems[problem] ||= Problem.new\n    log << submit\n  end\n\n  def n_solved\n    @problems\n      .select { |id, problem| problem.ok? }\n      .count\n  end\n\n  def total_time\n    @problems\n      .map { |id, problem| problem.time }\n      .inject(:+)\n  end\nend\n\nwhile true\n  line = gets\n  break unless line\n\n  mm, tt, pp, r = line.scanf('%d %d %d %d')\n  break if [mm, tt, pp, r].all?(&:zero?)\n\n  teams = Array.new(tt) do |t|\n    Team.new(t + 1)\n  end\n  \n  r.times do\n    line = gets\n    break unless line\n\n    m, t, p, j = line.scanf('%d %d %d %d')\n    teams[t - 1].submit(p, Submit.new(m, j))\n  end\n\n  sorted_teams = teams.sort do |a, b|\n    c = b.n_solved <=> a.n_solved\n    unless c == 0\n      c\n    else\n      a.total_time <=> b.total_time\n    end\n  end\n\n  rank = 1\n  ranks = []\n\n  sorted_teams.each_with_index do |t, i|\n    prev = i == 0 ? nil : sorted_teams[i - 1]\n\n    if !prev.nil? && t.n_solved == prev.n_solved && t.total_time == prev.total_time\n      ranks.last << t.id\n    else\n      ranks << [t.id]\n    end\n  end\n\n  puts ranks.map{|sr| sr.sort.reverse.join('=')}.join(',')\nend"
  },
  {
    "language": "Go",
    "code": "package main\n\nimport (\n\t\"bufio\"\n\t\"fmt\"\n\t\"os\"\n\t\"sort\"\n\t\"strconv\"\n\t\"strings\"\n)\n\nfunc main() {\n\tio := NewIo()\n\tdefer io.Flush()\n\tfor {\n\t\tM, T, P, R := io.NextInt(), io.NextInt(), io.NextInt(), io.NextInt()\n\t\tif M == 0 {\n\t\t\tbreak\n\t\t}\n\t\tscore := make([]struct{ num, time, index int }, T)\n\t\tsubmit := make([][]int, T)\n\t\tfor i := 0; i < T; i++ {\n\t\t\tscore[i].index = i + 1\n\t\t\tsubmit[i] = make([]int, P)\n\t\t}\n\n\t\tfor i := 0; i < R; i++ {\n\t\t\tm, t, p, j := io.NextInt(), io.NextInt()-1, io.NextInt()-1, io.NextInt()\n\t\t\tif j == 0 {\n\t\t\t\tscore[t].num++\n\t\t\t\tscore[t].time += submit[t][p]*20 + m\n\t\t\t} else {\n\t\t\t\tsubmit[t][p]++\n\t\t\t}\n\t\t}\n\t\tsort.SliceStable(score, func(i, j int) bool {\n\t\t\treturn score[i].num < score[j].num || score[i].num == score[j].num && score[i].time > score[j].time\n\t\t})\n\n\t\tfor i := T - 1; i > 0; i-- {\n\t\t\tio.Printf(\"%d\", score[i].index)\n\t\t\tif score[i].num == score[i-1].num && score[i].time == score[i-1].time {\n\t\t\t\tio.Printf(\"=\")\n\t\t\t} else {\n\t\t\t\tio.Printf(\",\")\n\t\t\t}\n\t\t}\n\t\tio.Println(score[0].index)\n\t}\n}\n\n// I/O template\ntype Io struct {\n\treader    *bufio.Reader\n\twriter    *bufio.Writer\n\ttokens    []string\n\tnextToken int\n}\n\nfunc NewIo() *Io {\n\treturn &Io{\n\t\treader: bufio.NewReader(os.Stdin),\n\t\twriter: bufio.NewWriter(os.Stdout),\n\t}\n}\n\nfunc (io *Io) Flush() {\n\terr := io.writer.Flush()\n\tif err != nil {\n\t\tpanic(err)\n\t}\n}\n\nfunc (io *Io) NextLine() string {\n\tvar buff []byte\n\tfor {\n\t\tline, isPrefix, err := io.reader.ReadLine()\n\t\tif err != nil {\n\t\t\tpanic(err)\n\t\t}\n\t\tbuff = append(buff, line...)\n\t\tif !isPrefix {\n\t\t\tbreak\n\t\t}\n\t}\n\treturn string(buff)\n}\n\nfunc (io *Io) Next() string {\n\tfor io.nextToken >= len(io.tokens) {\n\t\tline := io.NextLine()\n\t\tio.tokens = strings.Fields(line)\n\t\tio.nextToken = 0\n\t}\n\ts := io.tokens[io.nextToken]\n\tio.nextToken++\n\treturn s\n}\n\nfunc (io *Io) NextInt() int {\n\ti, err := strconv.Atoi(io.Next())\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\treturn i\n}\n\nfunc (io *Io) NextFloat() float64 {\n\ti, err := strconv.ParseFloat(io.Next(), 64)\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\treturn i\n}\n\nfunc (io *Io) Println(a ...interface{}) {\n\tfmt.Fprintln(io.writer, a...)\n}\n\nfunc (io *Io) Printf(format string, a ...interface{}) {\n\tfmt.Fprintf(io.writer, format, a...)\n}\n\nfunc (io *Io) PrintIntSlice(a []int) {\n\tb := []interface{}{}\n\tfor _, x := range a {\n\t\tb = append(b, x)\n\t}\n\tio.Println(b...)\n}\n\nfunc (io *Io) PrintStringSlice(a []string) {\n\tb := []interface{}{}\n\tfor _, x := range a {\n\t\tb = append(b, x)\n\t}\n\tio.Println(b...)\n}\n\nfunc Log(name string, value interface{}) {\n\tfmt.Fprintf(os.Stderr, \"%s=%+v\\n\", name, value)\n}\n\nfunc ExampleIo() {\n\tio := NewIo()\n\tdefer io.Flush()\n\ta := make([]int, 0, 3)\n\ta[0], a[1], a[2] = io.NextInt(), io.NextInt(), io.NextInt()\n\tio.Println(a)\n\tio.PrintIntSlice(a)\n\tLog(\"io\", a)\n}\n\n"
  },
  {
    "language": "D",
    "code": "import std.stdio;\nimport std.algorithm;\nimport std.string;\nimport std.range;\nimport std.array;\nimport std.conv;\nimport std.complex;\nimport std.math;\nimport std.ascii;\nimport std.bigint;\nimport std.container;\nimport std.typecons;\n\nauto readInts() {\n\treturn array(map!(to!int)(readln().strip().split()));\n}\nauto readInt() {\n\treturn readInts()[0];\n}\nauto readLongs() {\n\treturn array(map!(to!long)(readln().strip().split()));\n}\nauto readLong() {\n\treturn readLongs()[0];\n}\n\nconst real eps = 1e-10;\n\nvoid main(){\n\twhile(true) {\n\t\tauto mtpr = readInts();\n\t\tauto m = mtpr[0];\n\t\tauto t = mtpr[1];\n\t\tauto p = mtpr[2];\n\t\tauto r = mtpr[3];\n\t\tif((m|t|p|r) == 0) return;\n\n\t\tauto cp = new int[](t);\n\t\tauto pe = new int[](t);\n\t\tauto w = new int[][](t,p);\n\t\tfor(int i; i < r; ++i) {\n\t\t\tauto mtpj = readInts();\n\t\t\tauto mi = mtpj[0];\n\t\t\tauto ti = mtpj[1]-1;\n\t\t\tauto pi = mtpj[2]-1;\n\t\t\tauto ji = mtpj[3];\n\t\t\tif(ji == 0) {\n\t\t\t\t++cp[ti];\n\t\t\t\tpe[ti] += mi + w[ti][pi] * 20;\n\t\t\t} else {\n\t\t\t\t++w[ti][pi];\n\t\t\t}\n\t\t}\n\t\tauto te = iota(1, t+1).array;\n\t\tbool win(Tuple!(int, int, int) a, Tuple!(int, int, int) b) {\n\t\t\treturn a[0] > b[0] || (a[0] == b[0] && a[1] < b[1]);\n\t\t}\n\t\tzip(cp, pe, te).sort!((a, b) => win(a,b) || (!win(a,b) && !win(b, a) && a[2] > b[2]));\n\t\twrite(te[0]);\n\t\tfor(int i = 1; i < t; ++i) {\n\t\t\tif(win(tuple(cp[i-1], pe[i-1], 0), tuple(cp[i], pe[i], 0))) {\n\t\t\t\twrite(\",\");\n\t\t\t} else {\n\t\t\t\twrite(\"=\");\n\t\t\t}\n\t\t\twrite(te[i]);\n\t\t}\n\t\twriteln();\n\t}\n}"
  },
  {
    "language": "D",
    "code": "import std.stdio;\nimport std.c.stdio;\nimport std.range;\nimport std.array;\nimport std.functional;\nimport std.algorithm;\nimport std.conv;\nimport std.container;\nimport std.math;\nimport std.numeric;\nimport std.string;\nimport std.c.string;\nimport std.regex;\nimport std.typecons;\n \nbool solve() {\n    int M, T, P, R; readf(\"%d %d %d %d\\n\", &M, &T, &P, &R);\n    if (M == 0 && T == 0 && P == 0 && R == 0) return false;\n    struct Team {\n        int id;\n        int ac;\n        int penalty;\n    }\n    Team[] X = new Team[T];\n    for (int i = 0; i < T; i++) X[i].id = i + 1;\n    int[][] W = new int[][](T, P); // WA Count\n    for (int i = 0; i < R; i++) {\n        int m, t, p, j; readf(\"%d %d %d %d\\n\", &m, &t, &p, &j);\n        t--; p--;\n        if (j == 0) {\n            X[t].ac++;\n            X[t].penalty += m + W[t][p] * 20;\n        } else {\n            W[t][p]++;\n        }\n    }\n    bool comp(in Team a, in Team b) {\n        if (a.ac == b.ac) {\n            if (a.penalty == b.penalty) {\n                return a.id > b.id;\n            } else {\n                return a.penalty < b.penalty;\n            }\n        } else {\n            return a.ac > b.ac;\n        }\n    }\n    X = X.sort!(comp).array;\n    printf(\"%d\", X[0].id);\n    for (int i = 1; i < T; i++) {\n        if (X[i - 1].ac == X[i].ac && X[i - 1].penalty == X[i].penalty) {\n            printf(\"=\");\n        } else {\n            printf(\",\");\n        }\n        printf(\"%d\", X[i].id);\n    }\n    printf(\"\\n\");\n    return true;\n}\n\nvoid main() {\n    while (solve()) {}\n}"
  },
  {
    "language": "D",
    "code": "import std.stdio;\nimport std.conv;\nimport std.string;\nimport std.typecons;\nimport std.algorithm;\nimport std.array;\nimport std.range;\nimport std.math;\nimport std.container;\n\nvoid main()\n{\n\twhile (1) {\n\t\tauto x = readln.chomp.split.map!(to!int);\n\t\tif (!x[0])break;\n\t\tauto score = new int[][](x[1], 3);\n\t\tauto wa = new int[][](x[1], x[2]);\n\t\tforeach (i; 0..x[3]) {\n\t\t\tauto y = readln.chomp.split.map!(to!int);\n\t\t\tif (y[3] == 0) {\n\t\t\t\tscore[y[1]-1][0]++;\n\t\t\t\tscore[y[1]-1][1] += y[0] + 20 * wa[y[1]-1][y[2]-1];\n\t\t\t} else {\n\t\t\t\twa[y[1]-1][y[2]-1]++;\n\t\t\t}\n\t\t}\n\t\tforeach (i; 0..x[1]) {\n\t\t\tscore[i][2] = i + 1;\n\t\t}\n\t\tscore = score.sort!((a,b) => a[0] == b[0] ? a[1] == b[1] ? a[2] > b[2] : a[1] < b[1] : a[0] > b[0]).array;\n\n\t\tauto pre = score[0][0..2];\n\t\twrite(score[0][2]);\n\t\tforeach (i; 1..x[1]) {\n\t\t\tif (pre == score[i][0..2]) {\n\t\t\t\twrite(\"=\");\n\t\t\t} else {\n\t\t\t\twrite(\",\");\n\t\t\t}\n\t\t\twrite(score[i][2]);\n\t\t\tpre = score[i][0..2];\n\t\t}\n\t\twriteln(\"\");\n\t}\n}"
  },
  {
    "language": "Python",
    "code": "import sys\nwhile(True):\n    M,T,P,R=map(int,input().split())\n    if (M,T,P,R)==(0,0,0,0):\n        break\n    points=[0 for i in range(T)]\n    time=[0 for i in range(T)]\n    penalty=[[0 for i in range(T)] for i in range(P)]\n    for i in range(R):\n        m,t,p,j=map(int,input().split())\n        #正解したものをもう一度出すかどうかは考慮しない\n        if j!=0:\n            penalty[p-1][t-1]+=1\n            continue\n        points[t-1]+=1\n        time[t-1]+=m+penalty[p-1][t-1]*20\n    teams=[(points[i],time[i],i+1) for i in range(T)]\n    teams.sort(key=lambda x:(-x[0],x[1],-x[2]))\n    st=str(teams[0][2])\n    for i in range(1,T):\n        if (teams[i-1][0],teams[i-1][1])==(teams[i][0],teams[i][1]):\n            st=st+\"=\"\n        else:\n            st=st+\",\"\n        st=st+str(teams[i][2])\n    print(st)\n    \n"
  },
  {
    "language": "Python",
    "code": "def islower (t_a,t_b):\n\tif t_a[1] != t_b[1]:\n\t\treturn t_a[1] < t_b[1]\n\telif t_a[2] != t_b[2]:\n\t\treturn t_a[2] > t_b[2]\n\telse :\n\t\treturn t_a[0] < t_b[0]\n\nimport sys\nwhile 1:\n\tM, T, P, R = map(int,raw_input().split())\n\tif (T,P,R) == (0,0,0):\n\t\tbreak\n\tscore = [[i,0,0] for i in xrange(1,T+1)]\n\twrong = [[0 for i in xrange(P)] for j in xrange(T)]\n\tfor x in xrange(R):\n\t\tm, t, p, j = map(int,raw_input().split())\n\t\tif j != 0 :\n\t\t\twrong[t-1][p-1] += 1\n\t\telse :\n\t\t\tscore[t-1][1] += 1\n\t\t\tscore[t-1][2] += 20 * wrong[t-1][p-1] + m\n\n\tfor j in xrange(T - 1):\n\t\tfor i in xrange(T - 1 - j):\n\t\t\tt_l = score[i]\n\t\t\tt_r = score[i+1]\n\t\t\tif islower(t_l, t_r):\n\t\t\t\tscore[i] = t_r\n\t\t\t\tscore[i+1] = t_l\n\n\tfor i in xrange(T):\n\t\tif i != 0:\n\t\t\tif (score[i-1][1], score[i-1][2]) == (score[i][1], score[i][2]):\n\t\t\t\tsys.stdout.write(\"=\")\n\t\t\telse :\n\t\t\t\tsys.stdout.write(\",\")\n\t\tsys.stdout.write(str(score[i][0]))\n\tprint \"\""
  },
  {
    "language": "Python",
    "code": "import re\n\nwhile True:\n    Time,Team,Quiz,n = map(int,input().split())\n    if Time+Team == 0:break\n    score = {}\n    accept = {}\n    ans = \"\"\n    for i in range(Team-1,-1,-1):\n        score[i] = 0\n        accept[i] = 0\n    miss = [[0 for _ in range(Quiz)] for _ in range(Team)]\n    for _ in range(n):\n        h,t,q,j = map(int,input().split())\n        if j == 0:\n           accept[t-1] += 1\n           score[t-1] += (h + miss[t-1][q-1])\n        else:\n            miss[t-1][q-1] += 20\n    for i in range(max(accept.values()),-1,-1):\n        stack = {}\n        for t,sc in accept.items():\n            if sc == i:\n                stack[t] = score[t]\n        stack = sorted(stack.items(), key=lambda x:x[1])\n        for i,a in enumerate(stack):\n            if ans != \"\":\n                if i == 0 or a[1] != stack[i-1][1]:\n                    ans += \",\" + str(a[0]+1)\n                else:\n                    ans += \"=\" + str(a[0]+1)\n            else:\n                ans += str(a[0]+1)\n    print(ans)\n"
  },
  {
    "language": "Python",
    "code": "#! /usr/bin/env python\n# -*- coding: utf-8 -*-\n\nimport os\nimport sys\nimport itertools\nimport math\nfrom collections import Counter, defaultdict\n\nclass Main(object):\n    \n    def __init__(self):\n        pass\n\n    def solve(self):\n        '''\n        insert your code\n        '''\n        while True:\n            M, T, P, R = map(int, raw_input().split())\n            if (M, T, P, R) == (0, 0, 0, 0):\n                break\n            record = [[[], [], 0, i] for i in range(T+1)]\n            for i in range(R):\n                m, t, p, j = map(int, raw_input().split())\n                if j == 0:\n                    record[t][0].append(p)\n                    record[t][2] += m + 20 * record[t][1].count(p)\n                else:\n                    record[t][1].append(p)\n            record = [(len(correct), time, team) for correct, wrong, time, team in record[1:]]\n            record.sort(key=lambda x: (x[0], -x[1], x[2]), reverse=True)\n            ans = str(record[0][2])\n            prev = (record[0][0], record[0][1])\n\n            for elem in record[1:]:\n                if (elem[0], elem[1]) == prev:\n                    ans += '='\n                else:\n                    ans += ','\n                ans += str(elem[2])\n                prev = (elem[0], elem[1])\n            print ans\n        return None\n\nif __name__ == '__main__':\n    m = Main()\n    m.solve()"
  },
  {
    "language": "Python",
    "code": "while 1:\n    M,T,P,R=map(int,input().split())\n    if not M and not T and not P and not R:break\n    d={i:[0,0] for i in range(1,T+1)}\n    wa=[[0 for _ in range(P)] for _ in range(T)]\n    for _ in range(R):\n        m,t,p,j=map(int,input().split())\n        if j:\n            wa[t-1][p-1]+=20\n        else:\n            d[t][0]+=1\n            d[t][1]+=(m+wa[t-1][p-1]) \n    rank=sorted(d.items(),key=lambda x:(x[1][0],-x[1][1]),reverse=True)        \n    f=lambda x:\"=\".join(sorted(x,key=lambda y:int(y),reverse=True))\n    l=[]\n    b=[]\n    for (i,j) in enumerate(rank):\n        if i>0 and rank[i][1]!=rank[i-1][1]:\n            l.append(f(b))\n            b=[]\n        b.append(str(j[0]))\n    if b:l.append(f(b))\n    print \",\".join(l)\n\n"
  },
  {
    "language": "Python",
    "code": "from inspect import currentframe\n\n\ndef debug_print(s):\n    # print(s)\n    return\n\n\ndef debug_key(*args):\n    names = {id(v): k for k, v in currentframe().f_back.f_locals.items()}\n    debug_print(', '.join(names.get(id(arg), '???')+' = '+repr(arg) for arg in args))\n\n\ndef solve(M, T, P, R, m, t, p, j):\n    debug_print(\"\\n-----solve-----\")\n    AC_COUNT = 0\n    TEAM_NUMBER = 2\n    SUM_TIME = 1\n    QUE_NUMBER = 3\n\n\n    record = [[0, 0, i + 1] + [0] * P for i in range(T)]\n    debug_print(record)\n\n    for i in range(R):\n        if j[i] == 0:\n            record[t[i] - 1][AC_COUNT] += 1\n            record[t[i] - 1][SUM_TIME] -= m[i] + record[t[i] - 1][QUE_NUMBER + p[i] - 1] * 20\n        else:\n            record[t[i] - 1][QUE_NUMBER + p[i] - 1] += 1\n\n    record.sort()\n    record.reverse()\n    debug_print(record)\n\n    ans = str(record[0][TEAM_NUMBER])\n\n    for i in range(1, T):\n        if record[i][SUM_TIME] == record[i-1][SUM_TIME] and record[i][AC_COUNT] == record[i-1][AC_COUNT]:\n            ans += \"=\" + str(record[i][TEAM_NUMBER])\n        else:\n            ans += \",\" + str(record[i][TEAM_NUMBER])\n\n    print(ans)\n\n\n    return\n\n\nif __name__ == '__main__':\n\n    while True:\n        M_input, T_imput, P_imput, R_imput = map(int, input().split())\n        if M_input == T_imput == P_imput == R_imput == 0:\n            break\n        m_input = [0 for _ in range(R_imput)]\n        t_input = [0 for _ in range(R_imput)]\n        p_input = [0 for _ in range(R_imput)]\n        j_input = [0 for _ in range(R_imput)]\n\n        for i in range(R_imput):\n            m_input[i], t_input[i], p_input[i], j_input[i] = map(int, input().split())\n\n        solve(M_input, T_imput, P_imput, R_imput, m_input, t_input, p_input, j_input)\n\n\n"
  },
  {
    "language": "Python",
    "code": "from collections import defaultdict\n\nwhile True:\n  time = [ [0 for _ in range(16)] for __ in range(64) ]\n  accepted = [ [0 for _ in range(16)] for __ in range(64) ]\n\n  M,T,P,R = map(int, input().split())\n  if M==0 and T==0: break\n\n  for i in range(R):\n    m,t,p,j = map(int, input().split())\n    if j==0:\n      accepted[t][p] = 1\n      time[t][p] = time[t][p] + m\n    else:\n      time[t][p] += 20\n\n  score = defaultdict(int)\n  for t in range(1,T+1):\n    for p in range(1,P+1):\n      score[t] +=  accepted[t][p] * 1<<16\n      if accepted[t][p]:\n        score[t] -= time[t][p]\n\n  mp = defaultdict(list)\n  prev = -1\n  for k,v in score.items():\n    mp[v].append(k)\n\n  output = \"\"\n  for sc,ts in sorted(mp.items(), key=lambda x: x[0], reverse=True):\n    output += '='.join(map(str, sorted(ts, reverse=True)))\n    output += ','\n  else:\n    print(output[:-1])"
  },
  {
    "language": "Python",
    "code": "while True:\n    m, t, p, r = map(int, input().split())\n    if m == t == p == r == 0:\n        break\n\n    score = [[-1 for i in range(p + 1)] for j in range(t + 1)]\n    for i in range(r):\n        mi, ti, pi, j = map(int, input().split())\n        if not j:\n            score[ti][pi] = mi - (score[ti][pi] + 1) * 20\n        else:\n            score[ti][pi] -= 1\n\n    data = list()\n    for ti in range(1, t + 1):\n        ans = 0\n        pen = 0\n        for pi in range(1, p + 1):\n            if score[ti][pi] >= 0:\n                ans += 1\n                pen += score[ti][pi]\n        data.append((ans, -pen, ti))\n\n    data.sort(reverse = True)\n    for i in range(t - 1):\n        ans, pen, ti = data[i]\n        pen = -pen\n        print(ti, end = \"\")\n        if ans > data[i + 1][0] or pen < - data[i + 1][1]:\n            print(\",\", end = \"\")\n        else:\n            print(\"=\", end = \"\")\n    print(data[t - 1][2])\n"
  },
  {
    "language": "Python",
    "code": "# -*- coding: utf-8 -*-\n\"\"\"\nhttp://judge.u-aizu.ac.jp/onlinejudge/description.jsp?id=1187&lang=jp\n\n\"\"\"\nimport sys\nfrom sys import stdin\ninput = stdin.readline\n\n\nclass Team(object):\n    def __init__(self, id):\n        self.id = id\n        self.correct = 0        #  ??£?§£??°\n        self.time = 0           #  ????????????\n        self.penalty = 0        #  ??????????????£\n        self.status = {}        #  ?????£?§£?????¶??? key: ????????????, value: ????????£????????°\n\n    def judge(self, m, p, j):\n        if j == 0:\n            self.correct += 1\n            self.time += m\n            if p in self.status:\n                self.penalty += 20 * self.status[p]\n                del self.status[p]\n        else:\n            if p in self.status:\n                self.status[p] += 1\n            else:\n                self.status[p] = 1\n\n\ndef calc_result(scores):\n    # ???????????????????????¢????????§?????????????????£?§£??°?????????????????????????????????????????§???????????????????????????l\n    result = []                 #  ??????????????¨??????[??£?§£??°*(-1), ????????????, ???????????????*(-1)] ??????????????§?¨??????????\n    for i, s in enumerate(scores[1:], start=1):\n        if s is not None:\n            result.append([-s.correct, s.time+s.penalty, s.id*-1]) #  sort()??????????????????????????£????????????????????????????????£?§£??°??¨??????????????????-1???????????????\n        else:\n            result.append([0, 0, -i])\n    result.sort()\n    return result\n\n\ndef main(args):\n    # M, T, P, R = 300, 10, 8, 5,\n    # data = [[50, 5, 2, 1,], [70, 5, 2, 0], [75, 1, 1, 0], [100, 3, 1, 0], [150, 3, 2, 0]]\n\n    while True:\n        M, T, P, R = map(int, input().split())\n        if M == 0 and T == 0 and P == 0 and R == 0:\n            break\n        data = [[int(i) for i in input().split()]  for x in range(R)]\n\n        scores = [None] * (T+1)\n        for d in data:\n            m, t, p, j = d\n            if scores[t] == None:\n                team = Team(t)\n                scores[t] = team\n            scores[t].judge(m, p, j)\n\n        # ???????????????\n        result = calc_result(scores)\n\n        # ?????????????????????????????????\n        prev_corrent = result[0][0]\n        prev_time = result[0][1]\n        final_output = str(result[0][2]*-1)\n        for r in result[1:]:\n            if r[0] == prev_corrent and r[1] == prev_time:\n                final_output += '='\n                final_output += str(r[2]*-1)\n            else:\n                final_output += ','\n                final_output += str(r[2]*-1)\n                prev_corrent = r[0]\n                prev_time = r[1]\n        print(final_output)\n\n\nif __name__ == '__main__':\n    main(sys.argv[1:])"
  },
  {
    "language": "Python",
    "code": "\"ICPCの順位づけ\"\nwhile True:\n    M, T, P, R = map(int, input().split())\n    if M == 0:\n        break\n    submits = []  # ログを管理する配列\n    for i in range(R):\n        submits.append(list(map(int, input().split())))\n\n    team_scores = {}\n    for i in range(1, T+1):\n        team_scores[i] = [0, 0]  # 正解数, 時間の合計\n\n    for i in range(R):\n        if submits[i][3] == 0:\n            add_time = 0\n            for j in range(0, i):\n                if submits[j][1] == submits[i][1] and submits[j][2] == submits[i][2]:\n                    add_time += 20\n            team_scores[submits[i][1]][0] += 1\n            team_scores[submits[i][1]][1] += (submits[i][0] + add_time)\n\n    team_scores = sorted(team_scores.items(), key=lambda x: (x[1][0], -x[1][1], x[0]), reverse=True)\n\n    ans = ''\n    for i in range(len(team_scores)):\n        if i == 0:\n            ans += str(team_scores[i][0])\n        else:\n            if team_scores[i][1] == team_scores[i-1][1]:\n                ans += '='+str(team_scores[i][0])\n            else:\n                ans += ','+str(team_scores[i][0])\n\n    print(ans)\n\n"
  },
  {
    "language": "Python",
    "code": "def main():\n    while True:\n        # minute,team,problem,record\n        M,T,P,R = map(int, input().split(\" \"))\n        if M == 0: break\n\n        # [チーム1→[問題1,問題2...],チーム2→[...]...]\n        data = [[0 for i in range(P)] for j in range(T)]\n        # [正答数,所要合計時間]\n        res = [[0, 0] for j in range(T)]\n        for item in range(T):\n            res[item].insert(0, item + 1)\n        \n        for i in range(R):\n            # minute,team,problem,judge\n            m,t,p,j = map(int, input().split(\" \"))\n\n            # 0秒での正解を見分けるための端数1\n            if j == 0: data[t - 1][p - 1] = -(data[t - 1][p - 1]) * 20 + m + 1\n            else: data[t - 1][p - 1] -= 1\n            \n        for i in range(len(data)):\n            for item in data[i]:\n                if item < 0: continue\n                if item != 0:\n                    res[i][1] += 1\n                    res[i][2] -= (item - 1)\n\n        res = sorted(res, key = lambda x:(x[1], x[2], x[0]), reverse = True)\n        \n        output(res)\n\ndef output(listt):\n    print(str(listt[0][0]), end = \"\")\n    for i in range(1, len(listt)):\n        if listt[i][1] == listt[i - 1][1] and listt[i][2] == listt[i - 1][2]:\n            print(\"=\" + str(listt[i][0]), end = \"\")\n        else: print(\",\" + str(listt[i][0]), end = \"\")\n    print(\"\")\nmain()\n\n"
  },
  {
    "language": "Python",
    "code": "import sys\ninput = sys.stdin.readline\n\ndef main():\n    while True:\n        M, T, P, R = map(int, input().split())\n        if M == 0:\n            break\n        results = [[i,0,0] for i in range(T)]\n        if R > 0:\n            logs = [list(map(int, input().split())) for i in range(R)]\n            logs = sorted(logs, key=lambda x:(x[1], x[2], x[0]))\n            penalty = 0\n            problem = logs[0][2]\n            team = logs[0][1] - 1\n            penalty = 0\n            i = 0\n            while i < len(logs):\n                m, t, p, j = logs[i]\n                t -= 1\n                if team == t:\n                    if problem == p:\n                        if j != 0:\n                            penalty += 1\n                        else:\n                            results[team][1] += 1\n                            results[team][2] += m + penalty*20\n                        i += 1\n                    else:\n                        penalty = 0\n                        problem = p\n                else:\n                    team = t\n                    penalty = 0\n                    problem = p\n        results = sorted(results, key=lambda x:(-x[1], x[2], -x[0]))\n        print(results[0][0]+1, end=\"\")\n        for i in range(1, T):\n            if results[i][1] == results[i-1][1] and results[i][2] == results[i-1][2]:\n                print(\"=\",end=\"\")\n            else:\n                print(\",\",end=\"\")\n            print(results[i][0]+1,end=\"\")\n        print()\n\n\n\n\nif __name__ == \"__main__\":\n    main()\n\n"
  },
  {
    "language": "Python",
    "code": "import math,string,itertools,fractions,heapq,collections,re,array,bisect,sys,random,time,copy,functools\n\nsys.setrecursionlimit(10**7)\ninf = 10**20\neps = 1.0 / 10**10\nmod = 998244353\n\ndef LI(): return [int(x) for x in sys.stdin.readline().split()]\ndef LI_(): return [int(x)-1 for x in sys.stdin.readline().split()]\ndef LF(): return [float(x) for x in sys.stdin.readline().split()]\ndef LS(): return sys.stdin.readline().split()\ndef I(): return int(sys.stdin.readline())\ndef F(): return float(sys.stdin.readline())\ndef S(): return input()\ndef pf(s): return print(s, flush=True)\n\n\ndef main():\n    rr = []\n\n    while True:\n        M,T,P,R = LI()\n        if M == 0 and T == 0 and P == 0 and R == 0:\n            break\n        a = [LI() for _ in range(R)]\n        d = collections.defaultdict(int)\n        tt = [[0,0,i] for i in range(1,T+1)]\n        for m,t,p,j in a:\n            if j != 0:\n                d[(t,p)] += 1\n                continue\n            tt[t-1][0] += 1\n            tt[t-1][1] += m + d[(t,p)] * 20\n        tt.sort(key=lambda x: [-x[0],x[1],-x[2]])\n        r = str(tt[0][2])\n        c = (tt[0][0],tt[0][1])\n        for p,m,t in tt[1:]:\n            if c == (p,m):\n                r += '='\n            else:\n                r += ','\n            r += str(t)\n            c = (p,m)\n        rr.append(r)\n\n    return '\\n'.join(map(str, rr))\n\n\nprint(main())\n\n\n"
  },
  {
    "language": "Python",
    "code": "# coding: utf-8\nwhile 1:\n    m,t,p,r=map(int,input().split())\n    if m==0:\n        break\n    teamdata=[[0,0,i+1,set()] for i in range(t)]\n    data=[]\n    for i in range(r):\n        a,b,c,d=map(int,input().split())\n        if d==0:\n            teamdata[b-1][0]+=1\n            teamdata[b-1][1]+=a\n            teamdata[b-1][3].add(c)\n        data.append([a,b,c,d])\n    for a,b,c,d in data:\n        if d!=0 and (c in teamdata[b-1][3]):\n            teamdata[b-1][1]+=20\n    teamdata=sorted(teamdata, key=lambda x:(-x[0],x[1],-x[2]))\n    for i in range(t):\n        print(teamdata[i][2],end=('\\n' if i==t-1 else ',' if teamdata[i][0]>teamdata[i+1][0] or teamdata[i][1]<teamdata[i+1][1] else '='))\n\n"
  },
  {
    "language": "Python",
    "code": "# -*- coding: utf-8 -*-\n\"\"\"\nhttp://judge.u-aizu.ac.jp/onlinejudge/description.jsp?id=1187&lang=jp\n\n\"\"\"\nimport sys\nfrom sys import stdin\ninput = stdin.readline\n\n\nclass Team(object):\n    def __init__(self, id):\n        self.id = id\n        self.correct = 0        #  ??£?§£??°\n        self.time = 0           #  ????????????\n        self.penalty = 0        #  ??????????????£\n        self.status = {}        #  ?????£?§£?????¶??? key: ????????????, value: ????????£????????°\n\n    def judge(self, m, p, j):\n        if self.id == 30:\n            print('hoge')\n        if j == 0:\n            self.correct += 1\n            self.time += m\n            if p in self.status:\n                self.penalty += 20 * self.status[p]\n                del self.status[p]\n        else:\n            if p in self.status:\n                self.status[p] += 1\n            else:\n                self.status[p] = 1\n\n\ndef calc_result(scores):\n    # ???????????????????????¢????????§?????????????????£?§£??°?????????????????????????????????????????§???????????????????????????l\n    result = []                 #  ??????????????¨??????[??£?§£??°*(-1), ????????????, ???????????????*(-1)] ??????????????§?¨??????????\n    for i, s in enumerate(scores[1:], start=1):\n        if s is not None:\n            result.append([-s.correct, s.time+s.penalty, s.id*-1]) #  sort()??????????????????????????£????????????????????????????????£?§£??°??¨??????????????????-1???????????????\n        else:\n            result.append([0, 0, -i])\n    result.sort()\n    return result\n\n\ndef main(args):\n    # M, T, P, R = 300, 10, 8, 5,\n    # data = [[50, 5, 2, 1,], [70, 5, 2, 0], [75, 1, 1, 0], [100, 3, 1, 0], [150, 3, 2, 0]]\n\n    while True:\n        M, T, P, R = map(int, input().split())\n        if M == 0 and T == 0 and P == 0 and R == 0:\n            break\n        data = [[int(i) for i in input().split()]  for x in range(R)]\n\n        scores = [None] * (T+1)\n        for d in data:\n            m, t, p, j = d\n            if scores[t] == None:\n                team = Team(t)\n                scores[t] = team\n            scores[t].judge(m, p, j)\n\n        # ???????????????\n        result = calc_result(scores)\n\n        # ?????????????????????????????????\n        prev_corrent = result[0][0]\n        prev_time = result[0][1]\n        final_output = str(result[0][2]*-1)\n        for r in result[1:]:\n            if r[0] == prev_corrent and r[1] == prev_time:\n                final_output += '='\n                final_output += str(r[2]*-1)\n            else:\n                final_output += ','\n                final_output += str(r[2]*-1)\n                prev_corrent = r[0]\n                prev_time = r[1]\n        print(final_output)\n\n\nif __name__ == '__main__':\n    main(sys.argv[1:])"
  },
  {
    "language": "Python",
    "code": "# -*- coding: utf-8 -*-\n\"\"\"\nhttp://judge.u-aizu.ac.jp/onlinejudge/description.jsp?id=1187&lang=jp\n\n\"\"\"\nimport sys\nfrom sys import stdin\ninput = stdin.readline\n\n\nclass Team(object):\n    def __init__(self, id):\n        self.id = id\n        self.correct = 0        #  ??£?§£??°\n        self.time = 0           #  ????????????\n        self.penalty = 0        #  ??????????????£\n        self.status = {}        #  ?????£?§£?????¶??? key: ????????????, value: ????????£????????°\n\n    def judge(self, m, p, j):\n        if j == 0:\n            self.correct += 1\n            self.time = m\n            if p in self.status:\n                self.penalty += 20 * self.status[p]\n                del self.status[p]\n        else:\n            if p in self.status:\n                self.status[p] += 1\n            else:\n                self.status[p] = 1\n\n\ndef calc_result(scores):\n    # ???????????????????????¢????????§?????????????????£?§£??°?????????????????????????????????????????§???????????????????????????l\n    result = []                 #  ??????????????¨??????[??£?§£??°*(-1), ????????????, ???????????????*(-1)] ??????????????§?¨?????????? \n    for i, s in enumerate(scores[1:], start=1):\n        if s is not None:\n            result.append([-s.correct, s.time+s.penalty, s.id*-1]) #  sort()??????????????????????????£????????????????????????????????£?§£??°??¨??????????????????-1???????????????\n        else:\n            result.append([0, 0, -i])\n    result.sort()\n    return result\n\n\ndef main(args):\n    # M, T, P, R = 300, 10, 8, 5,\n    # data = [[50, 5, 2, 1,], [70, 5, 2, 0], [75, 1, 1, 0], [100, 3, 1, 0], [150, 3, 2, 0]]\n\n    while True:\n        M, T, P, R = map(int, input().split())\n        if M == 0 and T == 0 and P == 0 and R == 0:\n            break\n        data = [[int(i) for i in input().split()]  for x in range(R)]\n\n        scores = [None] * (T+1)\n        for d in data:\n            m, t, p, j = d\n            if scores[t] == None:\n                team = Team(t)\n                scores[t] = team\n            scores[t].judge(m, p, j)\n\n        # ???????????????\n        result = calc_result(scores)\n\n        # ?????????????????????????????????\n        prev_corrent = result[0][0]\n        prev_time = result[0][1]\n        final_output = str(result[0][2]*-1)\n        for r in result[1:]:\n            if r[0] == prev_corrent and r[1] == prev_time:\n                final_output += '='\n                final_output += str(r[2]*-1)\n            else:\n                final_output += ','\n                final_output += str(r[2]*-1)\n                prev_corrent = r[0]\n                prev_time = r[1]\n        print(final_output)\n\n\nif __name__ == '__main__':\n    main(sys.argv[1:])"
  },
  {
    "language": "Python",
    "code": "ans_list = []\n\nwhile True:\n    m, t, p, r = map(int, input().split())\n    if m == 0 and t == 0 and r == 0 and p == 0:\n        break\n\n    team = [[[0, 1] for i in range(p)] for j in range(t)]\n\n    for i in range(r):\n        M, T, P, J = map(int, input().split())\n        if J:\n            team[T - 1][P - 1][0] += 20\n        else:\n            team[T - 1][P - 1][0] += M\n        team[T - 1][P - 1][1] = J\n    #    print(1, M, T, P, J)\n\n    team_point = []\n    for i in range(t):\n        point = [0, 0, i]\n        for j in range(p):\n            if team[i][j][1] == 0:\n                point[0] += 1\n                point[1] += team[i][j][0]\n        point[1] *= -1\n        team_point.append(point)\n\n    team_point.sort()\n    team_point = team_point[::-1]\n    ans = []\n    same_point = [str(team_point[0][2] + 1)]\n    for i in range(1, len(team_point)):\n        if team_point[i][0] == team_point[i - 1][0]:\n            if team_point[i][1] == team_point[i - 1][1]:\n                same_point = [same_point[0] + \"=\" + str(team_point[i][2] + 1)]\n            else:\n                ans.append(same_point)\n                same_point = [str(team_point[i][2] + 1)]\n        else:\n            ans.append(same_point)\n            same_point = [str(team_point[i][2] + 1)]\n\n    ans.append(same_point)\n    ans_list.append(ans)\n  #  print(team_point)\n#    print(ans)\n #   print(team_point)\n\n#print(ans_list)\nfor I in range(len(ans_list)):\n    i = ans_list[I]\n    for j in range(len(i)):\n        print(i[j][0], end = \"\")\n        if j != len(i) - 1:\n            print(\",\", end = \"\")\n    print()\n\n"
  },
  {
    "language": "Python",
    "code": "from collections import defaultdict\n\n\nclass Team:\n    def __init__(self, num):\n        self.num = num\n        self.score = 0\n        self.time = 0\n        self.penalty = defaultdict(int)\n\n\nwhile True:\n    _, T, _, R = map(int, input().split())\n    if T == 0:break\n    teams = [Team(i + 1) for i in range(T)]\n    for _ in range(R):\n        m, t, p, j = map(int, input().split())\n        if j != 0:\n            teams[t - 1].penalty[p] += 20\n        if j == 0:\n            teams[t - 1].score += 1\n            teams[t - 1].time += m + teams[t - 1].penalty[p]\n\n    teams.sort(key=lambda team: (-team.score, team.time, -team.num))\n    ans = str(teams[0].num)\n    pre_score = teams[0].score\n    pre_time = teams[0].time\n    for i in range(1, T):\n        team = teams[i]\n        ans += \"=\" if team.score == pre_score and team.time == pre_time else \",\"\n        ans += str(team.num)\n        pre_score = team.score\n        pre_time = team.time\n    print(ans)\n\n\n"
  },
  {
    "language": "Python",
    "code": "class Team:\n    def __init__(self, num, P):\n        self.num = num\n        self.times = [ 0 for _ in range(P) ]\n        self.solved = [ False for _ in range(P) ]\n        self.ps = None\n        self.tt = None\n    \n    def submit(self, m, p, j):\n        if j == 0:\n            self.solved[p] = True\n            self.times[p] += m\n        else:\n            self.times[p] += 20\n    \n    def probsSolved(self):\n        if self.ps == None:\n            self.ps = len(list(filter(lambda x: x, self.solved)))\n        return self.ps\n\n    def totalTime(self):\n        if self.tt == None:\n            total = 0\n            for i in range(len(self.solved)):\n                if self.solved[i]:\n                    total += self.times[i]\n            self.tt = total\n        return self.tt\n\nif __name__ == '__main__':\n    while True:\n        M, T, P, R = [ int(x) for x in list(filter(lambda x: x != '', \\\n            input().strip().split(' '))) ]\n\n        if M == 0 and T == 0 and P == 0 and R == 0:\n            break\n\n        teams = [ Team(n + 1, P) for n in range(T) ]\n\n        for _ in range(R):\n            m, t, p, j = [ int(x) for x in list(filter(lambda x: x != '', \\\n                input().strip().split(' '))) ]\n            teams[t-1].submit(m, p - 1, j)\n\n        teams.sort(key=lambda t: (-t.probsSolved(), t.totalTime(), -t.num))\n\n        print(teams[0].num, end='')\n        for i in range(1, T):\n            team = teams[i]\n            prevTeam = teams[i - 1]\n            if team.probsSolved() == prevTeam.probsSolved() and \\\n                team.totalTime() == prevTeam.totalTime():\n                print(\"={}\".format(team.num), end='')\n            else:\n                print(\",{}\".format(team.num), end='')\n        print()\n"
  },
  {
    "language": "Python",
    "code": "from functools import cmp_to_key\n\ndef f(a, b):\n    if a[0] == b[0]:\n        ap = a[1] + a[2] * 20\n        bp = b[1] + b[2] * 20\n        if ap == bp:\n            return a[3] > b[3]\n        return ap < bp\n    return a[0] > b[0]\n\n\nwhile True:\n    M, T, P, R = map(int, input().split())\n    if not M:\n        break\n    fail = [[0 for i in range(P)] for j in range(T)]\n    # [-solved, time, -team]\n    res = [[0, 0, -i] for i in range(T)]\n    \n    for r in range(R):\n        m, t, p, j = map(int, input().split())\n        t -= 1\n        p -= 1\n        if j:\n            fail[t][p] += 1\n        else:\n            res[t][0] -= 1\n            res[t][1] += fail[t][p] * 20 + m\n    res = sorted(res)\n    for i, r in enumerate(res[:-1]):\n        if r[0] == res[i + 1][0] and r[1] == res[i + 1][1]:\n            print(-r[2] + 1, end='=')\n        else:\n            print(-r[2] + 1, end=',')\n    print(-res[-1][2] + 1)"
  },
  {
    "language": "Python",
    "code": "while True:\n    M, T, P, R = map(int, input().split())\n    if M == 0 and T == 0 and P == 0 and R == 0:\n        break\n    teams = [[0, 0, [0 for _ in range(P)], i+1] for i in range(T)]\n    solved, time, miss = 0, 1, 2\n    logs = [map(int, input().split()) for _ in range(R)]\n    for m, t, p, r in logs:\n        t -= 1\n        p -= 1\n        if r == 0:\n            teams[t][solved] += 1\n            teams[t][time] -= (m + teams[t][miss][p] * 20)\n        else:\n            teams[t][miss][p] += 1\n    teams = sorted(teams, reverse=True)\n    before_s, before_t = 0, 0\n    for i in range(T):\n        s, t, _, n = teams[i]\n        if i != 0:\n            print('=' if (s == before_s and t == before_t) else ',', end='')\n        before_s, before_t = s, t\n        print(n, end='')\n    print('')"
  },
  {
    "language": "Python",
    "code": "while True:\n    M, T, P, R = map(int, input().split())\n    if M == 0: break\n    teams = [[0, 0, i+1] for i in range(T)]\n    miss = [[0 for _ in range(P)] for _ in range(T)]\n    solved, time = 0, 1\n    logs = [map(int, input().split()) for _ in range(R)]\n    for m, t, p, r in logs:\n        t -= 1\n        p -= 1\n        if r == 0:\n            teams[t][solved] += 1\n            teams[t][time] -= (m + miss[t][p] * 20)\n        else:\n            miss[t][p] += 1\n    teams = sorted(teams, reverse=True)\n    before_s, before_t = 0, 0\n    for i in range(T):\n        s, t, n = teams[i]\n        if i != 0:\n            print('=' if (s == before_s and t == before_t) else ',', end='')\n        before_s, before_t = s, t\n        print(n, end='')\n    print('')"
  },
  {
    "language": "Python",
    "code": "def juni(tp):\n    s = str(tp[0][0])\n    for i in range(1, len(tp)):\n        if tp[i - 1][1] == tp[i][1] and tp[i - 1][2] == tp[i][2]:\n            s += \"=\" + str(tp[i][0])\n        else:\n            s += \",\" + str(tp[i][0])\n    return s\n\nwhile True:\n    m, t, p, r = map(int, input().split())\n    if m == 0:\n        break\n    tp = [[i, 0, 0, 0, [0 for j in range(p + 1)]] for i in range(t + 1)]\n    for i in range(r):\n        time, team, problem, hantei = map(int, input().split())\n        if hantei > 0:\n            tp[team][4][problem] += 1\n        else:\n            tp[team][1] += 1\n            tp[team][2] += time\n            tp[team][3] += tp[team][4][problem]\n    tp.pop(0)\n    for i in tp:\n        i[2] += i[3] * 20\n    tp.sort(reverse = True)\n    tp.sort(key = lambda x:x[2])\n    tp.sort(key = lambda x:x[1], reverse = True)\n    print(juni(tp))\n"
  },
  {
    "language": "Python",
    "code": "while True:\n    M,T,P,R=map(int,raw_input().split())\n    if M==T==P==R==0:break\n    PB=[[False]*P for i in range(T+1)]\n    PN=[[0]*P for i in range(T+1)]\n    TM=[M]*(T+1)\n    for i in range(R):\n        m,t,p,r=map(int,raw_input().split())\n        if r==0:\n            PB[t][p-1]=True\n            TM[t]=m\n        else:\n            PN[t][p-1]+=1\n    for i in range(1,T+1):\n        for j in range(P):\n            if PB[i][j]:\n                TM[i]+=PN[i][j]*20\n    solved=[sum(i) for i in PB]\n    ans=[]\n    for i in range(1,T+1):\n        ans.append((-solved[i],TM[i],i))\n    import operator\n    ans=ans[::-1]\n    ans.sort(key=operator.itemgetter(1))\n    ans.sort(key=operator.itemgetter(0))\n    s=str(ans[0][2])\n    for i in range(1,T):\n        if (ans[i][0]!=ans[i-1][0]) or (ans[i][1]!=ans[i-1][1]):\n            s+=\",\"+str(ans[i][2])\n            continue\n        s+=\"=\"+str(ans[i][2])\n    print s"
  },
  {
    "language": "Python",
    "code": "while True:\n    M, T, P, R = map(int, input().split())\n    if M == T == P == R == 0:\n        quit()\n    a_list = [[0, 0, i] for i in range(T)]\n    wa = [[0 for j in range(P)] for i in range(T)]\n    for i in range(R):\n        m, t, p, j = map(int, input().split())\n        t -= 1\n        p -= 1\n        if j == 0:\n            a_list[t][0] += m + wa[t][p]*20\n            a_list[t][1] += 1\n        else:\n            wa[t][p] += 1\n    a_list.sort(key=lambda x: x[2], reverse=True)\n    a_list.sort(key=lambda x: x[0])\n    a_list.sort(key=lambda x: x[1], reverse=True)\n    temp = [-1, -1]\n    ans = ''\n    for i in range(len(a_list)-1):\n        ans += str(a_list[i][2]+1)\n        if a_list[i][0] == a_list[i+1][0] and a_list[i][1] == a_list[i+1][1]:\n            ans += '='\n        else:\n            ans += ','\n    ans += str(a_list[-1][2]+1)\n    print(ans)\n"
  },
  {
    "language": "Python",
    "code": "while True:\n    M,T,P,R = map(int,input().split())\n    if T == 0: break\n    wrong = [[0 for i in range(P)] for j in range(T)]\n    right = [0 for i in range(T)]\n    pena = [0 for i in range(T)]\n    for i in range(R):\n        m,t,p,j = map(int,input().split())\n        t,p = t-1,p-1\n        if j == 0:\n            right[t] += 1\n            pena[t] += wrong[t][p] * 20 + m\n        else:\n            wrong[t][p] += 1\n    result = []\n    for t in range(T):\n        result.append((-right[t], pena[t], -(t+1)))\n    result.sort()\n    ans = str(-result[0][2])\n    for (r1,p1,t1),(r2,p2,t2) in zip(result, result[1:]):\n        if r1 == r2 and p1 == p2:\n            ans += '='\n        else:\n            ans += ','\n        ans += str(-t2)\n    print(ans)"
  },
  {
    "language": "Python",
    "code": "import sys\n\ninput = sys.stdin.readline\n\nfor e in iter(input, '0 0 0 0\\n'):\n    M, T, P, R = map(int, e.split())\n\n    result = [[0, M, i] + [0] * P for i in range(T + 1)]\n\n    for _ in range(R):\n        m, t, p, j = map(int, input().split())\n        team_data = result[t]\n        if j:\n            team_data[-p] += 1\n        else:\n            team_data[0] += 1\n            team_data[1] -= m + 20 * team_data[-p]\n\n    result.sort(reverse=True)\n    result.pop()\n\n    for td1, td2 in zip(result[:-1], result[1:]):\n        if td1[0] == td2[0] and td1[1] == td2[1]:\n            print(td1[2], end='=')\n        else:\n            print(td1[2], end=',')\n    print(result[-1][2])\n"
  },
  {
    "language": "Python",
    "code": "#!/usr/bin/env python\n# -*- coding: utf-8 -*-\n\nwhile True:\n    M,T,P,R = map(int,input().split(\" \"))\n    if M == 0 and T == 0 and P == 0 and R == 0:\n        break\n    #no, correct, wrong, time\n    teams = [[j,0,[0 for i in range(P+1)],0] for j in range(T+1)]\n\n    for i in range(R):\n        m,t,p,j = map(int,input().split(\" \"))\n        if j == 0:\n            if teams[t][2][p] != -1:\n                teams[t][1] += 1\n                teams[t][3] += teams[t][2][p] * 20 + m\n                teams[t][2][p] = -1\n        else:\n            teams[t][2][p] += 1\n    prev = None\n    for t in sorted(teams[1:],key=lambda t:(t[1],-t[3],t[0]),reverse=True):\n        if prev is not None:\n            if prev[1] == t[1] and prev[3] == t[3]:\n                print('=',end=\"\")\n            else:\n                print(',',end=\"\")\n        print(t[0],end=\"\")\n        prev = t\n    print()"
  },
  {
    "language": "Python",
    "code": "while 1:\n    M,T,P,R=map(int,input().split())\n    if not M and not T and not P and not R:break\n    d={i:[0,0] for i in range(1,T+1)}\n    wa=[[0 for _ in range(P)] for _ in range(T)]\n    for _ in range(R):\n        m,t,p,j=map(int,input().split())\n        if j:\n            wa[t-1][p-1]+=20\n        else:\n            d[t][0]+=1\n            d[t][1]+=(m+wa[t-1][p-1]) \n    rank=sorted(d.items(),key=lambda x:(x[1][0],-x[1][1]),reverse=True)        \n    f=lambda x:\"=\".join(sorted(x,key=lambda y:int(y),reverse=True))\n    l=[]\n    b=[]\n    for (i,j) in enumerate(rank):\n        if i>0 and rank[i][1]!=rank[i-1][1]:\n            l.append(f(b))\n            b=[]\n        b.append(str(j[0]))\n    if b:l.append(f(b))\n    print(\",\".join(l))\n\n"
  },
  {
    "language": "Python",
    "code": "while True:\n    M,T,P,R=map(int,raw_input().split())\n    if M==T==P==R==0:break\n    PB=[[False]*P for i in range(T+1)]\n    PN=[[0]*P for i in range(T+1)]\n    TM=[M]*(T+1)\n    for i in range(R):\n        m,t,p,r=map(int,raw_input().split())\n        if r==0:\n            PB[t][p-1]=True\n            TM[t]+=m\n        else:\n            PN[t][p-1]+=1\n    for i in range(1,T+1):\n        for j in range(P):\n            if PB[i][j]:\n                TM[i]+=PN[i][j]*20\n    solved=[sum(i) for i in PB]\n    ans=[]\n    for i in range(1,T+1):\n        ans.append((-solved[i],TM[i],i))\n    import operator\n    ans=ans[::-1]\n    ans.sort(key=operator.itemgetter(1))\n    ans.sort(key=operator.itemgetter(0))\n    s=str(ans[0][2])\n    for i in range(1,T):\n        if (ans[i][0]!=ans[i-1][0]) or (ans[i][1]!=ans[i-1][1]):\n            s+=\",\"+str(ans[i][2])\n            continue\n        s+=\"=\"+str(ans[i][2])\n    print s"
  },
  {
    "language": "Python",
    "code": "# -*- coding: utf-8 -*-\n\"\"\"\nhttp://judge.u-aizu.ac.jp/onlinejudge/description.jsp?id=1187&lang=jp\nAC\n\"\"\"\nimport sys\nfrom sys import stdin\ninput = stdin.readline\n\n\nclass Team(object):\n    def __init__(self, id):\n        self.id = id\n        self.correct = 0        #  ??£?§£??°\n        self.time = 0           #  ????????????\n        self.penalty = 0        #  ??????????????£\n        self.status = {}        #  ?????£?§£?????¶??? key: ????????????, value: ????????£????????°\n\n    def judge(self, m, p, j):\n        if j == 0:\n            self.correct += 1\n            self.time += m      #  ?????????????????£?§£??¨?????£??????????????????????????????????¨?????????????????????????????????????????????§????????????\n            self.penalty += 20 * self.status.pop(p, 0)\n        else:\n            if p in self.status:\n                self.status[p] += 1\n            else:\n                self.status[p] = 1\n\n\ndef calc_result(scores):\n    # ???????????????????????¢????????§?????????????????£?§£??°?????????????????????????????????????????§???????????????????????????\n    result = []                 #  ??????????????¨??????[??£?§£??°*(-1), ????????????, ???????????????*(-1)] ??????????????§?¨??????????\n    for i, s in enumerate(scores[1:], start=1):\n        if s is not None:\n            result.append([-s.correct, s.time+s.penalty, s.id*-1]) #  sort()??????????????????????????£????????????????????????????????£?§£??°??¨??????????????????-1???????????????\n        else:\n            result.append([0, 0, -i])\n    result.sort()\n    return result\n\n\ndef main(args):\n    # M, T, P, R = 300, 10, 8, 5,\n    # data = [[50, 5, 2, 1,], [70, 5, 2, 0], [75, 1, 1, 0], [100, 3, 1, 0], [150, 3, 2, 0]]\n\n    while True:\n        M, T, P, R = map(int, input().split())\n        if M == 0 and T == 0 and P == 0 and R == 0:\n            break\n        data = [[int(i) for i in input().split()]  for x in range(R)]\n\n        scores = [None] * (T+1)\n        for d in data:\n            m, t, p, j = d\n            if scores[t] == None:\n                team = Team(t)\n                scores[t] = team\n            scores[t].judge(m, p, j)\n\n        # ???????????????\n        result = calc_result(scores)\n\n        # ?????????????????????????????????\n        prev_correct = result[0][0]\n        prev_time = result[0][1]\n        final_output = str(result[0][2]*-1)\n        for r in result[1:]:\n            if r[0] == prev_correct and r[1] == prev_time:\n                final_output += '='\n                final_output += str(r[2]*-1)\n            else:\n                final_output += ','\n                final_output += str(r[2]*-1)\n                prev_correct = r[0]\n                prev_time = r[1]\n        print(final_output)\n\n\nif __name__ == '__main__':\n    main(sys.argv[1:])"
  },
  {
    "language": "Python",
    "code": "import sys\n\nfile_input = sys.stdin\n\nfor line in file_input:\n    M, T, P, R = map(int, line.split())\n    if M == 0:\n        break\n    \n    # [number of solved probrems, complement of elapsed time, team number] + [rejected times] * P\n    # [rejected times] * P will be accessed in reverse order.\n    result = [[0, M, i] + [0] * P for i in range(T+1)]\n    \n    for i in range(R):\n        m, t, p, j = map(int, file_input.readline().split())\n        team_data = result[t]\n        if j:\n            team_data[-p] += 1\n        else:\n            team_data[0] += 1\n            team_data[1] -= (m + 20 * team_data[-p])\n\n    result.sort(reverse=True)\n\n    for td1, td2 in zip(result[:-2], result[1:]):\n        if td1[0] == td2[0] and td1[1] == td2[1]:\n            print(td1[2], end='=')\n        else:\n            print(td1[2], end=',')\n    print(result[-2][2])"
  },
  {
    "language": "Python",
    "code": "while 1:\n\tM,T,P,R = map(int,raw_input().split())\n\tif M == 0: break\n\tS = [[-1]*P for i in range(T)]\n\tPN = [[0]*P for i in range(T)]\n\tfor i in range(R):\n\t\tm,t,p,j = map(int,raw_input().split())\n\t\tif j == 0:\n\t\t\tS[t-1][p-1] = m + PN[t-1][p-1]\n\t\telse:\n\t\t\tPN[t-1][p-1] += 20\n\tA = [[t+1,P-S[t].count(-1),sum(S[t])] for t in range(T)]\n\tA = sorted(sorted(sorted(A, reverse = True), key = lambda x:x[2]), key = lambda x:x[1], reverse = True)\n\tans = str(A[0][0])\n\tfor i in range(1,T):\n\t\tif A[i-1][1] == A[i][1] and A[i-1][2] == A[i][2]:\n\t\t\tans += \"=\" + str(A[i][0])\n\t\telse:\n\t\t\tans += \",\" + str(A[i][0])\n\tprint ans"
  },
  {
    "language": "Python",
    "code": "import sys\n\ndef main():\n    while True:\n        M,T,P,R = map(int,input().split())\n        if not M and not T and not P and not R:\n            return\n        prob = [[0]*(P+1) for _ in range(T+1)]\n        result = dict([(t,[0,sys.maxsize]) for t in range(1,T+1)]) # (t,m,p)\n        for _ in range(R):\n            m,t,p,j = map(int,input().split())\n            if j == 0:\n                result[t][0] += prob[t][p] + m\n                result[t][1] += 1\n            else:\n                prob[t][p] += 20\n        result = list(result.items())\n        result = sorted(result, key=lambda x: (-1*x[1][1], x[1][0], -1*x[0]))\n\n        print(result[0][0], end=\"\")\n        for i in range(1,T):\n            if result[i][1][0] == result[i-1][1][0] and result[i][1][1] == result[i-1][1][1]:\n                print(\"={}\".format(result[i][0]), end=\"\")\n            else:\n                print(\",{}\".format(result[i][0]), end=\"\")\n        print()\n\nif __name__ == '__main__':\n    main()\n"
  },
  {
    "language": "Python",
    "code": "\"\"\"\n300 10 8 5\n50 5 2 1\n70 5 2 0\n75 1 1 0\n100 3 1 0\n150 3 2 0\n\"\"\"\nwhile True:\n  M,T,P,R = map(int,input().split())\n  if M+T+P+R == 0:\n    break\n  #### [TeamNumber, Solved, Time, WA]\n  Tm = [[i+1,0,0,[0 for j in range(P)]]for i in range(T)]\n  ####\n  for i in range(R):\n    m,t,p,j = map(int,input().split())\n    if j==0:\n      Tm[t-1][1] += 1\n      Tm[t-1][2] += m+Tm[t-1][3][p-1]*20\n      Tm[t-1][3][p-1] = 0\n    else:\n      Tm[t-1][3][p-1] += 1\n  Tm.sort(key=lambda x:(x[1],-x[2],x[0]), reverse=True)\n  ans = []\n  for i in range(T):\n    ans.append(str(Tm[i][0]))\n    if i<T-1:\n      if Tm[i][1]==Tm[i+1][1] and Tm[i][2]==Tm[i+1][2]:\n        ans.append(\"=\")\n      else:\n        ans.append(\",\")\n  print(\"\".join(ans))\n"
  },
  {
    "language": "Python",
    "code": "while 1:\n    M, T, P, R = map(int, raw_input().split())\n    if M+T+P+R==0:\n        break\n    score = [0]*T; cnt = [0]*T; failed = {}\n    for i in xrange(R):\n        m, t, p, j = map(int, raw_input().split())\n        if j == 0:\n            score[t-1] += m + failed.get((t, p), 0)\n            cnt[t-1] += 1\n        else:\n            failed[t, p] = failed.get((t, p), 0) + 20\n    result = {}\n    for i in xrange(T):\n        key = (cnt[i], -score[i])\n        result.setdefault(key, []).append(i+1)\n    ans = []\n    for key in sorted(result, reverse=1):\n        ans.append(\"=\".join(map(str, reversed(result[key]))))\n    print \",\".join(ans)"
  },
  {
    "language": "Python",
    "code": "while 1:\n\tM,T,P,R = map(int,raw_input().split())\n\tif M == 0: break\n\tS = [[-1]*P for i in range(T)]\n\tPN = [[0]*P for i in range(T)]\n\tfor i in range(R):\n\t\tm,t,p,j = map(int,raw_input().split())\n\t\tif j == 0:\n\t\t\tS[t-1][p-1] = m + PN[t-1][p-1]\n\t\telse:\n\t\t\tPN[t-1][p-1] += 20\n\tA = [[t+1,P-S[t].count(-1),sum(S[t])] for t in range(T)]\n\tA = sorted(sorted(A[::-1], key = lambda x:x[2]), key = lambda x:x[1], reverse = True)\n\tans = str(A[0][0])\n\tfor i in range(1,T):\n\t\tif A[i-1][1:] == A[i][1:]:\n\t\t\tans += \"=\" + str(A[i][0])\n\t\telse:\n\t\t\tans += \",\" + str(A[i][0])\n\tprint ans"
  },
  {
    "language": "Python",
    "code": "def main(M, T, P, R):\n    team = [[0, 0, i + 1] for i in range(T)]\n    teamprob = [[0] * P for i in range(T)]\n    for _ in range(R):\n        m, t, p, r = map(int, input().split())\n        if r == 0:\n            team[t - 1][0] += 1\n            team[t - 1][1] -= m\n            team[t - 1][1] -= teamprob[t - 1][p - 1]\n        else:\n            teamprob[t - 1][p - 1] += 20\n    team.sort(reverse=True)\n    ans = \"{0}\".format(team[0][2])\n    for i in range(1,T):\n        if team[i - 1][0] == team[i][0]:\n            if team[i - 1][1] == team[i][1]:\n                ans += \"=\"\n            else:\n                ans += \",\"\n        else:\n            ans += \",\"\n        ans += \"{0}\".format(team[i][2])\n    print(ans)\n\nwhile 1:\n    m, t, p, r = map(int, input().split())\n    if m == t == p == r == 0:\n        break\n    main(m, t, p, r)\n"
  }
]