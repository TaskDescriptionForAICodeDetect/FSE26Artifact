There are N workers in Atcoder company, structured in a tree hierarchy with salaries. Each worker has a boss identified by p_i, and worker 0 is the president (p_0 = -1). You need to process Q queries regarding salary adjustments and calculations. The queries are: 1) Increase the salary of worker v_i and all lower subordinates by x_i, 2) Calculate the total salary of worker v_i and all lower subordinates, 3) Add a new worker with a specified boss and salary. You must execute all queries and return results for the salary calculation queries.