In preparation for the national preliminary round of ICPC, the protagonist is solving problems late at night when they decide to have a small midnight tea party with their studying sister. They have four types of snacks corresponding to a set S = {a, b, c, d}. The protagonist draws a binary tree where the leaf nodes represent subsets of S and the internal nodes are filled with one of the letters 'A', 'O', or 'X'. The sister receives the snack indicated by the root node based on the operations defined by these letters: intersection for 'A', union for 'O', and symmetric difference for 'X'. The task is to determine the number of ways to fill the internal nodes such that the sister ends up with all snacks.