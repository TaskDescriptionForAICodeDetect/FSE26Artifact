There are N cards placed face down in a row, with each card containing an integer 1 or 2. Your goal is to guess the integers on all cards using the minimum number of magic uses. You can use magic to reveal the integer on any card at a cost of 1. Given M conditions stating that the sum of certain pairs of cards and a number is even, find the minimum cost to determine all integers on the cards.