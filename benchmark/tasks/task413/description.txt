Given a grid-like city where you can move from your home at (0, 0) to your school at (N, M), determine the number of ways to reach the school by moving only right or up, while making exactly K detours. A detour consists of moving left or down. If you haven't completed the K detours, you may continue moving after reaching (N, M), and you can return to (0, 0) at some point. You cannot enter any points where the X or Y coordinate is negative, but you can go beyond the coordinates (N, M).