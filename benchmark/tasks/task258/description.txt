You are tasked with moving ghosts in a haunted house back to their designated positions after they have been randomly relocated. You need to write a program that determines the smallest number of steps required to achieve this. The house floor is represented as a matrix of cells, with walls where ghosts cannot enter and corridors where they can move. At each step, you can move any number of ghosts simultaneously, but they can't occupy the same position or swap places directly. Each dataset represents a different floor map, and your program should output the minimum steps required for each map.