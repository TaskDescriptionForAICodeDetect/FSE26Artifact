In the year 21XX, humanity has finally started the colonization plan for Mars. As a selected member of the first migration to Mars, you are assigned to the Administrative Center of Mars, addressing various issues that arise on the planet. A significant problem at the center is ensuring a self-sufficient supply and demand cycle, since it takes several months for supplies from the moon to arrive. Thus, most needs on Mars must be met locally while conserving resources until a recycling system is established. The center has begun ice mining at the poles, aiming to melt it with sunlight and supply water to individual bases. As an initial phase, they have decided to lay water pipes from a source base to two main bases. Currently, only a few bases and roads connecting them have been developed. Laying pipes in undeveloped areas is costly and requires fuel, so they will be installed along roads. Additionally, due to technical constraints, water can only flow in one direction through these pipes. Your job is to create a program to minimize the cost of laying these water pipes under these conditions.