Yamada House, a housing manufacturer, is selling lots in a new residential area called Green Home Town, which is located in a well-serviced environment with schools and hospitals. The land is divided into multiple plots that can be purchased in any combination, but the combined shape of the purchased plots must be rectangular (including squares). After all plots were sold, each purchaser was assigned a sign with their identification number in the corresponding plot. Unfortunately, the boundary markers were washed away after heavy rain, leaving only the signs visible. As a programmer, your task is to write a program that, given the size of the land (X Ã— Y), the number of buyers (n), and information about each buyer and the plot positions, outputs the purchaser information for each plot. If there is no unique way to distinguish the plots or if multiple distinct arrangements exist, return 'NA'. The input consists of multiple datasets terminated by a triple zero. Each dataset begins with X, Y, and n, followed by n lines of buyer information and then Y lines representing the plot information.