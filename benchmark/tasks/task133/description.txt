You have $L$ squares lined up in a row, with certain squares occupied by pieces. Each piece has an arrow pointing either left or right. A square cannot hold more than one piece. Each piece can move to an unoccupied square, but can only move to an adjacent square and only one piece can be moved at a time. Regardless of the direction of the arrow, pieces can move left or right. Moving a piece in the direction of its arrow earns 1 point, while moving it in the opposite direction results in a loss of 1 point. There is guaranteed to be a maximum score achievable from any starting situation. Write a program that calculates the maximum score obtainable given the number of squares and the arrangement of the pieces. Squares are numbered from 1 to $L$ from the leftmost position.