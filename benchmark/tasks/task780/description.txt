In Takaha-shi, the capital of the Republic of AtCoder, there are N one-way roads extending east and west, and M one-way roads extending north and south. Given the permitted directions of these roads described by strings S and T, process Q queries to determine the minimum distance to travel between two intersections on these roads. If the destination intersection cannot be reached, return -1.