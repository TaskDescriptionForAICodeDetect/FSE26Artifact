[
  {
    "language": "Scala",
    "code": "import scala.collection.mutable\nimport scala.collection.mutable.ListBuffer\n\n/**\n * Created by rasrivastava on 1/5/17.\n */\nclass AdditionAndSubstraction {\n\n  val cache = new mutable.HashMap[(Int,Int),Set[Long]]()\n  def maxSum(arr : Array[Long],start : Int,end : Int,depth : Int) : Set[Long] = {\n//    for (i <- 0 to depth-1) {\n//      print(\" \")\n//    }\n//    println(\"start = \" + start + \"  end \" + end)\n    if (cache.contains((start,end))) {\n      //println(\"Cache hit \" + (start,end))\n      cache.get((start,end)).get\n    }else {\n      if (start == end) {\n        Set[Long](arr(start))\n      } else {\n        val lstBuffer = new mutable.HashSet[Long]\n        for (i <- start + 1 to end) {\n          val current = arr(i)\n          if (current < 0) {\n            //Negate the value\n            arr(i) = -current\n            val lst1 = maxSum(arr, start, i - 1, depth + 1)\n            val lst2 = maxSum(arr, i, end, depth + 1)\n            lst1.foreach(s1 => {\n              lst2.foreach(s2 => {\n                lstBuffer.+=(s1 - s2)\n              })\n            })\n            //reset back\n            arr(i) = current\n\n          } else {\n            val lst1 = maxSum(arr, start, i - 1, depth + 1)\n            val lst2 = maxSum(arr, i, end, depth + 1)\n            lst1.foreach(s1 => {\n              lst2.foreach(s2 => {\n                lstBuffer.+=(s1 + s2)\n              })\n            })\n          }\n        }\n\n        var currentSum = 0\n        for (i <- start to end) {\n          currentSum += arr(i)\n        }\n\n        lstBuffer.+=(currentSum)\n\n\n        val s = lstBuffer.toSet\n        cache.put((start,end),s)\n        s\n\n\n      }\n    }\n  }\n\n}\n\n\nobject Main extends App {\n  val addSub = new AdditionAndSubstraction\n  val count = scala.io.StdIn.readLine().toInt\n  val exprArr = scala.io.StdIn.readLine().split(\" \")\n  var state = 1\n  val exprIntArr = new Array[Long](count)\n  exprIntArr(0) = exprArr(0).toLong\n  var j = 1\n  var totalAdd = 1\n  var totalSub = 0\n  for (i <- 1 to count-1) {\n\n    exprArr(j) match {\n      case \"+\" => {\n        totalAdd = totalAdd + 1\n        state = 1\n        exprIntArr(i) = exprArr(j+1).toLong * state\n        j = j + 2\n      }\n      case \"-\" => {\n        totalSub = totalSub + 1\n        state = -1\n        exprIntArr(i) = exprArr(j+1).toLong * state\n        j = j + 2\n      }\n      case num => {\n        println(\"Error\")\n      }\n    }\n\n\n\n  }\n\n  //println(exprIntArr.deep.mkString(\" \"))\n\n  if (totalSub == 0) {\n    println(exprIntArr.sum)\n  }else {\n    println(addSub.maxSum(exprIntArr,0,exprIntArr.length-1,0).max)\n  }\n\n}"
  },
  {
    "language": "Scala",
    "code": "import scala.collection.mutable\nimport scala.collection.mutable.ListBuffer\n\n/**\n * Created by rasrivastava on 1/5/17.\n */\nclass AdditionAndSubstraction {\n\n  val cache = new mutable.HashMap[(Int,Int),Set[Long]]()\n  def maxSum(arr : Array[Int],start : Int,end : Int,depth : Int) : Set[Long] = {\n//    for (i <- 0 to depth-1) {\n//      print(\" \")\n//    }\n//    println(\"start = \" + start + \"  end \" + end)\n    if (cache.contains((start,end))) {\n      //println(\"Cache hit \" + (start,end))\n      cache.get((start,end)).get\n    }else {\n      if (start == end) {\n        Set[Long](arr(start))\n      } else {\n        val lstBuffer = new mutable.HashSet[Long]\n        for (i <- start + 1 to end) {\n          val current = arr(i)\n          if (current < 0) {\n            //Negate the value\n            arr(i) = -current\n            val lst1 = maxSum(arr, start, i - 1, depth + 1)\n            val lst2 = maxSum(arr, i, end, depth + 1)\n            lst1.foreach(s1 => {\n              lst2.foreach(s2 => {\n                lstBuffer.+=(s1 - s2)\n              })\n            })\n            //reset back\n            arr(i) = current\n\n          } else {\n            val lst1 = maxSum(arr, start, i - 1, depth + 1)\n            val lst2 = maxSum(arr, i, end, depth + 1)\n            lst1.foreach(s1 => {\n              lst2.foreach(s2 => {\n                lstBuffer.+=(s1 + s2)\n              })\n            })\n          }\n        }\n\n        var currentSum = 0\n        for (i <- start to end) {\n          currentSum += arr(i)\n        }\n\n        lstBuffer.+=(currentSum)\n\n\n        val s = lstBuffer.toSet\n        cache.put((start,end),s)\n        s\n\n\n      }\n    }\n  }\n\n}\n\n\nobject Main extends App {\n  val addSub = new AdditionAndSubstraction\n  val count = scala.io.StdIn.readLine().toInt\n  val exprArr = scala.io.StdIn.readLine().split(\" \")\n  var state = 1\n  val exprIntArr = new Array[Int](count)\n  exprIntArr(0) = exprArr(0).toInt\n  var j = 1\n  var totalAdd = 1\n  var totalSub = 0\n  for (i <- 1 to count-1) {\n\n    exprArr(j) match {\n      case \"+\" => {\n        totalAdd = totalAdd + 1\n        state = 1\n        exprIntArr(i) = exprArr(j+1).toInt * state\n        j = j + 2\n      }\n      case \"-\" => {\n        totalSub = totalSub + 1\n        state = -1\n        exprIntArr(i) = exprArr(j+1).toInt * state\n        j = j + 2\n      }\n      case num => {\n        println(\"Error\")\n      }\n    }\n\n\n\n  }\n\n  //println(exprIntArr.deep.mkString(\" \"))\n\n  if (totalSub == 0) {\n    println(exprIntArr.sum)\n  }else {\n    println(addSub.maxSum(exprIntArr,0,exprIntArr.length-1,0).max)\n  }\n\n}"
  },
  {
    "language": "Scala",
    "code": "import scala.collection.mutable\nimport scala.collection.mutable.ListBuffer\n\n/**\n * Created by rasrivastava on 1/5/17.\n */\nclass AdditionAndSubstraction {\n\n  val cache = new mutable.HashMap[(Int,Int),Set[Int]]()\n  def maxSum(arr : Array[Int],start : Int,end : Int,depth : Int) : Set[Int] = {\n//    for (i <- 0 to depth-1) {\n//      print(\" \")\n//    }\n//    println(\"start = \" + start + \"  end \" + end)\n    if (cache.contains((start,end))) {\n      //println(\"Cache hit \" + (start,end))\n      cache.get((start,end)).get\n    }else {\n      if (start == end) {\n        Set[Int](arr(start))\n      } else {\n        val lstBuffer = new mutable.HashSet[Int]\n        for (i <- start + 1 to end) {\n          val current = arr(i)\n          if (current < 0) {\n            //Negate the value\n            arr(i) = -current\n            val lst1 = maxSum(arr, start, i - 1, depth + 1)\n            val lst2 = maxSum(arr, i, end, depth + 1)\n            lst1.foreach(s1 => {\n              lst2.foreach(s2 => {\n                lstBuffer.+=(s1 - s2)\n              })\n            })\n            //reset back\n            arr(i) = current\n\n          } else {\n            val lst1 = maxSum(arr, start, i - 1, depth + 1)\n            val lst2 = maxSum(arr, i, end, depth + 1)\n            lst1.foreach(s1 => {\n              lst2.foreach(s2 => {\n                lstBuffer.+=(s1 + s2)\n              })\n            })\n          }\n        }\n\n        var currentSum = 0\n        for (i <- start to end) {\n          currentSum += arr(i)\n        }\n\n        lstBuffer.+=(currentSum)\n\n\n        val s = lstBuffer.toSet\n        cache.put((start,end),s)\n        s\n\n\n      }\n    }\n  }\n\n}\n\n\nobject Main extends App {\n  val addSub = new AdditionAndSubstraction\n  val count = scala.io.StdIn.readLine().toInt\n  val exprArr = scala.io.StdIn.readLine().split(\" \")\n  var state = 1\n  val exprIntArr = new Array[Int](count)\n  exprIntArr(0) = exprArr(0).toInt\n  var j = 1\n  for (i <- 1 to count-1) {\n\n    exprArr(j) match {\n      case \"+\" => {\n        state = 1\n        exprIntArr(i) = exprArr(j+1).toInt * state\n        j = j + 2\n      }\n      case \"-\" => {\n        state = -1\n        exprIntArr(i) = exprArr(j+1).toInt * state\n        j = j + 2\n      }\n      case num => {\n        println(\"Error\")\n      }\n    }\n\n\n\n  }\n\n  //println(exprIntArr.deep.mkString(\" \"))\n\n  println(addSub.maxSum(exprIntArr,0,exprIntArr.length-1,0).max)\n}"
  },
  {
    "language": "Scala",
    "code": "import scala.collection.mutable\nimport scala.collection.mutable.ListBuffer\n\n/**\n * Created by Rahul on 1/5/17.\n */\nclass AdditionAndSubstraction {\n\n  val cache = new mutable.HashMap[(Int,Int),Tuple2[Long,Long]]()\n  def maxSum(arr : Array[Long],start : Int,end : Int,depth : Int) : Tuple2[Long,Long] = {\n//    for (i <- 0 to depth-1) {\n//      print(\" \")\n//    }\n//    println(\"start = \" + start + \"  end \" + end)\n    if (cache.contains((start,end))) {\n      //println(\"Cache hit \" + (start,end))\n      cache.get((start,end)).get\n    }else {\n      if (start == end) {\n        (arr(start),arr(end))\n      } else {\n        val lstBuffer = new mutable.HashSet[Long]\n        var maxSumObserved : Long = Int.MinValue\n        var minSumObserved : Long = Int.MaxValue\n        for (i <- start + 1 to end) {\n          val current = arr(i)\n          if (current < 0) {\n            //Negate the value\n            arr(i) = -current\n            val lst1 : Tuple2[Long,Long] = maxSum(arr, start, i - 1, depth + 1)\n            val lst2 : Tuple2[Long,Long] = maxSum(arr, i, end, depth + 1)\n            val comb = new Array[Long](4)\n            comb(0) = lst1._1 - lst2._1\n            comb(1) = lst1._1 - lst2._2\n            comb(2) = lst1._2 - lst2._1\n            comb(3) = lst1._2 - lst2._2\n            val localMax = comb.max\n            val localMin = comb.min\n            if (localMax > maxSumObserved) {\n              //println(i  + \" \" + maxSumObserved)\n              maxSumObserved = localMax\n            }\n\n            if (localMin < minSumObserved) {\n              minSumObserved = localMin\n            }\n            //minSumObserved = comb.min\n\n//            lst1.foreach(s1 => {\n//              lst2.foreach(s2 => {\n//                lstBuffer.+=(s1 - s2)\n//              })\n//            })\n            //reset back\n            arr(i) = current\n\n          } else {\n            val lst1 = maxSum(arr, start, i - 1, depth + 1)\n            val lst2 = maxSum(arr, i, end, depth + 1)\n//            lst1.foreach(s1 => {\n//              lst2.foreach(s2 => {\n//                lstBuffer.+=(s1 + s2)\n//              })\n//            })\n            val comb = new Array[Long](4)\n            comb(0) = lst1._1 + lst2._1\n            comb(1) = lst1._1 + lst2._2\n            comb(2) = lst1._2 + lst2._1\n            comb(3) = lst1._2 + lst2._2\n            val localMax = comb.max\n            val localMin = comb.min\n            if (localMax > maxSumObserved) {\n              //println(i  + \" \" + maxSumObserved)\n              maxSumObserved = localMax\n            }\n\n            if (localMin < minSumObserved) {\n              minSumObserved = localMin\n            }\n          }\n        }\n\n        var currentSum : Long = 0\n        for (i <- start to end) {\n          currentSum += arr(i)\n        }\n\n        //lstBuffer.+=(currentSum)\n        if (currentSum > maxSumObserved) {\n          //println(\"Here \")\n          maxSumObserved = currentSum\n        }\n\n        if (currentSum < minSumObserved) {\n          //println(\"Here\")\n          minSumObserved = currentSum\n        }\n\n\n        //val s = lstBuffer.toSet\n        cache.put((start,end),(maxSumObserved,minSumObserved))\n//        for (i <- 0 to depth-1) {\n//          print(\" \")\n//        }\n        //println(\"Start = \" + start + \" End = \" + end + \" \" + (maxSumObserved,minSumObserved))\n        (maxSumObserved,minSumObserved)\n\n\n      }\n    }\n  }\n\n}\n\n\nobject Main extends App {\n  val addSub = new AdditionAndSubstraction\n  val count = scala.io.StdIn.readLine().toInt\n  val exprArr = scala.io.StdIn.readLine().split(\" \")\n  var state = 1\n  val exprIntArr = new Array[Long](count)\n  exprIntArr(0) = exprArr(0).toLong\n  var j = 1\n  var totalAdd = 1\n  var totalSub = 0\n  for (i <- 1 to count-1) {\n\n    exprArr(j) match {\n      case \"+\" => {\n        totalAdd = totalAdd + 1\n        state = 1\n        exprIntArr(i) = exprArr(j+1).toLong * state\n        j = j + 2\n      }\n      case \"-\" => {\n        totalSub = totalSub + 1\n        state = -1\n        exprIntArr(i) = exprArr(j+1).toLong * state\n        j = j + 2\n      }\n      case num => {\n        println(\"Error\")\n      }\n    }\n\n\n\n  }\n\n  //println(exprIntArr.deep.mkString(\" \"))\n\n  if (totalSub == 0) {\n    println(exprIntArr.sum)\n  }else {\n    println(addSub.maxSum(exprIntArr,0,exprIntArr.length-1,0)._1)\n  }\n\n}"
  },
  {
    "language": "Scala",
    "code": "import scala.collection.mutable\nimport scala.collection.mutable.ListBuffer\n\n/**\n * Created by rasrivastava on 1/5/17.\n */\nclass AdditionAndSubstraction {\n\n  val cache = new mutable.HashMap[(Int,Int),Set[Int]]()\n  def maxSum(arr : Array[Int],start : Int,end : Int,depth : Int) : Set[Int] = {\n//    for (i <- 0 to depth-1) {\n//      print(\" \")\n//    }\n//    println(\"start = \" + start + \"  end \" + end)\n    if (cache.contains((start,end))) {\n      //println(\"Cache hit \" + (start,end))\n      cache.get((start,end)).get\n    }else {\n      if (start == end) {\n        Set[Int](arr(start))\n      } else {\n        val lstBuffer = new mutable.HashSet[Int]\n        for (i <- start + 1 to end) {\n          val current = arr(i)\n          if (current < 0) {\n            //Negate the value\n            arr(i) = -current\n            val lst1 = maxSum(arr, start, i - 1, depth + 1)\n            val lst2 = maxSum(arr, i, end, depth + 1)\n            lst1.foreach(s1 => {\n              lst2.foreach(s2 => {\n                lstBuffer.+=(s1 - s2)\n              })\n            })\n            //reset back\n            arr(i) = current\n\n          } else {\n            val lst1 = maxSum(arr, start, i - 1, depth + 1)\n            val lst2 = maxSum(arr, i, end, depth + 1)\n            lst1.foreach(s1 => {\n              lst2.foreach(s2 => {\n                lstBuffer.+=(s1 + s2)\n              })\n            })\n          }\n        }\n\n        var currentSum = 0\n        for (i <- start to end) {\n          currentSum += arr(i)\n        }\n\n        lstBuffer.+=(currentSum)\n\n\n        val s = lstBuffer.toSet\n        cache.put((start,end),s)\n        s\n\n\n      }\n    }\n  }\n\n}\n\n\nobject Main extends App {\n  val addSub = new AdditionAndSubstraction\n  val count = scala.io.StdIn.readLine().toInt\n  val exprArr = scala.io.StdIn.readLine().split(\" \")\n  var state = 1\n  val exprIntArr = new Array[Int](count)\n  exprIntArr(0) = exprArr(0).toInt\n  var j = 1\n  var totalAdd = 1\n  var totalSub = 0\n  for (i <- 1 to count-1) {\n\n    exprArr(j) match {\n      case \"+\" => {\n        totalAdd = totalAdd + 1\n        state = 1\n        exprIntArr(i) = exprArr(j+1).toInt * state\n        j = j + 2\n      }\n      case \"-\" => {\n        totalSub = totalSub + 1\n        state = -1\n        exprIntArr(i) = exprArr(j+1).toInt * state\n        j = j + 2\n      }\n      case num => {\n        println(\"Error\")\n      }\n    }\n\n\n\n  }\n\n  //println(exprIntArr.deep.mkString(\" \"))\n\n  if (totalSub == 0) {\n    println(exprIntArr.sum)\n  }else {\n    println(addSub.maxSum(exprIntArr,0,exprIntArr.length-1,0).max)\n  }\n  \n}"
  },
  {
    "language": "Scala",
    "code": "import scala.collection.mutable\nimport scala.collection.mutable.ListBuffer\n\n/**\n * Created by rasrivastava on 1/5/17.\n */\nclass AdditionAndSubstraction {\n\n  def maxSum(arr : Array[Int],start : Int,end : Int) : Set[Int] = {\n    if (start == end) {\n      Set[Int](arr(start))\n    }else {\n      val lstBuffer = new mutable.HashSet[Int]\n      for (i <- start + 1 to end-1) {\n        val current = arr(i)\n        if (current < 0) {\n          //Negate the value\n          arr(i) = -current\n          val lst1 = maxSum(arr,start,i-1)\n          val lst2 = maxSum(arr,i,end)\n          lst1.foreach(s1 => {\n            lst2.foreach(s2 => {\n              lstBuffer.+=(s1-s2)\n            })\n          })\n          //reset back\n          arr(i) = current\n\n        }else {\n          val lst1 = maxSum(arr,start,i-1)\n          val lst2 = maxSum(arr,i,end)\n          lst1.foreach(s1 => {\n            lst2.foreach(s2 => {\n              lstBuffer.+=(s1+s2)\n            })\n          })\n        }\n      }\n\n      var currentSum  = 0\n      for (i <- start to end) {\n        currentSum += arr(i)\n      }\n\n      lstBuffer.+=(currentSum)\n\n      lstBuffer.toSet\n    }\n  }\n\n}\n\n\nobject Main extends App {\n  val addSub = new AdditionAndSubstraction\n  val count = scala.io.StdIn.readLine().toInt\n  val exprArr = scala.io.StdIn.readLine().split(\" \")\n  var state = 1\n  val exprIntArr = new Array[Int](count)\n  exprIntArr(0) = exprArr(0).toInt\n  var j = 1\n  for (i <- 1 to count-1) {\n\n    exprArr(j) match {\n      case \"+\" => {\n        state = 1\n        exprIntArr(i) = exprArr(j+1).toInt * state\n        j = j + 2\n      }\n      case \"-\" => {\n        state = -1\n        exprIntArr(i) = exprArr(j+1).toInt * state\n        j = j + 2\n      }\n      case num => {\n        println(\"Error\")\n      }\n    }\n\n\n\n  }\n\n  //println(exprIntArr.deep.mkString(\" \"))\n\n  println(addSub.maxSum(exprIntArr,0,exprIntArr.length-1).max)\n}"
  },
  {
    "language": "Scala",
    "code": "import scala.collection.mutable\nimport scala.collection.mutable.ListBuffer\n\n/**\n * Created by rasrivastava on 1/5/17.\n */\nclass AdditionAndSubstraction {\n\n  val cache = new mutable.HashMap[(Int,Int),Set[Long]]()\n  def maxSum(arr : Array[Long],start : Int,end : Int,depth : Int) : Set[Long] = {\n//    for (i <- 0 to depth-1) {\n//      print(\" \")\n//    }\n//    println(\"start = \" + start + \"  end \" + end)\n    if (cache.contains((start,end))) {\n      //println(\"Cache hit \" + (start,end))\n      cache.get((start,end)).get\n    }else {\n      if (start == end) {\n        Set[Long](arr(start))\n      } else {\n        val lstBuffer = new mutable.HashSet[Long]\n        for (i <- start + 1 to end) {\n          val current = arr(i)\n          if (current < 0) {\n            //Negate the value\n            arr(i) = -current\n            val lst1 = maxSum(arr, start, i - 1, depth + 1)\n            val lst2 = maxSum(arr, i, end, depth + 1)\n            lst1.foreach(s1 => {\n              lst2.foreach(s2 => {\n                lstBuffer.+=(s1 - s2)\n              })\n            })\n            //reset back\n            arr(i) = current\n\n          } else {\n            val lst1 = maxSum(arr, start, i - 1, depth + 1)\n            val lst2 = maxSum(arr, i, end, depth + 1)\n            lst1.foreach(s1 => {\n              lst2.foreach(s2 => {\n                lstBuffer.+=(s1 + s2)\n              })\n            })\n          }\n        }\n\n        var currentSum : Long = 0\n        for (i <- start to end) {\n          currentSum += arr(i)\n        }\n\n        lstBuffer.+=(currentSum)\n\n\n        val s = lstBuffer.toSet\n        cache.put((start,end),s)\n        s\n\n\n      }\n    }\n  }\n\n}\n\n\nobject Main extends App {\n  val addSub = new AdditionAndSubstraction\n  val count = scala.io.StdIn.readLine().toInt\n  val exprArr = scala.io.StdIn.readLine().split(\" \")\n  var state = 1\n  val exprIntArr = new Array[Long](count)\n  exprIntArr(0) = exprArr(0).toLong\n  var j = 1\n  var totalAdd = 1\n  var totalSub = 0\n  for (i <- 1 to count-1) {\n\n    exprArr(j) match {\n      case \"+\" => {\n        totalAdd = totalAdd + 1\n        state = 1\n        exprIntArr(i) = exprArr(j+1).toLong * state\n        j = j + 2\n      }\n      case \"-\" => {\n        totalSub = totalSub + 1\n        state = -1\n        exprIntArr(i) = exprArr(j+1).toLong * state\n        j = j + 2\n      }\n      case num => {\n        println(\"Error\")\n      }\n    }\n\n\n\n  }\n\n  //println(exprIntArr.deep.mkString(\" \"))\n\n  if (totalSub == 0) {\n    println(exprIntArr.sum)\n  }else {\n    println(addSub.maxSum(exprIntArr,0,exprIntArr.length-1,0).max)\n  }\n\n}"
  },
  {
    "language": "Fortran",
    "code": "package main\nimport \"fmt\"\nfunc main() {\n  var n int\n  var f,f0,f1,f2 int64\n  var s string\n  fmt.Scan(&n,&f0)\n  f1,f2 = -(1<<60),-(1<<60)\n  for i:=1;i<n;i++ {\n    fmt.Scan(&s,&f)\n    if s == \"-\" {\n      f2 = f1+f\n      f1 = max(f0-f,f2)\n      f0 = f1\n    } else {\n      f2 += f\n      f1 = max(f1-f,f2)\n      f0 += f\n    }\n  }\n  fmt.Println(f0)\n}\nfunc max(x,y int64) int64 {\n  if x > y { return x }\n  return y\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <iostream>\n#define oo 1e9\n#define N 3005\n#define F(i,j,k) for(int i=(j);i<=(k);++i)\n#define D(i,j,k) for(int i=(j);i>=(k);--i)\nusing namespace std;\nchar op[N];\nint n,a[N],ans,dp[N][N],mx;\nint main(){\n\t//freopen(\"txt.in\",\"r\",stdin);freopen(\"txt.out\",\"w\",stdout);\n\tscanf(\"%d\\n\",&n);\n\tscanf(\"%d \",&a[0]);F(i,1,n-1)scanf(\"%c %d \",&op[i],&a[i]);\n\tF(i,1,n-1)printf(\"%c %d\\n\",op[i],a[i]);\n\tans=-oo;\n\tF(i,0,n-1)F(j,0,n-1)dp[i][j]=-oo;\n\tdp[0][0]=0;\n\tF(i,1,n-1){\n\t\tif(op[i]=='+'){\n\t\t\tint now=-oo;\n\t\t\tD(j,mx,0){\n\t\t\t\tnow=max(now,dp[i-1][j]+a[i]*(j&1?-1:1));\n\t\t\t\tdp[i][j]=now;\n\t\t\t}\n\t\t}\n\t\telse{\n\t\t\tmx++;\n\t\t\tdp[i][0]=dp[i-1][0]-a[i];\n\t\t\tF(j,1,mx)dp[i][j]=max(dp[i-1][j]+a[i]*(j&1?1:-1),dp[i-1][j-1]+a[i]*(j&1?-1:1));\n\t\t}\n\t\t//F(j,0,mx)printf(\"%d %d %d\\n\",i,j,dp[i][j]);\n\t}\n\tF(i,0,mx)ans=max(ans,dp[n-1][i]);\n\tprintf(\"%d\\n\",ans+a[0]); \n\treturn 0;\n} "
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <algorithm>\n#include <cstring>\n#include <ctime>\n\n#define Rep(i, n) for (int i = 1; i <= n; i ++)\n#define Rep0(i, n) for (int i = 0; i <= n; i ++)\n#define RepG(i, x) for (int i = head[x]; i; i = edge[i].next)\n#define v edge[i].to\n#define mp(a, b) make_pair(a, b)\n\nusing namespace std;\n\ntypedef long long LL;\nconst int N = 100010;\n\nLL f[N][4], c[N], a[N];\nchar op[2];\n\nint main()\n{\n\tint n;\n\tscanf(\"%d\", &n);\n\tRep(i, n) {\n\t\tif (i != 1) scanf(\"%s\", op);\n\t\tif (i == 1 || op[0] == '+') c[i] = 1;\n\t\telse c[i] = -1;\n\t\tscanf(\"%lld\", &a[i]);\n\t}\n\tRep0(i, n) Rep0(j, 2) f[i][j] = -1e18;\n\tf[0][0] = 0;\n\tRep0(i, n) Rep0(j, 2){\n\t\tLL tt = j == 1 ? -1 : 1;\n\t\tif (j) {\n\t\t\tf[i + 1][j - 1] = max(f[i + 1][j - 1], f[i][j] - tt * c[i + 1] * a[i + 1]);\n\t\t\tif (c[i + 1] == -1) f[i + 1][j] = max(f[i + 1][j], f[i][j] + tt * a[i + 1]);\n\t\t}\n\t\tif (c[i + 1] == -1)\n\t\t\tf[i + 1][j + 1] = max(f[i + 1][j + 1], f[i][j] + tt * c[i + 1] * a[i + 1]);\n\t\tf[i + 1][j] = max(f[i + 1][j], f[i][j] + tt * c[i + 1] * a[i + 1]);\n\t}\n\tprintf(\"%lld\\n\", max(f[n][0], max(f[n][1], f[n][2])));\n\t\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define int long long\n#define double long double\nusing namespace std;\nconst int N = 200010;\nconst int INF = 1LL<<55;\nconst int mod = (1e9)+7;\nconst double EPS = 1e-8;\nconst double PI = 6.0 * asin(0.5);\ntypedef pair<int,int> P;\ntypedef long long ll;\nostream& operator<<(ostream& o,P p){return o<<\"(\"<<p.first<<\",\"<<p.second<<\")\";}\nistream& operator>>(istream& i,P &p){return i>>p.first>>p.second;}\ntemplate<class T> istream& operator>>(istream& i,vector<T> &a){for(auto &t:a)cin>>t;return i;}\ntemplate<class T> T Max(T &a,T b){return a=max(a,b);}\ntemplate<class T> T Min(T &a,T b){return a=min(a,b);}\ntemplate<class T> void prArr(T a,string s=\" \"){int i=0;for(auto t:a)cout<<(i++?s:\"\")<<t;cout<<endl;}\n\nclass BIT{\npublic:\n  typedef long long ll;\n  ll n;\n  vector<ll> bit0, bit1;\n  BIT(){n=-1;}\n  BIT(ll n_){\n    n=1;\n    while(n<n_)n*=2;\n    bit0.resize(n+1,0);\n    bit1.resize(n+1,0);\n  }\n  \n  ll sum(vector<ll> &b,ll i){\n    ll s=0;\n    while(i>0){\n      s=(s+b[i]);\n      i-=i&-i;\n    }\n    return s;\n  }\n\n  void add(vector<ll> &b,ll i,ll v){\n    while(i<=n){\n      b[i]=(b[i]+v);\n      i+=i&-i;\n    }\n  }\n\n  //[a,b]にxを加算(1<=a)\n  void add (ll a,ll b,ll x){\n    assert(a > 0 && n >= 0);\n\n    add(bit0,a,-x*(a-1));\n    add(bit1,a,x);\n    add(bit0,b+1,x*b);\n    add(bit1,b+1,-x);\n  }\n\n  //[a,b]のsumを得る(1<=a)\n  ll sum(ll a,ll b){\n    assert(a > 0 && n >= 0);\n    ll res=0;\n    res+=sum(bit0,b)+sum(bit1,b)*b;\n    res-=sum(bit0,a-1)+sum(bit1,a-1)*(a-1);\n    return res;\n  }\n};\nBIT bit;\n\nint n;\nvector<int> A;\nvector<char> op;\nint f[2] = {1,-1};\n\nint used[N][3],mem[N][3];\n\nint dfs(int idx,int cnt){\n  if(cnt == 2) return bit.sum(idx+1,n);\n  if(idx == n) return 0;\n  if(used[idx][cnt]++) return mem[idx][cnt];\n  \n  char ch = op[idx-1];\n  cnt += ch == '-';\n  int res = 0;\n  int val = f[cnt%2] * A[idx];\n  if(cnt) Max(res,val + dfs(idx+1,cnt-1));\n  Max(res,val + dfs(idx+1,cnt));\n  return mem[idx][cnt] = res;\n}\n\n\nsigned main(){\n  cin>>n;\n  A.resize(n);\n  op.resize(n);\n  for(int i=0;i<n;i++) {\n    cin>>A[i];\n    if(i!=n-1) cin>>op[i];\n  }\n  bit = BIT(n);\n  for(int i=0;i<n;i++) bit.add(i+1,i+1,A[i]);\n  cout<<A[0] + dfs(1,0)<<endl;\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<iomanip>\n#include<map>\n#include<unordered_map>\n#include<set>\n#include<unordered_set>\n#include<vector>\n#include<array>\n#include<string>\n#include<stack>\n#include<queue>\n#include<algorithm>\n#include<cassert>\n#include<functional>\n#include<random>\n#include<complex>\n#include<bitset>\n#include<chrono>\n//#include<boost/multiprecision/cpp_int.hpp>\n#define int int64_t\n#define uint uint64_t\n#define REP(i, a, b) for (int64_t i = (int64_t)(a); i < (int64_t)(b); i++)\n#define rep(i, a) REP(i, 0, a)\n#define SZ(X) ((int64_t)((X).size()))\n#define ITR(x, a) for (auto x = a.begin(); x != a.end(); x++)\n#define ALL(a) (a.begin()), (a.end())\n#define HAS(a, x) (a.find(x) != a.end())\n#define Min(x) *min_element(ALL(x))\n#define Max(x) *max_element(ALL(x))\n#define Unique(L) (L.erase(unique(ALL(L)), L.end()))\n#define intmax (std::numeric_limits<int64_t>::max() / 4)\n#define doublemax (std::numeric_limits<double>::max() / 4)\nusing namespace std;\n//typedef boost::multiprecision::cpp_int bigint;\nconst double EPS = 1e-9;\nconst double PI = acos(-1.0);\n\n//sort(ALL(v),greater<int>());\nclass segtree_sum_pointupdate {\nprivate:\n\ttypedef int T;\npublic:\n\tsegtree_sum_pointupdate(const int N) {\n\t\tSIZE = roundup_pow2(N);\n\t\tv.clear();\n\t\tv.resize(SIZE * 2, 0);\n\t}\n\n\t//v[index]=numberとする。\n\tvoid update(const int index, const T number) {\n\t\tv[index + SIZE] = number;\n\t\tfor (int i = (index + SIZE) / 2; i; i = i / 2)v[i] = v[i * 2] + v[i * 2 + 1];\n\t}\n\n\t//[index]の値を返す。\n\tT getnum(const int index) {\n\t\treturn v[index + SIZE];\n\t}\n\n\t//[L,R)の総和を返す。\n\tT getsum(const int L, const int R) {\n\t\treturn getsum_inner(L, R, 1, 0, SIZE);\n\t}\nprivate:\n\tT getsum_inner(const int queryL, const int queryR, const int index, const int segL, const int segR) {\n\t\tif (queryR <= segL || segR <= queryL)return 0;\n\t\tif (queryL <= segL && segR <= queryR)return v[index];\n\t\treturn getsum_inner(queryL, queryR, index * 2, segL, (segL + segR) / 2) +\n\t\t\tgetsum_inner(queryL, queryR, index * 2 + 1, (segL + segR) / 2, segR);\n\t}\n\n\t//x以上であるような2のべき乗数のうち最小のものを返す。\n\tint roundup_pow2(int x) {\n\t\tx--;\n\t\trep(i, 6)x |= x >> (1LL << i);\n\t\treturn x + 1;\n\t}\n\n\tint SIZE;\n\tvector<T>v;\n};\nsegtree_sum_pointupdate seg(1);\n\nint minimize(vector<int>&A, int start, int end) {\n\t//A[start]のマイナス符号の直後に(を置いて、\n\t//endの直後に)を置くとして、\n\t//( ) の内側を最小化したときの値を返す。\n\tassert(A[start] < 0 && A[end] < 0);\n\tint ans = -A[start];\n\tint cursor = start + 1;\n\tfor (; 0 < A[cursor]; cursor++) {\n\t\tans += A[cursor];\n\t}\n\tans -= seg.getsum(cursor, end + 1);\n\treturn ans;\n}\n\nsigned main() {\n\tcin.tie(0);\n\tios::sync_with_stdio(false);\n\n\tint N;\n\tcin >> N;\n\n\tseg = segtree_sum_pointupdate(N);\n\n\tvector<int>A(N), op(N - 1);\n\tint first = -1, last = -1;\n\trep(i, N) {\n\t\tstring s;\n\t\tif (i)cin >> s;\n\t\telse s = \"+\";\n\t\tint hugou = 1;\n\t\tif (s[0] == '-') {\n\t\t\thugou *= -1;\n\t\t\tif (first == -1)first = i;\n\t\t\tlast = i;\n\t\t}\n\t\tcin >> A[i];\n\t\tseg.update(i, A[i]);\n\t\tA[i] *= hugou;\n\t}\n\tif (first == last) {//マイナスの数が0or1\n\t\tint ans = 0;\n\t\trep(i, N)ans += A[i];\n\t\tcout << ans << endl;\n\t\treturn 0;\n\t}\n\n\tint ans = 0;\n\tfor (int i = 0; i < first; i++) {\n\t\tassert(0 < A[i]);\n\t\tans += A[i];\n\t}\n\tfor (int i = last+1; i < N; i++) {\n\t\tassert(0 < A[i]);\n\t\tans += A[i];\n\t}\n\twhile (first != last) {\n\t\tint m = minimize(A, first, last);\n\t\tif (m <= -A[first]) {\n\t\t\tans -= m;\n\t\t\tcout << ans << endl;\n\t\t\treturn 0;\n\t\t}\n\t\tans += A[first++];\n\t\tfor (; 0 < A[first]; first++)ans += A[first];\n\t}\n\tans += A[first];\n\tcout << ans << endl;\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n#define pb push_back\n#define mp make_pair\ntypedef long long ll;\ntypedef pair<int, int> pii;\ntypedef vector<int> vi;\ntypedef complex<double> point;\n#define xx real()\n#define yy imag()\n\n#define REP(i, a, b) for(int i = (a); i < (int)(b); i++)\n#define REPN(i, a, b) for(int i = (a); i <= (int)(b); i++)\n#define FA(it, x) for(__typeof((x).begin()) it = (x).begin(); it != (x).end(); it++)\n#define SZ(x) (int)(x).size()\n#define BE(x) (x).begin(), (x).end()\n#define SORT(x) sort(BE(x))\n#define _1 first\n#define _2 second\n\n#define x1 gray_cat_x1\n#define y1 gray_cat_y1\n\ntemplate<class T> T gcd(T a, T b) { return b ? gcd(b, a % b) : a; }\n\n#define file \"I1\"\n\nconst double EPS = 1e-9;\nconst double PI = acos(-1.);\nconst int INF = 1e9;\nconst ll MOD = 1e9 + 7;\n\nconst int MAXN = 1e5 + 5;\n\nll v[MAXN];\n\nchar op[MAXN];\n\nchar c[10];\n\nvoid refresh(ll cur, ll &ans, int &fl){\n\t//printf(\"%lld %lld\\n\", ans, cur);\n\tif (!fl){\n\t\tans = cur;\n\t}\n\tans = max(ans, cur);\n\tfl = 1;\n}\n\nvoid solve(){\n\tint n;\n\tscanf(\"%d%lld\", &n, &v[0]);\n\tll sum = 0ll;\n\tREP(i, 1, n){\n\t\tscanf(\"%s%lld\", &c[0], &v[i]);\n\t\top[i] = c[0];\n\t\tsum += v[i];\n\t}\n\top[n] = '-';\n\tn++;\n\tint fl = 0;\n\tll l_val = v[0];\n\tll ans = 0ll;\n\tREPN(i, 1, n){\n\t\tif (op[i] == '+'){\n\t\t\tl_val += v[i];\n\t\t\tsum -= v[i];\n\t\t} else {\n\t\t\tll v2 = v[i];\n\t\t\tREPN(j, i + 1, n){\n\t\t\t\tif (op[j] == '-'){\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tv2 += v[j];\n\t\t\t}\n\t\t\t//printf(\"%lld %lld %lld\\n\", l_val, -v2, sum - v2);\n\t\t\trefresh(l_val - v2 + sum - v2, ans, fl);\n\t\t\tl_val -= v[i];\n\t\t\tsum -= v[i];\n\t\t}\t\n\t}\n\t//refresh(l_val, ans, fl);\n\tprintf(\"%lld\\n\", ans);\n}   \n\nint main(){\n\n    //freopen(file\".in\", \"r\", stdin); freopen(file\".out\", \"w\", stdout);\n    int t = 1;\n    //cin >> t;\n    while(t--){\n        solve();    \n    }\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n#define X first\n#define Y second\n#define LL long long\n#define ULL unsigned long long\n#define PB push_back\n#define MP make_pair\n#define VI vector<int>\n#define PII pair<int,int>\n#define IOS ios::sync_with_stdio(0);cin.tie(0);\n#define IN freopen(\"in\", \"r\", stdin);\n#define OUT freopen(\"out\", \"w\", stdout);\n\nconst int maxn=100010;\n\nLL a[maxn],per[maxn];\nchar c[maxn];\n\nint main()\n{\n\tIOS;\n\tint n;\n\tcin>>n>>a[0];\n\tper[0]=a[0];\n\tLL abssum=a[0];\n\tLL ans=a[0];\n\tVI sub;\n\tfor (int j=1;j<n;++j)\n\t{\n\t\tcin>>c[j]>>a[j];\n\t\tper[j]=per[j-1]+a[j];\n\t\tabssum+=a[j];\n\t\tif (c[j]=='+') ans+=a[j];\n\t\telse\n\t\t{\n\t\t\tans-=a[j];\n\t\t\tsub.PB(j);\n\t\t}\n\t}\n\tfor (int j=0;j<sub.size()-1;++j)\n\t{\n\t\tint p1=sub[j];\n\t\tint p2=sub[j+1];\n\t\tLL tis=abssum-(per[p2-1]-per[p1-1])*2;\n\t\tans=max(ans,tis);\n\t\tabssum-=a[p1];\n\t}\n\tcout<<ans<<endl;\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\ninline int read(){int x=0,f=1;char ch=getchar();while(ch<'0'||ch>'9'){if(ch=='-')f=-1;ch=getchar();}while(ch>='0'&&ch<='9'){x=x*10+ch-'0';ch=getchar();}return x*f;}\nconst int maxn = 1e5 + 50;\nconst int mod = 1e9 + 7;\n\nint op[maxn] , a[maxn] , n ,nxt[maxn];\nlong long prefix[maxn],dp[maxn],neg[maxn];\nchar s[maxn];\n\nint main(int argc , char * argv[]){\n\tn=read();\n\tint pre = 1;\n\tlong long ans = 0;\n\top[0] = 1;\n\tfor(int i = 1 ; i <= n ; ++ i){\n\t\ta[i] = read();\n\t\tif( i != n ){\n\t\t\tscanf(\"%s\",s);\n\t\t\tif(s[0]=='-')\n\t\t\t\top[i]=-1;\n\t\t\telse\n\t\t\t\top[i]=1;\n\t\t}\n\t\tif(op[i-1]==-1)\n\t\t\tans-=a[i];\n\t\telse\n\t\t\tans+=a[i];\n\t}\n\tfor(int i = 1 ; i <= n ; ++ i){\n\t\tprefix[i] = prefix[i - 1] + a[i] * op[i - 1];\n\t\tneg[i] = neg[i - 1] - a[i];\n\t}\n\tmemset(nxt,-1,sizeof(nxt));\n\tfor(int i = n ; i >= 1 ; -- i){\n\t\tnxt[i] = nxt[i + 1];\n\t\tif(op[i]==-1)\n\t\t\tnxt[i]=i+1;\n\t}\n\tdp[n]=a[n]*op[n];\n\tfor(int i = n - 1 ; i >= 1 ; -- i){\n\t\tdp[i]=dp[i+1]+a[i]*op[i-1];\n\t\tif(op[i-1]==-1&&nxt[i]!=-1){\n\t\t\tdp[i]=max(dp[i],-(neg[n]-neg[nxt[i]-1])-(prefix[nxt[i]-1]-prefix[i]+a[i]));\n\t\t}\n\t}\n\tcout<<dp[1]<<endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n\nusing namespace std;\n\nlong A[100000];\nlong sum[100001];\nlong sum_abs[100001];\nvector<int> negs;\n\nint main(){\n    int N;\n    cin >> N;\n    long ans;\n    sum[0] = 0;\n    sum_abs[0] = 0;\n    cin >> A[0];\n    sum[1] = A[0];\n    sum_abs[1] = A[0];\n    for(int i = 1; i < N; i++){\n        char op;\n        cin >> op;\n        cin >> A[i];\n        if(op == '-') {\n            A[i] *= -1;\n            negs.push_back(i);\n        }\n        sum[i+1] = sum[i]+A[i];\n        sum_abs[i+1] = sum_abs[i]+abs(A[i]);\n    }\n    ans = sum[N];\n    for(int i = 0; i < negs.size()-1; i++){\n        int l = negs[i];\n        int r = negs[i+1];\n        long tmp = sum_abs[N]-sum_abs[r] + sum[l+1] - (sum_abs[r]-sum_abs[l+1]);\n        ans = max(ans, tmp);\n    }\n    cout << ans << endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstdio>\n#include<cstdlib>\n#include<cstring>\n#include<algorithm>\nusing namespace std;\nint a[101010];\nlong long sum[101010];\nchar s[101010][2];\nint la;\nint ne[101010];\nint main()\n{\n\tint n;\n\tlong long now=0,ans=-1010101010101010ll;\n\tscanf(\"%d%d\",&n,&a[1]);\n\ts[1][0]='+';\n\tla=0;\n\tfor(int i=2;i<=n;i++)\n\t{\n\t\tscanf(\"%s%d\",s[i],&a[i]);\n\t\tif(s[i][0]=='-')\n\t\t{\n\t\t\tne[la]=i;\n\t\t\tla=i;\n\t\t}\n\t}\n\tne[la]=n+1;\n\tsum[0]=0;\n\tfor(int i=1;i<=n;i++)\n\t\tsum[i]=sum[i-1]+a[i];\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tif(s[i][0]=='+')\n\t\t\tnow+=a[i];\n\t\telse\n\t\t{\n\t\t\tans=max(ans,now+sum[n]-sum[ne[i]-1]-(sum[ne[i]-1]-sum[i-1]));\n\t\t\tnow-=a[i];\n\t\t}\n\t}\n\tans=max(ans,now);\n\tprintf(\"%lld\",ans);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<cstring>\n#include<algorithm>\n#define rep(i,a,b) for(int i=(a);i<=(b);i++)\n#define per(i,a,b) for(int i=(a);i>=(b);i--)\n#define Rep(i,x) for(int i=head[x];i+1;i=nxt[i])\n#define rep2(i,a,b) for(int i=(a);i<(b);i++)\n#define ff first\n#define ss second\nusing namespace std;\nconst int N=100005;\nconst long long inf=1e18;\ntypedef long long ll;\n//------------------------------------------head---------------------------------------------------//\nll a[N];\nll f[N][2];\ninline void Updmax(ll &x,ll y){x=(x<=y)?y:x;}\nint main()\n{\n\tint m=0;ll tot=0;\n\tint n;scanf(\"%d\",&n);rep(i,1,n-1)\n\t{\n\t\tchar s[4];int x;scanf(\"%d%s\",&x,s+1);\n\t\ttot+=x;if(s[1]=='-'){a[++m]=tot;tot=0;}\n\t}int w;scanf(\"%d\",&w);tot+=w;a[++m]=tot;\n\t// 0 min\n\t// 1 max\n\tn=m;//f[1][0][1]=f[1][0][0]=a[1];\n\tf[1][1]=-inf;\n\trep(i,0,n)rep(j,0,1)f[i][j]=-inf;f[1][0]=a[1];\n\t//rep(i,1,n)printf(\"%d \",a[i]);\n\trep(i,1,n-1)\n\t{\n\t\tUpdmax(f[i+1][0],f[i][0]-a[i+1]);\n\t\tUpdmax(f[i+1][1],f[i][0]-a[i+1]);\n\t\tUpdmax(f[i+1][1],f[i][1]+a[i+1]);\n\t\tUpdmax(f[i+1][0],f[i][1]+a[i+1]);\n\t}\n\tprintf(\"%lld\\n\",max(f[n][0],f[n][1]));\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define rep(i,n) for(int i = 0; i < n; i++)\nusing namespace std;\ntypedef long long ll;\ntypedef pair<ll,ll> P;\n \nconst double EPS = 1e-10;\nconst ll INF = 100000000;\nconst ll MOD = 1000000007;\n\nint n;\nll a[100000];\nchar c[100000];\n\nint main() {\n    cin >> n;\n    rep(i,n) {\n        if (i == 0) cin >> a[i];\n        else cin >> c[i-1] >> a[i];\n    }\n    ll ans = 0;\n    ll sum = 0;\n    ll mcnt = INF*INF;\n    ll pm = 0;\n    rep(i,n) sum += a[i];\n    rep(i,n-1) {\n        if (c[i] == '+') {\n            mcnt += a[i+1];\n        } else {\n            ans = max(ans, sum-mcnt*2);\n            mcnt = a[i+1];\n            sum -= pm*2;\n            pm = a[i+1];\n        }\n    }\n    cout << max(ans, sum-mcnt*2) << endl;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "// g++ -std=c++11 a.cpp\n#include<iostream>\n#include<vector>\n#include<string>\n#include<algorithm>\t\n#include<map>\n#include<set>\n#include<unordered_map>\n#include<utility>\n#include<cmath>\n#include<random>\n#include<cstring>\n#include<queue>\n#include<stack>\n#include<bitset>\n#include<cstdio>\n#include<sstream>\n#include<iomanip>\n#include<assert.h>\n#include<typeinfo>\n#define loop(i,a,b) for(int i=a;i<b;i++) \n#define rep(i,a) loop(i,0,a)\n#define FOR(i,a) for(auto i:a)\n#define pb push_back\n#define all(in) in.begin(),in.end()\n#define shosu(x) fixed<<setprecision(x)\nusing namespace std;\n//kaewasuretyuui\ntypedef long long ll;\n//#define int ll\ntypedef int Def;\ntypedef pair<Def,Def> pii;\ntypedef vector<Def> vi;\ntypedef vector<vi> vvi;\ntypedef vector<pii> vp;\ntypedef vector<vp> vvp;\ntypedef vector<string> vs;\ntypedef vector<double> vd;\ntypedef vector<vd> vvd;\ntypedef pair<Def,pii> pip;\ntypedef vector<pip>vip;\n#define mt make_tuple\ntypedef tuple<int,int,int> tp;\ntypedef vector<tp> vt;\ntemplate<typename A,typename B>bool cmin(A &a,const B &b){return a>b?(a=b,true):false;}\ntemplate<typename A,typename B>bool cmax(A &a,const B &b){return a<b?(a=b,true):false;}\n//template<class C>constexpr int size(const C &c){return (int)c.size();}\n//template<class T,size_t N> constexpr int size(const T (&xs)[N])noexcept{return (int)N;}\nconst double PI=acos(-1);\nconst double EPS=1e-9;\nDef inf = sizeof(Def) == sizeof(long long) ? 2e18 : 1e9+10;\nint dx[]={0,1,0,-1};\nint dy[]={1,0,-1,0};\nint main(){\n\tint n;\n\tcin>>n;\n\tvvi in(n,vi(2));\n\trep(i,n){\n\t\tif(i){\n\t\t\tchar c;cin>>c;\n\t\t\tin[i][1]=c=='-';\n\t\t}\n\t\tcin>>in[i][0];\n\t}\n\tvvi dp(n+1,vi(3,-inf));\n\tdp[0][0]=0;\n\trep(i,n)rep(j,3)if(dp[i][j]!=-inf){\n\t\tint s=in[i][0];\n\t\tif(in[i][1])s*=-1;\n\t\tif(j==1)s*=-1;\n\t\tdp[i+1][j]=max(dp[i+1][j],dp[i][j]+s);\n\t\tif(j<2&&in[i][1])dp[i+1][j+1]=max(dp[i+1][j],dp[i][j]+s);\n\t\tif(j)dp[i+1][j-1]=max(dp[i+1][j],dp[i][j]+s);\n\t\tif(j>1)dp[i+1][j-2]=max(dp[i+1][j],dp[i][j]+s);\n\t}\n\t\n\tcout<<dp[n][0]<<endl;\n}\n\n\n\n\n\n\n"
  },
  {
    "language": "C++",
    "code": "#include<algorithm>\n#include<bitset>\n#include<cassert>\n#include<cctype>\n#include<cerrno>\n#include<cfloat>\n#include<ciso646>\n#include<climits>\n#include<clocale>\n#include<cmath>\n#include<complex>\n#include<csetjmp>\n#include<csignal>\n#include<cstdarg>\n#include<cstddef>\n#include<cstdio>\n#include<cstdlib>\n#include<cstring>\n#include<ctime>\n#include<ctype.h>\n#include<cwchar>\n#include<cwctype>\n#include<deque>\n#include<exception>\n#include<fstream>\n#include<functional>\n#include<iomanip>\n#include<ios>\n#include<iosfwd>\n#include<iostream>\n#include<istream>\n#include<iterator>\n#include<limits>\n#include<list>\n#include<locale>\n#include<map>\n#include<math.h>\n#include<memory>\n#include<new>\n#include<numeric>\n#include<ostream>\n#include<queue>\n#include<set>\n#include<sstream>\n#include<stack>\n#include<stdexcept>\n#include<stdio.h>\n#include<stdlib.h>\n#include<streambuf>\n#include<string.h>\n#include<string>\n#include<typeinfo>\n#include<utility>\n#include<valarray>\n#include<vector>\nusing namespace std;\ntypedef long long LL;\ninline void gtmx(LL &a,LL b){\n\tif (a<b) a=b;\n}\ninline void gtmn(LL &a,LL b){\n\tif (a>b) a=b;\n}\nint a[100010];\nint op[100010];\nLL dp[100010][4];\nint main(void){\n\tint n;\n\tscanf(\"%d\",&n);\n\tfor (int i=1;i<n;++i){\n\t\tscanf(\"%d\",&a[i]);\n\t\tchar c=getchar();\n\t\twhile(c!='+'&&c!='-') c=getchar();\n\t\top[i]=(c=='+')?1:-1;\n\t}\n\tscanf(\"%d\",&a[n]);\n\tmemset(dp,155,sizeof(dp));\n\tdp[1][0]=a[1];\n\tfor (int i=1;i<n;++i){\n\t\tgtmx(dp[i+1][0],dp[i][0]+a[i+1]*op[i]);\n\t\tgtmx(dp[i+1][0],dp[i][1]+a[i+1]*op[i]);\n\t\tgtmx(dp[i+1][1],dp[i][1]-a[i+1]*op[i]);\n\t\tgtmx(dp[i+1][2],dp[i][2]+a[i+1]*op[i]);\n\t\tif (op[i]==-1){\n\t\t\tgtmx(dp[i+1][1],dp[i][0]+a[i+1]*op[i]);\n\t\t\tgtmx(dp[i+1][2],dp[i][1]+a[i+1]);\n\t\t}\n\t\tgtmx(dp[i+1][1],dp[i+1][2]);\n\t\tgtmx(dp[i+1][0],dp[i+1][1]);\n\t}\n\tprintf(\"%lld\",dp[n][0]);\n}"
  },
  {
    "language": "C++",
    "code": "#include <stdio.h>\n#include <iostream>\n#include <algorithm>\n#include <memory.h>\n\nusing namespace std;\ntypedef long long LL;\nconst int maxn = 100005;\nconst LL inf = 1ll<<50;\n\nLL f[maxn][3];\nchar c[maxn][5];int n,a[maxn];\n\nint main()\n{\n\t#ifdef Amberframe\n\t\tfreopen(\"arc066c.in\",\"r\",stdin);\n\t\tfreopen(\"arc066c.out\",\"w\",stdout);\n\t#endif\n\tscanf(\"%d %d\",&n,&a[0]);\n\tfor (int i=1;i<n;i++)\n\t\tscanf(\"%s %d\",c[i],&a[i]);\n\tf[0][0]=a[0];f[0][1]=f[0][2]=-inf;\n\t\n\tfor (int i=1;i<n;i++)\n\tif (*c[i]=='-') {\n\t\tf[i][1]=f[i-1][0]-a[i];\n\t\tf[i][2]=f[i-1][1]+a[i];\n\t\tf[i][1]=max(f[i][1],f[i][2]);\n\t\tf[i][0]=max(f[i][0],f[i][1]);\n\t}\n\telse {\n\t\tf[i][0]=f[i-1][0]+a[i];\n\t\tf[i][1]=f[i-1][1]-a[i];\n\t\tf[i][2]=f[i-1][2]+a[i];\n\t\tf[i][1]=max(f[i][1],f[i][2]);\n\t\tf[i][0]=max(f[i][0],f[i][1]);\n\t}\n\tprintf(\"%lld\",f[n-1][0]);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "// Copyright (C) 2017 __debug.\n\n// This program is free software; you can redistribute it and/or\n// modify it under the terms of the GNU General Public License as\n// published by the Free Software Foundation; version 3\n\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n\n// You should have received a copy of the GNU General Public License\n// along with this program; If not, see <http://www.gnu.org/licenses/>.\n\n\n#include <bits/stdc++.h>\n#include <ext/pb_ds/assoc_container.hpp>\n#include <ext/pb_ds/priority_queue.hpp>\n\n#define x first\n#define y second\n#define MP std::make_pair\n#define SZ(x) ((int)(x).size())\n#define ALL(x) (x).begin(), (x).end()\n#define DEBUG(...) fprintf(stderr, __VA_ARGS__)\n#ifdef __linux__\n#define getchar getchar_unlocked\n#define putchar putchar_unlocked\n#endif\n\nusing std::pair;\nusing std::vector;\nusing std::string;\n\ntypedef long long LL;\ntypedef pair<int, int> Pii;\n\nconst int oo = 0x3f3f3f3f;\n\ntemplate<typename T> inline bool chkmax(T &a, T b) { return a < b ? a = b, true : false; }\ntemplate<typename T> inline bool chkmin(T &a, T b) { return b < a ? a = b, true : false; }\nstring procStatus()\n{\n    std::ifstream t(\"/proc/self/status\");\n    return string(std::istreambuf_iterator<char>(t), std::istreambuf_iterator<char>());\n}\ntemplate<typename T> T read(T &x)\n{\n    int f = 1;\n    char ch = getchar();\n    for (; !isdigit(ch); ch = getchar())\n        f = (ch == '-' ? -1 : 1);\n    for (x = 0; isdigit(ch); ch = getchar())\n        x = 10 * x + ch - '0';\n    return x *= f;\n}\ntemplate<typename T> void write(T x)\n{\n    if (x == 0) {\n        putchar('0');\n        return;\n    }\n    if (x < 0) {\n        putchar('-');\n        x = -x;\n    }\n    static char s[20];\n    int top = 0;\n    for (; x; x /= 10)\n        s[++top] = x % 10 + '0';\n    while (top)\n        putchar(s[top--]);\n}\n// EOT\n\nconst int MAXN = 1e5 + 5;\n\nint N;\nint A[MAXN];\nchar op[MAXN];\n\nvoid input()\n{\n    read(N);\n    read(A[1]);\n    for (int i = 2; i <= N; ++i) {\n        op[i] = getchar();\n        read(A[i]);\n    }\n}\n\nvoid solve()\n{\n    static LL sum[MAXN];\n    static int last[MAXN];\n\n    last[N + 1] = N + 1;\n    for (int i = N; i >= 1; --i) {\n        sum[i] = sum[i + 1] + A[i];\n        last[i] = op[i + 1] == '-' ? i + 1 : last[i + 1];\n    }\n\n    LL cur = A[1], ans = 0;\n    for (int i = 2; i <= N; ++i) {\n        if (op[i] == '+')\n            cur += A[i];\n        else {\n            int j = last[i];\n            chkmax(ans, cur - (sum[i] - sum[j]) + sum[j]);\n            cur -= A[i];\n        }\n    }\n    chkmax(ans, cur);\n\n    printf(\"%lld\\n\", ans);\n}\n\nint main()\n{\n#ifdef __DEBUG\n    freopen(\"E.in\", \"r\", stdin);\n    freopen(\"E.out\", \"w\", stdout);\n#endif\n\n    input();\n    solve();\n\n    return 0;\n}\n\n// 吃饭有时很像结婚，名义上最主要的东西，其实往往是附属品。\n// 吃讲究的饭事实上只是吃菜，正如讨阔佬的小姐，宗旨倒并不在女人。\n//   --钱钟书\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nconstexpr int N = 1e5;\n\nint n;\n\nint a[N];\nchar op[N];\n\nint main() {\n    std::ios::sync_with_stdio(false);\n    std::cin.tie(nullptr);\n    \n    std::cin >> n;\n    std::cin >> a[0];\n    int64_t sum = a[0];\n    for (int i = 1; i < n; ++i) {\n        std::cin >> op[i] >> a[i];\n        sum += op[i] == '-' ? -a[i] : a[i];\n    }\n    \n    int64_t ans = sum;\n    int64_t cur = 0;\n    \n    for (int i = n - 1; i >= 1; --i) {\n        cur += a[i];\n        if (op[i] == '-') {\n            sum += 2 * a[i];\n            ans = std::max(ans, sum - 2 * cur);\n            cur = 0;\n        }\n    }\n    \n    std::cout << ans << \"\\n\";\n    \n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n#define FOR(i,n) for(int i = 0; i < (n); i++)\n#define sz(c) ((int)c.size())\n#define ten(n) ((int)1e##n)\nusing ll = long long;\n\ntemplate<typename ...> static inline int getchar_unlocked(void) { return getchar(); }\ntemplate<typename ...> static inline void putchar_unlocked(int c) { putchar(c); }\n#define mygc(c) (c)=getchar_unlocked()\n#define mypc(c) putchar_unlocked(c)\nvoid reader(int& x) { int k, m = 0; x = 0; for (;;) { mygc(k); if (k == '-') { m = 1; break; }if ('0' <= k&&k <= '9') { x = k - '0'; break; } }for (;;) { mygc(k); if (k<'0' || k>'9')break; x = x * 10 + k - '0'; }if (m) x = -x; }\nvoid reader(ll& x) { int k, m = 0; x = 0; for (;;) { mygc(k); if (k == '-') { m = 1; break; }if ('0' <= k&&k <= '9') { x = k - '0'; break; } }for (;;) { mygc(k); if (k<'0' || k>'9')break; x = x * 10 + k - '0'; }if (m) x = -x; }\nint reader(char c[]) { int i, s = 0; for (;;) { mygc(i); if (i != ' '&&i != '\\n'&&i != '\\r'&&i != '\\t'&&i != EOF) break; }c[s++] = i; for (;;) { mygc(i); if (i == ' ' || i == '\\n' || i == '\\r' || i == '\\t' || i == EOF) break; c[s++] = i; }c[s] = '\\0'; return s; }\nint reader(string& c) { int i; for (;;) { mygc(i); if (i != ' '&&i != '\\n'&&i != '\\r'&&i != '\\t'&&i != EOF) break; }c.push_back(i); for (;;) { mygc(i); if (i == ' ' || i == '\\n' || i == '\\r' || i == '\\t' || i == EOF) break; c.push_back(i); }; return sz(c); }\ntemplate <class T, class S> void reader(T& x, S& y) { reader(x); reader(y); }\ntemplate <class T, class S, class U> void reader(T& x, S& y, U& z) { reader(x); reader(y); reader(z); }\ntemplate <class T, class S, class U, class V> void reader(T& x, S& y, U& z, V & w) { reader(x); reader(y); reader(z); reader(w); }\nvoid writer(int x, char c) { int s = 0, m = 0; char f[10]; if (x<0)m = 1, x = -x; while (x)f[s++] = x % 10, x /= 10; if (!s)f[s++] = 0; if (m)mypc('-'); while (s--)mypc(f[s] + '0'); mypc(c); }\nvoid writer(ll x, char c) { int s = 0, m = 0; char f[20]; if (x<0)m = 1, x = -x; while (x)f[s++] = x % 10, x /= 10; if (!s)f[s++] = 0; if (m)mypc('-'); while (s--)mypc(f[s] + '0'); mypc(c); }\nvoid writer(const char c[]) { int i; for (i = 0; c[i] != '\\0'; i++)mypc(c[i]); }\nvoid writer(const char x[], char c) { int i; for (i = 0; x[i] != '\\0'; i++)mypc(x[i]); mypc(c); }\ntemplate<class T> void writerLn(T x) { writer(x, '\\n'); }\ntemplate<class T, class S> void writerLn(T x, S y) { writer(x, ' '); writer(y, '\\n'); }\ntemplate<class T, class S, class U> void writerLn(T x, S y, U z) { writer(x, ' '); writer(y, ' '); writer(z, '\\n'); }\ntemplate<class T> void writerArr(T x[], int n) { if (!n) { mypc('\\n'); return; }FOR(i, n - 1)writer(x[i], ' '); writer(x[n - 1], '\\n'); }\ntemplate<class T> void writerArr(vector<T>& x) { writerArr(x.data(), (int)x.size()); }\n\ntemplate<class T> T gcd(T a, T b) { return b ? gcd(b, a % b) : a; }\ntemplate<class T> T lcm(T a, T b) { return a / gcd(a, b) * b; }\nll mod_pow(ll a, ll n, ll mod) {\n\tll ret = 1;\n\tll p = a % mod;\n\twhile (n) {\n\t\tif (n & 1) ret = ret * p % mod;\n\t\tp = p * p % mod;\n\t\tn >>= 1;\n\t}\n\treturn ret;\n}\ntemplate<class T> T extgcd(T a, T b, T& x, T& y) { for (T u = y = 1, v = x = 0; a;) { T q = b / a; swap(x -= q * u, u); swap(y -= q * v, v); swap(b -= q * a, a); } return b; }\ntemplate<class T> T mod_inv(T a, T m) { T x, y; extgcd(a, m, x, y); return (m + x % m) % m; }\n\nusing Pii = pair<int, int>;\nusing Pll = pair<ll, ll>;\n\nll sm[ten(5) + 10];\n\nint main() {\n\tint n; reader(n);\n\tvector<ll> a(n - 1);\n\tvector<char> ops(n - 1);\n\tll ans;\n\t{\n\t\tscanf(\"%lld\",&ans);\n\t\tFOR(i, n - 1) {\n\t\t\tscanf(\" %c %lld\", &ops[i], &a[i]);\n\t\t}\n\t}\n\tFOR(i, n - 1) sm[i + 1] += sm[i] + a[i];\n\tvector<int> negs;\n\tFOR(i, n - 1) if (ops[i] == '-') negs.push_back(i);\n\n\tll cur = ans;\n\tans = ll(-1e15);\n\tint neg_idx = 0;\n\tFOR(i, n - 1) {\n\t\tif (ops[i] == '-') {\n\t\t\tneg_idx++;\n\t\t\tif (sz(negs) != neg_idx) {\n\t\t\t\tint med = negs[neg_idx];\n\t\t\t\tll t1 = sm[med] - sm[i];\n\t\t\t\tll t2 = sm[n - 1] - sm[med];\n\t\t\t\tll tmp = cur + t2 - t1;\n\t\t\t\tans = max(ans, tmp);\n\t\t\t}\n\t\t}\n\n\t\tif (ops[i] == '+') {\n\t\t\tcur += a[i];\n\t\t} else {\n\t\t\tcur -= a[i];\n\t\t}\n\t}\n\tans = max(ans, cur);\n\twriterLn(ans);\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "//Δ\n#include<iostream>\n#include<cstdio>\n#include<fstream>\n#include<algorithm>\n#include<vector>\n#include<map>\n#include<set>\n#include<queue>\n#include<cmath>\n#include<cstring>\n#include<cstdlib>\nusing namespace std;\ntypedef long long LL;\ntypedef double DB;\nconst int N = 111111;\nconst LL INF = 1e18;\nint n,a[N],op[N];\nLL dp[N][3];\nint main()\n{\n\tint i,x;\n\tchar ch[5];\n\tscanf(\"%d\",&n);\n\tfor(i=1;i<n;i=i+1){\n\t\tscanf(\"%d%s\",a+i,ch);\n\t\top[i+1]=(ch[0]=='-');\n\t}\n\tscanf(\"%d\",a+n);\n\tdp[1][0]=a[1];\n\tdp[1][1]=-INF;\n\tdp[1][2]=-INF;\n\tfor(i=2;i<=n;i=i+1){\n\t\tif(op[i]){\n\t\t\tdp[i][0]=max(max(dp[i-1][0]-a[i],dp[i-1][1]+a[i]),dp[i-1][2]-a[i]);\n\t\t\tdp[i][1]=max(max(dp[i-1][0]-a[i],dp[i-1][1]+a[i]),dp[i-1][2]+a[i]);\n\t\t\tdp[i][2]=max(dp[i-1][1]+a[i],dp[i-1][2]-a[i]);\n\t\t}\n\t\telse{\n\t\t\tdp[i][0]=max(max(dp[i-1][0]+a[i],dp[i-1][1]+a[i]),dp[i-1][2]+a[i]);\n\t\t\tdp[i][1]=dp[i-1][1]-a[i];\n\t\t\tdp[i][2]=dp[i-1][2]+a[i];\n\t\t}\n\t}\n\tcout<<max(max(dp[n][0],dp[n][1]),dp[n][2]);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <cstring>\n#include <algorithm>\n\nusing namespace std;\n\ntypedef long long ll;\n\nll num[100005];\nint opt[100005];\n\nint main() {\n  int n;\n  scanf(\"%d\",&n);\n  ll ans=0,sum=0;\n  for(int i=1;i<=n;i++) {\n  \tif (i==1) opt[i]=1;\n  \telse {\n  \t\tchar str[5];\n  \t\tscanf(\"%s\",str);\n  \t\topt[i]=((str[0]=='+')?1:-1);\n\t  }\n  \tscanf(\"%lld\",&num[i]);\n\tans+=opt[i]*num[i];\n\tsum+=num[i];\n  }\n  for(int i=1;i<=n;i++)\n    if (opt[i]==-1) {\n    \tll s=sum-2LL*num[i];\n    \tfor(int j=i+1;j<=n&&opt[j]==1;j++) s-=2LL*num[j];\n    \tans=max(ans,s);\n    \tsum-=2LL*num[i];\n\t}\n  printf(\"%lld\\n\",ans);\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include \"bits/stdc++.h\"\n#define ll long long\n#define rep2(i,a,b) for(int i=a;i<=b;++i)\n#define rep(i,n) for(int i=0;i<n;i++)\n#define pii pair<int,int>\n#define tii tuple<int,int,int>\n#define pq priority_queue<int>\n#define pqg priority_queue<int,vector<int>,greater<int>>\n#define pb push_back\n#define edge(v,a,b) v[a].pb(b);v[b].pb(a);\nint MOD=1e9+7;\n#define INF 2*1e9\n#define N 310000 \nusing namespace std;\nstring alphabet(\"abcdefghijklmnopqrstuvwxyz\");\n\nmain(){\n    int n;\n    cin>>n;\n    int a[110000];\n    cin>>a[0];\n    rep2(i,1,n-1){\n        char c;cin>>c;\n        cin>>a[i];\n        if(c=='-')a[i]*=-1;\n    }\n    ll sum=0,pos=0;\n    vector<ll> v;\n    while(pos<n){\n        while(a[pos]>0&&pos<n){\n            sum+=a[pos];\n            pos++;\n        }\n        v.pb(sum);\n        if(pos<n) v.pb(a[pos]);\n        sum=0;pos++;\n    }\n    ll m=1e18,temp=0;\n    pos=1;\n    while(pos*2<=v.size()){\n        temp-=v[pos*2-1];\n        m=min(m,temp+v[pos*2]);\n        pos++;\n    }\n    rep(i,n){\n        sum+=abs(a[i]);\n    }\n    cout<<sum-2*m;\n    return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\ntypedef long long ll;\ntypedef long double ld;\nconst int maxn = 1e5 + 100;\nconst ll INF = 1e18;\nconst int MOD = 1e9 + 7;\n\nll t[4 * maxn];\nll to_add[4 * maxn];\nvoid push(int v) {\n    if (to_add[v]) {\n        t[v << 1] += to_add[v];\n        t[v << 1 | 1] += to_add[v];\n        to_add[v << 1] += to_add[v];\n        to_add[v << 1 | 1] += to_add[v];\n        to_add[v] = 0;\n    }\n}\nvoid add(int v, int tl, int tr, int l, int r, int val) {\n    if (tl >= r || l >= tr) {\n        return;\n    }\n    if (tl >= l && tr <= r) {\n        to_add[v] += val;\n        t[v] += val;\n        return;\n    }\n    int tm = (tl + tr) >> 1;\n    push(v);\n    add(v << 1, tl, tm, l, r, val);\n    add(v << 1 | 1, tm, tr, l, r, val);\n    t[v] = max(t[v << 1], t[v << 1 | 1]);\n}\nll get(int v, int tl, int tr, int l, int r) {\n    if (l >= tr || tl >= r) {\n        return -INF;\n    }\n    if (tl >= l && tr <= r) {\n        return t[v];\n    }\n    push(v);\n    int tm = (tl + tr) >> 1;\n    return max(get(v << 1, tl, tm, l, r), get(v << 1 | 1, tm, tr, l, r));\n}\nint main() {\n    int n;\n    cin >> n;\n\n    vector<int> vals;\n    vector<char> symbols;\n    symbols.push_back('+');\n    for (int i = 0; i + 1 < n; ++i) {\n        cin >> vals.emplace_back();\n        cin >> symbols.emplace_back();\n    }\n    cin >> vals.emplace_back();\n    if (n == 1) {\n        cout << vals.back();\n        return 0;\n    }\n    vector<vector<ll>> dp(n + 1, vector<ll>(3));\n    for (auto &vec:dp) {\n        for (auto &el:vec) {\n            el = -INF;\n        }\n    }\n    dp[0][0] = 0;\n    auto get_sign = [](int pw) {\n        return pw & 1 ? -1 : 1;\n    };\n    for (int i = 0; i < n; ++i) {\n        for (int j = 0; j <= 2; ++j) {\n            if (dp[i][j] == -INF) {\n                continue;\n            }\n//            cout << i << \" \" << j << \" \" << dp[i][j] << endl;\n            if (symbols[i] == '-') {\n                if (j == 0) {\n                    dp[i + 1][j + 1] = max(dp[i + 1][j + 1], dp[i][j] + get_sign(j + 1) * vals[i]);\n                } else {\n                    for (int e = 1; e <= 2; ++e) {\n                        dp[i + 1][e] = max(dp[i + 1][e], dp[i][j] + get_sign(e) * vals[i]);\n                    }\n                }\n            } else {\n                for (int e = 0; e <= j; ++e) {\n                    dp[i + 1][e] = max(dp[i + 1][e], dp[i][j] + get_sign(e) * vals[i]);\n                }\n            }\n        }\n    }\n    cout << max({dp[n][0], dp[n][1], dp[n][2]});\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\n#define MAX_N 100005\nconst ll INF = (1LL<<60);\n\nll max(ll a,ll b,ll c){\n  return max(a,max(b,c));\n}\n\nint N;\nll A[MAX_N];\nll dp[MAX_N][3];\n\nint main(){\n  for(int i=0;i<MAX_N;i++)\n    for(int j=0;j<3;j++)\n      dp[i][j]=-INF;\n  cin>>N;\n  cin>>dp[0][0];\n  \n  for(int i=0;i<N-1;i++){\n    char ch;\n    ll x;\n    cin>>ch>>x;\n\n    if(ch=='+'){\n      dp[i+1][0]=max(dp[i][0]+x,dp[i][1]+x);\n      dp[i+1][1]=max(dp[i][1]-x,dp[i][2]-x);\n      dp[i+1][2]=dp[i][2]+x;\n    }else if(ch=='-'){\n      dp[i+1][0]=-INF;\n      dp[i+1][1]=max(dp[i][0]-x,dp[i][1]-x,dp[i][2]-x);\n      dp[i+1][2]=max(dp[i][1]+x,dp[i][2]+x);\n    }\n\n  }\n  cout<< max(dp[N-1][0], max(dp[N-1][1],dp[N-1][2])) <<endl;\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\n//#include <boost/multiprecision/cpp_int.hpp>\n//typedef boost::multiprecision::cpp_int ll;\ntypedef long double dd;\n#define i_7 (ll)(1E9+7)\n//#define i_7 998244353\n#define i_5 i_7-2\nll mod(ll a){\n    ll c=a%i_7;\n    if(c>=0)return c;\n    return c+i_7;\n}\ntypedef pair<ll,ll> l_l;\nll inf=(ll)1E16;\n#define rep(i,l,r) for(ll i=l;i<=r;i++)\n#define pb push_back\nll max(ll a,ll b){if(a<b)return b;else return a;}\nll min(ll a,ll b){if(a>b)return b;else return a;}\nvoid Max(ll &pos,ll val){pos=max(pos,val);}//Max(dp[n],dp[n-1]);\nvoid Min(ll &pos,ll val){pos=min(pos,val);}\n//void Add(ll &pos,ll val){pos=mod(pos+val);}\ndd EPS=1E-9;\n#define fastio ios::sync_with_stdio(false); cin.tie(0); cout.tie(0);\n////////////////////////////\n\nint main(){fastio\n    ll n;cin>>n;\n    ll c[n];\n    string s;string debri;\n    rep(i,0,n-1){\n        cin>>c[i];\n        if(i!=n-1){\n            cin>>debri;\n            s+=debri;\n        }\n    }\n    rep(i,0,n-2){\n        if(s[i]=='-')break;\n        if(i==n-2){\n            ll ans=0;rep(i,0,n-1)ans+=c[i];\n            cout<<ans<<endl;return 0;\n        }\n    }\n    ll spos=0;\n    ll anspre=c[0];\n    rep(i,0,n-2){\n        if(s[i]=='+'){\n            anspre+=c[i+1];\n        }else{\n            spos=i+1;\n            break;\n        }\n    }\n    vector<ll>a,b;\n    while(spos<=n-1){\n        a.pb(c[spos]);//s[i-1]=='='\n        spos++;\n        ll sum=0;\n        while(spos<=n-1&&s[spos-1]=='+'){\n            sum+=c[spos];\n            spos++;\n        }\n        b.pb(sum);\n    }\n    //for(auto x:a)cout<<x<<\" \";cout<<endl;\n    //for(auto x:b)cout<<x<<\" \";cout<<endl;\n    ll vs=a.size();\n    ll xs[vs],ys[vs];\n    xs[0]=0;\n    rep(i,1,vs-1){\n        xs[i]=xs[i-1]+b[i-1]-a[i-1];\n    }\n    ys[vs-1]=0;\n    for(ll i=vs-2;i>=0;i--){\n        ys[i]=ys[i+1]+a[i+1]+b[i+1];\n    }\n    //rep(i,0,vs-1)cout<<xs[i]<<\" \";cout<<endl;\n    //rep(i,0,vs-1)cout<<ys[i]<<\" \";cout<<endl;\n    ll ans=-inf;\n    rep(i,0,vs-1){\n        Max(ans,xs[i]+ys[i]-a[i]-b[i]);\n    }\n    cout<<ans+anspre<<endl;\n    \n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\nlong long  a[100005];\nchar s[100005];\nint n;\nlong long dp[100005][3];\nint main()\n{\n    ios::sync_with_stdio(0);\n    cin>>n>>a[0];\n    for(int i =1;i<n;i++)\n        cin>>s[i]>>a[i];\n    for(int i =0;i<n;i++)\n        for(int j =0;j<3;j++)\n          dp[i][j]=-1e15;\n    dp[0][0]=a[0];\n    for(int i =1;i<n;i++)\n    {\n        dp[i][1]=dp[i-1][1];\n        dp[i][2]=dp[i-1][2];\n        dp[i][0]=dp[i-1][0];\n      //  cout<<a[i]<<\" \"<<s[i]<<endl;\n     //   cout<<dp[i][0]<<\" \"<<dp[i][1]<<\" \"<<dp[i][2]<<endl;\n        if(s[i]=='-')\n        {\n             dp[i][0]-=a[i];\n             dp[i][1]+=a[i];\n             dp[i][2]-=a[i];\n             dp[i][2]=max(dp[i][1],dp[i][2]);\n             dp[i][1]=max(dp[i][0],dp[i][1]);\n        }\n        else\n        {\n             dp[i][0]+=a[i];\n             dp[i][1]-=a[i];\n             dp[i][2]+=a[i];\n        }\n        dp[i][1]=max(dp[i][2],dp[i][1]);\n        dp[i][0]=max(dp[i][1],dp[i][0]);\n     // cout<<dp[i][0]<<\" \"<<dp[i][1]<<\" \"<<dp[i][2]<<endl;\n    }\n    cout<<dp[n-1][0]<<endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "///////////////////////////////////////////////////////////\n///////////////////////////////////////////////////////////\n//                       _oo0oo_                         //\n//                      o8888888o                        //\n//                      88\" . \"88      ------ hzt1       //\n//                      (| -_- |)                        //\n//                      0\\  =  /0                        //\n//                    ___/`---'\\___                      //\n//                  .' \\|     |// '.                     //\n//                 / \\|||  :  |||// \\                    //\n//                / _||||| -:- |||||- \\                  //\n//               |   | \\  -  /// |     |                 //\n//               | \\_|  ''\\---/''  |_/ |                 //\n//               \\  .-\\__  '-'  ___/-. /                 //\n//             ___'. .'  /--.--\\  `. .'___               //\n//          .\"\" '<  `.___\\_<|>_/___.' >' \"\".             //\n//         | | :  `- \\`.;`\\ _ /`;.`/ - ` : | |           //\n//         \\  \\ `_.   \\_ __\\ /__ _/   .-` /  /           //\n//     =====`-.____`.___ \\_____/___.-`___.-'=====        //\n//                       `=---='                         //\n//                                                       //\n//                                                       //\n//     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~       //\n//                                                       //\n//                 God-He Bless All.                     //\n//           This Code Will Never Explode.               //\n//                                                       //\n//                                                       //\n///////////////////////////////////////////////////////////\n///////////////////////////////////////////////////////////\n#include<cstdio>\n#include<cstring>\n#include<cctype>\n#include<algorithm>\n#include<vector>\n#define pb push_back\n#define mp make_pair\n#define xx first\n#define yy second\n#define rep(i,a,b) for(int i=(a),i##_end_=(b);i<=i##_end_;i++)\n#define dwn(i,a,b) for(int i=(a),i##_end_=(b);i>=i##_end_;i--)\nusing namespace std;\nconst int Size=1<<16;\nchar buffer[Size],*head,*tail;\ninline char Getchar() {\n    if(head==tail) {\n        int l=fread(buffer,1,Size,stdin);\n        tail=(head=buffer)+l;\n    }\n    if(head==tail) return -1;\n    return *head++;\n}\ninline int read() {\n    int x=0,f=1;char c=Getchar();\n    for(;!isdigit(c);c=Getchar()) if(c=='-') f=-1;\n    for(;isdigit(c);c=Getchar()) x=x*10+c-'0';\n    return x*f;\n}\ninline char readc() {\n\tchar c=Getchar();\n\twhile(c!='-'&&c!='+') c=Getchar();\n\treturn c;\n}\ntypedef long long ll;\ntypedef pair<int,int> pii;\nconst int maxn=100010;\nconst ll inf=1ll<<60;\nint n,A[maxn],tp[maxn];\nll res,sum[maxn];\nint main() {\n\tn=read();res=read();\n\trep(i,2,n) {\n\t\tchar c=readc();A[i]=read();\n\t\tif(c=='+') tp[i]=1;\n\t\telse tp[i]=0;\n\t}\n\tdwn(i,n,2) sum[i]=sum[i+1]+A[i];\n\tll ans=res;\n\trep(i,2,n) ans+=A[i]*(tp[i]==1?1:-1);\n\trep(i,2,n) if(!tp[i]) {\n\t\trep(j,2,i-1) res+=A[j];\n\t\tres-=A[i];\n\t\trep(j,i+1,n) {\n\t\t\tif(!tp[j]) ans=max(ans,res+sum[j]);//,printf(\"%d %d %lld\\n\",i,j,res+sum[j]);\n\t\t\tres-=A[j];\n\t\t}\n\t\tans=max(ans,res);\n\t}\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<vector>\n#include<cstring>\n#include<queue>\n#include<algorithm>\nusing namespace std;\nconst long long MAXN=100005,INF=4223372036854775807ll;\nlong long n;\nlong long d[MAXN][3];\nlong long a;\nint main()\n{\n\tscanf(\"%lld\",&n);\n\tchar s[100];\n\tscanf(\"%lld\",&a);\n\tfor(long long i=0;i<=n+1;i++)\n\t{\n\t\td[i][0]=d[i][1]=d[i][2]=-INF;\n\t}\n\td[1][0]=a;\n\tfor(long long i=2;i<=n;i++)\n\t{\n\t\tscanf(\"%s\",s);\n\t\tscanf(\"%lld\",&a);\n\t\tif(s[0]=='+')\n\t\t{\n\t\t\td[i][0]=max(d[i-1][0],d[i-1][1])+a;\n\t\t\td[i][1]=d[i-1][1]-a;\n\t\t\td[i][2]=d[i-1][2]+a;\n\t\t}\n\t\tif(s[0]=='-')\n\t\t{\n\t\t\td[i][0]=-INF;\n\t\t\td[i][1]=max(d[i-1][0],d[i-1][1])-a;\n\t\t\td[i][2]=max(d[i-1][1],d[i-1][2])+a;\n\t\t}\n\t}\n\tprintf(\"%lld\\n\",max(max(d[n][0],d[n][1]),d[n][2]));\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\ntemplate <class T>\ninline void read(T &res)\n{\n\tres = 0; bool bo = 0; char c;\n\twhile (((c = getchar()) < '0' || c > '9') && c != '-');\n\tif (c == '-') bo = 1; else res = c - 48;\n\twhile ((c = getchar()) >= '0' && c <= '9')\n\t\tres = (res << 3) + (res << 1) + (c - 48);\n\tif (bo) res = ~res + 1;\n}\n\ntemplate <class T>\ninline T Max(const T &a, const T &b) {return a > b ? a : b;}\n\ntypedef long long ll;\n\nconst int N = 2e5 + 5, M = 4e6 + 5;\n\nint n, a[N], add[N];\nchar s[M], op[N];\nll sum[N];\n\nvoid work()\n{\n\tint tot = 1, m; a[1] = 0;\n\tread(n); gets(s + 1);\n\tm = strlen(s + 1);\n\tfor (int i = 1; i <= m; i++)\n\t{\n\t\tif (s[i] == ' ') continue;\n\t\tif (s[i] == '+' || s[i] == '-') op[tot++] = s[i], a[tot] = 0;\n\t\telse a[tot] = a[tot] * 10 + s[i] - '0';\n\t}\n\tfor (int i = 1; i <= n; i++) sum[i] = sum[i - 1] + a[i];\n\tadd[n] = 0;\n\tfor (int i = n - 1; i >= 1; i--) add[i] = op[i] == '-' ? 0 : add[i + 1] + 1;\n\tll cur = a[1], ans = -1e18;\n\tfor (int i = 1; i < n; i++)\n\t\tif (op[i] == '-') ans = Max(ans, cur - (sum[i + 1 + add[i + 1]]\n\t\t\t- sum[i]) + sum[n] - sum[i + 1 + add[i + 1]]), cur -= a[i + 1];\n\t\telse cur += a[i + 1];\n\tprintf(\"%lld\\n\", Max(cur, ans));\n}\n\n\nint main()\n{\n\tT = 1;\n\twhile (T--) work();\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n\n#define fi first\n#define se second\n#define U unsigned\n#define P std::pair<int,int>\n#define LL long long\n#define pb push_back\n#define MP std::make_pair\n#define all(x) x.begin(),x.end()\n#define CLR(i,a) memset(i,a,sizeof(i))\n#define FOR(i,a,b) for(int i = a;i <= b;++i)\n#define ROF(i,a,b) for(int i = a;i >= b;--i)\n#define DEBUG(x) std::cerr << #x << '=' << x << std::endl\n\nconst int MAXN = 2e5 + 5;\n\nint a[MAXN],opt[MAXN],n;\nLL suf[MAXN],sm[MAXN];\n\nint main(){\n    scanf(\"%d%d\",&n,a+1);opt[1] = 1;\n    FOR(i,2,n){\n        char str[3];scanf(\"%s\",str);\n        opt[i] = str[0]=='-'?-1:1;\n        scanf(\"%d\",a+i);\n    }\n    FOR(i,1,n) sm[i] = sm[i-1]+a[i];\n    int lst = n;\n    ROF(i,n,1){\n        suf[i] = sm[lst]-sm[i];\n        if(opt[i+1] == -1) lst = i;\n    }\n//    FOR(i,1,n) DEBUG(suf[i]);\n    LL ans = a[1],pre = 0;\n    FOR(i,2,n) ans += a[i]*opt[i];\n    FOR(i,1,n-1){\n        pre += opt[i]*a[i];\n        if(opt[i+1] == 1) continue;\n        else ans = std::max(ans,pre+sm[n]-sm[i]-2*suf[i]);\n    }\n    printf(\"%lld\\n\",ans);\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "//void __(){\n//    _(int,n);\n//    vl a(n);\n//    string signs;\n//    ll ans = 0;\n//    char sign = '+';\n//    rep(i,n){\n//        cin >> a[i];\n//        ans += (sign == '+' ? 1 : -1) * a[i];\n//        if(i+1 < n)\n//            cin >> sign;\n//        signs.pb(sign);\n//    }\n//    ll total = 0;\n//    rep(i,n)\n//        total += a[i];\n//    ll cur_signed = a[0];\n//    ll cur_abs = a[0];\n//    ll last_signed = -INF;\n//    ll last_abs = 0;\n//    rep(i,n-1){\n//        if(signs[i] == '-'){\n//            ll in_between = cur_abs - last_abs;\n//            ll later = total - cur_abs;\n//            ll cur = last_signed - in_between + later;\n//            ans = max(ans,cur);\n//            last_signed = cur_signed;\n//            last_abs = cur_abs;\n//        }\n//        cur_signed += (signs[i] == '+' ? 1 : -1)*a[i+1];\n//        cur_abs += a[i+1];\n//    }\n//    print ans;\n//}\n//\n#include <iomanip>\n#include <algorithm>\n#include <cassert>\n#include <vector>\n#include <utility>\n#include <iostream>\n#include <string>\n#define pb push_back\n#define REP_ZERO_INT(i,r) for(int i = 0; i < (r); ++i)\n#define GET_REP_MACRO(_1,_2,_3,_4,NAME,...) NAME\n#define rep(...) GET_REP_MACRO(__VA_ARGS__,REP_ANY,REP_INT,REP_ZERO_INT)(__VA_ARGS__)\n#define all(v) (v).begin(), (v).end()\n#define sz(v) ll(v.size())\n#define T1 template<typename T> static\nusing namespace std;\ntypedef long long ll;\ntypedef vector<ll> vl;\nconst ll INF = ll(2e18) + 666;\nT1 ostream& operator<<(ostream& stream, const vector<T>& t);\nT1 istream& read(T, T, istream& = cin);\nstruct _print {\n    string sep,end;\n    bool space;\n    ostream &stream;\n    _print(string _sep=\" \",string _end=\"\\n\",\n            ostream &_stream = cout) \n        : sep(_sep),end(_end),space(false),\n            stream(_stream) {}\n    ~_print() { stream << end; }\n\n    template <typename T>\n        _print &operator , (const T &t) {\n            if (space) stream << sep;\n            space = true;\n            stream << t;\n            return *this;\n        }\n};\n#define print _print(),\n#define INPUT_WITHOUT_INIT(type,name) type name; cin >> name\n#define GET_INPUT_MACRO(_1,_2,_3,_4,_5,_6,_7,_8,NAME,...) NAME\n#define _(...) GET_INPUT_MACRO(__VA_ARGS__,_IWI,_IWI,_IWI,_IWI,_IWI,_IWI,INPUT_WITHOUT_INIT)(__VA_ARGS__)\nvoid __(){\n    _(int,n);\n    vl a(n);\n    string signs;\n    ll ans = 0;\n    char sign = '+';\n    rep(i,n){\n        cin >> a[i];\n        ans += (sign == '+' ? 1 : -1) * a[i];\n        if(i+1 < n)\n            cin >> sign;\n        signs.pb(sign);\n    }\n    ll total = 0;\n    rep(i,n)\n        total += a[i];\n    ll cur_signed = a[0];\n    ll cur_abs = a[0];\n    ll last_signed = -INF;\n    ll last_abs = 0;\n    rep(i,n-1){\n        if(signs[i] == '-'){\n            ll in_between = cur_abs - last_abs;\n            ll later = total - cur_abs;\n            ll cur = last_signed - in_between + later;\n            ans = max(ans,cur);\n            last_signed = cur_signed;\n            last_abs = cur_abs;\n        }\n        cur_signed += (signs[i] == '+' ? 1 : -1)*a[i+1];\n        cur_abs += a[i+1];\n    }\n    print ans;\n}\n\nint main(){\n    ios_base::sync_with_stdio(false);\n    cin.tie(nullptr);\n    cout << fixed << setprecision(15);\n        __();\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\nconst int S=(1<<20)+5;\nchar buf[S],*H,*T;\ninline char Get()\n{\n    if(H==T) T=(H=buf)+fread(buf,1,S,stdin);\n    if(H==T) return -1;return *H++;\n}\ninline int read()\n{\n    int x=0;char c=Get();\n    while(!isdigit(c)) c=Get();\n    while(isdigit(c)) x=x*10+c-'0',c=Get();\n    return x;\n}\ninline int readopt()\n{\n    char c=Get();\n    while(c!='+'&&c!='-') c=Get();\n    return c;\n}\n\ntypedef long long LL;\nint num,n,k;\nchar opt;\nLL f[2][3];\n\ninline LL mymax(const LL &x,const LL &y){return x>y?x:y;}\n\nint main()\n{\n    n=read();\n    f[k=0][0]=read();\n    f[0][1]=f[0][2]=-(1ll<<60);\n    for(int i=1;i<n;i++,k^=1)\n    {\n        opt=readopt();num=read();\n        if(opt=='+')\n        {\n            f[k^1][0]=mymax(mymax(f[k][0],f[k][1]),f[k][2])+num;  //原地转移 或 拆1/2个括号\n            f[k^1][1]=mymax(f[k][1],f[k][2])-num;  //原地转移 或 拆1个括号\n            f[k^1][2]=f[k][2]+num;  //原地转移\n        }\n        else\n        {\n            f[k^1][0]=mymax(mymax(f[k][0],f[k][1]),f[k][2])-num;  //原地转移 或 拆1/2个括号\n            f[k^1][1]=mymax(mymax(f[k][1],f[k][2])+num,f[k][0]-num);  //原地转移 或 拆1个括号 或 添1个括号\n            f[k^1][1]=mymax(mymax(f[k][1]-num,f[k][2]-num),f[k^1][1]);  //拆1/2个括号又添1个括号\n            f[k^1][2]=mymax(f[k][2]-num,f[k][1]+num);  //原地转移 或 添1个括号\n            f[k^1][2]=mymax(f[k][2]+num,f[k^1][2]);  //拆1个括号又添1个括号\n        }\n    }\n    LL ans=mymax(mymax(f[k][0],f[k][1]),f[k][2]);\n    printf(\"%lld\\n\",ans);\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nstatic const int Maxn = 100005;\n\nint n, st, ed;\nchar op[Maxn];\nlong long a[Maxn];\nlong long dp[Maxn][3];\n\nint main() {\n  scanf(\"%d\\n\", &n);\n  scanf(\"%lld \", a + 1), op[1] = '+';\n  for (int i = 2; i <= n; ++i)\n    scanf(\"%c %lld \", op + i, a + i);\n  memset(dp, -63, sizeof(dp));\n  dp[0][0] = 0;\n  for (int i = 1; i <= n; ++i) {\n    dp[i][2] = dp[i - 1][2] + a[i];\n    if (op[i] == '-') {\n      dp[i][1] = max(dp[i - 1][0] - a[i], dp[i - 1][1] + a[i]);\n      dp[i][2] = max(dp[i][2], dp[i - 1][1] + a[i]);\n    }\n    else {\n      dp[i][0] = max(dp[i - 1][0] + a[i], dp[i - 1][1] + a[i]);\n      dp[i][1] = max(dp[i - 1][2] + a[i], dp[i - 1][1] - a[i]);\n    }\n  }\n  printf(\"%lld\\n\", max(dp[n][0], max(dp[n][1], dp[n][2])));\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n#define forr(x,arr) for(auto&& x:arr)\n#define _overload3(_1,_2,_3,name,...) name\n#define _rep2(i,n) _rep3(i,0,n)\n#define _rep3(i,a,b) for(int i=int(a);i<int(b);++i)\n#define rep(...) _overload3(__VA_ARGS__,_rep3,_rep2,)(__VA_ARGS__)\n#define _rrep2(i,n) _rrep3(i,0,n)\n#define _rrep3(i,a,b) for(int i=int(b)-1;i>=int(a);i--)\n#define rrep(...) _overload3(__VA_ARGS__,_rrep3,_rrep2,)(__VA_ARGS__)\n#define all(x) (x).begin(),(x).end()\n#define bit(n) (1LL<<(n))\n#define sz(x) ((int)(x).size())\n#define TEN(n) ((ll)(1e##n))\n#define fst first\n#define snd second\n\nstring DBG_DLM(int &i){return(i++==0?\"\":\", \");}\n#define DBG_B(exp){int i=0;os<<\"{\";{exp;}os<<\"}\";return os;}\ntemplate<class T>ostream&operator<<(ostream&os,vector<T>v);\ntemplate<class T>ostream&operator<<(ostream&os,set<T>v);\ntemplate<class T>ostream&operator<<(ostream&os,queue<T>q);\ntemplate<class T>ostream&operator<<(ostream&os,priority_queue<T>q);\ntemplate<class T,class K>ostream&operator<<(ostream&os,pair<T,K>p);\ntemplate<class T,class K>ostream&operator<<(ostream&os,map<T,K>mp);\ntemplate<class T,class K>ostream&operator<<(ostream&os,unordered_map<T,K>mp);\ntemplate<int I,class TPL>void DBG(ostream&os,TPL t){}\ntemplate<int I,class TPL,class H,class...Ts>void DBG(ostream&os,TPL t){os<<(I==0?\"\":\", \")<<get<I>(t);DBG<I+1,TPL,Ts...>(os,t);}\ntemplate<class T,class K>void DBG(ostream&os,pair<T,K>p,string delim){os<<\"(\"<<p.first<<delim<<p.second<<\")\";}\ntemplate<class...Ts>ostream&operator<<(ostream&os,tuple<Ts...>t){os<<\"(\";DBG<0,tuple<Ts...>,Ts...>(os,t);os<<\")\";return os;}\ntemplate<class T,class K>ostream&operator<<(ostream&os,pair<T,K>p){DBG(os,p,\", \");return os;}\ntemplate<class T>ostream&operator<<(ostream&os,vector<T>v){DBG_B(forr(t,v){os<<DBG_DLM(i)<<t;});}\ntemplate<class T>ostream&operator<<(ostream&os,set<T>s){DBG_B(forr(t,s){os<<DBG_DLM(i)<<t;});}\ntemplate<class T>ostream&operator<<(ostream&os,queue<T>q){DBG_B(for(;q.size();q.pop()){os<<DBG_DLM(i)<<q.front();});}\ntemplate<class T>ostream&operator<<(ostream&os,priority_queue<T>q){DBG_B(for(;q.size();q.pop()){os<<DBG_DLM(i)<<q.top();});}\ntemplate<class T,class K>ostream&operator<<(ostream&os,map<T,K>m){DBG_B(forr(p,m){os<<DBG_DLM(i);DBG(os,p,\"->\");});}\ntemplate<class T,class K>ostream&operator<<(ostream&os,unordered_map<T,K>m){DBG_B(forr(p,m){os<<DBG_DLM(i);DBG(os,p,\"->\");});}\n#define DBG_OVERLOAD(_1,_2,_3,_4,_5,_6,macro_name,...)macro_name\n#define DBG_LINE(){char s[99];sprintf(s,\"line:%3d | \",__LINE__);cerr<<s;}\n#define DBG_OUTPUT(v){cerr<<(#v)<<\"=\"<<(v);}\n#define DBG1(v,...){DBG_OUTPUT(v);}\n#define DBG2(v,...){DBG_OUTPUT(v);cerr<<\", \";DBG1(__VA_ARGS__);}\n#define DBG3(v,...){DBG_OUTPUT(v);cerr<<\", \";DBG2(__VA_ARGS__);}\n#define DBG4(v,...){DBG_OUTPUT(v);cerr<<\", \";DBG3(__VA_ARGS__);}\n#define DBG5(v,...){DBG_OUTPUT(v);cerr<<\", \";DBG4(__VA_ARGS__);}\n#define DBG6(v,...){DBG_OUTPUT(v);cerr<<\", \";DBG5(__VA_ARGS__);}\n#define DEBUG0(){DBG_LINE();cerr<<endl;}\n#ifdef LOCAL\n#define out(...){DBG_LINE();DBG_OVERLOAD(__VA_ARGS__,DBG6,DBG5,DBG4,DBG3,DBG2,DBG1)(__VA_ARGS__);cerr<<endl;}\n#else\n#define out(...)\n#endif\n\nusing ll=long long;\nusing pii=pair<int,int>;using pll=pair<ll,ll>;using pil=pair<int,ll>;using pli=pair<ll,int>;\nusing vs=vector<string>;using vvs=vector<vs>;using vvvs=vector<vvs>;\nusing vb=vector<bool>;using vvb=vector<vb>;using vvvb=vector<vvb>;\nusing vi=vector<int>;using vvi=vector<vi>;using vvvi=vector<vvi>;\nusing vl=vector<ll>;using vvl=vector<vl>;using vvvl=vector<vvl>;\nusing vd=vector<double>;using vvd=vector<vd>;using vvvd=vector<vvd>;\nusing vpii=vector<pii>;using vvpii=vector<vpii>;using vvvpii=vector<vvpii>;\ntemplate<class A,class B>bool amax(A&a,const B&b){return b>a?a=b,1:0;}\ntemplate<class A,class B>bool amin(A&a,const B&b){return b<a?a=b,1:0;}\nll ri(){ll l;cin>>l;return l;} string rs(){string s;cin>>s;return s;}\n\nvoid Main() {\n  int n = ri();\n\n  ll a0 = ri();\n\n  vector<int> A(n-1);\n  vector<char> ops(n-1);\n  rep(i, n-1) {\n    cin >> ops[i] >> A[i];\n  }\n\n  out(A);\n  out(ops);\n\n  ll inf = 1e18;\n\n  vvl minp(n-1, vl(n, +inf));\n  vvl maxp(n-1, vl(n, -inf));\n\n\n  rep(i, n-1) {\n    int v = A[i];\n    minp[i][i+1] = v;\n    maxp[i][i+1] = v;\n  }\n\n  function<ll(int, int)> fmin, fmax;\n\n  fmax = [&](int l, int r) -> ll {\n    if (r <= l) return 0;\n    ll &ret = maxp[l][r];\n    if (ret != -inf) return ret;\n\n    if (ops[l] == '+') {\n      ret = A[l] + fmax(l+1, r);\n    }\n    else {\n      rep(p, l + 1, r+1) {\n        ll cand = -fmin(l, p) + fmax(p, r);\n        amax(ret, cand);\n      }\n    }\n    out(\"fmax\", l, r, ret);\n    return ret;\n  };\n\n  fmin = [&](int l, int r) -> ll {\n    if (r <= l) return 0;\n    ll &ret = minp[l][r];\n    if (ret != +inf) return ret;\n\n    ll head = A[l];\n\n    if (ops[l] == '+') {\n      ret = head + fmin(l+1, r);\n    }\n    else {\n      rep(p, l + 1, r+1) {\n        if (ops[p] == '+') {\n          ll cand = head + fmin(l+1, p) + fmin(p, r);\n          amin(ret, cand);\n        }\n        else {\n          ll cand = head + fmin(l+1, p) - fmax(p, r);\n          amin(ret, cand);\n        }\n      }\n    }\n    out(\"fmin\", l, r, ret);\n    return ret;\n  };\n\n  ll ans;\n\n  ans = a0 + fmax(0, n-1);\n\n  rep(l, n-1) out(l, minp[l]);\n  rep(l, n-1) out(l, maxp[l]);\n\n  cout << ans << endl;\n}\n\nsigned main() {\n  cin.tie(nullptr);\n  ios::sync_with_stdio(false);\n  Main();\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "// need\n#include <iostream>\n#include <algorithm>\n\n// data structure\n#include <bitset>\n//#include <list>\n#include <map>\n#include <queue>\n#include <set>\n#include <stack>\n#include <string>\n#include <utility>\n#include <vector>\n//#include <array>\n//#include <tuple>\n#include <unordered_map>\n#include <unordered_set>\n//#include <complex>\n//#include <deque>\n\n// stream\n//#include <istream>\n//#include <sstream>\n//#include <ostream>\n\n// etc\n#include <cassert>\n#include <functional>\n#include <iomanip>\n//#include <typeinfo>\n#include <chrono>\n#include <random>\n#include <cfenv>\n\n#define INIT std::ios::sync_with_stdio(false);std::cin.tie(0);\n#define VAR(type, ...)type __VA_ARGS__;MACRO_VAR_Scan(__VA_ARGS__);\ntemplate<typename T> void MACRO_VAR_Scan(T& t) { std::cin >> t; }\ntemplate<typename First, typename...Rest>void MACRO_VAR_Scan(First& first, Rest&...rest) { std::cin >> first; MACRO_VAR_Scan(rest...); }\n#define VEC_ROW(type, n, ...)std::vector<type> __VA_ARGS__;MACRO_VEC_ROW_Init(n, __VA_ARGS__); for(int i=0; i<n; ++i){MACRO_VEC_ROW_Scan(i, __VA_ARGS__);}\ntemplate<typename T> void MACRO_VEC_ROW_Init(int n, T& t) { t.resize(n); }\ntemplate<typename First, typename...Rest>void MACRO_VEC_ROW_Init(int n, First& first, Rest&...rest) { first.resize(n); MACRO_VEC_ROW_Init(n, rest...); }\ntemplate<typename T> void MACRO_VEC_ROW_Scan(int p, T& t) { std::cin >> t[p]; }\ntemplate<typename First, typename...Rest>void MACRO_VEC_ROW_Scan(int p, First& first, Rest&...rest) { std::cin >> first[p]; MACRO_VEC_ROW_Scan(p, rest...); }\n#define OUT(d) std::cout<<d;\n#define FOUT(n, d) std::cout<<std::fixed<<std::setprecision(n)<<d;\n#define SOUT(n, c, d) std::cout<<std::setw(n)<<std::setfill(c)<<d;\n#define SP std::cout<<\" \";\n#define TAB std::cout<<\"\\t\";\n#define BR std::cout<<\"\\n\";\n#define ENDL std::cout<<std::endl;\n#define FLUSH std::cout<<std::flush;\n#define VEC(type, c, n) std::vector<type> c(n);for(auto& i:c)std::cin>>i;\n#define MAT(type, c, m, n) std::vector<std::vector<type>> c(m, std::vector<type>(n));for(auto& r:c)for(auto& i:r)std::cin>>i;\n#define ALL(a) (a).begin(),(a).end()\n#define FOR(i, a, b) for(int i=(a);i<(b);++i)\n#define RFOR(i, a, b) for(int i=(b)-1;i>=(a);--i)\n#define REP(i, n) for(int i=0;i<int(n);++i)\n#define RREP(i, n) for(int i=(n)-1;i>=0;--i)\n#define FORLL(i, a, b) for(ll i=ll(a);i<ll(b);++i)\n#define RFORLL(i, a, b) for(ll i=ll(b)-1;i>=ll(a);--i)\n#define REPLL(i, n) for(ll i=0;i<ll(n);++i)\n#define RREPLL(i, n) for(ll i=ll(n)-1;i>=0;--i)\n#define PAIR std::pair<int, int>\n#define PAIRLL std::pair<ll, ll>\n#define IN(a, x, b) (a<=x && x<b)\n#define SHOW(d) {std::cerr << #d << \"\\t:\" << d << \"\\n\";}\n#define SHOWVECTOR(v) {std::cerr << #v << \"\\t:\";for(const auto& xxx : v){std::cerr << xxx << \" \";}std::cerr << \"\\n\";}\n#define SHOWVECTOR2(v) {std::cerr << #v << \"\\t:\\n\";for(const auto& xxx : v){for(const auto& yyy : xxx){std::cerr << yyy << \" \";}std::cerr << \"\\n\";}}\n#define SHOWPAIR(p) {std::cerr << #p << \"\\t:(\" << p.first << \",\\t\" << p.second << \")\\n\";}\n#define SHOWPAIRVECTOR2(v) {std::cerr << #v << \"\\t:\\n\";for(const auto& xxx : v){for(const auto& yyy : xxx){std::cerr<<'('<<yyy.first<<\", \"<<yyy.second<<\") \";}std::cerr << \"\\n\";}}\n#define SHOWPAIRVECTOR(v) {for(const auto& xxx:v){std::cerr<<'('<<xxx.first<<\", \"<<xxx.second<<\") \";}std::cerr<<\"\\n\";}\n#define SHOWQUEUE(a) {std::queue<decltype(a.front())> tmp(a);std::cerr << #a << \"\\t:\";for(int i=0; i<static_cast<int>(a.size()); ++i){std::cerr << tmp.front() << \"\\n\";tmp.pop();}std::cerr << \"\\n\";}\ntemplate<typename T> inline T CHMAX(T& a, const T b) { return a = (a < b) ? b : a; }\ntemplate<typename T> inline T CHMIN(T& a, const T b) { return a = (a > b) ? b : a; }\n#define EXCEPTION(msg) throw std::string(\"Exception : \" msg \" [ in \") + __func__ + \" : \" + std::to_string(__LINE__) + \" lines ]\"\n#define TRY(cond, msg) try {if (cond) EXCEPTION(msg);}catch (std::string s) {std::cerr << s << std::endl;}\nvoid CHECKTIME(std::function<void()> f) { auto start = std::chrono::system_clock::now(); f(); auto end = std::chrono::system_clock::now(); auto res = std::chrono::duration_cast<std::chrono::nanoseconds>((end - start)).count(); std::cerr << \"[Time:\" << res << \"ns  (\" << res / (1.0e9) << \"s)]\\n\"; }\n\n#define int ll\nusing ll = long long;\nusing ull = unsigned long long;\nconstexpr int INFINT = 1 << 30;                          // 1.07x10^ 9\nconstexpr int INFINT_LIM = (1LL << 31) - 1;              // 2.15x10^ 9\nconstexpr ll INFLL = 1LL << 60;                          // 1.15x10^18\nconstexpr ll INFLL_LIM = (1LL << 62) - 1 + (1LL << 62);  // 9.22x10^19\nconstexpr double EPS = 1e-7;\nconstexpr int MOD = 1000000007;\nconstexpr double PI = 3.141592653589793238462643383279;\n\nsigned main() {\n\tINIT;\n\tVAR(int, n);\n\tstd::vector<int> a(n);\n\tstd::vector<char> op(n - 1);\n\tREP(i, n - 1) {\n\t\tstd::cin >> a[i] >> op[i];\n\t}\n\tstd::cin >> a[n - 1];\n\tstd::vector<ll> raw(n, a[0]);\n\tREP(i, n - 1) {\n\t\tif (op[i] == '+') raw[i + 1] = raw[i] + a[i + 1];\n\t\tif (op[i] == '-') raw[i + 1] = raw[i] - a[i + 1];\n\t}\n\tstd::vector<ll> sum(n, a[0]);\n\tREP(i, n-1) {\n\t\tsum[i + 1] = sum[i] + a[i + 1];\n\t}\n\tstd::vector<int> minus;\n\tstd::vector<int> pos;\n\tbool flag = 0;\n\tint tsum = 0;\n\tREP(i, n - 1) {\n\t\tif (op[i] == '-') {\n\t\t\tpos.emplace_back(i);\n\t\t\tif (flag) {\n\t\t\t\tminus.emplace_back(tsum);\n\t\t\t\ttsum = 0;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tflag = true;\n\t\t\t\ttsum = 0;\n\t\t\t}\n\t\t}\n\t\ttsum += a[i + 1];\n\t}\n\tll ans = raw[n-1];\n\tFOR(i, 1, pos.size()) {\n\t\tll sum_ = raw[pos[i-1]] -minus[i-1] + sum[n-1]-sum[pos[i]];\n\t\tCHMAX(ans, sum_);\n\t}\n\t/*SHOWVECTOR(sum);\n\tSHOWVECTOR(raw);\n\tSHOWVECTOR(minus);\n\tSHOWVECTOR(pos);*/\n\tOUT(ans)BR;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n#define ll long long\n#define llu unsigned long long\n#define ld double\n#define llu unsigned long long\n#define rep(i,x,y)  for(int i=int(x);i<int(y);++i)\n#define For(i,x,y)  for(int i=int(x);i<=int(y);++i)\n#define FOr(i,x,y)  for(int i=int(x);i>=int(y);--i)\n#define pi acos(-1) \n#define mk make_pair\n#define pa pair<ll,ll>\n#define lf else if\n#define IL inline\n#define max(x,y)    ((x)<(y)?(y):(x))\n#define min(x,y)    ((x)<(y)?(x):(y))\n#define sqr(x)      ((x)*(x))\n#define Mul(x,y)    ((x)=1LL*(x)*(y)%mod)\n#define Add(x,y)    ((x)=((x)+(y))%mod)\n#define Max(x,y)    ((x)=((x)<(y)?(y):(x)))\n#define Min(x,y)    ((x)=((x)>(y)?(y):(x)))\n#define E(x)        return writeln(x),0\n#define p(x)        printf(\"~%lld~\\n\",LL(x))\n#define pp(x,y)     printf(\"~~%lld %lld~~\\n\",LL(x),LL(y))\n#define LL\t\t\t(long long)\n#define ppp(x,y,z)  printf(\"~~~%lld %lld %lld~~~\\n\",LL(x),LL(y),LL(z))\n#define pppp(a,b,c,d)\tprintf(\"~~~%lld %lld %lld %lld\\n\",LL(a),LL(b),LL(c),LL(d))\n#define f_in(x)     freopen(x\".in\",\"r\",stdin)\n#define f_out(x)    freopen(x\".out\",\"w\",stdout)\n#define open(x)     f_in(x),f_out(x)\n#define fi first\n#define se second\n#define GuYue\t\tputs(\"\\nGuYueNa________________________________________________________________________________\")\ntypedef complex<double> E;\nnamespace SHENZHEBEI{\n#ifdef LOCAL\n    struct _{_(){freopen(\"cf.in\",\"r\",stdin);}}_; \n#endif \n#define NEG 1\n    static const int GYN=2333333;\n    char SZB[GYN],*S=SZB,*T=SZB;\n    inline char gc(){   if (S==T){  T=(S=SZB)+fread(SZB,1,GYN,stdin); if (S==T) return '\\n';  }   return *S++;    }\n#if NEG\n    inline ll read(){    ll x=0,g=1; char ch=gc();   for (;!isdigit(ch);ch=gc()) if (ch=='-') g=-1;  for (;isdigit(ch);ch=gc())  x=x*10-48+ch;   return x*g; }\n    inline void write(ll x){    if (x<0) putchar('-'),x=-x;  if (x>=10)   write(x/10);    putchar(x%10+'0');  }\n#else\n    inline ll read(){    ll x=0; char ch=gc();   for (;!isdigit(ch);ch=gc());    for (;isdigit(ch);ch=gc())  x=x*10-48+ch;   return x;   }\n    inline void write(ll x){    if (x>=10)   write(x/10);    putchar(x%10+'0');  }\n#endif\n    inline char readchar(){ char ch=gc();   for(;isspace(ch);ch=gc());  return ch;  }\n    inline ll readstr(char *s){ char ch=gc();   int cur=0;  for(;isspace(ch);ch=gc());      for(;!isspace(ch);ch=gc())  s[cur++]=ch;    s[cur]='\\0';    return cur; }\n\tvoid Print(long long *a,int s,int t){For(i,s,t)printf(\"%lld \",a[i]);}\n\tvoid Print(int *a,int s,int t){For(i,s,t)printf(\"%d \",a[i]);}\n\tvoid Print(char *a,int s,int t){For(i,s,t)putchar(a[i]);}\n\tvoid writeln(ll x){write(x);puts(\"\");}\n}using namespace SHENZHEBEI;\nconst ll N=400100;\nll a[N],opt[N],f[N][4],n;\nll ppow(ll x,ll k){return k?-ppow(x,k-1):x;}\nint main(){\n\tn=read();\n\tFor(i,1,n)\ta[i]=read(),opt[i]=a[i]>0,a[i]=abs(a[i]);\n\tmemset(f,-60,sizeof f);\n\tf[0][0]=0;\n\tFor(i,1,n){\n\t\tif (!opt[i])f[i-1][2]=f[i-1][1],f[i-1][1]=f[i-1][0],f[i-1][0]=-1e18;\n\t\tFor(cur,0,2)For(now,0,cur)Max(f[i][now],f[i-1][cur]+ppow(a[i],cur));\n\t}\n\twriteln(max(f[n][0],f[n][1]));\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\n#define pb push_back\n#define mp make_pair\n\n#define fi first\n#define se second\n\ntypedef long long ll;\n\nusing namespace std;\n\nconst ll INF = 2e15;\n\nll dp2[505][505];\n\nll dp[505][505];\n\nchar sign[505];\n\nint arr[505];\n\nint n;\n\nll calc2(int, int);\nll calc(int, int);\n\nvoid init() {\n    for (int l = 1; l <= n; ++l) {\n        for (int r = l; r <= n; ++r) {\n            dp[l][r] = dp2[l][r] = -INF;\n        }\n    }\n}\n\nll calc(int l, int r) {\n    if (l > r) {\n        return 0;\n    }\n\n    if (l == r) {\n        return arr[l];\n    }\n\n    ll &cur = dp[l][r];\n\n    if (cur != -INF) {\n        return cur;\n    }\n\n    cur = 0;\n\n    for (int i = l; i <= r; ++i) {\n        if (sign[i - 1] == '+') {\n            cur += arr[i];\n        }\n        else {\n            cur -= arr[i];\n        }\n    }\n\n    for (int mid = l; mid < r; ++mid) {\n        if (sign[mid] == '-') {\n            cur = max(cur, calc(l, mid) - calc2(mid + 1, r));\n        }\n        else {\n            cur = max(cur, calc(l, mid) + calc(mid + 1, r));\n        }\n    }\n\n    return cur;\n}\n\nll calc2(int l, int r) {\n    if (l > r) {\n        return 0;\n    }\n\n    if (l == r) {\n        return arr[l];\n    }\n\n    ll &cur = dp2[l][r];\n\n    if (cur != -INF) {\n        return cur;\n    }\n\n    cur = 0;\n\n    for (int i = l; i <= r; ++i) {\n        cur += arr[i];\n    }\n\n    for (int mid = l; mid < r; ++mid) {\n        if (sign[mid] == '-') {\n            cur = min(cur, calc2(l, mid) - calc(mid + 1, r));\n        }\n        else {\n            cur = min(cur, calc2(l, mid) + calc2(mid + 1, r));\n        }\n    }\n\n    return cur;\n}\n\nvoid solve() {\n    scanf(\"%d\", &n);\n\n    assert(n <= 500);\n\n    sign[0] = '+';\n\n    for (int i = 1; i <= n; ++i) {\n        scanf(\"%d\", &arr[i]);\n\n        if (i < n) {\n            scanf(\" %c\", &sign[i]);\n        }\n    }\n\n    init();\n\n    printf(\"%lld\", calc(1, n));\n}\n\nint main() {\n    #ifdef BThero\n        freopen(\"input.txt\", \"r\", stdin);\n        freopen(\"output.txt\", \"w\", stdout);\n    #endif // BThero\n\n    int tt = 1;\n\n    while (tt--) {\n        solve();\n    }\n\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define time Time\n#define pii pair<int,int>    \n#define x first    \n#define y second \n#define N 10000005   \n#define pb(x) push_back(x)\n#define mp(x,y) make_pair((x),(y))    \n#define sqr(x) ((x)*(x))\ntypedef long long LL;  \nusing namespace std;\nconst int mod=1e9+7;\nint main(){\n\tint n;\n\twhile(scanf(\"%d\",&n)!=EOF){\n\t\tlong long \tint a[100005];\n\t\tint op[100005];\n\t\top[0]=1;\n\t\tscanf(\"%lld\",&a[0]);\n\t\tfor(int i=1;i<n;i++){\n\t\t\tchar c;\n\t\t\twhile(scanf(\"%c\",&c)&&c!='+'&&c!='-');\n\t\t\tif(c=='+')\n\t\t\top[i]=1;\n\t\t\telse\n\t\t\top[i]=0;\n\t\t\tscanf(\"%lld\",&a[i]);\n\t\t} \n\t\tlong long int sum=0;\n\t\tfor(int i=0;i<n;i++){\n\t\t\tsum+=a[i];\n\t\t}\n\t\tlong long int ans=1e18;\n\t\tint i;\n\t\tfor(i=0;op[i]==1;i++);\n\t\tint last=i;\n\t\tlong long int ssum=0,sssum=a[i];\n\t\tfor(;i<n;i++)\n\t\t{\n\t\t\tssum+=a[i];\n\t\t\tif(op[i+1]==0||i+1==n)\n\t\t\tans=min(ssum+sssum-a[last],ans),ssum=0,sssum+=a[i],last=i;\n\t\t}\n\t\tans=min(sssum,ans);\n\t\tprintf(\"%lld\\n\",sum-2*ans);\n\t}\n}\n/*\n\n 1 - 1 + 2 + 10 - 2 + 3  - 5\n\n*/\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n#define LL long long\n#define LD long double\n#define SC(t,x) static_cast<t>(x)\n#define AR(t) vector < t >\n#define PII pair < int, int >\n#define PLL pair < LL, LL >\n#define PIL pair < int, LL >\n#define PLI pair < LL, int >\n#define MP make_pair\n#define PB push_back\n#define PF push_front\n#define POB pop_back\n#define POF pop_front\n#define PRF first\n#define PRS second\n#define INIT(ar,val) memset ( ar, val, sizeof ( ar ) )\n#define lp(loop,start,end) for ( int loop = start; loop < end; ++loop )\n#define lpd(loop,start,end) for ( int loop = start; loop > end; --loop )\n#define lpi(loop,start,end) for ( int loop = start; loop <= end; ++loop )\n#define lpdi(loop,start,end) for ( int loop = start; loop >= end; --loop )\n#define qmax(a,b) (((a)>(b))?(a):(b))\n#define qmin(a,b) (((a)<(b))?(a):(b))\n#define qabs(a) (((a)>=0)?(a):(-(a)))\n\nconst int INF = 0x3fffffff;\nconst int SINF = 0x7fffffff;\nconst long long LINF = 0x3fffffffffffffff;\nconst long long SLINF = 0x7fffffffffffffff;\nconst int MAXN = 100007;\n\nint n;\nint a[MAXN];\nbool tp[MAXN];\n\nvoid init ();\nvoid input ();\nvoid work ();\n\n\n\nint main()\n{\n\tinit();\n\tinput();\n\twork();\n}\n\n\n\nvoid init ()\n{\n\t// Init Everything Here\n\t\n\tios::sync_with_stdio ( false );\n}\n\nvoid input ()\n{\n\t// input method\n\t\n\tscanf ( \"%d\", &n );\n\tchar ts[5];\n\ttp[1] = true;\n\tlpi ( i, 1, n ){\n\t\tif ( i > 1 ){\n\t\t\tscanf ( \"%s\", ts );\n\t\t\ttp[i] = ts[0] == '+';\n\t\t}\n\t\tscanf ( \"%d\", &a[i] );\n\t}\n}\n\nvoid work ()\n{\n\t// main work\n\t\n\tLL sum = 0, ans = 0, sn = 0;\n\tlpi ( i, 1, n ) sum += a[i], ans += tp[i] ? a[i] : -a[i], sn += tp[i] ? 0 : a[i];\n\t\n\tLL cur = 0;\n\tlpd ( i, n, 1 ){\n\t\tcur += a[i];\n\t\tif ( !tp[i] ){\n\t\t\tsn -= a[i];\n//\t\t\tcerr << i << \" \" << sum << \" \" << cur << \" \" << ans << endl;\n\t\t\tans = qmax ( ans, sum - ( cur + sn ) * 2 );\n\t\t\tcur = 0;\n\t\t}\n\t}\n\t\n\tcout << ans << endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define ci const int&\nusing namespace std;\nint n,x[100010],tg;\nchar c[100010];\nlong long ans,s[100010],ss,ns;\nvoid getc(char&x){\n\tx=getchar();\n\twhile(x!='+'&&x!='-')x=getchar();\n}\nint main(){\n\tscanf(\"%d\",&n),scanf(\"%d\",&s[1]);\n\tfor(int i=2;i<=n;++i)getc(c[i]),scanf(\"%d\",&x[i]),s[i]=s[i-1]+(c[i]=='-'?-1:1)*x[i];\n\tans=s[n];\n\tfor(int i=n;i>=2;--i){\n\t\tns+=x[i];\n\t\tif(c[i]=='-')ans=max(ans,s[i-1]+ss-ns),ss+=ns,ns=0;\n\t}\n\tprintf(\"%lld\",ans);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\ntypedef long long ll;\ntypedef pair<int, int> pii;\ntypedef pair<int, pii> pipii;\ntypedef pair<pii, int> piipi;\ntypedef pair<pii, pii> piipii;\n\n#define mp make_pair\n#define fi first\n#define se second\n#define all(a) (a).begin(), (a).end()\n#define sz(a) (int)(a).size()\n#define eb emplace_back\n\nint a[100005];\nll dp[100005][4];\nint main(){\n    int n;\n    scanf(\"%d\", &n);\n\n    for(int i=1;i<=n;i++){\n        for(int j=0;j<3;j++) dp[i][j] = -1e18;\n    }\n\n    scanf(\"%d\", &a[1]);\n    dp[1][0] = a[1];\n    for(int i=2;i<=n;i++){\n        char s[2];\n        scanf(\"%s\", s);\n        scanf(\"%d\", &a[i]);\n        for(int j=0;j<3;j++){\n            int op = j%2;\n            if(s[0] == '-') op = (op+1)%2;\n\n            // open\n            if(s[0] == '-'){\n                if(op == 0) dp[i][j+1] = max(dp[i][j+1], dp[i-1][j] + a[i]);\n                else dp[i][j+1] = max(dp[i][j+1], dp[i-1][j] - a[i]);\n            }\n\n            // close\n            if(j > 0){\n                if(op == 0) dp[i][j-1] = max(dp[i][j-1], dp[i-1][j] + a[i]);\n                else dp[i][j-1] = max(dp[i][j-1], dp[i-1][j] - a[i]);\n            }\n\n            // none\n            if(op == 0) dp[i][j] = max(dp[i][j], dp[i-1][j] + a[i]);\n            else dp[i][j] = max(dp[i][j], dp[i-1][j] - a[i]);\n        }\n    }   \n    ll ans = -1e18;\n    for(int j=0;j<3;j++) ans = max(ans, dp[n][j]);\n    printf(\"%lld\\n\", ans);\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <iostream>\nusing namespace std;\n#define INF 1e15\n\nconst int MAXN = 100000;\nint n , x;\nlong long dp[ 3 ][ MAXN + 5 ];\n\nvoid Read( int &x ) {\n\tx = 0; int f = 1;\n\tchar s = getchar( );\n\tfor( ; s < '0' || s > '9' ; s = getchar( ) ) f = s == '-' ? -f : f;\n\tfor( ; s >= '0' && s <= '9' ; s = getchar( ) ) x = x * 10 + s - '0';\n\tx *= f;\n}\n\nint main( ) {\n\tscanf(\"%d\",&n);\n\tdp[ 0 ][ 0 ] = 0 , dp[ 1 ][ 0 ] = dp[ 2 ][ 0 ] = -INF;\n\tfor( int i = 1 ; i <= n ; i ++ ) {\n\t\tRead( x );\n\t\t\n\t\tdp[ 0 ][ i ] = max( dp[ 0 ][ i - 1 ] , dp[ 1 ][ i - 1 ] );\n\t\tdp[ 1 ][ i ] = max( dp[ 1 ][ i - 1 ] , dp[ 2 ][ i - 1 ] );\n\t\tdp[ 2 ][ i ] = dp[ 2 ][ i - 1 ];\n\t\tdp[ 0 ][ i ] += x , dp[ 1 ][ i ] -= x , dp[ 2 ][ i ] += x;\n\t\t\n\t\tif( x < 0 ) {\n\t\t\tdp[ 2 ][ i ] = max( dp[ 2 ][ i ] , dp[ 1 ][ i ] );\n\t\t\tdp[ 1 ][ i ] = max( dp[ 1 ][ i ] , dp[ 0 ][ i ] );\n\t\t}\n\t}\n\tprintf(\"%lld\", max( dp[ 0 ][ n ] , max( dp[ 1 ][ n ] , dp[ 2 ][ n ] ) ) );\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n#define testing 1\n#define FOR(ii, ss, ee) for(ll ii = (ss); ii <= (ll)(ee); ++ii)\n#define DEC(ii, ss, ee) for(ll ii = (ss); ii >= (ll)(ee); --ii)\n#define IAMSPEED ios_base::sync_with_stdio(false); cin.tie(0);\n#define db(x) cerr << #x << \"=\" << x << endl\n#define db2(x, y) cerr << #x << \"=\" << x << \" , \" << #y << \"=\" << y << endl\n#define db3(a,b,c) cerr<<#a<<\"=\"<<a<<\",\"<<#b<<\"=\"<<b<<\",\"<<#c<<\"=\"<<c<<endl\n#define dbv(v) cerr << #v << \":\"; for (auto i : v) cerr << i << ' '; cerr << endl\n#define dbvp(v) cerr << #v << \":\"; for (auto i : v) cerr << \"{\"  << i.f << ',' << i.s << \"} \"; cerr << endl\n#define dba(a,ss,ee) cerr << #a << \":\"; FOR(i,ss,ee) cerr << a[i] << ' '; cerr << endl\nmt19937 rng(chrono::steady_clock::now().time_since_epoch().count());\n#define ll long long \n#define pb push_back\n#define inf (int)1e9\n#define oo (ll)1e18\n#define all(x) (x).begin(), (x).end()\n#define f first\n#define s second\n#define reach cerr << \"hi\\n\";\ntypedef pair <int, int> pi;\ntypedef pair <ll,ll> pl;\ntypedef pair <pi, int> pii;\ntypedef tuple<int,int,int> ti3;\nstring lts(ll x) {stringstream s; s << x; return s.str(); }\nll stl(string x) {stringstream s(x); ll temp; s >> temp; return temp; }\nstring cts(char x) {string s(1,x); return s;}\nconst int MOD = 1e9 + 7;\ntemplate <typename T> void maxself(T& a, T b) {\n\ta = max(a, b);\n}\ntemplate <typename T> void minself(T& a, T b) {\n\ta = min(a, b);\n}\n#define MAXN (int)1e5 + 5 \n#if !testing\n\t#define cerr if(0)cout\n#endif\n\nll A[MAXN],dp[MAXN][3];\nchar op[MAXN];\n\nint32_t main() {\n\tIAMSPEED\n\t// set testing to 0 when submitting to judge\n\tFOR(i,0,MAXN-1) FOR(j,0,2) dp[i][j] = -oo;\n\tint n; cin >> n;\n\tcin >> A[1];\n\tFOR(i,2,n) {\n\t\tcin >> op[i] >> A[i];\n\t}\n\tdp[1][0] = A[1];\n\t//dp[1][1] = A[1];\n\tFOR(i,2,n) {\n\t\tif (op[i]=='-') A[i]*=-1;\n\t\tmaxself(dp[i][0],dp[i-1][0]+A[i]);\n\t\tmaxself(dp[i][1],dp[i-1][1]-A[i]);\n\t\tmaxself(dp[i][2],dp[i-1][2]+A[i]);\n\t\tif (op[i]=='-') {\n\t\t\tmaxself(dp[i][1],dp[i-1][0]+A[i]);\n\t\t\tmaxself(dp[i][2],dp[i-1][1]-A[i]);\n\t\t}\n\t\tmaxself(dp[i][1],dp[i-1][2]+A[i]);\n\t}\n\tcout << max({dp[n][0],dp[n][1],dp[n][2]});\n\n}\n"
  },
  {
    "language": "C++",
    "code": "// Math = ♥\n// Sometimes it is people that no one imagines anything of who do things that no one can imagine\n// After all this time? Always\n\n#include <bits/stdc++.h>                        // uncomment before submission\n//#include <ext/pb_ds/assoc_container.hpp>\t\t// uncomment before submission\n//#include <ext/pb_ds/tree_policy.hpp>\t\t\t// uncomment before submission\n//using namespace __gnu_pbds;\t\t\t\t\t// uncomment before submission\nusing namespace std;\n//<---------------------------------------------------Template----------------------------------------------------------->\n#define int long long\n#define ll long long\n#define ld long double\nint INF = 1e9 + 7;\ntypedef pair<ll, ll> ii;\ntypedef vector<ll> vi;                  // Vector of long long\ntypedef vector<vi> vvi;                 // Vector of vi\ntypedef vector<ii> vii;                 // Vector of pairs\ntypedef vector<vii> vvii;               // Vector of Vector of pairs\ntypedef vector<bool> vb;                // Vector of bool\n#define pq priority_queue               // Max heap (To convert to min heap, use negative sign before every value)\n#define ff first                        // For pairs\n#define ss second                       // For pairs\n#define pb push_back                    // Pushback to vector\n#define mp make_pair                    // Makes pairs to be stored as pair\n#define all(c) (c).begin(), (c).end()   // Mainly used by me in sorting\n// ordered_set adds two new functions to set - (set).find_by_order([kth element based on zero indexing]) and order_of_key()\n// order_of_key returns number of elements less that parameter. If element exists, that order is its index\n#define ordered_set tree<ll, null_type, less<ll>, rb_tree_tag, tree_order_statistics_node_update>\n//<----------------------------------------------------------------------------------------------------------------------->\n\nsigned main()\n{\n    ios_base::sync_with_stdio(false);\n    cin.tie(NULL);\n    int n;\n    cin >> n;\n\n    vector<char> op;\n    vi num;\n\n    int x;\n    cin >> x, num.pb(x);\n    for (int i = 0; i < n - 1; i++)\n    {\n        char ch;\n        cin >> ch >> x;\n        op.pb(ch), num.pb(x);\n    }\n\n    vvi dp(n, vector<int>(3));\n    dp[0][0] = num[0];\n    dp[0][1] = -INF;\n    dp[0][2] = -INF;\n\n    for (int i = 1; i < n; i++)\n    {\n        if (op[i - 1] == '+')\n        {\n            dp[i][0] = dp[i - 1][0] + num[i];\n            dp[i][1] = dp[i - 1][1] - num[i];\n            dp[i][2] = dp[i - 1][2] + num[i];\n            dp[i][0] = max(dp[i][0], max(dp[i][1], dp[i][2]);\n            dp[i][1] = max(dp[i][1], dp[i][2]);\n        } else\n        {\n            dp[i][1] = max(dp[i - 1][0], dp[i - 1][1]) - num[i];\n            dp[i][2] = max(dp[i - 1][1], dp[i - 1][2]) + num[i];\n            dp[i][0] = -INF;\n        }\n    }\n\n    int a[] = {dp[n - 1][0], dp[n - 1][1], dp[n - 1][2]};\n    sort(a, a + 3);\n\n    cout << a[2] << endl;\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n\nusing namespace std;\n\nconst long long INF = (1LL << 60);\n\nint main(){\n\tint N;\n\twhile(cin >> N){\n\t\tvector<int> A(N), sign(N);\n\t\tcin >> A[0];\n\t\tsign[0] = 1;\n\t\tfor(int i=1;i<N;i++){\n\t\t\tchar c;\n\t\t\tcin >> c >> A[i];\n\t\t\tsign[i] = (c == '+' ? 1 : -1);\n\t\t}\n\t\tlong long dp[2][3];\n\t\tfor(int i=0;i<3;i++) dp[0][i] = dp[1][i] = -INF;\n\t\tdp[0][0] = 0;\n\t\tlong long m[3] = {1, -1, 1};\n\t\tfor(int i=0;i<N;i++){\n\t\t\tlong long* cur = dp[i%2];\n\t\t\tlong long* next = dp[1-i%2];\n\t\t\tfor(int j=0;j<3;j++) next[j] = -INF;\n\t\t\tfor(int j=0;j<3;j++){\n\t\t\t\tfor(int k=0;k<=j;k++){\n\t\t\t\t\tnext[k] = max(next[k], cur[j] + m[k] * sign[i] * A[i]);\n\t\t\t\t\tif(sign[i] == -1 && k+1 <= 2){\n\t\t\t\t\t\tnext[k+1] = max(next[k+1], cur[j] + m[k] * sign[i] * A[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tlong long res = 0;\n\t\tfor(int i=0;i<3;i++) res = max(res, dp[N%2][i]);\n\t\tcout << res << endl;\n\t}\n}\n\n"
  },
  {
    "language": "C++",
    "code": "//I love Nanami Chiaki\n#include<bits/stdc++.h>\nusing namespace std;\n#define ll long long\ninline int read(){\n\tint re=0;char c=getchar();\n\twhile (c<'0' || c>'9') c=getchar();\n\twhile (c>='0' && c<='9') {re=(re<<1)+(re<<3)+c-'0';c=getchar();}\n\treturn re;\n}\ninline int readc(){\n\tchar c=getchar();\n\twhile (c!='+' && c!='-') c=getchar();\n\tif (c=='+') return 1;\n\treturn -1;\n}\nint n;\nll ans=0;\nint main(){\n\tint n=read();\n\tans+=read();\n\tint op,a;\n\tll hve=0,add=-1,pre=-1;\n\tfor (int i=1;i<n;i++){\n\t\top=readc();a=read();\n\t\tans+=a;\n\t\tif (op==-1){\n\t\t\tif (pre==-1){\n\t\t\t\tpre=a;\n\t\t\t\thve=0;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (add==-1) add=pre+hve;\n\t\t\telse add=min(add,pre+hve);\n\t\t\tpre+=a;\n\t\t\thve=0;\n\t\t}\n\t\telse{\n\t\t\thve+=a;\n\t\t}\n\t}\n\tif (pre==-1){\n\t\tprintf(\"%lld\\n\",ans);\n\t\treturn 0;\n\t}\n\telse if (add==-1) ans-=2*pre;\n\telse ans-=2*add;\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#include <ext/pb_ds/assoc_container.hpp>\n#include <ext/pb_ds/tree_policy.hpp>\n \nusing namespace std;\nusing namespace __gnu_pbds;\n \n#define fi first\n#define se second\n#define mp make_pair\n#define pb push_back\n#define fbo find_by_order\n#define ook order_of_key\n \ntypedef long long ll;\ntypedef pair<int,int> ii;\ntypedef vector<int> vi;\ntypedef long double ld; \ntypedef tree<int, null_type, less<int>, rb_tree_tag, tree_order_statistics_node_update> pbds;\ntypedef set<int>::iterator sit;\ntypedef map<int,int>::iterator mit;\ntypedef vector<int>::iterator vit;\n\nvector<ll> dq;\nvector<ll> S;\n\nint main()\n{\n\tios_base::sync_with_stdio(0); cin.tie(0);\n\tint n; cin>>n;\n\tdq.pb(0); S.pb(0);\n\tll sum=0;\n\tfor(int i=0;i<n;i++)\n\t{\n\t\tchar c='+';\n\t\tif(i>0) \n\t\t{\n\t\t\tcin>>c;\n\t\t}\n\t\tll x; cin>>x;\n\t\tsum+=x;\n\t\tif(c=='+')\n\t\t{\n\t\t\tS.back()+=x;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tS.pb(0);\n\t\t\tdq.pb(x);\n\t\t}\n\t}\n\tif(dq.size()==1)\n\t{\n\t\tcout<<sum<<'\\n';\n\t\treturn 0;\n\t}\n\tll ans = -ll(1e18);\n\tfor(int i=1;i<S.size();i++)\n\t{\n\t\tans=max(ans, sum - 2LL*(S[i]+dq[i]));\n\t\tsum-=2LL*dq[i];\n\t}\n\tans = max(ans, sum);\n\tcout<<ans<<'\\n';\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\n\nint n;\nll a[100010], s[100010], as[100010], ans;\n\nint main(){\n\tscanf(\"%d%lld\", &n, a + 1);\n\ts[1] = as[1] = a[1];\n\tfor(int i = 2; i <= n; i++){\n\t\tchar buf[3]; scanf(\"%s%d\", buf, a + i);\n\t\tas[i] = as[i - 1] + a[i];\n\t\tif(buf[0] == '-') a[i] *= -1;\n\t\ts[i] = s[i - 1] + a[i];\n\t}\n\tans = s[n];\n\tfor(int i = 2; i <= n; i++){\n\t\tif(a[i] < 0){\n\t\t\tll ts = 2 * a[i];\n\t\t\tfor(int j = i + 1; j <= n; j++){\n\t\t\t\tif(a[j] < 0) break;\n\t\t\t\tts -= 2 * a[j];\n\t\t\t}\n\t\t\tans = max(ans, ts + s[i - 1] + as[n] - as[i - 1]);\n\t\t}\n\t}\n\tprintf(\"%lld\\n\", ans);\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\nconst int N = 1e5+100;\n#define fr(i,a,b) for(int i = a;i <= b; ++i)\n#define nfr(i,a,b) for(int i = a;i >= b; --i)\n#define pb push_back\n\nint n,a[N];\nchar sgn[N];\nll f[N][2];\nll ans;\nll ssum[N];\n/*\n5\n1 - 20 - 13 + 14 - 5\n*/\n\nint main(){\n   ios::sync_with_stdio(false);\n   ans = -0x3f3f3f3f;\n   cin >> n;\n   fr(i,1,n){\n      if(i > 1)cin >> sgn[i]; cin >> a[i];\n      if(sgn[i] == '-')a[i] = -a[i];\n   }\n\n   ssum[n+1] = 0;\n   nfr(i,n,1)ssum[i] = ssum[i+1]+abs(a[i]);\n\n   memset(f,0xf7,sizeof f);\n   f[0][0] = 0;\n   fr(i,1,n){\n      f[i][0] = max(f[i-1][0]+a[i],f[i-1][1]+a[i]);\n      f[i][1] = f[i-1][1]-a[i];\n      if(sgn[i] == '-')f[i][1] = max(f[i][1],f[i-1][0]+a[i]);\n      if(sgn[i] == '-' )ans = max(ans,f[i-1][1]+ssum[i]);\n   }\n   ans = max(ans,max(f[n][0],f[n][1]));\n   printf(\"%lld\\n\",ans);\n   return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\nusing ll = long long;\nusing P = pair<int, int>;\nconst ll MOD = 1000000007;\n\n\nint N;\nvector<char> op;\nvector<ll> A;\nchar ops[2] = {'+', '-'};\n\nll memo[100000][2];\nint memoc[100000][2];\n\nll dfs(int p, int c){\n    if(p == N) return 0;\n    if(memo[p][c % 2] != -1 && c <= memoc[p][c % 2]) return memo[p][c % 2];\n    ll ret = 0;\n    if(c % 2 == 0){\n        if(op[p] == '+'){\n            ret = max(ret, A[p] + dfs(p+1, c));\n        }else{\n            ret = max(ret, -A[p] + dfs(p+1, c+1));\n            if(c >= 1) ret = max(ret, A[p] + dfs(p+1, c));\n        }\n    }else{\n        if(op[p] == '+'){\n            ret = max(ret, -A[p] + dfs(p+1, c));\n            ret = max(ret, A[p] + dfs(p+1, c-1));\n        }else{\n            ret = max(ret, A[p] + dfs(p+1, c+1));\n        }\n    }\n    memo[p][c % 2] = ret;\n    memoc[p][c % 2] = c;\n    return ret;\n}\n\nint main(){\n    cin >> N;\n\n    ll start;\n    cin >> start;\n\n    N--;\n    op.resize(N);\n    A.resize(N);\n    for(int i=0;i<N;i++){\n        cin >> op[i] >> A[i];\n    }\n    memset(memo, -1, sizeof(memo));\n    memset(memoc, -1, sizeof(memoc));\n    cout << start + dfs(0, 0) << endl;\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "//@winlere\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<algorithm>\n\nusing namespace std;  typedef long long ll;\ninline int qr(){\n\tint ret=0,f=0,c=getchar();\n\twhile(!isdigit(c)) f|=c==45,c=getchar();\n\twhile( isdigit(c)) ret=ret*10+c-48,c=getchar();\n\treturn f?-ret:ret;\n}\nconst int maxn=1e5+5;\nint data[maxn],n;\nll dp[maxn][3];\n\nint main(){\n\tmemset(dp,0xcc,sizeof dp);\n\tn=qr();\n\tfor(int t=1;t<=n;++t) data[t]=qr();\n\tdp[0][0]=0;\n\tfor(int t=1;t<=n;++t)\n\t\tif(data[t]>0){\n\t\t\tdp[t][0]=max({dp[t][0],dp[t-1][0]+data[t],dp[t-1][1]+data[t],dp[t-1][2]+data[t]});\n\t\t\tdp[t][1]=max({dp[t][1],dp[t-1][1]-data[t],dp[t-1][2]-data[t]});\n\t\t\tdp[t][2]=max({dp[t][2],dp[t-1][2]+data[t]});\n\t\t}else{\n\t\t\tdata[t]=-data[t];\n\t\t\tdp[t][0]=max({dp[t][0],dp[t-1][0]-data[t],dp[t-1][1]-data[t],dp[t-1][2]-data[t]});\n\t\t\tdp[t][1]=max({dp[t][1],dp[t-1][0]-data[t],dp[t-1][1]+data[t],dp[t-1][2]+data[t]});\n\t\t\tdp[t][2]=max({dp[t][2],dp[t-1][1]+data[t],dp[t-1][2]+data[t]});\n\t\t}\n\tcout<<max({dp[n][0],dp[n][1],dp[n][2]})<<endl;\n\treturn 0;\t\n}\n\n//asdujoifszahikuj"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\ntypedef long long ll;\nll a=-1e18,b=-1e18,c;\nint n,op=1;\nint main(){\n\tios::sync_with_stdio(0);cin.tie(0);cout.tie(0);\n\tfor(cin>>n;n --> 0;){\n\t\tint x;char s[10];cin>>x>>s;x*=op;a+=x;b-=x;c+=x;\n\t\tif(x<0)a=max(a,b),b=max(b,c);c=max(b,c);b=max(a,b);\n\t\tif(s[0]=='-')op=-1;else op=1;\n\t}\n\tcout<<c<<'\\n';\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <cstdlib>\n#include <cmath>\n#include <climits>\n#include <cfloat>\n#include <map>\n#include <set>\n#include <iostream>\n#include <string>\n#include <vector>\n#include <algorithm>\n#include <sstream>\n#include <complex>\n#include <stack>\n#include <queue>\n#include <cstdio>\n#include <cstring>\n#include <iterator>\n#include <bitset>\n#include <unordered_set>\n#include <unordered_map>\n#include <fstream>\n#include <iomanip>\n#include <cassert>\n#include <utility>\n#include <memory>\n#include <functional>\n#include <deque>\n#include <cctype>\n#include <ctime>\n#include <numeric>\n#include <list>\n#include <iomanip>\n\n#if __cplusplus >= 201103L\n#include <array>\n#include <tuple>\n#include <initializer_list>\n#include <forward_list>\n\n#define cauto const auto&\n#else\n\n#endif\n\nusing namespace std;\n\n\ntypedef long long ll;\ntypedef pair<int,int> pii;\ntypedef pair<ll,ll> pll;\n\ntypedef vector<int> vint;\ntypedef vector<vector<int> > vvint;\ntypedef vector<long long> vll;\ntypedef vector<vector<long long> > vvll;\n\n#define VV(T) vector<vector< T > >\n\ntemplate <class T>\nvoid initvv(vector<vector<T> > &v, int a, int b, const T &t = T()){\n    v.assign(a, vector<T>(b, t));\n}\n\ntemplate <class F, class T>\nvoid convert(const F &f, T &t){\n    stringstream ss;\n    ss << f;\n    ss >> t;\n}\n\n#define GET_MACRO(_1, _2, _3, NAME, ...) NAME\n#define _rep(i,n) _rep2((i),0,(n))\n#define _rep2(i,a,b) for(int i=(a);i<(b);++i)\n#define rep(...) GET_MACRO(__VA_ARGS__, _rep2, _rep)(__VA_ARGS__)\n#define ALL(v) (v).begin(),(v).end()\n#define PB push_back\n#define fi first\n#define se second\n#define mkp make_pair\n#define DEBUG\n#ifdef DEBUG\n#define dump(x)  cout << #x << \" = \" << (x) << endl;\n#define debug(x) cout << #x << \" = \" << (x) << \" (L\" << __LINE__ << \")\" << \" \" << __FILE__ << endl;\n#else\n#define dump(x) \n#define debug(x) \n#endif\n\n#define MOD 1000000007LL\n#define EPS 1e-8\n#define INF 0x3f3f3f3f\n#define INFL 0x3f3f3f3f3f3f3f3fLL\n#define maxs(x,y) x=max(x,y)\n#define mins(x,y) x=min(x,y)\n\nll mainmain(){\n\tint n;\n\tcin>>n;\n\tll ans1;\n\tcin>>ans1;\n\tif(n==1){\n\t\treturn ans1;\n\t}\n\tvint op(n-1);\n\tvll v(n-1);\n\tvint minus;\n\trep(i,n-1){\n\t\tchar t;\n\t\tcin>>t;\n\t\tcin>>v[i];\n\t\tif(t=='-'){\n\t\t\tminus.PB(i);\n\t\t\top[i] = -1;\n\t\t}\n\t\telse{\n\t\t\top[i] = 1;\n\t\t}\n\t}\n\tvll suf(n-1);\n\tfor(int i=n-2; i>=0; i--){\n\t\tsuf[i] = v[i];\n\t\tif(i<n-2) suf[i] += suf[i+1];\n\t}\n\tll ans2 = -INFL;\n\tll tval = ans1;\n\tint p = 0;\n\trep(i,minus.size()-1){\n\t\tint l = minus[i];\n\t\tint r = minus[i+1];\n\t\twhile(p<l) tval += op[p]*v[p],p++;\n\t\tll tmp = suf[l]-suf[r];\n\t\ttmp *= -1;\n\t\t// cout<<l<<\" \"<<r<<endl;\n\t\t// cout<<tval<<\" \"<<tmp<<\" \"<<suf[r]<<endl;\n\t\ttmp += tval;\n\t\ttmp += suf[r];\n\t\tmaxs(ans2, tmp);\n\t}\n\treturn ans2;\n}\n\n\nsigned main() {\n    ios_base::sync_with_stdio(false);\n    cin.tie(0);\n    cout<<fixed<<setprecision(20);\n    cout<<mainmain()<<endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\nusing int64 = long long;\n\nint main()\n{\n  int N, A[100000];\n  char op[100000];\n\n  cin >> N;\n  cin >> A[0];\n  for(int i = 1; i < N; i++) {\n    cin >> op[i] >> A[i];\n  }\n\n  int64 all = A[0];\n  for(int i = 1; i < N; i++) {\n    if(op[i] == '+') all += A[i];\n    else all -= A[i];\n  }\n\n  int64 cost = 0, ans = all, add = 0;\n  for(int i = N - 1; i > 0; i--) {\n    if(op[i] == '+') {\n      cost += 2 * A[i];\n    } else {\n      ans = max(ans, all + add - cost);\n      add += 2 * A[i];\n      cost = 0;\n    }\n  }\n\n  cout << ans << endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstdio>\n#include <cstring>\n#include <cassert>\n#include <cctype>\nusing namespace std;\ntypedef long long lint;\n#define cout cerr\n#define ni (next_num<int>())\ntemplate<class T>inline T next_num(){\n\tT i=0;char c;\n\twhile(!isdigit(c=getchar())&&c!='-');\n\tbool flag=c=='-';\n\tflag?c=getchar():0;\n\twhile(i=i*10-'0'+c,isdigit(c=getchar()));\n\treturn flag?-i:i;\n}\ntemplate<class T1,class T2>inline void apmax(T1 &a,const T2 &b){if(a<b)a=b;}\ntemplate<class T1,class T2>inline void apmin(T1 &a,const T2 &b){if(b<a)a=b;}\nconst int N=100010;\nconst lint LINF=0x7f7f7f7f7f7f7f7fll;\nint main(){\n\tint n=ni;\n\tlint f[3]={ni,-LINF,-LINF};\n\tfor(int i=2;i<=n;i++){\n\t\tchar c;\n\t\twhile(c=getchar(),c!='+'&&c!='-');\n\t\tint val=ni;\n\t\tif(c=='+'){\n\t\t\tf[0]+=val;\n\t\t}else{\n\t\t\tf[2]=f[1],f[1]=f[0],f[0]=-LINF;\n\t\t}\n\t\tif(f[1]!=-LINF){\n\t\t\tf[1]-=val;\n\t\t\tif(f[2]!=-LINF){\n\t\t\t\tf[2]+=val;\n\t\t\t\tapmax(f[1],f[2]);\n\t\t\t}\n\t\t\tapmax(f[0],f[1]);\n\t\t}\n\t\tassert(f[0]>=f[1]&&f[1]>=f[2]);\n\t}\n\tprintf(\"%lld\\n\",f[0]);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<set>\n#include<map>\n#include<stack>\n#include<queue>\n#include<deque>\n#include<cmath>\n#include<cstdio>\n#include<cctype>\n#include<string>\n#include<vector>\n#include<cstdlib>\n#include<cstring>\n#include<sstream>\n#include<iostream>\n#include<algorithm>\n#define MAXN 100000\n#define INF 1000000000000000000LL\n\nusing namespace std;\n//(i+j)=(i^j)+2*(i&j)\n//(i+j)=(i&j)+(i|j)\n//(i|j)=(i^j)+(i&j)\nstruct node\n{\n\tbool is_add;\n\tint num;\n}a[MAXN+80];\nint n;\nlong long dp[MAXN+80][2];//0 min  1 max\nlong long DP(int s,bool f)\n{\n\tif((f&&dp[s][f]>-INF/2)||((!f)&&dp[s][f]<INF/2))\n\t\treturn dp[s][f];\n\tif(s==n)\n\t\treturn dp[s][0]=dp[s][1]=(a[s].is_add?1:(-1))*a[s].num;\n\tint i;\n\tlong long S=a[s].num;\n\tfor(i=s+1;i<=n;i++)\n\t{\n\t\tdp[s][0]=min(dp[s][0],(f?1:(-1))*S+DP(i,0));\n\t\tdp[s][1]=max(dp[s][1],(f?1:(-1))*S+DP(i,1));\n\t\tif(f==0)\n\t\t{\n\t\t\tdp[s][0]=min(dp[s][0],-S-DP(i,1));\n\t\t\tdp[s][1]=max(dp[s][1],-S-DP(i,0));\n\t\t}\n\t\tS+=(a[i].is_add?1:(-1))*a[i].num;\n\t}\n\treturn dp[s][f];\n}\nint main()\n{\n\tint i;\n\tchar c;\n\tscanf(\"%d%d\",&n,&a[1].num);\n\ta[1].is_add=1;\n\tfor(i=1;i<n;i++)\n\t{\n\t\twhile((c=getchar())!=EOF&&c^'+'&&c^'-');\n\t\ta[i+1].is_add=(c=='+');\n\t\tscanf(\"%d\",&a[i+1].num);\n\t}\n\tfor(i=1;i<=n;i++)\n\t\tdp[i][0]=INF,dp[i][1]=-INF;\n\tcout<<DP(1,1);\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n#include <cmath>\n#include <stdio.h>\n#include <stdlib.h>\n#include <vector>\n#include <map>\n#include <queue>\n#include <set>\n#include <string>\n#include <string.h>\n#include <stack>\n#include <assert.h>\n#define Endl endl\n#define mp make_pair\n#define ll long long \n#define pii pair<int,int>\n#define pll pair<ll,ll>\n#define over(A) {cout<<A<<endl;exit(0);}\n#define all(A) A.begin(),A.end()\n#define ceil(a,b) ((a-1)/b+1)\n#define srand() mt19937 rng(chrono::steady_clock::now().time_since_epoch().count());\n#define rand(l,r) uniform_int_distribution<int>(l,r)(rng)\ntypedef unsigned long long ull;\nconst int inf=1039074182;\nusing namespace std;\nint n;\nint a[100005];\nvector <ll> vec;\nvector <int> pos;\nvector <bool> b;\nll sumabs[100005];\n\nint main()\n{\n//\tfreopen(\"input.txt\",\"r\",stdin);\n\tcin>>n;\n\tchar x;\n\tcin>>a[0];\n\tll res=a[0];\n\tfor(int i=1;i<n;i++)\n\t{\n\t\twhile(x!='+' && x!='-') x=getchar();\n\t\tscanf(\"%d\",a+i);\n\t\tif(x=='-') a[i]=-a[i];\n\t\tx=getchar();\n\t\tres+=a[i];\n\t}\n\tsumabs[n]=0;\n\tfor(int i=n-1;i>=0;i--)\n\t{\n\t\tsumabs[i]=sumabs[i+1]+abs(a[i]);\n\t}\n//\tll res=-1LL*inf*inf;\n\tfor(int i=0;i<n;)\n\t{\n\t\tll sum=0;\n\t\twhile(a[i]>0 && i<n)\n\t\t{\n\t\t\tsum+=a[i];\n\t\t\ti++;\n\t\t}\n\t\tvec.push_back(sum);\n\t\twhile(a[i]<0 && i<n)\n\t\t{\n\t\t\tvec.push_back(a[i]);\n\t\t\ti++;\n\t\t}\n\t}\n\twhile(vec.back()==0) vec.pop_back();\n\tn=vec.size();\n\tfor(int i=0;i<n;i++)\n\t{\n\t\ta[i]=vec[i];\n\t}\n\tll now=0;\n\tfor(int i=0;i<n;i++)\n\t{\n\t\tnow+=a[i];\n\t\tif(a[i]<0)\n\t\t{\n\t\t\tres=max(res,now-a[i+1]+sumabs[i+2]);\n\t\t}\n//\t\tcout<<now<<' '<<a[i+1]<<' '<<sumabs[i+2]<<endl;\n\t}\n\tcout<<res<<endl;\n//\tll res=0;\n//\tfor(int i=0;i<n;i++)\n//\t{\n//\t\tif(vec[i]>0) pos.push_back(i);\n//\t}\n//\tint nn;\n//\tfor(int i=0;i<n-1;i++)\n//\t{\n//\t\tif(vec[i]<0 && vec[i+1]<0)\n//\t\t{\n//\t\t\tnn=i;\n//\t\t\tbreak;\n//\t\t}\n//\t}\n//\t\n//\tll res=0;\n//\tfor(int i=0;i<pos.size();i++)\n//\t{\n//\t\tint p=pos[i];\n//\t\tbool tb=false;\n//\t\tif(p!=0 && p!=n-1)\n//\t\t{\n//\t\t\tif(-vec[p+1]>vec[p])\n//\t\t\t{\n//\t\t\t\ttb=true;\n//\t\t\t}\n//\t\t}\n//\t\tb.push_back(tb);\n//\t}\n//\tfor(int i=0;i<n;i++)\n//\t{\n//\t\tcout<<vec[i]<<' ';\n//\t}\n//\tcout<<endl;\n//\tint l=0;\n//\tfor(int i=0;i<pos.size();i++)\n//\t{\n//\t\tll block=0;\n//\t\tfor(int j=pos[i]+2;j<(i==(int)pos.size()-1?n:pos[i+1]);j++)\n//\t\t{\n//\t\t\tblock+=abs(a[j]);\n//\t\t}\n//\t\tif(i==(int)pos.size()-1 && pos[i]==n-1)\n//\t\t{\n//\t\t\tblock+=abs(a[pos[i]]);\n//\t\t}\n//\t\telse\n//\t\t{\n//\t\t\tif(!b[i]) block+=a[pos[i]]+a[pos[i]+1];\n//\t\t\telse block+=-a[pos[i]]-a[pos[i]+1];\n//\t\t}\n//\t\tres+=block;\n//\t\tcout<<i<<' '<<block<<endl;\n//\t}\n//\tcout<<res<<endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <cstring>\n#include <algorithm>\n#include <iostream>\n#include <cmath>\n\nusing namespace std;\n\nlong long dp[100050][3];\nchar sign[100050];\nint val[100050];\nint sgn[100050];\n\nint main()\n{\n\tint n; scanf(\"%d\",&n);\n\tfor(int i = 1;i <= n; ++ i)\n\t{\n\t\tscanf(\" %d\",&val[i]);\n\t\tif(i != n) scanf(\" %c\",&sign[i + 1]),sgn[i + 1] = sign[i + 1] == '-' ? -1 : 1;\n\t}\n\tsgn[0] = 1;\n\tmemset(dp,-0x3f3f3f3f,sizeof(dp));\n\tdp[1][0] = val[1];\n\tfor(int i = 2;i <= n; ++ i)\n\t{\n\t\tfor(int j = 0;j <= 2; ++ j)\n\t\t{\n\t\t\tif(sgn[i] == -1)\n\t\t\t{\n\t\t\t\tif(j)\n\t\t\t\t{\n\t\t\t\t\tif(j == 2) \n\t\t\t\t\t\tdp[i][j] = max(dp[i][j],dp[i - 1][j - 1] + val[i]);\n\t\t\t\t\telse\n\t\t\t\t\t\tdp[i][j] = max(dp[i][j],dp[i - 1][j - 1] - val[i]);\n\t\t\t\t}\n\t\t\t\tif(j % 2 == 0) dp[i][j] = max(dp[i][j],dp[i - 1][j] - val[i]);\n\t\t\t\telse dp[i][j] = max(dp[i][j],dp[i - 1][j] + val[i]);\n\t\t\t\tif(j != 2)\n\t\t\t\t{\n\t\t\t\t\tif(j == 1)\n\t\t\t\t\t\tdp[i][j] = max(dp[i][j],dp[i - 1][j + 1] - val[i]);\n\t\t\t\t\telse\n\t\t\t\t\t\tdp[i][j] = max(dp[i][j],dp[i - 1][j + 1] + val[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif(j % 2 == 0) dp[i][j] = max(dp[i][j],dp[i - 1][j] + val[i]);\n\t\t\t\telse dp[i][j] = max(dp[i][j],dp[i - 1][j] - val[i]);\n\t\t\t\tif(j != 2)\n\t\t\t\t{\n\t\t\t\t\tif(j == 1)\n\t\t\t\t\t\tdp[i][j] = max(dp[i][j],dp[i - 1][j + 1] + val[i]);\n\t\t\t\t\telse\n\t\t\t\t\t\tdp[i][j] = max(dp[i][j],dp[i - 1][j + 1] - val[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tprintf(\"%lld\\n\",max(dp[n][0],dp[n][1]));\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <sstream>\n#include <string>\n#include <vector>\n#include <stack>\n#include <queue>\n#include <set>\n#include <map>\n#include <numeric>\n#include <algorithm>\n#include <cstdio>\n#include <cstdlib>\n#include <cstring>\n#include <cctype>\n#include <cmath>\n#include <cassert>\n#include <cstdarg>\n#include <sys/time.h>\n#include <fstream>\n//#include \"cout.h\"\n\nusing namespace std;\n\n#define SZ(x) ((int)x.size())\n#define MSET(x,a) memset(x, a, (int)sizeof(x))\n#define PB push_back\n#define VI vector < int >\n#define PII pair < int, int >\n#define LL long long\n#define FOR(i,a,b) for (int i = (a); i < (b); i++)\n#define REP(i,n) FOR(i,0,n)\n#define ALL(v) (v).begin(), (v).end()\n#define FIT(it,v) for (__typeof((v).begin()) it = (v).begin(); it != (v).end(); it++)\n#define OUT(A) cout << #A << \" = \"<< (A) << endl\n#define OUT2(A, B) cout << \"(\" << #A << \", \" << #B << \") = (\" << (A) << \", \"<< (B) << \")\" << endl\ntemplate<class T> void chmin(T &t, T f) { if (t > f) t = f; } \ntemplate<class T> void chmax(T &t, T f) { if (t < f) t = f; } \n\n#define present(c, e) ((c).find((e)) != (c).end())\n#define cpresent(c, e) (find(all(c), (e)) != (c).end())\n\nint n;\nLL a[100010];\nchar op[100010];\nLL dp[100010][3];\n\nvoid init() {\n}\n\nvoid input() {\n\tcin >> n;\n\tREP(i, n) {\n\t\tcin >> a[i];\n\t\tif (i < n-1) cin >> op[i+1];\n\t}\n}\n\nvoid solve() {\n\tREP(i, 100010) REP(j, 3) dp[i][j] = -1e15;\n\tdp[0][0] = a[0];\n\tFOR(i, 1, n){\n\t\tif(op[i] == '+'){\n\t\t\tdp[i][0] = max({\n\t\t\t\tdp[i-1][0]+a[i], \n\t\t\t\tdp[i-1][1]+a[i], \n\t\t\t\tdp[i-1][2]+a[i]\n\t\t\t\t});\n\t\t\tdp[i][1] = max({\n\t\t\t\tdp[i-1][1]-a[i], \n\t\t\t\tdp[i-1][2]-a[i]\n\t\t\t\t});\n\t\t\tdp[i][2] = max({\n\t\t\t\tdp[i-1][2]+a[i]\n\t\t\t\t});\n\t\t}\n\t\telse{\n\t\t\t// dp[i][0] = max({\n\t\t\t// \tdp[i-1][0]-a[i], \n\t\t\t// \tdp[i-1][1]-a[i], \n\t\t\t// \tdp[i-1][2]-a[i]\n\t\t\t// \t});\n\t\t\tdp[i][1] = max({\n\t\t\t\tdp[i-1][0]-a[i], \n\t\t\t\t// dp[i-1][1]+a[i], \n\t\t\t\t// dp[i-1][2]+a[i]\n\t\t\t\t});\n\t\t\tdp[i][2] = max({\n\t\t\t\tdp[i-1][1]+a[i], \n\t\t\t\t// dp[i-1][2]-a[i]\n\t\t\t\tdp[i-1][2]+a[i]\n\t\t\t\t});\n\t\t}\n\t}\n\tcout << max({dp[n-1][0], dp[n-1][1], dp[n-1][2]}) << endl;\n}\n\nint main() {\n\tinit();\n    input();\n    solve();\n\treturn 0;\n}\n\n\n\n\n\n\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nconst int N = 100005;\nconst long long INF = (long long)1e15;\n\nlong long f[N][3];\nchar op[N][2];\n\nint n,a[N];\n\nint main()\n{\n\tscanf(\"%d\",&n);\n\tfor (int i = 1; i < n; i++)\n\t{\n\t\tscanf(\"%d%s\",&a[i],op[i]);\n\t}\n\tscanf(\"%d\",&a[n]);\n\tf[1][0] = a[1], f[1][1] = f[1][2] = -INF;\n\tfor (int i = 2; i <= n; i++)\n\t{\n\t\tif (op[i - 1][0] == '+')\n\t\t{\n\t\t\tf[i][0] = std::max(f[i - 1][0], f[i - 1][1]) + a[i];\n\t\t\tf[i][1] = f[i - 1][1] - a[i];\n\t\t\tf[i][2] = f[i - 1][2] + a[i];\n\t\t}\n\t\tif (op[i - 1][0] == '-')\n\t\t{\n\t\t\tf[i][0] = -INF;\n\t\t\tf[i][1] = std::max(f[i - 1][0], f[i - 1][1]) - a[i];\n\t\t\tf[i][2] = std::max(f[i - 1][1], f[i - 1][2]) + a[i];\n\t\t}\n\t}\n\tprintf(\"%lld\\n\",std::max(std::max(f[n][0], f[n][1]), f[n][2]));\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <fstream>\n#include <cstdio>\n#include <cmath>\n#include <vector>\n#include <cstring>\n#include <string>\n#include <set>\n#include <map>\n#include <stack>\n#include <queue>\n#include <deque>\n#include <algorithm>\nusing namespace std;\n\n#define REP(i,n) for(int i=0; i<n; ++i)\n#define FOR(i,a,b) for(int i=a; i<=b; ++i)\n#define FORR(i,a,b) for (int i=a; i>=b; --i)\n#define ALL(c) (c).begin(), (c).end()\n\ntypedef long long ll;\ntypedef vector<int> VI;\ntypedef vector<ll> VL;\ntypedef vector<VL> VVL;\ntypedef vector<VI> VVI;\ntypedef pair<int,int> P;\ntypedef pair<ll,ll> PL;\n\nint main() {\n    int n;\n    cin >> n;\n    VL a(n);\n    vector<char> c(n-1);\n    REP(i,n){\n        scanf(\"%lld\", &a[i]);\n        if (i < n-1) cin >> c[i];\n    }\n    VL cumsum(n+1), sum(n+1);\n    REP(i,n) cumsum[i+1] = cumsum[i] + a[i];\n    sum[0] = a[0];\n    REP(i,n-1){\n        if (c[i] == '+') sum[i+1] = sum[i] + a[i+1];\n        else sum[i+1] = sum[i] - a[i+1];\n    }\n    ll ans = sum[n-1];\n    // cout << ans << endl;\n    VI neg;\n    REP(i,n-1) if (c[i] == '-') neg.push_back(i);\n    cout << neg.size() << endl;\n    REP(k,(int)neg.size()-1){\n        int x = neg[k], y = neg[k+1];\n        // cout << x << \" \" << y << endl;\n        ll tmp = sum[x] - (cumsum[y+1] - cumsum[x+1]) + cumsum[n] - cumsum[y+1];\n        ans = max(ans, tmp);\n    }\n    cout << ans << endl;\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n\nusing namespace std;\ntypedef long long ll;\n\nconst int N=100005;\nconst ll inf=1e18;\n\nvoid gi(int&x){static char c;for(c=getchar();c<'0'||c>'9';c=getchar());for(x=0;c<='9'&&c>='0';c=getchar())x=x*10+(c&15);}\nvoid gc(char&c){for(c=getchar();c!='+'&&c!='-';c=getchar());}\n\nint n,a[N];\nchar op[N];\nll f0,f1,f2;\n\nint main(){\n\tgi(n),gi(a[0]);\n\tfor(int i=1;i<n;i++)gc(op[i]),gi(a[i]);\n\tf0=a[0],f1=f2=-inf;\n\tfor(int i=1;i<n;i++){\n\t\tif(op[i]=='-'){\n\t\t\tf2-=a[i],f1+=a[i],f0-=a[i];\n\t\t\tif(f1>f2)f2=f1;if(f0>f1)f1=f0;\n\t\t}else f2+=a[i],f1-=a[i],f0+=a[i];\n\t\tif(f2>f1)f1=f2;if(f1>f0)f0=f1; \n\t}\n\tprintf(\"%lld\\n\",f0);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<stdio.h>\nint n, w[101000], pv;\nlong long S[101000], MM;\nchar op[101000];\nint main(){\n    int i;\n    scanf(\"%d\",&n);\n    for(i=1;i<=n;i++){\n        scanf(\"%d\",&w[i]);\n        S[i] = S[i-1] + w[i];\n        if(i==n)break;\n        scanf(\"%s\",op+i);\n    }\n    for(i=1;i<=n;i++)if(op[i]=='-')MM += w[i+1];\n    for(i=1;i<=n;i++){\n        if(op[i]=='-'){\n            if(!pv){\n                pv = i;\n                continue;\n            }\n            if(MM > S[i] - S[pv])MM = S[i] - S[pv];\n        }\n    }\n    printf(\"%lld\\n\",S[n] - MM*2);\n}"
  },
  {
    "language": "C++",
    "code": "//I love Nanami Chiaki\n#include<bits/stdc++.h>\nusing namespace std;\n#define ll long long\ninline int read(){\n\tint re=0;char c=getchar();\n\twhile (c<'0' || c>'9') c=getchar();\n\twhile (c>='0' && c<='9') {re=(re<<1)+(re<<3)+c-'0';c=getchar();}\n\treturn re;\n}\ninline int readc(){\n\tchar c=getchar();\n\twhile (c!='+' && c!='-') c=getchar();\n\tif (c=='+') return 1;\n\treturn -1;\n}\nint n;\nll ans=0;\nint main(){\n\tint n=read();\n\tans+=read();\n\tint op,a;\n\tll hve=0,add=-1,pre=-1;\n\tfor (int i=1;i<n;i++){\n\t\top=readc();a=read();\n\t\tans+=a;\n\t\tif (op==-1){\n\t\t\tif (pre==-1){\n\t\t\t\tpre=a;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (add==-1) add=pre+hve;\n\t\t\telse add=min(add,pre+hve);\n\t\t\tpre+=a;\n\t\t\thve=0;\n\t\t}\n\t\telse{\n\t\t\thve+=a;\n\t\t}\n\t}\n\tif (pre==-1){\n\t\tprintf(\"%lld\\n\",ans);\n\t\treturn 0;\n\t}\n\telse if (add==-1) ans-=2*pre;\n\telse ans-=2*add;\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "\nStatus\nAccepted\nTime\n14ms\nMemory\n2424kB\nLength\n859\nLang\nC++14 (GCC 5.3.0)\nSubmitted\n2017-03-11 14:37:44\nShared\n\nRemoteRunId\n1154502\nSelect Code\n#include <bits/stdc++.h>\nusing namespace std;\n\n#define X first\n#define Y second\n#define LL long long\n#define ULL unsigned long long\n#define PB push_back\n#define MP make_pair\n#define VI vector<int>\n#define PII pair<int,int>\n#define IOS ios::sync_with_stdio(0);cin.tie(0);\n#define IN freopen(\"in\", \"r\", stdin);\n#define OUT freopen(\"out\", \"w\", stdout);\n\nconst int maxn=100010;\n\nLL a[maxn],per[maxn];\nchar c[maxn];\n\nint main()\n{\n\tIOS;\n\tint n;\n\tcin>>n>>a[0];\n\tper[0]=a[0];\n\tLL abssum=a[0];\n\tLL ans=a[0];\n\tVI sub;\n\tfor (int j=1;j<n;++j)\n\t{\n\t\tcin>>c[j]>>a[j];\n\t\tper[j]=per[j-1]+a[j];\n\t\tabssum+=a[j];\n\t\tif (c[j]=='+') ans+=a[j];\n\t\telse\n\t\t{\n\t\t\tans-=a[j];\n\t\t\tsub.PB(j);\n\t\t}\n\t}\n\tfor (int j=0;j<(int)sub.size()-1;++j)\n\t{\n\t\tint p1=sub[j];\n\t\tint p2=sub[j+1];\n\t\tLL tis=abssum-(per[p2-1]-per[p1-1])*2;\n\t\tans=max(ans,tis);\n\t\tabssum-=a[p1]*2;\n\t}\n\tcout<<ans<<endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\nconst int maxn=1e5+10;\nll a[maxn];\nll dp[2][maxn];\nll cnt[2][maxn];\nchar op[10];\nint main(){\n    int n;\n    scanf(\"%d\",&n);\n    scanf(\"%lld\",&a[1]);\n    for(int i=2;i<=n;i++) {\n        scanf(\"%s %lld\",op,&a[i]);\n        if(op[0]=='-')a[i]=-a[i];\n    }\n    ll ans=0;\n    int beg=1;\n    while(beg<=n&&a[beg]>=0) {\n        ans+=a[beg];\n        beg++;\n    }\n    dp[0][beg]=dp[1][beg]=a[beg];\n    cnt[1][beg]=1;\n    for(int i=beg+1;i<=n;i++){\n        if(a[i]<0){\n            dp[0][i]=max(dp[1][i-1],dp[0][i-1])+a[i];\n            cnt[0][i]=dp[1][i-1]>=dp[0][i-1]?cnt[1][i-1]+1:cnt[0][i-1];\n            dp[1][i]=max(dp[0][i-1]+a[i],dp[1][i-1]-a[i]);\n            cnt[1][i]=dp[1][i-1]-a[i]>dp[0][i-1]+a[i]?cnt[1][i-1]:cnt[0][i-1]+1;\n        }else {\n            if(dp[1][i-1]>dp[0][i-1]&&cnt[1][i-1]){\n                dp[0][i]=dp[1][i-1]+a[i];\n                cnt[0][i]=cnt[1][i-1]-1;\n            }else{\n                dp[0][i]=dp[0][i-1]+a[i];\n                cnt[0][i]=cnt[0][i-1];\n            }\n            if(dp[0][i-1]>dp[1][i-1]&&cnt[0][i-1]){\n                dp[1][i]=dp[0][i-1]-a[i];\n                cnt[1][i]=cnt[0][i-1]-1;\n            }else {\n                dp[1][i]=dp[1][i-1]-a[i];\n                cnt[1][i]=cnt[1][i-1];\n            }\n        }\n    }\n//    for(int i=1;i<=n;i++) cout<<dp[0][i]<<\" \";\n//    cout<<endl;\n//    for(int i=1;i<=n;i++) cout<<dp[1][i]<<\" \";\n//    cout<<endl;\n//    for(int i=1;i<=n;i++) cout<<cnt[0][i]<<\" \";\n//    cout<<endl;\n//    for(int i=1;i<=n;i++) cout<<cnt[1][i]<<\" \";\n//    cout<<endl;\n    cout<<ans+max(dp[0][n],dp[1][n])<<endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "// Math = ♥\n// Sometimes it is people that no one imagines anything of who do things that no one can imagine\n// After all this time? Always\n\n#include <bits/stdc++.h>                        // uncomment before submission\n//#include <ext/pb_ds/assoc_container.hpp>\t\t// uncomment before submission\n//#include <ext/pb_ds/tree_policy.hpp>\t\t\t// uncomment before submission\n//using namespace __gnu_pbds;\t\t\t\t\t// uncomment before submission\nusing namespace std;\n//<---------------------------------------------------Template----------------------------------------------------------->\n#define int long long\n#define ll long long\n#define ld long double\nint INF = 1e9 + 7;\ntypedef pair<ll, ll> ii;\ntypedef vector<ll> vi;                  // Vector of long long\ntypedef vector<vi> vvi;                 // Vector of vi\ntypedef vector<ii> vii;                 // Vector of pairs\ntypedef vector<vii> vvii;               // Vector of Vector of pairs\ntypedef vector<bool> vb;                // Vector of bool\n#define pq priority_queue               // Max heap (To convert to min heap, use negative sign before every value)\n#define ff first                        // For pairs\n#define ss second                       // For pairs\n#define pb push_back                    // Pushback to vector\n#define mp make_pair                    // Makes pairs to be stored as pair\n#define all(c) (c).begin(), (c).end()   // Mainly used by me in sorting\n// ordered_set adds two new functions to set - (set).find_by_order([kth element based on zero indexing]) and order_of_key()\n// order_of_key returns number of elements less that parameter. If element exists, that order is its index\n#define ordered_set tree<ll, null_type, less<ll>, rb_tree_tag, tree_order_statistics_node_update>\n//<----------------------------------------------------------------------------------------------------------------------->\n\nsigned main()\n{\n    ios_base::sync_with_stdio(false);\n    cin.tie(NULL);\n    int n;\n    cin >> n;\n\n    vector<char> op;\n    vi num;\n\n    int x;\n    cin >> x, num.pb(x);\n    for (int i = 0; i < n - 1; i++)\n    {\n        char ch;\n        cin >> ch >> x;\n        op.pb(ch), num.pb(x);\n    }\n\n    vvi dp(n, vector<int>(3));\n    dp[0][0] = num[0];\n    dp[0][1] = -INF;\n    dp[0][2] = -INF;\n\n    for (int i = 1; i < n; i++)\n    {\n        if (op[i - 1] == '+')\n        {\n            dp[i][1] = dp[i - 1][1] - num[i];\n            dp[i][2] = dp[i - 1][2] + num[i];\n            dp[i][0] = max(dp[i - 1][0], dp[i - 1][1]) + num[i];\n        } else\n        {\n            dp[i][1] = max(dp[i - 1][0], dp[i - 1][1]) - num[i];\n            dp[i][2] = max(dp[i - 1][1], dp[i - 1][2]) + num[i];\n            dp[i][0] = -INF;\n        }\n    }\n\n    int a[] = {dp[n - 1][0], dp[n - 1][1], dp[n - 1][2]};\n    sort(a, a + 3);\n\n    cout << a[2] << endl;\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<algorithm>\n#define MAXN 100006\n#define INF 23333333333333333\nusing namespace std;\nint n,r[MAXN];\nlong long a[MAXN],sum[MAXN],ans=-INF;\nchar op[MAXN];\nint main()\n{\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tif(i==1) scanf(\"%lld\",&a[i]);\n\t\telse scanf(\" %c %lld\",&op[i],&a[i]);\n\t}\n\tint last=n+1;\n\tfor(int i=n;i>=1;i--)\n\t{\n\t\tsum[i]=sum[i+1]+a[i];\n\t\tr[i]=last;\n\t\tif(op[i]=='-') last=i;\n\t}\n\tlong long sumlast=a[1];\n\tfor(int i=2;i<=n;i++)\n\t{\n\t\tif(op[i]=='-') ans=max(ans,sumlast+sum[r[i]]*2-sum[i]);\n\t\tif(op[i]=='+') sumlast+=a[i];\n\t\telse sumlast-=a[i];\n\t}\n\tprintf(\"%lld\",max(ans,sumlast));\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\ntypedef int sign;\ntypedef long long ll;\n#define For(i,a,b) for(register sign i=(sign)(a);i<=(sign)(b);++i)\n#define Fordown(i,a,b) for(register sign i=(sign)(a);i>=(sign)(b);--i)\nconst int N=1e5+5;\ntemplate<typename T>bool cmax(T &a,T b){return (a<b)?a=b,1:0;}\ntemplate<typename T>bool cmin(T &a,T b){return (a>b)?a=b,1:0;}\ntemplate<typename T>T read()\n{\n\tT ans=0,f=1;\n\tchar ch=getchar();\n\twhile(!isdigit(ch)&&ch!='-')ch=getchar();\n\tif(ch=='-')f=-1,ch=getchar();\n\twhile(isdigit(ch))ans=(ans<<3)+(ans<<1)+(ch-'0'),ch=getchar();\n\treturn ans*f;\n}\ntemplate<typename T>void write(T x,char y)\n{\n\tif(x==0)\n\t{\n\t\tputchar('0'),putchar(y);\n\t\treturn;\n\t}\n\tif(x<0)\n\t{\n\t\tputchar('-');\n\t\tx=-x;\n\t}\n\tstatic char wr[20];\n\tint top=0;\n\tfor(;x;x/=10)wr[++top]=x%10+'0';\n\twhile(top)putchar(wr[top--]);\n\tputchar(y);\n}\nvoid file()\n{\n#ifndef ONLINE_JUDGE\n\tfreopen(\"E.in\",\"r\",stdin);\n\tfreopen(\"E.out\",\"w\",stdout);\n#endif\n}\nint n;\nll dp[N][3];\nconst ll inf=1e18;\nvoid work()\n{\t\n\tn=read<int>();\n\tFor(i,1,n)For(j,0,2)dp[i][j]=-inf;\n\tchar s[5];\n\tint x;\n\tx=read<int>();\n\tdp[1][0]=x;\n\tint ty;\n\tFor(i,2,n)\n\t{\n\t\tscanf(\"%s\",s);\n\t\tx=read<int>();\n\t\tty=(s[0]=='+'?1:-1);\n\t\t\n\t\tcmax(dp[i][0],dp[i-1][0]+x*ty);\n\t\tcmax(dp[i][0],dp[i-1][1]+x*ty);\n\t\tcmax(dp[i][0],dp[i-1][2]+x*ty);\n\t\t\n\t\tcmax(dp[i][1],dp[i-1][1]+x*ty*(-1));\n\t\tcmax(dp[i][1],dp[i-1][2]+x*ty*(-1));\n\t\tif(s[0]=='-')\n\t\t{\n\t\t\tcmax(dp[i][1],dp[i-1][0]-x);\n\t\t\tcmax(dp[i][1],dp[i-1][1]-x);\n\t\t\tcmax(dp[i][1],dp[i-1][2]-x);\n\t\t}\n\t\tcmax(dp[i][2],dp[i-1][2]+x*ty);\n\t\tif(s[0]=='-')\n\t\t{\n\t\t\tcmax(dp[i][2],dp[i-1][1]+x);\n\t\t\tcmax(dp[i][2],dp[i-1][2]+x*ty*(-1));\n\t\t}\n\t\t//cout<<dp[i][0]<<' '<<dp[i][1]<<' '<<dp[i][2]<<endl;\n\t}\n\twrite(max(max(dp[n][0],dp[n][1]),dp[n][2]),'\\n');\n}\nint main()\n{\n\n\twork();\n\treturn 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define loop(n) for (int ngtkana_is_genius = 0; ngtkana_is_genius < int(n); ngtkana_is_genius++)\n#define rep(i, begin, end) for(int i = int(begin); i < int(end); i++)\n#define all(v) v.begin(), v.end()\n#define rand(l, r) std::uniform_int_distribution<>(l, r)(mt)\n#define lint long long\nauto cmn = [](auto& a, auto b){if (a > b) {a = b; return true;} return false;};\nauto cmx = [](auto& a, auto b){if (a < b) {a = b; return true;} return false;};\nvoid debug_impl() { std::cerr << std::endl; }\ntemplate <typename Head, typename... Tail>\nvoid debug_impl(Head head, Tail... tail){\n  std::cerr << \" \" << head;\n  debug_impl(tail...);\n}\n#ifndef STOPIT\n#define debug(...)\\\n  std::cerr << std::boolalpha << \"[\" << #__VA_ARGS__ << \"]:\";\\\n  debug_impl(__VA_ARGS__);\\\n  std::cerr << std::noboolalpha;\n#else\n#define debug 0;\n#endif\n\ntemplate < typename Container, typename Value = typename Container::value_type, std::enable_if_t<!std::is_same< Container, std::string >::value, std::nullptr_t> = nullptr>\nstd::istream& operator>> (std::istream& is, Container& v)\n  { for (auto & x : v) { is >> x; } return is; }\n\ntemplate < typename Container, typename Value = typename Container::value_type, std::enable_if_t<!std::is_same< Container, std::string >::value, std::nullptr_t> = nullptr >\nstd::ostream& operator<< (std::ostream& os, Container const& v) {\n os << \"{\";\n  for (auto it = v.begin(); it != v.end(); it++)\n    {os << (it != v.begin() ? \",\" : \"\") << *it;}\n  return os << \"}\";\n}\n\ntemplate < template < typename ... > class Tuple,  typename... Args, std::size_t ... Inds, std::size_t = std::tuple_size< Tuple < Args ... > >::value >\nstd::istream& tuple_input_impl(std::istream& os, Tuple<Args...>& tuple, std::integer_sequence<std::size_t, Inds...>)\n  { (void)std::initializer_list<int>{((void)(os >> std::get< Inds >(tuple)), 0)...}; return os; }\ntemplate < template < typename ... > class Tuple,  typename... Args, std::size_t = std::tuple_size< Tuple < Args ... > >::value >\nstd::istream& operator>> (std::istream& os, Tuple<Args...>& tuple)\n  { return tuple_input_impl(os, tuple, std::index_sequence_for<Args...>()); }\n\ntemplate < template < typename ... > class Tuple,  typename... Args, std::size_t ... Inds, std::size_t = std::tuple_size< Tuple < Args ... > >::value >\nstd::ostream& tuple_output_impl(std::ostream& os, const Tuple<Args...>& tuple, std::integer_sequence<std::size_t, Inds...>)\n  { os << \"(\"; (void)std::initializer_list<int>{((void)(os << (Inds > 0 ? \",\" : \"\") << std::get< Inds >(tuple)), 0)...}; return os << \")\"; }\ntemplate < template < typename ... > class Tuple,  typename... Args, std::size_t = std::tuple_size< Tuple < Args ... > >::value >\nstd::ostream& operator<< (std::ostream& os, const Tuple<Args...>& tuple)\n { return tuple_output_impl(os, tuple, std::index_sequence_for<Args...>()); }\n\nint main() {\n  std::cin.tie(0); std::cin.sync_with_stdio(false);\n  int n; std::cin >> n;\n  std::vector< lint > a(n);\n  std::vector< int > minus;\n  rep(i, 0, n) {\n    if (0 < i) {\n      char c; std::cin >> c;\n      if (c == '-')\n        { minus.emplace_back(i); }\n    }\n    int x; std::cin >> a.at(i);\n  }\n  int m = minus.size();\n  minus.emplace_back(n);\n  std::vector< lint > b(n);\n  std::partial_sum(all(a), b.begin());\n  b.insert(b.begin(), 0LL);\n  std::vector< std::pair< lint, lint > > data(m);\n  rep(i, 0, m) {\n    auto x = minus.at(i);\n    auto y = minus.at(i + 1);\n    data.at(i) = { a.at(x), b.at(y) - b.at(x) };\n  }\n  lint min = 1LL << 60;\n  lint now = 0;\n  for (auto pair : data) {\n    lint x, y; std::tie(x, y) = pair;\n    cmn(min, now + y);\n    now += x;\n  }\n  lint sum = b.back();\n  auto ret = sum - 2 * min;\n  std::cout << ret << std::endl;\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <algorithm>\n\nusing namespace std;\n\n#define REP(i,n)   for(int i=0; i<(int)(n); i++)\n#define FOR(i,b,e) for(int i=(b); i<=(int)(e); i++)\n#define DUMP2D(a, n, m) REP(i, n) REP(j, m) printf(\"%lld%c\", a[i][j], j + 1 == m ? '\\n' : ' '); puts(\"\")\n\ntypedef long long ll;\n\nconst int N_MAX = 100000;\nconst ll INF = 1e15;\n\nint N;\nint A[N_MAX];\nint op[N_MAX + 1];\nll dp[N_MAX + 1][3];\n\nvoid solve() {\n  fill(dp[0], dp[N + 1], -INF);\n  fill(dp[0], dp[1], 0);\n  int m = 1;\n  REP(i, N) {\n    REP(j, min(m, 3)) {\n      int a = A[i] * ((j + op[i]) % 2 == 0 ? 1 : -1);\n      dp[i + 1][j] = max(dp[i + 1][j], dp[i][j] + a);\n      if (j < 2 && op[i] > 0) {\n        dp[i + 1][j + 1] = max(dp[i + 1][j + 1], dp[i][j] + a);\n      }\n      if (j > 0) {\n        dp[i + 1][j - 1] = max(dp[i + 1][j - 1], dp[i][j] + a);\n      }\n    }\n    m += op[i];\n  }\n\n  // DUMP2D(dp, N + 1, 3);\n\n  ll ans = -INF;\n  REP(j, 3) ans = max(ans, dp[N][j]);\n  printf(\"%lld\\n\", ans);\n}\n\nvoid input() {\n  scanf(\"%d\", &N);\n  REP(i, N) {\n    scanf(\"%d\", A + i);\n    if (i + 1 < N) {\n      char buf[2];\n      scanf(\"%s\", buf);\n      op[i + 1] = buf[0] == '-' ? 1 : 0;\n    }\n  }\n}\n\nint main() {\n  input();\n  solve();\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "\n/* -------------------------------- Template -------------------------------- */\n\n#include <algorithm>\n#include <array>\n#include <bitset>\n#include <cassert>\n#include <cmath>\n#include <complex>\n#include <cstdio>\n#include <cstring>\n#include <deque>\n#include <functional>\n#include <iomanip>\n#include <locale>\n#include <iostream>\n#include <map>\n#include <memory>\n#include <new>\n#include <numeric>\n#include <queue>\n#include <random>\n#include <set>\n#include <sstream>\n#include <string>\n#include <tuple>\n#include <unordered_map>\n#include <unordered_set>\n#include <utility>\n#include <vector>\n\n#define REP(i,n) for(int i=0;i<(int)(n);i++)\n#define ALL(x) (x).begin(),(x).end()\n\nusing ll = long long;\nusing ld = long double;\n\ntemplate <typename T> T &chmin(T &a, const T &b) { return a = std::min(a, b); }\ntemplate <typename T> T &chmax(T &a, const T &b) { return a = std::max(a, b); }\ntemplate <typename T> int len(const T &x) { return x.size(); }\n\n// template<typename T> constexpr T inf;\n// template<> constexpr int inf<int> = 1e9;\n// template<> constexpr ll inf<ll> = 1e18;\n// template<> constexpr ld inf<ld> = 1e30;\n\nstruct yes_no : std::numpunct<char> {\n  string_type do_truename()  const { return \"Yes\"; }\n  string_type do_falsename() const { return \"No\"; }\n};\n\nvoid solve();\n\nint main() {\n  std::locale loc(std::locale(), new yes_no);\n  std::cout << std::boolalpha << std::setprecision(12) << std::fixed;\n  std::cout.imbue(loc);\n  solve();\n  return 0;\n}\n\nusing namespace std;\n\n/* -------------------------------- Library -------------------------------- */\n\n/* ---------------------------------- Main ---------------------------------- */\n\nll A[128000];\nll B[128000];\n\nvoid solve() {\n  ll N;\n  cin >> N;\n  vector<int> idx;\n  REP(i,N) {\n    if (i > 0) {\n      string op;\n      cin >> op;\n      if (op == \"-\") idx.push_back(i);\n    }\n    cin >> A[i];\n  }\n  REP(i,N) B[i+1] = B[i] + A[i];\n\n  ll sum = accumulate(A, A + N, 0LL);\n  if (idx.empty()) {\n    cout << sum << endl;\n    return;\n  }\n\n  ll res = -1e18;\n  ll dec = 0;\n  REP(i,idx.size()-1) {\n    chmax(res, sum - dec * 2 - (B[idx[i+1]] - B[idx[i]]) * 2);\n    dec += A[idx[i]];\n  }\n  chmax(res, sum - dec * 2 - A[idx.back()] * 2);\n  cout << res << endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n#define N 1000010\n#define inf (1LL<<60)\ninline int read() {\n    int x=0,f=1;\n    char ch=getchar();\n    while (!isdigit(ch)) {\n        if (ch=='-') f=-1;\n        ch=getchar();\n    }\n    while (isdigit(ch)) x=x*10+ch-'0',ch=getchar();\n    return x*f;\n}\nlong long f[N][3];\nint main() {\n    int n=read();\n    f[0][0]=0,f[0][1]=f[0][2]=-inf;\n    for (int i=1;i<=n;i++) {\n        int x=read();\n        f[i][0]=max(f[i-1][0],f[i-1][1])+x;\n        f[i][1]=max(f[i-1][1],f[i-1][2])-x;\n        f[i][2]=f[i-1][2]+x;\n        if (x<0) f[i][2]=max(f[i][2],f[i][1]),f[i][1]=max(f[i][1],f[i][0]);\n    }\n    cout<<max(f[n][0],max(f[n][1],f[n][2]))<<endl;\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<stdio.h>\n#include<string.h>\nusing namespace std;\nlong long n,a[120000],b[120000],x,tail,tot;\nchar s[10]; \nint main(){\n\tscanf(\"%lld\",&n);\n\tscanf(\"%lld\",&a[1]);\n\ttail=1;\n\ttot=a[1];\n\tfor(int i=2;i<=n;i++){\n\t\tscanf(\"%s\",s+1);\n\t\tscanf(\"%lld\",&x);\n\t\ttot+=x;\n\t\tif(s[1]=='-'){\n\t\t\ttail++;\n\t\t\ta[tail]=x;\n\t\t\tb[tail]=x;\n\t\t}else a[tail]+=x;\n\t}\n\tlong long ans=1000000000000000000LL,bns=0;\n\tfor(int i=2;i<=tail;i++){\n\t\tans=min(ans,bns+a[i]);\n\t\tbns+=b[i];\n\t}\n\tif(tail==1)ans=0;\n\tprintf(\"%lld\\n\",tot-2*ans);\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nusing ll = long long;\nusing Pi = pair<int, int>;\nusing Pl = pair<ll, ll>;\nusing vint = vector<int>;\nusing vll = vector<ll>;\nusing uint = unsigned int;\nusing ull = unsigned long long;\n\ntemplate<typename T> using uset = unordered_set<T>;\ntemplate<typename T1, typename T2> using umap = unordered_map<T1, T2>;\n\nconstexpr int INF = (1 << 30) - 1;\nconstexpr ll LLINF = 1LL << 60;\nconstexpr int dy[] = {1, 0, -1, 0, 1, -1, -1, 1};\nconstexpr int dx[] = {0, 1, 0, -1, 1, 1, -1, -1};\nconstexpr char el = '\\n';\nconstexpr int mod = 1000000007;\n\ntemplate<typename T> T gcd(T a, T b) { return (b ? gcd(b, a % b) : a); }\ntemplate<typename T> T lcm(T a, T b) { return (a / gcd(a, b) * b); }\ntemplate<typename T1, typename T2> inline void chmin(T1 &a, T2 b) { if (a > b) a = b; }\ntemplate<typename T1, typename T2> inline void chmax(T1 &a, T2 b) { if (a < b) a = b; }\n\ntemplate<typename T>\nostream& operator <<(ostream &os, vector<T> &v) {\n\tfor (auto &u : v) os << u << el;\n\treturn (os);\n}\n\ntemplate<typename T>\nistream& operator >>(istream &is, vector<T> &v) {\n\tfor (auto &u : v) is >> u;\n\treturn (is);\n}\n\ntemplate<typename T1, typename T2>\nistream& operator >>(istream &is, pair<T1, T2> &p) {\n\treturn (is >> p.first >> p.second);\n}\n\nint main() {\n\tint N; cin >> N;\n\tvector<vll> dp(N, vll(3, -LLINF));\n\n\tcin >> dp[0][0];\n\tfor (int i = 1; i < N; i++) {\n\t\tchar op; ll val;\n\t\tcin >> op >> val;\n\t\tif (op == '-') val = -val;\n\t\tchmax(dp[i][0], dp[i-1][0] + val);\n\t\tchmax(dp[i][1], dp[i-1][1] - val);\n\t\tchmax(dp[i][2], dp[i-1][2] + val);\n\t\tif (op == '-') {\n\t\t\tchmax(dp[i][1], dp[i-1][0] + val);\n\t\t\tchmax(dp[i][2], max(dp[i-1][1], dp[i-1][2]) - val);\n\t\t}\n\t\tchmax(dp[i][1], dp[i-1][2] - val);\n\t\tchmax(dp[i][0], dp[i-1][1] + val);\n\t}\n\tcout << max({dp[N-1][0], dp[N-1][1], dp[N-1][2]}) << endl;\n\treturn (0);\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\nusing Int = long long;\nInt dp[100010][3];\nconst Int INF = 1e18;\nint main() {\n    int N; cin >> N;\n    vector<Int> A(N);\n    vector<char> op(N - 1);\n    for (int i = 0; i < N; i++) {\n        cin >> A[i];\n        if (i != N - 1) cin >> op[i];\n    }\n    dp[0][0] = A[0];\n    dp[0][1] = dp[0][2] = -INF;\n    for (int i = 1; i < N; i++) {\n        if (op[i - 1] == '+') {\n            dp[i][0] = max({dp[i - 1][0] + A[i], dp[i - 1][1] + A[i], dp[i - 1][2] + A[i]});\n            dp[i][1] = max(dp[i - 1][1] - A[i], dp[i - 1][2] - A[i]);\n            dp[i][2] = dp[i - 1][2] + A[i];\n        } else {\n            dp[i][0] = max({dp[i - 1][0] - A[i], dp[i - 1][1] - A[i], dp[i - 1][2] - A[i]});\n            dp[i][1] = max({dp[i - 1][0] - A[i], dp[i - 1][1] - A[i], dp[i - 1][1] + A[i], dp[i - 1][2] - A[i], dp[i - 1][2] + A[i]});\n            dp[i][2] = max({dp[i - 1][1] + A[i], dp[i - 1][2] - A[i], dp[i - 1][2] + A[i]});\n        }\n    }\n    cout << max({dp[N - 1][0], dp[N - 1][1], dp[N - 1][2]}) << endl;\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<algorithm>\nusing namespace std;\nconst int MAXN=100005;\n\nchar str[3];\nint n,A[MAXN],op[MAXN];\nlong long sum[MAXN],sum2[MAXN];\n\nint main()\n{\n\tscanf(\"%d\",&n);\n\top[1]=1;\n\tlong long ans;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tscanf(\"%d\",&A[i]);\n\t\tsum2[i]=sum2[i-1]+A[i];\n\t\tsum[i]=sum[i-1]+A[i]*op[i];\n\t\tif(i<n)\n\t\t{\n\t\t\tscanf(\"%s\",str);\n\t\t\top[i+1]=(str[0]=='+')?1:-1;\n\t\t}\n\t}\n\t\n\tint last=-1;\n\top[n+1]=-1;\n\tans=sum[n];\n\tfor(int i=1;i<=n+1;i++)\n\t\tif(op[i]==-1)\n\t\t{\n\t\t\tif(last!=-1)\n\t\t\t\tans=max(ans,sum2[n]-sum2[i-1]-(sum2[i-1]-sum2[last-1])+sum[last-1]);\n\t\t\tlast=i;\n\t\t}\n\tprintf(\"%lld\\n\",ans);\n\t\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "//Link : https://atcoder.jp/contests/arc066/tasks/arc066_c\n\n#include <bits/stdc++.h>\nusing namespace std;\n#define ll long long\n#define N 200005\n\nint A[N],op[N];\nll dp[N][4];\n\nint getValue(int o,int bit,int v) {\n  bit^=o;\n  if(bit&1) {\n    return -v;\n  }\n  return v;\n}\nll solveDp(int ind,int bit,int n) {\n  if(ind>n) {\n    return 0;\n  }\n  ll &ret = dp[ind][bit];\n  if( ret!=-1) {\n    return ret;\n  }\n  for(int i=0;i<bit;++i) {\n    ret = max(ret, solveDp(ind,i,n));\n  }\n\n  ret = max(ret,solveDp(ind+1,bit,n) + getValue(op[ind-1],bit,A[ind]));\n  if(op[ind-1]) {\n    if(bit!=3) {\n      ret = max(ret,getValue(op[ind-1],bit,A[ind]) + solveDp(ind+1,bit+1,n));\n    }\n  }\n\n  return ret;\n}\nvoid solve() {\n  int n;scanf(\"%d \",&n);\n  for(int i=1;i<=n;++i) {\n    scanf(\"%d \", &A[i]);\n    char c;\n    if(i!=n) {\n      scanf(\" %c \", &c);\n      if(c=='-') {\n        op[i] = 1;\n      }\n    }\n  }\n  memset(dp,-1,sizeof(dp));\n  printf(\"%lld\\n\", solveDp(1,0,n));\n}\nint main() {\n    //freopen(\"input.txt\",\"r\",stdin);\n    solve();\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <cstdlib>\n#include <cmath>\n#include <climits>\n#include <cfloat>\n#include <map>\n#include <set>\n#include <iostream>\n#include <string>\n#include <vector>\n#include <algorithm>\n#include <sstream>\n#include <complex>\n#include <stack>\n#include <queue>\n#include <cstdio>\n#include <cstring>\n#include <iterator>\n#include <bitset>\n#include <unordered_set>\n#include <unordered_map>\n#include <fstream>\n#include <iomanip>\n#include <cassert>\n//#include <utility>\n//#include <memory>\n//#include <functional>\n//#include <deque>\n//#include <cctype>\n//#include <ctime>\n//#include <numeric>\n//#include <list>\n//#include <iomanip>\n\n//#if __cplusplus >= 201103L\n//#include <array>\n//#include <tuple>\n//#include <initializer_list>\n//#include <forward_list>\n//\n//#define cauto const auto&\n//#else\n\n//#endif\n\nusing namespace std;\n\n\ntypedef long long ll;\ntypedef pair<int,int> pii;\ntypedef pair<ll,ll> pll;\n\ntypedef vector<int> vint;\ntypedef vector<vector<int> > vvint;\ntypedef vector<long long> vll, vLL;\ntypedef vector<vector<long long> > vvll, vvLL;\n\n#define VV(T) vector<vector< T > >\n\ntemplate <class T>\nvoid initvv(vector<vector<T> > &v, int a, int b, const T &t = T()){\n    v.assign(a, vector<T>(b, t));\n}\n\ntemplate <class F, class T>\nvoid convert(const F &f, T &t){\n    stringstream ss;\n    ss << f;\n    ss >> t;\n}\n\n#undef _P\n#define _P(...) (void)printf(__VA_ARGS__)\n#define reep(i,a,b) for(int i=(a);i<(b);++i)\n#define rep(i,n) reep((i),0,(n))\n#define ALL(v) (v).begin(),(v).end()\n#define PB push_back\n#define F first\n#define S second\n#define mkp make_pair\n#define RALL(v) (v).rbegin(),(v).rend()\n#define DEBUG\n#ifdef DEBUG\n#define dump(x)  cout << #x << \" = \" << (x) << endl;\n#define debug(x) cout << #x << \" = \" << (x) << \" (L\" << __LINE__ << \")\" << \" \" << __FILE__ << endl;\n#else\n#define dump(x) \n#define debug(x) \n#endif\n\n#define MOD 1000000007LL\n#define EPS 1e-8\n#define INF 0x3f3f3f3f\n#define INFL 0x3f3f3f3f3f3f3f3fLL\n#define maxs(x,y) x=max(x,y)\n#define mins(x,y) x=min(x,y)\n\nvoid mainmain(){\n\tint n;\n\tscanf(\"%d\", &n);\n\t// cout<<n<<endl;\n\tvll v(n);\n\tvint op(n);\n\top[0]=1;\n\tint cnt = 0;\n\trep(i,n){\n\t\tif(i){\n\t\t\tchar t;\n\t\t\tscanf(\" %c %lld\", &t, &v[i]);\n\t\t\tif(t=='+') op[i]=1;\n\t\t\telse op[i]=-1,cnt++;\n\t\t}\n\t\telse{\n\t\t\tscanf(\"%lld\", &v[i]);\n\t\t}\n\t}\n\tif(cnt<=1){\n\t\tll sum = 0;\n\t\trep(i,n){\n\t\t\tsum+=op[i]*v[i];\n\t\t}\n\t\tcout<<sum<<endl;\n\t\treturn;\n\t}\n\tvll s(n+1);\n\tfor(int i=n-1;i>=0;i--){\n\t\tif(i==n-1) s[i]=v[i];\n\t\telse{\n\t\t\ts[i]=s[i+1]+v[i];\n\t\t}\n\t}\n\tll ans = -INFL;\n\tll sum = 0;\n\trep(i,n){\n\t\tsum+=op[i]*v[i];\n\t}\n\tans=sum;\n\tsum=0;\n\trep(i,n){\n\t\tif(op[i]==-1){\n\t\t\tll t = v[i];\n\t\t\tint p = i;\n\t\t\tp++;\n\t\t\twhile(p<n&&op[p]==1){\n\t\t\t\tt+=v[p];\n\t\t\t\tp++;\n\t\t\t}\n\t\t\tif(p==n){\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tmaxs(ans, sum+(-t+s[p]));\n\t\t\tsum-=v[i];\n\t\t}\n\t\telse{\n\t\t\tsum+=v[i];\n\t\t}\n\t}\n\tcout<<ans<<endl;\n}\n\n\nsigned main() {\n    ios_base::sync_with_stdio(false);\n    cin.tie(0);\n    cout<<fixed<<setprecision(20);\n    mainmain();\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\n#include<cstring>\n#include<cstdio>\n#include<cmath>\nusing namespace std;\n#define ll long long\nll n,ans,cnt,rec;\nll read()\n{\n\tll res;char ch;\n\twhile(!isdigit(ch=getchar()));\n\tres=ch-'0';\n\twhile(isdigit(ch=getchar()))res=res*10-'0'+ch;\n\treturn res;\n}\nll reado()\n{\n\tchar ch;\n\twhile((ch=getchar())!='+'&&ch!='-');\n\treturn ch=='-';\n}\nint main()\n{\n\tn=read();\n\tfor(ll i=1,a,o=0;i<=n;++i)\n\t{\n\t\tif(i>1)o=reado();\n\t\ta=read();\n\t\tif(o)\n\t\t{\n\t\t\tswitch(cnt)\n\t\t\t{\n\t\t\t\tcase 0:ans+=rec-a;break;\n\t\t\t\tcase 1:ans+=abs(rec-a);break;\n\t\t\t\tdefault:ans+=rec+a;break;\n\t\t\t}\n\t\t\trec=0;++cnt;\n\t\t}\n\t\telse rec+=a;\n\t}\n\tans+=rec;\n\tprintf(\"%lld\",ans);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n#define LL long long\n\nvoid read(int &x)\n{\n\tchar c=getchar(); x=0;\n\twhile (c<'0'||c>'9') c=getchar();\n\twhile (c>='0'&&c<='9') x=x*10+c-'0',c=getchar();\n}\n\nconst int PLUS=0;\nconst int MINUS=1;\nconst int maxn=1e5+10;\n\nint n,a[maxn];\nLL pre[maxn],suf[maxn],Ans;\nbool op[maxn];\n\nint main()\n{\n#ifdef h10\n\tfreopen(\"E.in\",\"r\",stdin);\n\tfreopen(\"E.out\",\"w\",stdout);\n#endif\n\tint i;\n\tread(n);\n\tread(a[1]);\n\top[1]=PLUS;\n\tfor (i=2;i<=n;i++)\n\t{\n\t\tchar c=getchar();\n\t\twhile (c!='+'&&c!='-') c=getchar();\n\t\tif (c=='+') op[i]=PLUS;\n\t\telse op[i]=MINUS;\n\t\tread(a[i]);\n\t}\n\tfor (i=1;i<=n;i++)\n\t\tpre[i]=pre[i-1]+(op[i]==PLUS?a[i]:-a[i]);\n\tfor (i=n;i>=1;i--)\n\t\tsuf[i]=suf[i+1]+a[i];\n\tAns=pre[n];\n\tint last=0;\n\tfor (i=n;i>=1;i--)\n\t\tif (op[i]==MINUS)\n\t\t{\n\t\t\tif (last)\n\t\t\t\tAns=max(Ans,suf[last]+pre[i-1]-(suf[i]-suf[last]));\n\t\t\tlast=i;\n\t\t}\n\tprintf(\"%lld\\n\",Ans);\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef pair<ll, ll> P;\n\n#define fi first\n#define se second\n#define repl(i,a,b) for(ll i=(ll)(a);i<(ll)(b);i++)\n#define rep(i,n) repl(i,0,n)\n#define all(x) (x).begin(),(x).end()\n#define dbg(x) cout<<#x\"=\"<<x<<endl\n#define mmax(x,y) (x>y?x:y)\n#define mmin(x,y) (x<y?x:y)\n#define maxch(x,y) x=mmax(x,y)\n#define minch(x,y) x=mmin(x,y)\n#define uni(x) x.erase(unique(all(x)),x.end())\n#define exist(x,y) (find(all(x),y)!=x.end())\n#define bcnt __builtin_popcount\n\n#define INF 9e18\n#define mod 1000000007\n\nll n;\nll st;\nll dp[3];\n\nint main(){\n  cin>>n>>st;\n  dp[0]=st;dp[1]=-INF;dp[2]=-INF;\n  rep(i,n-1){\n    char c;\n    ll a;\n    cin>>c>>a;\n    ll nxt[3];\n    nxt[0]=nxt[1]=nxt[2]=-INF;\n    if(c=='+'){\n      maxch(nxt[0],dp[0]+a);\n\n      maxch(nxt[1],dp[1]-a);\n      maxch(nxt[0],dp[1]+a);\n\n      maxch(nxt[2],dp[2]+a);\n      maxch(nxt[1],dp[2]-a);\n    }else{\n      maxch(nxt[0],dp[0]-a);\n      maxch(nxt[1],dp[0]-a);\n\n      maxch(nxt[1],dp[1]+a);\n      maxch(nxt[0],dp[1]-a);\n      maxch(nxt[2],dp[1]+a);\n\n      maxch(nxt[2],dp[2]-a);\n      maxch(nxt[1],dp[2]+a);\n    }\n    dp[0]=nxt[0]; dp[1]=nxt[1]; dp[2]=nxt[2];\n  }\n  cout<<*max_element(dp,dp+3)<<endl;\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstdio>\n#include<cstring>\nusing namespace std;\nconst int N=2e5+500;\nchar st[10];\nint w[N],fh[N],n,lst[N];long long s[N];\nint main()\n{\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tscanf(\"%d\",w+i);\n\t\tif(i!=n)\n\t\t{\n\t\t\tscanf(\"%s\",st+1);\n\t\t\tif(st[1]=='-')fh[i]=-1;else fh[i]=1;\n\t\t}\n\t}\n\tlong long ans=w[1];for(int i=2;i<=n;i++)ans+=fh[i-1]*w[i];\n\tfor(int i=1;i<=n;i++)s[i]=s[i-1]+w[i];\n\tlst[n]=n;long long pres=0;\n\tfor(int i=n-1;i>=1;i--)if(fh[i]==1)lst[i]=lst[i+1];else lst[i]=i;\n\tfh[0]=1;\n\tfor(int i=1;i<n;i++)\n\t{\n\t\tpres+=fh[i-1]*w[i];\n\t\tif(fh[i]==-1)ans=max(ans,s[n]-s[lst[i+1]]-(s[lst[i+1]]-s[i])+pres);\n\t}\n\tcout<<ans<<endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\n#define int long long\n#define pb push_back \n#define pf push_front \n#define mp make_pair\n#define fr first\n#define sc second\n#define Rep(i, n) for ( int i = 0 ; i < (n); i++ )\n#define All(v) v.begin(), v.end()\n\ntypedef pair<int, int> Pii; typedef pair<int, Pii> Pip;\nconst int INF = 1107110711071107;\n\nsigned main() {\n\tint N;\n\tint A[100001];\n\tchar op[100001];\n\tint dp[100001][3];\t\n\n\tfill_n(*dp, 100001*3, -INF);\n\t\n\tcin >> N;\n\tcin >> A[0];\n\tdp[0][0] = A[0];\n\n\tfor ( int i = 1; i < N; i++ ) cin >> op[i] >> A[i];\n\t\n\tfor ( int i = 1; i < N; i++ ) {\n\t\tif ( op[i] == '+' ) {\n\t\t\tdp[i][0] = dp[i-1][0]+A[i];\n\t\t\tdp[i][1] = dp[i-1][1]-A[i];\n\t\t\tdp[i][2] = dp[i-1][2]+A[i];\n\t\t} else {\n\t\t\t//open\n\t\t\tdp[i][1] = max(dp[i-1][0], dp[i-1][2])-A[i];\n\t\t\tdp[i][0] = dp[i][2] = dp[i-1][1]+A[i];\t\t\t\n\t\t}\n\n\t\t//close\n\t\tdp[i][1] = max(dp[i][1], dp[i][2]);\n\t\tdp[i][0] = max(dp[i][0], dp[i][1]);\n\t}\n\n\tcout << *max_element(dp[N-1], dp[N-1]+3) << endl;\n\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n#include <queue>\n#include <map>\nusing namespace std;\nint64_t dp[100000][3];\nint main(){\n    int N;\n    cin>>N;\n    cin>>dp[0][0];\n    dp[0][2]=dp[0][1]=-1e16;\n    for(int i=1;i<N;i++){\n        int A;\n        char op;\n        cin>>op;\n        cin>>A;\n        if(op=='+'){\n            dp[i][0]=max({dp[i-1][0]+A,dp[i-1][1]-A,dp[i-1][2]+A});\n            dp[i][1]=max({dp[i-1][1]-A,dp[i-1][2]+A});\n            dp[i][2]=dp[i-1][2]+A;\n        }else{\n            dp[i][0]=max({dp[i-1][0]-A,dp[i-1][1]+A,dp[i-1][2]-A});\n            dp[i][1]=max({dp[i-1][0]-A,dp[i-1][1]+A,dp[i-1][2]-A});\n            dp[i][2]=max(dp[i-1][1]+A,dp[i-1][2]-A);\n        }\n    }\n    cout<<max({dp[N-1][0],dp[N-1][1],dp[N-1][2]})<<endl;\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\nusing int64 = long long;\n\nconstexpr int DEBUG = 0;\n\ntemplate<class T> inline bool UpdateMin(T& a, T b) {\n  if (a > b) { a = b; return 1; } return 0;\n}\n\ntemplate<class T> inline bool UpdateMax(T& a, T b) {\n  if (a < b) { a = b; return 1; } return 0;\n}\n\ntemplate<class T> vector<T> CumulativeSumVector(const vector<T>& xs) {\n  int n = xs.size();\n  vector<T> c_sums(n + 1);\n  for (int i = 0; i < n; i++) {\n    c_sums[i + 1] = c_sums[i] + xs[i];\n  }\n  return c_sums;\n}\n\nint main() {\n  ios::sync_with_stdio(false);\n  cin.tie(0);\n\n  int n;\n  cin >> n;\n\n  vector<int64> xs;\n  vector<char> ops;\n  ops.push_back('+');\n  for (int i = 0; i < 2 * n - 1; i++) {\n    if (i % 2 == 0) {\n      int64 x;\n      cin >> x;\n      xs.push_back(x);\n    } else {\n      char op;\n      cin >> op;\n      ops.push_back(op);\n    }\n  }\n\n  vector<int64> c_sums = CumulativeSumVector(xs);\n\n  int64 ans = INT64_MIN;\n  int64 current = 0;\n  for (int i = 0; i < n; i++) {\n    if (ops[i] == '-') {\n      int p = n;\n      for (int j = i + 1; j < n; j++) {\n        if (ops[j] == '-') {\n          p = j;\n          break;\n        }\n      }\n      int64 s = current - (c_sums[p] - c_sums[i]) + (c_sums[n] - c_sums[p]);\n      UpdateMax(ans, s);\n    }\n\n    if (ops[i] == '+') current += xs[i];\n    else if (ops[i] == '-') current -= xs[i];\n  }\n  UpdateMax(ans, current);\n\n  cout << ans << endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n// {{{\n// clang-format off\n#define forr(x,arr) for(auto&& x:arr)\n#define _overload3(_1,_2,_3,name,...) name\n#define _rep2(i,n) _rep3(i,0,n)\n#define _rep3(i,a,b) for(int i=int(a);i<int(b);++i)\n#define rep(...) _overload3(__VA_ARGS__,_rep3,_rep2,)(__VA_ARGS__)\n#define _rrep2(i,n) _rrep3(i,0,n)\n#define _rrep3(i,a,b) for(int i=int(b)-1;i>=int(a);i--)\n#define rrep(...) _overload3(__VA_ARGS__,_rrep3,_rrep2,)(__VA_ARGS__)\n#define all(x) (x).begin(),(x).end()\n#define bit(n) (1LL<<(n))\n#define sz(x) ((int)(x).size())\n#define TEN(n) ((ll)(1e##n))\n#define fst first\n#define snd second\n\nstring DBG_DLM(int &i){return(i++==0?\"\":\", \");}\n#define DBG_B(exp){int i=0;os<<\"{\";{exp;}os<<\"}\";return os;}\ntemplate<class T>ostream&operator<<(ostream&os,vector<T>v);\ntemplate<class T>ostream&operator<<(ostream&os,set<T>v);\ntemplate<class T>ostream&operator<<(ostream&os,queue<T>q);\ntemplate<class T>ostream&operator<<(ostream&os,priority_queue<T>q);\ntemplate<class T,class K>ostream&operator<<(ostream&os,pair<T,K>p);\ntemplate<class T,class K>ostream&operator<<(ostream&os,map<T,K>mp);\ntemplate<class T,class K>ostream&operator<<(ostream&os,unordered_map<T,K>mp);\ntemplate<int I,class TPL>void DBG(ostream&os,TPL t){}\ntemplate<int I,class TPL,class H,class...Ts>void DBG(ostream&os,TPL t){os<<(I==0?\"\":\", \")<<get<I>(t);DBG<I+1,TPL,Ts...>(os,t);}\ntemplate<class T,class K>void DBG(ostream&os,pair<T,K>p,string delim){os<<\"(\"<<p.first<<delim<<p.second<<\")\";}\ntemplate<class...Ts>ostream&operator<<(ostream&os,tuple<Ts...>t){os<<\"(\";DBG<0,tuple<Ts...>,Ts...>(os,t);os<<\")\";return os;}\ntemplate<class T,class K>ostream&operator<<(ostream&os,pair<T,K>p){DBG(os,p,\", \");return os;}\ntemplate<class T>ostream&operator<<(ostream&os,vector<T>v){DBG_B(forr(t,v){os<<DBG_DLM(i)<<t;});}\ntemplate<class T>ostream&operator<<(ostream&os,set<T>s){DBG_B(forr(t,s){os<<DBG_DLM(i)<<t;});}\ntemplate<class T>ostream&operator<<(ostream&os,queue<T>q){DBG_B(for(;q.size();q.pop()){os<<DBG_DLM(i)<<q.front();});}\ntemplate<class T>ostream&operator<<(ostream&os,priority_queue<T>q){DBG_B(for(;q.size();q.pop()){os<<DBG_DLM(i)<<q.top();});}\ntemplate<class T,class K>ostream&operator<<(ostream&os,map<T,K>m){DBG_B(forr(p,m){os<<DBG_DLM(i);DBG(os,p,\"->\");});}\ntemplate<class T,class K>ostream&operator<<(ostream&os,unordered_map<T,K>m){DBG_B(forr(p,m){os<<DBG_DLM(i);DBG(os,p,\"->\");});}\n#define DBG_OVERLOAD(_1,_2,_3,_4,_5,_6,macro_name,...)macro_name\n#define DBG_LINE(){char s[99];sprintf(s,\"line:%3d | \",__LINE__);cerr<<s;}\n#define DBG_OUTPUT(v){cerr<<(#v)<<\"=\"<<(v);}\n#define DBG1(v,...){DBG_OUTPUT(v);}\n#define DBG2(v,...){DBG_OUTPUT(v);cerr<<\", \";DBG1(__VA_ARGS__);}\n#define DBG3(v,...){DBG_OUTPUT(v);cerr<<\", \";DBG2(__VA_ARGS__);}\n#define DBG4(v,...){DBG_OUTPUT(v);cerr<<\", \";DBG3(__VA_ARGS__);}\n#define DBG5(v,...){DBG_OUTPUT(v);cerr<<\", \";DBG4(__VA_ARGS__);}\n#define DBG6(v,...){DBG_OUTPUT(v);cerr<<\", \";DBG5(__VA_ARGS__);}\n#define DEBUG0(){DBG_LINE();cerr<<endl;}\n#ifdef LOCAL\n#define out(...){DBG_LINE();DBG_OVERLOAD(__VA_ARGS__,DBG6,DBG5,DBG4,DBG3,DBG2,DBG1)(__VA_ARGS__);cerr<<endl;}\n#else\n#define out(...)\n#endif\n\nusing ll=long long;\nusing pii=pair<int,int>;using pll=pair<ll,ll>;using pil=pair<int,ll>;using pli=pair<ll,int>;\nusing vs=vector<string>;using vvs=vector<vs>;using vvvs=vector<vvs>;\nusing vb=vector<bool>;using vvb=vector<vb>;using vvvb=vector<vvb>;\nusing vi=vector<int>;using vvi=vector<vi>;using vvvi=vector<vvi>;\nusing vl=vector<ll>;using vvl=vector<vl>;using vvvl=vector<vvl>;\nusing vd=vector<double>;using vvd=vector<vd>;using vvvd=vector<vvd>;\nusing vpii=vector<pii>;using vvpii=vector<vpii>;using vvvpii=vector<vvpii>;\ntemplate<class A,class B>bool amax(A&a,const B&b){return b>a?a=b,1:0;}\ntemplate<class A,class B>bool amin(A&a,const B&b){return b<a?a=b,1:0;}\nll ri(){ll l;cin>>l;return l;} string rs(){string s;cin>>s;return s;}\n// clang-format on\n// }}}\n\nll solve() {\n  int n = ri();\n  ll a0 = ri();\n\n  vector<int> A(n-1);\n  vector<char> ops(n-1);\n  rep(i, n-1) {\n    cin >> ops[i] >> A[i];\n  }\n\n  out(ops);\n  out(A);\n\n  const ll inf = 1e18;\n\n  vvl dp(n, vl(3, -inf));\n  dp[0][0] = 0;\n\n  vi S = {1, -1, 1};\n\n  rep(i, n-1) {\n    rep(j, 3) if (dp[i][j] > -inf) {\n      out(i,j,dp[i][j]);\n      if (ops[i] == '+') {\n        // そのまま\n        amax(dp[i+1][j], dp[i][j] + S[j] * A[i]);\n        if (j) {\n          // 閉じ\n          amax(dp[i+1][j-1], dp[i][j] + S[j-1] * A[i]);\n        }\n      }\n      else {\n        // そのまま\n        if (j < 2) {\n          amax(dp[i+1][j+1], dp[i][j] + S[j+1] * A[i]);\n        }\n        if (j) {\n          // 閉じ\n          amax(dp[i+1][j], dp[i][j] + S[j] * A[i]);\n        }\n      }\n    }\n    out(dp[i+1]);\n  }\n\n  return a0 + max({dp[n-1][0], dp[n-1][1], dp[n-1][2]});\n}\n\nvoid Main() {\n  cout << solve() << endl;\n}\n\n\nsigned main() {\n  cin.tie(nullptr);\n  ios::sync_with_stdio(false);\n  Main();\n  return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#include<unordered_map>\n#include<unordered_set>\nusing namespace std;\n\n#define MAX 100002\n\nint n;\n\nlong long int a[MAX];\n\nchar buf[2];\n\nlong long int dp[MAX][3];\n\nint main(){\n\tcin >> n;\n\tfor (int i = 0; i < n; i++){\n\t\tfor (int j = 0; j < 3; j++){\n\t\t\tdp[i][j] = LLONG_MIN;\n\t\t}\n\t\tif (i){\n\t\t\tscanf(\"%s\", buf);\n\t\t}\n\t\tscanf(\"%lld\", &a[i]);\n\t\tif (i){\n\t\t\tif (buf[0] == '-'){\n\t\t\t\ta[i] *= -1;\n\t\t\t}\n\t\t}\n\t}\n\tdp[0][0] = a[0];\n\tfor (int i = 0; i+1 < n; i++){\n\t\tfor (int j = 0; j < 3; j++){\n\t\t\tif (dp[i][j] == LLONG_MIN)continue;\n\t\t\tlong long int val = 1;\n\t\t\tif (j % 2){\n\t\t\t\tval *= -1LL;\n\t\t\t}\n\t\t\tdp[i + 1][j] = max(dp[i + 1][j], dp[i][j]+a[i+1]*val);\n\t\t\tval *= -1LL;\n\t\t\tif (j){\n\t\t\t\tdp[i + 1][j - 1] = max(dp[i + 1][j - 1], dp[i][j] + a[i+1] * val);\n\t\t\t}\n\t\t\tif (j + 1 < 3&&a[i+1]*val*-1LL<0){\n\t\t\t\tdp[i + 1][j + 1] = max(dp[i + 1][j + 1], dp[i][j] + a[i+1] * val*-1LL);\n\t\t\t}\n\t\t}\n\t}\n\tlong long int ans = dp[n-1][0];\n\tans = max(ans, dp[n - 1][1]);\n\tans = max(ans, dp[n - 1][2]);\n\tprintf(\"%lld\\n\", ans);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n#define REP(i,a,b) for(int i=(a),_ed=(b);i<=_ed;++i)\n#define DREP(i,a,b) for(int i=(a),_ed=(b);i>=_ed;--i)\n#define mp(x,y) make_pair((x),(y))\n#define sz(x) (int)(x).size()\n#define pb push_back\ntypedef long long ll;\ntypedef pair<int,int> pii;\ninline int read(){\n    register int x=0,f=1;register char ch=getchar();\n    while(!isdigit(ch)){if(ch=='-')f=0;ch=getchar();}\n    while(isdigit(ch)){x=x*10+(ch^'0');ch=getchar();}\n    return f?x:-x;\n}\n\nint n;\nll f[100005][3];\ninline void chkmax(ll& x,ll y){x=x>y?x:y;}\n\nint main(){\n\t// freopen(\"in.in\",\"r\",stdin);\n\tf[0][0]=0,f[0][1]=f[0][2]=-1e16;\n\tn=read();\n\tREP(i,1,n){\n\t\tint x=read();\n\t\tf[i][0]=max(f[i-1][0],f[i-1][1]);\n\t\tf[i][1]=max(f[i-1][1],f[i-1][2]);\n\t\tf[i][2]=f[i-1][2];\n\t\tf[i][0]+=x,f[i][1]-=x,f[i][2]+=x;\n\t\tif(x<0)chkmax(f[i][2],f[i][1]),chkmax(f[i][1],f[i][0]);\n\t}\n\tprintf(\"%lld\\n\",max(f[n][0],max(f[n][1],f[n][2])));\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "/*Lucky_Glass*/\n#include<cstdio>\n#include<cstring>\n#include<algorithm>\nusing namespace std;\ntypedef long long ll;\nconst int MAXN=int(1e5);\nconst ll INF=ll(1e15);\nint n;\nint A[MAXN+5];\nll dp[MAXN+5][2]; //0:+ 1:-\nbool vis[MAXN+5][2];\nll DP(int x,int typ)\n{\n\tif(x>n) return 0;\n\tif(vis[x][typ]) return dp[x][typ];\n\tvis[x][typ]=true;\n\tdp[x][typ]=INF*(typ? -1:1);\n\tif(A[x]<0 && x<n)\n\t\tfor(int i=x+1;i<=n;i++)\n\t\t{\n\t\t\tll res1=DP(x+1,!typ);\n\t\t\tll res2=DP(i+1,!typ);\n\t\t\tll res3=DP(i+1,typ);\n\t\t\tif(!typ) dp[x][typ]=min(dp[x][typ],-(-A[x]+res1-res2+res3));\n\t\t\telse dp[x][typ]=max(dp[x][typ],-(-A[x]+res1-res2+res3));\n\t\t}\n\telse\n\t\tdp[x][typ]=A[x]+DP(x+1,typ);\n\treturn dp[x][typ];\n}\nint main()\n{\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tchar str[2]=\"\";\n\t\tif(i-1) scanf(\"%s\",str);\n\t\tscanf(\"%d\",&A[i]);\n\t\tif(str[0]=='-') A[i]*=-1;\n\t}\n\tprintf(\"%lld\\n\",DP(1,0));\n\treturn 0;\n}\n/*\n4\n1 - 4 - 3 + 2\n*/\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nusing ll = long long;\nusing Pi = pair<int, int>;\nusing Pl = pair<ll, ll>;\nusing vint = vector<int>;\nusing vll = vector<ll>;\ntemplate<typename T> using uset = unordered_set<T>;\ntemplate<typename T1, typename T2> using umap = unordered_map<T1, T2>;\n\nconstexpr int INF = (1 << 30) - 1;\nconstexpr ll LLINF = 1LL << 60;\nconstexpr int dy[] = {1, 0, -1, 0, 1, -1, -1, 1};\nconstexpr int dx[] = {0, 1, 0, -1, 1, 1, -1, -1};\nconstexpr char el = '\\n';\nconstexpr int mod = 1000000007;\n\ntemplate<typename T> T gcd(T a, T b) { return (b ? gcd(b, a % b) : a); }\ntemplate<typename T> T lcm(T a, T b) { return (a / gcd(a, b) * b); }\ntemplate<typename T1, typename T2> inline void chmin(T1 &a, T2 b) { if (a > b) a = b; }\ntemplate<typename T1, typename T2> inline void chmax(T1 &a, T2 b) { if (a < b) a = b; }\n\nint main() {\n    ll N;\n    cin >> N;\n    ll dp[100005][3];\n\n    fill_n(*dp, 100005 * 3, -LLINF);\n    dp[0][0] = 0;\n    for (int i = 0; i < N; i++) {\n        char op;\n        ll A;\n        if (i == 0) op = '+';\n        else cin >> op;\n        cin >> A;\n        if (op == '-') A = -A;\n\n        chmax(dp[i + 1][0], dp[i][0] + A);\n        chmax(dp[i + 1][1], dp[i][1] - A);\n        chmax(dp[i + 1][2], dp[i][2] + A);\n        if (op == '-') {\n            chmax(dp[i + 1][1], dp[i][0] + A);\n            chmax(dp[i + 1][1], dp[i][2] + A);\n        }\n        chmax(dp[i + 1][2], dp[i][1] - A);\n        chmax(dp[i + 1][1], dp[i][2] + A);\n    }\n    cout << max({dp[N][0], dp[N][1], dp[N][2]}) << endl;\n    return (0);\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\nconst ll INF = 1LL << 60;\nll dp[100010][3];\nchar op[100010];\nll A[100010];\n\nint main() {\n\tcin.tie(0);\n\tios::sync_with_stdio(false);\n\n\tint N;\n\tcin >> N;\n\top[0] = '+';\n\tfor(int i = 0; i < N; i++) {\n\t\tcin >> A[i];\n\t\tif(i != N - 1) cin >> op[i + 1];\n\t}\n\n\tfill((ll*)begin(dp), (ll*)end(dp), -INF);\n\tdp[0][0] = 0;\n\tfor(int i = 0; i < N; i++) {\n\t\tfor(int j = 0; j <= 2; j++) {\n\t\t\tif(dp[i][j] == -INF) continue;\n\t\t\tll d = dp[i][j];\n\t\t\tif(op[i] == '+') {\n\t\t\t\tfor(int k = 0; k <= j; k++) {\n\t\t\t\t\tif(j % 2 == 0) {\n\t\t\t\t\t\tdp[i + 1][k] = max(dp[i + 1][k], d + A[i]);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tdp[i + 1][k] = max(dp[i + 1][k], d - A[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tint nj = min(2, j + 1);\n\t\t\t\tfor(int k = 0; k <= min(2, j + 1); k++) {\n\t\t\t\t\tif((j + 1) % 2 == 0) {\n\t\t\t\t\t\tdp[i + 1][k] = max(dp[i + 1][k], d + A[i]);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tdp[i + 1][k] = max(dp[i + 1][k], d - A[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tcout << dp[N][0] << endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\nchar *TT,*tmo,but[(1<<15)+2];\n#define getc() ((TT==tmo&&(tmo=((TT=but)+fread(but,1,1<<15,stdin)),TT==tmo))?-1:*TT++)\ninline int rd(){\n  int x,c,f=1;while(!isdigit(c=getc()))f&=c!='-';x=c-'0';\n  while(isdigit(c=getc()))x=x*10+c-'0';return f?x:-x;\n}\ntypedef long long L;\nconst int N=1e5+11;\nint n,a[N],c[N];\nL b[N];\nint main(){\n#ifdef flukehn\n\tfreopen(\"g.in\",\"r\",stdin);\n#endif\n\tint i;\n\tn=rd();\n\tfor(i=1;i<=n;++i)\n\t\ta[i]=rd();\n\tc[n+1]=n+1;\n\tfor(i=n;i;--i){\n\t\tb[i]=b[i+1]+abs(a[i]);\n\t\tc[i]=a[i+1]<0?i+1:c[i+1];\n\t}\n\tL an=-LONG_LONG_MAX,tm=0;\n\tfor(i=1;i<=n;++i){\n\t\ttm+=a[i];\n\t\tif(a[i]<0)\n\t\t\tan=max(an,tm+2*b[c[i]]-b[i+1]);\n\t}\n\tan=max(an,tm);\n\tcout<<an;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <sstream>\n#include <string>\n#include <vector>\n#include <stack>\n#include <queue>\n#include <set>\n#include <map>\n#include <numeric>\n#include <algorithm>\n#include <cstdio>\n#include <cstdlib>\n#include <cstring>\n#include <cctype>\n#include <cmath>\n#include <cassert>\n#include <cstdarg>\n#include <sys/time.h>\n#include <fstream>\n//#include \"cout.h\"\n\nusing namespace std;\n\n#define SZ(x) ((int)x.size())\n#define MSET(x,a) memset(x, a, (int)sizeof(x))\n#define PB push_back\n#define VI vector < int >\n#define PII pair < int, int >\n#define LL long long\n#define FOR(i,a,b) for (int i = (a); i < (b); i++)\n#define REP(i,n) FOR(i,0,n)\n#define ALL(v) (v).begin(), (v).end()\n#define FIT(it,v) for (__typeof((v).begin()) it = (v).begin(); it != (v).end(); it++)\n#define OUT(A) cout << #A << \" = \"<< (A) << endl\n#define OUT2(A, B) cout << \"(\" << #A << \", \" << #B << \") = (\" << (A) << \", \"<< (B) << \")\" << endl\ntemplate<class T> void chmin(T &t, T f) { if (t > f) t = f; } \ntemplate<class T> void chmax(T &t, T f) { if (t < f) t = f; } \n\n#define present(c, e) ((c).find((e)) != (c).end())\n#define cpresent(c, e) (find(all(c), (e)) != (c).end())\n\nint n;\nLL a[100010];\nchar op[100010];\nLL dp[100010][3];\n\nvoid init() {\n}\n\nvoid input() {\n\tcin >> n;\n\tREP(i, n) {\n\t\tcin >> a[i];\n\t\tif (i < n-1) cin >> op[i+1];\n\t}\n}\n\nvoid solve() {\n\tREP(i, 100010) REP(j, 3) dp[i][j] = -1e15;\n\tdp[0][0] = a[0];\n\tFOR(i, 1, n){\n\t\tif(op[i] == '+'){\n\t\t\tdp[i][0] = max({\n\t\t\t\tdp[i-1][0]+a[i], \n\t\t\t\tdp[i-1][1]+a[i], \n\t\t\t\tdp[i-1][2]+a[i]\n\t\t\t\t});\n\t\t\tdp[i][1] = max({\n\t\t\t\tdp[i-1][1]-a[i], \n\t\t\t\tdp[i-1][2]-a[i]\n\t\t\t\t});\n\t\t\tdp[i][2] = max({\n\t\t\t\tdp[i-1][2]+a[i]\n\t\t\t\t});\n\t\t}\n\t\telse{\n\t\t\tdp[i][0] = max({\n\t\t\t\tdp[i-1][0]-a[i], \n\t\t\t\tdp[i-1][1]-a[i], \n\t\t\t\tdp[i-1][2]-a[i]\n\t\t\t\t});\n\t\t\tdp[i][1] = max({\n\t\t\t\tdp[i-1][0]-a[i], \n\t\t\t\tdp[i-1][1]+a[i], \n\t\t\t\tdp[i-1][2]+a[i]\n\t\t\t\t});\n\t\t\tdp[i][2] = max({\n\t\t\t\tdp[i-1][1]+a[i], \n\t\t\t\tdp[i-1][2]-a[i]\n\t\t\t\t});\n\t\t}\n\t}\n\tcout << max({dp[n-1][0], dp[n-1][1], dp[n-1][2]}) << endl;\n}\n\nint main() {\n\tinit();\n    input();\n    solve();\n\treturn 0;\n}\n\n\n\n\n\n\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<stdio.h>\n#include<string.h>\nusing namespace std;\nlong long n,a[120000],b[120000],x,tail,tot;\nchar s[10]; \nint main(){\n\tscanf(\"%lld\",&n);\n\tscanf(\"%lld\",&a[1]);\n\ttail=1;\n\ttot=a[1];\n\tfor(int i=2;i<=n;i++){\n\t\tscanf(\"%s\",s+1);\n\t\tscanf(\"%lld\",&x);\n\t\ttot+=x;\n\t\tif(s[1]=='-'){\n\t\t\ttail++;\n\t\t\ta[tail]=x;\n\t\t\tb[tail]=x;\n\t\t}else a[tail]+=x;\n\t}\n\tlong long ans=1000000000000000000LL,bns=0;\n\tfor(int i=2;i<=tail;i++){\n\t\tans=min(ans,bns+a[i]);\n\t\tbns+=b[i];\n\t}\n\tprintf(\"%lld\\n\",tot-2*ans);\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\ntypedef long long LL;\nconst int MAXN = 100010;\nLL A[MAXN], dp[MAXN][3];\nint opt[MAXN], n, bak;\nchar buf[10];\nvoid getmax(LL & x, LL y) { x < y ? x = y : 0; }\nint main() {\n\tstd::ios_base::sync_with_stdio(false), std::cin.tie(0);\n\tstd::cin >> n;\n\tfor (int i = 1; i <= n; ++i) {\n\t\tif (i > 1) std::cin >> buf, opt[i] = *buf == '-';\n\t\tstd::cin >> A[i];\n\t}\n\tmemset(dp, 0xcf, sizeof dp);\n\tdp[0][0] = 0;\n\tfor (int i = 1; i <= n; ++i) {\n\t\tfor (int j = 0; j <= 2; ++j) {\n\t\t\tint t = j + opt[i];\n\t\t\tif (t <= 2)\n\t\t\t\tgetmax(dp[i][t], dp[i - 1][j] + A[i] * (t & 1 ? -1 : 1));\n\t\t}\n\t\tgetmax(dp[i][1], dp[i][2]);\n\t\tgetmax(dp[i][0], dp[i][1]);\n\t}\n\tstd::cout << dp[n][0] << std::endl;\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstdio>\n#include<cstdlib>\n#include<cstring>\n#include<algorithm>\nusing namespace std;\nint a[101010];\nlong long sum[101010];\nchar s[101010][2];\nint la;\nint ne[101010];\nint main()\n{\n\tint n;\n\tlong long now=0,ans=-1010101010101010ll;\n\tscanf(\"%d%d\",&n,&a[1]);\n\ts[1][0]='+';\n\tla=0;\n\tfor(int i=2;i<=n;i++)\n\t{\n\t\tscanf(\"%s%d\",s[i],&a[i]);\n\t\tif(s[i][0]=='-')\n\t\t{\n\t\t\tne[la]=i;\n\t\t\tla=i;\n\t\t}\n\t}\n\tne[la]=n+1;\n\tsum[0]=0;\n\tfor(int i=1;i<=n;i++)\n\t\tsum[i]=sum[i-1]+a[i];\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tif(s[i][0]=='+')\n\t\t\tnow+=a[i];\n\t\telse\n\t\t{\n\t\t\tans=max(ans,now+sum[n]-sum[ne[i]-1]-(sum[ne[i]-1]-sum[i-1]));\n\t\t\tnow-=a[i];\n\t\t}\n\t}\n\tprintf(\"%lld\",ans);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "// AtCoder Regular Contest 066\n// E - Addition and Subtraction Hard\n\n#include <cstdio>\n#include <cmath>\n#include <algorithm>\n#define MAX_N 100000\n#define INF ((ll)1e18)\nusing namespace std;\ntypedef long long int ll;\n\n\nint N;\nll dp[MAX_N][3];\nll ans;\n\nint main() {\n\n  ll a;\n  int op;\n  char c;\n\n  scanf(\"%d\", &N);\n  scanf(\"%lld\", &a);\n  dp[0][0] = a;\n  dp[0][1] = dp[0][2] = -INF;\n  for (int i = 1; i < N; i++) {\n    scanf(\" %c %lld\", &c, &a);\n    op = (c == '-') ? 1 : 0;\n    for (int j = 0; j <= 2; j++) {\n      dp[i][j] = -INF;\n      for (int k = j; k <= 2; k++) {\n        dp[i][j] = max(dp[i][j], dp[i - 1][k] + (ll)pow(-1, k + op) * a);\n      }\n      if (op == 1 && j > 0) {\n        dp[i][j] = max(dp[i][j], dp[i - 1][j - 1] + (ll)pow(-1, j) * a);\n      }\n    }\n  }\n\n  ans = 0;\n  for (int j = 0; j <= 2; j++) {\n    ans = max(ans, dp[N - 1][j]);\n  }\n\n  printf(\"%lld\\n\", ans);\n\n  return 0;\n\n}\n\n\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n#define REP(i,a,b) for(int i=(a),_ed=(b);i<=_ed;++i)\n#define DREP(i,a,b) for(int i=(a),_ed=(b);i>=_ed;--i)\n#define mp(x,y) make_pair((x),(y))\n#define sz(x) (int)(x).size()\n#define pb push_back\ntypedef long long ll;\ntypedef pair<int,int> pii;\ninline int read(){\n    register int x=0,f=1;register char ch=getchar();\n    while(!isdigit(ch)){if(ch=='-')f=0;ch=getchar();}\n    while(isdigit(ch)){x=x*10+(ch^'0');ch=getchar();}\n    return f?x:-x;\n}\n\nint n;\nll f[100005][3];\ninline void chkmax(ll& x,ll y){x=x>y?x:y;}\n\nint main(){\n\t// freopen(\"in.in\",\"r\",stdin);\n\tf[0][0]=0,f[0][1]=f[0][2]=-1e16;\n\tn=read();\n\tREP(i,1,n){\n\t\tint x=read();\n\t\tf[i][0]=max(f[i-1][0],f[i-1][1]);\n\t\tf[i][1]=max(f[i-1][1],f[i-1][2]);\n\t\tf[i][2]=f[i-1][2];\n\t\tf[i][0]+=x,f[i][1]-=x,f[i][2]+=x;\n\t\tif(x<0)chkmax(f[i][2],f[i][1]),chkmax(f[i][1],f[i][0]);\n\t}\n\tprintf(\"%lld\\n\",max(f[n][0],max(f[n][1],f[n][2])));\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\nusing Int = long long;\ntemplate<typename T1,typename T2> inline void chmin(T1 &a,T2 b){if(a>b) a=b;}\ntemplate<typename T1,typename T2> inline void chmax(T1 &a,T2 b){if(a<b) a=b;}\n\n//INSERT ABOVE HERE\nsigned main(){\n  Int n;\n  cin>>n;\n\n  vector<Int> as(n);\n  vector<Int> cs(n,1);\n  for(Int i=0;i<n;i++){\n    if(i){\n      char c;\n      cin>>c;\n      if(c=='+') cs[i]=+1;\n      if(c=='-') cs[i]=-1;\n    }\n    cin>>as[i];\n  }\n  const Int INF = 1e15;\n  vector<Int> dp0(n+1,-INF);\n  vector<Int> dp1(n+1,-INF);\n  vector<Int> dp2(n+1,-INF);\n  dp0[0]=0;\n\n  for(Int i=0;i<n;i++){\n    if(cs[i]>0){\n      // stay\n      chmax(dp0[i+1],dp0[i]+as[i]);\n      chmax(dp1[i+1],dp1[i]-as[i]);\n      chmax(dp2[i+1],dp2[i]+as[i]);\n\n      // close\n      chmax(dp0[i+1],dp1[i]-as[i]);\n    }\n    if(cs[i]<0){\n      // open + stay\n      chmax(dp1[i+1],dp0[i]-as[i]);\n      chmax(dp2[i+1],dp1[i]+as[i]);\n      chmax(dp2[i+1],dp2[i]+as[i]);\n\n      // open + close\n      chmax(dp0[i+1],dp0[i]-as[i]);\n      chmax(dp1[i+1],dp1[i]+as[i]);\n      chmax(dp2[i+1],dp2[i]+as[i]);\n    }\n  }\n  cout<<max({dp0[n],dp1[n],dp2[n]})<<endl;\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n#define forr(x,arr) for(auto&& x:arr)\n#define _overload3(_1,_2,_3,name,...) name\n#define _rep2(i,n) _rep3(i,0,n)\n#define _rep3(i,a,b) for(int i=int(a);i<int(b);++i)\n#define rep(...) _overload3(__VA_ARGS__,_rep3,_rep2,)(__VA_ARGS__)\n#define _rrep2(i,n) _rrep3(i,0,n)\n#define _rrep3(i,a,b) for(int i=int(b)-1;i>=int(a);i--)\n#define rrep(...) _overload3(__VA_ARGS__,_rrep3,_rrep2,)(__VA_ARGS__)\n#define all(x) (x).begin(),(x).end()\n#define bit(n) (1LL<<(n))\n#define sz(x) ((int)(x).size())\n#define TEN(n) ((ll)(1e##n))\n#define fst first\n#define snd second\n\nstring DBG_DLM(int &i){return(i++==0?\"\":\", \");}\n#define DBG_B(exp){int i=0;os<<\"{\";{exp;}os<<\"}\";return os;}\ntemplate<class T>ostream&operator<<(ostream&os,vector<T>v);\ntemplate<class T>ostream&operator<<(ostream&os,set<T>v);\ntemplate<class T>ostream&operator<<(ostream&os,queue<T>q);\ntemplate<class T>ostream&operator<<(ostream&os,priority_queue<T>q);\ntemplate<class T,class K>ostream&operator<<(ostream&os,pair<T,K>p);\ntemplate<class T,class K>ostream&operator<<(ostream&os,map<T,K>mp);\ntemplate<class T,class K>ostream&operator<<(ostream&os,unordered_map<T,K>mp);\ntemplate<int I,class TPL>void DBG(ostream&os,TPL t){}\ntemplate<int I,class TPL,class H,class...Ts>void DBG(ostream&os,TPL t){os<<(I==0?\"\":\", \")<<get<I>(t);DBG<I+1,TPL,Ts...>(os,t);}\ntemplate<class T,class K>void DBG(ostream&os,pair<T,K>p,string delim){os<<\"(\"<<p.first<<delim<<p.second<<\")\";}\ntemplate<class...Ts>ostream&operator<<(ostream&os,tuple<Ts...>t){os<<\"(\";DBG<0,tuple<Ts...>,Ts...>(os,t);os<<\")\";return os;}\ntemplate<class T,class K>ostream&operator<<(ostream&os,pair<T,K>p){DBG(os,p,\", \");return os;}\ntemplate<class T>ostream&operator<<(ostream&os,vector<T>v){DBG_B(forr(t,v){os<<DBG_DLM(i)<<t;});}\ntemplate<class T>ostream&operator<<(ostream&os,set<T>s){DBG_B(forr(t,s){os<<DBG_DLM(i)<<t;});}\ntemplate<class T>ostream&operator<<(ostream&os,queue<T>q){DBG_B(for(;q.size();q.pop()){os<<DBG_DLM(i)<<q.front();});}\ntemplate<class T>ostream&operator<<(ostream&os,priority_queue<T>q){DBG_B(for(;q.size();q.pop()){os<<DBG_DLM(i)<<q.top();});}\ntemplate<class T,class K>ostream&operator<<(ostream&os,map<T,K>m){DBG_B(forr(p,m){os<<DBG_DLM(i);DBG(os,p,\"->\");});}\ntemplate<class T,class K>ostream&operator<<(ostream&os,unordered_map<T,K>m){DBG_B(forr(p,m){os<<DBG_DLM(i);DBG(os,p,\"->\");});}\n#define DBG_OVERLOAD(_1,_2,_3,_4,_5,_6,macro_name,...)macro_name\n#define DBG_LINE(){char s[99];sprintf(s,\"line:%3d | \",__LINE__);cerr<<s;}\n#define DBG_OUTPUT(v){cerr<<(#v)<<\"=\"<<(v);}\n#define DBG1(v,...){DBG_OUTPUT(v);}\n#define DBG2(v,...){DBG_OUTPUT(v);cerr<<\", \";DBG1(__VA_ARGS__);}\n#define DBG3(v,...){DBG_OUTPUT(v);cerr<<\", \";DBG2(__VA_ARGS__);}\n#define DBG4(v,...){DBG_OUTPUT(v);cerr<<\", \";DBG3(__VA_ARGS__);}\n#define DBG5(v,...){DBG_OUTPUT(v);cerr<<\", \";DBG4(__VA_ARGS__);}\n#define DBG6(v,...){DBG_OUTPUT(v);cerr<<\", \";DBG5(__VA_ARGS__);}\n#define DEBUG0(){DBG_LINE();cerr<<endl;}\n#ifdef LOCAL\n#define out(...){DBG_LINE();DBG_OVERLOAD(__VA_ARGS__,DBG6,DBG5,DBG4,DBG3,DBG2,DBG1)(__VA_ARGS__);cerr<<endl;}\n#else\n#define out(...)\n#endif\n\nusing ll=long long;\nusing pii=pair<int,int>;using pll=pair<ll,ll>;using pil=pair<int,ll>;using pli=pair<ll,int>;\nusing vs=vector<string>;using vvs=vector<vs>;using vvvs=vector<vvs>;\nusing vb=vector<bool>;using vvb=vector<vb>;using vvvb=vector<vvb>;\nusing vi=vector<int>;using vvi=vector<vi>;using vvvi=vector<vvi>;\nusing vl=vector<ll>;using vvl=vector<vl>;using vvvl=vector<vvl>;\nusing vd=vector<double>;using vvd=vector<vd>;using vvvd=vector<vvd>;\nusing vpii=vector<pii>;using vvpii=vector<vpii>;using vvvpii=vector<vvpii>;\ntemplate<class A,class B>bool amax(A&a,const B&b){return b>a?a=b,1:0;}\ntemplate<class A,class B>bool amin(A&a,const B&b){return b<a?a=b,1:0;}\nll ri(){ll l;cin>>l;return l;} string rs(){string s;cin>>s;return s;}\n\nvoid Main() {\n  int n = ri();\n\n  ll a0 = ri();\n\n  vector<int> A(n-1);\n  vector<char> ops(n-1);\n  rep(i, n-1) {\n    cin >> ops[i] >> A[i];\n  }\n\n  out(A);\n  out(ops);\n\n  ll inf = 1e18;\n\n  vvl minp(n-1, vl(n, +inf));\n  vvl maxp(n-1, vl(n, -inf));\n\n\n  rep(i, n-1) {\n    int v = A[i];\n    minp[i][i+1] = v;\n    maxp[i][i+1] = v;\n  }\n\n  function<ll(int, int)> fmin, fmax;\n\n  fmax = [&](int l, int r) -> ll {\n    if (r <= l) return 0;\n    ll &ret = maxp[l][r];\n    if (ret != -inf) return ret;\n\n    if (ops[l] == '+') {\n      ret = A[l] + fmax(l+1, r);\n    }\n    else {\n      rep(p, l + 1, r+1) {\n        ll cand = -fmin(l, p) + fmax(p, r);\n        amax(ret, cand);\n      }\n    }\n    out(\"fmax\", l, r, ret);\n    return ret;\n  };\n\n  fmin = [&](int l, int r) -> ll {\n    if (r <= l) return 0;\n    ll &ret = minp[l][r];\n    if (ret != +inf) return ret;\n\n    ll head = A[l];\n\n    if (ops[l] == '+') {\n      ret = head + fmin(l+1, r);\n    }\n    else {\n      rep(p, l + 1, r) {\n        if (ops[p] == '+') {\n          ll cand = head + fmin(l+1, p) + fmin(p, r);\n          amin(ret, cand);\n        }\n        else {\n          ll cand = head + fmin(l+1, p) - fmax(p, r);\n          amin(ret, cand);\n        }\n      }\n    }\n    out(\"fmin\", l, r, ret);\n    return ret;\n  };\n\n  ll ans;\n\n  ans = a0 + fmax(0, n-1);\n\n  rep(l, n-1) out(l, minp[l]);\n  rep(l, n-1) out(l, maxp[l]);\n\n  cout << ans << endl;\n}\n\nsigned main() {\n  cin.tie(nullptr);\n  ios::sync_with_stdio(false);\n  Main();\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <algorithm>\n\nusing namespace std;\n\n#define REP(i,n)   for(int i=0; i<(int)(n); i++)\n#define FOR(i,b,e) for(int i=(b); i<=(int)(e); i++)\n#define DUMP2D(a, n, m) REP(i, n) REP(j, m) printf(\"%lld%c\", a[i][j], j + 1 == m ? '\\n' : ' '); puts(\"\")\n\ntypedef long long ll;\n\nconst int N_MAX = 100000;\nconst ll INF = 1e15;\n\nint N;\nint A[N_MAX];\nint op[N_MAX];\nll dp[N_MAX + 1][50];\n\nvoid solve() {\n  fill(dp[0], dp[N + 1], -INF);\n  fill(dp[0], dp[1], 0);\n  int m = 1;\n  REP(i, N) {\n    REP(j, m) {\n      int k = j + op[i];\n      int f = (k % 2 == 0 ? 1 : -1);\n      dp[i + 1][j] = max(dp[i + 1][j], dp[i][j] + A[i] * f);\n      if (op[i] > 0) {\n        dp[i + 1][j + 1] = max(dp[i + 1][j + 1], dp[i][j] + A[i] * f);\n      }\n      if (j > 0) {\n        dp[i + 1][j - 1] = max(dp[i + 1][j - 1], dp[i][j] + A[i] * -f);\n      }\n    }\n    if (i + 1 < N) m += op[i];\n  }\n  // DUMP2D(dp, N + 1, 5);\n  ll ans = 0;\n  REP(j, m) ans = max(ans, dp[N][j]);\n  printf(\"%lld\\n\", ans);\n}\n\nvoid input() {\n  scanf(\"%d\", &N);\n  REP(i, N) {\n    scanf(\"%d\", A + i);\n    if (i + 1 < N) {\n      char buf[2];\n      scanf(\"%s\", buf);\n      op[i + 1] = buf[0] == '-' ? 1 : 0;\n    }\n  }\n}\n\nint main() {\n  input();\n  solve();\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\nusing lint = long long;\ntemplate<class T = int> using V = vector<T>;\ntemplate<class T = int> using VV = V< V<T> >;\n\nint main() {\n  cin.tie(nullptr); ios::sync_with_stdio(false);\n  int n; cin >> n;\n  string op = \"+\";\n  V<> a(n);\n  for (int i = 0; i < n; ++i) {\n    if (i) {\n      char c; cin >> c;\n      op += c;\n    }\n    cin >> a[i];\n    if (op[i] == '-') a[i] = -a[i];\n  }\n\n  constexpr lint inf = 9e18;\n  V<lint> dp(10, -inf);\n  dp[0] = a[0];\n  for (int i = 1; i < n; ++i) {\n    V<lint> ndp(10, -inf);\n    for (int x = 0; x < 10; ++x) {\n      for (int y = 0; y <= min(x + (op[i - 1] == '-'), 9); ++y) {\n        ndp[y] = max(ndp[y], dp[x] + (y & 1 ? -a[i] : a[i]));\n      }\n    }\n    swap(dp, ndp);\n  }\n\n  cout << *max_element(begin(dp), end(dp)) << '\\n';\n}"
  },
  {
    "language": "C++",
    "code": "#include<stdio.h>\n#include<stdlib.h>\n#include<math.h>\n#include<string.h>\n#include<iostream>\n#include<algorithm>\n#include<queue>\n#include<time.h>\n#include<stack>\n#include<map>\n#include<set>\n#include<string>\nusing namespace std;\nint main()\n{\n    int n,i,t,j=0,x=0;\n    cin>>n;\n    int s[100008]={0};\n    bool k[100008]={0};\n    char r[500008]={0};\n    long long int a[100008]={0};\n    int b=0;\n    getchar();\n    gets(r);\n    for(i=0;r[i]!=0;i++)\n    {\n        if(isdigit(r[i]))s[j++]=r[i]-'0';\n        else if(r[i]==' ')continue;\n        else if(r[i]=='+')k[x++]=1;\n        else if(r[i]=='-')k[x++]=0;\n    }\n    a[b++]=s[0];\n    bool ka[100008]={0};\n    int bka=0;\n    for(i=0;i<x;i++)\n    {\n        if(k[i]==1)\n        {\n            a[b++]=s[i+1];\n            ka[bka++]=1;\n        }\n        if(k[i]==0&&k[i+1]==0)\n        {\n            int y;\n            ka[bka++]=0;\n            long long int yy=s[i+1];\n            for(y=i+1;y<=x;y++)\n            {\n               if(k[y]==0)yy-=s[y+1];\n            }\n            a[b++]=yy;\n            i--;\n            i=y;\n        }\n        if(k[i]==0)\n        {\n            a[b++]=s[i+1];\n            ka[bka++]=0;\n        }\n    }\n    if(k[x-2]!=0)\n    {\n           if(k[x-1]==0)\n        {\n            a[b++]=s[i+1];\n            ka[bka++]=0;\n        }\n                if(k[x-1]==1)\n        {\n            a[b++]=s[i+1];\n            ka[bka++]=1;\n        }\n    }\n    long long int m=a[0];\n    long long int q=m;\n    for(i=0;i<bka;i++)\n    {\n        if(ka[i]==0)q-=a[i+1];\n        if(ka[i]==1)q+=a[i+1];\n        m=max(q,m);\n    }\n    cout<<m<<endl;\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\ntypedef long long lint;\ntypedef long double louble;\n\n#define so(a) ((int)((a).size()))\n\ntemplate<typename T1,typename T2> inline T1 max(T1 a,T2 b){return a<b?b:a;}\ntemplate<typename T1,typename T2> inline T1 min(T1 a,T2 b){return a<b?a:b;}\ntemplate<typename T1,typename T2> inline T1 gmax(T1 &a,T2 b){return a=a<b?b:a;}\ntemplate<typename T1,typename T2> inline T1 gmin(T1 &a,T2 b){return a=a<b?a:b;}\n\nconst char lf = '\\n';\n\nnamespace ae86\n{\n\tconst int bufl = 1 << 15;\n\n\tchar buf[bufl],*s=buf,*t=buf;\n\n\tinline int fetch()\n\t{\n\t\tif(s==t){t=(s=buf)+fread(buf,1,bufl,stdin);if(s==t)return EOF;}\n\t\treturn *s++;\n\t}\n\n\tinline int ty()\n\t{\n\t\tint a=0;int b=1,c=fetch();\n\t\twhile(!isdigit(c))b^=c=='-',c=fetch();\n\t\twhile(isdigit(c))a=a*10+c-48,c=fetch();\n\t\treturn b?a:-a;\n\t}\n\n\tinline int tc()\n\t{\n\t\tint c=fetch();\n\t\twhile(c<=32 && c!=EOF)c=fetch();\n\t\treturn c;\n\t}\n}\nusing ae86::ty;\nusing ae86::tc;\n\nconst int _ = 100007;\nconst lint linf = 0x3f3f3f3f3f3f3f3f;\n\nint n,dir[_]={0};lint val[_]={0};\nlint f[3];\n\nint main()\n{\n\tios::sync_with_stdio(0),cout.tie(nullptr);\n\n\tn=ty(),dir[1]=1,val[1]=ty();\n\tfor(int i=2;i<=n;i++)dir[i]=tc()=='+',val[i]=ty();\n\tn+=2;\n\t\n\tmemset(f,-64,sizeof(f));\n\tf[0]=0;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tlint xval=val[i]*(dir[i]?1:-1);\n\t\tf[0]+=xval,f[1]-=xval,f[2]+=xval;\n\t\tif(!dir[i])gmax(f[2],f[1]),gmax(f[1],f[0]);\n\t\tgmax(f[1],f[2]),gmax(f[0],f[1]);\n\t}\n\n\tcout<<max({f[0],f[1],f[2]})<<lf;\n\t\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "//problem:AT2273\n#include <bits/stdc++.h>\nusing namespace std;\n\n#define pb push_back\n#define mk make_pair\n#define lob lower_bound\n#define upb upper_bound\n#define fi first\n#define se second\n#define SZ(x) ((int)(x).size())\n\ntypedef unsigned int uint;\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef pair<int,int> pii;\n\n/* --------------- fast io --------------- */ // begin\nnamespace Fread{\nconst int MAXN=1<<20;\nchar buf[MAXN],*S,*T;\ninline char getchar(){\n\tif(S==T){\n\t\tT=(S=buf)+fread(buf,1,MAXN,stdin);\n\t\tif(S==T)return EOF;\n\t}\n\treturn *S++;\n}\n}//namespace Fread\nnamespace Fwrite{\nconst int MAXN=1<<20;\nchar buf[MAXN],*S=buf,*T=buf+MAXN;\ninline void flush(){\n\tfwrite(buf,1,S-buf,stdout);\n\tS=buf;\n}\ninline void putchar(char c){\n\t*S++=c;\n\tif (S==T)flush();\n}\nstruct _{\n\t~_(){flush();}\n}__;\n}//namespace Fwrite\n\n#ifdef ONLINE_JUDGE\n\t#define getchar Fread::getchar\n\t#define putchar Fwrite::putchar\n#endif\n\ntemplate<typename T>inline void read(T& x){\n\tx=0;int f=1;\n\tchar c=getchar();\n\twhile(!isdigit(c)){if(c=='-')f=-1;c=getchar();}\n\twhile(isdigit(c))x=x*10+(c-'0'),c=getchar();\n\tx*=f;\n}\ntemplate<typename T>inline void write(T x,bool _enter=0,bool _space=0){\n\tif (!x)putchar('0');else{\n\t\tif(x<0)putchar('-'),x=-x;\n\t\tstatic char dig[41];\n\t\tint top=0;\n\t\twhile(x)dig[++top]=(x%10)+'0',x/=10;\n\t\twhile(top)putchar(dig[top--]);\n\t}\n\tif(_enter)putchar('\\n');\n\tif(_space)putchar(' ');\n}\n\nnamespace Fastio{\nstruct reader{\n\ttemplate<typename T>reader& operator>>(T& x){::read(x);return *this;}\n\treader& operator>>(char& c){\n\t\tc=getchar();\n\t\twhile(c=='\\n'||c==' ')c=getchar();\n\t\treturn *this;\n\t}\n\treader& operator>>(char* str){\n\t\tint len=0;\n\t\tchar c=getchar();\n\t\twhile(c=='\\n'||c==' ')c=getchar();\n\t\twhile(c!='\\n'&&c!=' ')str[len++]=c,c=getchar();\n\t\tstr[len]='\\0';\n\t\treturn *this;\n\t}\n}cin;\nconst char endl='\\n';\nstruct writer{\n\ttemplate<typename T>writer& operator<<(T x){::write(x,0,0);return *this;}\n\twriter& operator<<(char c){putchar(c);return *this;}\n\twriter& operator<<(const char* str){\n\t\tint cur=0;\n\t\twhile(str[cur])putchar(str[cur++]);\n\t\treturn *this;\n\t}\n}cout;\n}//namespace Fastio\n#define cin Fastio::cin\n#define cout Fastio::cout\n#define endl Fastio::endl\n/* --------------- fast io --------------- */ // end\n\nconst int MAXN=1e5;\nconst ll INF=1e18;\ninline void cmax(ll& x,ll y){x=(x>y?x:y);}\n\nint n,a[MAXN+5],op[MAXN+5];\nll dp[MAXN+5][3];\n\nint main() {\n\tcin>>n;\n\tfor(int i=1;i<=n;++i){\n\t\tcin>>a[i];\n\t\tif(i!=n){\n\t\t\tchar c;cin>>c;\n\t\t\top[i]=(c=='+'?1:-1);\n\t\t}\n\t}\n\top[0]=1;\n\tdp[0][1]=dp[0][2]=-INF;\n\tfor(int i=1;i<=n;++i){\n\t\tdp[i][0]=dp[i][1]=dp[i][2]=-INF;\n\t\tfor(int j=0;j<=2;++j)if(dp[i-1][j]!=-INF){\n\t\t\tcmax(dp[i][j],dp[i-1][j]+((j&1)?-1:1)*op[i-1]*a[i]);\n\t\t\tif(op[i-1]==-1&&j!=2){\n\t\t\t\tcmax(dp[i][j+1],dp[i-1][j]+(j==0?-1:1)*a[i]);\n\t\t\t}\n\t\t\tif(j!=0){\n\t\t\t\tcmax(dp[i][j-1],dp[i-1][j]+((j&1)?-1:1)*op[i-1]*a[i]);\n\t\t\t}\n\t\t}\n\t}\n\tcout<<dp[n][0]<<endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n#include <cmath>\n#include <stdio.h>\n#include <stdlib.h>\n#include <vector>\n#include <map>\n#include <queue>\n#include <set>\n#include <string>\n#include <string.h>\n#include <stack>\n#include <assert.h>\n#define Endl endl\n#define mp make_pair\n#define ll long long \n#define pii pair<int,int>\n#define pll pair<ll,ll>\n#define over(A) {cout<<A<<endl;exit(0);}\n#define all(A) A.begin(),A.end()\n#define ceil(a,b) ((a-1)/b+1)\n#define srand() mt19937 rng(chrono::steady_clock::now().time_since_epoch().count());\n#define rand(l,r) uniform_int_distribution<int>(l,r)(rng)\ntypedef unsigned long long ull;\nconst int inf=1039074182;\nusing namespace std;\nint n;\nll a[100005];\nvector <ll> vec;\nvector <int> pos;\nvector <bool> b;\nll sumabs[100005];\n\nint main()\n{\n\tios_base::sync_with_stdio(false);\n//\tfreopen(\"input.txt\",\"r\",stdin);\n\tcin>>n;\n\tchar x;\n\tcin>>a[0];\n\tfor(int i=1;i<n;i++)\n\t{\n\t\tcin>>x;\n//\t\twhile(x!='+' && x!='-') x=getchar();\n\t\tcin>>a[i];\n//\t\tscanf(\"%d\",a+i);\n\t\tif(x=='-') a[i]=-a[i];\n//\t\tx=getchar();\n\t}\n\tll res=0;\n\tfor(int i=0;i<n;)\n\t{\n\t\tll sum=0;\n\t\twhile(a[i]>0 && i<n)\n\t\t{\n\t\t\tsum+=a[i];\n\t\t\ti++;\n\t\t}\n\t\tvec.push_back(sum);\n\t\twhile(a[i]<0 && i<n)\n\t\t{\n\t\t\tvec.push_back(a[i]);\n\t\t\ti++;\n\t\t}\n\t}\n//\tfor(int i=0;i<10;i++)\n//\t{\n//\t\tcout<<vec[i]<<' ';\n//\t}\n//\tcout<<endl;\n\twhile(vec.back()==0) vec.pop_back();\n\tn=vec.size();\n\tmemset(a,0,sizeof(a));\n\tmemset(sumabs,0,sizeof(sumabs));\n\tfor(int i=0;i<n;i++)\n\t{\n\t\ta[i]=vec[i];\n\t\tres+=a[i];\n\t}\n\tsumabs[n]=0;\n\tfor(int i=n-1;i>=0;i--)\n\t{\n\t\tsumabs[i]=sumabs[i+1]+abs(a[i]);\n\t}\n\tll now=0;\n\tfor(int i=0;i<n;i++)\n\t{\n\t\tnow+=a[i];\n\t\tif(a[i]<0)\n\t\t{\n\t\t\tres=max(res,now-a[i+1]+sumabs[i+2]);\n//\t\t\tcout<<now-a[i+1]+sumabs[i+2]<<endl;\n\t\t}\n//\t\tcout<<now<<' '<<a[i+1]<<' '<<sumabs[i+2]<<endl;\n\t}\n\tcout<<res<<endl;\n//\tll res=0;\n//\tfor(int i=0;i<n;i++)\n//\t{\n//\t\tif(vec[i]>0) pos.push_back(i);\n//\t}\n//\tint nn;\n//\tfor(int i=0;i<n-1;i++)\n//\t{\n//\t\tif(vec[i]<0 && vec[i+1]<0)\n//\t\t{\n//\t\t\tnn=i;\n//\t\t\tbreak;\n//\t\t}\n//\t}\n//\t\n//\tll res=0;\n//\tfor(int i=0;i<pos.size();i++)\n//\t{\n//\t\tint p=pos[i];\n//\t\tbool tb=false;\n//\t\tif(p!=0 && p!=n-1)\n//\t\t{\n//\t\t\tif(-vec[p+1]>vec[p])\n//\t\t\t{\n//\t\t\t\ttb=true;\n//\t\t\t}\n//\t\t}\n//\t\tb.push_back(tb);\n//\t}\n//\tfor(int i=0;i<n;i++)\n//\t{\n//\t\tcout<<vec[i]<<' ';\n//\t}\n//\tcout<<endl;\n//\tint l=0;\n//\tfor(int i=0;i<pos.size();i++)\n//\t{\n//\t\tll block=0;\n//\t\tfor(int j=pos[i]+2;j<(i==(int)pos.size()-1?n:pos[i+1]);j++)\n//\t\t{\n//\t\t\tblock+=abs(a[j]);\n//\t\t}\n//\t\tif(i==(int)pos.size()-1 && pos[i]==n-1)\n//\t\t{\n//\t\t\tblock+=abs(a[pos[i]]);\n//\t\t}\n//\t\telse\n//\t\t{\n//\t\t\tif(!b[i]) block+=a[pos[i]]+a[pos[i]+1];\n//\t\t\telse block+=-a[pos[i]]-a[pos[i]+1];\n//\t\t}\n//\t\tres+=block;\n//\t\tcout<<i<<' '<<block<<endl;\n//\t}\n//\tcout<<res<<endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n#define fs first\n#define sc second\n#define mp make_pair\n#define pb push_back\n#define eb emplace_back\n#define ALL(A) A.begin(),A.end()\n#define RALL(A) A.rbegin(),A.rend()\ntypedef long long LL;\ntypedef pair<int,int> P;\nconst LL mod=1000000007;\nconst LL LINF=1LL<<62;\nconst LL INF=1<<17;\n\n\n\nint main(){\n    int n;cin >> n;\n    char c[n-1];\n    int a[n];\n    for (int i = 0; i < 2*n-1; i++) {\n        if(i%2==0) cin >> a[i/2];\n        else cin >> c[i/2];\n    }\n    LL dp[n][3];\n    for (int i = 0; i < n; i++) {\n        for (int j = 0; j < 3; j++) {\n            dp[i][j]=-LINF;\n        }\n    }\n    dp[0][0]=a[0];\n    for (int i = 0; i < n-1; i++) {\n        if(c[i]=='+'){\n            dp[i+1][0]=max(dp[i][0]+a[i+1],dp[i][1]+a[i+1]);\n            dp[i+1][1]=dp[i][1]-a[i+1];\n            dp[i+1][2]=dp[i][2]+a[i+1];\n        }\n        else{\n            dp[i+1][1]=dp[i][0]-a[i+1];\n            dp[i+1][2]=max(dp[i][2]+a[i+1],dp[i][1]+a[i+1]);\n        }\n    }\n    cout << max({dp[n-1][0],dp[n-1][1],dp[n-1][2]}) << endl;\n    return 0;\n}\n\n\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define rep(i, l, r) for(int i = (l), i##end = (r);i <= i##end;++i)\nusing std::cin; using std::cout;\nconst int maxn = 200200;\ntypedef long long ll;\nconst int mod = 998244353;\ninline ll pow(ll a,int b,int ans = 1) {\n\tfor(;b;b >>= 1,a = a * a % mod) if(b & 1)\n\t\tans = ans * a % mod;\n\treturn ans;\n}\ninline ll inverse(int x){ return pow(x, mod - 2); }\nint n;\nll f[3];\nint main() {\n\tstd::ios::sync_with_stdio(false), cin.tie(0), cout.tie(0);\n\tcin >> n; f[1] = f[2] = -1e18;\n\trep(i, 1, n) {\n\t\tchar ch = '+'; int x;\n\t\tif(i != 1) cin >> ch;\n\t\tcin >> x;\n\t\tif(ch == '-') x = -x;\n\t\tf[0] += x, f[1] -= x, f[2] += x;\n\t\tif(ch == '-') {\n\t\t\tf[2] = std::max(f[1], f[2]);\n\t\t\tf[1] = std::max(f[0], f[1]);\n\t\t}\n\t\tf[1] = std::max(f[1], f[2]);\n\t\tf[0] = std::max(f[0], f[1]);\n\t}\n\tcout << f[0] << '\\n';\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define N 100005\n#define LL long long\nusing namespace std;\n\nLL read(){\n\tchar c=getchar();\n\tLL t=0,f=1;\n\twhile(c>'9'||c<'0') f=(c=='-')?-1:1,c=getchar();\n\twhile(c>='0'&&c<='9') t=t*10+c-'0',c=getchar();\n\treturn t*f;\n}\n\nint n,op[N],st;\nLL sum[N],absum[N]; \nchar ch[2];\n\nint main(){\n\tn=read(),sum[1]=absum[1]=read(),st=op[1]=1;\n\tfor(int i=2,x;i<=n;i++){\n\t\tscanf(\"%s\",ch),op[i]=(ch[0]=='-')?-1:1;\n\t\tx=read(),sum[i]=sum[i-1]+x*op[i],absum[i]=absum[i-1]+x;\n\t}\n\tLL ans=sum[n];\n\twhile(op[st]>0) st++;\n\tfor(int i=2,j=3;i<=n;i=j,j++){\n\t\tif(op[i]>0 )continue;\n\t\tLL tmp=sum[i-1];\n\t\twhile(op[j]>0&&j<=n) j++;\n\t\ttmp+=(absum[n]-absum[j-1])-(absum[j-1]-absum[i-1]);\n\t\tans=max(ans,tmp);\n\t}\n\tprintf(\"%lld\\n\",ans);\n}\n/*\n3\n5 - 1 - 3\n5\n1 - 20 - 13 + 14 - 5\n6\n3 - 5 + 1 + 6 - 11 - 13\n*/"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<algorithm>\n#define maxn 100005\nusing namespace std;\nlong long pre[maxn],suf[maxn],id[maxn],ans;\nint n,a[maxn],op[maxn];\nchar s[2];\nint main()\n{\n    scanf(\"%d\",&n);\n    scanf(\"%d\",&a[1]),op[1]=1,pre[1]=a[1];\n    for(int i=2;i<=n;i++)\n    {\n        scanf(\"%s%d\",s,&a[i]);\n        op[i]=(s[0]=='+'?1:-1);\n        pre[i]=pre[i-1]+a[i]*op[i];\n    }\n    for(int i=n;i>=1;i--) suf[i]=suf[i+1]+a[i];\n    id[n+1]=n+1;\n    for(int i=n;i>=1;i--)\n        if(op[i+1]==-1) id[i]=i+1;\n        else id[i]=id[i+1];\n    for(int i=2;i<=n;i++)\n        if(op[i]==-1) ans=max(ans,pre[i-1]-suf[i]+2*suf[id[i]]);\n    printf(\"%lld\",max(ans,pre[n]));\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long LL;\nconst int N=100005;\nconst LL inf=(LL)1e15;\nint n,a[N];\nchar op[N][2];\nLL f[N][3];\nint main()\n{\n    scanf(\"%d\",&n);\n    for (int i=1;i<n;i++) scanf(\"%d%s\",&a[i],op[i]);\n    scanf(\"%d\",&a[n]);\n    f[1][0]=a[1];f[1][1]=f[1][2]=-inf;\n    for (int i=2;i<=n;i++)\n        if (op[i-1][0]=='+')\n        {\n            f[i][0]=max(f[i-1][0],f[i-1][1])+a[i];\n            f[i][1]=f[i-1][1]-a[i];\n            f[i][2]=f[i-1][2]+a[i];\n        }\n        else\n        {\n            f[i][0]=-inf;\n            f[i][1]=max(f[i-1][0],f[i-1][1])-a[i];\n            f[i][2]=max(f[i-1][1],f[i-1][2])+a[i];\n        }\n    printf(\"%lld\",max(f[n][0],max(f[n][1],f[n][2])));\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <cassert>\n#include <numeric>\n#include <iostream>\nusing namespace std;\n\nlong long check(int n, int *a, bool *neg) {\n    long long maxval[n+1][n+1], minval[n+1][n+1];\n    for (int i = 0; i < n; i++)\n        maxval[i][i+1] = minval[i][i+1] = a[i];\n    for (int w = 2; w <= n; w++)\n        for (int i = 0, j = w; j <= n; i++, j++) {\n            long long mx = -(1LL<<60), mn = 1LL<<60;\n            for (int k = i + 1; k < j; k++) {\n                // [i, k), [k, j)\n                if (neg[k]) {\n                    mx = max(mx, maxval[i][k] - minval[k][j]);\n                    mn = min(mn, minval[i][k] - maxval[k][j]);\n                } else {\n                    mx = max(mx, maxval[i][k] + maxval[k][j]);\n                    mn = min(mn, minval[i][k] + minval[k][j]);\n                }\n            }\n            maxval[i][j] = mx;\n            minval[i][j] = mn;\n        }\n    return maxval[0][n];\n}\n\nint main() {\n    int n; cin >> n;\n    int a[n];\n    bool neg[n];\n    cin >> a[0];\n    neg[0] = false;\n    for (int i = 1; i < n; i++) {\n        char c; cin >> c >> a[i];\n        neg[i] = c == '-';\n    }\n    long long pref[n+1], suf[n+1];\n    pref[0] = 0; suf[n] = 0;\n    for (int i = 0; i < n; i++)\n        pref[i+1] = pref[i] + a[i] * (neg[i] ? -1 : 1);\n    for (int i = n-1; i >= 0; i--)\n        suf[i] = suf[i+1] + a[i];\n    // for (int i = 0; i <= n; i++) cerr << pref[i] << ' '; cerr << endl;\n    // for (int i = 0; i <= n; i++) cerr << suf[i] << ' '; cerr << endl;\n    long long ans = pref[n];\n    for (int i = n-1, j = n; i >= 0; i--) {\n        if (neg[i]) {\n            ans = max(ans, pref[i] - suf[i] + 2 * suf[j]);\n            j = i;\n        }\n    }\n    cout << ans << endl;\n    // if (ans != check(n, a, neg)) {\n    //     cerr << \"WA\\n\";\n    //     cerr << n << endl;\n    //     for (int i = 0; i < n-1; i++) cerr << a[i] << ' ' << (neg[i+1] ? '-' : '+') << ' ';\n    //     cerr << ' ' << a[n-1] << endl;\n    // }\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define N 100005\nusing namespace std;\n\nint n,cnt,a[N]; long long ans,b[N],s1[N],s2[N];\nint main(){\n\tscanf(\"%d%lld\",&n,&b[cnt=1]);\n\tint i,x; char ch;\n\tfor (i=1; i<n; i++){\n\t\tch=getchar(); while (ch!='+' && ch!='-') ch=getchar();\n\t\tscanf(\"%d\",&x);\n\t\tif (ch=='+') b[cnt]+=x; else{\n\t\t\tcnt++; a[cnt]=b[cnt]=x;\n\t\t}\n\t}\n\tfor (i=1; i<=cnt; i++){\n\t\ts1[i]=s1[i-1]+b[i]; s2[i]=s2[i-1]+b[i]-a[i]-a[i];\n\t}\n\tfor (i=2; i<=cnt; i++) ans=max(ans,s2[i-1]-b[i]+s1[cnt]-s1[i]);\n\tprintf(\"%lld\\n\",(cnt==1)?b[1]:ans);\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef pair<int, int> ii;\ntypedef vector<int> vi;\n\n#define SZ(x) ((int)x.size())\n\nconst int N = (int)1e5+5;\nint n, op[N];\nll a[N], sum[N], dp[N];\npriority_queue<ll> pq;\nvector<int> q;\n\nint main() {\n\tscanf(\"%d\", &n);\n\tfor (int i = 1; i <= n; ++i) {\n\t\tscanf(\"%lld\", &a[i]);\n\t\tsum[i] = sum[i - 1] + a[i];\n\t\tif (i == n) break;\n\t\tchar s[2]; scanf(\"%s\", s);\n\t\tif (s[0] == '-') op[i] = -1;\n\t\telse op[i] = 1;\n\t}\n\tint idx = 1;\n\tfor (; idx <= n; ++idx) {\n\t\tdp[idx] = sum[idx];\n\t\tif (op[idx] == -1) break;\n\t}\n\tfor (int i = idx + 1; i <= n; ++i) {\n\t\tdp[i] = dp[i - 1] + (ll)op[i - 1] * a[i];\n\t\tif (op[i - 1] == -1) {\n\t\t\tif (SZ(q) == 0) q.push_back(i);\n\t\t\telse {\n\t\t\t\tll val = sum[i - 1] - sum[q.back() - 1];\n\t\t\t\tpq.push(dp[q.back() - 1] - val - sum[i - 1]);\n\t\t\t}\n\t\t}\n\t\tif (SZ(pq) > 0) dp[i] = max(dp[i], pq.top() + sum[i]);\n\t}\n\tprintf(\"%lld\", dp[n]);\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n\nusing ui = uint64_t;\nusing li = int64_t;\n\nli num[100100];\nchar op[100100];\n\nconst li INF = li(100100)*1000000000;\nli dp[100100];\n//op[i]==-\nli func(int i)\n{\n\t//i以降（i含む)で最大\n\tif(op[i+1] == '-'){ return -(num[i] - num[i+1]) + num[i+1]; }\n\tif(dp[i] != INF){return dp[i];}\n\treturn dp[i] = -num[i]\n\t\t+ std::max(\n\t\t\t-(num[i+1] - num[i+2]) + num[i+2],\n\t\t\t+(num[i+1] - num[i+2]) + func(i+2)\n\t\t\t);\n}\n\nint main()\n{\n\tfor(auto& i : dp){\n\t\ti = INF;\n\t}\n\tstd::cin.sync_with_stdio(false);\n\tstd::cout.sync_with_stdio(false);\n\tint N;\n\tstd::cin >> N;\n\tstd::cin >> num[0];\n\tint temp_n = 1;\n\tbool is_mode_add = true;\n\tfor(int i = 1; i < N;++i){\n\t\tstd::cin >> op[temp_n];\n\t\tstd::cin >> num[temp_n];\n\t\tbool next_mode = (op[temp_n] == '+');\n\t\tif(is_mode_add && next_mode){\n\t\t\tnum[temp_n-1] += num[temp_n];\n\t\t}\n\t\telse{\n\t\t\tis_mode_add = next_mode;\n\t\t\t++temp_n;\n\t\t}\n\t}\n\t//番兵\n\top[temp_n] = op[temp_n+1] = '-';\n\tnum[temp_n] = num[temp_n+1] = 0;\n\t//numを累積和に\n\tfor(int i = temp_n-1; i >= 0; --i){\n\t\tnum[i] += num[i+1];\n\t}\n\t\n\tli res = (num[0] - num[0+1]);\n\tif(temp_n > 1){\n\t\t\n\t\t\tres += func(1);\n\t\t}\n\tstd::cout << res << std::endl;\n}\n\n#if 0\nconstexpr ui MOD = 1000000000+7;\nint bit_count(ui v){\n\t//非効率注意\n\tint res = 0;\n\twhile(v>0){\n\t\tif(v&1)++res;\n\t\tv>>=1;\n\t}\n\treturn res;\n}\nint max_bit(ui v){\n\tint res = 0;\n\twhile(v>0){\n\t\t++res;\n\t\tv>>=1;\n\t}\n\treturn res;\n}\nint main()\n{\n\tstd::cin.sync_with_stdio(false);\n\tstd::cout.sync_with_stdio(false);\n\tint N;\n\tstd::cin >> N;\n\tui res = 0;\n\t\n\tui xor_safe = N >> 1;\n\t//a >= b\n\tres += (xor_safe + 1) * xor_safe / 2;\n\tres -= 2 ^ bit_count(xor_sage);\n\tfor(int i = max_bit(xor_sage)-1;i >= 1;--i){\n\t\tres -= 2^(i-1);\n\t}\n\t\n\tstd::cout << res << std::endl;\n}\n#endif\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#include <ext/pb_ds/assoc_container.hpp> // Common file\n#include <ext/pb_ds/tree_policy.hpp> // Including tree_order_statistics_node_update\n#define int         int64_t\n#define ii          pair<int,int>\n#define dd          pair<double,double>\n#define vi          vector<int>\n#define pb          push_back\n#define all(x)      (x).begin(), (x).end()\n#define checkBit(v, p)      (v&(1LL << p))\n#define loop(i,a,b) for(int i = a;i < int(b);i++)\n#define x           first\n#define y           second\nusing namespace std;\nint inf = 4e18;\nint32_t main()\n{\n    ios_base::sync_with_stdio(false); cout << fixed <<setprecision(0);\n    int n; cin >> n;\n    vi arr(1,0), ps;\n    char si = '+';\n    for(int i=0, cur;i<n;i++){\n        if(i) cin >> si;\n        cin >> cur;\n        if(si == '+') arr.back() += cur;\n        else arr.pb(cur);\n    }\n    n = arr.size();\n    ps.pb(arr[0]);\n    for(int i=1;i<n;i++) ps.pb(ps.back() + arr[i]);\n    int res = arr[0] - (ps.back() - ps[0]);\n    for(int i=1;i<n;i++){\n        res = max(res, arr[0] - (ps[i-1] - ps[0]) - arr[i] + (ps.back() - ps[i]));\n    }\n    cout << res<<endl;\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "/**\n *    author:  otera    \n**/\n#include<iostream>\n#include<string> \n#include<cstdio>\n#include<cstring>\n#include<vector>\n#include<cmath>\n#include<algorithm> \n#include<functional>\n#include<iomanip>\n#include<queue>\n#include<deque>\n#include<ciso646>\n#include<random>\n#include<map>\n#include<set>\n#include<complex>\n#include<bitset>\n#include<stack>\n#include<unordered_map>\n#include<utility>\n#include<cassert>\nusing namespace std;\n\n#define int long long\ntypedef long long ll;\ntypedef unsigned long long ul;\ntypedef unsigned int ui;\ntypedef long double ld;\nconst int inf=1e9+7;\nconst ll INF=1LL<<60 ;\nconst ll mod=1e9+7 ;\n#define rep(i,n) for(int i=0;i<n;i++)\n#define per(i,n) for(int i=n-1;i>=0;i--)\n#define Rep(i,sta,n) for(int i=sta;i<n;i++)\n#define rep1(i,n) for(int i=1;i<=n;i++)\n#define per1(i,n) for(int i=n;i>=1;i--)\n#define Rep1(i,sta,n) for(int i=sta;i<=n;i++)\ntypedef complex<ld> Point;\nconst ld eps = 1e-8;\nconst ld pi = acos(-1.0);\ntypedef pair<int, int> P;\ntypedef pair<ld, ld> LDP;\ntypedef pair<ll, ll> LP;\n#define fr first\n#define sc second\n#define all(c) c.begin(),c.end()\n#define pb push_back\n#define debug(x)  cerr << #x << \" = \" << (x) << endl;\ntemplate<class T> inline bool chmax(T& a, T b) { if (a < b) { a = b; return 1; } return 0; }\ntemplate<class T> inline bool chmin(T& a, T b) { if (a > b) { a = b; return 1; } return 0; }\n\nvoid solve() {\n\tint n; cin >> n;\n    static int dp[100100][3];\n    rep(i, 100100) {\n        rep(j, 3) {\n            dp[i][j] = -INF;\n        }\n    }\n    int x; char c;\n    cin >> x;\n    dp[0][0] = x;\n    rep(i, n - 1) {\n        cin >> c >> x;\n        if(c == '+') {\n            chmax(dp[i + 1][0], dp[i][0] + x);\n            chmax(dp[i + 1][1], dp[i][1] - x);\n            chmax(dp[i + 1][0], dp[i][1] + x);\n            chmax(dp[i + 1][2], dp[i][2] + x);\n            chmax(dp[i + 1][1], dp[i][2] - x);\n            chmax(dp[i + 1][0], dp[i][2] + x);\n        } else {\n            chmax(dp[i + 1][0], dp[i][0] - x);\n            chmax(dp[i + 1][1], dp[i][0] - x);\n            chmax(dp[i + 1][0], dp[i][1] - x);\n            chmax(dp[i + 1][1], dp[i][1] + x);\n            chmax(dp[i + 1][2], dp[i][1] + x);\n            chmax(dp[i + 1][0], dp[i][2] - x);\n            chmax(dp[i + 1][1], dp[i][2] - x);\n            chmax(dp[i + 1][2], dp[i][2] - x);\n        }\n    }\n    cout << *max_element(dp[n - 1], dp[n - 1] + 3) << endl;\n}\n\nsigned main() {\n\tios::sync_with_stdio(false);\n\tcin.tie(0);\n\t//cout << fixed << setprecision(10);\n\t//int t; cin >> t; rep(i, t)solve();\n\tsolve();\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nusing ll=long long;\n#define int ll\n\n#define FOR(i,a,b) for(int i=int(a);i<int(b);i++)\n#define REP(i,b) FOR(i,0,b)\n#define MP make_pair\n#define PB push_back\n#define ALL(x) x.begin(),x.end()\n#define REACH cerr<<\"reached line \"<<__LINE__<<endl\n#define DBG(x) cerr<<\"line \"<<__LINE__<<\" \"<<#x<<\":\"<<x<<endl\n\nusing pii=pair<int,int>;\nusing vi=vector<int>;\nusing ld=long double;\n\ntemplate<class T,class U>\nostream& operator<<(ostream& os,const pair<T,U>& p){\n\tos<<\"(\"<<p.first<<\",\"<<p.second<<\")\";\n\treturn os;\n}\n\ntemplate<class T>\nostream& operator <<(ostream& os,const vector<T>& v){\n\tos<<\"[\";\n\tREP(i,(int)v.size()){\n\t\tif(i)os<<\",\";\n\t\tos<<v[i];\n\t}\n\tos<<\"]\";\n\treturn os;\n}\n\nint read(){\n\tint i;\n\tscanf(\"%lld\",&i);\n\treturn i;\n}\n\nvoid printSpace(){\n\tprintf(\" \");\n}\n\nvoid printEoln(){\n\tprintf(\"\\n\");\n}\n\nvoid print(int x,int suc=1){\n\tprintf(\"%lld\",x);\n\tif(suc==1)\n\t\tprintEoln();\n\tif(suc==2)\n\t\tprintSpace();\n}\n\nstring readString(){\n\tstatic char buf[3341919];\n\tscanf(\"%s\",buf);\n\treturn string(buf);\n}\n\nchar* readCharArray(){\n\tstatic char buf[3341919];\n\tstatic int bufUsed=0;\n\tchar* ret=buf+bufUsed;\n\tscanf(\"%s\",ret);\n\tbufUsed+=strlen(ret)+1;\n\treturn ret;\n}\n\ntemplate<class T,class U>\nvoid chmax(T& a,U b){\n\tif(a<b)\n\t\ta=b;\n}\n\ntemplate<class T,class U>\nvoid chmin(T& a,U b){\n\tif(a>b)\n\t\ta=b;\n}\n\ntemplate<class T>\nT Sq(const T& t){\n\treturn t*t;\n}\n\nsigned main(){\n\tint n=read();\n\tassert(1<=n&&n<=100000);\n\tconst int inf=LLONG_MAX/3;\n\tint dp[3]={0,-inf,-inf};\n\tREP(i,n){\n\t\tstring op=\"+\";\n\t\tif(i)\n\t\t\top=readString();\n\t\tassert(op==\"+\"||op==\"-\");\n\t\tint x=read();\n\t\tassert(1<=x&&x<=1000000000);\n\t\tif(op==\"-\"){\n\t\t\tdp[2]=dp[1];\n\t\t\tdp[1]=dp[0];\n\t\t\tdp[0]=-inf;\n\t\t}\n\t\tdp[0]+=x;\n\t\tdp[1]-=x;\n\t\tdp[2]+=x;\n\t\tchmax(dp[1],dp[2]);\n\t\tchmax(dp[0],dp[1]);\n\t}\n\tcout<<dp[0]<<endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "// ====================================\n//   author: M_sea\n//   website: https://m-sea-blog.com/\n// ====================================\n#include <bits/stdc++.h>\n#define file(x) freopen(#x\".in\",\"r\",stdin); freopen(#x\".out\",\"w\",stdout)\n#define debug(...) fprintf(stderr,__VA_ARGS__)\nusing namespace std;\ntypedef long long ll;\n\nint read() {\n\tint X=0,w=1; char c=getchar();\n\twhile (c<'0'||c>'9') { if (c=='-') w=-1; c=getchar(); }\n\twhile (c>='0'&&c<='9') X=X*10+c-'0',c=getchar();\n\treturn X*w;\n}\nchar readc() {\n\tchar c=getchar();\n\twhile (c!='-'&&c!='+') c=getchar();\n\treturn c;\n}\n\nconst int N=100000+10;\n\nint n;\nll dp[N][3];\n\nint main() {\n\tn=read();\n\tdp[1][0]=read(),dp[1][1]=dp[1][2]=-1e18;\n\tfor (int i=2;i<=n;++i) {\n\t\tchar op=readc(); int w=read();\n\t\tif (op=='+') {\n\t\t\tdp[i][0]=max({dp[i-1][0],dp[i-1][1],dp[i-1][2]})+w;\n\t\t\tdp[i][1]=max(dp[i-1][1],dp[i-1][2])-w;\n\t\t\tdp[i][2]=dp[i-1][2]+w;\n\t\t} else {\n\t\t\tdp[i][0]=max({dp[i-1][0],dp[i-1][1],dp[i-1][2]})-w;\n\t\t\tdp[i][1]=max(max(dp[i-1][1],dp[i-1][2])+w,dp[i-1][0]-w);\n\t\t\tdp[i][2]=max(dp[i-1][1],dp[i-1][2])+w;\n\t\t}\n\t}\n\tprintf(\"%lld\\n\",max({dp[n][0],dp[n][1],dp[n][2]}));\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n\nusing lint = long long;\nconstexpr lint INF = 1LL << 60;\n\nvoid solve() {\n    int n;\n    std::cin >> n;\n\n    std::vector<lint> dp(3, -INF);\n    dp[0] = 0;\n    for (int i = 0; i < n; ++i) {\n        lint x;\n        if (i == 0) {\n            std::cin >> x;\n        } else {\n            char c;\n            std::cin >> c >> x;\n            if (c == '-') x = -x;\n        }\n\n        for (int j = 0; j <= 2; ++j) {\n            dp[j] += x * (j == 1 ? -1 : 1);\n        }\n\n        // close\n        for (int j = 1; j >= 0; --j) {\n            dp[j] = std::max(dp[j], dp[j + 1]);\n        }\n\n        if (x < 0) {\n            // open\n            for (int j = 1; j >= 0; --j) {\n                dp[j + 1] = std::max(dp[j + 1], dp[j]);\n            }\n        }\n    }\n\n    std::cout << dp[0] << std::endl;\n}\n\nint main() {\n    std::cin.tie(nullptr);\n    std::ios::sync_with_stdio(false);\n\n    solve();\n\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<cstring>\n#include<cstdlib>\n#include<algorithm>\n#include<cmath>\n#include<queue>\n#include<vector>\n#include<ctime>\n#include<map>\n#include<bitset>\n#include<set>\n#include<assert.h>\n#include<chrono>\n#include<random>\n#define LL long long\n#define mp(x,y) make_pair(x,y)\n#define pll pair<long long,long long>\n#define pii pair<int,int>\n#define SZ(x) ((int)x.size())\nusing namespace std;\nmt19937 rnd(chrono::steady_clock::now().time_since_epoch().count());\ninline LL read()\n{\n\tLL f=1,x=0;char ch=getchar();\n\twhile(ch<'0'||ch>'9'){if(ch=='-')f=-1;ch=getchar();}\n\twhile(ch>='0'&&ch<='9'){x=x*10+ch-'0';ch=getchar();}\n\treturn x*f;\n}\nint stack[20];\ntemplate<typename T>inline void write(T x)\n{\n\tif(x<0){putchar('-');x=-x;}\n    if(!x){putchar('0');return;}\n    int top=0;\n    while(x)stack[++top]=x%10,x/=10;\n    while(top)putchar(stack[top--]+'0');\n}\ntemplate<typename T>inline void pr1(T x){write(x);putchar(' ');}\ntemplate<typename T>inline void pr2(T x){write(x);putchar('\\n');}\ntemplate<typename T>inline void chkmin(T &x,T y){x=x<y?x:y;}\ntemplate<typename T>inline void chkmax(T &x,T y){x=x>y?x:y;}\nconst int MAXN=100005;\nint a[MAXN],n,opt[MAXN];char ch[15];\nLL gi(int x)\n{\n\tif(opt[x]!=1)return a[x];\n\treturn a[x]+gi(x+1);\n}\nint main()\n{\n//\tfreopen(\"a.txt\",\"r\",stdin);\n\tn=read();LL sum=0;\n\tint fi=-1;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\ta[i]=read();sum+=a[i];\n\t\tif(i!=n)\n\t\t{\n\t\t\tscanf(\"%s\",ch+1);\n\t\t\topt[i]=ch[1]=='+'?1:-1;\n\t\t\tif(opt[i]==-1&&fi==-1)fi=i;\n\t\t}\n\t}\n\tif(fi==-1)return pr2(sum),0;\n\tif(opt[fi+1]==-1)return pr2(sum-2*a[fi+1]),0;\n\tLL ans=-1e18;chkmax(ans,sum-2*a[fi+1]-2*gi(fi+2));sum-=2*a[fi+1];\n\tfor(int i=fi+1;i<n;i++)\n\t{\n\t\tif(opt[i]==-1)\n\t\t{\n\t\t\tif(opt[i+1]==-1)chkmax(ans,sum-2*a[i+1]);\n\t\t\telse chkmax(ans,sum-2*a[i+1]-2*gi(i+2));\n\t\t\tsum-=2*a[i+1];\n\t\t}\n\t}pr2(ans);\n\treturn 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#include <iomanip>\n#include <cstring>\n#include <string>\n#include <vector>\n#include <queue>\n#include <cmath>\nusing namespace std;\n\ntypedef long long i64;\nconst int MAXN = 100000 + 5 ;\nconst i64 INF  = 1e9 * 1e5 * 10;\n\nint N;\ni64 A[MAXN], dp[MAXN][3];\nchar op[MAXN][3];\n\nint main()\n{\n    cin >> N ;\n    for(int i = 1; i < N; i++)\n        cin >> A[i] >> op[i] ;\n    cin >> A[N];\n\n    dp[1][0] = A[1];\n    dp[1][1] = dp[1][2] = -INF;\n\n    for(int i = 2; i <= N; i++)\n        if(op[i - 1][0] == '-')\n        {\n            dp[i][0] = -INF;\n            dp[i][1] = max(dp[i-1][0], dp[i-1][1]) - A[i];\n            dp[i][2] = max(dp[i-1][1], dp[i-1][2]) + A[i];\n        }\n        else if(op[i - 1][0] == '+')\n        {\n            dp[i][0] = max(dp[i-1][0], dp[i-1][1]) + A[i];\n            dp[i][1] = max(dp[i-1][1], dp[i-1][2]) - A[i];\n            dp[i][2] = dp[i-1][2] + A[i];\n        }\n\n    cout << max({dp[N][0], dp[N][1], dp[N][2]}) << endl ;\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n#define ll long long\n#define FOR(i,l,r) for(ll i=(l);i<(r);++i)\n#define REP(i,n) FOR(i,0,n)\n#define REPS(i,n) FOR(i,1,n+1)\n#define RFOR(i,l,r) for(ll i=(l);i>=(r);--i)\n#define RREP(i,n) RFOR(i,n-1,0)\n#define RREPS(i,n) RFOR(i,n,1)\n#define pb push_back\n#define eb emplace_back\n#define SZ(x) ((ll)(x).size())\n#define all(x) (x).begin(),(x).end()\n#define rall(x) (x).rbegin(),(x).rend()\ntemplate<class T = ll> using V = vector<T>;\ntemplate<class T = ll> using VV = V<V<T>>;\ntemplate<class T> inline bool chmin(T& a, T b) {if (a > b) {a = b; return true; }return false; }\ntemplate<class T> inline bool chmax(T& a, T b) {if (a < b) {a = b; return true; }return false; }\ninline void Yes(bool b = true) {cout << (b ? \"Yes\" : \"No\") << '\\n';}\ninline void YES(bool b = true) {cout << (b ? \"YES\" : \"NO\") << '\\n';}\ninline void err(bool b = true) {if(b) {cout << -1 << '\\n'; exit(0);}}\ntemplate<class T> inline void fin(bool b = true, T e = 0) {if(b) {cout << e << '\\n'; exit(0);}}\ntemplate<class T> T Roundup_div(T x, T y) {return (x+(y-1))/y;}\nconst ll INF = 1e18;\n\nint main(){\n    ios::sync_with_stdio(false);\n    cin.tie(nullptr);\n    int n; cin >> n;\n    ll a; cin >> a;\n    //dp[i][j][s][t]はi番まで見たとき,カッコがj個ひらいているときの最大値\n    ll dp[n][3];\n    //初期化\n    REP(i,n)REP(j,3) dp[i][j] = -INF;\n    dp[0][0] = a;\n    REP(i, n - 1){\n        char c; ll a; cin >> c >> a;\n        int z = c == '-';\n        //カッコを変化させない場合\n        REP(j,3) chmax(dp[i+1][j], dp[i][j] + ( (j % 2) xor z ? -a : a) );\n\n        //カッコを減らす場合\n        RREPS(j,2) chmax(dp[i+1][j-1], dp[i][j] + ( (j % 2) xor z ? -a : a) );\n\n        //カッコを増やす場合\n        if(z) REP(j,2) chmax(dp[i+1][j+1], dp[i][j] + ( (j % 2) xor z ? -a : a) );\n    }\n    cout << dp[n-1][0] << '\\n';\n}"
  },
  {
    "language": "C++",
    "code": "#include<stdio.h>\n#include<iostream>\n#include<vector>\n#include<algorithm>\n#include<string>\n#include<string.h>\n\n#ifdef LOCAL\n#define eprintf(...) fprintf(stderr, __VA_ARGS__)\n#else\n#define NDEBUG\n#define eprintf(...) do {} while (0)\n#endif\n#include<cassert>\n\nusing namespace std;\n\ntypedef long long LL;\ntypedef vector<int> VI;\n\n#define REP(i,n) for(int i=0, i##_len=(n); i<i##_len; ++i)\n#define EACH(i,c) for(__typeof((c).begin()) i=(c).begin(),i##_end=(c).end();i!=i##_end;++i)\n\ntemplate<class T> inline void amin(T &x, const T &y) { if (y<x) x=y; }\ntemplate<class T> inline void amax(T &x, const T &y) { if (x<y) x=y; }\ntemplate<class Iter> void rprintf(const char *fmt, Iter begin, Iter end) {\n    for (bool sp=0; begin!=end; ++begin) { if (sp) putchar(' '); else sp = true; printf(fmt, *begin); }\n    putchar('\\n');\n}\n\nint N;\nint A[100011];\nchar op[11];\nLL sums[100011], asums[100011];\n\nvoid MAIN() {\n    scanf(\"%d\", &N);\n    scanf(\"%d\", A);\n    for (int i=1; i<N; i++) {\n\tscanf(\"%s%d\", op, A+i);\n\tif (*op == '-') A[i] = -A[i];\n    }\n\n    REP (i, N) {\n\tsums[i+1] = sums[i] + A[i];\n\tasums[i+1] = asums[i] + abs(A[i]);\n    }\n    LL ans = sums[N];\n    REP (i, N) if (A[i] < 0) {\n\tint r = i+1;\n\twhile (r < N && A[r] >= 0) r++;\n\tif (r < N) {\n\t    LL tmp = sums[i+1] - (sums[r] - sums[i+1]) + (asums[N] - asums[r]);\n\t    amax(ans, tmp);\n\t}\n    }\n    printf(\"%lld\\n\", ans);\n}\n\nint main() {\n    int TC = 1;\n//    scanf(\"%d\", &TC);\n    REP (tc, TC) MAIN();\n    return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define maxn 100005\n#define LL long long\nusing namespace std;\n\nint n;\nLL sm[maxn],lsm[maxn];\nbool isn[maxn];\n\nint main(){\n\tscanf(\"%d\",&n);\n\tLL ans = 0;\n\tfor(int i=1;i<=n;i++){\n\t\tscanf(\"%lld\",&sm[i]);\n\t\tif(isn[i-1]) ans -= sm[i];\n\t\telse ans += sm[i];\n\t\tlsm[i] = ans;\n\t\tsm[i] += sm[i-1];\n\t\tchar ch[2];\n\t\tif(i<n){\n\t\t\tscanf(\"%s\",ch);\n\t\t\tif(ch[0] == '-')isn[i] = 1;\n\t\t}\n\t}\n\tint nx = n;\n\tfor(int i=n-1;i>=0;i--) if(isn[i]){\n\t\tans = max(ans , sm[n] - sm[nx] - (sm[nx] - sm[i]) + lsm[i]);\n\t\tnx = i;\n\t}\n\tprintf(\"%lld\\n\",ans);\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef pair<int, int> ii;\ntypedef vector<int> vi;\n\n#define SZ(x) ((int)x.size())\n\nconst int N = (int)1e5+5;\nconst ll oo = (ll)1e18+7;\nint n, op[N];\nll a[N], f[N][3];\n\nvoid readData() {\n\tscanf(\"%d\", &n);\n\top[0] = 1;\n\tfor (int i = 1; i <= n; ++i) {\n\t\tscanf(\"%lld\", &a[i]);\n\t\tif (i == n) break;\n\t\tchar s[2]; scanf(\"%s\", s);\n\t\tif (s[0] == '-') op[i] = -1;\n\t\telse op[i] = 1;\n\t}\n}\n\nnamespace my_old_sol {\n\tll dp[N], sum[N];\n\tpriority_queue<ll> pq;\n\tvector<int> q;\n\n\tvoid solve() {\n\t\treadData();\n\t\tfor (int i = 1; i <= n; ++i) sum[i] = sum[i - 1] + a[i];\n\t\tint idx = 1;\n\t\tfor (; idx <= n; ++idx) {\n\t\t\tdp[idx] = sum[idx];\n\t\t\tif (op[idx] == -1) break;\n\t\t}\n\t\tfor (int i = idx + 1; i <= n; ++i) {\n\t\t\tdp[i] = dp[i - 1] + (ll)op[i - 1] * a[i];\n\t\t\tif (op[i - 1] == -1) {\n\t\t\t\tif (SZ(q)) {\n\t\t\t\t\tll val = sum[i - 1] - sum[q.back() - 1];\n\t\t\t\t\tpq.push(dp[q.back() - 1] - val - sum[i - 1]);\n\t\t\t\t}\n\t\t\t\tq.push_back(i);\n\t\t\t}\n\t\t\tif (SZ(pq) > 0) dp[i] = max(dp[i], pq.top() + sum[i]);\n\t\t}\n\t\tprintf(\"%lld\", dp[n]);\n\t}\n}\n\nint main() {\n\treadData();\n\tfor (int i = 0; i <= n; ++i) f[i][0] = f[i][1] = f[i][2] = -oo;\n\tf[0][0] = 0;\n\tfor (int i = 0; i < n; ++i) {\n\t\tfor (int j = 0; j < 3; ++j) if (f[i][j] != -oo) {\n\t\t\tint oper = (j % 2 == 0 ? op[i] : -op[i]);\n\t\t\tf[i + 1][j] = max(f[i + 1][j], f[i][j] + (ll)oper * a[i + 1]);\n\t\t\tif (op[i] == -1 && j < 2) f[i + 1][j + 1] = max(f[i + 1][j + 1], f[i][j] + (ll)oper * a[i + 1]);\n\t\t\tif (j > 0) f[i + 1][j - 1] = max(f[i + 1][j - 1], f[i][j] + (ll)oper * a[i + 1]);\n\t\t}\n\t}\n\tprintf(\"%lld\", max(f[n][0], max(f[n][1], f[n][2])));\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define int long long\n#define fi first\n#define se second\n#define PB push_back\nusing namespace std;\ntypedef pair<int, int> P1;\ntypedef pair<int, pair<int, int> > P2;\nstatic const int INF = 1ll<<60;\nstatic const int dx[] = { 1, -1, 0, 0, };\nstatic const int dy[] = { 0, 0, 1, -1 };\nstatic const int mod = 1000000007;\n\nint N;\nint A[100005];\nchar op[100005];\nint dp[100005][5];\n//    [i項目][i項目までに開いているかっこの数]\n\nint solve(){\n    for(int i=0;i<100005;++i)for(int j=0;j<5;++j)dp[i][j]=-INF;\n    dp[0][0] = A[0];\n    for(int i=0;i<N;++i){\n        for(int j=0;j<=3ll;++j){\n            int f;\n            if(j%2==0)f=1;\n            else f=-1;\n            int t1 = f*A[i+1];\n            //cout<<t1<<endl;\n            //cout<<i<<\" \"<<j<<endl;\n            if(op[i+1]=='+'){\n                dp[i+1][j] = max(dp[i][j]+t1,dp[i+1][j]);\n                //if(j!=0)dp[i+1][j-1] = max(dp[i][j]+t1,dp[i+1][j-1]);\n            }\n            else {\n                dp[i+1][j] = max(dp[i][j]-t1,dp[i+1][j]);\n                dp[i+1][j+1] = max(dp[i][j]-t1,dp[i+1][j+1]);\n                if(j!=0)dp[i+1][j-1] = max(dp[i][j]-t1,dp[i+1][j-1]);\n            }\n            //cout<<i<<\" \"<<j<<endl;\n            //cout<<dp[i][j]<<\" \"<<dp[i+1][j]<<\" \"<<dp[i+1][j+1]<<endl;\n        }\n    }\n    int ans=-INF;\n    for(int i=0;i<N;++i)ans=max(dp[N][i],ans);\n    return ans;\n}\n\n\nsigned main(){\n    cin>>N;\n    op[0]='+';\n    for(int i=0;i<N;++i){\n        cin>>A[i];\n        if(i!=N-1)cin>>op[i+1];\n    }\n    cout<<solve()<<endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\ntypedef long long ll;\nconst int MAXN = 100010;\nconst ll inf = 0x3f3f3f3f3f3f3f3f;\n\nint n, a[MAXN];\nchar op[MAXN][5];\nll f[MAXN][3];\n\nint main()\n{\n\tscanf(\"%d\", &n);\n\tfor(int i = 1; i < n; ++i) scanf(\"%d %s\", &a[i], op[i]);\n\tscanf(\"%d\", &a[n]);\n\tf[1][0] = a[1], f[1][1] = f[1][2] = -inf;\n\tfor(int i = 2; i <= n; ++i)\n\t{\n\t\tif(op[i - 1][0] == '+')\n\t\t{\n\t\t\tf[i][0] = max(f[i - 1][0] + a[i], f[i - 1][1] + a[i]);\n\t\t\tf[i][1] = f[i - 1][1] - a[i];\n\t\t\tf[i][2] = f[i - 1][2] + a[i];\n\t\t}\n\t\telse\n\t\t{\n\t\t\tf[i][0] = -inf;\n\t\t\tf[i][1] = max(f[i - 1][0] - a[i], f[i - 1][1] - a[i]);\n\t\t\tf[i][2] = max(f[i - 1][1] + a[i], f[i - 1][2] + a[i]);\n\t\t}\n\t}\n\tprintf(\"%lld\\n\", max(f[n][0], max(f[n][1], f[n][2])));\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "//khodaya khodet komak kon\n#include <bits/stdc++.h>\n\n#define F first\n#define S second\n#define pb push_back\n#define all(x) x.begin(), x.end()\n#pragma GCC optimise (\"ofast\")\n#pragma GCC optimise(\"unroll-loops\")\n#define int long long\n\nusing namespace std;\n\ntypedef long long ll;\ntypedef pair<int, int> pii;\ntypedef vector<int> vi;\n\nconst int N = 100000 + 10;\nconst ll MOD = 1000000000 + 7;\nconst ll INF = 1000000000000000000;\nconst ll LOG = 25;\n\nvector<int> nw;\nint n, a[N], dp[N][4];\nbool What[N];\n\nint POW(int x){\n\treturn (x % 2 ? -1 : 1);\n}\n\nint32_t main(){\n\tios::sync_with_stdio(0); cin.tie(0); cout.tie(0);\n\tcin >> n;\n\tfor( int i = 1; i <= n; i++){\n\t\tcin >> a[i];\n\t\tif (i != n){\n\t\t\tchar c;\n\t\t\tcin >> c;\n\t\t\tif (c == '-') What[i] = 1;\n\t\t}\n\t}\n\tfor( int i = 0; i < N; i++) for (int j = 0; j < 3; j++) dp[i][j] = -INF;\n\tdp[0][0] = 0;\n\t//cout << POW(1) << ' ' << POW(2) << '\\n';\n\tfor (int i = 1; i <= n; i++){\n\t\tfor (int j = 0; j <= 1; j++){\n\t\t\tif (What[i - 1]){\n\t\t\t\tdp[i][j + 1] = max(dp[i][j + 1], dp[i - 1][j] + POW(j + 1) * a[i]);\n\t\t\t\tif (j != 0){\n\t\t\t\t\tdp[i][j - 1] = max(dp[i][j - 1], dp[i - 1][j] + POW(j + 1) * a[i]);\n\t\t\t\t}\n\t\t\t\tdp[i][j] = max(dp[i][j], dp[i - 1][j] + POW(j + 1) * a[i]);\n\t\t\t}else{\n\t\t\t\t//cout << i << '\\n';\n\t\t\t\tif (j != 0) dp[i][j - 1] = max(dp[i][j - 1], dp[i - 1][j] + POW(j) * a[i]);\n\t\t\t\tdp[i][j] = max(dp[i][j], dp[i - 1][j] + POW(j) * a[i]);\n\t\t\t}\n\t\t}\n\t}\n\t//cout << dp[1][0] << ' ' << dp[2][1] << ' ' << dp[3][1] << ' ' << dp[4][0] << '\\n';\n\tll ans = max(dp[n][0], max(dp[n][2], dp[n][1]));\n\tcout << ans;\n\n\n\n\n\n\n\n\n\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n#define X first\n#define Y second\n#define pb push_back\ntypedef pair<int, int> ii;\ntypedef long long ll;\n\nconst int maxn = 2e5+5;\n\nint n;\n\nint arr[maxn];\n\nll sum[maxn];\nll qs[maxn];\n\nint main()\n{\n\tscanf(\"%d\", &n);\n\tint best = 0;\n\tfor(int i = 1; i<= n; i++)\n\t{\n\t\tchar tmp = '+';\n\t\tif(i != 1) scanf(\" %c\", &tmp);\n\t\tint x; scanf(\"%d\", &x);\n\t\tif(tmp == '-') x = -x;\n\t\tarr[i] = x;\n\t\tbest += arr[i];\n\t}\n\tsum[n] = abs(arr[n]);\n\tfor(int i = n-1; i>= 1; i--)\n\t{\n\t\tsum[i] = sum[i+1]+abs(arr[i]);\n\t}\n\tfor(int i = 1; i<= n; i++)\n\t{\n\t\tqs[i] = qs[i-1]+arr[i];\n\t}\n\tvector<int> neg;\n\tfor(int i = 1; i<= n; i++) if(arr[i]< 0) neg.pb(i);\n\tfor(int i = 0; i+1< (int) neg.size(); i++)\n\t{\n\t\tint loc = 0;\n\t\tloc += arr[neg[i]];\n\t\tfor(int j = neg[i]+1; j< neg[i+1]; j++)\n\t\t{\n\t\t\tloc -= arr[j];\n\t\t}\n\t\t// printf(\"[%d, %d) loc = %d\\n\", neg[i], neg[i+1], loc);\n\t\tbest = max(best, qs[neg[i]-1]+loc+sum[neg[i+1]]);\n\t}\n\tprintf(\"%d\\n\", best);\n}"
  },
  {
    "language": "C++",
    "code": "// Math = ♥️\n\n#include <bits/stdc++.h>\n#include <ext/pb_ds/assoc_container.hpp>\n#include <ext/pb_ds/tree_policy.hpp>\nusing namespace __gnu_pbds;\nusing namespace std;\n\n/*-------------------------------------------------------------------------------------------------------------------------*/\n#define ll long long                  // Short form for long long\n#define ld long double                // Short form for long double\ntypedef pair<ll, ll> ii;              // Pair of long long\ntypedef vector<ll> vi;                // Vector of long long\ntypedef vector<vi> vvi;               // Vector of vector of long long\ntypedef vector<ii> vii;               // Vector of pairs\ntypedef vector<vii> vvii;             // Vector of vector of pairs\n#define pq priority_queue             // Max heap (To convert to min heap, use negative sign before every value)\n#define ff first                      // For pairs\n#define ss second                     // For pairs\n#define pb push_back                  // Pushback to vector\n#define mp make_pair                  // Makes pairs to be stored as pair\n#define all(c) (c).begin(), (c).end() // Mainly used by me in sorting\n// ordered_set adds two new functions to set - (set).find_by_order([kth element based on zero indexing]) and order_of_key()\n// order_of_key returns number of elements less that parameter. If element exists, that order is its index\n#define ordered_set tree<ll, null_type, less<ll>, rb_tree_tag, tree_order_statistics_node_update>\n/*-------------------------------------------------------------------------------------------------------------------------*/\n#define MAXN (ll)(1e5 + 5)\n#define INF (ll)(1e18)\n\nll dp[MAXN][3];\nll n;\nvi arr;\n\nll solve(ll i, ll t)\n{\n    if (i == n)\n        return 0;\n\n    if (dp[i][t] == INF)\n    {\n        if (t == 0)\n        {\n            if (arr[i] < 0)\n                dp[i][t] = arr[i] + max(solve(i + 1, 0), solve(i + 1, 1));\n            else\n                dp[i][t] = arr[i] + solve(i + 1, 0);\n        }\n        else if (t == 1)\n        {\n            ll maxi = max(solve(i + 1, 0) + arr[i], solve(i + 1, 1) - arr[i]);\n            if (arr[i] < 0)\n                maxi = max(maxi, solve(i + 1, 2) - arr[i]);\n            dp[i][t] = maxi;\n        }\n        else\n            dp[i][t] = max(arr[i] + solve(i + 1, 2), solve(i + 1, 1) - arr[i]);\n    }\n    return dp[i][t];\n}\n\nint main(void)\n{\n    ios_base::sync_with_stdio(false);\n    cin.tie(NULL);\n\n    for (int i = 0; i < MAXN; i++)\n        for (int j = 0; j < 3; j++)\n            dp[i][j] = INF;\n    cin >> n;\n    arr.resize(n);\n\n    cin >> arr[0];\n\n    for (int i = 1; i < n; i++)\n    {\n        char c;\n        cin >> c >> arr[i];\n\n        if (c == '-')\n            arr[i] = -arr[i];\n    }\n\n    cout << solve(0, 0) << \"\\n\";\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<string>\n#include<algorithm>\n#include<vector>\nusing namespace std;\nlong long dp[1000000][5], a[1000000], n;\nchar op[1000000];\nint main() {\n\tcin >> n;\n\tfor (int i = 0; i < n; i++) {\n\t\tcin >> a[i]; if (i != n - 1)cin >> op[i];\n\t}\n\tfor (int i = 0; i <= n; i++) {\n\t\tfor (int j = 0; j < 5; j++)dp[i][j] = -1LL << 62;\n\t}\n\tdp[0][0] = 0;\n\tfor (int i = 0; i < n; i++) {\n\t\tfor (int j = 0; j < 3; j++) {\n\t\t\tif (dp[i][j] == -1LL << 62)continue;\n\t\t\tif (i == 0 || op[i - 1] == '+') {\n\t\t\t\tif (j % 2 == 0) {\n\t\t\t\t\tdp[i + 1][j] = max(dp[i + 1][j], dp[i][j] + a[i]);\n\t\t\t\t\tif (j >= 1)dp[i + 1][j - 1] = max(dp[i + 1][j], dp[i][j] + a[i]);\n\t\t\t\t}\n\t\t\t\tif (j % 2 == 1) {\n\t\t\t\t\tdp[i + 1][j] = max(dp[i + 1][j], dp[i][j] - a[i]);\n\t\t\t\t\tif (j >= 1)dp[i + 1][j - 1] = max(dp[i + 1][j], dp[i][j] - a[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (j % 2 == 0) {\n\t\t\t\t\tdp[i + 1][j] = max(dp[i + 1][j], dp[i][j] - a[i]);\n\t\t\t\t\tdp[i + 1][j + 1] = max(dp[i + 1][j], dp[i][j] - a[i]);\n\t\t\t\t\tif (j >= 1)dp[i + 1][j - 1] = max(dp[i + 1][j], dp[i][j] - a[i]);\n\t\t\t\t}\n\t\t\t\tif (j % 2 == 1) {\n\t\t\t\t\tdp[i + 1][j] = max(dp[i + 1][j], dp[i][j] + a[i]);\n\t\t\t\t\tdp[i + 1][j + 1] = max(dp[i + 1][j], dp[i][j] + a[i]);\n\t\t\t\t\tif (j >= 1)dp[i + 1][j - 1] = max(dp[i + 1][j], dp[i][j] + a[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tcout << max(dp[n][0], max(dp[n][1], max(dp[n][2], dp[n][3]))) << endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#include <ext/pb_ds/assoc_container.hpp>\n#include <ext/pb_ds/tree_policy.hpp>\nusing namespace __gnu_pbds;\nusing namespace std;\n#define ll long long int\n#define ordered_set tree < ll ,  null_type ,  less<ll> ,  rb_tree_tag ,  tree_order_statistics_node_update >\n//added two more functions to set\n//(1)*(set.find_by_order(k))[kth element in the sorted set] \n//(2)set.order_of_key(k)[count of elements strictly less than k]\ntypedef vector< int > vi;\ntypedef vector< ll > lvi;\ntypedef vector< vi > vvi;\ntypedef vector< lvi > lvvi;\ntypedef pair< int,int > ii;\ntypedef pair< ll,ll > lii;\n#define sz(a) int((a).size())\n#define pb push_back\n#define all(c) (c).begin(),(c).end()\n#define tr(c,i) for(auto i = (c).begin(); i != (c).end(); i++)//remember i is an iterator\n#define present(c,x) ((c).find(x) != (c).end())//for sets,maps,multimaps\n#define cpresent(c,x) (find(all(c),x) != (c).end())//for vectors\n#define tc(t) int (t); cin>>(t);while((t)--)\n#define ff first\n#define ss second\n#define mp make_pair\n#define ld long double\n#define ull unsigned long long int\n#define mod 1000000007\nstring s;\nlvi v;\n// lvvi dp;\nll n,y,dp[200000][5];\nll recurs(int idx,int state)\n{\n\tif(idx>=n-1) return 0LL;\n\tif(dp[idx][state]!=((ll)-1e15)) return dp[idx][state];\n\tif(s[idx]=='-')\n\t{\n\t\tif(state==0)\n\t\t{\n\t\t\tdp[idx][state]=max(recurs(idx+1,state)-v[idx],recurs(idx+1,state+1)-v[idx]);\n\t\t}\n\t\tif(state==1)\n\t\t{\n\n\t\t\tdp[idx][state]=max(recurs(idx+1,state-1)+v[idx],max(recurs(idx+1,state)+v[idx],recurs(idx+1,state+1)+v[idx]));\n\t\t}\n\t\tif(state==2)\n\t\t{\n\n\t\t\tdp[idx][state]=max(recurs(idx+1,state)-v[idx],recurs(idx+1,state-1)-v[idx]);\n\t\t}\n\t}\n\telse\n\t{\n\t\tif(state==0)\n\t\t{\n\t\t\tdp[idx][state]=recurs(idx+1,state)+v[idx];\n\t\t}\n\t\tif(state==1)\n\t\t{\n\n\t\t\tdp[idx][state]=max(recurs(idx+1,state-1)-v[idx],recurs(idx+1,state)-v[idx]);\n\t\t}\n\t\tif(state==2)\n\t\t{\n\t\t\t\n\t\t\tdp[idx][state]=max(recurs(idx+1,state)+v[idx],recurs(idx+1,state-1)+v[idx]);\n\t\t}\n\t}\n\t// cout<<idx<<\" \"<<state<<\" \"<<dp[idx][state]<<endl;\n\treturn dp[idx][state];\n}\nint main()\n{\n\tios_base::sync_with_stdio(false);\n    cin.tie(NULL);\t\n\tcin>>n>>y;\n\t// dp.assign(n+2,lvi(4,-1e15));\n\tfor(int i=0;i<(n+2);i++)\n\t{\n\t\tfor(int j=0;j<5;j++)\n\t\t{\n\t\t\tdp[i][j]=-1e15;\n\t\t}\n\t}\n\tfor(int i=1;i<n;i++)\n\t{\n\t\tchar ch;\n\t\tcin>>ch;\n\t\tll x;\n\t\tcin>>x;\n\t\ts.pb(ch);\n\t\tv.pb(x);\n\t}\n\tll ans=recurs(0,0)+y;\n\tcout<<ans<<endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define MAXN 200005\n#define LL long long\n#define sum(l,r) (l<=r?(s[r] - s[l-1]):0)\nusing namespace std;\n \nint N;\nLL a[MAXN], s[MAXN];\nint nxt[MAXN];\n \nint main(){\n\t\n\tcin>>N;\n\tcin>>a[1];\n\t\n\tint N1 = 1;\n\tchar op;\n\tint x, f = 1; \n\tfor(int i=1;i<N;i++){\n\t\tcin>>op;\n\t\tcin>>x;\n\t\tif(op=='-') a[++N1] = -x, f = 0;\n\t\telse{\n\t\t\tif(f) a[N1] += x;\n\t\t\telse a[++N1] = x, f = 1; \n\t\t}\n\t}\n\n\tN = N1;\n\tif(N==1){\n\t\tcout<<a[1]<<endl;\n\t\treturn 0;\n\t}\n\t\n\tfor(int i=1;i<=N;i++){\n\t\t//cout<<a[i]<<\" \";\n\t\ts[i] = s[i-1] + abs(a[i]);\n\t}\n\t//cout<<endl;\n\t\n\tnxt[N] = N;\n\tfor(int i=N-1;i>=1;i--){\n\t\tif(a[i+1] < 0) nxt[i] = i;\n\t\telse nxt[i] = nxt[i+1];\n\t}\n\t\n\tLL ans = -1e18; \n\tLL sum = a[1];\n\tfor(int i=2;i<=N;i++){\n\t\t\n\t\tif(a[i] < 0) ans = max(ans, sum - sum(i,nxt[i]) + sum(nxt[i]+1,N));\n\t\tsum += a[i];\n\t} \n\t\n\tans = max(ans, sum);\n//\t\n//\tfor(int i=2;i<=N;i++){\n//\t\tans = max(ans, a[1]-sum(2,i)+sum(i+1,N));\n//\t}\n\tcout<<ans<<endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstdio>\n#include <cstring>\n#include <algorithm>\n#include <cmath>\n#include <queue>\n#include <stack>\n#include <map>\n#include <set>\n#include <vector>\n#include <iomanip>\n#define ALL(x) (x).begin(), (x).end()\n#define rt return\n#define dll(x) scanf(\"%I64d\",&x)\n#define xll(x) printf(\"%I64d\\n\",x)\n#define sz(a) int(a.size())\n#define all(a) a.begin(), a.end()\n#define rep(i,x,n) for(int i=x;i<n;i++)\n#define repd(i,x,n) for(int i=x;i<=n;i++)\n#define pii pair<int,int>\n#define pll pair<long long ,long long>\n#define gbtb ios::sync_with_stdio(false),cin.tie(0),cout.tie(0)\n#define MS0(X) memset((X), 0, sizeof((X)))\n#define MSC0(X) memset((X), '\\0', sizeof((X)))\n#define pb push_back\n#define mp make_pair\n#define fi first\n#define se second\n#define eps 1e-6\n#define gg(x) getInt(&x)\n#define db(x) cout<<\"== [ \"<<x<<\" ] ==\"<<endl;\nusing namespace std;\ntypedef long long ll;\nll gcd(ll a,ll b){return b?gcd(b,a%b):a;}\nll lcm(ll a,ll b){return a/gcd(a,b)*b;}\nll powmod(ll a,ll b,ll MOD){ll ans=1;while(b){if(b%2)ans=ans*a%MOD;a=a*a%MOD;b/=2;}return ans;}\ninline void getInt(int* p);\nconst int maxn=1000010;\n// const int inf=0x3f3f3f3f;\n/*** TEMPLATE CODE * * STARTS HERE ***/\nint n;\nchar op[maxn];\nint a[maxn];\nll dp[maxn/10][4];\nconst ll inf=(ll)(1e18);\n\nint main()\n{\n    //freopen(\"D:\\\\common_text\\\\code_stream\\\\in.txt\",\"r\",stdin);\n    //freopen(\"D:\\\\common_text\\\\code_stream\\\\out.txt\",\"w\",stdout);\n    gbtb;\n    cin>>n;\n    cin>>a[1];\n    repd(i,2,n)\n    {\n        cin>>op[i]>>a[i];\n    }\n    dp[1][0]=a[1];\n    dp[1][1]=dp[1][2]=-inf;\n    repd(i,2,n)\n    {\n        if(op[i]=='+')\n        {\n            dp[i][0]=max(dp[i-1][0],dp[i-1][1])+a[i];\n            dp[i][1]=dp[i-1][1]-a[i];\n            dp[i][2]=dp[i-1][2]+a[i];\n        }else\n        {\n            dp[i][0]=-inf;\n            dp[i][1]=max(dp[i-1][0],dp[i-1][1])-a[i];\n            dp[i][2]=max(dp[i-1][2],dp[i-1][1])+a[i];\n        }\n    }\n    cout<<max(dp[n][0],max(dp[n][1],dp[n][2]))<<endl;\n    \n    \n    return 0;\n}\n\ninline void getInt(int* p) {\n    char ch;\n    do {\n        ch = getchar();\n    } while (ch == ' ' || ch == '\\n');\n    if (ch == '-') {\n        *p = -(getchar() - '0');\n        while ((ch = getchar()) >= '0' && ch <= '9') {\n            *p = *p * 10 - ch + '0';\n        }\n    }\n    else {\n        *p = ch - '0';\n        while ((ch = getchar()) >= '0' && ch <= '9') {\n            *p = *p * 10 + ch - '0';\n        }\n    }\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\n#define DEBUG(x) cerr<<#x<<\": \"<<x<<endl;\n#define DEBUG_VEC(v) cerr<<#v<<\":\";for(int i=0;i<v.size();i++) cerr<<\" \"<<v[i]; cerr<<endl\n\ntypedef long long ll;\n#define vi vector<int>\n#define vl vector<ll>\n#define vii vector< vector<int> >\n#define vll vector< vector<ll> >\n#define vs vector<string>\n#define pii pair<int,int>\n#define pis pair<int,string>\n#define psi pair<string,int>\n#define pll pair<ll,ll>\ntemplate<class S, class T> pair<S, T> operator+(const pair<S, T> &s, const pair<S, T> &t) { return pair<S, T>(s.first + t.first, s.second + t.second); }\ntemplate<class S, class T> pair<S, T> operator-(const pair<S, T> &s, const pair<S, T> &t) { return pair<S, T>(s.first - t.first, s.second - t.second); }\ntemplate<class S, class T> ostream& operator<<(ostream& os, pair<S, T> p) { os << \"(\" << p.first << \", \" << p.second << \")\"; return os; }\n#define X first\n#define Y second\n#define rep(i,n) for(int i=0;i<(n);i++)\n#define rep1(i,n) for(int i=1;i<=(n);i++)\n#define rrep(i,n) for(int i=(n)-1;i>=0;i--)\n#define rrep1(i,n) for(int i=(n);i>0;i--)\n#define REP(i,a,b) for(int i=a;i<b;i++)\n#define in(x, a, b) (a <= x && x < b)\n#define all(c) c.begin(),c.end()\ntemplate<class T> bool chmax(T &a, const T &b) { if (a<b) { a = b; return 1; } return 0; }\ntemplate<class T> bool chmin(T &a, const T &b) { if (a>b) { a = b; return 1; } return 0; }\n#define UNIQUE(v) v.erase(std::unique(v.begin(), v.end()), v.end());\nconst ll inf = 1000000001;\nconst ll INF = 1e18;\nconst ll MOD = 1000000007;\n//const ll MOD = 998244353;\nconst double pi = 3.14159265358979323846;\n#define Sp(p) cout<<setprecision(15)<< fixed<<p;\nint dx[4] = { 1,0, -1,0 }, dy[4] = { 0,1,0,-1 };\nint dx2[8] = { 1,1,0,-1,-1,-1,0,1 }, dy2[8] = { 0,1,1,1,0,-1,-1,-1 };\n#define fio() cin.tie(0); ios::sync_with_stdio(false);\n//#define mp make_pair\n\n/*\nint main() {\n  int n;\n  cin >> n;\n  if (n == 1) {\n    cout << 0 << endl;\n    return 0;\n  }\n  vl a(n);\n  rep (i, n) {\n    cin >> a[i];\n  }\n  vl num(n);\n  num[0] = 0;\n  ll ans = 0;\n  ll sum = 0;\n  rep1 (i, n - 1) {\n    if (a[i - 1] > a[i]) {\n      ll temp = a[i];\n      while (a[i - 1] > temp) {\n        num[i]++;\n        temp *= 4;\n      }\n      num[i] += num[i - 1];\n      ans += num[i] * 2;\n    }\n    else {\n      ll temp = a[i - 1];\n      num[i] = num[i - 1];\n      while (4*temp <= a[i]) {\n        num[i]--;\n        temp *= 4;\n      }\n      ans += num[i] * 2;\n    }\n    sum += num[i];\n  }\n  vl s(n);\n  stack<int> st;\n  rrep (i, n) {\n    int cnt = 1;\n    while (!st.empty() && num[st.top()] > num[i]) {\n      cnt++;\n      st.pop();\n    }\n    if (st.empty()) {\n      s[i] = (n - i)*num[i];\n    }\n    else {\n      s[i] = (st.top() - i) * num[i] + num[st.top()];\n    }\n    st.push(i);\n  }\n   DEBUG_VEC(num);\n   DEBUG_VEC(s);\n   DEBUG(ans);\n  ll right = ans, left = 0;\n  ll pre = -INF;\n  rep (i, n) {\n    int cnt = 0;\n    ll temp = a[i];\n    temp = temp * -2;\n    left++;\n    while (temp < pre) {\n      pre *= 4;\n      cnt += 2;\n    }\n    left += cnt*i;\n    if (i == n - 1) {\n      right = 0;\n    }\n    else {\n      right = (sum - num[i] - s[i + 1]) * 2;\n    }\n    ans = min(ans, left + right);\n    sum -= num[i];\n    pre = a[i] * -2;\n  }\n  cout << ans << endl;\n}\n//*/\n\nint main() {\n  int n;\n  cin >> n;\n  vl a(n);\n  string s;\n  cin >> a[0];\n  rep1 (i, n - 1) {\n    char c;\n    cin >> c;\n    s.push_back(c);\n    cin >> a[i];\n  }\n  vll dp(n, vl(10, -INF));\n  dp[0][0] = a[0];\n  rep1 (i, n - 1) {\n    char op = s[i - 1];\n    rep (j, 10) {\n      int bai;\n      if (j % 2 == 0) {\n        bai = 1;\n      }\n      else {\n        bai = -1;\n      }\n      if (op == '+') {\n        chmax(dp[i][j], dp[i - 1][j] + bai*a[i]);\n        if (j != 0) {\n          chmax(dp[i][j - 1], dp[i - 1][j] - bai*a[i]);\n        }\n      }\n      else {\n        chmax(dp[i][j], dp[i - 1][j] - bai*a[i]);\n        if (j != 0) {\n          chmax(dp[i][j - 1], dp[i - 1][j] + bai*a[i]);\n        }\n        if (j != 9) {\n          chmax(dp[i][j + 1], dp[i - 1][j] - bai*a[i]);\n        }\n      }\n    }\n  }\n  ll ans = -INF;\n  rep (j, 10) {\n    chmax(ans, dp[n - 1][j]);\n  }\n  cout << ans << endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <cstring>\n#include <cstdio>\nlong long dp[100005][3];\nint arr[100005];\nchar op[100005]; \nint main()\n{\n\t// freopen(\"ARC066-E.in\", \"r\", stdin); \n\tint n; \n\tscanf(\"%d%d\", &n, arr); \n\tfor (int i = 1; i < n; i++)\n\t\tscanf(\"%*c%c%d\", op + i, arr + i); \n\tmemset(dp, -0x3f, sizeof(dp)); \n\tdp[0][0] = arr[0]; \n\tfor (int i = 1; i < n; i++)\n\t{\n\t\tif (op[i] == '+')\n\t\t{\n\t\t\tdp[i][0] = std::max(dp[i - 1][0], dp[i - 1][1]) + arr[i]; \n\t\t\tdp[i][1] = dp[i - 1][1] - arr[i];\n\t\t\tdp[i][2] = dp[i - 1][2] + arr[i];\n\t\t}\n\t\telse\n\t\t{\n\t\t\tdp[i][1] = std::max(dp[i - 1][0], dp[i - 1][1]) - arr[i];\n\t\t\tdp[i][2] = std::max(dp[i - 1][1], dp[i - 1][2]) + arr[i];\n\t\t}\n\t}\n\tprintf(\"%lld\\n\", std::max(dp[n - 1][0], std::max(dp[n - 1][1], dp[n - 1][2])));\n\treturn 0; \n}\n"
  },
  {
    "language": "C++",
    "code": "\n#include <bits/stdc++.h>\n\n#define ln                '\\n'\n#define all(dat)           dat.begin(), dat.end()\n#define loop(i, to)        for (int i = 0; i < to; ++i)\n#define cont(i, to)        for (int i = 1; i <= to; ++i)\n#define circ(i, fm, to)    for (int i = fm; i <= to; ++i)\n#define foreach(i, dat)    for (__typeof(dat.begin()) i = dat.begin(); i != dat.end(); ++i)\n\ntypedef long long          num;\n\nusing namespace std;\n\nconst int nsz = 2e5;\nconst num inf = 0x3f3f3f3f3f3f3f3f;\nint n, a[nsz + 5];\nnum dp[nsz + 5][5], ans;\nstring dat[nsz + 5];\n\nint inline to(string s) {\n    int res = 0;\n    loop (i, s.size()) {\n        res *= 10;\n        res += s[i] ^ 48;\n    }\n    return res;\n}\n\nvoid inline upd(num &a, num b) {\n    if (a < b) {\n        a = b;\n    }\n}\n\nint main() {\n    ios_base::sync_with_stdio(0);\n    cin >> n;\n    dat[0] = '+';\n    cont (i, 2 * n - 1) {\n        cin >> dat[i];\n        if (i & 1) {\n            int cur = to(dat[i]);\n            a[i >> 1] = dat[i - 1] == \"-\" ? -cur : cur;\n        }\n    }\n    memset(dp, -inf, sizeof(dp));\n    dp[0][0] = 0;\n    loop (i, n) {\n        loop (k, 3) {\n            num val = dp[i][k], cur = k & 1 ? -a[i] : a[i];\n            for (int l = k - 1; l >= 0; --l) {\n                upd(dp[i + 1][l], val + cur);\n            }\n            if (k < 2 && a[i] < 0) {\n                upd(dp[i + 1][k + 1], val + cur);\n            }\n            upd(dp[i + 1][k], val + cur);\n        }\n    }\n    loop (k, 3) {\n        upd(ans, dp[n][k]);\n    }\n    cout << ans << ln;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define maxn 100005\n#define ll long long\nusing namespace std;\nint arr[maxn];\nll suf[maxn];\nint main() {\n\tios::sync_with_stdio(0);\n\tcin.tie(0);\n\tint n;\n\tcin >> n;\n\tcin >> arr[1];\n\tfor(int i=2;i<=n;i++) {\n\t\tchar op;\n\t\tcin >> op >> arr[i];\n\t\tif(op == '-')\tarr[i] *= -1;\n\t}\n\tfor(int i=n;i>=1;i--)\n\t\tsuf[i] = suf[i+1] + abs(arr[i]);\n\tll ans = -1e18 , sum = 0;\n\tfor(int i=1;i<=n;i++) {\n\t\tsum += arr[i];\n\t\tif(arr[i] < 0) {\n\t\t\tll tem = 0;\n\t\t\tint j = i + 1;\n\t\t\twhile(j <= n && arr[j] > 0)\t\ttem += arr[j] , j++;\n\t\t\tans = max(ans,sum - tem + suf[j]);\n\t\t\tsum += tem;\n\t\t\ti = j - 1;\n\t\t}\n\t}\n\tans = max(ans,sum);\n\tcout << ans << endl;\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<iostream>\n#include<cstring>\n#define ll long long\n#define maxn 100010\nusing namespace std;\nint n,i;\nll a[maxn],b[maxn],f[maxn][3];\nint read()\n{\n\tint x=0;\n\tchar c=getchar();\n\twhile(!isdigit(c))c=getchar();\n\twhile(isdigit(c))\n\t{\n\t\tx=x*10+c-'0';\n\t\tc=getchar();\n\t}\n\treturn x;\n}\nchar readch()\n{\n\tchar c=getchar();\n\twhile(c!='-'&&c!='+')c=getchar();\n\treturn c;\n}\nint main()\n{\n\tn=read();\n\ta[1]=read();\n\tfor(i=2;i<=n;i++)\n\t{\n\t\tif(readch()=='-')b[i]=-1;else b[i]=1;\n\t\ta[i]=read();\n\t}\n\tmemset(f,-0x3f,sizeof(f));\n\tf[1][0]=a[1];\n\tfor(i=2;i<=n;i++)\n\t{\n\t\tf[i][0]=max(f[i-1][0]+b[i]*a[i],f[i-1][1]-b[i]*a[i]);\n\t\tf[i][1]=max(f[i-1][1]-b[i]*a[i],f[i-1][2]+b[i]*a[i]);\n\t\tif(b[i]==-1)f[i][1]=max(f[i][1],f[i-1][0]+b[i]*a[i]);\n\t\tf[i][2]=f[i-1][2]+b[i]*a[i];\n\t\tif(b[i]==-1)f[i][2]=max(f[i][2],f[i-1][1]-b[i]*a[i]);\n\t}\n\tprintf(\"%d\\n\",f[n][0]);\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\ntypedef long long int ll;\ntypedef unsigned int uint;\ntypedef unsigned char uchar;\ntypedef unsigned long long ull;\ntypedef pair<int, int> pii;\ntypedef pair<ll, ll> pll;\ntypedef vector<int> vi;\n\n#define REP(i,x) for(int i=0;i<(int)(x);i++)\n#define REPS(i,x) for(int i=1;i<=(int)(x);i++)\n#define RREP(i,x) for(int i=((int)(x)-1);i>=0;i--)\n#define RREPS(i,x) for(int i=((int)(x));i>0;i--)\n#define FOR(i,c) for(__typeof((c).begin())i=(c).begin();i!=(c).end();i++)\n#define RFOR(i,c) for(__typeof((c).rbegin())i=(c).rbegin();i!=(c).rend();i++)\n#define ALL(container) (container).begin(), (container).end()\n#define RALL(container) (container).rbegin(), (container).rend()\n#define SZ(container) ((int)container.size())\n#define mp(a,b) make_pair(a, b)\n#define pb push_back\n#define eb emplace_back\n#define UNIQUE(v) v.erase( unique(v.begin(), v.end()), v.end() );\n\ntemplate<class T> bool chmax(T &a, const T &b) { if (a<b) { a=b; return 1; } return 0; }\ntemplate<class T> bool chmin(T &a, const T &b) { if (a>b) { a=b; return 1; } return 0; }\ntemplate<class T> ostream& operator<<(ostream &os, const vector<T> &t) {\nos<<\"[\"; FOR(it,t) {if(it!=t.begin()) os<<\",\"; os<<*it;} os<<\"]\"; return os;\n}\ntemplate<class T> ostream& operator<<(ostream &os, const set<T> &t) {\nos<<\"{\"; FOR(it,t) {if(it!=t.begin()) os<<\",\"; os<<*it;} os<<\"}\"; return os;\n}\ntemplate<class S, class T> ostream& operator<<(ostream &os, const pair<S,T> &t) { return os<<\"(\"<<t.first<<\",\"<<t.second<<\")\";}\ntemplate<class S, class T> pair<S,T> operator+(const pair<S,T> &s, const pair<S,T> &t){ return pair<S,T>(s.first+t.first, s.second+t.second);}\ntemplate<class S, class T> pair<S,T> operator-(const pair<S,T> &s, const pair<S,T> &t){ return pair<S,T>(s.first-t.first, s.second-t.second);}\n\nconst int INF = 1<<28;\nconst double EPS = 1e-8;\nconst int MOD = 1000000007;\n\n\nint T, n, m;\n\nint main(int argc, char *argv[]){\n\tios::sync_with_stdio(false);\n\tcin >> n;\n\tll sum = 0, ans = 1ll << 60, mins = 0, seq = 0, lastmins = 0;\n\tcin >> sum;\n\tREP(i, n - 1){\n\t\tchar op;\n\t\tll x;\n\t\tcin >> op >> x;\n\t\tsum += x;\n\t\tif(op == '-'){\n\t\t\tif(mins){\n\t\t\t\tans = min(ans, mins + seq - lastmins);\n\t\t\t}\n\t\t\tmins += x;\n\t\t\tlastmins = x;\n\t\t}\n\t\tseq += x;\n\t}\n\tans = min(ans, mins);\n\tcout << sum - 2 * ans << endl;\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\nconst int S=(1<<20)+5;\nchar buf[S],*H,*T;\ninline char Get()\n{\n    if(H==T) T=(H=buf)+fread(buf,1,S,stdin);\n    if(H==T) return -1;return *H++;\n}\ninline int read()\n{\n    int x=0;char c=Get();\n    while(!isdigit(c)) c=Get();\n    while(isdigit(c)) x=x*10+c-'0',c=Get();\n    return x;\n}\ninline int readopt()\n{\n    char c=Get();\n    while(c!='+'&&c!='-') c=Get();\n    return c;\n}\n\ntypedef long long LL;\nconst int N=100010;\nint num[N],n,k;\nchar opt[N];\nLL f[2][3];\n\nint main()\n{\n    n=read();\n    num[0]=read();\n    for(int i=1;i<n;i++)\n    {\n        opt[i]=readopt();\n        num[i]=read();\n    }\n    f[k=0][0]=num[0];\n    f[0][1]=f[0][2]=-(1ll<<60);\n    for(int i=1;i<n;i++,k^=1)\n    {\n        if(opt[i]=='+')\n        {\n            f[k^1][0]=max(max(f[k][0],f[k][1]),f[k][2])+num[i];  //原地转移 或 拆1/2个括号\n            f[k^1][1]=max(f[k][1],f[k][2])-num[i];  //原地转移 或 拆1个括号\n            f[k^1][2]=f[k][2]+num[i];  //原地转移\n        }\n        else\n        {\n            f[k^1][0]=max(max(f[k][0],f[k][1]),f[k][2])-num[i];  //原地转移 或 拆1/2个括号\n            f[k^1][1]=max(max(f[k][1],f[k][2])+num[i],f[k][0]-num[i]);  //原地转移 或 拆1个括号 或 添1个括号\n            f[k^1][2]=max(f[k][2]-num[i],f[k][1]+num[i]);  //原地转移 或 添1个括号\n        }\n    }\n    LL ans=max(max(f[k][0],f[k][1]),f[k][2]);\n    printf(\"%lld\\n\",ans);\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define endl \"\\n\"\nusing namespace std;\ntypedef long long ll;\ntypedef pair<ll, ll> l_l;\ntypedef pair<int, int> i_i;\ntemplate<class T>\ninline bool chmax(T &a, T b) {\n    if(a < b) {\n        a = b;\n        return true;\n    }\n    return false;\n}\n\ntemplate<class T>\ninline bool chmin(T &a, T b) {\n    if(a > b) {\n        a = b;\n        return true;\n    }\n    return false;\n}\n\nconst long long INF = 1e18;\nconst ll mod = 1000000007;\n\nint main() {\n    ll N;\n    cin >> N;\n    vector<ll> A(N);\n    vector<ll> sum(N+1);\n    vector<ll> minus;\n    vector<ll> expression(N+1);\n    for(int i = 0; i < N; i++) {\n        cin >> A[i];\n        sum[i+1] = sum[i] + A[i];\n        if(i == 0 or minus.empty() or minus.back() != i - 1) {\n            expression[i+1] = expression[i] + A[i];\n        } else {\n            expression[i+1] = expression[i] - A[i];\n        }\n        //cerr << i << \" \" << expression[i+1] << endl;\n        if(i != N - 1) {\n            char a;\n            cin >> a;\n            if(a == '-') minus.push_back(i);\n        }\n    }\n    ll ans = expression.back();\n    for(int i = 0; i + 1 < minus.size(); i++) {\n        ll tmp = expression[minus[i]+1];\n        tmp -= (sum[minus[i+1]+1] - sum[minus[i]+1]);\n        tmp += sum[N] - sum[minus[i+1]+1];\n        //cerr << i << \" \" << minus[i] << \" \" << minus[i+1] << \" \" << tmp << endl;\n        chmax(ans, tmp);\n    }\n    cout << ans << endl;\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#pragma GCC optimize(\"O2,unroll-loops\")\n#pragma GCC target(\"avx,popcnt\")\n#include<bits/stdc++.h>\n#define all(x) x.begin(), x.end()\n#define pb push_back\nusing namespace std;\nusing ll = long long;\nusing ld = long double;\nconst int maxn = 1<<17, mod = 1e9 + 7;\nll n, _a[maxn], a[maxn], mn[maxn], mx[maxn];\n\nint main() {\n\tcin.tie(0)->sync_with_stdio(0);\n\tcin >> n;\n\tchar t;\n\tfor(int r = 0, i = 0; i < n; i++) {\n\t\tif(i) cin >> t;\n\t\telse t = '+';\n\t\tcin >> a[i];\n\t\tif(t == '-') a[i] = -a[i];\n\t\t_a[i] = a[i];\n\t\tif(r) a[i] = -a[i];\n\t\tif(t == '-') r ^= 1;\n\t}\n\t//for(int i = 0; i < n; i++) cout << a[i] << \" \"; cout << '\\n';\n\tll ss = 0, _mn = 0, _mx = 0;\n\tfor(int i = n; i--;) {\n\t\tss += a[i];\n\t\tmn[i] = min(mn[i+1] + a[i], _a[i] < 0 ? ss + _mn : (1ll<<60));\n\t\tmx[i] = max(mx[i+1] + a[i], _a[i] < 0 ? ss + _mx : -(1ll<<60));\n\t\t_mn = min(_mn, -ss-mx[i]);\n\t\t_mx = max(_mx, -ss-mn[i]);\n\t\t//cout << i << \" \" << mn[i] << \" \" << mx[i] << '\\n';\n\t}\n\tcout << mx[0];\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define fi first\n#define se second\n#define pii pair<int,int>\n#define mp make_pair\n#define pb push_back\n#define space putchar(' ')\n#define enter putchar('\\n')\n#define eps 1e-10\n#define MAXN 100005\n//#define ivorysi\nusing namespace std;\ntypedef long long int64;\ntypedef unsigned int u32;\ntypedef double db;\ntemplate<class T>\nvoid read(T &res) {\n    res = 0;T f = 1;char c = getchar();\n    while(c < '0' || c > '9') {\n\tif(c == '-') f = -1;\n\tc = getchar();\n    }\n    while(c >= '0' && c <= '9') {\n\tres = res * 10 +c - '0';\n\tc = getchar();\n    }\n    res *= f;\n}\ntemplate<class T>\nvoid out(T x) {\n    if(x < 0) {x = -x;putchar('-');}\n    if(x >= 10) {\n\tout(x / 10);\n    }\n    putchar('0' + x % 10);\n}\nint N;\nint64 dp[MAXN][3];\nint64 A[MAXN];\nchar op[MAXN][5];\nvoid update(int64 &x,int64 y) {\n    x = max(x,y);\n}\nvoid Solve() {\n    read(N);\n    for(int i = 1 ; i <= N ; ++i) {\n\tread(A[i]);\n\tif(i != N) scanf(\"%s\",op[i] + 1);\n    }\n    dp[1][0] = A[1];\n    dp[1][1] = -1e18;\n    dp[1][2] = -1e18;\n    for(int i = 2 ; i <= N ; ++i) {\n\tfor(int j = 0 ; j < 3 ; ++j) dp[i][j] = -1e18;\n\tfor(int j = 0 ; j < 3 ; ++j) {\n\t    int t = (op[i - 1][1] == '-');\n\t    int k = (t ^ j) & 1;\n\t    int64 d = A[i];\n\t    if(k) d = -A[i];\n\t    if(t && j < 2) update(dp[i][j + 1],dp[i - 1][j] + d);\n\t    for(int h = 0 ; h <= j ; ++h) update(dp[i][h],dp[i - 1][j] + d);\n\t}\n    }\n    out(dp[N][0]);enter;\n}\nint main() {\n#ifdef ivorysi\n    freopen(\"f1.in\",\"r\",stdin);\n#endif\n    Solve();\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n#include <vector>\n#include <string>\n#include <cmath>\nusing namespace std;\ntypedef long long ll;\ntypedef pair<int, int> pii;\nconst int mod = 1000000007;\n\nint main() {\n    ios::sync_with_stdio(false);\n    int n, a[100005] = {}, b[100005] = {};\n    ll z = 0, y = 1ll * mod * mod, x = 0, d[100005] = {};\n    char c = '+';\n    cin >> n;\n    for (int i = 1; i <= n; i++) {\n        if (i > 1) cin >> c;\n        if (c == '+') b[i] = 1;\n        else b[i] = -1;\n        cin >> a[i];\n        z += a[i];\n    }\n    for (int i = 1; i <= n; i++) if (b[i] == -1) {\n        d[i] = a[i];\n        for (int j = i + 1; j <= n && b[j] == 1; j++) d[i] += a[j];\n    }\n    for (int i = 1; i <= n; i++) if (b[i] == -1) {\n        y = min(y, x + d[i]);\n        x += a[i];\n    }\n    cout << z - y - y;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <sstream>\n#include <string>\n#include <vector>\n#include <stack>\n#include <queue>\n#include <set>\n#include <map>\n#include <numeric>\n#include <algorithm>\n#include <cstdio>\n#include <cstdlib>\n#include <cstring>\n#include <cctype>\n#include <cmath>\n#include <cassert>\n#include <cstdarg>\n#include <sys/time.h>\n#include <fstream>\n//#include \"cout.h\"\n\nusing namespace std;\n\n#define SZ(x) ((int)x.size())\n#define MSET(x,a) memset(x, a, (int)sizeof(x))\n#define PB push_back\n#define VI vector < int >\n#define PII pair < int, int >\n#define LL long long\n#define FOR(i,a,b) for (int i = (a); i < (b); i++)\n#define REP(i,n) FOR(i,0,n)\n#define ALL(v) (v).begin(), (v).end()\n#define FIT(it,v) for (__typeof((v).begin()) it = (v).begin(); it != (v).end(); it++)\n#define OUT(A) cout << #A << \" = \"<< (A) << endl\n#define OUT2(A, B) cout << \"(\" << #A << \", \" << #B << \") = (\" << (A) << \", \"<< (B) << \")\" << endl\ntemplate<class T> void chmin(T &t, T f) { if (t > f) t = f; } \ntemplate<class T> void chmax(T &t, T f) { if (t < f) t = f; } \n\n#define present(c, e) ((c).find((e)) != (c).end())\n#define cpresent(c, e) (find(all(c), (e)) != (c).end())\n\nint n;\nLL a[100010];\nchar op[100010];\nLL dp[100010][3];\n\nvoid init() {\n}\n\nvoid input() {\n\tcin >> n;\n\tREP(i, n) {\n\t\tcin >> a[i];\n\t\tif (i < n-1) cin >> op[i+1];\n\t}\n}\n\nvoid solve() {\n\tREP(i, 100010) REP(j, 3) dp[i][j] = -1e15;\n\tdp[0][0] = a[0];\n\tFOR(i, 1, n){\n\t\tif(op[i] == '+'){\n\t\t\tdp[i][0] = max(\n\t\t\t\tdp[i-1][0]+a[i], \n\t\t\t\tdp[i-1][1]+a[i]);\n\t\t\tdp[i][1] = dp[i-1][1]-a[i];\n\t\t\tdp[i][2] = dp[i-1][2]+a[i];\n\t\t}\n\t\telse{\n\t\t\tdp[i][1] = dp[i-1][0]-a[i];\n\t\t\tdp[i][2] = max({\n\t\t\t\tdp[i-1][1]+a[i], \n\t\t\t\tdp[i-1][2]+a[i]\n\t\t\t\t});\n\t\t}\n\t}\n\tcout << max({dp[n-1][0], dp[n-1][1], dp[n-1][2]}) << endl;\n}\n\nint main() {\n\tinit();\n    input();\n    solve();\n\treturn 0;\n}\n\n\n\n\n\n\n"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<algorithm>\nusing namespace std;\nconst int MAXN=int(1e5+5);\ntypedef long long LL;\n#define INF LL(1e15)\nLL s1,s2,as,n;\nLL sz[MAXN],fh[MAXN];\nchar c[5];\nint main()\n{\n\tscanf(\"%lld\",&n);\n\tscanf(\"%lld\",&as);\n\tgetchar();\n\tfor(LL i=1;i<=n-1;i++) {\n\t\tscanf(\"%s\",c);\n\t\tscanf(\"%d\",&sz[i]);\n\t\tfh[i]=c[0];\n\t}\n\ts1=s2=-INF;\n\tfor(LL i=1;i<=n-1;i++) {\n\t\tif(fh[i]=='-') {\n\t\t\tas-=sz[i];\n\t\t\ts2-=sz[i];\n\t\t\ts1+=sz[i];\n\t\t\ts2=max(s1,s2);\n\t\t\ts1=max(as,s1);\n\t\t\tas=max(s1,s2);\n\t\t}\n\t\telse {\n\t\t\tas+=sz[i];\n\t\t\ts2+=sz[i];\n\t\t\ts1-=sz[i];\n\t\t\ts1=max(s1,s2);\n\t\t\tas=max(s1,as);\n\t\t}\n\t}\n\tprintf(\"%lld\",as); \n}\n/*\n5\n7 - 8 + 9 - 10 - 2*/"
  },
  {
    "language": "C++",
    "code": "//Created Time:2019年12月02日 星期一 21时16分28秒\n#include <iostream>\n#include <cstdio>\n#include <algorithm>\n#include <cstring>\n#define N 100005\n\nusing namespace std;\n\nlong long ans;\nint a[N][2];\nlong long sum1[N], sum2[N];\n\nint main(){\n\tint n; scanf(\"%d\", &n);\n\tscanf(\"%d\", &a[1][0]); sum1[1] = sum2[1] = a[1][0];\n\tfor(int i = 1; i < n; ++i){\n\t\tint x = 0; bool flag = false; char ch = getchar();\n\t\tfor(; !isdigit(ch); ch = getchar()) flag |= (ch == '-');\n\t\tfor(; isdigit(ch); ch = getchar()) x = x * 10 + (ch ^ 48);\n\t\ta[i + 1][0] = x; a[i + 1][1] = flag; \n\t\tsum1[i + 1] = sum1[i] + (flag ? -x : x);\n\t\tsum2[i + 1] = sum2[i] + x;\n\t}\n\tans = sum1[n];\n\tfor(int i = 1; i <= n; ++i)\n\t\tif(a[i][1]){\n\t\t\tint pos = i + 1; long long tmp = 0;\n\t\t\twhile(!a[pos][1] && pos <= n) tmp += a[pos++][0];\n\t\t\tans = max(ans, sum1[i] - tmp + sum2[n] - sum2[pos - 1]);\n\t\t\ti = pos - 1;\n\t\t}\n\tcout << ans << endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstdio>\n#include <cstdlib>\n#include <cstring>\n#include <algorithm>\n#include <vector>\n#include <queue>\n#include <stack>\n#include <cmath>\n\nusing namespace std;\n\nconst int MAXN = 100000 + 1000;\nconst long long INF = 0x1f1f1f1f1f1f1f1fll;\n\nint n, cur = 0;\nlong long f[2][3];\n\nvoid update(char op, int val)\n{\n\tcur ^= 1;\n\n\tf[cur][0] = f[cur ^ 1][0] + (op == '-' ? -1 : 1) * val;\n\tf[cur][1] = f[cur ^ 1][1] - (op == '-' ? -1 : 1) * val;\n\tf[cur][2] = f[cur ^ 1][2] + (op == '-' ? -1 : 1) * val;\n\n\tif(op == '-')\n\t{\n\t\tf[cur][1] = max(f[cur][1], f[cur ^ 1][0] - val);\n\t\tf[cur][2] = max(f[cur][2], f[cur ^ 1][1] + val);\n\t}\n\n\tf[cur][0] = max(f[cur][0], f[cur][1]);\n\tf[cur][0] = max(f[cur][0], f[cur][2]);\n\tf[cur][1] = max(f[cur][1], f[cur][2]);\n\n\t// cerr << f[cur][0] << ' ' << f[cur][1] << ' ' << f[cur][2] << endl;\n}\n\nint main()\n{\n\tios::sync_with_stdio(false);\n\t// freopen(\"1.in\", \"r\", stdin);\n\t// freopen(\"1.out\", \"w\", stdout);\n\n\tcin >> n;\n\n\tf[cur][0] = 0;\n\tf[cur][1] = f[cur][2] = -INF;\n\n\tchar op[5] = {};\n\tint val;\n\n\tcin >> val;\n\tupdate('+', val);\n\tfor(int i = 2; i <= n; i++)\n\t{\n\t\tcin >> op >> val;\n\t\tupdate(op[0], val);\n\t}\n\tlong long ans = f[cur][0];\n\tcout << ans << endl;\n\n\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n#define LL long long\nconst int N = 200000;\nLL ai[N], bi[N], all, ans;\nstring opt;\nint n, m;\nint main()\n{\n    cin >> n;\n    for (int i = 1; i <= n; ++ i)\n    {\n        int a;\n        if (i == 1) opt = \"+\"; else cin >> opt;\n        cin >> a; all += a;\n        if (opt == \"-\") ai[++ m] = a;\n        else bi[m] += a;\n    }\n    for (int i = 1; i <= m; ++ i)\n    {\n        all -= (ai[i] + bi[i]);\n        ans = max(ans, all - ai[i] - bi[i]);\n        all += (-ai[i] + bi[i]);\n    }\n    cout << ans << endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n#define X first\n#define Y second\ntypedef long long ll;\ntypedef pair<int,int> P;\nconst int MAXN=1e5+10;\nchar op[MAXN];\nint n,dat[MAXN],nxt[MAXN],fst;\nll suf[MAXN],cur,res=-1ll<<60;\n\nint main()\n{\n\tscanf(\"%d%d\",&n,&fst);\n\tfor(int i=1;i<n;i++)\n\t\tscanf(\" %c%d\",&op[i],&dat[i]);\n\tcur=n;\n\tfor(int i=n-1;i;i--)\n\t{\n\t\tsuf[i]=suf[i+1]+dat[i];\n\t\tif(op[i]=='-') nxt[i]=cur,cur=i;\n\t}\n\tcur=0;\n\tfor(int i=1;i<n;i++)\n\t\tif(op[i]=='-') \n\t\t\tres=max(res,cur-suf[i]+2*suf[nxt[i]]),cur-=dat[i];\n\t\telse cur+=dat[i];\n\tres=max(res,cur);\n\tprintf(\"%lld\",res+fst);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\ntypedef int int_t;\n#define int long long\n\nconst int maxn=1e5+5;\nconst int INF=0x3f3f3f3f3f3f3f3fll;\n\nint F[maxn][4];\nint A[maxn],N;\nint op[maxn];\n\nint_t main(){\n\tscanf(\"%lld\",&N);\n\tfor(int i=1;i<=N;i++){\n\t\tint bj=1,x;\n\t\tif(i>1){\n\t\t\tchar buf[10];scanf(\"%s\",buf);\n\t\t\tbj=buf[0]=='+'?+1:-1;\n\t\t}\n\t\tscanf(\"%lld\",&x);A[i]=bj*x;op[i]=bj;\n\t}\n\tA[++N]=0;F[0][1]=-INF;F[0][2]=-INF;\n\tfor(int i=1;i<=N;i++){\n\t\tF[i][0]=max({F[i-1][0]+A[i],F[i-1][1]+A[i],F[i-1][2]+A[i]});\n\t\tF[i][1]=max(F[i-1][1]-A[i],F[i-1][2]-A[i]);\n\t\tF[i][2]=F[i-1][2]+A[i];\n\t\tif(op[i]<0){\n\t\t\tF[i][1]=max(F[i][1],F[i-1][0]+A[i]);\n\t\t\tF[i][2]=max(F[i][2],F[i-1][1]-A[i]);\n\t\t}\n\t}\n\tcout<<F[N][0]<<'\\n';\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#define STOPIT\n#include <bits/stdc++.h>\n#define loop(n) for (int ngtkana_is_a_genius = 0; ngtkana_is_a_genius < int(n); ngtkana_is_a_genius++)\n#define rep(i, begin, end) for (int i = int(begin); (i) < int(end); i++)\n#define all(v) v.begin(), v.end()\n#define rand(l, r) std::uniform_int_distribution<>(l, r)(mt)\nusing lint = long long;\nauto mt = std::mt19937_64(std::random_device{}());\nauto cmn = [](auto& a, auto b){ if (a > b) {a = b; return true;} return false; };\nauto cmx = [](auto& a, auto b){ if (a < b) {a = b; return true;} return false; };\nvoid debug_impl() { std::cerr << std::endl; }\ntemplate <typename Head, typename... Tail>\nvoid debug_impl(Head head, Tail... tail) { std::cerr << \" \" << head; debug_impl(tail...); }\n#ifndef STOPIT\n#define debug(...)\\\n  do {\\\n    std::cerr << std::boolalpha << \"[\" << #__VA_ARGS__ << \"]:\";\\\n    debug_impl(__VA_ARGS__);\\\n    std::cerr << std::noboolalpha;\\\n  } while (false)\n#else\n#define debug(...) 0;\n#endif\n\ntemplate < typename Container, typename Value = typename Container::value_type, std::enable_if_t<!std::is_same< Container, std::string >::value, std::nullptr_t> = nullptr>\nstd::istream& operator>> (std::istream& is, Container& v)\n  { for (auto & x : v) { is >> x; } return is; }\n\ntemplate < typename Container, typename Value = typename Container::value_type, std::enable_if_t<!std::is_same< Container, std::string >::value, std::nullptr_t> = nullptr >\nstd::ostream& operator<< (std::ostream& os, Container const& v) {\n os << \"{\";\n  for (auto it = v.begin(); it != v.end(); it++)\n    {os << (it != v.begin() ? \",\" : \"\") << *it;}\n  return os << \"}\";\n}\n\ntemplate < template < typename ... > class Tuple,  typename... Args, std::size_t ... Inds, std::size_t = std::tuple_size< Tuple < Args ... > >::value >\nstd::istream& tuple_input_impl(std::istream& os, Tuple<Args...>& tuple, std::integer_sequence<std::size_t, Inds...>)\n  { (void)std::initializer_list<int>{((void)(os >> std::get< Inds >(tuple)), 0)...}; return os; }\ntemplate < template < typename ... > class Tuple,  typename... Args, std::size_t = std::tuple_size< Tuple < Args ... > >::value >\nstd::istream& operator>> (std::istream& os, Tuple<Args...>& tuple)\n  { return tuple_input_impl(os, tuple, std::index_sequence_for<Args...>()); }\n\ntemplate < template < typename ... > class Tuple,  typename... Args, std::size_t ... Inds, std::size_t = std::tuple_size< Tuple < Args ... > >::value >\nstd::ostream& tuple_output_impl(std::ostream& os, const Tuple<Args...>& tuple, std::integer_sequence<std::size_t, Inds...>)\n  { os << \"(\"; (void)std::initializer_list<int>{((void)(os << (Inds > 0 ? \",\" : \"\") << std::get< Inds >(tuple)), 0)...}; return os << \")\"; }\ntemplate < template < typename ... > class Tuple,  typename... Args, std::size_t = std::tuple_size< Tuple < Args ... > >::value >\nstd::ostream& operator<< (std::ostream& os, const Tuple<Args...>& tuple)\n { return tuple_output_impl(os, tuple, std::index_sequence_for<Args...>()); }\n\nint main() {\n  std::cin.tie(0); std::cin.sync_with_stdio(false);\n  int n; std::cin >> n;\n  std::vector< std::pair< int, lint > > data(n);\n  lint all_positive = 0;\n  rep(i,0,n) {\n    char c = '+';\n    if (0 < i) std::cin >> c;\n    lint x; std::cin >> x;\n    all_positive += x;\n    data.at(i) = {(c == '+' ? +1 : -1), x};\n  }\n  debug(data);\n  lint ans = 0;\n  rep(i,0,n) {\n    int s; lint x; std::tie(s,x) = data.at(i);\n    if (s < 0) x = -x;\n    ans += x;\n  }\n  debug(all_positive, ans);\n\n  lint now = 1e17;\n  lint prv = 0;\n  lint fault = 0;\n  for (auto&& pair : data) {\n    int s; lint x; std::tie(s,x) = pair;\n    if (s < 0) {\n      lint tmp = all_positive - 2 * now - 2 * fault;\n      debug(all_positive, now, fault, tmp);\n      now = 0;\n      cmx(ans, tmp);\n      fault += prv;\n      prv = x;\n    }\n    now += x;\n  }\n  std::cout << ans << std::endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\n#define DEBUG(x) cerr<<#x<<\": \"<<x<<endl;\n#define DEBUG_VEC(v) cerr<<#v<<\":\";for(int i=0;i<v.size();i++) cerr<<\" \"<<v[i]; cerr<<endl\n\ntypedef long long ll;\n#define vi vector<int>\n#define vl vector<ll>\n#define vii vector< vector<int> >\n#define vll vector< vector<ll> >\n#define vs vector<string>\n#define pii pair<int,int>\n#define pis pair<int,string>\n#define psi pair<string,int>\n#define pll pair<ll,ll>\ntemplate<class S, class T> pair<S, T> operator+(const pair<S, T> &s, const pair<S, T> &t) { return pair<S, T>(s.first + t.first, s.second + t.second); }\ntemplate<class S, class T> pair<S, T> operator-(const pair<S, T> &s, const pair<S, T> &t) { return pair<S, T>(s.first - t.first, s.second - t.second); }\ntemplate<class S, class T> ostream& operator<<(ostream& os, pair<S, T> p) { os << \"(\" << p.first << \", \" << p.second << \")\"; return os; }\n#define X first\n#define Y second\n#define rep(i,n) for(int i=0;i<(n);i++)\n#define rep1(i,n) for(int i=1;i<=(n);i++)\n#define rrep(i,n) for(int i=(n)-1;i>=0;i--)\n#define rrep1(i,n) for(int i=(n);i>0;i--)\n#define REP(i,a,b) for(int i=a;i<b;i++)\n#define in(x, a, b) (a <= x && x < b)\n#define all(c) c.begin(),c.end()\ntemplate<class T> bool chmax(T &a, const T &b) { if (a<b) { a = b; return 1; } return 0; }\ntemplate<class T> bool chmin(T &a, const T &b) { if (a>b) { a = b; return 1; } return 0; }\n#define UNIQUE(v) v.erase(std::unique(v.begin(), v.end()), v.end());\nconst ll inf = 1000000001;\nconst ll INF = 1e18;\nconst ll MOD = 1000000007;\n//const ll MOD = 998244353;\nconst double pi = 3.14159265358979323846;\n#define Sp(p) cout<<setprecision(15)<< fixed<<p;\nint dx[4] = { 1,0, -1,0 }, dy[4] = { 0,1,0,-1 };\nint dx2[8] = { 1,1,0,-1,-1,-1,0,1 }, dy2[8] = { 0,1,1,1,0,-1,-1,-1 };\n#define fio() cin.tie(0); ios::sync_with_stdio(false);\n//#define mp make_pair\n\n/*\nint main() {\n  int n;\n  cin >> n;\n  if (n == 1) {\n    cout << 0 << endl;\n    return 0;\n  }\n  vl a(n);\n  rep (i, n) {\n    cin >> a[i];\n  }\n  vl num(n);\n  num[0] = 0;\n  ll ans = 0;\n  ll sum = 0;\n  rep1 (i, n - 1) {\n    if (a[i - 1] > a[i]) {\n      ll temp = a[i];\n      while (a[i - 1] > temp) {\n        num[i]++;\n        temp *= 4;\n      }\n      num[i] += num[i - 1];\n      ans += num[i] * 2;\n    }\n    else {\n      ll temp = a[i - 1];\n      num[i] = num[i - 1];\n      while (4*temp <= a[i]) {\n        num[i]--;\n        temp *= 4;\n      }\n      ans += num[i] * 2;\n    }\n    sum += num[i];\n  }\n  vl s(n);\n  stack<int> st;\n  rrep (i, n) {\n    int cnt = 1;\n    while (!st.empty() && num[st.top()] > num[i]) {\n      cnt++;\n      st.pop();\n    }\n    if (st.empty()) {\n      s[i] = (n - i)*num[i];\n    }\n    else {\n      s[i] = (st.top() - i) * num[i] + num[st.top()];\n    }\n    st.push(i);\n  }\n   DEBUG_VEC(num);\n   DEBUG_VEC(s);\n   DEBUG(ans);\n  ll right = ans, left = 0;\n  ll pre = -INF;\n  rep (i, n) {\n    int cnt = 0;\n    ll temp = a[i];\n    temp = temp * -2;\n    left++;\n    while (temp < pre) {\n      pre *= 4;\n      cnt += 2;\n    }\n    left += cnt*i;\n    if (i == n - 1) {\n      right = 0;\n    }\n    else {\n      right = (sum - num[i] - s[i + 1]) * 2;\n    }\n    ans = min(ans, left + right);\n    sum -= num[i];\n    pre = a[i] * -2;\n  }\n  cout << ans << endl;\n}\n//*/\n\nint main() {\n  int n;\n  cin >> n;\n  vl a(n);\n  string s;\n  cin >> a[0];\n  rep1 (i, n - 1) {\n    char c;\n    cin >> c;\n    s.push_back(c);\n    cin >> a[i];\n  }\n  int m = 100;\n  vll dp(n, vl(m, -INF));\n  dp[0][0] = a[0];\n  rep1 (i, n - 1) {\n    char op = s[i - 1];\n    rep (j, m) {\n      int bai;\n      if (j % 2 == 0) {\n        bai = 1;\n      }\n      else {\n        bai = -1;\n      }\n      if (op == '+') {\n        chmax(dp[i][j], dp[i - 1][j] + bai*a[i]);\n        if (j != 0) {\n          chmax(dp[i][j - 1], dp[i - 1][j] - bai*a[i]);\n        }\n      }\n      else {\n        chmax(dp[i][j], dp[i - 1][j] - bai*a[i]);\n        if (j != 0) {\n          chmax(dp[i][j - 1], dp[i - 1][j] + bai*a[i]);\n        }\n        if (j != m - 1) {\n          chmax(dp[i][j + 1], dp[i - 1][j] - bai*a[i]);\n        }\n      }\n    }\n  }\n  ll ans = -INF;\n  rep (j, m) {\n    chmax(ans, dp[n - 1][j]);\n  }\n  cout << ans << endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<algorithm>\nusing namespace std;\nint n,i,k;char c;long long f0,f1,f2;\nint main(){\n\tscanf(\"%d%d\",&n,&f0);\n\tfor (f1=f2=-1e18,n--;n--;){\n\t\tscanf(\" %c%d\",&c,&k);\n\t\tif (c=='-') k=-k;\n\t\tlong long v0=f0+k,v1=f1-k,v2=f2+k;\n\t\tf0=max(v0,max(v1,v2));\n\t\tif (c=='+') f1=max(v1,v2),f2=v2;\n\t\telse f1=max(v0,max(v1,v2)),f2=max(v1,v2);\n\t}\n\tprintf(\"%lld\",f0);\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define del(a,i) memset(a,i,sizeof(a))\n#define ll long long\n#define inl inline\n#define il inl void\n#define it inl int\n#define ill inl ll\n#define re register\n#define ri re int\n#define rl re ll\n#define mid ((l+r)>>1)\n#define lowbit(x) (x&(-x))\n#define INF 0x3f3f3f3f\nusing namespace std;\ntemplate<class T>il read(T &x){\n\tint f=1;char k=getchar();x=0;\n\tfor(;k>'9'||k<'0';k=getchar()) if(k=='-') f=-1;\n\tfor(;k>='0'&&k<='9';k=getchar()) x=(x<<3)+(x<<1)+k-'0';\n\tx*=f;\n}\ntemplate<class T>il _print(T x){\n\tif(x/10) _print(x/10);\n\tputchar(x%10+'0');\n}\ntemplate<class T>il print(T x){\n\tif(x<0) putchar('-'),x=-x;\n\t_print(x);\n}\nll mul(ll a,ll b,ll mod){long double c=1.;return (a*b-(ll)(c*a*b/mod)*mod)%mod;}\nit qpow(int x,int m,int mod){\n\tint res=1,bas=x;\n\twhile(m){\n\t\tif(m&1) res=(1ll*res*bas)%mod;\n\t\tbas=(1ll*bas*bas)%mod,m>>=1;\n\t}\n\treturn res;\n}\nconst int N = 1e5+5;\nint n,val[N];\nll ans,abs_sum[N],sum[N];\nchar op[2];\nvector<int> vec;\nint main(){\n//\tfreopen(\".in\",\"r\",stdin);\n//\tfreopen(\".out\",\"w\",stdout);\n\tread(n),read(val[1]),sum[1]=val[1];\n\tfor(ri i=2;i<=n;++i){\n\t\tscanf(\"%s\",op),read(val[i]);\n\t\tif(op[0]=='-') vec.push_back(i),sum[i]=sum[i-1]-val[i];\n\t\telse sum[i]=sum[i-1]+val[i];\n\t}\n\tvec.push_back(n+1);\n\tfor(ri i=1;i<=n;++i) abs_sum[i]=abs_sum[i-1]+val[i];\n\tif(vec.size()==1) return print(sum[n]),0;\n\tans=LLONG_MIN;\n\tfor(ri i=0;i<(int)vec.size()-1;++i){\n\t\tint x=vec[i],y=vec[i+1];\n\t\tans=max(ans,sum[x-1]-(abs_sum[y-1]-abs_sum[x-1])+(abs_sum[n]-abs_sum[y-1]));\n\t}\n\tprint(ans);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\n#define FOR(i,a,b) for(int i=(a);i<(b);i++)\n#define REP(i,n) FOR(i,0,n)\n#define ALL(v) (v).begin(),(v).end()\n\ntemplate<typename A, typename B> inline bool chmax(A &a, B b) { if (a<b) { a=b; return 1; } return 0; }\ntemplate<typename A, typename B> inline bool chmin(A &a, B b) { if (a>b) { a=b; return 1; } return 0; }\n\ntypedef long long ll;\ntypedef pair<int, int> pii;\ntypedef pair<ll, ll> pll;\ntypedef pair<int, pii> P;\n\nconst ll INF = 1ll<<60;\nconst ll MOD = 1000000007;\nconst double EPS  = 1e-10;\n\nint n;\nll a[112345];\nstring op[112345];\nll dp[112345][3];\n\nint main() {\n\tcin >> n;\n\tcin >> a[0]; op[0] = \"+\";\n\tREP(i, n - 1) cin >> op[i + 1] >> a[i + 1];\n\t\n\tfill(dp[0], dp[n + 1], -INF);\n\tdp[0][0] = 0;\n\t\n\tREP(i, n) {\n\t\tREP(j, 3) {\n\t\t\tif (dp[i][j] == -INF) continue;\n\t\t\t\n\t\t\tREP(k, 3) {\n\t\t\t\tint nextj = j - k;\n\t\t\t\tif (nextj < 0) continue;\n\t\t\t\t\n\t\t\t\tif (op[i] == \"-\") {\n\t\t\t\t\tif (nextj == 2) nextj = 1;\n\t\t\t\t\telse nextj++;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tchmax(dp[i + 1][nextj], dp[i][j] + a[i] * (nextj & 1 ? -1 : 1));\n\t\t\t}\n\t\t}\n\t}\n\t\n\t\n\tll ans = -INF;\n\tREP(i, 3) chmax(ans, dp[n][i]);\n\tcout << ans << endl;\n\t\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long LL;\nint n,a[100008],t,nxt,pos[100008];\nchar op[100008];\nLL ans,tmp,suf[100008];\nint main()\n{\n\tios::sync_with_stdio(false);\n\tcin>>n>>t;\n\tfor(int i=1;i<n;++i){\n\t\tcin>>op[i]>>a[i];\n\t}\n\tnxt=n;\n\tfor(int i=n-1;i;--i){\n\t\tsuf[i]=suf[i+1]+a[i];\n\t\tif(op[i]=='-'){\n\t\t\tpos[i]=nxt;\n\t\t\tnxt=i;\n\t\t}\n\t}\n\tfor(int i=1;i<n;++i){\n\t\tif(op[i]=='-'){\n\t\t\tans=max(ans,tmp-(suf[i]-suf[pos[i]])+suf[pos[i]]);\n\t\t\ttmp-=a[i];\n\t\t}\n\t\telse{\n\t\t\ttmp+=a[i];\n\t\t\tif(i==n-1)\tans=max(ans,tmp);\n\t\t}\n\t}\n\tcout<<ans+t;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <stdio.h>\n#include <math.h>\n#include <string.h>\n#include <time.h>\n#include <stdlib.h>\n#include <string>\n#include <bitset>\n#include <vector>\n#include <set>\n#include <map>\n#include <queue>\n#include <algorithm>\n#include <sstream>\n#include <stack>\n#include <iomanip>\nusing namespace std;\n#define pb push_back\n#define mp make_pair\ntypedef pair<int,int> pii;\ntypedef long long ll;\ntypedef double ld;\ntypedef vector<int> vi;\n#define fi first\n#define se second\n#define fe first\n#define FO(x) {freopen(#x\".in\",\"r\",stdin);freopen(#x\".out\",\"w\",stdout);}\n#define Edg int M=0,fst[SZ],vb[SZ],nxt[SZ];void ad_de(int a,int b){++M;nxt[M]=fst[a];fst[a]=M;vb[M]=b;}void adde(int a,int b){ad_de(a,b);ad_de(b,a);}\n#define Edgc int M=0,fst[SZ],vb[SZ],nxt[SZ],vc[SZ];void ad_de(int a,int b,int c){++M;nxt[M]=fst[a];fst[a]=M;vb[M]=b;vc[M]=c;}void adde(int a,int b,int c){ad_de(a,b,c);ad_de(b,a,c);}\n#define es(x,e) (int e=fst[x];e;e=nxt[e])\n#define esb(x,e,b) (int e=fst[x],b=vb[e];e;e=nxt[e],b=vb[e])\n#define SZ 666666\n#define S 4\nint n,a[SZ],f[S+1]; char o[SZ];\nint main()\n{\n\tmemset(f,-127/3,sizeof f);\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<n;++i)\n\t\tscanf(\"%d%s\",a+i,o+i+1);\n\tscanf(\"%d\",a+n);\n\tf[0]=0;\n\tfor(int i=n;i>=2;--i)\n\t{\n\t\tfor(int j=1;j<=S;++j)\n\t\t\tf[j]=max(f[j],f[j-1]);\n\t\tif(o[i]=='-')\n\t\t{\n\t\t\tfor(int j=1;j<=S;++j) f[j-1]=max(f[j-1],f[j]);\n\t\t\tfor(int j=0;j<=S;++j) f[j]-=(j&1)?(-a[i]):a[i];\n\t\t}\n\t\telse\n\t\t\tfor(int j=0;j<=S;++j) f[j]+=(j&1)?(-a[i]):a[i];\n\t}\n\tprintf(\"%d\\n\",f[0]+a[1]);\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\nchar *TT,*tmo,but[(1<<15)+2];\n#define getc() ((TT==tmo&&(tmo=((TT=but)+fread(but,1,1<<15,stdin)),TT==tmo))?-1:*TT++)\ninline int rd(){\n  int x,c,f=1;while(!isdigit(c=getc()))f&=c!='-';x=c-'0';\n  while(isdigit(c=getc()))x=x*10+c-'0';return f?x:-x;\n}\ntypedef long long L;\nconst int N=1e5+11;\nint n,a[N],c[N];\nL b[N];\nint main(){\n#ifdef flukehn\n\tfreopen(\"g.in\",\"r\",stdin);\n#endif\n\tint i;\n\tn=rd();\n\tfor(i=1;i<=n;++i)\n\t\ta[i]=rd();\n\tc[n+1]=n+1;\n\tfor(i=n;i;--i){\n\t\tb[i]=b[i+1]+abs(a[i]);\n\t\tc[i]=a[i+1]<0?i+1:c[i+1];\n\t}\n\tL an=-LONG_LONG_MAX,tm=0;\n\tfor(i=1;i<=n;++i){\n\t\ttm+=a[i];\n\t\tif(a[i]<0)\n\t\t\tan=max(an,tm+2*b[c[i]]-b[i+1]);\n\t}\n\tcout<<an;\n}"
  },
  {
    "language": "C++",
    "code": "/*\nThough leaves are many , the root is one.\nThrough all the lying days of my youth\nI swayed my leaves and flowers in the sun.\nNow I may wither into the truth.\n\t  \t  \t- William Butler Yeats\n*/\n//#pragma GCC optimize(\"Ofast,no-stack-protector\")\n//#pragma GCC target(\"sse,sse2,sse3,ssse3,sse4,popcnt,abm,mmx\")\n//#pragma GCC target(\"avx,tune=native\")\n#include<bits/stdc++.h>\n#define int long long\n#pragma comment(\" -Wl,--stack=1024000000\")\n//#include<ext/pb_ds/assoc_container.hpp>\nusing namespace std;\n//using namespace __gnu_pbds;\nconst int inf=0x3f3f3f3f;\nconst double eps=1e-6;\nconst int mod=1000000007;\ntypedef long long ll;\n#ifndef LOCAL\n#define cerr if(0)cout\n#define eprintf(...) 0\n#else\n#define eprintf(...) fprintf(stderr, __VA_ARGS__)\n#endif\ninline string getstr(string &s,int l,int r){string ret=\"\";for(int i=l;i<=r;i++)ret.push_back(s[i]);return ret;}\nint modpow(int x,int y,int md=mod){if(y==0)return 1;int ret=modpow(x,y>>1,md);ret=(ll)ret*ret%md;if(y&1)ret=(ll)ret*x%md;return ret;}\nint n,ans;\nint a[100005];\nchar c[100005];\nbool used[100005];\nint id[100005];\nsigned main(){\n//\tfreopen(\"data.txt\",\"r\",stdin);\n\tcin>>n;cin>>a[1]; \n\tfor(int i=2;i<=n;i++){\n\t\tcin>>c[i]>>a[i];\n\t}\n\tvector<int>vec;\n\tfor(int i=1;i<=n;i++){\n\t\tif(used[i])continue;\n\t\tint now=i+1;\n\t\twhile(now<=n&&c[now]=='+'){\n\t\t\tnow++;\n\t\t}\n\t\tint sum=0;\n\t\tfor(int j=i;j<now;j++){\n\t\t\tused[j]=1;\n\t\t\tsum+=a[j];\n\t\t\tid[j]=vec.size();\n\t\t}\n\t\tvec.push_back(sum);\n\t}\n\tif(vec.size()==1){\n\t\tcout<<vec[0]<<endl;\n\t}else{\n\t\tint sum=0;\n\t\tfor(int i=1;i<=n;i++)sum+=a[i];\n\t\tfor(int i=2;i<=n;i++){\n\t\t\tif(c[i]=='-'){\n//\t\t\t\tcerr<<i<<\" \"<<sum-vec[id[i]]*2ll<<endl;\n\t\t\t\tans=max(ans,sum-vec[id[i]]*2ll);\n\t\t\t\tsum-=a[i]*2ll;\n\t\t\t}\n\t\t}\n\t\tcout<<ans<<endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstdio>\n#include<cstdlib>\n#define N 100010\n#define ll long long\nusing namespace std;\nll f[3];\nvoid read(ll &x)\n{\n\tx=0;\n\tint ch=0,flag=1;\n\tfor(;!isdigit(ch);ch=getchar())\n\tif(ch=='-') flag=-flag;\n\tfor(;isdigit(ch);ch=getchar())\n\tx=x*10+ch-'0';\n\tx*=flag;\n}\nint main()\n{\n\tint n;\n\tscanf(\"%d\",&n);\n\tf[0]=0,f[1]=f[2]=-10000000000000ll;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tll x;\n\t\tread(x);\n\t\tf[0]+=x;\n\t\tf[1]-=x;\n\t\tf[2]+=x;\n\t\tif(x<0)\n\t\t{\n\t\t\tf[2]=max(f[2],f[1]);\n\t\t\tf[1]=max(f[1],f[0]);\n\t\t}\n\t\tf[0]=max(f[0],f[1]);\n\t\tf[1]=max(f[1],f[2]);\n\t}\n\tprintf(\"%lld\\n\",f[0]);\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#if 0\n2019.09.08\n\n首先括号只有放在减号右边才有影响，这里规定只能有这样的括号。\n朴素 DP 设 f[i][j] 表示前 i 个数构成式子中有 j 个左括号未匹配的答案。\n转移枚举 f[i - 1][k] ，考虑在第 i 数后面放几个右括号，如果是减号还能加一个左括号。\n这样做是 O(n^2) 的，但事实上 f 的第二维只有 0/1/2 可能最终贡献到答案，于是 O(n) 。\n#endif\n#include <cstdio>\n#include <algorithm>\n#define debug(...) fprintf(stderr, __VA_ARGS__)\n\ntypedef long long lolong;\n\ninline int input() { int x; scanf(\"%d\", &x); return x; }\n\nconst int maxn = 200005, maxm = 5;\nint a[maxn], b[maxn];\nlolong f[maxn][maxm];\n\nint main() {\n\tint n = input();\n\n\ta[1] = '+';\n\tb[1] = input();\n\tfor(int i = 2; i <= n; i ++) {\n\t\ta[i] = getchar();\n\t\twhile(a[i] != '-' and a[i] != '+')\n\t\t\ta[i] = getchar();\n\t\tb[i] = input();\n\t\tif(a[i] == '-')\n\t\t\tb[i] *= -1;\n\t}\n\ta[n + 1] = '-';\n\tb[n + 1] = 0;\n\n\tint m = 2;\n\tfor(int j = 1; j <= m; j ++)\n\t\tf[0][j] = - 1000000000000000000;\n\n\tfor(int i = 1; i <= n; i ++) {\n\t\tfor(int j = 0; j <= m; j ++) {\n\t\t\tf[i][j] = - 1000000000000000000;\n\t\t\tfor(int k = j; k <= m; k ++)\n\t\t\t\tf[i][j] = std::max(f[i][j],\n\t\t\t\t\t\tf[i - 1][k] + (k & 1 ? - b[i] : b[i]));\n\t\t\tif(a[i] == '-' and j)\n\t\t\t\tf[i][j] = std::max(f[i][j],\n\t\t\t\t\t\tf[i - 1][j - 1] + (j & 1 ? b[i] : - b[i]));\n\t\t\t/* if(f[i][j] >= - 100) */\n\t\t\t\t/* debug(\" %lld\", f[i][j]); */\n\t\t\t/* else */\n\t\t\t\t/* debug(\" @\"); */\n\t\t}\n\t\t/* debug(\"\\n\"); */\n\t}\n\n\tprintf(\"%lld\\n\", f[n][0]);\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define fi first\n#define se second\n#define bug cout<<\"--------------\"<<endl\nusing namespace std;\ntypedef long long ll;\nconst double PI=acos(-1.0);\nconst double eps=1e-6;\nconst ll inf=1e18;\nconst ll llf=1e18;\nconst int mod=1e9+7;\nconst int maxn=1e5+10;\nint n;\nll x;\nchar c;\nll f[maxn][3]; \nint main(){\n\tios::sync_with_stdio(false);\n\t//freopen(\"in\",\"r\",stdin);\n\tcin>>n>>x;\n\tf[1][0]=x;\n\tf[1][1]=f[1][2]=-inf;\n\tfor(int i=2;i<=n;i++){\n\t\tcin>>c>>x;\n\t\tif(c=='+'){\n\t\t\tf[i][0]=max(f[i-1][0],f[i-1][1])+x;\n\t\t\tf[i][1]=f[i-1][1]-x;\n\t\t\tf[i][2]=f[i-1][2]+x;\n\t\t}else{\n\t\t\tf[i][0]=-inf;\n\t\t\tf[i][1]=max(f[i-1][0]-x,f[i-1][1]+x);\n\t\t\tf[i][2]=max(f[i-1][1],f[i-1][2])+x;\n\t\t}\n\t}\n\tcout<<max({f[n][0],f[n][1],f[n][2]});\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\n\nusing namespace std;\n\nint const N = 1e5 + 41;\nlong long const INF = 1e18;\n\nint n, a[N];\nlong long dp[N][4];\n\n\nvoid solve(){\n\tfor(int i=0;i<N;++i){\n\t\tfor(int j=0;j<4;++j){\n\t\t\tdp[i][j] = -INF;\n\t\t}\n\t}\n\n\tdp[0][0] = 0;\n\tfor(int i=1;i<=n;++i){\n\t\tfor(int j=0;j<=2;++j){\n\t\t\tlong long sign = (j & 1 ? -1LL : 1LL);\n\t\t\tdp[i][j] = dp[i-1][j] + sign * a[i];\n\t\t}\n\t\t\n\t\tfor(int j=1;j>=0;--j){\n\t\t\tdp[i][j] = max(dp[i][j], dp[i][j+1]);\n\t\t}\n\t\tif(a[i] < 0){\n\t\t\tfor(int j=2;j>0;--j){\n\t\t\t\tlong long sign = (j & 1 ? 1LL : -1LL);\n\t\t\t\tdp[i][j] = max(dp[i][j], dp[i-1][j-1] + a[i] * sign);\n\t\t\t}\n\t\t}\n\t}\n\tprintf(\"%lld\\n\",dp[n][0]);\n}\n\nvoid read(){\n\tscanf(\"%d\",&n);\n\tscanf(\"%d\",&a[1]);\n\tfor(int i=2;i<=n;++i){\n\t\tchar s;\n\t\tscanf(\" %c %d\",&s,&a[i]);\n\t\tif(s == '-'){\n\t\t\ta[i] = -a[i];\n\t\t}\n\t}\n}\n\nvoid prepare(){\n#ifdef _DEBUG\n\tfreopen(\"input.txt\",\"r\",stdin);\n\tfreopen(\"output.txt\",\"w\",stdout);\n#endif\n}\n\nint main(){\n\tprepare();\n\tread();\n\tsolve();\n\n\n\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "//@winlere\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<algorithm>\n\nusing namespace std;  typedef long long ll;   char __buf[1<<18],*__c=__buf,*__ed=__buf;\ninline int qr(){\n\tint ret=0,f=0,c=getchar();\n\twhile(!isdigit(c)) f|=c==45,c=getchar();\n\twhile( isdigit(c)) ret=ret*10+c-48,c=getchar();\n\treturn f?-ret:ret;\n}\nconst int maxn=1e5+5;\nint data[maxn],n;\nll dp[maxn][3];\n\nint main(){\n\tmemset(dp,0xcc,sizeof dp);\n\tn=qr();\n\tfor(int t=1;t<=n;++t) data[t]=qr();\n\tdp[0][0]=0;\n\tfor(int t=1;t<=n;++t){\n\t\tif(data[t]>0){\n\t\t\tdp[t][0]=max({dp[t][0],dp[t-1][0]+data[t],dp[t-1][1]+data[t],dp[t-1][2]+data[t]});\n\t\t\tdp[t][1]=max({dp[t][1],dp[t-1][1]-data[t],dp[t-1][2]-data[t]});\n\t\t\tdp[t][2]=max({dp[t][2],dp[t-1][2]+data[t]});\n\t\t}else{\n\t\t\tdata[t]=-data[t];\n\t\t\tdp[t][0]=max({dp[t][0],dp[t-1][0]-data[t],dp[t-1][1]-data[t],dp[t-1][2]-data[t]});\n\t\t\tdp[t][1]=max({dp[t][1],dp[t-1][0]-data[t],dp[t-1][1]+data[t],dp[t-1][2]+data[t]});\n\t\t\tdp[t][2]=max({dp[t][2],dp[t-1][1]+data[t],dp[t-1][2]+data[t]});\n\t\t}\n\t}\n\tcout<<max({dp[n][0],dp[n][1],dp[n][2]})<<endl;\n\treturn 0;\n\t\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\nint main(){\n\tint n; cin >> n;\n\tvector<long long> vals(n);\n\tconst long long inf = 1ll<<60;\n\tconst int magic = 200;\n\tvector<vector<long long> > f(magic + 1, vector<long long>(n + 1, -inf));\n\tvector<char> sig(n + 1, '+');\n\tcin >> vals[0];\n\tfor(int i = 1; i < n; i++){\n\t\tcin >> sig[i] >> vals[i];\n\t}\n\tf[0][0] = 0;\n\tfor(int i = 0; i < n; i++){\n\t\tfor(int j = 0; j < magic; j++){\n\t\t\tint csig = j%2 == 0?1:-1;\n\t\t\tif(sig[i] == '-'){\n\t\t\t\tf[j][i+1] = max(f[j][i+1], f[j][i] - csig * vals[i]);\n\t\t\t\tif(j) f[j-1][i+1] = max(f[j-1][i+1], f[j][i] - csig * vals[i]);\n\t\t\t\tf[j+1][i+1] = max(f[j+1][i+1], f[j][i] - csig * vals[i]);\n\t\t\t} else {\n\t\t\t\tf[j][i+1] = max(f[j][i+1], f[j][i] + csig * vals[i]);\n\t\t\t\tif(j) f[j-1][i+1] = max(f[j-1][i+1], f[j][i] + csig * vals[i]);\n\t\t\t}\n\t\t}\n\t}\n\tcout << f[0][n] << endl;\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n#define int long long\n#define r(i,n) for(int i=0;i<n;i++)\nint a[100009],dp[100009][4];\nstring s[100009];\nmain(){\n  r(i,100009)r(j,4)dp[i][j]=-100000000000000000;\n  int ans,n;\n  cin>>n>>ans;n--;\n  r(i,n)cin>>s[i]>>a[i];\n  dp[0][0]=0;\n  for(int i=0;i<n;i++){\n    if(s[i]==\"+\"){\n      dp[i+1][0]=max(dp[i+1][0],max(dp[i][0]+a[i],max(dp[i][2]+a[i],dp[i][1]+a[i])));\n      dp[i+1][1]=max(dp[i+1][1],max(dp[i][1]-a[i],dp[i][2]-a[i]));\n      dp[i+1][2]=max(dp[i+1][2],dp[i][2]+a[i]);\n    }\n    else{\n      dp[i+1][0]=max(dp[i+1][0],max(dp[i][0]-a[i],max(dp[i][1]-a[i],dp[i][2]-a[i]))) ;\n      dp[i+1][1]=max(dp[i+1][1],max(dp[i][0]-a[i],max(dp[i][1]+a[i],dp[i][2]+a[i])));\n      dp[i+1][2]=max(dp[i+1][2],max(dp[i][2]-a[i],dp[i][1]+a[i]));\n    }\n  }\n  cout<<ans+max(dp[n][0],max(dp[n][1],dp[n][2]))<<endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define N 100005\n#define LL long long\nusing namespace std;\nint n,m; LL a[N],b[N],sum,ans; char op[N];\nint main()\n{\n\tint i,p;\n\tscanf(\"%d\",&n);\n\tfor(i=1;i<n;i++)\n\t\tscanf(\"%lld %c \",&a[i],&op[i]);\n\tscanf(\"%lld\",&a[n]);\n\tfor(i=1;i<n-1;i++)\n\t\tif(op[i]=='-'&&op[i+1]=='-') break;\n\tp=i+1,i+=2;\n\twhile(i<=n) a[p]-=a[i++];\n\tn=p,sum=a[1];\n\tfor(i=1;i<n;i++)\n\t\tif(op[i]=='-')\n\t\t\tsum-=a[i+1],b[++m]=sum,sum=0;\n\t\telse sum+=a[i+1];\n\tans+=sum+b[1];\n\tfor(i=2;i<=m;i++) ans+=abs(b[i]);\n\tcout<<ans;\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nconst int N = 100005;\nconst int M = 105;\nconst long long inf = 1e18+7;\n\n#define REP(i, n) for (int (i) = 0; (i) < (n); ++(i))\n\nint n, a[N];\nchar c;\nlong long f[N][M+1];\n\nint main() {\n\tios::sync_with_stdio(false);\n\n\tcin >> n >> a[0];\n\tfor (int i = 1; i < n; ++i) {\n\t\tcin >> c >> a[i];\n\t\tif (c == '-') a[i] *= -1;\n\t}\n\tREP(i, n+1) REP(a, M+1) {\n\t\tf[i][a] = -inf;\n\t}\n\tf[0][0] = 0;\n\tREP(i, n) REP(x, M) {\n\t\tif (f[i][x] == -inf) continue;\n\t\tlong long val = f[i][x] + (x%2?-1:+1)*a[i];\n\t\tf[i+1][x] = max(f[i+1][x], val);\n\t\tif (a[i] < 0) f[i+1][min(x+1,M)] = max(f[i+1][min(x+1,M)], val);\n\t\tif (x > 0) f[i+1][max(x-1,0)] = max(f[i+1][max(x-1,0)], val);\n\t}\n\tlong long result = -inf;\n\tREP(a, M) result = max(result, f[n][a]);\n\tcout << result << endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <algorithm>\nint N, a[100001], sign[100001], L;\nlong long f[100001];\nint main()\n{\n\tscanf(\"%d%d\", &N, a + 1);\n\tsign[1] = 1;\n\tfor (int i = 2; i <= N; i++)\n\t{\n\t\tstatic char in[3];\n\t\tscanf(\"%s\", in);\n\t\tsign[i] = in[0] == '+' ? 1 : -1;\n\t\tscanf(\"%d\", a + i);\n\t\ta[i] *= sign[i];\n\t}\n\tint L = 0;\n\tf[0] = 0;\n\tfor (int i = 1; i <= N; i++)\n\t{\n\t\tif (sign[i] == 1)\n\t\t{\n\t\t\tfor (int j = 0; j <= L; j++)\n\t\t\t\tf[j] += j & 1 ? -a[i] : a[i];\n\t\t\tfor (int j = L - 1; j >= 0; j--)\n\t\t\t\tf[j] = std::max(f[j], f[j + 1]);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tfor (int j = 0; j <= L; j++)\n\t\t\t\tf[j] += j & 1 ? -a[i] : a[i];\n\t\t\tf[++L] = -1LL << 60;\n\t\t\tfor (int j = L; j; j--)\n\t\t\t\tf[j] = std::max(f[j], f[j - 1]);\n\t\t\tfor (int j = L - 1; j >= 0; j--)\n\t\t\t\tf[j] = std::max(f[j], f[j + 1]);\n\t\t}\n\t}\n\tprintf(\"%lld\\n\", *std::max_element(f, f + L + 1));\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "// Math = ♥️\n\n#include <bits/stdc++.h>\n#include <ext/pb_ds/assoc_container.hpp>\n#include <ext/pb_ds/tree_policy.hpp>\nusing namespace __gnu_pbds;\nusing namespace std;\n\n/*-------------------------------------------------------------------------------------------------------------------------*/\n#define ll long long                  // Short form for long long\n#define ld long double                // Short form for long double\ntypedef pair<ll, ll> ii;              // Pair of long long\ntypedef vector<ll> vi;                // Vector of long long\ntypedef vector<vi> vvi;               // Vector of vector of long long\ntypedef vector<ii> vii;               // Vector of pairs\ntypedef vector<vii> vvii;             // Vector of vector of pairs\n#define pq priority_queue             // Max heap (To convert to min heap, use negative sign before every value)\n#define ff first                      // For pairs\n#define ss second                     // For pairs\n#define pb push_back                  // Pushback to vector\n#define mp make_pair                  // Makes pairs to be stored as pair\n#define all(c) (c).begin(), (c).end() // Mainly used by me in sorting\n// ordered_set adds two new functions to set - (set).find_by_order([kth element based on zero indexing]) and order_of_key()\n// order_of_key returns number of elements less that parameter. If element exists, that order is its index\n#define ordered_set tree<ll, null_type, less<ll>, rb_tree_tag, tree_order_statistics_node_update>\n/*-------------------------------------------------------------------------------------------------------------------------*/\n#define MAXN (ll)(1e5 + 5)\n\nll dp[MAXN][3];\nll n;\nvi arr;\n\nll solve(ll i, ll t)\n{\n    if (i == n)\n        return 0;\n\n    if (dp[i][t] == -1)\n    {\n        if (t == 0)\n        {\n            if (arr[i] < 0)\n                dp[i][t] = arr[i] + max(solve(i + 1, 0), solve(i + 1, 1));\n            else\n                dp[i][t] = arr[i] + solve(i + 1, 0);\n        }\n        else if (t == 1)\n        {\n            ll maxi = max(solve(i + 1, 0) + arr[i], solve(i + 1, 1) - arr[i]);\n            if (arr[i] < 0)\n                maxi = max(maxi, solve(i + 1, 2) - arr[i]);\n            dp[i][t] = maxi;\n        }\n        else\n            dp[i][t] = max(arr[i] + solve(i + 1, 2), max(-arr[i] + solve(i + 1, 1), arr[i] + solve(i + 1, 0)));\n    }\n    return dp[i][t];\n}\n\nint main(void)\n{\n    ios_base::sync_with_stdio(false);\n    cin.tie(NULL);\n\n    memset(dp, -1, sizeof(dp));\n    cin >> n;\n    arr.resize(n);\n\n    cin >> arr[0];\n\n    for (int i = 1; i < n; i++)\n    {\n        char c;\n        cin >> c >> arr[i];\n\n        if (c == '-')\n            arr[i] = -arr[i];\n    }\n\n    cout << solve(0, 0) << \"\\n\";\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n#define _MACRO(_1, _2, _3, NAME, ...) NAME\n#define _repl(i,a,b) for(int i=(int)(a);i<(int)(b);i++)\n#define _rep(i,n) _repl(i,0,n)\n#define rep(...) _MACRO(__VA_ARGS__, _repl, _rep)(__VA_ARGS__)\n#define mp make_pair\n#define pb push_back\n#define all(x) begin(x),end(x)\n#define uniq(x) sort(all(x)),(x).erase(unique(all(x)),end(x))\n#define fi first\n#define se second\n#define dbg(...) _dbg(#__VA_ARGS__, __VA_ARGS__)\nvoid _dbg(string){cerr<<endl;}\ntemplate<class H,class... T> void _dbg(string s,H h,T... t){int l=s.find(',');cerr<<s.substr(0,l)<<\" = \"<<h<<\", \";_dbg(s.substr(l+1),t...);}\ntemplate<class T,class U> ostream& operator<<(ostream &o, const pair<T,U> &p){o<<\"(\"<<p.fi<<\",\"<<p.se<<\")\";return o;}\ntemplate<class T> ostream& operator<<(ostream &o, const vector<T> &v){o<<\"[\";for(T t:v){o<<t<<\",\";}o<<\"]\";return o;}\n\n#define INF 112000000012345678LL\n\nint main(){\n  int n;\n  cin>>n;\n  vector<int> vec(n);\n  vector<char> ch(n);\n  cin>>vec[0]; ch[0]='+';\n  rep(i,1,n) scanf(\" %c %d\", &ch[i], &vec[i]);\n\n  long ans = 0;\n  rep(i,n){\n    if(ch[i]=='+') ans += vec[i];\n    else ans -= vec[i];\n  }\n\n  long acc = accumulate(all(vec), 0LL);\n\n  rep(i,n) if(ch[i]=='-'){\n    acc -= 2*vec[i];\n    long cur = acc;\n    for(int j=i+1; j<n && ch[j]=='+'; j++) cur -= 2*vec[j];\n    ans = max(ans, cur);//dbg(cur);\n  }\n\n  cout << ans << endl;\n\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define sqr(x) ((x)*(x))\n#define ll long long\n#define ull unsigned long long\n#define ui unsigned int\n#define ld long double\n#define vi vector<int>\n#define HEAP(...) priority_queue<__VA_ARGS__ >\n#define heap(...) priority_queue<__VA_ARGS__,vector<__VA_ARGS__ >,greater<__VA_ARGS__ > > \n#define pii pair<int,int> \n#define pb push_back\n#define mp make_pair\n#define debuge cerr<<\"isok\"<<endl\n#define debug(x) cerr<<#x<<\"=\"<<x<<endl\n#define dprintf(...) fprintf(stderr,__VA_ARGS__)\n#define SS second\n#define FF first\n#define ls (k<<1)\n#define rs (k<<1|1)\n#define clr(a,x) memset(a,x,sizeof(a))\n#define cpy(a,x) memcpy(a,x,sizeof(a))\n#define file(x) freopen(x\".in\",\"r\",stdin),freopen(x\".out\",\"w\",stdout)\n#define SZ(x) ((int)x.size())\nusing namespace std;\ntemplate<class T> inline void gmin(T &x,const T &y){if(x>y) x=y;}\ntemplate<class T> inline void gmax(T &x,const T &y){if(x<y) x=y;}\nconst int BufferSize=1<<16;\nchar buffer[BufferSize],*Bufferhead,*Buffertail;\nbool Terminal;\ninline char Getchar(){\n\tif(Bufferhead==Buffertail){\n\t\tint l=fread(buffer,1,BufferSize,stdin);\n\t\tif(!l){Terminal=1;return 0;}\n\t\tBuffertail=(Bufferhead=buffer)+l;\n\t}\n\treturn *Bufferhead++;\n}\ntemplate<class T>inline bool read(T &x){\n\tx=0;char c=Getchar(),rev=0;\n\twhile(c<'0'||c>'9'){c=Getchar();rev|=c=='-';if(Terminal)return 0;}\n\twhile(c>='0'&&c<='9') x=x*10+c-'0',c=Getchar();\n\tif(c=='.'){\n\t\tc=Getchar();double t=0.1;\n\t\twhile(c>='0'&&c<='9') x=x+(c-'0')*t,c=Getchar(),t=t/10;\n\t}\n\tx=rev?-x:x;\n\treturn 1;\n}\ntemplate<class T1,class T2> inline bool read(T1 &x,T2 &y){return read(x)&read(y);}\ntemplate<class T1,class T2,class T3> inline bool read(T1 &x,T2 &y,T3 &z){return read(x)&read(y)&read(z);}\ntemplate<class T1,class T2,class T3,class T4> inline bool read(T1 &x,T2 &y,T3 &z,T4 &w){return read(x)&read(y)&read(z)&read(w);}\ninline bool reads(char *x){\n\tchar c=Getchar();\n\twhile(c<33||c>126){c=Getchar();if(Terminal)return 0;}\n\twhile(c>=33&&c<=126) (*x++)=c,c=Getchar();\n\t*x=0;return 1;\n}\ntemplate<class T>inline void print(T x,const char c='\\n'){\n\tif(!x){putchar('0');putchar(c);return;}\n\tif(x<0) putchar('-'),x=-x;\n\tint m=0,a[20];\n\twhile(x) a[m++]=x%10,x/=10;\n\twhile(m--) putchar(a[m]+'0');\n\tputchar(c);\n}\n//--------------------------------head---------------------------------------------\n\nconst ll inf=0x3f3f3f3f3f3f3f;\nconst int N=100005,M=100005,mod=1e9+7;\ntemplate<class T,class S> inline void ch(T &x,const S y){x=(x+y)%mod;}\ninline int exp(int x,int y,const int mod=::mod){\n\tint ans=1;\n\twhile(y){\n\t\tif(y&1) ans=(ll)ans*x%mod;\n\t\tx=(ll)x*x%mod;y>>=1;\n\t}return ans;\n}\n\nint n,pw[3];\nll ans,dp[N][3];\n\nint main(){\n#ifdef rqgao2014\n\tfreopen(\"input.txt\",\"r\",stdin);\n#endif\n\tpw[0]=1;pw[1]=-1;\n\tread(n,ans);n--;\n\tfor(int i=1;i<=2;i++) dp[0][i]=-inf;\n//\tdp[0][0]=0;\n\tfor(int i=1;i<=n;i++){\n\t\tchar tmp[5];\n\t\tint opt,x;reads(tmp);read(x);\n\t\topt=tmp[0]=='-'?1:0;\n\t\tfor(int j=0;j<=2;j++) dp[i][j]=-inf;\n\t\tfor(int j=0;j<=2;j++){\n\t\t\tgmax(dp[i][j],dp[i-1][j]+pw[opt^(j&1)]*x);\n\t\t\tif(j) gmax(dp[i][j-1],dp[i-1][j]+pw[opt^(j&1)]*x);\n\t\t\tif(opt&&j<2) gmax(dp[i][j+1],dp[i-1][j]+pw[opt^(j&1)]*x);\n\t\t}\n\t}\n\tprint(ans+max(dp[n][0],max(dp[n][1],dp[n][2])));\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "//start of jonathanirvings' template v3.0.3 (BETA)\n\n#include <bits/stdc++.h>\nusing namespace std;\n\ntypedef long long LL;\ntypedef pair<int,int> pii;\ntypedef pair<LL,LL> pll;\ntypedef pair<string,string> pss;\ntypedef vector<int> vi;\ntypedef vector<vi> vvi;\ntypedef vector<pii> vii;\ntypedef vector<LL> vl;\ntypedef vector<vl> vvl;\n\ndouble EPS = 1e-9;\nint INF = 1000000005;\nlong long INFF = 1000000000000000005LL;\ndouble PI = acos(-1);\nint dirx[8] = {-1,0,0,1,-1,-1,1,1};\nint diry[8] = {0,1,-1,0,-1,1,-1,1};\n\n#ifdef TESTING\n  #define DEBUG fprintf(stderr,\"====TESTING====\\n\")\n  #define VALUE(x) cerr << \"The value of \" << #x << \" is \" << x << endl\n  #define debug(...) fprintf(stderr, __VA_ARGS__)\n#else\n  #define DEBUG \n  #define VALUE(x)\n  #define debug(...)\n#endif\n\n#define FOR(a,b,c) for (int (a)=(b);(a)<(c);++(a))\n#define FORN(a,b,c) for (int (a)=(b);(a)<=(c);++(a))\n#define FORD(a,b,c) for (int (a)=(b);(a)>=(c);--(a))\n#define FORSQ(a,b,c) for (int (a)=(b);(a)*(a)<=(c);++(a))\n#define FORC(a,b,c) for (char (a)=(b);(a)<=(c);++(a))\n#define FOREACH(a,b) for (auto &(a) : (b))\n#define REP(i,n) FOR(i,0,n)\n#define REPN(i,n) FORN(i,1,n)\n#define MAX(a,b) a = max(a,b)\n#define MIN(a,b) a = min(a,b)\n#define SQR(x) ((LL)(x) * (x))\n#define RESET(a,b) memset(a,b,sizeof(a))\n#define fi first\n#define se second\n#define mp make_pair\n#define pb push_back\n#define ALL(v) v.begin(),v.end()\n#define ALLA(arr,sz) arr,arr+sz\n#define SIZE(v) (int)v.size()\n#define SORT(v) sort(ALL(v))\n#define REVERSE(v) reverse(ALL(v))\n#define SORTA(arr,sz) sort(ALLA(arr,sz))\n#define REVERSEA(arr,sz) reverse(ALLA(arr,sz))\n#define PERMUTE next_permutation\n#define TC(t) while(t--)\n\ninline string IntToString(LL a){\n  char x[100];\n  sprintf(x,\"%lld\",a); string s = x;\n  return s;\n}\n\ninline LL StringToInt(string a){\n  char x[100]; LL res;\n  strcpy(x,a.c_str()); sscanf(x,\"%lld\",&res);\n  return res;\n}\n\ninline string GetString(void){\n  char x[1000005];\n  scanf(\"%s\",x); string s = x;\n  return s;\n}\n\ninline string uppercase(string s){\n  int n = SIZE(s); \n  REP(i,n) if (s[i] >= 'a' && s[i] <= 'z') s[i] = s[i] - 'a' + 'A';\n  return s;\n}\n\ninline string lowercase(string s){\n  int n = SIZE(s); \n  REP(i,n) if (s[i] >= 'A' && s[i] <= 'Z') s[i] = s[i] - 'A' + 'a';\n  return s;\n}\n\ninline void OPEN (string s) {\n  freopen ((s + \".in\").c_str (), \"r\", stdin);\n  freopen ((s + \".out\").c_str (), \"w\", stdout);\n}\n\n//end of jonathanirvings' template v3.0.3 (BETA)\n\nLL dp[100005][3];\nint angka[100005];\nstring op[100005];\nint n;\n\nLL jahja(int now,int open)\n{\n  if (now == n) return 0;\n  LL &ret = dp[now][open];\n  if (ret >= 0) return ret;\n  ret = 0;\n  int num = angka[now] * (op[now] == \"+\" ? 1 : -1);\n  REP(i,open) num *= -1;\n  ret = jahja(now + 1, open) + num;\n  if (open > 0) MAX(ret,jahja(now,open-1));\n  if (open < 2 && op[now] == \"-\") MAX(ret,jahja(now+1,open+1)+num);\n  //debug(\"%d %d %lld\\n\",now,open,ret);\n  return ret;\n}\n\nint main()\n{\n  scanf(\"%d\",&n);\n  op[0] = \"+\";\n  scanf(\"%d\",&angka[0]);\n  FOR(i,1,n)\n  {\n    op[i] = GetString();\n    scanf(\"%d\",&angka[i]);\n  }\n  RESET(dp,-1);\n  LL risan = jahja(0,0);\n  printf(\"%lld\\n\",risan);\n  return 0;\n}\n\n\n\n\n\n\n\n\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n#define X first\n#define Y second\n#define pb push_back\ntypedef pair<int, int> ii;\ntypedef long long ll;\n\nconst int maxn = 2e5+5;\n\nint n;\n\nint arr[maxn];\n\nll sum[maxn];\nll qs[maxn];\n\nint main()\n{\n\tscanf(\"%d\", &n);\n\tll best = 0;\n\tfor(int i = 1; i<= n; i++)\n\t{\n\t\tchar tmp = '+';\n\t\tif(i != 1) scanf(\" %c\", &tmp);\n\t\tint x; scanf(\"%d\", &x);\n\t\tif(tmp == '-') x = -x;\n\t\tarr[i] = x;\n\t\tbest += arr[i];\n\t}\n\tsum[n] = abs(arr[n]);\n\tfor(int i = n-1; i>= 1; i--)\n\t{\n\t\tsum[i] = sum[i+1]+abs(arr[i]);\n\t}\n\tfor(int i = 1; i<= n; i++)\n\t{\n\t\tqs[i] = qs[i-1]+arr[i];\n\t}\n\tvector<int> neg;\n\tfor(int i = 1; i<= n; i++) if(arr[i]< 0) neg.pb(i);\n\tfor(int i = 0; i+1< (int) neg.size(); i++)\n\t{\n\t\tll loc = 0;\n\t\tloc += arr[neg[i]];\n\t\tfor(int j = neg[i]+1; j< neg[i+1]; j++)\n\t\t{\n\t\t\tloc -= arr[j];\n\t\t}\n\t\t// printf(\"[%d, %d) loc = %d\\n\", neg[i], neg[i+1], loc);\n\t\tbest = max(best, qs[neg[i]-1]+loc+sum[neg[i+1]]);\n\t}\n\tprintf(\"%lld\\n\", best);\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n#ifndef ONLINE_JUDGE\n#define dbg(x...) do{cout << \"\\033[32;1m\" << #x << \"->\" ; err(x);} while(0)\nvoid err(){cout << \"\\033[39;0m\" << endl;}\ntemplate<template<typename...> class T,typename t,typename... A>\nvoid err(T<t> a,A... x){for (auto v:a) cout << v << ' '; err(x...);}\ntemplate<typename T,typename... A>\nvoid err(T a,A... x){cout << a << ' '; err(x...);}\n#else\n#define dbg(...)\n#endif\ntypedef long long ll;\ntypedef pair<ll,ll> pi;\ntypedef vector<ll> vi;\ntemplate<class T> using vc=vector<T>;\ntemplate<class T> using vvc=vc<vc<T>>;\ntemplate<class T> void mkuni(vector<T>&v)\n{\n    sort(v.begin(),v.end());\n    v.erase(unique(v.begin(),v.end()),v.end());\n}\ntemplate<class T>\nvoid print(T x,int suc=1)\n{\n    cout<<x;\n    if(suc==1) cout<<'\\n';\n    else cout<<' ';\n}\ntemplate<class T>\nvoid print(const vector<T>&v,int suc=1)\n{\n    for(int i=0;i<v.size();i++)\n        print(v[i],i==(int)(v.size())-1?suc:2);\n}\nconst int maxn=1e5+7;\nll dp[maxn][3];\nint a[maxn];\nstring op[maxn];\nint main()\n{\n\tint n;\n\tcin>>n;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tcin>>a[i];\n\t\tif(i!=n) cin>>op[i];\n\t}\n\tmemset(dp,-0x3f,sizeof(dp));\n\tdp[1][0]=a[1];\n\tfor(int i=2;i<=n;i++)\n\t{\n\t\tif(op[i-1][0]=='-')\n\t\t{\n\t\t\tfor(int j=0;j<3;j++)\n\t\t\t{\n\t\t\t\tif(j&1)\n\t\t\t\t\tdp[i][j]=dp[i-1][j]+a[i];\n\t\t\t\telse dp[i][j]=dp[i-1][j]-a[i];\n\t\t\t\tif(j)\n\t\t\t\t\tdp[i][j]=max(dp[i][j],dp[i-1][j-1]+(j-1==1?1:-1)*a[i]);\n\t\t\t}\n\t\t}\n\t\telse{\n\t\t\tfor(int j=0;j<3;j++)\n\t\t\t{\n\t\t\t\tif(j&1)\n\t\t\t\t\tdp[i][j]=dp[i-1][j]-a[i];\n\t\t\t\telse dp[i][j]=dp[i-1][j]+a[i];\n\t\t\t\tif(j)\n\t\t\t\t\tdp[i][j-1]=max(dp[i][j-1],dp[i-1][j]+(j==1?-1:1)*a[i]);\n\t\t\t}\n\t\t}\n\t\t//dbg(i,dp[i][0],dp[i][1],dp[i][2]);\n\t}\n\tcout<<max({dp[n][0],dp[n][1],dp[n][2]})<<endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <string>\n#include <cstdlib>\n#include <cmath>\n#include <vector>\n#include <unordered_map>\n#include <map>\n#include <set>\n#include <algorithm>\n#include <queue>\n#include <stack>\n#include <functional>\n#include <bitset>\n#include <assert.h>\n#include <unordered_map>\n#include <fstream>\n#include <time.h>\nusing namespace std;\ntypedef long long ll;\ntypedef vector<ll> vl;\ntypedef vector<vl> vvl;\ntypedef vector<char> vc;\ntypedef vector<string> vs;\ntypedef vector<bool> vb;\ntypedef vector<double> vd;\ntypedef pair<ll,ll> P;\ntypedef pair<int,int> pii;\ntypedef vector<P> vpl;\ntypedef tuple<ll,ll,ll> tapu;\n#define rep(i,n) for(int i=0; i<(n); i++)\n#define REP(i,a,b) for(int i=(a); i<(b); i++)\n#define all(x) (x).begin(), (x).end()\n#define rall(x) (x).rbegin(), (x).rend()\nconst int inf = 1<<30;\nconst ll linf = 1LL<<62;\nconst int MAX = 2020000;\nll dy[8] = {1,-1,0,0,1,-1,1,-1};\nll dx[8] = {0,0,1,-1,1,-1,-1,1};\nconst double pi = acos(-1);\nconst double eps = 1e-7;\ntemplate<typename T1,typename T2> inline bool chmin(T1 &a,T2 b){\n\tif(a>b){\n\t\ta = b; return true;\n\t}\n\telse return false;\n}\ntemplate<typename T1,typename T2> inline bool chmax(T1 &a,T2 b){\n\tif(a<b){\n\t\ta = b; return true;\n\t}\n\telse return false;\n}\ntemplate<typename T> inline void print(T &a){\n    rep(i,a.size()) cout << a[i] << \" \";\n    cout << \"\\n\";\n}\ntemplate<typename T1,typename T2> inline void print2(T1 a, T2 b){cout << a << \" \" << b << \"\\n\";}\ntemplate<typename T1,typename T2,typename T3> inline void print3(T1 a, T2 b, T3 c){\n\tcout << a << \" \" << b << \" \" << c << \"\\n\";\n}\nconst int mod = 1e9 + 7;\n//const int mod = 998244353;\n\nint main(){\n\tint n; cin >> n;\n\tvl a(n); vc s(n);\n\trep(i,n){\n\t\tcin >> a[i];\n\t\tif(i < n-1) cin >> s[i+1];\n\t}\n\ts[0] = '+';\n\tvvl dp(n+1,vl(3,-linf));\n\tdp[0][0] = 0;\n\trep(i,n){\n\t\tif(s[i] == '+'){\n\t\t\tchmax(dp[i+1][0], dp[i][0] + a[i]);\n\t\t\tchmax(dp[i+1][1], dp[i][1] - a[i]);\n\t\t\tchmax(dp[i+1][2], dp[i][2] + a[i]);\n\t\t\tchmax(dp[i+1][0], dp[i][1] - a[i]);\n\t\t\tchmax(dp[i+1][1], dp[i][2] + a[i]);\n\t\t}else{\n\t\t\tchmax(dp[i+1][2], dp[i][1] + a[i]);\n\t\t\tchmax(dp[i+1][1], dp[i][0] - a[i]);\n\t\t\tchmax(dp[i+1][0], dp[i][0] - a[i]);\n\t\t\tchmax(dp[i+1][1], dp[i][1] + a[i]);\n\t\t\tchmax(dp[i+1][2], dp[i][2] - a[i]);\n\t\t}\n\t}\n\tcout << max({dp[n][0], dp[n][1], dp[n][2]}) << \"\\n\";\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n#define int long long\nint n,a[100005],hz[100005];\nchar s[100005];\nint max(int x,int y)\n{\n\treturn x>y?x:y;\n}\nsigned main()\n{\n\tscanf(\"%lld\",&n);\n\tfor(int i=1;i<n;++i)\n\t{\n\t\tscanf(\"%lld\",&a[i]);\n\t\tscanf(\" %c\",&s[i]);\n\t}\n\tscanf(\"%lld\",&a[n]);\n\ts[0]='+';\n\tint ans=0;\n\tfor(int i=1;i<=n;++i)\n\t{\n\t\tif(s[i-1]=='+')ans+=a[i];\n\t\telse ans-=a[i];\n\t}\n\thz[n]=a[n];\n\tfor(int i=n-1;i>=1;--i)hz[i]=hz[i+1]+a[i];\n\tint now=0;\n\tfor(int i=1;i<=n;++i)\n\t{\n\t\tif(s[i-1]=='+')now+=a[i];\n\t\tif(s[i-1]=='-')\n\t\t{\n\t\t\tnow-=a[i];\n\t\t  int hh=now;\n\t\t\tint j=i;\n\t\t\twhile(j<n&&s[j]!='-')\n\t\t\t{\n\t\t\t\thh-=a[j+1];\n\t\t\t\tj++;\n\t\t\t}\n\t\t\tif(j>=n)break;\n\t\t\thh+=hz[j+1];\n\t\t\tans=max(ans,hh);\n\t\t}\n\t}\n\tcout<<ans<<endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\ntypedef vector<ll> vi;\ntypedef pair<ll,ll> pi;\ntypedef pair<ll,ll> pii;\ntypedef vector<pi> vpi;\ntypedef set<ll> si;\ntypedef long double ld;\n#define mp make_pair\n#define pb push_back\n#define f first\n#define s second\nll INF = 1e9;\nll MOD = 1e9+7;\n#define lb lower_bound\n#define ub upper_bound\n#define SZ(x) (ll)x.size()\n#define ALL(x) x.begin(),x.end()\n\nll ans;\nchar c;\nll N,a,t,out;\nvpi V;\n\nint main(){\n  // freopen(\"in.txt\",\"r\",stdin);\n  cin >> N;\n  cin >> ans;\n  for (int i=1;i<N;++i){\n    cin >> c >> a;\n    if (SZ(V) == 0 && c == '+'){\n      ans += a;\n      continue;\n    }\n    ans += a;\n    if (SZ(V) && V.back().f && c == '+'){\n      V.back().s += a;\n      continue;\n    }\n    V.pb(mp(c == '+', a));\n  }\n  if (SZ(V)) ans -= 2*V[0].s;\n  if (SZ(V) < 2){\n    cout<<ans;\n    return 0;\n  }\n  if (V[1].f == 0){\n    // If second one is negative\n    cout << ans;\n    return 0;\n  }\n  out = max(out, ans - 2*V[1].s);\n  int T = SZ(V);\n  V.pb(mp(0,0));\n  for (int i=1; i<T; ++i){\n    // cout<<i<<'\\n';\n    if (V[i].f == 1)continue;\n    if (V[i+1].f == 0){\n      // cout<<\"Case A \" << i << '\\n';\n      out = max(out, ans - 2 * V[i].s);\n      break;\n    }\n    else{\n      // cout<<\"Case B \" << i << '\\n';\n      out = max(out, ans - 2 * V[i].s - 2*V[i+1].s);\n    }\n    ans -= 2*V[i].s;\n  }\n  cout<<out;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define ll long long \nusing namespace std;\nconst int N=1e5+10;\nint a[N];\nint op[N];\nint n;\nll dp[N][3];\nstring s;\nint main()\n{\n\t//freopen(\"H:\\\\c++1\\\\in.txt\",\"r\",stdin);\n\t//freopen(\"H:\\\\c++1\\\\out.txt\",\"w\",stdout);\n\tscanf(\"%d\",&n);getchar();\n\tgetline(cin,s);\n\tint len=s.length(),t=0,p1=0,p2=0;  \n\tfor(int i=0;i<len;i++){\n\t\tif(s[i]==' '){\n\t\t\tif(t)a[++p1]=t;\n\t\t\tt=0;continue;\n\t\t}else if(s[i]>='0'&&s[i]<='9')t=t*10+s[i]-'0';\n\t\telse{\n\t\t\tif(s[i]=='-')op[++p2]=-1;else op[++p2]=1;\n\t\t}\n\t}\n\ta[++p1]=t;\n\tdp[1][0]=a[1],dp[1][2]=dp[1][1]=-1e18;\n\tfor(int i=2;i<=n;i++){\n\t\tdp[i][0]=dp[i][1]=dp[i][2]=-1e18;\n\t\tint f=(op[i-1]==-1);\n\t\tfor(int j=0;j<3;j++){\n\t\t\tint t=j%2;\n\t\t\tt=t^f;\n\t\t\tint temp=a[i];\n\t\t\tif(t)temp=-temp;\n\t\t\tif(f&&j<2)dp[i][j+1]=max(dp[i][j+1],dp[i-1][j]+temp);\n\t\t\tfor(int k=0;k<=j;k++)dp[i][k]=max(dp[i][k],dp[i-1][j]+temp);\n\t\t}\n\t}\n\t//for(int i=1;i<=p1;i++)cout<<a[i]<<\" \";puts(\"\");\n\t//for(int i=1;i<=p2;i++)cout<<op[i]<<\" \";puts(\"\");\n\tprintf(\"%lld\\n\",dp[n][0]);\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n// template {{{\n#define pb push_back\n#define eb emplace_back\n#define mp make_pair\n#define mt make_tuple\n#define lb lower_bound\n#define ub upper_bound\n#define f first\n#define s second\n#define resz resize\n\n#define sz(x) int((x).size())\n#define all(x) (x).begin(), (x).end()\n\n#define FOR(i, a, b) for (int i = (a); i < (b); i++)\n#define F0R(i, a) for (int i = 0; i < (a); i++)\n#define FORd(i, a, b) for (int i = (b)-1; i >= (a); i--)\n#define F0Rd(i, a) for (int i = (a)-1; i >= 0; i--)\n#define trav(a, x) for (auto& a : x)\n\n#define sort_by(x, y) sort(all(x), [&](const auto& a, const auto& b) { return y; })\n\nusing ll = long long;\nusing vi = vector<int>;\nusing vvi = vector<vi>;\nusing vll = vector<ll>;\nusing vvll = vector<vll>;\nusing vb = vector<bool>;\nusing vd = vector<double>;\nusing vs = vector<string>;\n\nusing pii = pair<int, int>;\nusing pll = pair<ll, ll>;\nusing pdd = pair<double, double>;\n\nusing vpii = vector<pii>;\nusing vvpii = vector<vpii>;\nusing vpll = vector<pll>;\nusing vvpll = vector<vpll>;\nusing vpdd = vector<pdd>;\nusing vvpdd = vector<vpdd>;\n\ntemplate<typename T> void ckmin(T& a, const T& b) { a = min(a, b); }\ntemplate<typename T> void ckmax(T& a, const T& b) { a = max(a, b); }\n\nmt19937_64 rng(chrono::steady_clock::now().time_since_epoch().count());\n\nnamespace __input {\n    template<class T1, class T2> void re(pair<T1,T2>& p);\n    template<class T> void re(vector<T>& a);\n    template<class T, size_t SZ> void re(array<T,SZ>& a);\n\n    template<class T> void re(T& x) { cin >> x; }\n    void re(double& x) { string t; re(t); x = stod(t); }\n    template<class Arg, class... Args> void re(Arg& first, Args&... rest) {\n        re(first); re(rest...);\n    }\n\n    template<class T1, class T2> void re(pair<T1,T2>& p) { re(p.f,p.s); }\n    template<class T> void re(vector<T>& a) { F0R(i,sz(a)) re(a[i]); }\n    template<class T, size_t SZ> void re(array<T,SZ>& a) { F0R(i,SZ) re(a[i]); }\n}\nusing namespace __input;\n\nnamespace __output {\n    template<class T1, class T2> void pr(const pair<T1,T2>& x);\n    template<class T, size_t SZ> void pr(const array<T,SZ>& x);\n    template<class T> void pr(const vector<T>& x);\n    template<class T> void pr(const deque<T>& x);\n    template<class T> void pr(const set<T>& x);\n    template<class T1, class T2> void pr(const map<T1,T2>& x);\n\n    template<class T> void pr(const T& x) { cout << x; }\n    template<class Arg, class... Args> void pr(const Arg& first, const Args&... rest) {\n        pr(first); pr(rest...);\n    }\n\n    template<class T1, class T2> void pr(const pair<T1,T2>& x) {\n        pr(\"{\",x.f,\", \",x.s,\"}\");\n    }\n    template<class T, bool pretty = true> void prContain(const T& x) {\n        if (pretty) pr(\"{\");\n        bool fst = 1; for (const auto& a: x) pr(!fst?pretty?\", \":\" \":\"\",a), fst = 0;\n        if (pretty) pr(\"}\");\n    }\n    template<class T> void pc(const T& x) { prContain<T, false>(x); pr(\"\\n\"); }\n    template<class T, size_t SZ> void pr(const array<T,SZ>& x) { prContain(x); }\n    template<class T> void pr(const vector<T>& x) { prContain(x); }\n    template<class T> void pr(const deque<T>& x) { prContain(x); }\n    template<class T> void pr(const set<T>& x) { prContain(x); }\n    template<class T1, class T2> void pr(const map<T1,T2>& x) { prContain(x); }\n\n    void ps() { pr(\"\\n\"); }\n    template<class Arg> void ps(const Arg& first) {\n        pr(first); ps();\n    }\n    template<class Arg, class... Args> void ps(const Arg& first, const Args&... rest) {\n        pr(first,\" \"); ps(rest...);\n    }\n}\nusing namespace __output;\n\n#define TRACE(x) x\n#define __pn(x) pr(#x, \" = \")\n#define pd(...) __pn((__VA_ARGS__)), ps(__VA_ARGS__), cout << flush\n\nnamespace __algorithm {\n    template<typename T> void dedup(vector<T>& v) {\n        sort(all(v)); v.erase(unique(all(v)), v.end());\n    }\n    template<typename T> typename vector<T>::iterator find(vector<T>& v, const T& x) {\n        auto it = lower_bound(all(v), x); return it != v.end() && *it == x ? it : v.end();\n    }\n    template<typename T> size_t index(vector<T>& v, const T& x) {\n        auto it = find(v, x); assert(it != v.end() && *it == x); return it - v.begin();\n    }\n    template<typename C, typename T, typename OP> vector<T> prefixes(const C& v, T id, OP op) {\n        vector<T> r(sz(v)+1, id); F0R (i, sz(v)) r[i+1] = op(r[i], v[i]); return r;\n    }\n    template<typename C, typename T, typename OP> vector<T> suffixes(const C& v, T id, OP op) {\n        vector<T> r(sz(v)+1, id); F0Rd (i, sz(v)) r[i] = op(v[i], r[i+1]); return r;\n    }\n}\nusing namespace __algorithm;\n\nstruct monostate {\n    friend istream& operator>>(istream& is, const __attribute__((unused))monostate& ms) { return is; }\n    friend ostream& operator<<(ostream& os, const __attribute__((unused))monostate& ms) { return os; }\n} ms;\n\ntemplate<typename W=monostate> struct wedge {\n    int u, v, i; W w;\n    wedge<W>(int _u=-1, int _v=-1, int _i=-1) : u(_u), v(_v), i(_i) {}\n    int operator[](int loc) const { return u ^ v ^ loc; }\n    friend void re(wedge& e) { re(e.u, e.v, e.w); --e.u, --e.v; }\n    friend void pr(const wedge& e) { pr(e.u, \"<-\", e.w, \"->\", e.v); }\n};\n\nnamespace __io {\n    void setIn(string s) { freopen(s.c_str(),\"r\",stdin); }\n    void setOut(string s) { freopen(s.c_str(),\"w\",stdout); }\n    void setIO(string s = \"\") {\n        ios_base::sync_with_stdio(0); cin.tie(0);\n        cout << fixed << setprecision(15);\n        if (sz(s)) { setIn(s+\".in\"), setOut(s+\".out\"); }\n    }\n}\nusing namespace __io;\n// }}}\n\nint main() {\n    setIO();\n\n    int N; re(N);\n\n    const ll NINF = LLONG_MIN / 2;\n\n    int fv; re(fv);\n    array<ll, 3> dp { fv, NINF, NINF };\n\n    F0R (i, N - 1) {\n        char op; int val; re(op, val);\n\n        if (op == '+') {\n            dp = {\n                max(dp[0], dp[1]) + val,\n                max(dp[1], dp[2]) - val,\n                dp[2] + val\n            };\n        } else {\n            dp = {\n                NINF,\n                dp[0] - val,\n                max(dp[1] + val, dp[2] + val)\n            };\n        }\n    }\n\n    ps(*max_element(all(dp)));\n\n    // did you check N=1? did you mix up N,M?\n    return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include<stdio.h>\n#include<math.h>\n#include<algorithm>\n#include<queue>\n#include<string.h>\n#include<vector>\n#include<set>\nusing namespace std;\nconst long long mod=1000000007;\nconst long long inf=mod*mod;\nint b[110000];\nlong long rem[110000];\nchar c[110000];\nint main(){\n\tint a;scanf(\"%d\",&a);\n\tfor(int i=0;i<a;i++){\n\t\tscanf(\"%d\",b+i);\n\t\tif(i<a-1)scanf(\"%s\",c+i);\n\t}\n\tlong long tmp=0;\n\tfor(int i=a-1;i>=0;i--){\n\t\ttmp+=b[i];\n\t\trem[i]=tmp;\n\t}\n\tlong long ret=-inf;\n\tlong long cur=b[0];\n\tbool flag=true;\n\tfor(int i=0;i<a-1;i++){\n\t\tif(c[i]=='-'){\n\t\t\tflag=false;\n\t\t\tint len=0;\n\t\t\tlong long val=-b[i+1];\n\t\t\tfor(int j=i+1;j<a-1;j++){\n\t\t\t\tif(c[j]=='+')len++;\n\t\t\t\telse break;\n\t\t\t\tval-=b[j+1];\n\t\t\t}\n\t\t\tif(len==0){\n\t\t\t\tret=max(ret,cur-b[i+1]+rem[i+2]);break;\n\t\t\t}\n\t\t\tret=max(ret,cur+val+rem[i+len+2]);\n\t\t\tcur-=b[i+1];\n\t\t\tfor(int j=i+1;j<a-1;j++){\n\t\t\t\tif(c[j]=='+')len++;\n\t\t\t\telse break;\n\t\t\t\tcur+=b[j+1];\n\t\t\t}\n\t\t\t\n\t\t}else if(flag){\n\t\t\tcur+=b[i+1];\n\t\t}\n\t}\n\tret=max(ret,cur);\n\tprintf(\"%lld\\n\",ret);\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define rep(i,n) for(int i=0;i<(int)(n);i++)\n#define rep1(i,n) for(int i=1;i<=(int)(n);i++)\n#define all(c) c.begin(),c.end()\n#define pb push_back\n#define fs first\n#define sc second\n#define show(x) cout << #x << \" = \" << x << endl\n#define chmin(x,y) x=min(x,y)\n#define chmax(x,y) x=max(x,y)\nusing namespace std;\ntemplate<class S,class T> ostream& operator<<(ostream& o,const pair<S,T> &p){return o<<\"(\"<<p.fs<<\",\"<<p.sc<<\")\";}\ntemplate<class T> ostream& operator<<(ostream& o,const vector<T> &vc){o<<\"sz = \"<<vc.size()<<endl<<\"[\";for(const T& v:vc) o<<v<<\",\";o<<\"]\";return o;}\ntypedef long long ll;\nll inf=1e16;\nconst int MN=100000;\nint N;\nll a[MN];\nchar o[MN];\nll dp[MN][3];\nint main(){\n\tcin>>N;\n\trep(i,N){\n\t\tcin>>a[i];\n\t\tif(i==N-1) break;\n\t\tcin>>o[i];\n\t}\n\trep(i,N) rep(j,3) dp[i][j]=-inf;\n\tdp[0][0]=a[0];\n\trep(i,N-1){\n\t\trep(j,3) if(dp[i][j]!=-inf){\n\t\t\tif(o[i]=='-' && j!=2) chmax(dp[i+1][j+1],dp[i][j]+(j%2==0?-a[i+1]:a[i+1]));\n\t\t\tchmax(dp[i+1][j],dp[i][j]+ (((j%2==0) ^ (o[i]=='+'))?-a[i+1]:a[i+1]) );\n\t\t}\n\t\tchmax(dp[i+1][1],dp[i+1][2]);\n\t\tchmax(dp[i+1][0],dp[i+1][1]);\n\t}\n\tcout<<dp[N-1][0]<<endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\ntypedef long long ll;\n\nconst int MAX = 1e5 + 5;\n\nll prefix[MAX];\nll abs_prefix[MAX];\nll sum(int l, int r){\n    if(l > r) return 0;\n    return prefix[r] - (l == 0 ? 0 : prefix[l - 1]);\n}\nll abs_sum(int l, int r){\n    if(l > r) return 0;\n    return abs_prefix[r] - (l == 0 ? 0 : abs_prefix[l - 1]);\n}\nint main(){\n    ios_base::sync_with_stdio(0); cin.tie(0);\n    int n; cin >> n;\n    vector<int> a(n);\n    cin >> a[0];\n    for(int i = 0; i < n - 1; i++){\n        char sgn; int val; cin >> sgn >> val;\n        if(sgn == '-') a[i + 1] = -val;\n        else a[i + 1] = val;\n    }\n    ll res = 0;\n    bool neg = false;\n    for(int i = 0; i < n; i++){\n        if(a[i] < 0) neg = true;\n        if(i) prefix[i] = prefix[i - 1] + a[i];\n        else prefix[i] = a[i];\n        if(i) abs_prefix[i] = abs_prefix[i - 1] + abs(a[i]);\n        else prefix[i] = abs(a[i]);\n    }\n    if(!neg){\n        cout << sum(0, n - 1) << '\\n';\n        return 0;\n    }\n    int it1 = 0;\n    int it2 = 0;\n    ll ans = 0;\n    while(a[it1] > 0) it1++;\n    it2 = it1 + 1;\n    while(it1 != n){\n        while(a[it2] > 0) it2++;\n        ll val = sum(0, it1) - abs_sum(it1 + 1, it2 - 1) + abs_sum(it2, n - 1);\n        ans = max(ans, val);\n        it1 = it2;\n        it2 = it1 + 1;\n    }\n    cout << ans << '\\n';\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define rep(i,a,b) for(int i=(a);i<=(b);i++)\n#define per(i,a,b) for(int i=(a);i>=(b);i--)\n#define forE(i,x) for(int i=head[x];i!=-1;i=ne[i])\nusing namespace std;\ntypedef long long i64;\ntypedef unsigned long long u64;\ntypedef unsigned u32;\ntypedef pair<int,int> pin;\n#define mk(a,b) make_pair(a,b)\n#define lowbit(x) ((x)&(-(x)))\n#define sqr(a) ((a)*(a))\n#define clr(a) (memset((a),0,sizeof(a)))\n#define ls ((x)<<1)\n#define rs (((x)<<1)|1)\n#define mid (((l)+(r))>>1)\n#define pb push_back\n#define w1 first\n#define w2 second\ninline void read(int &x){\n\tx=0;int f=1;char ch=getchar();\n\twhile(ch<'0'||ch>'9'){if(ch=='-')f=-1;ch=getchar();}\n\twhile(ch>='0'&&ch<='9'){x=x*10+ch-'0';ch=getchar();}\n\tx*=f;\n}\ninline void judge(){\n\tfreopen(\"in.txt\",\"r\",stdin);\n\tfreopen(\"out.txt\",\"w\",stdout);\n}\n/*******************************head*******************************/\nconst int maxn=100005;\ni64 f[maxn],g[maxn];\nint n,m,a,b;\nint main(){\n\tread(n);read(m);read(a);\n\ti64 sum=0,ans=1e18;\n\trep(i,1,n-1){\n\t\tread(b);\n\t\tsum+=b-a;\n\t\tf[a+1]+=a+1;\n\t\tf[b+1]-=a+1;\n\t\tg[a+1]++;\n\t\tg[b+1]--;\n\t\tif(a>b){\n\t\t\tsum+=m;\n\t\t\tf[1]+=a+1-m;\n\t\t\tf[b+1]+=m;\n\t\t\tg[1]++;\n\t\t}a=b;\n\t}\n\tans=sum;\n\trep(i,1,m){\n\t\tf[i]+=f[i-1];\n\t\tg[i]+=g[i-1];\n\t\tans=min(ans,sum+f[i]-g[i]*i);\n\t}\n\tcout<<ans<<endl;\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<cstring>\n#include<algorithm>\n#define ll long long\nusing namespace std;\nconst int mn = 100005;\nll a[mn];\nint n;\nchar o[mn];\nll getmax(int s);\nll getmin(int s);\nll getmax(int s)\n{\n\tif(s == n - 1)\n\t\treturn a[n - 1] + a[n];\n\telse if(s == n)\n\t\treturn o[n - 1] == '+' ? a[n] : -a[n];\n\tll ret = a[s];\n\tfor(int i = s + 1; i <= n; i++)\n\t{\n\t\tif(o[i - 1] == '+')\n\t\t\tret += a[i];\n\t\telse\n\t\t{\n\t\t\tret -= getmin(i);\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn ret;\n}\nll getmin(int s)\n{\n\tif(s == n - 1)\n\t\treturn a[n - 1] - a[n];\n\telse if(s == n)\n\t\treturn o[n - 1] == '+' ? a[n] : -a[n];\n\tll ret = a[s];\n\tfor(int i = s + 1; i <= n; i++)\n\t{\n\t\tif(o[i - 1] == '+')\n\t\t\tret += a[i];\n\t\telse\n\t\t{\n\t\t\tret -= getmax(i);\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn ret;\n}\nint main()\n{\n\tint i;\n\tscanf(\"%d\", &n);\n\tfor(i = 1; i < n; i++)\n\t{\n\t\tscanf(\"%lld\", &a[i]);\n\t\tgetchar();\n\t\to[i] = getchar();\n\t}\n\tscanf(\"%lld\", &a[i]);\n\tprintf(\"%lld\\n\", getmax(1));\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n \ntypedef long long ll;\ntypedef vector<int> vi;\ntypedef pair<int, int> pii;\ntypedef set<int> si;\ntypedef map<int,int> mii;\n \n#define FOR(i, a, b) for (int i=a; i<b; i++)\n#define F0R(i, a) for (int i=0; i<a; i++)\n#define FORd(i,a,b) for (int i = b-1; i >= a; i--)\n#define F0Rd(i,a) for (int i = a-1; i >= 0; i--)\n \n#define mp make_pair\n#define pb push_back\n#define f first\n#define s second\n#define lb lower_bound\n#define ub upper_bound\n \nconst int MOD = 1000000007;\ndouble PI = 4*atan(1);\n \nll sum[100001], asum[100001];\nvi neg;\n\nint main() {\n\tios_base::sync_with_stdio(0);cin.tie(0);\n\tint N; cin >> N;\n\tcin >> sum[1]; asum[1] = sum[1];\n\t\n\tFOR(i,2,N+1) {\n\t\tchar op; int A;\n\t\tcin >> op >> A;\n\t\tif (op == '-') neg.pb(i), A = -A;\n\t\tsum[i] = sum[i-1]+A;\n\t\tasum[i] = asum[i-1]+abs(A);\n\t}\n\tll ans = sum[N];\n\tneg.pb(N+1);\n\tF0R(i,neg.size()-1) {\n\t\tll cur = sum[neg[i]-1];\n\t\tcur -= (asum[neg[i+1]-1]-asum[neg[i]-1]);\n\t\tcur += (asum[N]-asum[neg[i+1]-1]);\n\t\tans = max(ans,cur);\n\t}\n\tcout << ans;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\nusing namespace std;\ntypedef long long lli;\nlli n;\nvector<lli> a;\nlli dp[100005][3];\nint main(int argc, char const *argv[]) {\n    cin >> n;\n    lli x;\n    char c;\n    cin >> x;\n    a.push_back(x);\n    for(lli i = 1;i < n;i++){\n        cin >> c >> x;\n        if(c == '-') a.push_back(x*-1);\n        if(c == '+') a.push_back(x);\n    }\n    for(lli i = 0;i < a.size();i++){\n        dp[i][0] = dp[i][1] = dp[i][2] = -100000000000000;\n    }\n    dp[0][0] = 0;\n    for(lli i = 0;i < a.size();i++){\n        if(a[i] > 0){\n            dp[i+1][0] = max(dp[i][0]+a[i],dp[i][1]+a[i]);\n            dp[i+1][1] = dp[i][1] - a[i];\n            dp[i+1][2] = dp[i][2] + a[i];\n        }else{\n            dp[i+1][1] = dp[i][0]+a[i];\n            dp[i+1][2] = max(dp[i][1]-a[i],dp[i][2]-a[i]);\n        }\n    }\n    cout << max(max(dp[a.size()][0],dp[a.size()][1]),dp[a.size()][2]) << endl;\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#define int long long\nusing namespace std;\nint n,a[200001],b[200001],s[200001],q[200001];\nchar t[5];\ninline int sum(int l,int r){return s[r]-s[l-1];}\nsigned main()\n{\n\tcin>>n;\n\tint cnt=0;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tif(i>1)cin>>t,t[0]=='-'?b[i]=1:0;\n\t\tcin>>a[i];\n\t\ts[i]=s[i-1]+a[i];\n\t\tq[i]=q[i-1]+(b[i]?-a[i]:a[i]);\n\t\tcnt+=b[i];\n\t}\n\tif(cnt<2){cout<<q[n]<<endl;return 0;}\n\tint ans=-(1ll<<40);\n\tfor(int i=n,j=n+1;i;i--)\n\t\tif(b[i])\n\t\t{\n\t\t\tif(j>n){j=i;continue;}\n\t\t\tans=max(ans,q[i-1]-sum(i,j-1)+sum(j,n));\n\t\t\tj=i;\n\t\t}\n\tcout<<ans<<endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\n#define sqr(x) ((x)*(x))\n#define int long long\n#define mp make_pair\n#define uint unsigned\ninline char gc(){\n    static char buf[100000],*p1=buf,*p2=buf;\n    return p1==p2&&(p2=(p1=buf)+fread(buf,1,100000,stdin),p1==p2)?EOF:*p1++;\n}\n#define gc getchar\ninline int read(){\n\tint x = 0; char ch = gc(); bool positive = 1;\n\tfor (; !isdigit(ch); ch = gc())\tif (ch == '-')\tpositive = 0;\n\tfor (; isdigit(ch); ch = gc())\tx = x * 10 + ch - '0';\n\treturn positive ? x : -x;\n}\ninline void write(int a){\n    if(a>=10)write(a/10);\n    putchar('0'+a%10);\n}\ninline void writeln(int a){\n    if(a<0){\n    \ta=-a; putchar('-');\n\t}\n\twrite(a); puts(\"\");\n}\nconst int N=100005;\nint n,jb,ans=-4e18,dq,a[N],sum,top,tot,s[N],ss[N];\nsigned main(){\n\tn=read();\n\tfor(int i=1;i<=n;i++)a[i]=read();\n\tfor(int i=1;;i++){\n\t\tif(i>n){\n\t\t\tcout<<sum<<endl; return 0;\n\t\t}\n\t\tif(a[i]<0){\n\t\t\ttop=i; break;\n\t\t}\n\t\tsum+=a[i];\n\t}\n\tfor(int i=top;i<=n;i++)if(a[i]<0){\n\t\ts[++tot]=-a[i];\n\t}else{\n\t\tss[tot]+=a[i];\n\t}\n\tfor(int i=top;i<=n;i++)jb+=abs(a[i]);\n\tfor(int i=1;i<=tot;i++){\n\t\tjb-=s[i]+ss[i];\n\t\tans=max(ans,jb-s[i]-ss[i]+dq);\n\t\tdq+=ss[i]-s[i];\n\t}\n\tcout<<ans+sum<<endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <stdio.h>\n#include <assert.h>\n#include <fstream>\n#include <iostream>\n#include <algorithm>\n#include <array>\n#include <vector>\n#include <queue>\n#include <set>\n#include <cmath>\n#include <map>\n//#include <unordered_map>\n//#include <unordered_set>\n//#include <boost/container/static_vector.hpp>\n//#include <boost/unordered_set.hpp>\n//#include <boost/unordered_map.hpp>\n//#include <unistd.h>\n\n//#include <cv.h>\n//#include <highgui.h>\n#include <stdlib.h>\n#include <string>\n\nconst int MAX_N = 100050;\nint N;\nlong long A[MAX_N];\nlong long ac[MAX_N];\nchar op[MAX_N];\n\nint main(int argc, char **argv) {\n    std::cin >> N;\n    for (int i = 1; i <= N - 1; i++) {\n        std::cin >> A[i] >> op[i];\n    }\n    std::cin >> A[N];\n\n    std::vector<int> pos;\n\n    for (int i = 1; i <= N; i++) {\n        if (op[i] == '-') {\n            pos.push_back(i+1);\n        }\n        ac[i] = ac[i-1] + A[i]; \n    }\n\n    if (pos.size() == 0) {\n        std::cout << ac[N] << std::endl;\n        return 0;\n    }\n\n    std::vector<long long> cand;\n    long long tmp = 0;\n    for (int i = 0; i < pos.size(); i++) {\n        if (i < pos.size() - 1) {\n            //std::cout << \"check:\" << pos[i] << \" \" << pos[i+1] << \" \" << ac[pos[i+1] - 1] << \" \" << ac[pos[i] - 1] << std::endl;\n            cand.push_back(tmp + ac[pos[i+1] - 1] - ac[pos[i] - 1]);\n        }\n        tmp += A[pos[i]];\n    }\n    cand.push_back(tmp);\n\n    std::sort(cand.begin(), cand.end());\n\n    std::cout << ac[N] - cand[0] * 2 << std::endl;\n    \n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\nusing ll = long long;\nusing P = pair<int, int>;\nconst ll MOD = 1000000007;\n\n\nint N;\nvector<char> op;\nvector<ll> A;\nchar ops[2] = {'+', '-'};\n\nll memo[100000][2];\nint memoc[100000][2];\n\nll dfs(int p, int c){\n    if(p == N) return 0;\n    if(memo[p][c % 2] != -1 && c <= memoc[p][c % 2]) return memo[p][c % 2];\n    ll ret = 0;\n    if(c % 2 == 0){\n        if(op[p] == '+'){\n            ret = max(ret, A[p] + dfs(p+1, c));\n        }else{\n            ret = max(ret, -A[p] + dfs(p+1, c+1));\n            if(c >= 1) ret = max(ret, A[p] + dfs(p+1, c));\n        }\n    }else{\n        if(op[p] == '+'){\n            ret = max(ret, -A[p] + dfs(p+1, c));\n            ret = max(ret, A[p] + dfs(p+1, c-1));\n        }else{\n            ret = max(ret, A[p] + dfs(p+1, c+1));\n        }\n    }\n    memo[p][c % 2] = ret;\n    memoc[p][c % 2] = c;\n    return ret;\n}\n\nint main(){\n    cin >> N;\n\n    ll start;\n    cin >> start;\n\n    N--;\n    op.resize(N);\n    A.resize(N);\n    for(int i=0;i<N;i++){\n        cin >> op[i] >> A[i];\n    }\n    memset(memo, -1, sizeof(memo));\n    memset(memoc, -1, sizeof(memoc));\n    cout << start + dfs(0, 0) << endl;\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define rep(i,a,b) for(int i=(a);i<=(b);i++)\n#define per(i,a,b) for(int i=(a);i>=(b);i--)\n#define forE(i,x) for(int i=head[x];i!=-1;i=ne[i])\nusing namespace std;\ntypedef long long i64;\ntypedef unsigned long long u64;\ntypedef unsigned u32;\ntypedef pair<int,int> pin;\n#define mk(a,b) make_pair(a,b)\n#define lowbit(x) ((x)&(-(x)))\n#define sqr(a) ((a)*(a))\n#define clr(a) (memset((a),0,sizeof(a)))\n#define ls ((x)<<1)\n#define rs (((x)<<1)|1)\n#define mid (((l)+(r))>>1)\n#define pb push_back\n#define w1 first\n#define w2 second\ninline void read(int &x){\n\tx=0;int f=1;char ch=getchar();\n\twhile(ch<'0'||ch>'9'){if(ch=='-')f=-1;ch=getchar();}\n\twhile(ch>='0'&&ch<='9'){x=x*10+ch-'0';ch=getchar();}\n\tx*=f;\n}\ninline void read(i64 &x){\n\tx=0;int f=1;char ch=getchar();\n\twhile(ch<'0'||ch>'9'){if(ch=='-')f=-1;ch=getchar();}\n\twhile(ch>='0'&&ch<='9'){x=x*10+ch-'0';ch=getchar();}\n\tx*=f;\n}\ninline void judge(){\n\tfreopen(\"in.txt\",\"r\",stdin);\n\tfreopen(\"out.txt\",\"w\",stdout);\n}\n/*******************************head*******************************/\nint n,k;char c;i64 v0,v1,v2;\nint main(){\n\tread(n);read(v0);v1=v2=-1e18;\n\trep(i,1,n-1){\n\t\tscanf(\" %c\",&c);read(k);\n\t//\tputchar(c);\n\t\tif(c=='-')k=-k;\n\t\ti64 val0=v0+k,val1=v1-k,val2=v2+k;\n\t\tv0=max(val0,max(val2,val1));\n\t\tif(c=='+')v1=max(val1,val2),v2=val2;\n\t\telse v1=max(val0,max(val1,val2)),v2=max(val1,val2);\n\t}cout<<v0<<endl;\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<cstring>\n#include<algorithm>\n#define N 100010\n#define ll long long\n#define inf 1000000000000000000LL\nusing namespace std;\nint n, flag[N], w[N], nxt[N];\nll ans, now, s[N];\nchar S[10];\nint main(){\n\tscanf(\"%d\", &n); memset(flag, 0, sizeof(flag));\n\tfor(int i=1; i<=n; i++){\n\t\tscanf(\"%d\", &w[i]);\n\t\tif(i<=n-1){scanf(\"%s\", S+1); if(S[1]=='-')flag[i+1]=1;}\n\t}\n\ts[0]=0; for(int i=1; i<=n; i++)s[i]=s[i-1]+w[i];\n\tnow=n+1;\n\tfor(int i=n; i; i--){nxt[i]=now; if(flag[i])now=i;}\n\tans=inf; now=0;\n\tfor(int i=1; i<=n; i++)if(flag[i]){\n\t\tans=min(ans, now+s[nxt[i]-1]-s[i-1]);\n\t\tnow+=w[i]; \n\t}\n\tprintf(\"%lld\", s[n]-ans*2);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\nusing namespace std;\ntypedef long long ll;\nconst ll MOD = 1e9 + 7;\nint n, k;\nll a[115000];\nchar c[115000];\nll dp[115000][5];\n\nint main()\n{\n    cin >> n;\n    cin >> a[0];\n    for (int i = 0; i <= n; i++)\n        for (int j = 0; j < 5; j++)\n            dp[i][j] = -1e15;\n    dp[0][0] = a[0];\n    for (int i = 1; i < n; i++)\n    {\n        cin >> c[i] >> a[i];\n        if (c[i] == '+')\n        {\n            for (int k = 0; k < 5; k++)\n            {\n                for (int nk = 0; nk <= k; nk++)\n                {\n                    dp[i][nk] = max(dp[i][nk], dp[i - 1][k] + (k % 2 == 0 ? a[i] : -a[i]));\n                }\n            }\n        }\n        else\n        {\n            for (int k = 0; k < 4; k++)\n            {\n                for (int nk = 0; nk <= k + 1; nk++)\n                {\n                    dp[i][nk] = max(dp[i][nk], dp[i - 1][k] + (k % 2 == 0 ? -a[i] : a[i]));\n                }\n            }\n        }\n    }\n    cout << dp[n - 1][0] << endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "/**\n * code generated by JHelper\n * More info: https://github.com/AlexeyDmitriev/JHelper\n * @author Majk\n */\n\n#include <vector>\n#include <iostream>\n#include <unordered_map>\n#include <map>\n#include <iomanip>\n#include <functional>\n#include <algorithm>\n#include <cassert>\n#include <cmath>\n#include <string>\n#include <sstream>\n#include <queue>\nusing namespace std;\n\n#define x first\n#define y second\nconstexpr int MOD = 1000000007;\n\ntypedef std::pair<int,int> pii;\ntypedef long long ll;\n\ntemplate<typename T>std::istream&operator>>(std::istream&i,vector<T>&t) {for(auto&v:t){i>>v;}return i;}\ntemplate<typename T>std::ostream&operator<<(std::ostream&o,const vector<T>&t) {for(size_t i=0;i<t.size();++i){o<<t[i]<<\" \\n\"[i == t.size()-1];}return o;}\n\nnamespace std {\n    template<typename T,typename U>struct hash<pair<T,U>>{hash<T>t;hash<U>u;size_t operator()(const pair<T,U>&p)const{return t(p.x)^(u(p.y)<<7);}};\n}\ntemplate<typename T,typename F>T bsh(T l,T h,const F&f){T r=-1,m;while(l<=h){m=(l+h)/2;if(f(m)){l=m+1;r=m;}else{h=m-1;}}return r;}\ntemplate<typename T,typename F>T bsl(T l,T h,const F&f){T r=-1,m;while(l<=h){m=(l+h)/2;if(f(m)){h=m-1;r=m;}else{l=m+1;}}return r;}\ntemplate<typename T> T gcd(T a,T b) { if (a<b) swap(a,b); return b?gcd(b,a%b):a; }\n\n// #include \"../l/mod.h\"\n\nclass C {\npublic:\n\tvoid solve(istream& cin, ostream& cout) {\n\t\tint N; cin >> N;\n\t\tint B; cin >> B;\n\t\tll A[3] = {B, -1000000000000000LL, -1000000000000000LL};\n\t\tfor (int i = 0; i < N-1; ++i) {\n\t\t\tchar c; cin >> c;\n\t\t\tcin >> B;\n\n\t\t\tif (c == '+') {\n\t\t\t\tA[0] = max(A[0], max(A[1], A[2])) + B;\n\t\t\t\tA[1] = max(A[1], A[2]) - B;\n\t\t\t\tA[2] = A[2] + B;\n\t\t\t} else {\n\t\t\t\tA[2] = max(A[1], A[2]) + B;\n\t\t\t\tA[1] = max(A[1], max(A[0], A[2])) - B;\n\t\t\t\tA[0] = A[0] - B;\n\t\t\t}\n\t\t}\n\n\t\tcout << max(A[0], max(A[1], A[2])) << endl;\n\t}\n};\n\n\nint main() {\n\tios_base::sync_with_stdio(false);\n\tC solver;\n\tstd::istream& in(std::cin);\n\tstd::ostream& out(std::cout);\n\tsolver.solve(in, out);\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <fstream>\n#include <cstdio>\n#include <cmath>\n#include <vector>\n#include <cstring>\n#include <string>\n#include <set>\n#include <map>\n#include <stack>\n#include <queue>\n#include <deque>\n#include <algorithm>\nusing namespace std;\n\n#define REP(i,n) for(int i=0; i<n; ++i)\n#define FOR(i,a,b) for(int i=a; i<=b; ++i)\n#define FORR(i,a,b) for (int i=a; i>=b; --i)\n#define ALL(c) (c).begin(), (c).end()\n\ntypedef long long ll;\ntypedef vector<int> VI;\ntypedef vector<ll> VL;\ntypedef vector<VL> VVL;\ntypedef vector<VI> VVI;\ntypedef pair<int,int> P;\ntypedef pair<ll,ll> PL;\n\nint main() {\n    int n;\n    cin >> n;\n    VL a(n);\n    vector<char> c(n-1);\n    REP(i,n){\n        scanf(\"%lld\", &a[i]);\n        if (i < n-1) cin >> c[i];\n    }\n    VL cumsum(n+1), sum(n+1);\n    REP(i,n) cumsum[i+1] = cumsum[i] + a[i];\n    sum[0] = a[0];\n    REP(i,n-1){\n        if (c[i] == '+') sum[i+1] = sum[i] + a[i+1];\n        else sum[i+1] = sum[i] - a[i+1];\n    }\n    ll ans = sum[n-1];\n    VI neg;\n    REP(i,n-1) if (c[i] == '-') neg.push_back(i);\n    REP(k,neg.size()-1){\n        int x = neg[k], y = neg[k+1];\n        // cout << x << \" \" << y << endl;\n        ll tmp = sum[x] - (cumsum[y+1] - cumsum[x+1]) + cumsum[n] - cumsum[y+1];\n        ans = max(ans, tmp);\n    }\n    cout << ans << endl;\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<stdio.h>\n#include<stdlib.h>\n#include<string.h>\n#include<math.h>\n#include<iostream>\n#include<algorithm>\n#include<stack>\n#include<queue>\n#include<vector>\n#include<set>\n#include<map>\n#include<string>\nusing namespace std;\ntypedef long long ll;\ntypedef pair<int,int>P;\nconst int INF=0x3f3f3f3f;\nconst double pi=acos(-1.0);\nconst double eps=1e-9;\nconst ll mod=1e9+7;\nll dp[100010][3];\nll a;char c;int n;\nint main()\n{\n    cin>>n>>a;\n    memset(dp,-0x3f3f3f3f3f3f3f3f,sizeof(dp));\n    dp[0][0]=a;\n    for(int i=1;i<n;i++)\n    {\n        scanf(\" %c%d\",&c,&a);\n        if(c=='+')\n        {\n            dp[i][2]=dp[i-1][2]+a;\n            dp[i][1]=max(dp[i-1][1]-a,dp[i-1][2]+a);\n            dp[i][0]=max(dp[i-1][0]+a,max(dp[i-1][1]-a,dp[i-1][2]+a));\n        }\n        else\n        {\n            dp[i][2]=dp[i-1][1]+a;\n            dp[i][0]=dp[i][1]=max(dp[i-1][1]+a,max(dp[i-1][2]-a,dp[i-1][0]-a));\n        }\n    }\n    printf(\"%lld\\n\",max(dp[n-1][0],max(dp[n-1][1],dp[n-1][2])));\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<algorithm>\n#include<iostream>\n#include<cstring>\n#include<cstdio>\n#include<cmath>\n#define LL long long\n#define M 100020\nusing namespace std;\nLL read(){\n\tLL nm=0,fh=1; LL cw=getchar();\n\tfor(;!isdigit(cw);cw=getchar()) if(cw=='-') fh=-fh;\n\tfor(;isdigit(cw);cw=getchar()) nm=nm*10+(cw-'0');\n\treturn nm*fh;\n}\nLL n,p[M],G[M],F[M],ans;\nint main(){\n\t//freopen(\".in\",\"r\",stdin);\n\t//freopen(\".out\",\"w\",stdout);\n\tn=read();\n\tfor(LL i=1;i<=n;i++){\n\t\tp[i]=read();\n\t\tif(i>1&&p[i]>0&&p[i-1]>0) p[i-1]+=p[i],i--,n--;\n\t}\n\tfor(LL i=1;i<=n;i++) G[i]=G[i-1]+p[i],F[i]=F[i-1]+abs(p[i]); ans=G[n];\n\tfor(LL i=2;i<=n;i++) if(p[i-1]<0){ans=max(ans,G[i-1]-p[i]+F[n]-F[i]);break;}\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<algorithm>\n#include<cctype>\n#include<cstring>\n#include<iostream>\n#include<vector>\n\nusing namespace std;\n\n#define bomb exit(1)\n#define INF 1061109567\n#define LINF 4557430888798830399ll\n#define pprint(x) print(x),putchar(' ')\n#define fprint(x) print(x),putchar('\\n')\n#define EE(x); struct edge { int nxt,to;ll w; }e[M << 1]; int head[N],ecnt = 1;\\\n\tvoid add(int u,int v,ll w = 0) { e[++ecnt].w = w,e[ecnt].to = v,e[ecnt].nxt = head[u];head[u] = ecnt; }\\\n\tvoid add_edge(int u,int v,ll w = 0) { add(u,v,w),add(v,u,w * x); }\n#define ll long long\nint mod = 1000000007;\nll Mod(ll x) { return x >= mod ? x - mod : x; }\n#define eps 0.0000000001\n#define sqr(x) ((x) * (x))\n#define iter iterator\n#define fi first\n#define se second\n//#define getchar() (SS == TT && (TT = (SS = BB) + fread(BB,1,1 << 15,stdin),TT == SS) ? EOF : *SS++)\n//char BB[1 << 15],*SS = BB,*TT = BB;\nll read()\n{\n\tll x = 0;int f = 1;char ch = getchar();\n\tfor(;!isdigit(ch);ch = getchar()) if(ch == '-') f = -1;\n\tfor(;isdigit(ch);ch = getchar()) x = x * 10 + (ch ^ 48);\n\treturn x * f;\n}\nvoid print(ll x)\n{\n\tif(x < 0) putchar('-'),x = -x;\n\tif(x > 9) print(x / 10);putchar(x % 10 + '0');\n}\n\nconst int N = 100010;\nll ans,res;\nll a[N],pre[N],suf[N],tot;\nint n,op[N];\nint main()\n{\n\tn = read();\n\tfor(int i = 1;i < n;i++)\n\t{\n\t\ttot += (a[i] = read());\n\t\tchar ch = getchar();while(ch != '+' && ch != '-') ch = getchar();\n\t\top[i] = (ch == '+') ? 1 : -1;\n\t}tot += (a[n] = read());\n\tfor(int i = n;i;i--) { suf[i] = a[i];if(~op[i]) suf[i] += suf[i + 1]; }\n\tfor(int i = 1;i <= n;i++) pre[i] = pre[i - 1] + a[i];\n\tres = a[1];ans = -LINF;\n\tfor(int i = 2;i <= n;i++)\n\t{\n\t\tans = max(ans,res + pre[n] - pre[i - 1] - 2 * suf[i]);\n\t\tres += a[i] * op[i - 1];\n\t}fprint(ans);\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\ntypedef long long ll;\n\nint n,i=1,x;\nll a,b=-1e18,c=b;\n\nint main()\n{\n\tscanf(\"%d%lld\",&n,&a);\n\tfor(char o;i<n;++i)\n\t{\n\t\tif(scanf(\" %c%d\",&o,&x),o=='-')a=b=std::max(a-x,c=b+x);\n\t\telse a+=x,b=std::max(b-x,c+=x);\n\t}\n\treturn printf(\"%lld\\n\",a),0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n#define lor(a,b,c) for(register int a=b;a<=c;++a)\n#define ror(a,b,c) for(register int a=c;a>=b;--a)\ntypedef long long ll;\n\nconst int N=1e5+5;\nint n,nxt[N]; ll a[N],sum[N],abssum[N],ans;\n\ntemplate <typename T> inline T read(){\n\tchar tmp=getchar(); T sum=0; bool flag=false;\n\twhile(tmp<'0'||tmp>'9'){\n\t\tif(tmp=='-') flag=true; tmp=getchar();\n\t}\n\twhile(tmp>='0'&&tmp<='9'){\n\t\tsum=(sum<<1)+(sum<<3)+tmp-'0'; tmp=getchar();\n\t}\n\treturn flag?-sum:sum;\n}\n\nint main(){\n\t#ifndef ONLINE_JUDGE\n\tfreopen(\"test.in\",\"r\",stdin);\n\t#endif\n\n\tn=read<int>(); lor(i,1,n) a[i]=read<ll>(),sum[i]=sum[i-1]+a[i],abssum[i]=abssum[i-1]+abs(a[i]); ans=sum[n];\n\tnxt[n+1]=n+1; sum[n+1]=sum[n]; abssum[n+1]=abssum[n]; ror(i,1,n) {if(a[i+1]<0) nxt[i]=i+1; else nxt[i]=nxt[i+1];}\n\tlor(i,1,n) if(a[i]<0){\n\t\tans=max(ans,sum[i-1]+(abssum[n]-abssum[nxt[i]-1])-(abssum[nxt[i]-1]-abssum[i-1]));\n\t}\n\tprintf(\"%lld\\n\",ans);\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "//Created Time:2019年12月02日 星期一 21时16分28秒\n#include <iostream>\n#include <cstdio>\n#include <algorithm>\n#include <cstring>\n#define N 100005\n\nusing namespace std;\n\nlong long ans;\nint a[N][2];\nlong long sum1[N], sum2[N];\n\nint main(){\n\tint n; scanf(\"%d\", &n);\n\tscanf(\"%d\", &a[1][0]); sum1[1] = sum2[1] = a[1][0];\n\tfor(int i = 1; i < n; ++i){\n\t\tint x = 0; bool flag = false; char ch = getchar();\n\t\tfor(; !isdigit(ch); ch = getchar()) flag |= (ch == '-');\n\t\tfor(; isdigit(ch); ch = getchar()) x = x * 10 + (ch ^ 48);\n\t\ta[i + 1][0] = x; a[i + 1][1] = flag; \n\t\tsum1[i + 1] = sum1[i] + (flag ? -x : x);\n\t\tsum2[i + 1] = sum2[i] + x;\n\t}\n\tans = sum1[n];\n\tfor(int i = 1; i <= n; ++i)\n\t\tif(a[i][1]){\n\t\t\tint pos = i + 1; long long tmp = 0;\n\t\t\twhile(!a[pos][1] && pos <= n) tmp += a[pos++][0];\n\t\t\tans = max(ans, sum1[i] - tmp + sum2[n] - sum2[pos - 1]);\n\t\t\ti = pos - 1;\n\t\t}\n\tcout << ans << endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n#define lor(a,b,c) for(register int a=b;a<=c;++a)\n#define ror(a,b,c) for(register int a=c;a>=b;--a)\ntypedef long long ll;\n\nconst int N=1e5+5;\nint n,nxt[N]; ll a[N],sum[N],abssum[N],ans;\n\ntemplate <typename T> inline T read(){\n\tchar tmp=getchar(); T sum=0; bool flag=false;\n\twhile(tmp<'0'||tmp>'9'){\n\t\tif(tmp=='-') flag=true; tmp=getchar();\n\t}\n\twhile(tmp>='0'&&tmp<='9'){\n\t\tsum=(sum<<1)+(sum<<3)+tmp-'0'; tmp=getchar();\n\t}\n\treturn flag?-sum:sum;\n}\n\nint main(){\n\tn=read<int>(); lor(i,1,n) a[i]=read<ll>(),sum[i]=sum[i-1]+a[i],abssum[i]=abssum[i-1]+abs(a[i]); ans=sum[n];\n\tnxt[n+1]=n+1; sum[n+1]=sum[n]; abssum[n+1]=abssum[n]; ror(i,1,n) {if(a[i+1]<0) nxt[i]=i+1; else nxt[i]=nxt[i+1];}\n\tlor(i,1,n) if(a[i]<0){\n\t\tans=max(ans,sum[i-1]+(abssum[n]-abssum[nxt[i]-1])-(abssum[nxt[i]-1]-abssum[i-1]));\n\t}\n\tprintf(\"%lld\\n\",ans);\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define time Time\n#define pii pair<int,int>    \n#define x first    \n#define y second \n#define N 10000005   \n#define pb(x) push_back(x)\n#define mp(x,y) make_pair((x),(y))    \n#define sqr(x) ((x)*(x))\ntypedef long long LL;  \nusing namespace std;\nconst int mod=1e9+7;\nint main(){\n\tint n;\n\twhile(scanf(\"%d\",&n)!=EOF){\n\t\tlong long \tint a[100005];\n\t\tint op[100005];\n\t\top[0]=1;\n\t\tscanf(\"%lld\",&a[0]);\n\t\tfor(int i=1;i<n;i++){\n\t\t\tchar c;\n\t\t\twhile(scanf(\"%c\",&c)&&c!='+'&&c!='-');\n\t\t\tif(c=='+')\n\t\t\top[i]=1;\n\t\t\telse\n\t\t\top[i]=0;\n\t\t\tscanf(\"%lld\",&a[i]);\n\t\t} \n\t\tlong long int sum=0;\n\t\tfor(int i=0;i<n;i++){\n\t\t\tsum+=a[i];\n\t\t}\n\t\tlong long int ans=1e18;\n\t\tint i;\n\t\tfor(i=0;op[i]==1;i++);\n\t\tlong long int ssum=0,sssum=0;\n\t\tfor(;i<n;i++)\n\t\t{\n\t\t\tssum+=a[i];\n\t\t\tif(op[i]==0)\n\t\t\tsssum+=a[i];\n\t\t\tif(op[i+1]==0||i+1==n)\n\t\t\tans=min(ssum+sssum,ans),ssum=0;\n\t\t//\tprintf(\"%lld\\n\",sssum);\n\t\t}\n\t\tans=min(sssum,ans);\n\t\tprintf(\"%lld\\n\",sum-2*ans);\n\t}\n}\n/*\n\n 1 - 1 + 2 + 10 - 2 + 3  + 5\n 1  - 2  - 3  \n*/\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\nusing int64 = long long;\n\nint main()\n{\n  int N, A[100000];\n  char op[100000];\n\n  cin >> N;\n  cin >> A[0];\n  for(int i = 1; i < N; i++) {\n    cin >> op[i] >> A[i];\n  }\n\n  int64 all = A[0];\n  for(int i = 1; i < N; i++) {\n    if(op[i] == '+') all += A[i];\n    else all -= A[i];\n  }\n\n  int64 cost = 0, ans = all, add = 0;\n  for(int i = N - 1; i > 0; i--) {\n    if(op[i] == '+') {\n      cost += 2 * A[i];\n    } else {\n      ans = max(ans, ans + add - cost);\n      add += 2 * A[i];\n      cost = 0;\n    }\n  }\n\n  cout << ans << endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\ntypedef long long  LL;\nint n,a[100010],ty;\nLL F,G;\nchar op[100010];\n\nvoid work()\n{\n\tscanf(\"%d %d\",&n,&a[1]);\n\tfor (int i=2; i<=n; i++)\n\t\t{\n\t\t\tdo  op[i]=getchar();  while ((op[i]!='+')&&(op[i]!='-'));\n\t\t\tscanf(\"%d\",&a[i]);\n\t\t}\n\tF=G=a[1],ty=0;\n\tfor (int i=2; i<=n; i++)\n\t\tif (op[i]=='+')\n\t\t\t{\n\t\t\t\tif (ty)  F-=a[i],G+=a[i];  else  F+=a[i],G-=a[i];\n\t\t\t\tG=max(F,G);\n\t\t\t}else\n\t\t\t{\n\t\t\t\tif (ty)  F+=a[i],G-=a[i];  else  F-=a[i],G+=a[i];\n\t\t\t\tG=max(F,G),ty^=1;\n\t\t\t}\n\tprintf(\"%lld\\n\",G);\n}\n\nint main()\n{\n\twork();\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n#include <vector>\n#include <string>\n#include <utility>\n#include <cstdlib>\n#include <cmath>\n#include <functional>\n#include <queue>\n\nusing namespace std;\ntypedef long long ll;\ntypedef pair<int, int> pii;\n#define fst first\n#define snd second\nconst ll mod = 1000000007;\nconst ll INF = mod * mod;\n\nint main(){\n\tll n;\n\tll a[100010];\n\tbool m[100010];\n\tll dp[10010][3];\n\n\tcin >> n;\n\tm[0] = 0;\n\tcin >> a[0];\n\tfor (int i = 1; i < n; i++) {\n\t\tchar c;\n\t\tcin >> c;\n\t\tif (c == '+')m[i] = false;\n\t\telse m[i] = true;\n\t\tcin >> a[i];\n\t}\n\tdp[0][0] = a[0]; dp[0][1] = -INF; dp[0][2] = -INF;\n\tfor (int i = 1; i < n; i++) {\n\t\tif (m[i]) {\n\t\t\tdp[i][0] = -INF;\n\t\t\tdp[i][1] = -a[i] + max(dp[i - 1][1], dp[i - 1][0]);\n\t\t\tif (dp[i - 1][1] != -INF || dp[i - 1][2] != -INF) {\n\t\t\t\tdp[i][2] = a[i] + max(dp[i - 1][1], dp[i - 1][2]);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdp[i][2] = -INF;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tdp[i][0] = a[i] + max(dp[i - 1][0], dp[i - 1][1]);\n\t\t\tdp[i][1] = -a[i] + dp[i-1][1];\n\t\t\tif (dp[i - 1][2] != -INF) {\n\t\t\t\tdp[i][2] = a[i] + dp[i - 1][2];\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdp[i][2] = -INF;\n\t\t\t}\n\t\t}\n\t}\n\tll ans = dp[n - 1][2];\n\tans = max(ans, dp[n - 1][1]);\n\tans = max(ans, dp[n - 1][0]);\n\tcout << ans << endl;\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nconst int N = 1e6 + 50;\ntypedef long long ll;\nint n, top;\nll S[N], sum;\n\ninline char nc()\n{\n\tstatic char buf[1000000], *p1 = buf, *p2 = buf;\n\treturn p1 == p2 && (p2 = (p1 = buf) + fread(buf, 1, 1000000, stdin), p1 == p2) ? EOF : *p1++;\n}\n\ninline int read()\n{\n\tint res = 0;\n\tchar ch;\n\tdo ch = nc(); while (ch < 48 || ch > 57);\n\tdo res = res * 10 + ch - 48, ch = nc(); while (ch >= 48 && ch <= 57);\n\treturn res;\n}\n\ninline int read_operation()\n{\n\tchar ch;\n\tdo ch = nc(); while (ch != '+' and ch != '-');\n\treturn ch == '+';\n}\n\nint main()\n{\n\tn = read();\n\tS[0] = sum = read(); top = 0;\n\tfor (int i = 1; i < n; ++i)\n\t{\n\t\tif (read_operation() == 0) ++top;\n\t\tll t = read();\n\t\tS[top] += t, sum += t;\n\t}\n\tll ans = -1e18;\n\tfor (int i = 1; i < top; ++i) ans = std::max(ans, sum - 2 * S[i]);\n\tif (top == 0) ans = sum;\n\tprintf(\"%lld\", ans);\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <string>\n#include <vector>\n#include <algorithm>\n#include <numeric>\n#include <set>\n#include <map>\n#include <queue>\n#include <iostream>\n#include <sstream>\n#include <cstdio>\n#include <cmath>\n#include <ctime>\n#include <cstring>\n#include <cctype>\n#include <cassert>\n#include <limits>\n#include <functional>\n#include <iomanip>\n#include <complex>\n#include <bitset>\n\nusing namespace std;\n\n#define rep(i,n) for(int (i)=0;(i)<(int)(n);++(i))\n#define rer(i,l,u) for(int (i)=(int)(l);(i)<=(int)(u);++(i))\n#define reu(i,l,u) for(int (i)=(int)(l);(i)<(int)(u);++(i))\n#if defined(_MSC_VER) || __cplusplus > 199711L\n#define aut(r,v) auto r = (v)\n#else\n#define aut(r,v) __typeof(v) r = (v)\n#endif\n#define each(it,o) for(aut(it, (o).begin()); it != (o).end(); ++ it)\n#define all(o) (o).begin(), (o).end()\n#define pb(x) push_back(x)\n#define mp(x,y) make_pair((x),(y))\n#define mset(m,v) memset(m,v,sizeof(m))\n#define INF 0x3f3f3f3f3f3f3f3fLL\n#define SIZE 8080\n#define REP(i,n) for(int i=0;i<(int)n;++i)\n#define FOR(i,c) for(__typeof((c).begin())i=(c).begin();i!=(c).end();++i)\n#define ALL(c) (c).begin(), (c).end()\n\ntypedef vector<int> vi; typedef pair<int, int> pii; typedef vector<pair<int, int> > vpii; typedef long long ll;\ntypedef pair<int,ll> pill; typedef pair<ll,int> plli; \ntypedef pair<double, int> pdi;\ntemplate<typename T, typename U> inline void amin(T &x, U y) { if(y < x) x = y; }\ntemplate<typename T, typename U> inline void amax(T &x, U y) { if(x < y) x = y; }\ntypedef complex<double> P;\nll MOD=1e9+7;\ntypedef ll Weight;\nstruct Edge {\n\tint src, dst;\n\tWeight weight;\n};\nbool operator < (const Edge &e, const Edge &f) {\n\treturn e.weight != f.weight ? e.weight > f.weight : // !!INVERSE!!\n\te.src != f.src ? e.src < f.src : e.dst < f.dst;\n}\ntypedef vector<Edge> Edges;\ntypedef vector<Edges> Graph;\nint N;\n\nint main(){\n\tcin>>N;\n\tbool minus=false;\n\tvector<ll> data,data2;\n\tll sum=0;\n\tchar x='+';\n\tfor(int i=0;i<N;i++){\n\t\tif(i!=0)cin>>x;\n\t\tll a;\n\t\tcin>>a;\n\t\tif(x=='-')a=-a;\n\t\tdata.pb(a);\n\t}\n\tfor(int i=0;i<N;i++){\n\t\tll a = data[i];\n\t\tif(a<0){\n\t\t\tif(data[i-1]<0){\n\t\t\t\tminus=true;\n\t\t\t}\n\t\t}\n\t\tif(minus){\n\t\t\tsum+=abs(a);\n\t\t}else{\n\t\t\tif(a<0){\n\t\t\t\tdata2.pb(sum);\n\t\t\t\tsum = 0;\n\t\t\t\tdata2.pb(a);\n\t\t\t}else{\n\t\t\t\tsum+=a;\n\t\t\t}\n\t\t}\n\t}\n\tif(sum!=0)data2.pb(sum);\n\t/*rep(i,data2.size())cout<<data2[i]<<\" \";\n\tcout<<endl;*/\n\tll hoge[114514]={0};\n\tll hoge2[114514]={0};\n\thoge[0]=data2[0];\n\tll X=data2[0];\n\tfor(int i=1;i<data2.size();i++){\n\t\thoge[i]=hoge[i-1]+data2[i];\n\t\tX = X+abs(data2[i]);\n\t}\n\tll ans = hoge[data2.size()-1];\n\tfor(int i=0;i<data2.size();i++){\n\t\thoge2[i]=X;\n\t\tX-=abs(data2[i]);\n\t\t\n\t}\n\t//cout<<ans<<endl;\n\tint now=1;\n\twhile(now<data2.size()){\n\t\tans = max(ans,hoge[now]-data2[now+1]+hoge2[now+2]);\n\t\tnow = now+2;\n\t}\n\tcout<<ans<<endl;\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\nint main()\n{\n\tint n;\n\tscanf(\"%d\", &n);\n\tvector <long long int> A(1);\n\tscanf(\"%lld\", &A[0]);\n\tfor (int i = 1; i < n; ++i)\n\t{\n\t\tchar op;\n\t\tlong long int val;\n\t\tscanf(\" %c %lld\", &op, &val);\n\t\tif(op == '+')\n\t\t\tA[A.size()-1]+=val;\n\t\telse\n\t\t\tA.push_back(val);\n\t}\n\tlong long int ans = A[0], temp = 0;\n\tif(A.size() > 1)\n\t{\n\t\ttemp = A[1];\n\t\tfor (int i = 2; i < A.size(); ++i)\n\t\t{\n\t\t\ttemp-=A[i];\n\t\t}\n\t}\n\tprintf(\"%lld\\n\", ans - temp);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\ninline int read(){int x=0,f=1;char ch=getchar();while(ch<'0'||ch>'9'){if(ch=='-')f=-1;ch=getchar();}while(ch>='0'&&ch<='9'){x=x*10+ch-'0';ch=getchar();}return x*f;}\nconst int maxn = 1e5 + 50;\nconst int mod = 1e9 + 7;\n\nint op[maxn] , a[maxn] , n ,nxt[maxn];\nlong long prefix[maxn],dp[maxn],neg[maxn];\nchar s[maxn];\n\nint main(int argc , char * argv[]){\n\tn=read();\n\tint pre = 1;\n\tlong long ans = 0;\n\top[0] = 1;\n\tfor(int i = 1 ; i <= n ; ++ i){\n\t\ta[i] = read();\n\t\tif( i != n ){\n\t\t\tscanf(\"%s\",s);\n\t\t\tif(s[0]=='-')\n\t\t\t\top[i]=-1;\n\t\t\telse\n\t\t\t\top[i]=1;\n\t\t}\n\t\tif(op[i-1]==-1)\n\t\t\tans-=a[i];\n\t\telse\n\t\t\tans+=a[i];\n\t}\n\tfor(int i = 1 ; i <= n ; ++ i){\n\t\tprefix[i] = prefix[i - 1] + a[i] * op[i - 1];\n\t\tneg[i] = neg[i - 1] - a[i];\n\t}\n\tmemset(nxt,-1,sizeof(nxt));\n\tfor(int i = n ; i >= 1 ; -- i){\n\t\tnxt[i] = nxt[i + 1];\n\t\tif(op[i]==-1)\n\t\t\tnxt[i]=i+1;\n\t}\n\tdp[n]=a[n]*op[n-1];\n\tfor(int i = n - 1 ; i >= 1 ; -- i){\n\t\tdp[i]=dp[i+1]+a[i]*op[i-1];\n\t\tif(op[i-1]==-1&&nxt[i]!=-1){\n\t\t\tdp[i]=max(dp[i],-(neg[n]-neg[nxt[i]-1])-(prefix[nxt[i]-1]-prefix[i]+a[i]));\n\t\t}\n\t}\n\tcout<<dp[1]<<endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\ntypedef long long int ll;\ntypedef unsigned int uint;\ntypedef unsigned char uchar;\ntypedef unsigned long long ull;\ntypedef pair<int, int> pii;\ntypedef pair<ll, ll> pll;\ntypedef vector<int> vi;\n\n#define REP(i,x) for(int i=0;i<(int)(x);i++)\n#define REPS(i,x) for(int i=1;i<=(int)(x);i++)\n#define RREP(i,x) for(int i=((int)(x)-1);i>=0;i--)\n#define RREPS(i,x) for(int i=((int)(x));i>0;i--)\n#define FOR(i,c) for(__typeof((c).begin())i=(c).begin();i!=(c).end();i++)\n#define RFOR(i,c) for(__typeof((c).rbegin())i=(c).rbegin();i!=(c).rend();i++)\n#define ALL(container) (container).begin(), (container).end()\n#define RALL(container) (container).rbegin(), (container).rend()\n#define SZ(container) ((int)container.size())\n#define mp(a,b) make_pair(a, b)\n#define pb push_back\n#define eb emplace_back\n#define UNIQUE(v) v.erase( unique(v.begin(), v.end()), v.end() );\n\ntemplate<class T> bool chmax(T &a, const T &b) { if (a<b) { a=b; return 1; } return 0; }\ntemplate<class T> bool chmin(T &a, const T &b) { if (a>b) { a=b; return 1; } return 0; }\ntemplate<class T> ostream& operator<<(ostream &os, const vector<T> &t) {\nos<<\"[\"; FOR(it,t) {if(it!=t.begin()) os<<\",\"; os<<*it;} os<<\"]\"; return os;\n}\ntemplate<class T> ostream& operator<<(ostream &os, const set<T> &t) {\nos<<\"{\"; FOR(it,t) {if(it!=t.begin()) os<<\",\"; os<<*it;} os<<\"}\"; return os;\n}\ntemplate<class S, class T> ostream& operator<<(ostream &os, const pair<S,T> &t) { return os<<\"(\"<<t.first<<\",\"<<t.second<<\")\";}\ntemplate<class S, class T> pair<S,T> operator+(const pair<S,T> &s, const pair<S,T> &t){ return pair<S,T>(s.first+t.first, s.second+t.second);}\ntemplate<class S, class T> pair<S,T> operator-(const pair<S,T> &s, const pair<S,T> &t){ return pair<S,T>(s.first-t.first, s.second-t.second);}\n\nconst int INF = 1<<28;\nconst double EPS = 1e-8;\nconst int MOD = 1000000007;\n\n\nint T, n, m;\n\nint main(int argc, char *argv[]){\n\tios::sync_with_stdio(false);\n\tcin >> n;\n\tll sum = 0, ans = 1ll << 60, mins = 0, seq = 0;\n\tcin >> sum;\n\tREP(i, n - 1){\n\t\tchar op;\n\t\tll x;\n\t\tcin >> op >> x;\n\t\tsum += x;\n\t\tif(op == '-'){\n\t\t\tif(mins){\n\t\t\t\tans = min(ans, mins + seq);\n\t\t\t}\n\t\t\tmins += x;\n\t\t\tseq = 0;\n\t\t}else seq += x;\n\t}\n\tans = min(ans, mins);\n\tcout << sum - 2 * ans << endl;\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n\nusing namespace std;\n\nint N, a[100009], frst[100009];\nlong long s[100009];\nchar sg[100009];\n\nlong long sum (int i, int j)\n{\n    if (j > N) j = N;\n    if (i > j) return 0;\n    return s[j] - s[i - 1];\n}\n\nint main ()\n{\n//freopen (\"input\", \"r\", stdin);\n//freopen (\"output\", \"w\", stdout);\n\nscanf (\"%d\", &N);\nscanf (\"%d\", &a[1]), s[1] = a[1];\nfor (int i=2; i<=N; i++)\n    scanf (\" %c %d\", &sg[i], &a[i]), s[i] = s[i - 1] + a[i];\nfrst[N + 1] = N + 1;\nfor (int i=N; i>=2; i--)\n    if (sg[i] == '-') frst[i] = i;\n    else frst[i] = frst[i + 1];\nlong long curr = a[1], ans = -1LL << 50;\nfor (int i=2; i<=N; i++)\n{\n    if (sg[i] == '-')\n    {\n        if (i == 2)\n            i = 2;\n        ///try putting a bracket right before a[i] and after its preceding minus\n        long long curr2 = curr + sum (frst[i + 1], N) - sum (i, frst[i + 1] - 1);\n        if (curr2 > ans) ans = curr2;\n        ///\n        curr -= a[i];\n    }\n    else curr += a[i];\n}\nif (curr > ans) ans = curr;\nprintf (\"%lld\\n\", ans);\nreturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\nconst int N = 100010;\ntypedef long long LL;\nint op[N], num[N]; LL dp[N][3]; char s[5];\nint main() {\n\tint n; scanf(\"%d%d\", &n, &num[1]), op[1] = 1;\n\tfor (int i = 2; i <= n; i++) {\n\t\tscanf(\"%s%d\", s + 1, &num[i]);\n\t\tif (s[1] == '-') op[i] = -1; else op[i] = 1;\n\t}\n\tmemset(dp, -0x3f, sizeof(dp)), dp[1][0] = num[1];\n\tfor (int i = 2; i <= n; i++) {\n\t\tdp[i][1] = dp[i - 1][1] - op[i] * num[i];\n\t\tdp[i][0] = dp[i - 1][0] + op[i] * num[i];\n\t\tdp[i][2] = dp[i - 1][2] + op[i] * num[i];\n\t\tif (op[i - 1] == -1) {\n\t\t\tdp[i][1] = max(dp[i][1], dp[i - 1][0] - op[i] * num[i]);\n\t\t\tdp[i][2] = max(dp[i][1], dp[i - 1][1] + op[i] * num[i]);\n\t\t}\n\t\tdp[i][1] = max(dp[i][1], dp[i][2]);\n\t\tdp[i][0] = max(dp[i][0], dp[i][1]);\n\t}\n\tprintf(\"%lld\\n\", dp[n][0]);\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\n#define int long long\n#define all(v) (v).begin(), (v).end()\n#define resz(v, ...) (v).clear(), (v).resize(__VA_ARGS__)\n#define reps(i, m, n) for(int i = (int)(m); i < (int)(n); i++)\n#define rep(i, n) reps(i, 0, n)\n\ntemplate<class T1, class T2> void chmin(T1 &a, T2 b){if(a>b)a=b;}\ntemplate<class T1, class T2> void chmax(T1 &a, T2 b){if(a<b)a=b;}\n\nusing Pi = pair<int, int>;\nusing Tapris = tuple<int, int, int>;\nusing vint = vector<int>;\n\nconst int inf = 1LL << 55;\nconst int mod = 1e9 + 7;\n\nconst int MAX_N = 200020;\n\nint dp[3][MAX_N];\n\nsigned main() {\n  cin.tie(0);\n  ios_base::sync_with_stdio(0);\n  cout << fixed << setprecision(12);\n\n  int n;\n  cin >> n;\n  fill(dp[0], dp[3], -inf);\n  cin >> dp[0][0];\n  rep(i, n-1) {\n    char op;\n    int a;\n    cin >> op >> a;\n    if(op == '+') {\n      // ...+a\n      dp[0][i+1] = max(dp[0][i]+a, dp[1][i]+a);\n      // ...-(...+a OR ...-(...-(...)+a\n      dp[1][i+1] = max(dp[1][i]-a, dp[2][i]-a);\n      // ...-(...-(...+a\n      dp[2][i+1] = dp[2][i]+a;\n      // ...-(...-(...-(... EQ ...-(...-(...))-(...\n    } else {\n      // ALWAYS ...-(a\n      dp[0][i+1] = -inf;\n      // ...-(a OR ...-(...)-(a OR ...-(...-(...))-(a\n      dp[1][i+1] = max({dp[0][i]-a, dp[1][i]-a, dp[2][i]-a});\n      // ...-(...-(a OR ...-(...-(...)-(a\n      dp[2][i+1] = max(dp[1][i]+a, dp[2][i]+a);\n    }\n  }\n  cout << max({dp[0][n-1], dp[1][n-1], dp[2][n-1]}) << endl;\n\n\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<algorithm>\n#include<cassert>\n#define ll long long\nusing namespace std;\ninline int read(){\n\tint re=0,flag=1;char ch=getchar();\n\twhile(!isdigit(ch)){\n\t\tif(ch=='-') flag=-1;\n\t\tch=getchar();\n\t}\n\twhile(isdigit(ch)) re=(re<<1)+(re<<3)+ch-'0',ch=getchar();\n\treturn re*flag;\n}\nint n,ch[100010];ll a[100010];\nll dp0,dp1,dp2;\nint main(){\n\tn=read();int i;char c;\n\tfor(i=1;i<=n;i++){\n\t\ta[i]=read();\n\t\tif(i==n) break;\n\t\tc=getchar();\n\t\twhile(c!='+'&&c!='-') c=getchar();\n\t\tch[i+1]=(c=='-');\n//\t\tcout<<\"finish readin \"<<i<<' '<<a[i]<<' '<<ch[i+1]<<'\\n';\n\t}\n\tdp0=0;dp1=dp2=-1e15;\n\tfor(i=1;i<=n;i++){\n\t\tif(ch[i]){\n\t\t\tdp0-=a[i];\n\t\t\tdp1+=a[i];\n\t\t\tdp2-=a[i];\n\t\t\tdp2=max(dp2,dp1);\n\t\t\tdp1=max(dp1,dp0);\n\t\t}\n\t\telse{\n\t\t\tdp0+=a[i];\n\t\t\tdp1-=a[i];\n\t\t\tdp2+=a[i];\n\t\t}\n\t\tdp1=max(dp2,dp1);\n\t\tdp0=max(dp1,dp0);\n\t}\n\tcout<<dp0<<'\\n';\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define INF 0x3f3f3f3f\nusing namespace std;\ntypedef long long LL;\nconst double eps = 1e-10;\nconst int maxn = 1e5 + 100;\nvector<int>g;\nlong long a[maxn],sum[maxn],ss[maxn]; char s[maxn];\nint main() {\n#ifdef ac\n    freopen(\"in.txt\" , \"r\" , stdin);\n//    freopen(\"out.txt\" , \"w\" , stdout);\n#endif\n    int n;\n    cin >> n;\n    cin >> a[1];\n    if(n==1){cout <<a[1]<<endl;return 0;}\n    sum[0]=0;ss[0]=0;\n    sum[1]=ss[1]=a[1];int flag=0;\n\n    for(int i=2;i<=n;++i) {\n        scanf(\"%c%d\",&s[i],&a[i]);\n        sum[i]=sum[i-1]+a[i];\n        if(s[i]=='-'){g.push_back(i);ss[i]=ss[i-1]-a[i];flag=1;}\n        else ss[i]=ss[i-1]+a[i];\n\n    }\n    if(!flag){cout <<ss[n]<<endl;return 0;}\n    ss[n+1]=ss[n];sum[n+1]=sum[n];\n    g.push_back(g[g.size()-1]+1);\n    long long ans=ss[n];\n    for(int i=0;i<g.size()-1;++i) {\n        int x=g[i],y=g[i+1]-1;\n\n        ans=max(ss[x-1]-(sum[y]-sum[x-1])+(sum[n]-sum[y]),ans);\n//         cout <<x << \" \" << y << \" \" << ans << endl;\n    }\n    cout << ans << endl;\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define me(a,x) memset(a,x,sizeof a)\n#define cp(a,x) memcpy(a,x,sizeof a)\nusing namespace std;\ntypedef long long LL;\nconst int N=1e5+3;\nint a[N]; char s[N];\nLL p[N],f[N];\nint main(){\n    int n,i,j; scanf(\"%d\",&n);\n    for(i=1;i<=n;++i){\n        scanf(\"%d\",&a[i]);\n        if(i<n)scanf(\"\\n%c\",&s[i+1]);\n    }\n    for(i=n;i;--i) p[i]=p[i+1]+a[i];\n    j=n+1;\n    for(i=n;i>1;--i){\n        if(s[i]=='+')continue;\n        f[i]=max( f[j]+p[i+1]-p[j],p[j]-(p[i+1]-p[j]) )-a[i];\n        j=i;\n    }\n    printf(\"%lld\\n\",f[j]+p[1]-p[j]);\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define mset(a, b) memset(a, b, sizeof(a))\n#define mcpy(a, b) memcpy(a, b, sizeof(a))\n#define rg register\nusing namespace std;\ntypedef long long LL;\nconst int MAXN = 100005;\nconst LL INF = 0x3f3f3f3f3f3f3f3f;\n\ntemplate <typename T> inline void read(T &AKNOI) {\n\tT x = 0, flag = 1;\n\tchar ch = getchar();\n\twhile (!isdigit(ch)) {\n\t\tif (ch == '-') flag = -1;\n\t\tch = getchar();\n\t}\n\twhile (isdigit(ch)) {\n\t\tx = x * 10 + ch - '0';\n\t\tch = getchar();\n\t}\n\tAKNOI = flag * x;\n}\n\nLL dp[MAXN][3];\n\nvoid solve() {\n\tint n; read(n);\n\tint x; read(x);\n\tdp[1][0] = x;\n\tdp[1][1] = dp[1][2] = -INF;\n\tfor (int i=2;i<=n;++i) {\n\t\tread(x);\n\t\tif (x < 0) {\n\t\t\tdp[i][0] = -INF;\n\t\t\tdp[i][1] = max(dp[i-1][0], dp[i-1][1]) + x;\n\t\t\tdp[i][2] = max(dp[i-1][1], dp[i-1][2]) - x;\n\t\t} else {\n\t\t\tdp[i][0] = max(dp[i-1][0], dp[i-1][1]) + x;\n\t\t\tdp[i][1] = max(dp[i-1][1], dp[i-1][2]) - x;\n\t\t\tdp[i][2] = dp[i-1][2] + x;\n\t\t}\n\t}\t\n\tprintf(\"%lld\\n\", max(dp[n][0], max(dp[n][1], dp[n][2])));\n}\n\nint main() {\n\tsolve();\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\n#define pb push_back\n#define mp make_pair\n\n#define fi first\n#define se second\n\ntypedef long long ll;\n\nusing namespace std;\n\nconst ll INF = 2e15;\n\nll dp2[505][505];\n\nll dp[505][505];\n\nchar sign[505];\n\nint arr[505];\n\nint n;\n\nll calc2(int, int);\nll calc(int, int);\n\nvoid init() {\n    for (int l = 1; l <= n; ++l) {\n        for (int r = l; r <= n; ++r) {\n            dp[l][r] = dp2[l][r] = -INF;\n        }\n    }\n}\n\nll calc(int l, int r) {\n    if (l > r) {\n        return 0;\n    }\n\n    if (l == r) {\n        return arr[l];\n    }\n\n    ll &cur = dp[l][r];\n\n    if (cur != -INF) {\n        return cur;\n    }\n\n    cur = 0;\n\n    for (int i = l; i <= r; ++i) {\n        if (i == l || sign[i - 1] == '+') {\n            cur += arr[i];\n        }\n        else {\n            cur -= arr[i];\n        }\n    }\n\n    for (int mid = l; mid < r; ++mid) {\n        if (sign[mid] == '-') {\n            cur = max(cur, calc(l, mid) - calc2(mid + 1, r));\n        }\n        else {\n            cur = max(cur, calc(l, mid) + calc(mid + 1, r));\n        }\n    }\n\n    return cur;\n}\n\nll calc2(int l, int r) {\n    if (l > r) {\n        return 0;\n    }\n\n    if (l == r) {\n        return arr[l];\n    }\n\n    ll &cur = dp2[l][r];\n\n    if (cur != -INF) {\n        return cur;\n    }\n\n    cur = 0;\n\n    for (int i = l; i <= r; ++i) {\n        if (i == l || sign[i - 1] == '+') {\n            cur += arr[i];\n        }\n        else {\n            cur -= arr[i];\n        }\n    }\n\n    for (int mid = l; mid < r; ++mid) {\n        if (sign[mid] == '-') {\n            cur = min(cur, calc2(l, mid) - calc(mid + 1, r));\n        }\n        else {\n            cur = min(cur, calc2(l, mid) + calc2(mid + 1, r));\n        }\n    }\n\n    return cur;\n}\n\nvoid solve() {\n    scanf(\"%d\", &n);\n\n    assert(n <= 500);\n\n    for (int i = 1; i <= n; ++i) {\n        scanf(\"%d\", &arr[i]);\n\n        if (i < n) {\n            scanf(\" %c\", &sign[i]);\n        }\n    }\n\n    init();\n\n    printf(\"%lld\", calc(1, 5));\n}\n\nint main() {\n    #ifdef BThero\n        freopen(\"input.txt\", \"r\", stdin);\n        freopen(\"output.txt\", \"w\", stdout);\n    #endif // BThero\n\n    int tt = 1;\n\n    while (tt--) {\n        solve();\n    }\n\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\nconst int maxn = 1e5 + 10;\nll dp[maxn][3];\nchar op[maxn][10];\nint a[maxn];\nint n;\nll f(int i, int j)\n{\n\tif(~dp[i][j]) return dp[i][j];\n\tll ret = a[i] * ((j & 1) ? -1 : 1);\n\tif(i == n) return dp[i][j] = ret;\n\tif(op[i][0] == '+')\n\t{\n\t\tif(j > 0) ret += max(f(i + 1, j - 1), f(i + 1, j));\n\t\telse ret += f(i + 1, j);\n\t\treturn dp[i][j] = ret;\n\t}\n\telse\n\t{\n\t\tif(j == 0) ret += f(i + 1, j + 1);\n\t\telse if(j == 1) ret += max(f(i + 1, j), f(i + 1, j + 1));\n\t\telse ret += f(i + 1, j);\n\t\treturn dp[i][j] = ret;\n\t}\n}\nint main()\n{\n\tmemset(dp, -1, sizeof dp);\n\tscanf(\"%d\", &n);\n\tscanf(\"%d\", &a[1]);\n\tfor(int i = 2; i <= n; ++i) scanf(\"%s%d\", op[i - 1], &a[i]);\n\tprintf(\"%lld\\n\", f(1, 0));\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define maxn 100100\nusing namespace std;\ntypedef long long ll;\nll f[maxn],s[maxn],t[maxn],mx=0;\nint a[maxn],n;\nchar c[10];\nint main(){\n\tscanf(\"%d\",&n);\n\tfor(int i=1,fu;i<=n;++i){\n\t\tif(i>1){\n\t\t\tscanf(\"%s\",c);\n\t\t\tfu=(c[0]=='-'?-1:1);\n\t\t} else fu=1;\n\t\tscanf(\"%d\",&a[i]);\n\t\ta[i]*=fu;\n\t}\n\tfor(int i=n,lst=0;i>=1;--i){\n\t\ts[i]=s[i+1]+a[i];\n\t\tt[i]=t[i+1]+abs(a[i]);\n\t\tf[i]=-1ll<<60;\n\t\tif(a[i]<0){\n\t\t\tif(lst)f[i]=-(s[i+1]-s[lst])+t[lst]+a[i];\n\t\t\tlst=i;\n\t\t}\n\t\tf[i]=max(f[i],f[i+1]+a[i]);\n\t}\n\tprintf(\"%lld\",f[1]);\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\n#include<vector>\n#include<complex>\nusing namespace std;\n#define chmax(a,b) a=max(a,b);\ntypedef long long ll;\ntypedef pair<ll,ll> P;\n#define N 100010\nvector<ll> v;\nll n,s[N];\nint main(){\n  cin>>n; char op='+';\n  ll befpo=-1;\n  for(int i=0;i<n;i++){\n    if(i)cin>>op; ll a;cin>>a;\n    if(op=='+'){\n      if(~befpo)befpo+=a;\n      else befpo=a;\n    }\n    else{\n      if(~befpo)v.push_back(befpo); befpo=-1;\n      v.push_back(-a);\n    }\n  }if(~befpo)v.push_back(befpo);\n  n=v.size(); s[n]=0;\n  for(int i=n-1;i>=0;i--){\n    s[i]=s[i+1]+abs(v[i]);\n  }\n  //for(int i=0;i<n;i++)cout<<v[i]<<\" \";cout<<endl;\n  ll ans=-1e17,sum=0;\n  for(int i=0;i<n-1;i++){\n    sum+=v[i];\n    if(v[i]>0)continue;\n    chmax(ans,sum+-v[i+1]+s[i+2]);\n  }\n  cout<<ans<<endl;\n    return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define fi first\n#define se second\n#define bug cout<<\"--------------\"<<endl\nusing namespace std;\ntypedef long long ll;\nconst double PI=acos(-1.0);\nconst double eps=1e-6;\nconst ll inf=1e15;\nconst ll llf=1e18;\nconst int mod=1e9+7;\nconst int maxn=1e5+10;\nint n,x;\nll dp[3][maxn];\nint main(){\n\tios::sync_with_stdio(false);\n\t//freopen(\"in\",\"r\",stdin);\n\tcin>>n>>x;\n\tdp[0][1]=x;\n\tdp[1][1]=dp[2][1]=-inf;\n//\tcout<<dp[0][1]<<\" \"<<dp[1][1]<<\" \"<<dp[2][1]<<endl;\n\tfor(int i=2;i<=n;i++){\n\t\tchar c;\n\t\tcin>>c>>x;\n\t\tif(c=='+'){\n\t\t\tdp[0][i]=max(dp[0][i-1],dp[1][i-1])+x;\n\t\t\tdp[1][i]=max(dp[1][i-1],dp[2][i-1])-x;\n\t\t\tdp[2][i]=dp[2][i-1]+x;\n\t\t}else{\n\t\t\tdp[0][i]=max(dp[0][i-1]-x,dp[1][i-1]-x);\n\t\t\tdp[1][i]=max({dp[0][i-1]-x,dp[1][i-1]+x,dp[2][i-1]+x});\n\t\t\tdp[2][i]=max(dp[1][i-1]+x,dp[2][i-1]-x);\n\t\t}\n\t//\tcout<<dp[0][i]<<\" \"<<dp[1][i]<<\" \"<<dp[2][i]<<endl;\n\t}\n\tcout<<max({dp[0][n],dp[1][n],dp[2][n]});\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n#define int long long\nconst double PI = 3.14159265358979323846;\ntypedef vector<int> vint;\ntypedef pair<int, int> pint;\nint dx[8] = {1, 0, -1, 0, 1, -1, -1, 1};\nint dy[8] = {0, 1, 0, -1, 1, 1, -1, -1};\n\nint N;\nint A[110000];\nchar op[110000];\n\nsigned main() {\n    cin >> N;\n    cin >> A[0];\n    for (int i = 1; i < N; i++)cin >> op[i] >> A[i];\n    op[N] = '-'; A[N] = 0;\n\n    int sum = A[0], total_minus = 0, cur_minus = 0, min_dec = LLONG_MAX;\n    for (int i = 1; i <= N; i++) {\n        if (op[i] == '+') {\n            if (total_minus > 0)cur_minus += A[i];\n        } else {\n            if (total_minus > 0)min_dec = min(min_dec, total_minus + cur_minus);\n            total_minus += A[i];\n            cur_minus = 0;\n        }\n        sum += A[i];\n    }\n    cout << sum - 2 * min_dec;\n\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n\nint main() {\n  unsigned N;\n  std::cin >> N;\n  std::vector<long long> A(N);\n  std::vector<char> op(N);\n  op[0] = '+';\n  std::cin >> A[0];\n  for (unsigned i = 1; i < N; ++i) {\n    std::cin >> op[i] >> A[i];\n  }\n  std::vector<std::vector<long long>> dp(N, std::vector<long long>(3));\n  dp[0][0] = A[0];\n  dp[0][1] = std::numeric_limits<long long>::min() / 2;\n  dp[0][2] = std::numeric_limits<long long>::min() / 2;\n  for (unsigned i = 1; i < N; ++i) {\n    if (op[i] == '+') {\n      dp[i][0] = std::max(dp[i - 1][0] + A[i], dp[i - 1][1] + A[i]);\n      dp[i][1] = std::max(dp[i - 1][1] - A[i], dp[i - 1][2] - A[i]);\n      dp[i][2] = dp[i - 1][2] + A[i];\n    } else {\n      dp[i][0] = std::max(dp[i - 1][0] - A[i], dp[i - 1][1] - A[i]);\n      dp[i][1] = std::max(std::max(dp[i - 1][0] - A[i], dp[i - 1][2] + A[i]), dp[i - 1][1] + A[i]);\n      dp[i][2] = std::max(dp[i - 1][1] + A[i], dp[i - 1][2] + A[i]);\n    }\n  }\n  std::cout << std::max(std::max(dp.back()[0], dp.back()[1]), dp.back()[2]);\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstring>\n#include <algorithm>\n#include <vector>\n#include <string>\n#include <math.h>\n#include <iomanip>\n#include <limits>\n#include <list>\n#include <queue>\n#include <tuple>\n#include <map>\n#include <stack>\n#include <set>\nusing namespace std;\n#define MOD (long long int)(1e9+7)\n#define ll long long int\n#define rep(i,n) for(int i=0; i<(int)(n); i++)\n#define reps(i,n) for(int i=1; i<=(int)(n); i++)\n#define REP(i,n) for(int i=n-1; i>=0; i--)\n#define REPS(i,n) for(int i=n; i>0; i--)\n#define INF (int)(1123456789)\n#define LINF (long long int)(112345678901234567)\n#define chmax(a, b) a = (((a)<(b)) ? (b) : (a))\n#define chmin(a, b) a = (((a)>(b)) ? (b) : (a))\n#define all(v) v.begin(), v.end()\n\nconst int N = (int)3e5;\n\nll mpow(ll a, ll b){\n  if(b==0) return 1;\n  else if(b%2==0){ll memo = mpow(a,b/2); return memo*memo%MOD;}\n  else return mpow(a,b-1) * a % MOD;\n}\nll lpow(ll a, ll b){\n  if(b==0) return 1;\n  else if(b%2==0){ll memo = lpow(a,b/2); return memo*memo;}\n  else return lpow(a,b-1) * a;\n}\nll gcd(ll a, ll b){\n  if(b==0) return a;\n  else return gcd(b, a%b);\n}\nvector<ll> kaijo_memo;\nll kaijo(ll n){\n  if(kaijo_memo.size() > n) return kaijo_memo[n];\n  if(kaijo_memo.size() == 0) kaijo_memo.push_back(1);\n  while(kaijo_memo.size() <= n) kaijo_memo.push_back(kaijo_memo[kaijo_memo.size()-1] * kaijo_memo.size() % MOD);\n  return kaijo_memo[n];\n}\nvector<ll> gyaku_kaijo_memo;\nll gyaku_kaijo(ll n){\n  if(gyaku_kaijo_memo.size() > n) return gyaku_kaijo_memo[n];\n  if(gyaku_kaijo_memo.size() == 0) gyaku_kaijo_memo.push_back(1);\n  while(gyaku_kaijo_memo.size() <= n) gyaku_kaijo_memo.push_back(gyaku_kaijo_memo[gyaku_kaijo_memo.size()-1] * mpow(gyaku_kaijo_memo.size(), MOD-2) % MOD);\n  return gyaku_kaijo_memo[n];\n}\n\nll nCr(ll n, ll r){\n  if(n == r) return 1;//0個の丸と-1個の棒みたいな時に時に効く？不安.\n  if(n < r || r < 0) return 0;\n  ll ret = 1;\n  ret *= kaijo(n); ret %= MOD;\n  ret *= gyaku_kaijo(r); ret %= MOD;\n  ret *= gyaku_kaijo(n-r); ret %= MOD;\n  return ret;\n}\n\n\nint main(void){\n  ll n;cin>>n;\n  vector<ll> A;\n  ll sum = 0;\n  rep(i,n){\n    char p = '+';\n    if(i != 0){\n      cin>>p;\n    }\n    ll a;cin>>a;\n    if(p == '+'){\n      A.push_back(a);\n    }else{\n      A.push_back(-a);\n    }\n    sum += A[i];\n  }\n  /*rep(i,A.size()){\n    cerr<<A[i]<<\" \";\n  }\n  cerr<<sum<<endl;*/\n\n  ll ps = 0, ms = 0;\n  ll ans = sum;\n  int i = n-1;\n  while(i >= 0){\n    while(i >= 0 && A[i] > 0){\n      ps += A[i];\n      i--;\n    }\n    if(i >= 0){\n      chmax(ans, sum + (-ms - ps) * 2);\n      ms += A[i];\n      ps = 0;\n    }\n    i--;\n  }\n  cout<<ans<<endl;\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "// warm heart, wagging tail,and a smile just for you!\n//                                                                     ███████████\n//                                                                   ███╬╬╬╬╬╬╬╬╬╬███\n//                                                                ███╬╬╬╬╬████╬╬╬╬╬╬███\n//                                            ███████████       ██╬╬╬╬╬████╬╬████╬╬╬╬╬██\n//                                      █████████╬╬╬╬╬████████████╬╬╬╬╬██╬╬╬╬╬╬███╬╬╬╬╬██\n//                               ████████╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬█████████╬╬╬╬╬╬██╬╬╬╬╬╬╬██\n//                             ████╬██╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬█████████╬╬╬╬╬╬╬╬╬╬╬██\n//                           ███╬╬╬█╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬██╬╬███╬╬╬╬╬╬╬█████\n//                         ███╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬██╬╬╬████████╬╬╬╬╬██\n//                       ███╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬███╬╬╬╬╬╬╬╬╬███\n//                     ███╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬█████╬╬╬╬╬╬╬██\n//                 ████╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬████╬╬╬╬╬████\n//     █████████████╬╬╬╬╬╬╬╬██╬╬╬╬╬████╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬█████╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬███╬╬╬╬██████\n//   ████╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬██╬╬██████╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬██████╬╬╬╬╬╬╬███████████╬╬╬╬╬╬╬╬██╬╬╬██╬╬╬██\n// ███╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬██╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬██╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬████╬╬╬╬╬╬╬╬╬╬╬█╬╬╬╬╬╬╬██╬╬╬╬╬╬╬╬██\n// ██╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬██╬╬╬╬▓▓▓▓▓▓╬╬╬████╬╬████╬╬╬╬╬╬╬▓▓▓▓▓▓▓▓██╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬██╬╬╬╬╬╬╬███\n// ██╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬██████▓▓▓▓▓▓▓╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬▓▓▓▓▓▓▓██╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬██╬╬╬╬█████\n// ███╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬███╬╬╬╬╬██╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬█████╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬████████\n//   ███╬╬╬╬╬╬╬╬╬╬╬╬╬█████╬╬╬╬╬╬╬╬██╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬███╬╬██╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬██\n//       ██████████████  ████╬╬╬╬╬╬███████████████████████████╬╬╬╬╬██╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬████\n//                         ███████                           █████  ███████████████████  \n//\n#include \"bits/stdc++.h\"\nusing namespace std;\n#define INF (1<<30)\n#define LINF (1LL<<60)\n#define fs first\n#define sc second\n#define int long long\n#define FOR(i,a,b) for(int i=(a);i<(b);++i)\n#define RFOR(i,a,b) for(int i = (b-1);i>=(a);--i)\n#define REP(i,n)  FOR(i,0,(n))\n#define RREP(i,n) RFOR(i,0,(n))\n#define ITR(itr,mp) for(auto itr = (mp).begin(); itr != (mp).end(); ++itr)\n#define RITR(itr,mp) for(auto itr = (mp).rbegin(); itr != (mp).rend(); ++itr)\n#define range(i,a,b) ((a)<=(i) && (i)<(b))\n#define debug(x)  cout << #x << \" = \" << (x) << endl\n#define SP << \" \" << \ntemplate<typename T1,typename T2> inline void chmin(T1 &a,T2 b){if(a>b) a=b;}\ntemplate<typename T1,typename T2> inline void chmax(T1 &a,T2 b){if(a<b) a=b;}\n#define MSB(x) (63-__builtin_clzll(x))\n#define pcnt(x) (__builtin_popcountll(x))\n#define parity(i,j) (i&(1LL<<j))\ntypedef pair<int,int> P;\ntypedef tuple<int,int,int> T;\ntypedef vector<int> vec;\ntypedef vector<vector<int>> mat;\n\nsigned main(){\n  ios::sync_with_stdio(false);\n  cin.tie(0);\n\n  int n;\n  cin >> n;\n\n  vector<int> a(n);\n  vector<int> c(n,1);\n  REP(i,n){\n    char x;\n    if(i) cin >> x;\n    if(x=='-') c[i] = -1;\n    cin >> a[i];\n  }\n\n  int pm[3] = {1,-1,1};\n  mat dp(n+1,vec(4,-LINF));\n  dp[0][0] = 0;\n  REP(i,n){\n    REP(j,3){\n      REP(k,j+1){\n        chmax(dp[i+1][k],dp[i][j]+a[i]*c[i]*pm[j]);\n      }\n      if(c[i]==-1) chmax(dp[i+1][j+1],dp[i][j]+a[i]*c[i]*pm[j]);\n    }\n  }\n\n  cout << max({dp[n][0],dp[n][1],dp[n][2]}) << endl;\n\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<stdio.h>\n#include<vector>\n#include<queue>\n#include<string>\n#include<stack>\n#include<algorithm>\n#include<memory.h>\nusing namespace std;\ntypedef long long ll;\n#define se second\n#define fi first\n#define pb push_back\nconst int N = 1e6 + 5, M = 1e9 + 7;\nint n, a[N];\nchar op[N];\nll sm[N];\nint main() {\n\t//\tfreopen(\"in.txt\", \"r\", stdin);\n\t\tscanf(\"%d\", &n);\n\t\top[0] = '+';\n\t\tscanf(\"%d\", &a[0]);\n\t\tsm[0] = a[0];\n\t\tfor (int i = 1;i < n;i++)scanf(\" %c%d\", &op[i], &a[i]),sm[i]+=sm[i-1]+a[i];\n\t\tll best = 0,pos=0,all=0;\n\t\tfor (int i = n - 1;i >= 0;i--) {\n\t\t\tif (op[i] == '+')pos += a[i];\n\t\t\telse {\n\t\t\t\tbest = max(best - a[i] + pos, -a[i] - pos + all);\n\t\t\t\tall += pos + a[i];\n\t\t\t\tpos = 0;\n\t\t\t}\n\t\t}\n\t\tbest += pos;\n\t\tcout << best << endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstring>\n#include<cstdio>\n#include<vector>\n#include<algorithm>\n\nusing namespace std;\n\n#define LL long long\ninline LL read(){\n\tLL x=0,f=1;char c=getchar();\n\tfor(;!isdigit(c);c=getchar()) if(c=='-') f=-1;\n\tfor(;isdigit(c);c=getchar()) x=x*10+c-'0';\n\treturn x*f;\n}\nconst LL MAXN = 100010;\nconst LL INF = 2147483600;\n\nLL N;\nLL opr[MAXN+1];\nLL a[MAXN+1],f[MAXN+1][5];\n\ninline LL fan(LL x,LL c){\n\tif(c&1) return -x; return x;\n}\n\nint main(){\n\t//freopen(\".in\",\"r\",stdin);\n\t//freopen(\".out\",\"w\",stdout);\n\tN=read(); \n\tfor(LL i=1;i<=N;i++){\n\t\ta[i]=read(); char c;\n\t\tif(i<N){\n\t\t\tc=getchar();\n\t\t\tgetchar();\n\t\t\topr[i+1]=(c=='+'?1:-1);\n\t\t}\n\t} memset(f,-127,sizeof(f));\n\topr[1]=1; f[0][0]=0;\n\tfor(LL i=1;i<=N;i++){\n\t\tfor(LL j=0;j<=min(N,4LL);j++){\n\t\t\tif(j>0&&opr[i]==-1) f[i][j]=f[i-1][j-1]+fan(opr[i],j-1)*a[i];\n\t\t\tif(j<4&&j<N) f[i][j]=max(f[i][j],f[i-1][j+1]+fan(opr[i],j+1)*a[i]);\n\t\t\tf[i][j]=max(f[i][j],f[i-1][j]+fan(opr[i],j)*a[i]);\n\t\t}\n\t}\n\tfor(LL i=0;i<=4LL;i++) f[N][0]=max(f[N][0],f[N][i]);\n\tprintf(\"%lld\\n\",f[N][0]);\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\ntypedef long long ll;\ntypedef pair<ll, ll> p_ll;\n\ntemplate<class T>\nvoid debug(T itr1, T itr2) { auto now = itr1; while(now<itr2) { cout << *now << \" \"; now++; } cout << endl; }\n#define repr(i,from,to) for (ll i=(ll)from; i<(ll)to; i++)\n#define all(vec) vec.begin(), vec.end()\n#define rep(i,N) repr(i,0,N)\n#define per(i,N) for (int i=(int)N-1; i>=0; i--)\n\nconst ll MOD = pow(10,9)+7;\nconst ll LLINF = pow(2,61)-1;\nconst int INF = pow(2,30)-1;\n\nvector<ll> fac;\nvoid c_fac(int x=pow(10,6)+10) { fac.resize(x,true); rep(i,x) fac[i] = i ? (fac[i-1]*i)%MOD : 1; }\nll inv(ll a, ll m=MOD) { ll b = m, x = 1, y = 0; while (b!=0) { int d = a/b; a -= b*d; swap(a,b); x -= y*d; swap(x,y); } return (x+m)%m; }\nll nck(ll n, ll k) { return fac[n]*inv(fac[k]*fac[n-k]%MOD)%MOD; }\nll gcd(ll a, ll b) { if (a<b) swap(a,b); return b==0 ? a : gcd(b, a%b); }\nll lcm(ll a, ll b) { return a/gcd(a,b)*b; }\n\n\nint main() {\n  ll N; cin >> N;\n  ll A[N]; bool op[N-1];\n  rep(i,N) {\n    cin >> A[i];\n    if (i!=N-1) { char top; cin >> top; op[i] = top=='+'; }\n  }\n\n  ll dp[N][3] = {}; rep(i,N) fill_n(dp[i],3,-1*LLINF); dp[0][0] = A[0];\n  rep(i,N-1) {\n    if (op[i]) {\n      dp[i+1][0] = max(max(dp[i][0]+A[i+1], dp[i][1]-A[i+1]), dp[i][2]+A[i+1]);\n      dp[i+1][1] = max(dp[i][1]-A[i+1], dp[i][2]+A[i+1]);\n      dp[i+1][2] = dp[i][2]+A[i+1];\n    }\n    else {\n      dp[i+1][0] = max(max(dp[i][0]-A[i+1], dp[i][1]+A[i+1]), dp[i][2]-A[i+1]);\n      dp[i+1][1] = max(max(dp[i][0]-A[i+1], dp[i][1]+A[i+1]), dp[i][2]-A[i+1]);\n      dp[i+1][2] = max(dp[i][1]+A[i+1], dp[i][2]-A[i+1]);\n    }\n  }\n  // rep(i,N) debug(dp[i],dp[i]+3);\n\n  ll result = *max_element(dp[N-1],dp[N-1]+3);\n  cout << result << endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define ll long long\nusing namespace std;\nconst int N=100010,oo=1e9;\nint n;\nll ans=0;\nint a[N],f[N][3],tot[N];\nbool b[N];\nint main(){\n//\tfreopen(\"in.txt\",\"r\",stdin);\n\tchar c;\n\tscanf(\"%d\",&n);\n\tb[1]=1;\n\tfor(int i=1;i<=n;i++){\n\t\ttot[i]=tot[i-1];\n\t\tif(i>=2){\n\t\t\tscanf(\" %c\",&c);\n\t\t\tif(c=='+') b[i]=1;\n\t\t\telse tot[i]++;\n\t\t}\n\t\tscanf(\"%d\",&a[i]);\n\t}\n\tfor(int i=1;i<=n;i++){\n\t\t\tif(b[i]){\n\t\t\t\tf[i][0]=max(f[i-1][0],max(f[i-1][1],f[i-1][2]))+a[i];\n\t\t\t\tf[i][1]=max(f[i-1][1]-a[i],f[i-1][2]+a[i]);\n\t\t\t\tf[i][2]=f[i-1][2]+a[i];\n\t\t\t}else{\n\t\t\t\tf[i][0]=max(f[i-1][0],max(f[i-1][1],f[i-1][2]))-a[i];\n\t\t\t\tf[i][1]=max(f[i-1][0]-a[i],max(f[i-1][1]+a[i],f[i-1][2]-a[i]));\n\t\t\t\tf[i][2]=max(f[i-1][1]+a[i],f[i-1][2]-a[i]);\n\t\t\t}\n\t\t\tif(tot[i]<2) f[i][2]=-oo;\n\t\t\tif(tot[i]<1) f[i][1]=-oo;\n\t}\n//\tfor(int i=1;i<=n;i++){\n//\t\tcout<<f[i][0]<<\" \";\n//\t}\n//\tcout<<endl;\n//\tfor(int i=1;i<=n;i++){\n//\t\tcout<<f[i][1]<<\" \";\n//\t}\n//\tcout<<endl;\n//\tfor(int i=1;i<=n;i++){\n//\t\tcout<<f[i][2]<<\" \";\n//\t}\n//\tcout<<endl;\n\tans=max(f[n][0],max(f[n][1],f[n][2]));\n\tcout<<ans;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\n#define F first\n#define S second\n#define pb push_back\n#define ld  double\n#define ll long long\n#define int long long\n\nusing namespace std;\n\nconst int MAXN = 101 * 1001 , MOD = 1e9 + 7 , sq = 333  ;\n\n\nint a[MAXN];\n\nchar ch[MAXN] ;\n\nint dp[MAXN][2] ;\n\nint32_t main()\n{\n   ios::sync_with_stdio(0);cin.tie(0);\n   int n , s = 0 , ind = -1 ,cnt = 0 ;\n   cin >> n ;\n   for(int i = 0 ; i < n ; i ++ )\n   {\n       if(i)\n        cin >> ch[i] ;\n       cin >> a[i] ;\n       s += a[i] ;\n       if(ch[i]=='-'&&ind==-1)\n        ind = i ;\n       if(i&&ch[i]=='-')\n        a[i]*=-1,cnt++;\n   }\n   if(ind==-1)\n    return cout<<s,0 ;\n    if(cnt==1)\n        return cout<<s+2*a[ind],0;\n    ind++;\n    s+=2*a[ind-1] ;\n   while(ch[ind]!='-')\n    s-=2*a[ind++];\n   return cout<<s,0;\n   dp[n-1][0] = a[n-1] ;\n   dp[n-1][1] = abs(a[n-1]);\n   for(int i = n - 2 ; i ; i -- )\n   {\n       dp[i][0] = a[i] + dp[i+1][0] ;\n       if(a[i]<0)\n        dp[i][0] = max(dp[i][0],a[i]+dp[i+1][1]) ;\n       dp[i][1] = dp[i][0] ;\n       dp[i][1] = max(dp[i][1],-a[i]+dp[i+1][1]);\n       if(a[i]<0)\n        dp[i][1] = max(dp[i][1],-a[i]+dp[i+1][0]);\n       cout<<i<<' '<<dp[i][0]<<' '<<dp[i][1]<<' '<<a[i]<<'\\n';\n   }\n   if(n==1)\n    return cout<<a[0],0;\n   cout<<a[0] + dp[1][0];\n\n\n\n}\n"
  },
  {
    "language": "C++",
    "code": "/*\nThough leaves are many , the root is one.\nThrough all the lying days of my youth\nI swayed my leaves and flowers in the sun.\nNow I may wither into the truth.\n\t  \t  \t- William Butler Yeats\n*/\n//#pragma GCC optimize(\"Ofast,no-stack-protector\")\n//#pragma GCC target(\"sse,sse2,sse3,ssse3,sse4,popcnt,abm,mmx\")\n//#pragma GCC target(\"avx,tune=native\")\n#include<bits/stdc++.h>\n#define int long long\n#pragma comment(\" -Wl,--stack=1024000000\")\n//#include<ext/pb_ds/assoc_container.hpp>\nusing namespace std;\nnamespace fastio{\n    char in[100000];\n    int itr=0,llen=0;\n    char get(){\n        if(itr==llen)llen=fread(in,1,100000,stdin),itr=0;\n        if(llen==0)return EOF;\n        return in[itr++];\n    }\n    char out[100000];\n    int itr2=0;\n    void put(char c){\n        out[itr2++]=c;\n        if(itr2==100000){\n            fwrite(out,1,100000,stdout);\n            itr2=0;\n        }\n    }\n    int clear(){\n        fwrite(out,1,itr2,stdout);\n        itr2=0;\n        return 0;\n    }\n    int getint(){\n        int ret=0;char ch=get();\n        while (ch<'0'||ch>'9'){\n            ch=get();if(ch=='-')return -getint();\n        }\n        while ('0'<=ch&&ch<='9'){\n            ret=ret*10-48+ch;\n            ch=get();\n        }\n        return ret;\n    }\n    string getstr(){\n        string ret=\"\";\n        char ch=get();\n        while(ch==' '||ch=='\\n')ch=get();\n        while(ch!=' '&&ch!='\\n')ret.push_back(ch),ch=get();\n        return ret;\n    }\n    void putstr(string s){\n        for(int i=0;i<s.size();i++)put(s[i]);\n    }\n    void putint(int x){\n        if(x<0){\n            put('-');\n            putint(-x);\n            return;\n        }\n        if(x==0){\n            put('0');\n            return;\n        }\n        char c[40];int pos=0;\n        while(x){\n            c[pos++]='0'+x%10;\n            x/=10;\n        }\n        for(int i=pos-1;i>=0;i--)put(c[i]);\n        put(' ');\n    }\n    void putln(int x){\n        if(x<0){\n            put('-');\n            putln(-x);\n            return;\n        }\n        if(x==0){\n            put('0');put('\\n');\n            return;\n        }\n        char c[40];int pos=0;\n        while(x){\n            c[pos++]='0'+x%10;\n            x/=10;\n        }\n        for(int i=pos-1;i>=0;i--)put(c[i]);\n        put('\\n');\n    }\n}\nusing namespace fastio;\n//using namespace __gnu_pbds;\nconst int inf=0x3f3f3f3f;\nconst double eps=1e-6;\nconst int mod=1000000007;\ntypedef long long ll;\n#ifndef LOCAL\n#define cerr if(0)cout\n#define eprintf(...) 0\n#else\n#define eprintf(...) fprintf(stderr, __VA_ARGS__)\n#endif\ninline string getstr(string &s,int l,int r){string ret=\"\";for(int i=l;i<=r;i++)ret.push_back(s[i]);return ret;}\nint modpow(int x,int y,int md=mod){if(y==0)return 1;int ret=modpow(x,y>>1,md);ret=(ll)ret*ret%md;if(y&1)ret=(ll)ret*x%md;return ret;}\nint n;\nint a[100005];\nchar c[100005];\nbool used[100005];\nint dp[100005][2];\nsigned main(){\n//\tfreopen(\"data.cpp\",\"r\",stdin); \n\tn=getint();\n\ta[1]=getint();\n\tfor(int i=2;i<=n;i++){\n\t\tc[i]=getstr()[0];a[i]=getint();\n\t}\n\tvector<int>vec;\n\tfor(int i=1;i<=n;i++){\n\t\tif(used[i])continue;\n\t\tint now=i+1;\n\t\twhile(now<=n&&c[now]=='+'){\n\t\t\tnow++;\n\t\t}\n\t\tint sum=0;\n\t\tfor(int j=i;j<now;j++){\n\t\t\tused[j]=1;\n\t\t\tsum+=a[j];\n\t\t}\n\t\tvec.push_back(sum);\n\t}\n\t#ifndef LOCAL\n\t\tfor(int i=0;i<vec.size();i++){\n\t\t\tcerr<<vec[i]<<\" \";\n\t\t}cerr<<endl;\n\t#endif\n\tif(vec.size()==1){\n\t\tcout<<vec[0]<<endl;\n\t}else{\n\t\tint v=vec[0]-vec[1];\n\t\tfor(int i=2;i<vec.size();i++)v+=vec[i];\n\t\tcout<<v<<endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\n//#include <boost/multiprecision/cpp_int.hpp>\n//typedef boost::multiprecision::cpp_int ll;\ntypedef long double dd;\n#define i_7 (ll)(1E9+7)\n//#define i_7 998244353\n#define i_5 i_7-2\nll mod(ll a){\n    ll c=a%i_7;\n    if(c>=0)return c;\n    return c+i_7;\n}\ntypedef pair<ll,ll> l_l;\nll inf=(ll)1E16;\n#define rep(i,l,r) for(ll i=l;i<=r;i++)\n#define pb push_back\nll max(ll a,ll b){if(a<b)return b;else return a;}\nll min(ll a,ll b){if(a>b)return b;else return a;}\nvoid Max(ll &pos,ll val){pos=max(pos,val);}//Max(dp[n],dp[n-1]);\nvoid Min(ll &pos,ll val){pos=min(pos,val);}\n//void Add(ll &pos,ll val){pos=mod(pos+val);}\ndd EPS=1E-9;\n#define fastio ios::sync_with_stdio(false); cin.tie(0); cout.tie(0);\n////////////////////////////\n\nint main(){fastio\n    ll n;cin>>n;\n    ll c[n];\n    string s;string debri;\n    rep(i,0,n-1){\n        cin>>c[i];\n        if(i!=n-1){\n            cin>>debri;\n            s+=debri;\n        }\n    }\n    if(n==1){\n        cout<<c[0]<<endl;return 0;\n    }\n    rep(i,0,n-2){\n        if(s[i]=='-')break;\n        if(i==n-2){\n            ll ans=0;rep(i,0,n-1)ans+=c[i];\n            cout<<ans<<endl;return 0;\n        }\n    }\n    ll spos=0;\n    ll anspre=c[0];\n    rep(i,0,n-2){\n        if(s[i]=='+'){\n            anspre+=c[i+1];\n        }else{\n            spos=i+1;\n            break;\n        }\n    }\n    vector<ll>a,b;\n    while(spos<=n-1){\n        a.pb(c[spos]);//s[i-1]=='='\n        spos++;\n        ll sum=0;\n        while(spos<=n-1&&s[spos-1]=='+'){\n            sum+=c[spos];\n            spos++;\n        }\n        b.pb(sum);\n    }\n    //for(auto x:a)cout<<x<<\" \";cout<<endl;\n    //for(auto x:b)cout<<x<<\" \";cout<<endl;\n    ll vs=a.size();\n    ll xs[vs],ys[vs];\n    xs[0]=0;\n    rep(i,1,vs-1){\n        xs[i]=xs[i-1]+b[i-1]-a[i-1];\n    }\n    ys[vs-1]=0;\n    for(ll i=vs-2;i>=0;i--){\n        ys[i]=ys[i+1]+a[i+1]+b[i+1];\n    }\n    //rep(i,0,vs-1)cout<<xs[i]<<\" \";cout<<endl;\n    //rep(i,0,vs-1)cout<<ys[i]<<\" \";cout<<endl;\n    ll ans=-inf;\n    rep(i,0,vs-1){\n        Max(ans,xs[i]+ys[i]-a[i]-b[i]);\n    }\n    cout<<ans+anspre<<endl;\n    \n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n#define fs first\n#define sc second\n#define mp make_pair\n#define pb push_back\n#define eb emplace_back\n#define ALL(A) A.begin(),A.end()\n#define RALL(A) A.rbegin(),A.rend()\ntypedef long long LL;\ntypedef pair<int,int> P;\nconst LL mod=1000000007;\nconst LL LINF=1LL<<62;\nconst LL INF=1<<17;\n\n\n\nint main(){\n    int n;cin >> n;\n    char c[n-1];\n    int a[n];\n    for (int i = 0; i < 2*n-1; i++) {\n        if(i%2==0) cin >> a[i/2];\n        else cin >> c[i/2];\n    }\n    LL dp[n+1][3];\n    for (int i = 0; i < n+1; i++) {\n        for (int j = 0; j < 3; j++) {\n            dp[i][j]=-LINF;\n        }\n    }\n    dp[0][0]=a[0];\n    for (int i = 0; i < n-1; i++) {\n        if(c[i]=='+'){\n            dp[i+1][0]=max(dp[i][0]+a[i+1],dp[i][1]+a[i+1]);\n            dp[i+1][1]=dp[i][1]-a[i+1];\n            dp[i+1][2]=dp[i][2]+a[i+1];\n        }\n        else{\n            dp[i+1][1]=dp[i][0]-a[i+1];\n            dp[i+1][2]=max(dp[i][2]+a[i+1],dp[i][1]+a[i+1]);\n        }\n    }\n    cout << max({dp[n-1][0],dp[n-1][1],dp[n-1][2]}) << endl;\n    return 0;\n}\n\n\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n//ios::sync_with_stdio(false);cin.tie(0);cout.tie(0);\nusing namespace std;\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef pair<int,int> pii;\ntypedef pair<pii,int> ppii;\ntypedef pair<int,pii> pipi;\ntypedef pair<ll,ll> pll;\ntypedef pair<pll,ll> ppll;\ntypedef pair<ll,pll> plpl;\ntypedef tuple<ll,ll,ll> tl;\nll mod=1000000007;\nll mod2=998244353;\nll mod3=1000003;\nll mod4=998244853;\nll inf=1000000000000000000;\ndouble pi=acos(-1.0);\n#define rep(i,m,n) for(ll i=m;i<n;i++)\n#define rrep(i,n,m) for(ll i=n;i>=m;i--)\nint dh[4]={1,-1,0,0};\nint dw[4]={0,0,1,-1};\nint ddh[8]={-1,-1,-1,0,0,1,1,1};\nint ddw[8]={-1,0,1,-1,1,-1,0,1};\nll lmax(ll a,ll b){\n    if(a<b)return b;\n    else return a;\n}\nll lmin(ll a,ll b){\n    if(a<b)return a;\n    else return b;\n}\nll gcd(ll a,ll b){\n    if(a<b)swap(a,b);\n    if(b==0)return a;\n    if(a%b==0)return b;\n    return gcd(b,a%b);\n}\nll Pow(ll n,ll k){\n    ll ret=1;\n    ll now=n;\n    while(k>0){\n        if(k&1)ret*=now;\n        now*=now;\n        k/=2;\n    }\n    return ret;\n}\nll beki(ll n,ll k,ll md){\n  ll ret=1;\n  ll now=n;\n  while(k>0){\n    if(k%2==1){\n      ret*=now;\n      ret%=md;\n    }\n    now*=now;\n    now%=md;\n    k/=2;\n  }\n  return ret;\n}\nll gyaku(ll n,ll md){\n  return beki(n,md-2,md);\n}\n\nint main(){\n    ios::sync_with_stdio(false);cin.tie(0);\n    ll n;cin>>n;\n    ll aa;cin>>aa;\n    vector<ll> v;\n    v.push_back(aa);\n    rep(i,0,n-1){\n        char c;cin>>c;\n        ll a;cin>>a;\n        if(c=='+')v.push_back(a);\n        else v.push_back(-a);\n    }\n    ll c=0;\n    vector<ll> w;\n    rep(i,0,n){\n        if(v[i]<0)w.push_back(i);\n    }\n    ll sum[n+1];\n    ll summ[n+1];\n    sum[0]=0;\n    summ[0]=0;\n    rep(i,0,n){\n        sum[i+1]=sum[i]+v[i];\n        summ[i+1]=summ[i]+abs(v[i]);\n    }\n    ll ans=sum[n];\n    if(w.size()==0){\n        cout<<ans<<endl;\n        return 0;\n    }\n    rep(i,0,w.size()-1){\n        ll num=w[i];\n        ll cnt=sum[num+1];\n        cnt+=-(summ[w[i+1]]-summ[w[i]+1]);\n        cnt+=summ[n]-summ[w[i+1]];\n        ans=max(ans,cnt);\n    }\n    cout<<ans<<endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "   #include <bits/stdc++.h>\n \n//    #include <boost/multiprecision/cpp_int.hpp>\n #define int long long\n #define inf  1000000007\n #define pa pair<int,int>\n #define ll long long\n #define pal pair<double,double>\n #define ppap pair<pa,int>\n  #define PI 3.14159265358979323846\n  #define paa pair<int,char>\n  #define  mp make_pair\n  #define  pb push_back\n  #define EPS (1e-8)\n                                          \n    int dx[8]={0,1,0,-1,1,1,-1,-1};\n    int dy[8]={1,0,-1,0,-1,1,1,-1};\n                                            using namespace std;\n                                   \t\t\tclass pa3{\n                                            \tpublic:\n                                            \tint x;\n                                   \t\t\t\tint y,z;\n                                            \tpa3(int x=0,int y=0,int z=0):x(x),y(y),z(z) {}\n                                            \tbool operator < (const pa3 &p) const{\n                                            \t\tif(x!=p.x) return x<p.x;\n                                            \t\tif(y!=p.y) return y<p.y;\n                                            \t\t return z<p.z;\n                                            \t\t//return x != p.x ? x<p.x: y<p.y;\n                                            \t}\n                                   \t\t\t\tbool operator > (const pa3 &p) const{\n                                            \t\tif(x!=p.x) return x>p.x;\n                                            \t\tif(y!=p.y) return y>p.y;\n                                            \t\t return z>p.z;\n                                            \t\t//return x != p.x ? x<p.x: y<p.y;\n                                            \t}\n                                            \tbool operator == (const pa3 &p) const{\n                                            \t\treturn x==p.x && y==p.y && z==p.z;\n                                            \t}\n                                            \t\tbool operator != (const pa3 &p) const{\n                                            \t\t\treturn !( x==p.x && y==p.y && z==p.z);\n                                            \t}\n                                            \n                                            };\n                                            \n                                            class pa4{\n                                            \tpublic:\n                                            \tint x;\n                                            \tint y,z,w;\n                                            \tpa4(int x=0,int y=0,int z=0,int w=0):x(x),y(y),z(z),w(w) {}\n                                            \tbool operator < (const pa4 &p) const{\n                                            \t\tif(x!=p.x) return x<p.x;\n                                            \t\tif(y!=p.y) return y<p.y;\n                                            \t\tif(z!=p.z)return z<p.z;\n                                            \t\treturn w<p.w;\n                                            \t\t//return x != p.x ? x<p.x: y<p.y;\n                                            \t}\n                                            \tbool operator > (const pa4 &p) const{\n                                            \t\tif(x!=p.x) return x>p.x;\n                                            \t\tif(y!=p.y) return y>p.y;\n                                            \t\tif(z!=p.z)return z>p.z;\n                                            \t\treturn w>p.w;\n                                            \t\t//return x != p.x ? x<p.x: y<p.y;\n                                            \t}\n                                            \tbool operator == (const pa4 &p) const{\n                                            \t\treturn x==p.x && y==p.y && z==p.z &&w==p.w;\n                                            \t}\n                                            \t\t\n                                            \n                                            };\n                                            class pa2{\n                                            \tpublic:\n                                            \tint x,y;\n                                            \tpa2(int x=0,int y=0):x(x),y(y) {}\n                                            \tpa2 operator + (pa2 p) {return pa2(x+p.x,y+p.y);}\n                                            \tpa2 operator - (pa2 p) {return pa2(x-p.x,y-p.y);}\n                                            \tbool operator < (const pa2 &p) const{\n                                            \t\treturn y != p.y ? y<p.y: x<p.x;\n                                            \t}\n                                            \tbool operator > (const pa2 &p) const{\n                                            \t\treturn x != p.x ? x<p.x: y<p.y;\n                                            \t}\n                                            \tbool operator == (const pa2 &p) const{\n                                            \t\treturn abs(x-p.x)==0 && abs(y-p.y)==0;\n                                            \t}\n                                            \tbool operator != (const pa2 &p) const{\n                                            \t\treturn !(abs(x-p.x)==0 && abs(y-p.y)==0);\n                                            \t}\n                                            \t\t\n                                            \n                                            };\n                                            \n \n                      \n                                string itos( int i ) {\n                                ostringstream s ;\n                                s << i ;\n                                return s.str() ;\n                                }\n                                 \n                                int gcd(int v,int b){\n                                \tif(v>b) return gcd(b,v);\n                                \tif(v==b) return b;\n                                \tif(b%v==0) return v;\n                                \treturn gcd(v,b%v);\n                                }\n                 \n                            \n                                int mod;\nint extgcd(int a, int b, int &x, int &y) {\n    if (b == 0) {\n        x = 1;\n        y = 0;\n        return a;\n    }\n    int d = extgcd(b, a%b, y, x);\n    y -= a/b * x;\n    return d;\n}\npa operator+(const pa & l,const pa & r) {   \n    return {l.first+r.first,l.second+r.second};                                    \n}    \npa operator-(const pa & l,const pa & r) {   \n    return {l.first-r.first,l.second-r.second};                                    \n}  \n                                \n                int pr[1000010];\n                int inv[1000010];\n                \n                int beki(int wa,int rr,int warukazu){\n                \tif(rr==0) return 1%warukazu;\n                \tif(rr==1) return wa%warukazu;\n                \twa%=warukazu;\n                \tif(rr%2==1) return ((ll)beki(wa,rr-1,warukazu)*(ll)wa)%warukazu;\n                \tll zx=beki(wa,rr/2,warukazu);\n                \treturn (zx*zx)%warukazu;\n                }\n \n                \n    \t\t\tint comb(int nn,int rr){\n    \t\t\t\tif(rr<0 || rr>nn || nn<0) return 0;\n    \t\t\t\tint r=pr[nn]*inv[rr];\n    \t\t\t\tr%=mod;\n    \t\t\t\tr*=inv[nn-rr];\n    \t\t\t\tr%=mod;\n    \t\t\t\treturn r;\n    \t\t\t}\n               \n                void gya(int ert){\n                \tpr[0]=1;\n                \tfor(int i=1;i<=ert;i++){\n                \t\tpr[i]=(pr[i-1]*i)%mod;\n                \t}\n                \t\tinv[ert]=beki(pr[ert],mod-2,mod);\n                \tfor(int i=ert-1;i>=0;i--){\n                \t\tinv[i]=inv[i+1]*(i+1)%mod;\n                \t}\n                }\n                \n              //   cin.tie(0);\n    \t\t//\tios::sync_with_stdio(false);\n    \t\t\t//priority_queue<pa3,vector<pa3>,greater<pa3>> pq;            \n                 //sort(ve.begin(),ve.end(),greater<int>());\n //   mt19937(clock_per_sec);\n  //  mt19937_64 rng(chrono::steady_clock::now().time_since_epoch().count()) ;\n      \n       \n       \n                               //----------------kokomade tenpure------------\n\nint dp[100020][3];\n\nsigned main(){\n\n   cin.tie(0);\n\tios::sync_with_stdio(false);\n\nint n;\ncin>>n;\n\tvector<int> ve(n);\n\t\n\tfor(int i=0;i<n;i++){\n\t\tfor(int j=0;j<3;j++)dp[i][j]=-inf*1000000000ll;\n\t\tstring s;\n\t\tint y;\n\t\tif(i==0)s=\"+\";\n\t\telse cin>>s;\n\t\tcin>>y;\n\t\tif(s==\"-\")y*=-1;\n\t\tve[i]=y;\n\t}\n\t\n\tdp[0][0]=0;\n\t\n\tfor(int i=0;i<n;i++){\n\t\tif(ve[i]>=0){\n\t\t\tdp[i+1][0]=max(dp[i+1][0],dp[i][2]+ve[i]);\n\t\t\tdp[i+1][1]=max(dp[i+1][1],dp[i][2]-ve[i]);\n\t\t\tdp[i+1][2]=max(dp[i+1][2],dp[i][2]+ve[i]);\n\t\t\t\n\t\t\tdp[i+1][0]=max(dp[i+1][0],dp[i][1]+ve[i]);\n\t\t\tdp[i+1][1]=max(dp[i+1][1],dp[i][1]-ve[i]);\n\t\t\t\n\t\t\tdp[i+1][0]=max(dp[i+1][0],dp[i][0]+ve[i]);\n\t\t\n\t\t}\n\t\telse{\n\t\t\tve[i]*=-1;\n\t\t\t\n\t\t\tdp[i+1][1]=max(dp[i+1][1],dp[i][2]-ve[i]);\n\t\t\tdp[i+1][2]=max(dp[i+1][2],dp[i][2]+ve[i]);\n\t\t\t\n\t\t\t\n\t\t\tdp[i+1][1]=max(dp[i+1][1],dp[i][1]-ve[i]);\n\t\t\tdp[i+1][2]=max(dp[i+1][2],dp[i][1]+ve[i]);\n\t\t\t\n\t\t\t\n\t\t\tdp[i+1][1]=max(dp[i+1][1],dp[i][0]-ve[i]);\n\t\t\t\n\t\t}\n\t//\tcout<<dp[i+1][0]<<\" \"<<dp[i+1][1]<<\" \"<<dp[i+1][2]<<endl;\n\t}\n\t\n\t\tcout<<max({dp[n][0],dp[n][1],dp[n][2]})<<endl;\nreturn 0;\n \t\n \n }\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n//#define int long long\n#define reps(i,s,n) for(int (i)=(s);(i)<(ll)(n);++(i))\n#define rep(i,n) reps(i,0,n)\n#define rept(i,n) reps(i,0,((n)+1))\n#define repst(i,s,n) reps(i,s,((n)+1))\n#define reprt(i,n,t) for(ll (i)=(n);(i)>=(t);--(i))\n#define repr(i,n) reprt(i,n,0)\n#define each(itr,v) for(auto &(itr):(v))\n#define all(c) (c).begin(),(c).end()\n#define pb push_back\n#define mp(x,y) make_pair((x),(y))\n#define fi first\n#define se second\n#define tmax(x,y,z) max(x,max(y,z))\n#define tmin(x,y,z) min(x,min(y,z))\n#define chmin(x,y) x=min(x,y)\n#define chmax(x,y) x=max(x,y)\n#define ln '\\n'\n#define dbg(x) cout<<#x\" = \"<<(x)<<ln\n#define dbga(x,n) {cout<<#x\" : \";for(int (i)=0;i<(n);++i){cout<<((x)[i])<<(i==((n)-1)?'\\n':' ');}}\n\ntypedef long double ld;\ntypedef long long ll;\ntypedef pair<int,int> pii;\ntypedef pair<ll,ll> pll;\ntypedef vector<int> vi;\ntypedef vector<ll> vl;\ntypedef vector<bool> vb;\ntypedef vector<ld> vld;\ntypedef vector<pii> vpii;\ntypedef vector<pll> vpll;\ntypedef vector<vector<int> > mat;\n\nconst ll inf = (ll)1e9+10;\nconst ll linf = (ll)1e18+10;\nconst ll mod = (ll)(1e9+7);\nconst int dx[] = {0, 1, 0, -1};\nconst int dy[] = {1, 0, -1, 0};\nconst int ddx[] = {0, 1, 1, 1, 0, -1, -1, -1};\nconst int ddy[] = {1, 1, 0, -1, -1, -1, 0, 1};\nconst double eps = 1e-10;\n\nstruct oreno_initializer {\n\toreno_initializer() {\n\t\tcin.tie(0);\n\t\tios::sync_with_stdio(0);\n\t}\n} oreno_initializer;\n\n// ━━━━☆・‥…━━━☆・‥…━━━☆・‥…━━━☆・‥…━━━☆・‥…━━━☆・‥…━━━☆・‥…━━━☆・‥…━━━☆・‥…\n// .｡.:( ^ω^)・ﾟ＋.｡.:( ^ω^)・ﾟ＋.｡.:( ^ω^)・ﾟ＋.｡.:( ^ω^)・ﾟ＋.｡.:( ^ω^)・ﾟ＋\n// ・‥…━━━☆・‥…━━━☆・‥…━━━☆・‥…━━━☆・‥…━━━☆・‥…━━━☆・‥…━━━☆・‥…━━━☆・‥…━━━☆・\n\n// dp[i][j]: i項目を見ている時点でj個括弧が開いているときのそこまでの式の値の最大値\n// +の直後に括弧を開いても意味はない また-の直後には必ず括弧を開いても問題ない(すぐ閉じればなかったことにできるため)\n// こうすると括弧が偶数個開いているときは項の正負はそのまま、奇数個開いているときは逆転するので括弧を開いている場所を保持しなくて済む\n// 括弧は0,1,2個の3通りだけ考えればいい 3つ目の括弧を開くのは今開いている2つの括弧を閉じて新しい括弧を1つ開くのと同じなため\n// 例えば -(1-(3-(4.. は -(1-(3))-(4.. と同じ\n\nll n, f, a[114514], p[114514], dp[114514][3];\nchar c;\n\nsigned main() {\n\tcin >> n >> f;\n\trep(i,n-1) {\n\t\tcin >> c >> a[i];\n\t\tp[i] = (c=='+');\n\t}\n\trep(i,n) rep(j,3) dp[i][j] = -linf;\n\tdp[0][0] = f;\n\trep(i,n-1) {\n\t\tif (p[i]) {\n\t\t\tdp[i+1][2] = dp[i][2] + a[i];\n\t\t\tdp[i+1][1] = max(dp[i+1][2], dp[i][1] - a[i]);\n\t\t\tdp[i+1][0] = max(dp[i+1][1], dp[i][0] + a[i]);\n\t\t} else {\n\t\t\tdp[i+1][2] = dp[i][1] + a[i];\n\t\t\tdp[i+1][1] = tmax(dp[i+1][2], dp[i][0] - a[i], dp[i][2] - a[i]);\n\t\t\tdp[i+1][0] = max(dp[i+1][1], dp[i][1] + a[i]);\n\t\t}\n\t}\n\tcout << *max_element(dp[n-1], dp[n-1]+3) << ln;\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <cstring>\n#include <iostream>\n#include <algorithm>\n\nconst int N=100005; \n\nusing namespace std;\n\nint n; \nint a[N],nxt[N];\nlong long s[N];  \nchar opt[N]; \n\nint main(){\n\tint mk;\n\tlong long cnt,ans;  \n\tscanf(\"%d\",&n); \n\tscanf(\"%d\",&a[1]);\n\topt[1]='+'; \n\tfor(int i=2; i<=n; ++i){\n\t\tscanf(\"\\n%c\",&opt[i]); \n\t\tscanf(\"%d\",&a[i]); \n\t}\n\ts[n+1]=0; \n\tfor(int i=n; i>=1; --i) s[i]=s[i+1]+a[i]; \n\tmk=n+1;\n\tfor(int i=n; i>=1; --i){\n\t\tnxt[i]=(mk==n+1)?i:mk; \n\t\tmk=(opt[i]=='-')?i:mk;\n\t}\n\tcnt=0;\n\tans=-1ll<<60; \n\tfor(int i=1; i<=n; ++i){\n\t\tif(opt[i]=='-'){\n\t\t\tif(nxt[i]!=i) ans=max(ans,cnt+s[nxt[i]]-(s[i]-s[nxt[i]])); \t\n\t\t\telse ans=max(ans,cnt-s[nxt[i]]); \n\t\t}\n\t\tcnt+=(opt[i]=='+')?a[i]:-a[i]; \n\t}\n\tans=max(ans,cnt); \n\tprintf(\"%lld\\n\",ans); \n\treturn 0; \n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\n#include<cstring>\n#include<cstdio>\n#include<cmath>\nusing namespace std;\n#define ll long long\nconst ll MAXN=100000;\nll n,ans,cnt,rec;\nbool read()\n{\n\tchar ch;\n\twhile((ch=getchar())!='+'&&ch!='-');\n\treturn ch=='-';\n}\nint main()\n{\n\tscanf(\"%lld\",&n);\n\tfor(ll i=1,a,p=0;i<=n;++i)\n\t{\n\t\tif(i>1)p=read();\n\t\tscanf(\"%lld\",&a);\n\t\tif(p)\n\t\t{\n\t\t\tswitch(cnt)\n\t\t\t{\n\t\t\t\tcase 0:ans+=rec-a;break;\n\t\t\t\tcase 1:ans+=abs(rec-a);break;\n\t\t\t\tdefault:ans+=rec+a;break;\n\t\t\t}\n\t\t\trec=0;++cnt;\n\t\t}\n\t\telse rec+=a;\n\t}\n\tans+=rec;\n\tprintf(\"%lld\",ans);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <bitset>\n#include <complex>\n#include <deque>\n#include <exception>\n#include <fstream>\n#include <functional>\n#include <iomanip>\n#include <ios>\n#include <iosfwd>\n#include <iostream>\n#include <istream>\n#include <iterator>\n#include <limits>\n#include <list>\n#include <locale>\n#include <map>\n#include <memory>\n#include <new>\n#include <numeric>\n#include <ostream>\n#include <queue>\n#include <set>\n#include <sstream>\n#include <stack>\n#include <stdexcept>\n#include <streambuf>\n#include <string>\n#include <typeinfo>\n#include <utility>\n#include <valarray>\n#include <vector>\n#if __cplusplus >= 201103L\n#include <array>\n#include <atomic>\n#include <chrono>\n#include <condition_variable>\n#include <forward_list>\n#include <future>\n#include <initializer_list>\n#include <mutex>\n#include <random>\n#include <ratio>\n#include <regex>\n#include <scoped_allocator>\n#include <system_error>\n#include <thread>\n#include <tuple>\n#include <typeindex>\n#include <type_traits>\n#include <unordered_map>\n#include <unordered_set>\n#endif\n\nlong long max(long long x, long long y){return (x > y ? x : y);}\nlong long min(long long x, long long y){return (x < y ? x : y);}\n\n#define ll long long\n#define pb push_back\n#define ld long double\n#define mp make_pair\n#define F first\n#define S second\n#define pii pair<ll,ll> \n\nusing namespace :: std;\n\nconst ll maxn=1e5+5000;\nconst ll inf=1e17+800;\nconst ll mod=1e9+7;\n\nll dp[maxn][5];\n\nll a[maxn];\nchar c[maxn];\nint main(){\n    ios_base::sync_with_stdio(0);cin.tie(0);cout.tie(0);    \n\n    ll n;\n    cin>>n;\n    c[1]='+';\n    cin>>a[1];\n    for(ll i=2;i<=n;i++){\n        cin>>c[i]>>a[i];\n    }\n    dp[0][0]=0;\n    for(ll i=1;i<5;i++){\n        dp[0][i]=-inf;\n    }\n    ll v;\n    for(ll i=1;i<=n;i++){\n        for(ll j=0;j<5;j++){\n            dp[i][j]=-inf;\n            for(ll k=0;k<5;k++){\n                // dp[i][j]\n                if(c[i]=='-'){ \n                    ll x=j+k-1;\n                    if(x%2==0){\n                        v=-a[i];\n                    }else{\n                        v=a[i];\n                    }\n                    if(0<=x && x<5){\n                        dp[i][j]=max(dp[i][j],dp[i-1][x]+v);\n                    }\n                }else{\n                    ll x=j+k;\n                    if(x%2==0){\n                        v=a[i];\n                    }else{\n                        v=-a[i];\n                    }\n                    if(0<=x && x<5){\n                        dp[i][j]=max(dp[i][j],dp[i-1][x]+v);\n                    }\n                }\n            }\n        }\n    }\n    cout<<dp[n][0];\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n\nusing namespace std;\n#define rep(i,n) for(int i=0;i<n;i++)\n\nint n, a[100000]; char op[100000];\nlong long dp[100010][3];\n\nint main(){\n\tcin.tie(0); cin.sync_with_stdio(0);\n\tcin >> n;\n\top[0] = '+';\n\trep(i, n){\n\t\tcin >> a[i];\n\t\tif(i != n - 1) cin >> op[i + 1];\n\t}\n\trep(i, n + 1) rep(j, 3) dp[i][j] = -1e18;\n\tdp[0][0] = 0;\n\trep(i, n) rep(j, 3) if(dp[i][j] > -1e18){\n\t\tif(j < 2 && op[i] == '-'){\n\t\t\tint nj = j + 1;\n\t\t\tdp[i + 1][nj] = max(dp[i + 1][nj], dp[i][j] + (j & 1 ? a[i] : -a[i]));\n\t\t}\n\t\tfor(int nj = j; nj >= 0; nj--){\n\t\t\tdp[i + 1][nj] = max(dp[i + 1][nj], dp[i][j] + (j & 1 ^ op[i] == '+' ? a[i] : -a[i]));\n\t\t}\n\t}\n\tcout << dp[n][0] << endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<cstring>\n#include<algorithm>\n#include<cstdlib>\n#include<ctime>\n#include<utility>\n#include<cmath>\n#include<functional>\nusing namespace std;\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef pair<int,int> pii;\ntypedef pair<ll,ll> pll;\nvoid sort(int &a,int &b)\n{\n\tif(a>b)\n\t\tswap(a,b);\n}\nvoid open(const char *s)\n{\n#ifndef ONLINE_JUDGE\n\tchar str[100];\n\tsprintf(str,\"%s.in\",s);\n\tfreopen(str,\"r\",stdin);\n\tsprintf(str,\"%s.out\",s);\n\tfreopen(str,\"w\",stdout);\n#endif\n}\nint rd()\n{\n\tint s=0,c;\n\twhile((c=getchar())<'0'||c>'9');\n\tdo\n\t{\n\t\ts=s*10+c-'0';\n\t}\n\twhile((c=getchar())>='0'&&c<='9');\n\treturn s;\n}\nint upmin(int &a,int b)\n{\n\tif(b<a)\n\t{\n\t\ta=b;\n\t\treturn 1;\n\t}\n\treturn 0;\n}\nint upmax(int &a,int b)\n{\n\tif(b>a)\n\t{\n\t\ta=b;\n\t\treturn 1;\n\t}\n\treturn 0;\n}\nint op[1000010];\nint a[1000010];\nint f[1000010][5];\nint main()\n{\n\tchar s[2];\n\tint n;\n\tscanf(\"%d\",&n);\n\tint i;\n\tfor(i=1;i<=n;i++)\n\t{\n\t\tif(i>1)\n\t\t{\n\t\t\tscanf(\"%s\",s);\n\t\t\tif(s[0]=='+')\n\t\t\t\top[i]=1;\n\t\t\telse\n\t\t\t\top[i]=2;\n\t\t}\n\t\telse\n\t\t\top[i]=1;\n\t\tscanf(\"%d\",&a[i]);\n\t}\n\tmemset(f,0x80,sizeof f);\n\tf[0][0]=0;\n\tfor(i=0;i<=n;i++)\n\t{\n\t\tupmax(f[i][1],f[i][2]);\n\t\tupmax(f[i][0],f[i][1]);\n\t\tif(i==n)\n\t\t\tcontinue;\n\t\tif(op[i+1]==1)\n\t\t{\n\t\t\tupmax(f[i+1][0],f[i][0]+a[i+1]);\n\t\t\tupmax(f[i+1][1],f[i][1]+a[i+1]);\n\t\t\tupmax(f[i+1][2],f[i][2]+a[i+1]);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tupmax(f[i+1][0],f[i][0]-a[i+1]);\n\t\t\tupmax(f[i+1][1],f[i][0]-a[i+1]);\n\t\t\tupmax(f[i+1][1],f[i][1]+a[i+1]);\n\t\t\tupmax(f[i+1][2],f[i][1]+a[i+1]);\n\t\t\tupmax(f[i+1][2],f[i][2]-a[i+1]);\n\t\t}\n\t}\n\tprintf(\"%d\\n\",f[n][0]);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "// need\n#include <iostream>\n#include <algorithm>\n\n// data structure\n#include <bitset>\n//#include <list>\n#include <map>\n#include <queue>\n#include <set>\n#include <stack>\n#include <string>\n#include <utility>\n#include <vector>\n//#include <array>\n//#include <tuple>\n#include <unordered_map>\n#include <unordered_set>\n//#include <complex>\n//#include <deque>\n\n// stream\n//#include <istream>\n//#include <sstream>\n//#include <ostream>\n\n// etc\n#include <cassert>\n#include <functional>\n#include <iomanip>\n//#include <typeinfo>\n#include <chrono>\n#include <random>\n#include <cfenv>\n\n#define INIT std::ios::sync_with_stdio(false);std::cin.tie(0);\n#define VAR(type, ...)type __VA_ARGS__;MACRO_VAR_Scan(__VA_ARGS__);\ntemplate<typename T> void MACRO_VAR_Scan(T& t) { std::cin >> t; }\ntemplate<typename First, typename...Rest>void MACRO_VAR_Scan(First& first, Rest&...rest) { std::cin >> first; MACRO_VAR_Scan(rest...); }\n#define VEC_ROW(type, n, ...)std::vector<type> __VA_ARGS__;MACRO_VEC_ROW_Init(n, __VA_ARGS__); for(int i=0; i<n; ++i){MACRO_VEC_ROW_Scan(i, __VA_ARGS__);}\ntemplate<typename T> void MACRO_VEC_ROW_Init(int n, T& t) { t.resize(n); }\ntemplate<typename First, typename...Rest>void MACRO_VEC_ROW_Init(int n, First& first, Rest&...rest) { first.resize(n); MACRO_VEC_ROW_Init(n, rest...); }\ntemplate<typename T> void MACRO_VEC_ROW_Scan(int p, T& t) { std::cin >> t[p]; }\ntemplate<typename First, typename...Rest>void MACRO_VEC_ROW_Scan(int p, First& first, Rest&...rest) { std::cin >> first[p]; MACRO_VEC_ROW_Scan(p, rest...); }\n#define OUT(d) std::cout<<d;\n#define FOUT(n, d) std::cout<<std::fixed<<std::setprecision(n)<<d;\n#define SOUT(n, c, d) std::cout<<std::setw(n)<<std::setfill(c)<<d;\n#define SP std::cout<<\" \";\n#define TAB std::cout<<\"\\t\";\n#define BR std::cout<<\"\\n\";\n#define ENDL std::cout<<std::endl;\n#define FLUSH std::cout<<std::flush;\n#define VEC(type, c, n) std::vector<type> c(n);for(auto& i:c)std::cin>>i;\n#define MAT(type, c, m, n) std::vector<std::vector<type>> c(m, std::vector<type>(n));for(auto& r:c)for(auto& i:r)std::cin>>i;\n#define ALL(a) (a).begin(),(a).end()\n#define FOR(i, a, b) for(int i=(a);i<(b);++i)\n#define RFOR(i, a, b) for(int i=(b)-1;i>=(a);--i)\n#define REP(i, n) for(int i=0;i<int(n);++i)\n#define RREP(i, n) for(int i=(n)-1;i>=0;--i)\n#define FORLL(i, a, b) for(ll i=ll(a);i<ll(b);++i)\n#define RFORLL(i, a, b) for(ll i=ll(b)-1;i>=ll(a);--i)\n#define REPLL(i, n) for(ll i=0;i<ll(n);++i)\n#define RREPLL(i, n) for(ll i=ll(n)-1;i>=0;--i)\n#define PAIR std::pair<int, int>\n#define PAIRLL std::pair<ll, ll>\n#define IN(a, x, b) (a<=x && x<b)\n#define SHOW(d) {std::cerr << #d << \"\\t:\" << d << \"\\n\";}\n#define SHOWVECTOR(v) {std::cerr << #v << \"\\t:\";for(const auto& xxx : v){std::cerr << xxx << \" \";}std::cerr << \"\\n\";}\n#define SHOWVECTOR2(v) {std::cerr << #v << \"\\t:\\n\";for(const auto& xxx : v){for(const auto& yyy : xxx){std::cerr << yyy << \" \";}std::cerr << \"\\n\";}}\n#define SHOWPAIR(p) {std::cerr << #p << \"\\t:(\" << p.first << \",\\t\" << p.second << \")\\n\";}\n#define SHOWPAIRVECTOR2(v) {std::cerr << #v << \"\\t:\\n\";for(const auto& xxx : v){for(const auto& yyy : xxx){std::cerr<<'('<<yyy.first<<\", \"<<yyy.second<<\") \";}std::cerr << \"\\n\";}}\n#define SHOWPAIRVECTOR(v) {for(const auto& xxx:v){std::cerr<<'('<<xxx.first<<\", \"<<xxx.second<<\") \";}std::cerr<<\"\\n\";}\n#define SHOWQUEUE(a) {std::queue<decltype(a.front())> tmp(a);std::cerr << #a << \"\\t:\";for(int i=0; i<static_cast<int>(a.size()); ++i){std::cerr << tmp.front() << \"\\n\";tmp.pop();}std::cerr << \"\\n\";}\ntemplate<typename T> inline T CHMAX(T& a, const T b) { return a = (a < b) ? b : a; }\ntemplate<typename T> inline T CHMIN(T& a, const T b) { return a = (a > b) ? b : a; }\n#define EXCEPTION(msg) throw std::string(\"Exception : \" msg \" [ in \") + __func__ + \" : \" + std::to_string(__LINE__) + \" lines ]\"\n#define TRY(cond, msg) try {if (cond) EXCEPTION(msg);}catch (std::string s) {std::cerr << s << std::endl;}\nvoid CHECKTIME(std::function<void()> f) { auto start = std::chrono::system_clock::now(); f(); auto end = std::chrono::system_clock::now(); auto res = std::chrono::duration_cast<std::chrono::nanoseconds>((end - start)).count(); std::cerr << \"[Time:\" << res << \"ns  (\" << res / (1.0e9) << \"s)]\\n\"; }\n\n#define int ll\nusing ll = long long;\nusing ull = unsigned long long;\nconstexpr int INFINT = 1 << 30;                          // 1.07x10^ 9\nconstexpr int INFINT_LIM = (1LL << 31) - 1;              // 2.15x10^ 9\nconstexpr ll INFLL = 1LL << 60;                          // 1.15x10^18\nconstexpr ll INFLL_LIM = (1LL << 62) - 1 + (1LL << 62);  // 9.22x10^19\nconstexpr double EPS = 1e-7;\nconstexpr int MOD = 1000000007;\nconstexpr double PI = 3.141592653589793238462643383279;\n\nsigned main() {\n\tINIT;\n\tVAR(int, n);\n\tstd::vector<int> a(n);\n\tstd::vector<char> op(n - 1);\n\tint minus = 0;\n\tREP(i, n-1) {\n\t\tstd::cin >> a[i] >> op[i];\n\t\tminus += (op[i] == '-');\n\t}\n\tstd::cin >> a[n - 1];\n\n\tll sum_ = 0;\n\tREP(i, n) {\n\t\tsum_ += a[i];\n\t}\n\tll ans = -INFLL;\n\tif (minus == 0) {\n\t\tCHMAX(ans, sum_);\n\t}\n\tREP(m, minus) {\n\t\tll sum = sum_;\n\t\tint cnt = -m;\n\t\tREP(i, n - 1) {\n\t\t\tif (op[i] == '-') {\n\t\t\t\tif (cnt == 1) break;\n\t\t\t\tsum -= 2 * a[i + 1];\n\t\t\t\t++cnt;\n\t\t\t}\n\t\t\telse if (op[i] == '+' && cnt == 1) {\n\t\t\t\tsum -= 2 * a[i + 1];\n\t\t\t}\n\t\t}\n\t\tCHMAX(ans, sum);\n\t}\n\tOUT(ans)BR;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<vector>\n#include<algorithm>\nusing namespace std;\nlong sum,a,n,ans,L;\nchar op;\nvector<long>A;\nmain()\n{\n\tcin>>n;\n\tcin>>a;\n\tA.push_back(a);\n\tsum+=a;\n\tfor(int i=1;i<n;i++)\n\t{\n\t\tcin>>op>>a;\n\t\tif(op=='-')\n\t\t{\n\t\t\tA.push_back(-a);\n\t\t\tA.push_back(0);\n\t\t\tsum-=a;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tA.back()+=a;\n\t\t\tsum+=a;\n\t\t}\n\t}\n\tans=sum;\n\tfor(int i=A.size()-2;i>0;i-=2)\n\t{\n\t\tans=max(ans,sum-A[i+1]*2+L);\n\t\tsum=sum-A[i]-A[i+1];\n\t\tL+=-A[i]+A[i+1];\n\t}\n\tcout<<ans<<endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define time Time\n#define pii pair<int,int>    \n#define x first    \n#define y second \n#define N 10000005   \n#define pb(x) push_back(x)\n#define mp(x,y) make_pair((x),(y))    \n#define sqr(x) ((x)*(x))\ntypedef long long LL;  \nusing namespace std;\nconst int mod=1e9+7;\nint main(){\n\tint n;\n\twhile(scanf(\"%d\",&n)!=EOF){\n\t\tlong long \tint a[100005];\n\t\tint op[100005];\n\t\top[0]=1;\n\t\tscanf(\"%lld\",&a[0]);\n\t\tfor(int i=1;i<n;i++){\n\t\t\tchar c;\n\t\t\twhile(scanf(\"%c\",&c)&&c!='+'&&c!='-');\n\t\t\tif(c=='+')\n\t\t\top[i]=1;\n\t\t\telse\n\t\t\top[i]=0;\n\t\t\tscanf(\"%lld\",&a[i]);\n\t\t} \n\t\tlong long int sum=0;\n\t\tfor(int i=0;i<n;i++){\n\t\t\tsum+=a[i];\n\t\t}\n\t\tlong long int ans=1e18;\n\t\tint i;\n\t\tfor(i=0;op[i]==1;i++);\n\t\tint last=i;\n\t\tlong long int ssum=0,sssum=a[i];\n\t\tfor(;i<n;i++)\n\t\t{\n\t\t\tssum+=a[i];\n\t\t\tif(op[i+1]==0||i+1==n)\n\t\t\tans=min(ssum+sssum-a[last],ans),ssum=0,last=i;\n\t\t\tif(op[i+1]==0)\n\t\t\tsssum+=a[i+1];\n\t\t}\n\t\tans=min(sssum,ans);\n\t\tprintf(\"%lld\\n\",sum-2*ans);\n\t}\n}\n/*\n\n 1 - 1 + 2 + 10 - 2 + 3  + 5\n\n*/\n"
  },
  {
    "language": "C++",
    "code": "/*\n                ____________    ______________       __\n               / _________  /\\ /_____   _____/\\     / /\\\n              / /\\       / /  \\\\    /  /\\    \\ \\   / /  \\\n             / /  \\_____/ /   / \\__/  /  \\____\\/  / /   /\n            / /   /    / /   /    /  /   /       / /   /\n           / /   /    / /   /    /  /   /       / /   /\n          / /   /    / /   /    /  /   /       / /   /\n         / /___/____/ /   /    /  /   /       / /___/________\n        /____________/   /    /__/   /       /______________/\\\n        \\            \\  /     \\  \\  /        \\              \\ \\\n         \\____________\\/       \\__\\/          \\______________\\/\n           ___       ___               ___    __________\n          /  /\\     /  /\\             /  /\\  /_______  /\\\n         /  /__\\___/  /  \\           /  /  \\ \\      /  /  \\\n        /____    ____/   /          /  /   /  \\____/  /   /\n        \\   /   /\\   \\  /          /  /   /       /  /   /\n         \\_/   /  \\___\\/ ___      /  /   /       /  /   /\n          /   /   /     /  /\\    /  /   /       /  /   /\n         /   /   /     /  /__\\__/  /   /       /  /___/____\n        /___/   /     /___________/   /       /___________/\\\n        \\   \\  /      \\           \\  /        \\           \\ \\\n         \\___\\/        \\___________\\/          \\___________\\/\n\n          A FAN OF FIZZYDAVID\n\n*/\n\n#include<bits/stdc++.h>\n\n#define HEAP priority_queue\n#define rep(i,n) for(int i=0;i<(n);i++)\n#define per(i,n) for(int i=(n)-1;i>=0;i--)\n#define forn(i,l,r) for(int i=(l);i<=(r);i++)\n#define nrof(i,r,l) for(int i=(r);i>=(l);i--)\n#define mp make_pair\n#define mt make_tuple\n#define pb push_back\n#define X first\n#define Y second\n#define eps 1e-6\n#define pi 3.1415926535897932384626433832795\n#define orz int\n#define yjz main\n#define fizzydavid return\n#define ak 0\n#define la ;\n#define SZ(x) (int)x.size()\n#define ALL(x) x.begin(),x.end()\n#define FILL(a,b) memset((a),(b),sizeof((a)))\n\nusing namespace std;\n\ntypedef long long LL;\ntypedef double flt;\ntypedef vector<int> vi;\ntypedef pair<int,int> pii;\ntypedef vector<LL> vl;\ntypedef pair<int,LL> pil;\ntypedef pair<LL,int> pli;\ntypedef pair<LL,LL> pll;\ntypedef vector<pil> vil;\ntypedef vector<pii> vii;\n\nconst int iinf=1e9+7;\nconst LL linf=1ll<<60;\nconst flt dinf=1e10;\n\ntemplate <typename T>\ninline void scf(T &x)\n{\n\tbool f=0; x=0; char c=getchar();\n\twhile((c<'0' || c>'9') && c!='-') c=getchar();\n\tif(c=='-') { f=1; c=getchar(); }\n\twhile(c>='0' && c<='9') { x=x*10+c-'0'; c=getchar(); }\n\tif(f) x=-x; return;\n}\n\ntemplate <typename T1,typename T2>\nvoid scf(T1 &x,T2 &y) { scf(x); return scf(y); }\n\ntemplate <typename T1,typename T2,typename T3>\nvoid scf(T1 &x,T2 &y,T3 &z) { scf(x); scf(y); return scf(z); }\n\ntemplate <typename T1,typename T2,typename T3,typename T4>\nvoid scf(T1 &x,T2 &y,T3 &z,T4 &w) { scf(x); scf(y); scf(z); return scf(w); }\n\n#ifdef ONLINE_JUDGE\n#define debug(x) ;\n#else\n#define DEBUG\n#define debug(x) cerr<<#x<<\"=\"<<x<<endl;\n#endif\n\n//---------------------------head----------------------------\n\nconst int N=1e5+100;\n\nint n;\nLL ans,a[N],sum[N],calc[N];\nbool typ[N];\nint nxt[N];\nLL b[N];\n\norz yjz()\n{\n    scf(n);\n    scf(a[1]); sum[1]=a[1]; ans=a[1]; calc[1]=a[1];\n    forn(i,2,n)\n    {\n        char c=getchar();\n        while(c!='+' && c!='-') c=getchar();\n        if(c=='-') typ[i]=1;\n        scf(a[i]);\n        sum[i]=sum[i-1]+a[i];\n        if(typ[i]) ans-=a[i];\n        else ans+=a[i];\n        calc[i]=ans;\n    }\n\n    int rem=n+1;\n    nrof(i,n,1) if(typ[i])\n    {\n        nxt[i]=rem;\n        rem=i-1;\n        b[i]=sum[nxt[i]]-sum[i];\n    }\n\n    forn(i,1,n) if(typ[i] && nxt[i]<=n)\n    {\n        LL tmp=calc[i-1]+sum[n]-sum[nxt[i]]-b[i]-a[i];\n        #ifdef DEBUG\n        cerr<<i<<' '<<calc[i-1]<<' '<<sum[n]<<' '<<sum[nxt[i]]<<' '<<b[i]<<' '<<a[i]<<' '<<tmp<<endl;\n        #endif // DEBUG\n        if(tmp>ans) ans=tmp;\n    }\n\n    printf(\"%lld\\n\",ans);\n    fizzydavid ak la\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define int long long\n#define fi first\n#define se second\n#define PB push_back\nusing namespace std;\ntypedef pair<int, int> P1;\ntypedef pair<int, pair<int, int> > P2;\nstatic const int INF = 1ll<<60;\nstatic const int dx[] = { 1, -1, 0, 0, };\nstatic const int dy[] = { 0, 0, 1, -1 };\nstatic const int mod = 1000000007;\n\nint N;\nint A[100005];\nchar op[100005];\nint dp[100005][5];\n//    [i項目][i項目までに開いているかっこの数]\n\nint solve(){\n    for(int i=0;i<N;++i)for(int j=0;j<5;++j)dp[i][j]=-INF;\n    dp[0][0] = A[0];\n    for(int i=0;i<N-1;++i){\n        for(int j=0;j<=min(i,3ll);++j){\n            cout<<j<<endl;\n            int f;\n            if(j%2==0)f=1ll;\n            else f=-1ll;\n            int t1 = f*A[i+1];\n            //cout<<t1<<endl;\n            //cout<<i<<\" \"<<j<<endl;\n            if(op[i+1]=='+'){\n                dp[i+1][j] = max(dp[i][j]+t1,dp[i+1][j]);\n                if(j!=0)dp[i+1][j-1] = max(dp[i][j]+t1,dp[i+1][j-1]);\n            }\n            else {\n                dp[i+1][j] = max(dp[i][j]-t1,dp[i+1][j]);\n                dp[i+1][j+1] = max(dp[i][j]-t1,dp[i+1][j+1]);\n                if(j!=0)dp[i+1][j-1] = max(dp[i][j]-t1,dp[i+1][j-1]);\n            }\n            //cout<<i<<\" \"<<j<<endl;\n            //cout<<dp[i][j]<<\" \"<<dp[i+1][j]<<\" \"<<dp[i+1][j+1]<<endl;\n        }\n    }\n    int ans=-INF;\n    for(int i=0;i<N;++i)ans=max(dp[N-1][i],ans);\n    return ans;\n}\n\n\nsigned main(){\n    cin>>N;\n    op[0]='+';\n    for(int i=0;i<N;++i){\n        cin>>A[i];\n        if(i!=N-1)cin>>op[i+1];\n    }\n    cout<<solve()<<endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\nusing namespace std;\ntypedef long long lli;\nlli n;\nvector<lli> a;\nlli dp[100005][2][2];\nint main(int argc, char const *argv[]) {\n    cin >> n;\n    lli x;\n    char c;\n    cin >> x;\n    a.push_back(x);\n    for(lli i = 1;i < n;i++){\n        cin >> c >> x;\n        if(c == '-') a.push_back(x*-1);\n        if(c == '+'){\n            if(a.back() > 0) a.back() += x;\n            else a.push_back(x);\n        }\n    }\n    for(lli i = 0;i < a.size();i++){\n        dp[i][0][0] = dp[i][1][0] = dp[i][1][1] = -100000000000000;\n    }\n    if(a.size() == 1){\n        cout << a[0] << endl;\n        return 0;\n    }\n    dp[2][0][0] = dp[2][1][1] = a[0]+a[1];\n    for(lli i = 2;i < a.size();i++){\n        if(a[i] < 0){\n            dp[i+1][0][0] = dp[i][0][0]+a[i];\n            dp[i+1][1][0] = max(dp[i][1][0]+a[i],dp[i][1][1]-a[i]);\n            dp[i+1][1][1] = max(dp[i][1][0]+a[i],max(dp[i][1][1]-a[i],dp[i][0][0]+a[i]));\n        }else{\n            dp[i+1][0][0] = dp[i][0][0]+a[i];\n            dp[i+1][1][0] = max(dp[i][1][0]+a[i],dp[i][1][1]-a[i]);\n            dp[i+1][1][1] = max(dp[i][1][0]+a[i],dp[i][1][1]-a[i]);\n        }\n    }\n    cout << max(max(dp[a.size()][0][0],dp[a.size()][1][0]),dp[a.size()][1][1]) << endl;\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nconst int N = 1e6 + 50;\ntypedef long long ll;\nint n, top;\nll S[N], sum[N];\n\ninline char nc()\n{\n\tstatic char buf[1000000], *p1 = buf, *p2 = buf;\n\treturn p1 == p2 && (p2 = (p1 = buf) + fread(buf, 1, 1000000, stdin), p1 == p2) ? EOF : *p1++;\n}\n\ninline int read()\n{\n\tint res = 0;\n\tchar ch;\n\tdo ch = nc(); while (ch < 48 || ch > 57);\n\tdo res = res * 10 + ch - 48, ch = nc(); while (ch >= 48 && ch <= 57);\n\treturn res;\n}\n\ninline int read_operation()\n{\n\tchar ch;\n\tdo ch = nc(); while (ch != '+' and ch != '-');\n\treturn ch == '+';\n}\n\nint main()\n{\n\tn = read();\n\tS[0] = sum[0] = read(); top = 0;\n\tfor (int i = 1; i < n; ++i)\n\t{\n\t\tint p = read_operation(); ll t = read();\n\t\tif (p == 1) sum[top] += t, S[top] += t; \n\t\telse \n\t\t{\n\t\t\t++top;\n\t\t\tS[top] = S[top - 1] + t;\n\t\t\tsum[top] = sum[top - 1] - t;\n\t\t}\n\t}\n\tll ans = sum[top];\n\tfor (int i = 0; i < top; ++i) ans = std::max(ans, sum[i] - (S[i + 1] - S[i]) + (S[top] - S[i + 1]));\n\tprintf(\"%lld\", ans);\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define DEBUG(x) cout << #x << \" = \" << x << endl\n#define pb push_back\nusing namespace std;\ntypedef long long ll;\n\nconst int MAXN = 100005;\n\n\nint main()\n{\n    freopen(\"input.in\", \"r\", stdin);\n    int n;\n    cin >> n;\n    char sgn;\n    char hj;\n    int x;\n    ll ans = 0;\n    while ((sgn != '-') && (cin >> x >> sgn))\n    {\n        ans += x;\n    }\n    cin >> x;\n    if (sgn != '-')\n    {\n        ans += x;\n        cout << ans;\n        return 0;\n    }\n    ans -= x;\n\n\n    ll sm = 0;\n    while (cin >> sgn >> x)\n    {\n        if (sgn == '+')\n            sm += x;\n        else\n        {\n            sm -= x;\n            ans += max(sm, -sm);\n            sm = 0;\n        }\n    }\n\n    ans += sm;\n    cout << ans;\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<algorithm>\n#include<cctype>\n#include<cstring>\n#include<iostream>\n#include<vector>\n\nusing namespace std;\n\n#define bomb exit(1)\n#define INF 1061109567\n#define LINF 4557430888798830399ll\n#define pprint(x) print(x),putchar(' ')\n#define fprint(x) print(x),putchar('\\n')\n#define EE(x); struct edge { int nxt,to;ll w; }e[M << 1]; int head[N],ecnt = 1;\\\n\tvoid add(int u,int v,ll w = 0) { e[++ecnt].w = w,e[ecnt].to = v,e[ecnt].nxt = head[u];head[u] = ecnt; }\\\n\tvoid add_edge(int u,int v,ll w = 0) { add(u,v,w),add(v,u,w * x); }\n#define ll long long\nint mod = 1000000007;\nll Mod(ll x) { return x >= mod ? x - mod : x; }\n#define eps 0.0000000001\n#define sqr(x) ((x) * (x))\n#define iter iterator\n#define fi first\n#define se second\n//#define getchar() (SS == TT && (TT = (SS = BB) + fread(BB,1,1 << 15,stdin),TT == SS) ? EOF : *SS++)\n//char BB[1 << 15],*SS = BB,*TT = BB;\nll read()\n{\n\tll x = 0;int f = 1;char ch = getchar();\n\tfor(;!isdigit(ch);ch = getchar()) if(ch == '-') f = -1;\n\tfor(;isdigit(ch);ch = getchar()) x = x * 10 + (ch ^ 48);\n\treturn x * f;\n}\nvoid print(ll x)\n{\n\tif(x < 0) putchar('-'),x = -x;\n\tif(x > 9) print(x / 10);putchar(x % 10 + '0');\n}\n\nconst int N = 100010;\nll ans,res;\nll a[N],pre[N],suf[N],tot;\nint n,op[N];\nint main()\n{\n\tn = read();\n\tfor(int i = 1;i < n;i++)\n\t{\n\t\ttot += (a[i] = read());\n\t\tchar ch = getchar();while(ch != '+' && ch != '-') ch = getchar();\n\t\top[i] = (ch == '+') ? 1 : -1;\n\t}tot += (a[n] = read());\n\tfor(int i = n;i;i--) { suf[i] = a[i];if(~op[i]) suf[i] += suf[i + 1]; }\n\tfor(int i = 1;i <= n;i++) pre[i] = pre[i - 1] + a[i];\n\tres = a[1];ans = -LINF;\n\tfor(int i = 2;i <= n;i++)\n\t{\n\t\tans = max(ans,res + pre[n] - pre[i - 1] - 2 * suf[i]);\n\t\tres += a[i] * op[i - 1];\n\t}ans = max(ans,res);fprint(ans);\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define FOR(i,a,b) for(ut i=(a);i<(ut)(b);i++)\n#define REP(i,b) FOR(i,0,b)\nusing namespace std;\ntypedef long long LL;\ntypedef LL ut;\nconst int SIZE=5+1e5;\nconst LL INF=1<<30;\nconst LL p=7+(1e9);\nLL A[SIZE];\nchar B[SIZE];\nbool isMinus[SIZE];\nint main(){\n\tint N;\n\tcin >> N;\n\tLL ans=0;\n\tcin >> ans;\n\tREP(i,N-1){\n\t\tcin >> B[i];\n\t\tcin >> A[i];\n\t\tisMinus[i]=B[i]=='-';\n\t}\n\tLL freedom=0,needm=0,cost=0;\n\tREP(j,N-1){\n\t\tint i=N-1-j-1;\n\t\tcost+=A[i];\n\t\tneedm+=A[i];\n\t\tif(isMinus[i]){\n\t\t\tfreedom=max(freedom-A[i],needm-cost*2);\n\t\t\tcost=0;\n\t\t}\n\t\telse freedom+=A[i];\n\t\t\n\t}\n\tcout << freedom+ans << endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\ntypedef long long ll;\nll gi(){\n\tll x=0,f=1;\n\tchar ch=getchar();\n\twhile(!isdigit(ch))f^=ch=='-',ch=getchar();\n\twhile(isdigit(ch))x=x*10+ch-'0',ch=getchar();\n\treturn f?x:-x;\n}\nstd::mt19937 rnd(time(NULL));\n#define rand rnd\n#define pr std::pair<int,int>\n#define all(x) (x).begin(),(x).end()\n#define fi first\n#define se second\ntemplate<class T>void cxk(T&a,T b){a=a>b?a:b;}\ntemplate<class T>void cnk(T&a,T b){a=a<b?a:b;}\n#ifdef mod\nint pow(int x,int y){\n\tint ret=1;\n\twhile(y){\n\t\tif(y&1)ret=1ll*ret*x%mod;\n\t\tx=1ll*x*x%mod;y>>=1;\n\t}\n\treturn ret;\n}\ntemplate<class Ta,class Tb>void inc(Ta&a,Tb b){a=a+b>=mod?a+b-mod:a+b;}\ntemplate<class Ta,class Tb>void dec(Ta&a,Tb b){a=a>=b?a-b:a+mod-b;}\n#endif\nint A[100010];char ch[100010];\nll f[100010][3];\nint main(){\n#ifdef LOCAL\n\tfreopen(\"in.in\",\"r\",stdin);\n\t//freopen(\"out.out\",\"w\",stdout);\n#endif\n\tint n=gi();\n\tfor(int i=1;i<=n;++i)A[i]=gi(),ch[i]=getchar();\n\tfor(int i=1;i<=n;++i)if(ch[i]=='-')A[i+1]*=-1;\n\t++n;\n\tmemset(f,-63,sizeof f);\n\tf[0][0]=0;\n\tfor(int i=1;i<=n;++i)\n\t\tfor(int j=0;j<3;++j){\n\t\t\tfor(int k=0;k<3;++k){\n\t\t\t\tif(k>=j)cxk(f[i][j],f[i-1][k]+A[i]*(j&1?-1:1));\n\t\t\t\tif(A[i]<0&&k>=j-1)cxk(f[i][j],f[i-1][k]+A[i]*(~j&1?-1:1));\n\t\t\t}\n\t\t}\n\tprintf(\"%lld\\n\",f[n][0]);\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#line 1 \"main.cpp\"\n\n#include <iostream>\n#include <algorithm>\n#include <utility>\n#include <numeric>\n#include <vector>\n#include <array>\n\ntemplate <class T, class U>\ninline bool chmin(T &lhs, const U &rhs) {\n  if (lhs > rhs) { lhs = rhs; return true; }\n  return false;\n}\n\ntemplate <class T, class U>\ninline bool chmax(T &lhs, const U &rhs) {\n  if (lhs < rhs) { lhs = rhs; return true; }\n  return false;\n}\n\nstruct range {\n  using itr = int64_t;\n  struct iterator {\n    itr i;\n    constexpr iterator(itr i_) noexcept : i(i_) { }\n    constexpr void operator ++ () noexcept { ++i; }\n    constexpr itr operator * () const noexcept { return i; }\n    constexpr bool operator != (iterator x) const noexcept { return i != x.i; }\n  };\n  const iterator l, r;\n  constexpr range(itr l_, itr r_) noexcept : l(l_), r(std::max(l_, r_)) { }\n  constexpr iterator begin() const noexcept { return l; }\n  constexpr iterator end() const noexcept { return r; }\n};\n\nstruct revrange {\n  using itr = int64_t;\n  struct iterator {\n    itr i;\n    constexpr iterator(itr i_) noexcept : i(i_) { }\n    constexpr void operator ++ () noexcept { --i; }\n    constexpr itr operator * () const noexcept { return i; }\n    constexpr bool operator != (iterator x) const noexcept { return i != x.i; }\n  };\n  const iterator l, r;\n  constexpr revrange(itr l_, itr r_) noexcept : l(l_ - 1), r(std::max(l_, r_) - 1) { }\n  constexpr iterator begin() const noexcept { return r; }\n  constexpr iterator end() const noexcept { return l; }\n};\n\nusing i32 = int32_t;\nusing i64 = int64_t;\nusing u32 = uint32_t;\nusing u64 = uint64_t;\n\nconstexpr i32 inf32 = (i32(1) << 30) - 1;\nconstexpr i64 inf64 = (i64(1) << 62) - 1;\n\nint main() {\n  size_t N;\n  std::cin >> N;\n  std::vector<bool> flip(N);\n  std::vector<i32> A(N);\n  for (auto i: range(0, N)) {\n    if (i > 0) {\n      char c;\n      std::cin >> c;\n      flip[i] = (c == '-');\n    }\n    std::cin >> A[i];\n  }\n  std::vector<std::array<i64, 3>> dp(N + 1);\n  for (auto &arr: dp) {\n    arr.fill(-inf64);\n  }\n  dp[0][0] = 0;\n  for (auto i: range(0, N)) {\n    for (auto k: { 0, 1 }) {\n      chmax(dp[i + 1][k + flip[i]], dp[i][k] + ((k + flip[i]) % 2 == 0 ? 1 : -1) * A[i]);\n    }\n    chmax(dp[i + 1][2], dp[i][2] + A[i]);\n    chmax(dp[i + 1][0], dp[i + 1][1]);\n    chmax(dp[i + 1][1], dp[i + 1][2]);\n  }\n  std::cout << std::max({ dp[N][0], dp[N][1], dp[N][2] }) << '\\n';\n  return 0;\n}\n\n/**\n * @title Template\n */\n"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>  \n#include <iostream>  \n#include <sstream>  \n#include <string>  \n#include <cstring>\n#include <vector>  \n#include <queue>  \n#include <set>  \n#include <map>  \n#include <cstdio>  \n#include <cstdlib>  \n#include <cctype>  \n#include <cmath>  \n#include <list>  \n#include <cassert>\n#include <ctime>\n#include <climits>\nusing namespace std;  \n\n#define PB push_back  \n#define MP make_pair  \n#define SZ(v) ((int)(v).size())  \n#define FOR(i,a,b) for(int i=(a);i<(b);++i)  \n#define REP(i,n) FOR(i,0,n)  \n#define FORE(i,a,b) for(int i=(a);i<=(b);++i)  \n#define REPE(i,n) FORE(i,0,n)  \n#define FORSZ(i,a,v) FOR(i,a,SZ(v))  \n#define REPSZ(i,v) REP(i,SZ(v))  \ntypedef long long ll;\ntypedef unsigned long long ull;\nll gcd(ll a,ll b) { return b==0?a:gcd(b,a%b); }\n\nconst int MAXN=100000;\n\nint n;\nint a[MAXN]; char op[MAXN-1];\n\n\n\nvoid run() {\n\tscanf(\"%d\",&n); REP(i,n) { scanf(\"%d\",&a[i]); if(i!=n-1) scanf(\" %c\",&op[i]); }\n\n\tll sum=0; REP(i,n) sum+=a[i];\n\tll ret=a[0]; REP(i,n-1) if(op[i]=='+') ret+=a[i+1]; else ret-=a[i+1];\n\tll sumneg=0;\n\tint at=0; while(at<n-1&&op[at]=='+') ++at;\n\twhile(at<n-1) {\n\t\tint to=at+1; ll sumpos=0; while(to<n-1&&op[to]=='+') sumpos+=a[to+1],++to; if(to>=n-1) break;\n\t\tll cur=sum-2*(sumneg+a[at+1]+sumpos); if(cur>ret) ret=cur;\n\t\tat=to;\n\t}\n\tprintf(\"%lld\\n\",ret);\n}\n\nint main() {\n\trun();\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <string>\n#include <list>\n#include <vector>\n#include <queue>\n#include <algorithm>\n#include <climits>\n#include <cstring>\n#define int long long\n#define uint unsigned long long\n#define CONTAINS(v,n) (find((v).begin(), (v).end(), (n)) != (v).end())\n#define SORT(v) sort((v).begin(), (v).end())\n#define RSORT(v) sort((v).rbegin(), (v).rend())\n#define ARY_SORT(a, size) sort((a), (a)+(size))\n#define MAX(a,b) (((a) > (b)) ? (a) : (b))\n#define MIN(a,b) (((a) < (b)) ? (a) : (b))\nusing namespace std;\n\nint INIT = 1000000000000000L; //10^5 * 10^9 * 10\n\nint N;\nint A[100000];\nchar op[100000];\n\nint dp[100000][3];\n\nint func(int n, int o) //括弧がo個開いている時、n番目以降を使ってつくれる最大の数\n{\n\tif (dp[n][o] < INIT)\n\t{\n\t\treturn dp[n][o];\n\t}\n\n\tint res;\n\tif (n == N - 1)\n\t{\n\t\tif (o % 2 == 0)\n\t\t{\n\t\t\tres = A[n];\n\t\t}\n\t\telse\n\t\t{\n\t\t\tres = -A[n];\n\t\t}\n\t}\n\telse\n\t{\n\t\tif (op[n + 1] == '+')\n\t\t{\n\t\t\tif (o == 0)\n\t\t\t{\n\t\t\t\tres = A[n] + func(n, o);\n\t\t\t}\n\t\t\telse if (o == 1)\n\t\t\t{\n\t\t\t\tint d1 = -A[n] + func(n + 1, o);\n\t\t\t\tint d2 = -A[n] + func(n + 1, o - 1);\n\t\t\t\tres = MAX(d1, d2);\n\t\t\t}\n\t\t\telse if (o == 2)\n\t\t\t{\n\t\t\t\tint d1 = A[n] + func(n + 1, o);\n\t\t\t\tint d2 = A[n] + func(n + 1, o - 1);\n\t\t\t\tint d3 = A[n] + func(n + 1, o - 2);\n\t\t\t\tres = MAX(d1, MAX(d2, d3));\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (o == 0)\n\t\t\t{\n\t\t\t\tres = A[n] + func(n + 1, o + 1);\n\t\t\t}\n\t\t\telse if (o == 1)\n\t\t\t{\n\t\t\t\tint d1 = -A[n] + func(n + 1, o + 1);\n\t\t\t\tint d2 = -A[n] + func(n + 1, o);\n\t\t\t\tres = MAX(d1, d2);\n\t\t\t}\n\t\t\telse if (o == 2)\n\t\t\t{\n\t\t\t\tint d1 = A[n] + func(n + 1, o);\n\t\t\t\tint d2 = A[n] + func(n + 1, o - 1);\n\t\t\t\tres = MAX(d1, d2);\n\t\t\t}\n\t\t}\n\t}\n\n\tdp[n][o] = res;\n\treturn res;\n}\n\nsigned main()\n{\n\tcin >> N;\n\top[0] = '+';\n\tfor (int i = 0; i < N; i++)\n\t{\n\t\tif (i > 0)\n\t\t{\n\t\t\tcin >> op[i];\n\t\t}\n\t\tcin >> A[i];\n\n\t\tfor (int j = 0; j < 3; j++) dp[i][j] = INIT;\n\t}\n\tcout << func(0, 0) << endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<algorithm>\nusing namespace std;\n#define MAXN 100010\n#define INF 0x3FFFFFFF\n#define LL long long\nint a[MAXN],n;\nLL sum=0,pre[MAXN],ans=-INF;\nbool b[MAXN];\nchar s[10];\nint main()\n{\n\tscanf(\"%d\",&n);\n\tscanf(\"%d\",&a[1]);\n\tfor(int i=2;i<=n;i++)\n\t{\n\t\tscanf(\"%s%d\",s,&a[i]);\n\t\tif(s[0]=='-') b[i]=1;\n\t}\n\tfor(int i=n;i>0;i--)\n\t\tpre[i]=pre[i+1]+a[i];\n\tint ls=1;\n\twhile(b[ls]==0&&ls<=n)\n\t{\n\t\tsum+=a[ls];\n\t\tls++;\n\t}\n\twhile(ls<=n)\n\t{\n\t\tint ls1=ls+1;\n\t\tLL sum1=0;\n\t\twhile(ls1<=n&&b[ls1]==0)\n\t\t{\n\t\t\tsum1+=a[ls1];\n\t\t\tls1++;\n\t\t}\n\t\tif(ls1<=n) ans=max(ans,sum-sum1-a[ls]+pre[ls1]);\n\t\tsum-=a[ls],sum+=sum1;\n\t\tls=ls1;\n\t}\n\tans=max(ans,sum);\n\tprintf(\"%lld\\n\",ans);\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n#define rep(i,a,b) for(int i=(a);i<=(b);i++)\n#define re(i,a,b) for(int i=(a);i<(b);i++)\n#define repd(i,a,b) for(int i=(a);i>=(b);i--)\n#define run(a) for(int k=head[a];k;k=e[k].ne)\n#define v e[k].t\n#define clr(a) memset(a,0,sizeof(a));\n#define il inline\n#define sz(a) ((int)a.size())\n#define all(a) a.begin(),a.end()\n#define mp make_pair\n#define pb push_back \n#define w1 first\n#define w2 second\n#define adm(a,b,c) {a=a+b;if(a>=c)a-=c;else if(a<0)a+=c;}\ntypedef double db;\ntypedef long long ll;typedef long double ld;typedef unsigned long long ull;\ntypedef pair<ll,ll> pa;\nconst int N=1e6+5,M=5e3+5,INF=1e9,mod=998244353;\nconst ll linf=1e18;const double eps=1e-8,pi=acos(-1);\nil int gmin(int &a,int b){if(a>b)a=b;}il ll gmin(ll &a,ll b){if(a>b)a=b;}il int gmax(int &a,int b){if(a<b)a=b;}il ll gmax(ll &a,ll b){if(a<b)a=b;}\nil void read(ll&x){ll f=1,t=0;char ch=getchar();while(ch<'0'||ch>'9'){if(ch=='-')f=-1;ch=getchar();}while(ch>='0'&&ch<='9'){t=t*10+ch-'0';ch=getchar();}x=t*f;}il ll read(ll&x,ll&y){read(x);read(y);}\nil void read(int&x){int f=1,t=0;char ch=getchar();while(ch<'0'||ch>'9'){if(ch=='-')f=-1;ch=getchar();}while(ch>='0'&&ch<='9'){t=t*10+ch-'0';ch=getchar();}x=t*f;}il int read(int&x,int&y){read(x);read(y);}\nil void read(int&a,int&b,int&c){read(a);read(b);read(c);}il void read(ll&a,ll&b,ll&c){read(a);read(b);read(c);}\nil int read(){int x;read(x);return x;}\nil ll qpow(ll a,ll b,ll p){ll ret=1;for(;b;b>>=1,a=a*a%p)if(b&1)ret=ret*a%p;return ret;}il ll qpow(ll a,ll b){ll ret=1;for(;b;b>>=1,a=a*a%mod)if(b&1)ret=ret*a%mod;return ret;}\nil ll qmul(ll a,ll b,ll p){ll ret=0;for(;b;b>>=1,a=(a<<1)%p)if(b&1)adm(ret,a,p);return ret;}il ll qmul(ll a,ll b){ll ret=0;for(;b;b>>=1,a=(a<<1)%mod)if(b&1)adm(ret,a,mod);return ret;}\nil void judge(){\n\tfreopen(\"data.in\",\"r\",stdin);\n\tfreopen(\"data.out\",\"w\",stdout);}\nll n,sm;\nvector<pa>o;\nint main(){\n\tread(n);\n\trep(i,1,n){\n\t\tchar opt[5];if(i!=1)scanf(\"%s\",opt);else opt[0]='+';\n\t\tint x=read();sm+=x;\n\t\tif(opt[0]=='-')o.pb(pa(x,0));else if(o.size())o.back().w2+=x;\n\t}\n\tll ans;if(o.size()==0)ans=sm;else ans=-linf;\n\tre(i,0,o.size()){\n\t\tgmax(ans,sm-2*(o[i].w1+o[i].w2));\n\t\tsm-=o[i].w1*2;\n\t}\n\tcout<<ans<<endl;\n}"
  },
  {
    "language": "C++",
    "code": "                            #include <bits/stdc++.h>\n                            #include<iostream>\n                            #include<cstdio>\n                            #include<vector>\n                            #include<queue>\n                            #include<map>\n                            #include<cstring>\n                            #include<string>\n                            #include <math.h>\n                            #include<algorithm>\n                        //    #include <boost/multiprecision/cpp_int.hpp>\n                            #include<functional>\n                     #define int long long\n                            #define inf  1000000007\n                            #define pa pair<int,int>\n                            #define ll long long\n                            #define pal pair<double,int>\n                            #define ppa pair<int,pa>\n                            #define ssa pair<string,int>\n                            #define  mp make_pair\n                            #define  pb push_back\n                            #define EPS (1e-10)\n                            #define equals(a,b) (fabs((a)-(b))<EPS)\n                     \n                            using namespace std;\n                     //priority_queue<int, vector<int>, greater<int> > que;\n                            class Point{\n                            \tpublic:\n                            \tdouble x,y;\n                            \tPoint(double x=0,double y=0):x(x),y(y) {}\n                            \tPoint operator + (Point p) {return Point(x+p.x,y+p.y);}\n                            \tPoint operator - (Point p) {return Point(x-p.x,y-p.y);}\n                            \tPoint operator * (double a) {return Point(x*a,y*a);}\n                            \tPoint operator / (double a) {return Point(x/a,y/a);}\n                            \tdouble absv() {return sqrt(norm());}\n                            \tdouble norm() {return x*x+y*y;}\n                            \tbool operator < (const Point &p) const{\n                            \t\treturn x != p.x ? x<p.x: y<p.y;\n                            \t}\n                            \tbool operator == (const Point &p) const{\n                            \t\treturn fabs(x-p.x)<EPS && fabs(y-p.y)<EPS;\n                            \t}\n                            };\n                            typedef Point Vector;\n                     \n                            struct Segment{\n                            Point p1,p2;\n                            };\n                     \n                        double hen(Vector a){\n                        if(fabs(a.x)<EPS && a.y>0) return acos(0);\n                        else if(fabs(a.x)<EPS && a.y<0) return 3*acos(0);\n                        else if(fabs(a.y)<EPS && a.x<0) return 2*acos(0);\n                        else if(fabs(a.y)<EPS && a.x>0) return 0.0;\n                        else if(a.y>0) return acos(a.x/a.absv());\n                        else return 2*acos(0)+acos(-a.x/a.absv());\n                     \n                        }\n                     \n                string itos( int i ) {\n                ostringstream s ;\n                s << i ;\n                return s.str() ;\n                }\n                 \n                int gcd(int v,int b){\n                \tif(v>b) return gcd(b,v);\n                \tif(v==b) return b;\n                \tif(b%v==0) return v;\n                \treturn gcd(v,b%v);\n                }\n                            double dot(Vector a,Vector b){\n                            \treturn a.x*b.x+a.y*b.y;\n                            }\n                            double cross(Vector a,Vector b){\n                            \treturn a.x*b.y-a.y*b.x;\n                            }\n                        \n                double distans(double x1,double y1,double x2,double y2){\n                \tdouble rr=(x1-x2)*(x1-x2)+(y1-y2)*(y1-y2);\n                \treturn sqrt(rr);\n                \t\n                }\n\n                            //----------------kokomade tenpure------------\n\nvoid no(){\n\tcout<<\"No\"<<endl;\n\treturn;\n}\n\nint beki(int r, int k){\n\tif(k==0) return 1;\n\telse return r*beki(r,k-1);\n}\nint a[100010];\nint op[100010];\nint dp[100010][3];\n signed  main(){\nint n;\n \tcin>>n;\n \tfor(int i=0;i<100010;i++)for(int j=0;j<3;j++) dp[i][j]= -inf*1000000000ll;\n \tfor(int i=0;i<n-1;i++){\n \t\tint dd;\n \t\tstring sa;\n \t\tcin>>dd>>sa;\n \t\ta[i+1]=dd;\n \t\tif(sa==\"+\")op[i+1]=1;\n \t\telse op[i+1]=-1;\n \t}\n \tcin>>a[n];\n \top[0]=1;\n \tdp[0][0]=0;\n \t\n \tfor(int i=1;i<=n;i++){\n \t\tif(op[i-1]==1){\n \t\t\tif(dp[i-1][0]!=-inf*1000000000ll)\tdp[i][0]=max(dp[i][0],dp[i-1][0]+a[i]);\n \t\t\tif(dp[i-1][1]!=-inf*1000000000ll)   dp[i][0]=max(dp[i][0],dp[i-1][1]+a[i]);\n \t\tif(dp[i-1][1]!=-inf*1000000000ll)\tdp[i][1]=max(dp[i][1],dp[i-1][1]-a[i]);\n \t\tif(dp[i-1][2]!=-inf*1000000000ll)\tdp[i][1]=max(dp[i][1],dp[i-1][2]-a[i]);\n \t\tif(dp[i-1][2]!=-inf*1000000000ll)\tdp[i][2]=max(dp[i][2],dp[i-1][2]+a[i]);\n \t\t}\n \t\telse{\n \t\tif(dp[i-1][0]!=-inf*1000000000ll)\tdp[i][0]=max(dp[i][0],dp[i-1][0]-a[i]);\n \t\tif(dp[i-1][1]!=-inf*1000000000ll)\tdp[i][0]=max(dp[i][0],dp[i-1][1]-a[i]);\n \t\tif(dp[i-1][0]!=-inf*1000000000ll)\tdp[i][1]=max(dp[i][1],dp[i-1][0]-a[i]);\n \t\tif(dp[i-1][1]!=-inf*1000000000ll)\tdp[i][1]=max(dp[i][1],dp[i-1][1]+a[i]);\n \t\tif(dp[i-1][2]!=-inf*1000000000ll)\tdp[i][1]=max(dp[i][1],dp[i-1][2]+a[i]);\n \t\tif(dp[i-1][1]!=-inf*1000000000ll)\tdp[i][2]=max(dp[i][2],dp[i-1][1]+a[i]);\n \t\tif(dp[i-1][2]!=-inf*1000000000ll)\tdp[i][2]=max(dp[i][2],dp[i-1][2]-a[i]);\n \t\t}\n \t//\tcout<<dp[i][0]<<\" \"<<dp[i][1]<<\" \"<<dp[i][2]<<\" \"<<endl;\n \t\t\n \t}\n \tcout<<max(dp[n][0],max(dp[n][1],dp[n][2]))<<endl;\n \t\n                   //  \tprintf(\"%.10f\\n\",ans[n-1]);\n                    \treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <algorithm>\n#include <cstring>\n#include <ctime>\n\n#define Rep(i, n) for (int i = 1; i <= n; i ++)\n#define Rep0(i, n) for (int i = 0; i <= n; i ++)\n#define RepG(i, x) for (int i = head[x]; i; i = edge[i].next)\n#define v edge[i].to\n#define mp(a, b) make_pair(a, b)\n\nusing namespace std;\n\nconst int N = 100010;\n\nint f[N][4], c[N], a[N];\nchar op[2];\n\nint main()\n{\n\tint n;\n\tscanf(\"%d\", &n);\n\tRep(i, n) {\n\t\tif (i != 1) scanf(\"%s\", op);\n\t\tif (i == 1 || op[0] == '+') c[i] = 1;\n\t\telse c[i] = -1;\n\t\tscanf(\"%d\", &a[i]);\n\t}\n\tRep0(i, n) Rep0(j, 2) f[i][j] = -1e9;\n\tf[0][0] = 0;\n\tRep0(i, n) Rep0(j, 2){\n\t\tint tt = j == 1 ? -1 : 1;\n\t\tif (j) {\n\t\t\tf[i + 1][j - 1] = max(f[i + 1][j - 1], f[i][j] + tt * c[i + 1] * a[i + 1]);\n\t\t\tif (c[i + 1] == -1) f[i + 1][j] = max(f[i + 1][j], f[i][j] + tt * a[i + 1]);\n\t\t}\n\t\tif (c[i + 1] == -1)\n\t\t\tf[i + 1][j + 1] = max(f[i + 1][j + 1], f[i][j] + tt * c[i + 1] * a[i + 1]);\n\t\tf[i + 1][j] = max(f[i + 1][j], f[i][j] + tt * c[i + 1] * a[i + 1]);\n\t}\n\tprintf(\"%d\\n\", f[n][0]);\n\t\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n#define int long long\nconst double PI = 3.14159265358979323846;\ntypedef vector<int> vint;\ntypedef pair<int, int> pint;\nint dx[8] = {1, 0, -1, 0, 1, -1, -1, 1};\nint dy[8] = {0, 1, 0, -1, 1, 1, -1, -1};\n\nint N;\nint A[110000];\nchar op[110000];\n\nsigned main() {\n    cin >> N;\n    cin >> A[0];\n    for (int i = 1; i < N; i++)cin >> op[i] >> A[i];\n    op[N] = '-'; A[N] = 0;\n\n    int sum = A[0], total_minus = 0, cur_minus = 0, min_minus = LLONG_MAX;\n    for (int i = 1; i <= N; i++) {\n        if (op[i] == '+') {\n            if (total_minus > 0)cur_minus += A[i];\n        } else {\n            if (total_minus > 0)min_minus = min(min_minus, total_minus + cur_minus);\n            total_minus += A[i];\n            cur_minus = 0;\n        }\n        sum += A[i];\n    }\n    if (min_minus == LLONG_MAX)min_minus = 0;\n    cout << sum - 2 * min_minus;\n\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <sstream>\n#include <cstdio>\n#include <cstdlib>\n#include <cmath>\n#include <ctime>\n#include <cstring>\n#include <string>\n#include <vector>\n#include <stack>\n#include <queue>\n#include <deque>\n#include <map>\n#include <set>\n#include <bitset>\n#include <numeric>\n#include <utility>\n#include <iomanip>\n#include <algorithm>\n#include <functional>\nusing namespace std;\n\n#define COUT(x) cout << #x << \" = \" << (x) << \" (L\" << __LINE__ << \")\" << endl\n#define EACH(i, s) for (__typeof__((s).begin()) i = (s).begin(); i != (s).end(); ++i)\n\ntemplate<class T> inline bool chmax(T& a, T b) { if (a < b) { a = b; return 1; } return 0; }\ntemplate<class T> inline bool chmin(T& a, T b) { if (a > b) { a = b; return 1; } return 0; }\ntemplate<class T1, class T2> ostream& operator << (ostream &s, pair<T1,T2> P)\n{ return s << '<' << P.first << \", \" << P.second << '>'; }\ntemplate<class T> ostream& operator << (ostream &s, vector<T> P)\n{ for (int i = 0; i < P.size(); ++i) { if (i > 0) { s << \" \"; } s << P[i]; } return s; }\ntemplate<class T> ostream& operator << (ostream &s, vector<vector<T> > P)\n{ for (int i = 0; i < P.size(); ++i) { s << endl << P[i]; } return s << endl; }\ntemplate<class T1, class T2> ostream& operator << (ostream &s, map<T1,T2> P)\n{ EACH(it, P) { s << \"<\" << it->first << \"->\" << it->second << \"> \"; } return s << endl; }\n\nint N;\nint main() {\n    while (cin >> N) {\n        long long res = 0;\n        bool isM = false;\n        long long a;\n        cin >> a;\n        res = a;\n        for (int i = 1; i < N; ++i) {\n            char c;\n            cin >> c >> a;\n            if (isM) res += abs(a);\n            else {\n                if (c == '-') {\n                    isM = true;\n                    res -= a;\n                }\n                else {\n                    res += a;\n                }\n            }\n        }\n        cout << res << endl;\n    }\n}\n\n            \n            \n            \n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\nint n;\nlong long a[100005],s[100005],cc[100005],ans;\nint main()\n{\n\tcin>>n>>a[1];s[1]=cc[1]=a[1];\n\tfor(int i=2;i<=n;i++)\n\t{\n\t\tchar c;\n\t\tcin>>c>>a[i];\n\t\tcc[i]=cc[i-1]+a[i];\n\t\tif(c=='-')a[i]*=-1;\n\t\ts[i]=s[i-1]+a[i];\n\t}\n\tans=s[n];\n\tfor(int i=2;i<=n;i++)if(a[i]<0)\n\t{\n\t\tlong long tt=a[i]*2;\n\t\tfor(int j=i+1;j<=n&&a[j]>0;j++)tt-=a[j]*2;\n\t\tans=max(ans,s[i-1]+tt+cc[n]-cc[i-1]);\n\t}\n\tcout<<ans<<endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "// Math = ♥\n// Sometimes it is people that no one imagines anything of who do things that no one can imagine\n// After all this time? Always\n\n#include <bits/stdc++.h>                        // uncomment before submission\n//#include <ext/pb_ds/assoc_container.hpp>\t\t// uncomment before submission\n//#include <ext/pb_ds/tree_policy.hpp>\t\t\t// uncomment before submission\n//using namespace __gnu_pbds;\t\t\t\t\t// uncomment before submission\nusing namespace std;\n//<---------------------------------------------------Template----------------------------------------------------------->\n#define int long long\n#define ll long long\n#define ld long double\nint INF = 1e9 + 7;\ntypedef pair<ll, ll> ii;\ntypedef vector<ll> vi;                  // Vector of long long\ntypedef vector<vi> vvi;                 // Vector of vi\ntypedef vector<ii> vii;                 // Vector of pairs\ntypedef vector<vii> vvii;               // Vector of Vector of pairs\ntypedef vector<bool> vb;                // Vector of bool\n#define pq priority_queue               // Max heap (To convert to min heap, use negative sign before every value)\n#define ff first                        // For pairs\n#define ss second                       // For pairs\n#define pb push_back                    // Pushback to vector\n#define mp make_pair                    // Makes pairs to be stored as pair\n#define all(c) (c).begin(), (c).end()   // Mainly used by me in sorting\n// ordered_set adds two new functions to set - (set).find_by_order([kth element based on zero indexing]) and order_of_key()\n// order_of_key returns number of elements less that parameter. If element exists, that order is its index\n#define ordered_set tree<ll, null_type, less<ll>, rb_tree_tag, tree_order_statistics_node_update>\n//<----------------------------------------------------------------------------------------------------------------------->\n\nsigned main()\n{\n    ios_base::sync_with_stdio(false);\n    cin.tie(NULL);\n    int n;\n    cin >> n;\n\n    vector<char> op;\n    vi num;\n\n    int x;\n    cin >> x, num.pb(x);\n    for (int i = 0; i < n - 1; i++)\n    {\n        char ch;\n        cin >> ch >> x;\n        op.pb(ch), num.pb(x);\n    }\n\n    vvi dp(n, vector<int>(3));\n    dp[0][0] = num[0];\n    dp[0][1] = -INF;\n    dp[0][2] = -INF;\n\n    for (int i = 1; i < n; i++)\n    {\n        if (op[i - 1] == '+')\n        {\n            dp[i][0] = dp[i - 1][0] + num[i];\n            dp[i][1] = dp[i - 1][1] - num[i];\n            dp[i][2] = dp[i - 1][2] + num[i];\n            dp[i][0] = max(dp[i][0], dp[i][2]);\n            dp[i][1] = max(dp[i][1], dp[i][2]);\n        } else\n        {\n            dp[i][1] = max(dp[i - 1][0], dp[i - 1][1]) - num[i];\n            dp[i][2] = max(dp[i - 1][1], dp[i - 1][2]) + num[i];\n            dp[i][0] = -INF;\n        }\n    }\n\n    int a[] = {dp[n - 1][0], dp[n - 1][1], dp[n - 1][2]};\n    sort(a, a + 3);\n\n    cout << a[2] << endl;\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstdio>\n#include <algorithm>\n#include <vector>\n#include <stack>\n#include <queue>\n#include <map>\n#include <set>\n#include <string>\n#include <cstring>\n#include <bitset>\n#define ll long long\n#define rep(x,n) for(ll (x)=0;(x)<n;(x)++)\n#define rep1(x,n) for(ll (x)=1;(x)<=n;(x)++)\n#define ios::sync_with_stdio(0);\n#define lson(x) ((x)<<1)\n#define rson(x) ((x)<<1|1)\nusing namespace std;\n\nconst ll N=100010;\nll a[N],per[N];\nvector<ll> sub;\n\nint main()\n{\n    #ifdef LOCAL\n        //freopen(\"C_data.txt\",\"r\",stdin);\n    #endif // LOCAL\n    ll n;\n    cin>>n>>a[0];\n    per[0]=a[0];\n    ll abssum=a[0],ans=a[0];\n    char op;\n    for(ll j=1;j<n;j++)\n    {\n        cin>>op>>a[j];\n        per[j]=per[j-1]+a[j];\n        abssum+=a[j];\n        if(op=='+') ans+=a[j];\n        else\n        {\n            ans-=a[j];\n            sub.push_back(j);\n        }\n    }\n    for(ll j=0;j<sub.size()-1;j++)\n    {\n        ll p1=sub[j],p2=sub[j+1];\n        ll t=abssum-=(per[p2-1]-per[p1-1])*2;\n        ans=max(ans,t);\n        abssum-=a[p1]*2;\n    }\n    cout<<ans<<endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <string>\n#include <algorithm>\n#include <set>\n#include <cassert>\n\nusing namespace std;\n\nconstexpr int64_t kMod = 1e9+7;\n\nint main() {\n    std::vector<int> v;\n\n    int n;\n    cin >> n;\n\n    int64_t answer = 0;\n    cin >> answer;\n    for (int i = 0; i < n - 1; i++) {\n        char c;\n        int x;\n        cin >> c >> x;\n        int new_x = x * (c == '+' ? 1 : -1);\n        if (v.empty()) {\n            v.push_back(new_x);\n        } else {\n            if (new_x > 0 && v.back() >= 1) {\n                v.back() += new_x;\n                continue;\n            }\n            if ((new_x > 0 && v.back() < 0) || (new_x < 0 && v.back() > 0)) {\n                v.push_back(new_x);\n                continue;\n            }\n            v.push_back(0);\n            v.push_back(new_x);\n        }\n    }\n    if (v.back() < 0) {\n        v.push_back(0);\n    }\n    if (v.size() && v[0] > 0) {\n        answer += v[0];\n        v.erase(v.begin());\n    }\n\n    int64_t sum = 0;\n    for (int i = 0; i < (int)v.size(); i++) {\n        sum += v[i];\n    }\n    int64_t best_ans = sum;\n    int64_t cur_sum = 0;\n\n    for (int i = (int)v.size() - 1; i >= 0; i--) {\n        assert(v[i] >= 0);\n        assert(i > 0);\n        assert(v[i - 1] < 0);\n\n        sum -= v[i];\n        sum -= v[i - 1];\n        best_ans = max(best_ans, cur_sum -v[i] + v[i - 1] + sum);\n        cur_sum += v[i];\n        cur_sum -= v[i - 1];\n        i--;\n    }\n    cout << best_ans + answer << endl;\n\n    return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "/// Kazuki Hoshino\n\n\n#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\ntypedef long double ld;\ntypedef vector<int> vi;\ntypedef pair<int,int> pi;\ntypedef pair<ll, ll> pll;\ntypedef vector<ll> vl;\ntypedef vector<pi> vpi;\n#define inf 10000000000000000\n#define mod 1000000007\n#define rep(i,a,b) for (int i = a; i <= b; i++)\n#define rep1(i, a, b) for(int i =a; i >=b; i--)\n#define f first\n#define ss second\n#define pb push_back\n#define all(c) (c).begin(),(c).end()\n#define mt make_tuple\n#define endl '\\n'\n\ntemplate<typename A,typename B>inline void chmin(A &a,B b){if(a>b)a=b;}\ntemplate<typename A,typename B>inline void chmax(A &a,B b){if(a<b)a=b;}\n\nll n , a[101010], dp[101010], sum[101010], x, pre, mn=-inf, t;\nbool pm[101010];\nchar ch;\n\nint main(){\nios::sync_with_stdio(0);\ncin.tie(0);\n\n//freopen(\"input.txt\",\"r\",stdin);\n//freopen(\"output.txt\",\"w\",stdout);\n\n\n    //cin >> t;\n\n//while(t--){\n\n    cin >> n >> x;\n    dp[0]=x;\n\n    n--;\n\n    rep(i, 0, n-1){\n        cin >> ch >> x;\n\n        pm[i]=ch!='+';\n\n        sum[i+1]=x;\n        a[i]=x;\n\n    }\n\n    rep(i,1,n){\n        sum[i+1]+=sum[i];\n    }\n\n    pre=-1;\n\n    rep(i,0,n-1){\n\n        if(pm[i] && pre!=-1){\n            chmax(mn,dp[pre]-(sum[i]-sum[pre])-sum[i]);\n        }\n        if(!pm[i]){\n            dp[i+1]=max(dp[i],mn+sum[i])+a[i];\n        }\n        else{\n            dp[i+1]=max(dp[i]-a[i],mn+sum[i]+a[i]);\n            pre=i;\n        }\n    }\n    cout<<dp[n]<<endl;\n\n//}\n\n\nreturn 0;\n}\n///....\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define REP(i, n) for (int i = 0; (i) < (int)(n); ++ (i))\n#define REP3(i, m, n) for (int i = (m); (i) < (int)(n); ++ (i))\n#define ALL(x) begin(x), end(x)\nusing ll = long long;\nusing namespace std;\ntemplate <class T, class U> inline void chmax(T & a, U const & b) { a = max<T>(a, b); }\n\nll solve(int n, vector<int> const & a, vector<char> const & op) {\n    constexpr int M = 3;\n    array<ll, M> cur, prv;\n    fill(ALL(cur), LLONG_MIN);\n    cur[0] = a[0];\n    REP3 (i, 1, n) {\n        swap(cur, prv);\n        fill(ALL(cur), LLONG_MIN);\n        auto sign = [&](int j) { return (j % 2 == 0 ? +1 : -1); };\n        if (op[i - 1] == '+') {\n            REP (j, M) {\n                if (prv[j] != LLONG_MIN) {\n                    chmax(cur[j], prv[j] + sign(j) * a[i]);   // ... + a_i\n                }\n                if (j + 1 < M and prv[j + 1] != LLONG_MIN) {\n                    chmax(cur[j], prv[j + 1] + sign(j) * a[i]);  // ...) + a_i\n                }\n            }\n        } else if (op[i - 1] == '-') {\n            REP (j, M) {\n                if (j >= 1 and prv[j] != LLONG_MIN) {\n                    chmax(cur[j], prv[j] + sign(j) * a[i]);  // ...) - (a_i\n                }\n                if (j - 1 >= 0 and prv[j - 1] != LLONG_MIN) {\n                    chmax(cur[j], prv[j - 1] + sign(j) * a[i]);  // ... - (a_i\n                }\n            }\n        } else {\n            assert (false);\n        }\n    }\n    return *max_element(ALL(cur));  // ... )))\n}\n\nint main() {\n    int n; cin >> n;\n    vector<int> a(n);\n    vector<char> op(n - 1);\n    REP (i, n - 1) {\n        cin >> a[i] >> op[i];\n    }\n    cin >> a[n - 1];\n    cout << solve(n, a, op) << endl;\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <string>\n#include <list>\n#include <vector>\n#include <queue>\n#include <algorithm>\n#include <climits>\n#include <cstring>\n#define int long long\n#define uint unsigned long long\n#define CONTAINS(v,n) (find((v).begin(), (v).end(), (n)) != (v).end())\n#define SORT(v) sort((v).begin(), (v).end())\n#define RSORT(v) sort((v).rbegin(), (v).rend())\n#define ARY_SORT(a, size) sort((a), (a)+(size))\n#define MAX(a,b) (((a) > (b)) ? (a) : (b))\n#define MIN(a,b) (((a) < (b)) ? (a) : (b))\nusing namespace std;\n\nint INIT = 1000000000000000L; //10^5 * 10^9 * 10\n\nint N;\nint A[100000];\nchar op[100000];\n\nint max_dp[100000];\nint min_dp[100000];\n\nint get_max(int n);\nint get_min(int n);\n\nint get_max(int n) //n以降を作って作れるで最大の数\n{\n\tif (n == N - 1)\n\t{\n\t\tif (op[n - 1] == '+')\n\t\t{\n\t\t\treturn A[n];\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn -A[n];\n\t\t}\n\t}\n\n\tif (max_dp[n] < INIT)\n\t{\n\t\treturn max_dp[n];\n\t}\n\n\tint res;\n\tif (n == 0 || op[n - 1] == '+')\n \t{\n\t\tres = A[n] + get_max(n + 1);\n\t}\n\telse\n\t{\n\t\tint d1 = -A[n] + get_max(n + 1);\n\t\tint d2 = -(A[n] + get_max(n + 1));\n\t\tint d3 = -A[n] + get_min(n + 1);\n\t\tint d4 = -(A[n] + get_min(n + 1));\n\t\tif (d1 >= d2 && d1 >= d3 && d1 >= d4)\n\t\t{\n\t\t\tres = d1;\n\t\t}\n\t\telse if (d2 >= d1 && d2 >= d3 && d2 >= d4)\n\t\t{\n\t\t\tres = d2;\n\t\t}\n\t\telse if (d3 >= d1 && d3 >= d2 && d3 >= d4)\n\t\t{\n\t\t\tres = d3;\n\t\t}\n\t\telse if (d4 >= d1 && d4 >= d2 && d4 >= d3)\n\t\t{\n\t\t\tres = d4;\n\t\t}\n\t}\n\tmax_dp[n] = res;\n\treturn res;\n}\n\nint get_min(int n) //n以降を作って作れるで最小の数\n{\n\tif (n == N - 1)\n\t{\n\t\tif (op[n - 1] == '+')\n\t\t{\n\t\t\treturn A[n];\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn -A[n];\n\t\t}\n\t}\n\n\tif (min_dp[n] < INIT)\n\t{\n\t\treturn min_dp[n];\n\t}\n\n\tint res;\n\tif (n == 0 || op[n - 1] == '+')\n\t{\n\t\tres = A[n] + get_min(n + 1);\n\t}\n\telse\n\t{\n\t\tint d1 = -A[n] + get_max(n + 1);\n\t\tint d2 = -(A[n] + get_max(n + 1));\n\t\tint d3 = -A[n] + get_min(n + 1);\n\t\tint d4 = -(A[n] + get_min(n + 1));\n\t\tif (d1 <= d2 && d1 <= d3 && d1 <= d4)\n\t\t{\n\t\t\tres = d1;\n\t\t}\n\t\telse if (d2 <= d1 && d2 <= d3 && d2 <= d4)\n\t\t{\n\t\t\tres = d2;\n\t\t}\n\t\telse if (d3 <= d1 && d3 <= d2 && d3 <= d4)\n\t\t{\n\t\t\tres = d3;\n\t\t}\n\t\telse if (d4 <= d1 && d4 <= d2 && d4 <= d3)\n\t\t{\n\t\t\tres = d4;\n\t\t}\n\t}\n\tmin_dp[n] = res;\n\treturn res;\n}\n\nsigned main()\n{\n\tcin >> N;\n\tfor (int i = 0; i < N; i++)\n\t{\n\t\tcin >> A[i];\n\t\tif (i < N - 1) cin >> op[i];\n\t}\n\tfor (int i = 0; i < N; i++)\n\t{\n\t\tmax_dp[i] = INIT;\n\t\tmin_dp[i] = INIT;\n\t}\n\tcout << get_max(0) << endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nusing ll = long long;\nusing Pi = pair<int, int>;\nusing Pl = pair<ll, ll>;\nusing vint = vector<int>;\nusing vll = vector<ll>;\ntemplate<typename T> using uset = unordered_set<T>;\ntemplate<typename T1, typename T2> using umap = unordered_map<T1, T2>;\n\nconstexpr int INF = (1 << 30) - 1;\nconstexpr ll LLINF = 1LL << 60;\nconstexpr int dy[] = {1, 0, -1, 0, 1, -1, -1, 1};\nconstexpr int dx[] = {0, 1, 0, -1, 1, 1, -1, -1};\nconstexpr char el = '\\n';\nconstexpr int mod = 1000000007;\n\ntemplate<typename T> T gcd(T a, T b) { return (b ? gcd(b, a % b) : a); }\ntemplate<typename T> T lcm(T a, T b) { return (a / gcd(a, b) * b); }\ntemplate<typename T1, typename T2> inline void chmin(T1 &a, T2 b) { if (a > b) a = b; }\ntemplate<typename T1, typename T2> inline void chmax(T1 &a, T2 b) { if (a < b) a = b; }\n\nint main() {\n    ll N;\n    cin >> N;\n    ll dp[100005][3];\n\n    fill_n(*dp, 100005 * 3, -LLINF);\n    dp[0][0] = 0;\n    for (int i = 0; i < N; i++) {\n        char op;\n        ll A;\n        if (i == 0) op = '+';\n        else cin >> op;\n        cin >> A;\n        if (op == '-') A = -A;\n\n        chmax(dp[i + 1][0], dp[i][0] + A);\n        chmax(dp[i + 1][1], dp[i][1] - A);\n        chmax(dp[i + 1][2], dp[i][2] + A);\n        if (op == '-') {\n            chmax(dp[i + 1][1], dp[i][0] + A);\n            chmax(dp[i + 1][1], dp[i][2] + A);\n        }\n        chmax(dp[i + 1][2], dp[i][1] - A);\n        chmax(dp[i + 1][1], dp[i][2] - A);\n    }\n    cout << max({dp[N][0], dp[N][1], dp[N][2]}) << endl;\n    return (0);\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstring>\n#include<cstdio>\n#include<vector>\n#include<algorithm>\n\nusing namespace std;\n\n#define LL long long\ninline int read(){\n\tint x=0,f=1;char c=getchar();\n\tfor(;!isdigit(c);c=getchar()) if(c=='-') f=-1;\n\tfor(;isdigit(c);c=getchar()) x=x*10+c-'0';\n\treturn x*f;\n}\nconst int MAXN = 100010;\nconst int INF = 2147483600;\n\nint N;\nint opr[MAXN+1];\nint a[MAXN+1],f[MAXN+1][201];\n\ninline int fan(int x,int c){\n\tif(c&1) return -x; return x;\n}\n\nint main(){\n\t//freopen(\".in\",\"r\",stdin);\n\t//freopen(\".out\",\"w\",stdout);\n\tN=read(); \n\tfor(int i=1;i<=N;i++){\n\t\ta[i]=read(); char c;\n\t\tif(i<N){\n\t\t\tc=getchar();\n\t\t\tgetchar();\n\t\t\topr[i+1]=(c=='+'?1:-1);\n\t\t}\n\t} memset(f,-127,sizeof(f));\n\topr[1]=1;\n\tf[0][0]=0; /*for(int i=1;i<=N;i++){\n\t\tf[i][0]=f[i-1][0]+opr[i]*a[i];\n\t\tif(opr[i]==-1) f[i][1]=f[i-1][0]+opr[i]*a[i];\n\t\tf[i][0]=max(f[i][0],f[i-1][1]+fan(opr[i])*a[i]);\n\t\tf[i][1]=max(f[i][1],f[i-1][1]+fan(opr[i])*a[i]);\n\t\tcout<<i<<\": \"<<f[i][0]<<\" \"<<f[i][1]<<endl;\n\t} */\n\tfor(int i=1;i<=N;i++){\n\t\tfor(int j=0;j<=min(N,200);j++){\n\t\t\tif(j>0&&opr[i]==-1) f[i][j]=f[i-1][j-1]+fan(opr[i],j-1)*a[i];\n\t\t\tif(j<200&&j<N) f[i][j]=max(f[i][j],f[i-1][j+1]+fan(opr[i],j+1)*a[i]);\n\t\t\tf[i][j]=max(f[i][j],f[i-1][j]+fan(opr[i],j)*a[i]);\n\t\t}\n\t}\n\tfor(int i=0;i<=200;i++) f[N][0]=max(f[N][0],f[N][i]);\n\tprintf(\"%d\\n\",f[N][0]);\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n#include <cmath>\n#include <stdio.h>\n#include <stdlib.h>\n#include <vector>\n#include <map>\n#include <queue>\n#include <set>\n#include <string>\n#include <string.h>\n#include <stack>\n#include <assert.h>\n#define Endl endl\n#define mp make_pair\n#define ll long long \n#define pii pair<int,int>\n#define pll pair<ll,ll>\n#define over(A) {cout<<A<<endl;exit(0);}\n#define all(A) A.begin(),A.end()\n#define ceil(a,b) ((a-1)/b+1)\n#define srand() mt19937 rng(chrono::steady_clock::now().time_since_epoch().count());\n#define rand(l,r) uniform_int_distribution<int>(l,r)(rng)\ntypedef unsigned long long ull;\nconst int inf=1039074182;\nusing namespace std;\nint n;\nint a[100005];\nvector <ll> vec;\nvector <int> pos;\nvector <bool> b;\nint sumabs[100005];\n\nint main()\n{\n//\tfreopen(\"input.txt\",\"r\",stdin);\n\tcin>>n;\n\tchar x;\n\tcin>>a[0];\n\tll res=a[0];\n\tfor(int i=1;i<n;i++)\n\t{\n\t\twhile(x!='+' && x!='-') x=getchar();\n\t\tscanf(\"%d\",a+i);\n\t\tif(x=='-') a[i]=-a[i];\n\t\tx=getchar();\n\t\tres+=a[i];\n\t}\n\tsumabs[n]=0;\n\tfor(int i=n-1;i>=0;i--)\n\t{\n\t\tsumabs[i]=sumabs[i+1]+abs(a[i]);\n\t}\n//\tll res=-1LL*inf*inf;\n\tll now=0;\n\tfor(int i=0;i<n;i++)\n\t{\n\t\tnow+=a[i];\n\t\tif(a[i]<0)\n\t\t{\n\t\t\tres=max(res,now-a[i+1]+sumabs[i+2]);\n\t\t}\n//\t\tcout<<now<<' '<<a[i+1]<<' '<<sumabs[i+2]<<endl;\n\t}\n\tcout<<res<<endl;\n//\tfor(int i=0;i<n;)\n//\t{\n//\t\tll sum=0;\n//\t\twhile(a[i]>0 && i<n)\n//\t\t{\n//\t\t\tsum+=a[i];\n//\t\t\ti++;\n//\t\t}\n//\t\tvec.push_back(sum);\n//\t\twhile(a[i]<0 && i<n)\n//\t\t{\n//\t\t\tvec.push_back(a[i]);\n//\t\t\ti++;\n//\t\t}\n//\t}\n//\twhile(vec.back()==0) vec.pop_back();\n//\tn=vec.size();\n//\tll res=0;\n//\tfor(int i=0;i<n;i++)\n//\t{\n//\t\tif(vec[i]>0) pos.push_back(i);\n//\t}\n//\tint nn;\n//\tfor(int i=0;i<n-1;i++)\n//\t{\n//\t\tif(vec[i]<0 && vec[i+1]<0)\n//\t\t{\n//\t\t\tnn=i;\n//\t\t\tbreak;\n//\t\t}\n//\t}\n//\t\n//\tll res=0;\n//\tfor(int i=0;i<pos.size();i++)\n//\t{\n//\t\tint p=pos[i];\n//\t\tbool tb=false;\n//\t\tif(p!=0 && p!=n-1)\n//\t\t{\n//\t\t\tif(-vec[p+1]>vec[p])\n//\t\t\t{\n//\t\t\t\ttb=true;\n//\t\t\t}\n//\t\t}\n//\t\tb.push_back(tb);\n//\t}\n//\tfor(int i=0;i<n;i++)\n//\t{\n//\t\tcout<<vec[i]<<' ';\n//\t}\n//\tcout<<endl;\n//\tint l=0;\n//\tfor(int i=0;i<pos.size();i++)\n//\t{\n//\t\tll block=0;\n//\t\tfor(int j=pos[i]+2;j<(i==(int)pos.size()-1?n:pos[i+1]);j++)\n//\t\t{\n//\t\t\tblock+=abs(a[j]);\n//\t\t}\n//\t\tif(i==(int)pos.size()-1 && pos[i]==n-1)\n//\t\t{\n//\t\t\tblock+=abs(a[pos[i]]);\n//\t\t}\n//\t\telse\n//\t\t{\n//\t\t\tif(!b[i]) block+=a[pos[i]]+a[pos[i]+1];\n//\t\t\telse block+=-a[pos[i]]-a[pos[i]+1];\n//\t\t}\n//\t\tres+=block;\n//\t\tcout<<i<<' '<<block<<endl;\n//\t}\n//\tcout<<res<<endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n#define testing 1\n#define FOR(ii, ss, ee) for(ll ii = (ss); ii <= (ll)(ee); ++ii)\n#define DEC(ii, ss, ee) for(ll ii = (ss); ii >= (ll)(ee); --ii)\n#define IAMSPEED ios_base::sync_with_stdio(false); cin.tie(0);\n#define db(x) cerr << #x << \"=\" << x << endl\n#define db2(x, y) cerr << #x << \"=\" << x << \" , \" << #y << \"=\" << y << endl\n#define db3(a,b,c) cerr<<#a<<\"=\"<<a<<\",\"<<#b<<\"=\"<<b<<\",\"<<#c<<\"=\"<<c<<endl\n#define dbv(v) cerr << #v << \":\"; for (auto i : v) cerr << i << ' '; cerr << endl\n#define dbvp(v) cerr << #v << \":\"; for (auto i : v) cerr << \"{\"  << i.f << ',' << i.s << \"} \"; cerr << endl\n#define dba(a,ss,ee) cerr << #a << \":\"; FOR(i,ss,ee) cerr << a[i] << ' '; cerr << endl\nmt19937 rng(chrono::steady_clock::now().time_since_epoch().count());\n#define ll long long \n#define pb push_back\n#define inf (int)1e9\n#define oo (ll)1e18\n#define all(x) (x).begin(), (x).end()\n#define f first\n#define s second\n#define reach cerr << \"hi\\n\";\ntypedef pair <int, int> pi;\ntypedef pair <ll,ll> pl;\ntypedef pair <pi, int> pii;\ntypedef tuple<int,int,int> ti3;\nstring lts(ll x) {stringstream s; s << x; return s.str(); }\nll stl(string x) {stringstream s(x); ll temp; s >> temp; return temp; }\nstring cts(char x) {string s(1,x); return s;}\nconst int MOD = 1e9 + 7;\ntemplate <typename T> void maxself(T& a, T b) {\n\ta = max(a, b);\n}\ntemplate <typename T> void minself(T& a, T b) {\n\ta = min(a, b);\n}\n#define MAXN (int)1e5 + 5 \n#if !testing\n\t#define cerr if(0)cout\n#endif\n\nint A[MAXN],dp[MAXN][3];\nchar op[MAXN];\n\nint32_t main() {\n\tIAMSPEED\n\t// set testing to 0 when submitting to judge\n\tmemset(dp,-127,sizeof dp);\n\tint n; cin >> n;\n\tcin >> A[1];\n\tFOR(i,2,n) {\n\t\tcin >> op[i] >> A[i];\n\t}\n\tdp[1][0] = A[1];\n\tFOR(i,2,n) {\n\t\tif (op[i]=='-') A[i]*=-1;\n\t\tmaxself(dp[i][0],dp[i-1][0]+A[i]);\n\t\tmaxself(dp[i][1],dp[i-1][1]-A[i]);\n\t\tmaxself(dp[i][2],dp[i-1][2]+A[i]);\n\t\tif (op[i]=='-') {\n\t\t\tmaxself(dp[i][1],dp[i-1][0]+A[i]);\n\t\t\tmaxself(dp[i][2],dp[i-1][1]-A[i]);\n\t\t}\n\t\tmaxself(dp[i][1],dp[i-1][2]+A[i]);\n\t}\n\tcout << max({dp[n][0],dp[n][1],dp[n][2]});\n\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define int long long \n\nusing namespace std;\n\nint32_t main() {\n    int n; cin >> n;\n    int ans; cin >> ans;\n\n    vector<pair<char, int>> a;\n    for (int i = 1; i < n; ++i) {\n        char sgn; int val; cin >> sgn >> val;\n        a.emplace_back(sgn, val);\n    }\n    n -= 1;\n\n    // Reduce until -\n    for (int i = 0; i <= n; ++i) {\n        if (i == n || a[i].first == '-') {\n            a.erase(a.begin(), a.begin() + i);\n            break;\n        } else {\n            ans += a[i].second;\n        }\n    }\n\n    if (a.empty()) {\n        cout << ans << endl;\n        return 0;\n    }\n    \n    n = a.size(); \n    vector<int> dp(n + 1, 0);\n    vector<int> suff(n + 1, 0);\n    for (int i = n - 1; i >= 0; --i) {\n        suff[i] = suff[i + 1] + a[i].second;\n        if (a[i].first == '-') {\n            int j = i + 1;\n            int now = 0;\n            while (j < n && a[j].first == '+') {\n                now += a[j].second;\n                ++j;\n            }\n            dp[i] = max(\n                    dp[j] + now - a[i].second, \n                    suff[j] - now - a[i].second);\n        }\n    }\n    cout << ans + dp[0] << endl;\n\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\nint a[100002];\nlong long dp[100002][3];\nchar s[2];\nint main(){\n    int n;\n    scanf(\"%d\", &n);\n    scanf(\"%d\", &a[1]);\n\n    for(int i=1;i<=n;i++) dp[i][0] = dp[i][1] = dp[i][2] = -1e14;\n    dp[1][0] = a[1];\n\n    for(int i=2;i<=n;i++){\n        scanf(\"%s\", s);\n        scanf(\"%d\", &a[i]);\n        if(s[0] == '-'){\n            dp[i][0] = max(dp[i-1][0] - a[i], dp[i-1][1] + a[i]);\n            dp[i][1] = max(dp[i-1][0] - a[i], max(dp[i-1][1] + a[i], dp[i-1][2] - a[i]));\n            dp[i][2] = max(dp[i-1][2] - a[i], dp[i-1][1] + a[i]);\n        }\n        else{\n            dp[i][0] = max(dp[i-1][0] + a[i], dp[i-1][1] + a[i]);\n            dp[i][1] = max(dp[i-1][1] - a[i], dp[i-1][2] + a[i]);\n            dp[i][2] = dp[i-1][2] + a[i];\n        }\n    }   \n    printf(\"%lld\\n\", max(max(dp[n][0], dp[n][1]), dp[n][2]));\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n#define ff first\n#define ss second\n#define pb push_back\n#define pf push_front\n#define ppb pop_back()\n#define ppf pop_front()\n#define all(vec) vec.begin(), vec.end()\n#define fol(i,a,b) for(int i=a;i<b;i++)\n#define loop(i,a,b) for(int i=a;i>=b;i--)\n#define forr(x,arr) for(auto& x:arr)\n#define mod 1000000007\n#define INF 0x3f3f3f3f3f3f3f3f\n#define EPS 1e-7\n#define sz(x) ((lli)(x).size())\n\nusing   lli     =   long long;\nusing   lld     =   long double;\nusing   ulli    =   unsigned long long int;\nusing   pll     =   pair<lli, lli>;\nusing   ttt     =   pair<lli, pll>;\nusing   vttt    =   vector<ttt>;\nusing   vll     =   vector<pll>;\nusing   vl      =   vector<lli>;\nusing   vi      =   vector<int>;\nusing   vvi     =   vector<vector<int>>;\nusing   cd      =   complex<lld>;\nconst double PI = acos(-1);\n\n#ifndef tejasp\n#define trace(...) {}\n#define cotra(...) {}\n#define end_routine() {}\n#define localsys 0\n#define endl '\\n'\n#endif\n\nint tejas_919(int kkkk)\n{\n    lli n, m, k, q, u, v, temp=0, ans=0;\n    cin>>n;\n    int phase=1;\n    lli pref[n+5]={}, sum[n+5]={};\n    vi pos;\n    char ch='+';\n    fol(i,1,n+1)\n    {\n        if(i>1)\n        {\n            cin>>ch;\n            if(ch=='-') pos.pb(i);\n        }\n        cin>>pref[i];\n        if(ch=='+') ans+=pref[i];\n        else ans-=pref[i];\n        sum[i]=ans;\n        pref[i]+=pref[i-1];\n    }\n    cotra(pos)\n    trace(pref,n+1)\n    fol(i,0,sz(pos)-1)\n    {\n        lli curans=0;\n        int cur=pos[i]-1, next=pos[i+1]-1;\n        trace(cur,next)\n        curans = sum[cur]-(pref[next]-pref[cur])+(pref[n]-pref[next]);\n        ans=max(ans,curans);\n    }\n    \n    cout<<ans<<endl;\n    return 0;\n}\n\nsigned main()\n{\n    #ifdef tejasp\n            freopen(\"input.txt\", \"rt\", stdin);\n            freopen(\"output.txt\", \"wt\", stdout);\n    #endif\n    if(!localsys) { ios_base::sync_with_stdio(false);cin.tie(NULL);cout.tie(NULL); }\n    cout << fixed << setprecision(10);\n    int t=1;\n    //cin>>t;\n    fol(i,0,t) { tejas_919(i+1); }\n    end_routine();\n    if(localsys) system(\"pause\");\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define del(a,i) memset(a,i,sizeof(a))\n#define ll long long\n#define inl inline\n#define il inl void\n#define it inl int\n#define ill inl ll\n#define re register\n#define ri re int\n#define rl re ll\n#define mid ((l+r)>>1)\n#define lowbit(x) (x&(-x))\n#define INF 0x3f3f3f3f\nusing namespace std;\ntemplate<class T>il read(T &x){\n\tint f=1;char k=getchar();x=0;\n\tfor(;k>'9'||k<'0';k=getchar()) if(k=='-') f=-1;\n\tfor(;k>='0'&&k<='9';k=getchar()) x=(x<<3)+(x<<1)+k-'0';\n\tx*=f;\n}\ntemplate<class T>il _print(T x){\n\tif(x/10) _print(x/10);\n\tputchar(x%10+'0');\n}\ntemplate<class T>il print(T x){\n\tif(x<0) putchar('-'),x=-x;\n\t_print(x);\n}\nll mul(ll a,ll b,ll mod){long double c=1.;return (a*b-(ll)(c*a*b/mod)*mod)%mod;}\nit qpow(int x,int m,int mod){\n\tint res=1,bas=x;\n\twhile(m){\n\t\tif(m&1) res=(1ll*res*bas)%mod;\n\t\tbas=(1ll*bas*bas)%mod,m>>=1;\n\t}\n\treturn res;\n}\nconst int N = 1e5+5;\nint n,val[N],ty[N];\nll ans,sum[N];\nchar op[2];\nvector<int> vec;\nint main(){\n//\tfreopen(\".in\",\"r\",stdin);\n//\tfreopen(\".out\",\"w\",stdout);\n\tread(n),read(val[1]);\n\tfor(ri i=2;i<=n;++i){\n\t\tscanf(\"%s\",op),read(val[i]);\n\t\tif(op[0]=='-') vec.push_back(i);\n\t}\n\tfor(ri i=1;i<=n;++i) sum[i]=sum[i-1]+val[i];\n\tans=INT_MIN;\n\tfor(ri i=0;i<(int)vec.size()-1;++i){\n\t\tint x=vec[i],y=vec[i+1];\n\t\tans=max(ans,sum[n]-2ll*(sum[y-1]-sum[x-1]));\n\t}\n\tprint(ans);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long LL;\nconst int MAXN = 100005;\nint n, x[MAXN], op[MAXN];\nLL ans, rs[MAXN], suf[MAXN];\nint main () {\n\tscanf(\"%d\", &n);\n\tchar ch[2]; op[1] = 1;\n\tfor(int i = 1; i < n; ++i) {\n\t\tscanf(\"%d%s\", &x[i], ch); op[i+1] = ch[0]=='+'?1:-1;\n\t\tans += x[i]*op[i];\n\t}\n\tscanf(\"%d\", &x[n]); ans += x[n]*op[n];\n\tfor(int i = n; i >= 1; --i)\n\t\trs[i] = (op[i+1] == 1 ? rs[i+1] : 0) + x[i],\n\t\tsuf[i] = suf[i+1] + x[i];\n\tLL pre = 0;\n\tfor(int i = 1; i <= n; pre += x[i]*op[i], ++i)\n\t\tif(op[i] == -1 ) {\n\t\t\tans = max(ans, pre + suf[i] - 2*rs[i]);\n\t\t}\n\tprintf(\"%lld\\n\", ans);\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\ntypedef long long ll;\n\nconst int MN = 100010;\n\nint N;\nint A[MN];\nchar B[MN];\nll dp[MN][3];\n\nint main() {\n    scanf(\"%d\", &N);\n\n    for(int i = 0; i < N; i++) {\n        if(i) {\n            scanf(\" %c\", &B[i]);\n        }\n        scanf(\"%d\", &A[i]);\n    }\n\n    if(N == 1) {\n        printf(\"%d\", A[0]);\n        return 0;\n    }\n\n    dp[N - 1][0] = B[N - 1] == '+'? A[N - 1] : -A[N - 1];\n    dp[N - 1][1] = B[N - 1] == '+'? -A[N - 1] : A[N - 1];\n    dp[N - 1][2] = abs(A[N - 1]);\n\n    for(int i = N - 2; i >= 1; i--) {\n        if(B[i] == '+') {\n            dp[i][0] = dp[i + 1][0] + A[i];\n            dp[i][1] = -1e18;\n            dp[i][2] = -1e18;\n            for(int j = 0; j < 3; j++) {\n                dp[i][1] = max(dp[i][1], dp[i + 1][j] - A[i]);\n                dp[i][2] = max(dp[i][2], dp[i + 1][j] + abs(A[i]));\n            }\n        }\n        else {\n            dp[i][0] = -1e18;\n            dp[i][1] = -1e18;\n            dp[i][2] = -1e18;\n            for(int j = 0; j < 3; j++) {\n                if(j < 2) dp[i][0] = max(dp[i][0], dp[i + 1][j] - A[i]);\n                dp[i][1] = max(dp[i][1], dp[i + 1][j] + A[i]);\n                dp[i][2] = max(dp[i][2], dp[i + 1][j] + abs(A[i]));\n            }\n        }\n\n        //cout << i << ' ' << dp[i][0] << ' ' << dp[i][1] << ' ' << dp[i][2] << endl;\n    }\n\n    printf(\"%lld\", dp[1][0] + A[0]);\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define MAXN 200005\n#define LL long long\n#define sum(l,r) (l<=r?(s[r] - s[l-1]):0)\nusing namespace std;\n \nint N;\nLL a[MAXN], s[MAXN];\nint nxt[MAXN];\n\nLL dp[MAXN][3];\n \nint main(){\n\t//freopen(\"1.in\", \"r\", stdin);\n\t//freopen(\"1.out\", \"w\", stdout);\n\t\n\tcin>>N;\n\tcin>>a[1];\n\t\n\tint N1 = 1;\n\tchar op;\n\tint x, f = 1; \n\tfor(int i=1;i<N;i++){\n\t\tcin>>op;\n\t\tcin>>x;\n\t\tif(op=='-') a[++N1] = -x, f = 0;\n\t\telse{\n\t\t\tif(f) a[N1] += x;\n\t\t\telse a[++N1] = x, f = 1; \n\t\t}\n\t}\n\n\tN = N1;\n\tif(N==1){\n\t\tcout<<a[1]<<endl;\n\t\treturn 0;\n\t}\n\t\n\tfor(int i=1;i<=N;i++){\n\t\t//cout<<a[i]<<\" \";\n\t\ts[i] = s[i-1] + abs(a[i]);\n\t}\n\t//cout<<endl;\n\t\n\tmemset(dp, 0xf3, sizeof(dp));\n\tdp[1][0] = a[1];\n\t\n\tfor(int i=2;i<=N;i++){\n\t\tfor(int j=0;j<3;j++){\n\t\t\tfor(int k=0;k<3;k++){\n\t\t\t\tif(a[i]>=0 && k>=j){\n\t\t\t\t\tif(k==1) dp[i][j] = max(dp[i][j], dp[i-1][k] - a[i]);\n\t\t\t\t\telse dp[i][j] = max(dp[i][j], dp[i-1][k] + a[i]);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(a[i]<0){\n\t\t\t\t\tif(k>=j){\n\t\t\t\t\t\tif(k==1) dp[i][j] = max(dp[i][j], dp[i-1][k] - a[i]);\n\t\t\t\t\t\telse dp[i][j] = max(dp[i][j], dp[i-1][k] + a[i]);\n\t\t\t\t\t}\n\t\t\t\t\telse if(k==j-1){\n\t\t\t\t\t\tif(j==2) dp[i][j] = max(dp[i][j], dp[i-1][k] - a[i]);\n\t\t\t\t\t\telse dp[i][j] = max(dp[i][j], dp[i-1][k] + a[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//for(int i=2;i<=N;i++) cout<<dp[i][0]<<\" \"<<dp[i][1]<<\" \"<<dp[i][2]<<endl;\n\t\n\tcout<<dp[N][0];\n\t\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<iostream>\nusing namespace std;\ninline char nc() {\n\treturn getchar();\n\tstatic char b[1<<12],*s=b,*t=b;\n\treturn s==t&&(t=(s=b)+fread(b,1,1<<12,stdin),s==t)?-1:*s++;\n}\ntemplate < class T >\ninline void read(T &x) {\n\tchar b = nc(); x = 0;\n\tfor (; !isdigit(b); b = nc());\n\tfor (; isdigit(b); b = nc()) x = x * 10 + b - '0';\n}\ninline int read() {\n\tchar b = nc();\n\tfor (; b != '-' && b != '+'; b = nc());\n\treturn b == '-' ? -1 : 1;\n}\ntypedef long long ll;\nint n, init;\nll f[2], g[2];\nint main() {\n\tread(n); read(init); f[1] = -1e9;\n\tfor (int a, op, i = 1; i < n; ++i, swap(f, g)) {\n\t\top = read(); read(a);\n\t\tg[0] = f[0] + a * op; g[1] = f[1] - a * op;\n\t\tif (op == -1) {\n\t\t\tg[0] = max(g[0], f[1] - a * op);\n\t\t\tg[1] = max(g[1], f[0] + a * op);\n\t\t}\n\t} printf(\"%lld\\n\", init + max(f[0], f[1]));\n\treturn 0;\t\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<cctype>\n#include<cstdio>\n#include<algorithm>\nusing i64=long long;\nint fetc(){int c=getchar();while(c^'-'&&c^'+')c=getchar();return c;}\nint read(){int x=0,c=getchar();while(isspace(c))c=getchar();while(isdigit(c))(x*=10)+=c&15,c=getchar();return x;}\nint main()\n{\n    int n=read();i64 ans=read(),b=-1e18,c=-1e18;\n    for(int x;n^1;--n) fetc()=='-'?(x=read(),c=b+x,ans=b=std::max(ans-x,c)):(x=read(),ans+=x,c+=x,b=std::max(b-x,c));\n    printf(\"%lld\",ans);\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\nusing ll = long long;\nusing vi = vector<int>;\nusing vll = vector<ll>;\nusing vvi = vector<vector<int>>;\nusing vvl = vector<vector<ll>>;\n\nll dp[101010][3] = {0};\n\nint main() {\n  cin.tie(nullptr);\n  ios::sync_with_stdio(false);\n  int n;\n  cin >> n;\n  vector<ll> a(n);\n  vector<char> op(n);\n  ll INF = 1LL << 34;\n  op[0] = '+';\n  for (int i = 0; i < n; i++) {\n    cin >> a[i];\n    if (i < n - 1)\n      cin >> op[i + 1];\n  }\n  for (int i = 0; i <= n; i++) dp[i][0] = dp[i][1] = dp[i][2] = -INF;\n  dp[0][0] = 0;\n  for (int i = 0; i < n; i++) {\n    if (op[i] == '+') {\n      dp[i + 1][0] = max(a[i] + dp[i][0], max(a[i] + dp[i][1], a[i] + dp[i][2]));\n      dp[i + 1][1] = max(-a[i] + dp[i][1], a[i] + dp[i][2]);\n      dp[i + 1][2] = a[i] + dp[i][2];\n    } else {\n      dp[i + 1][0] = max(-a[i] + dp[i][0], max(a[i] + dp[i][1], a[i] + dp[i][2]));\n      dp[i + 1][1] = max(-a[i] + dp[i][0], max(a[i] + dp[i][1], a[i] + dp[i][2]));\n      dp[i + 1][2] = max(a[i] + dp[i][1], -a[i] + dp[i][2]);\n    }\n  }\n\n  cout << dp[n][0] << endl;\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\nconst int maxn=1e5+10;\nlong long dp[maxn][3];\nint n;\nint val[maxn],pos[maxn];\nchar op[3];\nint main()\n{\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tscanf(\"%d\",&val[i]);\n\t\tif(i!=n)\n\t\t{\n\t\t\tscanf(\"%s\",op+1);\n\t\t\tif(op[1]=='+')pos[i+1]=0;\n\t\t\telse pos[i+1]=1;\t\t\n\t\t}\n\t}\n\tmemset(dp,128,sizeof(dp));\n\tdp[0][0]=0;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tif(pos[i])\n\t\t{\n\t\t\tdp[i][0]=max(dp[i-1][0]-val[i],max(dp[i-1][1]+val[i],dp[i-1][2]-val[i]));\n\t\t\tdp[i][1]=max(dp[i-1][0]-val[i],max(dp[i-1][1]+val[i],dp[i-1][2]-val[i]));\n\t\t\tdp[i][2]=max(dp[i-1][1]+val[i],dp[i-1][2]-val[i]);\n\t\t}\n\t\telse \n\t\t{\n\t\t\tdp[i][0]=max(max(dp[i-1][1]-val[i],dp[i-1][2]+val[i]),dp[i-1][0]+val[i]);\n\t\t\tdp[i][1]=max(dp[i-1][1]-val[i],dp[i-1][2]+val[i]);\n\t\t\tdp[i][2]=dp[i-1][2]+val[i];\n\t\t}\n\t}\n\tprintf(\"%lld\\n\",dp[n][0]);\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\ntypedef long long ll;\nint n;\nint sub;\nll res;\nll A[100100];\nchar op[100100];\n\nll calc(int s) {\n\tif (s==n) return 0;\n\tif (s==n-1||op[s+1]=='-') return A[s];\n\tint p; ll tmp = A[s];\n\tfor (p=s+1;p<n&&op[p]=='+';p++) {\n\t\ttmp += A[p];\n\t}\n\treturn min(A[s]+calc(p),tmp);\n}\n\nint main() {\n\tint i;\n\n\tscanf(\"%d\",&n);\n\tfor (i=0;i<n;i++) {\n\t\tif (i==0) scanf(\"%lld\",&A[i]);\n\t\telse scanf(\" %c %lld\",&op[i],&A[i]);\n\t}\n\tfor (i=0;i<n;i++) res += A[i];\n\tfor (i=1;i<n;i++) if (op[i]=='-') break;\n\tif (i==n) {\n\t\tprintf(\"%lld\\n\",res);\n\t\treturn 0;\n\t}\n\tprintf(\"%lld\\n\",res-2*calc(i));\n\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "// think twice code once\n// Start:\n// End  :\n#include <bits/stdc++.h>\nusing namespace std;\n\n#define rep(i, x, y) for(int i = (x), _ = (y); i <= _; ++ i)\n#define per(i, x, y) for(int i = (x), _ = (y); i >= _; -- i)\n#define dprintf(...) fprintf(stderr, __VA_ARGS__)\n#define disp(x) cout << #x << \" = \" << x << \"; \"\n\ntypedef long long LL;\n\ntemplate <class T> bool chkmin(T& a, T b) { return a > b ? a = b, true : false; }\ntemplate <class T> bool chkmax(T& a, T b) { return a < b ? a = b, true : false; }\n\ntemplate <class T> void read(T& a) {\n\tchar c = getchar(); T f = 1; a = 0;\n\tfor(; !isdigit(c); c = getchar()) if(c == '-') f = -1;\n\tfor(; isdigit(c); c = getchar()) a = a * 10 + c - '0';\n\ta *= f;\n}\n\ntemplate <class T> void write(T a) {\n\tstatic int stk[60]; \n\tint tp = 0;\n\tif(a < 0) putchar('-'), a = -a;\n\tdo {\n\t\tstk[++ tp] = a % 10;\n\t\ta /= 10;\n\t}while(a);\n\t\n\twhile(tp) putchar(stk[tp--] + '0');\n}\n\nconst int maxN = 1e5 + 5;\n\nint a[maxN];\nchar b[maxN];\nint N;\nLL cnt = 0;\n\nint main() {\n#ifdef Leeson\n\tfreopen(\"tmp.in\", \"r\", stdin);\n\tfreopen(\"tmp.out\", \"w\", stdout);\n#endif\n\n\tcin >> N;\n\tread(a[1]);\n\tLL ans = a[1];\n\tLL sum = a[1];\n\trep(i, 2, N) {\n\t\tchar& c = b[i] = getchar();\n\t\twhile(c != '-' && c != '+') \n\t\t\tc = getchar();\n\n\t\tread(a[i]);\n\t\tif(c == '-')\n\t\t\tcnt += a[i], ans -= a[i];\n\t\telse \n\t\t\tans += a[i];\n\t\tsum += a[i];\n\t}\n\n\tLL sora = 0;\n\tper(i, N, 2) {\n\t\tsora += a[i];\n\t\tif(b[i] == '-') {\n\t\t\tcnt -= a[i];\n//\t\t\tdisp(sum), disp(sora), disp(cnt), puts(\"\");\n\t\t\tchkmax(ans, sum - 2 * sora - cnt);\n\t\t\tsora = 0;\n\t\t} \n\t}\n\n\tcout << ans << endl;\n\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\ntypedef pair<int, int> pii;\ntypedef pair<ll, ll> pll;\ntypedef pair<int, ll> pil;\ntypedef pair<int, ll> pli;\ntypedef pair<double,double> pdd;\n#define SQ(i) ((i)*(i))\n#define MEM(a, b) memset(a, (b), sizeof(a))\n#define SZ(i) int(i.size())\n#define FOR(i, j, k, in) for (int i=j ; i<k ; i+=in)\n#define RFOR(i, j, k, in) for (int i=j ; i>=k ; i-=in)\n#define REP(i, j) FOR(i, 0, j, 1)\n#define REP1(i,j) FOR(i, 1, j+1, 1)\n#define RREP(i, j) RFOR(i, j, 0, 1)\n#define ALL(_a) _a.begin(),_a.end()\n#define mp make_pair\n#define pb push_back\n#define eb emplace_back\n#define X first\n#define Y second\n#ifdef tmd\n#define TIME(i) Timer i(#i)\n#define debug(...) do{\\\n    fprintf(stderr,\"%s - %d (%s) = \",__PRETTY_FUNCTION__,__LINE__,#__VA_ARGS__);\\\n    _do(__VA_ARGS__);\\\n}while(0)\ntemplate<typename T>void _do(T &&_x){cerr<<_x<<endl;}\ntemplate<typename T,typename ...S> void _do(T &&_x,S &&..._t){cerr<<_x<<\" ,\";_do(_t...);}\ntemplate<typename _a,typename _b> ostream& operator << (ostream &_s,const pair<_a,_b> &_p){return _s<<\"(\"<<_p.X<<\",\"<<_p.Y<<\")\";}\ntemplate<typename It> ostream& _OUTC(ostream &_s,It _ita,It _itb)\n{\n    _s<<\"{\";\n    for(It _it=_ita;_it!=_itb;_it++)\n    {\n        _s<<(_it==_ita?\"\":\",\")<<*_it;\n    }\n    _s<<\"}\";\n    return _s;\n}\ntemplate<typename _a> ostream &operator << (ostream &_s,vector<_a> &_c){return _OUTC(_s,ALL(_c));}\ntemplate<typename _a> ostream &operator << (ostream &_s,set<_a> &_c){return _OUTC(_s,ALL(_c));}\ntemplate<typename _a> ostream &operator << (ostream &_s,deque<_a> &_c){return _OUTC(_s,ALL(_c));}\ntemplate<typename _a,typename _b> ostream &operator << (ostream &_s,map<_a,_b> &_c){return _OUTC(_s,ALL(_c));}\ntemplate<typename _t> void pary(_t _a,_t _b){_OUTC(cerr,_a,_b);cerr<<endl;}\n#define IOS()\n#else\n#define TIME(i)\n#define debug(...)\n#define pary(...)\n#define endl '\\n'\n#define IOS() ios_base::sync_with_stdio(0);cin.tie(0)\n#endif\nclass Timer {\nprivate:\n    string scope_name;\n    chrono::high_resolution_clock::time_point start_time;\npublic:\n    Timer (string name) : scope_name(name) {\n        start_time = chrono::high_resolution_clock::now();\n    }\n    ~Timer () {\n        auto stop_time = chrono::high_resolution_clock::now();\n        auto length = chrono::duration_cast<chrono::microseconds>(stop_time - start_time).count();\n        double mlength = double(length) * 0.001;\n        debug(scope_name, mlength);\n    }\n};\n\nconst ll MOD = 1000000007;\nconst ll INF = 0x3f3f3f3f3f3f3f3f;\nconst int iNF = 0x3f3f3f3f;\nconst ll MAXN = 100005;\n\nint n;\nll dp[MAXN][3];\nint main () {\n    cin >> n;\n\n    dp[0][1] = -INF;\n    dp[0][2] = -INF;\n    cin >> dp[0][0];\n\n    REP1 (i, n-1) {\n        char op;\n        ll a;\n        cin >> op >> a;\n        if (op == '-') {\n            dp[i][0] = max({dp[i-1][0]-a, dp[i-1][1]+a, dp[i-1][2]-a});\n            dp[i][1] = max({dp[i-1][0]-a, dp[i-1][1]+a, dp[i-1][2]-a});\n            dp[i][2] = max(dp[i-1][1]+a, dp[i-1][2]-a);\n        } else {\n            dp[i][0] = max({dp[i-1][0]+a, dp[i-1][1]-a, dp[i-1][2]+a});\n            dp[i][1] = max(dp[i-1][1]-a, dp[i-1][2]+a);\n            dp[i][2] = dp[i-1][2]+a;\n        }\n    }\n    cout << dp[n-1][0] << endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include<stdio.h>\n#include<stdlib.h>\n#include<string.h>\n#include<math.h>\n#include<iostream>\n#include<algorithm>\n#include<stack>\n#include<queue>\n#include<vector>\n#include<set>\n#include<map>\n#include<string>\nusing namespace std;\ntypedef long long ll;\ntypedef pair<int,int>P;\nconst int INF=0x3f3f3f3f;\nconst double pi=acos(-1.0);\nconst double eps=1e-9;\nconst ll mod=1e9+7;\nll dp[100010][3];\nll a;char c;int n;\nint main()\n{\n    cin>>n>>a;\n    memset(dp,-0x3f3f3f3f3f3f3f3f,sizeof(dp));\n    dp[0][0]=a;\n    for(int i=1;i<n;i++)\n    {\n        scanf(\" %c%d\",&c,&a);\n        if(c=='+')\n        {\n            dp[i][2]=max(dp[i-1][2]+a,dp[i-1][1]-a);\n            dp[i][1]=max(dp[i-1][1]-a,dp[i-1][2]+a);\n            dp[i][0]=max(dp[i-1][0]+a,max(dp[i-1][1]-a,dp[i-1][2]+a));\n        }\n        else\n        {\n            dp[i][2]=max(dp[i-1][1]+a,dp[i-1][2]-a);\n            dp[i][0]=dp[i][1]=max(dp[i-1][1]+a,max(dp[i-1][2]-a,dp[i-1][0]-a));\n        }\n    }\n    printf(\"%lld\\n\",max(dp[n-1][0],max(dp[n-1][1],dp[n-1][2])));\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define int long long\n#define fi first\n#define se second\n#define PB push_back\nusing namespace std;\ntypedef pair<int, int> P1;\ntypedef pair<int, pair<int, int> > P2;\nstatic const int INF = 1ll<<60;\nstatic const int dx[] = { 1, -1, 0, 0, };\nstatic const int dy[] = { 0, 0, 1, -1 };\nstatic const int mod = 1000000007;\n\nint N;\nint A[100005];\nchar op[100005];\nint dp[1005][1005];\n//    [i項目][i項目までに開いているかっこの数]\n\nint solve(){\n    for(int i=0;i<N;++i)for(int j=0;j<N;++j)dp[i][j]=-INF;\n    dp[0][0] = A[0];\n    for(int i=0;i<N-1;++i){\n        for(int j=0;j<=min(i,3ll);++j){\n            int t1 = pow(-1,j)*A[i+1];\n            //cout<<t1<<endl;\n            //cout<<i<<\" \"<<j<<endl;\n            if(op[i+1]=='+'){\n                dp[i+1][j] = max(dp[i][j]+t1,dp[i+1][j]);\n                if(j!=0)dp[i+1][j-1] = max(dp[i][j]+t1,dp[i+1][j-1]);\n            }\n            else {\n                dp[i+1][j] = max(dp[i][j]-t1,dp[i+1][j]);\n                dp[i+1][j+1] = max(dp[i][j]-t1,dp[i+1][j+1]);\n                if(j!=0)dp[i+1][j-1] = max(dp[i][j]-t1,dp[i+1][j-1]);\n            }\n            //cout<<i<<\" \"<<j<<endl;\n            //cout<<dp[i][j]<<\" \"<<dp[i+1][j]<<\" \"<<dp[i+1][j+1]<<endl;\n        }\n    }\n    int ans=-INF;\n    for(int i=0;i<N;++i)ans=max(dp[N-1][i],ans);\n    return ans;\n}\n\n\nsigned main(){\n    cin>>N;\n    op[0]='+';\n    for(int i=0;i<N;++i){\n        cin>>A[i];\n        if(i!=N-1)cin>>op[i+1];\n    }\n    cout<<solve()<<endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n#define LL long long\ninline LL read(){\n\tLL x=0,f=1;\n\tchar ch=getchar();\n\twhile (ch<'0' || ch>'9'){\n\t\tif (ch=='-') f=-1;\n\t\tch=getchar();\n\t}\n\twhile (ch>='0' && ch<='9'){\n\t\tx=x*10+ch-'0';ch=getchar();\n\t}\n\treturn x*f;\n}\nsigned main(){\n\tint n=read();\n\tLL x=0,y,z=y=-10000000000000ll;\n\tfor (int i=1;i<=n;++i){\n\t\tLL p=read();x+=p;y-=p;z+=p;\n\t\tif (p<0){\n\t\t\tz=max(y,z);y=max(x,y);\n\t\t}\n\t\tx=max(x,y);y=max(y,z);\n\t}\n\tcout<<x<<endl;\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<cstdlib>\n#include<cstring>\n#include<iostream>\n#define LL long long\nusing namespace std;\nconst LL inf=1LL<<60;\nLL n,a[100010],f[100010][3];\nchar op[100010][2];\nint main()\n{\n    scanf(\"%d\",&n);\n    for(int i=1;i<n;i++) scanf(\"%d %s\",&a[i],op[i]);\n    scanf(\"%d\",&a[n]);\n    f[1][0]=a[1];f[1][1]=f[1][2]=-inf;\n    for(int i=2;i<=n;i++)\n        if(op[i-1][0]=='+')\n        {\n            f[i][0]=max(f[i-1][0],f[i-1][1])+a[i];\n            f[i][1]=f[i-1][1]-a[i];\n            f[i][2]=f[i-1][2]+a[i];\n        }\n        else\n        {\n            f[i][0]=-inf;\n            f[i][1]=max(f[i-1][0],f[i-1][1])-a[i];\n            f[i][2]=max(f[i-1][1],f[i-1][2])+a[i];\n        }\n    printf(\"%lld\",max(f[n][0],max(f[n][1],f[n][2])));\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#include<unordered_map>\n#include<unordered_set>\nusing namespace std;\n\n#define MAX 100002\n\nint n;\n\nlong long int a[MAX];\n\nchar buf[2];\n\nlong long int dp[MAX][3];\n\nint main(){\n\tcin >> n;\n\tfor (int i = 0; i < n; i++){\n\t\tfor (int j = 0; j < 3; j++){\n\t\t\tdp[i][j] = LLONG_MIN;\n\t\t}\n\t\tif (i){\n\t\t\tscanf(\"%s\", buf);\n\t\t}\n\t\tscanf(\"%lld\", &a[i]);\n\t\tif (i){\n\t\t\tif (buf[0] == '-'){\n\t\t\t\ta[i] *= -1;\n\t\t\t}\n\t\t}\n\t}\n\tdp[0][0] = a[0];\n\tfor (int i = 0; i+1 < n; i++){\n\t\tfor (int j = 0; j < 3; j++){\n\t\t\tif (dp[i][j] == LLONG_MIN)continue;\n\t\t\tlong long int val = 1;\n\t\t\tif (j % 2){\n\t\t\t\tval *= -1LL;\n\t\t\t}\n\t\t\tdp[i + 1][j] = max(dp[i + 1][j], dp[i][j]+a[i+1]*val);\n\t\t\tval *= -1LL;\n\t\t\tif (j){\n\t\t\t\tdp[i + 1][j - 1] = max(dp[i + 1][j - 1], dp[i][j] + a[i+1] * val*-1LL);\n\t\t\t}\n\t\t\tif (j + 1 < 3&&a[i+1]<0){\n\t\t\t\tdp[i + 1][j + 1] = max(dp[i + 1][j + 1], dp[i][j] + a[i+1] * val*-1LL);\n\t\t\t}\n\t\t}\n\t}\n\tlong long int ans = dp[n-1][0];\n\tans = max(ans, dp[n - 1][1]);\n\tans = max(ans, dp[n - 1][2]);\n\tprintf(\"%lld\\n\", ans);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "/*\n1. 只有 \"-\" 号后面才有 \"(\"\n2. 最多只会存在两层嵌套。假设有三层：-(A-(B-(C-D))), 显然 -(C-D) 还是 -(C-D)，可以变化成 -(A-B)-(C-D)，层数变少.\n\n由此得出 DP 解法：f[i, j] 表示结束第 i 个数时，有 j 个左括号尚未匹配的答案，j = 0/1/2\n*/\n#include <bits/stdc++.h>\n#define rep(i, x, y) for (int i = x; i <= y; i++)\nusing namespace std;\n\nconst int N = 1e5 + 10;\ntypedef long long ll;\nll n, x, f[3];\n\nint main() {\n    cin >> n;\n    rep(i, 1, n) {\n        cin >> x;\n        f[0] += x, f[1] -= x, f[2] += x;\n        if (x < 0)\n            f[2] = max(f[2], f[1]), f[1] = max(f[1], f[0]);  // 在 x 前加一个 '('\n        f[0] = max(f[0], f[1]), f[1] = max(f[1], f[2]);  // 在 x 后加一个 ')'\n    }\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "// ====================================\n//   author: M_sea\n//   website: https://m-sea-blog.com/\n// ====================================\n#include <bits/stdc++.h>\n#define file(x) freopen(#x\".in\",\"r\",stdin); freopen(#x\".out\",\"w\",stdout)\n#define debug(...) fprintf(stderr,__VA_ARGS__)\nusing namespace std;\ntypedef long long ll;\n\nint read() {\n\tint X=0,w=1; char c=getchar();\n\twhile (c<'0'||c>'9') { if (c=='-') w=-1; c=getchar(); }\n\twhile (c>='0'&&c<='9') X=X*10+c-'0',c=getchar();\n\treturn X*w;\n}\nchar readc() {\n\tchar c=getchar();\n\twhile (c!='-'&&c!='+') c=getchar();\n\treturn c;\n}\n\nconst int N=100000+10;\n\nint n;\nll dp[N][3];\n\nint main() {\n\tn=read();\n\tdp[1][0]=read(),dp[1][1]=dp[1][2]=-1e18;\n\tfor (int i=2;i<=n;++i) {\n\t\tchar op=readc(); int w=read();\n\t\tif (op=='+') {\n\t\t\tdp[i][0]=max({dp[i-1][0],dp[i-1][1],dp[i-1][2]})+w;\n\t\t\tdp[i][1]=max(dp[i-1][1],dp[i-1][2])-w;\n\t\t\tdp[i][2]=dp[i-1][2]+w;\n\t\t} else {\n\t\t\tdp[i][0]=max({dp[i-1][0],dp[i-1][1],dp[i-1][2]})-w;\n\t\t\tdp[i][1]=max(max(dp[i-1][1],dp[i-1][2])+w,dp[i-1][0]-w);\n\t\t\tdp[i][2]=max(dp[i-1][1],dp[i-1][2])+w;\n\t\t}\n\t}\n\tprintf(\"%lld\\n\",max({dp[n][0],dp[n][1],dp[n][2]}));\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define int long long\n#define double long double\nusing namespace std;\nconst int N = 200010;\nconst int INF = 1LL<<55;\nconst int mod = (1e9)+7;\nconst double EPS = 1e-8;\nconst double PI = 6.0 * asin(0.5);\ntypedef pair<int,int> P;\ntypedef long long ll;\nostream& operator<<(ostream& o,P p){return o<<\"(\"<<p.first<<\",\"<<p.second<<\")\";}\nistream& operator>>(istream& i,P &p){return i>>p.first>>p.second;}\ntemplate<class T> istream& operator>>(istream& i,vector<T> &a){for(auto &t:a)cin>>t;return i;}\ntemplate<class T> T Max(T &a,T b){return a=max(a,b);}\ntemplate<class T> T Min(T &a,T b){return a=min(a,b);}\ntemplate<class T> void prArr(T a,string s=\" \"){int i=0;for(auto t:a)cout<<(i++?s:\"\")<<t;cout<<endl;}\nint n;\nvector<int> A;\nvector<char> op;\nint f[2] = {1,-1};\n\nint used[N][2][2],mem[N][2][2];\n\nint dfs(int idx,int sgn,int open){\n  if(idx == n) return 0;\n  if(used[idx][sgn][open]++) return mem[idx][sgn][open];\n  \n  char ch = op[idx-1];\n  int res = 0;\n  int nsgn = ch == '-'? !sgn:sgn;\n  int nopen = open || ch == '-';\n  int val = f[nsgn] * A[idx];\n  if(nopen == 1) Max(res,val + dfs(idx+1,!nsgn,!nopen));\n  Max(res,val + dfs(idx+1,nsgn,nopen));\n  return mem[idx][sgn][open] = res;\n}\n\n\nsigned main(){\n  cin>>n;\n  A.resize(n);\n  op.resize(n);\n  for(int i=0;i<n;i++) {\n    cin>>A[i];\n    if(i!=n-1) cin>>op[i];\n  }\n  \n  cout<<A[0] + dfs(1,0,0)<<endl;\n  \n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define inf 100000000000000ll\nusing namespace std;\n\nint read();\n\nint n;\nlong long f[100005][3];\nvoid chmax(long long &x, long long y) { x = x > y ? x : y; }\n\nint main() {\n    n = read();\n    f[0][0] = 0, f[0][1] = f[0][2] = -inf;\n    for (int i = 1, x; i <= n; ++i) {\n        x = read();\n        {\n            f[i][0] = max(f[i - 1][0], f[i - 1][1]),\n            f[i][1] = max(f[i - 1][1], f[i - 1][2]);\n            f[i][2] = f[i - 1][2];\n        }\n        f[i][0] += x, f[i][1] -= x, f[i][2] += x;\n        if (x < 0) chmax(f[i][2], f[i][1]), chmax(f[i][1], f[i][0]);\n    }\n    printf(\"%lld\\n\", max(f[n][0], max(f[n][1], f[n][2])));\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "\n#include <bits/stdc++.h>\nusing namespace std;\n\n#define X first\n#define Y second\n#define LL long long\n#define ULL unsigned long long\n#define PB push_back\n#define MP make_pair\n#define VI vector<int>\n#define PII pair<int,int>\n#define IOS ios::sync_with_stdio(0);cin.tie(0);\n#define IN freopen(\"in\", \"r\", stdin);\n#define OUT freopen(\"out\", \"w\", stdout);\n\nconst int maxn=100010;\n\nLL a[maxn],per[maxn];\nchar c[maxn];\n\nint main()\n{\n\tIOS;\n\tint n;\n\tcin>>n>>a[0];\n\tper[0]=a[0];\n\tLL abssum=a[0];\n\tLL ans=a[0];\n\tVI sub;\n\tfor (int j=1;j<n;++j)\n\t{\n\t\tcin>>c[j]>>a[j];\n\t\tper[j]=per[j-1]+a[j];\n\t\tabssum+=a[j];\n\t\tif (c[j]=='+') ans+=a[j];\n\t\telse\n\t\t{\n\t\t\tans-=a[j];\n\t\t\tsub.PB(j);\n\t\t}\n\t}\n\tfor (int j=0;j<(int)sub.size()-1;++j)\n\t{\n\t\tint p1=sub[j];\n\t\tint p2=sub[j+1];\n\t\tLL tis=abssum-(per[p2-1]-per[p1-1])*2;\n\t\tans=max(ans,tis);\n\t\tabssum-=a[p1]*2;\n\t}\n\tcout<<ans<<endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <cstring>\n#include <algorithm>\n#define MAXN 100010\n#define LL long long\nusing namespace std;\n\nint n;\nLL a[MAXN];\nint b[MAXN];\nLL f[MAXN][3];\n\ninline void update(LL &x,LL y){ if(y>x) x=y; }\n\nint main(){\n\tscanf(\"%d\",&n);\n\tb[1]=1;\n\tscanf(\"%lld\",a+1);\n\tfor(int i=2;i<=n;i++){\n\t\tchar c;\n\t\twhile((c=getchar())==' ');\n\t\tb[i]=(c=='+'?1:-1);\n\t\tscanf(\"%lld\",a+i);\n\t}\n\tmemset(f,0x88,sizeof f);\n\tf[1][0]=a[1];\n\tfor(int i=2;i<=n;i++)\n\t\tif(b[i]==1){\n\t\t\tupdate(f[i][0],f[i-1][0]+a[i]);\n\t\t\tupdate(f[i][0],f[i-1][1]+a[i]);\n\t\t\tupdate(f[i][0],f[i-1][2]+a[i]);\n\t\t\tupdate(f[i][1],f[i-1][1]-a[i]);\n\t\t\tupdate(f[i][1],f[i-1][2]-a[i]);\n\t\t\tupdate(f[i][2],f[i-1][2]+a[i]);\n\t\t}else{\n\t\t\tupdate(f[i][0],f[i-1][0]-a[i]);\n\t\t\tupdate(f[i][1],f[i-1][0]-a[i]);\n\t\t\tupdate(f[i][0],f[i-1][1]-a[i]);\n\t\t\tupdate(f[i][1],f[i-1][1]+a[i]);\n\t\t\tupdate(f[i][2],f[i-1][1]+a[i]);\n\t\t\tupdate(f[i][0],f[i-1][2]-a[i]);\n\t\t\tupdate(f[i][1],f[i-1][2]+a[i]);\n\t\t\tupdate(f[i][2],f[i-1][2]+a[i]);\n\t\t}\n\tprintf(\"%lld\\n\",max(max(f[n][0],f[n][1]),f[n][2]));\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "// 0bd35dc5e428754fa574049b6be8efe0\n\n#include <bits/stdc++.h>\n\nusing namespace std;\n\n#define DEBUG(...) fprintf(stderr, __VA_ARGS__)\n#define mp make_pair\n#define fst first\n#define snd second\n#define SZ(u) ((int) (u).size())\n#define ALL(u) (u).begin(), (u).end()\n\ninline void proc_status()\n{\n\tifstream t(\"/proc/self/status\");\n\tcerr << string(istreambuf_iterator<char>(t), istreambuf_iterator<char>()) << endl;\n}\n\ntemplate<typename T> inline bool chkmin(T &a, const T &b) { return a > b ? a = b, 1 : 0; }\ntemplate<typename T> inline bool chkmax(T &a, const T &b) { return a < b ? a = b, 1 : 0; }\ntemplate<typename T> inline T read()\n{\n\tregister T sum(0), fg(1);\n\tregister char ch(getchar());\n\tfor(; !isdigit(ch); ch = getchar()) if(ch == '-') fg = -1;\n\tfor(;  isdigit(ch); ch = getchar()) sum = sum * 10 - '0' + ch;\n\treturn sum * fg;\n}\n\ntypedef long long LL;\ntypedef pair<int, int> pii;\n\nconst int MAXN = (int) 1e5;\n\nint n;\n\nint A[MAXN + 5];\nchar type[MAXN + 5];\n\ninline char safe_getchar()\n{\n\tregister char ch(getchar());\n\twhile(!isgraph(ch)) ch = getchar();\n\treturn ch;\n}\n\ninline void input()\n{\n\tn = read<int>();\n\ttype[1] = '+';\n\tfor(int i = 1; i <= n; ++i)\n\t{\n\t\tif(i > 1) type[i] = safe_getchar();\n\t\tA[i] = read<int>();\n\t}\n}\n\ninline void solve()\n{\n\tLL suf = 0;\n\tfor(int i = 1; i <= n; ++i) suf += A[i];\n\n\tLL ans = LLONG_MIN, pre = 0;\n\tfor(int i = 1, j; i <= n; i = j)\n\t{\n\t\tLL res = A[i];\n\t\tsuf -= A[i];\n\t\tfor(j = i + 1; type[j] == '+'; ++j) res += A[j], suf -= A[j];\n\n\t\tif(i > 1)\n\t\t{\n\t\t\tchkmax(ans, pre - res + suf);\n\t\t\tpre += res - A[i] - A[i];\n\t\t}\n\t\telse pre += res;\n\t}\n\tchkmax(ans, pre);\n\n\tprintf(\"%lld\\n\", ans);\n}\n\nint main()\n{\n#ifndef ONLINE_JUDGE\n//\tfreopen(\"E.in\", \"r\", stdin);\n//\tfreopen(\"E.out\", \"w\", stdout);\n#endif\n\n\tinput();\n\tsolve();\n\n\treturn 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\nconst ll mod = 1000000007;\nconst ll mod998 = 998244353;\nconst ll intmax = 2147483647;\nconst ll llmax = 9223372036854775807;\nconst char sp = ' ';\n\nint N;\nll res;\nvector<ll>v, s;\n\nint main() {\n\tcin >> N;\n\tint x;\n\tcin >> x;\n\tv.push_back(x);\n\tfor (int i = 1; i < N; i++) {\n\t\tchar c;\n\t\tcin >> c >> x;\n\t\tif (c == '+') {\n\t\t\tv.back() += x;\n\t\t}\n\t\telse {\n\t\t\tv.push_back(x);\n\t\t\tv.push_back(0);\n\t\t}\n\t}\n\ts = v;\n\tfor (int i = v.size() - 2; i >= 0; i--) {\n\t\ts[i] += s[i + 1];\n\t}\n\tres = -llmax;\n\tll t = 0;\n\tfor (int i = 0; i < v.size(); i++) {\n\t\tif (i & 1) {\n\t\t\tif (i + 2 < v.size()) {\n\t\t\t\tres = max(res, t - v[i] - v[i + 1] + s[i + 2]);\n\t\t\t}\n\t\t\tt -= v[i];\n\t\t}\n\t\telse {\n\t\t\tt += v[i];\n\t\t}\n\t}\n\tcout << max(res, t) << endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <string>\n#include <set>\n#include <algorithm>\nusing namespace std;\ntypedef long long ll;\nint N;\nvector<ll> A;\nvector<string> OP;\nll memo[100000][3];\nbool visited[100000][3];\nll f(int p, int q) {\n\tif (q < 0 || q >= 3) return -(1LL << 60);\n\tif (p == N) return 0;\n\tif (visited[p][q]) return memo[p][q];\n\tvisited[p][q] = true;\n\tint qq = q;\n\tif (OP[p] == \"-\") ++qq;\n\treturn memo[p][q] = max(f(p + 1, qq), f(p + 1, qq-1)) + (qq % 2 == 0 ? A[p] : -A[p]);\n}\nint main() {\n\tcin >> N;\n\tA.resize(N);\n\tOP.resize(N);\n\tOP[0] = \"+\";\n\tfor (int i = 0; i < N; ++i) {\n\t\tif (i) cin >> OP[i];\n\t\tcin >> A[i];\n\t}\n\tcout << f(0, 0) << endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\nconst int N=2e5+5;\nint a[N];\nlong long f[N][3];\nint main()\n{\n\tint T; scanf(\"%d\",&T);\n\twhile(T--)\n\t{\n\t\tint n; scanf(\"%d%d\",&n,&a[1]);\n\t\tfor(int i=2;i<=n;++i)\n\t\t{\n\t\t\tchar op[2];\n\t\t\tscanf(\"%s%d\",op,&a[i]);\n\t\t\ta[i]=(op[0]=='+'?a[i]:-a[i]);\n\t\t}\n\t\tf[1][0]=a[1],f[1][1]=f[1][2]=-1ll<<60;\n\t\tfor(int i=2;i<=n;++i)\n\t\t{\n\t\t\tf[i][0]=max(f[i-1][0],max(f[i-1][1],f[i-1][2]))+a[i];\n\t\t\tf[i][1]=max(f[i-1][1],f[i-1][2])-a[i];\n\t\t\tf[i][2]=f[i-1][2]+a[i];\n\t\t\tif(a[i]<0)\n\t\t\t{\n\t\t\t\tf[i][1]=max(f[i][1],f[i-1][0]+a[i]);\n\t\t\t\tf[i][1]=max(f[i][1],f[i-1][1]+a[i]);\n\t\t\t\tf[i][1]=max(f[i][1],f[i-1][2]+a[i]);\n\t\t\t\tf[i][2]=max(f[i][2],f[i-1][1]-a[i]);\n\t\t\t\tf[i][2]=max(f[i][2],f[i-1][2]-a[i]);\n\t\t\t}\n\t\t}\n\t\tprintf(\"%lld\\n\",max(f[n][0],max(f[n][1],f[n][2])));\n\t}\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\nusing ll = long long;\nusing vi = vector<int>;\nusing vll = vector<ll>;\nusing vvi = vector<vector<int>>;\nusing vvl = vector<vector<ll>>;\n\nll dp[101010][3] = {0};\n\nint main() {\n  cin.tie(nullptr);\n  ios::sync_with_stdio(false);\n  int n;\n  cin >> n;\n  vector<ll> a(n);\n  vector<char> op(n);\n  ll INF = 1LL << 34;\n  op[0] = '+';\n  for (int i = 0; i < n; i++) {\n    cin >> a[i];\n    if (i < n - 1)\n      cin >> op[i + 1];\n  }\n  for (int i = 0; i <= n; i++) dp[i][0] = dp[i][1] = dp[i][2] = -INF;\n  dp[0][0] = 0;\n  for (int i = 0; i < n; i++) {\n    if (op[i] == '+') {\n      dp[i + 1][0] = a[i] + dp[i][0];\n      dp[i + 1][1] = -a[i] + dp[i][1];\n      dp[i + 1][2] = a[i] + dp[i][2];\n    } else {\n      dp[i + 1][0] = max(-a[i] + dp[i][0], max(a[i] + dp[i][1], a[i] + dp[i][2]));\n      dp[i + 1][1] = max(-a[i] + dp[i][0], max(a[i] + dp[i][1], a[i] + dp[i][2]));\n      dp[i + 1][2] = max(a[i] + dp[i][1], -a[i] + dp[i][2]);\n    }\n  }\n  \n  cout << dp[n][0] << endl;\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <algorithm>\n#include <vector>\n#include <utility>\n#include <map>\n#include <cstdlib>\n#include <cmath>\n#include <climits>\n#include <stack>\n#include <queue>\n#include <cstring>\n#include <iterator>\n\n#define FOR(n) for(int cnt=0;cnt<(n);++cnt)\n#define FOR_R(it,cont) for(auto it=rbegin(cont);it!=rend(cont);++it)\n#define FOR_F(it,cont) for(auto it=begin(cont);it!=end(cont);++it)\n#define ALL(cont) begin(cont), end(cont)\n#define LB(b,e,v) lower_bound(b,e,v)\n#define UB(b,e,v) upper_bound(b,e,v)\n\nusing namespace std;\ntypedef pair<int,int> P;\nint N;\nint A[100010];\nlong long dp[100010][10];\nlong long INF= 1ll * 1000 * 1000 * 1000* 1000* 1000;\nint pow1(int i) {\n  return i%2==0?1:-1;\n}\nlong long doDP(int current, int brackets) {\n  if (brackets < 0) {\n    return 0;\n  }\n  if (brackets > 2) {\n    return 0;\n  }\n  if (dp[current][brackets]!=-INF) {\n    return dp[current][brackets];\n  }\n  if (current == N) {\n    return dp[current][brackets]=0;\n  }\n  long long sub=-INF;\n  if (A[current] < 0) {\n    for(int i=0;i<=brackets+1;++i) {\n      sub = max(sub, 1ll * pow1(brackets) * A[current] + doDP(current+1, i));\n    }\n  } else {\n    for(int i=0;i<=brackets;++i) {\n      sub = max(sub, 1ll * pow1(brackets) * A[current] + doDP(current+1, i));\n    }\n  }\n  return dp[current][brackets] = sub;\n}\nint main() {\n  scanf(\"%d\", &N);\n  FOR(N) {\n    int factor=1;\n    if (cnt > 0) {\n      char buf[2];\n      scanf(\"%s\", buf);\n      if (buf[0]=='-') {\n        factor=-1;\n      }\n    }\n    scanf(\"%d\", &A[cnt]);\n    A[cnt] *= factor;\n  }\n  for(int i=0;i<N;++i) {\n    for(int j=0;j<5;++j) {\n      dp[i][j] = -INF;\n    }\n  }\n\n  doDP(0,0);\n\n  long long answer=0;\n  for(int i=0;i<3;++i) {\n    answer = max(answer, dp[0][i]);\n  }\n  printf(\"%lld\\n\", answer);\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "// think twice code once\n// Start:\n// End  :\n#include <bits/stdc++.h>\nusing namespace std;\n\n#define rep(i, x, y) for(int i = (x), _ = (y); i <= _; ++ i)\n#define per(i, x, y) for(int i = (x), _ = (y); i >= _; -- i)\n#define dprintf(...) fprintf(stderr, __VA_ARGS__)\n#define disp(x) cout << #x << \" = \" << x << \"; \"\n\ntypedef long long LL;\n\ntemplate <class T> bool chkmin(T& a, T b) { return a > b ? a = b, true : false; }\ntemplate <class T> bool chkmax(T& a, T b) { return a < b ? a = b, true : false; }\n\ntemplate <class T> void read(T& a) {\n\tchar c = getchar(); T f = 1; a = 0;\n\tfor(; !isdigit(c); c = getchar()) if(c == '-') f = -1;\n\tfor(; isdigit(c); c = getchar()) a = a * 10 + c - '0';\n\ta *= f;\n}\n\ntemplate <class T> void write(T a) {\n\tstatic int stk[60]; \n\tint tp = 0;\n\tif(a < 0) putchar('-'), a = -a;\n\tdo {\n\t\tstk[++ tp] = a % 10;\n\t\ta /= 10;\n\t}while(a);\n\t\n\twhile(tp) putchar(stk[tp--] + '0');\n}\n\nconst int maxN = 1e5 + 5;\n\nLL a[maxN];\nchar b[maxN];\nint N;\nLL cnt = 0;\n\nint main() {\n#ifdef Leeson\n\tfreopen(\"tmp.in\", \"r\", stdin);\n\tfreopen(\"tmp.out\", \"w\", stdout);\n#endif\n\n\tcin >> N;\n\tread(a[1]);\n\tLL ans = a[1];\n\tLL sum = a[1];\n\trep(i, 2, N) {\n\t\tchar& c = b[i] = getchar();\n\t\twhile(c != '-' && c != '+') c = getchar();\n\n\t\tread(a[i]);\n\t\tif(c == '-')\n\t\t\tcnt += a[i], ans -= a[i];\n\t\telse \n\t\t\tans += a[i];\n\t\tsum += a[i];\n\t}\n\n\tLL sora = 0;\n\tper(i, N, 2) {\n\t\tsora += a[i];\n\t\tif(b[i] == '-') {\n\t\t\tcnt -= a[i];\n//\t\t\tdisp(sum), disp(sora), disp(cnt), puts(\"\");\n\t\t\tchkmax(ans, sum - 2 * sora - cnt * 2);\n\t\t\tsora = 0;\n\t\t} \n\t}\n\n\tcout << ans << endl;\n\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "// #pragma GCC optimize(3)\n#include <map>\n#include <set>\n#include <queue>\n#include <cmath>\n#include <vector>\n#include <cstdio>\n#include <bitset>\n#include <cstring>\n#include <iostream>\n#include <algorithm>\n#define maxn 100010\n#define inf 0x3f3f3f3f3f3f3f3f\n#define int long long\nusing namespace std;\nvoid write(int x){if(x<0){putchar('-');x=-x;}if(x>9) write(x/10);putchar(x%10+'0');}\nint read(){int d=0,w=1;char c=getchar();for(;c<'0'||c>'9';c=getchar())if(c=='-')\nw=-1;for(;c>='0'&&c<='9';c=getchar())d=(d<<1)+(d<<3)+c-48;return d*w;}\nvoid wln(int x){write(x);putchar('\\n');}\nvoid wrs(int x){write(x);putchar(' ');}\nint reac()\n{\n\tchar c=getchar();\n\tfor(;c!='-'&&c!='+';c=getchar());\n\treturn c=='+'?1:-1;\n}\nint n,a[maxn],c[maxn],f[maxn][3];\nsigned main()\n{\n\t// freopen(\".in\",\"r\",stdin);\n\t// freopen(\".out\",\"w\",stdout);\n\tn=read();\n\tc[1]=1;\n\ta[1]=read();\n\tfor(int i=2;i<=n;a[i++]=read())\n\t\tc[i]=reac();\n\tf[1][0]=a[1];\n\tf[1][1]=f[1][2]=-inf;\n\tfor(int i=2;i<=n;i++)\n\t{\n\t\tf[i][0]=max(f[i-1][0],f[i-1][1])+a[i]*c[i];\n\t\tf[i][1]=max(max((c[i]==-1?f[i-1][0]:-inf)+a[i]*c[i],f[i-1][1]+(c[i]==-1?abs(a[i]*c[i]):a[i]*c[i]*-1)),f[i-1][2]+a[i]*c[i]*-1);\n\t\tf[i][2]=max((c[i]==-1?f[i-1][1]:-inf)+a[i]*c[i]*-1,f[i-1][2]+(c[i]==-1?abs(a[i]*c[i]):a[i]*c[i]));\n\t\t// wrs(f[i][0]);\n\t\t// wrs(f[i][1]);\n\t\t// wln(f[i][2]);\n\t}\n\twrite(max(f[n][0],f[n][1]));\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#pragma GCC optimize (\"O3\")\n#pragma GCC target (\"avx\")\n#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\n#define rep(i, n) for(int i = 0; i < (n); i++)\n#define rep1(i, n) for(int i = 1; i <= (n); i++)\n#define co(x) cout << (x) << \"\\n\"\n#define cosp(x) cout << (x) << \" \"\n#define ce(x) cerr << (x) << \"\\n\"\n#define cesp(x) cerr << (x) << \" \"\n#define pb push_back\n#define mp make_pair\n#define chmin(x, y) x = min(x, y)\n#define chmax(x, y) x = max(x, y)\n#define Would\n#define you\n#define please\n\nint main() {\n\tcin.tie(0);\n\tios::sync_with_stdio(false);\n\n\n\tint N;\n\tcin >> N;\n\tchar c;\n\n\tll dp0 = 0;\n\tll dp1 = -1e18;\n\tcin >> dp0;\n\tbool hajimete = 0;\n\tll purasu = 0;\n\n\trep(i, N - 1) {\n\t\tint a;\n\t\tcin >> c >> a;\n\n\t\tif (hajimete == 0) {\n\t\t\tif (c == '+') {\n\t\t\t\tdp0 += a;\n\t\t\t}\n\t\t\telse {\n\t\t\t\thajimete = 1;\n\t\t\t\tdp0 -= a;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tif (c == '+') {\n\t\t\t\tpurasu += a;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdp1 = max(dp1 + purasu + a, dp0 + a - purasu);\n\t\t\t\tdp0 += purasu - a;\n\t\t\t\tpurasu = 0;\n\t\t\t}\n\t\t}\n\t}\n\tco(max(dp0, dp1) + purasu);\n\n\tWould you please return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <fstream>\n#include <set>\n#include <map>\n#include <string>\n#include <vector>\n#include <bitset>\n#include <algorithm>\n#include <cstring>\n#include <cstdlib>\n#include <cmath>\n#include <cassert>\n#include <queue>\n\n#define mp make_pair\n#define pb push_back\n\n\ntypedef long long ll;\ntypedef long double ld;\n\nusing namespace std;\n\nint n;\nint a[120000];\nchar c[120000];\nconst ll INF = 1e18;\n\nint main() {\n\tscanf(\"%d\", &n);\n\tfor (int i = 0; i < n; ++i) {\n\t\tscanf(\"%d\", a + i);\n\t\tif (i != n - 1)\n\t\t\tscanf(\" %c\", c + i + 1);\n\t}\n\tc[0] = '+';\n\tll mn = INF;\n\tll sum = 0;\n\tll cur = 0;\n\tll now = 0;\n\tfor (int i = 0; i < n; ++i) {\n\t\tsum += a[i];\n\t\tif (c[i] == '+') {\n\t\t\tcur += a[i];\n\t\t}\n\t\telse {\n\t\t\tif (now != 0)\n\t\t\t\tmn = min(mn, now + cur);\n\t\t\tcur = 0;\n\t\t\tnow += a[i];\n\t\t}\n\t}\n\tmn = min(mn, now);\n\tcout << sum - 2 * mn << \"\\n\";\n\treturn 0;\n}\n\n\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <string>\n#include <vector>\n#include <queue>\n#include <deque>\n#include <algorithm>\n#include <set>\n#include <map>\n#include <bitset>\n#include <cmath>\n#include <functional>\n#include <iomanip>\n#define vll vector<ll>\n#define vvvl vector<vvl>\n#define vvl vector<vector<ll>>\n#define VV(a, b, c, d) vector<vector<d>>(a, vector<d>(b, c))\n#define VVV(a, b, c, d) vector<vvl>(a, vvl(b, vll (c, d)));\n#define re(c, b) for(ll c=0;c<b;c++)\n#define all(obj) (obj).begin(), (obj).end()\ntypedef long long int ll;\ntypedef long double ld;\nusing namespace std;\n\n\nstruct LazySegmentTree {\nprivate:\n    int n;\n    vector<ll> node, lazy;\n\npublic:\n    LazySegmentTree(vector<ll> v) {\n        int sz = (int)v.size();\n        n = 1; while(n < sz) n *= 2;\n        node.resize(2*n-1);\n        lazy.resize(2*n-1, 0);\n        for(int i=0; i<sz; i++) node[i+n-1] = v[i];\n        for(int i=n-2; i>=0; i--) node[i] = max(node[i*2+1], node[i*2+2]);\n    }\n\n    void eval(int k, int l, int r) {\n        if(lazy[k] != 0) {\n            node[k] += lazy[k];\n            if(r - l > 1) {\n                lazy[2*k+1] += lazy[k];\n                lazy[2*k+2] += lazy[k];\n            }\n            lazy[k] = 0;\n        }\n    }\n\n    void add(int a, int b, ll x, int k=0, int l=0, int r=-1) {\n        if(r < 0) r = n;\n        eval(k, l, r);\n        if(b <= l || r <= a) return;\n        if(a <= l && r <= b) {\n            lazy[k] += x;\n            eval(k, l, r);\n        }\n\n        else {\n            add(a, b, x, 2*k+1, l, (l+r)/2);\n            add(a, b, x, 2*k+2, (l+r)/2, r);\n            node[k] = max(node[2*k+1], node[2*k+2]);\n        }\n    }\n\n    ll query(int a, int b, int k=0, int l=0, int r=-1) {\n        if(r < 0) r = n;\n        eval(k, l, r);\n        if(b <= l || r <= a) return -1000000000000000000;\n        if(a <= l && r <= b) return node[k];\n        ll vl = query(a, b, 2*k+1, l, (l+r)/2);\n        ll vr = query(a, b, 2*k+2, (l+r)/2, r);\n        return max(vl, vr);\n    }\n};\n\n\nstruct LazySegmentTree2 {\nprivate:\n    int n;\n    vector<ll> node, lazy;\n\npublic:\n    LazySegmentTree2(vector<ll> v) {\n        int sz = (int)v.size();\n        n = 1; while(n < sz) n *= 2;\n        node.resize(2*n-1);\n        lazy.resize(2*n-1, 0);\n        for(int i=0; i<sz; i++) node[i+n-1] = v[i];\n        for(int i=n-2; i>=0; i--) node[i] = min(node[i*2+1], node[i*2+2]);\n    }\n\n    void eval(int k, int l, int r) {\n        if(lazy[k] != 0) {\n            node[k] += lazy[k];\n            if(r - l > 1) {\n                lazy[2*k+1] += lazy[k];\n                lazy[2*k+2] += lazy[k];\n            }\n            lazy[k] = 0;\n        }\n    }\n\n    void add(int a, int b, ll x, int k=0, int l=0, int r=-1) {\n        if(r < 0) r = n;\n        eval(k, l, r);\n        if(b <= l || r <= a) return;\n        if(a <= l && r <= b) {\n            lazy[k] += x;\n            eval(k, l, r);\n        }\n\n        else {\n            add(a, b, x, 2*k+1, l, (l+r)/2);\n            add(a, b, x, 2*k+2, (l+r)/2, r);\n            node[k] = min(node[2*k+1], node[2*k+2]);\n        }\n    }\n\n    ll query(int a, int b, int k=0, int l=0, int r=-1) {\n        if(r < 0) r = n;\n        eval(k, l, r);\n        if(b <= l || r <= a) return 1000000000000000000;\n        if(a <= l && r <= b) return node[k];\n        ll vl = query(a, b, 2*k+1, l, (l+r)/2);\n        ll vr = query(a, b, 2*k+2, (l+r)/2, r);\n        return min(vl, vr);\n    }\n};\n\nint main(int argc, char const *argv[]) {\n  ll n;std::cin >> n;\n  vll a(n);\n  for(int i=0;i<n;i++){\n    ll op = 1;\n    if(i!=0){\n      char c;std::cin >> c;\n      if(c=='-') op = -1;\n    }\n    std::cin >> a[i];\n    a[i] *= op;\n  }\n\n  // i時点での最大値 = a[i] + max(dp[j+1] - S[i+1:j])\n\n  // 操作後、全区間に -a[i]を足す\n  // -> 区間加算区間max\n\n  LazySegmentTree seg(vll(n+1, 0));\n  LazySegmentTree2 seg2(vll(n+1, 0));//最小値\n\n  vll ans(n+1, 0);\n  vll min_ans(n+1, 0);\n\n  for(int i=n-1;i>=0;i--){\n\n    if(a[i]<0) {\n      ll q = seg.query(i+1, n+1);\n      ll p = seg2.query(i+1, n+1);\n      ans[i] =  a[i] + max({ans[i+1], q, -min_ans[i+1]});\n      min_ans[i] = a[i] + min({min_ans[i+1], p, -q});\n    }else{\n      ans[i] = ans[i+1] + a[i];\n      min_ans[i] = min_ans[i+1] + a[i];\n    }\n\n    seg.add(i, i+1, ans[i]);\n    seg.add(i+1, n+1, a[i]);\n\n    seg2.add(i, i+1, min_ans[i]);\n    seg2.add(i+1, n+1, -a[i]);\n    //seg2.add(i, i+1, a[i]);\n\n    //for(int j=0;j<=n;j++) std::cout << seg.query(j, j+1) << (j==n?\"\\n\":\" \");\n    //for(int j=0;j<=n;j++) std::cout << seg2.query(j, j+1) << (j==n?\"\\n\":\" \");\n    //std::cout << ans[i] << \" \" << min_ans[i] << '\\n';\n  }\n\n  std::cout << ans[0] << '\\n';\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\n#define F first\n#define S second\n#define pb push_back\n#define ld  double\n#define ll long long\n#define int long long\n\nusing namespace std;\n\nconst int MAXN = 101 * 1001 , MOD = 1e9 + 7 , sq = 333  ;\n\n\nint a[MAXN];\n\nchar ch[MAXN] ;\n\nint dp[1055][1055][2] ;\n\nint solve(int n)\n{\n    for(int i = 0 ; i < n ; i ++ )\n        dp[i][i+1][0] = a[i] , dp[i][i+1][1] = -a[i] ;\n    for(int l = 2 ; l <= n ; l ++ )\n    {\n        for(int i = 0 ; i + l <= n ; i ++ )\n        {\n            int j = i + l ;\n            dp[i][j][0] = a[i] + dp[i+1][j][0] ;\n            if(a[i]<0)\n                for(int k = i + 2 ; k <= j ; k ++ )\n                    dp[i][j][0] = max(dp[i][j][0],a[i]+dp[i+1][k][1]+dp[k][j][0]);\n            dp[i][j][1] = -a[i] + dp[i+1][j][1] ;\n            if(a[i]<0)\n                for(int k = i + 2 ; k <= j ; k ++ )\n                    dp[i][j][1] = max(dp[i][j][1],-a[i]+dp[i+1][k][0]+dp[k][j][1]);\n        }\n    }\n    return dp[0][n][0];\n}\n\nint32_t main()\n{\n   ios::sync_with_stdio(0);cin.tie(0);\n   int n , s = 0 , ind = -1 ,cnt = 0 ;\n   cin >> n ;\n   for(int i = 0 ; i < n ; i ++ )\n   {\n       if(i)\n        cin >> ch[i] ;\n       cin >> a[i] ;\n       s += a[i] ;\n       if(ch[i]=='-'&&ind==-1)\n        ind = i ;\n       if(i&&ch[i]=='-')\n        a[i]*=-1,cnt++;\n   }\n   if(n<1050)\n        return cout<<solve(n),0;\n   if(ind==-1)\n    return cout<<s,0 ;\n    if(cnt==1)\n        return cout<<s+2*a[ind],0;\n    ind++;\n    s+=2*a[ind-1] ;\n   while(ch[ind]!='-')\n    s-=2*a[ind++];\n   return cout<<s,0;\n\n\n\n\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <string>\n#include <cstdlib>\n#include <cmath>\n#include <vector>\n#include <unordered_map>\n#include <map>\n#include <set>\n#include <algorithm>\n#include <queue>\n#include <stack>\n#include <functional>\n#include <bitset>\n#include <assert.h>\n#include <unordered_map>\n#include <fstream>\n#include <time.h>\nusing namespace std;\ntypedef long long ll;\ntypedef vector<ll> vl;\ntypedef vector<vl> vvl;\ntypedef vector<char> vc;\ntypedef vector<string> vs;\ntypedef vector<bool> vb;\ntypedef vector<double> vd;\ntypedef pair<ll,ll> P;\ntypedef pair<int,int> pii;\ntypedef vector<P> vpl;\ntypedef tuple<ll,ll,ll> tapu;\n#define rep(i,n) for(int i=0; i<(n); i++)\n#define REP(i,a,b) for(int i=(a); i<(b); i++)\n#define all(x) (x).begin(), (x).end()\n#define rall(x) (x).rbegin(), (x).rend()\nconst int inf = 1<<30;\nconst ll linf = 1LL<<62;\nconst int MAX = 2020000;\nll dy[8] = {1,-1,0,0,1,-1,1,-1};\nll dx[8] = {0,0,1,-1,1,-1,-1,1};\nconst double pi = acos(-1);\nconst double eps = 1e-7;\ntemplate<typename T1,typename T2> inline bool chmin(T1 &a,T2 b){\n\tif(a>b){\n\t\ta = b; return true;\n\t}\n\telse return false;\n}\ntemplate<typename T1,typename T2> inline bool chmax(T1 &a,T2 b){\n\tif(a<b){\n\t\ta = b; return true;\n\t}\n\telse return false;\n}\ntemplate<typename T> inline void print(T &a){\n    rep(i,a.size()) cout << a[i] << \" \";\n    cout << \"\\n\";\n}\ntemplate<typename T1,typename T2> inline void print2(T1 a, T2 b){cout << a << \" \" << b << \"\\n\";}\ntemplate<typename T1,typename T2,typename T3> inline void print3(T1 a, T2 b, T3 c){\n\tcout << a << \" \" << b << \" \" << c << \"\\n\";\n}\nconst int mod = 1e9 + 7;\n//const int mod = 998244353;\n\nint main(){\n\tint n; cin >> n;\n\tvl a(n); vc s(n);\n\trep(i,n){\n\t\tcin >> a[i];\n\t\tif(i < n-1) cin >> s[i+1];\n\t}\n\ts[0] = '+';\n\tvvl dp(n+1,vl(3,-linf));\n\tdp[0][0] = 0;\n\trep(i,n){\n\t\tif(s[i] == '+'){\n\t\t\tchmax(dp[i+1][0], dp[i][0] + a[i]);\n\t\t\tchmax(dp[i+1][1], dp[i][1] - a[i]);\n\t\t\tchmax(dp[i+1][0], dp[i][1] - a[i]);\n\t\t\tchmax(dp[i+1][1], dp[i][2] + a[i]);\n\t\t}else{\n\t\t\tchmax(dp[i+1][2], dp[i][1] + a[i]);\n\t\t\tchmax(dp[i+1][1], dp[i][0] - a[i]);\n\t\t\tchmax(dp[i+1][0], dp[i][0] - a[i]);\n\t\t\tchmax(dp[i+1][1], dp[i][1] + a[i]);\n\t\t}\n\t}\n\tcout << max({dp[n][0], dp[n][1], dp[n][2]}) << \"\\n\";\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n\nusing namespace std;\n\nusing int64 = long long;\nconst int mod = 1e9 + 7;\nconst int inf = (1 << 30) - 1;\nconst int64 infll = (1LL << 61) - 1;\n\nstruct IoSetup {\n  IoSetup() {\n    cin.tie(nullptr);\n    ios::sync_with_stdio(false);\n    cout << fixed << setprecision(10);\n    cerr << fixed << setprecision(10);\n  }\n} iosetup;\n\ntemplate< typename T >\nostream &operator<<(ostream &os, const vector< T > &v) {\n  for(int i = 0; i < (int) v.size(); i++) {\n    os << v[i] << (i + 1 != v.size() ? \" \" : \"\");\n  }\n  return os;\n}\n\ntemplate< typename T >\nistream &operator>>(istream &is, vector< T > &v) {\n  for(T &in : v) is >> in;\n  return is;\n}\n\ntemplate< typename T1, typename T2 >\ninline bool chmax(T1 &a, T2 b) { return a < b && (a = b, true); }\n\ntemplate< typename T1, typename T2 >\ninline bool chmin(T1 &a, T2 b) { return a > b && (a = b, true); }\n\ntemplate< typename T = int64 >\nvector< T > make_v(size_t a) {\n  return vector< T >(a);\n}\n\ntemplate< typename T, typename... Ts >\nauto make_v(size_t a, Ts... ts) {\n  return vector< decltype(make_v< T >(ts...)) >(a, make_v< T >(ts...));\n}\n\ntemplate< typename T, typename V >\ntypename enable_if< is_class< T >::value == 0 >::type fill_v(T &t, const V &v) {\n  t = v;\n}\n\ntemplate< typename T, typename V >\ntypename enable_if< is_class< T >::value != 0 >::type fill_v(T &t, const V &v) {\n  for(auto &e : t) fill_v(e, v);\n}\n\nint main() {\n  int N;\n  cin >> N;\n  vector< int64 > dp(4, -infll);\n\n  {\n    int x;\n    cin >> x;\n    dp[0] = x;\n  }\n\n  for(int i = 0; i + 1 < N; i++) {\n    char op;\n    int x;\n    cin >> op >> x;\n\n    vector< int64 > dp2(dp);\n    for(int j = 0; j < 3; j++) {\n      chmax(dp2[j], dp2[j + 1]);\n    }\n    for(int j = 0; j < 4; j++) {\n      if(op == '+') {\n        if(j & 1) dp2[j] -= x;\n        else dp2[j] += x;\n      } else {\n        if(j & 1) dp2[j] += x;\n        else dp2[j] -= x;\n      }\n    }\n    if(op == '-') {\n      for(int j = 3; j > 0; j--) {\n        chmax(dp2[j], dp2[j - 1]);\n      }\n    }\n    dp.swap(dp2);\n  }\n  for(int j = 2; j >= 0; j--) {\n    chmax(dp[j], dp[j + 1]);\n  }\n  cout << dp[0] << endl;\n}\n\n\n\n\n"
  },
  {
    "language": "C++",
    "code": "// need\n#include <iostream>\n#include <algorithm>\n\n// data structure\n#include <bitset>\n#include <map>\n#include <queue>\n#include <set>\n#include <stack>\n#include <string>\n#include <utility>\n#include <vector>\n#include <complex>\n//#include <deque>\n#include <valarray>\n\n// stream\n//#include <istream>\n//#include <sstream>\n//#include <ostream>\n#include <fstream>\n\n// etc\n#include <cassert>\n#include <cmath>\n#include <functional>\n#include <iomanip>\n#include <chrono>\n#include <random>\n#include <numeric>\n\n// input\n#define INIT std::ios::sync_with_stdio(false);std::cin.tie(0);\n#define VAR(type, ...)type __VA_ARGS__;MACRO_VAR_Scan(__VA_ARGS__);\ntemplate<typename T> void MACRO_VAR_Scan(T& t) { std::cin >> t; }\ntemplate<typename First, typename...Rest>void MACRO_VAR_Scan(First& first, Rest&...rest) { std::cin >> first; MACRO_VAR_Scan(rest...); }\n#define VEC_ROW(type, n, ...)std::vector<type> __VA_ARGS__;MACRO_VEC_ROW_Init(n, __VA_ARGS__); for(int i=0; i<n; ++i){MACRO_VEC_ROW_Scan(i, __VA_ARGS__);}\ntemplate<typename T> void MACRO_VEC_ROW_Init(int n, T& t) { t.resize(n); }\ntemplate<typename First, typename...Rest>void MACRO_VEC_ROW_Init(int n, First& first, Rest&...rest) { first.resize(n); MACRO_VEC_ROW_Init(n, rest...); }\ntemplate<typename T> void MACRO_VEC_ROW_Scan(int p, T& t) { std::cin >> t[p]; }\ntemplate<typename First, typename...Rest>void MACRO_VEC_ROW_Scan(int p, First& first, Rest&...rest) { std::cin >> first[p]; MACRO_VEC_ROW_Scan(p, rest...); }\n#define VEC(type, c, n) std::vector<type> c(n);for(auto& i:c)std::cin>>i;\n#define MAT(type, c, m, n) std::vector<std::vector<type>> c(m, std::vector<type>(n));for(auto& r:c)for(auto& i:r)std::cin>>i;\n\n// output\n#define OUT(d) std::cout<<(d);\n#define FOUT(n, d) std::cout<<std::fixed<<std::setprecision(n)<<(d);\n#define SOUT(n, c, d) std::cout<<std::setw(n)<<std::setfill(c)<<(d);\n#define SP std::cout<<\" \";\n#define TAB std::cout<<\"\\t\";\n#define BR std::cout<<\"\\n\";\n#define SPBR(i, n) std::cout<<(i + 1 == n ? '\\n' : ' ');\n#define ENDL std::cout<<std::endl;\n#define FLUSH std::cout<<std::flush;\n#define SHOW(d) {std::cerr << #d << \"\\t:\" << (d) << \"\\n\";}\n#define SHOWVECTOR(v) {std::cerr << #v << \"\\t:\";for(const auto& xxx : v){std::cerr << xxx << \" \";}std::cerr << \"\\n\";}\n#define SHOWVECTOR2(v) {std::cerr << #v << \"\\t:\\n\";for(const auto& xxx : v){for(const auto& yyy : xxx){std::cerr << yyy << \" \";}std::cerr << \"\\n\";}}\n#define SHOWQUEUE(a) {auto tmp(a);std::cerr << #a << \"\\t:\";while(!tmp.empty()){std::cerr << tmp.front() << \" \";tmp.pop();}std::cerr << \"\\n\";}\n\n// utility\n#define ALL(a) (a).begin(),(a).end()\n#define FOR(i, a, b) for(int i=(a);i<(b);++i)\n#define RFOR(i, a, b) for(int i=(b)-1;i>=(a);--i)\n#define REP(i, n) for(int i=0;i<int(n);++i)\n#define RREP(i, n) for(int i=int(n)-1;i>=0;--i)\n#define FORLL(i, a, b) for(ll i=ll(a);i<ll(b);++i)\n#define RFORLL(i, a, b) for(ll i=ll(b)-1;i>=ll(a);--i)\n#define REPLL(i, n) for(ll i=0;i<ll(n);++i)\n#define RREPLL(i, n) for(ll i=ll(n)-1;i>=0;--i)\n#define IN(a, x, b) (a<=x && x<b)\ntemplate<typename T> inline T CHMAX(T& a, const T b) { return a = (a < b) ? b : a; }\ntemplate<typename T> inline T CHMIN(T& a, const T b) { return a = (a > b) ? b : a; }\n#define EXCEPTION(msg) throw std::string(\"Exception : \" msg \" [ in \") + __func__ + \" : \" + std::to_string(__LINE__) + \" lines ]\"\n#define TRY(cond, msg) try {if (cond) EXCEPTION(msg);}catch (std::string s) {std::cerr << s << std::endl;}\nvoid CHECKTIME(std::function<void()> f) { auto start = std::chrono::system_clock::now(); f(); auto end = std::chrono::system_clock::now(); auto res = std::chrono::duration_cast<std::chrono::nanoseconds>((end - start)).count(); std::cerr << \"[Time:\" << res << \"ns  (\" << res / (1.0e9) << \"s)]\\n\"; }\n\n// test\ntemplate<class T> std::vector<std::vector<T>> VV(int n, int m, T init = T()) {\n\treturn std::vector<std::vector<T>>(n, std::vector<T>(m, init));\n}\ntemplate<typename S, typename T>\nstd::ostream& operator<<(std::ostream& os, std::pair<S, T> p) {\n\tos << \"(\" << p.first << \", \" << p.second << \")\"; return os;\n}\n\n// type/const\n#define int ll\nusing ll = long long;\nusing ull = unsigned long long;\nusing ld = long double;\nusing PAIR = std::pair<int, int>;\nusing PAIRLL = std::pair<ll, ll>;\nconstexpr int INFINT = 1 << 30;                          // 1.07x10^ 9\nconstexpr int INFINT_LIM = (1LL << 31) - 1;              // 2.15x10^ 9\nconstexpr ll INFLL = 1LL << 60;                          // 1.15x10^18\nconstexpr ll INFLL_LIM = (1LL << 62) - 1 + (1LL << 62);  // 9.22x10^18\nconstexpr double EPS = 1e-9;\nconstexpr int MOD = 1000000007;\nconstexpr double PI = 3.141592653589793238462643383279;\n\ntemplate<class T, size_t N> void FILL(T(&a)[N], const T& val) { for (auto& x : a) x = val; }\ntemplate<class ARY, size_t N, size_t M, class T> void FILL(ARY(&a)[N][M], const T& val) { for (auto& b : a) FILL(b, val); }\ntemplate<class T> void FILL(std::vector<T>& a, const T& val) { for (auto& x : a) x = val; }\ntemplate<class ARY, class T> void FILL(std::vector<std::vector<ARY>>& a, const T& val) { for (auto& b : a) FILL(b, val); }\n\n// ------------>8------------------------------------->8------------\n\n\n\nsigned main() {\n\tINIT;\n\n\tVAR(int, n);\n\tstd::vector<int> a(n);\n\tstd::vector<char> op(n);\n\top[0] = '+';\n\tREP(i, n - 1) {\n\t\tstd::cin >> a[i] >> op[i + 1];\n\t}\n\tstd::cin >> a[n - 1];\n\n\tstd::vector<int> c(n + 1, 0);\n\tREP(i, n) {\n\t\tc[i + 1] = c[i] + a[i] * (op[i] == '-' ? -1 : 1);\n\t}\n\tstd::vector<int> d(n + 1, 0);\n\tREP(i, n) {\n\t\td[i + 1] = d[i] + a[i];\n\t}\n\n\tint ans = c[n];\n\tstd::vector<int> minus;\n\tREP(i, n) if (op[i] == '-') minus.emplace_back(i);\n\n\tREP(i, (int)minus.size() - 1) {\n\t\tint a = minus[i], b = minus[i + 1];\n\t\tint t = c[a] - (d[b] - d[a]) + (d[n] - d[b]);\n\t\tCHMAX(ans, t);\n\t}\n\tOUT(ans)BR;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <algorithm>\n#include <cstring>\n#include <ctime>\n\n#define Rep(i, n) for (int i = 1; i <= n; i ++)\n#define Rep0(i, n) for (int i = 0; i <= n; i ++)\n#define RepG(i, x) for (int i = head[x]; i; i = edge[i].next)\n#define v edge[i].to\n#define mp(a, b) make_pair(a, b)\n\nusing namespace std;\n\nconst int N = 100010;\n\nint f[N][3], c[N], a[N];\nchar op[2];\n\nint main()\n{\n\tint n;\n\tscanf(\"%d\", &n);\n\tRep(i, n) {\n\t\tif (i != 1) scanf(\"%s\", op);\n\t\tif (i == 1 || op[0] == '+') c[i] = 1;\n\t\telse c[i] = -1;\n\t\tscanf(\"%d\", &a[i]);\n\t}\n\tRep0(i, n) Rep0(j, 2) f[i][j] = -1e9;\n\tf[0][0] = 0;\n\tRep0(i, n) Rep0(j, 2){\n\t\tint tt = j == 1 ? -1 : 1;\n\t\tif (j) {\n\t\t\tf[i + 1][j - 1] = max(f[i + 1][j - 1], f[i][j] + tt * c[i + 1] * a[i + 1]);\n\t\t\tif (c[i + 1] == -1) f[i + 1][j] = max(f[i + 1][j], f[i][j] + tt * a[i + 1]);\n\t\t}\n\t\tif (c[i + 1] == -1)\n\t\t\tf[i + 1][j + 1] = max(f[i + 1][j + 1], f[i][j] + tt * c[i + 1] * a[i + 1]);\n\t\tf[i + 1][j] = max(f[i + 1][j], f[i][j] + tt * c[i + 1] * a[i + 1]);\n\t}\n\tprintf(\"%d\\n\", f[n][0]);\n\t\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<cstring>\n#include<cctype>\n#include<algorithm>\n#define maxn 100005\n#define LL long long\nusing namespace std;\n\ntemplate<class T>inline void read(T &res)\n{\n\tchar ch;\n\tfor(;!isdigit(ch=getchar()););\n\tfor(res= ch-'0';isdigit(ch=getchar());res=res*10+ch-'0');\n}\nint n;\nLL dp[maxn][3],val[maxn];\nchar op;\n\nint main()\n{\n\tscanf(\"%d\",&n);\n\tdp[0][0] = 0;\n\tdp[0][1] = dp[0][2] = -0x3f3f3f3f3f3f3f3f;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tread(val[i]);\n\t\tif(i<n) while((op = getchar())!='-'  && op!='+');\n\t\tdp[i][0] = max(dp[i-1][0] + val[i] , max(dp[i-1][1] - val[i] , dp[i-1][2] + val[i]));\n\t\tdp[i][1] = max(dp[i-1][1] - val[i] , dp[i-1][2] + val[i]);\n\t\tdp[i][2] = dp[i-1][2] + val[i];\n\t\tif(op=='-')\n\t\t{\n\t\t\tfor(int j=2;j>0;j--) dp[i][j] = dp[i][j-1];\n\t\t\tdp[i][0] = -0x3f3f3f3f3f3f3f3f;\n\t\t}\n\t}\n\tprintf(\"%lld\\n\",max(dp[n][0] ,max( dp[n][1] , dp[n][2])));\n}\n"
  },
  {
    "language": "C++",
    "code": "// luogu-judger-enable-o2\n// luogu-judger-enable-o2\n#include <cstdio>\n#include <cstring>\n#include <cstdlib>\n#include <cstring>\n\n#include <algorithm>\n#include <numeric>\n#include <functional>\n\n#define LOG(FMT...) fprintf(stderr, FMT)\n\nusing namespace std;\n\ntypedef long long ll;\n\n\nint main() {\n//\tfreopen(\"brackets.in\", \"r\", stdin);\n//\tfreopen(\"brackets.out\", \"w\", stdout);\n\t\n\tint n;\n\tll ans, ans2;\n\tbool f = false;\n\tll csum = 0;\n\tscanf(\"%d%lld\", &n, &ans);\n\tans2 = -1LL << 60;\n\t\n\twhile (--n) {\n\t\tchar op;\n\t\tint x;\n\t\tscanf(\" %c%d\", &op, &x);\n\t\tif (op == '+') {\n\t\t\tif (!f) {\n\t\t\t\tans += x;\n\t\t\t} else {\n\t\t\t\tcsum += x;\n\t\t\t\tans2 += x;\n\t\t\t}\n\t\t} else if (op == '-') {\n\t\t\tif (!f) {\n\t\t\t\tf = true;\n\t\t\t\tans -= x;\n\t\t\t} else {\n\t\t\t\tans2 = max(ans2 + x, ans - csum + x);\n\t\t\t\tans += csum - x;\n\t\t\t\tcsum = 0;\n\t\t\t}\n\t\t}\n\t}\n\tprintf(\"%lld\\n\", max(ans + csum, ans2));\n\t\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<stdio.h>\n#include<string>\n#include<math.h>\n#include<stdlib.h>\n#include<set>\n#include<bitset>\n#include<map>\n#include<vector>\n#include<string.h>\n#include<algorithm>\n#include<iostream>\n#include<queue>\n#include<deque>\n#include<stack>\n#include<cmath>\n#include<ctime>\n#include<complex>\n#include<list>\n#include<limits.h>\n#include<iomanip>\nusing namespace std;\n\nconst int N=1e5+5;\nint n;\nlong long tot,cur,ans;\nint a[N],o[N];\nlong long suf[N],sum[N];\n\nint main(){\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++){\n\t\tchar c;\n\t\tif(i!=1) scanf(\" %c\",&c);\n\t\tif(c=='+'||i==1) o[i]=1;\n\t\telse o[i]=0;\n\t\tscanf(\"%d\",a+i);\n\t}\n\tfor(int i=n;i>=1;i--){\n\t\tsuf[i]=suf[i+1];\n\t\tsum[i]=sum[i+1]+1ll*a[i];\n\t\ttot+=1ll*a[i];\n\t\tif(!o[i]){\n\t\t\tsuf[i]+=tot;\n\t\t\ttot=0;\n\t\t\tans-=a[i];\n\t\t}else ans+=a[i];\n\t}\n\tfor(int i=1;i<=n;i++){\n\t\tif(o[i]) cur+=1ll*a[i];\n\t\telse cur-=1ll*a[i];\n\t\tif(o[i]==0) ans=max(ans,cur+suf[i+1]-(sum[i+1]-suf[i+1]));\n\t}\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<vector>\n#include<cstring>\n#include<queue>\n#include<algorithm>\nusing namespace std;\nconst long long MAXN=100005,INF=4223372036854775807ll;\nlong long n;\nlong long d[MAXN][3];\nlong long a;\nint main()\n{\n\tscanf(\"%lld\",&n);\n\tchar s[100];\n\tscanf(\"%lld\",&a);\n\tfor(long long i=0;i<=n+1;i++)\n\t{\n\t\td[i][0]=d[i][1]=d[i][2]=-INF;\n\t}\n\td[1][0]=a;\n\tfor(long long i=2;i<=n;i++)\n\t{\n\t\tscanf(\"%s\",s);\n\t\tscanf(\"%lld\",&a);\n\t\tif(s[0]=='+')\n\t\t{\n\t\t\td[i][0]=max(d[i-1][0]+a,d[i-1][1]+a);\n\t\t\td[i][1]=max(d[i-1][2]-a,d[i-1][1]-a);\n\t\t\td[i][2]=d[i-1][2]+a;\n\t\t}\n\t\tif(s[0]=='-')\n\t\t{\n\t\t\td[i][0]=max(d[i-1][0]-a,d[i-1][1]+a);\n\t\t\td[i][1]=max(max(d[i-1][0]-a,d[i-1][1]+a),d[i-1][2]+a);\n\t\t\td[i][2]=max(d[i-1][1]+a,d[i-1][2]-a);\n\t\t}\n\t}\n\tprintf(\"%lld\\n\",max(max(d[n][0],d[n][1]),d[n][2]));\n}"
  },
  {
    "language": "C++",
    "code": "// #pragma GCC optimize(3)\n#include <map>\n#include <set>\n#include <queue>\n#include <cmath>\n#include <vector>\n#include <cstdio>\n#include <bitset>\n#include <cstring>\n#include <iostream>\n#include <algorithm>\n#define maxn 100010\n#define inf 0x3f3f3f3f3f3f3f3f\n#define int long long\nusing namespace std;\nvoid write(int x){if(x<0){putchar('-');x=-x;}if(x>9) write(x/10);putchar(x%10+'0');}\nint read(){int d=0,w=1;char c=getchar();for(;c<'0'||c>'9';c=getchar())if(c=='-')\nw=-1;for(;c>='0'&&c<='9';c=getchar())d=(d<<1)+(d<<3)+c-48;return d*w;}\nvoid wln(int x){write(x);putchar('\\n');}\nvoid wrs(int x){write(x);putchar(' ');}\nint reac()\n{\n\tchar c=getchar();\n\tfor(;c!='-'&&c!='+';c=getchar());\n\treturn c=='+'?1:-1;\n}\nint n,a[maxn],c[maxn],f[maxn][3];\nsigned main()\n{\n\t// freopen(\".in\",\"r\",stdin);\n\t// freopen(\".out\",\"w\",stdout);\n\tn=read();\n\tc[1]=1;\n\ta[1]=read();\n\tfor(int i=2;i<=n;a[i++]=read())\n\t\tc[i]=reac();\n\tf[0][0]=0;\n\tf[0][1]=f[0][2]=-inf;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tf[i][0]=max(f[i-1][0],f[i-1][1])+a[i]*c[i];\n\t\tf[i][1]=max(max((c[i]==-1?f[i-1][0]:-inf)+a[i]*c[i],f[i-1][1]+a[i]*c[i]*-1),f[i-1][2]+a[i]*c[i]*-1);\n\t\tf[i][2]=max((c[i]==-1?f[i-1][1]:-inf)+a[i]*c[i]*-1,f[i-1][2]+a[i]*c[i]);\n\t\t// wrs(f[i][0]);\n\t\t// wrs(f[i][1]);\n\t\t// wln(f[i][2]);\n\t}\n\twrite(max(f[n][0],f[n][1]));\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "/*\n1. 只有 \"-\" 号后面才有 \"(\"\n2. 最多只会存在两层嵌套。假设有三层：-(A-(B-(C-D))), 显然 -(C-D) 还是 -(C-D)，可以变化成 -(A-B)-(C-D)，层数变少.\n\n由此得出 DP 解法：f[i, j] 表示结束第 i 个数时，有 j 个左括号尚未匹配的答案，j = 0/1/2\n*/\n#include <bits/stdc++.h>\n#define rep(i, x, y) for (int i = x; i <= y; i++)\nusing namespace std;\n\nconst int N = 1e5 + 10;\ntypedef long long ll;\nll n, x, f[3];\n\nint read() {\n    int x = 0, op = 1; char ch = getchar();\n    for (; !isdigit(ch); ch = getchar()) if (ch == '-') op = -1;\n    for (; isdigit(ch); ch = getchar()) x = x * 10 + (ch - '0');\n    return x * op;\n}\n\nint main() {\n    cin >> n;\n    f[1] = f[2] = -1e18;\n    rep(i, 1, n) {\n        x = read();\n        f[0] += x, f[1] -= x, f[2] += x;\n        if (x < 0)\n            f[2] = max(f[2], f[1]), f[1] = max(f[1], f[0]);  // 在 x 前加一个 '('\n        f[0] = max(f[0], f[1]), f[1] = max(f[1], f[2]);  // 在 x 后加一个 ')'\n    }\n    printf(\"%lld\\n\", f[0]);\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <bitset>\n#include <cassert>\n#include <cctype>\n#include <cmath>\n#include <cstdio>\n#include <cstdlib>\n#include <cstring>\n#include <ctime>\n#include <deque>\n#include <functional>\n#include <iomanip>\n#include <iostream>\n#include <list>\n#include <map>\n#include <numeric>\n#include <queue>\n#include <set>\n#include <sstream>\n#include <stack>\n#include <string>\n#include <utility>\n#include <vector>\n\n#define REP(i,s,n) for(int i=(int)(s);i<(int)(n);i++)\n\nusing namespace std;\ntypedef long long int ll;\ntypedef vector<int> VI;\ntypedef vector<ll> VL;\ntypedef pair<int, int> PI;\nconst ll mod = 1e9 + 7;\n\nconst int N = 100100;\n\nll minf = -1e16;\nll dp[N][3];\n\nint main(void){\n  int n;\n  cin >> n;\n  VL a(n);\n  vector<char> ops(n - 1);\n  REP(i, 0, n - 1) {\n    cin >> a[i] >> ops[i];\n  }\n  cin >> a[n - 1];\n  REP(i, 0, n + 1) {\n    REP(j, 0, 3) {\n      dp[i][j] = minf;\n    }\n  }\n  dp[0][0] = a[0];\n  REP(i, 1, n) {\n    REP(j, 0, 3) {\n      if (ops[i - 1] == '+') {\n\tdp[i][j] = dp[i - 1][j] + (j == 1 ? -a[i] : a[i]);\n      } else {\n\tdp[i][j] = max(dp[i][j], dp[i - 1][j] + (j == 0 ? -a[i] : a[i]));\n\tif (j < 2) {\n\t  dp[i][j + 1] = max(dp[i][j + 1], dp[i - 1][j] + (j == 0 ? -a[i] : a[i]));\n\t}\n      }\n    }\n  }\n  ll ma = minf;\n  REP(i, 0, 3) {\n    ma = max(ma, dp[n - 1][i]);\n  }\n  cout << ma << endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "/**\n * code generated by JHelper\n * More info: https://github.com/AlexeyDmitriev/JHelper\n * @author Majk\n */\n\n#include <vector>\n#include <iostream>\n#include <unordered_map>\n#include <map>\n#include <iomanip>\n#include <functional>\n#include <algorithm>\n#include <cassert>\n#include <cmath>\n#include <string>\n#include <sstream>\n#include <queue>\nusing namespace std;\n\n#define x first\n#define y second\nconstexpr int MOD = 1000000007;\n\ntypedef std::pair<int,int> pii;\ntypedef long long ll;\n\ntemplate<typename T>std::istream&operator>>(std::istream&i,vector<T>&t) {for(auto&v:t){i>>v;}return i;}\ntemplate<typename T>std::ostream&operator<<(std::ostream&o,const vector<T>&t) {for(size_t i=0;i<t.size();++i){o<<t[i]<<\" \\n\"[i == t.size()-1];}return o;}\n\nnamespace std {\n    template<typename T,typename U>struct hash<pair<T,U>>{hash<T>t;hash<U>u;size_t operator()(const pair<T,U>&p)const{return t(p.x)^(u(p.y)<<7);}};\n}\ntemplate<typename T,typename F>T bsh(T l,T h,const F&f){T r=-1,m;while(l<=h){m=(l+h)/2;if(f(m)){l=m+1;r=m;}else{h=m-1;}}return r;}\ntemplate<typename T,typename F>T bsl(T l,T h,const F&f){T r=-1,m;while(l<=h){m=(l+h)/2;if(f(m)){h=m-1;r=m;}else{l=m+1;}}return r;}\ntemplate<typename T> T gcd(T a,T b) { if (a<b) swap(a,b); return b?gcd(b,a%b):a; }\n\n// #include \"../l/mod.h\"\n\nclass C {\npublic:\n\tvoid solve(istream& cin, ostream& cout) {\n\t\tint N; cin >> N;\n\t\tint B; cin >> B;\n\t\tll A[3] = {B, -1000000000000000LL, -1000000000000000LL};\n\t\tfor (int i = 0; i < N-1; ++i) {\n\t\t\tchar c; cin >> c;\n\t\t\tcin >> B;\n\n\t\t\tif (c == '+') {\n\t\t\t\tA[0] = max(A[0], A[1]) + B;\n\t\t\t\tA[1] -= B;\n\t\t\t} else {\n\t\t\t\tA[2] = max(A[1], A[2]);\n\t\t\t\tA[0] -= B;\n\t\t\t\tA[1] -= B;\n\t\t\t\tA[1] = max(A[0], A[1]);\n\t\t\t}\n\n\t\t\tA[2] = A[2] + B;\n\t\t}\n\n\t\tcout << max(A[0], max(A[1], A[2])) << endl;\n\t}\n};\n\n\nint main() {\n\tios_base::sync_with_stdio(false);\n\tC solver;\n\tstd::istream& in(std::cin);\n\tstd::ostream& out(std::cout);\n\tsolver.solve(in, out);\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define MAXN 200005\n#define LL long long\n#define sum(l,r) (l<=r?(s[r] - s[l-1]):0)\nusing namespace std;\n \nint N;\nLL a[MAXN], s[MAXN];\n \nint main(){\n\t\n\tcin>>N;\n\tcin>>a[1];\n\t\n\tint N1 = 1;\n\tchar op;\n\tint x;\n\tfor(int i=1;i<N;i++){\n\t\tcin>>op;\n\t\tcin>>x;\n\t\tif(op=='+') a[N1] += x;\n\t\telse a[++N1] = x;\n\t}\n\n\tN = N1;\n\tif(N==1){\n\t\tcout<<a[1]<<endl;\n\t\treturn 0;\n\t}\n\t\n\tfor(int i=1;i<=N;i++){\n\t\ts[i] = s[i-1] + a[i];\n\t}\n\t\n\tLL ans = a[1] - sum(2,N);\n\tans = a[1] - a[2] + sum(3,N);\n\tcout<<ans<<endl;\n//\tfor(int i=2;i<=N;i++){\n//\t\tans = max(ans, a[1]-sum(2,i-1))\n//\t}\n\t\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\nconst int maxn=100005;\nlong long dp[maxn][2];\n\n\n\nint main()\n{\n    int n;\n    scanf(\"%d\",&n);\n    for(int i=1;i<=n;i++)\n    {\n        for(int j=0;j<2;j++)\n            dp[i][j]=-100000000000000000LL;\n    }\n    int x;\n    scanf(\"%d\",&x);\n    dp[1][0]=x;\n    for(int i=2;i<=n;i++)\n    {\n        int num;\n        char s[3];\n        scanf(\"%s%d\",s,&num);\n        if(s[0]=='-') {\n            dp[i][0]=max(dp[i-1][0]-num,dp[i-1][1]+num);\n            dp[i][1]=max(dp[i-1][0]-num,dp[i-1][1]+num);\n        }\n        else{\n            dp[i][0]=max(dp[i-1][0]+num,dp[i-1][1]-num);\n            dp[i][1]=max(dp[i-1][0]+num,dp[i-1][1]-num);\n        }\n       // printf(\"%lld %lld %d %s\\n\",dp[i][0],dp[i][1],num,s);\n    }\n    printf(\"%lld\\n\",max(dp[n][0],dp[n][1]));\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\nconst int N = 1e5 + 9;\n\nusing ll = long long;\nint A[N], n;\nll f[N][3];\nbool o[N];\nchar s;\n\nint pd (int a, bool o) { return o ? a : -a; }\n\nint main () {\n\tscanf(\"%d\", &n);\n\tfor (int i = o[1] = 1; i <= n; ++i) {\n\t\tif (i > 1) scanf(\"%s\", &s), o[i] = s == '+' ? 1 : 0;\n\t\tscanf(\"%d\", &A[i]);\n\t}\n\tf[0][1] = f[0][2] = -0x3f3f3f3f;\n\tfor (int i = 1; i <= n; ++i) {\n\t\tf[i][2] = f[i - 1][2];\n\t\tfor (int j = 0; j < 2; ++j) f[i][j] = max(f[i - 1][j], f[i - 1][j + 1]);\n\t\tfor (int j = 0; j < 3; ++j) f[i][j] += ((o[i] ^ (j & 1)) ? A[i] : -A[i]);\n\t\tif (!o[i]) for (int j = 2; j; --j) f[i][j] = max(f[i][j - 1], f[i][j]);\n\t}\n\tprintf(\"%lld\\n\", max(f[n][0], max(f[n][1], f[n][2])));\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\ntypedef long long ll;\n\nconst int MN = 100010;\n\nint N;\nint A[MN];\nchar B[MN];\nll dp[MN][3];\n\nint main() {\n    scanf(\"%d\", &N);\n\n    for(int i = 0; i < N; i++) {\n        if(i) {\n            scanf(\" %c\", &B[i]);\n        }\n        scanf(\"%d\", &A[i]);\n    }\n\n    if(N == 1) {\n        printf(\"%d\", A[0]);\n        return 0;\n    }\n\n    dp[N - 1][0] = B[N - 1] == '+'? A[N - 1] : -A[N - 1];\n    dp[N - 1][1] = B[N - 1] == '+'? -A[N - 1] : A[N - 1];\n    dp[N - 1][2] = abs(A[N - 1]);\n\n    for(int i = N - 2; i >= 1; i--) {\n        if(B[i] == '+') {\n            dp[i][0] = A[i] + dp[i + 1][0];\n            dp[i][1] = -1e18;\n            dp[i][2] = -1e18;\n            for(int j = 0; j < 3; j++) {\n                dp[i][1] = max(dp[i][1], -A[i] + dp[i + 1][j]);\n                dp[i][2] = max(dp[i][2], abs(A[i]) + dp[i + 1][j]);\n            }\n        }\n        else {\n            dp[i][0] = -1e18;\n            dp[i][1] = -1e18;\n            dp[i][2] = -1e18;\n            for(int j = 0; j < 3; j++) {\n                if(j < 2) dp[i][0] = max(dp[i][0], -A[i] + dp[i + 1][j]);\n                dp[i][1] = max(dp[i][1], A[i] + dp[i + 1][j]);\n                dp[i][2] = max(dp[i][2], abs(A[i]) + dp[i + 1][j]);\n            }\n        }\n\n        //cout << i << ' ' << dp[i][0] << ' ' << dp[i][1] << ' ' << dp[i][2] << endl;\n    }\n\n    printf(\"%lld\", dp[1][0] + A[0]);\n}\n"
  },
  {
    "language": "C++",
    "code": "// Math = ♥️\n\n#include <bits/stdc++.h>\n#include <ext/pb_ds/assoc_container.hpp>\n#include <ext/pb_ds/tree_policy.hpp>\nusing namespace __gnu_pbds;\nusing namespace std;\n\n/*-------------------------------------------------------------------------------------------------------------------------*/\n#define ll long long                  // Short form for long long\n#define ld long double                // Short form for long double\ntypedef pair<ll, ll> ii;              // Pair of long long\ntypedef vector<ll> vi;                // Vector of long long\ntypedef vector<vi> vvi;               // Vector of vector of long long\ntypedef vector<ii> vii;               // Vector of pairs\ntypedef vector<vii> vvii;             // Vector of vector of pairs\n#define pq priority_queue             // Max heap (To convert to min heap, use negative sign before every value)\n#define ff first                      // For pairs\n#define ss second                     // For pairs\n#define pb push_back                  // Pushback to vector\n#define mp make_pair                  // Makes pairs to be stored as pair\n#define all(c) (c).begin(), (c).end() // Mainly used by me in sorting\n// ordered_set adds two new functions to set - (set).find_by_order([kth element based on zero indexing]) and order_of_key()\n// order_of_key returns number of elements less that parameter. If element exists, that order is its index\n#define ordered_set tree<ll, null_type, less<ll>, rb_tree_tag, tree_order_statistics_node_update>\n/*-------------------------------------------------------------------------------------------------------------------------*/\n#define MAXN (ll)(1e5 + 5)\n#define NIL (ll)(1e18 + 5)\n\nll dp[MAXN][3];\nvector<char> op;\nvi arr;\nll n;\n\nll solve(ll i, ll t)\n{\n    if (i == n - 1)\n    {\n        if (t == 0 || t == 2)\n            return arr[i];\n        else\n            return -arr[i];\n    }\n\n    if (dp[i][t] == NIL)\n    {\n        if (t == 0)\n        {\n            if (op[i] == '-')\n                dp[i][t] = solve(i + 1, 1) + arr[i];\n            else\n                dp[i][t] = solve(i + 1, 0) + arr[i];\n        }\n        else if (t == 1)\n        {\n            if (op[i] == '-')\n                dp[i][t] = max(solve(i + 1, 1) - arr[i], solve(i + 1, 2) - arr[i]);\n            else\n                dp[i][t] = max(solve(i + 1, 1) - arr[i], solve(i + 1, 0) - arr[i]);\n        }\n        else\n        {\n            if (op[i] == '-')\n                dp[i][t] = solve(i + 1, 2) + arr[i];\n            else\n                dp[i][t] = max(solve(i + 1, 2), max(solve(i + 1, 1), solve(i + 1, 0))) + arr[i];\n        }\n    }\n    return dp[i][t];\n}\n\nint main(void)\n{\n    ios_base::sync_with_stdio(false);\n    cin.tie(NULL);\n\n    for (int i = 0; i < MAXN; i++)\n        for (int j = 0; j < 3; j++)\n            dp[i][j] = NIL;\n\n    cin >> n;\n\n    arr.resize(n);\n    op.resize(n - 1);\n    cin >> arr[0];\n\n    for (int i = 1; i < n; i++)\n        cin >> op[i - 1] >> arr[i];\n\n    cout << solve(0, 0) << \"\\n\";\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define int long long\n#define fi first\n#define se second\n#define PB push_back\nusing namespace std;\ntypedef pair<int, int> P1;\ntypedef pair<int, pair<int, int> > P2;\nstatic const int INF = 1ll<<60;\nstatic const int dx[] = { 1, -1, 0, 0, };\nstatic const int dy[] = { 0, 0, 1, -1 };\nstatic const int mod = 1000000007;\n\nint N;\nint A[100005];\nchar op[100005];\nint dp[100005][5];\n//    [i項目][i項目までに開いているかっこの数]\n\nint solve(){\n    for(int i=0;i<100005;++i)for(int j=0;j<5;++j)dp[i][j]=-INF;\n    dp[0][0] = A[0];\n    for(int i=0;i<N-1;++i){\n        for(int j=0;j<=3ll;++j){\n            int f;\n            if(j%2==0)f=1;\n            else f=-1;\n            int t1 = f*A[i+1];\n            //cout<<t1<<endl;\n            //cout<<i<<\" \"<<j<<endl;\n            if(op[i+1]=='+'){\n                dp[i+1][j] = max(dp[i][j]+t1,dp[i+1][j]);\n                if(j!=0)dp[i+1][j-1] = max(dp[i][j]+t1,dp[i+1][j-1]);\n            }\n            else {\n                //cout<<1/0<<endl;\n                dp[i+1][j] = max(dp[i][j]-t1,dp[i+1][j]);\n                dp[i+1][j+1] = max(dp[i][j]-t1,dp[i+1][j+1]);\n                if(j!=0)dp[i+1][j-1] = max(dp[i][j]-t1,dp[i+1][j-1]);\n            }\n            //cout<<i<<\" \"<<j<<endl;\n            //cout<<dp[i][j]<<\" \"<<dp[i+1][j]<<\" \"<<dp[i+1][j+1]<<endl;\n        }\n    }\n    int ans=-INF;\n    for(int i=0;i<=3;++i)ans=max(dp[N-1][i],ans);\n    return ans;\n}\n\n\nsigned main(){\n    cin>>N;\n    op[0]='+';\n    for(int i=0;i<N;++i){\n        cin>>A[i];\n        if(i!=N-1)cin>>op[i+1];\n    }\n    cout<<solve()<<endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define inf 0x3f3f3f3f3f3f3f3f\n//#define inf 0x3f3f3f3f\n#define debug(...) fprintf(stderr, __VA_ARGS__)\n#define inv(x) Power(x, mod - 2)\n#define fi first\n#define se second\n#define MP make_pair\n#define PB push_back\n#define N 100005\n\nusing namespace std;\ntypedef pair<int,int> Pair;\ntypedef long long ll;\n\nconst long double Pi = 3.14159265358979323846l;\nconst int mod = 1e9 + 7;\ninline int add(int x, int y) { return (x += y) - (x >= mod ? mod : 0); }\ninline void inc(int &x, int y) { (x += y) -= (x >= mod ? mod : 0); }\ninline int mul(int x, int y) { return 1ll * x * y % mod; }\ninline int Power(int x, int y) {\n\tint res = 1;\n\twhile (y) {\n\t\tif (y & 1) res = mul(res, x);\n\t\tx = mul(x, x), y >>= 1;\n\t} return res;\n}\n\ntemplate <class T> inline T\tinput() {\n\tT x; char ch; while (!isdigit(ch = getchar()));\n\tfor (x = ch ^ 48; isdigit(ch = getchar()); x = x * 10 + (ch ^ 48));\n\treturn x;\n}\n\ntemplate <class T> inline void chkmin(T &x, T y) { x = x < y ? x : y; }\ntemplate <class T> inline void chkmax(T &x, T y) { x = x > y ? x : y; }\n\nstruct {\n\tinline operator int () { return input<int>(); }\n\tinline operator long long () { return input<long long>(); }\n\ttemplate <class T> inline void operator () (T &x) { x = *this; }\n\ttemplate<class T, class ...A> inline void operator () (T &x, A &...a)\n\t{ x = *this; this -> operator ()(a...); }\n} read;\n\nint n;\nlong long a[N], opt[N];\nlong long f[N][3];\nchar s[2];\n\nint main() {\n\tscanf(\"%d\", &n);\n\tfor (int i = 1; i < n; ++i) {\n\t\tscanf(\"%lld%s\", a + i, s);\n\t\topt[i + 1] = s[0] == '-' ? -1 : 1;\n\t}\n\tscanf(\"%lld\", a + n), opt[1] = 1;\n\n\tf[0][1] = f[0][2] = -inf;\n\tfor (int i = 1; i <= n; ++i) {\n\t\tif (opt[i] == 1) {\n\t\t\tf[i][0] = f[i - 1][0] + a[i];\n\t\t\tf[i][1] = max(f[i - 1][1] - a[i], f[i - 1][2] + a[i]);\n\t\t\tf[i][2] = f[i - 1][2] + a[i];\n\t\t} else {\n\t\t\tf[i][0] = f[i][1] = max(f[i - 1][0] - a[i], f[i - 1][1] + a[i]);\n\t\t\tf[i][2] = max(f[i - 1][2] - a[i], f[i - 1][1] + a[i]);\n\t\t}\n\t}\n\n\tprintf(\"%lld\\n\", f[n][0]);\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define fi first\n#define se second\n#define bug cout<<\"--------------\"<<endl\nusing namespace std;\ntypedef long long ll;\nconst double PI=acos(-1.0);\nconst double eps=1e-6;\nconst ll inf=1e15;\nconst ll llf=1e18;\nconst int mod=1e9+7;\nconst int maxn=1e5+10;\nint n,x;\nll dp[3][maxn];\nint main(){\n\tios::sync_with_stdio(false);\n\t//freopen(\"in\",\"r\",stdin);\n\tcin>>n>>x;\n\tdp[0][1]=x;\n\tdp[1][1]=dp[2][1]=-inf;\n//\tcout<<dp[0][1]<<\" \"<<dp[1][1]<<\" \"<<dp[2][1]<<endl;\n\tfor(int i=2;i<=n;i++){\n\t\tchar c;\n\t\tcin>>c>>x;\n\t\tif(c=='+'){\n\t\t\tdp[0][i]=max(dp[0][i-1],dp[1][i-1])+x;\n\t\t\tdp[1][i]=dp[1][i-1]-x;\n\t\t\tdp[2][i]=dp[2][i-1]+x;\n\t\t}else{\n\t\t\tdp[0][i]=dp[0][i-1]-x;\n\t\t\tdp[1][i]=max({dp[0][i-1]-x,dp[1][i-1]+x,dp[2][i-1]+x});\n\t\t\tdp[2][i]=max(dp[1][i-1]+x,dp[2][i-1]-x);\n\t\t}\n\t//\tcout<<dp[0][i]<<\" \"<<dp[1][i]<<\" \"<<dp[2][i]<<endl;\n\t}\n\tcout<<max({dp[0][n],dp[1][n],dp[2][n]});\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<iostream>\n#define gmax(x, y) if ((y) > x) x = (y);\nusing namespace std;\ninline char nc() {\n\tstatic char b[1<<12],*s=b,*t=b;\n\treturn s==t&&(t=(s=b)+fread(b,1,1<<12,stdin),s==t)?-1:*s++;\n}\ntemplate < class T >\ninline void read(T &x) {\n\tchar b = nc(); x = 0;\n\tfor (; !isdigit(b); b = nc());\n\tfor (; isdigit(b); b = nc()) x = x * 10 + b - '0';\n}\ninline int read() {\n\tchar b = nc();\n\tfor (; b != '-' && b != '+'; b = nc());\n\treturn b == '-' ? -1 : 1;\n}\ntypedef long long ll;\nint n;\nll f0, f1, f2;\nint main() {\n\tread(n); read(f0); f1 = f2 = -1e9;\n\tfor (int a, op, i = 1; i < n; ++i) {\n\t\top = read(); read(a);\n\t\tf0 += a * op; f1 -= a * op; f2 += a * op;\n\t\tif (op == -1) {\n\t\t\tgmax(f2, f1); gmax(f1, f0);\n\t\t} gmax(f1, f2); gmax(f0, f1);\n\t} printf(\"%lld\\n\", f0);\n\treturn 0;\t\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n#define int long long\n#define r(i,n) for(int i=0;i<n;i++)\nint a[100009],dp[100009][4];\nstring s[100009];\nmain(){\n  r(i,100009)r(j,4)dp[i][j]=-(1e8);\n  int ans,n;\n  cin>>n>>ans;n--;\n  r(i,n)cin>>s[i]>>a[i];\n  dp[0][0]=0;\n  for(int i=0;i<n;i++){\n    if(s[i]==\"+\"){\n      dp[i+1][0]=max(dp[i+1][0],max(dp[i][0]+a[i],max(dp[i][2]+a[i],dp[i][1]+a[i])));\n      dp[i+1][1]=max(dp[i+1][1],max(dp[i][1]-a[i],dp[i][2]-a[i]));\n      dp[i+1][2]=max(dp[i+1][2],dp[i][2]+a[i]);\n    }\n    else{\n      dp[i+1][0]=max(dp[i+1][0],max(dp[i][0]-a[i],max(dp[i][1]-a[i],dp[i][2]-a[i]))) ;\n      dp[i+1][1]=max(dp[i+1][1],max(dp[i][0]-a[i],max(dp[i][1]+a[i],dp[i][2]+a[i])));\n      dp[i+1][2]=max(dp[i+1][2],max(dp[i][2]-a[i],dp[i][1]+a[i]));\n    }\n  }\n  cout<<ans+max(dp[n][0],max(dp[n][1],dp[n][2]))<<endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define FOR(i,a,b) for(ut i=(a);i<(ut)(b);i++)\n#define REP(i,b) FOR(i,0,b)\nusing namespace std;\ntypedef long long LL;\nconst int SIZE=5+1e5;\nconst LL INF=1<<30;\nconst LL p=7+(1e9);\nLL A[SIZE];\nchar B[SIZE];\nbool isMinus[SIZE];\nint main(){\n\tint N;\n\tcin >> N;\n\tLL ans=0;\n\tcin >> ans;\n\tREP(i,N-1){\n\t\tcin >> B[i];\n\t\tcin >> A[i];\n\t\tisMinus[i]=B[i]=='-';\n\t}\n\tLL freedom=0,needm=0,cost=0;\n\tREP(j,N-1){\n\t\tint i=N-1-j-1;\n\t\tcost+=A[i];\n\t\tneedm+=A[i];\n\t\tif(isMinus[i]){\n\t\t\tfreedom=max(freedom-A[i],needm-cost*2);\n\t\t\tcost=0;\n\t\t}\n\t\telse freedom+=A[i];\n\t\t\n\t}\n\tcout << freedom+ans << endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<functional>\n#include <algorithm>\n#include  <iostream>\n#include   <ctype.h>\n#include   <cstring>\n#include   <fstream>\n#include    <cstdio>\n#include    <vector>\n#include    <string>\n#include     <cmath>\n#include     <deque>\n#include     <stack>\n#include     <queue>\n#include      <list>\n#include       <set>\n#include       <map>\n#define INF 0X7FFFFFFF\n#define PI acos(-1.0)\ntypedef long long ll;\nusing namespace std;\nconst int mod = 1e9 + 7;\ninline int getint()\n{\n\tint w = 0, q = 0;\n\tchar c = getchar();\n\twhile ((c<'0' || c>'9') && c != '-') c = getchar();\n\tif (c == '-') q = 1, c = getchar();\n\twhile (c >= '0'&&c <= '9') w = w * 10 + c - '0', c = getchar();\n\treturn q ? -w : w;\n}\nint n;\nll a[100005];\nchar c[100005];\nint main() {\n\tn = getint();\n\tint i = 0;\n\tll ans = 0;\n\tll sum = 0;\n\twhile (i < n) {\n\t\ta[i] = getint();\n\t\tsum += a[i];\n\t\tif (i != 0 && c[i - 1] == '-') {\n\t\t\tans -= a[i];\n\t\t}\n\t\telse {\n\t\t\tans += a[i];\n\t\t}\n\t\tif (i == n - 1) {\n\t\t\tbreak;\n\t\t}\n\t\tc[i] = getchar();\n\t\ti++;\n\t}\n\tint flag = 1;\n\tfor (int i = 0; i < n; i++) {\n\t\tif (c[i] == '-') {\n\t\t\tsum -= a[i + 1] * 2;\n\t\t\tint j = i + 1;\n\t\t\twhile (j < n) {\n\t\t\t\tif (c[j] == '+') {\n\t\t\t\t\tsum -= a[j + 1] * 2;\n\t\t\t\t\tj++;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t}\n\tans = max(sum, ans);\n\tcout << ans << endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <set>\n#include <map>\n#include <queue>\n#include <ctime>\n#include <cmath>\n#include <cstdio>\n#include <bitset>\n#include <vector>\n#include <cstring>\n#include <cassert>\n#include <iostream>\n#include <algorithm>\nusing namespace std;\ntypedef double db;\ntypedef long long ll;\ntypedef long double ld;\ntypedef vector<int> vi;\ntypedef pair<int,int> pa;\ntypedef unsigned int uint;\ntypedef unsigned long long ull;\n#define w1 first\n#define ls (x<<1)\n#define w2 second\n#define ins insert\n#define rs (x<<1|1) \n#define mp make_pair\n#define pb push_back\n#define mid ((l+r)>>1)\n#define sqr(x) ((x)*(x))\n#define cle(x) ((x).clear())\n#define lowbit(x) ((x)&(-x))\n#define SZ(x) (int((x).size()))\n#define All(x) (x).begin(),(x).end()\n#define ms(x,y) memset(x,y,sizeof (x))\n#define rep(i,a,b) for(int (i)=(a);(i)<=(b);(i)++)\n#define rep2(i,a,b) for(int (i)=(a);(i)<(b);(i)++)\n#define per(i,a,b) for(int (i)=(a);(i)>=(b);(i)--)\n#define Rep(p,x) for(int (p)=head[(x)];(p);(p)=nxt[(p)]) \n#define Rep2(p,x) for(int (p)=cur[(x)];(p);(p)=nxt[(p)])\ntemplate<class T>inline void read(T&num){\n\tnum=0;T f=1;char ch=getchar();\n\twhile(ch<'0'||ch>'9'){if(ch=='-')f=-1;ch=getchar();}\n\twhile(ch>='0'&&ch<='9')num=num*10+ch-'0',ch=getchar();\n\tnum*=f;\n}\ninline int getgcd(int x,int y){if(!x)return y;return getgcd(y%x,x);}\ninline int power(int x,int k,int p){int res=1;for(;k;k>>=1,x=(ll)x*x%p)if(k&1)res=(ll)res*x%p;return res;}\nconst double pi=acos(-1);\t\ninline void judge(){\n\tfreopen(\"input.txt\",\"r\",stdin);\n} \n//********************************head*************************************\nconst int maxn=1e5+5;\nint n;\nint a[maxn],nxt[maxn];\nll suf[maxn],pre[maxn];\nchar opt[maxn][2];\nint main(){\n\tread(n);\n\topt[1][0]='+';\n\trep(i,1,n){\n\t\tscanf(\"%d\",&a[i]);\n\t\tif(i<n)scanf(\"%s\",opt[i+1]);\n\t}\n\trep(i,1,n)\n\t\tif(opt[i][0]=='+')pre[i]=pre[i-1]+a[i];\n\t\telse pre[i]=pre[i-1]-a[i];\n\tper(i,n,1)suf[i]=suf[i+1]+a[i];\n\tint lst=n+1;\n\tll ans=pre[n];\n\tper(i,n,1)if(opt[i][0]=='-'){\n\t\tif(lst!=n+1)ans=max(ans,pre[i-1]-suf[i]+2*suf[lst]);\n\t\tlst=i;\n\t}\n\tcout<<ans<<endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define maxn 100005\n#define LL long long\nusing namespace std;\nchar cb[1<<20],*cs,*ct;\n#define getc() (cs==ct&&(ct=(cs=cb)+fread(cb,1,1<<20,stdin),cs==ct)?0:*cs++)\ntemplate<class T>inline void read(T &a){\n\tchar c;bool f=0;while(!isdigit(c=getc())) c=='-'&&(f=1);\n\tfor(a=c-'0';isdigit(c=getc());a=a*10+c-'0'); f&&(a=-a);\n}\nint n,a[maxn];\nLL F[maxn],G[maxn];\nint main()\n{\n\tread(n);\n\tfor(int i=1;i<=n;i++){\n\t\tread(a[i]);\n\t\tif(i>1&&a[i-1]>0&&a[i]>0) a[i-1]+=a[i],i--,n--;\n\t}\n\tfor(int i=1;i<=n;i++) F[i]=F[i-1]+a[i],G[i]=G[i-1]+abs(a[i]);\n\tLL ans=F[n];\n\tfor(int i=2;i<n;i++) if(a[i]<0) ans=max(ans,F[i]-a[i+1]+G[n]-G[i+1]);\n\tprintf(\"%lld\\n\",ans);\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\nusing ll = long long;\nusing vi = vector<int>;\nusing vll = vector<ll>;\nusing vvi = vector<vector<int>>;\nusing vvl = vector<vector<ll>>;\n\nll dp[101010][3] = {0};\n\nint main() {\n  cin.tie(nullptr);\n  ios::sync_with_stdio(false);\n  int n;\n  cin >> n;\n  vector<ll> a(n);\n  vector<char> op(n);\n  ll INF = 1LL << 34;\n  op[0] = '+';\n  for (int i = 0; i < n; i++) {\n    cin >> a[i];\n    if (i < n - 1)\n      cin >> op[i + 1];\n  }\n  for (int i = 0; i <= n; i++) dp[i][0] = dp[i][1] = dp[i][2] = -INF;\n  dp[0][0] = 0;\n  for (int i = 0; i < n; i++) {\n    if (op[i] == '+') {\n      dp[i + 1][0] = max(a[i] + dp[i][0], max(a[i] + dp[i][1], a[i] + dp[i][2]));\n      dp[i + 1][1] = max(-a[i] + dp[i][1], -a[i] + dp[i][2]);\n      dp[i + 1][2] = a[i] + dp[i][2];\n    } else {\n      dp[i + 1][0] = max(-a[i] + dp[i][0], max(-a[i] + dp[i][1], -a[i] + dp[i][2]));\n      dp[i + 1][1] = max(-a[i] + dp[i][0], max(a[i] + dp[i][1], a[i] + dp[i][2]));\n      dp[i + 1][2] = max(a[i] + dp[i][1], a[i] + dp[i][2]);\n    }\n  }\n\n  cout << max(dp[n][0], max(dp[n][1], dp[n][2])) << endl;\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\n#define DEBUG(x) cerr<<#x<<\": \"<<x<<endl;\n#define DEBUG_VEC(v) cerr<<#v<<\":\";for(int i=0;i<v.size();i++) cerr<<\" \"<<v[i]; cerr<<endl\n\ntypedef long long ll;\n#define vi vector<int>\n#define vl vector<ll>\n#define vii vector< vector<int> >\n#define vll vector< vector<ll> >\n#define vs vector<string>\n#define pii pair<int,int>\n#define pis pair<int,string>\n#define psi pair<string,int>\n#define pll pair<ll,ll>\ntemplate<class S, class T> pair<S, T> operator+(const pair<S, T> &s, const pair<S, T> &t) { return pair<S, T>(s.first + t.first, s.second + t.second); }\ntemplate<class S, class T> pair<S, T> operator-(const pair<S, T> &s, const pair<S, T> &t) { return pair<S, T>(s.first - t.first, s.second - t.second); }\ntemplate<class S, class T> ostream& operator<<(ostream& os, pair<S, T> p) { os << \"(\" << p.first << \", \" << p.second << \")\"; return os; }\n#define X first\n#define Y second\n#define rep(i,n) for(int i=0;i<(n);i++)\n#define rep1(i,n) for(int i=1;i<=(n);i++)\n#define rrep(i,n) for(int i=(n)-1;i>=0;i--)\n#define rrep1(i,n) for(int i=(n);i>0;i--)\n#define REP(i,a,b) for(int i=a;i<b;i++)\n#define in(x, a, b) (a <= x && x < b)\n#define all(c) c.begin(),c.end()\ntemplate<class T> bool chmax(T &a, const T &b) { if (a<b) { a = b; return 1; } return 0; }\ntemplate<class T> bool chmin(T &a, const T &b) { if (a>b) { a = b; return 1; } return 0; }\n#define UNIQUE(v) v.erase(std::unique(v.begin(), v.end()), v.end());\nconst ll inf = 1000000001;\nconst ll INF = 1e18;\nconst ll MOD = 1000000007;\n//const ll MOD = 998244353;\nconst double pi = 3.14159265358979323846;\n#define Sp(p) cout<<setprecision(15)<< fixed<<p;\nint dx[4] = { 1,0, -1,0 }, dy[4] = { 0,1,0,-1 };\nint dx2[8] = { 1,1,0,-1,-1,-1,0,1 }, dy2[8] = { 0,1,1,1,0,-1,-1,-1 };\n#define fio() cin.tie(0); ios::sync_with_stdio(false);\n//#define mp make_pair\n\nint main() {\n  int n;\n  cin >> n;\n  vl a(n);\n  string s;\n  cin >> a[0];\n  rep1 (i, n - 1) {\n    char c;\n    cin >> c;\n    s.push_back(c);\n    cin >> a[i];\n  }\n  int m = 3;\n  vll dp(n, vl(m, -INF));\n  dp[0][0] = a[0];\n  rep1 (i, n - 1) {\n    char op = s[i - 1];\n    rep (j, m) {\n      ll bai;\n      if (j % 2 == 0) {\n        bai = 1;\n      }\n      else {\n        bai = -1;\n      }\n      if (op == '+') {\n        dp[i][j] = max(dp[i][j], dp[i - 1][j] + bai*a[i]);\n        if (j != 0) {\n          dp[i][j - 1] = max(dp[i][j - 1], dp[i - 1][j] - bai*a[i]);\n        }\n      }\n      else {\n        dp[i][j] = max(dp[i][j], dp[i - 1][j] - bai*a[i]);\n        if (j != 0) {\n          dp[i][j - 1] = max(dp[i][j - 1], dp[i - 1][j] + bai*a[i]);\n        }\n        if (j != m - 1) {\n          dp[i][j + 1] = max(dp[i][j + 1], dp[i - 1][j] - bai*a[i]);\n        }\n      }\n    }\n  }\n  ll ans = -INF;\n  rep (j, m) {\n    chmax(ans, dp[n - 1][j]);\n  }\n  cout << ans << endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<algorithm>\n#define ll long long\nusing namespace std;\nint n,i,k;char c;ll f0,f1,f2;\nint main(){\n\tscanf(\"%d\",&n);scanf(\"%d\",&f0);f1=f2=-1e18;\n\tfor (n--;n--;){\n\t\tscanf(\" %c%d\",&c,&k);\n\t\tif (c=='-') k=-k;\n\t\tll v0=f0+k,v1=f1-k,v2=f2+k;\n\t\tf0=max(v0,max(v1,v2));\n\t\tif (c=='+') f1=max(v1,v2),f2=v2;\n\t\telse f1=max(v0,max(v1,v2)),f2=max(v1,v2);\n\t}\n\tprintf(\"%lld\",f0);\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <iostream>\n#include <algorithm>\n#include <cstring>\n#include <string>\n#include <vector>\n#include <set>\n#include <map>\n#include <utility>\n#include <cstdlib>\n#include <memory>\n#include <queue>\n#include <cassert>\n#include <cmath>\n#include <ctime>\n#include <complex>\n#include <bitset>\n#include <fstream>\n#include <unordered_map>\n#include <unordered_set>\n#include <numeric>\n\nusing namespace std;\n\n#define ws ws_____________________\n#define y1 y1_____________________\n#define y0 y0_____________________\n#define left left_________________\n#define right right_______________\n#define next next_________________\n#define prev prev_________________\n#define hash hash_________________\n\n#define pb push_back\n#define fst first\n#define snd second\n#define mp make_pair \n#define sz(C) ((int) (C).size())\n#define forn(i, n) for (int i = 0; i < (int) n; ++i)\n#define ford(i, n) for (int i = ((int) n) - 1; i >= 0; --i)\n#define all(C) begin(C), end(C)\n\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef unsigned int uint;\ntypedef pair<int,int> pii;\ntypedef pair<ll, ll> pll;\ntypedef vector<ll> vll;\ntypedef vector<int> vi;\ntypedef vector<vi> vvi;\ntypedef vector<pii> vii;\ntypedef long double ld;\ntypedef complex<double> cd;\n\n#define FILE_NAME \"a\"\n\nconst int MAXN = 1e5 + 10;\nconst int MAXK = 3;\nconst ll INF = 1e18;\n\nint n;\nint a[MAXN];\nint sign[MAXN];\n\nint read_sign() {\n\tchar c;\n\twhile (1) {\n\t\tc = getchar();\n\t\tif  (c == '-') {\n\t\t\treturn -1;\n\t\t}\n\t\tif  (c == '+') {\n\t\t\treturn +1;\n\t\t}\n\t}\n\tassert(0);\n}\n\nbool read() {\n\tif  (scanf(\"%d\\n\", &n) < 1) {\n\t\treturn 0;\n\t}\n\tscanf(\"%d\", &a[0]);\n\tsign[0] = 1;\n\tfor (int i = 1; i < n; ++i) {\n\t\tsign[i] = read_sign();\n\t\tscanf(\"%d\", &a[i]);\n\t}\n\treturn 1;\n}\n\nint get_sign(int x) {\n\treturn (x & 1) ? -1 : +1;\n}\n\nll dp[MAXN][MAXK];\n\nll solve() {\n\tforn(i, n + 1) {\n\t\tforn(k, MAXK) {\n\t\t\tdp[i][k] = -INF;\n\t\t}\n\t}\n\n\tdp[0][0] = 0;\n\n\t// forn(i, n) {\n\t// \tprintf(\"%d \", sign[i] * a[i]);\n\t// }\n\t// puts(\"\");\n\n\tforn(i, n) forn(k, MAXK) {\n\t\tll cur_dp = dp[i][k];\n\t\tif  (cur_dp <= -INF) {\n\t\t\tcontinue;\n\t\t}\n\t\t// printf(\"dp[%d][%d] = %lld\\n\", i, k, cur_dp);\n\t\tdp[i + 1][k] = max(dp[i + 1][k], cur_dp + sign[i] * get_sign(k) * a[i]);\n\t\tif  (k > 0) {\n\t\t\tdp[i + 1][k - 1] = max(dp[i + 1][k - 1], cur_dp + sign[i] * get_sign(k) * a[i]);\n\t\t}\n\t\tif  (sign[i] == -1 && k + 1 < MAXK) {\n\t\t\tdp[i + 1][k + 1] = max(dp[i + 1][k + 1], cur_dp + sign[i] * get_sign(k) * a[i]);\n\t\t}\n\t}\n\n\tll ans = -INF;\n\tforn(k, MAXK) {\n\t\tans = max(ans, dp[n][k]);\n\t}\n\n\treturn ans;\n}\n\nint main() {\n#ifdef LOCAL\n\tfreopen(FILE_NAME \".in\", \"r\", stdin);\n\t// freopen(FILE_NAME \".out\", \"w\", stdout);\n#endif\n\n\twhile (read()) {\n\t\tcout << solve() << endl;\n\t}\n\n#ifdef LOCAL\n\tcerr.precision(5);\n\tcerr << \"Time: \" << fixed << (double) clock() / CLOCKS_PER_SEC << endl;\n#endif\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define ll long long\nusing namespace std;\nconst int N=100010,oo=1e9;\nint n;\nll ans=0;\nint a[N],f[N][3],tot[N];\nbool b[N];\nint main(){\n\tchar c;\n\tscanf(\"%d\",&n);\n\tb[1]=1;\n\tfor(int i=1;i<=n;i++){\n\t\ttot[i]=tot[i-1];\n\t\tif(i>=2){\n\t\t\tscanf(\" %c\",&c);\n\t\t\tif(c=='+') b[i]=1;\n\t\t\telse tot[i]++;\n\t\t}\n\t\tscanf(\"%d\",&a[i]);\n\t}\n\tfor(int i=1;i<=n;i++){\n\t\t\tif(b[i]){\n\t\t\t\tf[i][0]=max(f[i-1][0],max(f[i-1][1],f[i-1][2]))+a[i];\n\t\t\t\tf[i][1]=max(f[i-1][1],f[i-1][2])-a[i];\n\t\t\t\tf[i][2]=f[i-1][2]+a[i];\n\t\t\t}else{\n\t\t\t\tf[i][0]=max(f[i-1][0],max(f[i-1][1],f[i-1][2]))-a[i];\n\t\t\t\tf[i][1]=f[i-1][0]-a[i];\n\t\t\t\tf[i][2]=max(f[i-1][1],f[i-1][2])+a[i];\n\t\t\t}\n\t\t\tif(tot[i]<2) f[i][2]=-oo;\n\t\t\tif(tot[i]<1) f[i][1]=-oo;\n\t}\n//\tfor(int i=1;i<=n;i++){\n//\t\tcout<<f[i][0]<<\" \";\n//\t}\n//\tcout<<endl;\n//\tfor(int i=1;i<=n;i++){\n//\t\tcout<<f[i][1]<<\" \";\n//\t}\n//\tcout<<endl;\n//\tfor(int i=1;i<=n;i++){\n//\t\tcout<<f[i][2]<<\" \";\n//\t}\n//\tcout<<endl;\n\tans=max(f[n][0],max(f[n][1],f[n][2]));\n\tcout<<ans;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\n#define SZ(v) ((int)(v).size())\n#define ALL(v) (v).begin(),(v).end()\n#define one first\n#define two second\ntypedef long long ll;\ntypedef pair<int, int> pi;\nconst int INF = 0x3f2f1f0f;\nconst ll LINF = 1ll * INF * INF;\n\nconst int MAX_N = 1e5 + 100;\n\nint N; ll Dy[3][MAX_N];\nint main() {\n\tint a = 2, b = 2;\n\tcin >> N;\n\t\n\tDy[1][0] = Dy[2][0] = -LINF;\n\tfor(int i=1; i<=N; i++) {\n\t\tchar S[9]; if(i > 1) scanf(\"%s\", S);\n\t\tint op = (i == 1 ? 1 : (S[0] == '+' ? 1 : -1) );\n\t\tint nr; scanf(\"%d\", &nr);\n\n\t\tfor(int k=0; k<=2; k++) Dy[k][i] = Dy[k][i-1] + (k%2 == 0 ? nr * op : nr * op * -1);\n\t\tfor(int k=1; k<=2; k++) Dy[k-1][i] = max(Dy[k-1][i], Dy[k][i-1] + (k%2 == 0 ? nr * op : nr * op * -1));\n\t\tif(op == -1) for(int k=0; k<=1; k++) Dy[k+1][i] = max(Dy[k+1][i], Dy[k][i-1] + (k%2 == 0 ? nr * op : nr * op * -1));\n\t}\n\tprintf(\"%lld\\n\", Dy[0][N]);\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<string.h>\n#include<string>\n#include<stdio.h>\n#include<algorithm>\n#include<vector>\n#include<bitset>\n#include<math.h>\n#include<stack>\n#include<queue>\n#include<set>\n#include<map>\nusing namespace std;\ntypedef long long ll;\ntypedef long double db;\ntypedef pair<int,int> pii;\nconst int N=100000;\nconst db pi=acos(-1.0);\n#define lowbit(x) (x)&(-x)\n#define sqr(x) (x)*(x)\n#define rep(i,a,b) for (register int i=a;i<=b;i++)\n#define per(i,a,b) for (register int i=a;i>=b;i--)\n#define go(u,i) for (register int i=head[u];i;i=sq[i].nxt)\n#define fir first\n#define sec second\n#define mp make_pair\n#define pb push_back\n#define maxd 998244353\n#define eps 1e-8\ninline int read()\n{\n    int x=0,f=1;char ch=getchar();\n    while ((ch<'0') || (ch>'9')) {if (ch=='-') f=-1;ch=getchar();}\n    while ((ch>='0') && (ch<='9')) {x=x*10+(ch-'0');ch=getchar();}\n    return x*f;\n}\n\nnamespace My_Math{\n\t#define N 100000\n\n\tint fac[N+100],invfac[N+100];\n\n\tint add(int x,int y) {return x+y>=maxd?x+y-maxd:x+y;}\n\tint dec(int x,int y) {return x<y?x-y+maxd:x-y;}\n\tint mul(int x,int y) {return 1ll*x*y%maxd;}\n\tll qpow(ll x,int y)\n\t{\n\t\tll ans=1;\n\t\twhile (y)\n\t\t{\n\t\t\tif (y&1) ans=mul(ans,x);\n\t\t\tx=mul(x,x);y>>=1;\n\t\t}\n\t\treturn ans;\n\t}\n\tint inv(int x) {return qpow(x,maxd-2);}\n\n\tint C(int n,int m)\n\t{\n\t\tif ((n<m) || (n<0) || (m<0)) return 0;\n\t\treturn mul(mul(fac[n],invfac[m]),invfac[n-m]);\n\t}\n\n\tint math_init()\n\t{\n\t\tfac[0]=invfac[0]=1;\n\t\trep(i,1,N) fac[i]=mul(fac[i-1],i);\n\t\tinvfac[N]=inv(fac[N]);\n\t\tper(i,N-1,1) invfac[i]=mul(invfac[i+1],i+1);\n\t}\n\t#undef N\n}\nusing namespace My_Math;\n\nint n;\nll f[100100][3];\n\nint main()\n{\n\tn=read();\n\tf[0][1]=f[0][2]=-1e18;\n\trep(i,1,n)\n\t{\n\t\tint x=read();\n\t\tf[i][0]=max(f[i-1][0],f[i-1][1]);\n\t\tf[i][1]=max(f[i-1][1],f[i-1][2]);\n\t\tf[i][2]=f[i-1][2];\n\t\tf[i][0]+=x;f[i][1]-=x;f[i][2]+=x;\n\t\tif (x<0)\n\t\t{\n\t\t\tf[i][2]=max(f[i][2],f[i][1]);\n\t\t\tf[i][1]=max(f[i][1],f[i][0]);\n\t\t}\n\t}\n\tll ans=max(max(f[n][0],f[n][1]),f[n][2]);\n\tprintf(\"%lld\",ans);\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<cstring>\n#include<algorithm>\n#define N 100010\n#define ll long long\n#define inf 1000000000000000000LL\nusing namespace std;\nint n, flag[N], w[N], nxt[N];\nll ans, now, s[N];\nchar S[10];\nint main(){\n\tscanf(\"%d\", &n); memset(flag, 0, sizeof(flag));\n\tfor(int i=1; i<=n; i++){\n\t\tscanf(\"%d\", &w[i]);\n\t\tif(i<=n-1){scanf(\"%s\", S+1); if(S[1]=='-')flag[i+1]=1;}\n\t}\n\ts[0]=0; for(int i=1; i<=n; i++)s[i]=s[i-1]+w[i];\n\tnow=n+1;\n\tfor(int i=n; i; i--){nxt[i]=now; if(flag[i])now=i;}\n\tans=inf; now=0;\n\tfor(int i=1; i<=n; i++)if(flag[i]){\n\t\tans=min(ans, now+s[nxt[i]-1]-s[i-1]);\n\t\tnow+=w[i];\n\t}\n\tif(ans==inf)ans=0;\n\tprintf(\"%lld\", s[n]-ans*2);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "/**\n * code generated by JHelper\n * More info: https://github.com/AlexeyDmitriev/JHelper\n * @author Majk\n */\n\n#include <vector>\n#include <iostream>\n#include <unordered_map>\n#include <map>\n#include <iomanip>\n#include <functional>\n#include <algorithm>\n#include <cassert>\n#include <cmath>\n#include <string>\n#include <sstream>\n#include <queue>\nusing namespace std;\n\n#define x first\n#define y second\nconstexpr int MOD = 1000000007;\n\ntypedef std::pair<int,int> pii;\ntypedef long long ll;\n\ntemplate<typename T>std::istream&operator>>(std::istream&i,vector<T>&t) {for(auto&v:t){i>>v;}return i;}\ntemplate<typename T>std::ostream&operator<<(std::ostream&o,const vector<T>&t) {for(size_t i=0;i<t.size();++i){o<<t[i]<<\" \\n\"[i == t.size()-1];}return o;}\n\nnamespace std {\n    template<typename T,typename U>struct hash<pair<T,U>>{hash<T>t;hash<U>u;size_t operator()(const pair<T,U>&p)const{return t(p.x)^(u(p.y)<<7);}};\n}\ntemplate<typename T,typename F>T bsh(T l,T h,const F&f){T r=-1,m;while(l<=h){m=(l+h)/2;if(f(m)){l=m+1;r=m;}else{h=m-1;}}return r;}\ntemplate<typename T,typename F>T bsl(T l,T h,const F&f){T r=-1,m;while(l<=h){m=(l+h)/2;if(f(m)){h=m-1;r=m;}else{l=m+1;}}return r;}\ntemplate<typename T> T gcd(T a,T b) { if (a<b) swap(a,b); return b?gcd(b,a%b):a; }\n\n// #include \"../l/mod.h\"\n\nclass C {\npublic:\n\tvoid solve(istream& cin, ostream& cout) {\n\t\tint N; cin >> N;\n\t\tint B; cin >> B;\n\t\tll A[3] = {B, -1000000000000000LL, -1000000000000000LL};\n\t\tfor (int i = 0; i < N-1; ++i) {\n\t\t\tchar c; cin >> c;\n\t\t\tcin >> B;\n\n\t\t\tif (c == '+') {\n\t\t\t\tA[0] = max(A[0], max(A[1], A[2])) + B;\n\t\t\t\tA[1] = A[1] - B;\n\t\t\t\tA[2] = A[2] + B;\n\t\t\t} else {\n\t\t\t\tA[2] = max(A[1], A[2]) + B;\n\t\t\t\tA[1] = max(A[1], A[0]) - B;\n\t\t\t\tA[0] = A[0] - B;\n\t\t\t}\n\t\t}\n\n\t\tcout << max(A[0], max(A[1], A[2])) << endl;\n\t}\n};\n\n\nint main() {\n\tios_base::sync_with_stdio(false);\n\tC solver;\n\tstd::istream& in(std::cin);\n\tstd::ostream& out(std::cout);\n\tsolver.solve(in, out);\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define time Time\n#define pii pair<int,int>    \n#define x first    \n#define y second \n#define N 10000005   \n#define pb(x) push_back(x)\n#define mp(x,y) make_pair((x),(y))    \n#define sqr(x) ((x)*(x))\ntypedef long long LL;  \nusing namespace std;\nconst int mod=1e9+7;\nint main(){\n\tint n;\n\twhile(scanf(\"%d\",&n)!=EOF){\n\t\tlong long \tint a[100005];\n\t\tint op[100005];\n\t\top[0]=1;\n\t\tscanf(\"%lld\",&a[0]);\n\t\tfor(int i=1;i<n;i++){\n\t\t\tchar c;\n\t\t\twhile(scanf(\"%c\",&c)&&c!='+'&&c!='-');\n\t\t\tif(c=='+')\n\t\t\top[i]=1;\n\t\t\telse\n\t\t\top[i]=0;\n\t\t\tscanf(\"%lld\",&a[i]);\n\t\t} \n\t\tlong long int sum=0;\n\t\tfor(int i=0;i<n;i++){\n\t\t\tsum+=a[i];\n\t\t}\n\t\tlong long int ans=1e18;\n\t\tint i;\n\t\tfor(i=0;op[i]==1;i++);\n\t\tint last=i;\n\t\tlong long int ssum=0,sssum=a[i];\n\t\tfor(;i<n;i++)\n\t\t{\n\t\t\tssum+=a[i];\n\t\t\tif(op[i]==0)\n\t\t\tsssum+=a[i],last=i;\n\t\t\tif(op[i+1]==0||i+1==n)\n\t\t\tans=min(ssum+sssum,ans),ssum=0;\n\t\t}\n\t\tans=min(sssum,ans);\n\t\tprintf(\"%lld\\n\",sum-2*ans);\n\t}\n}\n/*\n\n 1 - 1 + 2 + 10 - 2 + 3  + 5\n 1  - 2  - 3  \n*/\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\nusing ll=long long;\nconst ll PLUS=-1;\nconst ll MINUS=-2;\n\nconst ll INF=1e15;\nint main(){\n    int n;\n    cin>>n;\n    vector<ll> aop(n*2-1);\n    for(int i=0;i<2*n-1;i++){\n        string x;\n        cin>>x;\n        if(x==\"+\"){\n            aop[i]=PLUS;\n        }\n        else if(x==\"-\"){\n            aop[i]=MINUS;\n        }\n        else{\n            aop[i]=stoi(x);\n        }\n    }\n    vector<vector<ll>> dp(2*n,vector<ll>(3,-INF));\n    dp[0][0]=0;\n    for(int i=0;i<2*n-1;i++){\n        for(int j=0;j<3;j++){\n            if(aop[i]==PLUS){\n                dp[i+1][j]=dp[i][j];\n            }\n            else if(aop[i]==MINUS){\n                if(j!=2) dp[i+1][j+1]=dp[i][j];\n            }\n            else{\n                if(j%2){\n                    for(int k=0;k<=j;k++){\n                        dp[i+1][k]=max(dp[i+1][k],dp[i][j]-aop[i]);\n                    }\n                }\n                else{\n                    for(int k=0;k<=j;k++){\n                        dp[i+1][k]=max(dp[i+1][k],dp[i][j]+aop[i]);\n                    }\n                }\n                \n            }\n        }\n    }\n    cout<<dp[2*n-1][0]<<endl;\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "// need\n#include <iostream>\n#include <algorithm>\n\n// data structure\n#include <bitset>\n//#include <list>\n#include <map>\n#include <queue>\n#include <set>\n#include <stack>\n#include <string>\n#include <utility>\n#include <vector>\n//#include <array>\n//#include <tuple>\n#include <unordered_map>\n#include <unordered_set>\n//#include <complex>\n//#include <deque>\n\n// stream\n//#include <istream>\n//#include <sstream>\n//#include <ostream>\n\n// etc\n#include <cassert>\n#include <functional>\n#include <iomanip>\n//#include <typeinfo>\n#include <chrono>\n#include <random>\n#include <cfenv>\n\n#define INIT std::ios::sync_with_stdio(false);std::cin.tie(0);\n#define VAR(type, ...)type __VA_ARGS__;MACRO_VAR_Scan(__VA_ARGS__);\ntemplate<typename T> void MACRO_VAR_Scan(T& t) { std::cin >> t; }\ntemplate<typename First, typename...Rest>void MACRO_VAR_Scan(First& first, Rest&...rest) { std::cin >> first; MACRO_VAR_Scan(rest...); }\n#define VEC_ROW(type, n, ...)std::vector<type> __VA_ARGS__;MACRO_VEC_ROW_Init(n, __VA_ARGS__); for(int i=0; i<n; ++i){MACRO_VEC_ROW_Scan(i, __VA_ARGS__);}\ntemplate<typename T> void MACRO_VEC_ROW_Init(int n, T& t) { t.resize(n); }\ntemplate<typename First, typename...Rest>void MACRO_VEC_ROW_Init(int n, First& first, Rest&...rest) { first.resize(n); MACRO_VEC_ROW_Init(n, rest...); }\ntemplate<typename T> void MACRO_VEC_ROW_Scan(int p, T& t) { std::cin >> t[p]; }\ntemplate<typename First, typename...Rest>void MACRO_VEC_ROW_Scan(int p, First& first, Rest&...rest) { std::cin >> first[p]; MACRO_VEC_ROW_Scan(p, rest...); }\n#define OUT(d) std::cout<<d;\n#define FOUT(n, d) std::cout<<std::fixed<<std::setprecision(n)<<d;\n#define SOUT(n, c, d) std::cout<<std::setw(n)<<std::setfill(c)<<d;\n#define SP std::cout<<\" \";\n#define TAB std::cout<<\"\\t\";\n#define BR std::cout<<\"\\n\";\n#define ENDL std::cout<<std::endl;\n#define FLUSH std::cout<<std::flush;\n#define VEC(type, c, n) std::vector<type> c(n);for(auto& i:c)std::cin>>i;\n#define MAT(type, c, m, n) std::vector<std::vector<type>> c(m, std::vector<type>(n));for(auto& r:c)for(auto& i:r)std::cin>>i;\n#define ALL(a) (a).begin(),(a).end()\n#define FOR(i, a, b) for(int i=(a);i<(b);++i)\n#define RFOR(i, a, b) for(int i=(b)-1;i>=(a);--i)\n#define REP(i, n) for(int i=0;i<int(n);++i)\n#define RREP(i, n) for(int i=(n)-1;i>=0;--i)\n#define FORLL(i, a, b) for(ll i=ll(a);i<ll(b);++i)\n#define RFORLL(i, a, b) for(ll i=ll(b)-1;i>=ll(a);--i)\n#define REPLL(i, n) for(ll i=0;i<ll(n);++i)\n#define RREPLL(i, n) for(ll i=ll(n)-1;i>=0;--i)\n#define PAIR std::pair<int, int>\n#define PAIRLL std::pair<ll, ll>\n#define IN(a, x, b) (a<=x && x<b)\n#define SHOW(d) {std::cerr << #d << \"\\t:\" << d << \"\\n\";}\n#define SHOWVECTOR(v) {std::cerr << #v << \"\\t:\";for(const auto& xxx : v){std::cerr << xxx << \" \";}std::cerr << \"\\n\";}\n#define SHOWVECTOR2(v) {std::cerr << #v << \"\\t:\\n\";for(const auto& xxx : v){for(const auto& yyy : xxx){std::cerr << yyy << \" \";}std::cerr << \"\\n\";}}\n#define SHOWPAIR(p) {std::cerr << #p << \"\\t:(\" << p.first << \",\\t\" << p.second << \")\\n\";}\n#define SHOWPAIRVECTOR2(v) {std::cerr << #v << \"\\t:\\n\";for(const auto& xxx : v){for(const auto& yyy : xxx){std::cerr<<'('<<yyy.first<<\", \"<<yyy.second<<\") \";}std::cerr << \"\\n\";}}\n#define SHOWPAIRVECTOR(v) {for(const auto& xxx:v){std::cerr<<'('<<xxx.first<<\", \"<<xxx.second<<\") \";}std::cerr<<\"\\n\";}\n#define SHOWQUEUE(a) {std::queue<decltype(a.front())> tmp(a);std::cerr << #a << \"\\t:\";for(int i=0; i<static_cast<int>(a.size()); ++i){std::cerr << tmp.front() << \"\\n\";tmp.pop();}std::cerr << \"\\n\";}\ntemplate<typename T> inline T CHMAX(T& a, const T b) { return a = (a < b) ? b : a; }\ntemplate<typename T> inline T CHMIN(T& a, const T b) { return a = (a > b) ? b : a; }\n#define EXCEPTION(msg) throw std::string(\"Exception : \" msg \" [ in \") + __func__ + \" : \" + std::to_string(__LINE__) + \" lines ]\"\n#define TRY(cond, msg) try {if (cond) EXCEPTION(msg);}catch (std::string s) {std::cerr << s << std::endl;}\nvoid CHECKTIME(std::function<void()> f) { auto start = std::chrono::system_clock::now(); f(); auto end = std::chrono::system_clock::now(); auto res = std::chrono::duration_cast<std::chrono::nanoseconds>((end - start)).count(); std::cerr << \"[Time:\" << res << \"ns  (\" << res / (1.0e9) << \"s)]\\n\"; }\n\n#define int ll\nusing ll = long long;\nusing ull = unsigned long long;\nconstexpr int INFINT = 1 << 30;                          // 1.07x10^ 9\nconstexpr int INFINT_LIM = (1LL << 31) - 1;              // 2.15x10^ 9\nconstexpr ll INFLL = 1LL << 60;                          // 1.15x10^18\nconstexpr ll INFLL_LIM = (1LL << 62) - 1 + (1LL << 62);  // 9.22x10^19\nconstexpr double EPS = 1e-7;\nconstexpr int MOD = 1000000007;\nconstexpr double PI = 3.141592653589793238462643383279;\n\nsigned main() {\n\tINIT;\n\tVAR(int, n);\n\tstd::vector<int> a(n);\n\tstd::vector<char> op(n - 1);\n\tREP(i, n-1) {\n\t\tstd::cin >> a[i] >> op[i];\n\t}\n\tstd::cin >> a[n - 1];\n\tll sum = 0;\n\tREP(i, n) {\n\t\tsum += a[i];\n\t}\n\tint cnt = 0;\n\tREP(i, n - 1) {\n\t\tif (op[i] == '-') {\n\t\t\tif (cnt == 1) break;\n\t\t\tsum -= 2 * a[i + 1];\n\t\t\t++cnt;\n\t\t}\n\t\telse if (op[i] == '+' && cnt == 1) {\n\t\t\tsum -= 2 * a[i + 1];\n\t\t}\n\t}\n\tOUT(sum)BR;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\nvoid read(int &x) {\n    x=0;int f=1;char ch=getchar();\n    for(;!isdigit(ch);ch=getchar()) if(ch=='-') f=-f;\n    for(;isdigit(ch);ch=getchar()) x=x*10+ch-'0';x*=f;\n}\n\nvoid print(int x) {\n    if(x<0) putchar('-'),x=-x;\n    if(!x) return ;print(x/10),putchar(x%10+48);\n}\nvoid write(int x) {if(!x) putchar('0');else print(x);putchar('\\n');}\n\n#define lf double\n#define ll long long \n\n#define pii pair<int,int >\n#define vec vector<int >\n\n#define pb push_back\n#define mp make_pair\n#define fr first\n#define sc second\n\n#define data asd09123jdf02i3h\n\n#define FOR(i,l,r) for(int i=l,i##_r=r;i<=i##_r;i++)\n\nconst int maxn = 1e6+10;\nconst int inf = 1e9;\nconst lf eps = 1e-8;\nconst int mod = 1e9+7;\n\nint f[maxn][3],a[maxn],n,t[maxn];\nchar s[maxn];\n\nvoid update(int &x,int y) {\n    if(y>x) x=y;\n}\n\nint main() {\n    read(n);\n    for(int i=1;i<=n;i++) {\n        read(a[i]);\n        if(i==n) break;\n        scanf(\"%s\",s+1);\n        if(s[1]=='-') t[i+1]=-1;\n        else t[i+1]=1;\n    }t[1]=1;\n    memset(f,-63,sizeof f);\n    f[0][0]=0;\n    for(int i=1;i<=n;i++) {\n        a[i]*=t[i];\n        for(int j=0;j<=2;j++) \n            update(f[i][j],f[i-1][j]+(j==1?-1:1)*a[i]);\n        if(t[i]<0) {\n            for(int j=0;j<=1;j++) \n                update(f[i][j+1],f[i-1][j]+(j==1?-1:1)*a[i]);\n        }\n        for(int j=0;j<=1;j++) \n            update(f[i][j],f[i-1][j+1]+(j==1?-1:1)*a[i]);\n    }\n    write(max(max(f[n][0],f[n][1]),f[n][2]));\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include \"bits/stdc++.h\"\nusing namespace std;\ntypedef long long ll;\nconst ll MOD = 1e9 + 7;\nconst ll INF = 1LL << 60;\nconst double PI = 3.141592653589793238;\nconst double EPS = 1e-10;\nll A[100000];\nstring op[100000];\nll dp[100000][3];\nint main() {\n\tint N;\n\tcin >> N;\n\tcin >> A[0];\n\tfor (int i = 1; i < N; i++) {\n\t\tcin >> op[i - 1];\n\t\tcin >> A[i];\n\t}\n\tfill((ll*)dp, (ll*)(dp + N), -(1LL << 60));\n\tdp[0][0] = A[0];\n\tfor (int i = 0; i + 1 < N; i++) {\n\t\tfor (int j = 0; j <= 2; j++) {\n\t\t\tif (dp[i][j] == -(1LL << 60)) continue;\n\t\t\tfor (int k = 0; k <= j; k++) {\n\t\t\t\tif (op[i] == \"+\") {\n\t\t\t\t\tdp[i + 1][k] = max(dp[i + 1][k], dp[i][j] + A[i + 1] * (k % 2 == 0 ? 1 : -1));\n\t\t\t\t}\n\t\t\t\telse if (k <= 1) {\n\t\t\t\t\tdp[i + 1][k + 1] = max(dp[i + 1][k + 1], dp[i][j] + A[i + 1] * (k % 2 == 0 ? -1 : 1));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tll ans = max(dp[N - 1][0], dp[N - 1][1]);\n\tans = max(ans, dp[N - 1][2]);\n\tcout << ans << endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n      \n#define FOR(i,a,b) for( ll i = (a); i < (ll)(b); i++ )\n#define REP(i,n) FOR(i,0,n)\n#define YYS(x,arr) for(auto& x:arr)\n#define ALL(x) (x).begin(),(x).end()\n#define SORT(x) sort( (x).begin(),(x).end() )\n#define REVERSE(x) reverse( (x).begin(),(x).end() )\n#define UNIQUE(x) (x).erase( unique( ALL( (x) ) ) , (x).end() )\n#define PW(x) (1LL<<(x))\n#define SZ(x) ((ll)(x).size())\n#define SHOW(x) cout << #x << \" = \" << x << endl\n#define SHOWA(x,n) for( int i = 0; i < n; i++ ){ cout << x[i] << \" \"; } cout << endl\n\n#define pb emplace_back\n#define fi first\n#define se second\n     \nusing namespace std;\n\ntypedef long double ld;\ntypedef long long int ll;\ntypedef pair<int,int> pi;\ntypedef pair<ll,ll> pl;\ntypedef vector<int> vi;\ntypedef vector<ll> vl;\ntypedef vector<bool> vb;\ntypedef vector<ld> vd;\ntypedef vector<pi> vpi;\ntypedef vector<pl> vpl;\ntypedef vector<vpl> gr;\ntypedef vector<vl> ml;\ntypedef vector<vd> md;\ntypedef vector<vi> mi;\n     \nconst ll INF = (ll)1e9 + 10;\nconst ll INFLL = (ll)1e18 + 10;\nconst ld EPS = 1e-12;\nconst ll MOD = 1e9+7;\n     \ntemplate<class T> T &chmin( T &a , const T &b ){ return a = min(a,b); }\ntemplate<class T> T &chmax( T &a , const T &b ){ return a = max(a,b); }\ntemplate<class T> inline T sq( T a ){ return a * a; }\n\nll in(){ ll x; scanf( \"%lld\" , &x ); return x; }\nchar yuyushiki[1000010]; string stin(){ scanf( \"%s\" , yuyushiki ); return yuyushiki; }\n\n// head\n\nint n;\nll a[100010];\nvi p;\n\nchar op[100010];\nll sum[100010];\n\nll ans;\n\nint main(){\n\n  n = in();\n  a[0] = in();\n  op[0] = '+';\n  FOR( i , 1 , n ){\n    string s = stin();\n    a[i] = in();\n    op[i] = s[0];\n    if( op[i] == '-' ){\n      p.pb( i );\n    }\n  }\n  p.pb( n );\n\n  REP( i , n ){\n    sum[i+1] = sum[i] + a[i];\n  }\n\n  ll cur = 0;\n  REP( i , n ){\n    if( op[i] == '-' ){\n      int ne = *upper_bound( ALL(p) , i );\n\n      ll res = cur - ( sum[ne] - sum[i] ) + ( sum[n] - sum[ne] );\n\n      chmax( ans , res );\n      \n      cur -= a[i];\n    } else {\n      cur += a[i];\n    }\n  }\n\n  chmax( ans , cur );\n\n  cout << ans << endl;\n  \n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<cstring>\n#include<algorithm>\n \nusing namespace std;\ntypedef long long ll;\nconst ll inf=1LL<<61;\nconst int N=100100;\nint n;ll a[N],f[3][N];\nchar s[N];ll op[N];\n \nll cg(int x){return (x&1)?-1:1;}\nint main(){\n\tscanf(\"%d\",&n);op[1]=1;\n\tfor (int i=1;i<n;i++){\n\t\tscanf(\"%d%s\",a+i,s);\n\t\tif (s[0]=='-')\n\t\t\top[i+1]=-1; else op[i+1]=1;\n\t}\n\tscanf(\"%d\",&a[n]);\n\tf[0][1]=a[1];f[1][1]=f[2][1]=-inf;\n\tfor (int i=2;i<=n;i++){\n\t\tfor (int j=0;j<=2;j++) f[j][i]=-inf;\n\t\tfor (int j=0;j<=2;j++)\n\t\t\tfor (int k=0;k<=j;k++)\n\t\t\t\tf[k][i]=max(f[k][i],f[j][i-1]+op[i]*a[i]*cg(k));\n\t\tif (op[i]==-1){\n\t\t\tfor (int j=2;j;j--)\n\t\t\t\tf[j][i]=max(f[j][i],f[j-1][i]);\n\t\t}\n\t}\n\tprintf(\"%lld\\n\",max(max(f[0][n],f[1][n]),f[2][n]));\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n\nint main() {\n  unsigned N;\n  std::cin >> N;\n  std::vector<long long> A(N);\n  std::vector<char> op(N);\n  op[0] = '+';\n  std::cin >> A[0];\n  for (unsigned i = 1; i < N; ++i) {\n    std::cin >> op[i] >> A[i];\n  }\n  std::vector<std::vector<long long>> dp(N, std::vector<long long>(3));\n  dp[0][0] = A[0];\n  dp[0][1] = std::numeric_limits<long long>::min() / 2;\n  dp[0][2] = std::numeric_limits<long long>::min() / 2;\n  for (unsigned i = 1; i < N; ++i) {\n    if (op[i] == '+') {\n      dp[i][0] = std::max(dp[i - 1][0] + A[i], dp[i - 1][1] + A[i]);\n      dp[i][1] = std::max(dp[i - 1][1] - A[i], dp[i - 1][2] - A[i]);\n      dp[i][2] = dp[i - 1][2] + A[i];\n    } else {\n      dp[i][0] = std::max(dp[i - 1][0] - A[i], dp[i - 1][1] - A[i]);\n      dp[i][1] = std::max(std::max(dp[i - 1][0] - A[i], dp[i - 1][2] + A[i]), dp[i - 1][1] + A[i]);\n      dp[i][2] = std::max(dp[i - 1][1] + A[i], dp[i - 1][2] - A[i]);\n    }\n  }\n  std::cout << std::max(std::max(dp.back()[0], dp.back()[1]), dp.back()[2]);\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<cstring>\n#include<algorithm>\n#define N 100010\n#define ll long long\n#define inf 1000000000000000000LL\nusing namespace std;\nint n, flag[N], w[N], next[N];\nll ans, now, s[N];\nchar S[10];\nint main(){\n\tscanf(\"%d\", &n); memset(flag, 0, sizeof(flag));\n\tfor(int i=1; i<=n; i++){\n\t\tscanf(\"%d\", &w[i]);\n\t\tif(i<=n-1){scanf(\"%s\", S+1); if(S[1]=='-')flag[i+1]=1;}\n\t}\n\ts[0]=0; for(int i=1; i<=n; i++)s[i]=s[i-1]+w[i];\n\tnow=n+1;\n\tfor(int i=n; i; i--){next[i]=now; if(flag[i])now=i;}\n\tans=inf; now=0;\n\tfor(int i=1; i<=n; i++)if(flag[i]){\n\t\tans=min(ans, now+s[next[i]-1]-s[i-1]);\n\t\tnow+=w[i]; \n\t}\n\tprintf(\"%lld\", s[n]-ans*2);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <climits>\n#include <cmath>\n#include <cstdio>\n#include <cstdlib>\n#include <ctime>\n#include <iostream>\n#include <sstream>\n#include <functional>\n#include <map>\n#include <string>\n#include <cstring>\n#include <vector>\n#include <queue>\n#include <stack>\n#include <deque>\n#include <set>\n#include <list>\n#include <numeric>\nusing namespace std;\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef pair<ll,ll> P;\nconst double PI = 3.14159265358979323846;\nconst double EPS = 1e-12;\nconst ll INF = 1LL<<29;\nconst ll mod = 1e9+7;\n#define rep(i,n) for(int (i)=0;(i)<(ll)(n);++(i))\n#define repd(i,n,d) for(ll (i)=0;(i)<(ll)(n);(i)+=(d))\n#define all(v) (v).begin(), (v).end()\n#define pb(x) push_back(x)\n#define mp(x,y) make_pair((x),(y))\n#define mset(m,v) memset((m),(v),sizeof(m))\n#define chmin(X,Y) ((X)>(Y)?X=(Y),true:false)\n#define chmax(X,Y) ((X)<(Y)?X=(Y),true:false)\n#define fst first\n#define snd second\n#define UNIQUE(x) (x).erase(unique(all(x)),(x).end())\ntemplate<class T> ostream &operator<<(ostream &os, const vector<T> &v){int n=v.size();rep(i,n)os<<v[i]<<(i==n-1?\"\":\" \");return os;}\n\nint main(){\n\tint n;\n\tcin>>n;\n\tvector<ll> v(n);\n\tcin>>v[0];\n\trep(i, n-1){\n\t\tstring c;\n\t\tcin>>c>>v[i+1];\n\t\tif(c==\"-\") v[i+1] *= -1;\n\t}\n\tll sum = 0, sum2 = 0;\n\trep(i, n){\n\t\tsum += v[i];\n\t\tif(v[i]<0) sum2 += v[i];\n\t}\n\tll res = sum;\n\trep(i, n){\n\t\tif(v[i]>0) continue;\n\t\tsum2 -= v[i];\n\t\tll s = 0;\n\t\twhile(i+1<n && v[i+1]>0){\n\t\t\ts += v[i+1];\n\t\t\ti++;\n\t\t}\n\t\tchmax(res, sum-2*s-2*sum2);\n\t}\n\tcout<<res<<endl;\n\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<algorithm>\n#include<cassert>\n#define ll long long\nusing namespace std;\ninline int read(){\n\tint re=0,flag=1;char ch=getchar();\n\twhile(!isdigit(ch)){\n\t\tif(ch=='-') flag=-1;\n\t\tch=getchar();\n\t}\n\twhile(isdigit(ch)) re=(re<<1)+(re<<3)+ch-'0',ch=getchar();\n\treturn re*flag;\n}\nint n,ch[100010];ll a[100010];\nll dp0,dp1,dp2;\nint main(){\n\tn=read();int i;char c;\n\tfor(i=1;i<=n;i++){\n\t\ta[i]=read();\n\t\tif(i==n) break;\n\t\tc=getchar();\n\t\twhile(c!='+'&&c!='-') c=getchar();\n\t\tch[i+1]=(c=='-');\n//\t\tcout<<\"finish readin \"<<i<<' '<<a[i]<<' '<<ch[i+1]<<'\\n';\n\t}\n\tdp0=0;dp1=dp2=-1e15;\n\tfor(i=1;i<=n;i++){\n\t\tif(ch[i]){\n\t\t\tdp0-=a[i];\n\t\t\tdp1+=a[i];\n\t\t\tdp2-=a[i];\n\t\t\tdp2=max(dp2,dp1);\n\t\t\tdp1=max(dp1,dp0);\n\t\t}\n\t\telse{\n\t\t\tdp0+=a[i];\n\t\t\tdp1-=a[i];\n\t\t\tdp2+=a[i];\n\t\t}\n\t\tdp1=max(dp2,dp1);\n\t\tdp0=max(dp1,dp0);\n\t}\n\tcout<<dp0<<'\\n';\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <cstring>\n#include <iostream>\n\nusing namespace std ;\n\ntypedef long long LL ;\n\nconst int N = 500010 ;\n\nint n ;\nLL f[N][4] ;\n\n\nLL qr(){\n    LL r = 0, f = 1 ;\n    char c = getchar() ;\n    while (!isdigit(c)){\n        if (c == '-') f = -f ;\n        c = getchar() ;\n    }\n    while (isdigit(c)){\n        r = r * 10 + c - 48 ;\n        c = getchar() ;\n    }\n    return r * f ;\n}\nint main(){\n    cin >> n ; LL x ;\n    f[0][1] = f[0][2] = -(1ll << 52) ;\n    for (int i = 1 ; i <= n ; ++ i){\n        x = qr() ;\n        f[i][0] = x ;\n        f[i][2] = x ;\n        f[i][1] = -x ;\n        f[i][2] += f[i - 1][2] ;\n        f[i][1] += max(f[i - 1][1], f[i - 1][2]) ;\n        f[i][0] += max(f[i - 1][0], max(f[i - 1][1], f[i - 1][2])) ;\n        if (x < 0){\n            f[i][2] = max(f[i][2], f[i][1]) ;\n            f[i][1] = max(f[i][1], f[i][0]) ;\n        }\n    }\n    cout << max(f[n][1], max(f[n][0], f[n][2])) << endl  ;\n    return 0 ;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include<cctype>\n#include<cstdio>\n#include<algorithm>\nusing i64=long long;\nint fetc(){int c=getchar();while(c^'-'&&c^'+')c=getchar();return c;}\nint read(){int x=0,c=getchar();while(isspace(c))c=getchar();while(isdigit(c))(x*=10)+=c&15,c=getchar();return x;}\nint main()\n{\n    int n=read();i64 ans=read(),b=-1e18,c=-1e18;\n    for(int x;n^1;--n) fetc()=='-'?(x=read(),c=b+x,ans=b=std::max(ans-x,c)):(x=read(),ans+=x,c+=x,b=std::max(b-x,c));\n    printf(\"%lld\",ans);\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <cstring>\n#include <iostream>\n\nusing namespace std ;\n\ntypedef long long LL ;\n\nconst int N = 500010 ;\n\nint n ;\nLL f[N][4] ;\n\n\nint qr(){\n    int r = 0, f = 1 ;\n    char c = getchar() ;\n    while (!isdigit(c)){\n        if (c == '-') f = -f ;\n        c = getchar() ;\n    }\n    while (isdigit(c)){\n        r = r * 10 + c - 48 ;\n        c = getchar() ;\n    }\n    return r * f ;\n}\nint main(){\n    cin >> n ; int x ;\n    f[0][1] = f[0][2] = -(1ll << 52) ;\n    for (int i = 1 ; i <= n ; ++ i){\n        x = qr() ;\n        f[i][0] = x ;\n        f[i][2] = x ;\n        f[i][1] = -x ;\n        f[i][2] += f[i - 1][2] ;\n        f[i][1] += max(f[i - 1][1], f[i - 1][2]) ;\n        f[i][0] += max(f[i - 1][1], f[i - 1][0]) ;\n        if (x < 0){\n            f[i][2] = max(f[i][2], f[i][1]) ;\n            f[i][1] = max(f[i][1], f[i][0]) ;\n        }\n    }\n    cout << max(f[n][1], max(f[n][0], f[n][2])) << endl  ;\n    return 0 ;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n\nconst int MAXN=100011;\nconst long long LONF=4567891012345678910LL;\n\n\nint N;\nint A[MAXN];\nint O[MAXN];\n\nlong long F[MAXN][3];\n\nint rO(){\n\tstatic char ch[2];\n\tscanf(\"%s\", ch);\n\treturn ch[0]=='+';\n}\n\nvoid relax(long long &f, long long v){\n\tif(f<v)\tf=v;\n}\n\nint Calc(int t, int o, int a){\n\tif(t)\to=!o;\n\treturn ((o<<1)-1)*a;\n}\n\nint main(){\n\t\n\tscanf(\"%d\", &N);\n\t\n\tscanf(\"%d\", &A[1]);\n\tfor(int i=2;i<=N;++i){\n\t\tO[i]=rO();\n\t\tscanf(\"%d\", &A[i]);\n\t}\n\t\n\tfor(int i=1;i<=N;++i)\n\t\tfor(int j=0;j<=2;++j)\n\t\t\tF[i][j]=-LONF;\n\t\n\tF[1][0]=(long long)(A[1]);\n\tfor(int i=2;i<=N;++i){\n\t\tfor(int j=0;j<3;++j){\n\t\t\tfor(int k=0;k<=j;++k){\n\t\t\t\trelax(F[i][k], F[i-1][j]+Calc(k&1, O[i], A[i]));\n\t\t\t}\n\t\t\tif(j<2 && !O[i])\trelax(F[i][j+1], F[i-1][j]+Calc(j&1, O[i], A[i]));\n\t\t}\n\t}\n\t\n\tlong long Ans=0LL;\n\tfor(int j=0;j<3;++j)\n\t\trelax(Ans, F[N][j]);\n\tprintf(\"%lld\\n\", Ans);\n\t\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n//using namespace std;\n#pragma GCC target(\"avx\")\n#pragma GCC optimize(\"O3\")\n#pragma GCC optimize(\"unroll-loops\")\n#pragma GCC target(\"sse,sse2,sse3,ssse3,sse4,popcnt,abm,mmx,avx,tune=native\")\n#define rep(i,j,n) for(ll i=(ll)(j);i<(ll)(n);i++)\n#define REP(i,j,n) for(ll i=(ll)(j);i<=(ll)(n);i++)\n#define per(i,j,n) for(ll i=(ll)(j);(ll)(n)<=i;i--)\n#define ll long long\n#define ALL(a) (a).begin(),(a).end()\n#define disup(A,key) distance(A.begin(),upper_bound(ALL(A),(ll)(key)))\n#define dislow(A,key) distance(A.begin(),lower_bound(ALL(A),(ll)(key)))\n#define pb emplace_back\n#define mp std::make_pair\n//\n#define endl \"\\n\"\n//using std::endl;\nusing std::cin;\nusing std::cout;\nusing std::vector;\nusing std::string;\nusing std::upper_bound;\nusing std::lower_bound;\nusing vi=vector<ll>;\nusing vii=vector<vi>;\nusing pii=std::pair<ll,ll>;\n//\nconstexpr ll MOD=1e9+7;\n//constexpr ll MOD=998244353; \n//constexpr ll MOD=10000000;\n//constexpr ll MOD=1e4;\n//constexpr ll MOD=1e5;\nconstexpr ll MAX=3e6;\nconstexpr ll inf=(1ll<<60);\ntemplate<class T>\nclass prique :public std::priority_queue<T, std::vector<T>, std::greater<T>> {};\ntemplate<typename T>\nstruct Segment_tree{\n    ll N;\n    T mem;\n    vector<T> node;\n    Segment_tree(vector<T> &X,T m):mem(m){\n        ll sz=X.size();\n        N=1;\n        while(N<sz) N*=2;\n        node.resize(2*N-1,mem);\n        rep(i,0,sz) node[N-1+i]=X[i];\n        per(i,N-2,0){\n            node[i]=Compare(node[i*2+1],node[i*2+2]);\n        }\n    }\n    T Compare(T &A,T &B){\n        return std::max(A,B);\n    }\n    void update(ll X,T val){\n        X+=N-1;\n        node[X]=val;\n        while(X>0){\n            X=(X-1)/2;\n            node[X]=Compare(node[X*2+1],node[X*2+2]);\n        }\n    }\n    T Query(ll a,ll b,ll now,ll l,ll r){ //[a,b),[l,r)\n        if(r<0) r=N;\n        if(r<=a||b<=l) return mem;\n        if(a<=l&&r<=b) return node[now];\n        auto vl=Query(a,b,now*2+1,l,(l+r)/2),vr=Query(a,b,now*2+2,(l+r)/2,r);\n        return Compare(vl,vr);\n    }\n};\ntemplate<typename T>\nstruct lazy_Segment_tree{\n    int N;\n    vector<T> node,lazy;\n    T INF;\n    lazy_Segment_tree(vector<T> X,T Y):INF(Y){\n        N=1;\n        while(X.size()>N) N*=2;\n        node.resize(2*N-1,Y);\n        lazy.resize(2*N-1);\n        rep(i,0,X.size()) node[i+N-1]=X[i];\n        per(i,N-2,0) node[i]=compare(node[i*2+1],node[i*2+2]);\n    }\n    T compare(T X,T Y){\n        return std::max(X,Y);\n    }\n    T plus(T X,int l,int r){\n        return X;\n    }\n    void eval(int now,int l,int r){\n        if(lazy[now]==0) return;\n        node[now]+=lazy[now];\n        if(r-l>1){\n            lazy[now*2+1]+=plus(lazy[now],l,r);\n            lazy[now*2+2]+=plus(lazy[now],l,r);\n        }\n        lazy[now]=0;\n    }\n    void update(int a,int b,T add,int now=0,int l=0,int r=-1){\n        if(r<0) r=N;\n        eval(now,l,r);\n        if(b<=l||r<=a) return;\n        if(a<=l&&r<=b){\n            lazy[now]+=add;\n            eval(now,l,r);\n        }\n        else{\n            update(a,b,add,now*2+1,l,(r+l)/2);\n            update(a,b,add,now*2+2,(r+l)/2,r);\n            node[now]=compare(node[now*2+1],node[now*2+2]);\n        }\n    }\n    T Query(int a,int b,int now=0,int l=0,int r=-1){\n        if(r<0) r=N;\n        eval(now,l,r);\n        if(b<=l||r<=a) return INF;\n        if(a<=l&&r<=b) return node[now];\n        return compare(Query(a,b,now*2+1,l,(r+l)/2),Query(a,b,now*2+2,(r+l)/2,r));\n    }\n};\nstruct Tree{\n    int N;\n    vii dp;\n    vi dist;\n    Tree(vii edge){\n        N=edge.size();\n        dp.resize(N);\n        dist.resize(N,-1);\n        for(int i=0;i<N;i++) dp[i].resize(30);\n        dist[0]=dp[0][0]=0;\n        std::queue<int> que;\n        que.push(0);\n        while(!que.empty()){\n            int now=que.front(); que.pop();\n            for(int i=0;i<edge[now].size();i++){\n                int next=edge[now][i];\n                if(dist[next]==-1){\n                    dist[next]=dist[now]+1;\n                    que.push(next);\n                    dp[next][0]=now;\n                }\n            }\n        }\n        for(int i=1;i<30;i++){\n            for(int j=0;j<N;j++) dp[j][i]=dp[dp[j][i-1]][i-1];\n        }\n    }\n    int LCA(int X,int Y){\n        if(dist[X]<dist[Y]) std::swap(X,Y);\n        {\n            int Z=dist[X]-dist[Y];\n            for(int i=0;i<30;i++){\n                if(Z&(1<<i)){\n                    X=dp[X][i];\n                }\n            }\n        }\n        if(X==Y) return X;\n        for(int i=29;i>=0;i--){\n            if(dp[X][i]!=dp[Y][i]){\n                X=dp[X][i];\n                Y=dp[Y][i];\n            }\n        }\n        return dp[X][0];\n    }\n};\nstruct Binary_indexed_tree{\n    int N;\n    vi bit;\n    Binary_indexed_tree(int n):N(n){\n        bit.resize(N+1,0);\n    }\n    void add(int x,ll a){\n        for(x;x<=N;x+=(x&-x)) bit[x]+=a;\n    }\n    ll sum(int x){\n        ll ret=0;\n        for(x;x>0;x-=(x&-x)) ret+=bit[x];\n        return ret;\n    }\n    ll lower_bound(ll X){\n        if(sum(N)<X) return -1;\n        ll ret=0,memo=1,sum=0;\n        while(memo*2<=N) memo*=2;\n        while(memo>0){\n            if(memo+ret<=N&&sum+bit[memo+ret]<X){\n                sum+=bit[memo+ret];\n                ret+=memo;\n            }\n            memo/=2;\n        }\n        return ret+1;\n    }\n};\nstruct Union_Find{\n    ll N;\n    vi par;\n    vi siz;\n    Union_Find(int n):N(n){\n        par.resize(N);\n        siz.resize(N,1);\n        rep(i,0,N) par[i]=i;\n    }\n    ll root(ll X){\n        if(par[X]==X) return X;\n        return par[X]=root(par[X]);\n    }\n    bool same(ll X,ll Y){\n        return root(X)==root(Y);\n    }\n    void unite(ll X,ll Y){\n        X=root(X);\n        Y=root(Y);\n        if(X==Y) return;\n        par[X]=Y;\n        siz[Y]+=siz[X];\n        siz[X]=0;\n    }\n    ll size(ll X){\n        return siz[root(X)];\n    }\n};\nlong long modpow(long long a, long long n, long long mod) {\n    long long res = 1;\n    while (n > 0) {\n        if (n & 1) res = res * a % mod;\n        a = a * a % mod;\n        n >>= 1;\n    }\n    return res;\n}\nvi fac,finv,inv;\nvoid COMinit() {\n    fac.resize(MAX);\n    finv.resize(MAX);\n    inv.resize(MAX);\n    fac[0] = fac[1] = 1;\n    finv[0] = finv[1] = 1;\n    inv[1] = 1;\n    for (int i = 2; i < MAX; i++){\n        fac[i] = fac[i - 1] * i % MOD;\n        inv[i] = MOD - inv[MOD%i] * (MOD / i) % MOD;\n        finv[i] = finv[i - 1] * inv[i] % MOD;\n    }\n}\nll COM(ll n,ll r){\n    if(n<r||n<0||r<0) return 0;\n    return fac[n]*finv[r]%MOD*finv[n-r]%MOD;\n}\nvoid comp(vi &A){\n    std::map<ll,ll> memo;\n    rep(i,0,A.size()) memo[A[i]]=0;\n    ll cnt=1;\n    for(auto &p:memo) p.second=cnt++;\n    rep(i,0,A.size()) A[i]=memo[A[i]];\n}\nvoid dec(std::map<ll,ll> &mem,ll X){\n    mem[X]--;\n    if(mem[X]==0) mem.erase(X);\n}\nint main(){\n    std::ios::sync_with_stdio(false);\n    std::cin.tie(nullptr);\n    ll N; cin>>N;\n    vi A(N);\n    vector<char> op(N);\n    rep(i,0,N-1) cin>>A[i]>>op[i];\n    cin>>A[N-1];\n    vii dp(N,vi(3,-inf));\n    dp[0][0]=A[0];\n    rep(i,1,N){\n        if(op[i-1]=='+'){\n            dp[i][0]=std::max({dp[i-1][0],dp[i-1][1],dp[i-1][2]})+A[i];\n            dp[i][1]=dp[i-1][1]-A[i];\n            dp[i][2]=dp[i-1][2]+A[i];\n        }\n        else{\n            dp[i][0]=dp[i-1][0]-A[i];\n            dp[i][1]=std::max(dp[i-1][0]-A[i],dp[i-1][1]+A[i]);\n            dp[i][2]=std::max(dp[i-1][2]+A[i],dp[i-1][1]+A[i]);\n        }\n    }\n    ll ans=-inf;\n    rep(i,0,3) ans=std::max(ans,dp[N-1][i]);\n    cout<<ans<<endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\n#include<string>\n#include<vector>\n#include<set>\n#include<map>\n#include<queue>\nusing namespace std;\n \ntypedef long long ll;\ntypedef pair<ll,ll> P;\n \n#define pb push_back\n#define fr first\n#define sc second\n\nint main(){\n\tint N;\n\tscanf(\"%d\",&N);\n\tll sum;\n\tscanf(\"%lld\",&sum);\n\t\n\tstatic int cnt = 0;\n\tstatic vector<ll> vec[100010];\n\tfor(int i = 2 ; i <= N ; i ++){\n\t\tchar c;\n\t\tll x;\n\t\tscanf(\" %c %lld\",&c,&x);\n\t\tsum += x;\n\t\tif(c == '-')cnt ++;\n\t\tvec[cnt].pb(x);\n\t}\n\tif(cnt == 0){\n\t\tcout << sum << endl;\n\t\treturn 0;\n\t}\n\tll ret = 1000000000000000000;\n\tll S = 0;\n\tfor(int i = 1 ; i <= cnt+1 ; i ++){\n\t\tif(vec[i].size() == 0){\n\t\t\tret = min( ret , S );\n\t\t\tbreak;\n\t\t}\n\t\tll T = S;\n\t\tfor(int j = 0 ; j < vec[i].size() ; j ++){\n\t\t\tT += vec[i][j];\n\t\t}\n\t\tret = min( ret , T );\n\t\tS += vec[i][0];\n\t}\n\tcout << sum-ret*2 << endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\nconst ll INF = 1LL << 60;\nll dp[100010][3];\nchar op[100010];\nll A[100010];\n\nint main() {\n\tcin.tie(0);\n\tios::sync_with_stdio(false);\n\n\tint N;\n\tcin >> N;\n\top[0] = '+';\n\tfor(int i = 0; i < N; i++) {\n\t\tcin >> A[i];\n\t\tif(i != N - 1) cin >> op[i + 1];\n\t}\n\n\tfill((ll*)begin(dp), (ll*)end(dp), -INF);\n\tdp[0][0] = 0;\n\tfor(int i = 0; i < N; i++) {\n\t\tfor(int j = 0; j <= 2; j++) {\n\t\t\tif(dp[i][j] == -INF) continue;\n\t\t\tll d = dp[i][j];\n\t\t\tint nj = j + (op[i] == '-');\n\t\t\tnj = min(2, nj);\n\t\t\tfor(int k = 0; k <= nj; k++) {\n\t\t\t\tif(nj % 2 == 0) {\n\t\t\t\t\tdp[i + 1][k] = max(dp[i + 1][k], d + A[i]);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tdp[i + 1][k] = max(dp[i + 1][k], d - A[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tcout << dp[N][0] << endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define time Time\n#define pii pair<int,int>    \n#define x first    \n#define y second \n#define N 10000005   \n#define pb(x) push_back(x)\n#define mp(x,y) make_pair((x),(y))    \n#define sqr(x) ((x)*(x))\ntypedef long long LL;  \nusing namespace std;\nconst int mod=1e9+7;\nint main(){\n\tint n;\n\twhile(scanf(\"%d\",&n)!=EOF){\n\t\tlong long \tint a[100005];\n\t\tint op[100005];\n\t\top[0]=1;\n\t\tscanf(\"%lld\",&a[0]);\n\t\tfor(int i=1;i<n;i++){\n\t\t\tchar c;\n\t\t\twhile(scanf(\"%c\",&c)&&c!='+'&&c!='-');\n\t\t\tif(c=='+')\n\t\t\top[i]=1;\n\t\t\telse\n\t\t\top[i]=0;\n\t\t\tscanf(\"%lld\",&a[i]);\n\t\t} \n\t\tlong long int sum=0;\n\t\tfor(int i=0;i<n;i++){\n\t\t\tsum+=a[i];\n\t\t}\n\t\tlong long int ans=1e18;\n\t\tint i;\n\t\tfor(i=0;op[i]==1;i++);\n\t\tint last=i;\n\t\tlong long int ssum=0,sssum=a[i];\n\t\tfor(;i<n;i++)\n\t\t{\n\t\t\tssum+=a[i];\n\t\t\tif(op[i+1]==0||i+1==n)\n\t\t\tans=min(ssum+sssum-a[last],ans),ssum=0,sssum+=a[i],last=i;\n\t\t}\n\t\tprintf(\"%lld\\n\",sum-2*ans);\n\t}\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\ntypedef int int_t;\n#define int long long\n\nconst int maxn=1e5+5,INF=1e15;\nint F[maxn][4],A[maxn],N,op[maxn];\n\nint_t main(){\n\tscanf(\"%lld\",&N);\n\tfor(int i=1;i<=N;i++){\n\t\tint bj=1,x;\n\t\tif(i>1){\n\t\t\tchar buf[10];scanf(\"%s\",buf);\n\t\t\tbj = buf[0] == '+'? +1 : -1 ;\n\t\t}\n\t\tscanf(\"%lld\", &x);\n\t\tA[i]=bj*x;\n\t\top[i]=bj;\n\t}\n\tF[0][1]=-INF;F[0][2]=-INF;\n\tfor(int i=1;i<=N;i++){\n\t\tF[i][0]=F[i-1][0]+A[i];\n\t\tF[i][1]=F[i-1][1]-A[i];\n\t\tF[i][2]=F[i-1][2]+A[i];\n\t\tif(op[i]<0){\n\t\t\tF[i][1]=max(F[i][1],F[i-1][0]+A[i]);\n\t\t\tF[i][2]=max(F[i][2],F[i-1][1]-A[i]);\n\t\t}\n\t\tF[i][0]=max(F[i][0],F[i-1][1]+A[i]);\n\t\tF[i][0]=max(F[i][0],F[i-1][2]+A[i]);\n\t\tF[i][1]=max(F[i][1],F[i-1][2]-A[i]);\n\t}\n\tcout<<max({F[N][0],F[N][1],F[N][2]})<<'\\n';\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define N 100005\n#define LL long long\nusing namespace std;\n\nLL read(){\n\tchar c=getchar();\n\tLL t=0,f=1;\n\twhile(c>'9'||c<'0') f=(c=='-')?-1:1,c=getchar();\n\twhile(c>='0'&&c<='9') t=t*10+c-'0',c=getchar();\n\treturn t*f;\n}\n\nint n,op[N],st;\nLL sum[N],absum[N]; \nchar ch[2];\n\nint main(){\n\tn=read(),sum[1]=absum[1]=read(),st=op[1]=1;\n\tfor(int i=2,x;i<=n;i++){\n\t\tscanf(\"%s\",ch),op[i]=(ch[0]=='-')?-1:1;\n\t\tx=read(),sum[i]=sum[i-1]+x*op[i],absum[i]=absum[i-1]+x;\n\t}\n\tLL ans=sum[n];\n\twhile(op[st]>0) st++;\n\tfor(int i=st,j=st+1;i<=n;i=j,j++){\n\t\tif(op[i]>0) continue;\n\t\tLL tmp=sum[i-1];\n\t\twhile(op[j]>0&&j<=n) j++;\n\t\ttmp+=(absum[n]-absum[j-1])-(absum[j-1]-absum[i-1]);\n\t\tans=max(ans,tmp);\n\t}\n\tprintf(\"%lld\\n\",ans);\n}\n/*\n3\n5 - 1 - 3\n5\n1 - 20 - 13 + 14 - 5\n6\n3 - 5 + 1 + 6 - 11 - 13\n*/"
  },
  {
    "language": "C++",
    "code": "#include <stdio.h>\n#include <stdlib.h>\n#include <string.h>\n#include <memory.h>\n#include <math.h>\n#include <assert.h>\n#include <queue>\n#include <map>\n#include <set>\n#include <string>\n#include <algorithm>\n#include <iostream>\n#include <functional>\n\nusing namespace std;\ntypedef long long ll;\ntypedef pair<int,int> Pi;\n#define Fi first\n#define Se second\n#define pb(x) push_back(x)\n#define sz(x) (int)x.size()\n#define rep(i, n) for(int i=0;i<n;i++)\n#define all(x) x.begin(), x.end()\n\nint n;\nint A[100010];\nchar op[100010];\n\nvoid solve(){\n\tscanf(\"%d\", &n);\n\tfor(int i=1;i<=n;i++){\n\t\tscanf(\"%d\", A+i);\n\t\tif(i != n)scanf(\" %c\", op+i);\n\t}\n\tint pre = -1;\n\tll mx = 0, mn = 0;\n\tfor(int i=n-1;i;i--){\n\t\tif(op[i] == '-'){\n\t\t\tif(pre == -1){\n\t\t\t\tmx = -A[i+1];\n\t\t\t\tmn = -A[i+1];\n\t\t\t\tfor(int j=i+2;j<=n;j++)mx += A[j], mn -= A[j];\n\t\t\t}\n\t\t\telse{\n\t\t\t\tll sum = 0;\n\t\t\t\tfor(int j=i+2;j<=pre;j++)sum += A[j];\n\t\t\t\tll nmx = max(-A[i+1] + sum + mx, -A[i+1] - sum - mn);\n\t\t\t\tll nmn = min(-A[i+1] - sum + mn, -A[i+1] - sum - mx);\n\t\t\t\tmx = nmx; mn = nmn;\n\t\t\t}\n\t\t\tpre = i;\n\t\t}\n\t}\n\tmx += A[1];\n\tfor(int i=1;i<n;i++){\n\t\tif(op[i] == '-')break;\n\t\tmx += A[i+1];\n\t}\n\tprintf(\"%lld\\n\", mx);\n}\n\nint main(){\n\tint Tc = 1; //scanf(\"%d\\n\", &Tc);\n\tfor(int tc=1;tc<=Tc;tc++){\n\t\tsolve();\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "//### In The Name Of GOD ###\n\n//%% Remember; (((He))) is The (((Accepter))) %%\n\n// GOD IS GREATER ...\n\n#include <bits/stdc++.h>\n\nusing namespace std;\n\ntypedef long long ll ;\ntypedef long double ld ;\n\n#define int ll\n#define pb push_back\n#define bp pop_back\n#define pf push_front\n#define fp pop_front\n#define X first\n#define Y second\n#define IO ios_base::sync_with_stdio(false);\n#define sz(a) (int)(a.size())\n#define sg(a, b) (a + b - 1) / b\n\nconst int MOD = 1000 * 1000 * 1000 + 7;\nconst int INF = 8 * 1000 * 1000 + 200;\nconst int MAXN =  100 * 1000 + 1;\nconst int MLOG = 18;\nconst int NMAX = 20;\n\nvector<int> prime;\n\nint is_p(int a){\n\tfor(int i : prime)\n\t\tif(a % i == 0) return false;\n\treturn true;\n}\n\nsigned main(){\n\tIO;\n\tint dp[MAXN][3]; // dp[i][b] mishavad marhaleye i om ba b ta parntez baz\n\tint n;\n\tcin >> n >> dp[0][0];\n\tdp[0][2] = dp[0][1] = - INF * INF;\n\tfor(int i = 1; i < n; i++){\n\t\tchar op;\n\t\tint a;\n\t\tcin >> op >> a;\n\t\tif(op == '-'){\n\t\t\tdp[i][1] = max(dp[i - 1][0], dp[i - 1][1]) - a;\n\t\t\tdp[i][2] = max(dp[i - 1][2], dp[i - 1][1]) + a;\n\t\t\tdp[i][0] = max({dp[i - 1][0] - a, dp[i][1], dp[i][2]});\n\t\t\t//cout << '-';\n\t\t}else{\n\t\t\tdp[i][0] = max({dp[i - 1][0], dp[i - 1][1], dp[i - 1][2]}) + a;\n\t\t\tdp[i][1] = dp[i - 1][1] - a;\n\t\t\tdp[i][2] = dp[i - 1][2] + a;\n\t\t\t//cout << '+';\n\t\t}\n\t\t//cout << dp[i][0] << ' ' << dp[i][1] << ' ' << dp[i][2] << endl;\n\t}\n\tcout << dp[n - 1][0];\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\nusing ll = long long;\n#define int ll\nusing PII = pair<int, int>;\ntemplate <typename T> using V = vector<T>;\ntemplate <typename T> using VV = vector<V<T>>;\ntemplate <typename T> using VVV = vector<VV<T>>;\n\n#define FOR(i, a, n) for (ll i = (ll)a; i < (ll)n; ++i)\n#define REP(i, n) FOR(i, 0, n)\n#define ALL(x) x.begin(), x.end()\n#define PB push_back\n\nconst ll INF = (1LL<<60);\nconst int MOD = 1000000007;\n\ntemplate <typename T> T &chmin(T &a, const T &b) { return a = min(a, b); }\ntemplate <typename T> T &chmax(T &a, const T &b) { return a = max(a, b); }\ntemplate <typename T> bool IN(T a, T b, T x) { return a<=x&&x<b; }\ntemplate<typename T> T ceil(T a, T b) { return a/b + !!(a%b); }\ntemplate<class S,class T>\nostream &operator <<(ostream& out,const pair<S,T>& a){\n  out<<'('<<a.first<<','<<a.second<<')';\n  return out;\n}\ntemplate<class T>\nostream &operator <<(ostream& out,const vector<T>& a){\n  out<<'[';\n  REP(i, a.size()) {out<<a[i];if(i!=a.size()-1)out<<',';}\n  out<<']';\n  return out;\n}\n\nint dx[] = {0, 1, 0, -1}, dy[] = {1, 0, -1, 0};\n\nsigned main(void)\n{\n  cin.tie(0);\n  ios::sync_with_stdio(false);\n\n  int n;\n  cin >> n;\n  V<int> a(n);\n  V<char> op(n);\n  op[0] = '+'; cin >> a[0];\n  FOR(i, 1, n) cin >> op[i] >> a[i];\n\n  V<int> b(n); b[0] = a[0];\n  FOR(i, 1, n) b[i] = b[i-1] + a[i];\n\n  V<int> v;\n  REP(i, n) if(op[i] == '-') v.PB(i);\n  V<int> nxt(n);\n  REP(i, (int)v.size()-1) nxt[v[i]] = v[i+1];\n  nxt[v.back()] = n;\n\n  int now = 0;\n  REP(i, n) {\n    if(op[i]=='+') now += a[i];\n    else now -= a[i];\n  }\n\n  int ret = now; now = 0;\n  REP(i, n) {\n    if(op[i]=='+') {\n      now += a[i];\n    } else {\n      chmax(ret, now - (b[nxt[i]-1]-b[i-1]) + (b[n-1]-b[nxt[i]-1]));\n      now -= a[i];\n    }\n  }\n\n  cout << ret << endl;\n\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <string>\n#include <vector>\n#include <sstream>\n#include <iostream>\n#include <algorithm>\n#include <map>\n#include <list>\n#include <set>\n#include <numeric>\n#include <queue>\n#include <stack>\n#include <cstdio>\n#include <cmath>\n#include <cstdlib>\n#include <cctype>\n#include <cstring>\n#include <climits>\n#include <cfloat>\n#include <ctime>\n#include <complex>\n#include <cassert>\n#include <array>\n#include <bitset> \n#include <unordered_map>\n#include <random>\n\nusing namespace std;\ntypedef long long LL;\ntypedef pair<int,int> P;\n\nconst int L=1e5;\nLL as[L];\nchar op[L];\nLL sum[L];\nint main() {\n\tint N;\n\tscanf(\"%d\",&N);\n\top[0]='+';\n\tscanf(\"%lld\",as);\n\t//cerr << as[0] << endl;\n\tfor(int i=1;i<N;i++){\n\t\tchar str[2];\n\t\tscanf(\"%s%lld\",str,as+i);\n\t\top[i]=str[0];\n\t\t//cerr << op[i] << \" \" << as[i] << endl;\n\t}\n\tsum[0]=as[0];\n\tfor(int i=1;i<N;i++){\n\t\tif(op[i]=='-'){\n\t\t\tsum[i]=sum[i-1]-as[i];\n\t\t}\n\t\telse{\n\t\t\tsum[i]=sum[i-1]+as[i];\n\t\t}\n\t\t//cerr << i << \", \" << sum[i] << endl;\n\t}\n\tLL s=0;\n\tLL m=0;\n\tLL ret=sum[N-1];\n\tfor(int i=N-1;i>0;i--){\n\t\ts+=abs(as[i]);\n\t\tif(op[i]=='-'){\n\t\t\tret=max(ret,sum[i-1]+m-(s-m));\n\t\t\tm=s;\n\t\t}\n\t\t//cerr << i << \": \" << sum[i] << \", \" << m << \", \" << s << endl;\n\t}\n\tprintf(\"%lld\\n\",ret);\n\t\n\n\treturn 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "/**\n * code generated by JHelper\n * More info: https://github.com/AlexeyDmitriev/JHelper\n * @author Majk\n */\n\n#include <vector>\n#include <iostream>\n#include <unordered_map>\n#include <map>\n#include <iomanip>\n#include <functional>\n#include <algorithm>\n#include <cassert>\n#include <cmath>\n#include <string>\n#include <sstream>\n#include <queue>\nusing namespace std;\n\n#define x first\n#define y second\nconstexpr int MOD = 1000000007;\n\ntypedef std::pair<int,int> pii;\ntypedef long long ll;\n\ntemplate<typename T>std::istream&operator>>(std::istream&i,vector<T>&t) {for(auto&v:t){i>>v;}return i;}\ntemplate<typename T>std::ostream&operator<<(std::ostream&o,const vector<T>&t) {for(size_t i=0;i<t.size();++i){o<<t[i]<<\" \\n\"[i == t.size()-1];}return o;}\n\nnamespace std {\n    template<typename T,typename U>struct hash<pair<T,U>>{hash<T>t;hash<U>u;size_t operator()(const pair<T,U>&p)const{return t(p.x)^(u(p.y)<<7);}};\n}\ntemplate<typename T,typename F>T bsh(T l,T h,const F&f){T r=-1,m;while(l<=h){m=(l+h)/2;if(f(m)){l=m+1;r=m;}else{h=m-1;}}return r;}\ntemplate<typename T,typename F>T bsl(T l,T h,const F&f){T r=-1,m;while(l<=h){m=(l+h)/2;if(f(m)){h=m-1;r=m;}else{l=m+1;}}return r;}\ntemplate<typename T> T gcd(T a,T b) { if (a<b) swap(a,b); return b?gcd(b,a%b):a; }\n\n// #include \"../l/mod.h\"\n\nclass C {\npublic:\n\tvoid solve(istream& cin, ostream& cout) {\n\t\tint N; cin >> N;\n\t\tint B; cin >> B;\n\t\tll A[3] = {B, -1000000000000000LL, -1000000000000000LL};\n\t\tfor (int i = 0; i < N-1; ++i) {\n\t\t\tchar c; cin >> c;\n\t\t\tcin >> B;\n\n\t\t\tif (c == '+') {\n\t\t\t\tA[0] = max(A[0], A[1]) + B;\n\t\t\t\tA[1] = A[1] - B;\n\t\t\t\tA[2] = A[2] + B;\n\t\t\t} else {\n\t\t\t\tA[2] = max(A[1], A[2]) + B;\n\t\t\t\tA[1] = max(A[1], A[0]) - B;\n\t\t\t\tA[0] = A[0] - B;\n\t\t\t}\n\t\t}\n\n\t\tcout << max(A[0], max(A[1], A[2])) << endl;\n\t}\n};\n\n\nint main() {\n\tios_base::sync_with_stdio(false);\n\tC solver;\n\tstd::istream& in(std::cin);\n\tstd::ostream& out(std::cout);\n\tsolver.solve(in, out);\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#include <ext/pb_ds/assoc_container.hpp> // Common file\n#include <ext/pb_ds/tree_policy.hpp> // Including tree_order_statistics_node_update\n#define int         int64_t\n#define ii          pair<int,int>\n#define dd          pair<double,double>\n#define vi          vector<int>\n#define pb          push_back\n#define all(x)      (x).begin(), (x).end()\n#define checkBit(v, p)      (v&(1LL << p))\n#define loop(i,a,b) for(int i = a;i < int(b);i++)\n#define x           first\n#define y           second\nusing namespace std;\nint inf = 4e18;\nint32_t main()\n{\n    ios_base::sync_with_stdio(false); cout << fixed <<setprecision(0);\n    int n; cin >> n;\n    int res = 0;\n    vi arr(n), arr2, ps(n), ps2;\n    arr2.pb(0);\n    vector<char> si(n);\n    si[0] = '+';\n    for(int i=0;i<n;i++){\n        if(i) cin >> si[i];\n        cin >> arr[i];\n        if(i) ps[i] = ps[i-1] + arr[i] * (si[i] == '+' ? 1 : -1);\n        else ps[0] = arr[0];\n        if(si[i] == '+') arr2.back() += arr[i];\n        else arr2.pb(arr[i]);\n    }\n    ps2.pb(arr2[0]);\n    for(int i=1;i<arr2.size();i++) ps2.pb(ps2.back() + arr2[i]);\n    res = ps.back();\n    for(int i=1, ind = 0;i<n;i++){\n        if(si[i] == '-'){\n            ++ind;\n            res = max(res, ps[i-1] - arr2[ind] + ps2.back() - ps2[ind]);\n        }\n    }\n    cout << res<<endl;\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\nint a[100002];\nlong long dp[100002][3];\nchar s[2];\nint main(){\n    int n;\n    scanf(\"%d\", &n);\n    scanf(\"%d\", &a[1]);\n\n    for(int i=1;i<=n;i++) dp[i][0] = dp[i][1] = dp[i][2] = -1e18;\n    dp[1][0] = a[1];\n\n    for(int i=2;i<=n;i++){\n        scanf(\"%s\", s);\n        scanf(\"%d\", &a[i]);\n        if(s[0] == '-'){\n            dp[i][0] = max(dp[i-1][0] - a[i], dp[i-1][1] + a[i]);\n            dp[i][1] = max(dp[i-1][0] - a[i], max(dp[i-1][1] + a[i], dp[i-1][2] - a[i]));\n            dp[i][2] = max(dp[i-1][2] - a[i], dp[i-1][1] + a[i]);\n        }\n        else{\n            dp[i][0] = max(dp[i-1][0] + a[i], dp[i-1][1] + a[i]);\n            dp[i][1] = max(dp[i-1][1] - a[i], dp[i-1][2] + a[i]);\n            dp[i][2] = dp[i-1][2] + a[i];\n        }\n        dp[i][0] = max(dp[i][0], -(long long)1e18);\n        dp[i][1] = max(dp[i][1], -(long long)1e18);\n        dp[i][2] = max(dp[i][2], -(long long)1e18);\n    }   \n    printf(\"%lld\\n\", max(max(dp[n][0], dp[n][1]), dp[n][2]));\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <iostream>\n#include <algorithm>\n\nusing namespace std;\n\nconst int maxn = 3005;\nconst int inf = 0x3f3f3f3f;\n\nint op[maxn];\nint a[maxn];\nint qzhh[maxn];\nint yuan[maxn];\nint lstt[maxn];\nchar s[3];\nint n;\n\nint main()\n{\n\tscanf(\"%d\", &n);\n\tscanf(\"%d\", &a[1]);\n\tqzhh[1] = yuan[1] = a[1];\n\top[1] = 1;\n\tint ans = 0;\n\tfor(int i = 2; i <= n; ++i)\n\t{\n\t\tscanf(\"%s%d\", s, &a[i]);\n\t\top[i] = (s[0] == '+');\n\t\tqzhh[i] = qzhh[i - 1] + a[i];\n\t\tyuan[i] = yuan[i - 1] + (op[i] ? a[i] : -a[i]);\n\t}\n\top[n + 1] = op[n + 2] = 0;\n\tqzhh[n + 1] = qzhh[n + 2] = qzhh[n];\n\tyuan[n + 1] = yuan[n + 2] = yuan[n];\n\tn += 2;\n\tint lst = n + 1;\n\tfor(int i = n; i; --i)\n\t{\n\t\tif(!op[i])\n\t\t{\n\t\t\tlstt[i] = lst;\n\t\t\tlst = i;\n\t\t}\n\t}\n//\tcout << \"qzhh = \";\n//\tfor(int i = 1; i <= n; ++i)\n//\t\tcout << qzhh[i] << ' ';\n//\tcout << endl;\n//\tcout << \"yuan = \";\n//\tfor(int i = 1; i <= n; ++i)\n//\t\tcout << yuan[i] << ' ';\n//\tcout << endl;\n//\tcout << \"lstt = \";\n//\tfor(int i = 1; i <= n; ++i)\n//\t\tcout << lstt[i] << ' ';\n//\tcout << endl;\n\tfor(int i = lst; lstt[i] <= n; i = lstt[i])\n\t{\n\t\tint l = i, r = lstt[i];\n\t\tans = max(ans, yuan[l - 1] - (qzhh[r - 1] - qzhh[l - 1]) + qzhh[n] - qzhh[r - 1]);\n//\t\tcout << l << ' ' << r << ' ' << ans << endl;\n\t}\n\tprintf(\"%d\\n\", ans);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nconst int N = 1e6 + 50;\ntypedef long long ll;\nint n, top;\nll S[N], sum[N];\n\ninline char nc()\n{\n\tstatic char buf[1000000], *p1 = buf, *p2 = buf;\n\treturn p1 == p2 && (p2 = (p1 = buf) + fread(buf, 1, 1000000, stdin), p1 == p2) ? EOF : *p1++;\n}\n\ninline int read()\n{\n\tint res = 0;\n\tchar ch;\n\tdo ch = nc(); while (ch < 48 || ch > 57);\n\tdo res = res * 10 + ch - 48, ch = nc(); while (ch >= 48 && ch <= 57);\n\treturn res;\n}\n\ninline int read_operation()\n{\n\tchar ch;\n\tdo ch = nc(); while (ch != '+' and ch != '-');\n\treturn ch == '+';\n}\n\nint main()\n{\n\tn = read();\n\tS[0] = sum[0] = read(); top = 0;\n\tfor (int i = 1; i < n; ++i)\n\t{\n\t\tint p = read_operation(); ll t = read();\n\t\tif (p == 1) sum[top] += t, S[top] += t; \n\t\telse \n\t\t{\n\t\t\t++top;\n\t\t\tS[top] = S[top - 1] + t;\n\t\t\tsum[top] = sum[top - 1] - t;\n\t\t}\n\t}\n\tll ans = -1e18;\n\tfor (int i = 0; i < top; ++i) ans = std::max(ans, sum[i] - (S[i + 1] - S[i]) + (S[top] - S[i + 1]));\n\tprintf(\"%lld\", ans);\n}\n"
  },
  {
    "language": "C++",
    "code": "#define  _CRT_SECURE_NO_WARNINGS\n#include <stdio.h>\n#include <algorithm>\n#include <utility>\n#include <functional>\n#include <cstring>\n#include <queue>\n#include <stack>\n#include <math.h>\n#include <iterator>\n#include <vector>\n#include <string>\n#include <set>\n#include <math.h>\n#include <iostream>\n#include <random>\n#include<map>\n#include <iomanip>\n#include <time.h>\n#include <stdlib.h>\n#include <list>\n#include <typeinfo>\n#include <list>\n#include <set>\n#include <cassert>\n#include<fstream>\n#include <unordered_map>\n#include <cstdlib>\n#include <complex>\nusing namespace std;\n#define Ma_PI 3.141592653589793\n#define eps 0.00000001\n#define LONG_INF 3e18\n#define GOLD 1.61803398874989484820458\n#define MAX_MOD 1000000007\n#define MOD 998244353\n#define REP(i,n) for(long long i = 0;i < n;++i)    \n#define seg_size 524288\ndouble dot(complex<double> a, complex<double> b) {\n\treturn a.real() * b.real() + a.imag() * b.imag();\n}\ndouble gyaku_dot(complex<double> a, complex<double> b) {\n\treturn a.real() * b.imag() - a.imag() * b.real();\n}\ndouble leng(complex<double> a) {\n\treturn sqrt(a.real() * a.real() + a.imag() * a.imag());\n}\ndouble angles(complex<double> a, complex<double> b) {\n\tdouble cosine = dot(a, b) / (leng(a) * leng(b));\n\tdouble sine = gyaku_dot(a, b) / (leng(a) * leng(b));\n\tdouble kaku = acos(cosine);\n\tif (sine <= 0) {\n\t\tkaku = 2 * Ma_PI - kaku;\n\t}\n\treturn kaku;\n}\nvector<int> convex_hull(vector<complex<double>> a) {\n\tvector<int> ans;\n\tdouble now_minnest = a[0].real();\n\tint now_itr = 0;\n\tREP(i, a.size()) {\n\t\tif (now_minnest > a[i].real()) {\n\t\t\tnow_minnest = a[i].real();\n\t\t\tnow_itr = i;\n\t\t}\n\t}\n\tans.push_back(now_itr);\n\tcomplex<double> ba(0, 1);\n\twhile (true) {\n\t\tint now_go = 0;\n\t\tdouble now_min = 0;\n\t\tint starter = ans[ans.size() - 1];\n\t\tfor (int i = 0; i < a.size(); ++i) {\n\t\t\tif (i != starter) {\n\t\t\t\tdouble goa = angles(ba, a[i] - a[starter]);\n\t\t\t\tif (goa > now_min) {\n\t\t\t\t\tnow_min = goa;\n\t\t\t\t\tnow_go = i;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (now_go == ans[0]) break;\n\t\tans.push_back(now_go);\n\t\tba = complex<double>(a[now_go] - a[starter]);\n\t}\n\treturn ans;\n}\nlong long gcd(long long a, long long b) {\n\tif (b == 0) return a;\n\treturn gcd(b, a % b);\n}\nlong long dp[200000][3] = {};\nint main(){\n#define int long long\n\tint n;\n\tcin >> n;\n\tvector<int> inputs;\n\tint a;\n\tcin >> a;\n\tinputs.push_back(a);\n\tREP(i, n - 1) {\n\t\tint a;\n\t\tstring b;\n\t\tcin >> b >> a;\n\t\tif (b == \"+\") {\n\t\t\tinputs.push_back(a);\n\t\t}\n\t\telse {\n\t\t\tinputs.push_back(-a);\n\t\t}\n\t}\n\tREP(i, 200000) {\n\t\tREP(q, 3) {\n\t\t\tdp[i][q] = -LONG_INF;\n\t\t}\n\t}\n\tdp[0][0] = 0;\n\tfor (int i = 0; i < inputs.size(); ++i) {\n\t\tfor (int q = 0; q < 3; ++q) {\n\t\t\tif (inputs[i] < 0) {\n\t\t\t\tif (q == 0) {\n\t\t\t\t\tdp[i + 1][1] = max(dp[i + 1][1], dp[i][q] + inputs[i]);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tdp[i + 1][1] = max(dp[i + 1][1], dp[i][q] + inputs[i]);\n\t\t\t\t\tdp[i + 1][2] = max(dp[i + 1][2], dp[i][q] - inputs[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfor (int j = 0; j <= q; ++j) {\n\t\t\t\t\tint geko = 1;\n\t\t\t\t\tREP(t, j) {\n\t\t\t\t\t\tgeko *= -1;\n\t\t\t\t\t}\n\t\t\t\t\tdp[i + 1][j] = max(dp[i + 1][j], dp[i][q] + geko * inputs[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tlong long ans = max({ dp[n][0],dp[n][1],dp[n][2] });\n\tcout << ans << endl;\n}"
  },
  {
    "language": "C++",
    "code": "// g++ -std=c++11 a.cpp\n#include<iostream>\n#include<vector>\n#include<string>\n#include<algorithm>\t\n#include<map>\n#include<set>\n#include<unordered_map>\n#include<utility>\n#include<cmath>\n#include<random>\n#include<cstring>\n#include<queue>\n#include<stack>\n#include<bitset>\n#include<cstdio>\n#include<sstream>\n#include<iomanip>\n#include<assert.h>\n#include<typeinfo>\n#define loop(i,a,b) for(int i=a;i<b;i++) \n#define rep(i,a) loop(i,0,a)\n#define FOR(i,a) for(auto i:a)\n#define pb push_back\n#define all(in) in.begin(),in.end()\n#define shosu(x) fixed<<setprecision(x)\nusing namespace std;\n//kaewasuretyuui\ntypedef long long ll;\n//#define int ll\ntypedef ll Def;\ntypedef pair<Def,Def> pii;\ntypedef vector<Def> vi;\ntypedef vector<vi> vvi;\ntypedef vector<pii> vp;\ntypedef vector<vp> vvp;\ntypedef vector<string> vs;\ntypedef vector<double> vd;\ntypedef vector<vd> vvd;\ntypedef pair<Def,pii> pip;\ntypedef vector<pip>vip;\n#define mt make_tuple\ntypedef tuple<int,int,int> tp;\ntypedef vector<tp> vt;\ntemplate<typename A,typename B>bool cmin(A &a,const B &b){return a>b?(a=b,true):false;}\ntemplate<typename A,typename B>bool cmax(A &a,const B &b){return a<b?(a=b,true):false;}\n//template<class C>constexpr int size(const C &c){return (int)c.size();}\n//template<class T,size_t N> constexpr int size(const T (&xs)[N])noexcept{return (int)N;}\nconst double PI=acos(-1);\nconst double EPS=1e-9;\nDef inf = sizeof(Def) == sizeof(long long) ? 2e18 : 1e9+10;\nint dx[]={0,1,0,-1};\nint dy[]={1,0,-1,0};\nint main(){\n\tint n;\n\tcin>>n;\n\tvvi in(n,vi(2));\n\trep(i,n){\n\t\tif(i){\n\t\t\tchar c;cin>>c;\n\t\t\tin[i][1]=c=='-';\n\t\t}\n\t\tcin>>in[i][0];\n\t}\n\tvvi dp(n+1,vi(3,-inf));\n\tdp[0][0]=0;\n\trep(i,n)rep(j,3)if(dp[i][j]!=-inf){\n\t\tint s=in[i][0];\n\t\tif(in[i][1])s*=-1;\n\t\tif(j==1)s*=-1;\n\t\tdp[i+1][j]=max(dp[i+1][j],dp[i][j]+s);\n\t\tif(j<2&&in[i][1])dp[i+1][j+1]=max(dp[i+1][j],dp[i][j]+s);\n\t\tif(j)dp[i+1][j-1]=max(dp[i+1][j],dp[i][j]+s);\n\t\tif(j>1)dp[i+1][j-2]=max(dp[i+1][j],dp[i][j]+s);\n\t}\n\t\n\tcout<<dp[n][0]<<endl;\n}\n\n\n\n\n\n\n"
  },
  {
    "language": "C++",
    "code": "#pragma comment(linker, \"/STACK:32000000\")\n#include <bits/stdc++.h>\n#define REP(i, n) for (int i = 0, _= (n); i < _; ++i)\n#define DWN(i, n) for (int i = (n) - 1; i >= 0; --i)\n#define FOR(i, l, r) for (int i = (l), _ = (r); i < _; ++i)\n#define EDGE(u, v, e) for (int e = head[u], v; e != nil && (v = to[e], true); e = next[e])\n\nusing namespace std;\n\ntypedef unsigned int uint;\ntypedef long long int64;\ntypedef unsigned long long uint64;\ntypedef complex<double> comp;\n\ninline bool read(int& val)    { return scanf(\"%d\",    &val) != -1;}\ninline bool read(int64& val)  { return scanf(\"%I64d\", &val) != -1;}\ninline bool read(double& val) { return scanf(\"%lf\",   &val) != -1;}\ninline bool read(char* val)   { return scanf(\"%s\",     val) != -1;}\ntemplate<class T1, class T2>\ninline bool read(T1& a, T2& b)\n{ return read(a) && read(b); }\ntemplate<class T1, class T2, class T3>\ninline bool read(T1& a, T2& b, T3& c)\n{ return read(a) && read(b) && read(c); }\ntemplate<class T1, class T2, class T3, class T4>\ninline bool read(T1& a, T2& b, T3& c, T4& d)\n{ return read(a) && read(b) && read(c) && read(d); }\ntemplate<class T1, class T2, class T3, class T4, class T5>\ninline bool read(T1& a, T2& b, T3& c, T4& d, T5& e)\n{ return read(a) && read(b) && read(c) && read(d) && read(e); }\n\nconst int nil = -1;\nconst int N = 211111;\n\nlong long val[N];\nchar op[N][3];\n\nint main() {\n//\tfreopen(\"test.txt\", \"r\", stdin);\n\tint n; read(n);\n\tcin >> val[0];\n\tFOR (i, 1, n) cin >> op[i] >> val[i] ;\n\tlong long sum = val[0];\n\tFOR (i, 1, n) {\n\t\tif (op[i][0] == '+') sum += val[i];\n\t\tif (op[i][0] == '-') sum -= val[i];\n\t}\n\n\tlong long plus = 0, cost = 0;\n\tlong long ans = sum;\n\tfor (int i = n - 1; i > 0; i--) {\n\t\tif (op[i][0] == '+') cost += 2 * val[i];\n\t\tif (op[i][0] == '-') {\n\t\t\tans = max(ans, sum + plus - cost);\n\t\t\tplus += 2 * val[i];\n\t\t\tcost = 0;\n\t\t}\n\t}\n\tcout << ans << endl;\n\treturn 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "/********************************************************************************\n\t\n\tCode by a weak man named CYJian, and he hopes the code can get more points.\n\n\tAlgorithm: \n\n ********************************************************************************/\n\n#include <bits/stdc++.h>\n\nusing namespace std;\n\ntypedef long long ll;\n\n//{{{ FAST IO AND SOME FUNCTIONS\nconst int __SIZE = 1 << 18;\nchar ibuf[__SIZE], *iS, *iT;\n\n#define ge (iS == iT ? (iT = (iS = ibuf) + fread(ibuf, 1, __SIZE, stdin), (iS == iT ? EOF : *iS++)) : *iS++)\n#define ri read_int()\n#define rl read_ll()\n#define FILE(s) freopen(s\"in\", \"r\", stdin), freopen(s\"out\", \"w\", stdout)\n\ntemplate<typename T>\ninline void read(T &x) {\n\tchar ch, t = 0; x = 0;\n\twhile(!isdigit(ch = ge)) t |= ch == '-';\n\twhile(isdigit(ch)) x = x * 10 + (ch ^ 48), ch = ge;\n\tx = t ? -x : x;\n}\ninline int read_int() { int x; return read(x), x; }\ninline ll read_ll() { ll x; return read(x), x; }\n\ntemplate<typename T> inline void chkmin(T&a, T b) { a = a < b ? a : b; }\ntemplate<typename T> inline void chkmax(T&a, T b) { a = a > b ? a : b; }\n//}}}\n\nconst int MAXN = 100010;\n\nint a[MAXN];\nint op[MAXN];\nll suf[MAXN];\nll pre[MAXN];\n\nint main() {\n#ifdef LOCAL\n\tFILE(\"\");\n#endif\n\n\tint n = ri - 1;\n\tpre[0] = a[0] = ri;\n\tfor(int i = 1; i <= n; i++) {\n\t\tchar opt = ge;\n\t\twhile(opt != '-' && opt != '+') opt = ge;\n\t\top[i] = opt == '-' ? -1 : 1;\n\t\ta[i] = ri, pre[i] = pre[i - 1] + (opt == '-' ? -a[i] : a[i]);\n\t}\n\n\tfor(int i = n; i >= 1; i--) suf[i] = suf[i + 1] + a[i];\n\n\tll res = pre[n];\n\tint las = n + 1;\n\tfor(int i = n; i >= 1; i--)\n\t\tif(op[i] == -1) {\n\t\t\tchkmax(res, pre[i - 1] + suf[las] * 2 - suf[i]);\n\t\t\tlas = i;\n\t\t}\n\tcout << res << endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "// Copyright (C) 2017 __debug.\n\n// This program is free software; you can redistribute it and/or\n// modify it under the terms of the GNU General Public License as\n// published by the Free Software Foundation; version 3\n\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n\n// You should have received a copy of the GNU General Public License\n// along with this program; If not, see <http://www.gnu.org/licenses/>.\n\n\n#include <bits/stdc++.h>\n#include <ext/pb_ds/assoc_container.hpp>\n#include <ext/pb_ds/priority_queue.hpp>\n\n#define x first\n#define y second\n#define MP std::make_pair\n#define SZ(x) ((int)(x).size())\n#define ALL(x) (x).begin(), (x).end()\n#define DEBUG(...) fprintf(stderr, __VA_ARGS__)\n#ifdef __linux__\n#define getchar getchar_unlocked\n#define putchar putchar_unlocked\n#endif\n\nusing std::pair;\nusing std::vector;\nusing std::string;\n\ntypedef long long LL;\ntypedef pair<int, int> Pii;\n\nconst int oo = 0x3f3f3f3f;\n\ntemplate<typename T> inline bool chkmax(T &a, T b) { return a < b ? a = b, true : false; }\ntemplate<typename T> inline bool chkmin(T &a, T b) { return b < a ? a = b, true : false; }\nstring procStatus()\n{\n    std::ifstream t(\"/proc/self/status\");\n    return string(std::istreambuf_iterator<char>(t), std::istreambuf_iterator<char>());\n}\ntemplate<typename T> T read(T &x)\n{\n    int f = 1;\n    char ch = getchar();\n    for (; !isdigit(ch); ch = getchar())\n        f = (ch == '-' ? -1 : 1);\n    for (x = 0; isdigit(ch); ch = getchar())\n        x = 10 * x + ch - '0';\n    return x *= f;\n}\ntemplate<typename T> void write(T x)\n{\n    if (x == 0) {\n        putchar('0');\n        return;\n    }\n    if (x < 0) {\n        putchar('-');\n        x = -x;\n    }\n    static char s[20];\n    int top = 0;\n    for (; x; x /= 10)\n        s[++top] = x % 10 + '0';\n    while (top)\n        putchar(s[top--]);\n}\n// EOT\n\nconst int MAXN = 1e5 + 5;\n\nint N;\nint A[MAXN];\nchar op[MAXN];\n\nvoid input()\n{\n    read(N);\n    read(A[1]);\n    for (int i = 2; i <= N; ++i) {\n        op[i] = getchar();\n        read(A[i]);\n    }\n}\n\nvoid solve()\n{\n    static LL sum[MAXN];\n    static int last[MAXN];\n\n    last[N + 1] = N + 1;\n    for (int i = N; i >= 1; --i) {\n        sum[i] = sum[i + 1] + A[i];\n        last[i] = op[i + 1] == '-' ? i + 1 : last[i + 1];\n    }\n\n    LL cur = A[1], ans = 0;\n    for (int i = 2; i <= N; ++i) {\n        if (op[i] == '+')\n            cur += A[i];\n        else {\n            int j = last[i];\n            chkmax(ans, cur - (sum[i] - sum[j]) + sum[j]);\n            cur -= A[i];\n        }\n    }\n    chkmax(ans, cur);\n\n    printf(\"%lld\\n\", ans);\n}\n\nint main()\n{\n#ifdef __DEBUG\n    freopen(\"E.in\", \"r\", stdin);\n    freopen(\"E.out\", \"w\", stdout);\n#endif\n\n    input();\n    solve();\n\n    return 0;\n}\n\n// 吃饭有时很像结婚，名义上最主要的东西，其实往往是附属品。\n// 吃讲究的饭事实上只是吃菜，正如讨阔佬的小姐，宗旨倒并不在女人。\n//   --钱钟书\n"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<algorithm>\n#define maxn 100005\n#define LL long long\n#define INF (LL)(1e16)\nusing namespace std;\nint n,a[maxn],f[maxn];\nLL sum,ans=-INF,pre[maxn];\nint main()\n{\n\tscanf(\"%d%d\",&n,&a[1]);\n\tfor(int i=2;i<=n;i++)\n\t{\n\t\tchar s[5];\n\t\tscanf(\"%s\",s);\n\t\tif(s[0]=='-') f[i]=1;\n\t\tscanf(\"%d\",&a[i]);\n\t}\n\tfor(int i=n;i>0;i--) pre[i]=pre[i+1]+a[i];\n\tint la=1;\n\twhile(la<=n&&!f[la]) sum+=1ll*a[la++];\n\twhile(la<=n)\n\t{\n\t\tint la1=la+1; LL sum1=0;\n\t\twhile(la1<=n&&!f[la1]) sum1+=1ll*a[la1++];\n\t\tif(la1<=n) ans=max(ans,sum-sum1-a[la]+pre[la1]);\n\t\tsum+=sum1-a[la]; la=la1; \n\t}\n\tans=max(ans,sum);\n\tprintf(\"%lld\\n\",ans);\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <sstream>\n#include <string>\n#include <vector>\n#include <stack>\n#include <queue>\n#include <set>\n#include <map>\n#include <numeric>\n#include <algorithm>\n#include <cstdio>\n#include <cstdlib>\n#include <cstring>\n#include <cctype>\n#include <cmath>\n#include <cassert>\n#include <cstdarg>\n#include <sys/time.h>\n#include <fstream>\n//#include \"cout.h\"\n\nusing namespace std;\n\n#define SZ(x) ((int)x.size())\n#define MSET(x,a) memset(x, a, (int)sizeof(x))\n#define PB push_back\n#define VI vector < int >\n#define PII pair < int, int >\n#define LL long long\n#define FOR(i,a,b) for (int i = (a); i < (b); i++)\n#define REP(i,n) FOR(i,0,n)\n#define ALL(v) (v).begin(), (v).end()\n#define FIT(it,v) for (__typeof((v).begin()) it = (v).begin(); it != (v).end(); it++)\n#define OUT(A) cout << #A << \" = \"<< (A) << endl\n#define OUT2(A, B) cout << \"(\" << #A << \", \" << #B << \") = (\" << (A) << \", \"<< (B) << \")\" << endl\ntemplate<class T> void chmin(T &t, T f) { if (t > f) t = f; } \ntemplate<class T> void chmax(T &t, T f) { if (t < f) t = f; } \n\n#define present(c, e) ((c).find((e)) != (c).end())\n#define cpresent(c, e) (find(all(c), (e)) != (c).end())\n\nint n;\nLL a[100010];\nchar op[100010];\nLL dp[100010][3];\n\nvoid init() {\n}\n\nvoid input() {\n\tcin >> n;\n\tREP(i, n) {\n\t\tcin >> a[i];\n\t\tif (i < n-1) cin >> op[i+1];\n\t}\n}\n\nvoid solve() {\n\tREP(i, 100010) REP(j, 3) dp[i][j] = -1e15;\n\tdp[0][0] = a[0];\n\tFOR(i, 1, n){\n\t\tif(op[i] == '+'){\n\t\t\tdp[i][0] = max({\n\t\t\t\tdp[i-1][0]+a[i], \n\t\t\t\tdp[i-1][1]+a[i], \n\t\t\t\t// dp[i-1][2]+a[i]\n\t\t\t\t});\n\t\t\tdp[i][1] = max({\n\t\t\t\tdp[i-1][1]-a[i], \n\t\t\t\t// dp[i-1][2]-a[i]\n\t\t\t\t});\n\t\t\tdp[i][2] = max({\n\t\t\t\tdp[i-1][2]+a[i]\n\t\t\t\t});\n\t\t}\n\t\telse{\n\t\t\t// dp[i][0] = max({\n\t\t\t// \tdp[i-1][0]-a[i], \n\t\t\t// \tdp[i-1][1]-a[i], \n\t\t\t// \tdp[i-1][2]-a[i]\n\t\t\t// \t});\n\t\t\tdp[i][1] = max({\n\t\t\t\tdp[i-1][0]-a[i], \n\t\t\t\t// dp[i-1][1]+a[i], \n\t\t\t\t// dp[i-1][2]+a[i]\n\t\t\t\t});\n\t\t\tdp[i][2] = max({\n\t\t\t\tdp[i-1][1]+a[i], \n\t\t\t\tdp[i-1][2]+a[i]\n\t\t\t\t});\n\t\t}\n\t}\n\tcout << max({dp[n-1][0], dp[n-1][1], dp[n-1][2]}) << endl;\n}\n\nint main() {\n\tinit();\n    input();\n    solve();\n\treturn 0;\n}\n\n\n\n\n\n\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define DEBUG(x) cout << #x << \" = \" << x << endl\n#define pb push_back\nusing namespace std;\ntypedef long long ll;\n\nconst int MAXN = 100005;\n\n\nint main()\n{\n    //freopen(\"input.in\", \"r\", stdin);\n    int n;\n    cin >> n;\n    char sgn;\n    char hj;\n    int x;\n    ll ans = 0;\n    while ((sgn != '-') && (cin >> x >> sgn))\n    {\n        ans += x;\n    }\n    cin >> x;\n    if (sgn != '-')\n    {\n        ans += x;\n        cout << ans;\n        return 0;\n    }\n    ans -= x;\n\n\n    ll sm = 0;\n    while (cin >> sgn >> x)\n    {\n        if (sgn == '+')\n            sm += x;\n        else\n        {\n            sm -= x;\n            ans += max(sm, -sm);\n            sm = 0;\n        }\n    }\n\n    ans += sm;\n    cout << ans;\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "// Math = ♥️\n\n#include <bits/stdc++.h>\n#include <ext/pb_ds/assoc_container.hpp>\n#include <ext/pb_ds/tree_policy.hpp>\nusing namespace __gnu_pbds;\nusing namespace std;\n\n/*-------------------------------------------------------------------------------------------------------------------------*/\n#define ll long long                  // Short form for long long\n#define ld long double                // Short form for long double\ntypedef pair<ll, ll> ii;              // Pair of long long\ntypedef vector<ll> vi;                // Vector of long long\ntypedef vector<vi> vvi;               // Vector of vector of long long\ntypedef vector<ii> vii;               // Vector of pairs\ntypedef vector<vii> vvii;             // Vector of vector of pairs\n#define pq priority_queue             // Max heap (To convert to min heap, use negative sign before every value)\n#define ff first                      // For pairs\n#define ss second                     // For pairs\n#define pb push_back                  // Pushback to vector\n#define mp make_pair                  // Makes pairs to be stored as pair\n#define all(c) (c).begin(), (c).end() // Mainly used by me in sorting\n// ordered_set adds two new functions to set - (set).find_by_order([kth element based on zero indexing]) and order_of_key()\n// order_of_key returns number of elements less that parameter. If element exists, that order is its index\n#define ordered_set tree<ll, null_type, less<ll>, rb_tree_tag, tree_order_statistics_node_update>\n/*-------------------------------------------------------------------------------------------------------------------------*/\n#define MAXN (ll)(1e5 + 5)\n#define INF (ll)(1e18)\n\nll dp[MAXN][3];\nll n;\nvi arr;\n\nll solve(ll i, ll t)\n{\n    if (i == n)\n        return 0;\n\n    if (dp[i][t] == INF)\n    {\n        if (t == 0)\n        {\n            if (arr[i] < 0)\n                dp[i][t] = arr[i] + max(solve(i + 1, 0), solve(i + 1, 1));\n            else\n                dp[i][t] = arr[i] + solve(i + 1, 0);\n        }\n        else if (t == 1)\n        {\n            ll maxi = max(solve(i + 1, 0) + arr[i], solve(i + 1, 1) - arr[i]);\n            if (arr[i] < 0)\n                maxi = max(maxi, solve(i + 1, 2) - arr[i]);\n            dp[i][t] = maxi;\n        }\n        else\n            dp[i][t] = max(arr[i] + solve(i + 1, 2), max(-arr[i] + solve(i + 1, 1), arr[i] + solve(i + 1, 0)));\n    }\n    return dp[i][t];\n}\n\nint main(void)\n{\n    ios_base::sync_with_stdio(false);\n    cin.tie(NULL);\n\n    for (int i = 0; i < MAXN; i++)\n        for (int j = 0; j < 3; j++)\n            dp[i][j] = INF;\n    cin >> n;\n    arr.resize(n);\n\n    cin >> arr[0];\n\n    for (int i = 1; i < n; i++)\n    {\n        char c;\n        cin >> c >> arr[i];\n\n        if (c == '-')\n            arr[i] = -arr[i];\n    }\n\n    cout << solve(0, 0) << \"\\n\";\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<string>\n#include<vector>\n#include<map>\n#include<algorithm>\n#include<cmath>\n#include<set>\nusing namespace std;\nconst int64_t INF = 1e15;\nconst int64_t cut_off = 8*1e14;\n\nint main(){\n    int N;\n    int64_t A[100010];\n    char op[100010];\n    cin>>N;\n    for(int i=1;i<=N;i++){\n        cin>>A[i];\n        if(i!=N){\n            cin>>op[i];\n        }\n    }\n    int64_t dp[3][100010]={};\n    for(int i=0;i<100010;i++){\n        for(int j=0;j<3;j++){\n            dp[j][i]=INF;\n        }\n    }\n    dp[0][1]=A[1];\n    for(int i=1;i<=N-1;i++){\n        if(op[i]=='-'){\n            if(dp[1][i]<cut_off){\n                if(dp[2][i]<cut_off){\n                    dp[2][i+1]=max(dp[2][i],dp[1][i])+A[i+1];\n                }else{\n                    dp[2][i+1]=dp[1][i]+A[i+1];\n                }\n            }\n            dp[0][i+1]=dp[0][i]-A[i+1];\n            dp[1][i+1]=dp[0][i]-A[i+1];\n        }else{\n            dp[0][i+1]=dp[0][i]+A[i+1];\n            dp[1][i+1]=dp[1][i]-A[i+1];\n            dp[2][i+1]=dp[2][i]+A[i+1];\n        }\n    }\n    int64_t res = -INF;\n    for(int i=0;i<3;i++){\n        if(dp[i][N]<cut_off){\n            res = max(res,dp[i][N]);\n        }\n    }\n    cout<<res<<endl;\n    \n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "/*!|||||||!!!!!!!!!!!!!!!!!!|%%$&&&&&&&&&&&&&|'`......```':'':!;.  ......````':!;..\n||||||||||||!!!!!!!!!!!!!!!!!!!;;;;;!|%$$&&&|'..  ....``'''''::`  ......`````';:.\n||||||||||||||||||||||!!!!!!!!!!;;;;;;;;;;;'`..  ....``'''''':` ........````':'.\n|||||||||%%||%%|||||||||||||||||!;;;;;;;;'....   ....`````'''`..........````''.\n%%%%%%%%%%%%%%%%%%|%||||%%|%%%%|!;!;;;;:.       ....```````'::'`........`````.\n$$$$$$$%%$%%$$$$$%%%%%%%%%%%%%%|!!!!;'.        ....````````';|!!!!:`....```..\n$$$$$$%%%$%%$$$$$%%%%%%%%%%%%%%!;!!;`          ....```````':!!!!!!!!|||;'`.\n$$$%$%|%%||%%%%%%%%%%||%%%%%|%|!;!!:.         ....````````:!;;;!;;!!|%$$$$|:`\n%%%%%||||||||||||||||||||||||||!;!;'`.        ....```````';!!!!!!!!||;';%$&@@%:`.\n|||||||||!!|||||||||||||||||||!;!!:':'.       ..```''```';!!!!!!!||%$$%!` .'|&@@%:`. .\n||||||||!!!|||||||||||||||||||!;!;::;;:`     ..````'''`';;!!!!!!|%%$$$$&&%'   .;&#@!'....\n|||||||!!!!|||||||||||||||||||!;!;:;;;;;'.  ..```''''`:!!!!!;!!|%$$$$&&&&&@$:.   .;&#$:....\n|||!||||!!||||||||||||||||||||!;!::;;;;;;;`..```''':':;!!!!!!!!|%$$&&&&&&@&@#$:.   .`!@$:...\n|||!|||!!!|||||||||||||||||||!!;;:;;;;;;;!!;'`'''':':!;;;;;!!|||||%$&&&&@@@@@@@%`......:$$:...\n||!!||!!!!!||||||||||||||||||!!;;:;;;;;;;!!|!;'''``'':;!!;!!;!|$$$%|%&&&@@@@@@@#&;.......'%|`..\n||!!||!!!!!!|||||||||||||||!!!!;;:;;;;;;:''::::;;!;;;;':!!!!!!!!!%$&$|%&@@@@@@#@@&!`.......`|;..\n||!!|!!!!!!!||||||||||||||||||!;;:;;'````:!%%%%|;:;;:::::;|!!||!!!!|$&$%%&@@&@@##@&!'........;|'.\n|!!!|!!!!!!!|||||||||||||||!!!!;:'```';!!||!!!|!!;;;;:::::;%%||%%|||||%&$%%&@@@@@##&;`` ......'!:.\n|!!!!!!!!!!!!|||||||||||||!!!!!;::;;;;;:;!!!|||||!!;;;;;;;;!%$%|%$$%||||%$$%$&@@@@#@$:``      .`''.\n|!!!||!!!!!!!||||||||||||!!!!!!!;;;:::;;!!|||||||||!!;;;;;;;;|$%|%%$$$%|||%%$$&@&@@#@!.`'.     ...`.\n|!!!||!!!!!!!||||||||||||!!!!!!!;:;;;;;!!!!!|||||||||!!;;;;;;;|$$||%$$&&$%%%%%$&&&&@@@!.``.    ....`.\n|!!!||!!|!!||!|||||||||||!!!!!!!;;;;;;;!!||||||||||!!!;;;;;;;;;|$$||$$$&&&$%%%|%$&&&@@@; .`.    .. ...\n|!!!||!!||!!|!!|||||||||||!!!!!!!;;;;;!!||||||||!!!|||||!!;;;;;;|$$|!$$$&&&&$%%|%$&&&&@$' .`.   ..  ..\n|!!!||!!||!!||!|||||||||||!!!!!!!;;;;;!||||||!!!|||||||||!::'::::!$$!!%$$&&&&$$%!!%$$&&&!. .`.  ..\n|!!!|||!|||!!|!!|||||||||||!!!!!!!;;;!!||||!!|||||||||!;;!!!!!!;;;|$%!|$$$&&&&&$|`.;$$&&|`  .`...\n|!!!!||!||||!!|!!||||||||||!!!!!!!!!;!|||!||||||||!!!!||!:'`.`:;!!!%$%!|$$$&&&&&$;  '%$&$;   ``\n|!!!!||!!||||!!|!!|||||||%||!!!!!!!!!!||||||||||!!!|!:.      ....`';|||!|$$&&&&&@|`  '%&$%:   ..\n|!!!!|||||||||!|||!||||||%%|!!|!!!!!!!||||||||!!!;` ...      ...';||%$|;!%$$&&&&@$:   :$&$$|.  ..\n||!!!||||||||||!!||||||||%%||!!|!!!!!!|||||||!!'..```..``... `:;;;!|%$$|!|%$&&&&&&;   '|$%:!$: ...\n||!;!|||||||||||!!%|||||%%%%|||||!|!!|||||||!'..```.`'```..`!%!!%%%%|$$||!|$$&&&&&;   ';!%: `|%`..\n||!!!!!|||||%||||!!%%||%%%%%%|||||||!||||||;:`.``.`:;;`.':```:':|%%%%$$%|!;|&&&&&$:   ''`!;    :|:.\n|||!!!!!||||%%%|%%||%%|%%%$$%|||%|!||!||||!:`....';;!|%;.```''::!%%%|%$$$|';$&&&&%'  .`  ::       .`''`. .``.\n|||!!!!!||||%%%%%%%|||%%%$$$$%|%%%||%|!||!:```....`;|%$$|'':`'!;!%%%%%%$&@%!%&$$&!. .`.  ``.      .\n|||!!!|!!|%%%%%%%%%%%||%%%$$$%|%%%%||%|!|!!|||||||!;::|$$$%|%%%!!|%%%%%%$&&&$$$$%' .`    ..\n|||!!!||!!|%%%%%%%%%%%%||%%%$$%|%%$%|%%!!|||||||||||||||!!!||||%%%%%%%%%$$$$$$$$&%:.     ..\n||||!!|%|!;!%%%%%%%%%%%%%%|%%%$||%$%%|%|!!||||||||||||||%%%%%%%%$$$%%%%$$$$%%$$$&&&&&&$%'..\n!|||!!!|%|!;!%%%%%%%%%%%%%%%|%%%||%%%||%|!!!||||||||||||%%%%%%%%%%%%%%%$$$$%%$$$$$$$$$$%'\n;!||!!!|%%%|!;|%%%%%%%%%%%%%%%%|%||%%%!!||!!!|%%||||||%%%%%%%%%%%%%%%%$$$$%%%%%$$$$$$$$!`\n;;!||!!!|%%||!;!||%%%%%%%%%%%%%%%||%%%|!!|||!!!|%$%|||%%%%%%%%%%%%%%%%%%%%%%%$$$$$$$$$$;.\n;;;||!!!!|%%||!;;!|%%%%%%%|||||%%|||||||!!||||||||%$%|%%%%%%%%%%%%%%%%$%%%%%$$$$$$$$$$%'\n!!;!|!;;!!|%%|||!;!||%%%||||||||||||||||!!|%||||||||%%||%%%%%%%%%%%%$$$$$$$$$$$$$$$$$$!`\n!!;;!!;;!!!||||||!;;!|||||||||||||||!||||!;;|%%%%%%%|%%%%%%%%%%%%%%%$$$$$$$$$$$$$$$$$$%'\n!!!;;!!;;!!!||||||!!;;!||||||||||||||!||||!!!!%$%|%%%%%%%%%%%%%%%%%%$$$$$$$$$$$$$$$$$$$%'\n!!!!;;!!;;;!!!|||||!!::;|||||!|||||||!!|||||!!!|$$%%%%%%%%%%%%%%%$$$$$$$$$$$$$$$$$$$$&&&$:\n;;!!!!;!;;;;!!!|||||!!;::;!|!!!!||||||!!|||%%|!!!%&%%%%%%%%%%%%%%$$$$$$$$$$$$$$$$$$$$$&$!`\n|!!!!;!;;;;::;!!!||!||!;;;;;!!!!!!|||||!!|||%%|||!|$&$%%%%%%%%$$$$$$$$$$$$$$$$$$$$$$$$%!`\n:::;!;;;;::;::;;!!|||!!!!;;;;;!!!!!!||||!!|||%$%%||||$&$%%%%%%$$$$$$$$$$$$$$$$$$$$$$$$$%'\n;;;;;!!!!!;:::;;:;!!||!!!!!;;;;;!!!!!!||||!!||%$%%%%%%%%$$%%%$$$$$$$$$$$$$$$$$$$$$$$$$$$$:\n;;;;;;;;;!!!;::;;;:;!!|||||!!!!;;;;!!!!!|||||||%$$%%%%%%%%$$$$$$$$$$$$$$$$$$$$$$$$$$$$&$!.\n;;;;;;;;:::::::::;;;;;;!||!!!!!!!!;;;!!!!!||||||||$$%%%%%%%%%%$$$$$$$$$$$$$$$$$$$$$$$$$&!.\n;;;;;;;::;;:::;;;;:;;;;;;;;!!!|!!!!!!;;;!!!!!|%%||||%$%%%%%%%%%$$$$$$$$$$$$$$$$$$$$$$$$&%`\n;;;;;;;:::;;::;;;;;;;;;;;;::;!!!!!!!!|!;!!!!!!!|%%%%%%%%%%$$$$$$$$$$$$$$$$$$$$$$$$$$$$$&&:\n;;;;;;;::;::;:;;;;;;;;;!!!!!!!;;!!|||||!!!|!!!!!!!|%%%%%%%%%%%%%%%%$$$$$$$$$$$$$$$$$$$$&&|`\n;;;;;;;::;;;::;;;;;;;;;;!!!!!!!!!||||||||;!!|||||||||%%%%%%%%%%%%%%%$$$$$$$$$$$$$$$$$$$$&&!.\n;;;;;;;::;;;;::;;;;;;;;;;!!!!!!!!|||||||||;;;!!|||||||||%%%%%%%%%%%%%%%%$$$$$$$$$$$$$$$$$&|`\n!;;;;;;;::;;;:;;;;;;;;;;;!!!!!!!!!|||||||%!;;;;;!||||||||||%%%%%%%%%%%%%%%$$$$$$$$$$$$$$$$!.\n;!;;;;;;::;;;:;;;;::;;;;;!!!!!!!!!|||||||%%!;;;;;;!!!|||||||%%%%%%%%%%%%%%%%%%$$$$$$$$$$&|`\n:;!!;;;;:::;;;:;;;:::;;;;;!!!!!!!!||||||||$|;;;;;;;;!!!!||||||||%%%%%%%%%%%%%%%%%%%$$$|'\n::;!!;;;::::;;:;;;;::;;;;;;!!!!!!!!|||||||$$!;;;;;;;;;;;!!!!!||||||%%%%%%%%%%%%|!:`.\n:::;!!;;;:::;;;;;;;:::;;;;;!!!!!!!!||%||||%&%!;;;;;;;;;;;;!!!!!!!!!!!|!;:`.\n::::;!!!;::::;::;;;::::;;;;;!!!!!!!!|%%|||!%&%;;;;;;;;;;;;;;;;;;;;;%|`\n:::::;!!!;:::::::;;:::::;;;;!!!!!!!!||%%%%!;%$|;;;;;;;;;;;;;;;;;;%@@$:\n::::::;!!!:::::':;;::::::;;;;;!!|!!!||%$%%|!;%$!;;;;;;;;;;;;;;;;|$&@@|`\n:::::':;;!;::::'';;;::::::;;;;!!!|!!!||%$%%|;;%%;;;;;;;;;;;;;;!||%$&#@|`\n::::::':;;;:::''':;;:::::::;;;!!!||!!!|%$$%%|;;||;;;;;;;;;;;!||||%%%&#@%'\n:::::::':;;;::'. ';;::::::::;;;!!!|!!!||%$$$%;;;||;;;;;;;;;|%%|||||%%&@@*/\n#include <bits/stdc++.h>\nusing namespace std;\n\nint val[100005];\nchar fh[100005];\nint n;\nlong long dp[100005][15];\n\nint main(){\n\tscanf(\"%d\",&n);\n\tfh[1]='+';\n\tfor(int i=1;i<=n;i++){\n\t\tscanf(\"%d\",val+i);\n\t\tif(i!=n){\n\t\t\tscanf(\" %c\",fh+i+1);\n\t\t}\n\t}\n\tfor(int i=0;i<=n;i++){\n\t\tfor(int j=0;j<10;j++){\n\t\t\tdp[i][j]=-0x3f3f3f3f3f3f3f3fll;\n\t\t}\n\t}\n\tdp[0][0]=0;\n\tfor(int i=1;i<=n;i++){\n\t\tfor(int j=0;j<10;j++){\n\t\t\tif(j!=2&&fh[i]=='-'){\n\t\t\t\tdp[i][j+1]=max(dp[i][j+1],dp[i-1][j]+(j==1?1:-1)*val[i]);\n\t\t\t}\n\t\t\tif(j){\n\t\t\t\tdp[i][j-1]=max(dp[i][j-1],dp[i-1][j]+(j==2?-1:1)*(fh[i]=='-'?-1:1)*val[i]);\n\t\t\t}\n\t\t\tdp[i][j]=max(dp[i][j],dp[i-1][j]+(j%2?-1:1)*(fh[i]=='-'?-1:1)*val[i]);\n\t\t}\n\t}\n\tprintf(\"%lld\\n\",max(dp[n][0],max(dp[n][1],dp[n][2])));\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n\nconst int MAXN=100011;\nconst long long LONF=4567891012345678910LL;\n\n\nint N;\nint A[MAXN];\nint O[MAXN];\n\nlong long F[MAXN][3];\n\nint rO(){\n\tstatic char ch[2];\n\tscanf(\"%s\", ch);\n\treturn ch[0]=='+';\n}\n\nvoid relax(long long &f, long long v){\n\tif(f<v)\tf=v;\n}\n\nint Calc(int t, int o, int a){\n\tif(t)\to=!o;\n\treturn ((o<<1)-1)*a;\n}\n\nint main(){\n\t\n\tscanf(\"%d\", &N);\n\t\n\tscanf(\"%d\", &A[1]);\n\tfor(int i=2;i<=N;++i){\n\t\tO[i]=rO();\n\t\tscanf(\"%d\", &A[i]);\n\t}\n\t\n\tfor(int i=1;i<=N;++i)\n\t\tfor(int j=0;j<=2;++j)\n\t\t\tF[i][j]=-LONF;\n\t\n\tF[1][0]=(long long)(A[1]);\n\tfor(int i=2;i<=N;++i){\n\t\tfor(int j=0;j<3;++j){\n\t\t\tfor(int k=0;k<=j;++k){\n\t\t\t\trelax(F[i][k], F[i-1][j]+Calc(k&1, O[i], A[i]));\n\t\t\t}\n\t\t\tif(!O[i]){\n\t\t\t\tfor(int k=0;k<=j && k<2;++k){\n\t\t\t\t\trelax(F[i][k+1], F[i-1][j]+Calc(k&1, O[i], A[i]));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\tlong long Ans=-LONF;\n\tfor(int j=0;j<3;++j)\n\t\trelax(Ans, F[N][j]);\n\tprintf(\"%lld\\n\", Ans);\n\t\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <stdio.h>\n#include <algorithm>\nusing namespace std;\nbool minus[100001];\nint a[100001];\nlong long dp[100001][3];\nconst long long NINF=-1000000000000000000;\nint main()\n{\n    int n;\n    scanf(\"%d\",&n);\n    for (int i=1;i<=n;++i)\n    {\n        if (i>1)\n        {\n            char x;\n            scanf(\" %c\",&x);\n            minus[i]=x=='-';\n        }\n        scanf(\"%d\",&a[i]);\n    }\n    dp[0][1]=dp[0][2]=-1e18;\n    for (int i=1;i<=n;++i)\n    {\n        if (minus[i])\n        {\n            dp[i][0]=dp[i][1]=max(dp[i-1][0]-a[i],max(dp[i-1][1]==NINF?NINF:dp[i-1][1]+a[i],\n                dp[i-1][2]==NINF?NINF:dp[i-1][2]-a[i]));\n            dp[i][2]=max(dp[i-1][1]==NINF?NINF:dp[i-1][1]+a[i],dp[i-1][2]==NINF?NINF:dp[i-1][2]-a[i]);\n        }\n        else\n        {\n            dp[i][0]=max(dp[i-1][0]+a[i],max(dp[i-1][1]==NINF?NINF:dp[i-1][1]-a[i],\n                dp[i-1][2]==NINF?NINF:dp[i-1][2]+a[i]));\n            dp[i][1]=max(dp[i-1][1]==NINF?NINF:dp[i-1][1]-a[i],dp[i-1][2]==NINF?NINF:dp[i-1][2]+a[i]);\n            dp[i][2]=dp[i-1][2]==NINF?NINF:dp[i-1][2]+a[i];\n        }\n    }\n    printf(\"%lld\\n\",dp[n][0]);\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#define _USE_MATH_DEFINES\n#include <cstdio>\n#include <iostream>\n#include <sstream>\n#include <fstream>\n#include <iomanip>\n#include <algorithm>\n#include <cmath>\n#include <complex>\n#include <string>\n#include <vector>\n#include <list>\n#include <queue>\n#include <stack>\n#include <set>\n#include <map>\n#include <bitset>\n#include <numeric>\n#include <limits>\n#include <climits>\n#include <cfloat>\n#include <functional>\n#include <iterator>\nusing namespace std;\n\nconst long long INF = LLONG_MAX / 2;\nconst int MAX = 10;\n\nint main()\n{\n    int n;\n    cin >> n;\n\n    vector<int> a(n);\n    string op(n-1, ' ');\n    for(int i=0; i<n; ++i){\n        cin >> a[i];\n        if(i < n - 1)\n            cin >> op[i];\n    }\n\n    vector<vector<long long> > dp(n, vector<long long>(MAX, -INF));\n    dp[0][0] = a[0];\n    for(int i=1; i<n; ++i){\n        for(int j=MAX-1; j>=0; --j){\n            long long x = dp[i-1][j];\n            if((j % 2 == 0) ^ (op[i-1] == '-'))\n                x += a[i];\n            else\n                x -= a[i];\n\n            dp[i][j] = max(dp[i][j], x);\n            if(op[i-1] == '-' && j + 1 < MAX)\n                dp[i][j+1] = max(dp[i][j+1], x);\n        }\n        for(int j=MAX-1; j>0; --j)\n            dp[i][j-1] = max(dp[i][j-1], dp[i][j]);\n    }\n    cout << dp[n-1][0] << endl;\n\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <cstdlib>\n#include <cstring>\n#include <cmath>\n#include <algorithm>\n#include <assert.h>\n#define IOS ios::sync_with_stdio(false)\nusing namespace std;\n#define inf (0x3f3f3f3f)\ntypedef long long int LL;\n\n\n#include <iostream>\n#include <sstream>\n#include <vector>\n#include <set>\n#include <map>\n#include <queue>\n#include <string>\n#include <bitset>\nconst int maxn = 1e5 + 20;\nLL perfixSum[maxn], absSum[maxn];\nvector<int>pos;\nvoid cut(LL &val, int pos1, int pos2) {\n    if (pos1 > pos2) return;\n    val -= absSum[pos2] - absSum[pos1 - 1];\n}\nvoid work() {\n    int n;\n    scanf(\"%d\", &n);\n    int val;\n    scanf(\"%d\", &val);\n    perfixSum[1] = val;\n    absSum[1] = val;\n    for (int i = 2; i <= n; ++i) {\n        int val;\n        char op;\n        cin >> op;\n        scanf(\"%d\", &val);\n        if (op == '+') {\n            perfixSum[i] = perfixSum[i - 1] + val;\n        } else {\n            perfixSum[i] = perfixSum[i - 1] - val;\n            pos.push_back(i);\n        }\n        absSum[i] = absSum[i - 1] + val;\n    }\n    LL ans = perfixSum[n];\n    for (int i = 0; i <= (int)pos.size() - 2; ++i) {\n        int p1 = pos[i], p2 = pos[i + 1];\n        LL tans = absSum[n] - absSum[p2 - 1];\n        tans += perfixSum[p1];\n        cut(tans, p1 + 1, p2 - 1);\n        ans = max(ans, tans);\n    }\n    cout << ans << endl;\n}\n\nint main() {\n#ifdef local\n    freopen(\"data.txt\", \"r\", stdin);\n//    freopen(\"data.txt\", \"w\", stdout);\n#endif\n//    int val;\n//    scanf(\"%d\", &val);\n//    cout << val << endl;\n    work();\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n#define maxn 100010\ntemplate <typename T>inline T read()\n{\n    register T sum=0;\n    register char cc=getchar();\n    int sym=1;\n    while(cc!='-'&&(cc>'9'||cc<'0'))cc=getchar();\n    if(cc=='-')sym=-1,cc=getchar();\n    sum=sum*10+cc-'0';\n    cc=getchar();\n    while(cc>='0'&&cc<='9')sum=sum*10+cc-'0',cc=getchar();\n    return sym*sum;\n}\ntemplate <typename T>inline T read(T &a)\n{\n    a=read<T>();\n    return a;\n}\ntemplate <typename T,typename... Others> inline void read(T& a, Others&... b)\n{\n    a=read(a);\n\tread(b...);\n}\nint n,l=1,r,a[maxn],flg[maxn];\nlong long ans=-1e18,f[maxn],g[maxn];\nint main()\n{\n\tread(n);\n\tflg[1]=1;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tread(a[i]);\n\t\tif(i<n)\n\t\t{\n\t\t\tchar cc;\n\t\t\tscanf(\"%s\",&cc);\n\t\t\tif(cc=='-')\n\t\t\t\tflg[i+1]=-1;\n\t\t\telse\n\t\t\t\tflg[i+1]=1;\n\t\t}\n\t}\n\tfor(int i=1;i<=n;i++)\n\t\tf[i]=f[i-1]+flg[i]*a[i];\n\tfor(int i=n;i>=1;i--)\n\t\tg[i]=g[i+1]+a[i];\n\twhile(l<=n&&flg[l]==1)\n\t\tl+=1;\n\tfor(;l<=n;l=r+1)\n\t{\n\t\tlong long s=a[l];\n\t\tr=l;\n\t\twhile(r<n&&flg[r+1]==1)\n\t\t{\n\t\t\tr+=1;\n\t\t\ts+=a[r];\n\t\t}\n\t\tans=max(ans,f[l-1]+g[r+1]-s);\n\t}\n\tprintf(\"%lld\\n\",max(ans,f[n]));\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\ntypedef long long ll;\n\nconst int MN = 100010;\n\nint N;\nint A[MN];\nchar B[MN];\nll dp[MN][3];\n\nint main() {\n    scanf(\"%d\", &N);\n\n    for(int i = 0; i < N; i++) {\n        if(i) {\n            scanf(\" %c\", &B[i]);\n        }\n        scanf(\"%d\", &A[i]);\n    }\n    B[0] = '+';\n\n    if(N == 1) {\n        printf(\"%d\", A[0]);\n        return 0;\n    }\n\n    dp[N - 1][0] = B[N - 1] == '+'? A[N - 1] : -A[N - 1];\n    dp[N - 1][1] = B[N - 1] == '+'? -A[N - 1] : A[N - 1];\n    dp[N - 1][2] = abs(A[N - 1]);\n\n    for(int i = N - 2; i >= 0; i--) {\n        if(B[i] == '+') {\n            dp[i][0] = A[i] + dp[i + 1][0];\n            dp[i][1] = -1e18;\n            dp[i][2] = -1e18;\n            for(int j = 0; j < 3; j++) {\n                dp[i][1] = max(dp[i][1], -A[i] + dp[i + 1][j]);\n                dp[i][2] = max(dp[i][2], abs(A[i]) + dp[i + 1][j]);\n            }\n        }\n        else {\n            dp[i][0] = -1e18;\n            dp[i][1] = -1e18;\n            dp[i][2] = -1e18;\n            for(int j = 0; j < 3; j++) {\n                if(j < 2) dp[i][0] = max(dp[i][0], -A[i] + dp[i + 1][j]);\n                dp[i][1] = max(dp[i][1], A[i] + dp[i + 1][j]);\n                dp[i][2] = max(dp[i][2], abs(A[i]) + dp[i + 1][j]);\n            }\n        }\n\n        //cout << i << ' ' << dp[i][0] << ' ' << dp[i][1] << ' ' << dp[i][2] << endl;\n    }\n\n    printf(\"%lld\", dp[0][0]);\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define FOR(i, begin, end) for(int i=(begin);i<(end);i++)\n#define REP(i, n) FOR(i,0,n)\n#define IFOR(i, begin, end) for(int i=(end)-1;i>=(begin);i--)\n#define IREP(i, n) IFOR(i,0,n)\n#define SORT(a) sort(a.begin(), a.end())\n#define REVERSE(a) reverse(a.begin(), a.end())\n#define int long long\n#define INF 1000000000000000000\nusing namespace std;\n\ntypedef vector<int> vec;\ntypedef vector<vec> mat;\ntypedef pair<int, int> Pii;\n\ntemplate<typename T>\nvoid readvec(vector<T> &a);\nvoid readindex(vector<int> &a);\n\n\n\nsigned main(){\n\n    int N; cin >> N;\n    vec A(N);\n    vector<bool> s(N - 1, false);\n    char c;\n    REP(i, N - 1){\n        cin >> A[i] >> c;\n        if(c == '+') s[i] = true;\n    }\n    cin >> A[N - 1];\n\n    vec sumA(N + 1);\n    sumA[0] = 0;\n    REP(i, N) sumA[i + 1] = sumA[i] + A[i];\n\n    int ans = -1 * INF;\n    int tmp = A[0];\n    REP(i, N - 1){\n        if(s[i]){\n            tmp += A[i + 1];\n        }else{\n            tmp -= A[i + 1];\n            int tmp2 = tmp;\n            FOR(j, i + 1, N - 1){\n                if(s[j]){\n                    tmp2 -= A[j + 1];\n                }else{\n                    tmp2 += sumA[N] - sumA[j + 1];\n                    break;\n                }\n            }\n            ans = max(ans, tmp2);\n        }\n    }\n    ans = max(ans, tmp);\n\n    cout << ans;\n    \n    return 0;\n}\n\n\ntemplate<typename T>\nvoid readvec(vector<T> &a){\n    REP(i, a.size()){\n        cin >> a[i];\n    }\n}\nvoid readindex(vector<int> &a){\n    REP(i, a.size()){\n        cin >> a[i];\n        a[i]--;\n    }\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define time Time\n#define pii pair<int,int>    \n#define x first    \n#define y second \n#define N 10000005   \n#define pb(x) push_back(x)\n#define mp(x,y) make_pair((x),(y))    \n#define sqr(x) ((x)*(x))\ntypedef long long LL;  \nusing namespace std;\nconst int mod=1e9+7;\nint main(){\n\tint n;\n\twhile(scanf(\"%d\",&n)!=EOF){\n\t\tlong long \tint a[100005];\n\t\tint op[100005];\n\t\top[0]=1;\n\t\tscanf(\"%lld\",&a[0]);\n\t\tfor(int i=1;i<n;i++){\n\t\t\tchar c;\n\t\t\twhile(scanf(\"%c\",&c)&&c!='+'&&c!='-');\n\t\t\tif(c=='+')\n\t\t\top[i]=1;\n\t\t\telse\n\t\t\top[i]=0;\n\t\t\tscanf(\"%lld\",&a[i]);\n\t\t} \n\t\tlong long int sum=0;\n\t\tfor(int i=0;i<n;i++){\n\t\t\tsum+=a[i];\n\t\t}\n\t\tlong long int ans=1e18;\n\t\tint i;\n\t\tint last;\n\t\tfor(i=0;op[i]==1;i++);\n\t\tlong long int ssum=0,sssum=0;\n\t\tfor(;i<n;i++)\n\t\t{\n\t\t\tssum+=a[i];\n\t\t\tif(op[i]==0)\n\t\t\tsssum+=a[i],last=i;\n\t\t\tif(op[i+1]==0||i+1==n)\n\t\t\tans=min(ssum+sssum-a[last],ans),ssum=0;\n\t\t\t//printf(\"%lld\\n\",sssum);\n\t\t}\n\t\tans=min(sssum,ans);\n\t\tprintf(\"%lld\\n\",sum-2*ans);\n\t}\n}\n/*\n\n 1 - 1 + 2 + 10 - 2 + 3  + 5\n 1  - 2  - 3  \n*/\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\ntemplate <class T>\ninline void read(T &res)\n{\n\tres = 0; bool bo = 0; char c;\n\twhile (((c = getchar()) < '0' || c > '9') && c != '-');\n\tif (c == '-') bo = 1; else res = c - 48;\n\twhile ((c = getchar()) >= '0' && c <= '9')\n\t\tres = (res << 3) + (res << 1) + (c - 48);\n\tif (bo) res = ~res + 1;\n}\n\ntemplate <class T>\ninline T Max(const T &a, const T &b) {return a > b ? a : b;}\n\ntypedef long long ll;\n\nconst int N = 2e5 + 5, M = 4e6 + 5;\n\nint n, a[N], add[N];\nchar s[M], op[N];\nll sum[N];\n\nvoid work()\n{\n\tint tot = 1, m; a[1] = 0;\n\tread(n); gets(s + 1);\n\tm = strlen(s + 1);\n\tfor (int i = 1; i <= m; i++)\n\t{\n\t\tif (s[i] == ' ') continue;\n\t\tif (s[i] == '+' || s[i] == '-') op[tot++] = s[i], a[tot] = 0;\n\t\telse a[tot] = a[tot] * 10 + s[i] - '0';\n\t}\n\tfor (int i = 1; i <= n; i++) sum[i] = sum[i - 1] + a[i];\n\tadd[n] = 0;\n\tfor (int i = n - 1; i >= 1; i--) add[i] = op[i] == '-' ? 0 : add[i + 1] + 1;\n\tll cur = a[1], ans = -1e18;\n\tfor (int i = 1; i < n; i++)\n\t\tif (op[i] == '-') ans = Max(ans, cur - (sum[i + 1 + add[i + 1]]\n\t\t\t- sum[i]) + sum[n] - sum[i + 1 + add[i + 1]]), cur -= a[i + 1];\n\t\telse cur += a[i + 1];\n\tprintf(\"%lld\\n\", Max(cur, ans));\n}\n\n\nint main()\n{\n\tint T = 1;\n\twhile (T--) work();\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\n#define int long long\n\n#define rep(i,n) for(int i=0;i<(n);i++)\n#define pb push_back\n#define all(v) (v).begin(),(v).end()\n#define fi first\n#define se second\ntypedef vector<int>vint;\ntypedef pair<int,int>pint;\ntypedef vector<pint>vpint;\n\ntemplate<typename A,typename B>inline void chmin(A &a,B b){if(a>b)a=b;}\ntemplate<typename A,typename B>inline void chmax(A &a,B b){if(a<b)a=b;}\n\nint N;\nint A[111111];\n\nint sum[111111];\nint sumabs[111111];\n\nsigned main(){\n    cin>>N;\n    cin>>A[0];\n    for(int i=1;i<N;i++){\n        char c;\n        cin>>c>>A[i];\n        if(c=='-')A[i]*=-1;\n    }\n\n    rep(i,N)sum[i+1]=sum[i]+A[i];\n    rep(i,N)sumabs[i+1]=sumabs[i]+abs(A[i]);\n\n    vint lis;\n    rep(i,N)if(A[i]<0)lis.pb(i);\n\n    int ans=sum[N];\n\n    for(int i=0;i+1<lis.size();i++){\n        int x=lis[i];\n        int y=lis[i+1];\n        int tmp=sum[x];\n        tmp-=sumabs[y]-sumabs[x];\n        tmp+=sumabs[N]-sumabs[y];\n        chmax(ans,tmp);\n    }\n    cout<<ans<<endl;\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <cstring>\n#include <cmath>\n#include <queue>\n#include <vector>\n#include <time.h>\n#include <string>\n#include <stack>\n#include <set>\n#include <map>\n#include <iostream>\n#include <bitset>\n#include <algorithm>\nusing namespace std;\n#define MP make_pair\n#define PB push_back\n#define ms(a,b) memset((a),(b),sizeof(a))\ntypedef long long LL;\ntypedef unsigned long long uLL;\ntypedef pair<int, int> Pii;\ntypedef vector<int> Vi;\ntypedef vector<Pii> Vii;\nconst int inf = 0x3f3f3f3f;\nconst LL INF = (1uLL << 63) - 1;\nconst LL mod = 1000000007;\nconst int N = 150 + 5;\nconst double Pi = acos(-1.0);\nconst int maxn = 200005;\nusing namespace std;\nint n;\nint num[maxn];\nint pos[maxn];\nLL suff[maxn];\nchar op[5];\nint main() {\n#ifdef local\n    freopen(\"in\",\"r\",stdin);\n#endif\n    scanf(\"%d%d\",&n,&num[0]);\n    for(int i = 1; i < n; i++){\n        scanf(\"%s%d\",op,&num[i]);\n        if(op[0] == '-')num[i] *= -1;\n    }\n    for(int i = n - 1; i >= 0; i--){\n        suff[i] = suff[i+1] + abs(num[i]);\n    }\n    LL ans = -INF;\n    LL res = 0;\n    num[n] = -1;\n    for(int i = 0; i < n; i++){\n        if(num[i] < 0){\n            int j = i + 1;\n            LL ff = num[i];\n            while(j <= n && num[j] >= 0)ff -= num[j++];\n            res += ff;\n            ans = max(res + suff[j],ans);\n            res -= ff;\n            res += num[i];\n        }\n        else res += num[i];\n    }\n    ans = max(res,ans);\n    cout<<ans<<endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define int long long\n#define fi first\n#define se second\n#define PB push_back\nusing namespace std;\ntypedef pair<int, int> P1;\ntypedef pair<int, pair<int, int> > P2;\nstatic const int INF = 1ll<<60;\nstatic const int dx[] = { 1, -1, 0, 0, };\nstatic const int dy[] = { 0, 0, 1, -1 };\nstatic const int mod = 1000000007;\n\nint N;\nint A[100005];\nchar op[100005];\nint dp[100005][5];\n//    [i項目][i項目までに開いているかっこの数]\n\nint solve(){\n    for(int i=0;i<100005;++i)for(int j=0;j<5;++j)dp[i][j]=-INF;\n    dp[0][0] = A[0];\n    for(int i=0;i<N;++i){\n        for(int j=0;j<=min(i,3ll);++j){\n            int f;\n            if(j%2==0)f=1;\n            else f=-1;\n            int t1 = f*A[i+1];\n            //cout<<t1<<endl;\n            //cout<<i<<\" \"<<j<<endl;\n            if(op[i+1]=='+'){\n                dp[i+1][j] = max(dp[i][j]+t1,dp[i+1][j]);\n                if(j!=0)dp[i+1][j-1] = max(dp[i][j]+t1,dp[i+1][j-1]);\n            }\n            else {\n                dp[i+1][j] = max(dp[i][j]-t1,dp[i+1][j]);\n                dp[i+1][j+1] = max(dp[i][j]-t1,dp[i+1][j+1]);\n                if(j!=0)dp[i+1][j-1] = max(dp[i][j]-t1,dp[i+1][j-1]);\n            }\n            //cout<<i<<\" \"<<j<<endl;\n            //cout<<dp[i][j]<<\" \"<<dp[i+1][j]<<\" \"<<dp[i+1][j+1]<<endl;\n        }\n    }\n    int ans=-INF;\n    for(int i=0;i<N;++i)ans=max(dp[N][i],ans);\n    return ans;\n}\n\n\nsigned main(){\n    cin>>N;\n    op[0]='+';\n    for(int i=0;i<N;++i){\n        cin>>A[i];\n        if(i!=N-1)cin>>op[i+1];\n    }\n    cout<<solve()<<endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\nusing namespace std;\nlong dp[3],a;\nchar op;\nint n;\nmain()\n{\n\tcin>>n>>dp[0];\n\tdp[1]=dp[2]=-1e18;\n\tfor(int i=1;i<n;i++)\n\t{\n\t\tcin>>op>>a;\n\t\tif(op=='+')\n\t\t{\n\t\t\tdp[0]+=a;\n\t\t\tdp[2]+=a;\n\t\t\tdp[1]=max(dp[1]-a,dp[2]);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tdp[2]=dp[1]+a;\n\t\t\tdp[1]=max(dp[1]+a,dp[0]-a);\n\t\t\tdp[0]=max(dp[0]-a,dp[1]);\n\t\t}\n\t}\n\tcout<<dp[0]<<endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstdio>\n#include<algorithm>\n#include<cstring>\n\nusing namespace std;\n\nconst int MAXN = 100100;\ntypedef long long LL;\nconst LL INF = 1e16;\nchar opt[MAXN];\nint n,kind = 0;\nLL val[MAXN],ans = -INF,sum[MAXN];\n\ntemplate<typename T>\nvoid read(T &x)\n{\n\tx = 0;\n\tchar ch = getchar();\n\twhile(ch < '0' || ch > '9') ch = getchar();\n\twhile(ch >= '0' && ch <= '9')\n\t\tx = x * 10 + ch - '0',ch = getchar();\n}\n\nvoid init()\n{\n\tLL t1 = val[1],t2 = 0,temp;\n\tfor(int i = 1;i <= n-1;i++)\n\t{\n\t\tif(opt[i] == '+')\n\t\t{\n\t\t\tt1 += val[i+1];\n\t\t\tcontinue;\n\t\t} \n\t\tint now = i+1;temp = -val[i+1];\n\t\twhile(now < n && opt[now] == '+')\n\t\t{\n\t\t\tnow++;\n\t\t\ttemp -= val[now];\n\t\t}\n\t//\tprintf(\"%lld\\n\",t1+t2+temp+sum[n]-sum[now]);\n\t\tans = max(ans,t1 + t2 + temp + sum[n] - sum[now]);\n\t\tt2 -= val[i+1];\n\t}\n}\n\nint main()\n{\n\t//freopen(\"T2.in\",\"r\",stdin);\n\tread(n);\n\tfor(int i = 1;i <= n;i++)\n\t{\n\t\tscanf(\"%lld\",&val[i]);\n\t\tsum[i] = sum[i-1] + val[i];\n\t\tif(i != n) cin >> opt[i];\n\t}\n\tinit();\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}\n/*\n5\n1 - 100 - 50 - 10 - 5\n*/\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\nusing ll = long long;\n#define int ll\nusing PII = pair<int, int>;\ntemplate <typename T> using V = vector<T>;\ntemplate <typename T> using VV = vector<V<T>>;\ntemplate <typename T> using VVV = vector<VV<T>>;\n\n#define FOR(i, a, n) for (ll i = (ll)a; i < (ll)n; ++i)\n#define REP(i, n) FOR(i, 0, n)\n#define ALL(x) x.begin(), x.end()\n#define PB push_back\n\nconst ll INF = (1LL<<60);\nconst int MOD = 1000000007;\n\ntemplate <typename T> T &chmin(T &a, const T &b) { return a = min(a, b); }\ntemplate <typename T> T &chmax(T &a, const T &b) { return a = max(a, b); }\ntemplate <typename T> bool IN(T a, T b, T x) { return a<=x&&x<b; }\ntemplate<typename T> T ceil(T a, T b) { return a/b + !!(a%b); }\ntemplate<class S,class T>\nostream &operator <<(ostream& out,const pair<S,T>& a){\n  out<<'('<<a.first<<','<<a.second<<')';\n  return out;\n}\ntemplate<class T>\nostream &operator <<(ostream& out,const vector<T>& a){\n  out<<'[';\n  REP(i, a.size()) {out<<a[i];if(i!=a.size()-1)out<<',';}\n  out<<']';\n  return out;\n}\n\nint dx[] = {0, 1, 0, -1}, dy[] = {1, 0, -1, 0};\n\nsigned main(void)\n{\n  cin.tie(0);\n  ios::sync_with_stdio(false);\n\n  int n;\n  cin >> n;\n  V<int> a(n);\n  V<char> op(n);\n  op[0] = '+'; cin >> a[0];\n  FOR(i, 1, n) cin >> op[i] >> a[i];\n\n  V<int> b(n); b[0] = a[0];\n  FOR(i, 1, n) b[i] = b[i-1] + a[i];\n\n  V<int> v;\n  REP(i, n) if(op[i] == '-') v.PB(i);\n  V<int> nxt(n);\n  REP(i, v.size()-1) nxt[v[i]] = v[i+1];\n  nxt[v.back()] = n;\n\n  int now = 0;\n  REP(i, n) {\n    if(op[i]=='+') now += a[i];\n    else now -= a[i];\n  }\n\n  int ret = now; now = 0;\n  REP(i, n) {\n    if(op[i]=='+') {\n      now += a[i];\n    } else {\n      chmax(ret, now - (b[nxt[i]-1]-b[i-1]) + (b[n-1]-b[nxt[i]-1]));\n      now -= a[i];\n    }\n  }\n\n  cout << ret << endl;\n\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "\n/*\n　　　　　／＞　 フ\n　　　　　| 　_　 _|\n　 　　　／`ミ _x 彡\n　　 　 /　　　 　 |\n　　　 /　  ヽ　　 ?\n　／￣|　　 |　|　|\n　| (￣ヽ＿_ヽ_)_)\n　＼二つ\n */\n\n#include <queue>\n#include <vector>\n#include <iostream>\n#include <cstdio>\n#include <cstring>\n#include <algorithm>\n#define MP make_pair\n#define ll long long\n#define fi first\n#define se second\nusing namespace std;\n\ntemplate <typename T>\nvoid read(T &x) {\n    x = 0; bool f = 0;\n    char c = getchar();\n    for (;!isdigit(c);c=getchar()) if (c=='-') f=1;\n    for (;isdigit(c);c=getchar()) x=x*10+(c^48);\n    if (f) x=-x;\n}\n\ntemplate<typename F>\ninline void write(F x, char ed = '\\n') {\n\tstatic short st[30];short tp=0;\n\tif(x<0) putchar('-'),x=-x;\n\tdo st[++tp]=x%10,x/=10; while(x);\n\twhile(tp) putchar('0'|st[tp--]);\n\tputchar(ed);\n}\n\ntemplate <typename T>\ninline void Mx(T &x, T y) { x < y && (x = y); }\n\ntemplate <typename T>\ninline void Mn(T &x, T y) { x > y && (x = y); }\n\nconst int N = 200500;\nint n;\nchar s[5];\nll f[N][3];\nint op[N];\nint main() {\n\tmemset(f, -0x3f, sizeof(f));\n\tread(n); read(f[1][0]);\n\tfor (int i = 2, x;i <= n; i++) {\n\t\tread(x);\n\t\tf[i][0] = max(f[i-1][1], f[i-1][0]) + x;\n\t\tf[i][1] = max(f[i-1][1], f[i-1][2]) - x;\n\t\tf[i][2] = f[i-1][2] + x;\n\t\tif (x < 0) Mx(f[i][2], f[i][1]), Mx(f[i][1], f[i][0]);\n\t}\n\twrite(max(f[n][0], max(f[n][1], f[n][2])));\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define err(args...) {}\n#ifdef DEBUG\n#include \"_debug.cpp\"\n#endif\nusing namespace std;\nusing ll = long long;\nusing ld = long double;\ntemplate <typename T> using lim = numeric_limits<T>;\ntemplate <typename T> istream& operator>>(istream& is, vector<T>& a) { for(T& x : a) { is >> x; } return is; }\n\nint main() {\n    ios_base::sync_with_stdio(false);\n    cin.tie(0);\n    int n;\n    cin >> n;\n    vector<int> a(n), sgn(n);\n    for(int i = 0; i < n; i++) {\n        char c = '+';\n        if(i) cin >> c;\n        sgn[i] = c == '+' ? 1 : -1;\n        cin >> a[i];\n    }\n    const int N = 100'000;\n    static ll opt[N + 1][2][3];\n    for(int i = n; i >= 0; i--) {\n        for(int flipped = 0; flipped <= 1; flipped++) {\n            for(int has_flipped = 0; has_flipped <= 2; has_flipped++) {\n                ll& ans = opt[i][flipped][has_flipped];\n                if(i == n) {\n                    ans = 0;\n                } else {\n                    ans = a[i] * sgn[i] * (flipped ? -1 : 1) + opt[i + 1][flipped][has_flipped];\n                    if(sgn[i] == -1) {\n                        ans = max(ans, a[i] * sgn[i] * (flipped ? -1 : 1) + opt[i + 1][not flipped][min(has_flipped + 1, 2)]);\n                    }\n                    if(has_flipped >= 1) {\n                        ans = max(ans, a[i] * sgn[i] + opt[i + 1][0][1]);\n                    }\n                    if(has_flipped >= 2) {\n                        ans = max(ans, a[i] * sgn[i] * -1 + opt[i + 1][1][1]);\n                    }\n                }\n            }\n        }\n    }\n    cout << opt[0][0][0] << endl;\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define int long long \n\nusing namespace std;\n\nint32_t main() {\n    int n; cin >> n;\n    int ans; cin >> ans;\n\n    vector<pair<char, int>> a;\n    for (int i = 1; i < n; ++i) {\n        char sgn; int val; cin >> sgn >> val;\n        a.emplace_back(sgn, val);\n    }\n    n -= 1;\n\n    // Reduce until -\n    for (int i = 0; i <= n; ++i) {\n        if (i == n || a[i].first == '-') {\n            a.erase(a.begin(), a.begin() + i);\n            break;\n        } else {\n            ans += a[i].second;\n        }\n    }\n\n    if (a.empty()) {\n        cout << ans << endl;\n        return 0;\n    }\n    \n    cerr << \"HERE\" << endl;    \n    n = a.size(); \n    ans -= a[0].second;\n    for (int i = 1; i <= n; ++i) {\n        if (i == n || a[i].first == '-') {\n            a.erase(a.begin(), a.begin() + i);\n            break;\n        } else {\n            ans -= a[i].second;\n        }\n    }\n    for (auto p : a)\n        ans += p.second;\n\n    cout << ans << endl;\n        \n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\n#include<vector>\n#include<complex>\nusing namespace std;\n#define chmax(a,b) a=max(a,b);\ntypedef long long ll;\ntypedef pair<ll,ll> P;\n#define N 100010\nvector<ll> v;\nll n,s[N];\nint main(){\n  cin>>n; char op='+';\n  ll befpo=-1;\n  for(int i=0;i<n;i++){\n    if(i)cin>>op; ll a;cin>>a;\n    if(op=='+'){\n      if(~befpo)befpo+=a;\n      else befpo=a;\n    }\n    else{\n      if(~befpo)v.push_back(befpo); befpo=-1;\n      v.push_back(-a);\n    }\n  }if(~befpo)v.push_back(befpo);\n  n=v.size(); s[n]=0;\n  for(int i=n-1;i>=0;i--){\n    s[i]=s[i+1]+abs(v[i]);\n  }\n  //for(int i=0;i<n;i++)cout<<v[i]<<\" \";cout<<endl;\n  ll ans=-1e17,sum=0;\n  for(int i=0;i<n-1;i++){\n    sum+=v[i];\n    if(v[i]>0)continue;\n    chmax(ans,sum+-v[i+1]+s[i+2]);\n  }\n  sum+=v[n-1]; chmax(ans,sum);\n  cout<<ans<<endl;\n    return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#include <ext/pb_ds/assoc_container.hpp>\n#include <ext/pb_ds/tree_policy.hpp>\n \nusing namespace std;\nusing namespace __gnu_pbds;\n \n#define fi first\n#define se second\n#define mp make_pair\n#define pb push_back\n#define fbo find_by_order\n#define ook order_of_key\n \ntypedef long long ll;\ntypedef pair<int,int> ii;\ntypedef vector<int> vi;\ntypedef long double ld; \ntypedef tree<int, null_type, less<int>, rb_tree_tag, tree_order_statistics_node_update> pbds;\ntypedef set<int>::iterator sit;\ntypedef map<int,int>::iterator mit;\ntypedef vector<int>::iterator vit;\n\nvector<ll> dq;\nvector<ll> S;\n\nint main()\n{\n\tios_base::sync_with_stdio(0); cin.tie(0);\n\tint n; cin>>n;\n\tdq.pb(0); S.pb(0);\n\tll sum=0;\n\tfor(int i=0;i<n;i++)\n\t{\n\t\tchar c='+';\n\t\tif(i>0) \n\t\t{\n\t\t\tcin>>c;\n\t\t}\n\t\tll x; cin>>x;\n\t\tsum+=x;\n\t\tif(c=='+')\n\t\t{\n\t\t\tS.back()+=x;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tS.pb(0);\n\t\t\tdq.pb(x);\n\t\t}\n\t}\n\tif(dq.size()==1)\n\t{\n\t\tcout<<sum<<'\\n';\n\t\treturn 0;\n\t}\n\tll ans = -ll(1e18);\n\tfor(int i=1;i<S.size();i++)\n\t{\n\t\tans=max(ans, sum - 2LL*(S[i]+dq[i]));\n\t\tsum-=2LL*dq[i];\n\t}\n\tans = max(ans, sum);\n\tcout<<ans<<'\\n';\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\ntypedef long long ll;\nll gi(){\n\tll x=0,f=1;\n\tchar ch=getchar();\n\twhile(!isdigit(ch))f^=ch=='-',ch=getchar();\n\twhile(isdigit(ch))x=x*10+ch-'0',ch=getchar();\n\treturn f?x:-x;\n}\nstd::mt19937 rnd(time(NULL));\n#define rand rnd\n#define pr std::pair<int,int>\n#define all(x) (x).begin(),(x).end()\n#define fi first\n#define se second\ntemplate<class T>void cxk(T&a,T b){a=a>b?a:b;}\ntemplate<class T>void cnk(T&a,T b){a=a<b?a:b;}\n#ifdef mod\nint pow(int x,int y){\n\tint ret=1;\n\twhile(y){\n\t\tif(y&1)ret=1ll*ret*x%mod;\n\t\tx=1ll*x*x%mod;y>>=1;\n\t}\n\treturn ret;\n}\ntemplate<class Ta,class Tb>void inc(Ta&a,Tb b){a=a+b>=mod?a+b-mod:a+b;}\ntemplate<class Ta,class Tb>void dec(Ta&a,Tb b){a=a>=b?a-b:a+mod-b;}\n#endif\nint A[100010];char ch[100010];\nll f[100010][3];\nint main(){\n#ifdef LOCAL\n\tfreopen(\"in.in\",\"r\",stdin);\n\t//freopen(\"out.out\",\"w\",stdout);\n#endif\n\tint n=gi();\n\tfor(int i=1;i<=n;++i)A[i]=gi(),ch[i]=getchar();\n\tfor(int i=1;i<=n;++i)if(ch[i]=='-')A[i+1]*=-1;\n\t++n;\n\tmemset(f,-63,sizeof f);\n\tf[0][0]=0;\n\tfor(int i=1;i<=n;++i)\n\t\tfor(int j=0;j<3;++j){\n\t\t\tfor(int k=j;k<3;++k)cxk(f[i][j],f[i-1][k]+A[i]*(j&1?-1:1));\n\t\t\tif(A[i]<0&&j)cxk(f[i][j],f[i-1][j-1]+A[i]*(~j&1?-1:1));\n\t\t}\n\tprintf(\"%lld\\n\",f[n][0]);\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<cstring>\n#include<algorithm>\n\nusing namespace std;\ntypedef long long ll;\nconst ll inf=1LL<<61;\nconst int N=100100;\nint n;ll a[N],f[2][N];\nchar s[N];ll op[N];\n\nll cg(int x){return (x&1)?-1:1;}\nint main(){\n\tscanf(\"%d\",&n);op[1]=1;\n\tfor (int i=1;i<n;i++){\n\t\tscanf(\"%d%s\",a+i,s);\n\t\tif (s[0]=='-')\n\t\t\top[i+1]=-1; else op[i+1]=1;\n\t}\n\tscanf(\"%d\",&a[n]);\n\tf[0][1]=a[1];f[1][1]=f[2][1]=-inf;\n\tfor (int i=2;i<=n;i++){\n\t\tfor (int j=0;j<=2;j++) f[j][i]=-inf;\n\t\tfor (int j=0;j<=2;j++)\n\t\t\tfor (int k=0;k<=j;k++)\n\t\t\t\tf[k][i]=max(f[k][i],f[j][i-1]+op[i]*a[i]*cg(k));\n\t\tif (op[i]==-1){\n\t\t\tfor (int j=2;j;j--)\n\t\t\t\tf[j][i]=max(f[j][i],f[j-1][i]);\n\t\t}\n\t}\n\tprintf(\"%lld\\n\",max(max(f[0][n],f[1][n]),f[2][n]));\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing std::cin;\nusing std::cout;\nusing std::pair;\nusing std::vector;\nconst int Maxn = 100005, mod = 1e9 + 7;\nconst long long inf = 0x3f3f3f3f3f3f3f3f;\nvoid cmax( long long &x, long long y )\n{\n// cout << \"x\" << x;\n if( y > x )\n  x = y;\n return; \n}\nint n;\nlong long f[ Maxn ][ 3 ];\ninline long long read( )\n{\n int x = 0;\n char ch = getchar( );\n bool f = 0;\n while( !isdigit( ch ) )\n  f |= ch == '-',\n  ch = getchar( );\n while( isdigit( ch ) )\n {\n  x = x * 10 + ch - '0';\n  ch = getchar( );\n }\n return f ? -x : x;\n}\nint main( )\n{\n n = read( );\n f[ 0 ][ 0 ] = 0;\n f[ 0 ][ 1 ] = f[ 0 ][ 2 ] = -inf;\n for( int i = 1, x; i <= n; ++i )\n {\n  x = read( );\n  f[ i ][ 0 ] = std::max( f[ i - 1 ][ 0 ], f[ i - 1 ][ 1 ] );\n  f[ i ][ 1 ] = std::max( f[ i - 1 ][ 1 ], f[ i - 1 ][ 2 ] );\n  f[ i ][ 2 ] = f[ i - 1 ][ 2 ];\n  f[ i ][ 2 ] += x;\n  f[ i ][ 1 ] -= x;\n  f[ i ][ 0 ] += x;\n  if( x < 0 )\n   cmax( f[ i ][ 2 ], f[ i ][ 1 ] ),\n   cmax( f[ i ][ 1 ], f[ i ][ 0 ] );\n//  cout << f[ i ][ 0 ] << \" \" << f[ i ][ 1 ] << \" \" << f[ i ][ 2 ] << '\\n';\n }\n printf( \"%lld\", std::max( f[ n ][ 0 ], std::max( f[ n ][ 1 ], f[ n ][ 2 ] ) ) );\n return 0;\n}"
  },
  {
    "language": "C++",
    "code": "/**\n *    author:  otera    \n**/\n#include<iostream>\n#include<string> \n#include<cstdio>\n#include<cstring>\n#include<vector>\n#include<cmath>\n#include<algorithm> \n#include<functional>\n#include<iomanip>\n#include<queue>\n#include<deque>\n#include<ciso646>\n#include<random>\n#include<map>\n#include<set>\n#include<complex>\n#include<bitset>\n#include<stack>\n#include<unordered_map>\n#include<utility>\n#include<cassert>\nusing namespace std;\n\n#define int long long\ntypedef long long ll;\ntypedef unsigned long long ul;\ntypedef unsigned int ui;\ntypedef long double ld;\nconst int inf=1e9+7;\nconst ll INF=1LL<<60 ;\nconst ll mod=1e9+7 ;\n#define rep(i,n) for(int i=0;i<n;i++)\n#define per(i,n) for(int i=n-1;i>=0;i--)\n#define Rep(i,sta,n) for(int i=sta;i<n;i++)\n#define rep1(i,n) for(int i=1;i<=n;i++)\n#define per1(i,n) for(int i=n;i>=1;i--)\n#define Rep1(i,sta,n) for(int i=sta;i<=n;i++)\ntypedef complex<ld> Point;\nconst ld eps = 1e-8;\nconst ld pi = acos(-1.0);\ntypedef pair<int, int> P;\ntypedef pair<ld, ld> LDP;\ntypedef pair<ll, ll> LP;\n#define fr first\n#define sc second\n#define all(c) c.begin(),c.end()\n#define pb push_back\n#define debug(x)  cerr << #x << \" = \" << (x) << endl;\ntemplate<class T> inline bool chmax(T& a, T b) { if (a < b) { a = b; return 1; } return 0; }\ntemplate<class T> inline bool chmin(T& a, T b) { if (a > b) { a = b; return 1; } return 0; }\n\nvoid solve() {\n\tint n; cin >> n;\n    static int dp[100100][3];\n    rep(i, 100100) {\n        rep(j, 3) {\n            dp[i][j] = -INF;\n        }\n    }\n    int x; char c;\n    cin >> x;\n    dp[0][0] = x;\n    rep(i, n - 1) {\n        cin >> c >> x;\n        if(c == '+') {\n            chmax(dp[i + 1][0], dp[i][0] + x);\n            chmax(dp[i + 1][1], dp[i][1] - x);\n            chmax(dp[i + 1][0], dp[i][1] + x);\n            chmax(dp[i + 1][2], dp[i][2] + x);\n            chmax(dp[i + 1][1], dp[i][2] - x);\n            chmax(dp[i + 1][0], dp[i][2] + x);\n        } else {\n            chmax(dp[i + 1][0], dp[i][0] - x);\n            chmax(dp[i + 1][1], dp[i][0] - x);\n            chmax(dp[i + 1][0], dp[i][1] - x);\n            chmax(dp[i + 1][1], dp[i][1] + x);\n            chmax(dp[i + 1][2], dp[i][1] + x);\n            chmax(dp[i + 1][0], dp[i][2] - x);\n            chmax(dp[i + 1][1], dp[i][2] + x);\n            chmax(dp[i + 1][2], dp[i][2] - x);\n        }\n    }\n    cout << *max_element(dp[n - 1], dp[n - 1] + 3) << endl;\n}\n\nsigned main() {\n\tios::sync_with_stdio(false);\n\tcin.tie(0);\n\t//cout << fixed << setprecision(10);\n\t//int t; cin >> t; rep(i, t)solve();\n\tsolve();\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\n#if MYDEBUG\n#include \"lib/cp_debug.hpp\"\n#else\n#define DBG(...) ;\n#endif\n#if __cplusplus <= 201402L\ntemplate <typename T>\nT gcd(T a, T b) { return ((a % b == 0) ? b : gcd(b, a % b)); }\ntemplate <typename T>\nT lcm(T a, T b) { return a / gcd(a, b) * b; }\n#endif\nusing LL = long long;\nconstexpr LL LINF = 334ll << 53;\nconstexpr int INF = 15 << 26;\nconstexpr LL MOD = 1E9 + 7;\n\nnamespace Problem {\nusing namespace std;\n\nclass Solver {\n public:\n  int n;\n  vector<LL> a;\n  vector<int> op;\n  vector<vector<LL>> dp;\n  Solver(LL n) : n(n), a(n), op(n), dp(n, vector<LL>(2)){};\n\n  void solve() {\n    op[0] = 1;\n    for (int i = 0; i < n; ++i) {\n      cin >> a[i];\n      if (i < n - 1) {\n        char c;\n        cin >> c;\n        op[i + 1] = (c == '+' ? 1 : -1);\n      }\n    }\n    if (n == 1) {\n      cout << a[0] << endl;\n    } else if (n == 2) {\n      cout << a[0] + a[1] * op[1] << endl;\n    } else {\n      int cumsum = 0;\n      dp[0][0] = a[0];\n      dp[0][1] = -LINF;\n      dp[1][0] = a[0] + a[1] * op[1];\n      dp[1][1] = -LINF;\n      for (int i = 2; i < n; ++i) {\n        if (op[i - 1] == 1) {\n          dp[i][0] = max(dp[i - 1][0], dp[i - 1][1]) + a[i] * op[i];\n          if (cumsum <= -2)\n            dp[i][1] = max(dp[i - 1][0], dp[i - 1][1]) - a[i] * op[i];\n          else\n            dp[i][1] = dp[i - 1][1] - a[i] * op[i];\n        } else {\n          dp[i][0] = max(dp[i - 1][0], dp[i - 1][1]) + a[i] * op[i];\n          dp[i][1] = max(dp[i - 1][0], dp[i - 1][1]) - a[i] * op[i];\n        }\n        cumsum += op[i - 1];\n      }\n      cout << max(dp[n - 1][0], dp[n - 1][1]) << endl;\n    }\n  }\n};\n\n}  // namespace Problem\n\nint main() {\n  std::cin.tie(0);\n  std::ios_base::sync_with_stdio(false);\n  // std::cout << std::fixed << std::setprecision(12);\n  long long n = 0;\n  std::cin >> n;\n\n  Problem::Solver sol(n);\n  sol.solve();\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<stdio.h>\n#include<stdlib.h>\n#include<string.h>\n#include<math.h>\n#include<iostream>\n#include<algorithm>\n#include<stack>\n#include<queue>\n#include<vector>\n#include<set>\n#include<map>\n#include<string>\nusing namespace std;\ntypedef long long ll;\ntypedef pair<int,int>P;\nconst int INF=0x3f3f3f3f;\nconst double pi=acos(-1.0);\nconst double eps=1e-9;\nconst ll mod=1e9+7;\nll dp[100010][3];\nll a;char c;int n;\nint main()\n{\n    cin>>n>>a;\n    memset(dp,-0x3f3f3f3f3f3f3f3f,sizeof(dp));\n    dp[0][0]=a;\n    for(int i=1;i<n;i++)\n    {\n        scanf(\" %c%d\",&c,&a);\n        if(c=='+')\n        {\n            dp[i][2]=dp[i-1][2]+a;\n            dp[i][1]=max(dp[i-1][1]-a,dp[i-1][2]+a);\n            dp[i][0]=max(dp[i-1][0]+a,max(dp[i-1][1]-a,dp[i-1][2]+a));\n        }\n        else\n        {\n            dp[i][2]=dp[i-1][1]+a;\n            dp[i][1]=max(dp[i-1][1]+a,max(dp[i-1][2]-a,dp[i-1][0]-a));\n        }\n\n    }\n    printf(\"%lld\\n\",max(dp[n-1][0],max(dp[n-1][1],dp[n-1][2])));\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\n#define ll long long\n#define ull unsigned long long\n#define re register\n#define il inline\n#define inf 0x3f3f3f\n\nint read();\n\nint n;\nlong long f[100005][3];\nvoid chmax(long long &x, long long y) { x = x > y ? x : y; }\n\nint main() {\n  n = read();\n  f[0][0] = 0, f[0][1] = f[0][2] = -inf;\n  for (int i = 1, x; i <= n; ++i) {\n    x = read();\n    {\n      f[i][0] = max(f[i - 1][0], f[i - 1][1]),\n      f[i][1] = max(f[i - 1][1], f[i - 1][2]);\n      f[i][2] = f[i - 1][2];\n    }\n    f[i][0] += x, f[i][1] -= x, f[i][2] += x;\n    if (x < 0)\n      chmax(f[i][2], f[i][1]), chmax(f[i][1], f[i][0]);\n  }\n  printf(\"%lld\\n\", max(f[n][0], max(f[n][1], f[n][2])));\n  return 0;\n}\n\nint read() {\n  int x = 0, f = 1;\n  char c = getchar();\n  while (c < '0' || c > '9')\n    f = (c == '-') ? -1 : f, c = getchar();\n  while (c >= '0' && c <= '9')\n    x = x * 10 + c - '0', c = getchar();\n  return x * f;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <cctype>\n#include <cstring>\n#include <algorithm>\n#define repu(i,x,y) for (int i=x; i<=y; ++i)\nusing namespace std;\n\ntypedef long long LL;\nint n;\nLL f[100100][3];\n\nint getint()\n{\n    char ch;\n    while (!isdigit(ch=getchar()));\n    int x=ch-'0';\n    for (; isdigit(ch=getchar()); x=x*10+ch-'0');\n    return x;\n}\n\nint main()\n{\n    n=getint();\n    memset(f,200,sizeof(f)),f[1][0]=getint();\n    repu(i,2,n)\n    {\n        char ch=getchar();\n        int x=getint();\n        if (ch=='+')\n        {\n            f[i][0]=max(f[i-1][0]+x,f[i-1][1]-x);\n            f[i][1]=max(f[i-1][1]-x,f[i-1][2]+x);\n            f[i][2]=f[i-1][2]+x;\n        }\n        else\n        {\n            f[i][0]=max(f[i-1][0]-x,f[i-1][1]+x);\n            f[i][1]=max(max(f[i-1][0],f[i-1][2])-x,f[i-1][1]+x);\n            f[i][2]=max(f[i-1][1]+x,f[i-1][2]-x);\n        }\n    }\n    printf(\"%lld\\n\",max(f[n][0],max(f[n][1],f[n][2])));\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n#define r(i,n) for(int i=0;i<n;i++)\nint a[100009],dp[100009][4];\nstring s[100009];\nint main(){\n  r(i,100009)r(j,4)dp[i][j]=-(1e8);\n  int ans,n;\n  cin>>n>>ans;n--;\n  r(i,n)cin>>s[i]>>a[i];\n  dp[0][0]=0;\n  for(int i=0;i<n;i++){\n    if(s[i]==\"+\"){\n      dp[i+1][0]=max(dp[i+1][0],max(dp[i][0]+a[i],dp[i][1]+a[i]));\n      dp[i+1][1]=max(dp[i+1][1],max(dp[i][1]-a[i],dp[i][2]-a[i]));\n      dp[i+1][2]=max(dp[i+1][2],dp[i][2]+a[i]);\n    }\n    else{\n      dp[i+1][0]=max(dp[i+1][0],max(dp[i][0]-a[i],dp[i][1]-a[i]));\n      dp[i+1][1]=max(dp[i+1][1],max(dp[i][0]-a[i],max(dp[i][1]+a[i],dp[i][2]+a[i])));\n      dp[i+1][2]=max(dp[i+1][2],max(dp[i][2]-a[i],dp[i][1]+a[i]));\n    }\n  }\n  cout<<ans+max(dp[n][0],max(dp[n][1],dp[n][2]))<<endl;\n}"
  },
  {
    "language": "C++",
    "code": "/**\n *    author:  otera    \n**/\n#include<iostream>\n#include<string> \n#include<cstdio>\n#include<cstring>\n#include<vector>\n#include<cmath>\n#include<algorithm> \n#include<functional>\n#include<iomanip>\n#include<queue>\n#include<deque>\n#include<ciso646>\n#include<random>\n#include<map>\n#include<set>\n#include<complex>\n#include<bitset>\n#include<stack>\n#include<unordered_map>\n#include<utility>\n#include<cassert>\nusing namespace std;\n\n#define int long long\ntypedef long long ll;\ntypedef unsigned long long ul;\ntypedef unsigned int ui;\ntypedef long double ld;\nconst int inf=1e9+7;\nconst ll INF=1LL<<60 ;\nconst ll mod=1e9+7 ;\n#define rep(i,n) for(int i=0;i<n;i++)\n#define per(i,n) for(int i=n-1;i>=0;i--)\n#define Rep(i,sta,n) for(int i=sta;i<n;i++)\n#define rep1(i,n) for(int i=1;i<=n;i++)\n#define per1(i,n) for(int i=n;i>=1;i--)\n#define Rep1(i,sta,n) for(int i=sta;i<=n;i++)\ntypedef complex<ld> Point;\nconst ld eps = 1e-8;\nconst ld pi = acos(-1.0);\ntypedef pair<int, int> P;\ntypedef pair<ld, ld> LDP;\ntypedef pair<ll, ll> LP;\n#define fr first\n#define sc second\n#define all(c) c.begin(),c.end()\n#define pb push_back\n#define debug(x)  cerr << #x << \" = \" << (x) << endl;\ntemplate<class T> inline bool chmax(T& a, T b) { if (a < b) { a = b; return 1; } return 0; }\ntemplate<class T> inline bool chmin(T& a, T b) { if (a > b) { a = b; return 1; } return 0; }\n\nvoid solve() {\n\tint n; cin >> n;\n    static int dp[100100][3];\n    rep(i, 100100) {\n        rep(j, 3) {\n            dp[i][j] = -INF;\n        }\n    }\n    int x; char c;\n    cin >> x;\n    dp[0][0] = x;\n    rep(i, n - 1) {\n        cin >> c >> x;\n        if(c == '+') {\n            chmax(dp[i + 1][0], dp[i][0] + x);\n            chmax(dp[i + 1][1], dp[i][1] - x);\n            chmax(dp[i + 1][0], dp[i][1] + x);\n            chmax(dp[i + 1][2], dp[i][2] + x);\n            chmax(dp[i + 1][1], dp[i][2] + x);\n            chmax(dp[i + 1][0], dp[i][2] + x);\n        } else {\n            chmax(dp[i + 1][0], dp[i][0] - x);\n            chmax(dp[i + 1][1], dp[i][0] - x);\n            chmax(dp[i + 1][0], dp[i][1] - x);\n            chmax(dp[i + 1][1], dp[i][1] + x);\n            chmax(dp[i + 1][2], dp[i][1] + x);\n            chmax(dp[i + 1][0], dp[i][2] - x);\n            chmax(dp[i + 1][1], dp[i][2] + x);\n            chmax(dp[i + 1][2], dp[i][2] - x);\n        }\n    }\n    cout << *max_element(dp[n - 1], dp[n - 1] + 3) << endl;\n}\n\nsigned main() {\n\tios::sync_with_stdio(false);\n\tcin.tie(0);\n\t//cout << fixed << setprecision(10);\n\t//int t; cin >> t; rep(i, t)solve();\n\tsolve();\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <string.h>\n#include <stdio.h>\n#include <map>\n#include <vector>\n#include <math.h>\n#include <algorithm>\n#include <queue>\n#include <set>\n#include <tuple>\nusing namespace std;\n\n#define rep(i,a) for(int i=0; i<a; i++)\n#define rrep(i,a) for(int i=a; i>=0; i--)\n#define rep1(i,a) for(int i=1; i<=a; i++)\n#define cout1(a) cout << a << endl;\n#define cout2(a,b) cout << a << \" \" << b << endl;\n#define cout3(a,b,c) cout << a << \" \" << b << \" \" << c << endl;\n#define cout4(a,b,c,d) cout << a << \" \" << b << \" \" << c << \" \" << d << endl;\n#define mem(a,n) memset( a, n, sizeof(a))\n#define all(a) a.begin(),a.end()\n\ntypedef long long ll;\ntypedef long double ld;\ntypedef pair<int,int> pii;\ntypedef vector<int> V;\ntypedef vector<V> VV;\ntypedef vector<VV> VVV;\nconst int INF = 1e9;\nconst int MOD = 1e9+7;\nconst ll LLINF = 1e18;\nstatic const double pi = 3.141592653589793;\n\nll dp[100009][3];\n\nint main() {\n    cin.tie(0);\n    ios::sync_with_stdio(false);\n    \n    int N, x;\n    string s;\n    cin>>N>>x;\n    mem(dp,0xcf);\n    dp[0][0] = x;\n    rep(i,N-1){\n        cin>>s>>x;\n        ll T[3];\n        if(s==\"+\"){\n            T[0]=dp[i][0];\n            T[1]=dp[i][1];\n            T[2]=dp[i][2];\n        }else{\n            T[0]=T[2]=dp[i][1];\n            T[1]=max(dp[i][0],dp[i][2]);\n        }\n        dp[i+1][2]=T[2]+x;\n        dp[i+1][1]=max(dp[i+1][2],T[1]-x);\n        dp[i+1][0]=max(dp[i+1][1],T[0]+x);\n    }\n    cout1(*max_element(dp[N-1],dp[N-1]+3));\n}"
  },
  {
    "language": "C++",
    "code": "#include<algorithm>\n#include<iostream>\n#include<cstring>\n#include<cstdio>\n#include<cmath>\n#define LL long long\n#define M 100020\n#define INF 100000000000000000ll\nusing namespace std;\nLL read(){\n\tLL nm=0,fh=1; LL cw=getchar();\n\tfor(;!isdigit(cw);cw=getchar()) if(cw=='-') fh=-fh;\n\tfor(;isdigit(cw);cw=getchar()) nm=nm*10+(cw-'0');\n\treturn nm*fh;\n}\nLL n,x,F[3],G[3];\nint main(){\n\tn=read(),G[1]=G[2]=-INF;\n\twhile(n--){\n\t\tx=read(),F[0]=G[0]+x,F[1]=G[1]-x,F[2]=G[2]+x;\n\t\tif(x<0) F[2]=max(F[1],F[2]),F[1]=max(F[1],F[0]);\n\t\tF[0]=max(F[0],F[1]),F[1]=max(F[1],F[2]);\n\t\tG[0]=F[0],G[1]=F[1],G[2]=F[2];\n\t}\n\tprintf(\"%lld\\n\",F[0]);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define ll long long\n#define lf double\n#define E complex<lf>\n#define eps 1e-9\n#define inf 0x7fffffff\n#define l(x) (x<<1)\n#define r(x) (x<<1|1)\n#define pa pair<int,int>\n#define pb push_back\n#define mod\n#define FIO \"problem\"\n#define N 100010\nusing namespace std;\ninline int read() {\n\tint x=0,f=1;char c=getchar();\n\twhile (c<'0'||c>'9') f=(c=='-')?-1:1,c=getchar();\n\twhile (c>='0'&&c<='9') x=x*10+c-'0',c=getchar();\n\treturn x*f;\n}\ninline void fre() {\n\tfreopen(FIO\".in\",\"r\",stdin);\n\tfreopen(FIO\".out\",\"w\",stdout);\n}\nint n;\nint num[N],opt[N];\nll sum;\nint sta[N],top=0;\nint main() {\n\tfre();\n\tn=read();\n\tfor (int i=1; i<n; i++) {\n\t\tnum[i]=read(),sum+=num[i];\n\t\tchar s[5];\n\t\tscanf(\"%s\",s);\n\t\tif (s[0]=='-') opt[i]=-1;\n\t\telse opt[i]=1;\n\t}\n\tnum[n]=read(),sum+=num[n];\n\tll ans=-inf,hhh=0;\n\tfor (int i=1; i<n; i++) if (opt[i]==-1) {\n\t\tll tmp=sum;\n\t\tll sum2=num[i+1];\n\t\tfor (int j=i+1; j<n; j++) {\n\t\t\tif (opt[j]==1) sum2+=num[j+1];\n\t\t\telse break;\n\t\t}\n\t\ttmp-=2*(sum2+hhh);\n\t\tans=max(ans,tmp);\n\t\thhh+=num[i+1];\n\t}\n\tans=max(ans,sum-2*hhh);\n\tcout << ans << endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<algorithm>\n#include<cassert>\n#define ll long long\nusing namespace std;\ninline int read(){\n\tint re=0,flag=1;char ch=getchar();\n\twhile(!isdigit(ch)){\n\t\tif(ch=='-') flag=-1;\n\t\tch=getchar();\n\t}\n\twhile(isdigit(ch)) re=(re<<1)+(re<<3)+ch-'0',ch=getchar();\n\treturn re*flag;\n}\nint n,ch[100010];ll a[100010];\nll dp0,dp1,dp2;\nint main(){\n\tn=read();int i;char c;\n\tfor(i=1;i<=n;i++){\n\t\ta[i]=read();\n\t\tif(i==n) break;\n\t\tc=getchar();\n\t\twhile(c!='+'&&c!='-') c=getchar();\n\t\tch[i+1]=(c=='-');\n//\t\tcout<<\"finish readin \"<<i<<' '<<a[i]<<' '<<ch[i+1]<<'\\n';\n\t}\n\tdp0=0;dp1=dp2=-1e15;\n\tfor(i=1;i<=n;i++){\n\t\tif(ch[i]){\n\t\t\tdp0-=a[i];\n\t\t\tdp1+=a[i];\n\t\t\tdp2-=a[i];\n\t\t\tif(dp1>dp2) dp2=dp1;\n\t\t\tif(dp0>dp2) dp1=dp0;\n\t\t}\n\t\telse{\n\t\t\tdp0+=a[i];\n\t\t\tdp1-=a[i];\n\t\t\tdp2+=a[i];\n\t\t}\n\t\tif(dp2>dp1) dp1=dp2;\n\t\tif(dp1>dp0) dp0=dp1;\n\t}\n\tcout<<dp0<<'\\n';\n}"
  },
  {
    "language": "C++",
    "code": "/*input\n5\n1 - 20 - 13 + 14 - 5\n*/\n#include<bits/stdc++.h>\n#include <ext/pb_ds/assoc_container.hpp>\n#include <ext/pb_ds/tree_policy.hpp>\nusing namespace std;\nusing namespace __gnu_pbds;\n\n#define int long long \n#define double long double\n#define f first\n#define s second\n#define mp make_pair\n#define pb push_back\n\n#define RE(i,n) for (int i = 1; i <= n; i++)\n#define RED(i,n) for (int i = n; i > 0; i--)\n#define REPS(i,n) for(int i = 1; (i*i) <= n; i++)\n#define REP(i,n) for (int i = 0; i < (int)n; i++)\n#define FOR(i,a,b) for (int i = a; i < b; i++)\n#define REPD(i,n) for (int i = n-1; i >= 0; i--)\n#define FORD(i,a,b) for (int i = a; i >= b; i--)\n\n#define all(v) v.begin(),v.end()\n#define pii pair<int,int>\n#define vi vector<int>\n#define vvi vector<vi>\n#define print(arr) for (auto it = arr.begin(); it != arr.end(); ++it) cout << *it << \" \"; cout << endl;\n#define debug(x) cout << x << endl;\n#define debug2(x,y) cout << x << \" \" << y << endl;\n#define debug3(x,y,z) cout << x << \" \" << y << \" \" << z << endl;\n\ntypedef tree<\nint,\nnull_type,\nless<int>,\nrb_tree_tag,\ntree_order_statistics_node_update>\nordered_set;\n\nconst int INF = 1e18+1;\nconst int MOD = 1e9+7;\nconst double PI = 3.14159265358979323846264338;\n\nint raise(int a,int n,int m = MOD){\n  if(n == 0)return 1;\n  if(n == 1)return a;\n  int x = 1;\n    x *= raise(a,n/2,m);\n    x %= m;\n    x *= x;\n    x %= m;\n    if(n%2)x*= a;\n    x %= m;\n    return x;\n}\n\nint floor1(int n,int k){\n    if(n%k == 0 || n >= 0)return n/k;\n    return (n/k)-1;\n}\n\nint ceil1(int n,int k){\n    return floor1(n+k-1,k);\n}\n\nconst int N = 1e5+1;\nint prefr[N];\nint prefa[N];\nint n;\nint a[N];\nint op[N];\n\nvoid solve(){\n  \tcin >> n;\n  \top[1] = 1;\n  \tcin >> a[1];\n  \tprefr[1] = prefa[1] = a[1];\n  \tfor(int i = 2;i <= n;i++){\n  \t\tchar o;cin >> o;\n  \t\top[i] = -1+2*(o == '+');\n  \t\tcin >> a[i];\n  \t\tprefr[i] = prefr[i-1]+a[i]*op[i];\n  \t\tprefa[i] = prefa[i-1]+a[i];\n  \t}\n  \tint ans = prefr[n];\n  \tfor(int i = 1;i <= n;i++){\n  \t\tif(op[i] == -1){\n  \t\t\tfor(int j = i+1;j <= n;j++){\n  \t\t\t\tif(op[j] == -1){\n  \t\t\t\t\tint one = prefr[i-1]+prefa[n]-prefa[j-1]-(prefa[j-1]-prefa[i-1]);\n  \t\t\t\t//\tcout << i << \" \" << j << \" \" << one << endl;\n  \t\t\t\t\tans = max(ans,one);\n  \t\t\t\t\tbreak;\n  \t\t\t\t}\n  \t\t\t}\n  \t\t}\n  \t}\n  \tcout << ans;\n}\n\nsigned main(){\n  ios_base::sync_with_stdio(0);cin.tie(0);cout.tie(0);\n  //freopen(\".in\",\"r\",stdin);freopen(\".out\",\"w\",stdout);\n  int t = 1;\n  //cin >> t;\n  while(t--){\n    solve();\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\ntypedef signed long long ll;\n\n#undef _P\n#define _P(...) (void)printf(__VA_ARGS__)\n#define FOR(x,to) for(x=0;x<(to);x++)\n#define FORR(x,arr) for(auto& x:arr)\n#define ITR(x,c) for(__typeof(c.begin()) x=c.begin();x!=c.end();x++)\n#define ALL(a) (a.begin()),(a.end())\n#define ZERO(a) memset(a,0,sizeof(a))\n#define MINUS(a) memset(a,0xff,sizeof(a))\n//-------------------------------------------------------\n\nint N;\nll dp[101010][2];\n\nvoid solve() {\n\tint i,j,k,l,r,x,y; string s;\n\t\n\tcin>>N;\n\tcin>>x;\n\tmemset(dp,0xcf,sizeof(dp));\n\tdp[0][0]=x;\n\t\n\tFOR(i,N-1) {\n\t\tcin>>s>>x;\n\t\t\n\t\tll T[2];\n\t\tif(s==\"+\") {\n\t\t\tT[0]=dp[i][0];\n\t\t\tT[1]=dp[i][1];\n\t\t\t//T[2]=dp[i][2];\n\t\t}\n\t\telse {\n\t\t\t//T[0]=T[2]=dp[i][1];\n\t\t\tT[0]=dp[i][1];\n\t\t\tT[1]=dp[i][0];\n\t\t}\n\t\tdp[i+1][1] = T[1]-x;\n\t\tdp[i+1][0] = max(dp[i+1][1], T[0]+x);\n\t}\n\t\n\tcout<<*max_element(dp[N-1],dp[N-1]+3)<<endl;\n\t\n}\n\n\nint main(int argc,char** argv){\n\tstring s;int i;\n\tif(argc==1) ios::sync_with_stdio(false), cin.tie(0);\n\tFOR(i,argc-1) s+=argv[i+1],s+='\\n';\n\tFOR(i,s.size()) ungetc(s[s.size()-1-i],stdin);\n\tsolve(); return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n#define rep(i,x,y) for(int i=(x);i<(y);++i)\n#define debug(x) #x << \"=\" << (x)\n\n#ifdef DEBUG\n#define _GLIBCXX_DEBUG\n#define print(x) std::cerr << debug(x) << \" (L:\" << __LINE__ << \")\" << std::endl\n#else\n#define print(x)\n#endif\n\nconst int inf=1e9;\nconst int64_t inf64=1e15;\nconst double eps=1e-9;\n\ntemplate <typename T> ostream &operator<<(ostream &os, const vector<T> &vec){\n    os << \"[\";\n    for (const auto &v : vec) {\n    \tos << v << \",\";\n    }\n    os << \"]\";\n    return os;\n}\n\nusing i64=int64_t;\n\nvoid solve(){\n    int N;\n    cin >> N;\n    vector<i64> A(N);\n    vector<char> op(N);\n    op[0]='+';\n    cin >> A[0];\n    rep(i,1,N) cin >> op[i] >> A[i];\n\n    static i64 memo[100001][3];\n    static bool done[100001][3];\n    fill_n((bool*)done,100001*3,false);\n    function<i64(int,int)> rec=[&](int i,int j){\n        auto &res=memo[i][j];\n        if(done[i][j]) return res;\n        done[i][j]=true;\n        if(i==N) return res=0;\n        res=-inf64;\n        int s=op[i]=='-';\n        rep(j_,0,j+1) res=max(res,((j_+s)%2==0?1:-1)*A[i]+rec(i+1,j_));\n        if(s) res=max(res,((j+s)%2==0?1:-1)*A[i]+rec(i+1,(j+1)%3));\n        return res;\n    };\n    cout << rec(0,0) << endl;\n}\n\nint main(){\n    std::cin.tie(0);\n    std::ios::sync_with_stdio(false);\n    cout.setf(ios::fixed);\n    cout.precision(10);\n    solve();\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<algorithm>\n#include<cctype>\n#include<cstring>\n#include<iostream>\n#include<vector>\n\nusing namespace std;\n\n#define bomb exit(1)\n#define INF 1061109567\n#define LINF 4557430888798830399ll\n#define pprint(x) print(x),putchar(' ')\n#define fprint(x) print(x),putchar('\\n')\n#define EE(x); struct edge { int nxt,to;ll w; }e[M << 1]; int head[N],ecnt = 1;\\\n\tvoid add(int u,int v,ll w = 0) { e[++ecnt].w = w,e[ecnt].to = v,e[ecnt].nxt = head[u];head[u] = ecnt; }\\\n\tvoid add_edge(int u,int v,ll w = 0) { add(u,v,w),add(v,u,w * x); }\n#define ll long long\nint mod = 1000000007;\nll Mod(ll x) { return x >= mod ? x - mod : x; }\n#define eps 0.0000000001\n#define sqr(x) ((x) * (x))\n#define iter iterator\n#define fi first\n#define se second\n//#define getchar() (SS == TT && (TT = (SS = BB) + fread(BB,1,1 << 15,stdin),TT == SS) ? EOF : *SS++)\n//char BB[1 << 15],*SS = BB,*TT = BB;\nll read()\n{\n\tll x = 0;int f = 1;char ch = getchar();\n\tfor(;!isdigit(ch);ch = getchar()) if(ch == '-') f = -1;\n\tfor(;isdigit(ch);ch = getchar()) x = x * 10 + (ch ^ 48);\n\treturn x * f;\n}\nvoid print(ll x)\n{\n\tif(x < 0) putchar('-'),x = -x;\n\tif(x > 9) print(x / 10);putchar(x % 10 + '0');\n}\n\nconst int N = 100010;\nll ans,res;\nll a[N],pre[N],suf[N],tot;\nint n,op[N];\nint main()\n{\n\tn = read();\n\tfor(int i = 1;i < n;i++)\n\t{\n\t\ttot += (a[i] = read());\n\t\tchar ch = getchar();while(ch != '+' && ch != '-') ch = getchar();\n\t\top[i] = (ch == '+') ? 1 : -1;\n\t}tot += (a[n] = read());\n\tfor(int i = n;i;i--) { suf[i] = a[i];if(~op[i]) suf[i] += suf[i + 1]; }\n\tfor(int i = 1;i <= n;i++) pre[i] = pre[i - 1] + a[i];\n\tres = a[1];ans = -LINF;\n\tfor(int i = 2;i <= n;i++)\n\t{\n\t\tif(op[i - 1] == -1) ans = max(ans,res + pre[n] - pre[i - 1] - 2 * suf[i]);\n\t\tres += a[i] * op[i - 1];\n\t}ans = max(ans,res);fprint(ans);\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<algorithm>\nusing namespace std;\nconst int MAXN=int(1e5+5);\n#define INF 0x3fffffff\nint s1,s2,as,n;\nint sz[MAXN],fh[MAXN];\nchar c[5];\nint main()\n{\n\tscanf(\"%d\",&n);\n\tscanf(\"%d\",&as);\n\tgetchar();\n\tfor(int i=1;i<=n-1;i++) {\n\t\tscanf(\"%s\",c);\n\t\tscanf(\"%d\",&sz[i]);\n\t\tfh[i]=c[0];\n\t}\n\ts1=s2=-INF;\n\tfor(int i=1;i<=n-1;i++) {\n\t\tif(fh[i]=='-') {\n\t\t\tas-=sz[i];\n\t\t\ts1-=sz[i];\n\t\t\ts2+=sz[i];\n\t\t\ts1=max(s1,s2);\n\t\t\ts2=max(as,s2);\n\t\t}\n\t\telse {\n\t\t\tas+=sz[i];\n\t\t\ts1+=sz[i];\n\t\t\ts2-=sz[i];\n\t\t}\n\t\ts2=max(s1,s2);\n\t\tas=max(s2,as);\n\t}\n\tprintf(\"%d\",as);\n}\n/*5\n7 - 8 + 9 - 10 - 2*/"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\nconst ll N = 100005, inf = 1e18;\n\nll n, a[N], dt[N][3];\n\nint main()\n{\n\tscanf(\"%lld\",&n);\n\tfor(ll i=1;i<=n;i++) {\n\t\tchar T[2];\n\t\tif(i>1) scanf(\"%s\",T);\n\t\tscanf(\"%lld\",&a[i]);\n\t\tif(i>1 && T[0] == '-') a[i] *= -1;\n\t}\n\tdt[1][0] = a[1];\n\tdt[1][1] = dt[1][2] = -inf;\n\tfor(ll i=2;i<=n;i++) {\n\t\tdt[i][0] = dt[i-1][0] + a[i];\n\t\tdt[i][2] = dt[i-1][2] + a[i];\n\t\tdt[i][1] = max(dt[i][2], dt[i-1][1] - a[i]);\n\t\tif(a[i] < 0) {\n\t\t\tdt[i][2] = max(dt[i][1], dt[i][2]);\n\t\t\tdt[i][1] = max(dt[i][0], dt[i][1]);\n\t\t}\n\t}\n\tprintf(\"%lld\\n\",max({dt[n][0], dt[n][1], dt[n][2]}));\n}\n"
  },
  {
    "language": "C++",
    "code": "// g++ -std=c++11 a.cpp\n#include<iostream>\n#include<vector>\n#include<string>\n#include<algorithm>\t\n#include<map>\n#include<set>\n#include<unordered_map>\n#include<utility>\n#include<cmath>\n#include<random>\n#include<cstring>\n#include<queue>\n#include<stack>\n#include<bitset>\n#include<cstdio>\n#include<sstream>\n#include<iomanip>\n#include<assert.h>\n#include<typeinfo>\n#define loop(i,a,b) for(int i=a;i<b;i++) \n#define rep(i,a) loop(i,0,a)\n#define FOR(i,a) for(auto i:a)\n#define pb push_back\n#define all(in) in.begin(),in.end()\n#define shosu(x) fixed<<setprecision(x)\nusing namespace std;\n//kaewasuretyuui\ntypedef long long ll;\n//#define int ll\ntypedef int Def;\ntypedef pair<Def,Def> pii;\ntypedef vector<Def> vi;\ntypedef vector<vi> vvi;\ntypedef vector<pii> vp;\ntypedef vector<vp> vvp;\ntypedef vector<string> vs;\ntypedef vector<double> vd;\ntypedef vector<vd> vvd;\ntypedef pair<Def,pii> pip;\ntypedef vector<pip>vip;\n#define mt make_tuple\ntypedef tuple<int,int,int> tp;\ntypedef vector<tp> vt;\ntemplate<typename A,typename B>bool cmin(A &a,const B &b){return a>b?(a=b,true):false;}\ntemplate<typename A,typename B>bool cmax(A &a,const B &b){return a<b?(a=b,true):false;}\n//template<class C>constexpr int size(const C &c){return (int)c.size();}\n//template<class T,size_t N> constexpr int size(const T (&xs)[N])noexcept{return (int)N;}\nconst double PI=acos(-1);\nconst double EPS=1e-9;\nDef inf = sizeof(Def) == sizeof(long long) ? 2e18 : 1e9+10;\nint dx[]={0,1,0,-1};\nint dy[]={1,0,-1,0};\nint main(){\n\tint n;\n\tcin>>n;\n\tvvi in(n,vi(2));\n\trep(i,n){\n\t\tif(i){\n\t\t\tchar c;cin>>c;\n\t\t\tin[i][1]=c=='-';\n\t\t}\n\t\tcin>>in[i][0];\n\t}\n\tvvi dp(n+1,vi(3,-inf));\n\tdp[0][0]=0;\n\trep(i,n)rep(j,3)if(dp[i][j]!=-inf){\n\t\tint s=in[i][0];\n\t\tif(in[i][1])s*=-1;\n\t\tif(j==1)s*=-1;\n\t\tdp[i+1][j]=max(dp[i+1][j],dp[i][j]+s);\n\t\tif(j<2&&in[i][1])dp[i+1][j+1]=max(dp[i+1][j],dp[i][j]+s);\n\t\tif(j<1&&in[i][1])dp[i+1][j+2]=max(dp[i+1][j],dp[i][j]+s);\n\t\tif(j)dp[i+1][j-1]=max(dp[i+1][j],dp[i][j]+s);\n\t\tif(j>1)dp[i+1][j-2]=max(dp[i+1][j],dp[i][j]+s);\n\t}\n\t\n\tcout<<dp[n][0]<<endl;\n}\n\n\n\n\n\n\n"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <cstring>\n#include <cmath>\n#include <algorithm>\n#include <string>\n#include <iostream>\n#include <stdlib.h>\n\nusing namespace std;\n\n\nint main()\n{\n  int i,j,n;  cin >> n;\n  char op[100001]={};\n  long long int num[100001]={};\n  op[0] = '+';  cin >> num[0];\n  for(i=1;i<n;i++){\n    cin >> op[i] >> num[i];\n  }\n\n  long long int dp[3];\n  dp[0] = num[0];\n  dp[1] = dp[2] = - (1 << 16);\n\n  for(i=1;i<n;i++){\n    long long int tmp[3];\n    if(op[i] == '+'){\n      tmp[0] = max(dp[0],max(dp[1],dp[2])) + num[i];\n      tmp[1] = max(dp[1],dp[2]) - num[i];\n      tmp[2] = dp[2] + num[i];\n    }\n    else{\n      tmp[0] = - (1 << 16);\n      tmp[1] = max(dp[0],max(dp[1],dp[2])) - num[i];\n      tmp[2] = max(dp[1],dp[2]) + num[i];\n    }\n    dp[0] = tmp[0];\n    dp[1] = tmp[1];\n    dp[2] = tmp[2];\n  }\n\n  long long int ans = max(dp[0],dp[1]);\n  ans = max(ans,dp[2]);\n  cout << ans << endl;\n\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define SZ(X) ((int)(X).size())\n#define ALL(X) (X).begin(), (X).end()\n#define REP(I, N) for (int I = 0; I < (N); ++I)\n#define REPP(I, A, B) for (int I = (A); I < (B); ++I)\n#define RI(X) scanf(\"%d\", &(X))\n#define RII(X, Y) scanf(\"%d%d\", &(X), &(Y))\n#define RIII(X, Y, Z) scanf(\"%d%d%d\", &(X), &(Y), &(Z))\n#define DRI(X) int (X); scanf(\"%d\", &X)\n#define DRII(X, Y) int X, Y; scanf(\"%d%d\", &X, &Y)\n#define DRIII(X, Y, Z) int X, Y, Z; scanf(\"%d%d%d\", &X, &Y, &Z)\n#define RS(X) scanf(\"%s\", (X))\n#define CASET int ___T, case_n = 1; scanf(\"%d \", &___T); while (___T-- > 0)\n#define MP make_pair\n#define PB push_back\n#define MS0(X) memset((X), 0, sizeof((X)))\n#define MS1(X) memset((X), -1, sizeof((X)))\n#define LEN(X) strlen(X)\n#define VPII vector<pair<int,int> >\n#define F first\n#define S second\n#define RF(x) freopen(x,\"r\",stdin)\n#define WF(x) freopen(x,\"w\",stdout)\ntypedef long long LL;\nusing namespace std;\ntypedef pair<LL,LL> PLL;\ntypedef pair<int,int> PII;\nconst LL MOD = 1e9+7;\nconst int SIZE = 1e6+5;\nconst LL INF = 1LL<<58;\nconst double eps = 1e-13;\n\nint v[100009];\nbool o[100009];\nLL l[100009];\nLL r[100009];\n\nint main(){\n\tDRI(n);\n\tRI(v[0]);\n\tREPP(i,1,n){\n\t\tchar c;scanf(\" %c\",&c);\n\t\to[i]=(c=='+');\n\t\tRI(v[i]);\n\t}\n\tLL sum=0;\n\tREP(i,n){\n\t\tsum+=v[i];\n\t}\n\tREPP(i,1,n){\n\t\tif(!o[i]){\n\t\t\tl[i]=l[i-1]+v[i]*2;\n\t\t}\n\t\telse l[i]=l[i-1];\n\t}\n\tREPP(i,1,n){\n\t\tif(!o[i]){\n\t\t\tr[i]=2*v[i];\n\t\t\tfor(int j=i+1;j<n;j++){\n\t\t\t\tif(!o[j])break;\n\t\t\t\tr[i]+=2*v[j];\n\t\t\t}\n\t\t}\n\t}\n\t//REP(i,n)printf(\"%lld \",l[i]);puts(\"\");\n\t//REP(i,n)printf(\"%lld \",r[i]);puts(\"\");\n\tLL cmax=-INF;\n\tREPP(i,1,n){\n\t\tif(!o[i]){\n\t\t\tcmax=max(cmax,sum-l[i-1]-r[i]);\n\t\t}\n\t}\n\tprintf(\"%lld\",cmax);\n}\n"
  },
  {
    "language": "C++",
    "code": "// g++ -std=c++11 a.cpp\n#include<iostream>\n#include<vector>\n#include<string>\n#include<algorithm>\t\n#include<map>\n#include<set>\n#include<unordered_map>\n#include<utility>\n#include<cmath>\n#include<random>\n#include<cstring>\n#include<queue>\n#include<stack>\n#include<bitset>\n#include<cstdio>\n#include<sstream>\n#include<iomanip>\n#include<assert.h>\n#include<typeinfo>\n#define loop(i,a,b) for(int i=a;i<b;i++) \n#define rep(i,a) loop(i,0,a)\n#define FOR(i,a) for(auto i:a)\n#define pb push_back\n#define all(in) in.begin(),in.end()\n#define shosu(x) fixed<<setprecision(x)\nusing namespace std;\n//kaewasuretyuui\ntypedef long long ll;\n//#define int ll\ntypedef int Def;\ntypedef pair<Def,Def> pii;\ntypedef vector<Def> vi;\ntypedef vector<vi> vvi;\ntypedef vector<pii> vp;\ntypedef vector<vp> vvp;\ntypedef vector<string> vs;\ntypedef vector<double> vd;\ntypedef vector<vd> vvd;\ntypedef pair<Def,pii> pip;\ntypedef vector<pip>vip;\n#define mt make_tuple\ntypedef tuple<int,int,int> tp;\ntypedef vector<tp> vt;\ntemplate<typename A,typename B>bool cmin(A &a,const B &b){return a>b?(a=b,true):false;}\ntemplate<typename A,typename B>bool cmax(A &a,const B &b){return a<b?(a=b,true):false;}\n//template<class C>constexpr int size(const C &c){return (int)c.size();}\n//template<class T,size_t N> constexpr int size(const T (&xs)[N])noexcept{return (int)N;}\nconst double PI=acos(-1);\nconst double EPS=1e-9;\nDef inf = sizeof(Def) == sizeof(long long) ? 2e18 : 1e9+10;\nint dx[]={0,1,0,-1};\nint dy[]={1,0,-1,0};\nint main(){\n\tint n;\n\tcin>>n;\n\tvvi in(n,vi(2));\n\trep(i,n){\n\t\tif(i){\n\t\t\tchar c;cin>>c;\n\t\t\tin[i][1]=c=='-';\n\t\t}\n\t\tcin>>in[i][0];\n\t}\n\tvvi dp(n+1,vi(3,-inf));\n\tdp[0][0]=0;\n\trep(i,n)rep(j,3)if(dp[i][j]!=-inf){\n\t\tint s=in[i][0];\n\t\tif(in[i][1])s*=-1;\n\t\tif(j==1)s*=-1;\n\t\tdp[i+1][j]=max(dp[i+1][j],dp[i][j]+s);\n\t\tif(j<2&&in[i][1])dp[i+1][j+1]=max(dp[i+1][j],dp[i][j]+s);\n\t\tif(j)dp[i+1][j-1]=max(dp[i+1][j],dp[i][j]+s);\n\t}\n\t\n\tcout<<dp[n][0]<<endl;\n}\n\n\n\n\n\n\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\ntypedef int sign;\ntypedef long long ll;\n#define For(i,a,b) for(register sign i=(sign)(a);i<=(sign)(b);++i)\n#define Fordown(i,a,b) for(register sign i=(sign)(a);i>=(sign)(b);--i)\nconst int N=1e5+5;\ntemplate<typename T>bool cmax(T &a,T b){return (a<b)?a=b,1:0;}\ntemplate<typename T>bool cmin(T &a,T b){return (a>b)?a=b,1:0;}\ntemplate<typename T>T read()\n{\n\tT ans=0,f=1;\n\tchar ch=getchar();\n\twhile(!isdigit(ch)&&ch!='-')ch=getchar();\n\tif(ch=='-')f=-1,ch=getchar();\n\twhile(isdigit(ch))ans=(ans<<3)+(ans<<1)+(ch-'0'),ch=getchar();\n\treturn ans*f;\n}\ntemplate<typename T>void write(T x,char y)\n{\n\tif(x==0)\n\t{\n\t\tputchar('0'),putchar(y);\n\t\treturn;\n\t}\n\tif(x<0)\n\t{\n\t\tputchar('-');\n\t\tx=-x;\n\t}\n\tstatic char wr[20];\n\tint top=0;\n\tfor(;x;x/=10)wr[++top]=x%10+'0';\n\twhile(top)putchar(wr[top--]);\n\tputchar(y);\n}\nvoid file()\n{\n#ifndef ONLINE_JUDGE\n\tfreopen(\"E.in\",\"r\",stdin);\n\tfreopen(\"E.out\",\"w\",stdout);\n#endif\n}\nint n;\nll dp[N][3];\nconst ll inf=1e18;\nvoid work()\n{\t\n\tn=read<int>();\n\tFor(i,1,n)For(j,0,2)dp[i][j]=-inf;\n\tchar s[5];\n\tint x;\n\tx=read<int>();\n\tdp[1][0]=x;\n\tint ty;\n\tFor(i,2,n)\n\t{\n\t\tscanf(\"%s\",s);\n\t\tx=read<int>();\n\t\tty=(s[0]=='+'?1:-1);\n\t\t\n\t\tcmax(dp[i][0],dp[i-1][0]+x*ty);\n\t\tcmax(dp[i][0],dp[i-1][1]+x*ty);\n\t\tcmax(dp[i][0],dp[i-1][2]+x*ty);\n\t\t\n\t\tcmax(dp[i][1],dp[i-1][1]+x*ty*(-1));\n\t\tcmax(dp[i][1],dp[i-1][2]+x*ty*(-1));\n\t\tif(s[0]=='-')\n\t\t{\n\t\t\tcmax(dp[i][1],dp[i-1][0]-x);\n\t\t\tcmax(dp[i][1],dp[i-1][1]-x);\n\t\t\tcmax(dp[i][1],dp[i-1][2]-x);\n\t\t}\n\t\tcmax(dp[i][2],dp[i-1][2]+x*ty);\n\t\tif(s[0]=='-')cmax(dp[i][2],dp[i-1][1]+x);\n\t\n\t\t//cout<<dp[i][0]<<' '<<dp[i][1]<<' '<<dp[i][2]<<endl;\n\t}\n\twrite(max(max(dp[n][0],dp[n][1]),dp[n][2]),'\\n');\n}\nint main()\n{\n\n\twork();\n\treturn 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n#include <vector>\n#include <string>\n#include <cmath>\nusing namespace std;\ntypedef long long ll;\ntypedef pair<int, int> pii;\nconst int mod = 1000000007;\n\nint main() {\n    ios::sync_with_stdio(false);\n    int n, a[100005] = {}, b[100005] = {};\n    ll z = 0, y = 1ll * mod * mod, x = 0, d[100005] = {};\n    char c = '+';\n    cin >> n;\n    for (int i = 1; i <= n; i++) {\n        if (i > 1) cin >> c;\n        if (c == '+') b[i] = 1;\n        else b[i] = -1;\n        cin >> a[i];\n        z += a[i];\n    }\n    for (int i = 1; i <= n; i++) if (b[i] == -1) {\n        d[i] = a[i];\n        for (int j = i + 1; j <= n && b[j] == 1; j++) d[i] += a[j];\n    }\n    for (int i = 1; i <= n; i++) if (b[i] == -1) {\n        y = min(y, x + d[i]);\n        x += a[i];\n    }\n    if (x == 0) cout << z;\n    else cout << z - y - y;\n}\n"
  },
  {
    "language": "C++",
    "code": "/// Kazuki Hoshino\n\n\n#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\ntypedef long double ld;\ntypedef vector<int> vi;\ntypedef pair<int,int> pi;\ntypedef pair<ll, ll> pll;\ntypedef vector<ll> vl;\ntypedef vector<pi> vpi;\n#define inf 10000000000000000\n#define mod 1000000007\n#define rep(i,a,b) for (int i = a; i <= b; i++)\n#define rep1(i, a, b) for(int i =a; i >=b; i--)\n#define f first\n#define ss second\n#define pb push_back\n#define all(c) (c).begin(),(c).end()\n#define mt make_tuple\n#define endl '\\n'\n\ntemplate<typename A,typename B>inline void chmin(A &a,B b){if(a>b)a=b;}\ntemplate<typename A,typename B>inline void chmax(A &a,B b){if(a<b)a=b;}\n\nll n , a[101010], dp[101010], sum[101010], x, pre, mn=-inf, t;\nbool pm[101010];\nchar ch;\n\nint main(){\nios::sync_with_stdio(0);\ncin.tie(0);\n\n//freopen(\"input.txt\",\"r\",stdin);\n//freopen(\"output.txt\",\"w\",stdout);\n\n\n    //cin >> t;\n\n//while(t--){\n\n    cin >> n >> x;\n    dp[0]=x;\n\n    n--;\n\n    rep(i, 0, n-1){\n        cin >> ch >> x;\n\n        pm[i]=ch!='+';\n\n        sum[i+1]=x;\n        a[i]=x;\n\n    }\n\n    rep(i,0,n-1){\n        sum[i+1]+=sum[i];\n    }\n\n    pre=-1;\n\n    rep(i,0,n-1){\n\n        if(pm[i] && pre!=-1){\n            chmax(mn,dp[pre]-(sum[i]-sum[pre])-sum[i]);\n        }\n        if(!pm[i]){\n            dp[i+1]=max(dp[i],mn+sum[i])+a[i];\n        }\n        else{\n            dp[i+1]=max(dp[i]-a[i],mn+sum[i]+a[i]);\n            pre=i;\n        }\n    }\n    cout<<dp[n]<<endl;\n\n//}\n\n\nreturn 0;\n}\n///....\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\ntypedef pair<int, int> pii;\ntypedef long long ll;\ntemplate<class T> using V = vector<T>;\ntemplate<class T> using VV = V<V<T>>;\n\n#define pb push_back\n#define eb emplace_back\n#define mp make_pair\n#define fi first\n#define se second\n#define rep(i,n) rep2(i,0,n)\n#define rep2(i,m,n) for(int i=m;i<(n);i++)\n#define ALL(c) (c).begin(),(c).end()\n#define dump(x) cerr << #x << \" = \" << (x) << endl\nconstexpr ll TEN(int n) { return (n == 0) ? 1 : 10 * TEN(n-1); }\n\ntemplate<class T, class U> void chmin(T& t, const U& u) { if (t > u) t = u; }\ntemplate<class T, class U> void chmax(T& t, const U& u) { if (t < u) t = u; }\n\ntemplate<class T, class U>\nostream& operator<<(ostream& os, const pair<T, U>& p) {\n\tos<<\"(\"<<p.first<<\",\"<<p.second<<\")\";\n\treturn os;\n}\n\ntemplate<class T>\nostream& operator<<(ostream& os, const vector<T>& v) {\n\tos<<\"{\";\n\trep(i, v.size()) {\n\t\tif (i) os<<\",\";\n\t\tos<<v[i];\n\t}\n\tos<<\"}\";\n\treturn os;\n}\n\nconst int maxn = 100010;\nconst ll inf = -TEN(18);\n\nll dp[maxn][3];\n\nint main() {\n\trep(i, maxn) rep(j, 3) {\n\t\tdp[i][j] = inf;\n\t}\n\n\tdp[0][0] = 0;\n\n\tint N; cin >> N;\n\trep(i, N) {\n\t\tbool neg = 0;\n\t\tif (i > 0) {\n\t\t\tstring s; cin >> s;\n\t\t\tif (s == \"-\") {\n\t\t\t\tneg = 1;\n\t\t\t}\n\t\t}\n\t\tint x; cin >> x;\n\n\t\tll tmp[3];\n\t\trep(j, 3) tmp[j] = dp[i][j];\n\n\t\tfor (int j = 1; j >= 0; --j) { //close\n\t\t\tchmax(tmp[j], tmp[j+1]);\n\t\t}\n\n\t\trep(j, 3) if (tmp[j] != inf) {\n\t\t\ttmp[j] += ((j + neg) % 2 == 1) ? -x : x;\n\t\t}\n\n\t\tif (neg) {\n\t\t\trep(j, 2) {\n\t\t\t\tchmax(tmp[j+1], tmp[j]);\n\t\t\t}\n\t\t}\n\n\t\trep(j, 3) dp[i+1][j] = tmp[j];\n\t}\n\n\tcout << max({dp[N][0], dp[N][1], dp[N][2]}) << endl;\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nint N, A[100005];\nlong long dp[100005][3];\n\nint main() {\n\tcin >> N;\n\tint x;\n\tcin >> x;\n\tA[0] = x;\n\tfor (int i = 1; i < N; i++) {\n\t\tchar c;\n\t\tcin >> c >> x;\n\t\tif (c == '-') A[i] = -x;\n\t\telse A[i] = x;\n\t}\n\tmemset(dp, -63, sizeof(dp));\n\tdp[0][0] = 0;\n\tfor (int i = 1; i <= N; i++) {\n\t\tfor (int f = 0; f < 3; f++) {\n\t\t\tif (f%2 == 1) dp[i][f] = max(dp[i][f], dp[i - 1][f] - A[i - 1]);\n\t\t\telse dp[i][f] = max(dp[i][f], dp[i - 1][f] + A[i - 1]);\n\t\t\tif (i != 1 && A[i - 2] < 0) {\n\t\t\t\tif (f == 1) dp[i][f] = max(dp[i][f], dp[i - 1][f - 1] - A[i - 1]);\n\t\t\t\telse if (f == 2) dp[i][f] = max(dp[i][f], dp[i - 1][f - 1] + A[i - 1]);\n\t\t\t}\n\t\t\tif (f == 0) dp[i][f] = max(dp[i][f], max(dp[i - 1][f + 1] + A[i - 1], dp[i - 1][f + 2] + A[i - 1]));\n\t\t\telse if (f == 1) dp[i][f] = max(dp[i][f], dp[i - 1][f + 1] - A[i - 1]);\n\t\t}\n\t}\n\tprintf(\"%lld\\n\", max(dp[N][0], dp[N][1]));\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<vector>\n#include<cstring>\n#include<queue>\n#include<algorithm>\nusing namespace std;\nconst long long MAXN=100005,INF=4223372036854775807ll;\nlong long n;\nlong long d[MAXN][3];\nlong long a;\nint main()\n{\n\tscanf(\"%lld\",&n);\n\tchar s[100];\n\tscanf(\"%lld\",&a);\n\tfor(long long i=0;i<=n+1;i++)\n\t{\n\t\td[i][0]=d[i][1]=d[i][2]=-INF;\n\t}\n\td[1][0]=a;\n\tfor(long long i=2;i<=n;i++)\n\t{\n\t\tscanf(\"%s\",s);\n\t\tscanf(\"%lld\",&a);\n\t\tif(s[0]=='+')\n\t\t{\n\t\t\td[i][0]=max(d[i-1][0]+a,d[i-1][1]+a);\n\t\t\td[i][1]=max(d[i-1][2]-a,d[i-1][1]-a);\n\t\t\td[i][2]=d[i-1][2]+a;\n\t\t}\n\t\tif(s[0]=='-')\n\t\t{\n\t\t\td[i][0]=max(d[i-1][0]-a,d[i-1][1]+a);\n\t\t\td[i][1]=max(max(d[i-1][0]-a,d[i-1][1]+a),d[i-1][2]+a);\n\t\t\td[i][2]=max(d[i-1][1]+a,d[i-1][2]-a);\n\t\t}\n\t}\n\tprintf(\"%lld\\n\",max(max(d[n][0],d[n][1]),d[n][2]));\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <string>\n#include <cstdlib>\n#include <cmath>\n#include <vector>\n#include <unordered_map>\n#include <map>\n#include <set>\n#include <algorithm>\n#include <queue>\n#include <stack>\n#include <functional>\n#include <bitset>\n#include <assert.h>\n#include <unordered_map>\n#include <fstream>\n#include <time.h>\nusing namespace std;\ntypedef long long ll;\ntypedef vector<ll> vl;\ntypedef vector<vl> vvl;\ntypedef vector<char> vc;\ntypedef vector<string> vs;\ntypedef vector<bool> vb;\ntypedef vector<double> vd;\ntypedef pair<ll,ll> P;\ntypedef pair<int,int> pii;\ntypedef vector<P> vpl;\ntypedef tuple<ll,ll,ll> tapu;\n#define rep(i,n) for(int i=0; i<(n); i++)\n#define REP(i,a,b) for(int i=(a); i<(b); i++)\n#define all(x) (x).begin(), (x).end()\n#define rall(x) (x).rbegin(), (x).rend()\nconst int inf = 1<<30;\nconst ll linf = 1LL<<62;\nconst int MAX = 2020000;\nll dy[8] = {1,-1,0,0,1,-1,1,-1};\nll dx[8] = {0,0,1,-1,1,-1,-1,1};\nconst double pi = acos(-1);\nconst double eps = 1e-7;\ntemplate<typename T1,typename T2> inline bool chmin(T1 &a,T2 b){\n\tif(a>b){\n\t\ta = b; return true;\n\t}\n\telse return false;\n}\ntemplate<typename T1,typename T2> inline bool chmax(T1 &a,T2 b){\n\tif(a<b){\n\t\ta = b; return true;\n\t}\n\telse return false;\n}\ntemplate<typename T> inline void print(T &a){\n    rep(i,a.size()) cout << a[i] << \" \";\n    cout << \"\\n\";\n}\ntemplate<typename T1,typename T2> inline void print2(T1 a, T2 b){cout << a << \" \" << b << \"\\n\";}\ntemplate<typename T1,typename T2,typename T3> inline void print3(T1 a, T2 b, T3 c){\n\tcout << a << \" \" << b << \" \" << c << \"\\n\";\n}\nconst int mod = 1e9 + 7;\n//const int mod = 998244353;\n\nint main(){\n\tint n; cin >> n;\n\tvl a(n); vc s(n);\n\trep(i,n){\n\t\tcin >> a[i];\n\t\tif(i < n-1) cin >> s[i+1];\n\t}\n\ts[0] = '+';\n\tvvl dp(n+1,vl(3,-linf));\n\tdp[0][0] = 0;\n\trep(i,n){\n\t\tif(s[i] == '+'){\n\t\t\tchmax(dp[i+1][0], dp[i][0] + a[i]);\n\t\t\tchmax(dp[i+1][1], dp[i][1] - a[i]);\n\t\t\tchmax(dp[i+1][0], dp[i][1] - a[i]);\n\t\t\tchmax(dp[i+1][1], dp[i][2] + a[i]);\n\t\t}else{\n\t\t\tchmax(dp[i+1][2], dp[i][1] + a[i]);\n\t\t\tchmax(dp[i+1][1], dp[i][0] - a[i]);\n\t\t\tchmax(dp[i+1][0], dp[i][0] - a[i]);\n\t\t\tchmax(dp[i+1][1], dp[i][1] + a[i]);\n\t\t}\n\t}\n\tcout << max(dp[n][0], dp[n][1]) << \"\\n\";\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <cmath>\n#include <cstdio>\n#include <string>\n#include <algorithm>\n#include <queue>\n#define ll long long\nusing namespace std;\n\n#define MOD 1000000007\n\nclass AdditionAndSubtractionHard\n{\npublic:\n\tint n;\n\tvector<ll> a;\n\tvector<string> op;\n\tvector<vector<ll > > dp;\n\n\tAdditionAndSubtractionHard(){\n\t\tcin >> n;\n\t\top.push_back(\"+\");\n\t\tfor (int i = 0; i < 2*n-1; ++i)\n\t\t {\n\t\t \tif(i % 2 == 0){\n\t\t \t\tll tmp;\n\t\t \t\tcin >> tmp;\n\t\t \t\ta.push_back(tmp);\n\t\t \t}else{\n\t\t \t\tstring tmpOp;\n\t\t \t\tcin >> tmpOp;\n\t\t \t\top.push_back(tmpOp);\n\t\t \t}\n\t\t } \n\t}\n\tvoid exec(){\n\t\tdp.resize(n+1);\n\t\tfor (int i = 0; i < n; ++i)\n\t\t{\n\t\t\tdp[i].resize(2);\n\t\t\t// dp[i][0].resize(2);\n\t\t\t// dp[i][1].resize(2);\n\t\t}\n\t\tdp[0][0] = a[0];\n\t\tdp[0][1] = -1 * MOD; // dp[n][1]の時は、符号が反対になっている。\n\t\tint flag = 0;\n\n\t\tfor (int i = 1; i < n; ++i)\n\t\t{\n\t\t\tif(flag >= 2){\n\t\t\t\tdp[i][0] = max(dp[i-1][0] + a[i], dp[i-1][1] + a[i]);\n\t\t\t\tdp[i][1] = max(dp[i-1][0] + a[i], dp[i-1][1] + a[i]);\n\t\t\t\tcontinue;\n\n\t\t\t}\n\t\t\tif(op[i] == \"+\"){\n\t\t\t\tdp[i][0] = max(dp[i-1][0] + a[i], dp[i-1][1] - a[i]);\n\t\t\t\tdp[i][1] = dp[i-1][1] - a[i];\n\t\t\t}else{\n\t\t\t\tdp[i][0] = max(dp[i-1][0] - a[i], dp[i-1][1] + a[i]);\n\t\t\t\tdp[i][1] = max(dp[i-1][1] + a[i], dp[i-1][0] - a[i]);\n\t\t\t\tflag++;\n\t\t\t}\n\t\t\t// cout << dp[i][0] << \" \" << dp[i][1] << endl;\n\t\t}\n\n\t\tcout << max(dp[n-1][0], dp[n-1][1]) << endl;\n\t}\n};\n\nint main(){\n\tAdditionAndSubtractionHard aash = AdditionAndSubtractionHard();\n\taash.exec();\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define pq priority_queue\n#define P pair<int, int>\n#define P2 pair<int, P>\n#define P3 pair<int, P2>\nusing namespace std;\ntypedef long long ll; typedef long double ld;\nconstexpr int gcd(int a, int b){return b ? gcd(b, a % b) : a;}\nconstexpr int lcm(int a, int b){return a / gcd(a, b) * b;}\nconstexpr int INF = 1e9, MOD = INF + 7, around[] = {0, 1, 1, -1, -1, 0, -1, 1, 0, 0};\nconstexpr int inv(const int x, int n, const int mod){ll ret=1,pos=x;while(n){if(n&1)(ret*=pos)%=mod;(pos*=pos)%=mod;n>>=1;}return ret;}\ntemplate<int n> struct Factorial{ll arr[n+1],ary[n+1];constexpr Factorial():arr(),ary(){arr[0]=1;ary[0]=1;for(int i=0;i<n;i++){arr[i+1]=arr[i]*(i+1)%MOD;ary[i+1]=inv(arr[i+1],MOD-2,MOD);}}};\nconstexpr Factorial<10> fact;\nconstexpr int comb(int a, int b){ll pos = fact.arr[a], pot = fact.ary[a - b], por = fact.ary[b];return pos * pot % MOD * por % MOD;}\nconstexpr int vx[] = {1, 0, -1, 0}, vy[] = {0, 1, 0, -1};\nconstexpr int sqrtN = 512, logN = 32;\nconstexpr ld PI = abs(acos(-1));\nconstexpr ll LINF=1e18;\n\nint main(){\n\tint n; cin >> n; int a[100010]; char b[100010]; cin >> a[0];\n\tfor(int i = 1; i < n; i++) cin >> b[i] >> a[i];\n\t\n\tll s = a[0];\n\tfor(int i = 1; i < n; i++){\n\t\tif(b[i] == '+') s += a[i];\n\t\telse s -= a[i];\n\t}\n\t\n\tll pos = 0, pot = 0, ma = s;\n\tfor(int i = n - 1; i > 0; i--){\n\t\tif(b[i] == '+') pot += 2 * a[i];\n\t\telse{\n\t\t\tma = max(ma, s + pos - pot);\n\t\t\tpos += 2 * a[i];\n\t\t\tpot = 0;\n\t\t}\n\t}\n\t\n\tcout << ma << endl;\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define fi first\n#define se second\n#define pb push_back\n#define all(x) (x).begin() , (x).end()\n#define rall(x) (x).rbegin() , (x).rend()\n#define len(x) (int)(x).size()\n\ntypedef long long ll;\ntypedef long double ld;\n\nusing namespace std;\n\nsigned main(){\n    ios_base::sync_with_stdio(0) , cin.tie(0) , cout.tie(0);\n    int n;cin >> n;\n    int x;cin >> x;\n    ll sum = x, sum1 = 0;\n    ll pref = -1;\n    bool done = 0;\n    int kek;\n    for(int i = 1; i <n ; ++i){\n        char ch;cin >> ch >> x;\n        if(ch == '-'){\n            if(pref == -1)\n                pref = sum , kek = x;\n            else if(!done){\n                done = 1;\n                sum1 = sum - pref;\n            }\n        }\n        sum += x;\n    }\n    if(!done){\n        cout << sum - kek;\n    }else\n    cout << sum - 2 * sum1;\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<string>\n#include<algorithm>\n#include<vector>\nusing namespace std;\nlong long dp[1000000][5], a[1000000], n;\nchar op[1000000];\nint main() {\n\tcin >> n;\n\tfor (int i = 0; i < n; i++) {\n\t\tcin >> a[i]; if (i != n - 1)cin >> op[i];\n\t}\n\tfor (int i = 0; i <= n; i++) {\n\t\tfor (int j = 0; j < 5; j++)dp[i][j] = -1LL << 62;\n\t}\n\tdp[0][0] = 0;\n\tfor (int i = 0; i < n; i++) {\n\t\tfor (int j = 0; j < 4; j++) {\n\t\t\tif (dp[i][j] == -1LL << 62)continue;\n\t\t\tif (i == 0 || op[i - 1] == '+') {\n\t\t\t\tif (j % 2 == 0) {\n\t\t\t\t\tdp[i + 1][j] = max(dp[i + 1][j], dp[i][j] + a[i]);\n\t\t\t\t\tif (j >= 1)dp[i + 1][j - 1] = max(dp[i + 1][j], dp[i][j] + a[i]);\n\t\t\t\t}\n\t\t\t\tif (j % 2 == 1) {\n\t\t\t\t\tdp[i + 1][j] = max(dp[i + 1][j], dp[i][j] - a[i]);\n\t\t\t\t\tif (j >= 1)dp[i + 1][j - 1] = max(dp[i + 1][j], dp[i][j] - a[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (j % 2 == 0) {\n\t\t\t\t\tdp[i + 1][j] = max(dp[i + 1][j], dp[i][j] - a[i]);\n\t\t\t\t\tdp[i + 1][j + 1] = max(dp[i + 1][j], dp[i][j] - a[i]);\n\t\t\t\t\tif (j >= 1)dp[i + 1][j - 1] = max(dp[i + 1][j], dp[i][j] - a[i]);\n\t\t\t\t}\n\t\t\t\tif (j % 2 == 1) {\n\t\t\t\t\tdp[i + 1][j] = max(dp[i + 1][j], dp[i][j] + a[i]);\n\t\t\t\t\tdp[i + 1][j + 1] = max(dp[i + 1][j], dp[i][j] + a[i]);\n\t\t\t\t\tif (j >= 1)dp[i + 1][j - 1] = max(dp[i + 1][j], dp[i][j] + a[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tcout << max(dp[n][0], max(dp[n][1], max(dp[n][2], dp[n][3]))) << endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define ll long long\nusing namespace std;\nconst int N=100010;\nconst ll oo=1e18;\nint n;\nll ans=0,f[N][3];\nint a[N],tot[N];\nbool b[N];\nint main(){\n//\tfreopen(\"in.txt\",\"r\",stdin);\n\tchar c;\n\tscanf(\"%d\",&n);\n\tb[1]=1;\n\tfor(int i=1;i<=n;i++){\n\t\ttot[i]=tot[i-1];\n\t\tif(i>=2){\n\t\t\tscanf(\" %c\",&c);\n\t\t\tif(c=='+') b[i]=1;\n\t\t\telse tot[i]++;\n\t\t}\n\t\tscanf(\"%d\",&a[i]);\n\t}\n\tfor(int i=1;i<=n;i++){\n\t\t\tif(b[i]){\n\t\t\t\tf[i][0]=max(f[i-1][0],max(f[i-1][1],f[i-1][2]))+a[i];\n\t\t\t\tf[i][1]=max(f[i-1][1]-a[i],f[i-1][2]+a[i]);\n\t\t\t\tf[i][2]=f[i-1][2]+a[i];\n\t\t\t}else{\n\t\t\t\tf[i][0]=max(f[i-1][0],max(f[i-1][1],f[i-1][2]))-a[i];\n\t\t\t\tf[i][1]=max(f[i-1][0]-a[i],max(f[i-1][1]+a[i],f[i-1][2]-a[i]));\n\t\t\t\tf[i][2]=max(f[i-1][1]+a[i],f[i-1][2]-a[i]);\n\t\t\t}\n\t\t\tif(tot[i]<2) f[i][2]=-oo;\n\t\t\tif(tot[i]<1) f[i][1]=-oo;\n\t}\n//\tfor(int i=1;i<=n;i++){\n//\t\tcout<<f[i][0]<<\" \";\n//\t}\n//\tcout<<endl;\n//\tfor(int i=1;i<=n;i++){\n//\t\tcout<<f[i][1]<<\" \";\n//\t}\n//\tcout<<endl;\n//\tfor(int i=1;i<=n;i++){\n//\t\tcout<<f[i][2]<<\" \";\n//\t}\n//\tcout<<endl;\n\tans=max(f[n][0],max(f[n][1],f[n][2]));\n\tcout<<ans;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define pi 3.1415926535897932384626\nusing namespace std;\n      \nstruct P{\n  int x;\n  long long y;\n  /*bool operator < (const P &a )const{\n    //if(y!=a.y)\n    return y<a.y;\n  };*/\n};\n\nint a,b,c,d,i,k,n,m,e,dx[10]={1,0,-1,0,1,1,-1,-1},dy[10]={0,1,0,-1,1,-1,1,-1};\nlong long o[122111];\nlong long l[111111];\nlong long j[1];\n\nlong long x,y,z,mod=1000000007;\n//string r;\nchar r[3];\n\nP u[1];\nqueue<P> q;\nstack<int> s;\n//set<int> s;\nmap<int,int> p;\n\nvector<int> v;\n\n\nbool as(P a,P b)\n{\n  //if(a.x!=b.x)\n  //return a.x<b.x;\n  return a.y>b.y;\n}\n\nint main()\n{\n  scanf(\"%d\",&a);\n  scanf(\"%d\",&n);\n  o[1]=l[1]=n;\n  for(int t=2;t<=a;t++)\n  {\n    scanf(\"%s %d\",r,&n);\n    if(r[0]=='+') o[t]=o[t-1]+n,l[t]=l[t-1]+n;\n    else\n    {\n      o[t]=o[t-1]-n,l[t]=l[t-1]+n;\n      v.push_back(t);\n    }\n  }\n  x=o[a];\n  for(int h=0;h+1<v.size();h++)\n  {\n    x=max(x,o[v[h]-1]+l[a]-l[v[h+1]-1]-(l[v[h+1]-1]-l[v[h]-1]));\n    //printf(\"%lld %lld %lld\\n\",o[v[h]-1],l[a]-l[v[h+1]-1],(l[v[h+1]-1]-l[v[h]-1]));\n  }\n  printf(\"%lld\",x);\n}\n//0\n//12\n\n\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define DEBUG(x) cout << #x << \" = \" << x << endl\n#define pb push_back\nusing namespace std;\ntypedef long long ll;\n\nconst int MAXN = 100005;\n\n\nint main()\n{\n    //freopen(\"input.in\", \"r\", stdin);\n    int n;\n    cin >> n;\n    char sgn;\n    char hj;\n    int x;\n    ll ans = 0;\n    while ((sgn != '-') && (cin >> x >> sgn))\n    {\n        ans += x;\n    }\n    cin >> x;\n    if (sgn != '-')\n    {\n        ans += x;\n        cout << ans;\n        return 0;\n    }\n    ans -= x;\n\n\n    ll sm = 0;\n    while (cin >> sgn >> x)\n    {\n        if (sgn == '+')\n            sm += x;\n        else\n        {\n            sm -= x;\n            ans += max(sm, -sm);\n            sm = 0;\n        }\n    }\n\n    ans += sm;\n    cout << ans;\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\nusing namespace std;\nlong dp[3],a;\nchar op;\nint n;\nmain()\n{\n\tcin>>n>>dp[0];\n\tdp[1]=-1e18;\n\tfor(int i=1;i<n;i++)\n\t{\n\t\tcin>>op>>a;\n\t\tif(op=='+')\n\t\t{\n\t\t\tdp[0]+=a;\n\t\t\tdp[1]=max(dp[1]-a,dp[2]+=a);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tdp[0]=dp[1]=max(dp[2]=dp[1]+a,dp[0]-a);\n\t\t}\n\t}\n\tcout<<dp[0]<<endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n\nusing namespace std;\n\n#define FOR(i, x, y) for(int i = (x); i < (y); ++i)\n#define REP(i, x, y) for(int i = (x); i <= (y); ++i)\n#define MP make_pair\n#define PB push_back\n#define PH push\n#define fst first\n#define snd second\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef double db;\ntypedef long double ldb;\ntypedef pair<int, int> pii;\n\nconst int maxn = 1e5 + 5;\nconst ll INF = 1e18;\n\nint n;\nint a[maxn], pos[maxn];\nll ans;\nll dp[maxn][3];\n\ninline int calc(int x, int y){\n\tif(y & 1) return -x;\n\treturn x;\n}\n\nint main(){\n\tscanf(\"%d\", &n);\n\tFOR(i, 0, n){\n\t\tif(!i) pos[i] = 1;\n\t\telse{\n\t\t\tchar c;\n\t\t\tscanf(\"%*c%c\", &c);\n\t\t\tif(c == '-') pos[i] = -1;\n\t\t\telse pos[i] = 1;\n\t\t}\n\t\tscanf(\"%d\", a + i);\n\t}\n//\tFOR(i, 0, n) cout << pos[i] << \" \" << a[i] << endl;\n\tREP(i, 0, n) FOR(j, 0, 3) dp[i][j] = -INF;\n\tdp[0][0] = 0;\n\tFOR(i, 0, n) FOR(j, 0, 3) if(dp[i][j] != -INF){\n//\t\tcout << \"i = \" << i << \" j = \" << j << \" \" << dp[i][j] << \" \" << calc(pos[i] * a[i], j) << endl;\n\t\tif(pos[i] == 1){\n\t\t\tREP(nj, 0, j)\n\t\t\t\tdp[i + 1][nj] = max(dp[i + 1][nj], dp[i][j] + calc(a[i], j));\n\t\t}\n\t\telse{\n\t\t\tif(j + 1 < 3)\n\t\t\t\tdp[i + 1][j + 1] = max(dp[i + 1][j + 1], dp[i][j] + calc(-a[i], j));\n\t\t\tREP(nj, 0, j)\n\t\t\t\tdp[i + 1][nj] = max(dp[i + 1][nj], dp[i][j] + calc(-a[i], j));\n\t\t}\n\t}\n\tprintf(\"%lld\\n\", dp[n][0]);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n#define ll long long\n#define N 400005\nll a[N],f[N][3];\nint n,fl[N];\nll read(){\n\t#define gc getchar\n\tint x=0,f=0; char ch=gc();\n\tfor (;ch<'0'||ch>'9';ch=gc())\n\t\tif (ch=='-') f=1;\n\tfor (;ch>='0'&&ch<='9';ch=gc())\n\t\tx=x*10-48+ch;\n\treturn (f?-x:x);\n}\nint main(){\n\tscanf(\"%d\",&n);\n\tfor (int i=1;i<=n;i++){\n\t\ta[i]=read();\n\t\tfl[i]=(a[i]>0);\n\t\ta[i]=abs(a[i]);\n\t}\n\tmemset(f,233,sizeof(f));\n\tf[0][0]=0;\n\tfor (int i=1;i<=n;i++){\n\t\tif (!fl[i]) f[i-1][2]=f[i-1][1],f[i-1][1]=f[i-1][0],f[i-1][0]=-1e18;\n\t\tfor (int cur=0;cur<=2;cur++)\n\t\t\tfor (int now=0;now<=cur;now++)\n\t\t\t\tf[i][now]=max(f[i][now],f[i-1][cur]+(cur&1?-a[i]:a[i]));\n\t}\n\tprintf(\"%lld\\n\",max(f[n][0],f[n][1]));\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\n#define F first\n#define S second\n#define pb push_back\n#define ld  double\n#define ll long long\n#define int long long\n\nusing namespace std;\n\nconst int MAXN = 101 * 1001 , MOD = 1e9 + 7 , sq = 333  ;\n\n\nint a[MAXN];\n\nchar ch[MAXN] ;\n\nint dp[655][655][2] ;\n\nint solve(int n)\n{\n    for(int i = 0 ; i < n ; i ++ )\n        dp[i][i+1][0] = a[i] , dp[i][i+1][1] = -a[i] ;\n    for(int l = 2 ; l <= n ; l ++ )\n    {\n        for(int i = 0 ; i + l <= n ; i ++ )\n        {\n            int j = i + l ;\n            dp[i][j][0] = a[i] + dp[i+1][j][0] ;\n            if(a[i]<0)\n                for(int k = i + 2 ; k <= j ; k ++ )\n                    dp[i][j][0] = max(dp[i][j][0],a[i]+dp[i+1][k][1]+dp[k][j][0]);\n            dp[i][j][1] = -a[i] + dp[i+1][j][1] ;\n            if(a[i]<0)\n                for(int k = i + 2 ; k <= j ; k ++ )\n                    dp[i][j][1] = max(dp[i][j][1],-a[i]+dp[i+1][k][0]+dp[k][j][1]);\n        }\n    }\n    return dp[0][n][0];\n}\n\nint32_t main()\n{\n   ios::sync_with_stdio(0);cin.tie(0);\n   int n , s = 0 , ind = -1 ,cnt = 0 ;\n   cin >> n ;\n   for(int i = 0 ; i < n ; i ++ )\n   {\n       if(i)\n        cin >> ch[i] ;\n       cin >> a[i] ;\n       s += a[i] ;\n       if(ch[i]=='-'&&ind==-1)\n        ind = i ;\n       if(i&&ch[i]=='-')\n        a[i]*=-1,cnt++;\n   }\n   if(n<600)\n        return cout<<solve(n),0;\n   if(ind==-1)\n    return cout<<s,0 ;\n    if(cnt==1)\n        return cout<<s+2*a[ind],0;\n    ind++;\n    s+=2*a[ind-1] ;\n   while(ch[ind]!='-')\n    s-=2*a[ind++];\n   return cout<<s,0;\n\n\n\n\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <cmath>\nusing namespace std;\nconst int N = 1e+5+2;\nlong long array[N][3] = {0};\n\nusing P  = pair<char,int>;\nlong long solve(vector<P>& inputs) {\n\tint n = inputs.size();\n\tlong long (*dp)[3] = array+1;\n\tdp[-1][1] = -1e+18;\n\tdp[-1][2] = -1e+18;\n\n\tfor(int i = 0; i < n; i++) {\n\t\tauto pair = inputs[i];\n\n\t\tif(pair.first == '+'){\n\t\t\tdp[i][0] = max(dp[i-1][0] + pair.second, dp[i-1][1] + pair.second);\n\t\t\tdp[i][1] = max(dp[i-1][1] - pair.second, dp[i-1][2] + pair.second);\n\t\t\tdp[i][2] = dp[i-1][2] + pair.second;\n\t\t}else{\n\t\t\tdp[i][0] = max(dp[i-1][0] - pair.second,dp[i-1][1] - pair.second);\n\t\t\tdp[i][1] = max(dp[i-1][0] - pair.second, max(dp[i-1][1] - pair.second, dp[i-1][2] + pair.second));\n\t\t\tdp[i][2] = max(dp[i-1][1] + pair.second, dp[i-1][2] + pair.second);\n\t\t}\n// \t\tcout << dp[i][0] << \" \" << dp[i][1] << \" \" << dp[i][2] << endl;\n\t}\n\n\treturn max(dp[n-1][0], max(dp[n-1][1],dp[n-1][2]));\n}\n\nint main() {\n\tvector<P> inputs;\n\n\tint n;\n\tcin >> n;\n\n\tint first;\n\tcin >> first;\n\tinputs.push_back(P('+',first));\n\n\tfor(int i = 0; i < n-1; i++) {\n\t\tchar op;\n\t\tint m;\n\t\tcin >> op >> m;\n\t\tinputs.push_back(P(op,m));\n\t}\n\n// \tfor( auto pair: inputs)\n// \t\tcout << pair.first << \":\" << pair.second << endl;\n\tcout << solve(inputs) << endl;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n\nusing ui = uint64_t;\nusing li = int64_t;\n\nli num[100100];\nchar op[100100];\nint main()\n{\n\tstd::cin.sync_with_stdio(false);\n\tstd::cout.sync_with_stdio(false);\n\tint N;\n\tstd::cin >> N;\n\tstd::cin >> num[0];\n\tint temp_n = 1;\n\tbool is_mode_add = true;\n\tfor(int i = 1; i < N;++i){\n\t\tstd::cin >> op[temp_n];\n\t\tstd::cin >> num[temp_n];\n\t\tbool next_mode = (op[temp_n] == '+');\n\t\tif(is_mode_add && next_mode){\n\t\t\tnum[temp_n-1] += num[temp_n];\n\t\t}\n\t\telse{\n\t\t\tis_mode_add = next_mode;\n\t\t\t++temp_n;\n\t\t}\n\t}\n\t//番兵\n\top[temp_n] = op[temp_n+1] = '-';\n\tnum[temp_n] = num[temp_n+1] = 0;\n\t//numを累積和に\n\tfor(int i = temp_n-1; i >= 0; --i){\n\t\tnum[i] += num[i+1];\n\t}\n\t\n\tli res = (num[0] - num[0+1]);\n\tint minus_num = 0;\n\tfor(int i = 1; i < temp_n; ++i)\n\t{\n\t\tif(minus_num == 0){\n\t\t\tif(op[i] == '+'){\n\t\t\t\tres += (num[i] - num[i+1]);\n\t\t\t}\n\t\t\telse{\n\t\t\t\t++minus_num;\n\t\t\t\tres -= (num[i] - num[i+1]);\n\t\t\t}\n\t\t}\n\t\telse if(minus_num == 1){\n\t\t\tif(op[i] == '+'){\n\t\t\t\tint mi_i = i;\n\t\t\t\twhile(op[mi_i] != '-'){++mi_i;}\n\t\t\t\tres += std::abs((num[i] - num[mi_i])- (num[mi_i] - num[mi_i+1]));\n\t\t\t\tres += num[mi_i+1];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\telse{\n\t\t\t\t++minus_num;\n\t\t\t\tres += (num[i] - num[i+1]);\n\t\t\t}\n\t\t}\n\t\telse{//minus_num == 2\n\t\t\tres += num[i];\n\t\t\tbreak;\n\t\t}\n\t}\n\tstd::cout << res << std::endl;\n}\n\n#if 0\nconstexpr ui MOD = 1000000000+7;\nint bit_count(ui v){\n\t//非効率注意\n\tint res = 0;\n\twhile(v>0){\n\t\tif(v&1)++res;\n\t\tv>>=1;\n\t}\n\treturn res;\n}\nint max_bit(ui v){\n\tint res = 0;\n\twhile(v>0){\n\t\t++res;\n\t\tv>>=1;\n\t}\n\treturn res;\n}\nint main()\n{\n\tstd::cin.sync_with_stdio(false);\n\tstd::cout.sync_with_stdio(false);\n\tint N;\n\tstd::cin >> N;\n\tui res = 0;\n\t\n\tui xor_safe = N >> 1;\n\t//a >= b\n\tres += (xor_safe + 1) * xor_safe / 2;\n\tres -= 2 ^ bit_count(xor_sage);\n\tfor(int i = max_bit(xor_sage)-1;i >= 1;--i){\n\t\tres -= 2^(i-1);\n\t}\n\t\n\tstd::cout << res << std::endl;\n}\n#endif\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstdio>\n#define N 100005\n\nusing namespace std;\n\nint n;\nint val[N], func[N], nex[N];\nlong long sum[N];\n\ninline void read(int &x) {\n\tx = 0; char ch = getchar();\n\twhile(!isdigit(ch)) ch = getchar();\n\twhile(isdigit(ch)) x = x * 10 + ch - '0', ch = getchar();\n}\n\nint main() {\n\tread(n);\n\tread(val[1]), func[1] = 1;\n\tfor(int i = 2; i <= n; ++i) {\n\t\tfunc[i] = (getchar() == '+' ? 1 : -1);\n\t\tread(val[i]);\n//\t\tprintf(\"%d\\n\", func[i] * val[i]);\n\t}\n\t\n\tnex[n] = n + 1;\n\tfor(int i = n; i > 1; --i) {\n\t\tsum[i] = val[i] + sum[i + 1];\n\t\tnex[i - 1] = (func[i] == -1 ? i : nex[i]);\n\t}\n\t\n\tlong long ans, cur, res;\n\tcur = val[1];\n\tfor(int i = 2; i <= n; ++i) {\n\t\tif(func[i] == -1) {\n\t\t\tres = cur - (sum[i] - sum[nex[i]]) + sum[nex[i]];\n\t\t\tif(res > ans) ans = res;\n\t\t}\n\t\tcur += func[i] * val[i];\n\t}\n\t\n\tif(cur > ans) ans = cur;\n\tcout << ans << endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<algorithm>\n#include<iostream>\n#include<cstring>\n#include<cstdio>\n#include<cmath>\n#define LL long long\n#define M 100020\nusing namespace std;\nLL read(){\n\tLL nm=0,fh=1; LL cw=getchar();\n\tfor(;!isdigit(cw);cw=getchar()) if(cw=='-') fh=-fh;\n\tfor(;isdigit(cw);cw=getchar()) nm=nm*10+(cw-'0');\n\treturn nm*fh;\n}\nLL n,p[M],G[M],F[M],ans;\nint main(){\n\t//freopen(\".in\",\"r\",stdin);\n\t//freopen(\".out\",\"w\",stdout);\n\tn=read();\n\tfor(LL i=1;i<=n;i++){\n\t\tp[i]=read();\n\t\tif(i>1&&p[i]>0&&p[i-1]>0) p[i-1]+=p[i],i--,n--;\n\t}\n\tfor(LL i=1;i<=n;i++) G[i]=G[i-1]+p[i],F[i]=F[i-1]+abs(p[i]); ans=G[n];\n//\tfor(LL i=1;i<=n;i++) printf(\"I = %lld    p = %lld   G = %lld   F = %lld \\n\",i,p[i],G[i],F[i]);\n\tfor(LL i=2;i<=n;i++) if(p[i-1]<0) ans=max(ans,G[i-1]-p[i]+F[n]-F[i]);\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "// #pragma GCC optimize(3)\n#include <map>\n#include <set>\n#include <queue>\n#include <cmath>\n#include <vector>\n#include <cstdio>\n#include <bitset>\n#include <cstring>\n#include <iostream>\n#include <algorithm>\n#define maxn 100010\n#define inf 0x3f3f3f3f3f3f3f3f\n#define int long long\nusing namespace std;\nvoid write(int x){if(x<0){putchar('-');x=-x;}if(x>9) write(x/10);putchar(x%10+'0');}\nint read(){int d=0,w=1;char c=getchar();for(;c<'0'||c>'9';c=getchar())if(c=='-')\nw=-1;for(;c>='0'&&c<='9';c=getchar())d=(d<<1)+(d<<3)+c-48;return d*w;}\nvoid wln(int x){write(x);putchar('\\n');}\nvoid wrs(int x){write(x);putchar(' ');}\nint reac()\n{\n\tchar c=getchar();\n\tfor(;c!='-'&&c!='+';c=getchar());\n\treturn c=='+'?1:-1;\n}\nint n,a[maxn],c[maxn],f[maxn][3];\nsigned main()\n{\n\t// freopen(\".in\",\"r\",stdin);\n\t// freopen(\".out\",\"w\",stdout);\n\tn=read();\n\tc[1]=1;\n\ta[1]=read();\n\tfor(int i=2;i<=n;a[i++]=read())\n\t\tc[i]=reac();\n\tf[1][0]=a[1];\n\tf[1][1]=f[1][2]=-inf;\n\tfor(int i=2;i<=n;i++)\n\t{\n\t\tf[i][0]=max(f[i-1][0],f[i-1][1])+a[i]*c[i];\n\t\tf[i][1]=max(max((c[i]==-1?f[i-1][0]:-inf)+a[i]*c[i],f[i-1][1]+a[i]*c[i]*-1),f[i-1][2]+a[i]*c[i]*-1);\n\t\tf[i][2]=max((c[i]==-1?f[i-1][1]:-inf)+a[i]*c[i]*-1,f[i-1][2]+a[i]*c[i]);\n\t\t// wrs(f[i][0]);\n\t\t// wrs(f[i][1]);\n\t\t// wln(f[i][2]);\n\t}\n\twrite(max(f[n][0],f[n][1]));\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "// Author -- Frame\n\n#include<bits/stdc++.h>\n\n#define lowbit(x) ((x)&(-x))\n#define Finline __inline__ __attribute__ ((always_inline))\n#define DEBUG fprintf(stderr,\"Running on Line %d in Function %s\\n\",__LINE__,__FUNCTION__)\n#define SZ(x) ((int)x.size())\n#define mkpr std::make_pair\n#define pb push_back\n\ntypedef long long ll;\ntypedef unsigned int uint;\ntypedef unsigned long long ull;\ntypedef std::pair<int,int> pi;\ntypedef std::pair<int,int> pl;\n\nconst int inf=0x3f3f3f3f,Inf=0x7fffffff;\nconst ll INF=0x7fffffffffffffff;\n\nFinline uint rnd()\n{\n\tstatic uint seed=416;\n\treturn seed^=seed>>5,seed^=seed<<17,seed^=seed>>13;\n}\ntemplate <typename _Tp>_Tp gcd(const _Tp &a,const _Tp &b){return (!b)?a:gcd(b,a%b);}\ntemplate <typename _Tp>Finline _Tp abs(const _Tp &a){return a>=0?a:-a;}\ntemplate <typename _Tp>Finline _Tp max(const _Tp &a,const _Tp &b){return a<b?b:a;}\ntemplate <typename _Tp>Finline _Tp min(const _Tp &a,const _Tp &b){return a<b?a:b;}\ntemplate <typename _Tp>Finline void chmax(_Tp &a,const _Tp &b){(a<b)&&(a=b);}\ntemplate <typename _Tp>Finline void chmin(_Tp &a,const _Tp &b){(b<a)&&(a=b);}\ntemplate <typename _Tp>Finline void read(_Tp &x)\n{\n\tchar ch(getchar());\n\tbool f(false);\n\twhile(ch<48||ch>57) f|=ch==45,ch=getchar();\n\tx=ch&15,ch=getchar();\n\twhile(ch>=48&&ch<=57) x=(((x<<2)+x)<<1)+(ch&15),ch=getchar();\n\tif(f) x=-x;\n}\ntemplate <typename _Tp,typename... Args>Finline void read(_Tp &t,Args &...args)\n{\n\tread(t);read(args...);\n}\nFinline int read_str(char *s)\n{\n\tchar ch(getchar());\n\twhile(ch==' '||ch=='\\r'||ch=='\\n') ch=getchar();\n\tchar *tar=s;\n\t*tar=ch,ch=getchar();\n\twhile(ch!=' '&&ch!='\\r'&&ch!='\\n'&&ch!=EOF) *(++tar)=ch,ch=getchar();\n\treturn tar-s+1;\n}\n\nconst int N=100005;\nll dp[N][5];\nint a[N];\nchar s[N];\nint main()\n{\n\tint n;\n\tread(n);\n\tread(a[1]);\n\tchar ch;\n\tfor(int i=2;i<=n;++i)\n\t{\n\t\tch=getchar();\n\t\twhile(ch!='+'&&ch!='-') ch=getchar();\n\t\ts[i]=ch;\n\t\tread(a[i]);\n\t}\n\tmemset(dp,-63,sizeof(dp));\n\tdp[1][0]=a[1];\n\tfor(int i=2;i<=n;++i)\n\t{\n\t\tfor(int j=0;j<5;++j)\n\t\t{\n\t\t\tfor(int k=j;k<5;++k)\n\t\t\t{\n\t\t\t\tchmax(dp[i][j],dp[i-1][k]);\n\t\t\t}\n\t\t}\n\t\tif(s[i]=='-')\n\t\t{\n\t\t\tfor(int j=3;j>=0;--j)\n\t\t\t{\n\t\t\t\tdp[i][j+1]=dp[i][j];\n\t\t\t}\n\t\t\tdp[i][0]=-1e18;\n\t\t}\n\t\tfor(int j=0;j<5;++j)\n\t\t{\n\t\t\tif(j&1) dp[i][j]-=a[i];\n\t\t\telse dp[i][j]+=a[i];\n\t\t}\n\t}\n\tll ans=-1e18;\n\tfor(int i=0;i<5;++i) chmax(ans,dp[n][i]);\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\nconst int N = 1e5+100;\n#define fr(i,a,b) for(int i = a;i <= b; ++i)\n#define nfr(i,a,b) for(int i = a;i >= b; --i)\n#define pb push_back\n\nint n,a[N];\nchar sgn[N];\nll f[N][2];\nll ans;\nll ssum[N];\n/*\n5\n1 - 20 - 13 + 14 - 5\n*/\n\nint main(){\n   ios::sync_with_stdio(false);\n   ans = -0x3f3f3f3f;\n   cin >> n;\n   fr(i,1,n){\n      if(i > 1)cin >> sgn[i]; cin >> a[i];\n      if(sgn[i] == '-')a[i] = -a[i];\n   }\n\n   ssum[n+1] = 0;\n   nfr(i,n,1)ssum[i] = ssum[i+1]+abs(a[i]);\n\n   memset(f,0xf7,sizeof f);\n   f[0][0] = 0;\n   fr(i,1,n){\n      f[i][0] = max(f[i-1][0]+a[i],f[i-1][1]+a[i]);\n      f[i][1] = f[i-1][1]-a[i];\n      if(sgn[i] == '-')f[i][1] = max(f[i][1],f[i-1][0]+a[i]);\n      if(sgn[i] == '-' && i > 2)ans = max(ans,f[i-1][1]+ssum[i]);\n   }\n   ans = max(ans,max(f[n][0],f[n][1]));\n   printf(\"%lld\\n\",ans);\n   return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<algorithm>\nusing namespace std;\nint n,i,k;char c;long long f0,f1,f2;\nint main(){\n\tscanf(\"%d%d\",&n,&f0);\n\tfor (f1=f2=-1e18,n--;n--;){\n\t\tscanf(\" %c%d\",&c,&k);\n\t\tif (c=='-') k=-k;\n\t\tlong long v0=f0+k,v1=f1-k,v2=f2+k;\n\t\tf0=max(v0,max(v1,v2));\n\t\tif (c=='+') f1=max(v1,v2),f2=v2;\n\t\telse f1=max(v0,max(v1,v2)),f2=max(v1,v2);\n\t}\n\tprintf(\"%lld\",f0);\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n#define int long long\nconst int N = 1e5 + 5, M = 5, inf = 1e15;\nint dp[N][M], a[N];\nchar op[N];\n\nint Sign(int x) {\n    if (x % 2) return -1;\n    return 1;\n}\n\nint32_t main() {\n    for (int i = 0; i < N; i++) for (int j = 0; j < M; j++) dp[i][j] = -inf;\n    int n; cin >> n >> a[0];\n    for (int i = 1; i < n; i++) cin >> op[i] >> a[i];\n    dp[0][0] = a[0];\n    for (int i = 1; i < n; i++) for (int j = M - 1; j >= 0; j--) {\n        if (op[i] == '+') dp[i][j] = dp[i - 1][j] + a[i] * Sign(j);\n        else if (j) dp[i][j] = dp[i - 1][j - 1] + a[i] * Sign(j);\n        if (j + 1 < M) dp[i][j] = max(dp[i][j], dp[i][j + 1]);\n    }\n    cout << dp[n-1][0] << \"\\n\";\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define fi first\n#define se second\n#define pb push_back\n#define all(x) (x).begin() , (x).end()\n#define rall(x) (x).rbegin() , (x).rend()\n#define len(x) (int)(x).size()\n\ntypedef long long ll;\ntypedef long double ld;\n\nusing namespace std;\n\nsigned main(){\n    ios_base::sync_with_stdio(0) , cin.tie(0) , cout.tie(0);\n    int n;cin >> n;\n    int x;cin >> x;\n    ll sum = x, sum1 = 0 , negsum = 0;\n    ll pref = -1;\n    bool done = 0;\n    int kek;\n    vector<pair<ll,ll>>neg;\n    for(int i = 1; i <n ; ++i){\n        char ch;cin >> ch >> x;\n        if(ch == '-'){\n            neg.pb({sum , x});\n            negsum += x;\n        }\n        sum += x;\n    }\n    /// first ways\n    ll answer = -1e18;\n    answer = max(answer , sum - 2 * negsum);\n    ll cur = 0;\n    for(int i = 0 ; i < len(neg) - 1; ++i){\n        ll now = cur + neg[i + 1].fi - neg[i].fi;\n        answer = max(answer , sum - 2 * now);\n        cur += neg[i].se;\n    }\n    cout << answer;\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\nconst int N=100010;\nint total[N],x[N],s[N];\nchar op[N][2];\nint main(){\n\tint n;\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++){\n\t\tif(i!=1) scanf(\"%s\",op[i]);\n\t\tscanf(\"%d\",&x[i]);\n\t\tif(i==1||op[i][0]=='+') total[i]=total[i-1]+x[i];\n\t\telse total[i]=total[i-1]-x[i];\n\t}\n\tfor(int i=1;i<=n;i++) s[i]=s[i-1]+x[i];\n\tint p=2,ans=0;\n\tfor(;p<=n;){\n\t\tif(op[p][0]=='-'){\n\t\t\tint lst=p-1,sum=x[p];\n\t\t\t//cout<<\"sum=\"<<sum<<endl;\n\t\t\tp++;\n\t\t\twhile(op[p][0]=='+'&&p<=n) sum+=x[p],p++; \t\n\t\t\tp--;\n\t\t\tans=max(s[n]-2*sum-s[lst]+total[lst],ans);\t\n\t\t\t//cout<<s[n]<<' '<<2*sum<<' '<<s[lst]<<' '<<total[lst]<<endl;\n\t\t\t//cout<<\"ans=\"<<ans<<endl;\n\t\t}\n\t\tp++;\n\t}\n\tcout<<ans<<endl;\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n// {{{\n// clang-format off\n#define forr(x,arr) for(auto&& x:arr)\n#define _overload3(_1,_2,_3,name,...) name\n#define _rep2(i,n) _rep3(i,0,n)\n#define _rep3(i,a,b) for(int i=int(a);i<int(b);++i)\n#define rep(...) _overload3(__VA_ARGS__,_rep3,_rep2,)(__VA_ARGS__)\n#define _rrep2(i,n) _rrep3(i,0,n)\n#define _rrep3(i,a,b) for(int i=int(b)-1;i>=int(a);i--)\n#define rrep(...) _overload3(__VA_ARGS__,_rrep3,_rrep2,)(__VA_ARGS__)\n#define all(x) (x).begin(),(x).end()\n#define bit(n) (1LL<<(n))\n#define sz(x) ((int)(x).size())\n#define TEN(n) ((ll)(1e##n))\n#define fst first\n#define snd second\n\nstring DBG_DLM(int &i){return(i++==0?\"\":\", \");}\n#define DBG_B(exp){int i=0;os<<\"{\";{exp;}os<<\"}\";return os;}\ntemplate<class T>ostream&operator<<(ostream&os,vector<T>v);\ntemplate<class T>ostream&operator<<(ostream&os,set<T>v);\ntemplate<class T>ostream&operator<<(ostream&os,queue<T>q);\ntemplate<class T>ostream&operator<<(ostream&os,priority_queue<T>q);\ntemplate<class T,class K>ostream&operator<<(ostream&os,pair<T,K>p);\ntemplate<class T,class K>ostream&operator<<(ostream&os,map<T,K>mp);\ntemplate<class T,class K>ostream&operator<<(ostream&os,unordered_map<T,K>mp);\ntemplate<int I,class TPL>void DBG(ostream&os,TPL t){}\ntemplate<int I,class TPL,class H,class...Ts>void DBG(ostream&os,TPL t){os<<(I==0?\"\":\", \")<<get<I>(t);DBG<I+1,TPL,Ts...>(os,t);}\ntemplate<class T,class K>void DBG(ostream&os,pair<T,K>p,string delim){os<<\"(\"<<p.first<<delim<<p.second<<\")\";}\ntemplate<class...Ts>ostream&operator<<(ostream&os,tuple<Ts...>t){os<<\"(\";DBG<0,tuple<Ts...>,Ts...>(os,t);os<<\")\";return os;}\ntemplate<class T,class K>ostream&operator<<(ostream&os,pair<T,K>p){DBG(os,p,\", \");return os;}\ntemplate<class T>ostream&operator<<(ostream&os,vector<T>v){DBG_B(forr(t,v){os<<DBG_DLM(i)<<t;});}\ntemplate<class T>ostream&operator<<(ostream&os,set<T>s){DBG_B(forr(t,s){os<<DBG_DLM(i)<<t;});}\ntemplate<class T>ostream&operator<<(ostream&os,queue<T>q){DBG_B(for(;q.size();q.pop()){os<<DBG_DLM(i)<<q.front();});}\ntemplate<class T>ostream&operator<<(ostream&os,priority_queue<T>q){DBG_B(for(;q.size();q.pop()){os<<DBG_DLM(i)<<q.top();});}\ntemplate<class T,class K>ostream&operator<<(ostream&os,map<T,K>m){DBG_B(forr(p,m){os<<DBG_DLM(i);DBG(os,p,\"->\");});}\ntemplate<class T,class K>ostream&operator<<(ostream&os,unordered_map<T,K>m){DBG_B(forr(p,m){os<<DBG_DLM(i);DBG(os,p,\"->\");});}\n#define DBG_OVERLOAD(_1,_2,_3,_4,_5,_6,macro_name,...)macro_name\n#define DBG_LINE(){char s[99];sprintf(s,\"line:%3d | \",__LINE__);cerr<<s;}\n#define DBG_OUTPUT(v){cerr<<(#v)<<\"=\"<<(v);}\n#define DBG1(v,...){DBG_OUTPUT(v);}\n#define DBG2(v,...){DBG_OUTPUT(v);cerr<<\", \";DBG1(__VA_ARGS__);}\n#define DBG3(v,...){DBG_OUTPUT(v);cerr<<\", \";DBG2(__VA_ARGS__);}\n#define DBG4(v,...){DBG_OUTPUT(v);cerr<<\", \";DBG3(__VA_ARGS__);}\n#define DBG5(v,...){DBG_OUTPUT(v);cerr<<\", \";DBG4(__VA_ARGS__);}\n#define DBG6(v,...){DBG_OUTPUT(v);cerr<<\", \";DBG5(__VA_ARGS__);}\n#define DEBUG0(){DBG_LINE();cerr<<endl;}\n#ifdef LOCAL\n#define out(...){DBG_LINE();DBG_OVERLOAD(__VA_ARGS__,DBG6,DBG5,DBG4,DBG3,DBG2,DBG1)(__VA_ARGS__);cerr<<endl;}\n#else\n#define out(...)\n#endif\n\nusing ll=long long;\nusing pii=pair<int,int>;using pll=pair<ll,ll>;using pil=pair<int,ll>;using pli=pair<ll,int>;\nusing vs=vector<string>;using vvs=vector<vs>;using vvvs=vector<vvs>;\nusing vb=vector<bool>;using vvb=vector<vb>;using vvvb=vector<vvb>;\nusing vi=vector<int>;using vvi=vector<vi>;using vvvi=vector<vvi>;\nusing vl=vector<ll>;using vvl=vector<vl>;using vvvl=vector<vvl>;\nusing vd=vector<double>;using vvd=vector<vd>;using vvvd=vector<vvd>;\nusing vpii=vector<pii>;using vvpii=vector<vpii>;using vvvpii=vector<vvpii>;\ntemplate<class A,class B>bool amax(A&a,const B&b){return b>a?a=b,1:0;}\ntemplate<class A,class B>bool amin(A&a,const B&b){return b<a?a=b,1:0;}\nll ri(){ll l;cin>>l;return l;} string rs(){string s;cin>>s;return s;}\n// clang-format on\n// }}}\n\nll solve() {\n  int n = ri();\n  ll a0 = ri();\n\n  vector<int> A(n-1);\n  vector<char> ops(n-1);\n  rep(i, n-1) {\n    cin >> ops[i] >> A[i];\n  }\n\n  out(ops);\n  out(A);\n\n  const ll inf = 1e18;\n\n  vvl dp(2, vl(3, -inf));\n\n  vl &cur = dp[0];\n  vl &nex = dp[1];\n\n  cur[0] = 0;\n\n  vi S = {1, -1, 1};\n\n  rep(i, n-1) {\n    rep(j, 3) if (cur[j] > -inf) {\n      if (ops[i] == '+') {\n        // そのまま\n        amax(nex[j], cur[j] + S[j] * A[i]);\n        if (j) {\n          // 閉じ\n          amax(nex[j-1], cur[j] + S[j-1] * A[i]);\n        }\n      }\n      else {\n        // そのまま\n        if (j < 2) {\n          amax(nex[j+1], cur[j] + S[j+1] * A[i]);\n        }\n        if (j) {\n          // 閉じ\n          amax(nex[j], cur[j] + S[j] * A[i]);\n        }\n      }\n    }\n    swap(cur, nex);\n    fill(all(nex), -inf);\n  }\n\n  return a0 + *max_element(all(cur));\n}\n\nvoid Main() {\n  cout << solve() << endl;\n}\n\n\nsigned main() {\n  cin.tie(nullptr);\n  ios::sync_with_stdio(false);\n  Main();\n  return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <bitset>\n#include <cassert>\n#include <chrono>\n#include <climits>\n#include <cmath>\n#include <complex>\n#include <cstring>\n#include <deque>\n#include <functional>\n#include <iostream>\n#include <iomanip>\n#include <list>\n#include <map>\n#include <numeric>\n#include <queue>\n#include <random>\n#include <set>\n#include <stack>\n#include <unordered_map>\n#include <unordered_set>\n#include <vector>\n#include <cstdint>\nusing namespace std;\ntypedef long long ll;\ntypedef vector<int> vi;\ntypedef pair<int,int> pii;\n#define MP make_pair\n#define PB push_back\n#define inf 1000000007\n#define rep(i,n) for(int i = 0; i < (int)(n); ++i)\n#define all(x) (x).begin(),(x).end()\n\ntemplate<typename A, size_t N, typename T>\nvoid Fill(A (&array)[N], const T &val){\n    std::fill( (T*)array, (T*)(array+N), val );\n}\n \ntemplate<class T> inline bool chmax(T &a, T b){\n    if(a<b){\n        a = b;\n        return true;\n    }\n    return false;\n}\n\ntemplate<class T> inline bool chmin(T &a, T b){\n    if(a>b){\n        a = b;\n        return true;\n    }\n    return false;\n}\nll sm = 0;\nint main(){\n    int n;\n    cin >> n;\n    cin >> sm;\n    vector<bool> op(n-1);\n    vector<ll> p(n-1);\n    rep(i,n-1){\n        char c;\n        cin >> c;\n        if(c=='-'){\n            op[i] = 1;\n        }else{\n            op[i] = 0;\n        }\n        cin >> p[i];\n    }\n    vector<pair<ll,ll> > a;\n    bool flag = 1;\n    ll tmp  = 0;\n    ll tt = 0;\n    rep(i,n-1){\n        if(op[i]){\n            if(!flag){\n                a.push_back(MP(tt,tmp));\n            }\n            flag = 0;\n            tt = p[i];\n            tmp = p[i];\n            sm += p[i];\n        }else{\n            if(flag){\n                sm += p[i];\n            }else{\n                tmp += p[i];\n                sm += p[i];\n            }\n        }\n    }\n    if(!flag){\n        a.push_back(MP(tt,tmp));\n    }\n    ll mx = -(1LL<<60);\n    if(a.size()==0){\n        mx = sm;\n    }else{\n        for(auto x:a){\n            ll ss = x.first;\n            ll ssss = x.second;\n            chmax(mx,sm - ssss*2);\n            sm -= 2*ss;\n        }\n    }\n    cout << mx << endl;\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<iomanip>\n#include<map>\n#include<unordered_map>\n#include<set>\n#include<unordered_set>\n#include<vector>\n#include<array>\n#include<string>\n#include<stack>\n#include<queue>\n#include<algorithm>\n#include<cassert>\n#include<functional>\n#include<random>\n#include<complex>\n#include<bitset>\n#include<chrono>\n//#include<boost/multiprecision/cpp_int.hpp>\n#define int int64_t\n#define uint uint64_t\n#define REP(i, a, b) for (int64_t i = (int64_t)(a); i < (int64_t)(b); i++)\n#define rep(i, a) REP(i, 0, a)\n#define SZ(X) ((int64_t)((X).size()))\n#define ITR(x, a) for (auto x = a.begin(); x != a.end(); x++)\n#define ALL(a) (a.begin()), (a.end())\n#define HAS(a, x) (a.find(x) != a.end())\n#define Min(x) *min_element(ALL(x))\n#define Max(x) *max_element(ALL(x))\n#define Unique(L) (L.erase(unique(ALL(L)), L.end()))\n#define intmax (std::numeric_limits<int64_t>::max() / 4)\n#define doublemax (std::numeric_limits<double>::max() / 4)\nusing namespace std;\n//typedef boost::multiprecision::cpp_int bigint;\nconst double EPS = 1e-9;\nconst double PI = acos(-1.0);\n\n//sort(ALL(v),greater<int>());\nclass segtree_sum_pointupdate {\nprivate:\n\ttypedef int T;\npublic:\n\tsegtree_sum_pointupdate(const int N) {\n\t\tSIZE = roundup_pow2(N);\n\t\tv.clear();\n\t\tv.resize(SIZE * 2, 0);\n\t}\n\n\t//v[index]=numberとする。\n\tvoid update(const int index, const T number) {\n\t\tv[index + SIZE] = number;\n\t\tfor (int i = (index + SIZE) / 2; i; i = i / 2)v[i] = v[i * 2] + v[i * 2 + 1];\n\t}\n\n\t//[index]の値を返す。\n\tT getnum(const int index) {\n\t\treturn v[index + SIZE];\n\t}\n\n\t//[L,R)の総和を返す。\n\tT getsum(const int L, const int R) {\n\t\treturn getsum_inner(L, R, 1, 0, SIZE);\n\t}\nprivate:\n\tT getsum_inner(const int queryL, const int queryR, const int index, const int segL, const int segR) {\n\t\tif (queryR <= segL || segR <= queryL)return 0;\n\t\tif (queryL <= segL && segR <= queryR)return v[index];\n\t\treturn getsum_inner(queryL, queryR, index * 2, segL, (segL + segR) / 2) +\n\t\t\tgetsum_inner(queryL, queryR, index * 2 + 1, (segL + segR) / 2, segR);\n\t}\n\n\t//x以上であるような2のべき乗数のうち最小のものを返す。\n\tint roundup_pow2(int x) {\n\t\tx--;\n\t\trep(i, 6)x |= x >> (1LL << i);\n\t\treturn x + 1;\n\t}\n\n\tint SIZE;\n\tvector<T>v;\n};\nsegtree_sum_pointupdate seg(1);\n\nint minimize(vector<int>&A, int start, int end) {\n\t//A[start]のマイナス符号の直後に(を置いて、\n\t//endの直後に)を置くとして、\n\t//( ) の内側を最小化したときの値を返す。\n\tassert(A[start] < 0 && A[end] < 0);\n\tint ans = -A[start];\n\tint cursor = start + 1;\n\tfor (; 0 < A[cursor]; cursor++) {\n\t\tans += A[cursor];\n\t}\n\tans -= seg.getsum(cursor, end + 1);\n\treturn ans;\n}\n\nsigned main() {\n\tcin.tie(0);\n\tios::sync_with_stdio(false);\n\n\tint N;\n\tcin >> N;\n\n\tseg = segtree_sum_pointupdate(N);\n\n\tvector<int>A(N), op(N - 1);\n\tint first = -1, last = -1;\n\trep(i, N) {\n\t\tstring s;\n\t\tif (i)cin >> s;\n\t\telse s = \"+\";\n\t\tint hugou = 1;\n\t\tif (s[0] == '-') {\n\t\t\thugou *= -1;\n\t\t\tif (first == -1)first = i;\n\t\t\tlast = i;\n\t\t}\n\t\tcin >> A[i];\n\t\tseg.update(i, A[i]);\n\t\tA[i] *= hugou;\n\t}\n\n\n\n\tif (first == last) {//マイナスの数が0or1\n\t\tint ans = 0;\n\t\trep(i, N)ans += A[i];\n\t\tcout << ans << endl;\n\t\treturn 0;\n\t}\n\n\tint ans = 0;\n\tfor (int i = 0; i < first; i++) {\n\t\tassert(0 < A[i]);\n\t\tans += A[i];\n\t}\n\tfor (int i = last+1; i < N; i++) {\n\t\tassert(0 < A[i]);\n\t\tans += A[i];\n\t}\n\twhile (first != last) {\n\t\tint secondlast = last - 1;\n\t\tint ans2 = A[last];\n\t\tfor (; 0 < A[secondlast]; secondlast--)ans2 += A[secondlast];\n\t\tint m = minimize(A, first, last);\n\t\tint m2 = minimize(A, first, secondlast) + ans2;\n\t\tif (m2 < m) {\n\t\t\tlast = secondlast;\n\t\t\tans += ans2;\n\t\t\tcontinue;\n\t\t}\n\t\tif (min(m,m2) <= -A[first]) {\n\t\t\tans -= min(m, m2);\n\t\t\tcout << ans << endl;\n\t\t\treturn 0;\n\t\t}\n\t\tans += A[first++];\n\t\tfor (; 0 < A[first]; first++)ans += A[first];\n\n\t}\n\tans += A[first];\n\tcout << ans << endl;\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<vector>\n#include<set>\n\nint main()\n{\n\tint N;\n\tstd::cin >> N;\n\tstd::vector<long long> val(1);\n\tstd::cin >> val.front();\n\tbool prev = false;\n\tfor (int i = 1;i < N;++i)\n\t{\n\t\tchar c;\n\t\tlong long v;\n\t\tstd::cin >> c >> v;\n\t\tif (c == '+')\n\t\t{\n\t\t\tif (prev)\n\t\t\t{\n\t\t\t\tval.emplace_back(v);\n\t\t\t\tprev = false;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tval.back() += v;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (prev)\n\t\t\t{\n\t\t\t\tval.back() += v;\n\t\t\t}\n\t\t\telse \n\t\t\t{\n\t\t\t\tval.back() -= v;\n\t\t\t\tprev = true;\n\t\t\t}\n\t\t}\n\t}\n\tlong long ret = val.front();\n\tfor (int i = 1;i < val.size();++i)\n\t{\n\t\tauto v = val[i];\n\t\tif (v < 0)\n\t\t{\n\t\t\tret -= v;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tret += v;\n\t\t}\n\t}\n\tstd::cout << ret << std::endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstdio>\n#include<cstring>\ntypedef long long lint;\nconst int N=1e5+2;\nint n,hx[N];\nlint dp[N][3];\n\ntemplate <class T> inline void apx(T &x,const T y){\n\tif(x<y) x=y;\n}\n\ninline int nxi(){\n\tint x=0;\n\tchar c;\n\twhile((c=getchar())>'9'||c<'0');\n\twhile(x=x*10-48+c,(c=getchar())>='0'&&c<='9');\n\treturn x;\n}\n\nint main(){\n#ifndef ONLINE_JUDGE\n//\tfreopen(\"b.in\",\"r\",stdin);\n#endif\n\tmemset(dp,-3,sizeof(dp));\n\tn=nxi();\n\thx[1]=nxi();\n\tfor(int i=2;i<=n;++i){\n\t\tchar c;\n\t\twhile((c=getchar())!='+'&&c!='-');\n\t\thx[i]=nxi();\n\t\tif(c=='-') hx[i]=-hx[i];\n\t}\n\tdp[0][0]=0;\n\tfor(int i=0;i<n;++i){\n\t\tapx(dp[i][1],dp[i][2]);\n\t\tapx(dp[i][0],dp[i][1]);\n\t\tfor(int j=0;j<=2;++j){\n\t\t\tif(dp[i][j]<-1e16) continue;\n\t\t\tconst lint tp=dp[i][j]+(j&1?-hx[i+1]:hx[i+1]);\n\t\t\tapx(dp[i+1][j],tp);\n\t\t\tif(hx[i+1]<0&&j<2){\n\t\t\t\tapx(dp[i+1][j+1],tp);\n\t\t\t}\n\t\t}\n\t}\n//\tfor(int i=0;i<=n;++i){\n//\t\tfor(int j=0;j<3;++j){\n//\t\t\tprintf(\"%lld \",dp[i][j]);\n//\t\t}\n//\t\tputs(\"\");\n//\t}\n\tlint ans=-1e16;\n\tfor(int i=0;i<3;++i){\n\t\tapx(ans,dp[n][i]);\n\t}\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#include <ext/pb_ds/assoc_container.hpp>\n#include <ext/pb_ds/tree_policy.hpp>\n \nusing namespace std;\nusing namespace __gnu_pbds;\n \n#define fi first\n#define se second\n#define mp make_pair\n#define pb push_back\n#define fbo find_by_order\n#define ook order_of_key\n \ntypedef long long ll;\ntypedef pair<int,int> ii;\ntypedef vector<int> vi;\ntypedef long double ld; \ntypedef tree<int, null_type, less<int>, rb_tree_tag, tree_order_statistics_node_update> pbds;\ntypedef set<int>::iterator sit;\ntypedef map<int,int>::iterator mit;\ntypedef vector<int>::iterator vit;\n\nvector<ll> dq;\nvector<ll> S;\n\nint main()\n{\n\tios_base::sync_with_stdio(0); cin.tie(0);\n\tint n; cin>>n;\n\tdq.pb(0); S.pb(0);\n\tll sum=0;\n\tfor(int i=0;i<n;i++)\n\t{\n\t\tchar c='+';\n\t\tif(i>0) \n\t\t{\n\t\t\tcin>>c;\n\t\t}\n\t\tll x; cin>>x;\n\t\tsum+=x;\n\t\tif(c=='+')\n\t\t{\n\t\t\tS.back()+=x;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tS.pb(0);\n\t\t\tdq.pb(x);\n\t\t}\n\t}\n\tif(dq.size()==1)\n\t{\n\t\tcout<<sum<<'\\n';\n\t\treturn 0;\n\t}\n\tll ans = -ll(1e18);\n\tfor(int i=1;i<S.size();i++)\n\t{\n\t\tans=max(ans, sum - 2LL*(S[i]+dq[i]));\n\t\tsum-=dq[i];\n\t}\n\tans = max(ans, sum);\n\tcout<<ans<<'\\n';\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n#include <cmath>\n#include <stdio.h>\n#include <stdlib.h>\n#include <vector>\n#include <map>\n#include <queue>\n#include <set>\n#include <string>\n#include <string.h>\n#include <stack>\n#include <assert.h>\n#define Endl endl\n#define mp make_pair\n#define ll long long \n#define pii pair<int,int>\n#define pll pair<ll,ll>\n#define over(A) {cout<<A<<endl;exit(0);}\n#define all(A) A.begin(),A.end()\n#define ceil(a,b) ((a-1)/b+1)\n#define srand() mt19937 rng(chrono::steady_clock::now().time_since_epoch().count());\n#define rand(l,r) uniform_int_distribution<int>(l,r)(rng)\ntypedef unsigned long long ull;\nconst int inf=1039074182;\nusing namespace std;\nint n;\nint a[100005];\nvector <ll> vec;\nvector <int> pos;\nvector <bool> b;\nll sumabs[100005];\n\nint main()\n{\n//\tfreopen(\"input.txt\",\"r\",stdin);\n\tcin>>n;\n\tchar x;\n\tcin>>a[0];\n\tll res=a[0];\n\tfor(int i=1;i<n;i++)\n\t{\n\t\twhile(x!='+' && x!='-') x=getchar();\n\t\tscanf(\"%d\",a+i);\n\t\tif(x=='-') a[i]=-a[i];\n\t\tx=getchar();\n\t\tres+=a[i];\n\t}\n\tsumabs[n]=0;\n\tfor(int i=n-1;i>=0;i--)\n\t{\n\t\tsumabs[i]=sumabs[i+1]+abs(a[i]);\n\t}\n//\tll res=-1LL*inf*inf;\n\tll now=0;\n\tfor(int i=0;i<n;i++)\n\t{\n\t\tnow+=a[i];\n\t\tif(a[i]<0)\n\t\t{\n\t\t\tres=max(res,now-a[i+1]+sumabs[i+2]);\n\t\t}\n//\t\tcout<<now<<' '<<a[i+1]<<' '<<sumabs[i+2]<<endl;\n\t}\n\tcout<<res<<endl;\n//\tfor(int i=0;i<n;)\n//\t{\n//\t\tll sum=0;\n//\t\twhile(a[i]>0 && i<n)\n//\t\t{\n//\t\t\tsum+=a[i];\n//\t\t\ti++;\n//\t\t}\n//\t\tvec.push_back(sum);\n//\t\twhile(a[i]<0 && i<n)\n//\t\t{\n//\t\t\tvec.push_back(a[i]);\n//\t\t\ti++;\n//\t\t}\n//\t}\n//\twhile(vec.back()==0) vec.pop_back();\n//\tn=vec.size();\n//\tll res=0;\n//\tfor(int i=0;i<n;i++)\n//\t{\n//\t\tif(vec[i]>0) pos.push_back(i);\n//\t}\n//\tint nn;\n//\tfor(int i=0;i<n-1;i++)\n//\t{\n//\t\tif(vec[i]<0 && vec[i+1]<0)\n//\t\t{\n//\t\t\tnn=i;\n//\t\t\tbreak;\n//\t\t}\n//\t}\n//\t\n//\tll res=0;\n//\tfor(int i=0;i<pos.size();i++)\n//\t{\n//\t\tint p=pos[i];\n//\t\tbool tb=false;\n//\t\tif(p!=0 && p!=n-1)\n//\t\t{\n//\t\t\tif(-vec[p+1]>vec[p])\n//\t\t\t{\n//\t\t\t\ttb=true;\n//\t\t\t}\n//\t\t}\n//\t\tb.push_back(tb);\n//\t}\n//\tfor(int i=0;i<n;i++)\n//\t{\n//\t\tcout<<vec[i]<<' ';\n//\t}\n//\tcout<<endl;\n//\tint l=0;\n//\tfor(int i=0;i<pos.size();i++)\n//\t{\n//\t\tll block=0;\n//\t\tfor(int j=pos[i]+2;j<(i==(int)pos.size()-1?n:pos[i+1]);j++)\n//\t\t{\n//\t\t\tblock+=abs(a[j]);\n//\t\t}\n//\t\tif(i==(int)pos.size()-1 && pos[i]==n-1)\n//\t\t{\n//\t\t\tblock+=abs(a[pos[i]]);\n//\t\t}\n//\t\telse\n//\t\t{\n//\t\t\tif(!b[i]) block+=a[pos[i]]+a[pos[i]+1];\n//\t\t\telse block+=-a[pos[i]]-a[pos[i]+1];\n//\t\t}\n//\t\tres+=block;\n//\t\tcout<<i<<' '<<block<<endl;\n//\t}\n//\tcout<<res<<endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n#define r(i,n) for(int i=0;i<n;i++)\nint a[100009],dp[100009][4];\nstring s[100009];\nint main(){\n  r(i,100009)r(j,4)dp[i][j]=-(1e8);\n  int ans,n;\n  cin>>n>>ans;n--;\n  r(i,n)cin>>s[i]>>a[i];\n  dp[0][0]=0;\n  for(int i=0;i<n;i++){\n    if(s[i]==\"+\"){\n      dp[i+1][0]=dp[i][0]+a[i];\n      dp[i+1][1]=dp[i][1]-a[i];\n      dp[i+1][2]=dp[i][2]+a[i];\n    }\n    else{\n      dp[i+1][0]=max(dp[i][0]-a[i],dp[i][2]+a[i]);\n      dp[i+1][1]=max(dp[i][0]-a[i],dp[i][1]-a[i]);\n      dp[i+1][2]=max(dp[i][1]+a[i],dp[i][2]+a[i]);\n    }\n  }\n  cout<<ans+max(dp[n][0],max(dp[n][1],dp[n][2]))<<endl;\n}"
  },
  {
    "language": "C++",
    "code": "// warm heart, wagging tail,and a smile just for you!\n//                                                                     ███████████\n//                                                                   ███╬╬╬╬╬╬╬╬╬╬███\n//                                                                ███╬╬╬╬╬████╬╬╬╬╬╬███\n//                                            ███████████       ██╬╬╬╬╬████╬╬████╬╬╬╬╬██\n//                                      █████████╬╬╬╬╬████████████╬╬╬╬╬██╬╬╬╬╬╬███╬╬╬╬╬██\n//                               ████████╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬█████████╬╬╬╬╬╬██╬╬╬╬╬╬╬██\n//                             ████╬██╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬█████████╬╬╬╬╬╬╬╬╬╬╬██\n//                           ███╬╬╬█╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬██╬╬███╬╬╬╬╬╬╬█████\n//                         ███╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬██╬╬╬████████╬╬╬╬╬██\n//                       ███╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬███╬╬╬╬╬╬╬╬╬███\n//                     ███╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬█████╬╬╬╬╬╬╬██\n//                 ████╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬████╬╬╬╬╬████\n//     █████████████╬╬╬╬╬╬╬╬██╬╬╬╬╬████╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬█████╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬███╬╬╬╬██████\n//   ████╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬██╬╬██████╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬██████╬╬╬╬╬╬╬███████████╬╬╬╬╬╬╬╬██╬╬╬██╬╬╬██\n// ███╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬██╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬██╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬████╬╬╬╬╬╬╬╬╬╬╬█╬╬╬╬╬╬╬██╬╬╬╬╬╬╬╬██\n// ██╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬██╬╬╬╬▓▓▓▓▓▓╬╬╬████╬╬████╬╬╬╬╬╬╬▓▓▓▓▓▓▓▓██╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬██╬╬╬╬╬╬╬███\n// ██╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬██████▓▓▓▓▓▓▓╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬▓▓▓▓▓▓▓██╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬██╬╬╬╬█████\n// ███╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬███╬╬╬╬╬██╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬█████╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬████████\n//   ███╬╬╬╬╬╬╬╬╬╬╬╬╬█████╬╬╬╬╬╬╬╬██╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬███╬╬██╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬██\n//       ██████████████  ████╬╬╬╬╬╬███████████████████████████╬╬╬╬╬██╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬╬████\n//                         ███████                           █████  ███████████████████  \n//\n#include \"bits/stdc++.h\"\nusing namespace std;\n#define INF (1<<30)\n#define LINF (1LL<<60)\n#define fs first\n#define sc second\n#define int long long\n#define FOR(i,a,b) for(int i=(a);i<(b);++i)\n#define RFOR(i,a,b) for(int i = (b-1);i>=(a);--i)\n#define REP(i,n)  FOR(i,0,(n))\n#define RREP(i,n) RFOR(i,0,(n))\n#define ITR(itr,mp) for(auto itr = (mp).begin(); itr != (mp).end(); ++itr)\n#define RITR(itr,mp) for(auto itr = (mp).rbegin(); itr != (mp).rend(); ++itr)\n#define range(i,a,b) ((a)<=(i) && (i)<(b))\n#define debug(x)  cout << #x << \" = \" << (x) << endl\n#define SP << \" \" << \ntemplate<typename T1,typename T2> inline void chmin(T1 &a,T2 b){if(a>b) a=b;}\ntemplate<typename T1,typename T2> inline void chmax(T1 &a,T2 b){if(a<b) a=b;}\n#define MSB(x) (63-__builtin_clzll(x))\n#define pcnt(x) (__builtin_popcountll(x))\n#define parity(i,j) (i&(1LL<<j))\ntypedef pair<int,int> P;\ntypedef tuple<int,int,int> T;\ntypedef vector<int> vec;\ntypedef vector<vector<int>> mat;\n\nsigned main(){\n  ios::sync_with_stdio(false);\n  cin.tie(0);\n\n  int n;\n  cin >> n;\n\n  vector<int> a(n);\n  vector<int> c(n,1);\n  REP(i,n){\n    char x;\n    if(i) cin >> x;\n    if(x=='-') c[i] = -1;\n    cin >> a[i];\n  }\n\n  int pm[3] = {1,-1,1};\n  mat dp(n+1,vec(3,-LINF));\n  dp[0][0] = 0;\n  REP(i,n){\n    REP(j,3){\n      REP(k,j+1){\n        chmax(dp[i+1][k],dp[i][j]+a[i]*c[i]*pm[j]);\n      }\n      if(c[i]==-1) chmax(dp[i+1][j+1],dp[i][j]+a[i]*c[i]*pm[j]);\n    }\n  }\n\n  cout << max({dp[n][0],dp[n][1],dp[n][2]}) << endl;\n\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<iomanip>\n#include<map>\n#include<unordered_map>\n#include<set>\n#include<unordered_set>\n#include<vector>\n#include<array>\n#include<string>\n#include<stack>\n#include<queue>\n#include<algorithm>\n#include<cassert>\n#include<functional>\n#include<random>\n#include<complex>\n#include<bitset>\n#include<chrono>\n//#include<boost/multiprecision/cpp_int.hpp>\n#define int int64_t\n#define uint uint64_t\n#define REP(i, a, b) for (int64_t i = (int64_t)(a); i < (int64_t)(b); i++)\n#define rep(i, a) REP(i, 0, a)\n#define SZ(X) ((int64_t)((X).size()))\n#define ITR(x, a) for (auto x = a.begin(); x != a.end(); x++)\n#define ALL(a) (a.begin()), (a.end())\n#define HAS(a, x) (a.find(x) != a.end())\n#define Min(x) *min_element(ALL(x))\n#define Max(x) *max_element(ALL(x))\n#define Unique(L) (L.erase(unique(ALL(L)), L.end()))\n#define intmax (std::numeric_limits<int64_t>::max() / 4)\n#define doublemax (std::numeric_limits<double>::max() / 4)\nusing namespace std;\n//typedef boost::multiprecision::cpp_int bigint;\nconst double EPS = 1e-9;\nconst double PI = acos(-1.0);\n\n//sort(ALL(v),greater<int>());\nclass segtree_sum_pointupdate {\nprivate:\n\ttypedef int T;\npublic:\n\tsegtree_sum_pointupdate(const int N) {\n\t\tSIZE = roundup_pow2(N);\n\t\tv.clear();\n\t\tv.resize(SIZE * 2, 0);\n\t}\n\n\t//v[index]=numberとする。\n\tvoid update(const int index, const T number) {\n\t\tv[index + SIZE] = number;\n\t\tfor (int i = (index + SIZE) / 2; i; i = i / 2)v[i] = v[i * 2] + v[i * 2 + 1];\n\t}\n\n\t//[index]の値を返す。\n\tT getnum(const int index) {\n\t\treturn v[index + SIZE];\n\t}\n\n\t//[L,R)の総和を返す。\n\tT getsum(const int L, const int R) {\n\t\treturn getsum_inner(L, R, 1, 0, SIZE);\n\t}\nprivate:\n\tT getsum_inner(const int queryL, const int queryR, const int index, const int segL, const int segR) {\n\t\tif (queryR <= segL || segR <= queryL)return 0;\n\t\tif (queryL <= segL && segR <= queryR)return v[index];\n\t\treturn getsum_inner(queryL, queryR, index * 2, segL, (segL + segR) / 2) +\n\t\t\tgetsum_inner(queryL, queryR, index * 2 + 1, (segL + segR) / 2, segR);\n\t}\n\n\t//x以上であるような2のべき乗数のうち最小のものを返す。\n\tint roundup_pow2(int x) {\n\t\tx--;\n\t\trep(i, 6)x |= x >> (1LL << i);\n\t\treturn x + 1;\n\t}\n\n\tint SIZE;\n\tvector<T>v;\n};\nsegtree_sum_pointupdate seg(1);\n\nint minimize(vector<int>&A, int start, int end) {\n\t//A[start]のマイナス符号の直後に(を置いて、\n\t//endの直後に)を置くとして、\n\t//( ) の内側を最小化したときの値を返す。\n\tassert(A[start] < 0 && A[end] < 0);\n\tint ans = -A[start];\n\tint cursor = start + 1;\n\tfor (; 0 < A[cursor]; cursor++) {\n\t\tans += A[cursor];\n\t}\n\tans -= seg.getsum(cursor, end + 1);\n\treturn ans;\n}\n\nsigned main() {\n\tcin.tie(0);\n\tios::sync_with_stdio(false);\n\n\tint N;\n\tcin >> N;\n\n\tseg = segtree_sum_pointupdate(N);\n\n\tvector<int>A(N), op(N - 1);\n\tint first = -1, last = -1;\n\trep(i, N) {\n\t\tstring s;\n\t\tif (i)cin >> s;\n\t\telse s = \"+\";\n\t\tint hugou = 1;\n\t\tif (s[0] == '-') {\n\t\t\thugou *= -1;\n\t\t\tif (first == -1)first = i;\n\t\t\tlast = i;\n\t\t}\n\t\tcin >> A[i];\n\t\tseg.update(i, A[i]);\n\t\tA[i] *= hugou;\n\t}\n\n\n\n\tif (first == last) {//マイナスの数が0or1\n\t\tint ans = 0;\n\t\trep(i, N)ans += A[i];\n\t\tcout << ans << endl;\n\t\treturn 0;\n\t}\n\n\tint ans = 0;\n\tfor (int i = 0; i < first; i++) {\n\t\tassert(0 < A[i]);\n\t\tans += A[i];\n\t}\n\tfor (int i = last+1; i < N; i++) {\n\t\tassert(0 < A[i]);\n\t\tans += A[i];\n\t}\n\twhile (first != last) {\n\t\tint secondlast = last - 1;\n\t\tint ans2 = A[last];\n\t\tfor (; 0 < A[secondlast]; secondlast--)ans2 += A[secondlast];\n\t\tint m = minimize(A, first, last);\n\t\tint m2 = minimize(A, first, secondlast) + ans2;\n\t\tif (min(m,m2) <= -A[first]) {\n\t\t\tans -= min(m, m2);\n\t\t\tcout << ans << endl;\n\t\t\treturn 0;\n\t\t}\n\t\tans += A[first++];\n\t\tfor (; 0 < A[first]; first++)ans += A[first];\n\n\t}\n\tans += A[first];\n\tcout << ans << endl;\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n\nusing namespace std;\n\nlong A[100000];\nlong sum[100001];\nlong sum_abs[100001];\nvector<int> negs;\n\nint main(){\n    int N;\n    cin >> N;\n    //cout << negs.size() << endl;\n    long ans;\n    sum[0] = 0;\n    sum_abs[0] = 0;\n    cin >> A[0];\n    sum[1] = A[0];\n    sum_abs[1] = A[0];\n    for(int i = 1; i < N; i++){\n        char op;\n        cin >> op;\n        cin >> A[i];\n        if(op == '-') {\n            A[i] *= -1;\n            negs.push_back(i);\n        }\n        sum[i+1] = sum[i]+A[i];\n        sum_abs[i+1] = sum_abs[i]+abs(A[i]);\n    }\n    ans = sum[N];\n    for(int i = 0; i+1 < negs.size(); i++){\n        cout << i << endl;\n        int l = negs[i];\n        int r = negs[i+1];\n        long tmp = sum_abs[N]-sum_abs[r] + sum[l+1] - (sum_abs[r]-sum_abs[l+1]);\n        ans = max(ans, tmp);\n    }\n    cout << ans << endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\ntypedef long long LL;\n\nconst int N = 1e5 + 10;\nint a[N], ri[N];\nchar b[N];\nLL sum[N];\n\nint main() {\n    int n;\n    scanf(\"%d\", &n);\n    scanf(\"%d\", &a[1]);\n    for (int i = 2; i <= n; i++) scanf(\" %c %d\", b + i, a + i);\n    for (int i = 1; i <= n; i++) sum[i] = sum[i-1] + a[i];\n    ri[n + 1] = n + 1;\n    for (int i = n; i >= 2; i--) {\n        ri[i] = ri[i+1];\n        if (b[i+1] == '-') ri[i] = i + 1;\n    }\n    LL ans = -1e18;\n    LL tmp = a[1];\n    for (int i = 2; i <= n; i++) {\n        if (b[i] == '-') {\n            LL ans1 = tmp - a[i] - (sum[ri[i]-1]-sum[i]) + (sum[n] - sum[ri[i]-1]);\n            ans = max(ans1, ans);\n        }\n        if (b[i] == '-') tmp -= a[i];\n        else tmp += a[i];\n    }\n    ans = max(ans, tmp);\n    printf(\"%lld\\n\", ans);\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstdio>\n#include<cstring>\ntypedef long long lint;\nconst int N=1e5+2;\nint n;\nlint dp[2][3];\n\ntemplate <class T> inline void apx(T &x,const T y){\n\tif(x<y) x=y;\n}\n\ninline int nxi(){\n\tint x=0;\n\tchar c;\n\twhile((c=getchar())>'9'||c<'0');\n\twhile(x=x*10-48+c,(c=getchar())>='0'&&c<='9');\n\treturn x;\n}\n\nint main(){\n#ifndef ONLINE_JUDGE\n\tfreopen(\"a.in\",\"r\",stdin);\n#endif\n\tn=nxi();\n\tdp[1][0]=nxi();\n\tdp[1][1]=dp[1][2]=-1e13;\n\tfor(int i=2;i<=n;++i){\n\t\tchar op;\n\t\twhile((op=getchar())!='-'&&op!='+');\n\t\tconst int hx=nxi(),p=i&1;\n\t\tconst int cur=hx*(op=='+'?1:-1);\n\t\tdp[p][0]=dp[p^1][0]+cur;\n\t\tdp[p][1]=dp[p^1][1]-cur;\n\t\tdp[p][2]=dp[p^1][2]+cur;\n//\t\tprintf(\"%d: \",i);\n//\t\tfor(int j=0;j<3;++j){\n//\t\t\tprintf(\"%lld \",dp[p][j]);\n//\t\t}\n//\t\tputs(\"\");\n\t\tapx(dp[p][1],dp[p][2]);\n\t\tapx(dp[p][0],dp[p][1]);\n\t\tif(op=='-'){\n\t\t\tapx(dp[p][1],dp[p^1][0]-hx);\n\t\t\tapx(dp[p][2],dp[p^1][1]+hx);\n\t\t}\n//\t\tprintf(\"%d: \",i);\n//\t\tfor(int j=0;j<3;++j){\n//\t\t\tprintf(\"%lld \",dp[p][j]);\n//\t\t}\n//\t\tputs(\"\");\n\t}\n\tlint ans=-1e16;\n\tfor(int i=0;i<3;++i){\n\t\tapx(ans,dp[n&1][i]);\n\t}\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstring>\n#include<cstdio>\n#define MN 100000\nusing namespace std;\ninline int read()\n{\n\tint x=0,f=1;char ch=getchar();\n\twhile(ch<'0'||ch>'9'){if(ch=='-')f=-1;ch=getchar();}\n\twhile(ch>='0'&&ch<='9'){x=x*10+ch-'0';ch=getchar();}\n\treturn x*f;\n}\nchar s[5];long long f[MN+5][4];\nint a[MN+5],op[MN+5],n;\n#define S(x) ((x)?-1:1)\ninline void R(long long&x,long long y){y>x?x=y:0;}\nint main()\n{\n\tn=read();a[1]=read();\n\tfor(int i=2;i<=n;++i) scanf(\"%s\",s),op[i]=s[0]=='-',a[i]=read();\n\tmemset(f,200,sizeof(f));f[1][0]=a[1];\n\tfor(int i=2;i<=n;++i)\n\t\tfor(int j=0;j<4;++j) \n\t\t\tfor(int k=0;k<2;++k)\n\t\t\t{\n\t\t\t\tint OP=j>>k&1;\n\t\t\t\tif(!k) R(f[i][j],f[i-1][j]+S(OP^op[i])*a[i]),\n\t\t\t\t\t   R(f[i][(j&2)|(OP^op[i])],f[i-1][j]+S(OP^op[i])*a[i]);\n\t\t\t\tR(f[i][OP<<1|(OP^op[i])],f[i-1][j]+S(OP^op[i])*a[i]);\t\n\t\t\t}\n\tlong long ans=-1e18;\n\tfor(int i=0;i<4;++i) R(ans,f[n][i]);\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\ntypedef long long ll;\nconst int maxn = 1e5 + 5;\n\ninline int gi()\n{\n\tchar c = getchar();\n\twhile (c < '0' || c > '9') c = getchar();\n\tint sum = 0;\n\twhile ('0' <= c && c <= '9') sum = sum * 10 + c - 48, c = getchar();\n\treturn sum;\n}\n\ninline int gc()\n{\n\tchar c = getchar();\n\twhile (c != '-' && c != '+') c = getchar();\n\treturn c == '+' ? 1 : -1;\n}\n\ninline void chkmax(ll &a, ll b) {if (a < b) a = b;}\n\nint n, a[maxn], b[maxn], pw[3];\nll f[maxn][3];\n\nint main()\n{\n\tn = gi();\n\ta[1] = gi(); b[1] = 1;\n\tfor (int i = 2; i <= n; ++i) b[i] = gc(), a[i] = gi();\n\n\tmemset(f, -63, sizeof(f));\n\tf[1][0] = a[1];\n\tpw[0] = pw[2] = 1; pw[1] = -1;\n\tfor (int i = 1; i <= n; ++i) {\n\t\tfor (int j = 0; j <= 2; ++j)\n\t\t\tif (f[i][j] > -1e18) {\n\t\t\t\tchkmax(f[i + 1][j], f[i][j] + a[i + 1] * b[i + 1] * pw[j]);\n\t\t\t\tif (j) chkmax(f[i + 1][j - 1], f[i][j] + a[i + 1] * b[i + 1] * pw[j - 1]);\n\t\t\t\tif (b[i + 1] < 0 && j < 2) chkmax(f[i + 1][j + 1], f[i][j] + a[i + 1] * b[i + 1] * pw[j]);\n\t\t\t\tif (b[i + 1] < 0 && j) chkmax(f[i + 1][j], f[i][j] + a[i + 1] * b[i + 1] * pw[j - 1]);\n\t\t\t}\n\t}\n\n\tprintf(\"%lld\\n\", max(f[n][0], max(f[n][1], f[n][2])));\n\t\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define maxn 100005\n#define ll long long\nusing namespace std;\nint arr[maxn];\nll suf[maxn];\nint main() {\n\tios::sync_with_stdio(0);\n\tcin.tie(0);\n\tint n;\n\tcin >> n;\n\tcin >> arr[1];\n\tfor(int i=2;i<=n;i++) {\n\t\tchar op;\n\t\tcin >> op >> arr[i];\n\t\tif(op == '-')\tarr[i] *= -1;\n\t}\n\tfor(int i=n;i>=1;i--)\n\t\tsuf[i] = suf[i+1] + abs(arr[i]);\n\tll ans = -1e18 , sum = 0;\n\tfor(int i=1;i<=n;i++) {\n\t\tsum += arr[i];\n\t\tif(arr[i] < 0)\n\t\t\tans = max(ans,sum - arr[i+1] + suf[i+2]);\n\t}\n\tcout << ans << endl;\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "//@winlere\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<algorithm>\n\nusing namespace std;  typedef long long ll;   char __buf[1<<18],*__c=__buf,*__ed=__buf;\ninline int qr(){\n\tint ret=0,f=0,c=getchar();\n\twhile(!isdigit(c)) f|=c==45,c=getchar();\n\twhile( isdigit(c)) ret=ret*10+c-48,c=getchar();\n\treturn f?-ret:ret;\n}\nconst int maxn=1e5+5;\nint data[maxn],n;\nll dp[maxn][3];\n\nint main(){\n\tmemset(dp,0xcc,sizeof dp);\n\tn=qr();\n\tfor(int t=1;t<=n;++t) data[t]=qr();\n\tdp[0][0]=0;\n\tfor(int t=1;t<=n;++t){\n\t\tif(data[t]>0){\n\t\t\tdp[t][0]=max({dp[t][0],dp[t-1][0]+data[t],dp[t-1][1]+data[t],dp[t-1][2]+data[t]});\n\t\t\tdp[t][1]=max({dp[t][1],dp[t-1][1]-data[t],dp[t-1][2]-data[t]});\n\t\t\tdp[t][2]=max({dp[t][2],dp[t-1][2]+data[t]});\n\t\t}else{\n\t\t\tdata[t]=-data[t];\n\t\t\tdp[t][0]=max({dp[t][0],dp[t-1][0]-data[t],dp[t-1][1]-data[t],dp[t-1][2]-data[t]});\n\t\t\tdp[t][1]=max({dp[t][1],dp[t-1][0]-data[t],dp[t-1][1]+data[t],dp[t-1][2]+data[t]});\n\t\t\tdp[t][2]=max({dp[t][2],dp[t-1][1]+data[t],dp[t-1][2]+data[t]});\n\t\t}\n\t}\n\tcout<<max({dp[n][0],dp[n][1],dp[n][2]})<<endl;\n\treturn 0;\n\t\n}\n\n"
  },
  {
    "language": "C++",
    "code": "//#include <atcoder/all>\n#include <bits/stdc++.h>\nusing namespace std;\n//using namespace atcoder;\n#define int long long\n   template<class T>bool chmax(T &a, const T &b) { if (a<b) { a=b; return 1; } return 0; }\ntemplate<class T>bool chmin(T &a, const T &b) { if (b<a) { a=b; return 1; } return 0; }\n    const int MAX =1002;\nconst int MOD =1000000007;\n\nsigned main(){\n  int n,a,b,x;\n  cin>>n>>a;b=a;\n  vector<int> v,w;\n  char c;\n  for(int i=1;i<n;i++){\n    cin>>c>>x;\n    if(c=='+'){\n      a+=x;\n      b+=x;continue;\n    }\n    v.push_back(a);\n    w.push_back(b);\n    a=x;b=-x;\n  }\n  v.push_back(a);\n    w.push_back(b);\n    int ans[3]={};\n  for(int i=v.size()-1;i>=0;i--){\n    ans[2]=w[i]+max(ans[2],ans[1]);\n    ans[1]=ans[0]-v[i];\n    ans[0]+=v[i];\n  }\n  cout<<ans[2]<<endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define del(a,i) memset(a,i,sizeof(a))\n#define ll long long\n#define inl inline\n#define il inl void\n#define it inl int\n#define ill inl ll\n#define re register\n#define ri re int\n#define rl re ll\n#define mid ((l+r)>>1)\n#define lowbit(x) (x&(-x))\n#define INF 0x3f3f3f3f\nusing namespace std;\ntemplate<class T>il read(T &x){\n\tint f=1;char k=getchar();x=0;\n\tfor(;k>'9'||k<'0';k=getchar()) if(k=='-') f=-1;\n\tfor(;k>='0'&&k<='9';k=getchar()) x=(x<<3)+(x<<1)+k-'0';\n\tx*=f;\n}\ntemplate<class T>il _print(T x){\n\tif(x/10) _print(x/10);\n\tputchar(x%10+'0');\n}\ntemplate<class T>il print(T x){\n\tif(x<0) putchar('-'),x=-x;\n\t_print(x);\n}\nll mul(ll a,ll b,ll mod){long double c=1.;return (a*b-(ll)(c*a*b/mod)*mod)%mod;}\nit qpow(int x,int m,int mod){\n\tint res=1,bas=x;\n\twhile(m){\n\t\tif(m&1) res=(1ll*res*bas)%mod;\n\t\tbas=(1ll*bas*bas)%mod,m>>=1;\n\t}\n\treturn res;\n}\nconst int N = 1e5+5;\nint n,val[N],ty[N];\nll ans,abs_sum[N],sum[N];\nchar op[2];\nvector<int> vec;\nint main(){\n//\tfreopen(\".in\",\"r\",stdin);\n//\tfreopen(\".out\",\"w\",stdout);\n\tread(n),read(val[1]),sum[1]=val[1];\n\tfor(ri i=2;i<=n;++i){\n\t\tscanf(\"%s\",op),read(val[i]);\n\t\tif(op[0]=='-') vec.push_back(i),sum[i]=sum[i-1]-val[i];\n\t\telse sum[i]=sum[i-1]+val[i];\n\t}\n\tvec.push_back(n+1);\n\tfor(ri i=1;i<=n;++i) abs_sum[i]=abs_sum[i-1]+val[i];\n\tans=INT_MIN;\n\tfor(ri i=0;i<(int)vec.size()-1;++i){\n\t\tint x=vec[i],y=vec[i+1];\n\t\tans=max(ans,sum[x-1]-(abs_sum[y-1]-abs_sum[x-1])+(abs_sum[n]-abs_sum[y-1]));\n\t}\n\tprint(ans);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstdio>\n#include<cstdlib>\n#include<cstring>\n#include<algorithm>\nusing namespace std;\n\ntypedef long long LL;\n\nconst int N=100005;\nconst LL inf=(LL)1e15;\n\nint n,a[N];\nchar op[N][2];\nLL f[N][3];\n\nint main()\n{\n\tscanf(\"%d\",&n);\n\tfor (int i=1;i<n;i++) scanf(\"%d%s\",&a[i],op[i]);\n\tscanf(\"%d\",&a[n]);\n\tf[1][0]=a[1];f[1][1]=f[1][2]=-inf;\n\tfor (int i=2;i<=n;i++)\n\t\tif (op[i-1][0]=='+')\n\t\t{\n\t\t\tf[i][0]=max(f[i-1][0],f[i-1][1])+a[i];\n\t\t\tf[i][1]=f[i-1][1]-a[i];\n\t\t\tf[i][2]=f[i-1][2]+a[i];\n\t\t}\n\t\telse\n\t\t{\n\t\t\tf[i][0]=-inf;\n\t\t\tf[i][1]=max(f[i-1][0],f[i-1][1])-a[i];\n\t\t\tf[i][2]=max(f[i-1][1],f[i-1][2])+a[i];\n\t\t}\n\tprintf(\"%lld\",max(f[n][0],max(f[n][1],f[n][2])));\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <sstream>\n#include <string>\n#include <vector>\n#include <stack>\n#include <queue>\n#include <set>\n#include <map>\n#include <numeric>\n#include <algorithm>\n#include <cstdio>\n#include <cstdlib>\n#include <cstring>\n#include <cctype>\n#include <cmath>\n#include <cassert>\n#include <cstdarg>\n#include <sys/time.h>\n#include <fstream>\n//#include \"cout.h\"\n\nusing namespace std;\n\n#define SZ(x) ((int)x.size())\n#define MSET(x,a) memset(x, a, (int)sizeof(x))\n#define PB push_back\n#define VI vector < int >\n#define PII pair < int, int >\n#define LL long long\n#define FOR(i,a,b) for (int i = (a); i < (b); i++)\n#define REP(i,n) FOR(i,0,n)\n#define ALL(v) (v).begin(), (v).end()\n#define FIT(it,v) for (__typeof((v).begin()) it = (v).begin(); it != (v).end(); it++)\n#define OUT(A) cout << #A << \" = \"<< (A) << endl\n#define OUT2(A, B) cout << \"(\" << #A << \", \" << #B << \") = (\" << (A) << \", \"<< (B) << \")\" << endl\ntemplate<class T> void chmin(T &t, T f) { if (t > f) t = f; } \ntemplate<class T> void chmax(T &t, T f) { if (t < f) t = f; } \n\n#define present(c, e) ((c).find((e)) != (c).end())\n#define cpresent(c, e) (find(all(c), (e)) != (c).end())\n\nint n;\nLL a[100010];\nchar op[100010];\nLL dp[100010][3];\n\nvoid init() {\n}\n\nvoid input() {\n\tcin >> n;\n\tREP(i, n) {\n\t\tcin >> a[i];\n\t\tif (i < n-1) cin >> op[i+1];\n\t}\n}\n\nvoid solve() {\n\tREP(i, 100010) REP(j, 3) dp[i][j] = -1e15;\n\tdp[0][0] = a[0];\n\tFOR(i, 1, n){\n\t\tif(op[i] == '+'){\n\t\t\tdp[i][0] = max({\n\t\t\t\tdp[i-1][0]+a[i], \n\t\t\t\tdp[i-1][1]+a[i], \n\t\t\t\tdp[i-1][2]+a[i]\n\t\t\t\t});\n\t\t\tdp[i][1] = max({\n\t\t\t\tdp[i-1][1]-a[i], \n\t\t\t\t// dp[i-1][2]-a[i]\n\t\t\t\t});\n\t\t\tdp[i][2] = max({\n\t\t\t\tdp[i-1][2]+a[i]\n\t\t\t\t});\n\t\t}\n\t\telse{\n\t\t\t// dp[i][0] = max({\n\t\t\t// \tdp[i-1][0]-a[i], \n\t\t\t// \tdp[i-1][1]-a[i], \n\t\t\t// \tdp[i-1][2]-a[i]\n\t\t\t// \t});\n\t\t\tdp[i][1] = max({\n\t\t\t\tdp[i-1][0]-a[i], \n\t\t\t\t// dp[i-1][1]+a[i], \n\t\t\t\t// dp[i-1][2]+a[i]\n\t\t\t\t});\n\t\t\tdp[i][2] = max({\n\t\t\t\tdp[i-1][1]+a[i], \n\t\t\t\t// dp[i-1][2]-a[i]\n\t\t\t\tdp[i-1][2]+a[i]\n\t\t\t\t});\n\t\t}\n\t}\n\tcout << max({dp[n-1][0], dp[n-1][1], dp[n-1][2]}) << endl;\n}\n\nint main() {\n\tinit();\n    input();\n    solve();\n\treturn 0;\n}\n\n\n\n\n\n\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n//#define int long long\n\ntypedef long long ll;\ntypedef pair<int,int> pii;\ntypedef pair<ll,int> plli;\ntypedef pair<int,pii> pipii;\ntypedef vector<int> vi;\ntypedef vector<ll> vll;\ntypedef vector<vi> vvi;\ntypedef vector<vvi> vvvi;\ntypedef vector<pii> vpii;\n\n#define rep(i,n) for (int i=0;i<(n);i++)\n#define rep2(i,a,b) for (int i=(a);i<(b);i++)\n#define rrep(i,n) for (int i=(n);i>0;i--)\n#define rrep2(i,a,b) for (int i=(a);i>b;i--)\n#define pb push_back\n#define fi first\n#define se second\n#define all(a) (a).begin(),(a).end()\n\nconst ll mod = 1e9 + 7;\nconst ll INF = 1<<30;\nconst int dx4[4] = {1, 0, -1, 0};\nconst int dy4[4] = {0, 1, 0, -1};\nconst int dx8[8] = {1, 1, 1, 0, 0, -1, -1, -1};\nconst int dy8[8] = {0, 1, -1, 1, -1, 0, 1, -1};\nconst double pi = 3.141592653589793;\n\nll n;\nstring a[200000 + 5];\nll sum[200000 + 5];\n\nsigned main(){\n    cin.tie(0);\n    ios::sync_with_stdio(false);\n    cin >> n;\n    n += n - 1;\n    rep(i, n) cin >> a[i];\n    sum[0] = ll(stoi(a[0]));\n    rep2(i, 1, n) {\n        if(i % 2 == 0) continue;\n        if (a[i] == \"+\") sum[i + 1] = sum[i - 1] + ll(stoi(a[i + 1]));\n        else sum[i + 1] = sum[i - 1] - ll(stoi(a[i + 1]));\n    }\n    ll ans = ll(stoi(a[0]));\n    rep2(i, 1, n) {\n        if (i % 2 == 0) continue;\n        if (a[i] == \"+\") ans += ll(stoi(a[i + 1]));\n        else ans -= ll(stoi(a[i + 1]));\n    }\n    ll plus = 0;\n    ll minus = 0;\n    rrep2(i, n - 1, -1) {\n        if (a[i] == \"+\") continue;\n        if (a[i] == \"-\") {\n            ans = max(ans, sum[i - 1] + plus + minus);\n            plus += -minus;\n            minus = 0LL;\n        }\n        else minus -= ll(stoi(a[i]));\n    }\n    cout << ans << endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <algorithm>\n\nusing namespace std;\n\n#define REP(i,n)   for(int i=0; i<(int)(n); i++)\n#define FOR(i,b,e) for(int i=(b); i<=(int)(e); i++)\n#define DUMP2D(a, n, m) REP(i, n) REP(j, m) printf(\"%lld%c\", a[i][j], j + 1 == m ? '\\n' : ' '); puts(\"\")\n\ntypedef long long ll;\n\nconst int N_MAX = 100000;\nconst ll INF = 1e15;\n\nint N;\nint A[N_MAX];\nint op[N_MAX + 1];\nll dp[N_MAX + 1][3];\n\nvoid solve() {\n  fill(dp[0], dp[N + 1], -INF);\n  fill(dp[0], dp[1], 0);\n  int m = 1;\n  REP(i, N) {\n    REP(j, m) {\n      int k = j + op[i];\n      int f = (k % 2 == 0 ? 1 : -1);\n      dp[i + 1][j] = max(dp[i + 1][j], dp[i][j] + A[i] * f);\n      if (j < 2 && op[i] > 0) {\n        dp[i + 1][j + 1] = max(dp[i + 1][j + 1], dp[i][j] + A[i] * f);\n      }\n      if (j > 0) {\n        dp[i + 1][j - 1] = max(dp[i + 1][j - 1], dp[i][j] + A[i] * -f);\n      }\n    }\n    m += op[i];\n  }\n\n  // DUMP2D(dp, N + 1, 3);\n\n  ll ans = -INF;\n  REP(j, 3) ans = max(ans, dp[N][j]);\n  printf(\"%lld\\n\", ans);\n}\n\nvoid input() {\n  scanf(\"%d\", &N);\n  REP(i, N) {\n    scanf(\"%d\", A + i);\n    if (i + 1 < N) {\n      char buf[2];\n      scanf(\"%s\", buf);\n      op[i + 1] = buf[0] == '-' ? 1 : 0;\n    }\n  }\n}\n\nint main() {\n  input();\n  solve();\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <algorithm>\n\nusing namespace std;\n\n#define REP(i,n)   for(int i=0; i<(int)(n); i++)\n#define FOR(i,b,e) for(int i=(b); i<=(int)(e); i++)\n#define DUMP2D(a, n, m) REP(i, n) REP(j, m) printf(\"%lld%c\", a[i][j], j + 1 == m ? '\\n' : ' '); puts(\"\")\n\ntypedef long long ll;\n\nconst int N_MAX = 100000;\nconst ll INF = 1e15;\n\nint N;\nint A[N_MAX];\nint op[N_MAX + 1];\nll dp[N_MAX + 1][3];\n\nvoid solve() {\n  fill(dp[0], dp[N + 1], -INF);\n  fill(dp[0], dp[1], 0);\n  int m = 1;\n  REP(i, N) {\n    REP(j, min(m, 3)) {\n      int k = j + op[i];\n      int f = (k % 2 == 0 ? 1 : -1);\n      dp[i + 1][j] = max(dp[i + 1][j], dp[i][j] + A[i] * f);\n      if (j < 2 && op[i] > 0) {\n        dp[i + 1][j + 1] = max(dp[i + 1][j + 1], dp[i][j] + A[i] * f);\n      }\n      if (j > 0) {\n        dp[i + 1][j - 1] = max(dp[i + 1][j - 1], dp[i][j] + A[i] * -f);\n      }\n    }\n    m += op[i];\n  }\n\n  // DUMP2D(dp, N + 1, 3);\n\n  ll ans = -INF;\n  REP(j, 3) ans = max(ans, dp[N][j]);\n  printf(\"%lld\\n\", ans);\n}\n\nvoid input() {\n  scanf(\"%d\", &N);\n  REP(i, N) {\n    scanf(\"%d\", A + i);\n    if (i + 1 < N) {\n      char buf[2];\n      scanf(\"%s\", buf);\n      op[i + 1] = buf[0] == '-' ? 1 : 0;\n    }\n  }\n}\n\nint main() {\n  input();\n  solve();\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\nconst int mx = 100005;\nchar c;\nint n, m, a;\nlong long ac[mx], ans = -1e15;\n\nint main(){\n    scanf(\"%d%lld\", &n, ac);\n    for(int i = 1; i < n; i++){\n        scanf(\" %c %d\", &c, &a);\n        if(c == '+'){\n            for(int i = 0; i < m; i++){\n                ac[i] = max(ac[i] + (i&1 ? -a : a), ac[i+1] + (i&1 ? a : -a));\n            }\n            ac[m] += (m&1 ? -a : a);\n        }else{\n            ac[m+1] = ac[m] + (m&1 ? a : -a);\n            for(int i = m++; i > 0; i--){\n                ac[i] = max(ac[i] + (i&1 ? a : -a), ac[i-1] + (i&1 ? -a : a));\n            }\n            ac[0] -= a;\n        }\n    }\n    for(int i = 0; i <= m; i++) ans = max(ans, ac[i]);\n    printf(\"%lld\\n\", ans);\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\nconst int N = 100010;\ntypedef long long LL;\nint op[N], num[N]; LL dp[N][3]; char s[5];\nint main() {\n\tint n; scanf(\"%d%d\", &n, &num[1]), op[1] = 1;\n\tfor (int i = 2; i <= n; i++) {\n\t\tscanf(\"%s%d\", s + 1, &num[i]);\n\t\tif (s[1] == '-') op[i] = -1; else op[i] = 1;\n\t}\n\tmemset(dp, -0x3f, sizeof(dp)), dp[1][0] = num[1];\n\tfor (int i = 2; i <= n; i++) {\n\t\tdp[i][1] = dp[i - 1][1] - op[i] * num[i];\n\t\tdp[i][0] = dp[i - 1][0] + op[i] * num[i];\n\t\tdp[i][2] = dp[i - 1][2] + op[i] * num[i];\n\t\tif (op[i - 1] == -1) {\n\t\t\tdp[i][1] = max(dp[i][1], dp[i - 1][0] - op[i] * num[i]);\n\t\t\tdp[i][2] = max(dp[i][2], dp[i - 1][1] + op[i] * num[i]);\n\t\t}\n\t\tdp[i][1] = max(dp[i][1], dp[i][2]);\n\t\tdp[i][0] = max(dp[i][0], dp[i][1]);\n\t}\n\tprintf(\"%lld\\n\", dp[n][0]);\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstdio>\n#include <algorithm>\n#include <queue>\n#include <cmath>\n#include <stack>\n#include <map>\n#include <set>\n#include <utility>\n#include <cstring>\n#include <vector>\n#define rep(i,n) for(ll i=1;i<=n;i++)\n#define repn(i,n) for(ll i=n;i>=1;i--)\n#define ll long long\n#define mt(a,x) memset(a,x,sizeof(a))\nconst ll mod = 1e9+7;\nconst ll maxn = 100050;\nusing namespace std;\nll n;\nll a[maxn];\nchar op[maxn];\nll solve(ll pos)\n{\n    if(pos==n) return a[pos];\n    ll tmp = 0;\n    if(op[pos]=='+') tmp = 1;\n    else tmp = 2;\n    if(tmp==1) return a[pos]+solve(pos+1);\n    else return a[pos]-solve(pos+1);\n}\nint main()\n{\n    //freopen(\"data\",\"r\",stdin);\n    ios::sync_with_stdio(0);\n    cin>>n;\n    rep(i,n)\n    {\n        if(i!=n) cin>>a[i]>>op[i];\n        else cin>>a[i];\n    }\n    /*rep(i,n)\n    {\n        if(i!=n) cout<<a[i]<<op[i];\n        else cout<<a[i];\n    }*/\n    cout<<solve(1)<<endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\n#define ll long long\n#define ull unsigned long long\n#define re register\n#define il inline\n#define inf 0x3f3f3f\ninline int read() {\n  char ch = getchar();\n  int x = 0, f = 1;\n  while (ch > '9' || ch < '0') {\n    if (ch == '-')\n      f = -1;\n    ch = getchar();\n  }\n  while (ch >= '0' && ch <= '9') {\n    x = x * 10 + ch - '0';\n    ch = getchar();\n  }\n  return x * f;\n}\nconst int maxn = 1e5 + 5;\nll f[maxn][3];\nint n;\nint main() {\n  n = read();\n  f[0][0] = 0, f[0][1] = f[0][2] = -inf;\n  for (int i = 1, x; i <= n; ++i) {\n    x = read();\n    {\n      f[i][0] = max(f[i - 1][0], f[i - 1][1]),\n      f[i][1] = max(f[i - 1][1], f[i - 1][2]);\n      f[i][2] = f[i - 1][2];\n    }\n    f[i][0] += x, f[i][1] -= x, f[i][2] += x;\n    if (x < 0)\n      f[i][2] = max(f[i][2], f[i][1]), f[i][1] = max(f[i][1], f[i][0]);\n  }\n  printf(\"%lld\\n\", max(f[n][0], max(f[n][1], f[n][2])));\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\nchar o;long long x,n,a,b,c;int main(){b=c=-1e18;cin>>n>>a;for(int i=1;i<n;++i){cin>>o>>x;if(o^'-')a+=x,c+=x,b=max(b-x,c);else c=b+x,a=b=max(a-x,c);}cout<<a;}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<string>\n#include<cstdio>\n#include<vector>\n#include<cmath>\n#include<algorithm>\n#include<functional>\n#include<iomanip>\n#include<queue>\n#include<ciso646>\n#include<random>\n#include<map>\n#include<set>\n#include<complex>\n#include<bitset>\n#include<stack>\n#include<unordered_map>\n#include<utility>\nusing namespace std;\ntypedef long long ll;\ntypedef unsigned int ui;\nconst ll mod = 1000000007;\nconst ll INF = (ll)1000000007 * 1000000007;\ntypedef pair<int, int> P;\n#define stop char nyaa;cin>>nyaa;\n#define rep(i,n) for(int i=0;i<n;i++)\n#define per(i,n) for(int i=n-1;i>=0;i--)\n#define Rep(i,sta,n) for(int i=sta;i<n;i++)\n#define rep1(i,n) for(int i=1;i<=n;i++)\n#define per1(i,n) for(int i=n;i>=1;i--)\n#define Rep1(i,sta,n) for(int i=sta;i<=n;i++)\ntypedef long double ld;\ntypedef complex<ld> Point;\nconst ld eps = 1e-4;\nconst ld pi = acos(-1.0);\ntypedef pair<ll, ll> LP;\n\n\nint n;\nbool m[1 << 18];\nll a[1 << 18];\nll s[1 << 18];\nll sx[1 << 18];\nvector<int> v;\nint main() {\n\tcin >> n;\n\tcin >> a[0];\n\trep1(i, n-1) {\n\t\tchar t; cin >> t >> a[i];\n\t\tif (t == '-') {\n\t\t\tm[i] = true;\n\t\t\tv.push_back(i);\n\t\t}\n\t}\n\trep(i, n) {\n\t\ts[i + 1] = s[i] + a[i];\n\t\tif(!m[i])sx[i + 1] = sx[i] + a[i];\n\t\telse sx[i + 1] = sx[i] - a[i];\n\t}\n\tll ans = sx[n];\n\trep(i, v.size() - 1) {\n\t\tint le = v[i], ri = v[i + 1];\n\t\tll z = sx[le] - (s[ri] - s[le]) + s[n] - s[ri];\n\t\tans = max(ans, z);\n\t}\n\tcout << ans << endl;\n\t//stop\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\ntypedef vector<ll> vi;\ntypedef pair<ll,ll> pi;\ntypedef pair<ll,ll> pii;\ntypedef vector<pi> vpi;\ntypedef set<ll> si;\ntypedef long double ld;\n#define mp make_pair\n#define pb push_back\n#define f first\n#define s second\nll INF = 1e9;\nll MOD = 1e9+7;\n#define lb lower_bound\n#define ub upper_bound\n#define SZ(x) (ll)x.size()\n#define ALL(x) x.begin(),x.end()\n\nll ans;\nchar c;\nll N,a,t,out;\nvpi V;\n\nint main(){\n  // freopen(\"in.txt\",\"r\",stdin);\n  cin >> N;\n  cin >> ans;\n  for (int i=1;i<N;++i){\n    cin >> c >> a;\n    if (SZ(V) == 0 && c == '+'){\n      ans += a;\n      continue;\n    }\n    ans += a;\n    if (SZ(V) && V.back().f && c == '+'){\n      V.back().s += a;\n      continue;\n    }\n    V.pb(mp(c == '+', a));\n  }\n  ans -= 2*V[0].s;\n  if (SZ(V) < 2){\n    cout<<ans;\n    return 0;\n  }\n  if (V[1].f == 0){\n    // If second one is negative\n    cout << ans;\n    return 0;\n  }\n  out = max(out, ans - 2*V[1].s);\n  \n  cout<<out;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n#ifndef ONLINE_JUDGE\n#define dbg(x...) do{cout << \"\\033[32;1m\" << #x << \"->\" ; err(x);} while(0)\nvoid err(){cout << \"\\033[39;0m\" << endl;}\ntemplate<template<typename...> class T,typename t,typename... A>\nvoid err(T<t> a,A... x){for (auto v:a) cout << v << ' '; err(x...);}\ntemplate<typename T,typename... A>\nvoid err(T a,A... x){cout << a << ' '; err(x...);}\n#else\n#define dbg(...)\n#endif\ntypedef long long ll;\ntypedef pair<ll,ll> pi;\ntypedef vector<ll> vi;\ntemplate<class T> using vc=vector<T>;\ntemplate<class T> using vvc=vc<vc<T>>;\ntemplate<class T> void mkuni(vector<T>&v)\n{\n    sort(v.begin(),v.end());\n    v.erase(unique(v.begin(),v.end()),v.end());\n}\ntemplate<class T>\nvoid print(T x,int suc=1)\n{\n    cout<<x;\n    if(suc==1) cout<<'\\n';\n    else cout<<' ';\n}\ntemplate<class T>\nvoid print(const vector<T>&v,int suc=1)\n{\n    for(int i=0;i<v.size();i++)\n        print(v[i],i==(int)(v.size())-1?suc:2);\n}\nconst int maxn=1e5+7;\nll dp[maxn][3];\nint a[maxn];\nstring op[maxn];\nint n;\nll dfs(int x,int cc)\n{\n\tif(x==n+1) return 0;\n\tll &ret=dp[x][cc];\n\tif(ret!=-1) return ret;\n\tret=0;\n\tint sgn=(cc==1?-1:1);\n\tif(op[x-1][0]=='+')\n\t{\n\t\tret=max(ret,dfs(x+1,cc)+sgn*a[x]);\n\t\tif(cc) ret=max(ret,dfs(x+1,cc-1)+sgn*a[x]);\n\t}\n\telse{\n\t\tsgn*=-1;\n\t\tret=max(ret,dfs(x+1,cc)+sgn*a[x]);\n\t\tif(cc<2) ret=max(ret,dfs(x+1,cc+1)+sgn*a[x]);\n\t}\n\treturn ret;\n}\nint main()\n{\n\tmemset(dp,-1,sizeof(dp));\n\tcin>>n;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tcin>>a[i];\n\t\tif(i!=n) cin>>op[i];\n\t}\n\top[0]=\"+\";\n\tcout<<dfs(1,0)<<endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstdio>\n#include <algorithm>\n#include <vector>\n#include <stack>\n#include <queue>\n#include <map>\n#include <set>\n#include <string>\n#include <cstring>\n#include <bitset>\n#define ll long long\n#define rep(x,n) for(ll (x)=0;(x)<n;(x)++)\n#define rep1(x,n) for(ll (x)=1;(x)<=n;(x)++)\n#define ios::sync_with_stdio(0);\n#define lson(x) ((x)<<1)\n#define rson(x) ((x)<<1|1)\nusing namespace std;\n\nconst int N=100010;\nll a[N],per[N];\nvector<int> sub;\n\nint main()\n{\n    #ifdef LOCAL\n        //freopen(\"C_data.txt\",\"r\",stdin);\n    #endif // LOCAL\n    ll n;\n    cin>>n>>a[0];\n    per[0]=a[0];\n    ll abssum=a[0],ans=a[0];\n    char op;\n    for(int j=1;j<n;j++)\n    {\n        cin>>op>>a[j];\n        per[j]=per[j-1]+a[j];\n        abssum+=a[j];\n        if(op=='+') ans+=a[j];\n        else\n        {\n            ans-=a[j];\n            sub.push_back(j);\n        }\n    }\n    for(int j=0;j<sub.size()-1;j++)\n    {\n        int p1=sub[j],p2=sub[j+1];\n        ll t=abssum-=(per[p2-1]-per[p1-1])*2;\n        ans=max(ans,t);\n        abssum-=a[p1]*2;\n    }\n    cout<<ans<<endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n#define rep(i,x,y) for(int i=(x);i<(y);++i)\n#define debug(x) #x << \"=\" << (x)\n\n#ifdef DEBUG\n#define _GLIBCXX_DEBUG\n#define print(x) std::cerr << debug(x) << \" (L:\" << __LINE__ << \")\" << std::endl\n#else\n#define print(x)\n#endif\n\nconst int inf=1e9;\nconst int64_t inf64=1e15;\nconst double eps=1e-9;\n\ntemplate <typename T> ostream &operator<<(ostream &os, const vector<T> &vec){\n    os << \"[\";\n    for (const auto &v : vec) {\n    \tos << v << \",\";\n    }\n    os << \"]\";\n    return os;\n}\n\nusing i64=int64_t;\n\nvoid solve(){\n    int N;\n    cin >> N;\n    vector<i64> A(N);\n    vector<char> op(N);\n    op[0]='+';\n    cin >> A[0];\n    rep(i,1,N) cin >> op[i] >> A[i];\n\n    static i64 memo[100001][3];\n    static bool done[100001][3];\n    fill_n((i64*)memo,100001*3,-inf64);\n    fill_n((bool*)done,100001*3,false);\n    function<i64(int,int)> rec=[&](int i,int j){\n        auto &res=memo[i][j];\n        if(done[i][j]) return res;\n        done[i][j]=true;\n        if(i==N) return res=0;\n        int s=op[i]=='-';\n        rep(j_,0,j+1) res=max(res,((j_+s)%2==0?1:-1)*A[i]+rec(i+1,j_));\n        if(s) res=max(res,((j+s)%2==0?1:-1)*A[i]+rec(i+1,(j+1==3?1:j+1)));\n        return res;\n    };\n    cout << rec(0,0) << endl;\n}\n\nint main(){\n    std::cin.tie(0);\n    std::ios::sync_with_stdio(false);\n    cout.setf(ios::fixed);\n    cout.precision(10);\n    solve();\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n\nconst int MAXN=100011;\nconst long long LONF=4567891012345678910LL;\n\n\nint N;\nint A[MAXN];\nint O[MAXN];\n\nlong long F[MAXN][5];\n\nint rO(){\n\tstatic char ch[2];\n\tscanf(\"%s\", ch);\n\treturn ch[0]=='+';\n}\n\nvoid relax(long long &f, long long v){\n\tif(f<v)\tf=v;\n}\n\nint Calc(int t, int o, int a){\n\tif(t)\to=!o;\n\treturn ((o<<1)-1)*a;\n}\n\nint main(){\n\t\n\tscanf(\"%d\", &N);\n\t\n\tscanf(\"%d\", &A[1]);\n\tfor(int i=2;i<=N;++i){\n\t\tO[i]=rO();\n\t\tscanf(\"%d\", &A[i]);\n\t}\n\t\n\tfor(int i=1;i<=N;++i)\n\t\tfor(int j=0;j<=4;++j)\n\t\t\tF[i][j]=-LONF;\n\t\n\tF[1][0]=(long long)(A[1]);\n\tfor(int i=2;i<=N;++i){\n\t\tfor(int j=0;j<5;++j){\n\t\t\tfor(int k=0;k<=j;++k){\n\t\t\t\trelax(F[i][k], F[i-1][j]+Calc(k&1, O[i], A[i]));\n\t\t\t}\n\t\t\tif(j<4 && !O[i])\trelax(F[i][j+1], F[i-1][j]+Calc(j&1, O[i], A[i]));\n\t\t}\n\t}\n\t\n\tlong long Ans=-LONF;\n\tfor(int j=0;j<5;++j)\n\t\trelax(Ans, F[N][j]);\n\tprintf(\"%lld\\n\", Ans);\n\t\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<cmath>\n#include<cstring>\n#include<string>\n#include<algorithm>\n#include<vector>\n\n#define maxn 205\n#define maxm 10000005\n\nusing namespace std;\n\ninline int getint()\n{\n\tint num=0,flag=1;char c;\n\twhile((c=getchar())<'0'||c>'9')if(c=='-')flag=-1;\n\twhile(c>='0'&&c<='9')num=num*10+c-48,c=getchar();\n\treturn num*flag;\n}\n\nint n;\nlong long F[3];\n\nint main()\n{\n\tn=getint();F[1]=F[2]=-1ll<<60;\n\twhile(n--)\n\t{\n\t\tint x=getint();\n\t\tF[0]+=x,F[1]-=x,F[2]+=x;\n\t\tif(x<0)F[2]=max(F[2],F[1]),F[1]=max(F[1],F[0]);\n\t\tF[1]=max(F[1],F[2]),F[0]=max(F[0],F[1]);\n\t}\n\tprintf(\"%lld\\n\",F[0]);\n}"
  },
  {
    "language": "C++",
    "code": "/**\n * code generated by JHelper\n * More info: https://github.com/AlexeyDmitriev/JHelper\n * @author Majk\n */\n\n#include <vector>\n#include <iostream>\n#include <unordered_map>\n#include <map>\n#include <iomanip>\n#include <functional>\n#include <algorithm>\n#include <cassert>\n#include <cmath>\n#include <string>\n#include <sstream>\n#include <queue>\nusing namespace std;\n\n#define x first\n#define y second\nconstexpr int MOD = 1000000007;\n\ntypedef std::pair<int,int> pii;\ntypedef long long ll;\n\ntemplate<typename T>std::istream&operator>>(std::istream&i,vector<T>&t) {for(auto&v:t){i>>v;}return i;}\ntemplate<typename T>std::ostream&operator<<(std::ostream&o,const vector<T>&t) {for(size_t i=0;i<t.size();++i){o<<t[i]<<\" \\n\"[i == t.size()-1];}return o;}\n\nnamespace std {\n    template<typename T,typename U>struct hash<pair<T,U>>{hash<T>t;hash<U>u;size_t operator()(const pair<T,U>&p)const{return t(p.x)^(u(p.y)<<7);}};\n}\ntemplate<typename T,typename F>T bsh(T l,T h,const F&f){T r=-1,m;while(l<=h){m=(l+h)/2;if(f(m)){l=m+1;r=m;}else{h=m-1;}}return r;}\ntemplate<typename T,typename F>T bsl(T l,T h,const F&f){T r=-1,m;while(l<=h){m=(l+h)/2;if(f(m)){h=m-1;r=m;}else{l=m+1;}}return r;}\ntemplate<typename T> T gcd(T a,T b) { if (a<b) swap(a,b); return b?gcd(b,a%b):a; }\n\n// #include \"../l/mod.h\"\n\nclass C {\npublic:\n\tvoid solve(istream& cin, ostream& cout) {\n\t\tint N; cin >> N;\n\t\tint B; cin >> B;\n\t\tll A[3] = {B, -1000000000000000LL, -1000000000000000LL};\n\t\tfor (int i = 0; i < N-1; ++i) {\n\t\t\tchar c; cin >> c;\n\t\t\tcin >> B;\n\n\t\t\tbool m = c == '-';\n\t\t\tA[2*m] = max(A[m], A[m+1]);\n\t\t\tA[0] += B * (1-2*m);\n\n\t\t\tA[1] -= B;\n\t\t\tA[2] += B;\n\t\t\tif (m) A[1] = max(A[0], A[1]);\n\t\t}\n\n\t\tcout << max(A[0], max(A[1], A[2])) << endl;\n\t}\n};\n\n\nint main() {\n\tios_base::sync_with_stdio(false);\n\tC solver;\n\tstd::istream& in(std::cin);\n\tstd::ostream& out(std::cout);\n\tsolver.solve(in, out);\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "\n#include<cstring>\n#include<string>\n#include<vector>\n#include<iostream>\n#include<cstdio>\n#include<cstdlib>\n#include<stack>\n#include<queue>\n#include<cmath>\n#include<algorithm>\n#include<list>\n#include<set>\n#include<map>\n#include<complex>\n#include<sstream>\n#include<climits>\n#define rep(X,Y) for (int (X) = 0;(X) < (Y);++(X))\n#define rrep(X,Y) for (int (X) = (Y)-1;(X) >=0;--(X))\n#define all(X) (X).begin(),(X).end()\n#define pb push_back\n#define mp make_pair\n#define fi first\n#define sc second\nusing namespace std;\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef pair<int,int> pii;\ntypedef pair<ll,ll> pll;\n\nconst int MAX_N = 1e5;\nconst ll INF = 1e18;\nint N;\nint a[MAX_N];\nchar op[MAX_N];\nll dp[MAX_N][3];\n\n\nint main() {\n  cin >> N;\n  op[0] = '+';\n  cin >> a[0];\n  for (int i = 1; i < N; ++i) {\n    char c;\n    cin >> op[i] >> a[i];\n  }\n\n  dp[0][0] = a[0]; dp[0][1] = -INF; dp[0][2] = -INF;\n  for (int i = 1; i < N; ++i) {\n    if (op[i] == '+') {\n      dp[i][0] = max(dp[i-1][0] + a[i], max(dp[i-1][1] - a[i], dp[i-1][2] + a[i]));\n      dp[i][1] = max(dp[i-1][1] - a[i], dp[i-1][2] + a[i]);\n      dp[i][2] = dp[i-1][2] + a[i];\n    } else {\n      dp[i][0] = max(dp[i-1][0] - a[i], max(dp[i-1][1] + a[i], dp[i-1][2] - a[i]));\n      dp[i][1] = max(dp[i-1][0] - a[i], max(dp[i-1][1] + a[i], dp[i-1][2] - a[i]));\n      dp[i][2] = max(dp[i-1][1] + a[i], dp[i-1][2] - a[i]);\n    }\n  }\n\n  cout << dp[N-1][0] << endl;\n\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define SZ(x) ((int) (x).size())\nusing namespace std;\n\ntypedef long long i64;\n\nint main() {\n    #ifdef LOCAL_RUN\n    freopen(\"task.in\", \"r\", stdin);\n    freopen(\"task.out\", \"w\", stdout);\n    //freopen(\"task.err\", \"w\", stderr);\n    #endif // ONLINE_JUDGE\n    ios::sync_with_stdio(false);\n    cin.tie(0);\n\n    int n;\n    cin >> n;\n\n    vector<int> A(n);\n    vector<int64_t> sum(n + 1, 0);\n    vector<int> sign(n, 1);\n    for (int i = 0; i < n; ++i) {\n        cin >> A[i];\n        if (i < n - 1) {\n            char c;\n            cin >> c;\n            sign[i + 1] = c == '-' ? -1: 1;\n        }\n        sum[i + 1] = sum[i] + A[i];\n    }\n\n    int prev = n;\n\n    int64_t xsum = 0;\n    for (int i = 0; i < n; ++i) {\n        xsum += sign[i] * A[i];\n    }\n    int64_t ans = xsum;\n    for (int i = n - 1; i >= 0; --i) {\n        if (sign[i] == -1) {\n            if (prev != n) {\n                int64_t csum = xsum - (sum[prev] - sum[i + 1]) + sum[n] - sum[prev];\n                ans = max(ans, csum);\n            }\n            prev = i;\n        }\n        xsum -= sign[i] * A[i];\n    }\n    cout << ans << '\\n';\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define ll long long\nusing namespace std;\nconst int N = 1e5 + 10, mod = 1e9 + 7;\nchar lx[N];\nint a[N];\nll f[N][3];\n\nvoid Add(ll &x, ll y) {\n\tx = (x + y) % mod;\n}\n\nvoid Max(ll &x, ll y) {\n\tx = max(x, y);\n}\n\nll add(ll x, ll y) {\n\treturn (x + y) % mod;\n}\n\nint main() {\n\tint n;\n\tscanf(\"%d\", &n);\n\tfor(int i = 1; i <= n; ++i) {\n\t\tscanf(\"%d\", &a[i]);\n\t\tif(i != n) cin >> lx[i];\n\t}\n\tfor(int i = 0; i <= n; ++i) \n\t\tfor(int j = 0; j < 3; ++j)\n\t\t\tf[i][j] = -1e18;\n\tf[1][0] = a[1];\n\tfor(int i = 2; i <= n; ++i) {\n\t\tfor(int j = 0; j < 3; ++j) {\n\t\t\tll pos = a[i];\n\t\t\tint t = 0, now;\n\t\t\tif(lx[i - 1] == '-') t = 1;\n\t\t\tnow = t ^ (j & 1);\n\t\t\tif(now) pos = -a[i];\n\t\t\tif(t && j < 2) Max(f[i][j + 1], f[i - 1][j] + pos);\n\t\t\t// printf(\"%d %d %lld\\n\", i, j, pos);\n\t\t\tfor(int k = 0; k <= j; ++k) {\n\t\t\t\tMax(f[i][k], f[i - 1][j] + pos);\n\t\t\t}\n\t\t}\n\t}\n\t// for(int i = 1; i <= n; ++i)\n\t// \tfor(int j = 0; j < 3; ++j) {\n\t// \t\tprintf(\"f[%d][%d] = %lld\\n\", i, j, f[i][j]);\n\t// \t}\n\tprintf(\"%lld\\n\", f[n][0]);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\n#define DEBUG(x) cerr<<#x<<\": \"<<x<<endl;\n#define DEBUG_VEC(v) cerr<<#v<<\":\";for(int i=0;i<v.size();i++) cerr<<\" \"<<v[i]; cerr<<endl\n\ntypedef long long ll;\n#define vi vector<int>\n#define vl vector<ll>\n#define vii vector< vector<int> >\n#define vll vector< vector<ll> >\n#define vs vector<string>\n#define pii pair<int,int>\n#define pis pair<int,string>\n#define psi pair<string,int>\n#define pll pair<ll,ll>\ntemplate<class S, class T> pair<S, T> operator+(const pair<S, T> &s, const pair<S, T> &t) { return pair<S, T>(s.first + t.first, s.second + t.second); }\ntemplate<class S, class T> pair<S, T> operator-(const pair<S, T> &s, const pair<S, T> &t) { return pair<S, T>(s.first - t.first, s.second - t.second); }\ntemplate<class S, class T> ostream& operator<<(ostream& os, pair<S, T> p) { os << \"(\" << p.first << \", \" << p.second << \")\"; return os; }\n#define X first\n#define Y second\n#define rep(i,n) for(int i=0;i<(n);i++)\n#define rep1(i,n) for(int i=1;i<=(n);i++)\n#define rrep(i,n) for(int i=(n)-1;i>=0;i--)\n#define rrep1(i,n) for(int i=(n);i>0;i--)\n#define REP(i,a,b) for(int i=a;i<b;i++)\n#define in(x, a, b) (a <= x && x < b)\n#define all(c) c.begin(),c.end()\ntemplate<class T> bool chmax(T &a, const T &b) { if (a<b) { a = b; return 1; } return 0; }\ntemplate<class T> bool chmin(T &a, const T &b) { if (a>b) { a = b; return 1; } return 0; }\n#define UNIQUE(v) v.erase(std::unique(v.begin(), v.end()), v.end());\nconst ll inf = 1000000001;\nconst ll INF = 1e18;\nconst ll MOD = 1000000007;\n//const ll MOD = 998244353;\nconst double pi = 3.14159265358979323846;\n#define Sp(p) cout<<setprecision(15)<< fixed<<p;\nint dx[4] = { 1,0, -1,0 }, dy[4] = { 0,1,0,-1 };\nint dx2[8] = { 1,1,0,-1,-1,-1,0,1 }, dy2[8] = { 0,1,1,1,0,-1,-1,-1 };\n#define fio() cin.tie(0); ios::sync_with_stdio(false);\n//#define mp make_pair\n\nint main() {\n  int n;\n  cin >> n;\n  vl a(n);\n  string s;\n  cin >> a[0];\n  rep1 (i, n - 1) {\n    char c;\n    cin >> c;\n    s.push_back(c);\n    cin >> a[i];\n  }\n  int m = 100;\n  vll dp(n, vl(m, -INF));\n  dp[0][0] = a[0];\n  rep1 (i, n - 1) {\n    char op = s[i - 1];\n    rep (j, m) {\n      ll bai;\n      if (j % 2 == 0) {\n        bai = 1;\n      }\n      else {\n        bai = -1;\n      }\n      if (op == '+') {\n        dp[i][j] = max(dp[i][j], dp[i - 1][j] + bai*a[i]);\n        if (j != 0) {\n          dp[i][j - 1] = max(dp[i][j - 1], dp[i - 1][j] - bai*a[i]);\n        }\n      }\n      else {\n        dp[i][j] = max(dp[i][j], dp[i - 1][j] - bai*a[i]);\n        if (j != 0) {\n          dp[i][j - 1] = max(dp[i][j - 1], dp[i - 1][j] + bai*a[i]);\n        }\n        if (j != m - 1) {\n          dp[i][j + 1] = max(dp[i][j + 1], dp[i - 1][j] - bai*a[i]);\n        }\n      }\n    }\n  }\n  ll ans = -INF;\n  rep (j, m) {\n    chmax(ans, dp[n - 1][j]);\n  }\n  cout << ans << endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\ntypedef long long ll;\n\nconst ll INF = 1e18;\n\nint main() {\n\tios::sync_with_stdio(0), cin.tie(0);\n\n\tint n;\n\tcin >> n;\n\tint first;\n\tcin >> first;\n\tarray<ll, 3> dp = {first, -INF, -INF};\n\tfor (int i = 0; i < n-1; i++) {\n\t\tarray<ll, 3> ndp = {-INF, -INF, -INF};\n\t\tchar op;\n\t\tcin >> op;\n\t\tint num;\n\t\tcin >> num;\n\t\tif (op == '-') num = -num;\n\t\tfor (int a = 0; a < 3; a++, num = -num) {\n\t\t\tif (dp[a] == -INF) continue;\n\t\t\tfor (int b = a-1; b <= a+1; b++) {\n\t\t\t\tif (!(0 <= b && b < 3)) continue;\n\t\t\t\tif (op == '+' && b > a) continue;\n\t\t\t\tndp[b] = max(ndp[b], dp[a] + num);\n\t\t\t}\n\t\t}\n\t\tswap(dp, ndp);\n\t}\n\tcout << *max_element(dp.begin(), dp.end()) << '\\n';\n\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "//52行目から編集\n#include <iostream>\n#include <limits.h>\n#include <algorithm>\n#include <bitset>\n#include <cctype>\n#include <cmath>\n#include <cstdio>\n#include <cstdlib>\n#include <cstring>\n#include <ctime>\n#include <deque>\n#include <functional>\n#include <iomanip>\n#include <list>\n#include <map>\n#include <numeric>\n#include <set>\n#include <sstream>\n#include <stack>\n#include <string>\n#include <utility>\n#include <vector>\n#include <queue>\n#include <unordered_map>\n#include <unordered_set>\n#include <cassert>\n\nusing namespace std;\n#define rep(i,n) for(int i=0;i<n;i++)\n#define rrep(i,n) for(int i=n-1;i>=0;i--)\n#define all(x) (x).begin(),(x).end()\n#define mp make_pair\n#define pb push_back\n#define eb emplace_back\n\ntypedef long long ll;\ntypedef vector<int> vi;\ntypedef vector<ll> vl;\ntypedef vector<vector<int> > vvi;\ntypedef vector<vector<ll> > vvl;\ntypedef pair<int,int> pi;\ntypedef pair<ll,ll> pl;\n\ntemplate<class T> bool chmin(T& a,T b){if(a > b){a = b;return true;}else return false;}\ntemplate<class T> bool chmax(T& a,T b){if(a < b){a = b;return true;}else return false;}\n///////////////////////////////////////////////////////////\n\nll dp[100010][3];\nint main(void){\n    cin.tie(0);\n    ios::sync_with_stdio(false);\n    //cout << fixed << setprecision(20);\n    \n    rep(i,3)rep(j,100010)dp[i][j] = -LONG_MAX / 100;\n\n    int n;cin >> n;\n    vector<ll> a(n);\n    vector<char> s(n);\n    for(int i = 0;i < n;i++){\n        if(i == 0){\n            cin >> a[i];\n            s[i] = '+';\n        }else{\n            cin >> s[i] >> a[i];\n        }\n    }\n\n    dp[0][0] = a[0];\n    for(int i = 1;i < n;i++){\n        if(s[i] == '+'){\n            chmax(dp[i][0],dp[i-1][0] + a[i]);\n            chmax(dp[i][0],dp[i-1][1] - a[i]);\n\n            chmax(dp[i][1],dp[i-1][1] - a[i]);\n            chmax(dp[i][1],dp[i-1][2] + a[i]);\n\n            chmax(dp[i][2],dp[i-1][2] + a[i]);\n        }else{\n            chmax(dp[i][1],dp[i-1][0] - a[i]);\n            chmax(dp[i][0],dp[i-1][0] - a[i]);\n\n            chmax(dp[i][2],dp[i-1][1] + a[i]);\n            chmax(dp[i][1],dp[i-1][1] + a[i]);\n\n            chmax(dp[i][2],dp[i-1][2] + a[i]);\n        }\n    }\n    cout << max({dp[n-1][0],dp[n-1][1],dp[n-1][2]}) << '\\n';\n    //rep(i,3){\n    //    rep(j,n){\n    //        cout << setw(4) << (dp[j][i] < -1000 ? \"-INF\" : to_string(dp[j][i]));\n    //    }\n    //    cout << '\\n';\n    //}\n    return 0;\n}\n/*\n *!!CHECK!! \n * 制約をよく読め：まず最も愚直な解法を考えろ\n * intの掛け算をしてる場合：overflowは大丈夫？\n * 制約の下限・上限は大丈夫？\n * 木構造は一直線にした時TLEしない？\n * */\n"
  },
  {
    "language": "C++",
    "code": "//by Sshwy\n#include<bits/stdc++.h>\nusing namespace std;\n#define pb push_back\n#define FOR(i,a,b) for(int i=(a);i<=(b);++i)\n#define ROF(i,a,b) for(int i=(a);i>=(b);--i)\n\nnamespace RA{\n    int rnd(int p){return 1ll*rand()*rand()%p;}\n    int rnd(int L,int R){return rnd(R-L+1)+L;}\n}\nconst int N=1e5+5;\nint n;\nint a[N],o[N];\nlong long sa[N],ps;\n\nint main(){\n    scanf(\"%d\",&n);\n    scanf(\"%d\",&a[1]);\n    FOR(i,2,n){\n        char op[5];\n        scanf(\"%s%d\",op,&a[i]);\n        if(op[0]=='-')o[i]=-1;\n        else o[i]=1;\n    }\n    ROF(i,n,1)sa[i]=sa[i+1]+a[i];\n    o[1]=1;\n    long long ans=-1e18;\n    FOR(i,1,n){\n        ps+=a[i]*o[i];\n        if(i<n && o[i+1]==-1){\n            long long s=a[i+1];\n            int pos=i+2;\n            while(pos<=n && o[pos]==1)s+=a[pos],++pos;\n            ans=max(ans,sa[pos]-s+ps);\n        }\n    }\n    ans=max(ans,ps);\n    printf(\"%lld\\n\",ans);\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstdio>\n#include <map>\n#include <set>\n#include <queue>\n#include <vector>\n#include <cstring>\n#include <cstdlib>\n#include <algorithm>\n#define rep(i,a,b) for(int i = a; i <= b; i++)\n#define dep(i,a,b) for(int i = a; i >= b; i--) \n#define Rep(i,a) for(int i = 0; i < a; i++)\n#define pb(a) push_back(a)\n#define mp(a,b) make_pair(a,b)\n#define ab(x) ((x) < 0 ? -(x) : (x))\nusing namespace std;\ntypedef long long LL;\ntypedef map<int, int>::iterator mit;\ntypedef set<int ,int>::iterator sit;\nconst int N = 100010;\nchar c;\nint a[N]; bool b[N];\nint main() {\n\tint n; scanf(\"%d\",&n); bool flag = false;\n\trep(i,1,n) {\n\t\tscanf(\"%d\",&a[i]);\n\t\tif (i < n) {\n\t\t\tc = getchar(); while (c != '-' && c != '+') c = getchar();\n\t\t\tif (c == '-') b[i + 1] = true; else b[i + 1] = false;\n\t\t}\n\t}\n\tLL ans = 0, sum = a[1];\n\trep(i,2,n) if (b[i]) {\n\t\tsum -= a[i];\n\t\tif (flag) ans += ab(sum); else flag = true, ans += sum;\n\t\tsum = 0; \n\t} else sum += a[i];\n\tif (flag) ans += ab(sum); else ans += sum;\n\tcout <<ans<<endl;\n}"
  },
  {
    "language": "C++",
    "code": "/* --- author: dxm --- */\n#include<bits/stdc++.h>\nusing namespace std;\n\n#define INF 1e9\n#define Inf 1e18\n#define rep(i,n) for(int (i)=0;(i)<n;i++)\n#define REP(i,n) for(int (i)=1;(i)<=n;i++)\n#define mp make_pair\n#define pb push_back\n#define pii pair<int,int>\ntypedef long long ll;\ninline void Fail(){printf(\"0\");exit(0);}\n\nconst int maxn=100005;\nint n;\nint a[maxn];\nll ans;\nll sum[maxn],sum2[maxn];\nchar c[2];\n \nint main(){\n\tscanf(\"%d\",&n);\n\tint op=1;\n\trep(i,n){\n\t\tscanf(\"%d\",&a[i]);\n\t\ta[i]*=op;\n\t\tif(i!=n-1){\n\t\t\tscanf(\"%s\",c);\n\t\t\tif(c[0]=='-')op=-1;\n\t\t\telse op=1;\n\t\t}\n\t}\n\tfor(int i=n-1;i>=0;i--)sum[i]=sum[i+1]+abs(a[i]);\n\tfor(int i=n-1;i>=0;i--){\n\t\tif(a[i]<0)sum2[i]=0;\n\t\telse sum2[i]=sum2[i+1]+a[i];\n\t}\n\tll cur=0;\n\trep(i,n){\n\t\tcur+=a[i];\n\t\tif(a[i]<0)ans=max(ans,cur+sum[i+1]-2*sum2[i+1]);\n\t}\n\tans=max(ans,cur);\n\tprintf(\"%lld\",ans);\n\treturn 0;\n}\n\n/*\nInput:\n-----------------\nOutput:\n*/"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\n#define int long long \n\nvoid read(int &x) {\n    x=0;int f=1;char ch=getchar();\n    for(;!isdigit(ch);ch=getchar()) if(ch=='-') f=-f;\n    for(;isdigit(ch);ch=getchar()) x=x*10+ch-'0';x*=f;\n}\n\nvoid print(int x) {\n    if(x<0) putchar('-'),x=-x;\n    if(!x) return ;print(x/10),putchar(x%10+48);\n}\nvoid write(int x) {if(!x) putchar('0');else print(x);putchar('\\n');}\n\n#define lf double\n#define ll long long \n\n#define pii pair<int,int >\n#define vec vector<int >\n\n#define pb push_back\n#define mp make_pair\n#define fr first\n#define sc second\n\n#define data asd09123jdf02i3h\n\n#define FOR(i,l,r) for(int i=l,i##_r=r;i<=i##_r;i++)\n\nconst int maxn = 1e6+10;\nconst int inf = 1e9;\nconst lf eps = 1e-8;\nconst int mod = 1e9+7;\n\nint f[maxn][3],a[maxn],n,t[maxn];\nchar s[maxn];\n\nvoid update(int &x,int y) {\n    if(y>x) x=y;\n}\n\nsigned main() {\n    read(n);\n    for(int i=1;i<=n;i++) {\n        read(a[i]);\n        if(i==n) break;\n        scanf(\"%s\",s+1);\n        if(s[1]=='-') t[i+1]=-1;\n        else t[i+1]=1;\n    }t[1]=1;\n    memset(f,-63,sizeof f);\n    f[0][0]=0;\n    for(int i=1;i<=n;i++) {\n        a[i]*=t[i];\n        for(int j=0;j<=2;j++) \n            update(f[i][j],f[i-1][j]+(j==1?-1:1)*a[i]);\n        if(t[i]<0) {\n            for(int j=0;j<=1;j++) \n                update(f[i][j+1],f[i-1][j]+(j==1?-1:1)*a[i]);\n        }\n        for(int j=0;j<=1;j++) \n            update(f[i][j],f[i-1][j+1]+(j==1?-1:1)*a[i]);\n    }\n    write(max(max(f[n][0],f[n][1]),f[n][2]));\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\n#define int long long\n\n#define rep(i,n) for(int i=0;i<(n);i++)\n#define pb push_back\n#define all(v) (v).begin(),(v).end()\n#define fi first\n#define se second\ntypedef vector<int>vint;\ntypedef pair<int,int>pint;\ntypedef vector<pint>vpint;\n\ntemplate<typename A,typename B>inline void chmin(A &a,B b){if(a>b)a=b;}\ntemplate<typename A,typename B>inline void chmax(A &a,B b){if(a<b)a=b;}\n\nint N;\nint A[111111];\n\nint sum[111111];\n\nint dp[111111];\nsigned main(){\n    cin>>N;\n    rep(i,N){\n        char op='+';\n        if(i)cin>>op;\n        cin>>A[i];\n        if(op=='-')A[i]*=-1;\n    }\n\n    rep(i,N)sum[i+1]=sum[i]+abs(A[i]);\n\n    int L=-1001001001001001001ll;\n\n    for(int i=0;i<N;i++){\n        dp[i+1]=dp[i]+A[i];\n        chmax(dp[i+1],sum[i+1]+L);\n\n        if(A[i]<0){\n            chmax(L,dp[i]+A[i]-sum[i+1]);\n        }\n    }\n\n    cout<<dp[N]<<endl;\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n#define REP(i,st,ed) for(register int i=st,i##end=ed;i<=i##end;++i)\n#define DREP(i,st,ed) for(register int i=st,i##end=ed;i>=i##end;--i)\ntypedef long long ll;\ntemplate<typename T>inline bool chkmin(T &x,T y){return (y<x)?(x=y,1):0;}\ntemplate<typename T>inline bool chkmax(T &x,T y){return (y>x)?(x=y,1):0;}\ninline int read(){\n\tint x;\n\tchar c;\n\tint f=1;\n\twhile((c=getchar())!='-' && (c>'9' || c<'0'));\n\tif(c=='-') f=-1,c=getchar();\n\tx=c^'0';\n\twhile((c=getchar())>='0' && c<='9') x=(x<<1)+(x<<3)+(c^'0');\n\treturn x*f;\n}\ninline ll readll(){\n\tll x;\n\tchar c;\n\tint f=1;\n\twhile((c=getchar())!='-' && (c>'9' || c<'0'));\n\tif(c=='-') f=-1,c=getchar();\n\tx=c^'0';\n\twhile((c=getchar())>='0' && c<='9') x=(x<<1ll)+(x<<3ll)+(c^'0');\n\treturn x*f;\n}\nconst int maxn=1e5+10;\nll dp[maxn][3];\nchar ty[10];\nint main(){\n\tint n=read();\n\tREP(i,1,n) dp[i][0]=dp[i][1]=dp[i][2]=-1e18;\n\tdp[1][0]=read();\n\tREP(i,1,n-1){\n\t\tscanf(\"%s\",ty+1);\n\t\tint x=read();\n\t\tif(ty[1]=='-') x*=-1;\n\t\tchkmax(dp[i+1][0],dp[i][0]+x);\n\t\tchkmax(dp[i+1][1],dp[i][1]-x);\n\t\tchkmax(dp[i+1][2],dp[i][2]+x);\n\t\tif(ty[1]=='-'){\n\t\t\tchkmax(dp[i+1][1],dp[i][0]+x);\n\t\t\tchkmax(dp[i+1][2],dp[i][1]-x);\n\t\t}\n\t\tchkmax(dp[i+1][0],dp[i][1]-x);\n\t\tchkmax(dp[i+1][1],dp[i][2]+x);\n\t\tchkmax(dp[i+1][0],dp[i][2]+x);\n\t}\n\tprintf(\"%lld\\n\",dp[n][0]);\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#define llint long long\n#define sgn(x) (((x)%2)?-1:1)\n#define inf 100000000000000000\n\nusing namespace std;\n\nllint N;\nllint A[100005];\nchar op[100005];\nllint dp[100005][10];\n\nint main(void)\n{\n\tcin >> N;\n\tN--;\n\t\n\tcin >> A[0];\n\tfor(int i = 1; i <= N; i++) cin >> op[i] >> A[i];\n\t\n\tfor(int i = 0; i <= N; i++){\n\t\tfor(int j = 0; j <= N; j++){\n\t\t\tdp[i][j] = -inf;\n\t\t}\n\t}\n\t\n\tdp[0][0] = A[0];\n\tfor(int i = 0; i < N; i++){\n\t\tfor(int j = 0; j <= 2; j++){\n\t\t\tif(dp[i][j] == -inf) continue;\n\t\t\tif(op[i+1] == '+'){\n\t\t\t\tdp[i+1][j] = max(dp[i+1][j], dp[i][j] + sgn(j)*A[i+1]);\n\t\t\t\tif(j > 0) dp[i+1][j-1] = max(dp[i+1][j-1], dp[i][j] + sgn(j)*A[i+1]);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tdp[i+1][j] = max(dp[i+1][j], dp[i][j] + sgn(j+1)*A[i+1]);\n\t\t\t\tdp[i+1][j+1] = max(dp[i+1][j+1], dp[i][j] + sgn(j+1)*A[i+1]);\n\t\t\t\tif(j > 0) dp[i+1][j-1] = max(dp[i+1][j-1], dp[i][j] + sgn(j+1)*A[i+1]);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t/*for(int i = 0; i <= N; i++){\n\t\tfor(int j = 0; j <= N; j++){\n\t\t\tif(dp[i][j] == -inf) cout << \"-inf\" << \" \";\n\t\t\telse cout << dp[i][j] << \" \";\n\t\t}\n\t\tcout << endl;\n\t}*/\n\t\n\tcout << dp[N][0] << endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\n#define pb push_back\n#define mp make_pair\n\n#define fi first\n#define se second\n\ntypedef long long ll;\n\nusing namespace std;\n\nconst ll INF = 2e15;\n\nll dp2[505][505];\n\nll dp[505][505];\n\nchar sign[505];\n\nint arr[505];\n\nint n;\n\nll calc2(int, int);\nll calc(int, int);\n\nvoid init() {\n    for (int l = 1; l <= n; ++l) {\n        for (int r = l; r <= n; ++r) {\n            dp[l][r] = dp2[l][r] = -INF;\n        }\n    }\n}\n\nll calc(int l, int r) {\n    if (l > r) {\n        return 0;\n    }\n\n    if (l == r) {\n        return arr[l];\n    }\n\n    ll &cur = dp[l][r];\n\n    if (cur != -INF) {\n        return cur;\n    }\n\n    cur = 0;\n\n    for (int i = l; i <= r; ++i) {\n        if (i == l || sign[i - 1] == '+') {\n            cur += arr[i];\n        }\n        else {\n            cur -= arr[i];\n        }\n    }\n\n    for (int mid = l; mid < r; ++mid) {\n        if (sign[mid] == '-') {\n            cur = max(cur, calc(l, mid) - calc2(mid + 1, r));\n        }\n        else {\n            cur = max(cur, calc(l, mid) + calc(mid + 1, r));\n        }\n    }\n\n    return cur;\n}\n\nll calc2(int l, int r) {\n    if (l > r) {\n        return 0;\n    }\n\n    if (l == r) {\n        return arr[l];\n    }\n\n    ll &cur = dp2[l][r];\n\n    if (cur != -INF) {\n        return cur;\n    }\n\n    cur = 0;\n\n    for (int i = l; i <= r; ++i) {\n        if (i == l || sign[i - 1] == '+') {\n            cur += arr[i];\n        }\n        else {\n            cur -= arr[i];\n        }\n    }\n\n    for (int mid = l; mid < r; ++mid) {\n        if (sign[mid] == '-') {\n            cur = min(cur, calc2(l, mid) - calc(mid + 1, r));\n        }\n        else {\n            cur = min(cur, calc2(l, mid) + calc2(mid + 1, r));\n        }\n    }\n\n    return cur;\n}\n\nvoid solve() {\n    scanf(\"%d\", &n);\n\n    assert(n <= 500);\n\n    for (int i = 1; i <= n; ++i) {\n        scanf(\"%d\", &arr[i]);\n\n        if (i < n) {\n            scanf(\" %c\", &sign[i]);\n        }\n    }\n\n    init();\n\n    printf(\"%lld\", calc(1, n));\n}\n\nint main() {\n    #ifdef BThero\n        freopen(\"input.txt\", \"r\", stdin);\n        freopen(\"output.txt\", \"w\", stdout);\n    #endif // BThero\n\n    int tt = 1;\n\n    while (tt--) {\n        solve();\n    }\n\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "// Addition and Subtraction Hard\n// * frank_c1\n// * 2017 / 10 / 04\n\n#include <bits/stdc++.h>\nusing namespace std;\ntypedef long long LL;\n\nconst int maxn = (int)(1e5) + 5;\nLL f[3];\nchar opt[3];\n\nint main() {\n\tint n, x;\n\tscanf(\"%d%d\", &n, &x);\n\tf[0] = x; f[1] = f[2] = -(LL)(1e18);\n\tfor (int i = 1; i < n; ++i) {\n\t\tscanf(\"%s%d\", opt, &x);\n\t\tfor (int j = 0; j < 2; ++j) f[j] = max(f[j], f[j + 1]);\n\t\tif (opt[0] == '+') for (int j = 0; j < 3; ++j) f[j] += (j & 1) ? -x : x;\n\t\telse {\n\t\t\tfor (int j = 0; j < 3; ++j) f[j] += (j & 1) ? x : -x;\n\t\t\tfor (int j = 2; j > 0; --j) f[j] = max(f[j], f[j - 1]);\n\t\t}\n\t}\n\treturn printf(\"%lld\\n\", max(f[0], f[1])), 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstdio>\n#include<algorithm>\n#include<cstring>\n\nusing namespace std;\n\nconst int MAXN = 100100;\ntypedef long long LL;\nconst LL INF = 1e16;\nchar opt[MAXN];\nint n,kind = 0;\nLL val[MAXN],ans = -INF,sum[MAXN];\n\ntemplate<typename T>\nvoid read(T &x)\n{\n\tx = 0;\n\tchar ch = getchar();\n\twhile(ch < '0' || ch > '9') ch = getchar();\n\twhile(ch >= '0' && ch <= '9')\n\t\tx = x * 10 + ch - '0',ch = getchar();\n}\n\nvoid init()\n{\n\tLL t1 = val[1],t2 = 0,temp;\n\tfor(int i = 1;i <= n-1;i++)\n\t{\n\t\tif(opt[i] == '+')\n\t\t{\n\t\t\tt1 += val[i+1];\n\t\t\tcontinue;\n\t\t} \n\t\tint now = i+1;temp = -val[i+1];\n\t\twhile(now < n && opt[now] == '+')\n\t\t{\n\t\t\tnow++;\n\t\t\ttemp -= val[now];\n\t\t}\n\t//\tprintf(\"%lld\\n\",t1+t2+temp+sum[n]-sum[now]);\n\t\tans = max(ans,t1 + t2 + temp + sum[n] - sum[now]);\n\t\tt2 -= val[i+1];\n\t}\n\tans = max(ans,t1+t2);\n}\n\nint main()\n{\n\t//freopen(\"T2.in\",\"r\",stdin);\n\tread(n);\n\tfor(int i = 1;i <= n;i++)\n\t{\n\t\tscanf(\"%lld\",&val[i]);\n\t\tsum[i] = sum[i-1] + val[i];\n\t\tif(i != n) cin >> opt[i];\n\t}\n\tinit();\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}\n/*\n5\n1 - 100 - 50 - 10 - 5\n*/\n"
  },
  {
    "language": "C++",
    "code": "/*\n数据不清空，爆零两行泪。\n多测不读完，爆零两行泪。\n边界不特判，爆零两行泪。\n贪心不证明，爆零两行泪。\nD P 顺序错，爆零两行泪。\n大小少等号，爆零两行泪。\n变量不统一，爆零两行泪。\n越界不判断，爆零两行泪。\n调试不注释，爆零两行泪。\n溢出不 l l，爆零两行泪。\n*/\n#include<bits/stdc++.h>\nusing namespace std;\n#define int long long\n#define pb push_back\nconst int N=100000;\nint n;\nint a[N+1];\nint Sum[N+1],Sum0[N+1];\nsigned main(){\n\tcin>>n;\n\tvector<int> nepos;\n\tfor(int i=1;i<=n;i++){\n\t\tbool ne=false;\n\t\tif(i>1){\n\t\t\tchar c;\n\t\t\tcin>>c;\n\t\t\tif(c=='-')ne=true,nepos.pb(i);\n\t\t}\n\t\tcin>>a[i];\n\t\tif(ne)a[i]=-a[i];\n\t\tSum[i]=Sum[i-1]+a[i];\n\t\tSum0[i]=Sum0[i-1]+abs(a[i]);\n\t}\n//\tfor(int i=1;i<=n;i++)cout<<a[i]<<\" \";puts(\"\");\n\tnepos.pb(n+1);\n\tint ans=Sum[n];\n\tfor(int i=1;i<=n;i++)if(a[i]<0){\n\t\tint fd=*lower_bound(nepos.begin(),nepos.end(),i+1);\n//\t\tprintf(\"fd=%lld\\n\",fd);\n\t\tans=max(ans,Sum[i]-(Sum[fd-1]-Sum[i])+(Sum0[n]-Sum0[fd-1]));\n\t}\n\tcout<<ans;\n\treturn 0;\n}\n/*1\n3\n5 - 1 - 3\n*/\n/*2\n5\n1 - 2 + 3 - 4 + 5\n*/\n/*3\n5\n1 - 20 - 13 + 14 - 5\n*/"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\n#if MYDEBUG\n#include \"lib/cp_debug.hpp\"\n#else\n#define DBG(...) ;\n#endif\n#if __cplusplus <= 201402L\ntemplate <typename T>\nT gcd(T a, T b) { return ((a % b == 0) ? b : gcd(b, a % b)); }\ntemplate <typename T>\nT lcm(T a, T b) { return a / gcd(a, b) * b; }\n#endif\nusing LL = long long;\nconstexpr LL LINF = 334ll << 53;\nconstexpr int INF = 15 << 26;\nconstexpr LL MOD = 1E9 + 7;\n\nnamespace Problem {\nusing namespace std;\n\nclass Solver {\n public:\n  int n;\n  vector<LL> a;\n  vector<int> op;\n  vector<vector<LL>> dp;\n  Solver(LL n) : n(n), a(n), op(n), dp(n, vector<LL>(2)){};\n\n  void solve() {\n    op[0] = 1;\n    for (int i = 0; i < n; ++i) {\n      cin >> a[i];\n      if (i < n - 1) {\n        char c;\n        cin >> c;\n        op[i + 1] = (c == '+' ? 1 : -1);\n      }\n    }\n    if (n == 1) {\n      cout << a[0] << endl;\n    } else if (n == 2) {\n      cout << a[0] + a[1] * op[1] << endl;\n    } else {\n      LL sum = 0;\n      for (int i = 0; i < n; ++i) {\n        sum += a[i] * op[i];\n      }\n      LL ans = sum;\n      int it = n - 1;\n      LL absSumR = 0;\n      while (1) {\n        sum -= a[it] * op[it];\n        absSumR += a[it--];\n        if (it < 0 || op[it] == -1) break;\n      }\n      DBG(sum, absSumR, it)\n      LL prev = absSumR;\n      for (; it >= 0; --it) {\n        sum -= a[it] * op[it];\n        absSumR += a[it];\n        if (op[it] == -1) {\n          ans = max(ans, sum - absSumR + 2 * prev);\n          prev = absSumR;\n        }\n      }\n      cout << ans << endl;\n    }\n  }\n};\n\n}  // namespace Problem\n\nint main() {\n  std::cin.tie(0);\n  std::ios_base::sync_with_stdio(false);\n  // std::cout << std::fixed << std::setprecision(12);\n  long long n = 0;\n  std::cin >> n;\n\n  Problem::Solver sol(n);\n  sol.solve();\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\n#define F first\n#define S second\n#define pb push_back\n#define ld  double\n#define ll long long\n#define int long long\n\nusing namespace std;\n\nconst int MAXN = 101 * 1001 , MOD = 1e9 + 7 , sq = 333  ;\n\n\nint a[MAXN];\n\nchar ch[MAXN] ;\n\nint dp[555][555][2] ;\n\nint solve(int n)\n{\n    for(int i = 0 ; i < n ; i ++ )\n        dp[i][i+1][0] = a[i] , dp[i][i+1][1] = -a[i] ;\n    for(int l = 2 ; l <= n ; l ++ )\n    {\n        for(int i = 0 ; i + l <= n ; i ++ )\n        {\n            int j = i + l ;\n            dp[i][j][0] = a[i] + dp[i+1][j][0] ;\n            if(a[i]<0)\n                for(int k = i + 2 ; k <= j ; k ++ )\n                    dp[i][j][0] = max(dp[i][j][0],a[i]+dp[i+1][k][1]+dp[k][j][0]);\n            dp[i][j][1] = -a[i] + dp[i+1][j][1] ;\n            if(a[i]<0)\n                for(int k = i + 2 ; k <= j ; k ++ )\n                    dp[i][j][1] = max(dp[i][j][1],-a[i]+dp[i+1][k][0]+dp[k][j][1]);\n        }\n    }\n    return dp[0][n][0];\n}\n\nint32_t main()\n{\n   ios::sync_with_stdio(0);cin.tie(0);\n   int n , s = 0 , ind = -1 ,cnt = 0 ;\n   cin >> n ;\n   for(int i = 0 ; i < n ; i ++ )\n   {\n       if(i)\n        cin >> ch[i] ;\n       cin >> a[i] ;\n       s += a[i] ;\n       if(ch[i]=='-'&&ind==-1)\n        ind = i ;\n       if(i&&ch[i]=='-')\n        a[i]*=-1,cnt++;\n   }\n   if(n<600)\n        return cout<<solve(n),0;\n   if(ind==-1)\n    return cout<<s,0 ;\n    if(cnt==1)\n        return cout<<s+2*a[ind],0;\n    ind++;\n    s+=2*a[ind-1] ;\n   while(ch[ind]!='-')\n    s-=2*a[ind++];\n   return cout<<s,0;\n\n\n\n\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<cstring>\n#include<algorithm>\nusing namespace std;\nconst int mn = 100005;\nint a[mn], n;\nchar o[mn];\nint getmax(int s);\nint getmin(int s);\nint getmax(int s)\n{\n\tif(s == n - 1)\n\t\treturn a[n - 1] + a[n];\n\telse if(s == n)\n\t\treturn o[n - 1] == '+' ? a[n] : -a[n];\n\tint ret = a[s];\n\tfor(int i = s + 1; i <= n; i++)\n\t{\n\t\tif(o[i - 1] == '+')\n\t\t\tret += a[i];\n\t\telse\n\t\t{\n\t\t\tret -= getmin(i);\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn ret;\n}\nint getmin(int s)\n{\n\tif(s == n - 1)\n\t\treturn a[n - 1] - a[n];\n\telse if(s == n)\n\t\treturn o[n - 1] == '+' ? a[n] : -a[n];\n\tint ret = a[s];\n\tfor(int i = s + 1; i <= n; i++)\n\t{\n\t\tif(o[i - 1] == '+')\n\t\t\tret += a[i];\n\t\telse\n\t\t{\n\t\t\tret -= getmax(i);\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn ret;\n}\nint main()\n{\n\tint i;\n\tscanf(\"%d\", &n);\n\tfor(i = 1; i < n; i++)\n\t{\n\t\tscanf(\"%d\", &a[i]);\n\t\tgetchar();\n\t\to[i] = getchar();\n\t}\n\tscanf(\"%d\", &a[i]);\n\tprintf(\"%d\\n\", getmax(1));\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<algorithm>\nusing namespace std;\nconst int MAXN=100005;\n\nchar str[3];\nint n,A[MAXN],op[MAXN];\nlong long sum[MAXN],sum2[MAXN];\n\nint main()\n{\n\tscanf(\"%d\",&n);\n\top[1]=1;\n\tlong long ans;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tscanf(\"%d\",&A[i]);\n\t\tsum2[i]=sum2[i-1]+A[i];\n\t\tsum[i]=sum[i-1]+A[i]*op[i];\n\t\tif(i<n)\n\t\t{\n\t\t\tscanf(\"%s\",str);\n\t\t\top[i+1]=(str[0]=='+')?1:-1;\n\t\t}\n\t}\n\t\n\tint last=-1;\n\top[n+1]=-1;\n\tans=sum[n];\n\tfor(int i=1;i<=n+1;i++)\n\t\tif(op[i]==-1)\n\t\t{\n\t\t\tif(last!=-1)\n\t\t\t\tans=max(ans,sum2[n]-sum2[i-1]-(sum2[i-1]-sum2[last-1])+sum[last-1]);\n\t\t\tlast=i;\n\t\t}\n\tprintf(\"%I64d\\n\",ans);\n\t\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <cstdlib>\n#include <cstring>\n#include <cmath>\n#include <algorithm>\n#include <assert.h>\n#define IOS ios::sync_with_stdio(false)\nusing namespace std;\n#define inf (0x3f3f3f3f)\ntypedef long long int LL;\n\n\n#include <iostream>\n#include <sstream>\n#include <vector>\n#include <set>\n#include <map>\n#include <queue>\n#include <string>\n#include <bitset>\nconst int maxn = 1e5 + 20;\nLL perfixSum[maxn], absSum[maxn];\nvector<int>pos;\nvoid cut(LL &val, int pos1, int pos2) {\n    if (pos1 > pos2) return;\n    val -= absSum[pos2] - absSum[pos1 - 1];\n}\nvoid work() {\n    int n;\n    scanf(\"%d\", &n);\n    int val;\n    scanf(\"%d\", &val);\n    perfixSum[1] = val;\n    absSum[1] = val;\n    for (int i = 2; i <= n; ++i) {\n        int val;\n        char op;\n        cin >> op;\n        scanf(\"%d\", &val);\n        if (op == '+') {\n            perfixSum[i] = perfixSum[i - 1] + val;\n        } else {\n            perfixSum[i] = perfixSum[i - 1] - val;\n            pos.push_back(i);\n        }\n        absSum[i] = absSum[i - 1] + val;\n    }\n    LL ans = perfixSum[n];\n    for (int i = 0; i <= (int)pos.size() - 2; ++i) {\n        int p1 = pos[i], p2 = pos[i + 1];\n        LL tans = absSum[n] - absSum[p2 - 1];\n        tans += perfixSum[p1];\n        cut(tans, p1 + 1, p2 - 1);\n        ans = max(ans, tans);\n    }\n    cout << ans << endl;\n}\n\nint main() {\n#ifdef local\n    freopen(\"data.txt\", \"r\", stdin);\n//    freopen(\"data.txt\", \"w\", stdout);\n#endif\n//    int val;\n//    scanf(\"%d\", &val);\n//    cout << val << endl;\n    work();\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>  \n#include <iostream>  \n#include <sstream>  \n#include <string>  \n#include <cstring>\n#include <vector>  \n#include <queue>  \n#include <set>  \n#include <map>  \n#include <cstdio>  \n#include <cstdlib>  \n#include <cctype>  \n#include <cmath>  \n#include <list>  \n#include <cassert>\n#include <ctime>\n#include <climits>\nusing namespace std;  \n\n#define PB push_back  \n#define MP make_pair  \n#define SZ(v) ((int)(v).size())  \n#define FOR(i,a,b) for(int i=(a);i<(b);++i)  \n#define REP(i,n) FOR(i,0,n)  \n#define FORE(i,a,b) for(int i=(a);i<=(b);++i)  \n#define REPE(i,n) FORE(i,0,n)  \n#define FORSZ(i,a,v) FOR(i,a,SZ(v))  \n#define REPSZ(i,v) REP(i,SZ(v))  \ntypedef long long ll;\ntypedef unsigned long long ull;\nll gcd(ll a,ll b) { return b==0?a:gcd(b,a%b); }\n\nconst int MAXN=100000;\n\nint n;\nint a[MAXN]; char op[MAXN-1];\n\n\n\nvoid run() {\n\tscanf(\"%d\",&n); REP(i,n) { scanf(\"%d\",&a[i]); if(i!=n-1) scanf(\" %c\",&op[i]); }\n\n\tll sum=0; REP(i,n) sum+=a[i];\n\tll ret=a[0]; REP(i,n-1) if(op[i]=='+') ret+=a[i+1]; else ret-=a[i+1];\n\tll sumneg=0;\n\tint at=0; while(at<n-1&&op[at]=='+') ++at;\n\twhile(at<n-1) {\n\t\tint to=at+1; ll sumpos=0; while(to<n-1&&op[to]=='+') sumpos+=a[to+1],++to; if(to>=n-1) break;\n\t\tll cur=sum-2*(sumneg+a[at+1]+sumpos); if(cur>ret) ret=cur;\n\t\tsumneg+=a[at+1]; at=to;\n\t}\n\tprintf(\"%lld\\n\",ret);\n}\n\nint main() {\n\trun();\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <cmath>\n#include <cstdio>\n#include <string>\n#include <algorithm>\n#include <queue>\n#define ll long long\nusing namespace std;\n\n#define MOD 1000000007\n\nclass AdditionAndSubtractionHard\n{\npublic:\n\tint n;\n\tvector<ll> a;\n\tvector<string> op;\n\tvector<vector<ll > > dp;\n\n\tAdditionAndSubtractionHard(){\n\t\tcin >> n;\n\t\top.push_back(\"+\");\n\t\tfor (int i = 0; i < 2*n-1; ++i)\n\t\t {\n\t\t \tif(i % 2 == 0){\n\t\t \t\tll tmp;\n\t\t \t\tcin >> tmp;\n\t\t \t\ta.push_back(tmp);\n\t\t \t}else{\n\t\t \t\tstring tmpOp;\n\t\t \t\tcin >> tmpOp;\n\t\t \t\top.push_back(tmpOp);\n\t\t \t}\n\t\t } \n\t}\n\tvoid exec(){\n\t\tdp.resize(n+1);\n\t\tfor (int i = 0; i < n; ++i)\n\t\t{\n\t\t\tdp[i].resize(2);\n\t\t\t// dp[i][0].resize(2);\n\t\t\t// dp[i][1].resize(2);\n\t\t}\n\t\tdp[0][0] = a[0];\n\t\tdp[0][1] = -1 * MOD; // dp[n][1]の時は、符号が反対になっている。\n\t\tint flag = 0;\n\n\t\tfor (int i = 1; i < n; ++i)\n\t\t{\n\t\t\tif(op[i] == \"+\"){\n\t\t\t\tdp[i][0] = max(dp[i-1][0] + a[i], dp[i-1][1] - a[i]);\n\t\t\t\tdp[i][1] = dp[i-1][1] - a[i];\n\t\t\t\tif(flag) {\n\t\t\t\t\tdp[i][0] = max(dp[i][0], dp[i-1][1] + a[i]);\n\t\t\t\t\tdp[i][1] = max(dp[i-1][1] + a[i], dp[i][1]);\n\t\t\t\t}\n\n\t\t\t}else{\n\t\t\t\tdp[i][0] = max(dp[i-1][0] - a[i], dp[i-1][1] + a[i]);\n\t\t\t\tdp[i][1] = max(dp[i-1][1] + a[i], dp[i-1][0] - a[i]);\n\t\t\t\tif(flag >= 2 ) {\n\t\t\t\t\tdp[i][0] = max(dp[i][0], dp[i-1][0] + a[i]);\n\t\t\t\t\tdp[i][1] = max(dp[i-1][0] + a[i], dp[i][1]);\n\t\t\t\t}\n\n\t\t\t\tflag++;\n\t\t\t}\n\t\t\t// cout << dp[i][0] << \" \" << dp[i][1] << endl;\n\t\t}\n\n\t\tcout << max(dp[n-1][0], dp[n-1][1]) << endl;\n\t}\n};\n\nint main(){\n\tAdditionAndSubtractionHard aash = AdditionAndSubtractionHard();\n\taash.exec();\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <cstdlib>\n#include <cstring>\n#include <iostream>\n#include <algorithm>\ntypedef long long ll;\n#define rep(i, a, b) for (int i = a; i <= b; ++ i)\nusing namespace std;\nconst int maxn = 100010;\nint n; ll b[maxn], c[maxn];\nstruct epoch { int op; ll ave; } a[maxn];\nint main() {\n\tscanf(\"%d\", &n); char ch[10]; \n\tscanf(\"%lld\", &a[1].ave);\n\trep(i, 2, n) {\n\t\tscanf(\"%s%lld\", ch, &a[i].ave);\n\t\tif (ch[0] == '-') a[i].op = 1;\n\t}\n\trep(i, 1, n) b[i] = b[i - 1] + a[i].ave; int las = 0;\n\trep(i, 1, n) c[i] = c[i - 1] + ((a[i].op) ? - a[i].ave : a[i].ave);\n\tll ans = c[n];\n\trep(i, 1, n) if (a[i].op) {\n\t\tif (!las) {\n\t\t\tlas = i;\n\t\t\tcontinue;\n\t\t}\n\t\tans = max(ans, c[las] - (c[i - 1] - c[las]) + b[n] - b[i - 1]);\n\t}\n\tprintf(\"%lld\", ans);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\n#include<cstring>\n#include<cstdio>\n#include<cmath>\nusing namespace std;\n#define ll long long\nconst int MAXN=100000;\nint n,ans,cnt,rec;\nbool read()\n{\n\tchar ch;\n\twhile((ch=getchar())!='+'&&ch!='-');\n\treturn ch=='-';\n}\nint main()\n{\n\tscanf(\"%d\",&n);\n\tfor(int i=1,a,p=0;i<=n;++i)\n\t{\n\t\tif(i>1)p=read();\n\t\tscanf(\"%d\",&a);\n\t\tif(p)\n\t\t{\n\t\t\tswitch(cnt)\n\t\t\t{\n\t\t\t\tcase 0:ans+=rec-a;break;\n\t\t\t\tcase 1:ans+=abs(rec-a);break;\n\t\t\t\tdefault:ans+=rec+a;break;\n\t\t\t}\n\t\t\trec=0;++cnt;\n\t\t}\n\t\telse rec+=a;\n\t}\n\tans+=rec;\n\tprintf(\"%d\",ans);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\n#define rep(i , l , r) for(int i = (l) , ___ = (r) ; i <= ___ ; ++i)\n#define per(i , r , l) for(int i = (r) , ___ = (l) ; i >= ___ ; --i)\n\ntemplate<typename T>inline int chkmin(T &x , const T &y) { return x > y ? x = y , 1 : 0; }\ntemplate<typename T>inline int chkmax(T &x , const T &y) { return x < y ? x = y , 1 : 0; }\n\ntemplate<typename T>inline T read(T &f)\n{\n\tf = 0 ; int x = 1 ; char c = getchar();\n\twhile(!isdigit(c)) x = c == '-' ? -1 : 1 , c = getchar();\n\twhile(isdigit(c)) (f *= 10) += c & 15 , c = getchar();\n\treturn f *= x;\n}\n\nconst int N = 100000 + 5;\n\nusing int64 = long long;\n\nint n , cnt , A[N] , col[N] ;\n\nint64 s[N] , sum[N] , sl[N];\n\nint main()\n{\n\tread(n);\n\trep(i , 1 , n)\n\t{\n\t\tstatic int op[10];\n\t\tif(i == 1) read(A[i]) , col[++cnt] = 1 , s[1] = A[i];\n\t\telse\n\t\t{\n\t\t\tscanf(\"%s\" , op) , read(A[i]);\n\t\t\tif(*op == '-')\n\t\t\t{\n\t\t\t\tcol[++cnt] = -1;\n\t\t\t\ts[i] = -A[i];\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif(col[cnt] == 1) \n\t\t\t\t{\n\t\t\t\t\ts[cnt] += A[i];\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tcol[++cnt] = 1;\n\t\t\t\t\ts[cnt] = A[i];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tper(i , cnt , 1)\n\t{\n\t\tsum[i] = sum[i + 1] + abs(s[i]);\n\t}\n\tint64 Ans = -(1ll << 60) , ret = 0;\n\trep(i , 1 , cnt)\n\t{\n\t\tsl[i] = sl[i - 1] + s[i];\n\t}\n\tcerr << cnt << endl;\n\trep(i , 1 , cnt)\n\t{\n\t\tif(col[i + 1] == -1)\n\t\t{\n\t\t\tchkmax(Ans , sl[i + 1] - s[i + 2] + sum[i + 3]);\n\t\t}\n\t}\n\tchkmax(Ans , sl[cnt]);\n\tcout << Ans << endl;\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define N 100005\nusing namespace std;\n\nint n,cnt,a[N]; long long ans,b[N],s1[N],s2[N];\nint main(){\n\tscanf(\"%d%lld\",&n,&b[cnt=1]);\n\tint i,x; char ch;\n\tfor (i=1; i<n; i++){\n\t\tch=getchar(); while (ch!='+' && ch!='-') ch=getchar();\n\t\tscanf(\"%d\",&x);\n\t\tif (ch=='+') b[cnt]+=x; else{\n\t\t\tcnt++; a[cnt]=b[cnt]=x;\n\t\t}\n\t}\n\tfor (i=1; i<=cnt; i++){\n\t\ts1[i]=s1[i-1]+b[i]; s2[i]=s2[i-1]+b[i]-a[i]-a[i];\n\t}\n\tfor (i=2; i<=cnt; i++) ans=max(ans,s2[i-1]-b[i]+s1[cnt]-s1[i]);\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define mo 1000000007\n#define pi 3.1415926535898 \nusing namespace std;\nlong long read(){\n    long long xx=0,flagg=1;\n    char ch=getchar();\n    while((ch<'0'||ch>'9')&&ch!='-')\n        ch=getchar();\n    if(ch=='-'){\n        flagg=-1;\n        ch=getchar();\n    }\n    while(ch>='0'&&ch<='9'){\n        xx=xx*10+ch-'0';\n        ch=getchar();\n    }\n    return xx*flagg;\n}\nvoid pus(long long xx,long long flagg){\n    if(xx<0){\n        putchar('-');\n        xx=-xx;\n    }\n    if(xx>=10)\n        pus(xx/10,0);\n    putchar(xx%10+'0');\n    if(flagg==1)\n        putchar(' ');\n    if(flagg==2)\n        putchar('\\n');\n    return;\n}\nlong long n,m,i,a[100005],book[100005],sum,sum2,max1;\nchar s[100005];\nint main(){\n    //freopen(\".in\",\"r\",stdin);\n    //freopen(\".out\",\"w\",stdout);\n   \tcin>>n>>a[1];\n   \ts[1]='+';\n   \tfor(i=2;i<=n;i++)\n   \t\tcin>>s[i]>>a[i];\n   \tfor(i=1;i<=n;i++)\n   \t\tif(s[i]=='+')\n   \t\t\tbook[i]=book[i-1]+a[i];\n   \t\telse\n   \t\t\tbook[i]=book[i-1]-a[i];\n   \tmax1=book[n];\n   \tfor(i=n;i>=1;i--){\n\t\tsum2+=a[i];\n\t\tif(s[i]=='-'){\n\t\t\tmax1=max(max1,book[i-1]-sum2+sum);\n\t\t\tsum+=sum2;\n\t\t\tsum2=0;\n\t\t}\n\t}\n\tpus(max1,2);\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\nint a[200010],st[200010];\nlong long num[200010];\nint main()\n{\n\tint n,top=0;long long sum=0;scanf(\"%d\",&n);\n\tfor (int i=1;i<=n;i++)\n\t{\n\t\tchar ch='+';if (i!=1) scanf(\" %c\",&ch);\n\t\tscanf(\"%d\",&a[i]);\n\t\tsum+=a[i];\n\t\tif (ch=='-') st[++top]=a[i];else num[top]=a[i];\n\t}\n\tlong long ans=(top)?(-1e18):sum;\n\tfor (int i=1;i<=top;i++)\n\t{\n\t\tans=max(ans,sum-2*(st[i]+num[i]));\n\t\tsum-=2*st[i];\n\t}\n\tprintf(\"%lld\\n\",ans);\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\n#define ll long long\n#define ull unsigned long long\n#define re register\n#define il inline\n#define inf 0x3f3f3f\ninline int read() {\n  char ch = getchar();\n  int x = 0, f = 1;\n  while (ch > '9' || ch < '0') {\n    if (ch == '-')\n      f = -1;\n    ch = getchar();\n  }\n  while (ch >= '0' && ch <= '9') {\n    x = x * 10 + ch - '0';\n    ch = getchar();\n  }\n  return x * f;\n}\nconst int maxn = 1e5 + 5;\nll f[maxn][3];\nint n;\nint main(int argc, char const *argv[]) {\n  n = read();\n  f[0][0] = 0;\n  f[0][1] = f[0][2] = -inf;\n  for (int i = 1, x; i <= n; ++i) {\n    x = read();\n\n    f[i][0] = max(f[i - 1][0], f[i - 1][1]);\n    f[i][1] = max(f[i - 1][1], f[i - 1][2]);\n    f[i][2] = f[i - 1][2];\n\n    f[i][0] += x, f[i][1] -= x, f[i][2] += x;\n\n    if (x < 0) {\n      f[i][2] = max(f[i][1], f[i][2]);\n      f[i][1] = max(f[i][1], f[i][0]);\n    }\n  }\n  std::cout << max(f[n][0], max(f[n][1], f[n][2])) << '\\n';\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define to edge[i].v\n#define mp make_pair\n#define rint register int\n#define debug(x) cerr<<#x<<\"=\"<<x<<endl\n#define fgx cerr<<\"-------------\"<<endl\n#define N 100010\nusing namespace std;\ntypedef long long ll;\ntypedef long double db;\ntypedef pair<int,int> pii;\nint a[N]; ll pre[N],suf[N]; char c[N];\nint main()\n{\tios::sync_with_stdio(false);\n\tint n; ll ans=0; cin>>n>>a[1]; pre[1]=a[1];\n\tfor(rint i=2;i<=n;i++) cin>>c[i]>>a[i];\n\tfor(rint i=2;i<=n;i++) pre[i]=(c[i]=='-')?pre[i-1]-a[i]:pre[i-1]+a[i];\n\tfor(rint i=n;i>=1;i--) suf[i]=suf[i+1]+a[i];\n\tfor(rint i=1,j;i<=n;i++)\n\tif(c[i]=='-')\n\t{\tll sum=a[i];\n\t\tfor(j=i+1;j<=n&&c[j]=='+';j++) sum+=a[j];\n\t\tans=max(ans,pre[i-1]+suf[j]-sum);\n\t}\n\tcout<<ans;\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\n#define int long long\ntypedef vector<int>vint;\ntypedef pair<int,int>pint;\ntypedef vector<pint>vpint;\n#define rep(i,n) for(int i=0;i<(n);i++)\n#define reps(i,f,n) for(int i=(f);i<(n);i++)\n#define all(v) (v).begin(),(v).end()\n#define each(it,v) for(__typeof((v).begin()) it=(v).begin();it!=(v).end();it++)\n#define pb push_back\n#define fi first\n#define se second\ntemplate<typename A,typename B>inline void chmin(A &a,B b){if(a>b)a=b;}\ntemplate<typename A,typename B>inline void chmax(A &a,B b){if(a<b)a=b;}\n\nint N;\n\nint sig[111111];\nint A[111111];\nsigned main(){\n    cin>>N;\n    int lat;cin>>lat;\n    N--;\n    int normal=0;\n    rep(i,N){\n        char c;\n        int a;\n        cin>>c>>a;\n        if(c=='+')sig[i]=1;\n        else sig[i]=-1;\n        A[i]=a;\n        normal+=a*sig[i];\n    }\n\n    int ans=normal;\n    int latte=0,malta=0;\n    for(int i=N-1;i>=0;i--){\n        latte+=A[i];\n        normal-=A[i]*sig[i];\n        if(sig[i]==-1){\n            chmax(ans,normal-latte+malta);\n            malta+=latte;\n            latte=0;\n        }\n    }\n    cout<<ans+lat<<endl;\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define pii pair<int,int>\n#define fi first\n#define se second\n#define rep(i,j,k) for(int i=(int)j;i<=(int)k;i++)\n#define per(i,j,k) for(int i=(int)j;i>=(int)k;i--)\nusing namespace std;\ntypedef long long LL;\nconst int N=110000;\nint a[N];\nLL f[N][3];\nint ct[3];\nint n;\nint main(){\n    ct[0]=ct[2]=1;\n    ct[1]=-1;\n    scanf(\"%d\",&n);\n    rep(i,1,n){\n        if(i!=1){\n            char opt[3];scanf(\"%s\",opt);\n            scanf(\"%d\",&a[i]);if(opt[0]=='-')a[i]=-a[i];\n        }\n        else scanf(\"%d\",&a[i]);\n    }\n    rep(i,0,n)rep(j,0,2)f[i][j]=-(1ll<<60);\n    f[0][0]=0;\n    rep(i,0,n){\n        if(i){\n            rep(j,0,2)rep(k,j,2)f[i][j]=max(f[i][j],f[i][k]);\n            if(a[i]<0){\n                per(j,1,0)f[i][j+1]=max(f[i][j+1],f[i][j]);\n            }\n        }\n        rep(j,0,2){\n            f[i+1][j]=max(f[i+1][j],f[i][j]+ct[j]*a[i+1]);\n        }\n    }\n    printf(\"%lld\\n\",f[n][0]);\n    return 0;\n}\n\n\n\n\n"
  },
  {
    "language": "C++",
    "code": "#include\"bits/stdc++.h\"\n\n\n#define PB push_back\n#define PF push_front\n#define LB lower_bound\n#define UB upper_bound\n#define fr(x) freopen(x,\"r\",stdin)\n#define fw(x) freopen(x,\"w\",stdout)\n#define iout(x) printf(\"%d\\n\",x)\n#define lout(x) printf(\"%lld\\n\",x)\n#define REP(x,l,u) for(int x = (l);x<=(u);x++)\n#define RREP(x,l,u) for(int x = (l);x>=(u);x--)\n#define mst(x,a) memset(x,a,sizeof(x))\n#define PII pair<int,int>\n#define PLL pair<ll,ll>\n#define MP make_pair\n#define se second\n#define fi first\n#define dbg(x) cout<<#x<<\" = \"<<(x)<<endl;\n#define sz(x) ((int)x.size())\n#define cl(x) x.clear()\n\ntypedef  long long ll;\ntypedef unsigned long long ull;\ntypedef double db;\ntypedef long double ld;\nusing namespace std;\n\nconst int maxn = 100010;\nconst int mod = 1e9+7;\nconst int MAX = 1000000010;\nconst double eps = 1e-6;\nconst double PI = acos(-1);\n\ntemplate<typename T> inline void read(T &x){\nx=0;T f=1;char ch;do{ch=getchar();if(ch=='-')f=-1;}while(ch<'0'||ch>'9');do x=x*10+ch-'0',ch=getchar();while(ch<='9'&&ch>='0');x*=f;\n}\n\ntemplate<typename A,typename B> inline void read(A&x,B&y){read(x);read(y);}\ntemplate<typename A,typename B,typename C> inline void read(A&x,B&y,C&z){read(x);read(y);read(z);}\ntemplate<typename A,typename B,typename C,typename D> inline void read(A&x,B&y,C&z,D&w){read(x);read(y);read(z);read(w);}\ntemplate<typename A,typename B> inline A fexp(A x,B p){A ans=1;for(;p;p>>=1,x=1LL*x*x%mod)if(p&1)ans=1LL*ans*x%mod;return ans;}\ntemplate<typename A,typename B> inline A fexp(A x,B p,A mo){A ans=1;for(;p;p>>=1,x=1LL*x*x%mo)if(p&1)ans=1LL*ans*x%mo;return ans;}\n\nint n;\n\nchar st[20];\n\nvoid Work(){\n\tll ans=0;\n\tint x;read(x);ans+=x;\n\tbool ok=0;\n\tREP(i,2,n){\n\t\tscanf(\"%s\",st+1);\n\t\tread(x);\n\t\tif(st[1]=='-'){\n\t\t\tif(ok)ans+=x;else ok=1;\n\t\t}\n\t\telse ans+=x;\n\t}\n\tcout<<ans<<endl;\n}\n\nvoid Init(){\n\tread(n);\n}\n\nint main(){\n\tInit();\n\tWork();\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n#define X first\n#define Y second\n#define LL long long\n#define ULL unsigned long long\n#define PB push_back\n#define MP make_pair\n#define VI vector<int>\n#define PII pair<int,int>\n#define IOS ios::sync_with_stdio(0);cin.tie(0);\n#define IN freopen(\"in\", \"r\", stdin);\n#define OUT freopen(\"out\", \"w\", stdout);\n\nconst int maxn=100010;\n\nLL a[maxn],per[maxn];\nchar c[maxn];\n\nint main()\n{\n\tIOS;\n\tint n;\n\tcin>>n>>a[0];\n\tper[0]=a[0];\n\tLL abssum=a[0];\n\tLL ans=a[0];\n\tVI sub;\n\tfor (int j=1;j<n;++j)\n\t{\n\t\tcin>>c[j]>>a[j];\n\t\tper[j]=per[j-1]+a[j];\n\t\tabssum+=a[j];\n\t\tif (c[j]=='+') ans+=a[j];\n\t\telse\n\t\t{\n\t\t\tans-=a[j];\n\t\t\tsub.PB(j);\n\t\t}\n\t}\n\tfor (int j=0;j<(int)sub.size()-1;++j)\n\t{\n\t\tint p1=sub[j];\n\t\tint p2=sub[j+1];\n\t\tLL tis=abssum-(per[p2-1]-per[p1-1])*2;\n\t\tans=max(ans,tis);\n\t\tabssum-=a[p1];\n\t}\n\tcout<<ans<<endl;\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#define llint long long\n#define sgn(x) (((x)%2)?-1:1)\n#define inf 100000000000000000\n\nusing namespace std;\n\nllint N;\nllint A[100005];\nchar op[100005];\nllint dp[100005][10];\n\nint main(void)\n{\n\tcin >> N;\n\tN--;\n\t\n\tcin >> A[0];\n\tfor(int i = 1; i <= N; i++) cin >> op[i] >> A[i];\n\t\n\tfor(int i = 0; i <= N; i++){\n\t\tfor(int j = 0; j <= 2; j++){\n\t\t\tdp[i][j] = -inf;\n\t\t}\n\t}\n\t\n\tdp[0][0] = A[0];\n\tfor(int i = 0; i < N; i++){\n\t\tfor(int j = 0; j <= 2; j++){\n\t\t\tif(dp[i][j] == -inf) continue;\n\t\t\tif(op[i+1] == '+'){\n\t\t\t\tdp[i+1][j] = max(dp[i+1][j], dp[i][j] + sgn(j)*A[i+1]);\n\t\t\t\tif(j > 0) dp[i+1][j-1] = max(dp[i+1][j-1], dp[i][j] + sgn(j)*A[i+1]);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tdp[i+1][j] = max(dp[i+1][j], dp[i][j] + sgn(j+1)*A[i+1]);\n\t\t\t\tdp[i+1][j+1] = max(dp[i+1][j+1], dp[i][j] + sgn(j+1)*A[i+1]);\n\t\t\t\tif(j > 0) dp[i+1][j-1] = max(dp[i+1][j-1], dp[i][j] + sgn(j+1)*A[i+1]);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t/*for(int i = 0; i <= N; i++){\n\t\tfor(int j = 0; j <= N; j++){\n\t\t\tif(dp[i][j] == -inf) cout << \"-inf\" << \" \";\n\t\t\telse cout << dp[i][j] << \" \";\n\t\t}\n\t\tcout << endl;\n\t}*/\n\t\n\tcout << dp[N][0] << endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <cstring>\n#include <algorithm>\nusing namespace std;\ntypedef long long ll;\nconst int N = 1e5 + 5;\nconst ll inf = 1e15;\nint n;\nll a[N], dp[N][3];\nchar s[N][2];\nint main() {\n    scanf(\"%d\", &n);\n    for(int i = 1; i < n; ++i) {\n        scanf(\"%lld%s\", &a[i], s[i]);\n    }\n    scanf(\"%lld\", &a[n]);\n    dp[1][0] = a[1];\n    dp[1][1] = dp[1][2] = -inf; \n    for(int i = 2; i <= n; ++i) {\n        if(s[i - 1][0] == '-') {\n            dp[i][0] = -inf;\n            dp[i][1] = max(dp[i - 1][0], dp[i - 1][1]) - a[i];\n            dp[i][2] = max(dp[i - 1][1], dp[i - 1][2]) + a[i];\n        } else {\n            dp[i][0] = max(dp[i - 1][0], dp[i - 1][1]) + a[i];\n            dp[i][1] = max(dp[i - 1][2], dp[i - 1][1]) - a[i];\n            dp[i][2] = dp[i - 1][2] + a[i];\n        }\n    }\n    printf(\"%lld\\n\", max(max(dp[n][0], dp[n][1]), dp[n][2]));\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <cstring>\n#include <algorithm>\nusing namespace std;\ntypedef long long ll;\nconst int N = 1e5 + 5;\nconst ll inf = 1e15;\nint n;\nll a[N], dp[N][3];\nchar s[N][2];\nint main() {\n\tscanf(\"%d\", &n);\n\tfor(int i = 1; i < n; ++i) {\n\t\tscanf(\"%lld%s\", &a[i], s[i]);\n\t}\n\tscanf(\"%lld\", &a[n]);\n\tdp[1][0] = a[1];\n\tdp[1][1] = dp[1][2] = -inf;\t\n\tfor(int i = 2; i <= n; ++i) {\n\t\tif(s[i - 1][0] == '-') {\n\t\t\tdp[i][0] = -inf;\n\t\t\tdp[i][1] = max(dp[i - 1][0], dp[i - 1][1]) - a[i];\n\t\t\tdp[i][2] = max(dp[i - 1][1], dp[i - 1][2]) + a[i];\n\t\t} else {\n\t\t\tdp[i][0] = max(dp[i - 1][0], dp[i - 1][1]) + a[i];\n\t\t\tdp[i][1] = max(dp[i - 1][2], dp[i - 1][1]) - a[i];\n\t\t\tdp[i][2] = dp[i - 1][2] + a[i];\n\t\t}\n\t}\n\tprintf(\"%lld\\n\", max(max(dp[n][0], dp[n][1]), dp[n][2]));\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "long a,b,c;o;\nmain(A){\n\tb=c=-1e9;\n\tfor(scanf(\"%*d%ld\",&a);~scanf(\" %c%d\",&o,&A);)\n\t\tb=o%3?a+=A,fmax(b-A,c+=A):(a=fmax(a-A,c=b+A));\n\tprintf(\"%ld\",a);\n}"
  },
  {
    "language": "C++",
    "code": "#include<stdio.h>\n#include<vector>\n#include<algorithm>\nusing namespace std;\ntypedef long long ll;\nll dp[200000][3];\nint main()\n{\n\tint num;\n\tscanf(\"%d\", &num);\n\tll now = 0;\n\tfor (int i = 0; i < 200000; i++)dp[i][0] = dp[i][1] = dp[i][2] = -1000000000000000000LL;\n\tint zt;\n\tscanf(\"%d\", &zt);\n\tdp[0][0] = zt;\n\tfor (int i = 1; i < num; i++)\n\t{\n\t\tchar za;\n\t\tint zb;\n\t\tscanf(\" %c%d\", &za, &zb);\n\t\tif (za == '+')\n\t\t{\n\t\t\tdp[i][0] = max(dp[i][0], dp[i - 1][0] + zb);\n\t\t\tdp[i][1] = max(dp[i][1], dp[i - 1][1] - zb);\n\t\t\tdp[i][2] = max(dp[i][2], dp[i - 1][2] + zb);\n\t\t\tdp[i][1] = max(dp[i][1], dp[i - 1][2] + zb);\n\t\t\tdp[i][2] = max(dp[i][2], dp[i - 1][1] - zb);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tdp[i][0] = max(dp[i][0], dp[i - 1][0] - zb);\n\t\t\tdp[i][1] = max(dp[i][1], dp[i - 1][0] - zb);\n\t\t\tdp[i][1] = max(dp[i][1], dp[i - 1][1] + zb);\n\t\t\tdp[i][2] = max(dp[i][2], dp[i - 1][2] - zb);\n\t\t\tdp[i][1] = max(dp[i][1], dp[i - 1][2] - zb);\n\t\t\tdp[i][2] = max(dp[i][2], dp[i - 1][1] + zb);\n\t\t\tdp[i][1] = max(dp[i][1], dp[i - 1][2] - zb);\n\t\t\tdp[i][2] = max(dp[i][2], dp[i - 1][1] + zb);\n\t\t}\n\t}\n\tprintf(\"%lld\\n\", max(dp[num - 1][0], max(dp[num - 1][1], dp[num - 1][2])));\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define Task        \"test\"\n#define pb          emplace_back\n#define fi          first\n#define se          second\n#define mp          make_pair\n#define ll          long long\n//#define int         int64_t\n\nusing namespace std;\n\ntypedef pair<ll, ll> pii;\nconst int N = (int)2e5 + 2;\nconst ll inf = (ll)1e18;\n\nll f[N][3];\nint n, a[N];\nchar op[N];\n\nint32_t main() {\n    ios_base::sync_with_stdio(0);\n    cin.tie(0), cout.tie(0);\n    if(fopen(Task\".inp\", \"r\")) {\n        freopen(Task\".inp\", \"r\", stdin);\n        freopen(Task\".out\", \"w\", stdout);\n    }\n    cin >> n; op[0] = '+';\n    for(int i = 1; i <= n; ++i) {\n        cin >> a[i];\n        if(i < n) cin >> op[i];\n    }\n    fill_n(&f[0][0], N * 3, -inf);\n    f[1][0] = a[1];\n    for(int i = 2; i <= n; ++i) {\n        if(op[i - 1] == '-') a[i] *= (-1);\n        f[i][0] = max(max(f[i - 1][0], f[i - 1][2]) + a[i], f[i - 1][1] - a[i]);\n        f[i][1] = max(f[i - 1][1] - a[i], f[i - 1][2] + a[i]);\n        f[i][2] = f[i - 1][2] + a[i];\n        if(op[i - 1] == '-') {\n            f[i][1] = max(f[i - 1][0] + a[i], f[i][1]);\n            f[i][2] = max(f[i - 1][1] - a[i], f[i][2]);\n        }\n    }\n    cout << f[n][0];\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define ll long long\n#define pb push_back\n#define mk make_pair\n#define rint register int\nusing namespace std;\ninline int read(){int w=1,s=0;char ch=getchar();while(!isdigit(ch)){if(ch=='-')w=-1;ch=getchar();}while(isdigit(ch)){s=s*10+ch-'0';ch=getchar();}return w*s;}\nll f[3];int n;\nint Fu[1000010];\nint main()\n{\n\tmemset(f,-0x3f,sizeof(f));\n\tn=read();n--;\n\tf[0]=read();\n\tfor(rint i=1;i<=n;++i){char s[2];\n\t\tscanf(\"%s\",s+1);int x=read();if(s[1]=='+') Fu[i]=1;\n\t\telse Fu[i]=-1;x*=Fu[i];\n\t\tf[0]+=x;f[1]-=x;f[2]+=x;\n\t\tif(x<0) f[1]=max(f[0],f[1]),f[2]=max(f[2],f[1]);\n\t\tf[0]=max(f[0],f[1]);f[1]=max(f[0],f[2]);\n\t}cout<<f[0];\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "/*\nThough leaves are many , the root is one.\nThrough all the lying days of my youth\nI swayed my leaves and flowers in the sun.\nNow I may wither into the truth.\n\t  \t  \t- William Butler Yeats\n*/\n//#pragma GCC optimize(\"Ofast,no-stack-protector\")\n//#pragma GCC target(\"sse,sse2,sse3,ssse3,sse4,popcnt,abm,mmx\")\n//#pragma GCC target(\"avx,tune=native\")\n#include<bits/stdc++.h>\n#define int long long\n#pragma comment(\" -Wl,--stack=1024000000\")\n//#include<ext/pb_ds/assoc_container.hpp>\nusing namespace std;\n//using namespace __gnu_pbds;\nconst int inf=0x3f3f3f3f;\nconst double eps=1e-6;\nconst int mod=1000000007;\ntypedef long long ll;\n#ifndef LOCAL\n#define cerr if(0)cout\n#define eprintf(...) 0\n#else\n#define eprintf(...) fprintf(stderr, __VA_ARGS__)\n#endif\ninline string getstr(string &s,int l,int r){string ret=\"\";for(int i=l;i<=r;i++)ret.push_back(s[i]);return ret;}\nint modpow(int x,int y,int md=mod){if(y==0)return 1;int ret=modpow(x,y>>1,md);ret=(ll)ret*ret%md;if(y&1)ret=(ll)ret*x%md;return ret;}\nint n;\nint a[100005];\nchar c[100005];\nbool used[100005];\nint dp[100005][2];\nsigned main(){\n\tcin>>n;cin>>a[1]; \n\tfor(int i=2;i<=n;i++){\n\t\tcin>>c[i]>>a[i];\n\t}\n\tvector<int>vec;\n\tfor(int i=1;i<=n;i++){\n\t\tif(used[i])continue;\n\t\tint now=i+1;\n\t\twhile(now<=n&&c[now]=='+'){\n\t\t\tnow++;\n\t\t}\n\t\tint sum=0;\n\t\tfor(int j=i;j<now;j++){\n\t\t\tused[j]=1;\n\t\t\tsum+=a[j];\n\t\t}\n\t\tvec.push_back(sum);\n\t}\n\t#ifdef LOCAL\n\t\tfor(int i=0;i<vec.size();i++){\n\t\t\tcerr<<vec[i]<<\" \";\n\t\t}cerr<<endl;\n\t#endif\n\tif(vec.size()==1){\n\t\tcout<<vec[0]<<endl;\n\t}else{\n\t\tint v=vec[0]-vec[1];\n\t\tfor(int i=2;i<vec.size();i++)v+=vec[i];\n\t\tcout<<v<<endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\nconst int N = 1e5 + 9;\n\nusing ll = long long;\nint A[N], n;\nll f[N][3];\nbool o[N];\nchar s;\n\nint pd (int a, bool o) { return o ? a : -a; }\n\nint main () {\n\tscanf(\"%d\", &n);\n\tfor (int i = o[1] = 1; i <= n; ++i) {\n\t\tif (i > 1) scanf(\"%s\", &s), o[i] = s == '+' ? 1 : 0;\n\t\tscanf(\"%d\", &A[i]);\n\t}\n\tf[0][1] = f[0][2] = -0x3f3f3f3f3f3f3f3f;\n\tfor (int i = 1; i <= n; ++i) {\n\t\tf[i][2] = f[i - 1][2];\n\t\tfor (int j = 0; j < 2; ++j) f[i][j] = max(f[i - 1][j], f[i - 1][j + 1]);\n\t\tfor (int j = 0; j < 3; ++j) f[i][j] += ((o[i] ^ (j & 1)) ? A[i] : -A[i]);\n\t\tif (!o[i]) for (int j = 2; j; --j) f[i][j] = max(f[i][j - 1], f[i][j]);\n\t}\n\tprintf(\"%lld\\n\", max(f[n][0], max(f[n][1], f[n][2])));\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "// Words are flowing out like endless rain into a paper cup\n// They slither while they pass they slip away across the universe\n// Pools of sorrow, waves of joy are drifting through my open mind\n// Possessing and caressing me\n\n#include <bits/stdc++.h>\nusing namespace std;\n\nusing LL = long long;\n\nnamespace _buff {\n\nconst size_t BUFF = 1 << 19;\nchar ibuf[BUFF], *ib = ibuf, *ie = ibuf;\nchar getc() {\n    if (ib == ie) {\n        ib = ibuf;\n        ie = ibuf + fread(ibuf, 1, BUFF, stdin);\n    }\n    return ib == ie ? -1 : *ib++;\n}\n\n}\n\nLL read() {\n    using namespace _buff;\n    LL ret = 0;\n    bool pos = true;\n    char c = getc();\n    for (; (c < '0' || c > '9') && c != '-'; c = getc()) {\n        assert(~c);\n    }\n    if (c == '-') {\n        pos = false;\n        c = getc();\n    }\n    for (; c >= '0' && c <= '9'; c = getc()) {\n        ret = (ret << 3) + (ret << 1) + (c ^ 48);\n    }\n    return pos ? ret : -ret;\n}\n\nchar read_op() {\n    using namespace _buff;\n    char c = getc();\n    for (; c != '+' && c != '-'; c = getc()) {\n        assert(~c);\n    }\n    return c;\n}\n\ntemplate <typename T>\nvoid chkmax(T &dp, const T &val) {\n    if (val > dp) {\n        dp = val;\n    }\n}\n\nconst size_t N = 1E5 + 5;\n\nLL f[N][3];\nint a[N];\nchar op[N];\n\nint main() {\n    int n = read();\n    for (int i = 1; i <= n; ++i) {\n        a[i] = read();\n        if (i < n) op[i] = read_op();\n    }\n    memset(f, 0xef, sizeof f);\n    f[1][0] = a[1];\n    for (int i = 1; i < n; ++i) {\n        chkmax(f[i][1], f[i][2]);\n        chkmax(f[i][0], f[i][1]);\n        if (op[i] == '+') {\n            for (int j = 0; j < 3; ++j) {\n                f[i + 1][j] = f[i][j] + a[i + 1] * (j ^ 1 ? 1 : -1);\n            }\n        } else {\n            for (int j = 0; j < 3; ++j) {\n                LL tmp = f[i][j] + a[i + 1] * (j ^ 1 ? -1 : 1);\n                chkmax(f[i + 1][j], tmp);\n                if (j + 1 < 3) chkmax(f[i + 1][j + 1], tmp);\n            }\n        }\n    }\n    chkmax(f[n][1], f[n][2]);\n    chkmax(f[n][0], f[n][1]);\n    cout << f[n][0];\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "/// Kazuki Hoshino\n\n\n#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\ntypedef long double ld;\ntypedef vector<int> vi;\ntypedef pair<int,int> pi;\ntypedef pair<ll, ll> pll;\ntypedef vector<ll> vl;\ntypedef vector<pi> vpi;\n#define inf 10000000000000000\n#define mod 1000000007\n#define rep(i,a,b) for (int i = a; i <= b; i++)\n#define rep1(i, a, b) for(int i =a; i >=b; i--)\n#define f first\n#define ss second\n#define pb push_back\n#define all(c) (c).begin(),(c).end()\n#define mt make_tuple\n#define endl '\\n'\n\ntemplate<typename A,typename B>inline void chmin(A &a,B b){if(a>b)a=b;}\ntemplate<typename A,typename B>inline void chmax(A &a,B b){if(a<b)a=b;}\n\nll n , a[101010], dp[101010], sum[101010], x, pre, mn=-inf, t;\nbool pm[10101];\nchar ch;\n\nint main(){\nios::sync_with_stdio(0);\ncin.tie(0);\n\n//freopen(\"input.txt\",\"r\",stdin);\n//freopen(\"output.txt\",\"w\",stdout);\n\n\n    //cin >> t;\n\n//while(t--){\n\n    cin >> n >> x;\n    dp[0]=x;\n\n    n--;\n\n    rep(i, 0, n-1){\n        cin >> ch >> x;\n\n        pm[i]=ch!='+';\n\n        sum[i+1]=x;\n        a[i]=x;\n\n    }\n\n    rep(i,0,n-1){\n        sum[i+1]+=sum[i];\n    }\n\n    pre=-1;\n\n    rep(i,0,n-1){\n\n        if(pm[i] && pre!=-1){\n            chmax(mn,dp[pre]-(sum[i]-sum[pre])-sum[i]);\n        }\n        if(!pm[i]){\n            dp[i+1]=max(dp[i],mn+sum[i])+a[i];\n        }\n        else{\n            dp[i+1]=max(dp[i]-a[i],mn+sum[i]+a[i]);\n            pre=i;\n        }\n    }\n    cout<<dp[n]<<endl;\n\n//}\n\n\nreturn 0;\n}\n///....\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\ntypedef pair<int, int> pii;\ntypedef long long ll;\ntemplate<class T> using V = vector<T>;\ntemplate<class T> using VV = V<V<T>>;\n\n#define pb push_back\n#define eb emplace_back\n#define mp make_pair\n#define fi first\n#define se second\n#define rep(i,n) rep2(i,0,n)\n#define rep2(i,m,n) for(int i=m;i<(n);i++)\n#define ALL(c) (c).begin(),(c).end()\n#define dump(x) cerr << #x << \" = \" << (x) << endl\nconstexpr ll TEN(int n) { return (n == 0) ? 1 : 10 * TEN(n-1); }\n\ntemplate<class T, class U> void chmin(T& t, const U& u) { if (t > u) t = u; }\ntemplate<class T, class U> void chmax(T& t, const U& u) { if (t < u) t = u; }\n\ntemplate<class T, class U>\nostream& operator<<(ostream& os, const pair<T, U>& p) {\n\tos<<\"(\"<<p.first<<\",\"<<p.second<<\")\";\n\treturn os;\n}\n\ntemplate<class T>\nostream& operator<<(ostream& os, const vector<T>& v) {\n\tos<<\"{\";\n\trep(i, v.size()) {\n\t\tif (i) os<<\",\";\n\t\tos<<v[i];\n\t}\n\tos<<\"}\";\n\treturn os;\n}\n\nconst int maxn = 100010;\nconst ll inf = -TEN(18);\n\nll dp[maxn][3];\n\nint main() {\n\trep(i, maxn) rep(j, 3) {\n\t\tdp[i][j] = inf;\n\t}\n\n\tdp[0][0] = 0;\n\n\tint N; cin >> N;\n\trep(i, N) {\n\t\tbool neg = 0;\n\t\tif (i > 0) {\n\t\t\tstring s; cin >> s;\n\t\t\tif (s == \"-\") {\n\t\t\t\tneg = 1;\n\t\t\t}\n\t\t}\n\t\tint x; cin >> x;\n\n\t\tll tmp[3];\n\t\trep(j, 3) tmp[j] = dp[i][j];\n\n\t\tfor (int j = 1; j >= 0; --j) { //close\n\t\t\tchmax(tmp[j], tmp[j+1]);\n\t\t}\n\n\t\trep(j, 3) if (tmp[j] != inf) {\n\t\t\ttmp[j] += ((j + neg) % 2 == 1) ? -x : x;\n\t\t}\n\n\t\tif (neg) {\n\t\t\tfor (int j = 1; j >= 0; --j) { //open\n\t\t\t\tchmax(tmp[j+1], tmp[j]);\n\t\t\t}\n\t\t}\n\n\t\trep(j, 3) dp[i+1][j] = tmp[j];\n\t}\n\n\tcout << max({dp[N][0], dp[N][1], dp[N][2]}) << endl;\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\nint read(){\n\tint a = 0; char c = getchar(); while(!isdigit(c)) c = getchar();\n\twhile(isdigit(c)){a = a * 10 + c - 48; c = getchar();} return a;\n}\n\nconst int _ = 1e5 + 7;\nlong long N , dp[_][2] , val[_][2] , cnt;\n\nint main(){\n\tN = read(); val[0][1] = read();\n\tfor(int i = 1 ; i < N ; ++i) if(getchar() == '-') val[++cnt][0] = read(); else val[cnt][1] += read();\n\tmemset(dp , -0x3f , sizeof(dp)); dp[0][0] = 0;\n\tfor(int i = 1 ; i <= cnt ; ++i){\n\t\tdp[i][0] = max(dp[i - 1][0] , dp[i - 1][1]) + val[i][1] - val[i][0];\n\t\tdp[i][1] = max(dp[i - 1][0] - val[i][0] - val[i][1] , dp[i - 1][1] + val[i][0] + val[i][1]);\n\t}\n\tcout << max(dp[cnt][0] , dp[cnt][1]) + val[0][1];\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef pair<ll, ll> P;\n\n#define fi first\n#define se second\n#define repl(i,a,b) for(ll i=(ll)(a);i<(ll)(b);i++)\n#define rep(i,n) repl(i,0,n)\n#define all(x) (x).begin(),(x).end()\n#define dbg(x) cout<<#x\"=\"<<x<<endl\n#define mmax(x,y) (x>y?x:y)\n#define mmin(x,y) (x<y?x:y)\n#define maxch(x,y) x=mmax(x,y)\n#define minch(x,y) x=mmin(x,y)\n#define uni(x) x.erase(unique(all(x)),x.end())\n#define exist(x,y) (find(all(x),y)!=x.end())\n#define bcnt __builtin_popcount\n\n#define INF 9e18\n#define mod 1000000007\n\nll n;\nll st;\nll dp[3];\n\nint main(){\n  cin>>n>>st;\n  dp[0]=st;dp[1]=-INF;dp[2]=-INF;\n  rep(i,n-1){\n    char c;\n    ll a;\n    cin>>c>>a;\n    ll nxt[3];\n    nxt[0]=nxt[1]=nxt[2]=-INF;\n    if(c=='+'){\n      maxch(nxt[0],dp[0]+a);\n\n      maxch(nxt[1],dp[1]-a);\n      maxch(nxt[0],dp[1]+a);\n\n      maxch(nxt[2],dp[2]+a);\n      maxch(nxt[1],dp[2]+a);\n      maxch(nxt[0],dp[2]+a);\n    }else{\n      maxch(nxt[0],dp[0]-a);\n      maxch(nxt[1],dp[0]-a);\n\n      maxch(nxt[1],dp[1]+a);\n      maxch(nxt[0],dp[1]-a);\n      maxch(nxt[2],dp[1]+a);\n\n      maxch(nxt[2],dp[2]+a);\n      maxch(nxt[1],dp[2]+a);\n      maxch(nxt[0],dp[2]+a);\n    }\n    dp[0]=nxt[0]; dp[1]=nxt[1]; dp[2]=nxt[2];\n  }\n  cout<<*max_element(dp,dp+3)<<endl;\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define MAXN 200005\n#define LL long long\n#define sum(l,r) (l<=r?(s[r] - s[l-1]):0)\nusing namespace std;\n \nint N;\nLL a[MAXN], s[MAXN];\n \nint main(){\n\t\n\tcin>>N;\n\tcin>>a[1];\n\t\n\tint N1 = 1;\n\tchar op;\n\tint x;\n\tfor(int i=1;i<N;i++){\n\t\tcin>>op;\n\t\tcin>>x;\n\t\tif(op=='+') a[N1] += x;\n\t\telse a[++N1] = x;\n\t}\n\n\tN = N1;\n\tif(N==1){\n\t\tcout<<a[1]<<endl;\n\t\treturn 0;\n\t}\n\t\n\tfor(int i=1;i<=N;i++){\n\t\ts[i] = s[i-1] + a[i];\n\t}\n\t\n\tLL ans = a[1] - sum(2,N);\n//\tans = a[1] - a[2] + sum(3,N);\n\t\n\tfor(int i=2;i<=N;i++){\n\t\tans = max(ans, a[1]-sum(2,i)+sum(i+1,N));\n\t}\n\tcout<<ans<<endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<algorithm>\n#define ll long long\nusing namespace std;\nint n,i,k;char c;ll f0,f1,f2;\nint main(){\n\tscanf(\"%d\",&n);scanf(\"%d\",&f0);f1=f2=-1e18;\n\tfor (n--;n--;){\n\t\tscanf(\" %c%d\",&c,&k);\n\t\tif (c=='-') k=-k;\n\t\tll v0=f0+k,v1=f1-k,v2=f2+k;\n\t\tf0=max(v0,max(v1,v2));\n\t\tif (c=='+') f1=f2=max(v1,v2);\n\t\telse f1=max(v0,max(v1,v2)),f2=max(v1,v2);\n\t}\n\tprintf(\"%lld\",f0);\n}"
  },
  {
    "language": "C++",
    "code": "// Math = ♥\n// Sometimes it is people that no one imagines anything of who do things that no one can imagine\n// After all this time? Always\n\n#include <bits/stdc++.h>                        // uncomment before submission\n//#include <ext/pb_ds/assoc_container.hpp>\t\t// uncomment before submission\n//#include <ext/pb_ds/tree_policy.hpp>\t\t\t// uncomment before submission\n//using namespace __gnu_pbds;\t\t\t\t\t// uncomment before submission\nusing namespace std;\n//<---------------------------------------------------Template----------------------------------------------------------->\n#define int long long\n#define ll long long\n#define ld long double\nint INF = 1e9 + 7;\ntypedef pair<ll, ll> ii;\ntypedef vector<ll> vi;                  // Vector of long long\ntypedef vector<vi> vvi;                 // Vector of vi\ntypedef vector<ii> vii;                 // Vector of pairs\ntypedef vector<vii> vvii;               // Vector of Vector of pairs\ntypedef vector<bool> vb;                // Vector of bool\n#define pq priority_queue               // Max heap (To convert to min heap, use negative sign before every value)\n#define ff first                        // For pairs\n#define ss second                       // For pairs\n#define pb push_back                    // Pushback to vector\n#define mp make_pair                    // Makes pairs to be stored as pair\n#define all(c) (c).begin(), (c).end()   // Mainly used by me in sorting\n// ordered_set adds two new functions to set - (set).find_by_order([kth element based on zero indexing]) and order_of_key()\n// order_of_key returns number of elements less that parameter. If element exists, that order is its index\n#define ordered_set tree<ll, null_type, less<ll>, rb_tree_tag, tree_order_statistics_node_update>\n//<----------------------------------------------------------------------------------------------------------------------->\n\nsigned main()\n{\n    ios_base::sync_with_stdio(false);\n    cin.tie(NULL);\n    int n;\n    cin >> n;\n\n    vector<char> op;\n    vi num;\n\n    int x;\n    cin >> x, num.pb(x);\n    for (int i = 0; i < n - 1; i++)\n    {\n        char ch;\n        cin >> ch >> x;\n        op.pb(ch), num.pb(x);\n    }\n\n    vvi dp(n, vector<int>(3));\n    dp[0][0] = num[0];\n    dp[0][1] = -INF;\n    dp[0][2] = -INF;\n\n    for (int i = 1; i < n; i++)\n    {\n        if (op[i - 1] == '+')\n        {\n            dp[i][0] = dp[i - 1][0] + num[i];\n            dp[i][1] = dp[i - 1][1] - num[i];\n            dp[i][2] = dp[i - 1][2] + num[i];\n        } else\n        {\n            dp[i][1] = max(dp[i - 1][0], dp[i - 1][1]) - num[i];\n            dp[i][2] = max(dp[i - 1][1], dp[i - 1][2]) + num[i];\n            dp[i][0] = -INF;\n        }\n        dp[i][0] = max(dp[i][0], max(dp[i][1], dp[i][2]));\n        dp[i][1] = max(dp[i][1], dp[i][2]);\n    }\n\n    int a[] = {dp[n - 1][0], dp[n - 1][1], dp[n - 1][2]};\n    sort(a, a + 3);\n\n    cout << a[2] << endl;\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<iostream>\n#include<cstring>\n#define ll long long\n#define maxn 100010\nusing namespace std;\nint n,i;\nll a[maxn],b[maxn],f[maxn][3];\nint read()\n{\n\tint x=0;\n\tchar c=getchar();\n\twhile(!isdigit(c))c=getchar();\n\twhile(isdigit(c))\n\t{\n\t\tx=x*10+c-'0';\n\t\tc=getchar();\n\t}\n\treturn x;\n}\nchar readch()\n{\n\tchar c=getchar();\n\twhile(c!='-'&&c!='+')c=getchar();\n\treturn c;\n}\nint main()\n{\n\tn=read();\n\ta[1]=read();\n\tfor(i=2;i<=n;i++)\n\t{\n\t\tif(readch()=='-')b[i]=-1;else b[i]=1;\n\t\ta[i]=read();\n\t}\n\tmemset(f,-0x3f,sizeof(f));\n\tf[1][0]=a[1];\n\tfor(i=2;i<=n;i++)\n\t{\n\t\tf[i][0]=max(f[i-1][0]+b[i]*a[i],f[i-1][1]-b[i]*a[i]);\n\t\tf[i][1]=max(f[i-1][1]-b[i]*a[i],f[i-1][2]+b[i]*a[i]);\n\t\tif(b[i]==-1)f[i][1]=max(f[i][1],f[i-1][0]+b[i]*a[i]);\n\t\tf[i][2]=f[i-1][2]+b[i]*a[i];\n\t\tif(b[i]==-1)f[i][2]=max(f[i][2],f[i-1][1]-b[i]*a[i]);\n\t}\n\tprintf(\"%d\\n\",f[n][0]);\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\nint a[200010],st[200010];\nlong long num[200010];\nint main()\n{\n\tint n,top=0;long long sum=0;scanf(\"%d\",&n);\n\tfor (int i=1;i<=n;i++)\n\t{\n\t\tchar ch='+';if (i!=1) scanf(\" %c\",&ch);\n\t\tscanf(\"%d\",&a[i]);\n\t\tsum+=a[i];\n\t\tif (ch=='-') st[++top]=a[i];else num[top]+=a[i];\n\t}\n\tlong long ans=(top)?(-1e18):sum;\n\tfor (int i=1;i<=top;i++)\n\t{\n\t\tans=max(ans,sum-2*(st[i]+num[i]));\n\t\tsum-=2*st[i];\n\t}\n\tprintf(\"%lld\\n\",ans);\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define N 100005\n#define LL long long\n#define INF (1LL<<60)\nusing namespace std;\nint n,m; LL a[N],b[N],sum,ans=-INF;\nint main()\n{\n\tint i,x; char op;\n\tscanf(\"%d\",&n);\n\tfor(i=1;i<=n;i++){\n\t\tif(i==1) op='+'; else scanf(\"%c\",&op);\n\t\tscanf(\"%d \",&x),sum+=x;\n\t\tif(op=='-') a[++m]=x; else b[m]+=x;\n\t  }\n\tif(!m) ans=sum;\n\tfor(i=1;i<=m;i++){\n\t\tans=max(ans,sum-2*(a[i]+b[i]));\n\t\tsum-=2*a[i];\n\t  }\n\tcout<<max(ans,sum);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\n#define For(i, l, r) for(register int i = (l), i##end = (int)(r); i <= i##end; ++i)\n#define Fordown(i, r, l) for(register int i = (r), i##end = (int)(l); i >= i##end; --i)\n#define Set(a, v) memset(a, v, sizeof(a))\n#define Cpy(a, b) memcpy(a, b, sizeof(a))\n#define debug(x) cout << #x << \": \" << (x) << endl\n#define DEBUG(...) fprintf(stderr, __VA_ARGS__)\n\nusing namespace std;\n\ntemplate<typename T> inline bool chkmin(T &a, T b) { return b < a ? a = b, 1 : 0; }\ntemplate<typename T> inline bool chkmax(T &a, T b) { return b > a ? a = b, 1 : 0; }\n\ninline int read() {\n    int x(0), sgn(1); char ch(getchar());\n    for (; !isdigit(ch); ch = getchar()) if (ch == '-') sgn = -1;\n    for (; isdigit(ch); ch = getchar()) x = (x * 10) + (ch ^ 48);\n    return x * sgn;\n}\n\ninline char read_opt() {\n\tchar ch(getchar());\n\tfor (; ch != '+' && ch != '-'; ch = getchar());\n\treturn ch;\n}\n\nvoid File() {\n#ifdef zjp_shadow\n\tfreopen (\"E.in\", \"r\", stdin);\n\tfreopen (\"E.out\", \"w\", stdout);\n#endif\n}\n\nconst int N = 1e5 + 1e3;\nconst long long inf = 1e15;\n\nlong long f[N][3];\n\nint main () {\n\n\tFile();\n\n\tint n = read();\n\tf[1][0] = read(); f[1][1] = f[1][2] = - inf;\n\n\tFor (i, 2, n) {\n\t\tchar opt = read_opt(); int x = read();\n\t\tif (opt == '+') {\n\t\t\tf[i][0] = max(f[i - 1][0], f[i - 1][1]) + x;\n\t\t\tf[i][1] = f[i - 1][1] - x;\n\t\t\tf[i][2] = f[i - 1][2] + x;\n\t\t} else {\n\t\t\tf[i][0] = - inf;\n\t\t\tf[i][1] = max(f[i - 1][0], f[i - 1][1]) - x;\n\t\t\tf[i][2] = max(f[i - 1][1], f[i - 1][2]) + x;\n\t\t}\n\t}\n\tprintf (\"%lld\\n\", max({f[n][0], f[n][1], f[n][2]}));\n\n\treturn 0;\n\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<cstring>\n#include<algorithm>\n#define SF scanf\n#define PF printf\n#define MAXN 100010\n#define INF 0x3FFFFFFF\nusing namespace std;\ntypedef long long ll;\nint n;\nint a[MAXN];\nbool flag[MAXN];\nchar s[20];\nll pre[MAXN];\nll sum,ans=-INF;\nint main(){\n\tSF(\"%d\",&n);\n\tflag[1]=0;\n\tSF(\"%d\",&a[1]);\n\tfor(int i=2;i<=n;i++){\n\t\tSF(\"%s\",s);\n\t\tif(s[0]=='-')\n\t\t\tflag[i]=1;\n\t\tSF(\"%d\",&a[i]);\n\t}\n\tfor(int i=n;i>=1;i--)\n\t\tpre[i]=pre[i+1]+a[i];\n\tint las=1;\n\twhile(flag[las]==0&&las<=n){\n\t\tsum+=a[las];\n\t\tlas++;\n\t}\n\twhile(las<=n){\n\t\tint las1=las+1;\n\t\tll sum1=0;\n\t\twhile(flag[las1]==0&&las1<=n){\n\t\t\tsum1+=a[las1];\n\t\t\tlas1++;\n\t\t}\n\t\tif(las1<=n)\n\t\t\tans=max(ans,sum-sum1-a[las]+pre[las1]);\n\t\tlas=las1;\n\t\tsum-=a[las];\n\t\tsum+=sum1;\n\t}\n\tans=max(ans,sum);\n\tPF(\"%lld\",ans);\n}\t"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef pair<ll, ll> P;\n\n#define fi first\n#define se second\n#define repl(i,a,b) for(ll i=(ll)(a);i<(ll)(b);i++)\n#define rep(i,n) repl(i,0,n)\n#define all(x) (x).begin(),(x).end()\n#define dbg(x) cout<<#x\"=\"<<x<<endl\n#define mmax(x,y) (x>y?x:y)\n#define mmin(x,y) (x<y?x:y)\n#define maxch(x,y) x=mmax(x,y)\n#define minch(x,y) x=mmin(x,y)\n#define uni(x) x.erase(unique(all(x)),x.end())\n#define exist(x,y) (find(all(x),y)!=x.end())\n#define bcnt __builtin_popcount\n\n#define INF 9e18\n#define mod 1000000007\n\nll n;\nll st;\nll dp[3];\n\nint main(){\n  cin>>n>>st;\n  dp[0]=st;dp[1]=-INF;dp[2]=-INF;\n  rep(i,n-1){\n    char c;\n    ll a;\n    cin>>c>>a;\n    ll nxt[3];\n    nxt[0]=nxt[1]=nxt[2]=-INF;\n    if(c=='+'){\n      maxch(nxt[0],dp[0]+a);\n\n      maxch(nxt[1],dp[1]-a);\n      maxch(nxt[0],dp[1]+a);\n\n      maxch(nxt[2],dp[2]+a);\n      maxch(nxt[1],dp[2]+a);\n      maxch(nxt[0],dp[2]+a);\n    }else{\n      maxch(nxt[0],dp[0]-a);\n      maxch(nxt[1],dp[0]-a);\n\n      maxch(nxt[1],dp[1]+a);\n      maxch(nxt[0],dp[1]-a);\n      maxch(nxt[2],dp[1]+a);\n\n      maxch(nxt[2],dp[2]-a);\n      maxch(nxt[1],dp[2]+a);\n      maxch(nxt[0],dp[2]+a);\n    }\n    dp[0]=nxt[0]; dp[1]=nxt[1]; dp[2]=nxt[2];\n  }\n  cout<<*max_element(dp,dp+3)<<endl;\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\nint n;\nlong long a[100005],s[100005],cc[100005],ans;\nint main()\n{\n\tcin>>n>>a[1];s[1]=cc[1]=a[1];\n\tfor(int i=2;i<=n;i++)\n\t{\n\t\tchar c;\n\t\tcin>>c>>a[i];\n\t\tcc[i]=cc[i-1]+a[i];\n\t\tif(c=='-')a[i]*=-1;\n\t\ts[i]=s[i-1]+a[i];\n\t}\n\tans=s[n];\n\tfor(int i=2;i<=n;i++)if(a[i]<0)\n\t{\n\t\tint tt=a[i]*2;\n\t\tfor(int j=i+1;j<=n&&a[j]>0;j++)tt-=a[j]*2;\n\t\tans=max(ans,s[i-1]+tt+cc[n]-cc[i-1]);\n\t}\n\tcout<<ans<<endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\ntypedef long long LL;\nconst int MaxN = 100003;\nint n,a[MaxN];\nLL sum[MaxN],asum[MaxN],dp[MaxN];\nint main() {\n    scanf(\"%d%d\",&n,a+1);\n    for (int i=2;i<=n;++i) {\n        char ch;\n        scanf(\" %c %d\",&ch,a+i);\n        if (ch=='-') a[i]*=-1;\n    }\n    for (int i=n,j=0;i>=1;--i) {\n        sum[i]=sum[i+1]+a[i];\n        asum[i]=asum[i+1]+abs(a[i]);\n        dp[i]=0x8000'0000'0000'0000LL;\n        if (a[i]<0) {\n            if (j) dp[i]=-sum[i+1]+sum[j]+asum[j]+a[i];\n            j=i;\n        }\n        dp[i]=max(dp[i],dp[i+1]+a[i]);\n    }\n    printf(\"%lld\\n\",dp[1]);\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <iostream>\n#include <algorithm>\n#include <string>\n#include <cstring>\n#include <vector>\n#include <queue>\n#include <set>\n#include <map>\n#include <cmath>\n#include <iomanip>\nusing namespace std;\n\ntypedef pair<int, int> P;\n#define rep(i, n) for (int i=0; i<(n); i++)\n#define all(c) (c).begin(), (c).end()\n#define uniq(c) c.erase(unique(all(c)), (c).end())\n#define _1 first\n#define _2 second\n#define pb push_back\n#define INF (1LL<<60)\n#define MOD 1000000007\n\nint N;\nint A[100000];\nbool sign[100000];\n\nlong long dp[100000][3];\n\nsigned main() {\n  ios::sync_with_stdio(false); cin.tie(0);\n  cin >> N;\n  rep(i, N) {\n    if (i > 0) {\n      char c;\n      cin >> c;\n      sign[i] = c == '-';\n    }\n    cin >> A[i];\n  }\n\n  rep(i, N) {\n    rep(j, 3) dp[i][j] = -INF;\n  }\n  dp[0][0] = 0;\n  rep(i, N) {\n    rep(d, 3) {\n      if (dp[i][d] == -INF) continue;\n      int nd = d;\n      if (sign[i]) {\n        nd++;\n        if (nd == 3) nd = 1;\n      }\n      int b = (nd % 2 == 0) ? 1 : -1;\n      dp[i+1][nd] = max(dp[i+1][nd], dp[i][d] + 1LL*b*A[i]);\n    }\n\n    dp[i+1][1] = max(dp[i+1][1], dp[i+1][2]);\n    dp[i+1][0] = max(dp[i+1][0], dp[i+1][1]);\n  }\n  cout << dp[N][0] << \"\\n\";\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\ntypedef long double ld;\ntypedef pair<int, int> pii;\nconst int oo = 1e9;\nconst int MOD = 1000000007;\nconst int BASE = 26;\nconst int N = 200001;\n#define pb push_back\n#define mp make_pair\n#define x first\n#define y second\n\nint n,a[N];\nll pre[N],sn[N];\nchar op[N],tmp[10];\n\nint main() {\n\tscanf(\"%d\",&n);\n\tscanf(\"%d\",&a[1]);\n\tpre[1] = sn[1] = a[1];\n\tfor(int i = 2; i <= n ; ++i){\n\t\tscanf(\"%s%d\",tmp,&a[i]);\n\t\top[i] = tmp[0];\n\t\tpre[i] = a[i] + pre[i-1];\n\t\tsn[i] = (tmp[0]=='-'?-1:1)*a[i]+sn[i-1];\n\t\t\n\t}\n\tll mx = sn[n];\n\tint last = -1;\n\tfor(int i = n; i >= 1 ; --i){\n\t\tif(op[i]=='-'){\n\t\t\tif(last != -1){\n\t\t\t\tmx = max(mx,sn[i-1]-(pre[last-1]-pre[i-1])+(pre[n]-pre[last-1]));\n\t\t\t}\n\t\t\tlast = i;\n\t\t}\n\t}\n\tcout << mx << endl;\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\nusing lint = long long int;\n\nint N;\n\nint main()\n{\n    cin >> N;\n    char c;\n    lint sum, now, msum = 0;\n    cin >> sum;\n    lint tmp = 0;\n    vector<lint> mlst;\n    for (int i=1; i<N; i++)\n    {\n        cin >> c >> now;\n        sum += now;\n        if (c == '-') {\n            mlst.push_back(tmp);\n            msum += now;\n            tmp = msum;\n        }\n        else {\n            tmp += now;\n        }\n    }\n    if (!mlst.empty()) mlst[0] = -1; else mlst.push_back(-1);\n    mlst.push_back(msum);\n    sort(mlst.begin(), mlst.end());\n    cout << sum - mlst[1] * 2 << endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\nint main(){\n\tint n; cin >> n;\n\tvector<long long> vals(n);\n\tconst long long inf = 1ll<<60;\n\tconst int magic = 4;\n\tvector<vector<long long> > f(magic + 1, vector<long long>(n + 1, -inf));\n\tvector<char> sig(n + 1, '+');\n\tcin >> vals[0];\n\tfor(int i = 1; i < n; i++){\n\t\tcin >> sig[i] >> vals[i];\n\t}\n\tf[0][0] = 0;\n\tfor(int i = 0; i < n; i++){\n\t\tfor(int j = 0; j < magic; j++){\n\t\t\tint csig = j%2 == 0?1:-1;\n\t\t\tif(sig[i] == '-'){\n\t\t\t\tf[j][i+1] = max(f[j][i+1], f[j][i] - csig * vals[i]);\n\t\t\t\tif(j) f[j-1][i+1] = max(f[j-1][i+1], f[j][i] - csig * vals[i]);\n\t\t\t\tf[j+1][i+1] = max(f[j+1][i+1], f[j][i] - csig * vals[i]);\n\t\t\t} else {\n\t\t\t\tf[j][i+1] = max(f[j][i+1], f[j][i] + csig * vals[i]);\n\t\t\t\tif(j) f[j-1][i+1] = max(f[j-1][i+1], f[j][i] + csig * vals[i]);\n\t\t\t}\n\t\t}\n\t}\n\tcout << f[0][n] << endl;\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define fi first\n#define se second\n#define pb push_back\n#define all(x) (x).begin() , (x).end()\n#define rall(x) (x).rbegin() , (x).rend()\n#define len(x) (int)(x).size()\n\ntypedef long long ll;\ntypedef long double ld;\n\nusing namespace std;\n\nsigned main(){\n    ios_base::sync_with_stdio(0) , cin.tie(0) , cout.tie(0);\n    int n;cin >> n;\n    int x;cin >> x;\n    ll sum = x, sum1 = 0;\n    ll pref = -1;\n    bool done = 0;\n    for(int i = 1; i <n ; ++i){\n        char ch;cin >> ch >> x;\n        if(ch == '-'){\n            if(pref == -1)\n                pref = sum;\n            else if(!done){\n                done = 1;\n                sum1 = sum - pref;\n            }\n        }\n        sum += x;\n    }\n    cout << sum - 2 * sum1;\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <cmath>\nusing namespace std;\nconst int N = 1e+5+2;\nlong long array[N][3] = {0};\n\nusing P  = pair<char,int>;\nlong long solve(vector<P>& inputs) {\n\tint n = inputs.size();\n\tlong long (*dp)[3] = array+1;\n\tdp[-1][1] = -1e+9;\n\tdp[-1][2] = -1e+9;\n\n\tfor(int i = 0; i < n; i++) {\n\t\tauto pair = inputs[i];\n\n\t\tif(pair.first == '+'){\n\t\t\tfor(int j = 0; j < 3; j++){\n\t\t\t\tdp[i][j] = dp[i-1][j] + pow(-1,j)*pair.second;\n\t\t\t}\n\t\t}else{\n\t\t\tdp[i][0] = max(dp[i-1][0] - pair.second,dp[i-1][1] - pair.second);\n\t\t\tdp[i][1] = max(dp[i-1][0] - pair.second, max(dp[i-1][1] - pair.second, dp[i-1][2] + pair.second));\n\t\t\tdp[i][2] = max(dp[i-1][1] + pair.second, dp[i-1][2] + pair.second);\n\t\t}\n// \t\tcout << dp[i][0] << \" \" << dp[i][1] << \" \" << dp[i][2] << endl;\n\t}\n\n\treturn max(dp[n-1][0], max(dp[n-1][1],dp[n-1][2]));\n}\n\nint main() {\n\tvector<P> inputs;\n\n\tint n;\n\tcin >> n;\n\n\tint first;\n\tcin >> first;\n\tinputs.push_back(P('+',first));\n\n\tfor(int i = 0; i < n-1; i++) {\n\t\tchar op;\n\t\tint m;\n\t\tcin >> op >> m;\n\t\tinputs.push_back(P(op,m));\n\t}\n\n// \tfor( auto pair: inputs)\n// \t\tcout << pair.first << \":\" << pair.second << endl;\n\tcout << solve(inputs) << endl;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <assert.h>\n#include <iostream>\n#include <cstring>\n#include <vector>\n#include <cstdio>\n#include <cmath>\n\nusing namespace std;\n\ntypedef long long ll;\n\nconst int MX = 100005;\n\ntemplate <typename T> void read(T &x)\n{\n\tx = 0; char c = getchar(); bool f = 0;\n\twhile(!isdigit(c) && c!='-') c = getchar();\n\tif(c == '-') f = 1, c = getchar();\n\twhile(isdigit(c)) x = x*10+c-'0', c = getchar();\n\tif(f) x = -x;\n}\n\ntemplate <typename T> T max(const T &x, const T &y, const T &z)\n{\n\treturn max(max(x, y), z);\n}\n\nint n;\nint opr[MX], seq[MX];\nll f[MX][3];\n\nint main()\n{\n\tread(n);\n\topr[1] = +1;\n\tfor(int i=1; i<=n; i++)\n\t{\n\t\tread(seq[i]);\n\t\tif(i != n)\n\t\t{\n\t\t\tchar c = getchar();\n\t\t\twhile(c!='+' && c!='-') c = getchar();\n\t\t\tif(c == '+') opr[i+1] = +1;\n\t\t\telse opr[i+1] = -1;\n\t\t}\n\t}\n\tf[0][1] = f[0][2] = -1e18;\n\tfor(int i=1; i<=n; i++)\n\t{\n\t\tif(opr[i] == +1)\n\t\t{\n\t\t\tf[i][0] = max(f[i-1][0]+seq[i], f[i-1][1]+seq[i], f[i-1][2] + seq[i]);\n\t\t\tf[i][1] = max(f[i-1][1]-seq[i], f[i-1][2]-seq[i]);\n\t\t\tf[i][2] = f[i-1][2]+seq[i];\n\t\t}\n\t\telse\n\t\t{\n\t\t\tf[i][0] = -1e18;\n\t\t\tf[i][1] = max(f[i-1][0]-seq[i], f[i-1][1]-seq[i], f[i-1][2]-seq[i]);\n\t\t\tf[i][2] = max(f[i-1][1]+seq[i], f[i-1][2]+seq[i]);\n\t\t}\n\t\t//cout<<i<<\" : \"<<f[i][0]<<\" \"<<f[i][1]<<\" \"<<f[i][2]<<endl;\n\t}\n\tprintf(\"%lld\\n\", max(f[n][0], f[n][1], f[n][2]));\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\nusing lint     = long long;\nconst lint inf = 1LL << 60;\nconst lint mod = 1000000007;\n\ntemplate <class T>\nbool chmax(T &a, const T &b) {\n    return (a < b) ? (a = b, 1) : 0;\n}\n\nint main() {\n    cin.tie(nullptr);\n    ios::sync_with_stdio(false);\n    int n;\n    cin >> n;\n    vector<lint> a(n);\n    vector<int> op(n, 1);\n    cin >> a[0];\n    for (int i = 1; i < n; ++i) {\n        char o;\n        cin >> o >> a[i];\n        if (o == '-')\n            op[i] = -1;\n    }\n    vector<vector<lint>> dp(n + 1, vector<lint>(4, -inf));\n    dp[0][0] = 0;\n    for (int i = 1; i <= n; ++i) {\n        for (int j = 0; j < 4; ++j) {\n            if (op[i - 1] == 1) {\n                for (int k = j; k < 4; ++k) {\n                    chmax(dp[i][j], dp[i - 1][k] + a[i - 1] * (j % 2 == 0 ? 1 : -1));\n                }\n            } else if (op[i - 1] == -1) {\n                if (j ==0)\n                    continue;\n                for (int k = max(0, j - 1); k < 4; ++k) {\n                    chmax(dp[i][j], dp[i - 1][k] + a[i - 1] * (j % 2 == 0 ? 1 : -1));\n                }\n            }\n        }\n    }\n    cout << *max_element(dp[n].begin(), dp[n].end()) << \"\\n\";\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<cstring>\n#include<algorithm>\n\nusing namespace std;\ntypedef long long ll;\nconst int N=100100;\nint n;ll a[N],f[2][N];\nchar s[N];ll op[N];\n\nll cg(int x){return (x&1)?-1:1;}\nint main(){\n\tscanf(\"%d\",&n);op[1]=1;\n\tfor (int i=1;i<n;i++){\n\t\tscanf(\"%d%s\",a+i,s);\n\t\tif (s[0]=='-')\n\t\t\top[i+1]=-1; else op[i+1]=1;\n\t}\n\tscanf(\"%d\",&a[n]);\n\tf[0][1]=a[1];f[1][1]=f[2][1]=-1e18;\n\tfor (int i=2;i<=n;i++){\n\t\tfor (int j=0;j<=2;j++) f[j][i]=-1e18;\n\t\tfor (int j=0;j<=2;j++)\n\t\t\tfor (int k=0;k<=j;k++)\n\t\t\t\tf[k][i]=max(f[k][i],f[j][i-1]+op[i]*a[i]*cg(k));\n\t\tif (op[i]==-1){\n\t\t\tfor (int j=2;j;j--)\n\t\t\t\tf[j][i]=max(f[j][i],f[j-1][i]);\n\t\t}\n\t}\n\tprintf(\"%lld\\n\",max(max(f[0][n],f[1][n]),f[2][n]));\n}"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<algorithm>\n#define maxn 100005\n#define LL long long\n#define INF (LL)(1e16)\nusing namespace std;\nint n,a[maxn],f[maxn];\nLL sum,ans=-INF,pre[maxn];\nint main()\n{\n\tscanf(\"%d%d\",&n,&a[1]);\n\tfor(int i=2;i<=n;i++)\n\t{\n\t\tchar s[5];\n\t\tscanf(\"%s\",s);\n\t\tif(s[0]=='-') f[i]=1;\n\t\tscanf(\"%d\",&a[i]);\n\t}\n\tfor(int i=n;i>0;i--) pre[i]=pre[i+1]+a[i];\n\tint la=1;\n\twhile(la<=n&&!f[la]) sum+=1ll*a[la++];\n\twhile(la<=n)\n\t{\n\t\tint la1=la+1; LL sum1=0;\n\t\twhile(la1<=n&&!f[la1]) sum1+=1ll*a[la1++];\n\t\tif(la1<=n) ans=max(ans,sum-sum1-a[la]+pre[la1]);\n\t\tsum+=sum1-a[la]; la=la1; \n\t}\n\tans=max(ans,sum);\n\tprintf(\"%lld\\n\",ans);\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define pa pair<int,int>\n#define CLR(a,x) memset(a,x,sizeof(a))\n#define MP make_pair\n#define fi first\n#define se second\nusing namespace std;\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef unsigned int ui;\ntypedef long double ld;\nconst int maxn=1e5+10;\n\ninline char gc(){\n\treturn getchar();\n\tstatic const int maxs=1<<16;static char buf[maxs],*p1=buf,*p2=buf;\n    return p1==p2&&(p2=(p1=buf)+fread(buf,1,maxs,stdin),p1==p2)?EOF:*p1++;\n}\ninline ll rd(){\n    ll x=0;char c=gc();bool neg=0;\n    while(c<'0'||c>'9'){if(c=='-') neg=1;c=gc();}\n    while(c>='0'&&c<='9') x=(x<<1)+(x<<3)+c-'0',c=gc();\n    return neg?(~x+1):x;\n}\n\nint N,a[maxn],op[maxn];\nll f[maxn][3];\n\ninline void upd(ll &a,ll b){a=max(a,b);}\n\nint main(){\n    //freopen(\"\",\"r\",stdin);\n    N=rd();\n    a[1]=rd();op[1]=1;\n    for(int i=2;i<=N;i++){\n        char s[5];scanf(\"%s\",s);\n        op[i]=(s[0]=='+')?1:-1;\n        a[i]=rd();\n    }\n    CLR(f,-127);f[0][0]=0;\n    for(int i=1;i<=N;i++){\n        upd(f[i][0],f[i-1][0]+op[i]*a[i]),upd(f[i][0],f[i-1][1]-op[i]*a[i]),upd(f[i][0],f[i-1][2]+op[i]*a[i]);\n        upd(f[i][1],f[i-1][2]+op[i]*a[i]);\n        if(op[i]==-1){\n            upd(f[i][1],f[i-1][0]+op[i]*a[i]);\n            upd(f[i][2],f[i-1][1]-op[i]*a[i]);\n        }\n        upd(f[i][1],f[i-1][1]-op[i]*a[i]);\n        upd(f[i][2],f[i-1][2]+op[i]*a[i]);\n        // printf(\"~%d %d %d %d\\n\",i,f[i][0],f[i][1],f[i][2]);\n    }\n    printf(\"%lld\\n\",f[N][0]);\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n#define maxn 100010\ntemplate <typename T>inline T read()\n{\n    register T sum=0;\n    register char cc=getchar();\n    int sym=1;\n    while(cc!='-'&&(cc>'9'||cc<'0'))cc=getchar();\n    if(cc=='-')sym=-1,cc=getchar();\n    sum=sum*10+cc-'0';\n    cc=getchar();\n    while(cc>='0'&&cc<='9')sum=sum*10+cc-'0',cc=getchar();\n    return sym*sum;\n}\ntemplate <typename T>inline T read(T &a)\n{\n    a=read<T>();\n    return a;\n}\ntemplate <typename T,typename... Others> inline void read(T& a, Others&... b)\n{\n    a=read(a);\n\tread(b...);\n}\nint n,l=1,r,a[maxn],flg[maxn];\nlong long ans=1e18,f[maxn],g[maxn];\nint main()\n{\n\tread(n);\n\tflg[1]=1;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tread(a[i]);\n\t\tif(i<n)\n\t\t{\n\t\t\tchar cc;\n\t\t\tscanf(\"%s\",&cc);\n\t\t\tif(cc=='-')\n\t\t\t\tflg[i+1]=-1;\n\t\t\telse\n\t\t\t\tflg[i+1]=1;\n\t\t}\n\t}\n\tfor(int i=1;i<=n;i++)\n\t\tf[i]=f[i-1]+flg[i]*a[i];\n\tfor(int i=n;i>=1;i--)\n\t\tg[i]=g[i+1]+a[i];\n\twhile(l<=n&&flg[l]==1)\n\t\tl+=1;\n\tfor(;l<=n;l=r+1)\n\t{\n\t\tlong long s=a[l];\n\t\tr=l;\n\t\twhile(r<n&&flg[r+1]==1)\n\t\t{\n\t\t\tr+=1;\n\t\t\ts+=a[r];\n\t\t}\n\t\tans=max(ans,f[l-1]+g[r+1]-s);\n\t}\n\tprintf(\"%lld\\n\",ans);\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#include <cstdio>\n#include <map>\n#include <numeric>\n#include <cmath>\n#include <set>\n#include <sstream>\n#include <string>\n#include <vector>\n#include <queue>\n#include <stack>\n#include <complex>\n#include <string.h>\n#include <unordered_set>\n#include <unordered_map>\n#include <bitset>\n#include <iomanip>\n#include <sys/time.h>\n#include <random>\nusing namespace std;\n\n#define endl '\\n'\n#define ALL(v) (v).begin(), (v).end()\n#define RALL(v) (v).rbegin(), (v).rend()\n#define UNIQ(v) (v).erase(unique((v).begin(), (v).end()), (v).end())\n\ntypedef long long ll;\ntypedef long double ld;\ntypedef pair<int, int> P;\ntypedef complex<double> comp;\ntypedef vector< vector<ld> > matrix;\nstruct pairhash {\npublic:\n    template<typename T, typename U>\n    size_t operator()(const pair<T, U> &x) const {\n\tsize_t seed = hash<T>()(x.first);\n\treturn hash<U>()(x.second) + 0x9e3779b9 + (seed<<6) + (seed>>2);\n    }\n};\nconst int inf = 1e9 + 9;\nconst ll mod = 1e9 + 7;\nconst double eps = 1e-8;\nconst double pi = acos(-1);\n\nint n;\nll a[100100];\nchar op[100100];\nll dp[100100][3];\n\nll solve() {\n    dp[0][0] = a[0];\n    dp[0][1] = dp[0][2] = -1e18;\n    for (int i = 1; i < n; i++) {\n        for (int j = 0; j <= 2; j++) {\n            ll s = (op[i]=='+'?1:-1)*(j%2?-1:1)*a[i];\n            dp[i][j] = dp[i-1][j] + s;\n            if (j < 2) dp[i][j] = max(dp[i][j], dp[i-1][j+1] + s);\n            if (j < 1) dp[i][j] = max(dp[i][j], dp[i-1][j+2] + s);\n        }\n        for (int j = 2; j > 0; j--) {\n            if (op[i] == '-' && j > 0) {\n                dp[i][j] = max(dp[i][j], dp[i][j-1]);\n            }\n        }\n    }\n    return max(dp[n-1][0], max(dp[n-1][1], dp[n-1][2]));\n}\n\nvoid input() {\n    cin >> n;\n    cin >> a[0];\n    for (int i = 1; i < n; i++) cin >> op[i] >> a[i];\n}\n\nint main() {\n    ios::sync_with_stdio(false);\n    cin.tie(0);\n    cout << fixed << setprecision(15);\n\n    input();\n    cout << solve() << endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n#define rep(i,x,y) for(int i=(x);i<(y);++i)\n#define debug(x) #x << \"=\" << (x)\n\n#ifdef DEBUG\n#define _GLIBCXX_DEBUG\n#define print(x) std::cerr << debug(x) << \" (L:\" << __LINE__ << \")\" << std::endl\n#else\n#define print(x)\n#endif\n\nconst int inf=1e9;\nconst int64_t inf64=1e18;\nconst double eps=1e-9;\n\ntemplate <typename T> ostream &operator<<(ostream &os, const vector<T> &vec){\n    os << \"[\";\n    for (const auto &v : vec) {\n    \tos << v << \",\";\n    }\n    os << \"]\";\n    return os;\n}\n\nusing i64=int64_t;\n\nvoid solve(){\n    int N;\n    cin >> N;\n    vector<i64> A(N);\n    vector<char> op(N);\n    op[0]='+';\n    cin >> A[0];\n    rep(i,1,N) cin >> op[i] >> A[i];\n\n    static i64 memo[100001][3];\n    static bool done[100001][3];\n    fill_n((i64*)memo,100001*3,-inf64);\n    fill_n((bool*)done,100001*3,false);\n    function<i64(int,int)> rec=[&](int i,int j){\n        auto &res=memo[i][j];\n        if(done[i][j]) return res;\n        done[i][j]=true;\n        if(i==N) return res=0;\n        int s=op[i]=='-';\n        rep(j_,0,j+1){\n            res=max(res,((j_+s)%2==0?1:-1)*A[i]+rec(i+1,j_));\n            if(s) res=max(res,((j_+s)%2==0?1:-1)*A[i]+rec(i+1,(j_+1==3?1:j_+1)));\n        }\n        return res;\n    };\n    cout << rec(0,0) << endl;\n}\n\nint main(){\n    std::cin.tie(0);\n    std::ios::sync_with_stdio(false);\n    cout.setf(ios::fixed);\n    cout.precision(10);\n    solve();\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define LL long long\n\nusing namespace std;\nconst int N=1e5+10;\nint rd()\n{\n    int x=0,w=1;char ch=0;\n    while(ch<'0'||ch>'9'){if(ch=='-') w=-1;ch=getchar();}\n    while(ch>='0'&&ch<='9'){x=x*10+(ch^48);ch=getchar();}\n    return x*w;\n}\nLL n,a[N],z[N],f[N][3];\nchar cc[2];\n\nint main()\n{\n\tn=rd(),z[1]=1,a[1]=rd();\n\tfor(int i=2;i<=n;++i) scanf(\"%s\",cc),z[i]=cc[0]=='-'?-1:1,a[i]=rd();\n\tmemset(f,-0x3f3f3f,sizeof(f));\n\tf[1][0]=a[1];\n\tfor(int i=2;i<=n;++i)\n\t{\n\t\tf[i][0]=max(f[i][0],f[i-1][0]+z[i]*a[i]);\n\t\tf[i][0]=max(f[i][0],f[i-1][1]-z[i]*a[i]);\n\t\tf[i][1]=max(f[i][1],f[i-1][1]-z[i]*a[i]);\n\t\tf[i][0]=max(f[i][0],f[i-1][2]+z[i]*a[i]);\n\t\tf[i][1]=max(f[i][1],f[i-1][2]+z[i]*a[i]);\n\t\tf[i][2]=max(f[i][2],f[i-1][2]+z[i]*a[i]);\n\t\tif(z[i]<0)\n\t\t{\n\t\t\tf[i][1]=max(f[i][1],f[i-1][0]+z[i]*a[i]);\n\t\t\tf[i][2]=max(f[i][2],f[i-1][1]-z[i]*a[i]);\n\t\t}\n\t}\n\tprintf(\"%lld\\n\",f[n][0]);\n    return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <iostream>\n#include <cstring>\n#define oo 1e17\n#define N 100005\n#define ll long long\n#define F(i,j,k) for(int i=(j);i<=(k);++i)\n#define D(i,j,k) for(int i=(j);i>=(k);--i)\nusing namespace std;\nchar op[N];\nint n,mx;\nll a[N],ans,dp[N][3];\nint main(){\n\t//freopen(\"txt.in\",\"r\",stdin);freopen(\"txt.out\",\"w\",stdout);\n\tscanf(\"%d\\n\",&n);\n\tscanf(\"%lld \",&a[0]);F(i,1,n-1)scanf(\"%c %lld \",&op[i],&a[i]);\n\tans=-oo;\n\tmemset(dp,-0x7f,sizeof(dp));\n\tdp[0][0]=0;\n\t//F(i,0,n-1)printf(\"%d %lld %lld %lld\\n\",i,dp[i][0],dp[i][1],dp[i][2]);\n\tF(i,1,n-1){\n\t\tif(op[i]=='+'){\n\t\t\tdp[i][2]=dp[i-1][2]+a[i];\n\t\t\tdp[i][1]=max(dp[i-1][1]-a[i],dp[i][2]);\n\t\t\tdp[i][0]=max(dp[i-1][0]+a[i],dp[i][1]);\n\t\t}\n\t\telse{\n\t\t\tdp[i][2]=max(dp[i-1][2]-a[i],dp[i-1][1]+a[i]);\n\t\t\t//printf(\"%d %lld %lld %lld\\n\",i,dp[i-1][2]-a[i],dp[i-1][1]+a[i],dp[i][2]);\n\t\t\tdp[i][1]=max(max(dp[i-1][1]+a[i],dp[i-1][0]-a[i]),dp[i][2]);\n\t\t\tdp[i][0]=max(dp[i-1][0]-a[i],dp[i][1]);\n\t\t}\n\t\t//printf(\"%d %lld %lld %lld\\n\",i,dp[i][0],dp[i][1],dp[i][2]);\n\t}\n\tans=max(max(dp[n-1][0],dp[n-1][1]),dp[n-1][2]);\n\tprintf(\"%lld\\n\",ans+a[0]);\n\treturn 0;\n} "
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\nusing Int = long long;\n\ntemplate<typename T> void chmin(T &a,T b){if(a>b) a=b;}\ntemplate<typename T> void chmax(T &a,T b){if(a<b) a=b;}\n\nconst Int MAX = 214514;\nconst Int INF = 1145141919810893;\nInt dp[2][2][MAX];\nsigned main(){\n  Int n;\n  cin>>n;\n  vector<Int> a(n);\n  vector<char> b(n-1);\n  for(Int i=0;i<n*2-1;i++){\n    if(i&1) cin>>b[i/2];\n    else cin>>a[i/2];\n  }\n  for(Int i=0;i<2;i++)\n    for(Int j=0;j<2;j++)\n      for(Int k=0;k<MAX;k++)\n\tdp[i][j][k]=-INF;\n  \n  Int sgn[]={1,-1};\n  dp[0][1][0]=0;\n  for(Int i=0;i<2*n-1;i++){\n    Int x=i>>1;\n    if(i&1){\n      if(b[x]=='+'){\n\tfor(Int j=0;j<2;j++)\n\t  for(Int k=0;k<2;k++)\n\t    chmax(dp[j][k][i+1],dp[j][k][i]);\n      }else{\n\tfor(Int j=0;j<2;j++)\n\t  for(Int k=0;k<2;k++)\n\t    chmax(dp[!j][0][i+1],dp[j][k][i]);\t\n      }\n    }else{\n      for(Int j=0;j<2;j++){\n\tchmax(dp[j][0][i+1],dp[j][0][i]+sgn[j]*a[x]);\n\tchmax(dp[!j][1][i+1],dp[j][0][i]+sgn[j]*a[x]);\n\tchmax(dp[j][1][i+1],dp[j][1][i]+sgn[j]*a[x]);\n      } \n    }\n  }\n\n  Int ans=-INF;\n  for(Int i=0;i<2;i++)\n    for(Int j=0;j<2;j++)\n      chmax(ans,dp[i][j][2*n-1]);\n  cout<<ans<<endl;\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\nusing ll = long long;\nconst int N = 1e5 + 5;\nconst ll oo = 1e18;\n\nint n, a[N], opt[N];\nll f[N][3];\n\nint main() {\n  ios::sync_with_stdio(false); cin.tie(0); cout.tie(0);\n  cin >> n;\n  opt[1] = 1; cin >> a[1];\n  for (int i = 2; i <= n; ++i) {\n    char c;\n    cin >> c >> a[i];\n    opt[i] = (c == '+') ? 1 : -1;\n  }\n  f[0][1] = f[0][2] = -oo;\n  for (int i = 1; i <= n; ++i) {\n    f[i][0] = *max_element(f[i - 1], f[i - 1] + 3) + 1LL * opt[i] * a[i];\n    f[i][1] = max(f[i - 1][1], f[i - 1][2]) - 1LL * opt[i] * a[i];\n    f[i][2] = f[i - 1][2] + 1LL * opt[i] * a[i];\n    if (opt[i] == -1) {\n      f[i][2] = max(f[i][2], f[i][1]);\n      f[i][1] = max(f[i][1], f[i][0]);\n    }\n  }\n  cout << *max_element(f[n], f[n] + 3);\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define loop(n) for (int ngtkana_is_genius = 0; ngtkana_is_genius < int(n); ngtkana_is_genius++)\n#define rep(i, begin, end) for(int i = int(begin); i < int(end); i++)\n#define all(v) v.begin(), v.end()\n#define rand(l, r) std::uniform_int_distribution<>(l, r)(mt)\n#define lint long long\nauto cmn = [](auto& a, auto b){if (a > b) {a = b; return true;} return false;};\nauto cmx = [](auto& a, auto b){if (a < b) {a = b; return true;} return false;};\nvoid debug_impl() { std::cerr << std::endl; }\ntemplate <typename Head, typename... Tail>\nvoid debug_impl(Head head, Tail... tail){\n  std::cerr << \" \" << head;\n  debug_impl(tail...);\n}\n#ifndef STOPIT\n#define debug(...)\\\n  std::cerr << std::boolalpha << \"[\" << #__VA_ARGS__ << \"]:\";\\\n  debug_impl(__VA_ARGS__);\\\n  std::cerr << std::noboolalpha;\n#else\n#define debug 0;\n#endif\n\ntemplate < typename Container, typename Value = typename Container::value_type, std::enable_if_t<!std::is_same< Container, std::string >::value, std::nullptr_t> = nullptr>\nstd::istream& operator>> (std::istream& is, Container& v)\n  { for (auto & x : v) { is >> x; } return is; }\n\ntemplate < typename Container, typename Value = typename Container::value_type, std::enable_if_t<!std::is_same< Container, std::string >::value, std::nullptr_t> = nullptr >\nstd::ostream& operator<< (std::ostream& os, Container const& v) {\n os << \"{\";\n  for (auto it = v.begin(); it != v.end(); it++)\n    {os << (it != v.begin() ? \",\" : \"\") << *it;}\n  return os << \"}\";\n}\n\ntemplate < template < typename ... > class Tuple,  typename... Args, std::size_t ... Inds, std::size_t = std::tuple_size< Tuple < Args ... > >::value >\nstd::istream& tuple_input_impl(std::istream& os, Tuple<Args...>& tuple, std::integer_sequence<std::size_t, Inds...>)\n  { (void)std::initializer_list<int>{((void)(os >> std::get< Inds >(tuple)), 0)...}; return os; }\ntemplate < template < typename ... > class Tuple,  typename... Args, std::size_t = std::tuple_size< Tuple < Args ... > >::value >\nstd::istream& operator>> (std::istream& os, Tuple<Args...>& tuple)\n  { return tuple_input_impl(os, tuple, std::index_sequence_for<Args...>()); }\n\ntemplate < template < typename ... > class Tuple,  typename... Args, std::size_t ... Inds, std::size_t = std::tuple_size< Tuple < Args ... > >::value >\nstd::ostream& tuple_output_impl(std::ostream& os, const Tuple<Args...>& tuple, std::integer_sequence<std::size_t, Inds...>)\n  { os << \"(\"; (void)std::initializer_list<int>{((void)(os << (Inds > 0 ? \",\" : \"\") << std::get< Inds >(tuple)), 0)...}; return os << \")\"; }\ntemplate < template < typename ... > class Tuple,  typename... Args, std::size_t = std::tuple_size< Tuple < Args ... > >::value >\nstd::ostream& operator<< (std::ostream& os, const Tuple<Args...>& tuple)\n { return tuple_output_impl(os, tuple, std::index_sequence_for<Args...>()); }\n\nint main() {\n  std::cin.tie(0); std::cin.sync_with_stdio(false);\n  int n; std::cin >> n;\n  std::vector< lint > a(n);\n  std::vector< int > minus;\n  rep(i, 0, n) {\n    if (0 < i) {\n      char c; std::cin >> c;\n      if (c == '-')\n        { minus.emplace_back(i); }\n    }\n    int x; std::cin >> a.at(i);\n  }\n  std::vector< lint > b(n);\n  std::partial_sum(all(a), b.begin());\n  lint sum = b.back();\n  // debug(a);\n  // debug(b);\n  // debug(minus);\n  if (minus.empty()) {\n    std::cout << sum << std::endl;\n    return 0;\n  }\n\n  int m = minus.size();\n  minus.emplace_back(n);\n  b.insert(b.begin(), 0LL);\n  std::vector< std::pair< lint, lint > > data(m);\n  rep(i, 0, m) {\n    auto x = minus.at(i);\n    auto y = minus.at(i + 1);\n    data.at(i) = { a.at(x), b.at(y) - b.at(x) };\n  }\n  // debug(data);\n  lint min = std::accumulate(all(data), 0LL, [](auto x, auto p){ return x + p.first; });\n  lint now = 0;\n  for (auto pair : data) {\n    lint x, y; std::tie(x, y) = pair;\n    // debug(now, y);\n    cmn(min, now + y);\n    now += x;\n  }\n  auto ret = sum - 2 * min;\n  std::cout << ret << std::endl;\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\n#define rep(i , l , r) for(int i = (l) , ___ = (r) ; i <= ___ ; ++i)\n#define per(i , r , l) for(int i = (r) , ___ = (l) ; i >= ___ ; --i)\n\ntemplate<typename T>inline int chkmin(T &x , const T &y) { return x > y ? x = y , 1 : 0; }\ntemplate<typename T>inline int chkmax(T &x , const T &y) { return x < y ? x = y , 1 : 0; }\n\ntemplate<typename T>inline T read(T &f)\n{\n\tf = 0 ; int x = 1 ; char c = getchar();\n\twhile(!isdigit(c)) x = c == '-' ? -1 : 1 , c = getchar();\n\twhile(isdigit(c)) (f *= 10) += c & 15 , c = getchar();\n\treturn f *= x;\n}\n\nconst int N = 100000 + 5;\n\nusing int64 = long long;\n\nint n , cnt , A[N] , col[N] ;\n\nint64 s[N] , sum[N];\n\nint main()\n{\n\tread(n);\n\trep(i , 1 , n)\n\t{\n\t\tstatic int op[10];\n\t\tif(i == 1) read(A[i]) , col[++cnt] = 1 , s[1] = A[i];\n\t\telse\n\t\t{\n\t\t\tscanf(\"%s\" , op) , read(A[i]);\n\t\t\tif(*op == '-')\n\t\t\t{\n\t\t\t\tcol[++cnt] = -1;\n\t\t\t\ts[i] = A[i];\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif(col[cnt] == 1) \n\t\t\t\t{\n\t\t\t\t\ts[cnt] += A[i];\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tcol[++cnt] = 1;\n\t\t\t\t\ts[cnt] = A[i];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tper(i , cnt , 1)\n\t{\n\t\tsum[i] = sum[i + 1] + s[i];\n\t}\n\tint64 Ans = -INT_MAX , ret = 0;\n\tcerr << cnt << endl;\n\trep(i , 1 , cnt)\n\t{\n\t\tif(col[i] == -1)\n\t\t{\n\t\t\tchkmax(Ans , ret - s[i] - (col[i + 1] == -1 ? -s[i + 1] : s[i + 1]) + sum[i + 2]);\n\t\t}\n\t\tret += s[i] * col[i];\n\t}\n\tchkmax(Ans , ret);\n\tcout << Ans << endl;\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <iostream>\n#define oo 1e17\n#define N 3005\n#define ll long long\n#define F(i,j,k) for(int i=(j);i<=(k);++i)\n#define D(i,j,k) for(int i=(j);i>=(k);--i)\nusing namespace std;\nchar op[N];\nint n,mx;\nll a[N],ans,dp[N][N];\nint main(){\n\t//freopen(\"txt.in\",\"r\",stdin);freopen(\"txt.out\",\"w\",stdout);\n\tscanf(\"%d\\n\",&n);\n\tscanf(\"%lld \",&a[0]);F(i,1,n-1)scanf(\"%c %lld \",&op[i],&a[i]);\n\t//F(i,1,n-1)printf(\"%c %d\\n\",op[i],a[i]);\n\tans=-oo;\n\tF(i,0,n-1)F(j,0,n-1)dp[i][j]=-oo;\n\tdp[0][0]=0;\n\tF(i,1,n-1){\n\t\tif(op[i]=='+'){\n\t\t\tll now=-oo;\n\t\t\tD(j,mx,0){\n\t\t\t\tnow=max(now,dp[i-1][j]+a[i]*(j&1?-1:1));\n\t\t\t\tdp[i][j]=now;\n\t\t\t}\n\t\t}\n\t\telse{\n\t\t\tmx++;\n\t\t\tdp[i][0]=dp[i-1][0]-a[i];\n\t\t\tF(j,1,mx)dp[i][j]=max(dp[i-1][j]+a[i]*(j&1?1:-1),dp[i-1][j-1]+a[i]*(j&1?-1:1));\n\t\t}\n\t\t//F(j,0,mx)printf(\"%d %d %d\\n\",i,j,dp[i][j]);\n\t}\n\tF(i,0,mx)ans=max(ans,dp[n-1][i]);\n\tprintf(\"%lld\\n\",ans+a[0]); \n\treturn 0;\n} "
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstdio>\n#include <map>\n#include <set>\n#include <queue>\n#include <vector>\n#include <cstring>\n#include <cstdlib>\n#include <algorithm>\n#define rep(i,a,b) for(int i = a; i <= b; i++)\n#define dep(i,a,b) for(int i = a; i >= b; i--) \n#define Rep(i,a) for(int i = 0; i < a; i++)\n#define pb(a) push_back(a)\n#define mp(a,b) make_pair(a,b)\n#define ab(x) ((x) < 0 ? -(x) : (x))\nusing namespace std;\ntypedef long long LL;\ntypedef map<int, int>::iterator mit;\ntypedef set<int ,int>::iterator sit;\nconst int N = 100010;\nchar c;\nint a[N]; bool b[N];\nint main() {\n\tint n; scanf(\"%d\",&n); bool flag = false; int last = 0;\n\trep(i,1,n) {\n\t\tscanf(\"%d\",&a[i]);\n\t\tif (i < n) {\n\t\t\tc = getchar(); while (c != '-' && c != '+') c = getchar();\n\t\t\tif (c == '-') b[last = i + 1] = true; else b[i + 1] = false, last = 0;\n\t\t}\n\t}\n\tLL ans = 0, sum = a[1];\n\trep(i,2,n) if (b[i]) {\n\t\tif (i == last) {\n\t\t\tans += ab(sum); sum = a[i];\n\t\t} else {\n\t\t\tsum -= a[i];\n\t\t\tif (flag) ans += ab(sum); else flag = true, ans += sum;\n\t\t\tsum = 0; \n\t\t}\n\t} else sum += a[i];\n\tif (flag) ans += ab(sum); else ans += sum;\n\tcout <<ans<<endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define ci const int&\nusing namespace std;\nint n,x,ans,tg;\nchar c;\nvoid getc(char&x){\n\tx=getchar();\n\twhile(x!='+'&&x!='-')x=getchar();\n}\nint main(){\n\tscanf(\"%d\",&n),scanf(\"%d\",&ans);\n\tfor(int i=2;i<=n;++i){\n\t\tgetc(c),scanf(\"%d\",&x);\n\t\tif(c=='+'||tg)ans+=x;\n\t\telse ans-=x,tg=1;\n\t}\n\tprintf(\"%lld\",ans);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\nconst int N=1e5+10;\ntypedef long long ll;\n\nint gi() {\n\tint x=0,o=1;char ch=getchar();\n\twhile(!isdigit(ch)) {\n\t\tif(ch=='-') o=-1;\n\t\tch=getchar();\n\t}\n\twhile(isdigit(ch)) x=x*10+ch-'0',ch=getchar();\n\treturn x*o;\n}\n\nint n;\n\nint main() {\n\tcin>>n;ll f0=0,f1=-1e18,f2=-1e18;\n\tfor(int i=1;i<=n;i++) {\n\t\tint x=gi();f0+=x;f1-=x;f2+=x;\n\t\tif(x<0) f2=max(f2,f1),f1=max(f1,f0);\n\t\tf1=max(f1,f2);f0=max(f0,f1);\n\t}\n\tcout<<f0;\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <cmath>\n#include <cstring>\n#include <iomanip>\n#include <iostream>\n#include <list>\n#include <map>\n#include <queue>\n#include <set>\n#include <stack>\n#include <string>\n#include <vector>\n\nusing namespace std;\nusing ll = long long;\n\nint main() {\n    int N;\n    cin >> N;\n\n    int div = 1e9 + 7;\n\n    map<int, int> A;\n    if (N % 2 == 0) {\n        for (int i = 0; i < N; i++) {\n            int tmp;\n            cin >> tmp;\n            tmp = (tmp - 1) / 2;\n            A[tmp]++;\n        }\n    } else {\n        for (int i = 0; i < N; i++) {\n            int tmp;\n            cin >> tmp;\n            tmp = tmp / 2;\n            A[tmp]++;\n        }\n    }\n    if (N % 2 == 1 && A[0] != 1) {\n        cout << 0 << endl;\n        return 0;\n    }\n\n    // for (auto a : A) {\n    // cout << a.first << \" \" << a.second << endl;\n    // }\n\n    int before = -1;\n    int count = 0;\n    for (auto a : A) {\n        if (N % 2 == 1 && a.first == 0) {\n            before = 0;\n            continue;\n        }\n        if (a.second != 2 || a.first != before + 1) {\n            cout << 0 << endl;\n            return 0;\n        }\n        count++;\n        before = a.first;\n    }\n\n    ll output = 1;\n    for (int i = 0; i < count; i++) {\n        output *= 2;\n        output %= div;\n    }\n    cout << output << endl;\n\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\nconst int Maxn = 100005;\nconst ll inf = 1LL << 60;\nint main()\n{\n\tios::sync_with_stdio(0);\n\tint n;\n\tstatic int A[Maxn];\n\tstatic char op[Maxn];\n\tstatic ll dp[Maxn][3];\n\tcin >> n;\n\tfor(int i=1;i<=n;i++) {\n\t\tif(i != 1)\n\t\t\tcin >> op[i];\n\t\telse \n\t\t\top[i] = '+';\n\t\tcin >> A[i];\n\t\tif(op[i] == '-')\n\t\t\tA[i] *= -1;\n\t}\n\t\n\tfor(int i=1;i<=n;i++)\n\t\tfor(int j=0;j<=2;j++)\n\t\t\tdp[i][j] = -inf;\n\tdp[1][0] = A[1];\n\tfor(int i=1;i<n;i++)\n\t\tfor(int j=0;j<=2;j++)\n\t\t\tif(dp[i][j] != -inf) {\n\t\t\t\tfor(int q1=0;q1<2;q1++)\n\t\t\t\t\tfor(int q2=0;q2<2;q2++) {\n\t\t\t\t\t\tif(op[i+1] != '-' && q2)\n\t\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t\tint t = j;\n\t\t\t\t\t\tif(q1 != 0)\n\t\t\t\t\t\t\tt--;\n\t\t\t\t\t\tif(t < 0)\n\t\t\t\t\t\t\tcontinue;\n#define sg(a) (((a) % 2 == 0) ? 1 : -1)\n\t\t\t\t\t\tint val = A[i+1] * sg(t);\n\t\t\t\t\t\tif(q2 != 0)\n\t\t\t\t\t\t\tt++;\n\t\t\t\t\t\tif(t > 2)\n\t\t\t\t\t\t\tcontinue;\n#define upd(a,b) a = max(a , b)\n\t\t\t\t\t\tupd(dp[i+1][t] , dp[i][j] + val);\n#undef upd\n#undef sg\n\t\t\t\t\t}\n\t\t\t}\n\tcout << max(dp[n][0] , dp[n][1]) << endl;\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "/// Kazuki Hoshino\n\n\n#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\ntypedef long double ld;\ntypedef vector<int> vi;\ntypedef pair<int,int> pi;\ntypedef pair<ll, ll> pll;\ntypedef vector<ll> vl;\ntypedef vector<pi> vpi;\n#define inf 10000000000000000\n#define mod 1000000007\n#define rep(i,a,b) for (int i = a; i <= b; i++)\n#define rep1(i, a, b) for(int i =a; i >=b; i--)\n#define f first\n#define ss second\n#define pb push_back\n#define all(c) (c).begin(),(c).end()\n#define mt make_tuple\n#define endl '\\n'\n\ntemplate<typename A,typename B>inline void chmin(A &a,B b){if(a>b)a=b;}\ntemplate<typename A,typename B>inline void chmax(A &a,B b){if(a<b)a=b;}\n\nll n , a[101010], dp[10101], sum[10101], x, pre, mn=-inf, t;\nbool pm[10101];\nchar ch;\n\nint main(){\nios::sync_with_stdio(0);\ncin.tie(0);\n\n//freopen(\"input.txt\",\"r\",stdin);\n//freopen(\"output.txt\",\"w\",stdout);\n\n\n    //cin >> t;\n\n//while(t--){\n\n    cin >> n >> x;\n    dp[0]=x;\n\n    n--;\n\n    rep(i, 0, n-1){\n        cin >> ch >> x;\n\n        pm[i]=ch!='+';\n\n        sum[i+1]=x;\n        a[i]=x;\n\n    }\n\n    rep(i,0,n-1){\n        sum[i+1]+=sum[i];\n    }\n\n    pre=-1;\n\n    rep(i,0,n-1){\n\n        if(pm[i] && pre!=-1){\n            chmax(mn,dp[pre]-(sum[i]-sum[pre])-sum[i]);\n        }\n        if(!pm[i]){\n            dp[i+1]=max(dp[i],mn+sum[i])+a[i];\n        }\n        else{\n            dp[i+1]=max(dp[i]-a[i],mn+sum[i]+a[i]);\n            pre=i;\n        }\n    }\n    cout<<dp[n]<<endl;\n\n//}\n\n\nreturn 0;\n}\n///....\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstring>\n#include<cstdio>\n#include<vector>\n#include<algorithm>\n\nusing namespace std;\n\n#define LL long long\ninline LL read(){\n\tLL x=0,f=1;char c=getchar();\n\tfor(;!isdigit(c);c=getchar()) if(c=='-') f=-1;\n\tfor(;isdigit(c);c=getchar()) x=x*10+c-'0';\n\treturn x*f;\n}\nconst LL MAXN = 100010;\nconst LL INF = 2147483600;\n\nLL N;\nLL opr[MAXN+1];\nLL a[MAXN+1],f[MAXN+1][201];\n\ninline LL fan(LL x,LL c){\n\tif(c&1) return -x; return x;\n}\n\nint main(){\n\t//freopen(\".in\",\"r\",stdin);\n\t//freopen(\".out\",\"w\",stdout);\n\tN=read(); \n\tfor(LL i=1;i<=N;i++){\n\t\ta[i]=read(); char c;\n\t\tif(i<N){\n\t\t\tc=getchar();\n\t\t\tgetchar();\n\t\t\topr[i+1]=(c=='+'?1:-1);\n\t\t}\n\t} memset(f,-127,sizeof(f));\n\topr[1]=1; f[0][0]=0;\n\tfor(LL i=1;i<=N;i++){\n\t\tfor(LL j=0;j<=min(N,200LL);j++){\n\t\t\tif(j>0&&opr[i]==-1) f[i][j]=f[i-1][j-1]+fan(opr[i],j-1)*a[i];\n\t\t\tif(j<200&&j<N) f[i][j]=max(f[i][j],f[i-1][j+1]+fan(opr[i],j+1)*a[i]);\n\t\t\tf[i][j]=max(f[i][j],f[i-1][j]+fan(opr[i],j)*a[i]);\n\t\t}\n\t}\n\tfor(LL i=0;i<=200LL;i++) f[N][0]=max(f[N][0],f[N][i]);\n\tprintf(\"%lld\\n\",f[N][0]);\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\nconst int N = 1e5 + 9;\n\nint A[N], n, f[N][3];\nbool o[N];\nchar s;\n\nint pd (int a, bool o) { return o ? a : -a; }\n\nint main () {\n\tscanf(\"%d\", &n);\n\tfor (int i = o[1] = 1; i <= n; ++i) {\n\t\tif (i > 1) scanf(\"%s\", &s), o[i] = s == '+' ? 1 : 0;\n\t\tscanf(\"%d\", &A[i]);\n\t}\n\tf[0][1] = f[0][2] = -0x3f3f3f3f;\n\tfor (int i = 1; i <= n; ++i) {\n\t\tf[i][2] = f[i - 1][2];\n\t\tfor (int j = 0; j < 2; ++j) f[i][j] = max(f[i - 1][j], f[i - 1][j + 1]);\n\t\tfor (int j = 0; j < 3; ++j) f[i][j] += ((o[i] ^ (j & 1)) ? A[i] : -A[i]);\n\t\tif (!o[i]) for (int j = 2; j; --j) f[i][j] = max(f[i][j - 1], f[i][j]);\n\t}\n\tprintf(\"%d\\n\", max(f[n][0], max(f[n][1], f[n][2])));\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#define int long long\nusing namespace std;\nint n,a[200001],b[200001],s[200001],q[200001];\nchar t[5];\ninline int sum(int l,int r){return s[r]-s[l-1];}\nsigned main()\n{\n\tcin>>n;\n\tint cnt=0;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tif(i>1)cin>>t;\n\t\tcin>>a[i];\n\t\tcnt+=b[i]=t[0]=='-';\n\t\ts[i]=s[i-1]+a[i];\n\t\tq[i]=q[i-1]+(b[i]?-a[i]:a[i]);\n\t}\n\tint ans=(cnt<2?q[n]:-(1ll<<40));\n\tfor(int i=n,j=n+1;i;i--)\n\t\tif(b[i])\n\t\t{\n\t\t\tif(j<=n)ans=max(ans,q[i-1]-sum(i,j-1)+sum(j,n));\n\t\t\tj=i;\n\t\t}\n\tcout<<ans<<endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "// IOI 2021\n#include <bits/stdc++.h>\nusing namespace std;\n\n#define int ll\n#define endl '\\n'\n#define ends ' '\n#define die(x) return cout << x << endl, 0\n#define all(v) v.begin(), v.end()\n#define sz(x) (int)(x.size())\nvoid debug_out() { cerr << endl; }\ntemplate <typename Head, typename... Tail>\nvoid debug_out(Head H, Tail... T) { cerr << ends << H; debug_out(T...); }\n#define debug(...) cerr << \"{\" << #__VA_ARGS__ << \"}:\", debug_out(__VA_ARGS__)\ntypedef long long ll;\ntypedef pair<int, int> pii;\nconst ll INF = 1e15;\nconst ll MOD = 1e9 + 7;\n \n////////////////////////////////////////////////////////////////////\n\nconst int N = 1e5 + 5, M = 1e2 + 2;\n\nint A[N], DP[N][M];\nbool P[N];\n\nint Sign(int i) { return i & 1 ? -1 : 1; }\n\nint32_t main() {\n\n\tios::sync_with_stdio(0), cin.tie(0), cout.tie(0);\n\tmt19937 Rnd(time(0));\n\n\tfor (int i = 0; i < N; i++) for (int j = 0; j < M; j++) DP[i][j] = -INF;\n\tint n; cin >> n;\n\tfor (int i = 0; i < n; i++) {\n\t\tif (i) {\n\t\t\tchar c; cin >> c;\n\t\t\tP[i] = (c == '+');\n\t\t}\n\t\tcin >> A[i];\n\t}\n\tDP[0][0] = A[0];\n\tfor (int i = 1; i < n; i++) for (int j = M - 1; j >= 0; j--) {\n\t\tif (P[i]) DP[i][j] = DP[i - 1][j] + A[i] * Sign(j);\n\t\telse if (j) DP[i][j] = DP[i - 1][j - 1] + A[i] * Sign(j);\n\t\tif (j + 1 < M) DP[i][j] = max(DP[i][j], DP[i][j + 1]);\n\t}\n\tcout << DP[n - 1][0] << endl;\n\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\nint read(){\n\tint a = 0; char c = getchar(); while(!isdigit(c)) c = getchar();\n\twhile(isdigit(c)){a = a * 10 + c - 48; c = getchar();} return a;\n}\n\nconst int _ = 1e5 + 7;\nlong long N , dp[_][2] , val[_][2] , cnt;\n\nint main(){\n\tN = read(); val[0][1] = read();\n\tfor(int i = 1 ; i < N ; ++i) if(getchar() == '-') val[++cnt][0] = read(); else val[cnt][1] += read();\n\tmemset(dp , -0x3f , sizeof(dp)); dp[0][0] = 0;\n\tfor(int i = 1 ; i <= cnt ; ++i){\n\t\tdp[i][0] = max(dp[i - 1][0] , dp[i - 1][1]) + val[i][1] - val[i][0];\n\t\tdp[i][1] = max(dp[i - 1][0] - val[i][0] - val[i][1] , dp[i - 1][1] + val[i][0] + val[i][1]);\n\t}\n\tcout << max(dp[cnt][0] , dp[cnt][1]) + val[0][1];\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\n#define rep(i,n) for(int i=0; i<(int)(n); i++)\n#define debug(x) cerr << #x << \": \" << x << \", \"\n#define debugln(x) cerr << #x << \": \" << x << '\\n'\n\ntemplate<class T> inline bool chmax(T& a, T b) { if (a < b) { a = b; return true; } return false; }\ntemplate<class T> inline bool chmin(T& a, T b) { if (a > b) { a = b; return true; } return false; }\n\nusing namespace std;\nusing ll = long long;\nusing P = pair<ll, ll>;\n\n//constexpr ll mod = 998244353;\nconstexpr ll mod = 1e9+7;\nconst double PI = acos(-1.0);\nmt19937_64 engine(chrono::steady_clock::now().time_since_epoch().count());\n\nsigned main() {\n  ios_base::sync_with_stdio(false);\n  cin.tie(nullptr);\n\n  int n; cin >> n;\n  vector<ll> dp1(3, LLONG_MIN/2);\n  vector<ll> dp2(3, LLONG_MIN/2);\n\n  cin >> dp1[0];\n\n  n--;\n  rep(i, n) {\n    char op; cin >> op;\n    ll a; cin >> a;\n    if (op == '+') {\n      dp2[0] = dp1[0] + a;\n      dp2[1] = dp1[1] - a;\n      dp2[2] = dp1[2] + a;\n    } else {\n      dp2[0] = dp1[0] - a;\n      dp2[1] = max(dp1[0]-a, dp1[1]+a);\n      dp2[2] = max(dp1[1]+a, dp1[2]+a);\n    }\n    swap(dp1, dp2);\n  }\n\n  ll ma = LLONG_MIN;\n  rep(i, 3) {\n    chmax(ma, dp1[i]);\n  }\n  cout << ma << endl;\n}"
  },
  {
    "language": "C++",
    "code": "// Crt. 2020-01-07  16:43:40\n#include <algorithm>\n#include <iostream>\n#include <cstring>\n#include <cstdio>\n#define N 200005\nusing namespace std;\ntypedef long long ll;\n\nint n, a[N];\nll sum[N], asum[N];\n\ninline int Abs(int x) {\n    return x < 0 ? -x : x;\n}\n\nint main(){\n#ifdef LOCAL_JUDGE\n    freopen(\"work.in\", \"r\", stdin);\n    freopen(\"work.out\", \"w\", stdout);\n#endif\n\n    cin >> n;\n\n    scanf(\"%d\", a + 1);\n    for (int i = 2; i <= n; ++i) {\n        char pos;\n        scanf(\" %c %d\", &pos, a + i);\n        if (pos == '-') a[i] *= -1;\n    }\n\n    for (int i = 1; i <= n; ++i)\n        sum[i] = sum[i - 1] + a[i];\n    for (int i = n; i >= 1; --i)\n        asum[i] = asum[i + 1] + Abs(a[i]);\n\n    ll ans = sum[n];\n    for (int i = 2, j; i <= n; ++i) {\n        if (a[i] > 0) continue;\n        for (j = i; j < n && a[j + 1] > 0; ++j);\n        ans = max(ans, sum[i] * 2 - sum[j] + asum[j + 1]);\n    }\n\n    cout << ans << endl;\n\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\ntypedef long long ll;\nint N;\nvector<int> A;\nvector<char> O;\nvector<ll> psum;\nvector<int> sidx;\nvector<ll> res;\n\nint main() {\n    scanf(\"%d\", &N);\n    A.resize(N);\n    O.resize(N - 1);\n    for(int i = 0; i < N - 1; i++) {\n        scanf(\"%d %c\", &A[i], &O[i]);\n    }\n    scanf(\"%d\", &A[N - 1]);\n\n    psum.resize(N);\n    for(int i = 0; i < N; i++) {\n        psum[i] = A[i];\n        if(i) psum[i] += psum[i - 1];\n    }\n\n    for(int i = 0; i < N - 1; i++) {\n        if(O[i] == '-') sidx.push_back(i);\n    }\n\n    ll ans = A[0];\n    res.resize(N);\n    res[0] = ans;\n\n    for(int i = 1; i < N; i++) {\n        ans += O[i - 1] == '+'? A[i] : -A[i];\n        res[i] = ans;\n    }\n\n    sidx.push_back(N - 1);\n\n    for(int i = 0; i < (int)sidx.size() - 1; i++) {\n        int now = sidx[i];\n        int nxt = sidx[i + 1];\n\n        ans = max(ans, res[now] + -(psum[nxt] - psum[now]) + psum[N - 1] - psum[nxt]);\n    }\n\n    printf(\"%lld\", ans);\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n \ntypedef long long ll;\ntypedef vector<int> vi;\ntypedef pair<int, int> pii;\ntypedef set<int> si;\ntypedef map<int,int> mii;\n\n#define FOR(i, a, b) for (int i=a; i<b; i++)\n#define F0R(i, a) for (int i=0; i<a; i++)\n#define FORd(i,a,b) for (int i = b-1; i >= a; i--)\n#define F0Rd(i,a) for (int i = a-1; i >= 0; i--)\n \n#define mp make_pair\n#define pb push_back\n#define f first\n#define s second\n#define lb lower_bound\n#define ub upper_bound\n \nconst int MOD = 1000000007;\ndouble PI = 4*atan(1);\n\nint main() {\n\tios_base::sync_with_stdio(0);cin.tie(0);\n\tint N, isneg = 0; cin >> N;\n\tll csum = 0, csum2 = 0;\n\tint A; cin >> A; csum += A;\n\tF0R(i,N-1) {\n\t\tchar op; cin >> op >> A;\n\t\tif (op == '+') {\n\t\t\tif (isneg == 1) csum2 += A;\n\t\t\telse csum += A;\n\t\t} else {\n\t\t\tif (isneg == 0) {\n\t\t\t\tcsum -= A;\n\t\t\t\tisneg++;\n\t\t\t\t// cout << \"hi \" << csum << \"\\n\";\n\t\t\t} else if (isneg == 1) {\n\t\t\t\tcsum2 -= A;\n\t\t\t\tisneg++;\n\t\t\t} else csum += A;\n\t\t}\n\t}\n\tcout << csum+abs(csum2);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "                            #include <bits/stdc++.h>\n                            #include<iostream>\n                            #include<cstdio>\n                            #include<vector>\n                            #include<queue>\n                            #include<map>\n                            #include<cstring>\n                            #include<string>\n                            #include <math.h>\n                            #include<algorithm>\n                        //    #include <boost/multiprecision/cpp_int.hpp>\n                            #include<functional>\n                     #define int long long\n                            #define inf  1000000007\n                            #define pa pair<int,int>\n                            #define ll long long\n                            #define pal pair<double,int>\n                            #define ppa pair<int,pa>\n                            #define ssa pair<string,int>\n                            #define  mp make_pair\n                            #define  pb push_back\n                            #define EPS (1e-10)\n                            #define equals(a,b) (fabs((a)-(b))<EPS)\n                     \n                            using namespace std;\n                     //priority_queue<int, vector<int>, greater<int> > que;\n                            class Point{\n                            \tpublic:\n                            \tdouble x,y;\n                            \tPoint(double x=0,double y=0):x(x),y(y) {}\n                            \tPoint operator + (Point p) {return Point(x+p.x,y+p.y);}\n                            \tPoint operator - (Point p) {return Point(x-p.x,y-p.y);}\n                            \tPoint operator * (double a) {return Point(x*a,y*a);}\n                            \tPoint operator / (double a) {return Point(x/a,y/a);}\n                            \tdouble absv() {return sqrt(norm());}\n                            \tdouble norm() {return x*x+y*y;}\n                            \tbool operator < (const Point &p) const{\n                            \t\treturn x != p.x ? x<p.x: y<p.y;\n                            \t}\n                            \tbool operator == (const Point &p) const{\n                            \t\treturn fabs(x-p.x)<EPS && fabs(y-p.y)<EPS;\n                            \t}\n                            };\n                            typedef Point Vector;\n                     \n                            struct Segment{\n                            Point p1,p2;\n                            };\n                     \n                        double hen(Vector a){\n                        if(fabs(a.x)<EPS && a.y>0) return acos(0);\n                        else if(fabs(a.x)<EPS && a.y<0) return 3*acos(0);\n                        else if(fabs(a.y)<EPS && a.x<0) return 2*acos(0);\n                        else if(fabs(a.y)<EPS && a.x>0) return 0.0;\n                        else if(a.y>0) return acos(a.x/a.absv());\n                        else return 2*acos(0)+acos(-a.x/a.absv());\n                     \n                        }\n                     \n                string itos( int i ) {\n                ostringstream s ;\n                s << i ;\n                return s.str() ;\n                }\n                 \n                int gcd(int v,int b){\n                \tif(v>b) return gcd(b,v);\n                \tif(v==b) return b;\n                \tif(b%v==0) return v;\n                \treturn gcd(v,b%v);\n                }\n                            double dot(Vector a,Vector b){\n                            \treturn a.x*b.x+a.y*b.y;\n                            }\n                            double cross(Vector a,Vector b){\n                            \treturn a.x*b.y-a.y*b.x;\n                            }\n                        \n                double distans(double x1,double y1,double x2,double y2){\n                \tdouble rr=(x1-x2)*(x1-x2)+(y1-y2)*(y1-y2);\n                \treturn sqrt(rr);\n                \t\n                }\n\n                            //----------------kokomade tenpure------------\n\nvoid no(){\n\tcout<<\"No\"<<endl;\n\treturn;\n}\n\nint beki(int r, int k){\n\tif(k==0) return 1;\n\telse return r*beki(r,k-1);\n}\nint a[100010];\nint op[100010];\nint dp[100010][3];\n signed  main(){\nint n;\n \tcin>>n;\n \tfor(int i=0;i<100010;i++)for(int j=0;j<3;j++) dp[i][j]= -inf*1000000000ll;\n \tfor(int i=0;i<n-1;i++){\n \t\tint dd;\n \t\tstring sa;\n \t\tcin>>dd>>sa;\n \t\ta[i+1]=dd;\n \t\tif(sa==\"+\")op[i+1]=1;\n \t\telse op[i+1]=-1;\n \t}\n \tcin>>a[n];\n \top[0]=1;\n \tdp[0][0]=0;\n \t\n \tfor(int i=1;i<=n;i++){\n \t\tif(op[i-1]==1){\n \t\t\tdp[i][0]=max(dp[i][0],dp[i-1][0]+a[i]);\n \t\t\tdp[i][0]=max(dp[i][0],dp[i-1][1]+a[i]);\n \t\t\tdp[i][1]=max(dp[i][1],dp[i-1][1]-a[i]);\n \t\t\tdp[i][1]=max(dp[i][1],dp[i-1][2]-a[i]);\n \t\t\tdp[i][2]=max(dp[i][2],dp[i-1][2]+a[i]);\n \t\t}\n \t\telse{\n \t\t\tdp[i][0]=max(dp[i][0],dp[i-1][0]-a[i]);\n \t\t\tdp[i][0]=max(dp[i][0],dp[i-1][1]-a[i]);\n \t\t\tdp[i][1]=max(dp[i][1],dp[i-1][0]-a[i]);\n \t\t\tdp[i][1]=max(dp[i][1],dp[i-1][1]+a[i]);\n \t\t\tdp[i][1]=max(dp[i][1],dp[i-1][2]+a[i]);\n \t\t\tdp[i][2]=max(dp[i][2],dp[i-1][1]+a[i]);\n \t\t\tdp[i][2]=max(dp[i][2],dp[i-1][2]-a[i]);\n \t\t}\n //\t\tcout<<dp[i][0]<<\" \"<<dp[i][1]<<\" \"<<dp[i][2]<<\" \"<<endl;\n \t\t\n \t}\n \tcout<<max(dp[n][0],max(dp[n][1],dp[n][2]))<<endl;\n \t\n                   //  \tprintf(\"%.10f\\n\",ans[n-1]);\n                    \treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include \"bits/stdc++.h\"\n#define ll long long\n#define rep2(i,a,b) for(int i=a;i<=b;++i)\n#define rep(i,n) for(int i=0;i<n;i++)\n#define pii pair<int,int>\n#define tii tuple<int,int,int>\n#define pq priority_queue<int>\n#define pqg priority_queue<int,vector<int>,greater<int>>\n#define pb push_back\n#define edge(v,a,b) v[a].pb(b);v[b].pb(a);\nint MOD=1e9+7;\n#define INF 2*1e9\n#define N 310000 \nusing namespace std;\nstring alphabet(\"abcdefghijklmnopqrstuvwxyz\");\n\nmain(){\n    int n;\n    cin>>n;\n    int a[110000];\n    cin>>a[0];\n    rep2(i,1,n-1){\n        char c;cin>>c;\n        cin>>a[i];\n        if(c=='-')a[i]*=-1;\n    }\n    ll sum=0,pos=0;\n    vector<ll> v;\n    while(pos<n){\n        while(a[pos]>0&&pos<n){\n            sum+=a[pos];\n            pos++;\n        }\n        v.pb(sum);\n        if(pos<n) v.pb(a[pos]);\n        sum=0;pos++;\n    }\n    ll m=1e18,temp=0;\n    pos=1;\n    while(pos*2<=v.size()){\n        temp-=v[pos*2-1];\n        m=min(m,temp+v[pos*2]);\n        pos++;\n    }\n    rep(i,n){\n        sum+=abs(a[i]);\n    }\n    ll M=0;\n    rep(i,v.size()){\n        if(i%2) M-=v[i]; \n    }\n    m=min(M,m);\n    cout<<sum-2*m;\n    return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n#define ll int64_t\n\n// i think we could use at most 2 nested brackets, more than 2 is unneccessary\n// dp[i][j] = max answer [i..n-1] if we've opened j brackets before\n\nconst int N=1e5+5;\nll n,dp[N][3];\nvector<ll> a;\n\nll go(int i,int br){\n\tif(i==n) return 0;\n\tll& res=dp[i][br];\n\tif(~res) return res;\n\tres=0;\n\tll val=(br&1)?-a[i]:a[i];\n\tres=max(res,go(i+1,br)+val);\n\tif(a[i]<0&&br<2) res=max(res,go(i+1,br+1)+val);\n\tif(br>0) res=max(res,go(i+1,br-1)+val);\n\treturn res;\n}\n\nint main() {\n\tios_base::sync_with_stdio(0);cin.tie(0);\n\tcin>>n;\n\tbool neg=false;\n\tfor(int i=0;i<n+n-1;++i){\n\t\tif(i&1){\n\t\t\tchar sign;\n\t\t\tcin>>sign;\n\t\t\tneg=sign=='-';\n\t\t}\n\t\telse{\n\t\t\tll x;\n\t\t\tcin>>x;\n\t\t\ta.push_back(neg?-x:x);\n\t\t\tneg=false;\n\t\t}\n\t}\n\tmemset(dp,-1,sizeof(dp));\n\tcout<<go(0,0);\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include\"bits/stdc++.h\"\nusing namespace std;\nusing ll = int64_t;\n\n\nint main() {\n    ll N;\n    vector<ll> A;\n    vector<char> op;\n\n    cin >> N;\n    A.resize(N);\n    op.resize(N);\n    cin >> A[0];\n    for (ll i = 1; i < N; i++) {\n        cin >> op[i] >> A[i];\n    }\n\n    vector<vector<ll>> dp(N + 1, vector<ll>(3, -1e14));\n    dp[1][0] = A[0];\n    for (ll i = 1; i < N; i++) {\n        if (op[i] == '+') {\n            dp[i + 1][2] = dp[i][2] + A[i];\n            dp[i + 1][1] = max(dp[i + 1][2], dp[i][1] - A[i]);\n            dp[i + 1][0] = max(dp[i + 1][1], dp[i][0] + A[i]);\n        } else {\n            dp[i + 1][2] = dp[i][1] + A[i];\n            dp[i + 1][1] = max({ dp[i + 1][2], dp[i][0] - A[i], dp[i][2] - A[i] });\n            dp[i + 1][0] = max(dp[i + 1][1], dp[i][1] + A[i]);\n        }\n    }\n\n    cout << max({ dp[N][0], dp[N][1], dp[N][2] }) << endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\ntypedef long long ll;\n\nconst int MN = 100010;\n\nint N;\nint A[MN];\nchar B[MN];\nll psum[MN];\n\nll calc(int l, int r) {\n    return psum[r] - (l? psum[l - 1] : 0);\n}\n\nint main() {\n    scanf(\"%d\", &N);\n\n    for(int i = 0; i < N; i++) {\n        if(i) {\n            scanf(\" %c\", &B[i]);\n        }\n        scanf(\"%d\", &A[i]);\n    }\n\n    for(int i = 0; i < N; i++) {\n        psum[i] = A[i];\n        if(i) psum[i] += psum[i - 1];\n    }\n\n    ll ans = -1e18;\n    ll sum = A[0];\n\n    for(int i = 1; i < N; i++) {\n        if(B[i] == '-') {\n            ll tmp = A[i];\n            int j;\n            for(j = i + 1; j < N; j++) {\n                if(B[j] == '-') break;\n                tmp += A[j];\n            }\n\n            ans = max(ans, sum - tmp + calc(j, N - 1));\n            sum -= A[i];\n        }\n        else sum += A[i];\n    }\n    ans = max(ans, sum);\n    printf(\"%lld\", ans);\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nstatic const int Maxn = 100005;\n\nint n, st, ed;\nchar op[Maxn];\nlong long a[Maxn];\nlong long dp[Maxn][3];\n\nint main() {\n  scanf(\"%d\\n\", &n);\n  scanf(\"%lld \", a + 1), op[1] = '+';\n  for (int i = 2; i <= n; ++i)\n    scanf(\"%c %lld \", op + i, a + i);\n  memset(dp, -63, sizeof(dp));\n  dp[0][0] = 0;\n  for (int i = 1; i <= n; ++i) {\n    dp[i][2] = dp[i - 1][2] + a[i];\n    if (op[i] == '-') {\n      dp[i][1] = max(dp[i - 1][0] - a[i], dp[i - 1][1] + a[i]);\n      dp[i][2] = max(dp[i][2], dp[i - 1][1] + a[i]);\n    }\n    else {\n      dp[i][0] = max(dp[i - 1][0] + a[i], dp[i - 1][1] + a[i]);\n      dp[i][1] = max(dp[i - 1][2] + a[i], dp[i - 1][1] - a[i]);\n    }\n  }\n  printf(\"%lld\\n\", max(dp[n][0], max(dp[n][1], dp[n][2])));\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\n#define ll long long\n#define ull unsigned long long\n#define re register\n#define il inline\n#define inf 0x3f3f3f\n#define N 100010\nusing namespace std;\n\nll f[N], g[N], a[N];\nchar op, lst;\n\nint main() {\n  int n, x, y = 0, i, cnt = 0;\n  cin >> n;\n  ll ans = 0;\n  for (i = 1; i <= n; ++i) {\n    cin >> x;\n    lst = op;\n    if (i < n)\n      cin >> op;\n    if (lst == '-') {\n      x = -x;\n      a[++cnt] = x;\n    }\n    if (y <= 0 && x > 0)\n      cnt++, a[cnt] = x;\n    if (y > 0 && x > 0)\n      a[cnt] += x;\n    y = x;\n  }\n  f[1] = a[1];\n  for (i = cnt; i >= 1; --i)\n    g[i] = g[i + 1] + abs(a[i]);\n  for (i = 2; i <= cnt; ++i)\n    f[i] = f[i - 1] + a[i];\n  ans = f[cnt];\n  for (i = 1; i < cnt; ++i)\n    if (a[i + 1] < 0)\n      ans = max(ans, f[i + 1] - a[i + 2] + g[i + 3]);\n  cout << ans;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <iostream>\n#include <cstring>\n#include <string>\n#include <cstdlib>\n#include <utility>\n#include <cctype>\n#include <algorithm>\n#include <bitset>\n#include <set>\n#include <map>\n#include <vector>\n#include <queue>\n#include <deque>\n#include <stack>\n#include <cmath>\n#define LL long long\n#define LB long double\n#define x first\n#define y second\n#define Pair pair<int,int>\n#define pb push_back\n#define pf push_front\n#define mp make_pair\n#define LOWBIT(x) x & (-x)\nusing namespace std;\n\nconst int MOD=1e9+7;\nconst LL LINF=2e16;\nconst int INF=2e9;\nconst int magic=348;\nconst double eps=1e-10;\nconst double pi=3.14159265;\n\ninline int getint()\n{\n    char ch;int res;bool f;\n    while (!isdigit(ch=getchar()) && ch!='-') {}\n    if (ch=='-') f=false,res=0; else f=true,res=ch-'0';\n    while (isdigit(ch=getchar())) res=res*10+ch-'0';\n    return f?res:-res;\n}\n\ninline LL getLL()\n{\n\tchar ch;LL res;bool f;\n\twhile (!isdigit(ch=getchar()) && ch!='-') {}\n\tif (ch=='-') f=false,res=0; else f=true,res=ch-'0';\n\twhile (isdigit(ch=getchar())) res=res*10+ch-'0';\n\treturn res;\n}\n\nLL dp[100048][5];\n\nstruct node\n{\n\tint sign;\n\tint num;\n}a[100048];\n\nint n;\n\nint main ()\n{\n\tint i,j;n=getint();string s;\n\tfor (i=1;i<=n;i++)\n\t{\n\t\tif (i==1) {a[i].sign=1,a[i].num=getint();continue;}\n\t\tcin>>s;a[i].sign=(s[0]=='+'?1:-1);\n\t\ta[i].num=getint();\n\t}\n\tfor (i=1;i<=n;i++)\n\t\tfor (j=0;j<=4;j++)\n\t\t\tdp[i][j]=-LINF;\n\tdp[1][0]=a[1].num;\n\tfor (i=2;i<=n;i++)\n\t\tfor (j=0;j<=4;j++)\n\t\t{\n\t\t\t//no sign\n\t\t\tdp[i][j]=max(dp[i][j],dp[i-1][j]+a[i].num*a[i].sign*(j%2?-1:1));\n\t\t\t//)\n\t\t\tif (j!=4) dp[i][j]=max(dp[i][j],dp[i-1][j+1]+a[i].num*a[i].sign*((j+1)%2?-1:1));\n\t\t\t//(\n\t\t\tif (j && a[i].sign==-1) dp[i][j]=max(dp[i][j],dp[i-1][j-1]+a[i].num*(j%2?-1:1));\n\t\t}\n\tprintf(\"%lld\\n\",dp[n][0]);\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<cstring>\n#include<algorithm>\nusing namespace std;\nconst long long MAXN=300005;\n\nlong long N,T[MAXN];\nlong long q[MAXN],head,tail;\nlong long sum[MAXN],y[MAXN];\nlong long L[MAXN],R[MAXN],f[MAXN],g[MAXN],h[MAXN];\n\nvoid DP(long long dp[],long long N)\n{\n\tq[head=tail=1]=0;\n\ty[0]=0;\n\tfor(long long i=1;i<=N;i++)\n\t{\n\t\twhile(head<tail)\n\t\t{\n\t\t\tlong long a=q[tail-1],b=q[tail];\n\t\t\tif((y[b]-y[a])<1LL*i*(b-a))\n\t\t\t\ttail--;\n\t\t\telse\n\t\t\t\tbreak;\n\t\t}\n\t\tlong long j=q[tail];\n\t\tdp[i]=max(dp[i-1],dp[j]+(i-j)*(i-j-1)/2+(i-j)-sum[i]+sum[j]);\n\t\ty[i]=dp[i]+1LL*(i-1)*i/2+sum[i];\n\t\twhile(head<tail)\n\t\t{\n\t\t\tlong long a=q[tail-1],b=q[tail],c=i;\n\t\t\tif((y[b]-y[a])*(c-b)<1LL*(y[c]-y[b])*(b-a))\n\t\t\t\ttail--;\n\t\t\telse\n\t\t\t\tbreak;\n\t\t}\n\t\tq[++tail]=i;\n\t}\n}\n\nvoid CDQ(long long l,long long r,long long mode)\n{\n\tif(l==r)\n\t{\n\t\tf[l]=max(f[l],L[l-1]+R[r+1]+1-T[l]);\n\t\treturn;\n\t}\n\tlong long mid=(l+r+mode)/2;\n\tCDQ(l,mid,mode);\n\tCDQ(mid+1,r,mode);\n\t\n\tq[head=tail=1]=l-1;\n\tg[l-1]=L[l-1];\n\ty[l-1]=g[l-1]+(l-1-1)*(l-1)/2+sum[l-1];\n\tfor(long long i=l;i<=mid;i++)\n\t{\n\t\tg[i]=L[i];\n\t\ty[i]=g[i]+1LL*(i-1)*i/2+sum[i];\n\t\twhile(head<tail)\n\t\t{\n\t\t\tlong long a=q[tail-1],b=q[tail],c=i;\n\t\t\tif((y[b]-y[a])*(c-b)<1LL*(y[c]-y[b])*(b-a))\n\t\t\t\ttail--;\n\t\t\telse\n\t\t\t\tbreak;\n\t\t}\n\t\tq[++tail]=i;\n\t}\n\t\n\tfor(long long i=mid+1;i<=r;i++)\n\t{\n\t\twhile(head<tail)\n\t\t{\n\t\t\tlong long a=q[tail-1],b=q[tail];\n\t\t\tif((y[b]-y[a])<1LL*i*(b-a))\n\t\t\t\ttail--;\n\t\t\telse\n\t\t\t\tbreak;\n\t\t}\n\t\tlong long j=q[tail];\n\t\tg[i]=g[j]+(i-j)*(i-j-1)/2+(i-j)-sum[i]+sum[j]+R[i+1];\n\t}\n\t\n\tfor(long long i=r-1;i>mid;i--)\n\t\tg[i]=max(g[i],g[i+1]);\n\tfor(long long i=mid+1;i<=r;i++)\n\t\tf[i]=max(f[i],g[i]);\n}\n\nint main()\n{\n\tscanf(\"%lld\",&N);\n\tfor(long long i=1;i<=N;i++)\n\t\tscanf(\"%lld\",&T[i]);\n\t\n\tfor(long long i=1;i<=N;i++)\n\t\tsum[i]=sum[i-1]+T[i];\n\tDP(L,N);\n\treverse(T+1,T+N+1);\n\tfor(long long i=1;i<=N;i++)\n\t\tsum[i]=sum[i-1]+T[i];\n\tDP(R,N);\n\treverse(R+1,R+N+1);\n\n\tmemset(h,0x80,sizeof h);\n\t\n\tfor(long long i=1;i<=N;i++)\n\t\tswap(L[i],R[N-i+1]);\n\t\n\tmemset(f,0x80,sizeof f);\n\tCDQ(1,N,-1);\n\tfor(long long i=1;i<=N;i++)\n\t\th[i]=max(h[i],f[N-i+1]);\n\n\treverse(T+1,T+N+1);\n\tfor(long long i=1;i<=N;i++)\n\t\tswap(L[i],R[N-i+1]);\n\t\n\tfor(long long i=1;i<=N;i++)\n\t\tsum[i]=sum[i-1]+T[i];\n\t\n\tmemset(f,0x80,sizeof f);\n\tCDQ(1,N,0);\n\tfor(long long i=1;i<=N;i++)\n\t\th[i]=max(h[i],f[i]);\n\t\n\tlong long M,P,X;\n\tscanf(\"%lld\",&M);\n\twhile(M--)\n\t{\n\t\tscanf(\"%lld%lld\",&P,&X);\n\t\tlong long ans=max(L[P-1]+R[P+1],h[P]+T[P]-X);\n\t\tprintf(\"%lld\\n\",ans);\n\t}\n\t\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define xx first\n#define yy second\n#define mp make_pair\n#define pb push_back\n#define mset(x, y) memset(x, y, sizeof x)\n#define mcpy(x, y) memcpy(x, y, sizeof x)\nusing namespace std;\n\ntypedef long long LL;\ntypedef pair <int, int> pii;\n\ninline int Read()\n{\n\tint x = 0, f = 1, c = getchar();\n\tfor (; !isdigit(c); c = getchar())\n\t\tif (c == '-')\n\t\t\tf = -1;\n\tfor (;  isdigit(c); c = getchar())\n\t\tx = x * 10 + c - '0';\n\treturn x * f;\n}\n\nconst int MAXN = 100005;\n\nLL f[MAXN][3];\nchar opt[2];\nint n;\n\nint main()\n{\n#ifdef wxh010910\n\tfreopen(\"data.in\", \"r\", stdin);\n#endif\n\tn = Read(), f[0][0] = Read(), f[0][1] = f[0][2] = -1LL << 60;\n\tfor (int i = 1; i < n; i ++)\n\t{\n\t\tscanf(\"%s\", opt);\n\t\tint x = Read();\n\t\tif (opt[0] == '+')\n\t\t{\n\t\t\tf[i][2] = f[i - 1][2] + x;\n\t\t\tf[i][1] = max(f[i][2], f[i - 1][1] - x);\n\t\t\tf[i][0] = max(f[i][1], f[i - 1][0] + x);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tf[i][2] = f[i - 1][1] + x;\n\t\t\tf[i][1] = max(f[i][2], max(f[i - 1][0], f[i - 1][2]) - x);\n\t\t\tf[i][0] = max(f[i][1], f[i - 1][1] + x);\n\t\t}\n\t}\n\treturn printf(\"%lld\\n\", max(max(f[n - 1][0], f[n - 1][1]), f[n - 1][2])), 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "\n/* -------------------------------- Template -------------------------------- */\n\n#include <algorithm>\n#include <array>\n#include <bitset>\n#include <cassert>\n#include <cmath>\n#include <complex>\n#include <cstdio>\n#include <cstring>\n#include <deque>\n#include <functional>\n#include <iomanip>\n#include <locale>\n#include <iostream>\n#include <map>\n#include <memory>\n#include <new>\n#include <numeric>\n#include <queue>\n#include <random>\n#include <set>\n#include <sstream>\n#include <string>\n#include <tuple>\n#include <unordered_map>\n#include <unordered_set>\n#include <utility>\n#include <vector>\n\n#define REP(i,n) for(int i=0;i<(int)(n);i++)\n#define ALL(x) (x).begin(),(x).end()\n\nusing ll = long long;\nusing ld = long double;\n\ntemplate <typename T> T &chmin(T &a, const T &b) { return a = std::min(a, b); }\ntemplate <typename T> T &chmax(T &a, const T &b) { return a = std::max(a, b); }\ntemplate <typename T> int len(const T &x) { return x.size(); }\n\n// template<typename T> constexpr T inf;\n// template<> constexpr int inf<int> = 1e9;\n// template<> constexpr ll inf<ll> = 1e18;\n// template<> constexpr ld inf<ld> = 1e30;\n\nstruct yes_no : std::numpunct<char> {\n  string_type do_truename()  const { return \"Yes\"; }\n  string_type do_falsename() const { return \"No\"; }\n};\n\nvoid solve();\n\nint main() {\n  std::locale loc(std::locale(), new yes_no);\n  std::cout << std::boolalpha << std::setprecision(12) << std::fixed;\n  std::cout.imbue(loc);\n  solve();\n  return 0;\n}\n\nusing namespace std;\n\n/* -------------------------------- Library -------------------------------- */\n\n/* ---------------------------------- Main ---------------------------------- */\n\nint A[128000];\nint B[128000];\n\nvoid solve() {\n  ll N;\n  cin >> N;\n  vector<int> idx;\n  REP(i,N) {\n    if (i > 0) {\n      string op;\n      cin >> op;\n      if (op == \"-\") idx.push_back(i);\n    }\n    cin >> A[i];\n  }\n  REP(i,N) B[i+1] = B[i] + A[i];\n\n  ll sum = accumulate(A, A + N, 0LL);\n  if (idx.empty()) {\n    cout << sum << endl;\n    return;\n  }\n\n  ll res = -1e18;\n  int dec = 0;\n  REP(i,idx.size()-1) {\n    chmax(res, sum - dec * 2 - (B[idx[i+1]] - B[idx[i]]) * 2);\n    dec += A[idx[i]];\n  }\n  chmax(res, sum - dec * 2 - A[idx.back()] * 2);\n  cout << res << endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <utility>\n#include <tuple>\n#include <vector>\n#include <string>\n#include <map>\n#include <unordered_map>\n#include <set>\n#include <unordered_set>\n#include <algorithm>\n#include <functional>\n#include <climits>\n#include <numeric>\n#include <queue>\n#include <cmath>\n#include <iomanip>\n#include <array>\n#include <string>\n#include <stack>\n#include <cassert>\n#include <memory>\n#include <random>\n#include <fstream>\n#include <cfloat>\n\n\nint main() {\n\tint n; std::cin >> n;\n\tstd::vector<int> terms(1, 0); std::cin >> terms[0];\n\tstd::vector<std::string> ops;\n\tlong long int result{ terms[0] };\n\tfor (auto i = 1; i < n; i++) {\n\t\tstd::string op; int value; std::cin >> op >> value;\n\t\tops.push_back(op);\n\t\tterms.push_back(value);\n\t\tif (op == \"+\") {\n\t\t\tresult += value;\n\t\t}\n\t\telse {\n\t\t\tresult -= value;\n\t\t}\n\t}\n\tstd::vector<long long int> sum_back(n + 1, 0);\n\tfor (int i = 1; i <= n; ++i) {\n\t\tsum_back[n - i] = terms[n - i] + sum_back[n - i + 1];\n\t}\n\tint prev_minus = std::distance(ops.begin(), std::find(ops.begin(), ops.end(), \"-\"));\n\tif (prev_minus == ops.size()) {\n\t\tstd::cout << sum_back.front() << '\\n';\n\t\treturn 0;\n\t}\n\tlong long int prev_sum = std::accumulate(terms.begin(), std::next(terms.begin(), prev_minus + 1), 0LL, [](const long long int acc, const int t) {return acc + t; });\n\twhile (prev_minus < ops.size()) {\n\t\tconst int next_minus = std::distance(ops.begin(), std::find(std::next(ops.begin(), prev_minus + 1), ops.end(), \"-\"));\n\t\tif (next_minus < ops.size()) {\n\t\t\tconst auto sum = std::accumulate(std::next(terms.begin(), prev_minus + 1), std::next(terms.begin(), next_minus + 1), 0LL, [](const long long int acc, const int t) {return acc + t; });\n\t\t\tconst auto all_sum = prev_sum - sum + sum_back[next_minus + 1];\n\t\t\tresult = std::max(result, all_sum);\n\t\t\tprev_sum += sum - (terms[prev_minus + 1] << 1);\n\t\t}\n\t\tprev_minus = next_minus;\n\t}\n\tstd::cout << result << std::endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\nchar p[300005][10];\nlong long qs[300005],qs2[300005];\nmain()\n{\n\tint t,ck=1,ck2=0;\n    long long s,cal=0,tmp=0;\n    scanf(\"%d\",&t);\n    for(int i = 1;i <= 2*t-1;i++)\n    {\n        if(i%2==1)\n        {\n            scanf(\"%lld\",&qs[i/2+1]);\n            long long cs=qs[i/2+1];\n            if(p[i/2][0]=='-')\n            cs=-cs;\n            qs2[i/2+1]=qs2[i/2]+cs;\n            //printf(\"%lld-->\",qs2[i/2+1]);\n        }\n        else\n        {\n            scanf(\"%s\",p[i/2]);\n        }\n    }\n    long long cas=0,mx=qs2[t];\n    for(int i = t;i >= 1;i--)\n    {\n        cas+=qs[i];\n        qs[i]+=qs[i+1];\n        if(p[i-1][0]=='-')\n        {\n            //printf(\"-->\");\n            mx=max(mx,qs2[i-1]-2*cas+qs[i]);\n            //printf(\"pos = %d    %lld<--%lld\\n\",i,mx,qs2[i-1]-2*cas+qs[i]);\n            cas=0;\n        }\n    }\n    printf(\"%lld\",mx);\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n\nusing namespace std;\n\ntypedef long long LL;\n#define INF 0x3f3f3f3f3f3f3f3fLL\n\nchar s[2];\nLL n,x,f[3],g[3];\n\nvoid upd(LL x,LL &y){y=max(y,x);}\n\nint main(){\n\tscanf(\"%lld\",&n);\n\tscanf(\"%lld\",&x); f[0]=x; f[1]=f[2]=-INF;\n\tfor (LL i=1;i<n;++i){\n\t\tg[0]=f[0]; g[1]=f[1]; g[2]=f[2];\n\t\tf[0]=f[1]=f[2]=-INF;\n\t\tscanf(\"%s%lld\",s,&x);\n\t\tif (s[0]=='-'){\n\t\t\tupd(g[0]-x,f[0]);\n\t\t\tupd(g[0]-x,f[1]);\n\t\t\tupd(g[1]+x,f[0]);\n\t\t\tupd(g[1]+x,f[1]);\n\t\t\tupd(g[1]+x,f[2]);\n\t\t\tupd(g[2]-x,f[1]);\n\t\t\tupd(g[2]-x,f[2]);\n\t\t}\n\t\telse{\n\t\t\tupd(g[0]+x,f[0]);\n\t\t\tupd(g[1]-x,f[0]);\n\t\t\tupd(g[1]-x,f[1]);\n\t\t\tupd(g[2]+x,f[1]);\n\t\t\tupd(g[2]+x,f[2]);\n\t\t}\n\t}\n\tprintf(\"%lld\\n\",f[0]);\n\t\n\treturn 0;\n}\n\t\t\t"
  },
  {
    "language": "C++",
    "code": "//khodaya khodet komak kon\n#include <bits/stdc++.h>\n\n#define F first\n#define S second\n#define pb push_back\n#define all(x) x.begin(), x.end()\n#pragma GCC optimise (\"ofast\")\n#pragma GCC optimise(\"unroll-loops\")\n#define int long long\n\nusing namespace std;\n\ntypedef long long ll;\ntypedef pair<int, int> pii;\ntypedef vector<int> vi;\n\nconst int N = 3000 + 10;\nconst ll MOD = 1000000000 + 7;\nconst ll INF = 1000000000000000000;\nconst ll LOG = 25;\n\nvector<int> nw;\nint n, a[N], dp[N][4];\nbool What[N];\n\nint POW(int x){\n\treturn (x % 2 ? -1 : 1);\n}\n\nint32_t main(){\n\tios::sync_with_stdio(0); cin.tie(0); cout.tie(0);\n\tcin >> n;\n\tfor( int i = 1; i <= n; i++){\n\t\tcin >> a[i];\n\t\tif (i != n){\n\t\t\tchar c;\n\t\t\tcin >> c;\n\t\t\tif (c == '-') What[i] = 1;\n\t\t}\n\t}\n\tfor( int i = 0; i < N; i++) for (int j = 0; j < 3; j++) dp[i][j] = -INF;\n\tdp[0][0] = 0;\n\t//cout << POW(1) << ' ' << POW(2) << '\\n';\n\tfor (int i = 1; i <= n; i++){\n\t\tfor (int j = 0; j <= 2; j++){\n\t\t\tif (What[i - 1]){\n\t\t\t\tdp[i][j + 1] = max(dp[i][j + 1], dp[i - 1][j] + POW(j + 1) * a[i]);\n\t\t\t\tif (j != 0){\n\t\t\t\t\tdp[i][j - 1] = max(dp[i][j - 1], dp[i - 1][j] + POW(j + 1) * a[i]);\n\t\t\t\t}\n\t\t\t\tdp[i][j] = max(dp[i][j], dp[i - 1][j] + POW(j + 1) * a[i]);\n\t\t\t}else{\n\t\t\t\t//cout << i << '\\n';\n\t\t\t\tif (j != 0) dp[i][j - 1] = max(dp[i][j - 1], dp[i - 1][j] + POW(j) * a[i]);\n\t\t\t\tdp[i][j] = max(dp[i][j], dp[i - 1][j] + POW(j) * a[i]);\n\t\t\t}\n\t\t}\n\t}\n\t//cout << dp[1][0] << ' ' << dp[2][1] << ' ' << dp[3][1] << ' ' << dp[4][0] << '\\n';\n\tll ans = max(dp[n][0], max(dp[n][2], dp[n][1]));\n\tcout << ans;\n\n\n\n\n\n\n\n\n\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#define yuki(x, y) for(int i = x, __yuki = y; i < __yuki; ++i)\n#define yukj(x, y) for(int j = x, __yukj = y; j < __yukj; ++j)\n#define yukii(x, y) for(int i = x; __yukii = y; i <= __yukii; ++i)\n#define yukji(x, y) for(int j = x; __yukji = y; j <= __yukji; ++j)\n#define yuk(x, y, z) for(int x = y, __yuk = z; x < __yuk; ++x)\n#define yui(x, y, z) for(int x = y, __yui = z; x >= __yui; --x)\n#define sclr(x) memset(x, 0, sizeof(x))\n#define sclr1(x) memset(x, -1, sizeof(x))\n#define scl(x, y) memset(x, y, sizeof(x))\n#define ft first\n#define sc second\n#include <cstdio>\n#include <cstring>\n#include <algorithm>\nusing namespace std;\ntypedef long long lol;\nint n, a[100100];\nbool op[100100];\nvoid sread()\n{\n    scanf(\"%d\", &n);\n    char s[10];\n    yuki(0, n-1)\n    {\n\tscanf(\"%d%s\", a+i, s);\n\top[i+1] = s[0] == '-';\n    }\n    scanf(\"%d\", a+n-1);\n}\nint main(int argc, char **argv)\n{\n    sread();\n    lol maxs = 0, mins = 0, curs = 0, t;\n    yui(i, n-1, 1)\n\tif(op[i])\n\t{\n\t    t = maxs;\n\t    maxs = max(-a[i]+curs+maxs, -(a[i]+curs+mins));\n\t    mins = min(-(a[i]+curs)+mins, -(a[i]+curs+t));\n\t    curs = 0;\n\t}else\n\t    curs += a[i];\n    printf(\"%lld\\n\", maxs+curs+a[0]);\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstdio>\n#define N 100005\n\nusing namespace std;\n\nint n;\nint val[N], func[N], nex[N];\nlong long sum[N];\n\ninline void read(int &x) {\n\tx = 0; char ch = getchar();\n\twhile(!isdigit(ch)) ch = getchar();\n\twhile(isdigit(ch)) x = x * 10 + ch - '0', ch = getchar();\n}\n\nint main() {\n\tread(n);\n\tread(val[1]), func[1] = 1;\n\tfor(int i = 2; i <= n; ++i) {\n\t\tfunc[i] = (getchar() == '+' ? 1 : -1);\n\t\tread(val[i]);\n//\t\tprintf(\"%d\\n\", func[i] * val[i]);\n\t}\n\t\n\tnex[n] = n + 1;\n\tfor(int i = n; i > 1; --i) {\n\t\tsum[i] = val[i] + sum[i + 1];\n\t\tnex[i - 1] = (func[i] == -1 ? i : nex[i]);\n\t}\n\t\n\tlong long ans, cur, res;\n\tans = sum[1], cur = val[1];\n\tfor(int i = 2; i <= n; ++i) {\n\t\tif(func[i] == -1) {\n\t\t\tres = cur - (sum[i] - sum[nex[i]]) + sum[nex[i]];\n\t\t\tif(res > ans) ans = res;\n\t\t}\n\t\tcur += func[i] * val[i];\n\t}\n\t\n\tcout << ans << endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\nusing ll = long long;\n\nint main() {\n\tcin.tie(0);\n\tios::sync_with_stdio(false);\n\tint n;\n\tcin >> n;\n\tint cnt = 0;\n\tll ans;\n\tcin >> ans;\n\tfor (int i = 1; i < n; i++) {\n\t\tchar op;\n\t\tint a;\n\t\tcin >> op >> a;\n\t\tif (op == '-') cnt++;\n\t\tif (cnt % 2 == 0) ans += a;\n\t\telse ans -= a;\n\t}\n\tcout << ans << endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\nconst int N=100005;\ntypedef long long ll;\nint n,A[N];\nll f0,f1,f2;\nchar op[N];\nint main()\n{\n\tscanf(\"%d%d\",&n,A);\n\tfor(int i=1;i<n;i++)scanf(\" %c%d\",op+i,A+i);\n\tf0=A[0];f1=f2=-(1ll<<60);\n\tfor(int i=1;i<n;i++)\n\t{\n\t\tif(op[i]=='-')\n\t\t{\n\t\t\tf0-=A[i],f1+=A[i],f2-=A[i];\n\t\t\tif(f1>f2)f2=f1;\n\t\t\tif(f0>f1)f1=f0;\n\t\t}\n\t\telse\n\t\t\tf0+=A[i],f1-=A[i],f2+=A[i];\n\t\tif(f1>f0)f0=f1;\n\t\tif(f2>f1)f1=f2;\n\t}\n\tprintf(\"%lld\\n\",f0);\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long LL;\n\nconst int mod=1e9+7,N=1e6+100,inv2=(mod+1)>>1, inv6=(mod+1)/6;\nLL n,nn,Ans,s1[N],s2[N],s3[N];\n\nvoid Inc(LL &x,LL y) {x+=y, x=x>=mod?x-mod:x;}\n\nint main()\n{\n\tscanf(\"%lld\",&n); nn=n%mod;\n\tfor(LL x=1,tp=1;x*x<=n;++x, tp=x*x%mod)\n\t{\n\t\ts1[x]=s1[x-1], s2[x]=s2[x-1], s3[x]=s3[x-1],\n\t\tInc(s1[x],tp), Inc(s2[x],tp*tp%mod), Inc(s3[x],tp*tp%mod*tp%mod);\n\t}\n\tfor(LL x=0;x*x<=n;++x)\n\t{\n\t\tLL y=sqrt(n-x*x), tp=x*x%mod;\n\t\tLL tmp=0;\n\t\tInc(tmp,(nn+1)*inv2%mod*(nn*nn%mod+nn+tp-tp*tp%mod)%mod*(2*y+1)%mod);\n\t\tInc(tmp,mod-(nn+1)*inv2%mod*(2*tp+mod-1)%mod*s1[y]%mod*2%mod);\n\t\tInc(tmp,mod-(nn+1)%mod*inv2%mod*s2[y]%mod*2%mod);\n \t\tInc(tmp,inv6*(6*tp%mod*tp%mod-6*tp%mod+mod+1)%mod*s1[y]%mod*2%mod);\n\t\tInc(tmp,inv6*(6*tp%mod+mod-3)%mod*s2[y]%mod*2%mod);\n\t\tInc(tmp,inv6*(4*s3[y])%mod);\n\t\tInc(tmp,inv6*(2*tp%mod*tp%mod*tp%mod-3*tp*tp%mod+mod+tp)%mod*(2*y+1)%mod);\n\t\tInc(tmp,mod-(2*nn+1)*inv6%mod*nn%mod*(nn+1)%mod*(2*y+1)%mod);\n\t\tif(x) Inc(tmp,tmp); Inc(Ans,tmp);\n\t}\n\tprintf(\"%lld\",Ans);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "// Crt. 2020-01-07  16:43:40\n#include <algorithm>\n#include <iostream>\n#include <cstring>\n#include <cstdio>\n#define N 200005\nusing namespace std;\ntypedef long long ll;\n\nint n, a[N];\nll sum[N], asum[N];\n\ninline int Abs(int x) {\n    return x < 0 ? -x : x;\n}\n\nint main(){\n#ifdef LOCAL_JUDGE\n    freopen(\"work.in\", \"r\", stdin);\n    freopen(\"work.out\", \"w\", stdout);\n#endif\n\n    cin >> n;\n\n    scanf(\"%d\", a + 1);\n    for (int i = 2; i <= n; ++i) {\n        char pos;\n        scanf(\" %c %d\", &pos, a + i);\n        if (pos == '-') a[i] *= -1;\n    }\n\n    for (int i = 1; i <= n; ++i)\n        sum[i] = sum[i - 1] + a[i];\n    for (int i = n; i >= 1; --i)\n        asum[i] = asum[i + 1] + Abs(a[i]);\n\n    ll ans = sum[N];\n    for (int i = 2, j; i <= n; ++i) {\n        if (a[i] > 0) continue;\n        for (j = i; j < n && a[j + 1] > 0; ++j);\n        ans = max(ans, sum[i] * 2 - sum[j] + asum[j + 1]);\n    }\n\n    cout << ans << endl;\n\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define N 100005\n#define LL long long\n#define INF (1LL<<60)\nusing namespace std;\nint n,m; LL a[N],b[N],sum,ans=-INF;\nint main()\n{\n\tint i,x; char op;\n\tscanf(\"%d\",&n);\n\tfor(i=1;i<=n;i++){\n\t\tif(i==1) op='+'; else scanf(\"%c\",&op);\n\t\tscanf(\"%d \",&x),sum+=x;\n\t\tif(op=='-') a[++m]=x; else b[m]+=x;\n\t  }\n\tif(!m) ans=sum;\n\tfor(i=1;i<=m;i++){\n\t\tans=max(ans,sum-2*(a[i]+b[i]));\n\t\tsum-=2*a[i];\n\t  }\n\tcout<<ans;\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\ntypedef int int_t;\n#define int long long\n\nconst int maxn=1e5+5;\nconst int INF=0x3f3f3f3f3f3f3f3fll;\n\nint F[maxn][4];\nint A[maxn],N;\nint op[maxn];\n\nint_t main(){\n\tscanf(\"%lld\",&N);\n\tfor(int i=1;i<=N;i++){\n\t\tint bj=1,x;\n\t\tif(i>1){\n\t\t\tchar buf[10];scanf(\"%s\",buf);\n\t\t\tbj=buf[0]=='+'?+1:-1;\n\t\t}\n\t\tscanf(\"%lld\",&x);A[i]=bj*x;op[i]=bj;\n\t}\n\tF[0][1]=-INF;F[0][2]=-INF;\n\tfor(int i=1;i<=N;i++){\n\t\tF[i][0]=max({F[i-1][0]+A[i],F[i-1][1]+A[i],F[i-1][2]+A[i]});\n\t\tF[i][1]=max({op[i]<0?F[i-1][0]+A[i]:-INF,F[i-1][1]-A[i],F[i-1][2]-A[i]});\n\t\tF[i][2]=max({op[i]<0?F[i-1][1]-A[i]:-INF,F[i-1][2]+A[i]});\n\t}\n\tcout<<max({F[N][0],F[N][1],F[N][2]})<<'\\n';\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <string>\n#include <iostream>\n#include <algorithm>\nusing namespace std;\nint n, a[100009]; long long dp[100009][3]; bool vis[100009][3]; string s[100009];\nlong long solve(int pos, int depth) {\n\tif (pos == n) return 0;\n\tif (vis[pos][depth]) return dp[pos][depth];\n\tlong long ret = -1LL << 61;\n\tif (s[pos] == \"+\") {\n\t\tret = solve(pos + 1, depth) + a[pos] * (depth % 2 ? -1 : 1);\n\t\tif (depth > 0) ret = max(ret, solve(pos + 1, depth - 1) + a[pos] * (depth % 2 ? 1 : -1));\n\t}\n\telse {\n\t\tret = solve(pos + 1, depth) + a[pos] * (depth % 2 ? 1 : -1);\n\t\tif (depth > 0) ret = max(ret, solve(pos + 1, depth - 1) + a[pos] * (depth % 2 ? -1 : 1));\n\t\tif (depth < 2) ret = max(ret, solve(pos + 1, depth + 1) + a[pos] * (depth % 2 ? 1 : -1));\n\t}\n\tvis[pos][depth] = true;\n\tdp[pos][depth] = ret;\n\treturn ret;\n}\nint main() {\n\tcin >> n;\n\ts[0] = \"+\"; cin >> a[0];\n\tfor (int i = 1; i < n; i++) cin >> s[i] >> a[i];\n\tlong long ret = solve(0, 0);\n\tcout << ret << endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<cstring>\n#include<algorithm>\n#include<vector>\n#define MAXN 100000\nusing namespace std;\nvector<int> vec;\nint sum[MAXN+5],sum2[MAXN+5],a[MAXN+5],n;\nbool dec[MAXN+5];\nchar str[5];\nint main()\n{\n\tscanf(\"%d\",&n);\n\tscanf(\"%d\",&a[1]);\n\tfor(int i=2;i<=n;i++)\n\t{\n\t\tscanf(\"%s %d\",str,&a[i]);\n\t\tif(str[0]=='-')\n\t\t\tvec.push_back(i),dec[i]=true;\n\t}\n\tfor(int i=1;i<=n;i++)\n\t\tsum[i]=sum[i-1]+a[i];\n\tfor(int i=1;i<=n;i++)\n\t\tif(dec[i]==true)\n\t\t\tsum2[i]=sum2[i-1]-a[i];\n\t\telse\n\t\t\tsum2[i]=sum2[i-1]+a[i];\n\tint ans=sum2[n],pos1,pos2;\n\tfor(int i=0;i<(int)vec.size()-1;i++)\n\t{\n\t\tpos1=vec[i],pos2=vec[i+1];\n\t\tans=max(ans,sum2[pos1]-(sum[pos2-1]-sum[pos1])+(sum[n]-sum[pos2-1]));\n\t}\n\tprintf(\"%d\\n\",ans);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<algorithm>\n#define maxn 100005\n#define LL long long\n#define INF (LL)(1e16)\nusing namespace std;\nint n,a[maxn],f[maxn],pre[maxn];\nLL sum,ans=-INF;\nint main()\n{\n\tscanf(\"%d%d\",&n,&a[1]);\n\tfor(int i=2;i<=n;i++)\n\t{\n\t\tchar s[5];\n\t\tscanf(\"%s\",s);\n\t\tif(s[0]=='-') f[i]=1;\n\t\tscanf(\"%d\",&a[i]);\n\t}\n\tfor(int i=n;i>0;i--) pre[i]=pre[i+1]+a[i];\n\tint la=1;\n\twhile(la<=n&&!f[la]) sum+=1ll*a[la++];\n\twhile(la<=n)\n\t{\n\t\tint la1=la+1; LL sum1=0;\n\t\twhile(la1<=n&&!f[la1]) sum1+=1ll*a[la1++];\n\t\tif(la1<=n) ans=max(ans,sum-sum1-a[la]+pre[la1]);\n\t\tsum+=sum1-a[la]; la=la1; \n\t}\n\tans=max(ans,sum);\n\tprintf(\"%lld\\n\",ans);\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define int long long\n#define double long double\nusing namespace std;\nconst int N = 200010;\nconst int INF = 1LL<<55;\nconst int mod = (1e9)+7;\nconst double EPS = 1e-8;\nconst double PI = 6.0 * asin(0.5);\ntypedef pair<int,int> P;\ntypedef long long ll;\nostream& operator<<(ostream& o,P p){return o<<\"(\"<<p.first<<\",\"<<p.second<<\")\";}\nistream& operator>>(istream& i,P &p){return i>>p.first>>p.second;}\ntemplate<class T> istream& operator>>(istream& i,vector<T> &a){for(auto &t:a)cin>>t;return i;}\ntemplate<class T> T Max(T &a,T b){return a=max(a,b);}\ntemplate<class T> T Min(T &a,T b){return a=min(a,b);}\ntemplate<class T> void prArr(T a,string s=\" \"){int i=0;for(auto t:a)cout<<(i++?s:\"\")<<t;cout<<endl;}\n\n\nclass CumulativeSum{\npublic:\n  vector<int> sum;\n  CumulativeSum(){}\n  CumulativeSum(vector<int> A){\n    int n = A.size();\n    sum.resize(n+1,0);\n    for(int i=1;i<=n;i++) sum[i] += sum[i-1] + A[i-1];\n  }\n  int get(int l,int r){return sum[r] - sum[l];} //[)\n};\n\nCumulativeSum sum;\n\n\nint n;\nvector<int> A;\nvector<char> op;\nint f[2] = {1,-1};\n\nint used[N][3],mem[N][3];\n\nint dfs(int idx,int cnt){\n  if(cnt == 2) return sum.get(idx,n);\n  if(idx == n) return 0;\n  if(used[idx][cnt]++) return mem[idx][cnt];\n  \n  char ch = op[idx-1];\n  cnt += ch == '-';\n  int res = 0;\n  int val = f[cnt%2] * A[idx];\n  if(cnt) Max(res,val + dfs(idx+1,cnt-1));\n  Max(res,val + dfs(idx+1,cnt));\n  return mem[idx][cnt] = res;\n}\n\n\nsigned main(){\n  cin>>n;\n  A.resize(n);\n  op.resize(n);\n  for(int i=0;i<n;i++) {\n    cin>>A[i];\n    if(i!=n-1) cin>>op[i];\n  }\n  sum = CumulativeSum(A);\n  cout<<A[0] + dfs(1,0)<<endl;\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<stdio.h>\n#include<algorithm>\n#include<cmath>\n#include<vector>\n#include<string>\n#include<map>\n#include<queue>\n#include<stack>\n#include<iomanip>\n#include<set>\n#include<unordered_map>\nusing namespace std ;\n\n#define MAXN 100007\n\nint n ;\nint a[ MAXN ] ;\nchar op[ MAXN ] ;\n\nint nxt[ MAXN ] ;\nlong long pref[ MAXN ] ;\n\nvoid input ( ) {\n    cin >> n ;\n    for ( int i = 1 ; i <= n ; ++ i ) {\n        if ( i == 1 ) { op[ i ] = '+' ; }\n        else { cin >> op[ i ] ; }\n        cin >> a[ i ] ;\n    }\n}\n\nvoid solve ( ) {\n    pref[ 0 ] = 0 ;\n    long long ans = 0 ;\n    for ( int i = 1 ; i <= n ; ++ i ) {\n        pref[ i ] = pref[ i - 1 ] + a[ i ] ;\n        if ( op[ i ] == '-' ) { ans -= a[ i ] ; }\n        else { ans += a[ i ] ; }\n    }\n    int lst = n + 1 ;\n    for ( int i = n ; i >= 1 ; -- i ) {\n        nxt[ i ] = lst ;\n        if ( op[ i ] == '-' ) { lst = i ; }\n    }\n    long long aux = 0 ;\n    for ( int i = 1 ; i <= n ; ++ i ) {\n        if ( op[ i ] == '-' ) {\n            long long sr = aux - ( pref[ nxt[ i ] - 1 ] - pref[ i - 1 ] ) + ( pref[ n ] - pref[ nxt[ i ] - 1 ] ) ;\n            ans = max ( ans , sr ) ;\n        }\n        if ( op[ i ] == '-' ) { aux -= a[ i ] ; }\n        else { aux += a[ i ] ; }\n    }\n    printf ( \"%lld\\n\" , ans ) ;\n}\n\n\nint main ( ) {\n    ios_base :: sync_with_stdio ( false ) ;\n    cin.tie ( NULL ) ;\n    input ( ) ;\n    solve ( ) ;\n    return 0 ;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<algorithm>\n#include<iostream>\n#include<cstring>\n#include<cstdio>\n#include<cmath>\n#define LL long long\n#define M 100020\n#define INF 100000000000000000ll\nusing namespace std;\nint read(){\n\tint nm=0,fh=1; char cw=getchar();\n\tfor(;!isdigit(cw);cw=getchar()) if(cw=='-') fh=-fh;\n\tfor(;isdigit(cw);cw=getchar()) nm=nm*10+(cw-'0');\n\treturn nm*fh;\n}\nLL n,x,F[3];\nint main(){\n\tn=read(),F[1]=F[2]=-INF;\n\twhile(n--){\n\t\tx=read(),F[0]+=x,F[1]-=x,F[2]+=x;\n\t\tif(x<0) F[2]=max(F[1],F[2]),F[1]=max(F[1],F[0]);\n\t\tF[0]=max(F[0],F[1]),F[1]=max(F[1],F[2]);\n\t}\n\tprintf(\"%lld\\n\",F[0]);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<iostream>\n#define gmax(x, y) if ((y) > x) x = (y);\nusing namespace std;\ntypedef long long ll;\ninline char nc() {\n\tstatic char b[1<<12],*s=b,*t=b;\n\treturn s==t&&(t=(s=b)+fread(b,1,1<<12,stdin),s==t)?-1:*s++;\n}\ntemplate < class T >\ninline void read(T &x) {\n\tchar b = nc(); x = 0;\n\tfor (; !isdigit(b); b = nc());\n\tfor (; isdigit(b); b = nc()) x = x * 10 + b - '0';\n}\ninline ll read() {\n\tchar b = nc();\n\tfor (; b != '-' && b != '+'; b = nc());\n\treturn b == '-' ? -1 : 1;\n}\nint n;\nll f0, f1, f2;\nint main() {\n\tread(n); read(f0); f1 = f2 = -1e15;\n\tfor (int a, op, i = 1; i < n; ++i) {\n\t\top = read(); read(a);\n\t\tf0 += a * op; f1 -= a * op; f2 += a * op;\n\t\tif (op == -1) {\n\t\t\tgmax(f2, f1); gmax(f1, f0);\n\t\t} gmax(f1, f2); gmax(f0, f1);\n\t} printf(\"%lld\\n\", f0);\n\treturn 0;\t\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <string>\n#include <algorithm>\n#include <set>\n#include <cassert>\n\nusing namespace std;\n\nconstexpr int64_t kMod = 1e9+7;\n\nint main() {\n    std::vector<int> v;\n\n    int n;\n    cin >> n;\n\n    int64_t answer = 0;\n    cin >> answer;\n    for (int i = 0; i < n - 1; i++) {\n        char c;\n        int x;\n        cin >> c >> x;\n        int new_x = x * (c == '+' ? 1 : -1);\n        if (v.empty()) {\n            v.push_back(new_x);\n        } else {\n            if (new_x > 0 && v.back() >= 1) {\n                v.back() += new_x;\n                continue;\n            }\n            if ((new_x > 0 && v.back() < 0) || (new_x < 0 && v.back() > 0)) {\n                v.push_back(new_x);\n                continue;\n            }\n            v.push_back(0);\n            v.push_back(new_x);\n        }\n    }\n    if (v.back() < 0) {\n        v.push_back(0);\n    }\n\n    int64_t sum = 0;\n    for (int i = 0; i < (int)v.size(); i++) {\n        sum += v[i];\n    }\n    int64_t best_ans = sum;\n    int64_t cur_sum = 0;\n\n    for (int i = (int)v.size() - 1; i >= 0; i--) {\n        assert(v[i] >= 0);\n        assert(i > 0);\n        assert(v[i - 1] < 0);\n\n        sum -= v[i];\n        sum -= v[i - 1];\n        best_ans = max(best_ans, cur_sum -v[i] + v[i - 1] + sum);\n        cur_sum += v[i];\n        cur_sum -= v[i - 1];\n        i--;\n    }\n    cout << best_ans + answer << endl;\n\n    return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\n#include<string>\n#include<vector>\n#include<set>\n#include<map>\n#include<queue>\nusing namespace std;\n \ntypedef long long ll;\ntypedef pair<ll,ll> P;\n \n#define pb push_back\n#define fr first\n#define sc second\n\nint main(){\n\tint N;\n\tscanf(\"%d\",&N);\n\tll sum;\n\tscanf(\"%lld\",&sum);\n\t\n\tstatic int cnt = 0;\n\tstatic vector<ll> vec[100010];\n\tfor(int i = 2 ; i <= N ; i ++){\n\t\tchar c;\n\t\tll x;\n\t\tscanf(\" %c %lld\",&c,&x);\n\t\tsum += x;\n\t\tif(c == '-')cnt ++;\n\t\tvec[cnt].pb(x);\n\t}\n\tll ret = 1000000000000000000;\n\tll S = 0;\n\tfor(int i = 1 ; i <= cnt ; i ++){\n\t\tif(vec[i].size() == 0){\n\t\t\tret = min( ret , S );\n\t\t\tbreak;\n\t\t}\n\t\tll T = S;\n\t\tfor(int j = 0 ; j < vec[i].size() ; j ++){\n\t\t\tT += vec[i][j];\n\t\t}\n\t\tret = min( ret , T );\n\t\tS += vec[i][0];\n\t}\n\tcout << sum-ret*2 << endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define int long long\n#define fi first\n#define se second\n#define PB push_back\nusing namespace std;\ntypedef pair<int, int> P1;\ntypedef pair<int, pair<int, int> > P2;\nstatic const int INF = 1ll<<60;\nstatic const int dx[] = { 1, -1, 0, 0, };\nstatic const int dy[] = { 0, 0, 1, -1 };\nstatic const int mod = 1000000007;\n\nint N;\nint A[100005];\nchar op[100005];\nint dp[100005][5];\n//    [i項目][i項目までに開いているかっこの数]\n\nint solve(){\n    for(int i=0;i<100005;++i)for(int j=0;j<5;++j)dp[i][j]=-INF;\n    dp[0][0] = A[0];\n    for(int i=0;i<N;++i){\n        for(int j=0;j<=min(i,3ll);++j){\n            int f;\n            if(j%2==0)f=1;\n            else f=-1;\n            int t1 = f*A[i+1];\n            //cout<<t1<<endl;\n            //cout<<i<<\" \"<<j<<endl;\n            if(op[i+1]=='+'){\n                dp[i+1][j] = max(dp[i][j]+t1,dp[i+1][j]);\n                if(j!=0)dp[i+1][j-1] = max(dp[i][j]+t1,dp[i+1][j-1]);\n            }\n            else {\n                dp[i+1][j] = max(dp[i][j]-t1,dp[i+1][j]);\n                dp[i+1][j+1] = max(dp[i][j]-t1,dp[i+1][j+1]);\n                if(j!=0)dp[i+1][j-1] = max(dp[i][j]-t1,dp[i+1][j-1]);\n            }\n            //cout<<i<<\" \"<<j<<endl;\n            //cout<<dp[i][j]<<\" \"<<dp[i+1][j]<<\" \"<<dp[i+1][j+1]<<endl;\n        }\n    }\n    int ans=-INF;\n    if(ans>=INF)cout<<1/0<<endl;\n    for(int i=0;i<N;++i)ans=max(dp[N][i],ans);\n    return ans;\n}\n\n\nsigned main(){\n    cin>>N;\n    op[0]='+';\n    for(int i=0;i<N;++i){\n        cin>>A[i];\n        if(i!=N-1)cin>>op[i+1];\n    }\n    cout<<solve()<<endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<functional>\n#include <algorithm>\n#include  <iostream>\n#include   <ctype.h>\n#include   <cstring>\n#include   <fstream>\n#include    <cstdio>\n#include    <vector>\n#include    <string>\n#include     <cmath>\n#include     <deque>\n#include     <stack>\n#include     <queue>\n#include      <list>\n#include       <set>\n#include       <map>\n#define INF 0X7FFFFFFF\n#define PI acos(-1.0)\ntypedef long long ll;\nusing namespace std;\nconst int mod = 1e9 + 7;\ninline int getint()\n{\n\tint w = 0, q = 0;\n\tchar c = getchar();\n\twhile ((c<'0' || c>'9') && c != '-') c = getchar();\n\tif (c == '-') q = 1, c = getchar();\n\twhile (c >= '0'&&c <= '9') w = w * 10 + c - '0', c = getchar();\n\treturn q ? -w : w;\n}\nint n;\nll a[100005];\nchar c[100005];\nint main() {\n\tn = getint();\n\tint i = 0;\n\tll ans = 0;\n\tll sum = 0;\n\twhile (i < n) {\n\t\ta[i] = getint();\n\t\tsum += a[i];\n\t\tif (i != 0 && c[i - 1] == '-') {\n\t\t\tans -= a[i];\n\t\t}\n\t\telse {\n\t\t\tans += a[i];\n\t\t}\n\t\tif (i == n - 1) {\n\t\t\tbreak;\n\t\t}\n\t\tc[i] = getchar();\n\t\ti++;\n\t}\n\tint flag = 1;\n\tfor (int i = 0; i < n - 1; i++) {\n\t\tif (c[i] == '-') {\n\t\t\tsum -= a[i + 1] * 2;\n\t\t\tint j = i + 1;\n\t\t\twhile (j < n) {\n\t\t\t\tif (c[j] == '+') {\n\t\t\t\t\tsum -= a[j + 1] * 2;\n\t\t\t\t\tj++;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t}\n\tans = max(sum, ans);\n\tcout << ans << endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n#define maxn 100010\ntemplate <typename T>inline T read()\n{\n    register T sum=0;\n    register char cc=getchar();\n    int sym=1;\n    while(cc!='-'&&(cc>'9'||cc<'0'))cc=getchar();\n    if(cc=='-')sym=-1,cc=getchar();\n    sum=sum*10+cc-'0';\n    cc=getchar();\n    while(cc>='0'&&cc<='9')sum=sum*10+cc-'0',cc=getchar();\n    return sym*sum;\n}\ntemplate <typename T>inline T read(T &a)\n{\n    a=read<T>();\n    return a;\n}\ntemplate <typename T,typename... Others> inline void read(T& a, Others&... b)\n{\n    a=read(a);\n\tread(b...);\n}\nint n,l=1,r,a[maxn],flg[maxn];\nlong long ans,f[maxn],g[maxn];\nint main()\n{\n\tread(n);\n\tflg[1]=1;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tread(a[i]);\n\t\tif(i<n)\n\t\t{\n\t\t\tchar cc;\n\t\t\tscanf(\"%s\",&cc);\n\t\t\tif(cc=='-')\n\t\t\t\tflg[i+1]=-1;\n\t\t\telse\n\t\t\t\tflg[i+1]=1;\n\t\t}\n\t}\n\tfor(int i=1;i<=n;i++)\n\t\tf[i]=f[i-1]+flg[i]*a[i];\n\tfor(int i=n;i>=1;i--)\n\t\tg[i]=g[i+1]+a[i];\n\twhile(l<=n&&flg[l]==1)\n\t\tl+=1;\n\tfor(;l<=n;l=r+1)\n\t{\n\t\tlong long s=a[l];\n\t\tr=l;\n\t\twhile(r<n&&flg[r+1]==1)\n\t\t{\n\t\t\tr+=1;\n\t\t\ts+=a[r];\n\t\t}\n\t\tans=max(ans,f[l-1]+g[r+1]-s);\n\t}\n\tprintf(\"%lld\\n\",ans);\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "// This amazing code is by Eric Sunli Chen.\n#include <algorithm>\n#include <bitset>\n#include <cmath>\n#include <cstring>\n#include <cstdio>\n#include <cstdlib>\n#include <ctime>\n#include <iomanip>\n#include <iostream>\n#include <map>\n#include <queue>\n#include <set>\n#include <string>\n#include <utility>\n#include <vector>\nusing namespace std;\ntemplate<typename T> void get_int(T &x)\n{\n\tchar t=getchar();\n\tbool neg=false;\n\tx=0;\n\tfor(; (t>'9'||t<'0')&&t!='-'; t=getchar());\n\tif(t=='-')neg=true,t=getchar();\n\tfor(; t<='9'&&t>='0'; t=getchar())x=x*10+t-'0';\n\tif(neg)x=-x;\n}\ntemplate<typename T> void print_int(T x)\n{\n\tif(x<0)putchar('-'),x=-x;\n\tshort a[20]= {},sz=0;\n\twhile(x>0)a[sz++]=x%10,x/=10;\n\tif(sz==0)putchar('0');\n\tfor(int i=sz-1; i>=0; i--)putchar('0'+a[i]);\n}\n#define ff first\n#define ss second\n#define pb push_back\n#define mp make_pair\n#define get1(a) get_int(a)\n#define get2(a,b) get1(a),get1(b)\n#define get3(a,b,c) get1(a),get2(b,c)\n#define printendl(a) print_int(a),puts(\"\")\ntypedef long long LL;\ntypedef unsigned long long uLL;\ntypedef pair<int,int> pii;\nconst int inf=0x3f3f3f3f;\nconst LL Linf=1ll<<61;\nconst double pi=acos(-1.0);\n\nchar s[100111],t[5];\nint n,a[100111];\nLL dp[100111][3];\nint main()\n{\n\tget1(n);\n\ts[1]='+';\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tif(i>1)\n\t\t{\n\t\t\tscanf(\"%s\",t);\n\t\t\ts[i]=t[0];\n\t\t}\n\t\tget1(a[i]);\n\t}\n\tfor(int i=0;i<100111;i++)for(int j=0;j<3;j++)dp[i][j]=-Linf;\n\tdp[1][0]=0;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tfor(int j=0;j<3;j++)\n\t\t{\n\t\t\tLL t=dp[i][j];if((s[i]=='+')^(j&1))t+=a[i];else t-=a[i];\n\t\t\tif(s[i]=='-')dp[i+1][j+1]=max(dp[i+1][j+1],t);\n\t\t\tfor(int j2=0;j2<=j;j2++)dp[i+1][j2]=max(dp[i+1][j2],t);\n//\t\t\tprintf(\"i= %d j= %d dp= %lld\\n\",i,j,dp[i][j]);\n\t\t}\n\t}\n\tprintendl(dp[n+1][0]);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstdio>\n#include <cstring>\n#include <algorithm>\n#include <cmath>\n#include <queue>\n#include <stack>\n#include <map>\n#include <set>\n#include <vector>\n#include <iomanip>\n#define ALL(x) (x).begin(), (x).end()\n#define rt return\n#define dll(x) scanf(\"%I64d\",&x)\n#define xll(x) printf(\"%I64d\\n\",x)\n#define sz(a) int(a.size())\n#define all(a) a.begin(), a.end()\n#define rep(i,x,n) for(int i=x;i<n;i++)\n#define repd(i,x,n) for(int i=x;i<=n;i++)\n#define pii pair<int,int>\n#define pll pair<long long ,long long>\n#define gbtb ios::sync_with_stdio(false),cin.tie(0),cout.tie(0)\n#define MS0(X) memset((X), 0, sizeof((X)))\n#define MSC0(X) memset((X), '\\0', sizeof((X)))\n#define pb push_back\n#define mp make_pair\n#define fi first\n#define se second\n#define eps 1e-6\n#define gg(x) getInt(&x)\n#define db(x) cout<<\"== [ \"<<x<<\" ] ==\"<<endl;\nusing namespace std;\ntypedef long long ll;\nll gcd(ll a,ll b){return b?gcd(b,a%b):a;}\nll lcm(ll a,ll b){return a/gcd(a,b)*b;}\nll powmod(ll a,ll b,ll MOD){ll ans=1;while(b){if(b%2)ans=ans*a%MOD;a=a*a%MOD;b/=2;}return ans;}\ninline void getInt(int* p);\nconst int maxn=1000010;\n// const int inf=0x3f3f3f3f;\n/*** TEMPLATE CODE * * STARTS HERE ***/\nint n;\nchar op[maxn];\nint a[maxn];\nll dp[maxn/10][4];\nconst ll inf=(ll)(1e18);\n\nint main()\n{\n    //freopen(\"D:\\\\common_text\\\\code_stream\\\\in.txt\",\"r\",stdin);\n    //freopen(\"D:\\\\common_text\\\\code_stream\\\\out.txt\",\"w\",stdout);\n    gbtb;\n    cin>>n;\n    cin>>a[1];\n    repd(i,2,n)\n    {\n        cin>>op[i]>>a[i];\n    }\n    dp[1][0]=a[1];\n    dp[1][1]=dp[1][2]=-inf;\n    repd(i,2,n)\n    {\n        if(op[i]=='+')\n        {\n            dp[i][0]=max(dp[i-1][0],dp[i-1][1])+a[i];\n            dp[i][1]=dp[i-1][1]-a[i];\n            dp[i][2]=dp[i-1][2]+a[i];\n        }else\n        {\n            dp[i][0]=-inf;\n            dp[i][1]=max(dp[i-1][0],dp[i-1][1])-a[i];\n            dp[i][2]=max(dp[i-1][2],dp[i-1][1])+a[i];\n        }\n    }\n    cout<<max(dp[n][0],max(dp[n][1],dp[n][2]))<<endl;\n    \n    \n    return 0;\n}\n\ninline void getInt(int* p) {\n    char ch;\n    do {\n        ch = getchar();\n    } while (ch == ' ' || ch == '\\n');\n    if (ch == '-') {\n        *p = -(getchar() - '0');\n        while ((ch = getchar()) >= '0' && ch <= '9') {\n            *p = *p * 10 - ch + '0';\n        }\n    }\n    else {\n        *p = ch - '0';\n        while ((ch = getchar()) >= '0' && ch <= '9') {\n            *p = *p * 10 + ch - '0';\n        }\n    }\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\n#include<cstring>\n#include<cstdio>\n#include<cmath>\nusing namespace std;\n#define ll long long\nconst ll INF=1000000000000000000;\nll n,cnt,rec,f0,f1=-INF,f2=-INF;\nll read(){ll res;char ch;while(!isdigit(ch=getchar()));res=ch-'0';while(isdigit(ch=getchar()))res=res*10-'0'+ch;return res;}\nll reado(){char ch;while((ch=getchar())!='+'&&ch!='-');return ch=='-';}\nint main()\n{\n\tn=read();\n\tfor(ll i=1,a,o=0;i<=n;++i)\n\t{\n\t\tif(i>1)o=reado();\n\t\ta=read();\n\t\tif(o)f0=f1=max(f0-a,f2=f1+a);\n\t\telse f0+=a,f1=max(f1-a,f2+=a);\n\t}\n\tprintf(\"%lld\",f0);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <iostream>\n#include <algorithm>\n\nusing namespace std;\n\ntypedef long long LL;\n\nconst LL maxn = 100005;\nconst LL inf = 0x3f3f3f3f;\n\nLL op[maxn];\nLL a[maxn];\nLL qzhh[maxn];\nLL yuan[maxn];\nLL lstt[maxn];\nchar s[3];\nLL n;\n\nint main()\n{\n\tscanf(\"%lld\", &n);\n\tscanf(\"%lld\", &a[1]);\n\tqzhh[1] = yuan[1] = a[1];\n\top[1] = 1;\n\tLL ans = 0;\n\tfor(LL i = 2; i <= n; ++i)\n\t{\n\t\tscanf(\"%s%lld\", s, &a[i]);\n\t\top[i] = (s[0] == '+');\n\t\tqzhh[i] = qzhh[i - 1] + a[i];\n\t\tyuan[i] = yuan[i - 1] + (op[i] ? a[i] : -a[i]);\n\t}\n\top[n + 1] = op[n + 2] = 0;\n\tqzhh[n + 1] = qzhh[n + 2] = qzhh[n];\n\tyuan[n + 1] = yuan[n + 2] = yuan[n];\n\tn += 2;\n\tLL lst = n + 1;\n\tfor(LL i = n; i; --i)\n\t{\n\t\tif(!op[i])\n\t\t{\n\t\t\tlstt[i] = lst;\n\t\t\tlst = i;\n\t\t}\n\t}\n//\tcout << \"qzhh = \";\n//\tfor(LL i = 1; i <= n; ++i)\n//\t\tcout << qzhh[i] << ' ';\n//\tcout << endl;\n//\tcout << \"yuan = \";\n//\tfor(LL i = 1; i <= n; ++i)\n//\t\tcout << yuan[i] << ' ';\n//\tcout << endl;\n//\tcout << \"lstt = \";\n//\tfor(LL i = 1; i <= n; ++i)\n//\t\tcout << lstt[i] << ' ';\n//\tcout << endl;\n\tfor(LL i = lst; lstt[i] <= n; i = lstt[i])\n\t{\n\t\tLL l = i, r = lstt[i];\n\t\tans = max(ans, yuan[l - 1] - (qzhh[r - 1] - qzhh[l - 1]) + qzhh[n] - qzhh[r - 1]);\n//\t\tcout << l << ' ' << r << ' ' << ans << endl;\n\t}\n\tprintf(\"%lld\\n\", ans);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n#define ff first\n#define ss second\n#define pb push_back\n#define pf push_front\n#define ppb pop_back()\n#define ppf pop_front()\n#define all(vec) vec.begin(), vec.end()\n#define fol(i,a,b) for(int i=a;i<b;i++)\n#define loop(i,a,b) for(int i=a;i>=b;i--)\n#define forr(x,arr) for(auto& x:arr)\n#define mod 1000000007\n#define INF 0x3f3f3f3f3f3f3f3f\n#define EPS 1e-7\n#define sz(x) ((lli)(x).size())\n\nusing   lli     =   long long;\nusing   lld     =   long double;\nusing   ulli    =   unsigned long long int;\nusing   pll     =   pair<lli, lli>;\nusing   ttt     =   pair<lli, pll>;\nusing   vttt    =   vector<ttt>;\nusing   vll     =   vector<pll>;\nusing   vl      =   vector<lli>;\nusing   vi      =   vector<int>;\nusing   vvi     =   vector<vector<int>>;\nusing   cd      =   complex<lld>;\nconst double PI = acos(-1);\n\n#ifndef tejasp\n#define trace(...) {}\n#define cotra(...) {}\n#define end_routine() {}\n#define localsys 0\n#define endl '\\n'\n#endif\n\nint tejas_919(int kkkk)\n{\n    lli n, m, k, q, u, v, temp=0, ans=0;\n    cin>>n;\n    int phase=1;\n    lli pref[n+5]={}, arr[n+5]={};\n    vi pos;\n    char ch='+';\n    fol(i,1,n+1)\n    {\n        if(i>1)\n        {\n            cin>>ch;\n            if(ch=='-') pos.pb(i);\n        }\n        cin>>arr[i];\n        pref[i]=pref[i-1]+arr[i];\n        if(ch=='+') ans+=arr[i];\n        else ans-=arr[i];\n    }\n    trace(pref,n+1)\n    fol(i,0,sz(pos)-1)\n    {\n        lli curans=0;\n        int cur=pos[i], next=pos[i+1]-1;\n        trace(cur,next)\n        curans = pref[cur]-(pref[next]-pref[cur])+(pref[n]-pref[next]);\n        curans-=2LL*arr[cur];\n        ans=max(ans,curans);\n    }\n    \n    cout<<ans<<endl;\n    return 0;\n}\n\nsigned main()\n{\n    #ifdef tejasp\n            freopen(\"input.txt\", \"rt\", stdin);\n            freopen(\"output.txt\", \"wt\", stdout);\n    #endif\n    if(!localsys) { ios_base::sync_with_stdio(false);cin.tie(NULL);cout.tie(NULL); }\n    cout << fixed << setprecision(10);\n    int t=1;\n    //cin>>t;\n    fol(i,0,t) { tejas_919(i+1); }\n    end_routine();\n    if(localsys) system(\"pause\");\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define N 100005\n#define LL long long\nusing namespace std;\nint n,m,a[N]; LL b[N],sum,ans; char op[N];\nint main()\n{\n\tint i,p;\n\tscanf(\"%d\",&n);\n\tfor(i=1;i<n;i++)\n\t\tscanf(\"%d %c \",&a[i],&op[i]);\n\tscanf(\"%d\",&a[n]);\n\tfor(i=1;i<n-1;i++)\n\t\tif(op[i]=='-'&&op[i+1]=='-') break;\n\tp=i+1,i+=2;\n\twhile(i<=n) a[p]-=a[i++];\n\tn=p,sum=a[1];\n\tfor(i=1;i<n;i++)\n\t\tif(op[i]=='-')\n\t\t\tsum-=a[i+1],b[++m]=sum,sum=0;\n\t\telse sum+=a[i+1];\n\tans+=sum+b[1];\n\tfor(i=2;i<=m;i++) ans+=abs(b[i]);\n\tcout<<ans;\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\nusing ll = long long;\nusing P = pair<int, int>;\nconst ll MOD = 1000000007;\n\n\nint N;\nvector<char> op;\nvector<ll> A;\nchar ops[2] = {'+', '-'};\n\nll memo[100000][3];\n\n\nll dfs(int p, int c){\n    // clip c\n    c = min(2, c);\n    if(p == N) return 0;\n    if(memo[p][c] != -1) return memo[p][c];\n    ll ret = 0;\n    if(c % 2 == 0){\n        if(op[p] == '+'){\n            ret = max(ret, A[p] + dfs(p+1, c));\n        }else{\n            ret = max(ret, -A[p] + dfs(p+1, c+1));\n            if(c >= 1) ret = max(ret, A[p] + dfs(p+1, c));\n        }\n    }else{\n        if(op[p] == '+'){\n            ret = max(ret, -A[p] + dfs(p+1, c));\n            ret = max(ret, A[p] + dfs(p+1, c-1));\n        }else{\n            ret = max(ret, A[p] + dfs(p+1, c+1));\n        }\n    }\n    memo[p][c] = ret;\n    return ret;\n}\n\n\nint main(){\n    cin >> N;\n\n    ll start;\n    cin >> start;\n\n    N--;\n    op.resize(N);\n    A.resize(N);\n    for(int i=0;i<N;i++){\n        cin >> op[i] >> A[i];\n    }\n    memset(memo, -1, sizeof(memo));\n    cout << start + dfs(0, 0) << endl;\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <iostream>\n#include <cstring>\n#define oo 1e17\n#define N 100005\n#define ll long long\n#define F(i,j,k) for(int i=(j);i<=(k);++i)\n#define D(i,j,k) for(int i=(j);i>=(k);--i)\nusing namespace std;\nchar op[N];\nint n,mx;\nll a[N],ans,dp[N][2];\nint main(){\n\t//freopen(\"txt.in\",\"r\",stdin);freopen(\"txt.out\",\"w\",stdout);\n\tscanf(\"%d\\n\",&n);\n\tscanf(\"%lld \",&a[0]);F(i,1,n-1)scanf(\"%c %lld \",&op[i],&a[i]);\n\tans=-oo;\n\tmemset(dp,-0x7f,sizeof(dp));\n\tdp[0][0]=0;\n\tF(i,1,n-1){\n\t\tif(op[i]=='+'){\n\t\t\tdp[i][1]=dp[i-1][1]-a[i];\n\t\t\tdp[i][0]=max(dp[i-1][0]+a[i],dp[i][1]);\n\t\t}\n\t\telse{\n\t\t\tdp[i][1]=max(dp[i-1][1]+a[i],dp[i-1][0]-a[i]);\n\t\t\tdp[i][0]=max(dp[i-1][0]-a[i],dp[i][1]);\n\t\t}\n\t}\n\tans=max(dp[n-1][0],dp[n-1][1]);\n\tprintf(\"%lld\\n\",ans+a[0]);\n\treturn 0;\n} "
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\n#define _overload(_1,_2,_3,name,...) name\n#define _rep(i,n) _range(i,0,n)\n#define _range(i,a,b) for(int i=int(a);i<int(b);++i)\n#define rep(...) _overload(__VA_ARGS__,_range,_rep,)(__VA_ARGS__)\n\n#define _rrep(i,n) _rrange(i,n,0)\n#define _rrange(i,a,b) for(int i=int(a)-1;i>=int(b);--i)\n#define rrep(...) _overload(__VA_ARGS__,_rrange,_rrep,)(__VA_ARGS__)\n\n#define _all(arg) begin(arg),end(arg)\n#define uniq(arg) sort(_all(arg)),(arg).erase(unique(_all(arg)),end(arg))\n#define getidx(ary,key) lower_bound(_all(ary),key)-begin(ary)\n#define clr(a,b) memset((a),(b),sizeof(a))\n#define bit(n) (1LL<<(n))\n#define popcount(n) (__builtin_popcountll(n))\n\nusing namespace std;\n\ntemplate<class T>bool chmax(T &a, const T &b) { return (a<b)?(a=b,1):0;}\ntemplate<class T>bool chmin(T &a, const T &b) { return (b<a)?(a=b,1):0;}\n\nusing ll=long long;\nconst ll INF = 1LL << 50;\n\n// Problem Specific Parameter:\n// a + b + c - ( d + e + f - (e + (f - g - e))\n// + の直後に括弧を開いても嬉しくない\n// - の直後に括弧を開くか考える\n// 括弧を閉じるタイミングは自由\n// -(expa -(expb -(expc))) = -(expa - expb) - expc\n\n// A1) op (A2 \n\nll a[100010];\nchar op[100010];\nll dp[100010][3];\n\ninline ll sgn(ll n){\n\tif(n&1)\n\t\treturn -1LL;\n\telse\n\t\treturn 1LL;\n}\n\nint main(void){\n\tll n;\n\tcin >> n;\n\t\n\trep(i,n){\n\t\tcin >> a[i];\n\t\tif(i==n-1) break;\n\t\tcin >> op[i];\n\t}\n\n\trep(i,n)rep(j,3) dp[i][j]=-INF;\n\tdp[0][0]=a[0];\n\t\n\trep(i,n-1)rep(j,3){\n\t\tif(dp[i][j]==-INF) continue;\n\t\trep(k,3){\n\t\t\tint nj = j - k;\n\t\t\tif(nj < 0) continue;\n\n\t\t\tif(op[i]=='+') chmax(dp[i+1][nj],dp[i][j] + sgn(nj)*a[i+1]);\n\t\t\tif(op[i]=='-') chmax(dp[i+1][nj],dp[i][j] + sgn(nj+1)*a[i+1]);\n\t\t\tif(op[i]=='-' and nj+1 < 3) chmax(dp[i+1][nj+1],dp[i][j] + sgn(nj+1)*a[i+1]);\n\t\t}\n\t}\n\n\tll ans = - INF;\n\trep(j,3) chmax(ans,dp[n-1][j]);\n\tcout << ans << endl;\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#define _CRT_SECURE_NO_WARNINGS\n#define _USE_MATH_DEFINES\n#include <iostream>\n#include <iomanip>\n#include <cstdio>\n#include <cstring>\n#include <cmath>\n#include <cstdlib>\n#include <algorithm>\n#include <string>\n#include <vector>\n#include <stack>\n#include <queue>\n#include <set>\n#include <map>\n#include <functional>\n#include <utility>\n#include <tuple>\n#include <cctype>\nusing namespace std;\n#define INF 0x3f3f3f3f\n#define INFLL 1100000000000000000LL\n//#define MOD 1000000007\n#define MOD 123456789012345671\n#define mp make_pair\n#define mt make_tuple\n#define pb push_back\ntypedef long long ll;\ntypedef long double ld;\ntypedef pair<int, int> pint;\ntypedef pair<ll,ll> pll;\ntypedef tuple<int,int,int> tint;\ntypedef vector<int> vint;\ntypedef vector<ll> vll;\nint dx[8]={0,0,-1,1,1,1,-1,-1};\nint dy[8]={-1,1,0,0,1,-1,1,-1};\nconst int SIZE=100050;\n//ここまでテンプレ\nint main() {\n\tint N;\n\tcin>>N;\n\tint f;\n\tcin>>f;\n\tll DP[SIZE][3]={};\n\tfor(int i=0;i<SIZE;i++)\n\t\tfor(int j=0;j<3;j++)\n\t\t\tDP[i][j]=-INFLL;\n\tDP[0][0]=f;\n\tfor(int i=0;i<N-1;i++){\n\t\tint a;\n\t\tchar o;\n\t\tcin>>o>>a;\n\t\tif(o=='+'){\n\t\t\tDP[i+1][0]=max(DP[i+1][0],DP[i][0]+a);\n\t\t\tDP[i+1][1]=max(DP[i+1][1],DP[i][1]-a);\n\t\t\tDP[i+1][2]=max(DP[i+1][2],DP[i][2]+a);\n\t\t\tDP[i+1][0]=max(DP[i+1][0],DP[i][2]+a);\n\t\t\tDP[i+1][0]=max(DP[i+1][0],DP[i][1]-a);\n\t\t\tDP[i+1][1]=max(DP[i+1][1],DP[i][2]+a);\n\t\t}\n\t\telse{\n\t\t\tDP[i+1][0]=max(DP[i+1][0],DP[i][0]-a);\n\t\t\tDP[i+1][1]=max(DP[i+1][1],DP[i][1]+a);\n\t\t\tDP[i+1][2]=max(DP[i+1][2],DP[i][2]-a);\n\t\t\tDP[i+1][1]=max(DP[i+1][1],DP[i][0]-a);\n\t\t\tDP[i+1][2]=max(DP[i+1][2],DP[i][1]+a);\n\t\t\t//DP[i+1][2]=max(DP[i+1][2],DP[i][0]-a);\n\t\t}\n\t}\n\tcout<<max({DP[N-1][0],DP[N-1][1],DP[N-1][2]})<<endl;\n\t/*\n\tfor(int i=0;i<N;i++){\n\t\tfor(int j=0;j<3;j++)\n\t\t\tprintf(\"DP[%d][%d]=%d \",i,j,DP[i][j]);\n\t\tcout<<endl;\n\t}\n\t*/\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "/*\nThough leaves are many , the root is one.\nThrough all the lying days of my youth\nI swayed my leaves and flowers in the sun.\nNow I may wither into the truth.\n\t  \t  \t- William Butler Yeats\n*/\n//#pragma GCC optimize(\"Ofast,no-stack-protector\")\n//#pragma GCC target(\"sse,sse2,sse3,ssse3,sse4,popcnt,abm,mmx\")\n//#pragma GCC target(\"avx,tune=native\")\n#include<bits/stdc++.h>\n#define int long long\n#pragma comment(\" -Wl,--stack=1024000000\")\n//#include<ext/pb_ds/assoc_container.hpp>\nusing namespace std;\n//using namespace __gnu_pbds;\nconst int inf=0x3f3f3f3f;\nconst double eps=1e-6;\nconst int mod=1000000007;\ntypedef long long ll;\n#ifndef LOCAL\n#define cerr if(0)cout\n#define eprintf(...) 0\n#else\n#define eprintf(...) fprintf(stderr, __VA_ARGS__)\n#endif\ninline string getstr(string &s,int l,int r){string ret=\"\";for(int i=l;i<=r;i++)ret.push_back(s[i]);return ret;}\nint modpow(int x,int y,int md=mod){if(y==0)return 1;int ret=modpow(x,y>>1,md);ret=(ll)ret*ret%md;if(y&1)ret=(ll)ret*x%md;return ret;}\nint n,ans;\nint a[100005];\nchar c[100005];\nbool used[100005];\nint id[100005];\nsigned main(){\n//\tfreopen(\"data.txt\",\"r\",stdin);\n\tcin>>n;cin>>a[1]; \n\tfor(int i=2;i<=n;i++){\n\t\tcin>>c[i]>>a[i];\n\t}\n\tvector<int>vec;\n\tfor(int i=1;i<=n;i++){\n\t\tif(used[i])continue;\n\t\tint now=i+1;\n\t\twhile(now<=n&&c[now]=='+'){\n\t\t\tnow++;\n\t\t}\n\t\tint sum=0;\n\t\tfor(int j=i;j<now;j++){\n\t\t\tused[j]=1;\n\t\t\tsum+=a[j];\n\t\t\tid[j]=vec.size();\n\t\t}\n\t\tvec.push_back(sum);\n\t}\n\tif(vec.size()==1){\n\t\tcout<<vec[0]<<endl;\n\t}else{\n\t\tint sum=0;\n\t\tfor(int i=1;i<=n;i++)sum+=a[i];\n\t\tfor(int i=2;i<=n;i++){\n\t\t\tif(c[i]=='-'){\n//\t\t\t\tcerr<<i<<\" \"<<sum-vec[id[i]]*2ll<<endl;\n\t\t\t\tans=max(ans,sum-vec[id[i]]*2ll);\n\t\t\t\tsum-=a[i]*2ll;\n\t\t\t}\n\t\t}\n\t\tcout<<ans<<endl;\n\t}\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define N 200005\n#define LL long long\nusing namespace std;\nLL val[N];//- + - +\nLL suf[N];\nint n; \nint main(){\n\tscanf(\"%d\",&n);\n\tscanf(\"%lld\",&val[1]);\n\tint cnt=1;\n\tfor(int i=2,t,last='+';i<=n;i++){\n\t\tchar ch=getchar();\n\t\twhile(ch!='+'&&ch!='-') ch=getchar();\n\t\tscanf(\"%d\",&t);\n\t\tif(ch=='+'&&last=='+') val[cnt]+=t;\n\t\telse if(ch!=last) val[++cnt]=t;\n\t\telse val[++cnt]=0,val[++cnt]=t;\n\t\tlast=ch;\n\t}\n\tfor(int i=cnt;i>=1;i--) suf[i]=suf[i+1]+val[i];\n\tLL pre=0,ans=-1e18;\n\tfor(int i=1;i<=cnt;i++){\n\t\tpre+=val[i]*(i%2==0 ? -1:1);\n\t\tif(i%2==0){\n\t\t\tans=max(ans,pre-val[i+1]+suf[i+2]);\n\t\t}\n\t}\n\tans=max(ans,pre);\n\tcout<<ans<<endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<algorithm>\n#define MAXN 100006\n#define INF 23333333333333333\nusing namespace std;\nint n,r[MAXN];\nlong long a[MAXN],sum[MAXN],ans=-INF;\nchar op[MAXN];\nint main()\n{\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tif(i==1) scanf(\"%lld\",&a[i]);\n\t\telse scanf(\" %c %lld\",&op[i],&a[i]);\n\t}\n\tint last=n+1;\n\tfor(int i=n;i>=1;i--)\n\t{\n\t\tsum[i]=sum[i+1]+a[i];\n\t\tr[i]=last;\n\t\tif(op[i]=='-') last=i;\n\t}\n\tlong long sumlast=a[1];\n\tfor(int i=2;i<=n;i++)\n\t{\n\t\tans=max(ans,sumlast+sum[r[i]]*2-sum[i]);\n\t\tif(op[i]=='+') sumlast+=a[i];\n\t\telse sumlast-=a[i];\n\t}\n\tprintf(\"%lld\",max(ans,sumlast));\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n\nconst int MAXN=100011;\nconst long long LONF=4567891012345678910LL;\n\n\nint N;\nint A[MAXN];\nint O[MAXN];\n\nlong long F[MAXN][3];\n\nint rO(){\n\tstatic char ch[2];\n\tscanf(\"%s\", ch);\n\treturn ch[0]=='+';\n}\n\nvoid relax(long long &f, long long v){\n\tif(f<v)\tf=v;\n}\n\nint Calc(int t, int o, int a){\n\tif(t)\to=!o;\n\treturn ((o<<1)-1)*a;\n}\n\nint main(){\n\t\n\tscanf(\"%d\", &N);\n\t\n\tscanf(\"%d\", &A[1]);\n\tfor(int i=2;i<=N;++i){\n\t\tO[i]=rO();\n\t\tscanf(\"%d\", &A[i]);\n\t}\n\t\n\tfor(int i=1;i<=N;++i)\n\t\tfor(int j=0;j<=2;++j)\n\t\t\tF[i][j]=-LONF;\n\t\n\tF[1][0]=(long long)(A[1]);\n\tfor(int i=2;i<=N;++i){\n\t\tfor(int j=0;j<3;++j){\n\t\t\tfor(int k=0;k<=j;++k){\n\t\t\t\trelax(F[i][k], F[i-1][j]+Calc(k&1, O[i], A[i]));\n\t\t\t}\n\t\t\tif(j<2 && !O[i])\trelax(F[i][j+1], F[i-1][j]+Calc(j&1, O[i], A[i]));\n\t\t}\n\t}\n\t\n\tlong long Ans=-LONF;\n\tfor(int j=0;j<3;++j)\n\t\trelax(Ans, F[N][j]);\n\tprintf(\"%lld\\n\", Ans);\n\t\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define del(a,i) memset(a,i,sizeof(a))\n#define ll long long\n#define inl inline\n#define il inl void\n#define it inl int\n#define ill inl ll\n#define re register\n#define ri re int\n#define rl re ll\n#define mid ((l+r)>>1)\n#define lowbit(x) (x&(-x))\n#define INF 0x3f3f3f3f\nusing namespace std;\ntemplate<class T>il read(T &x){\n\tint f=1;char k=getchar();x=0;\n\tfor(;k>'9'||k<'0';k=getchar()) if(k=='-') f=-1;\n\tfor(;k>='0'&&k<='9';k=getchar()) x=(x<<3)+(x<<1)+k-'0';\n\tx*=f;\n}\ntemplate<class T>il _print(T x){\n\tif(x/10) _print(x/10);\n\tputchar(x%10+'0');\n}\ntemplate<class T>il print(T x){\n\tif(x<0) putchar('-'),x=-x;\n\t_print(x);\n}\nll mul(ll a,ll b,ll mod){long double c=1.;return (a*b-(ll)(c*a*b/mod)*mod)%mod;}\nit qpow(int x,int m,int mod){\n\tint res=1,bas=x;\n\twhile(m){\n\t\tif(m&1) res=(1ll*res*bas)%mod;\n\t\tbas=(1ll*bas*bas)%mod,m>>=1;\n\t}\n\treturn res;\n}\nconst int N = 1e5+5;\nint n,val[N],ty[N];\nll ans,abs_sum[N],sum[N];\nchar op[2];\nvector<int> vec;\nint main(){\n//\tfreopen(\".in\",\"r\",stdin);\n//\tfreopen(\".out\",\"w\",stdout);\n\tread(n),read(val[1]),sum[1]=val[1];\n\tfor(ri i=2;i<=n;++i){\n\t\tscanf(\"%s\",op),read(val[i]);\n\t\tif(op[0]=='-') vec.push_back(i),sum[i]=sum[i-1]-val[i];\n\t\telse sum[i]=sum[i-1]+val[i];\n\t}\n\tvec.push_back(n+1);\n\tfor(ri i=1;i<=n;++i) abs_sum[i]=abs_sum[i-1]+val[i];\n\tans=LLONG_MIN;\n\tfor(ri i=0;i<(int)vec.size()-1;++i){\n\t\tint x=vec[i],y=vec[i+1];\n\t\tans=max(ans,sum[x-1]-(abs_sum[y-1]-abs_sum[x-1])+(abs_sum[n]-abs_sum[y-1]));\n\t}\n\tprint(ans);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\nusing ll = long long;\nusing P = pair<int, int>;\nconst ll MOD = 1000000007;\n\n\nint N;\nvector<char> op;\nvector<ll> A;\nchar ops[2] = {'+', '-'};\n\nll memo[100000][2];\nint memoc[100000][2];\n\nll dfs(int p, int c){\n    if(p == N) return 0;\n    if(memo[p][c % 2] != -1 && c <= memoc[p][c % 2]) return memo[p][c % 2];\n    ll ret = 0;\n    if(c % 2 == 0){\n        if(op[p] == '+'){\n            ret = max(ret, A[p] + dfs(p+1, c));\n        }else{\n            if(c >= 1) ret = max(ret, A[p] + dfs(p+1, c));\n            ret = max(ret, -A[p] + dfs(p+1, c+1));\n        }\n    }else{\n        if(op[p] == '+'){\n            ret = max(ret, A[p] + dfs(p+1, c-1));\n            ret = max(ret, -A[p] + dfs(p+1, c));\n        }else{\n            ret = max(ret, A[p] + dfs(p+1, c+1));\n        }\n    }\n    memo[p][c % 2] = ret;\n    memoc[p][c % 2] = c;\n    return ret;\n}\n\nint main(){\n    cin >> N;\n\n    ll start;\n    cin >> start;\n\n    N--;\n    op.resize(N);\n    A.resize(N);\n    for(int i=0;i<N;i++){\n        cin >> op[i] >> A[i];\n    }\n    memset(memo, -1, sizeof(memo));\n    memset(memoc, -1, sizeof(memoc));\n    cout << start + dfs(0, 0) << endl;\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#pragma GCC optimize (\"O3\")\n#pragma GCC target (\"avx\")\n//#include<bits/stdc++.h>\n#include<cstdio>\n#include<algorithm>\nusing namespace std;\ntypedef long long ll;\n#define rep(i, n) for(int i = 0; i < (n); i++)\n#define rep1(i, n) for(int i = 1; i <= (n); i++)\n#define co(x) cout << (x) << \"\\n\"\n#define cosp(x) cout << (x) << \" \"\n#define ce(x) cerr << (x) << \"\\n\"\n#define cesp(x) cerr << (x) << \" \"\n#define pb push_back\n#define mp make_pair\n#define chmin(x, y) x = min(x, y)\n#define chmax(x, y) x = max(x, y)\n#define Would\n#define you\n#define please\n\nconst int cm = 1 << 17;\nchar cn[cm], * ci = cn + cm, ct;\ninline char getcha() {\n\tif (ci - cn == cm) { fread_unlocked(cn, 1, cm, stdin); ci = cn; }\n\treturn *ci++;\n}\ninline int getint() {\n\tint A = 0;\n\tif (ci - cn + 16 > cm) while ((ct = getcha()) >= '0') A = A * 10 + ct - '0';\n\telse while ((ct = *ci++) >= '0') A = A * 10 + ct - '0';\n\treturn A;\n}\n\nint main() {\n\t//cin.tie(0);\n\t//ios::sync_with_stdio(false);\n\n\n\tint N = getint();\n\tchar c;\n\n\tll dp0 = getint();\n\tll dp1 = -1e18;\n\tbool hajimete = 0;\n\tll purasu = 0;\n\n\trep(i, N - 1) {\n\t\tint a = 0;\n\t\tif (ci - cn + 16 > cm) {\n\t\t\tc = getcha(); getcha();\n\t\t\twhile ((ct = getcha()) >= '0') a = a * 10 + ct - '0';\n\t\t}\n\t\telse {\n\t\t\tc = *ci++; ci++;\n\t\t\twhile ((ct = *ci++) >= '0') a = a * 10 + ct - '0';\n\t\t}\n\n\t\tif (hajimete == 0) {\n\t\t\tif (c == '+') {\n\t\t\t\tdp0 += a;\n\t\t\t}\n\t\t\telse {\n\t\t\t\thajimete = 1;\n\t\t\t\tdp0 -= a;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tif (c == '+') {\n\t\t\t\tpurasu += a;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdp1 = max(dp1 + purasu + a, dp0 + a - purasu);\n\t\t\t\tdp0 += purasu - a;\n\t\t\t\tpurasu = 0;\n\t\t\t}\n\t\t}\n\t}\n\tprintf(\"%lld\", max(dp0, dp1) + purasu);\n\n\tWould you please return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\nconst int S=(1<<20)+5;\nchar buf[S],*H,*T;\ninline char Get()\n{\n    if(H==T) T=(H=buf)+fread(buf,1,S,stdin);\n    if(H==T) return -1;return *H++;\n}\ninline int read()\n{\n    int x=0;char c=Get();\n    while(!isdigit(c)) c=Get();\n    while(isdigit(c)) x=x*10+c-'0',c=Get();\n    return x;\n}\ninline int readopt()\n{\n    char c=Get();\n    while(c!='+'&&c!='-') c=Get();\n    return c;\n}\n\ntypedef long long LL;\nconst int N=100010;\nint num[N],n,k;\nchar opt[N];\nLL f[2][3];\n\nint main()\n{\n    n=read();\n    num[0]=read();\n    for(int i=1;i<n;i++)\n    {\n        opt[i]=readopt();\n        num[i]=read();\n    }\n    f[k=0][0]=num[0];\n    f[0][1]=f[0][2]=-(1ll<<60);\n    for(int i=1;i<n;i++,k^=1)\n    {\n        if(opt[i]=='+')\n        {\n            f[k^1][0]=max(max(f[k][0],f[k][1]),f[k][2])+num[i];  //原地转移 或 拆1/2个括号\n            f[k^1][1]=max(f[k][1],f[k][2])-num[i];  //原地转移 或 拆1个括号\n            f[k^1][2]=f[k][2]+num[i];  //原地转移\n        }\n        else\n        {\n            f[k^1][0]=max(max(f[k][0],f[k][1]),f[k][2])-num[i];  //原地转移 或 拆1/2个括号\n            f[k^1][1]=max(max(f[k][1],f[k][2])+num[i],f[k][0]-num[i]);  //原地转移 或 拆1个括号 或 添1个括号\n            f[k^1][1]=max(max(f[k][1]-num[i],f[k][2]-num[i]),f[k^1][1]);  //拆1/2个括号又添1个括号\n            f[k^1][2]=max(f[k][2]-num[i],f[k][1]+num[i]);  //原地转移 或 添1个括号\n            f[k^1][2]=max(f[k][2]+num[i],f[k^1][2]);  //拆1个括号又添1个括号\n        }\n    }\n    LL ans=max(max(f[k][0],f[k][1]),f[k][2]);\n    printf(\"%lld\\n\",ans);\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\ntypedef long long ll;\nconst int maxn = 1e5 + 5;\n\ninline int gi()\n{\n\tchar c = getchar();\n\twhile (c < '0' || c > '9') c = getchar();\n\tint sum = 0;\n\twhile ('0' <= c && c <= '9') sum = sum * 10 + c - 48, c = getchar();\n\treturn sum;\n}\n\ninline int gc()\n{\n\tchar c = getchar();\n\twhile (c != '-' && c != '+') c = getchar();\n\treturn c == '+' ? 1 : -1;\n}\n\ninline void chkmax(ll &a, ll b) {if (a < b) a = b;}\n\nint n, a[maxn], b[maxn], pw[3];\nll f[maxn][3];\n\nint main()\n{\n\tn = gi();\n\ta[1] = gi(); b[1] = 1;\n\tfor (int i = 2; i <= n; ++i) b[i] = gc(), a[i] = gi();\n\n\tmemset(f, -63, sizeof(f));\n\tf[1][0] = a[1];\n\tpw[0] = pw[2] = 1; pw[1] = -1;\n\tfor (int i = 1; i <= n; ++i) {\n\t\tfor (int j = 0; j <= 2; ++j)\n\t\t\tif (f[i][j] > -1e18) {\n\t\t\t\tchkmax(f[i + 1][j], f[i][j] + a[i + 1] * b[i + 1] * pw[j]);\n\t\t\t\tif (j) chkmax(f[i + 1][j - 1], f[i][j] + a[i + 1] * b[i + 1] * pw[j - 1]);\n\t\t\t\tif (b[i + 1] < 0 && j < 2) chkmax(f[i + 1][j + 1], f[i][j] + a[i + 1] * b[i + 1] * pw[j]);\n\t\t\t\tif (b[i + 1] < 0 && j) chkmax(f[i + 1][j], f[i][j] + a[i + 1] * b[i + 1] * pw[j - 1]);\n\t\t\t}\n\t}\n\n\tprintf(\"%lld\\n\", max(f[n][0], max(f[n][1], f[n][2])));\n\t\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define all(vec) vec.begin(), vec.end()\nusing namespace std;\nusing ll = long long;\nusing P = pair<int, int>;\nconstexpr ll INF = (1LL << 30) - 1LL;\nconstexpr ll LINF = (1LL << 60) - 1LL;\nconstexpr ll MOD = 1e9 + 7;\ntemplate <typename T> void chmin(T &a, T b) { a = min(a, b); }\ntemplate <typename T> void chmax(T &a, T b) { a = max(a, b); }\nll dp[100010][2][2];\nint main() {\n    cin.tie(0);\n    ios::sync_with_stdio(false);\n    int n;\n    cin >> n;\n    vector<ll> a(n);\n    vector<char> c(n - 1);\n    int t = 1;\n    for (int i = 0; i < n; i++) {\n        cin >> a[i];\n        a[i] *= t;\n        if (i < n - 1) {\n            cin >> c[i];\n            if (c[i] == '-') {\n                t = -1;\n            } else {\n                t = 1;\n            }\n        }\n    }\n    for (int i = 0; i <= n; i++) {\n        for (int j = 0; j < 2; j++) {\n            for (int k = 0; k < 2; k++) {\n                dp[i][j][k] = -LINF;\n            }\n        }\n    }\n    dp[0][0][0] = 0;\n    for (int i = 0; i < n; i++) {\n        chmax(dp[i + 1][0][0], dp[i][0][0] + a[i]);\n        chmax(dp[i + 1][0][1], dp[i][0][1] + a[i]);\n        chmax(dp[i + 1][1][1], dp[i][1][1] - a[i]);\n        if (i > 0 && c[i - 1] == '-') {\n            chmax(dp[i + 1][1][1], dp[i][0][0] + a[i]);\n            chmax(dp[i + 1][1][1], dp[i][0][1] + a[i]);\n            chmax(dp[i + 1][0][1], dp[i][1][1] - a[i]);\n        } else if (i > 0) {\n            chmax(dp[i + 1][1][1], dp[i][0][1] + a[i]);\n        }\n    }\n    cout << max(dp[n][0][1], dp[n][0][0]) << endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\nconst ll N=2e5+50;\nll n,ans,pos;\nll a[N],t[N],s1[N],s2[N];\nchar s[10];\nint main()\n{\n\tll i;\n\tscanf(\"%lld\",&n);\n\tscanf(\"%lld\",&a[1]);t[1]=1;\n\tfor(i=2;i<=n;i++)\n\t{\n\t\tscanf(\"%s\",s);scanf(\"%lld\",&a[i]);\n\t\tif(s[0]=='+') t[i]=1;\n\t\telse t[i]=-1;\n\t}\n\tfor(i=1;i<=n;i++) s1[i]=s1[i-1]+t[i]*a[i],s2[i]=s2[i-1]+a[i];\n\tans=s1[n];\n\tpos=n+1;\n\tfor(i=n;i>=2;i--)\n\t{\n\t\tif(t[i]==-1) \n\t\t{\n\t\t\tans=max(ans,s1[i-1]-(s2[pos-1]-s2[i-1])+s2[n]-s2[pos-1]);\n\t\t\tpos=i;\n\t\t}\n\t}\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\ntypedef vector<ll> vl;\nconst int MN = 100100;\n//MAX MIN\nll dp[MN][2];\nvl v,w;\nint main() {\n\tmemset(dp,0,sizeof(dp));\n\tll n;\n\tscanf(\"%lld\",&n);\n\tll rn;\n\tscanf(\"%lld\",&rn);\n\tfor(int i=0;i<n-1;i++) {\n\t\tchar op;\n\t\tll val;\n\t\tscanf(\" %c %lld\",&op,&val);\n\t\tif(op == '-') {\n\t\t\tw.push_back(rn);\n\t\t\trn = 0;\n\t\t\tv.push_back(val);\n\t\t} else {\n\t\t\trn += val;\n\t\t}\n\t}\n\tw.push_back(rn);\n\tfor(int i=v.size()-1;i>=0;i--) {\n\t\tll po = w[i+1]-v[i];\n\t\tll pa = -w[i+1]-v[i];\n\t\tdp[i][0] = max(po+dp[i+1][0],pa-dp[i+1][1]);\n\t\tdp[i][1] = min(pa+dp[i+1][1],pa-dp[i+1][0]);\n\t}\n\tprintf(\"%lld\\n\",w[0]+dp[0][0]);\n}"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<algorithm>\n#include<cctype>\n#include<cstring>\n#include<iostream>\n#include<vector>\n\nusing namespace std;\n\n#define bomb exit(1)\n#define INF 1061109567\n#define LINF 4557430888798830399ll\n#define pprint(x) print(x),putchar(' ')\n#define fprint(x) print(x),putchar('\\n')\n#define EE(x); struct edge { int nxt,to;ll w; }e[M << 1]; int head[N],ecnt = 1;\\\n\tvoid add(int u,int v,ll w = 0) { e[++ecnt].w = w,e[ecnt].to = v,e[ecnt].nxt = head[u];head[u] = ecnt; }\\\n\tvoid add_edge(int u,int v,ll w = 0) { add(u,v,w),add(v,u,w * x); }\n#define ll long long\nint mod = 1000000007;\nll Mod(ll x) { return x >= mod ? x - mod : x; }\n#define eps 0.0000000001\n#define sqr(x) ((x) * (x))\n#define iter iterator\n#define fi first\n#define se second\n//#define getchar() (SS == TT && (TT = (SS = BB) + fread(BB,1,1 << 15,stdin),TT == SS) ? EOF : *SS++)\n//char BB[1 << 15],*SS = BB,*TT = BB;\nll read()\n{\n\tll x = 0;int f = 1;char ch = getchar();\n\tfor(;!isdigit(ch);ch = getchar()) if(ch == '-') f = -1;\n\tfor(;isdigit(ch);ch = getchar()) x = x * 10 + (ch ^ 48);\n\treturn x * f;\n}\nvoid print(ll x)\n{\n\tif(x < 0) putchar('-'),x = -x;\n\tif(x > 9) print(x / 10);putchar(x % 10 + '0');\n}\n\nconst int N = 100010;\nll ans,res;\nll a[N],pre[N],suf[N],tot;\nint n,op[N];\nint main()\n{\n\tn = read();\n\tfor(int i = 1;i < n;i++)\n\t{\n\t\ttot += (a[i] = read());\n\t\tchar ch = getchar();while(ch != '+' && ch != '-') ch = getchar();\n\t\top[i] = (ch == '+') ? 1 : -1;\n\t}tot += (a[n] = read());\n\tfor(int i = n;i;i--) { suf[i] = a[i];if(~op[i]) suf[i] += suf[i + 1]; }\n\tfor(int i = 1;i <= n;i++) pre[i] = pre[i - 1] + a[i];\n\tres = a[1];ans = -LINF;\n\tfor(int i = 2;i <= n;i++)\n\t{\n\t\tif(op[i - 1] == -1)\n\t\t\tans = max(ans,res + pre[n] - pre[i - 1] - 2 * suf[i]);\n\t\tres += a[i] * op[i - 1];\n\t}fprint(ans);\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\nusing namespace std;\nlong dp[1<<17][3],a;\nchar op;\nint n;\nmain()\n{\n\tcin>>n>>dp[0][0];\n\tdp[0][1]=dp[0][2]=-1e18;\n\tfor(int i=1;i<n;i++)\n\t{\n\t\tcin>>op>>a;\n\t\tif(op=='+')\n\t\t{\n\t\t\tfor(int j=0;j<3;j++)dp[i][j]=dp[i-1][j]+(j%2?-a:a);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tdp[i][0]=dp[i-1][0]-a;\n\t\t\tdp[i][1]=max(dp[i-1][1]+a,dp[i-1][0]-a);\n\t\t\tdp[i][2]=max(dp[i-1][2]+a,dp[i-1][1]+a);\n\t\t}\n\t}\n\tcout<<max({dp[n-1][0],dp[n-1][1],dp[n-1][2]})<<endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\nconst int N=100005;\n#define ll long long\nll f[N][3],x;char s;\nint main (){\n\tint n;cin>>n;\n\tcin>>f[0][0];f[0][1]=f[0][2]=-1ll<<60;\n\tfor (int i=1;i<n;i++){\n\t\tcin>>s>>x;\n\t\tif (s=='+'){\n\t\t\tf[i][0]=max(max(f[i-1][0],f[i-1][1]),f[i-1][2])+x;\n\t\t\tf[i][1]=max(f[i-1][1],f[i-1][2])+x;\n\t\t\tf[i][2]=f[i-1][2]+x;\n\t\t}else{\n\t\t\tf[i][0]=max(max(f[i-1][0],f[i-1][1]),f[i-1][2])-x;\n\t\t\tf[i][1]=max(max(f[i-1][1],f[i-1][2])+x,f[i-1][0]-x);\n\t\t\tf[i][1]=max(max(f[i-1][1],f[i-1][2])-x,f[i][1]);\n\t\t\tf[i][2]=max(max(f[i-1][2]-x,f[i-1][2]+x),f[i-1][1]+x);\n\t\t}\n\t}\n\tprintf (\"%lld\",max(max(f[n-1][0],f[n-1][1]),f[n-1][2]));\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <iostream>\n#define debug(...) fprintf(stderr, __VA_ARGS__)\nusing namespace std;\ninline char nc() {\n\treturn getchar();\n\tstatic char buf[100000], *l = buf, *r = buf;\n\treturn l==r&&(r=(l=buf)+fread(buf,1,100000,stdin),l==r)?EOF:*l++;\n}\ntemplate<class T> void read(T &x) {\n\tx = 0; int f = 1, ch = nc();\n\twhile(ch<'0'||ch>'9'){if(ch=='-')f=-1;ch=nc();}\n\twhile(ch>='0'&&ch<='9'){x=x*10-'0'+ch;ch=nc();}\n\tx *= f;\n}\ntypedef long long ll;\nconst int maxn = 1e5 + 5;\nint n;\nint a[maxn];\nll sum[maxn];\nll solve() {\n\tll an = sum[n];\n\tll x = 0, y = 0;\n\tfor(int i = n; i >= 1; --i) {\n\t\tif(a[i] < 0) {\n\t\t\tan = max(an, sum[i - 1] + a[i] - x + y);\n\t\t\ty += x - a[i];\n\t\t\tx = 0;\n\t\t}\n\t\telse {\n\t\t\tx += a[i];\n\t\t}\n\t}\n\treturn an;\n}\nint main() {\n\tread(n);\n\tfor(int i = 1; i <= n; ++i) {\n\t\tread(a[i]);\n\t\tsum[i] = sum[i - 1] + a[i];\n\t}\n\tprintf(\"%lld\\n\", solve());\n\treturn 0;\n} "
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n#define lor(a,b,c) for(register int a=b;a<=c;++a)\n#define ror(a,b,c) for(register int a=c;a>=b;--a)\ntypedef long long ll;\n\nconst int N=1e5+5;\nint n,nxt[N]; ll a[N],sum[N],abssum[N],ans;\n\ntemplate <typename T> inline T read(){\n\tchar tmp=getchar(); T sum=0; bool flag=false;\n\twhile(tmp<'0'||tmp>'9'){\n\t\tif(tmp=='-') flag=true; tmp=getchar();\n\t}\n\twhile(tmp>='0'&&tmp<='9'){\n\t\tsum=(sum<<1)+(sum<<3)+tmp-'0'; tmp=getchar();\n\t}\n\treturn flag?-sum:sum;\n}\n\nint main(){\n\tn=read<int>(); lor(i,1,n) a[i]=read<ll>(),sum[i]=sum[i-1]+a[i],abssum[i]=abssum[i-1]+abs(a[i]); ans=sum[n];\n\tnxt[n+1]=n+1; sum[n+1]=sum[n]; abssum[n+1]=abssum[n]; ror(i,1,n) {if(a[i+1]<0) nxt[i]=i+1; else nxt[i]=nxt[i+1];}\n\tlor(i,1,n) if(a[i]<0){\n\t\tans=max(ans,sum[i-1]+(abssum[n]-abssum[nxt[i]-1])-(abssum[nxt[i]-1]-abssum[i-1]));\n\t}\n\tprintf(\"%lld\\n\",ans);\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define err(args...) {}\n#ifdef DEBUG\n#include \"_debug.cpp\"\n#endif\nusing namespace std;\nusing ll = long long;\nusing ld = long double;\ntemplate <typename T> using lim = numeric_limits<T>;\ntemplate <typename T> istream& operator>>(istream& is, vector<T>& a) { for(T& x : a) { is >> x; } return is; }\n\nint main() {\n    ios_base::sync_with_stdio(false);\n    cin.tie(0);\n    int n;\n    cin >> n;\n    vector<int> a(n), sgn(n);\n    for(int i = 0; i < n; i++) {\n        char c = '+';\n        if(i) cin >> c;\n        sgn[i] = c == '+' ? 1 : -1;\n        cin >> a[i];\n    }\n    const int N = 100'000;\n    static ll opt[N + 1][2][2];\n    for(int i = n; i >= 0; i--) {\n        for(int flipped = 0; flipped <= 1; flipped++) {\n            for(int has_flipped = 0; has_flipped <= 1; has_flipped++) {\n                ll& ans = opt[i][flipped][has_flipped];\n                if(i == n) {\n                    ans = 0;\n                } else {\n                    ans = a[i] * sgn[i] * (flipped ? -1 : 1) + opt[i + 1][flipped][has_flipped];\n                    if(sgn[i] == -1) {\n                        ans = max(ans, a[i] * sgn[i] * (flipped ? -1 : 1) + opt[i + 1][not flipped][1]);\n                    }\n                    if(has_flipped) {\n                        ans = max(ans, a[i] * sgn[i] + opt[i + 1][not flipped][1]);\n                    }\n                }\n            }\n        }\n    }\n    cout << opt[0][0][0] << endl;\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef pair<int, int> ii;\ntypedef vector<int> vi;\n\n#define SZ(x) ((int)x.size())\n\nconst int N = (int)1e5+5;\nconst ll oo = (ll)1e18+7;\nint n, op[N];\nll a[N], f[N][3];\n\nvoid readData() {\n\tscanf(\"%d\", &n);\n\top[0] = 1;\n\tfor (int i = 1; i <= n; ++i) {\n\t\tscanf(\"%lld\", &a[i]);\n\t\tif (i == n) break;\n\t\tchar s[2]; scanf(\"%s\", s);\n\t\tif (s[0] == '-') op[i] = -1;\n\t\telse op[i] = 1;\n\t}\n}\n\nnamespace my_old_sol {\n\tll dp[N], sum[N];\n\tpriority_queue<ll> pq;\n\tvector<int> q;\n\n\tvoid solve() {\n\t\treadData();\n\t\tfor (int i = 1; i <= n; ++i) sum[i] = sum[i - 1] + a[i];\n\t\tint idx = 1;\n\t\tfor (; idx <= n; ++idx) {\n\t\t\tdp[idx] = sum[idx];\n\t\t\tif (op[idx] == -1) break;\n\t\t}\n\t\tfor (int i = idx + 1; i <= n; ++i) {\n\t\t\tdp[i] = dp[i - 1] + (ll)op[i - 1] * a[i];\n\t\t\tif (op[i - 1] == -1) {\n\t\t\t\tif (SZ(q)) {\n\t\t\t\t\tll val = sum[i - 1] - sum[q.back() - 1];\n\t\t\t\t\tpq.push(dp[q.back() - 1] - val - sum[i - 1]);\n\t\t\t\t}\n\t\t\t\tq.push_back(i);\n\t\t\t}\n\t\t\tif (SZ(pq) > 0) dp[i] = max(dp[i], pq.top() + sum[i]);\n\t\t}\n\t\tprintf(\"%lld\", dp[n]);\n\t}\n}\n\nint main() {\n\treadData();\n\tfor (int i = 0; i <= n; ++i) f[i][0] = f[i][1] = f[i][2] = -oo;\n\tf[0][0] = 0;\n\tfor (int i = 0; i < n; ++i) {\n\t\tfor (int j = 0; j < 3; ++j) if (f[i][j] != -oo) {\n\t\t\tint oper = (j % 2 == 0 ? op[i] : -op[i]);\n\t\t\tf[i + 1][j] = max(f[i + 1][j], f[i][j] + (ll)oper * a[i + 1]);\n\t\t\tif (op[i] == -1 && j < 2) f[i + 1][j + 1] = max(f[i + 1][j + 1], f[i][j] + (ll)oper * a[i + 1]);\n\t\t\tif (j > 0) f[i + 1][j - 1] = max(f[i + 1][j - 1], f[i][j] - (ll)oper * a[i + 1]);\n\t\t}\n\t}\n\tprintf(\"%lld\", max(f[n][0], max(f[n][1], f[n][2])));\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "// Math = ♥\n// Sometimes it is people that no one imagines anything of who do things that no one can imagine\n// After all this time? Always\n\n#include <bits/stdc++.h>                        // uncomment before submission\n//#include <ext/pb_ds/assoc_container.hpp>\t\t// uncomment before submission\n//#include <ext/pb_ds/tree_policy.hpp>\t\t\t// uncomment before submission\n//using namespace __gnu_pbds;\t\t\t\t\t// uncomment before submission\nusing namespace std;\n//<---------------------------------------------------Template----------------------------------------------------------->\n#define int long long\n#define ll long long\n#define ld long double\nint INF = 1e9 + 7;\ntypedef pair<ll, ll> ii;\ntypedef vector<ll> vi;                  // Vector of long long\ntypedef vector<vi> vvi;                 // Vector of vi\ntypedef vector<ii> vii;                 // Vector of pairs\ntypedef vector<vii> vvii;               // Vector of Vector of pairs\ntypedef vector<bool> vb;                // Vector of bool\n#define pq priority_queue               // Max heap (To convert to min heap, use negative sign before every value)\n#define ff first                        // For pairs\n#define ss second                       // For pairs\n#define pb push_back                    // Pushback to vector\n#define mp make_pair                    // Makes pairs to be stored as pair\n#define all(c) (c).begin(), (c).end()   // Mainly used by me in sorting\n// ordered_set adds two new functions to set - (set).find_by_order([kth element based on zero indexing]) and order_of_key()\n// order_of_key returns number of elements less that parameter. If element exists, that order is its index\n#define ordered_set tree<ll, null_type, less<ll>, rb_tree_tag, tree_order_statistics_node_update>\n//<----------------------------------------------------------------------------------------------------------------------->\n\nsigned main()\n{\n    ios_base::sync_with_stdio(false);\n    cin.tie(NULL);\n    int n;\n    cin >> n;\n\n    vector<char> op;\n    vi num;\n\n    int x;\n    cin >> x, num.pb(x);\n    for (int i = 0; i < n - 1; i++)\n    {\n        char ch;\n        cin >> ch >> x;\n        op.pb(ch), num.pb(x);\n    }\n\n    vvi dp(n, vector<int>(3));\n    dp[0][0] = num[0];\n    dp[0][1] = -INF;\n    dp[0][2] = -INF;\n\n    for (int i = 1; i < n; i++)\n    {\n        if (op[i - 1] == '+')\n        {\n            dp[i][0] = dp[i - 1][0] + num[i];\n            dp[i][1] = dp[i - 1][1] - num[i];\n            dp[i][2] = dp[i - 1][2] + num[i];\n            dp[i][0] = max(dp[i][0], dp[i][2]));\n            dp[i][1] = max(dp[i][1], dp[i][2]);\n        } else\n        {\n            dp[i][1] = max(dp[i - 1][0], dp[i - 1][1]) - num[i];\n            dp[i][2] = max(dp[i - 1][1], dp[i - 1][2]) + num[i];\n            dp[i][0] = -INF;\n        }\n    }\n\n    int a[] = {dp[n - 1][0], dp[n - 1][1], dp[n - 1][2]};\n    sort(a, a + 3);\n\n    cout << a[2] << endl;\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <fstream>\n#include <sstream>\n#include <iomanip>\n#include <vector>\n#include <string>\n#include <algorithm>\n#include <queue>\n#include <stack>\n#include <map>\n#include <set>\n#include <unordered_set>\n#include <unordered_map>\n#include <bitset>\n#include <limits>\n#include <random>\n#include <complex>\n#include <cmath>\n#include <cstdio>\n#include <cstdlib>\n#include <cassert>\nusing namespace std;\n\n#define REP(i,n) for (int i = 0; i < n; i++)\ntemplate <class T> using reversed_priority_queue = priority_queue<T, vector<T>, greater<T> >;\ntypedef long long ll;\n\nll N;\nchar op[100010];\nll A[100010];\nll dp[3][100010];\n\nint main ()\n{\n    cin >> N;\n    op[0] = '+';\n    cin >> A[0];\n    REP(i,N - 1) {\n        cin >> op[i + 1] >> A[i + 1];\n    }\n\n    REP(i,3)REP(j,100010) dp[i][j] = -1e18;\n    dp[0][1] = A[0];\n\n    for (int i = 1; i < N; i++) {\n        if (op[i] == '+') {\n            dp[0][i + 1] = dp[0][i] + A[i];\n            dp[1][i + 1] = dp[1][i] - A[i];\n            dp[2][i + 1] = dp[2][i] + A[i];\n        } else {\n            dp[0][i + 1] = dp[1][i] + A[i];\n            dp[1][i + 1] = max(dp[0][i], dp[2][i]) - A[i];\n            dp[2][i + 1] = dp[1][i] + A[i];\n        }\n        dp[1][i + 1] = max(dp[1][i + 1], dp[2][i + 1]);\n        dp[0][i + 1] = max(dp[0][i + 1], dp[1][i + 1]);\n    }\n\n    ll ans = 0;\n    REP(i,3) ans = max(ans, dp[i][N]);\n    cout << ans << endl;\n\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include\"bits/stdc++.h\"\n\n\n#define PB push_back\n#define PF push_front\n#define LB lower_bound\n#define UB upper_bound\n#define fr(x) freopen(x,\"r\",stdin)\n#define fw(x) freopen(x,\"w\",stdout)\n#define iout(x) printf(\"%d\\n\",x)\n#define lout(x) printf(\"%lld\\n\",x)\n#define REP(x,l,u) for(int x = (l);x<=(u);x++)\n#define RREP(x,l,u) for(int x = (l);x>=(u);x--)\n#define mst(x,a) memset(x,a,sizeof(x))\n#define PII pair<int,int>\n#define PLL pair<ll,ll>\n#define MP make_pair\n#define se second\n#define fi first\n#define dbg(x) cout<<#x<<\" = \"<<(x)<<endl;\n#define sz(x) ((int)x.size())\n#define cl(x) x.clear()\n\ntypedef  long long ll;\ntypedef unsigned long long ull;\ntypedef double db;\ntypedef long double ld;\nusing namespace std;\n\nconst int maxn = 100010;\nconst int mod = 1e9+7;\nconst int MAX = 1000000010;\nconst double eps = 1e-6;\nconst double PI = acos(-1);\n\ntemplate<typename T> inline void read(T &x){\nx=0;T f=1;char ch;do{ch=getchar();if(ch=='-')f=-1;}while(ch<'0'||ch>'9');do x=x*10+ch-'0',ch=getchar();while(ch<='9'&&ch>='0');x*=f;\n}\n\ntemplate<typename A,typename B> inline void read(A&x,B&y){read(x);read(y);}\ntemplate<typename A,typename B,typename C> inline void read(A&x,B&y,C&z){read(x);read(y);read(z);}\ntemplate<typename A,typename B,typename C,typename D> inline void read(A&x,B&y,C&z,D&w){read(x);read(y);read(z);read(w);}\ntemplate<typename A,typename B> inline A fexp(A x,B p){A ans=1;for(;p;p>>=1,x=1LL*x*x%mod)if(p&1)ans=1LL*ans*x%mod;return ans;}\ntemplate<typename A,typename B> inline A fexp(A x,B p,A mo){A ans=1;for(;p;p>>=1,x=1LL*x*x%mo)if(p&1)ans=1LL*ans*x%mo;return ans;}\n\nint n,cnt;\n\nchar st[20];\n\nPLL A[maxn];\n\nll sm[maxn];\n\nvoid Work(){\n\tll ans=0;\n\tint x;read(x);ans+=x;\n\tbool ok=0;\n\tll pos=0,tot=0;\n\tREP(i,2,n){\n\t\tscanf(\"%s\",st);read(x);\n\t\tif(!ok){\n\t\t\tif(st[0]=='+')ans+=x;\n\t\t\telse{\n\t\t\t\tok=1;\n\t\t\t\tpos=x;tot=0;\n\t\t\t}\n\t\t}\n\t\telse{\n\t\t\tif(st[0]=='+')tot+=x;\n\t\t\telse{\n\t\t\t\tA[++cnt]=MP(pos,tot);\n\t\t\t\tpos=x;tot=0;\n\t\t\t}\n\t\t}\n\t}\n\tA[++cnt]=MP(pos,tot);\n\tll mx=0;\n\tREP(i,1,cnt)mx+=A[i].se-A[i].fi;\n\tRREP(i,cnt,1)sm[i]=sm[i+1]+A[i].fi+A[i].se;\n\tll now=0;\n\tREP(i,1,cnt){\n\t\tmx=max(mx,now+sm[i+1]-A[i].fi-A[i].se);\n\t\tnow+=A[i].se-A[i].fi;\n\t}\n\tcout<<mx+ans<<endl;\n}\n\nvoid Init(){\n\tread(n);\n}\n\nint main(){\n\tInit();\n\tWork();\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "//Translator is written by Mys_C_K.\n#include<bits/stdc++.h>\nusing namespace std;\n#define ______________________________________________________________ else\n#define _____________________________________________________________ struct\n#define ____________________________________________________________ const\n#define ___________________________________________________________ priority_queue\n#define __________________________________________________________ unordered_map\n#define _________________________________________________________ min\n#define ________________________________________________________ inline\n#define _______________________________________________________ return\n#define ______________________________________________________ unsigned\n#define _____________________________________________________ while\n#define ____________________________________________________ if\n#define ___________________________________________________ upper_bound\n#define __________________________________________________ delete\n#define _________________________________________________ memcpy\n#define ________________________________________________ sizeof\n#define _______________________________________________ queue\n#define ______________________________________________ namespace\ntypedef long long _____________________________________________;\n#define ____________________________________________ size\n#define ___________________________________________ memset\n#define __________________________________________ lower_bound\n#define _________________________________________ printf\n#define ________________________________________ iterator\ntypedef long double _______________________________________;\n#define ______________________________________ erase\n#define _____________________________________ vector\n#define ____________________________________ max\n#define ___________________________________ scanf\n#define __________________________________ using\n#define _________________________________ for\n#define ________________________________ sort\n#define _______________________________ end\n#define ______________________________ cin\n#define _____________________________ find\n#define ____________________________ count\n#define ___________________________ reverse\n#define __________________________ static\n#define _________________________ endl\n#define ________________________ unique\n#define _______________________ begin\n#define ______________________ insert\n#define _____________________ cout\n#define ____________________ std\n#define ___________________ int\n#define __________________ char\n#define _________________ swap\n#define ________________ new\n#define _______________ set\n#define ______________ double\n#define _____________ map\n#define ____________ void\n#define ___________ stack\n#define ___ getchar()\n#define ____(_______________________________________________________________,______________________________________________________________________,b) _________________________________(___________________ _______________________________________________________________=______________________________________________________________________;_______________________________________________________________<=b;_______________________________________________________________++)\n#define _____(_______________________________________________________________,v) ____(_______________________________________________________________,0,(___________________)v.____________________________________________()-1)\n#define ______ ______________\n#define _______ push_back\n#define ________ make_pair\n#define _________ first\n#define __________ second\n__________________________________ ______________________________________________ ____________________;\ntypedef pair<___________________,___________________> _;\ntypedef _______________<___________________>::________________________________________ __;\n________________________________________________________ ___________________ ________________________________________________________________()\n{\n\t___________________ _________________________________________________________________,__________________________________________________________________;_____________________________________________________((__________________________________________________________________=___)<'0'||__________________________________________________________________>'9');\n\t_________________________________________________________________=__________________________________________________________________^'0';_____________________________________________________((__________________________________________________________________=___)>='0'&&__________________________________________________________________<='9')\n\t\t_________________________________________________________________=(_________________________________________________________________<<1)+(_________________________________________________________________<<3)+(__________________________________________________________________^'0');_______________________________________________________ _________________________________________________________________;\n}\n____________________________________________________________ ___________________ ___________________________________________________________________=100010;_____________________________________________ ____________________________________________________________________[___________________________________________________________________],_____________________________________________________________________[___________________________________________________________________];___________________ ______________________________________________________________________[___________________________________________________________________],_______________________________________________________________________[___________________________________________________________________],________________________________________________________________________[___________________________________________________________________];\n________________________________________________________ _____________________________________________ _________________________________________________________________________(___________________ __________________________________________________________________________,___________________ ___________________________________________________________________________) { ____________________________________________________(__________________________________________________________________________>___________________________________________________________________________) _______________________________________________________ 0;_______________________________________________________ _____________________________________________________________________[___________________________________________________________________________]-_____________________________________________________________________[__________________________________________________________________________-1]; }\n___________________ main()\n{\n\t___________________ ____________________________________________________________________________=________________________________________________________________();______________________________________________________________________[1]=________________________________________________________________(),____________________________________________________________________[1]=______________________________________________________________________[1],_____________________________________________________________________[1]=______________________________________________________________________[1];\n\t_________________________________(___________________ _______________________________________________________________=1;_______________________________________________________________<____________________________________________________________________________;_______________________________________________________________++)\n\t{\n\t\t_____________________________________________________((_______________________________________________________________________[_______________________________________________________________]=___)!='+'&&_______________________________________________________________________[_______________________________________________________________]!='-');______________________________________________________________________[_______________________________________________________________+1]=________________________________________________________________();\n\t\t____________________________________________________(_______________________________________________________________________[_______________________________________________________________]=='+') ____________________________________________________________________[_______________________________________________________________+1]=____________________________________________________________________[_______________________________________________________________]+______________________________________________________________________[_______________________________________________________________+1];\n\t\t______________________________________________________________ ____________________________________________________________________[_______________________________________________________________+1]=____________________________________________________________________[_______________________________________________________________]-______________________________________________________________________[_______________________________________________________________+1];_____________________________________________________________________[_______________________________________________________________+1]=_____________________________________________________________________[_______________________________________________________________]+______________________________________________________________________[_______________________________________________________________+1];\n\t}\n\t________________________________________________________________________[____________________________________________________________________________]=____________________________________________________________________________;_____________________________________________ _____________________________________________________________________________=____________________________________________________________________[____________________________________________________________________________];_________________________________(___________________ _______________________________________________________________=____________________________________________________________________________-1;_______________________________________________________________;_______________________________________________________________--) ____________________________________________________(_______________________________________________________________________[_______________________________________________________________]=='+') ________________________________________________________________________[_______________________________________________________________]=________________________________________________________________________[_______________________________________________________________+1];______________________________________________________________ ________________________________________________________________________[_______________________________________________________________]=_______________________________________________________________;\n\t____(_______________________________________________________________,1,____________________________________________________________________________-1) ____________________________________________________(_______________________________________________________________________[_______________________________________________________________]=='-')\n\t\t_____________________________________________________________________________=____________________________________(_____________________________________________________________________________,____________________________________________________________________[_______________________________________________________________]-_________________________________________________________________________(_______________________________________________________________+1,________________________________________________________________________[_______________________________________________________________+1])+_____________________________________________________________________[____________________________________________________________________________]-_____________________________________________________________________[________________________________________________________________________[_______________________________________________________________+1]]);\n\t_______________________________________________________ !_________________________________________(\"%lld\\n\",_____________________________________________________________________________);\n}"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<cstring>\n#include<algorithm>\n#define rep(i,a,b) for(int i=(a);i<=(b);i++)\n#define per(i,a,b) for(int i=(a);i>=(b);i--)\n#define Rep(i,x) for(int i=head[x];i+1;i=nxt[i])\n#define rep2(i,a,b) for(int i=(a);i<(b);i++)\n#define ff first\n#define ss second\nusing namespace std;\nconst int N=100005;\nconst long long inf=1e15;\ntypedef long long ll;\n//------------------------------------------head---------------------------------------------------//\nll a[N];\nint op[N];\nll f[N][2];\ninline void Updmax(ll &x,ll y){x=(x<=y)?y:x;}\nint main()\n{\n\tint m=0;//ll tot=0;\n\tll tot=0,ans=0,pos=0,ma=-inf;\n\tint n;scanf(\"%d\",&n);scanf(\"%d\",&a[1]);rep(i,2,n)\n\t{\n\t\tchar s[4];int x;scanf(\"%s%d\",s+1,&x);\n\t\top[i-1]=(s[1]=='+');a[i]=x;\n\t}\n\tans=a[1];\n\trep(i,1,n-1){if(op[i])ans+=a[i+1];else ans-=a[i+1];}\n\t//printf(\"%lld\\n\",ans);\n\tper(i,n-1,1)\n\t{\n\t\tif(op[i]==1) tot+=2ll*a[i+1];\n\t\telse\n\t\t{\n\t\t\tma=max(ma,ans+pos-tot);\n\t\t\tpos+=2ll*a[i+1];\n\t\t\ttot=0;\n\t\t}\n\t}\n\tprintf(\"%lld\\n\",ma);\n\treturn 0;\n\t// 0 min\n\t// 1 max\n\t//n=m;//f[1][0][1]=f[1][0][0]=a[1];\n\t/*rep(i,0,n)rep(j,0,1)f[i][j]=-inf;f[1][0]=a[1];\n\t//rep(i,1,n)printf(\"%d \",a[i]);\n\top[0]=-1;\n\top[n]=1;a[++n]=0;\n\trep(i,1,n-1)\n\t{\n\t\tif(op[i]==1)\n\t\t{\n\t\t\t//printf(\"Case owo:%d\\n\",i);\n\t\t\tUpdmax(f[i+1][0],f[i][0]-a[i+1]);\n\t\t\tUpdmax(f[i+1][1],f[i][0]-a[i+1]);\n\t\t\tUpdmax(f[i+1][1],f[i][1]+a[i+1]);\n\t\t\tUpdmax(f[i+1][0],f[i][1]+a[i+1]);\n\t\t\t\n\t\t}\n\t\telse\n\t\t{\n\t\t\tUpdmax(f[i+2][0],f[i][0]+(a[i+1]-a[i+2]));\n\t\t\tUpdmax(f[i+2][1],f[i][0]+(a[i+1]-a[i+2]));\n\t\t\tUpdmax(f[i+2][1],f[i][1]-(a[i+1]-a[i+2]));\n\t\t\tUpdmax(f[i+2][0],f[i][1]-(a[i+1]-a[i+2]));\n\t\t}\n\t}*/\n\t//printf(\"%lld\\n\",max(f[n][0],f[n][1]));\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "//khodaya khodet komak kon\n#include <bits/stdc++.h>\n\n#define F first\n#define S second\n#define pb push_back\n#define all(x) x.begin(), x.end()\n#pragma GCC optimise (\"ofast\")\n#pragma GCC optimise(\"unroll-loops\")\n#define int long long\n\nusing namespace std;\n\ntypedef long long ll;\ntypedef pair<int, int> pii;\ntypedef vector<int> vi;\n\nconst int N = 100000 + 10;\nconst ll MOD = 1000000000 + 7;\nconst ll INF = 1000000000000000000;\nconst ll LOG = 25;\n\nvector<int> nw;\nint n, a[N], dp[N][4];\nbool What[N];\n\nint POW(int x){\n\treturn (x % 2 ? -1 : 1);\n}\n\nint32_t main(){\n\tios::sync_with_stdio(0); cin.tie(0); cout.tie(0);\n\tcin >> n;\n\tfor( int i = 1; i <= n; i++){\n\t\tcin >> a[i];\n\t\tif (i != n){\n\t\t\tchar c;\n\t\t\tcin >> c;\n\t\t\tif (c == '-') What[i] = 1;\n\t\t}\n\t}\n\tfor( int i = 0; i < N; i++) for (int j = 0; j < 3; j++) dp[i][j] = -INF;\n\tdp[0][0] = 0;\n\t//cout << POW(1) << ' ' << POW(2) << '\\n';\n\tfor (int i = 1; i <= n; i++){\n\t\tfor (int j = 0; j <= 2; j++){\n\t\t\tif (What[i - 1]){\n\t\t\t\tdp[i][j + 1] = max(dp[i][j + 1], dp[i - 1][j] + POW(j + 1) * a[i]);\n\t\t\t\tif (j != 0){\n\t\t\t\t\tdp[i][j - 1] = max(dp[i][j - 1], dp[i - 1][j] + POW(j + 1) * a[i]);\n\t\t\t\t}\n\t\t\t\tdp[i][j] = max(dp[i][j], dp[i - 1][j] + POW(j + 1) * a[i]);\n\t\t\t}else{\n\t\t\t\t//cout << i << '\\n';\n\t\t\t\tif (j != 0) dp[i][j - 1] = max(dp[i][j - 1], dp[i - 1][j] + POW(j) * a[i]);\n\t\t\t\tdp[i][j] = max(dp[i][j], dp[i - 1][j] + POW(j) * a[i]);\n\t\t\t}\n\t\t}\n\t}\n\t//cout << dp[1][0] << ' ' << dp[2][1] << ' ' << dp[3][1] << ' ' << dp[4][0] << '\\n';\n\tll ans = max(dp[n][0], max(dp[n][2], dp[n][1]));\n\tcout << ans;\n\n\n\n\n\n\n\n\n\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\nlong long a[100005],sum[100005],sum2[100005];\nchar c[100005];\nset<int> minu;\nlong long getsum(int l,int r){\n\tif(l>r) return 0;\n\treturn (sum[r]-((l==0)?0:sum[l-1]));\n}\nlong long getsum2(int l,int r){\n\tif(l>r) return 0;\n\treturn (sum2[r]-((l==0)?0:sum2[l-1]));\n}\nint main(){\n\tint n;\n\tscanf(\"%d\",&n);\n\tscanf(\"%I64d\",&a[0]);\n\tc[0]='+';\n\tfor(int i=1;i<n;i++){\n\t\tstring tmp;\n\t//\tscanf(\"%c\",&c[i]);\n\t\tcin>>tmp;\n\t\tc[i]=tmp[0];\n\t\tscanf(\"%I64d\",&a[i]);\n\t\tif(c[i]=='-') minu.insert(i);\n\t}\n\tsum[0]=a[0];\n\tsum2[0]=a[0];\n\tfor(int i=1;i<n;i++){\n\t\tsum[i]=a[i]+sum[i-1];\n\t\tif(c[i]=='+') sum2[i]=sum2[i-1]+a[i]; else sum2[i]=sum2[i-1]-a[i];\n\t}\n//\tfor(int i=0;i<n;i++) cout<<sum2[i]<<\" \";\n//\tcout<<endl;\n\tlong long now=0,ma=getsum2(0,n-1);\n\tfor(int i=0;i<n;i++){\n\t\tif(c[i]=='-'&&minu.upper_bound(i)!=minu.end()){\n\t\t\tint idx=*minu.upper_bound(i);\n\t\t\tma=max(ma,now-(a[i]+getsum2(i+1,idx-1)-getsum(idx,n-1)));\n\t\t//\tcout<<i<<\" \"<<idx<<\" \"<<now<<\" \"<<getsum2(i,idx-1)<<\" \"<<getsum(idx,n-1)<<endl;\n\t\t}\n\t\tnow=sum2[i];\n\t}\n\tcout<<ma;\n}"
  },
  {
    "language": "C++",
    "code": "// need\n#include <iostream>\n#include <algorithm>\n\n// data structure\n#include <bitset>\n//#include <list>\n#include <map>\n#include <queue>\n#include <set>\n#include <stack>\n#include <string>\n#include <utility>\n#include <vector>\n//#include <array>\n//#include <tuple>\n#include <unordered_map>\n#include <unordered_set>\n//#include <complex>\n//#include <deque>\n\n// stream\n//#include <istream>\n//#include <sstream>\n//#include <ostream>\n\n// etc\n#include <cassert>\n#include <functional>\n#include <iomanip>\n//#include <typeinfo>\n#include <chrono>\n#include <random>\n#include <cfenv>\n\n#define INIT std::ios::sync_with_stdio(false);std::cin.tie(0);\n#define VAR(type, ...)type __VA_ARGS__;MACRO_VAR_Scan(__VA_ARGS__);\ntemplate<typename T> void MACRO_VAR_Scan(T& t) { std::cin >> t; }\ntemplate<typename First, typename...Rest>void MACRO_VAR_Scan(First& first, Rest&...rest) { std::cin >> first; MACRO_VAR_Scan(rest...); }\n#define VEC_ROW(type, n, ...)std::vector<type> __VA_ARGS__;MACRO_VEC_ROW_Init(n, __VA_ARGS__); for(int i=0; i<n; ++i){MACRO_VEC_ROW_Scan(i, __VA_ARGS__);}\ntemplate<typename T> void MACRO_VEC_ROW_Init(int n, T& t) { t.resize(n); }\ntemplate<typename First, typename...Rest>void MACRO_VEC_ROW_Init(int n, First& first, Rest&...rest) { first.resize(n); MACRO_VEC_ROW_Init(n, rest...); }\ntemplate<typename T> void MACRO_VEC_ROW_Scan(int p, T& t) { std::cin >> t[p]; }\ntemplate<typename First, typename...Rest>void MACRO_VEC_ROW_Scan(int p, First& first, Rest&...rest) { std::cin >> first[p]; MACRO_VEC_ROW_Scan(p, rest...); }\n#define OUT(d) std::cout<<d;\n#define FOUT(n, d) std::cout<<std::fixed<<std::setprecision(n)<<d;\n#define SOUT(n, c, d) std::cout<<std::setw(n)<<std::setfill(c)<<d;\n#define SP std::cout<<\" \";\n#define TAB std::cout<<\"\\t\";\n#define BR std::cout<<\"\\n\";\n#define ENDL std::cout<<std::endl;\n#define FLUSH std::cout<<std::flush;\n#define VEC(type, c, n) std::vector<type> c(n);for(auto& i:c)std::cin>>i;\n#define MAT(type, c, m, n) std::vector<std::vector<type>> c(m, std::vector<type>(n));for(auto& r:c)for(auto& i:r)std::cin>>i;\n#define ALL(a) (a).begin(),(a).end()\n#define FOR(i, a, b) for(int i=(a);i<(b);++i)\n#define RFOR(i, a, b) for(int i=(b)-1;i>=(a);--i)\n#define REP(i, n) for(int i=0;i<int(n);++i)\n#define RREP(i, n) for(int i=(n)-1;i>=0;--i)\n#define FORLL(i, a, b) for(ll i=ll(a);i<ll(b);++i)\n#define RFORLL(i, a, b) for(ll i=ll(b)-1;i>=ll(a);--i)\n#define REPLL(i, n) for(ll i=0;i<ll(n);++i)\n#define RREPLL(i, n) for(ll i=ll(n)-1;i>=0;--i)\n#define PAIR std::pair<int, int>\n#define PAIRLL std::pair<ll, ll>\n#define IN(a, x, b) (a<=x && x<b)\n#define SHOW(d) {std::cerr << #d << \"\\t:\" << d << \"\\n\";}\n#define SHOWVECTOR(v) {std::cerr << #v << \"\\t:\";for(const auto& xxx : v){std::cerr << xxx << \" \";}std::cerr << \"\\n\";}\n#define SHOWVECTOR2(v) {std::cerr << #v << \"\\t:\\n\";for(const auto& xxx : v){for(const auto& yyy : xxx){std::cerr << yyy << \" \";}std::cerr << \"\\n\";}}\n#define SHOWPAIR(p) {std::cerr << #p << \"\\t:(\" << p.first << \",\\t\" << p.second << \")\\n\";}\n#define SHOWPAIRVECTOR2(v) {std::cerr << #v << \"\\t:\\n\";for(const auto& xxx : v){for(const auto& yyy : xxx){std::cerr<<'('<<yyy.first<<\", \"<<yyy.second<<\") \";}std::cerr << \"\\n\";}}\n#define SHOWPAIRVECTOR(v) {for(const auto& xxx:v){std::cerr<<'('<<xxx.first<<\", \"<<xxx.second<<\") \";}std::cerr<<\"\\n\";}\n#define SHOWQUEUE(a) {std::queue<decltype(a.front())> tmp(a);std::cerr << #a << \"\\t:\";for(int i=0; i<static_cast<int>(a.size()); ++i){std::cerr << tmp.front() << \"\\n\";tmp.pop();}std::cerr << \"\\n\";}\ntemplate<typename T> inline T CHMAX(T& a, const T b) { return a = (a < b) ? b : a; }\ntemplate<typename T> inline T CHMIN(T& a, const T b) { return a = (a > b) ? b : a; }\n#define EXCEPTION(msg) throw std::string(\"Exception : \" msg \" [ in \") + __func__ + \" : \" + std::to_string(__LINE__) + \" lines ]\"\n#define TRY(cond, msg) try {if (cond) EXCEPTION(msg);}catch (std::string s) {std::cerr << s << std::endl;}\nvoid CHECKTIME(std::function<void()> f) { auto start = std::chrono::system_clock::now(); f(); auto end = std::chrono::system_clock::now(); auto res = std::chrono::duration_cast<std::chrono::nanoseconds>((end - start)).count(); std::cerr << \"[Time:\" << res << \"ns  (\" << res / (1.0e9) << \"s)]\\n\"; }\n\n#define int ll\nusing ll = long long;\nusing ull = unsigned long long;\nconstexpr int INFINT = 1 << 30;                          // 1.07x10^ 9\nconstexpr int INFINT_LIM = (1LL << 31) - 1;              // 2.15x10^ 9\nconstexpr ll INFLL = 1LL << 60;                          // 1.15x10^18\nconstexpr ll INFLL_LIM = (1LL << 62) - 1 + (1LL << 62);  // 9.22x10^19\nconstexpr double EPS = 1e-7;\nconstexpr int MOD = 1000000007;\nconstexpr double PI = 3.141592653589793238462643383279;\n\nsigned main() {\n\tINIT;\n\tVAR(int, n);\n\tstd::vector<int> a(n);\n\tstd::vector<char> op(n - 1);\n\tint minus = 0;\n\tREP(i, n-1) {\n\t\tstd::cin >> a[i] >> op[i];\n\t\tminus += (op[i] == '-');\n\t}\n\tstd::cin >> a[n - 1];\n\n\tll sum_ = 0;\n\tREP(i, n) {\n\t\tsum_ += a[i];\n\t}\n\tll ans = -INFLL;\n\tREP(m, minus) {\n\t\tll sum = sum_;\n\t\tint cnt = -m;\n\t\tREP(i, n - 1) {\n\t\t\tif (op[i] == '-') {\n\t\t\t\tif (cnt == 1) break;\n\t\t\t\tsum -= 2 * a[i + 1];\n\t\t\t\t++cnt;\n\t\t\t}\n\t\t\telse if (op[i] == '+' && cnt == 1) {\n\t\t\t\tsum -= 2 * a[i + 1];\n\t\t\t}\n\t\t}\n\t\tCHMAX(ans, sum);\n\t}\n\tOUT(ans)BR;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define int long long\n#define fi first\n#define se second\n#define PB push_back\nusing namespace std;\ntypedef pair<int, int> P1;\ntypedef pair<int, pair<int, int> > P2;\nstatic const int INF = 1ll<<60;\nstatic const int dx[] = { 1, -1, 0, 0, };\nstatic const int dy[] = { 0, 0, 1, -1 };\nstatic const int mod = 1000000007;\n\nint N;\nint A[100005];\nchar op[100005];\nint dp[100005][5];\n//    [i項目][i項目までに開いているかっこの数]\n\nint solve(){\n    for(int i=0;i<N;++i)for(int j=0;j<5;++j)dp[i][j]=-INF;\n    dp[0][0] = A[0];\n    for(int i=0;i<N-1;++i){\n        for(int j=0;j<=min(i,3ll);++j){\n            int f;\n            if(j%2==0)f=1ll;\n            else f=-1ll;\n            int t1 = f*A[i+1];\n            //cout<<t1<<endl;\n            //cout<<i<<\" \"<<j<<endl;\n            if(op[i+1]=='+'){\n                dp[i+1][j] = max(dp[i][j]+t1,dp[i+1][j]);\n                if(j!=0)dp[i+1][j-1] = max(dp[i][j]+t1,dp[i+1][j-1]);\n            }\n            else {\n                dp[i+1][j] = max(dp[i][j]-t1,dp[i+1][j]);\n                dp[i+1][j+1] = max(dp[i][j]-t1,dp[i+1][j+1]);\n                if(j!=0)dp[i+1][j-1] = max(dp[i][j]-t1,dp[i+1][j-1]);\n            }\n            //cout<<i<<\" \"<<j<<endl;\n            //cout<<dp[i][j]<<\" \"<<dp[i+1][j]<<\" \"<<dp[i+1][j+1]<<endl;\n        }\n    }\n    int ans=-INF;\n    for(int i=0;i<N;++i)ans=max(dp[N-1][i],ans);\n    return ans;\n}\n\n\nsigned main(){\n    cin>>N;\n    op[0]='+';\n    for(int i=0;i<N;++i){\n        cin>>A[i];\n        if(i!=N-1)cin>>op[i+1];\n    }\n    cout<<solve()<<endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define inf 100000000000000ll\nusing namespace std;\n\nint read() {\n  int x = 0, f = 1;\n  char c = getchar();\n  while (c < '0' || c > '9')\n    f = (c == '-') ? -1 : f, c = getchar();\n  while (c >= '0' && c <= '9')\n    x = x * 10 + c - '0', c = getchar();\n  return x * f;\n}\n\nint n;\nlong long f[100005][3];\n// void chmax(long long &x, long long y) { x = x > y ? x : y; }\n\nint main() {\n  n = read();\n  f[0][0] = 0, f[0][1] = f[0][2] = -inf;\n  for (int i = 1, x; i <= n; ++i) {\n    x = read();\n    {\n      f[i][0] = max(f[i - 1][0], f[i - 1][1]),\n      f[i][1] = max(f[i - 1][1], f[i - 1][2]);\n      f[i][2] = f[i - 1][2];\n    }\n    f[i][0] += x, f[i][1] -= x, f[i][2] += x;\n    if (x < 0)\n      f[i][2] = max(f[i][2], f[i][1]), f[i][1] = max(f[i][1], f[i][0]);\n    // chmax(f[i][2], f[i][1]), chmax(f[i][1], f[i][0]);\n  }\n  printf(\"%lld\\n\", max(f[n][0], max(f[n][1], f[n][2])));\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstring>\n#include<cstdio>\n#define rep(i,s,t) for(int i=s;i<=t;i++)\n#define dwn(i,s,t) for(int i=s;i>=t;i--)\n#define MAXN 100010\nusing namespace std;\ninline int read()\n{\n\tint x=0,t=1,c;\n\twhile(!isdigit(c=getchar()))if(c=='-')t=-1;\n\twhile(isdigit(c))x=x*10+c-'0',c=getchar();\n\treturn x*t;\n}\nint A[MAXN];\nint op[MAXN];\nlong long normal[MAXN],rev[MAXN];\nint main()\n{\n\tint n=read();\n\trep(i,1,n)\n\t{\n\t\tA[i]=read();\n\t\tif(i<n)\n\t\t{\n\t\t\tint c=getchar();\n\t\t\twhile(c!='+'&&c!='-')c=getchar();\n\t\t\tif(c=='-')op[i+1]=-1;\n\t\t\telse op[i+1]=1;\n\t\t}\n\t}\n\top[1]=1;\n\tnormal[0]=0;\n\trep(i,1,n)normal[i]=normal[i-1]+op[i]*A[i];\n\tlong long sumv=0,ans=normal[n],block=0;\n\tdwn(i,n,1)\n\t{\n\t\tblock+=A[i];\n\t\tif(op[i]==-1)\n\t\t{\n\t\t\tans=max(ans,normal[i-1]-block+sumv);\n\t\t\tsumv+=block;\n\t\t\tblock=0;\n\t\t}\n\t}\n\tprintf(\"%lld\",ans);\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\n#include<cstdio>\n#include<cstring>\nusing namespace std;\nchar op[3];\nlong long a[100010],b[100010];\nlong long sum[100010];\nint main()\n{\n\tint n;\n\tscanf(\"%d\",&n);\n\tint N=1;\n\tscanf(\"%d\",&a[N]);\n\tfor(int i=2;i<=n;i++)\n\t{\n\t\tscanf(\"%s\",&op);\n\t\tint x;scanf(\"%d\",&x);\n\t\tif(op[0]=='-'){\n\t\t\tN++;b[N]=x;\n\t\t}\n\t\ta[N]+=x;\n\t}\n\tfor(int i=1;i<=N;i++)\n\t\tsum[i]=sum[i-1]+a[i]-2*b[i];\n\tlong long ans=sum[N];\n\tlong long cur=0;\n\tfor(int i=N;i>1;i--)\n\t{\n\t\tans=max(ans,sum[i-1]+cur-a[i]);\n\t\tcur+=a[i];\n\t}\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#pragma GCC optimize (\"O2\")\n#pragma GCC optimize (\"unroll-loops\")\n//#pragma GCC optimize(\"no-stack-protector,fast-math\")\n\nusing namespace std;\ntypedef long long ll;\ntypedef long double ld;\ntypedef pair<int, int> pii;\ntypedef pair<pii, int> piii;\ntypedef pair<ll, ll> pll;\n#define debug(x) cerr<<#x<<'='<<(x)<<endl;\n#define debugp(x) cerr<<#x<<\"= {\"<<(x.first)<<\", \"<<(x.second)<<\"}\"<<endl;\n#define debug2(x, y) cerr<<\"{\"<<#x<<\", \"<<#y<<\"} = {\"<<(x)<<\", \"<<(y)<<\"}\"<<endl;\n#define debugv(v) {cerr<<#v<<\" : \";for (auto x:v) cerr<<x<<' ';cerr<<endl;}\n#define all(x) x.begin(), x.end()\n#define pb push_back\n#define kill(x) return cout<<x<<'\\n', 0;\n\nconst ld eps=1e-7;\nconst int inf=1000000010;\nconst ll INF=10000000000000010LL;\nconst int mod=1000000007;\nconst int MAXN=100010, LOG=20;\n\nll n, m, k, u, v, x, y, t, a, b, ans;\nll A[MAXN];\nll dp[MAXN][3];\nchar op[MAXN];\n\nint main(){\n\tios_base::sync_with_stdio(false);cin.tie(0);cout.tie(0);\n\t//freopen(\"input.txt\", \"r\", stdin);\n\t//freopen(\"output.txt\", \"w\", stdout);\n\tcin>>n>>A[1];\n\tfor (int i=2; i<=n; i++) cin>>op[i-1]>>A[i];\n\t\n\tdp[1][0]=A[1];\n\tdp[1][1]=dp[1][2]=-INF;\n\tfor (int i=2; i<=n; i++){\n\t\tif (op[i-1]=='+'){\n\t\t\tdp[i][0]=max({dp[i-1][0], dp[i-1][1], dp[i-1][2]})+A[i];\n\t\t\tdp[i][1]=max({dp[i-1][1], dp[i-1][2]})-A[i];\n\t\t\tdp[i][2]=dp[i-1][2]+A[i];\n\t\t}\n\t\telse{\n\t\t\tdp[i][0]=-INF;\n\t\t\tdp[i][1]=max({dp[i-1][0], dp[i-1][1], dp[i-1][2]})-A[i];\n\t\t\tdp[i][2]=max({dp[i-1][1], dp[i-1][2]})+A[i];\n\t\t}\n\t}\n\tcout<<max({dp[n][0], dp[n][1], dp[n][2]})<<'\\n';\n\t\t\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\ntypedef pair<int,int> P;\ntypedef pair<int,P> P1;\ntypedef pair<P,P> P2;\n#define pu push\n#define pb push_back\n#define mp make_pair\n#define eps 1e-7\n#define INF 1000000000\n#define mod 1000000007\n#define fi first\n#define sc second\n#define rep(i,x) for(int i=0;i<x;i++)\n#define repn(i,x) for(int i=1;i<=x;i++)\n#define SORT(x) sort(x.begin(),x.end())\n#define ERASE(x) x.erase(unique(x.begin(),x.end()),x.end())\n#define POSL(x,v) (lower_bound(x.begin(),x.end(),v)-x.begin())\nll dp[100005][10];\nint a[100005]; int b[100005];\nint main(){\n\tint n;cin>>n;\n\tb[1] = 0;\n\tfor(int i=0;i<2*n-1;i++){\n\t\tif(i%2==0) cin>>a[(i/2)+1];\n\t\telse{\n\t\t\tstring s;cin>>s;\n\t\t\tb[(i+1)/2+1] = (s[0]=='-'?1:0);\n\t\t}\n\t}\n\t//cout<<a[1]<<a[2]<<a[3]<<b[1]<<b[2]<<b[3]<<endl;\n\trep(i,100005) rep(j,10) dp[i][j]=-1e18;\n\tdp[0][0] = 0;\n\tfor(int i=0;i<n;i++){\n\t\tfor(int j=0;j<10;j++){\n\t\t\tif(dp[i][j]<-1e17) continue;\n\t\t\tif( (j+b[i+1])%2 == 0 ){\n\t\t\t\tfor(int k=0;k<=j;k++) dp[i+1][k] = max(dp[i+1][k],dp[i][j]+a[i+1]);\n\t\t\t\tif(b[i+1]==1&&j!=9) dp[i+1][j+1] = max(dp[i+1][j+1],dp[i][j]+a[i+1]);\n\t\t\t}\n\t\t\telse{\n\t\t\t    //if(i==1&&j==0)cout<<\"N\"<<endl;\n\t\t\t\tfor(int k=0;k<=j;k++) dp[i+1][k] = max(dp[i+1][k],dp[i][j]-a[i+1]);\n\t\t\t\tif(b[i+1]==1&&j!=9) dp[i+1][j+1] = max(dp[i+1][j+1],dp[i][j]-a[i+1]);\n\t\t\t}\n\t\t}\n\t}//cout<<dp[4][1]<<endl;\n\tll res = -1e18;\n\trep(j,10) res = max(res,dp[n][j]);\n\tcout<<res<<endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\ntypedef vector<ll> vi;\ntypedef pair<ll,ll> pi;\ntypedef pair<ll,ll> pii;\ntypedef vector<pi> vpi;\ntypedef set<ll> si;\ntypedef long double ld;\n#define mp make_pair\n#define pb push_back\n#define f first\n#define s second\nll INF = 1e9;\nll MOD = 1e9+7;\n#define lb lower_bound\n#define ub upper_bound\n#define SZ(x) (ll)x.size()\n#define ALL(x) x.begin(),x.end()\n\nll ans;\nchar c;\nll N,a,t,out;\nvpi V;\n\nint main(){\n  // freopen(\"in.txt\",\"r\",stdin);\n  cin >> N;\n  cin >> ans;\n  for (int i=1;i<N;++i){\n    cin >> c >> a;\n    if (SZ(V) == 0 && c == '+'){\n      ans += a;\n      continue;\n    }\n    ans += a;\n    if (SZ(V) && V.back().f && c == '+'){\n      V.back().s += a;\n      continue;\n    }\n  }\n  if (V[1].f == 0){\n    // If second one is negative\n    cout << ans;\n    return 0;\n  }\n  out = max(out, ans - 2*V[1].s);\n  \n  cout<<out;\n}\n"
  },
  {
    "language": "C++",
    "code": "/*!|||||||!!!!!!!!!!!!!!!!!!|%%$&&&&&&&&&&&&&|'`......```':'':!;.  ......````':!;..\n||||||||||||!!!!!!!!!!!!!!!!!!!;;;;;!|%$$&&&|'..  ....``'''''::`  ......`````';:.\n||||||||||||||||||||||!!!!!!!!!!;;;;;;;;;;;'`..  ....``'''''':` ........````':'.\n|||||||||%%||%%|||||||||||||||||!;;;;;;;;'....   ....`````'''`..........````''.\n%%%%%%%%%%%%%%%%%%|%||||%%|%%%%|!;!;;;;:.       ....```````'::'`........`````.\n$$$$$$$%%$%%$$$$$%%%%%%%%%%%%%%|!!!!;'.        ....````````';|!!!!:`....```..\n$$$$$$%%%$%%$$$$$%%%%%%%%%%%%%%!;!!;`          ....```````':!!!!!!!!|||;'`.\n$$$%$%|%%||%%%%%%%%%%||%%%%%|%|!;!!:.         ....````````:!;;;!;;!!|%$$$$|:`\n%%%%%||||||||||||||||||||||||||!;!;'`.        ....```````';!!!!!!!!||;';%$&@@%:`.\n|||||||||!!|||||||||||||||||||!;!!:':'.       ..```''```';!!!!!!!||%$$%!` .'|&@@%:`. .\n||||||||!!!|||||||||||||||||||!;!;::;;:`     ..````'''`';;!!!!!!|%%$$$$&&%'   .;&#@!'....\n|||||||!!!!|||||||||||||||||||!;!;:;;;;;'.  ..```''''`:!!!!!;!!|%$$$$&&&&&@$:.   .;&#$:....\n|||!||||!!||||||||||||||||||||!;!::;;;;;;;`..```''':':;!!!!!!!!|%$$&&&&&&@&@#$:.   .`!@$:...\n|||!|||!!!|||||||||||||||||||!!;;:;;;;;;;!!;'`'''':':!;;;;;!!|||||%$&&&&@@@@@@@%`......:$$:...\n||!!||!!!!!||||||||||||||||||!!;;:;;;;;;;!!|!;'''``'':;!!;!!;!|$$$%|%&&&@@@@@@@#&;.......'%|`..\n||!!||!!!!!!|||||||||||||||!!!!;;:;;;;;;:''::::;;!;;;;':!!!!!!!!!%$&$|%&@@@@@@#@@&!`.......`|;..\n||!!|!!!!!!!||||||||||||||||||!;;:;;'````:!%%%%|;:;;:::::;|!!||!!!!|$&$%%&@@&@@##@&!'........;|'.\n|!!!|!!!!!!!|||||||||||||||!!!!;:'```';!!||!!!|!!;;;;:::::;%%||%%|||||%&$%%&@@@@@##&;`` ......'!:.\n|!!!!!!!!!!!!|||||||||||||!!!!!;::;;;;;:;!!!|||||!!;;;;;;;;!%$%|%$$%||||%$$%$&@@@@#@$:``      .`''.\n|!!!||!!!!!!!||||||||||||!!!!!!!;;;:::;;!!|||||||||!!;;;;;;;;|$%|%%$$$%|||%%$$&@&@@#@!.`'.     ...`.\n|!!!||!!!!!!!||||||||||||!!!!!!!;:;;;;;!!!!!|||||||||!!;;;;;;;|$$||%$$&&$%%%%%$&&&&@@@!.``.    ....`.\n|!!!||!!|!!||!|||||||||||!!!!!!!;;;;;;;!!||||||||||!!!;;;;;;;;;|$$||$$$&&&$%%%|%$&&&@@@; .`.    .. ...\n|!!!||!!||!!|!!|||||||||||!!!!!!!;;;;;!!||||||||!!!|||||!!;;;;;;|$$|!$$$&&&&$%%|%$&&&&@$' .`.   ..  ..\n|!!!||!!||!!||!|||||||||||!!!!!!!;;;;;!||||||!!!|||||||||!::'::::!$$!!%$$&&&&$$%!!%$$&&&!. .`.  ..\n|!!!|||!|||!!|!!|||||||||||!!!!!!!;;;!!||||!!|||||||||!;;!!!!!!;;;|$%!|$$$&&&&&$|`.;$$&&|`  .`...\n|!!!!||!||||!!|!!||||||||||!!!!!!!!!;!|||!||||||||!!!!||!:'`.`:;!!!%$%!|$$$&&&&&$;  '%$&$;   ``\n|!!!!||!!||||!!|!!|||||||%||!!!!!!!!!!||||||||||!!!|!:.      ....`';|||!|$$&&&&&@|`  '%&$%:   ..\n|!!!!|||||||||!|||!||||||%%|!!|!!!!!!!||||||||!!!;` ...      ...';||%$|;!%$$&&&&@$:   :$&$$|.  ..\n||!!!||||||||||!!||||||||%%||!!|!!!!!!|||||||!!'..```..``... `:;;;!|%$$|!|%$&&&&&&;   '|$%:!$: ...\n||!;!|||||||||||!!%|||||%%%%|||||!|!!|||||||!'..```.`'```..`!%!!%%%%|$$||!|$$&&&&&;   ';!%: `|%`..\n||!!!!!|||||%||||!!%%||%%%%%%|||||||!||||||;:`.``.`:;;`.':```:':|%%%%$$%|!;|&&&&&$:   ''`!;    :|:.\n|||!!!!!||||%%%|%%||%%|%%%$$%|||%|!||!||||!:`....';;!|%;.```''::!%%%|%$$$|';$&&&&%'  .`  ::       .`''`. .``.\n|||!!!!!||||%%%%%%%|||%%%$$$$%|%%%||%|!||!:```....`;|%$$|'':`'!;!%%%%%%$&@%!%&$$&!. .`.  ``.      .\n|||!!!|!!|%%%%%%%%%%%||%%%$$$%|%%%%||%|!|!!|||||||!;::|$$$%|%%%!!|%%%%%%$&&&$$$$%' .`    ..\n|||!!!||!!|%%%%%%%%%%%%||%%%$$%|%%$%|%%!!|||||||||||||||!!!||||%%%%%%%%%$$$$$$$$&%:.     ..\n||||!!|%|!;!%%%%%%%%%%%%%%|%%%$||%$%%|%|!!||||||||||||||%%%%%%%%$$$%%%%$$$$%%$$$&&&&&&$%'..\n!|||!!!|%|!;!%%%%%%%%%%%%%%%|%%%||%%%||%|!!!||||||||||||%%%%%%%%%%%%%%%$$$$%%$$$$$$$$$$%'\n;!||!!!|%%%|!;|%%%%%%%%%%%%%%%%|%||%%%!!||!!!|%%||||||%%%%%%%%%%%%%%%%$$$$%%%%%$$$$$$$$!`\n;;!||!!!|%%||!;!||%%%%%%%%%%%%%%%||%%%|!!|||!!!|%$%|||%%%%%%%%%%%%%%%%%%%%%%%$$$$$$$$$$;.\n;;;||!!!!|%%||!;;!|%%%%%%%|||||%%|||||||!!||||||||%$%|%%%%%%%%%%%%%%%%$%%%%%$$$$$$$$$$%'\n!!;!|!;;!!|%%|||!;!||%%%||||||||||||||||!!|%||||||||%%||%%%%%%%%%%%%$$$$$$$$$$$$$$$$$$!`\n!!;;!!;;!!!||||||!;;!|||||||||||||||!||||!;;|%%%%%%%|%%%%%%%%%%%%%%%$$$$$$$$$$$$$$$$$$%'\n!!!;;!!;;!!!||||||!!;;!||||||||||||||!||||!!!!%$%|%%%%%%%%%%%%%%%%%%$$$$$$$$$$$$$$$$$$$%'\n!!!!;;!!;;;!!!|||||!!::;|||||!|||||||!!|||||!!!|$$%%%%%%%%%%%%%%%$$$$$$$$$$$$$$$$$$$$&&&$:\n;;!!!!;!;;;;!!!|||||!!;::;!|!!!!||||||!!|||%%|!!!%&%%%%%%%%%%%%%%$$$$$$$$$$$$$$$$$$$$$&$!`\n|!!!!;!;;;;::;!!!||!||!;;;;;!!!!!!|||||!!|||%%|||!|$&$%%%%%%%%$$$$$$$$$$$$$$$$$$$$$$$$%!`\n:::;!;;;;::;::;;!!|||!!!!;;;;;!!!!!!||||!!|||%$%%||||$&$%%%%%%$$$$$$$$$$$$$$$$$$$$$$$$$%'\n;;;;;!!!!!;:::;;:;!!||!!!!!;;;;;!!!!!!||||!!||%$%%%%%%%%$$%%%$$$$$$$$$$$$$$$$$$$$$$$$$$$$:\n;;;;;;;;;!!!;::;;;:;!!|||||!!!!;;;;!!!!!|||||||%$$%%%%%%%%$$$$$$$$$$$$$$$$$$$$$$$$$$$$&$!.\n;;;;;;;;:::::::::;;;;;;!||!!!!!!!!;;;!!!!!||||||||$$%%%%%%%%%%$$$$$$$$$$$$$$$$$$$$$$$$$&!.\n;;;;;;;::;;:::;;;;:;;;;;;;;!!!|!!!!!!;;;!!!!!|%%||||%$%%%%%%%%%$$$$$$$$$$$$$$$$$$$$$$$$&%`\n;;;;;;;:::;;::;;;;;;;;;;;;::;!!!!!!!!|!;!!!!!!!|%%%%%%%%%%$$$$$$$$$$$$$$$$$$$$$$$$$$$$$&&:\n;;;;;;;::;::;:;;;;;;;;;!!!!!!!;;!!|||||!!!|!!!!!!!|%%%%%%%%%%%%%%%%$$$$$$$$$$$$$$$$$$$$&&|`\n;;;;;;;::;;;::;;;;;;;;;;!!!!!!!!!||||||||;!!|||||||||%%%%%%%%%%%%%%%$$$$$$$$$$$$$$$$$$$$&&!.\n;;;;;;;::;;;;::;;;;;;;;;;!!!!!!!!|||||||||;;;!!|||||||||%%%%%%%%%%%%%%%%$$$$$$$$$$$$$$$$$&|`\n!;;;;;;;::;;;:;;;;;;;;;;;!!!!!!!!!|||||||%!;;;;;!||||||||||%%%%%%%%%%%%%%%$$$$$$$$$$$$$$$$!.\n;!;;;;;;::;;;:;;;;::;;;;;!!!!!!!!!|||||||%%!;;;;;;!!!|||||||%%%%%%%%%%%%%%%%%%$$$$$$$$$$&|`\n:;!!;;;;:::;;;:;;;:::;;;;;!!!!!!!!||||||||$|;;;;;;;;!!!!||||||||%%%%%%%%%%%%%%%%%%%$$$|'\n::;!!;;;::::;;:;;;;::;;;;;;!!!!!!!!|||||||$$!;;;;;;;;;;;!!!!!||||||%%%%%%%%%%%%|!:`.\n:::;!!;;;:::;;;;;;;:::;;;;;!!!!!!!!||%||||%&%!;;;;;;;;;;;;!!!!!!!!!!!|!;:`.\n::::;!!!;::::;::;;;::::;;;;;!!!!!!!!|%%|||!%&%;;;;;;;;;;;;;;;;;;;;;%|`\n:::::;!!!;:::::::;;:::::;;;;!!!!!!!!||%%%%!;%$|;;;;;;;;;;;;;;;;;;%@@$:\n::::::;!!!:::::':;;::::::;;;;;!!|!!!||%$%%|!;%$!;;;;;;;;;;;;;;;;|$&@@|`\n:::::':;;!;::::'';;;::::::;;;;!!!|!!!||%$%%|;;%%;;;;;;;;;;;;;;!||%$&#@|`\n::::::':;;;:::''':;;:::::::;;;!!!||!!!|%$$%%|;;||;;;;;;;;;;;!||||%%%&#@%'\n:::::::':;;;::'. ';;::::::::;;;!!!|!!!||%$$$%;;;||;;;;;;;;;|%%|||||%%&@@*/\n#include <bits/stdc++.h>\nusing namespace std;\n\nint val[100005];\nchar fh[100005];\nint n;\nlong long dp[100005][3];\n\nint main(){\n\tscanf(\"%d\",&n);\n\tfh[1]='+';\n\tfor(int i=1;i<=n;i++){\n\t\tscanf(\"%d\",val+i);\n\t\tif(i!=n){\n\t\t\tscanf(\" %c\",fh+i+1);\n\t\t}\n\t}\n\tfor(int i=0;i<=n;i++){\n\t\tdp[i][0]=dp[i][1]=dp[i][2]=-0x3f3f3f3f3f3f3f3fll;\n\t}\n\tdp[0][0]=0;\n\tfor(int i=1;i<=n;i++){\n\t\tfor(int j=0;j<3;j++){\n\t\t\tif(j!=2&&fh[i]=='-'){\n\t\t\t\tdp[i][j+1]=max(dp[i][j+1],dp[i-1][j]+(j==1?1:-1)*val[i]);\n\t\t\t}\n\t\t\tif(j){\n\t\t\t\tdp[i][j-1]=max(dp[i][j-1],dp[i-1][j]+(j==2?-1:1)*(fh[i]=='-'?-1:1)*val[i]);\n\t\t\t}\n\t\t\tdp[i][j]=max(dp[i][j],dp[i-1][j]+(j%2?-1:1)*(fh[i]=='-'?-1:1)*val[i]);\n\t\t}\n\t}\n\tprintf(\"%lld\\n\",max(dp[n][0],max(dp[n][1],dp[n][2])));\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define maxn 100005\n#define LL long long\nusing namespace std;\nchar cb[1<<20],*cs,*ct;\n#define getc() (cs==ct&&(ct=(cs=cb)+fread(cb,1,1<<20,stdin),cs==ct)?0:*cs++)\ntemplate<class T>inline void read(T &a){\n\tchar c;bool f=0;while(!isdigit(c=getc())) c=='-'&&(f=1);\n\tfor(a=c-'0';isdigit(c=getc());a=a*10+c-'0'); f&&(a=-a);\n}\nint n;\nLL F[maxn],G[maxn],a[maxn];\nint main()\n{\n\tread(n);\n\tfor(int i=1;i<=n;i++){\n\t\tread(a[i]);\n\t\tif(i>1&&a[i-1]>0&&a[i]>0) a[i-1]+=a[i],i--,n--;\n\t}\n\tfor(int i=1;i<=n;i++) F[i]=F[i-1]+a[i],G[i]=G[i-1]+abs(a[i]);\n\tLL ans=F[n];\n\tfor(int i=2;i<n;i++) if(a[i]<0) ans=max(ans,F[i]-a[i+1]+G[n]-G[i+1]);\n\tprintf(\"%lld\\n\",ans);\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <iomanip> // << fixed << setprecision(xxx)\n#include <algorithm> // do { } while ( next_permutation(A, A+xxx) ) ;\n#include <vector>\n#include <string> // to_string(nnn) // substr(m, n) // stoi(nnn)\n#include <complex>\n#include <tuple> // get<n>(xxx)\n#include <queue>\n#include <stack>\n#include <map> // if (M.find(key) != M.end()) { }\n#include <set> // S.insert(M);\n// if (S.find(key) != S.end()) { }\n// for (auto it=S.begin(); it != S.end(); it++) { }\n// auto it = S.lower_bound(M);\n#include <cctype>\n#include <cassert>\n#include <cmath>\n#include <cstdio>\n#include <cstdlib> // atoi(xxx)\nusing namespace std;\n\ntypedef long long ll;\n\n//const int dx[4] = {1, 0, -1, 0};\n//const int dy[4] = {0, 1, 0, -1};\n\n// const int C ;\n// const int M = 1000000007;\n\nconst ll infty = 1000000000000000;\n\nint N;\nll A[100010];\nbool op[100010];\nll dp[100010][3];\n\nint main () {\n  cin >> N;\n  for (auto i = 0; i < N; i++) {\n    cin >> A[i];\n    if (i < N-1) {\n      char c;\n      cin >> c;\n      op[i] = (c == '+');\n    }\n  }\n  dp[0][0] = A[0];\n  dp[0][1] = -infty;\n  dp[0][2] = -infty;\n  for (auto i = 1; i < N; i++) {\n    if (op[i-1]) {\n      dp[i][2] = dp[i-1][2] + A[i];\n      dp[i][1] = dp[i-1][1] - A[i];\n      dp[i][0] = max(dp[i-1][1] - A[i], dp[i-1][0] + A[i]);\n    } else {\n      dp[i][2] = max(dp[i-1][2] + A[i], dp[i-1][1] + A[i]);\n      dp[i][1] = max(dp[i-1][1] + A[i], dp[i-1][0] - A[i]);\n      dp[i][0] = max(dp[i-1][1] + A[i], dp[i-1][0] - A[i]);\n    }\n  }\n  /*\n  for (auto i = 0; i < N; i++) {\n    cerr << \"dp[\" << i << \"] \"\n         << dp[i][0] << \" \" << dp[i][1] << \" \" << dp[i][2] << endl;\n  }\n  */\n  cout << max({dp[N-1][0], dp[N-1][1], dp[N-1][2]}) << endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<cstring>\n#include<algorithm>\n#define SF scanf\n#define PF printf\n#define MAXN 100010\nusing namespace std;\ntypedef long long ll;\nint n;\nint a[MAXN];\nbool flag[MAXN];\nchar s[20];\nll pre[MAXN];\nll sum,ans;\nint main(){\n\tSF(\"%d\",&n);\n\tflag[1]=0;\n\tSF(\"%d\",&a[1]);\n\tfor(int i=2;i<=n;i++){\n\t\tSF(\"%s\",s);\n\t\tif(s[0]=='-')\n\t\t\tflag[i]=1;\n\t\tSF(\"%d\",&a[i]);\n\t}\n\tfor(int i=n;i>=1;i--)\n\t\tpre[i]=pre[i+1]+a[i];\n\tint las=1;\n\twhile(flag[las]==0&&las<=n){\n\t\tsum+=a[las];\n\t\tlas++;\n\t}\n\twhile(las<=n){\n\t\tint las1=las+1;\n\t\tll sum1=0;\n\t\twhile(flag[las1]==0&&las1<=n){\n\t\t\tsum1+=a[las1];\n\t\t\tlas1++;\n\t\t}\n\t\tif(las1<=n)\n\t\t\tans=max(ans,sum-sum1-a[las]+pre[las1]);\n\t\tlas=las1;\n\t\tsum-=a[las];\n\t\tsum+=sum1;\n\t}\n\tans=max(ans,sum);\n\tPF(\"%lld\",ans);\n}\t"
  },
  {
    "language": "C++",
    "code": "\n#include <bits/stdc++.h>\n\n#define ln                '\\n'\n#define all(dat)           dat.begin(), dat.end()\n#define loop(i, to)        for (int i = 0; i < to; ++i)\n#define cont(i, to)        for (int i = 1; i <= to; ++i)\n#define circ(i, fm, to)    for (int i = fm; i <= to; ++i)\n#define foreach(i, dat)    for (__typeof(dat.begin()) i = dat.begin(); i != dat.end(); ++i)\n\ntypedef long long          num;\n\nusing namespace std;\n\nconst int nsz = 2e5;\nconst num inf = 0x3f3f3f3f3f3f3f3f;\nint n, a[nsz + 5];\nnum dp[nsz + 5][5], ans;\nstring dat[nsz + 5];\n\nint inline to(string s) {\n    int res = 0;\n    loop (i, s.size()) {\n        res *= 10;\n        res += s[i] ^ 48;\n    }\n    return res;\n}\n\nvoid inline upd(num &a, num b) {\n    if (a < b) {\n        a = b;\n    }\n}\n\nint main() {\n    ios_base::sync_with_stdio(0);\n    cin >> n;\n    dat[0] = '+';\n    cont (i, 2 * n - 1) {\n        cin >> dat[i];\n        if (i & 1) {\n            int cur = to(dat[i]);\n            a[i >> 1] = dat[i - 1] == \"-\" ? -cur : cur;\n        }\n    }\n    memset(dp, -inf, sizeof(dp));\n    dp[0][0] = 0;\n    loop (i, n) {\n        loop (k, 3) {\n            num val = dp[i][k], cur = k & 1 ? -a[i] : a[i];\n            for (int l = k - 1; l >= 0; --l) {\n                upd(dp[i + 1][l], val + cur);\n            }\n            if (k < 2 && a[i] < 0) {\n                upd(dp[i + 1][k + 1], val + cur);\n            }\n            upd(dp[i + 1][k], val + cur);\n        }\n    }\n    loop (k, 3) {\n        upd(ans, dp[n][k]);\n    }\n    cout << ans << ln;\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <iostream>\n#include <algorithm>\n#include <cstring>\n#include <string>\n#include <vector>\n#include <set>\n#include <map>\n#include <utility>\n#include <cstdlib>\n#include <memory>\n#include <queue>\n#include <cassert>\n#include <cmath>\n#include <ctime>\n#include <complex>\n#include <bitset>\n#include <fstream>\n#include <unordered_map>\n#include <unordered_set>\n#include <numeric>\n\nusing namespace std;\n\n#define ws ws_____________________\n#define y1 y1_____________________\n#define y0 y0_____________________\n#define left left_________________\n#define right right_______________\n#define next next_________________\n#define prev prev_________________\n#define hash hash_________________\n\n#define pb push_back\n#define fst first\n#define snd second\n#define mp make_pair \n#define sz(C) ((int) (C).size())\n#define forn(i, n) for (int i = 0; i < (int) n; ++i)\n#define ford(i, n) for (int i = ((int) n) - 1; i >= 0; --i)\n#define all(C) begin(C), end(C)\n\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef unsigned int uint;\ntypedef pair<int,int> pii;\ntypedef pair<ll, ll> pll;\ntypedef vector<ll> vll;\ntypedef vector<int> vi;\ntypedef vector<vi> vvi;\ntypedef vector<pii> vii;\ntypedef long double ld;\ntypedef complex<double> cd;\n\n#define FILE_NAME \"a\"\n\nconst int MAXN = 1e5 + 10;\nconst int MAXK = 10;\nconst ll INF = 1e18;\n\nint n;\nint a[MAXN];\nint sign[MAXN];\n\nint read_sign() {\n\tchar c;\n\twhile (1) {\n\t\tc = getchar();\n\t\tif  (c == '-') {\n\t\t\treturn -1;\n\t\t}\n\t\tif  (c == '+') {\n\t\t\treturn +1;\n\t\t}\n\t}\n\tassert(0);\n}\n\nbool read() {\n\tif  (scanf(\"%d\\n\", &n) < 1) {\n\t\treturn 0;\n\t}\n\tscanf(\"%d\", &a[0]);\n\tsign[0] = 1;\n\tfor (int i = 1; i < n; ++i) {\n\t\tsign[i] = read_sign();\n\t\tscanf(\"%d\", &a[i]);\n\t}\n\treturn 1;\n}\n\nint get_sign(int x) {\n\treturn (x & 1) ? -1 : +1;\n}\n\nll dp[MAXN][MAXK];\n\nll solve() {\n\tforn(i, n + 1) {\n\t\tforn(k, MAXK) {\n\t\t\tdp[i][k] = -INF;\n\t\t}\n\t}\n\n\tdp[0][0] = 0;\n\n\t// forn(i, n) {\n\t// \tprintf(\"%d \", sign[i] * a[i]);\n\t// }\n\t// puts(\"\");\n\n\tforn(i, n) forn(k, MAXK) {\n\t\tll cur_dp = dp[i][k];\n\t\tif  (cur_dp <= -INF) {\n\t\t\tcontinue;\n\t\t}\n\t\t// printf(\"dp[%d][%d] = %lld\\n\", i, k, cur_dp);\n\t\tdp[i + 1][k] = max(dp[i + 1][k], cur_dp + sign[i] * get_sign(k) * a[i]);\n\t\tif  (k > 0) {\n\t\t\tdp[i + 1][k - 1] = max(dp[i + 1][k - 1], cur_dp + sign[i] * get_sign(k) * a[i]);\n\t\t}\n\t\tif  (sign[i] == -1 && k + 1 < MAXK) {\n\t\t\tdp[i + 1][k + 1] = max(dp[i + 1][k + 1], cur_dp + sign[i] * get_sign(k) * a[i]);\n\t\t}\n\t}\n\n\tll ans = -INF;\n\tforn(k, MAXK) {\n\t\tans = max(ans, dp[n][k]);\n\t}\n\n\treturn ans;\n}\n\nint main() {\n#ifdef LOCAL\n\tfreopen(FILE_NAME \".in\", \"r\", stdin);\n\t// freopen(FILE_NAME \".out\", \"w\", stdout);\n#endif\n\n\twhile (read()) {\n\t\tcout << solve() << endl;\n\t}\n\n#ifdef LOCAL\n\tcerr.precision(5);\n\tcerr << \"Time: \" << fixed << (double) clock() / CLOCKS_PER_SEC << endl;\n#endif\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <algorithm>\nint N, a[100001], sign[100001], L;\nlong long f[100001];\nint main()\n{\n\tscanf(\"%d%d\", &N, a + 1);\n\tsign[1] = 1;\n\tfor (int i = 2; i <= N; i++)\n\t{\n\t\tstatic char in[3];\n\t\tscanf(\"%s\", in);\n\t\tsign[i] = in[0] == '+' ? 1 : -1;\n\t\tscanf(\"%d\", a + i);\n\t\ta[i] *= sign[i];\n\t}\n\tint L = 0;\n\tf[0] = 0;\n\tfor (int i = 1; i <= N; i++)\n\t{\n\t\tif (sign[i] == 1)\n\t\t{\n\t\t\tfor (int j = 0; j <= L; j++)\n\t\t\t\tf[j] += j & 1 ? -a[i] : a[i];\n\t\t\tfor (int j = L - 1; j >= 0; j--)\n\t\t\t\tf[j] = std::max(f[j], f[j + 1]);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tfor (int j = 0; j <= L; j++)\n\t\t\t\tf[j] += j & 1 ? -a[i] : a[i];\n\t\t\tf[++L] = -1LL << 60;\n\t\t\tfor (int j = L; j; j--)\n\t\t\t\tf[j] = std::max(f[j], f[j - 1]);\n\t\t\tfor (int j = L - 1; j >= 0; j--)\n\t\t\t\tf[j] = std::max(f[j], f[j + 1]);\n\t\t}\n\t\twhile (L > 10)\n\t\t\tL -= 2;\n\t}\n\tprintf(\"%lld\\n\", *std::max_element(f, f + L + 1));\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "//Created Time:2019年12月02日 星期一 21时16分28秒\n#include <iostream>\n#include <cstdio>\n#include <algorithm>\n#include <cstring>\n#define N 100005\n\nusing namespace std;\n\nlong long ans;\nint a[N][2];\nlong long sum1[N], sum2[N];\n\nint main(){\n\tint n; scanf(\"%d\", &n);\n\tscanf(\"%d\", &a[1][0]); sum1[1] = sum2[1] = a[1][0];\n\tfor(int i = 1; i < n; ++i){\n\t\tint x = 0; bool flag = false; char ch = getchar();\n\t\tfor(; !isdigit(ch); ch = getchar()) flag |= (ch == '-');\n\t\tfor(; isdigit(ch); ch = getchar()) x = x * 10 + (ch ^ 48);\n\t\ta[i + 1][0] = x; a[i + 1][1] = flag; \n\t\tsum1[i + 1] = sum1[i] + (flag ? -x : x);\n\t\tsum2[i + 1] = sum2[i] + x;\n\t}\n\tans = sum1[n];\n\tfor(int i = 1; i <= n; ++i)\n\t\tif(a[i][1])\n\t\t\t\tans = max(ans, sum1[i] + sum2[n] - sum2[i]);\n\tcout << ans << endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define ll long long\n#define N 100010\nusing namespace std;\n\nll f[N],g[N],a[N];\nchar op,lst;\n\nint main(){\n    int n,x,y=0,i,cnt=0;\n    cin>>n;\n    ll ans=0;\n    for(i=1;i<=n;++i){\n        cin>>x;lst=op;\n        if(i<n) cin>>op;\n        if(lst=='-'){\n            x=-x;\n            a[++cnt]=x;\n        }\n        if(y<=0 && x>0) cnt++,a[cnt]=x;\n        if(y>0 && x>0) a[cnt]+=x;\n        y=x;\n    } f[1]=a[1];\n    for(i=cnt;i>=1;--i) g[i]=g[i+1]+abs(a[i]);\n    for(i=2;i<=cnt;++i) f[i]=f[i-1]+a[i];\n    ans=f[cnt];\n    for(i=1;i<cnt;++i)\n        if(a[i+1]<0) ans=max(ans,f[i+1]-a[i+2]+g[i+3]);\n    cout<<ans; \n} "
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define ll long long\n#define N 100010\nusing namespace std;\n\nll f[N],g[N],a[N];\nchar op,lst;\n\nint main(){\n    int n,x,y=0,i,cnt=0;\n    cin>>n;\n    ll ans=0;\n    for(i=1;i<=n;++i){\n        cin>>x;lst=op;\n        if(i<n) cin>>op;\n        if(lst=='-'){\n            x=-x;\n            a[++cnt]=x;\n        }\n        if(y<=0 && x>0) cnt++,a[cnt]=x;\n        if(y>0 && x>0) a[cnt]+=x;\n        y=x;\n    } f[1]=a[1];\n    for(i=cnt;i>=1;--i) g[i]=g[i+1]+abs(a[i]);\n    for(i=2;i<=cnt;++i) f[i]=f[i-1]+a[i];\n    ans=f[cnt];\n    for(i=1;i<cnt;++i)\n        if(a[i+1]<0) ans=max(ans,f[i+1]-a[i+2]+g[i+3]);\n    cout<<ans; \n} "
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n//#define int long long\n\ntypedef long long ll;\ntypedef pair<int,int> pii;\ntypedef pair<ll,int> plli;\ntypedef pair<int,pii> pipii;\ntypedef vector<int> vi;\ntypedef vector<ll> vll;\ntypedef vector<vi> vvi;\ntypedef vector<vvi> vvvi;\ntypedef vector<pii> vpii;\n\n#define rep(i,n) for (int i=0;i<(n);i++)\n#define rep2(i,a,b) for (int i=(a);i<(b);i++)\n#define rrep(i,n) for (int i=(n);i>0;i--)\n#define rrep2(i,a,b) for (int i=(a);i>b;i--)\n#define pb push_back\n#define fi first\n#define se second\n#define all(a) (a).begin(),(a).end()\n\nconst ll mod = 1e9 + 7;\nconst ll INF = 1<<30;\nconst int dx4[4] = {1, 0, -1, 0};\nconst int dy4[4] = {0, 1, 0, -1};\nconst int dx8[8] = {1, 1, 1, 0, 0, -1, -1, -1};\nconst int dy8[8] = {0, 1, -1, 1, -1, 0, 1, -1};\nconst double pi = 3.141592653589793;\n\nll n;\nstring a[100000 + 5];\nll sum[100000 + 5];\n\nsigned main(){\n    cin.tie(0);\n    ios::sync_with_stdio(false);\n    cin >> n;\n    n += n - 1;\n    rep(i, n) cin >> a[i];\n    sum[0] = ll(stoi(a[0]));\n    rep2(i, 1, n) {\n        if(i % 2 == 0) continue;\n        if (a[i] == \"+\") sum[i + 1] = sum[i - 1] + ll(stoi(a[i + 1]));\n        else sum[i + 1] = sum[i - 1] - ll(stoi(a[i + 1]));\n    }\n    ll ans = ll(stoi(a[0]));\n    rep2(i, 1, n) {\n        if (i % 2 == 0) continue;\n        if (a[i] == \"+\") ans += ll(stoi(a[i + 1]));\n        else ans -= ll(stoi(a[i + 1]));\n    }\n    ll plus = 0;\n    ll minus = 0;\n    rrep2(i, n - 1, -1) {\n        if (a[i] == \"+\") continue;\n        if (a[i] == \"-\") {\n            ans = max(ans, sum[i - 1] + plus + minus);\n            plus += -minus;\n            minus = 0LL;\n        }\n        else minus -= ll(stoi(a[i]));\n    }\n    cout << ans << endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define int long long\n#define fi first\n#define se second\n#define PB push_back\nusing namespace std;\ntypedef pair<int, int> P1;\ntypedef pair<int, pair<int, int> > P2;\nstatic const int INF = 1ll<<60;\nstatic const int dx[] = { 1, -1, 0, 0, };\nstatic const int dy[] = { 0, 0, 1, -1 };\nstatic const int mod = 1000000007;\n\nint N;\nint A[100005];\nchar op[100005];\nint dp[100005][5];\n//    [i項目][i項目までに開いているかっこの数]\n\nint solve(){\n    for(int i=0;i<N;++i)for(int j=0;j<N;++j)dp[i][j]=-INF;\n    dp[0][0] = A[0];\n    for(int i=0;i<N-1;++i){\n        for(int j=0;j<=min(i,3ll);++j){\n            int f;\n            if(j%2==0)f=1ll;\n            else f=-1ll;\n            int t1 = f*A[i+1];\n            //cout<<t1<<endl;\n            //cout<<i<<\" \"<<j<<endl;\n            if(op[i+1]=='+'){\n                dp[i+1][j] = max(dp[i][j]+t1,dp[i+1][j]);\n                if(j!=0)dp[i+1][j-1] = max(dp[i][j]+t1,dp[i+1][j-1]);\n            }\n            else {\n                dp[i+1][j] = max(dp[i][j]-t1,dp[i+1][j]);\n                dp[i+1][j+1] = max(dp[i][j]-t1,dp[i+1][j+1]);\n                if(j!=0)dp[i+1][j-1] = max(dp[i][j]-t1,dp[i+1][j-1]);\n            }\n            //cout<<i<<\" \"<<j<<endl;\n            //cout<<dp[i][j]<<\" \"<<dp[i+1][j]<<\" \"<<dp[i+1][j+1]<<endl;\n        }\n    }\n    int ans=-INF;\n    for(int i=0;i<N;++i)ans=max(dp[N-1][i],ans);\n    return ans;\n}\n\n\nsigned main(){\n    cin>>N;\n    op[0]='+';\n    for(int i=0;i<N;++i){\n        cin>>A[i];\n        if(i!=N-1)cin>>op[i+1];\n    }\n    cout<<solve()<<endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\ntypedef long long LL;\nconst int N=1e5+8;\nint A[N],op[N],n,nxt[N],nx;\nLL ans,now,suf[N];char s[4];\nint main(){\n\tscanf(\"%d%d\",&n,A+1),ans=A[1];\n\tfor(int i=2;i<=n;++i)scanf(\"%s%d\",s,A+i),ans+=A[i]*((op[i]=*s=='-')?-1:1);\n\tfor(int i=n;i;--i){\n\t\tsuf[i]=suf[i+1]+A[i];\n\t\tif(op[i])nxt[i]=nx,nx=i;\n\t}\n\tnow=A[1];\n\tfor(int i=2;i<=n;++i){\n\t\tif(op[i]&&nxt[i]){\n\t\t\tLL nw=now-suf[i]+2*suf[nxt[i]];\n\t\t\tif(nw>ans)ans=nw;\n\t\t}\n\t\tnow+=A[i]*(op[i]?-1:1);\n\t}\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#include <ext/pb_ds/assoc_container.hpp>\n#include <ext/pb_ds/tree_policy.hpp>\nusing namespace __gnu_pbds;\nusing namespace std;\n#define ll long long int\n#define ordered_set tree < ll ,  null_type ,  less<ll> ,  rb_tree_tag ,  tree_order_statistics_node_update >\n//added two more functions to set\n//(1)*(set.find_by_order(k))[kth element in the sorted set] \n//(2)set.order_of_key(k)[count of elements strictly less than k]\ntypedef vector< int > vi;\ntypedef vector< ll > lvi;\ntypedef vector< vi > vvi;\ntypedef vector< lvi > lvvi;\ntypedef pair< int,int > ii;\ntypedef pair< ll,ll > lii;\n#define sz(a) int((a).size())\n#define pb push_back\n#define all(c) (c).begin(),(c).end()\n#define tr(c,i) for(auto i = (c).begin(); i != (c).end(); i++)//remember i is an iterator\n#define present(c,x) ((c).find(x) != (c).end())//for sets,maps,multimaps\n#define cpresent(c,x) (find(all(c),x) != (c).end())//for vectors\n#define tc(t) int (t); cin>>(t);while((t)--)\n#define ff first\n#define ss second\n#define mp make_pair\n#define ld long double\n#define ull unsigned long long int\n#define mod 1000000007\nstring s;\nlvi v;\nlvvi dp;\nll n,y;\nll recurs(int idx,int state)\n{\n\tif(idx>=n) return 0LL;\n\tif(dp[idx][state]!=((ll)-1e15)) return dp[idx][state];\n\tif(s[idx]=='-')\n\t{\n\t\tif(state==0)\n\t\t{\n\t\t\tdp[idx][state]=max(recurs(idx+1,state)-v[idx],recurs(idx+1,state+1)-v[idx]);\n\t\t}\n\t\tif(state==1)\n\t\t{\n\n\t\t\tdp[idx][state]=max(recurs(idx+1,state-1)+v[idx],max(recurs(idx+1,state)+v[idx],recurs(idx+1,state+1)+v[idx]));\n\t\t}\n\t\tif(state==2)\n\t\t{\n\n\t\t\tdp[idx][state]=max(recurs(idx+1,state)-v[idx],recurs(idx+1,state-1)-v[idx]);\n\t\t}\n\t}\n\telse\n\t{\n\t\tif(state==0)\n\t\t{\n\t\t\tdp[idx][state]=recurs(idx+1,state)+v[idx];\n\t\t}\n\t\tif(state==1)\n\t\t{\n\n\t\t\tdp[idx][state]=max(recurs(idx+1,state-1)-v[idx],recurs(idx+1,state)-v[idx]);\n\t\t}\n\t\tif(state==2)\n\t\t{\n\t\t\t\n\t\t\tdp[idx][state]=max(recurs(idx+1,state)+v[idx],recurs(idx+1,state-1)+v[idx]);\n\t\t}\n\t}\n\tcout<<idx<<\" \"<<state<<\" \"<<dp[idx][state]<<endl;\n\treturn dp[idx][state];\n}\nint main()\n{\n\tios_base::sync_with_stdio(false);\n    cin.tie(NULL);\t\n\tcin>>n>>y;\n\tdp.assign(n+2,lvi(4,-1e15));\n\tfor(int i=1;i<n;i++)\n\t{\n\t\tchar ch;\n\t\tcin>>ch;\n\t\tll x;\n\t\tcin>>x;\n\t\ts.pb(ch);\n\t\tv.pb(x);\n\t}\n\tll ans=recurs(0,0)+y;\n\tcout<<ans<<endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#define ll long long\nusing namespace std;\n\nint main() {\n\tint N;\n\tcin >> N;\n\tvector<ll> a(N), sum_raw(N), sum_opt(N);\n\tvector<int> minus;\n\tcin >> a[0];\n\tsum_raw[0]=a[0];\n\tsum_opt[0]=a[0];\n\tfor(int i=1; i<N; ++i){\n\t    char op;\n\t    cin >> op >> a[i];\n\t    if(op=='+') sum_raw[i]=sum_raw[i-1]+a[i];\n\t    else{\n\t        sum_raw[i]=sum_raw[i-1]-a[i];\n\t        minus.push_back(i);\n\t    }\n\t    sum_opt[i]=sum_opt[i-1]+a[i];\n\t}\n\tll ans=sum_raw[N-1];\n\tfor(int i=0; i+1<minus.size(); ++i){\n\t    ans=max(ans, sum_raw[minus[i]]*2-sum_raw[minus[i+1]-1]+sum_opt[N-1]-sum_opt[minus[i+1]-1]);\n\t}\n\tcout << ans << endl;\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<cstring>\n#include<cstdlib>\n#include<cmath>\n#include<iostream>\n#include<algorithm>\nusing namespace std;\ntypedef long long ll;\nconst int MAXN=100005;\nconst ll INF=(1LL<<60)-1;\nll ty[MAXN],a[MAXN],dp[MAXN][3];\nint main()\n{\n    int n;\n    scanf(\"%d\",&n);\n    for(int i=1;i<=n;i++)\n    {\n        if(i>1)\n        {\n            char op[5];\n            scanf(\"%s\",op);\n            ty[i]=(*op=='-');\n        }\n        scanf(\"%lld\",&a[i]);\n    }\n    for(int i=0;i<=n;i++)\n        for(int j=0;j<3;j++)\n            dp[i][j]=-INF;\n    dp[0][0]=0;\n    for(int i=1;i<=n;i++)\n    {\n        for(int j=0;j<3;j++)\n        {\n            ll now=(ty[i] ? -1 : 1)*a[i];\n            if(j<3 && ty[i-1])\n                dp[i][j+1]=max(dp[i][j+1],dp[i-1][j]+((j+1)&1 ? -1 : 1)*now);\n            dp[i][j]=max(dp[i][j],dp[i-1][j]+(j&1 ? -1 : 1)*now);\n        }\n        for(int j=1;j>=0;j--)\n            dp[i][j]=max(dp[i][j],dp[i][j+1]);\n    }\n    return 0*printf(\"%lld\\n\",dp[n][0]);\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\ntypedef long long lint;\ntypedef long double louble;\n\n#define so(a) ((int)((a).size()))\n\ntemplate<typename T1,typename T2> inline T1 max(T1 a,T2 b){return a<b?b:a;}\ntemplate<typename T1,typename T2> inline T1 min(T1 a,T2 b){return a<b?a:b;}\ntemplate<typename T1,typename T2> inline T1 gmax(T1 &a,T2 b){return a=a<b?b:a;}\ntemplate<typename T1,typename T2> inline T1 gmin(T1 &a,T2 b){return a=a<b?a:b;}\n\nconst char lf = '\\n';\n\nnamespace ae86\n{\n\tconst int bufl = 1 << 15;\n\n\tchar buf[bufl],*s=buf,*t=buf;\n\n\tinline int fetch()\n\t{\n\t\tif(s==t){t=(s=buf)+fread(buf,1,bufl,stdin);if(s==t)return EOF;}\n\t\treturn *s++;\n\t}\n\n\tinline int ty()\n\t{\n\t\tint a=0;int b=1,c=fetch();\n\t\twhile(!isdigit(c))b^=c=='-',c=fetch();\n\t\twhile(isdigit(c))a=a*10+c-48,c=fetch();\n\t\treturn b?a:-a;\n\t}\n\n\tinline int tc()\n\t{\n\t\tint c=fetch();\n\t\twhile(c<=32 && c!=EOF)c=fetch();\n\t\treturn c;\n\t}\n}\nusing ae86::ty;\nusing ae86::tc;\n\nconst int _ = 100007;\nconst lint linf = 0x3f3f3f3f3f3f3f3f;\n\nint n,dir[_]={0};lint val[_]={0};\nlint f[3];\n\nint main()\n{\n\tios::sync_with_stdio(0),cout.tie(nullptr);\n\n\tn=ty(),dir[1]=1,val[1]=ty();\n\tfor(int i=2;i<=n;i++)dir[i]=tc()=='+',val[i]=ty();\n\tn+=2;\n\t\n\tmemset(f,-64,sizeof(f));\n\tf[0]=0;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tlint xval=val[i]*(dir[i]?1:-1);\n\t\tf[0]+=xval,f[1]-=xval,f[2]+=xval;\n\t\tif(!dir[i])gmax(f[2],f[1]),gmax(f[1],f[0]);\n\t\tgmax(f[1],f[2]),gmax(f[0],f[1]);\n\t}\n\n\tcout<<max({f[0],f[1],f[2]})<<lf;\n\t\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <cstring>\n#include <vector>\n#include <queue>\n#include <string>\n#include <algorithm>\n#include <iostream>\n#include <string>\n#include <map>\n#include <set>\n#include <functional>\n#include <iostream>\n#define INF 1000000007LL\nusing namespace std;\ntypedef long long ll;\ntypedef pair<int,int> P;\n\nint n;\nll a[100005];\nint op[100005];\nll dp[100005][10];\n\nint main(void){\n\tscanf(\"%d\",&n);\n\tfor(int i=0;i<n;i++){\n\t\tscanf(\"%lld%*c\",&a[i]);\n\t\tif(i!=n-1){\n\t\t\tchar c;\n\t\t\tscanf(\"%c%*c\",&c);\n\t\t\tif(c=='+')op[i+1]=1;\n\t\t\telse op[i+1]=-1;\n\t\t}\n\t}\n\top[0]=1;\n\tfor(int i=0;i<=n;i++){\n\t\tfor(int j=0;j<10;j++){\n\t\t\tdp[i][j]=-(ll)(INF)*n;\n\t\t}\n\t}\n\tdp[0][0]=0;\n\tfor(int i=0;i<n;i++){\n\t\tfor(int j=0;j<9;j++){\n\t\t\tint cp=op[i];\n\t\t\tif(j%2==1)cp=-cp;\n\t\t\tdp[i+1][j]=max(dp[i+1][j],(ll)dp[i][j]+a[i]*cp);\n\t\t\tif(op[i]==-1){\n\t\t\t\tdp[i+1][j+1]=max(dp[i+1][j+1],(ll)dp[i][j]+a[i]*cp);\n\t\t\t}\n\t\t\tif(j>0){\n\t\t\t\tdp[i+1][j-1]=max(dp[i+1][j-1],(ll)dp[i][j]+a[i]*cp);\n\t\t\t}\n\t\t}\n\t}\n\tprintf(\"%lld\\n\",dp[n][0]);\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define N 100005\n#define LL long long\n#define mod 1000000007\n#define pr pair<int,int>\n#define mp(x,y) make_pair(x,y)\nusing namespace std;\n\nint read(){\n\tchar c=getchar();\n\tint t=0,f=1;\n\twhile(c>'9'||c<'0') f=(c=='-')?-1:1,c=getchar();\n\twhile(c>='0'&&c<='9') t=t*10+c-'0',c=getchar();\n\treturn t*f;\n}\n\nint n,op[N];\nLL sum[N],absum[N]; \nchar ch[2];\n\nint main(){\n\tn=read(),sum[1]=absum[1]=read();\n\tfor(int i=2,x;i<=n;i++){\n\t\tscanf(\"%s\",ch),op[i]=(ch[0]=='-')?-1:1;\n\t\tx=read(),sum[i]=sum[i-1]+x*op[i],absum[i]=absum[i-1]+x;\n\t}\n\tLL ans=sum[N];\n\tfor(int i=2,j;i<=n;i=j){\n\t\tif(op[i]>0) continue;\n\t\tLL tmp=sum[i-1];\n\t\tj=i+1;\n\t\twhile(op[j]>0&&j<=n) j++;\n\t\ttmp+=(absum[n]-absum[j-1])-(absum[j-1]-absum[i-1]);\n\t\tans=max(ans,tmp);\n\t}\n\tprintf(\"%lld\\n\",ans);\n}\n/*\n3\n5 - 1 - 3\n5\n1 - 20 - 13 + 14 - 5\n*/"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\nconst int N=1e5+10;\nint n,a[N],sig[N];ll dp[N][10];\nint main()\n{\n\tscanf(\"%d%d\",&n,&a[1]);\n\tfor (int i=2;i<=n;i++){\n\t\tchar ch;\n\t\tdo ch=getchar();while (ch!='-'&&ch!='+');\n\t\tif (ch=='-') sig[i]=1;\n\t\tscanf(\"%d\",&a[i]);\n\t}\n\tfor (int i=0;i<=n;i++)\n\tfor (int j=0;j<=5;j++)\n\t\tdp[i][j]=-1e16;\n\tdp[0][0]=0;\n\tfor (int i=0;i<n;i++)\n\tfor (int j=0;j<=5;j++){\n\t\tll v=dp[i][j];int k=j+sig[i+1];\n\t\tdp[i+1][k]=max(dp[i+1][k],k&1?v-a[i+1]:v+a[i+1]);\n\t\tif (j) dp[i+1][k-1]=max(dp[i+1][k-1],k&1?v+a[i+1]:v-a[i+1]);\n\t}\n\tll ans=-1e16;\n\tfor (int i=0;i<=5;i++) ans=max(ans,dp[n][i]);\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#include <cstring>\n#include <cstdio>\nconst int N = 1e5 + 5;\ntypedef long long ll; \nusing namespace std;\n\nint n, a[N], b[N];\nll f[N][3];\nchar s[N]; \n\ntemplate < typename T >\ninline T read()\n{\n\tT x = 0, w = 1; char c = getchar();\n\twhile(c < '0' || c > '9') { if(c == '-') w = -1; c = getchar(); }\n\twhile(c >= '0' && c <= '9') x = x * 10 + c - '0', c = getchar();\n\treturn x * w; \n}\n\nint main()\n{\n\tn = read <int> (), a[1] = read <int> ();\n\tfor(int i = 2; i <= n; i++)\n\t{\n\t\tscanf(\"%s\", s + 1), b[i] = s[1] == '-' ? 0 : 1;\n\t\ta[i] = read <int> (); \n\t}\n\tmemset(f, -0x3f, sizeof(f)), f[1][0] = a[1];\n\tfor(int i = 2; i <= n; i++)\n\t{\n\t\tif(b[i])\n\t\t{\n\t\t\tf[i][0] = max(f[i - 1][0] + a[i], f[i - 1][1] - a[i]); \n\t\t\tf[i][1] = max(f[i - 1][1] - a[i], f[i - 1][2] + a[i]); \n\t\t\tf[i][2] = f[i - 1][2] + a[i]; \n\t\t}\n\t\telse\n\t\t{\n\t\t\tf[i][0] = max(f[i - 1][0] - a[i], f[i - 1][1] + a[i]); \n\t\t\tf[i][1] = max(f[i - 1][1] + a[i], f[i - 1][2] - a[i]);\n\t\t\tf[i][1] = max(f[i][1], f[i - 1][0] - a[i]);\n\t\t\tf[i][2] = max(f[i - 1][2] - a[i], f[i - 1][1] + a[i]); \n\t\t}\n\t}\n\tprintf(\"%lld\\n\", f[n][0]); \n\treturn 0; \n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <iostream>\n#define Max 1\n#define Min -1\nusing namespace std;\n\ntypedef long long LL;\nconst int N = 1e5 + 5;\n\nint arr[N], ope[N], n;\nLL dp[3][N];\nchar s[5];\n\nint main() {\n  scanf(\"%d\", &n);\n  ope[1] = 1;\n  for (int i = 1; i <= n; i ++) {\n    scanf(\"%d\", &arr[i]);\n    if (i != n) {\n      scanf(\"%s\", s);\n      if (s[0] == '+') ope[i + 1] = 1;\n      else ope[i + 1] = -1;\n    }\n  }\n  dp[1][0] = dp[2][0] = -1e16;\n  for (int i = 1; i <= n; i ++) {\n    dp[0][i] = dp[0][i - 1] + arr[i] * ope[i];\n    dp[1][i] = dp[1][i - 1] - arr[i] * ope[i];\n    dp[2][i] = dp[2][i - 1] + arr[i] * ope[i];\n    if (ope[i] == -1) {\n      dp[2][i] = max(dp[2][i], dp[1][i]);\n      dp[1][i] = max(dp[1][i], dp[0][i]);\n    }\n    dp[0][i] = max(dp[0][i], dp[1][i]);\n    dp[1][i] = max(dp[1][i], dp[2][i]);\n  }\n  printf(\"%lld\\n\", dp[0][n]);\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n#define r(i,n) for(int i=0;i<n;i++)\nint a[100009],dp[100009][4];\nstring s[100009];\nint main(){\n  r(i,100009)r(j,4)dp[i][j]=-(1e8);\n  int ans,n;\n  cin>>n>>ans;n--;\n  r(i,n)cin>>s[i]>>a[i];\n  dp[0][0]=0;\n  for(int i=0;i<n;i++){\n    if(s[i]==\"+\"){\n      dp[i+1][0]=max(dp[i+1][0],max(dp[i][0]+a[i],max(dp[i][2]+a[i],dp[i][1]+a[i])));\n      dp[i+1][1]=max(dp[i+1][1],max(dp[i][1]-a[i],dp[i][2]-a[i]));\n      dp[i+1][2]=max(dp[i+1][2],dp[i][2]+a[i]);\n    }\n    else{\n      dp[i+1][0]=max(dp[i+1][0],max(dp[i][0]-a[i],max(dp[i][1]-a[i],dp[i][2]-a[i]))) ;\n      dp[i+1][1]=max(dp[i+1][1],max(dp[i][0]-a[i],max(dp[i][1]+a[i],dp[i][2]+a[i])));\n      dp[i+1][2]=max(dp[i+1][2],max(dp[i][2]-a[i],dp[i][1]+a[i]));\n    }\n  }\n  cout<<ans+max(dp[n][0],max(dp[n][1],dp[n][2]))<<endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<cstring>\n#include<algorithm>\n#define rep(i,a,b) for(int i=(a);i<=(b);i++)\n#define per(i,a,b) for(int i=(a);i>=(b);i--)\n#define Rep(i,x) for(int i=head[x];i+1;i=nxt[i])\n#define rep2(i,a,b) for(int i=(a);i<(b);i++)\n#define ff first\n#define ss second\nusing namespace std;\nconst int N=100005;\nconst long long inf=1e15;\ntypedef long long ll;\n//------------------------------------------head---------------------------------------------------//\nll a[N];\nint op[N];\nll f[N][2];\ninline void Updmax(ll &x,ll y){x=(x<=y)?y:x;}\nint main()\n{\n\tint m=0;//ll tot=0;\n\tll tot=0,ans=0,pos=0,ma=0;\n\tint n;scanf(\"%d\",&n);scanf(\"%d\",&a[1]);rep(i,2,n)\n\t{\n\t\tchar s[4];int x;scanf(\"%s%d\",s+1,&x);\n\t\top[i-1]=(s[1]=='+');a[i]=x;\n\t}\n\tans=a[1];\n\trep(i,1,n-1){if(op[i])ans+=a[i+1];else ans-=a[i+1];}\n\t//printf(\"%lld\\n\",ans);\n\tper(i,n-1,1)\n\t{\n\t\tif(op[i]==1) tot+=2ll*a[i+1];\n\t\telse\n\t\t{\n\t\t\tma=max(ma,ans+pos-tot);\n\t\t\tpos+=2ll*a[i+1];\n\t\t\ttot=0;\n\t\t}\n\t}\n\tprintf(\"%lld\\n\",max(ans,ma));\n\treturn 0;\n\t// 0 min\n\t// 1 max\n\t//n=m;//f[1][0][1]=f[1][0][0]=a[1];\n\t/*rep(i,0,n)rep(j,0,1)f[i][j]=-inf;f[1][0]=a[1];\n\t//rep(i,1,n)printf(\"%d \",a[i]);\n\top[0]=-1;\n\top[n]=1;a[++n]=0;\n\trep(i,1,n-1)\n\t{\n\t\tif(op[i]==1)\n\t\t{\n\t\t\t//printf(\"Case owo:%d\\n\",i);\n\t\t\tUpdmax(f[i+1][0],f[i][0]-a[i+1]);\n\t\t\tUpdmax(f[i+1][1],f[i][0]-a[i+1]);\n\t\t\tUpdmax(f[i+1][1],f[i][1]+a[i+1]);\n\t\t\tUpdmax(f[i+1][0],f[i][1]+a[i+1]);\n\t\t\t\n\t\t}\n\t\telse\n\t\t{\n\t\t\tUpdmax(f[i+2][0],f[i][0]+(a[i+1]-a[i+2]));\n\t\t\tUpdmax(f[i+2][1],f[i][0]+(a[i+1]-a[i+2]));\n\t\t\tUpdmax(f[i+2][1],f[i][1]-(a[i+1]-a[i+2]));\n\t\t\tUpdmax(f[i+2][0],f[i][1]-(a[i+1]-a[i+2]));\n\t\t}\n\t}*/\n\t//printf(\"%lld\\n\",max(f[n][0],f[n][1]));\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <cstdlib>\n#include <algorithm>\n#include <iostream>\n#include <vector>\n#include <cstring>\n#include <string>\n#include <cassert>\n\nusing namespace std;\n\nconst int N = 1e5 + 7;\nconst long long INF = 1LL << 60;\nint n;\nint a[N];\nchar sign[N];\nlong long base = 0;\n\nint main() {\n\tscanf(\"%d\", &n);\n\tcin >> base;\n\tlong long all = 0;\n\tfor (int i = 1; i < n; i++) {\n\t\tchar buffer[10];\n\t\tscanf(\"%s %d\", buffer, &a[i]);\n\t\tsign[i] = buffer[0];\n\t\tall += a[i];\n\t}\n\tlong long ans = -INF;\n\tfor (int i = 1; i < n; i++) {\n\t\tif (sign[i] == '-') {\n\t\t\tlong long middle = 0;\n\t\t\tint j;\n\t\t\tfor (j = i + 1; j < n; j++) {\n\t\t\t\tif (sign[j] == '-') {\n\t\t\t\t\tbreak;\n\t\t\t\t} else {\n\t\t\t\t\tmiddle += a[j];\n\t\t\t\t}\n\t\t\t}\n\t\t\tans = max(ans, all - 2 * a[i] - 2 * middle + base);\n\t\t\tbase -= a[i];\n\t\t} else {\n\t\t\tbase += a[i];\n\t\t}\n\t\tall -= a[i];\n\t}\n\tcout << max(base, ans) << endl;\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "// g++ -std=c++11 a.cpp\n#include<iostream>\n#include<vector>\n#include<string>\n#include<algorithm>\t\n#include<map>\n#include<set>\n#include<unordered_map>\n#include<utility>\n#include<cmath>\n#include<random>\n#include<cstring>\n#include<queue>\n#include<stack>\n#include<bitset>\n#include<cstdio>\n#include<sstream>\n#include<iomanip>\n#include<assert.h>\n#include<typeinfo>\n#define loop(i,a,b) for(int i=a;i<b;i++) \n#define rep(i,a) loop(i,0,a)\n#define FOR(i,a) for(auto i:a)\n#define pb push_back\n#define all(in) in.begin(),in.end()\n#define shosu(x) fixed<<setprecision(x)\nusing namespace std;\n//kaewasuretyuui\ntypedef long long ll;\n//#define int ll\ntypedef int Def;\ntypedef pair<Def,Def> pii;\ntypedef vector<Def> vi;\ntypedef vector<vi> vvi;\ntypedef vector<pii> vp;\ntypedef vector<vp> vvp;\ntypedef vector<string> vs;\ntypedef vector<double> vd;\ntypedef vector<vd> vvd;\ntypedef pair<Def,pii> pip;\ntypedef vector<pip>vip;\n#define mt make_tuple\ntypedef tuple<int,int,int> tp;\ntypedef vector<tp> vt;\ntemplate<typename A,typename B>bool cmin(A &a,const B &b){return a>b?(a=b,true):false;}\ntemplate<typename A,typename B>bool cmax(A &a,const B &b){return a<b?(a=b,true):false;}\n//template<class C>constexpr int size(const C &c){return (int)c.size();}\n//template<class T,size_t N> constexpr int size(const T (&xs)[N])noexcept{return (int)N;}\nconst double PI=acos(-1);\nconst double EPS=1e-9;\nDef inf = sizeof(Def) == sizeof(long long) ? 2e18 : 1e9+10;\nint dx[]={0,1,0,-1};\nint dy[]={1,0,-1,0};\nint main(){\n\tint n;\n\tcin>>n;\n\tvvi in(n,vi(2));\n\trep(i,n){\n\t\tif(i){\n\t\t\tchar c;cin>>c;\n\t\t\tin[i][1]=c=='-';\n\t\t}\n\t\tcin>>in[i][0];\n\t}\n\tvvi dp(n+1,vi(3,-inf));\n\tdp[0][0]=0;\n\trep(i,n)rep(j,3)if(dp[i][j]!=-inf){\n\t\tint s=in[i][0];\n\t\tif(in[i][1])s*=-1;\n\t\tif(j==1)s*=-1;\n\t\tdp[i+1][j]=max(dp[i+1][j],dp[i][j]+s);\n\t\tif(j<2&&in[i][1])dp[i+1][j+1]=max(dp[i+1][j],dp[i][j]+s);\n\t\tif(j)dp[i+1][j-1]=max(dp[i+1][j],dp[i][j]+s);\n\t\tif(j>1)dp[i+1][j-2]=max(dp[i+1][j],dp[i][j]+s);\n\t}\n\t\n\tcout<<dp[n][0]<<endl;\n}\n\n\n\n\n\n\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n#include <vector>\n#include <deque>\n#include <queue>\n#include <list>\n#include <stack>\n#include <string>\n#include <functional>\n#include <numeric>\n#define _USE_MATH_DEFINES\n#include <math.h>\n#include <iomanip>\n#include <map>\n#include <set>\n#include <cstdlib>\n#include <bitset>\nusing namespace std;\n#define INT_MAX 2147483647\n#define INT_MIN (-2147483647 - 1)\n#define INF 100000000\n#define _INF -100000000\n#define INFLL (long long)1e14\n#define _INFLL (long long)-1e14\n#define Loop(i, n) for(int i = 0; i < (int)n; i++)\n#define Loop1(i, n) for(int i = 1; i <= (int)n; i++)\n#define Loopr(i, n) for(int i = (int)n - 1; i >= 0; i--)\n#define Loopr1(i, n) for(int i = (int)n; i >= 1; i--)\n#define bitmanip(m,val) static_cast<bitset<(int)m>>(val)\ntypedef long long int ll;\ntypedef vector<int> vi;\ntypedef vector<vector<int>> vvi;\ntypedef vector<ll> vll;\ntypedef vector<vector<ll>> vvll;\ntypedef vector<char> vc;\ntypedef vector<vector<char>> vvc;\ntypedef pair<int, int> P;\n\nmap<int, ll> mp1;\nmap<int, ll> mp2;\n\nvoid insert(int k, ll val) {\n\tif (mp2[k] != 0) mp2[k] = max(mp2[k], val);\n\telse mp2[k] = val;\n}\n\nint main() {\n\tint n; cin >> n;\n\tvll a(n);\n\tvc op(n, '+');\n\tcin >> a[0];\n\tLoop1(i, n - 1) {\n\t\tcin >> op[i] >> a[i];\n\t}\n\tmp1[0] = a[0];\n\tLoop1(i, n - 1) {\n\t\tauto itr = mp1.begin();\n\t\tLoop(j, mp1.size()) {\n\t\t\tint x = (*itr).first, y = (*itr).second;\n\t\t\tif (x == 0 && op[i] == '-') insert(1, y - a[i]);\n\t\t\telse if (x == 0 && op[i] == '+') insert(0, y + a[i]);\n\t\t\telse if(x > 0 && op[i] == '-') {\n\t\t\t\tif (x % 2 == 0) {\n\t\t\t\t\tinsert(x + 1, y - a[i]);\n\t\t\t\t\tinsert(x - 1, y + a[i]);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tinsert(x + 1, y + a[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (x > 0 && op[i] == '+') {\n\t\t\t\tif (x % 2 == 0) {\n\t\t\t\t\tinsert(x, y + a[i]);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tinsert(x, y - a[i]);\n\t\t\t\t\tinsert(x - 1, y + a[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t\titr++;\n\t\t}\n\t\tmp1 = mp2;\n\t\tmp2.clear();\n\t}\n\tll ans = _INFLL;\n\tauto itr = mp1.begin();\n\tLoop(j, mp1.size()) {\n\t\tans = max(ans, (*itr).second);\n\t\titr++;\n\t}\n\tcout << ans << endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<cstring>\n#include<cstdlib>\n#include<algorithm>\n#include<cmath>\n#include<queue>\n#include<vector>\n#include<ctime>\n#include<map>\n#include<bitset>\n#include<set>\n#include<assert.h>\n#include<chrono>\n#include<random>\n#define LL long long\n#define mp(x,y) make_pair(x,y)\n#define pll pair<long long,long long>\n#define pii pair<int,int>\n#define SZ(x) ((int)x.size())\nusing namespace std;\nmt19937 rnd(chrono::steady_clock::now().time_since_epoch().count());\ninline LL read()\n{\n\tLL f=1,x=0;char ch=getchar();\n\twhile(ch<'0'||ch>'9'){if(ch=='-')f=-1;ch=getchar();}\n\twhile(ch>='0'&&ch<='9'){x=x*10+ch-'0';ch=getchar();}\n\treturn x*f;\n}\nint stack[20];\ntemplate<typename T>inline void write(T x)\n{\n\tif(x<0){putchar('-');x=-x;}\n    if(!x){putchar('0');return;}\n    int top=0;\n    while(x)stack[++top]=x%10,x/=10;\n    while(top)putchar(stack[top--]+'0');\n}\ntemplate<typename T>inline void pr1(T x){write(x);putchar(' ');}\ntemplate<typename T>inline void pr2(T x){write(x);putchar('\\n');}\ntemplate<typename T>inline void chkmin(T &x,T y){x=x<y?x:y;}\ntemplate<typename T>inline void chkmax(T &x,T y){x=x>y?x:y;}\nconst int MAXN=100005;\nint a[MAXN],n,opt[MAXN];char ch[15];\nint main()\n{\n\tn=read();LL sum=0;\n\tint fi=-1;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\ta[i]=read();sum+=a[i];\n\t\tif(i!=n)\n\t\t{\n\t\t\tscanf(\"%s\",ch+1);\n\t\t\topt[i]=ch[1]=='+'?1:-1;\n\t\t\tif(opt[i]==-1&&fi==-1)fi=i;\n\t\t}\n\t}\n\tif(fi==-1)return pr2(sum),0;\n\tif(opt[fi+1]==-1)return pr2(sum-2*a[fi+1]),0;\n\tLL ans=-1e18;chkmax(ans,sum-2*a[fi+1]-2*a[fi+2]);sum-=2*a[fi+1];\n\tfor(int i=fi+1;i<n;i++)\n\t{\n\t\tif(opt[i]==-1)\n\t\t{\n\t\t\tif(opt[i+1]==-1)chkmax(ans,sum-2*a[i+1]);\n\t\t\telse chkmax(ans,sum-2*a[i+1]-2*a[i+2]);\n\t\t\tsum-=2*a[i+1];\n\t\t}\n\t}pr2(ans);\n\treturn 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "// Math = ♥️\n\n#include <bits/stdc++.h>\n#include <ext/pb_ds/assoc_container.hpp>\n#include <ext/pb_ds/tree_policy.hpp>\nusing namespace __gnu_pbds;\nusing namespace std;\n\n/*-------------------------------------------------------------------------------------------------------------------------*/\n#define ll long long                  // Short form for long long\n#define ld long double                // Short form for long double\ntypedef pair<ll, ll> ii;              // Pair of long long\ntypedef vector<ll> vi;                // Vector of long long\ntypedef vector<vi> vvi;               // Vector of vector of long long\ntypedef vector<ii> vii;               // Vector of pairs\ntypedef vector<vii> vvii;             // Vector of vector of pairs\n#define pq priority_queue             // Max heap (To convert to min heap, use negative sign before every value)\n#define ff first                      // For pairs\n#define ss second                     // For pairs\n#define pb push_back                  // Pushback to vector\n#define mp make_pair                  // Makes pairs to be stored as pair\n#define all(c) (c).begin(), (c).end() // Mainly used by me in sorting\n// ordered_set adds two new functions to set - (set).find_by_order([kth element based on zero indexing]) and order_of_key()\n// order_of_key returns number of elements less that parameter. If element exists, that order is its index\n#define ordered_set tree<ll, null_type, less<ll>, rb_tree_tag, tree_order_statistics_node_update>\n/*-------------------------------------------------------------------------------------------------------------------------*/\n#define MAXN (ll)(1e5 + 5)\n#define NIL (ll)(1e18 + 5)\n\nll dp[MAXN][3];\nvector<char> op;\nvi arr;\nll n;\n\nll solve(ll i, ll t)\n{\n    if (i == n - 1)\n    {\n        if (t == 0 || t == 2)\n            return arr[i];\n        else\n            return -arr[i];\n    }\n\n    if (dp[i][t] == NIL)\n    {\n        if (t == 0)\n        {\n            if (op[i] == '-')\n                dp[i][t] = solve(i + 1, 1) + arr[i];\n            else\n                dp[i][t] = solve(i + 1, 0) + arr[i];\n        }\n        else if (t == 1)\n        {\n            if (op[i] == '-')\n                dp[i][t] = max(solve(i + 1, 1) - arr[i], solve(i + 1, 2) - arr[i]);\n            else\n                dp[i][t] = max(solve(i + 1, 1) - arr[i], solve(i + 1, 0) - arr[i]);\n        }\n        else\n        {\n            if (op[i] == '-')\n                dp[i][t] = solve(i + 1, 2) + arr[i];\n            else\n                dp[i][t] = max(solve(i + 1, 2), max(solve(i + 1, 1), solve(i + 1, 0))) + arr[i];\n        }\n    }\n    return dp[i][t];\n}\n\nint main(void)\n{\n    ios_base::sync_with_stdio(false);\n    cin.tie(NULL);\n\n    for (int i = 0; i < MAXN; i++)\n        for (int j = 0; j < 3; j++)\n            dp[i][j] = NIL;\n\n    cin >> n;\n\n    arr.resize(n);\n    op.resize(n - 1);\n    cin >> arr[0];\n\n    for (int i = 1; i < n; i++)\n        cin >> op[i - 1] >> arr[i];\n\n    cout << solve(0, 0) << \"\\n\";\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nint n,a[100010],F,G,ty;\nchar op[100010];\n\nvoid work()\n{\n\tscanf(\"%d %d\",&n,&a[1]);\n\tfor (int i=2; i<=n; i++)\n\t\t{\n\t\t\tdo  op[i]=getchar();  while ((op[i]!='+')&&(op[i]!='-'));\n\t\t\tscanf(\"%d\",&a[i]);\n\t\t}\n\tF=G=a[1],ty=0;\n\tfor (int i=2; i<=n; i++)\n\t\tif (op[i]=='+')\n\t\t\t{\n\t\t\t\tif (ty)  F-=a[i],G+=a[i];  else  F+=a[i],G-=a[i];\n\t\t\t\tG=max(F,G);\n\t\t\t}else\n\t\t\t{\n\t\t\t\tif (ty)  F+=a[i],G-=a[i];  else  F-=a[i],G+=a[i];\n\t\t\t\tG=max(F,G),ty^=1;\n\t\t\t}\n\tprintf(\"%d\\n\",G);\n}\n\nint main()\n{\n\twork();\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<cstdlib>\n#include<cstring>\n#include<cmath>\n#include<algorithm>\n#include<functional>\n#include<vector>\n#include<queue>\n#include<stack>\n#include<set>\nusing namespace std;\n#define MOD 1000000007\n#define f(i,n) for(int i=0;i<int(n);i++)\n#define N 200000\n\n\nint main(){\nvector<long long>a;\nvector<long long>b;\nchar c[10];\n\tint n;\n\tlong long x, y, z;\n\tlong long s, ans;\n\tbool v = true;\n\tans = 0;\n\tscanf(\"%d\", &n);\n\t\tscanf(\"%lld\", &x);\ns=x;\nans=x;\ny=0;\n\tf(i, n-1){\nscanf(\"%s\",c);\nscanf(\"%lld\", &x);\nans+=x;\nif(c[0]=='+'){\ns+=x;\n}\nelse{\ny+=x;\na.push_back(s);\nb.push_back(x);\ns=0;\n}\n\t}\na.push_back(s);\nif(b.size()==0){\nprintf(\"%lld\\n\",ans);\nreturn 0;\n}\ns=b[0]+a[1];\nz=s;\n\tf(i, b.size()-1){\ns+=(a[i+2]-a[i+1]+b[i+1]);\nz=min(z,s);\n\t}\nz=min(z,y);\nans-=(z*2);\n\n\tprintf(\"%lld\\n\", ans);\n\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n\nusing namespace std;\n\nconst long long INF = (1LL << 60);\n\nint main(){\n\tint N;\n\twhile(cin >> N){\n\t\tvector<int> A(N), sign(N);\n\t\tcin >> A[0];\n\t\tsign[0] = 1;\n\t\tfor(int i=1;i<N;i++){\n\t\t\tchar c;\n\t\t\tcin >> c >> A[i];\n\t\t\tsign[i] = (c == '+' ? 1 : -1);\n\t\t}\n\t\tlong long dp[2][3];\n\t\tfor(int i=0;i<3;i++) dp[0][i] = dp[1][i] = -INF;\n\t\tdp[0][0] = 0;\n\t\tlong long m[3] = {1, -1, 1};\n\t\tfor(int i=0;i<N;i++){\n\t\t\tlong long* cur = dp[i%2];\n\t\t\tlong long* next = dp[1-i%2];\n\t\t\tfor(int j=0;j<3;j++){\n\t\t\t\tfor(int k=0;k<=j;k++){\n\t\t\t\t\tnext[k] = max(next[k], cur[j] + m[k] * sign[i] * A[i]);\n\t\t\t\t\tif(sign[i] == -1 && k+1 <= 2){\n\t\t\t\t\t\tnext[k+1] = max(next[k+1], cur[j] + m[k] * sign[i] * A[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tlong long res = 0;\n\t\tfor(int i=0;i<3;i++) res = max(res, dp[N%2][i]);\n\t\tcout << res << endl;\n\t}\n}\n\n"
  },
  {
    "language": "C++",
    "code": "// by newbiechd\n#include <bits/stdc++.h>\nusing namespace std;\n\n#define debug(x) cerr << #x << \" = \" << x << endl\n\nconst int N_MAX = 200003;\nlong long init = 0xcfcfcfcfcfcfcfcf;\nlong long dp[N_MAX][3];\n\nint main() {\n  ios::sync_with_stdio(false);\n  cin.tie(0);\n  \n  int n;\n  cin >> n >> dp[1][0];\n  dp[1][1] = dp[1][2] = init;\n  for (int i = 2; i <= n; ++i) {\n    string op;\n    int x;\n    cin >> op >> x;\n    if (op[0] == '-') {\n      dp[i][0] = init;\n      dp[i][1] = max(dp[i - 1][0], max(dp[i - 1][1], dp[i - 1][2])) - x;\n      dp[i][2] = max(dp[i - 1][1], dp[i - 1][2]) + x;\n    }\n    else {\n      dp[i][0] = max(dp[i - 1][0], max(dp[i - 1][1], dp[i - 1][2])) + x;\n      dp[i][1] = max(dp[i - 1][1], dp[i - 1][2]) - x;\n      dp[i][2] = dp[i - 1][2] + x;\n    }\n  }\n  cout << max(dp[n][0], max(dp[n][1], dp[n][2])) << endl;\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<algorithm>\n#define ll long long\nusing namespace std;\nint n,i,k;char c;ll f0,f1,f2;\nint main(){\n\tscanf(\"%d\",&n);scanf(\"%d\",&f0);f1=f2=-1e18;\n\tfor (n--;n--;){\n\t\tscanf(\" %c%d\",&c,&k);\n\t\tif (c=='-') k=-k;\n\t\tll v0=f0+k,v1=f1-k,v2=f2+k;\n\t\tf0=max(v0,max(v1,v2));\n\t\tif (c=='+') f1=f2=max(v1,v2);\n\t\telse f1=max(v0,max(v1,v2)),f2=max(v1,v2);\n\t}\n\tprintf(\"%lld\",max(f0,max(f1,f2)));\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstdio>\n#include<algorithm>\n#include<cstring>\n\nusing namespace std;\n\nconst int MAXN = 100100;\ntypedef long long LL;\nconst LL INF = 1e16;\nchar opt[MAXN];\nint n,kind = 0;\nLL val[MAXN],ans = -INF,sum[MAXN];\n\ntemplate<typename T>\nvoid read(T &x)\n{\n\tx = 0;\n\tchar ch = getchar();\n\twhile(ch < '0' || ch > '9') ch = getchar();\n\twhile(ch >= '0' && ch <= '9')\n\t\tx = x * 10 + ch - '0',ch = getchar();\n}\n\nvoid init()\n{\n\tLL t1 = val[1],t2 = 0,temp;\n\tfor(int i = 1;i <= n-1;i++)\n\t{\n\t\tif(opt[i] == '+')\n\t\t{\n\t\t\tt1 += val[i+1];\n\t\t\tcontinue;\n\t\t} \n\t\tint now = i+1;temp = -val[i+1];\n\t\twhile(now < n && opt[now] == '+')\n\t\t{\n\t\t\tnow++;\n\t\t\ttemp -= val[now];\n\t\t}\n\t\tprintf(\"%lld\\n\",t1+t2+temp+sum[n]-sum[now]);\n\t\tans = max(ans,t1 + t2 + temp + sum[n] - sum[now]);\n\t\tt2 -= val[i+1];\n\t}\n}\n\nint main()\n{\n\t//freopen(\"T2.in\",\"r\",stdin);\n\tread(n);\n\tfor(int i = 1;i <= n;i++)\n\t{\n\t\tscanf(\"%lld\",&val[i]);\n\t\tsum[i] = sum[i-1] + val[i];\n\t\tif(i != n) cin >> opt[i];\n\t}\n\tinit();\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}\n/*\n5\n1 - 100 - 50 - 10 - 5\n*/\n"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <iostream>\n#include <algorithm>\nusing namespace std;\nlong long pre[111000],suf[111000],ans;\nint a[110000],rr[111000],m,n,l,k,j;\nchar sg[1110000];\nlong long cmp(int l,int r)\n{\n\tif(l>r)\n\t{\n\t\treturn 0;\n\t}\n\telse\n\t{\n\t\treturn suf[r]-suf[l-1];\n\t}\n}\nint main()\n{\n\tcin>>m;\n\tcin>>a[1];\n\tpre[1]=a[1];\n\tsuf[1]=a[1];\n\tfor(int x=1;x<m;x++)\n\t{\n\tscanf(\" %c %d\",&sg[x],&a[x+1]);\n\t\tif(sg[x]=='+')\n\t\t{\n\t\t\tpre[x+1]=pre[x]+a[x+1];\n\t\t}\n\t\telse\n\t\t{\n\t\t\tpre[x+1]=pre[x]-a[x+1];\n\t\t}\n\t\t\tsuf[x+1]=suf[x]+a[x+1];\n\t}\n\trr[m]=m;\n\tans=pre[m];\n\tfor(int x=m-1;x>=0;x--)\n\t{\n\t\tif(sg[x]=='+')\n\t\t{\n\t\t\trr[x]=rr[x+1];\n\t\t}\n\t\telse\n\t\t{\n\t\t\trr[x]=x;\n\t\t}\n\t}\n\tfor(int x=1;x<m;x++)\n\t{\n\t\tif(sg[x]=='-')\n\t\tans=max(ans,pre[x]-cmp(x+1,rr[x+1])+suf[m]-suf[rr[x+1]]);\n\t}\n\tprintf(\"%lld\\n\",ans);\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\nusing int64 = long long;\n\nconstexpr int DEBUG = 0;\n\ntemplate<class T> inline bool UpdateMin(T& a, T b) {\n  if (a > b) { a = b; return 1; } return 0;\n}\n\ntemplate<class T> inline bool UpdateMax(T& a, T b) {\n  if (a < b) { a = b; return 1; } return 0;\n}\n\nint main() {\n  ios::sync_with_stdio(false);\n  cin.tie(0);\n\n  int n;\n  cin >> n;\n\n  vector<int64> xs;\n  vector<char> ops;\n  ops.push_back('+');\n  for (int i = 0; i < 2 * n - 1; i++) {\n    if (i % 2 == 0) {\n      int64 x;\n      cin >> x;\n      xs.push_back(x);\n    } else {\n      char op;\n      cin >> op;\n      ops.push_back(op);\n    }\n  }\n\n  vector<int64> c_sums(n + 1);\n  for (int i = 0; i < n; i++) {\n    c_sums[i + 1] = c_sums[i] + xs[i];\n  }\n\n  int64 ans = INT64_MIN;\n  int64 current = 0;\n  for (int i = 0; i < n; i++) {\n    if (ops[i] == '-') {\n      int p = n;\n      for (int j = i + 1; j < n; j++) {\n        if (ops[j] == '-') {\n          p = j;\n          break;\n        }\n      }\n      int64 s = current - (c_sums[p] - c_sums[i]) + (c_sums[n] - c_sums[p]);\n      UpdateMax(ans, s);\n    }\n\n    if (ops[i] == '+') current += xs[i];\n    else if (ops[i] == '-') current -= xs[i];\n  }\n  UpdateMax(ans, current);\n\n  cout << ans << endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define int long long\n#define fi first\n#define se second\n#define PB push_back\nusing namespace std;\ntypedef pair<int, int> P1;\ntypedef pair<int, pair<int, int> > P2;\nstatic const int INF = 1ll<<60;\nstatic const int dx[] = { 1, -1, 0, 0, };\nstatic const int dy[] = { 0, 0, 1, -1 };\nstatic const int mod = 1000000007;\n\nint N;\nint A[100005];\nchar op[100005];\nint dp[100005][5];\n//    [i項目][i項目までに開いているかっこの数]\n\nint solve(){\n    for(int i=0;i<100005;++i)for(int j=0;j<5;++j)dp[i][j]=-INF;\n    dp[0][0] = A[0];\n    for(int i=0;i<N-1;++i){\n        for(int j=0;j<=3ll;++j){\n            int f;\n            if(j%2==0)f=1;\n            else f=-1;\n            int t1 = f*A[i+1];\n            //cout<<t1<<endl;\n            //cout<<i<<\" \"<<j<<endl;\n            if(op[i+1]=='+'){\n                dp[i+1][j] = max(dp[i][j]+t1,dp[i+1][j]);\n                if(j!=0)dp[i+1][j-1] = max(dp[i][j]+t1,dp[i+1][j-1]);\n            }\n            else {\n                cout<<1/0<<endl;\n                dp[i+1][j] = max(dp[i][j]-t1,dp[i+1][j]);\n                dp[i+1][j+1] = max(dp[i][j]-t1,dp[i+1][j+1]);\n                if(j!=0)dp[i+1][j-1] = max(dp[i][j]-t1,dp[i+1][j-1]);\n            }\n            //cout<<i<<\" \"<<j<<endl;\n            //cout<<dp[i][j]<<\" \"<<dp[i+1][j]<<\" \"<<dp[i+1][j+1]<<endl;\n        }\n    }\n    int ans=-INF;\n    for(int i=0;i<N;++i)ans=max(dp[N-1][i],ans);\n    return ans;\n}\n\n\nsigned main(){\n    cin>>N;\n    op[0]='+';\n    for(int i=0;i<N;++i){\n        cin>>A[i];\n        if(i!=N-1)cin>>op[i+1];\n    }\n    cout<<solve()<<endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define inf 100000000000000ll\nusing namespace std;\n\nint read();\n\nint n;\nlong long f[100005][3];\nvoid chmax(long long &x, long long y) { x = x > y ? x : y; }\n\nint main() {\n    n = read();\n    f[0][0] = 0, f[0][1] = f[0][2] = -inf;\n    for (int i = 1, x; i <= n; ++i) {\n        x = read();\n        {\n            f[i][0] = max(f[i - 1][0], f[i - 1][1]),\n            f[i][1] = max(f[i - 1][1], f[i - 1][2]);\n            f[i][2] = f[i - 1][2];\n        }\n        f[i][0] += x, f[i][1] -= x, f[i][2] += x;\n        if (x < 0) chmax(f[i][2], f[i][1]), chmax(f[i][1], f[i][0]);\n    }\n    printf(\"%lld\\n\", max(f[n][0], max(f[n][1], f[n][2])));\n    return 0;\n}\n\nint read() {\n    int x = 0, f = 1;\n    char c = getchar();\n    while (c < '0' || c > '9') f = (c == '-') ? -1 : f, c = getchar();\n    while (c >= '0' && c <= '9') x = x * 10 + c - '0', c = getchar();\n    return x * f;\n}"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<cstdlib>\n#include<cstring>\n#include<iostream>\n#define LL long long\nusing namespace std;\nconst LL inf=1LL<<60;\nLL a[100010],n,cnt=0,num=0,f[100010][2];\nchar s[20];\nint main()\n{\n\tscanf(\"%lld\",&n);\n\tfor(LL i=1;i<=n;i++)\n\t{\n\t\tif(i!=1)\n\t\t{\n\t\t\tscanf(\"%s\",s+1);\n\t\t\tif(s[1]=='-') a[++cnt]=num,num=0;\n\t\t}\n\t\tscanf(\"%s\",s+1);\n\t\tLL len,tmp=0;len=strlen(s+1);\n\t\tfor(LL i=1;i<=len;i++) tmp=tmp*10+s[i]-'0';\n\t\tnum+=tmp;\n\t\t//printf(\"%lld\\n\",tmp);\n\t}\n\ta[++cnt]=num;\n\t/*for(LL i=1;i<=cnt;i++) f[i][0]=f[i][1]=-inf;\n\tf[1][0]=a[1];\n\tfor(LL i=2;i<=n;i++)\n\t{\n\t\tf[i][0]=max(f[i-1][1]+a[i],f[i-1][0]-a[i]);\n\t\tf[i][1]=max(f[i-1][0]+a[i],f[i-1][1]-a[i]);\n\t\tprintf(\"%lld %lld\\n\",f[i][0],f[i][1]);\n\t}*/\n\tLL ans=a[1];\n\tif(cnt>1) ans-=a[2];\n\tfor(int i=3;i<=cnt;i++) ans+=a[i];\n\tprintf(\"%lld\",ans);\n}"
  },
  {
    "language": "C++",
    "code": "#define _USE_MATH_DEFINES\n#include <bits/stdc++.h>\nusing namespace std;\n// #define int long long\n// #define double long double\n#define rep(i,n) for (int i=0; i<(int)(n); ++i)\n#define rep1(i,n) for (int i=1; i<(int)(n); ++i)\n#define repeq(i,n) for (int i=0; i<=(int)(n); ++i)\n#define rep1eq(i,n) for (int i=1; i<=(int)(n); ++i)\n#define rrep(i,n) for (int i=(int)(n)-1; i>=0; --i)\n#define rrep1(i,n) for (int i=(int)(n)-1; i>0; --i)\n#define rrepeq(i,n) for (int i=(int)(n); i>=0; --i)\n#define rrep1eq(i,n) for (int i=(int)(n); i>0; --i)\n#define REP(i,a,b) for (int i=(int)(a); i<=(int)(b); ++i)\n#define RREP(i,a,b) for (int i=(int)(a); i>=(int)(b); --i)\n#define ALL(a) (a).begin(), (a).end()\n#define RALL(a) (a).rbegin(), (a).rend()\nusing ll = long long;\nusing vi = vector<int>;\nusing vl = vector<ll>;\nusing vb = vector<bool>;\ntemplate<typename T> using Graph = vector<vector<T>>;\ntemplate<typename T> using Spacial = vector<vector<vector<T>>>;\nusing pii = pair<int, int>;\nusing pll = pair<ll, ll>;\nconst int MOD = 1e9+7;\nconst int MOD2 = 998244353;\n// const double EPS = 1e-9;\nconst int dx[4] = {1, 0, -1, 0};\nconst int dy[4] = {0, 1, 0, -1};\nstring interval[2] = {\" \", \"\\n\"}; // {\" \", \"\\n\"}\n\ntemplate<typename T> struct is_plural : false_type{};\ntemplate<typename T1, typename T2> struct is_plural<pair<T1, T2>> : true_type{};\ntemplate<typename T> struct is_plural<vector<T>> : true_type{};\ntemplate<typename T> struct is_plural<complex<T>> : true_type{};\n \ntemplate<typename T1, typename T2> istream &operator>>(istream &is, pair<T1, T2> &p) { return is >> p.first >> p.second; }\ntemplate<typename T1, typename T2> ostream &operator<<(ostream &os, const pair<T1, T2> &p) { return os << p.first << \" \" << p.second; }\ntemplate<typename T> istream &operator>>(istream &is, vector<T> &vec) { for (auto itr = vec.begin(); itr != vec.end(); ++itr) is >> *itr; return is; }\ntemplate<typename T> ostream &operator<<(ostream &os, const vector<T> &vec) { if (vec.empty()) return os; bool pl = is_plural<T>(); os << vec.front(); for (auto itr = ++vec.begin(); itr != vec.end(); ++itr) os << interval[pl] << *itr; return os; }\n \nbool CoutYN(bool a, string y = \"Yes\", string n = \"No\") { cout << (a ? y : n) << \"\\n\"; return a; }\n\ntemplate<typename T1, typename T2> inline bool chmax(T1 &a, T2 b) { return a < b && (a = b, true); }\ntemplate<typename T1, typename T2> inline bool chmin(T1 &a, T2 b) { return a > b && (a = b, true); }\n\nlong long modpow(int a, long long n, int mod = MOD) { long long ret = 1; do { if (n & 1) ret = ret * a % mod; a = 1LL * a * a % mod; } while (n >>= 1); return ret; }\n\ntemplate<typename T> T GCD(T a, T b) { return b ? GCD(b, a%b) : a; }\ntemplate<typename T> T LCM(T a, T b) { return a / GCD(a, b) * b; }\n\ntemplate<typename T1, typename T2> bool CompareBySecond(pair<T1, T2> a, pair<T1, T2> b) { return a.second != b.second ? a.second < b.second : a.first < b.first; }\ntemplate<typename T1, typename T2> bool CompareByInverse(pair<T1, T2> a, pair<T1, T2> b) { return a.first != b.first ? a.first < b.first : a.second > b.second; }\n\n\n/* -------- <templates end> -------- */\n\n\nvoid solve() {\n  int n; cin >> n;\n  vi num(n);\n  vector<char> op(n-1);\n  rep(i,n-1) cin >> num[i] >> op[i];\n  cin >> num[n-1];\n\n  vl sum(n+1);\n  sum[n] = 0;\n  rrep(i,n) sum[i] = sum[i+1] + num[i];\n\n  ll ans = -1e9;\n  ll tmp = num[0];\n  bool skip = false;\n\n  rep(i,n-1) {\n    if (op[i] == '+') {\n      tmp += num[i+1];\n      continue;\n    }\n\n    if (i+1 != n-1 && op[i+1] == '-') {\n      chmax(ans, tmp - num[i+1] + sum[i+2]);\n      skip = true;\n      break;\n    }\n\n    int j = i+2;\n    while (j != n-1 && op[j] == '+') ++j;\n    if (j != n-1) {\n      ll dec = sum[i+1] - sum[j+1];\n      chmax(ans, tmp - dec + sum[j+1]);\n    }\n\n    tmp -= num[i+1];\n  }\n\n  if (!skip) chmax(ans, tmp);\n  cout << ans << endl;\n}\n\n\n/* -------- <programs end> -------- */\n\n\nsigned main() {\n  cin.tie(nullptr);\n  ios::sync_with_stdio(false);\n  cout << fixed << setprecision(10);\n  solve();\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\nconst int N=1e5+10;\nint n,a[N],sig[N];ll dp[N][10];\nint main()\n{\n\tscanf(\"%d%d\",&n,&a[1]);\n\tfor (int i=2;i<=n;i++){\n\t\tchar ch;\n\t\tdo ch=getchar();while (ch!='-'&&ch!='+');\n\t\tif (ch=='-') sig[i]=1;\n\t\tscanf(\"%d\",&a[i]);\n\t}\n\tfor (int i=0;i<=n;i++)\n\tfor (int j=0;j<=n;j++)\n\t\tdp[i][j]=-1e16;\n\tdp[0][0]=0;\n\tfor (int i=0;i<n;i++)\n\tfor (int j=0;j<=5;j++){\n\t\tll v=dp[i][j];int k=j+sig[i+1];\n\t\tdp[i+1][k]=max(dp[i+1][k],k&1?v-a[i+1]:v+a[i+1]);\n\t\tif (j) dp[i+1][k-1]=max(dp[i+1][k-1],k&1?v+a[i+1]:v-a[i+1]);\n\t}\n\tll ans=-1e16;\n\tfor (int i=0;i<10;i++) ans=max(ans,dp[n][i]);\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstdio>\n#include<algorithm>\n#include<cstring>\n\nusing namespace std;\n\nconst int MAXN = 100100;\ntypedef long long LL;\nconst LL INF = 1e16;\nchar opt[MAXN];\nint n,kind = 0;\nLL val[MAXN],ans = -INF,sum[MAXN];\n\ntemplate<typename T>\nvoid read(T &x)\n{\n\tx = 0;\n\tchar ch = getchar();\n\twhile(ch < '0' || ch > '9') ch = getchar();\n\twhile(ch >= '0' && ch <= '9')\n\t\tx = x * 10 + ch - '0',ch = getchar();\n}\n\nvoid init()\n{\n\tLL t1 = val[1],t2 = 0,temp;\n\tfor(int i = 1;i <= n-1;i++)\n\t{\n\t\tif(opt[i] == '+')\n\t\t{\n\t\t\tt1 += val[i+1];\n\t\t\tcontinue;\n\t\t} \n\t\tint now = i+1;temp = -val[i+1];\n\t\twhile(now < n && opt[now] == '+')\n\t\t{\n\t\t\tnow++;\n\t\t\ttemp -= val[now];\n\t\t}\n\t//\tprintf(\"%d\\n\",t1+t2+temp+sum[n]-sum[now]);\n\t\tans = max(ans,t1 + t2 + temp + sum[n] - sum[now]);\n\t\tt2 -= val[i+1];\n\t}\n}\n\nint main()\n{\n\t//freopen(\"T2.in\",\"r\",stdin);\n\tread(n);\n\tfor(int i = 1;i <= n;i++)\n\t{\n\t\tread(val[i]);\n\t\tsum[i] = sum[i-1] + val[i];\n\t\tif(i != n) cin >> opt[i];\n\t}\n\tinit();\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define MAXN 200005\n#define LL long long\n#define sum(l,r) (l<=r?(s[r] - s[l-1]):0)\nusing namespace std;\n \nint N;\nLL a[MAXN], s[MAXN];\nint nxt[MAXN];\n\nLL dp[MAXN][3];\n \nint main(){\n\t//freopen(\"1.in\", \"r\", stdin);\n\t//freopen(\"1.out\", \"w\", stdout);\n\t\n\tcin>>N;\n\tcin>>a[1];\n\t\n\tint N1 = 1;\n\tchar op;\n\tint x, f = 1; \n\tfor(int i=1;i<N;i++){\n\t\tcin>>op;\n\t\tcin>>x;\n\t\tif(op=='-') a[++N1] = -x, f = 0;\n\t\telse{\n\t\t\tif(f) a[N1] += x;\n\t\t\telse a[++N1] = x, f = 1; \n\t\t}\n\t}\n\n\tN = N1;\n\tif(N==1){\n\t\tcout<<a[1]<<endl;\n\t\treturn 0;\n\t}\n\t\n\tfor(int i=1;i<=N;i++){\n\t\t//cout<<a[i]<<\" \";\n\t\ts[i] = s[i-1] + abs(a[i]);\n\t}\n\t//cout<<endl;\n\t\n\tmemset(dp, 0xf3, sizeof(dp));\n\tdp[2][0] = dp[2][1] = dp[2][2] = a[1] + a[2];\n\t\n\tfor(int i=3;i<=N;i++){\n\t\tfor(int j=0;j<3;j++){\n\t\t\tfor(int k=j;k<3;k++){\n\t\t\t\tif(a[i] >= 0) dp[i][j] = max(dp[i][j], dp[i-1][k] + a[i]);\n\t\t\t\tif(a[i] < 0){\n\t\t\t\t\tif(k%2) dp[i][j] = max(dp[i][j], dp[i-1][k] - a[i]);\n\t\t\t\t\telse dp[i][j] = max(dp[i][j], dp[i-1][k] + a[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\tcout<<dp[N][0];\n\t\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<set>\n#include<map>\n#include<cmath>\n#include<queue>\n#include<bitset>\n#include<string>\n#include<cstdio>\n#include<cctype>\n#include<cassert>\n#include<cstdlib>\n#include<cstring>\n#include<sstream>\n#include<iostream>\n#include<algorithm>\n\n#define For(i,x,y) for (int i=x;i<y;i++)\n#define pb push_back\n#define mp make_pair\n#define fi first\n#define se second\n#define lf else if\n\n#define dprintf(...) fprintf(stderr,__VA_ARGS__)\nusing namespace std;\n\ntypedef long long ll;\ntypedef double db;\ntypedef pair<int,int> pii;\ntypedef vector<int> Vi;\n\nint IN(){\n\tint c,f,x;\n\twhile (!isdigit(c=getchar())&&c!='-');c=='-'?(f=1,x=0):(f=0,x=c-'0');\n\twhile (isdigit(c=getchar())) x=(x<<1)+(x<<3)+c-'0';return !f?x:-x;\n}\n\nconst int N=100000+19;\n\nchar opt[N],s[5];\nll pre[N],suf[N],ans;\nint A[N];\nint n,las;\n\nint main(){\n\tn=IN();\n\tA[1]=IN();\n\topt[1]='+';\n\tFor(i,2,n+1){\n\t\tscanf(\"%s\",s);\n\t\topt[i]=s[0];\n\t\tA[i]=IN();\n\t}\n\topt[++n]='-';A[n]=0;\n\topt[++n]='-';A[n]=0;\n\tFor(i,1,n+1){\n\t\tif (opt[i]=='+') pre[i]=pre[i-1]+A[i];else pre[i]=pre[i-1]-A[i];\n\t}\n\tfor (int i=n;i;i--) suf[i]=suf[i+1]+A[i];\n\tans=pre[n];\n\tFor(i,1,n+1) if (opt[i]=='-'){\n\t\tif (las){\n\t\t\tans=max(ans,pre[las-1]-(suf[las]-suf[i])+suf[i]);\n\t\t}\n\t\tlas=i;\n\t}\n\tcout<<ans<<endl;\n}"
  },
  {
    "language": "C++",
    "code": "#pragma GCC optimize (\"O3\")\n#pragma GCC target (\"avx\")\n//#include<bits/stdc++.h>\n#include<cstdio>\n#include<algorithm>\nusing namespace std;\ntypedef long long ll;\n#define rep(i, n) for(int i = 0; i < (n); i++)\n#define rep1(i, n) for(int i = 1; i <= (n); i++)\n#define co(x) cout << (x) << \"\\n\"\n#define cosp(x) cout << (x) << \" \"\n#define ce(x) cerr << (x) << \"\\n\"\n#define cesp(x) cerr << (x) << \" \"\n#define pb push_back\n#define mp make_pair\n#define chmin(x, y) x = min(x, y)\n#define chmax(x, y) x = max(x, y)\n#define Would\n#define you\n#define please\n\nconst int cm = 1 << 17;\nchar cn[cm], * ci = cn + cm, ct;\ninline char getcha() {\n\tif (ci - cn == cm) { fread_unlocked(cn, 1, cm, stdin); ci = cn; }\n\treturn *ci++;\n}\ninline int getint() {\n\tint A = 0;\n\tif (ci - cn + 16 > cm) while ((ct = getcha()) >= '0') A = A * 10 + ct - '0';\n\telse while ((ct = *ci++) >= '0') A = A * 10 + ct - '0';\n\treturn A;\n}\n\nint main() {\n\t//cin.tie(0);\n\t//ios::sync_with_stdio(false);\n\n\n\tint N = getint();\n\tchar c;\n\n\tll dp0 = getint();\n\tll dp1 = -1e18;\n\tbool hajimete = 0;\n\tll purasu = 0;\n\n\trep(i, N - 1) {\n\t\tint a = 0;\n\t\tif (ci - cn + 16 > cm) {\n\t\t\tc = getcha(); getchar();\n\t\t\twhile ((ct = getcha()) >= '0') a = a * 10 + ct - '0';\n\t\t}\n\t\telse {\n\t\t\tc = *ci++; ci++;\n\t\t\twhile ((ct = *ci++) >= '0') a = a * 10 + ct - '0';\n\t\t}\n\n\t\tif (hajimete == 0) {\n\t\t\tif (c == '+') {\n\t\t\t\tdp0 += a;\n\t\t\t}\n\t\t\telse {\n\t\t\t\thajimete = 1;\n\t\t\t\tdp0 -= a;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tif (c == '+') {\n\t\t\t\tpurasu += a;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdp1 = max(dp1 + purasu + a, dp0 + a - purasu);\n\t\t\t\tdp0 += purasu - a;\n\t\t\t\tpurasu = 0;\n\t\t\t}\n\t\t}\n\t}\n\tprintf(\"%lld\", max(dp0, dp1) + purasu);\n\n\tWould you please return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstring>\n#include<cstdio>\n#include<algorithm>\n#include<cmath>\n#include<set>\n#include<bitset>\n#include<map>\n\n#define fo(i,a,b) for(int i=a;i<=b;i++)\n#define fd(i,a,b) for(int i=a;i>=b;i--)\n\nusing namespace std;\n\ntypedef long long LL;\ntypedef double db;\n\nint get(){\n\tchar ch;\n\twhile(ch=getchar(),(ch<'0'||ch>'9')&&ch!='-');\n\tif (ch=='-'){\n\t\tint s=0;\n\t\twhile(ch=getchar(),ch>='0'&&ch<='9')s=s*10+ch-'0';\n\t\treturn -s;\n\t}\n\tint s=ch-'0';\n\twhile(ch=getchar(),ch>='0'&&ch<='9')s=s*10+ch-'0';\n\treturn s;\n}\n\nconst int N = 1e+5+5;\nconst LL lim = 1e+15;\n\nint n,a[N];\nchar op[N];\nLL f[N][3];\n\nLL maxll(LL x,LL y){return x>=y?x:y;}\n\nint main(){\n\tn=get();\n\ta[1]=get();\n\tfo(i,2,n){\n\t\tchar ch;\n\t\twhile(ch=getchar(),ch!='+'&&ch!='-');\n\t\top[i]=ch;\n\t\ta[i]=get();\n\t}\n\tfo(i,1,n)fo(j,0,2)f[i][j]=-lim;\n\tf[1][0]=a[1];\n\tfo(i,2,n)\n\tif (op[i]=='+'){\n\t\tf[i][0]=maxll(f[i-1][0],f[i-1][1])+a[i];\n\t\tf[i][1]=f[i-1][1]-a[i];\n\t\tf[i][2]=f[i-1][2]+a[i];\n\t}\n\telse{\n\t\tf[i][1]=f[i-1][0]-a[i];\n\t\tf[i][2]=maxll(f[i-1][1],f[i-1][2])+a[i];\n\t}\n\tLL ans=maxll(maxll(f[n][0],f[n][1]),f[n][2]);\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\nconst int S=(1<<20)+5;\nchar buf[S],*H,*T;\ninline char Get()\n{\n    if(H==T) T=(H=buf)+fread(buf,1,S,stdin);\n    if(H==T) return -1;return *H++;\n}\ninline int read()\n{\n    int x=0;char c=Get();\n    while(!isdigit(c)) c=Get();\n    while(isdigit(c)) x=x*10+c-'0',c=Get();\n    return x;\n}\ninline int readopt()\n{\n    char c=Get();\n    while(c!='+'&&c!='-') c=Get();\n    return c;\n}\n\ntypedef long long LL;\nint num,n,k;\nchar opt;\nLL f[2][3];\n\ninline LL mymax(const LL &x,const LL &y){return x>y?x:y;}\n\nint main()\n{\n    n=read();\n    f[k=0][0]=read();\n    f[0][1]=f[0][2]=-(1ll<<60);\n    for(int i=1;i<n;i++,k^=1)\n    {\n        opt=readopt();num=read();\n        if(opt=='+')\n        {\n            f[k^1][0]=mymax(mymax(f[k][0],f[k][1]),f[k][2])+num;  //原地转移 或 拆1/2个括号\n            f[k^1][1]=mymax(f[k][1],f[k][2])-num;  //原地转移 或 拆1个括号\n            f[k^1][2]=f[k][2]+num;  //原地转移\n        }\n        else\n        {\n            f[k^1][0]=mymax(mymax(f[k][0],f[k][1]),f[k][2])-num;  //原地转移 或 拆1/2个括号\n            f[k^1][1]=mymax(mymax(f[k][1],f[k][2])+num,f[k][0]-num);  //原地转移 或 拆1个括号 或 添1个括号\n            f[k^1][1]=mymax(mymax(f[k][1]-num,f[k][2]-num),f[k^1][1]);  //拆1/2个括号又添1个括号\n            f[k^1][2]=mymax(f[k][2]-num,f[k][1]+num);  //原地转移 或 添1个括号\n            f[k^1][2]=mymax(f[k][2]+num,f[k^1][2]);  //拆1个括号又添1个括号\n        }\n    }\n    LL ans=mymax(mymax(f[k][0],f[k][1]),f[k][2]);\n    printf(\"%lld\\n\",ans);\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <string>\n#include <cmath>\n#include<algorithm>\n#include<stack>\n#include<queue>\n#include<map>\n#include<set>\n#include<iomanip>\n#define _USE_MATH_DEFINES\n#include <math.h>\n#include <functional>\n#include<complex>\nusing namespace std;\n\n#define rep(i,x) for(ll i=0;i<x;i++)\n#define repn(i,x) for(ll i=1;i<=x;i++)\n\ntypedef long long ll;\nconst ll INF = 1e17;\nconst ll MOD = 1000000007;\nconst ll MAX = 4000001;\nconst double eps = 1E-18;\n\nll max(ll a, ll b) {\n\tif (a > b) { return a; }\n\treturn b;\n}\n\nll min(ll a, ll b) {\n\tif (a > b) { return b; }\n\treturn a;\n}\n\nll gcd(ll a, ll b) {\n\tif (b == 0) { return a; }\n\tif (a < b) { return gcd(b, a); }\n\treturn gcd(b, a % b);\n}\n\nll lcm(ll a, ll b) {\n\treturn a / gcd(a, b) * b;\n}\n\nstruct edge {\n\tll ind;\n\tll fr;\n\tll to;\n\tll d;\n};\n\nclass mint {\n\tlong long x;\npublic:\n\tmint(long long x = 0) : x((x% MOD + MOD) % MOD) {}\n\tmint operator-() const {\n\t\treturn mint(-x);\n\t}\n\tmint& operator+=(const mint& a) {\n\t\tif ((x += a.x) >= MOD) x -= MOD;\n\t\treturn *this;\n\t}\n\tmint& operator-=(const mint& a) {\n\t\tif ((x += MOD - a.x) >= MOD) x -= MOD;\n\t\treturn *this;\n\t}\n\tmint& operator*=(const  mint& a) {\n\t\t(x *= a.x) %= MOD;\n\t\treturn *this;\n\t}\n\tmint operator+(const mint& a) const {\n\t\tmint res(*this);\n\t\treturn res += a;\n\t}\n\tmint operator-(const mint& a) const {\n\t\tmint res(*this);\n\t\treturn res -= a;\n\t}\n\tmint operator*(const mint& a) const {\n\t\tmint res(*this);\n\t\treturn res *= a;\n\t}\n\n\tmint pow(ll t) const {\n\t\tif (!t) return 1;\n\t\tmint a = pow(t >> 1);\n\t\ta *= a;\n\t\tif (t & 1) a *= *this;\n\t\treturn a;\n\t}\n\n\t// for prime MOD\n\tmint inv() const {\n\t\treturn pow(MOD - 2);\n\t}\n\tmint& operator/=(const mint& a) {\n\t\treturn (*this) *= a.inv();\n\t}\n\tmint operator/(const mint& a) const {\n\t\tmint res(*this);\n\t\treturn res /= a;\n\t}\n\n\tfriend ostream& operator<<(ostream& os, const mint& m) {\n\t\tos << m.x;\n\t\treturn os;\n\t}\n};\n\nmint pw(mint a, ll b) {\n\tif (b == 0) { return 1; }\n\tmint ret = pw(a, b>>1);\n\tret *= ret;\n\tif (b & 1) { ret *= a; }\n\treturn ret;\n}\n\ntypedef vector<ll> vll;\ntypedef vector<vector<ll>> vvll;\ntypedef vector<vector<vector<ll>>> vvvll;\n\ntypedef vector<mint> vmint;\ntypedef vector<vector<mint>> vvmint;\ntypedef vector<vector<vector<mint>>> vvvmint;\n\n\n//////////////////////////\nll K, N;\n\nvoid prev(vector<ll>& A) {\n\tll M = A.size();\n\tif (A[M - 1] == 1) { A.pop_back(); return; }\n\n\tA[M - 1]--;\n\n\trep(i, N - M) {\n\t\tA.push_back(K);\n\t}\n\n\n}\n\nint main() {\n\tll N;\n\tcin >> N;\n\tvector<ll> A(N + 1);\n\tvector<ll> neg;\n\n\tcin >> A[1];\n\tfor(ll i=2; i<=N; i++) {\n\t\tchar c;\n\t\tcin >> c;\n\t\tif (c == '-') { neg.push_back(i); }\n\t\tcin >> A[i];\n\t}\n\tll M = neg.size();\n\n\tvector<ll> rui(N + 1, 0);\n\trepn(i, N) rui[i] = rui[i - 1] + A[i];\n\tll S = rui[N];\n\n\tvector<ll> nrui(M + 1, 0);\n\trepn(i, M) nrui[i] = nrui[i - 1] + A[neg[i - 1]];\n\n\tll ans = -INF;\n\n\trepn(i, M-1) {\n\t\tans = max(ans, S - 2 * (nrui[i] + rui[neg[i] - 1] - rui[neg[i - 1]]));\n\t\t//cout << nrui[i] << endl;\n\t\t//cout << rui[neg[i] - 1] << \" \" << rui[neg[i - 1]] << endl;\n\t}\n\tans = max(ans, S - 2 * nrui[M]);\n\n\tcout << ans << endl;\n\t\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\nlong long  a[100005];\nchar s[100005];\nint n;\nlong long dp[100005][3];\nint main()\n{\n    ios::sync_with_stdio(0);\n    cin>>n>>a[0];\n    for(int i =1;i<n;i++)\n        cin>>s[i]>>a[i];\n    for(int i =0;i<n;i++)\n        for(int j =0;j<3;j++)\n          dp[i][j]=-1e15;\n    dp[0][0]=a[0];\n    for(int i =1;i<n;i++)\n    {\n        dp[i][1]=dp[i-1][1];\n        dp[i][2]=dp[i-1][2];\n        dp[i][0]=dp[i-1][0];\n      //  cout<<a[i]<<\" \"<<s[i]<<endl;\n     //   cout<<dp[i][0]<<\" \"<<dp[i][1]<<\" \"<<dp[i][2]<<endl;\n        if(s[i]=='-')\n        {\n             dp[i][0]-=a[i];\n             dp[i][1]+=a[i];\n             dp[i][2]-=a[i];\n             dp[i][2]=max(dp[i][1],dp[i][2]);\n             dp[i][1]=max(dp[i][0],dp[i][1]);\n        }\n        else\n        {\n             dp[i][0]+=a[i];\n             dp[i][1]-=a[i];\n             dp[i][2]+=a[i];\n        }\n        dp[i][1]=max(dp[i][2],dp[i][1]);\n        dp[i][0]=max(dp[i][1],dp[i][0]);\n     // cout<<dp[i][0]<<\" \"<<dp[i][1]<<\" \"<<dp[i][2]<<endl;\n    }\n    cout<<dp[n-1][0]<<endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\nusing ll = long long;\nusing vi = vector<int>;\nusing vll = vector<ll>;\nusing vvi = vector<vector<int>>;\nusing vvl = vector<vector<ll>>;\n\nll dp[101010][3] = {0};\n\nint main() {\n  cin.tie(nullptr);\n  ios::sync_with_stdio(false);\n  int n;\n  cin >> n;\n  vector<ll> a(n);\n  vector<char> op(n);\n  ll INF = 1LL << 34;\n  op[0] = '+';\n  for (int i = 0; i < n; i++) {\n    cin >> a[i];\n    if (i < n - 1)\n      cin >> op[i + 1];\n  }\n  for (int i = 0; i <= n; i++) dp[i][0] = dp[i][1] = dp[i][2] = -INF;\n  dp[0][0] = 0;\n  for (int i = 0; i < n; i++) {\n    if (op[i] == '+') {\n      dp[i + 1][0] = max(a[i] + dp[i][0], max(a[i] + dp[i][1], a[i] + dp[i][2]));\n      dp[i + 1][1] = max(-a[i] + dp[i][1], a[i] + dp[i][2]);\n      dp[i + 1][2] = a[i] + dp[i][2];\n    } else {\n      dp[i + 1][0] = max(-a[i] + dp[i][0], max(a[i] + dp[i][1], a[i] + dp[i][2]));\n      dp[i + 1][1] = max(-a[i] + dp[i][0], max(a[i] + dp[i][1], a[i] + dp[i][2]));\n      dp[i + 1][2] = max(a[i] + dp[i][1], a[i] + dp[i][2]);\n    }\n  }\n\n  cout << max(dp[n][0], max(dp[n][1], dp[n][2])) << endl;\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\ntypedef long long   signed int LL;\ntypedef long long unsigned int LU;\n\n#define incID(i, l, r) for(int i = (l)    ; i <  (r); i++)\n#define incII(i, l, r) for(int i = (l)    ; i <= (r); i++)\n#define decID(i, l, r) for(int i = (r) - 1; i >= (l); i--)\n#define decII(i, l, r) for(int i = (r)    ; i >= (l); i--)\n#define  inc(i, n) incID(i, 0, n)\n#define inc1(i, n) incII(i, 1, n)\n#define  dec(i, n) decID(i, 0, n)\n#define dec1(i, n) decII(i, 1, n)\n\n#define inII(v, l, r) ((l) <= (v) && (v) <= (r))\n#define inID(v, l, r) ((l) <= (v) && (v) <  (r))\n\n#define PB push_back\n#define EB emplace_back\n#define MP make_pair\n#define FI first\n#define SE second\n#define PQ priority_queue\n\n#define  ALL(v)  v.begin(),  v.end()\n#define RALL(v) v.rbegin(), v.rend()\n#define  FOR(it, v) for(auto it =  v.begin(); it !=  v.end(); ++it)\n#define RFOR(it, v) for(auto it = v.rbegin(); it != v.rend(); ++it)\n\ntemplate<typename T> bool   setmin(T & a, T b) { if(b <  a) { a = b; return true; } else { return false; } }\ntemplate<typename T> bool   setmax(T & a, T b) { if(b >  a) { a = b; return true; } else { return false; } }\ntemplate<typename T> bool setmineq(T & a, T b) { if(b <= a) { a = b; return true; } else { return false; } }\ntemplate<typename T> bool setmaxeq(T & a, T b) { if(b >= a) { a = b; return true; } else { return false; } }\ntemplate<typename T> T gcd(T a, T b) { return (b == 0 ? a : gcd(b, a % b)); }\ntemplate<typename T> T lcm(T a, T b) { return a / gcd(a, b) * b; }\n\n// ---- ----\n\nLL n, a[100000], ans[100001][3], INF = 1e15;\nchar op[100000];\n\nint sg(int k) { return (k % 2 == 0 ? +1 : -1); }\n\nint main() {\n\tcin >> n;\n\tinc(i, n) {\n\t\tif(i == 0) { op[0] = '+'; } else { cin >> op[i]; }\n\t\tcin >> a[i];\n\t}\n\t\n\tincII(i, 0, n) {\n\tinc(k, 3) {\n\t\tans[i][k] = -INF;\n\t}\n\t}\n\tans[0][0] = 0;\n\tinc(i, n) {\n\t\tif(op[i] == '+') {\n\t\t\tinc(k, 3) { ans[i + 1][k    ] = ans[i][k] + sg(k    ) * a[i]; }\n\t\t} else {\n\t\t\tinc(k, 2) { ans[i + 1][k + 1] = ans[i][k] + sg(k + 1) * a[i]; }\n\t\t}\n\t\t\n\t\tdec(k, 2) { setmax(ans[i + 1][k], ans[i + 1][k + 1]); }\n\t}\n\t\n\tcout << ans[n][0] << endl;\n\t\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define fi first\n#define se second\n#define bug cout<<\"--------------\"<<endl\nusing namespace std;\ntypedef long long ll;\nconst double PI=acos(-1.0);\nconst double eps=1e-6;\nconst ll inf=1e18;\nconst ll llf=1e18;\nconst int mod=1e9+7;\nconst int maxn=1e5+10;\nint n,x;\nll dp[3][maxn];\nint main(){\n\tios::sync_with_stdio(false);\n\t//freopen(\"in\",\"r\",stdin);\n\tcin>>n>>x;\n\tdp[0][1]=x;\n\tdp[1][1]=dp[2][1]=-inf;\n//\tcout<<dp[0][1]<<\" \"<<dp[1][1]<<\" \"<<dp[2][1]<<endl;\n\tfor(int i=2;i<=n;i++){\n\t\tchar c;\n\t\tcin>>c>>x;\n\t\tif(c=='+'){\n\t\t\tdp[0][i]=max(dp[0][i-1],dp[1][i-1])+x;\n\t\t\tdp[1][i]=max(dp[1][i-1],dp[2][i-1])-x;\n\t\t\tdp[2][i]=dp[2][i-1]+x;\n\t\t}else{\n\t\t\tdp[0][i]=max(dp[0][i-1]-x,dp[1][i-1]-x);\n\t\t\tdp[1][i]=max({dp[0][i-1]-x,dp[1][i-1]+x,dp[2][i-1]+x});\n\t\t\tdp[2][i]=max(dp[1][i-1]+x,dp[2][i-1]-x);\n\t\t}\n\t//\tcout<<dp[0][i]<<\" \"<<dp[1][i]<<\" \"<<dp[2][i]<<endl;\n\t}\n\tcout<<max({dp[0][n],dp[1][n],dp[2][n]});\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n#define r(i,n) for(int i=0;i<n;i++)\nint a[100009],dp[100009][4];\nstring s[100009];\nint main(){\n  r(i,100009)r(j,4)dp[i][j]=-(1e8);\n  int ans,n;\n  cin>>n>>ans;n--;\n  r(i,n)cin>>s[i]>>a[i];\n  dp[0][0]=0;\n  for(int i=0;i<n;i++){\n    if(s[i]==\"+\"){\n      dp[i+1][0]=dp[i][0]+a[i];\n      dp[i+1][1]=dp[i][1]-a[i];\n      dp[i+1][2]=dp[i][2]+a[i];\n    }\n    else{\n      dp[i+1][0]=dp[i][0]-a[i];\n      dp[i+1][1]=max(dp[i][0]-a[i],dp[i][1]+a[i]);\n      dp[i+1][2]=max(dp[i][1]+a[i],dp[i][2]+a[i]);\n    }\n  }\n  cout<<ans+max(dp[n][0],max(dp[n][1],dp[n][2]))<<endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define int long long \n\nusing namespace std;\n\nint32_t main() {\n    int n; cin >> n;\n    int ans; cin >> ans;\n\n    vector<pair<char, int>> a;\n    for (int i = 1; i < n; ++i) {\n        char sgn; int val; cin >> sgn >> val;\n        a.emplace_back(sgn, val);\n    }\n\n    // Reduce until -\n    for (int i = 0; i <= n; ++i) {\n        if (i == n || a[i].first == '-') {\n            a.erase(a.begin(), a.begin() + i);\n            break;\n        } else {\n            ans += a[i].second;\n        }\n    }\n\n    if (a.empty()) {\n        cout << ans << endl;\n        return 0;\n    }\n    \n    // cerr << \"HERE\" << endl;    \n    n = a.size(); \n    ans -= a[0].second;\n    for (int i = 1; i <= n; ++i) {\n        if (i == n || a[i].first == '-') {\n            a.erase(a.begin(), a.begin() + i);\n            break;\n        } else {\n            ans -= a[i].second;\n        }\n    }\n    for (auto p : a)\n        ans += p.second;\n\n    cout << ans << endl;\n        \n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\n#define MAX_N 100005\nconst ll INF = (1LL<<60);\n\nll max(ll a,ll b,ll c){\n  return max(a,max(b,c));\n}\n\nint N;\nll A[MAX_N];\nll dp[MAX_N][3];\n\nint main(){\n  for(int i=0;i<MAX_N;i++)\n    for(int j=0;j<3;j++)\n      dp[i][j]=-INF;\n  cin>>N;\n  cin>>dp[0][0];\n  \n  for(int i=0;i<N-1;i++){\n    char ch;\n    ll x;\n    cin>>ch>>x;\n\n    if(ch=='+'){\n      dp[i+1][0]=dp[i][0]+x;\n      dp[i+1][1]=max(dp[i][1]-x,dp[i][2]-x);\n      dp[i+1][2]=dp[i][2]+x;\n    }else if(ch=='-'){\n      dp[i+1][0]=-INF;\n      dp[i+1][1]=max(dp[i][0]-x,dp[i][1]-x,dp[i][2]-x);\n      dp[i+1][2]=max(dp[i][1]+x,dp[i][2]+x);\n    }\n\n  }\n  cout<< max(dp[N-1][0], max(dp[N-1][1],dp[N-1][2])) <<endl;\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define int long long\n#define fi first\n#define se second\n#define PB push_back\nusing namespace std;\ntypedef pair<int, int> P1;\ntypedef pair<int, pair<int, int> > P2;\nstatic const int INF = 1ll<<60;\nstatic const int dx[] = { 1, -1, 0, 0, };\nstatic const int dy[] = { 0, 0, 1, -1 };\nstatic const int mod = 1000000007;\n\nint N;\nint A[100005];\nchar op[100005];\nint dp[100005][5];\n//    [i項目][i項目までに開いているかっこの数]\n\nint solve(){\n    for(int i=0;i<N;++i)for(int j=0;j<N;++j)dp[i][j]=-INF;\n    dp[0][0] = A[0];\n    for(int i=0;i<N-1;++i){\n        for(int j=0;j<=min(i,3ll);++j){\n            int t1 = pow(-1,j)*A[i+1];\n            //cout<<t1<<endl;\n            //cout<<i<<\" \"<<j<<endl;\n            if(op[i+1]=='+'){\n                dp[i+1][j] = max(dp[i][j]+t1,dp[i+1][j]);\n                if(j!=0)dp[i+1][j-1] = max(dp[i][j]+t1,dp[i+1][j-1]);\n            }\n            else {\n                dp[i+1][j] = max(dp[i][j]-t1,dp[i+1][j]);\n                dp[i+1][j+1] = max(dp[i][j]-t1,dp[i+1][j+1]);\n                if(j!=0)dp[i+1][j-1] = max(dp[i][j]-t1,dp[i+1][j-1]);\n            }\n            //cout<<i<<\" \"<<j<<endl;\n            //cout<<dp[i][j]<<\" \"<<dp[i+1][j]<<\" \"<<dp[i+1][j+1]<<endl;\n        }\n    }\n    int ans=-INF;\n    for(int i=0;i<N;++i)ans=max(dp[N-1][i],ans);\n    return ans;\n}\n\n\nsigned main(){\n    cin>>N;\n    op[0]='+';\n    for(int i=0;i<N;++i){\n        cin>>A[i];\n        if(i!=N-1)cin>>op[i+1];\n    }\n    cout<<solve()<<endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include \"bits/stdc++.h\"\nusing namespace std;\n\n#define int long long\n#define DBG 0\n#define dump(o) if(DBG){cerr<<#o<<\" \"<<o<<endl;}\n#define dumpc(o) if(DBG){cerr<<#o; for(auto &e:(o))cerr<<\" \"<<e;cerr<<endl;}\n#define rep(i,a,b) for(int i=(a);i<(b);i++)\n#define rrep(i,a,b) for(int i=(b)-1;i>=(a);i--)\n#define each(it,c) for(auto it=(c).begin();it!=(c).end();it++)\n#define all(c) c.begin(),c.end()\nconst int INF = sizeof(int) == sizeof(long long) ? 0x3f3f3f3f3f3f3f3fLL : 0x3f3f3f3f;\nconst int MOD = (int)(1e9 + 7);\n\n#define MAX_N 10\nint N;\nint A[MAX_N] = {};\nchar op[MAX_N] = {};\n\npair<int, int> ma(int l);\npair<int, int> mi(int l);\n\npair<int, int> mi(int l) {\n\tdump(\"mi\");\n\tint ret = A[l];\n\tint tmp = A[l];\n\tint min_index = l;\n\trep(i, l + 1, N) {\n\t\tif (op[i] == '-') {\n\t\t\tpair<int, int> res = ma(i);\n\t\t\ttmp -= res.first;\n\t\t\ti = res.second;\n\t\t}\n\t\telse {\n\t\t\ttmp += A[i];\n\t\t}\n\t\tif (tmp < ret) {\n\t\t\tret = tmp;\n\t\t\tmin_index = i;\n\t\t}\n\t\tdump(i);\n\t\tdump(tmp);\n\t\tdump(ret);\n\t}\n\treturn make_pair(ret, min_index);\n}\n\npair<int, int> ma(int l) {\n\tdump(\"ma\");\n\tint ret = A[l];\n\tint tmp = A[l];\n\tint max_index = l;\n\trep(i, l + 1, N) {\n\t\tif (op[i] == '-') {\n\t\t\tpair<int, int> res = mi(i);\n\t\t\ttmp -= res.first;\n\t\t\ti = res.second;\n\t\t}\n\t\telse {\n\t\t\ttmp += A[i];\n\t\t}\n\t\tif (tmp > ret) {\n\t\t\tret = tmp;\n\t\t\tmax_index = i;\n\t\t}\n\t\tdump(i);\n\t\tdump(tmp);\n\t\tdump(ret);\n\t}\n\treturn make_pair(ret, max_index);\n}\n\nint solve() {\n\tpair<int, int> res = ma(0);\n\tint ret = res.first;\n\twhile (res.second < N) {\n\t\tres = ma(res.second + 1);\n\t\tret += res.first;\n\t}\n\treturn ret;\n}\n\nsigned main() {\n\tcin >> N;\n\tcin >> A[0];\n\trep(i, 1, N)cin >> op[i] >> A[i];\n\tcout << solve() << endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\n#define int long long\n\n#define rep(i,n) for(int i=0;i<(n);i++)\n#define pb push_back\n#define all(v) (v).begin(),(v).end()\n#define fi first\n#define se second\ntypedef vector<int>vint;\ntypedef pair<int,int>pint;\ntypedef vector<pint>vpint;\n\ntemplate<typename A,typename B>inline void chmin(A &a,B b){if(a>b)a=b;}\ntemplate<typename A,typename B>inline void chmax(A &a,B b){if(a<b)a=b;}\n\nint N;\nint A[111111];\n\nint sumabs[111111];\nint sum[111111];\nint dp[111111];\nsigned main(){\n    cin>>N;\n    rep(i,N){\n        char op='+';\n        if(i)cin>>op;\n        cin>>A[i];\n        if(op=='-')A[i]*=-1;\n    }\n\n    rep(i,N)sumabs[i+1]=sumabs[i]+abs(A[i]);\n    rep(i,N)sum[i+1]=sum[i]+A[i];\n\n    vint pos;\n    rep(i,N)if(A[i]<0)pos.pb(i);\n\n    int ans=accumulate(A,A+N,0ll);\n\n    for(int i=0;i+1<pos.size();i++){\n        int x=pos[i];\n        int y=pos[i+1];\n        int tmp=sum[x+1];\n        tmp-=sum[y]-sum[x+1];\n        tmp+=sumabs[N]-sumabs[y];\n        chmax(ans,tmp);\n    }\n    cout<<ans<<endl;\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\nstruct _IO{_IO(){ios::sync_with_stdio(0);cin.tie(0);}}_io;\n\ntypedef long long ll;\ntypedef long double db;\ntypedef unsigned long long ull;\ntypedef vector<int> vi;\ntypedef pair<int, int> pi;\ntypedef tuple<int, int, int> t3;\ntypedef map<int, int> mi;\n#define fi first\n#define se second\n#define vt vector\n#define be begin()\n#define ed end()\n#define sz size()\n#define cl clear()\n#define pb push_back\n#define eb emplace_back\n#define is insert\n#define all(x) x.begin(), x.end()\n#define lb(v, x) lower_bound(v.begin(), v.end(), x)\n#define lbi(v, x) (lb(v, x) - v.begin())\n#define tp(t, x, y) t x, y; tie(x, y)\n#define tp3(t, x, y, z) t x, y, z; tie(x, y, z)\n#define mp make_pair\n#define mt make_tuple\n#define co const\n#define fc(x) for(int x = 1, _end = ri(); x <= _end; x++)\nvoid uni(vi &v) { sort(v.begin(), v.end()); v.erase(unique(v.begin(), v.end()), v.end()); }\n\ndb rd() { db x; cin >> x; return x; }\nll ri() { ll x; cin >> x; return x; }\nstring rs() { string s; cin >> s; return s; }\npi rpi() { pi x; cin >> x.fi >> x.se; return x; }\nvi rvi(int n, int f = 0) { vi v(n + f); for (int i = f; i < v.size(); i++) cin >> v[i]; return v; }\nvoid pr() {}; template <class T, class ...U> void pr(T x, U ...y) { cout << x << ' ', pr(y...); }\nvoid prl() { cout << '\\n'; }; template <class T, class ...U> void prl(T x, U ...y) { cout << x << ' ', prl(y...); }\nvoid pr(const vi &v, int f = 0) { for (int i = f; i < v.size(); i++) cout << v[i] << ' '; }\nvoid prl(const vi &v, int f = 0) { pr(v, f); cout << '\\n'; }\nvoid kk() { cerr << endl; }; template <class T, class ...U> void kk(T x, U ...y) { cerr << x << ' ', prl(y...); }\n\n#define rep(i, l, r) for (int i = (l); i < (r); ++i)\n#define per(i, l, r) for (int i = (l); i >= (r); --i)\n\nconst int N = 3e5 + 5, M = 1e9 + 7;\nint main() {\n  int n = ri();\n  ll lst = 0;\n  vt<ll> a;\n  rep(i, 0, n) {\n    int flg = 1;\n    if (i) flg = rs() == \"+\";\n    int x = ri();\n    if (flg) lst += x;\n    else a.pb(lst), a.pb(-x), lst = 0;\n  }\n  if (lst) a.pb(lst);\n  vt<ll> b(a.sz + 1);\n  rep(i, 0, a.sz) {\n    b[i+1] = b[i] + a[i];\n  }\n  ll ans = b[a.sz], sum = abs(a.back());\n  per(i, a.sz - 1, 1) {\n    if (a[i-1] > 0) sum += a[i-1];\n    else {\n      if (a[i] > 0) ans = max(ans, sum - 2 * a[i] + a[i-1] + b[i-1]);\n      else ans = max(ans, sum + a[i-1] + b[i-1]);\n      sum -= a[i-1];\n    }\n  }\n  prl(ans);\n}\n"
  },
  {
    "language": "C++",
    "code": "/// Kazuki Hoshino\n\n\n#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\ntypedef long double ld;\ntypedef vector<int> vi;\ntypedef pair<int,int> pi;\ntypedef pair<ll, ll> pll;\ntypedef vector<ll> vl;\ntypedef vector<pi> vpi;\n#define inf 10000000000000000\n#define mod 1000000007\n#define rep(i,a,b) for (int i = a; i <= b; i++)\n#define rep1(i, a, b) for(int i =a; i >=b; i--)\n#define f first\n#define ss second\n#define pb push_back\n#define all(c) (c).begin(),(c).end()\n#define mt make_tuple\n#define endl '\\n'\n\ntemplate<typename A,typename B>inline void chmin(A &a,B b){if(a>b)a=b;}\ntemplate<typename A,typename B>inline void chmax(A &a,B b){if(a<b)a=b;}\n\nll n , a[101010], dp[10101], sum[10101], x, pre, mn=-inf, t;\nbool pm[10101];\nchar ch;\n\nint main(){\nios::sync_with_stdio(0);\ncin.tie(0);\n\n//freopen(\"input.txt\",\"r\",stdin);\n//freopen(\"output.txt\",\"w\",stdout);\n\n\n    //cin >> t;\n\n//while(t--){\n\n    cin >> n >> x;\n    dp[0]=x;\n\n    n--;\n\n    rep(i, 0, n-1){\n        cin >> ch >> x;\n\n        pm[i]=ch!='+';\n\n        sum[i+1]=x;\n        a[i]=x;\n\n    }\n\n    rep(i,1,n){\n        sum[i+1]+=sum[i];\n    }\n\n    pre=-1;\n\n    rep(i,0,n-1){\n\n        if(pm[i] && pre!=-1){\n            chmax(mn,dp[pre]-(sum[i]-sum[pre])-sum[i]);\n        }\n        if(!pm[i]){\n            dp[i+1]=max(dp[i],mn+sum[i])+a[i];\n        }\n        else{\n            dp[i+1]=max(dp[i]-a[i],mn+sum[i]+a[i]);\n            pre=i;\n        }\n    }\n    cout<<dp[n]<<endl;\n\n//}\n\n\nreturn 0;\n}\n///....\n"
  },
  {
    "language": "C++",
    "code": "//#include \"IntMod.h\"\n//typedef IntMod<1000000007> MInt;\n\n//#include \"Union_Find.h\"\n\n#include <cstdio>\n#include <iostream>\n#include <string>\n#include <vector>\n#include <utility>\n#include <algorithm>\n#include <functional>\n#include <cmath>\n#include <stack>\n#include <queue>\n#include <set>\n#include <map>\n//#include <unordered_set>\n//#include <unordered_map>\n#include <iomanip>\n#include <sstream>\n\nusing namespace std;\n#define REP(i,a,n) for(int i = a; i < n; ++i)\n#define REPM(i,n,a) for(int i = n - 1; i >= a; --i)\n#define EPS 0.0001\n#define INF 0x3FFFFFFF\n#define INFD 1.0e+308\ntypedef long long LL;\ntypedef unsigned long long ULL;\n\ntypedef pair<LL, LL> PP;\n\nLL N;\nLL A[100001];\nchar op[100001];\nLL dp[3][100001];\n\nint main() {\n\tcin >> N;\n\top[0] = '+';\n\tREP(i, 0, N) {\n\t\tif (i != 0) {\n\t\t\tcin >> op[i];\n\t\t}\n\t\tcin >> A[i];\n\t}\n\n\tdp[0][0] = A[0];\n\tdp[1][0] = -INF;\n\tdp[2][0] = -INF;\n\tREP(i, 1, N) {\n\t\tif (op[i] == '-') {\n\t\t\tdp[0][i] = max(max(dp[0][i - 1] - A[i], dp[1][i - 1] + A[i]), dp[2][i - 1] - A[i]);\n\t\t\tdp[1][i] = max(max(dp[1][i - 1] + A[i], dp[2][i - 1] - A[i]), dp[0][i - 1] - A[i]);\n\t\t\tdp[2][i] = max(dp[2][i - 1] - A[i], dp[1][i - 1] + A[i]);\n\t\t} else {\n\t\t\tdp[0][i] = max(dp[0][i - 1] + A[i], dp[1][i - 1] - A[i]);\n\t\t\tdp[1][i] = max(dp[1][i - 1] - A[i], dp[2][i - 1] + A[i]);\n\t\t\tdp[2][i] = dp[2][i - 1] + A[i];\n\t\t}\n\t}\n\tcout << max(max(dp[0][N - 1], dp[0][N - 1]), dp[0][N - 1]) << endl;\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define time Time\n#define pii pair<int,int>    \n#define x first    \n#define y second \n#define N 10000005   \n#define pb(x) push_back(x)\n#define mp(x,y) make_pair((x),(y))    \n#define sqr(x) ((x)*(x))\ntypedef long long LL;  \nusing namespace std;\nconst int mod=1e9+7;\nint main(){\n\tint n;\n\twhile(scanf(\"%d\",&n)!=EOF){\n\t\tlong long \tint a[100005];\n\t\tint op[100005];\n\t\top[0]=1;\n\t\tscanf(\"%lld\",&a[0]);\n\t\tfor(int i=1;i<n;i++){\n\t\t\tchar c;\n\t\t\twhile(scanf(\"%c\",&c)&&c!='+'&&c!='-');\n\t\t\tif(c=='+')\n\t\t\top[i]=1;\n\t\t\telse\n\t\t\top[i]=0;\n\t\t\tscanf(\"%lld\",&a[i]);\n\t\t} \n\t\tlong long int sum=0;\n\t\tfor(int i=0;i<n;i++){\n\t\t\tsum+=a[i];\n\t\t}\n\t\tlong long int ans=1e18;\n\t\tint i;\n\t\tfor(i=0;op[i]==1;i++);\n\t\tlong long int ssum=0,sssum=0;\n\t\tfor(;i<n;i++)\n\t\t{\n\t\t\tssum+=a[i];\n\t\t\tif(op[i]==0)\n\t\t\tsssum+=a[i];\n\t\t\tif(op[i+1]==0||i+1==n)\n\t\t\tans=min(ssum+sssum,ans),ssum=0;\n\t\t\tprintf(\"%lld\\n\",sssum);\n\t\t}\n\t\tans=min(sssum,ans);\n\t\tprintf(\"%lld\\n\",sum-2*ans);\n\t}\n}\n/*\n\n 1 - 1 + 2 + 10 - 2 + 3  + 5\n 1  - 2  - 3  \n*/\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\ntypedef long long lint;\ntypedef long double louble;\n\n#define so(a) ((int)((a).size()))\n\ntemplate<typename T1,typename T2> inline T1 max(T1 a,T2 b){return a<b?b:a;}\ntemplate<typename T1,typename T2> inline T1 min(T1 a,T2 b){return a<b?a:b;}\ntemplate<typename T1,typename T2> inline T1 gmax(T1 &a,T2 b){return a=a<b?b:a;}\ntemplate<typename T1,typename T2> inline T1 gmin(T1 &a,T2 b){return a=a<b?a:b;}\n\nconst char lf = '\\n';\n\nnamespace ae86\n{\n\tconst int bufl = 1 << 15;\n\n\tchar buf[bufl],*s=buf,*t=buf;\n\n\tinline int fetch()\n\t{\n\t\tif(s==t){t=(s=buf)+fread(buf,1,bufl,stdin);if(s==t)return EOF;}\n\t\treturn *s++;\n\t}\n\n\tinline int ty()\n\t{\n\t\tint a=0;int b=1,c=fetch();\n\t\twhile(!isdigit(c))b^=c=='-',c=fetch();\n\t\twhile(isdigit(c))a=a*10+c-48,c=fetch();\n\t\treturn b?a:-a;\n\t}\n\n\tinline int tc()\n\t{\n\t\tint c=fetch();\n\t\twhile(c<=32 && c!=EOF)c=fetch();\n\t\treturn c;\n\t}\n}\nusing ae86::ty;\nusing ae86::tc;\n\nconst int _ = 100007;\nconst lint linf = 0x3f3f3f3f3f3f3f3f;\n\nint n,dir[_]={0};lint val[_]={0};\nlint f[_][3];\n\nint main()\n{\n\tios::sync_with_stdio(0),cout.tie(nullptr);\n\n\tn=ty(),dir[1]=1,val[1]=ty();\n\tfor(int i=2;i<=n;i++)dir[i]=tc()=='+',val[i]=ty();\n\tn+=2;\n\t\n\tmemset(f,-64,sizeof(f));\n\tf[0][0]=0;\n\tfor(int i=0;i<n;i++)\n\t{\n\t\tif(dir[i+1])\n\t\t{\n\t\t\tgmax(f[i+1][0],f[i][0]+val[i+1]);\n\t\t\tgmax(f[i+1][1],f[i][1]-val[i+1]);\n\t\t\tgmax(f[i+1][2],f[i][2]+val[i+1]);\n\t\t\t\n\t\t\tgmax(f[i+1][0],f[i][1]+val[i+1]);\n\t\t\tgmax(f[i+1][1],f[i][2]-val[i+1]);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tgmax(f[i+1][0],f[i][0]-val[i+1]);\n\t\t\tgmax(f[i+1][1],f[i][1]+val[i+1]);\n\t\t\tgmax(f[i+1][2],f[i][2]-val[i+1]);\n\n\t\t\tgmax(f[i+1][1],f[i][0]-val[i+1]);\n\t\t\tgmax(f[i+1][2],f[i][1]+val[i+1]);\n\n\t\t\tgmax(f[i+1][0],f[i][1]-val[i+1]);\n\t\t\tgmax(f[i+1][1],f[i][2]+val[i+1]);\n\t\t}\n\t}\n\n\tcout<<f[n][0]<<lf;\n\t\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "// #include {{{\n#include <iostream>\n#include <cassert>\n#include <cstring>\n#include <cstdlib>\n#include <cstdio>\n#include <cctype>\n#include <cmath>\n#include <ctime>\n#include <queue>\n#include <set>\n#include <map>\n#include <stack>\n#include <string>\n#include <bitset>\n#include <vector>\n#include <complex>\n#include <algorithm>\nusing namespace std;\n// }}}\n// #define {{{\ntypedef long long ll;\ntypedef double db;\ntypedef pair<int,int> pii;\ntypedef vector<int> vi;\n#define de(x) cout << #x << \"=\" << x << endl\n#define rep(i,a,b) for(int i=a;i<(b);++i)\n#define per(i,a,b) for(int i=(b)-1;i>=(a);--i)\n#define all(x) (x).begin(),(x).end()\n#define sz(x) (int)(x).size()\n#define mp make_pair\n#define pb push_back\n#define fi first\n#define se second\n// }}}\n\n\nconst int N = 1e5 + 10;\nconst ll inf = 1e18;\nint n , a[N] , op[N];\nll f[N][3];\nchar s[10];\n\nint main(){\n  scanf(\"%d\",&n);\n  rep(i,1,n+1) {\n    if(i==1) op[i]=0;\n    else {\n      scanf(\"%s\",s);\n      op[i]=s[0]=='-';\n    }\n    scanf(\"%d\",a+i);\n  }\n  rep(i,0,n+1) rep(j,0,3) f[i][j]=-inf;\n  f[0][0]=0;\n  rep(i,0,n+1) per(j,0,3) {\n    if(j) f[i][j-1]=max(f[i][j-1],f[i][j]);\n    if(i!=n) {\n      ll t=f[i][j]+a[i+1]*((j+op[i+1])&1?-1:1);\n      f[i+1][j]=max(f[i+1][j],t);\n      if(op[i+1]==1&&j!=2)\n        f[i+1][j+1]=max(f[i+1][j+1],t);\n    }\n  }\n  printf(\"%lld\\n\",f[n][0]);\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstdio>\n#include <map>\n#include <set>\n#include <queue>\n#include <vector>\n#include <cstring>\n#include <cstdlib>\n#include <algorithm>\n#define rep(i,a,b) for(int i = a; i <= b; i++)\n#define dep(i,a,b) for(int i = a; i >= b; i--) \n#define Rep(i,a) for(int i = 0; i < a; i++)\n#define pb(a) push_back(a)\n#define mp(a,b) make_pair(a,b)\n#define ab(x) ((x) < 0 ? -(x) : (x))\nusing namespace std;\ntypedef long long LL;\ntypedef map<int, int>::iterator mit;\ntypedef set<int ,int>::iterator sit;\nconst int N = 100010;\nchar c;\nint a[N]; bool b[N];\nint main() {\n\tint n; scanf(\"%d\",&n); bool flag = false;\n\trep(i,1,n) {\n\t\tscanf(\"%d\",&a[i]);\n\t\tif (i < n) {\n\t\t\tc = getchar(); while (c != '-' && c != '+') c = getchar();\n\t\t\tif (c == '-') b[i + 1] = true; else b[i + 1] = false;\n\t\t}\n\t}\n\tLL ans = 0, sum = a[1];\n\trep(i,2,n) if (b[i]) {\n\t\tif (!flag) sum -= a[i], ans += sum, flag = true, sum = 0;\n\t\telse ans += ab(sum), sum = a[i];\n\t} else sum += a[i];\n\tif (flag) ans += ab(sum); else ans += sum;\n\tcout <<ans<<endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\nconst int N=100005;\n#define ll long long\nll f[N][3],x;char s;\nint main (){\n\tint n;cin>>n;\n\tcin>>f[0][0];f[0][1]=f[0][2]=-1ll<<60;\n\tfor (int i=1;i<n;i++){\n\t\tcin>>s>>x;\n\t\tif (s=='+'){\n\t\t\tf[i][0]=max(max(f[i-1][0],f[i-1][1]),f[i-1][2])+x;\n\t\t\tf[i][1]=max(f[i-1][1],f[i-1][2])-x;\n\t\t\tf[i][2]=f[i-1][2]+x;\n\t\t}else{\n\t\t\tf[i][0]=max(max(f[i-1][0],f[i-1][1]),f[i-1][2])-x;\n\t\t\tf[i][1]=max(max(f[i-1][1],f[i-1][2])+x,f[i-1][0]-x);\n\t\t\tf[i][1]=max(max(f[i-1][1],f[i-1][2])-x,f[i][1]);\n\t\t\tf[i][2]=max(max(f[i-1][2]-x,f[i-1][2]+x),f[i-1][1]+x);\n\t\t}\n\t}\n\tprintf (\"%lld\",max(max(f[n-1][0],f[n-1][1]),f[n-1][2]));\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <cstring>\n#include <cmath>\n#include <algorithm>\n#include <string>\n#include <iostream>\n#include <stdlib.h>\n\nusing namespace std;\n\n\nint main()\n{\n  int i,j,n;  cin >> n;\n  char op[100001]={};\n  long long int num[100001]={};\n  op[0] = '+';  cin >> num[0];\n  for(i=1;i<n;i++){\n    cin >> op[i] >> num[i];\n  }\n\n  long long int dp[3];\n  dp[0] = num[0];\n  dp[1] = dp[2] = - (1 << 16);\n\n  for(i=1;i<n;i++){\n    if(op[i] == '+'){\n      dp[0] = max(dp[0],dp[1]) + num[i];\n      dp[1] = max(dp[1],dp[2]) - num[i];\n      dp[2] += num[i];\n    }\n    else{\n      dp[2] = max(dp[1],dp[2]) + num[i];\n      dp[1] = max(dp[1],dp[0]) - num[i];\n      dp[0] -= num[i];\n    }\n  }\n\n  long long int ans = max(dp[0],dp[1]);\n  ans = max(ans,dp[2]);\n  cout << ans << endl;\n\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define inf 100000000000000ll\nusing namespace std;\n\nint read();\n\nint n;\nlong long f[100005][3];\nvoid chmax(long long &x, long long y) { x = x > y ? x : y; }\n\nint main() {\n    n = read();\n    f[0][0] = 0, f[0][1] = f[0][2] = -inf;\n    for (int i = 1, x; i <= n; ++i) {\n        x = read();\n        {\n            f[i][0] = max(f[i - 1][0], f[i - 1][1]),\n            f[i][1] = max(f[i - 1][1], f[i - 1][2]);\n            f[i][2] = f[i - 1][2];\n        }\n        f[i][0] += x, f[i][1] -= x, f[i][2] += x;\n        if (x < 0) chmax(f[i][2], f[i][1]), chmax(f[i][1], f[i][0]);\n    }\n    printf(\"%lld\\n\", max(f[n][0], max(f[n][1], f[n][2])));\n    return 0;\n}\n\nint read() {\n    int x = 0, f = 1;\n    char c = getchar();\n    while (c < '0' || c > '9') f = (c == '-') ? -1 : f, c = getchar();\n    while (c >= '0' && c <= '9') x = x * 10 + c - '0', c = getchar();\n    return x * f;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nconst long long INF = 0x3f3f3f3f3f3f3f3f;\n\nint a[100010], op[100010];\nchar buf[5];\nlong long dp[100010][3];\n\nint main () {\n//\tfreopen(\"data.in\", \"r\", stdin);\n//\tfreopen(\"my.out\", \"w\", stdout);\n\tint n; scanf(\"%d\", &n);\n\tscanf(\"%d\", &a[1]), op[1] = 0;\n\tfor (int i = 2; i <= n; i++) {\n\t\tscanf(\"%s\", buf);\n\t\top[i] = buf[0] == '-' ? 1 : 0;\n\t\tscanf(\"%d\", &a[i]);\n\t}\n\tdp[0][0] = 0, dp[0][1] = -INF, dp[0][2] = -INF;\n\tfor (int i = 1; i <= n; i++) {\n\t\tdp[i][0] = dp[i][1] = dp[i][2] = -INF;\n\t\t// not change\n\t\tdp[i][0] = max(dp[i][0], dp[i - 1][0] + (op[i] ? -a[i] : a[i]));\n\t\tdp[i][1] = max(dp[i][1], dp[i - 1][1] + (op[i] ? a[i] : -a[i]));\n\t\tdp[i][2] = max(dp[i][2], dp[i - 1][2] + (op[i] ? -a[i] : a[i]));\n\t\t// change\n\t\tif (op[i]) {\n\t\t\tdp[i][1] = max(dp[i][1], dp[i - 1][0] - a[i]);\n\t\t\tdp[i][2] = max(dp[i][2], dp[i - 1][1] + a[i]);\n\t\t}\n\t\t// flush\n\t\tdp[i][1] = max(dp[i][1], dp[i][2]), dp[i][0] = max(dp[i][0], dp[i][1]);\n\t}\n\tprintf(\"%lld\\n\", dp[n][0]);\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<algorithm>\n#include<cmath>\n#define maxn 200010\nusing namespace std;\ntypedef long long ll;\nint read()\n{\n    int x=0,f=1;\n    char ch=getchar();\n    while(ch-'0'<0||ch-'0'>9){if(ch=='-') f=-1;ch=getchar();}\n    while(ch-'0'>=0&&ch-'0'<=9){x=x*10+ch-'0';ch=getchar();}\n    return x*f;\n}\nint T,n;\nchar op[200010];\nll a[maxn];\nint top;\nvoid merge()\n{\n    top=0;\n    a[++top]=a[1];\n    op[0]='+';\n    for(int i=2;i<=n;i++)\n    {\n        if(op[i-1]=='+'&&op[top-1]=='+')  a[top]+=a[i];\n        else{\n            op[top]=op[i-1];\n            a[++top]=a[i];\n        }\n    }\n    n=top;\n}\nll sum[maxn],f[maxn];\nint main()\n{\n        n=read();\n        for(int i=1;i<=2*n-1;i++)\n        {\n            if(i&1)  a[(i+1)/2]=read();\n            else{\n                char s[3];\n                scanf(\"%s\",s);\n                op[i/2]=s[0];\n            }\n        }\n        merge();\n        sum[n+1]=0;\n        for(int i=n;i>=1;i--)  sum[i]=sum[i+1]+a[i];\n        f[n]=a[n];\n        for(int i=n-1;i>=1;i--)\n        {\n            if(op[i]=='+')  f[i]=f[i+1]+a[i];\n            else{\n                if(i==n-1)\n                {\n                    f[i]=a[i]-a[i+1];\n                    continue;\n                }\n                else{\n                    if(op[i+1]=='-')  f[i]=a[i]-a[i+1]+sum[i+2];\n                    else              f[i]=max(a[i]-a[i+1]+f[i+2],a[i]-a[i+1]-a[i+2]+sum[i+3]);\n                }\n            }\n        }\n        printf(\"%lld\\n\",f[1]);\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\n#if MYDEBUG\n#include \"lib/cp_debug.hpp\"\n#else\n#define DBG(...) ;\n#endif\n#if __cplusplus <= 201402L\ntemplate <typename T>\nT gcd(T a, T b) { return ((a % b == 0) ? b : gcd(b, a % b)); }\ntemplate <typename T>\nT lcm(T a, T b) { return a / gcd(a, b) * b; }\n#endif\nusing LL = long long;\nconstexpr LL LINF = 334ll << 53;\nconstexpr int INF = 15 << 26;\nconstexpr LL MOD = 1E9 + 7;\n\nnamespace Problem {\nusing namespace std;\n\nclass Solver {\n public:\n  int n;\n  vector<LL> a;\n  vector<int> op;\n  vector<vector<LL>> dp;\n  Solver(LL n) : n(n), a(n), op(n), dp(n, vector<LL>(2)){};\n\n  void solve() {\n    op[0] = 1;\n    for (int i = 0; i < n; ++i) {\n      cin >> a[i];\n      if (i < n - 1) {\n        char c;\n        cin >> c;\n        op[i + 1] = (c == '+' ? 1 : -1);\n      }\n    }\n    int cumsum = 0;\n    dp[0][0] = a[0];\n    dp[0][1] = -LINF;\n    for (int i = 1; i < n; ++i) {\n      if (op[i - 1] == 1) {\n        dp[i][0] = max(dp[i - 1][0], dp[i - 1][1]) + a[i] * op[i];\n        if (cumsum < 0)\n          dp[i][1] = max(dp[i - 1][0], dp[i - 1][1]) - a[i] * op[i];\n        else\n          dp[i][1] = dp[i - 1][1] - a[i] * op[i];\n      } else {\n        dp[i][0] = max(dp[i - 1][0], dp[i - 1][1]) + a[i] * op[i];\n        dp[i][1] = max(dp[i - 1][0], dp[i - 1][1]) - a[i] * op[i];\n      }\n      cumsum += op[i];\n    }\n    DBG(dp)\n    cout << max(dp[n - 1][0], dp[n - 1][1]) << endl;\n  }\n};\n\n}  // namespace Problem\n\nint main() {\n  std::cin.tie(0);\n  std::ios_base::sync_with_stdio(false);\n  // std::cout << std::fixed << std::setprecision(12);\n  long long n = 0;\n  std::cin >> n;\n\n  Problem::Solver sol(n);\n  sol.solve();\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\ntypedef long long ll;\n\nint N;\nchar C;\nll dp[100010][5] = {0};\nll A;\n\nint main()\n{\n    scanf(\"%d%lld\",&N,&A);\n    for(int i = 0; i < N; i++)\n    {\n        for(int j = 0; j < 3; j++)\n        {\n            dp[i][j] = -1 * 1000000000000000;\n        }\n    }\n    dp[0][0] = A;\n    for(int i = 1; i < N; i++)\n    {\n        scanf(\" %c%d\",&C,&A);\n        if(C == '+')\n        {\n            dp[i][2] = dp[i - 1][2] + A;\n            dp[i][1] = max(dp[i - 1][1] - A,dp[i - 1][2] + A);\n            dp[i][0] = max(dp[i - 1][0] + A,max(dp[i - 1][1] - A,dp[i - 1][2] + A));\n        }\n        else\n        {\n            dp[i][2] = dp[i - 1][1] + A;\n            dp[i][0] = dp[i][1] = max(dp[i - 1][1] + A,max(dp[i - 1][0] - A,dp[i - 1][2] - A));\n        }\n    }\n    printf(\"%lld\\n\",max(dp[N - 1][0],max(dp[N - 1][1],dp[N - 1][2])));\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n#define LL long long\nconst int N = 200000;\nLL ai[N], bi[N], all, ans;\nstring opt;\nint n, m;\nint main()\n{\n    cin >> n;\n    for (int i = 1; i <= n; ++ i)\n    {\n        int a;\n        if (i == 1) opt = \"+\"; else cin >> opt;\n        cin >> a; all += a;\n        if (opt == \"-\") ai[++ m] = a;\n        else bi[m] += a;\n    }\n    if (m == 0) ans = all;\n    for (int i = 1; i <= m; ++ i)\n    {\n        all -= (ai[i] + bi[i]);\n        ans = max(ans, all - ai[i] - bi[i]);\n        all += (-ai[i] + bi[i]);\n    }\n    cout << ans << endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\nconst int S=(1<<20)+5;\nchar buf[S],*H,*T;\ninline char Get()\n{\n    if(H==T) T=(H=buf)+fread(buf,1,S,stdin);\n    if(H==T) return -1;return *H++;\n}\ninline int read()\n{\n    int x=0;char c=Get();\n    while(!isdigit(c)) c=Get();\n    while(isdigit(c)) x=x*10+c-'0',c=Get();\n    return x;\n}\ninline int readopt()\n{\n    char c=Get();\n    while(c!='+'&&c!='-') c=Get();\n    return c;\n}\n\ntypedef long long LL;\nconst int N=100010;\nint num[N],n,k;\nchar opt[N];\nLL f[2][3];\n\nint main()\n{\n    n=read();\n    num[0]=read();\n    for(int i=1;i<n;i++)\n    {\n        opt[i]=readopt();\n        num[i]=read();\n    }\n    f[k=0][0]=num[0];\n    f[0][1]=f[0][2]=-(1ll<<60);\n    for(int i=1;i<n;i++,k^=1)\n    {\n        if(opt[i]=='+')\n        {\n            f[k^1][0]=max(max(f[k][0],f[k][1]),f[k][2])+num[i];  //原地转移 或 拆1/2个括号\n            f[k^1][1]=max(f[k][1],f[k][2])-num[i];  //原地转移 或 拆1个括号\n            f[k^1][2]=f[k][2]+num[i];  //原地转移\n        }\n        else\n        {\n            f[k^1][0]=max(max(f[k][0],f[k][1]),f[k][2])-num[i];  //原地转移 或 拆1/2个括号\n            f[k^1][1]=max(max(f[k][1],f[k][2])+num[i],f[k][0]-num[i]);  //原地转移 或 拆1个括号 或 添1个括号\n            f[k^1][2]=max(f[k][2]-num[i],f[k][1]+num[i]);  //原地转移 或 添1个括号\n        }\n    }\n    int ans=max(max(f[k][0],f[k][1]),f[k][2]);\n    printf(\"%d\\n\",ans);\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\nconst int S=(1<<20)+5;\nchar buf[S],*H,*T;\ninline char Get()\n{\n    if(H==T) T=(H=buf)+fread(buf,1,S,stdin);\n    if(H==T) return -1;return *H++;\n}\ninline int read()\n{\n    int x=0;char c=Get();\n    while(!isdigit(c)) c=Get();\n    while(isdigit(c)) x=x*10+c-'0',c=Get();\n    return x;\n}\ninline int readopt()\n{\n    char c=Get();\n    while(c!='+'&&c!='-') c=Get();\n    return c;\n}\n\ntypedef long long LL;\nint num,n,k;\nchar opt;\nLL f[2][3];\n\ninline LL mymax(const LL &x,const LL &y){return x>y?x:y;}\n\nint main()\n{\n    n=read();\n    f[k=0][0]=read();\n    f[0][1]=f[0][2]=-(1ll<<60);\n    for(int i=1;i<n;i++,k^=1)\n    {\n        opt=readopt();num=read();\n        if(opt=='+')\n        {\n            f[k^1][0]=mymax(mymax(f[k][0],f[k][1]),f[k][2])+num;  //原地转移 或 拆1/2个括号\n            f[k^1][1]=mymax(f[k][1],f[k][2])-num;  //原地转移 或 拆1个括号\n            f[k^1][2]=f[k][2]+num;  //原地转移\n        }\n        else\n        {\n            f[k^1][0]=mymax(mymax(f[k][0],f[k][1]),f[k][2])-num;  //原地转移 或 拆1/2个括号\n            f[k^1][1]=mymax(mymax(f[k][1],f[k][2])+num,f[k][0]-num);  //原地转移 或 拆1个括号 或 添1个括号\n            f[k^1][1]=mymax(mymax(f[k][1]-num,f[k][2]-num),f[k^1][1]);  //拆1/2个括号又添1个括号\n            f[k^1][2]=mymax(f[k][2]-num,f[k][1]+num);  //原地转移 或 添1个括号\n            f[k^1][2]=mymax(f[k][2]+num,f[k^1][2]);  //拆1个括号又添1个括号\n        }\n    }\n    LL ans=mymax(mymax(f[k][0],f[k][1]),f[k][2]);\n    printf(\"%lld\\n\",ans);\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n#include <cmath>\n#include <stdio.h>\n#include <stdlib.h>\n#include <vector>\n#include <map>\n#include <queue>\n#include <set>\n#include <string>\n#include <string.h>\n#include <stack>\n#include <assert.h>\n#define Endl endl\n#define mp make_pair\n#define ll long long \n#define pii pair<int,int>\n#define pll pair<ll,ll>\n#define over(A) {cout<<A<<endl;exit(0);}\n#define all(A) A.begin(),A.end()\n#define ceil(a,b) ((a-1)/b+1)\n#define srand() mt19937 rng(chrono::steady_clock::now().time_since_epoch().count());\n#define rand(l,r) uniform_int_distribution<int>(l,r)(rng)\ntypedef unsigned long long ull;\nconst int inf=1039074182;\nusing namespace std;\nint n;\nint a[100005];\nvector <ll> vec;\nvector <int> pos;\nvector <bool> b;\nll sumabs[100005];\n\nint main()\n{\n//\tfreopen(\"input.txt\",\"r\",stdin);\n\tcin>>n;\n\tchar x;\n\tcin>>a[0];\n\tll res=a[0];\n\tfor(int i=1;i<n;i++)\n\t{\n\t\twhile(x!='+' && x!='-') x=getchar();\n\t\tscanf(\"%d\",a+i);\n\t\tif(x=='-') a[i]=-a[i];\n\t\tx=getchar();\n\t\tres+=a[i];\n\t}\n\tfor(int i=0;i<n;)\n\t{\n\t\tll sum=0;\n\t\twhile(a[i]>0 && i<n)\n\t\t{\n\t\t\tsum+=a[i];\n\t\t\ti++;\n\t\t}\n\t\tvec.push_back(sum);\n\t\twhile(a[i]<0 && i<n)\n\t\t{\n\t\t\tvec.push_back(a[i]);\n\t\t\ti++;\n\t\t}\n\t}\n\twhile(vec.back()==0) vec.pop_back();\n\tn=vec.size();\n\tmemset(a,0,sizeof(a));\n\tmemset(sumabs,0,sizeof(sumabs));\n\tfor(int i=0;i<n;i++)\n\t{\n\t\ta[i]=vec[i];\n\t}\n\tsumabs[n]=0;\n\tfor(int i=n-1;i>=0;i--)\n\t{\n\t\tsumabs[i]=sumabs[i+1]+abs(a[i]);\n\t}\n\tll now=0;\n\tfor(int i=0;i<n;i++)\n\t{\n\t\tnow+=a[i];\n\t\tif(a[i]<0)\n\t\t{\n\t\t\tres=max(res,now-a[i+1]+sumabs[i+2]);\n\t\t}\n//\t\tcout<<now<<' '<<a[i+1]<<' '<<sumabs[i+2]<<endl;\n\t}\n\tcout<<res<<endl;\n//\tll res=0;\n//\tfor(int i=0;i<n;i++)\n//\t{\n//\t\tif(vec[i]>0) pos.push_back(i);\n//\t}\n//\tint nn;\n//\tfor(int i=0;i<n-1;i++)\n//\t{\n//\t\tif(vec[i]<0 && vec[i+1]<0)\n//\t\t{\n//\t\t\tnn=i;\n//\t\t\tbreak;\n//\t\t}\n//\t}\n//\t\n//\tll res=0;\n//\tfor(int i=0;i<pos.size();i++)\n//\t{\n//\t\tint p=pos[i];\n//\t\tbool tb=false;\n//\t\tif(p!=0 && p!=n-1)\n//\t\t{\n//\t\t\tif(-vec[p+1]>vec[p])\n//\t\t\t{\n//\t\t\t\ttb=true;\n//\t\t\t}\n//\t\t}\n//\t\tb.push_back(tb);\n//\t}\n//\tfor(int i=0;i<n;i++)\n//\t{\n//\t\tcout<<vec[i]<<' ';\n//\t}\n//\tcout<<endl;\n//\tint l=0;\n//\tfor(int i=0;i<pos.size();i++)\n//\t{\n//\t\tll block=0;\n//\t\tfor(int j=pos[i]+2;j<(i==(int)pos.size()-1?n:pos[i+1]);j++)\n//\t\t{\n//\t\t\tblock+=abs(a[j]);\n//\t\t}\n//\t\tif(i==(int)pos.size()-1 && pos[i]==n-1)\n//\t\t{\n//\t\t\tblock+=abs(a[pos[i]]);\n//\t\t}\n//\t\telse\n//\t\t{\n//\t\t\tif(!b[i]) block+=a[pos[i]]+a[pos[i]+1];\n//\t\t\telse block+=-a[pos[i]]-a[pos[i]+1];\n//\t\t}\n//\t\tres+=block;\n//\t\tcout<<i<<' '<<block<<endl;\n//\t}\n//\tcout<<res<<endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n#include <cmath>\n#include <stdio.h>\n#include <stdlib.h>\n#include <vector>\n#include <map>\n#include <queue>\n#include <set>\n#include <string>\n#include <string.h>\n#include <stack>\n#include <assert.h>\n#define Endl endl\n#define mp make_pair\n#define ll long long \n#define pii pair<int,int>\n#define pll pair<ll,ll>\n#define over(A) {cout<<A<<endl;exit(0);}\n#define all(A) A.begin(),A.end()\n#define ceil(a,b) ((a-1)/b+1)\n#define srand() mt19937 rng(chrono::steady_clock::now().time_since_epoch().count());\n#define rand(l,r) uniform_int_distribution<int>(l,r)(rng)\ntypedef unsigned long long ull;\nconst int inf=1039074182;\nusing namespace std;\nint n;\nint a[100005];\nvector <ll> vec;\nvector <int> pos;\nvector <bool> b;\nint sumabs[100005];\n\nint main()\n{\n//\tfreopen(\"input.txt\",\"r\",stdin);\n\tcin>>n;\n\tchar x;\n\tcin>>a[0];\n\tfor(int i=1;i<n;i++)\n\t{\n\t\twhile(x!='+' && x!='-') x=getchar();\n\t\tscanf(\"%d\",a+i);\n\t\tif(x=='-') a[i]=-a[i];\n\t\tx=getchar();\n\t}\n\tsumabs[n]=0;\n\tfor(int i=n-1;i>=0;i--)\n\t{\n\t\tsumabs[i]=sumabs[i+1]+abs(a[i]);\n\t}\n\tll res=-1LL*inf*inf;\n\tll now=0;\n\tfor(int i=0;i<n;i++)\n\t{\n\t\tnow+=a[i];\n\t\tif(a[i]<0)\n\t\t{\n\t\t\tres=max(res,now-a[i+1]+sumabs[i+2]);\n\t\t}\n//\t\tcout<<now<<' '<<a[i+1]<<' '<<sumabs[i+2]<<endl;\n\t}\n\tcout<<res<<endl;\n//\tfor(int i=0;i<n;)\n//\t{\n//\t\tll sum=0;\n//\t\twhile(a[i]>0 && i<n)\n//\t\t{\n//\t\t\tsum+=a[i];\n//\t\t\ti++;\n//\t\t}\n//\t\tvec.push_back(sum);\n//\t\twhile(a[i]<0 && i<n)\n//\t\t{\n//\t\t\tvec.push_back(a[i]);\n//\t\t\ti++;\n//\t\t}\n//\t}\n//\twhile(vec.back()==0) vec.pop_back();\n//\tn=vec.size();\n//\tll res=0;\n//\tfor(int i=0;i<n;i++)\n//\t{\n//\t\tif(vec[i]>0) pos.push_back(i);\n//\t}\n//\tint nn;\n//\tfor(int i=0;i<n-1;i++)\n//\t{\n//\t\tif(vec[i]<0 && vec[i+1]<0)\n//\t\t{\n//\t\t\tnn=i;\n//\t\t\tbreak;\n//\t\t}\n//\t}\n//\t\n//\tll res=0;\n//\tfor(int i=0;i<pos.size();i++)\n//\t{\n//\t\tint p=pos[i];\n//\t\tbool tb=false;\n//\t\tif(p!=0 && p!=n-1)\n//\t\t{\n//\t\t\tif(-vec[p+1]>vec[p])\n//\t\t\t{\n//\t\t\t\ttb=true;\n//\t\t\t}\n//\t\t}\n//\t\tb.push_back(tb);\n//\t}\n//\tfor(int i=0;i<n;i++)\n//\t{\n//\t\tcout<<vec[i]<<' ';\n//\t}\n//\tcout<<endl;\n//\tint l=0;\n//\tfor(int i=0;i<pos.size();i++)\n//\t{\n//\t\tll block=0;\n//\t\tfor(int j=pos[i]+2;j<(i==(int)pos.size()-1?n:pos[i+1]);j++)\n//\t\t{\n//\t\t\tblock+=abs(a[j]);\n//\t\t}\n//\t\tif(i==(int)pos.size()-1 && pos[i]==n-1)\n//\t\t{\n//\t\t\tblock+=abs(a[pos[i]]);\n//\t\t}\n//\t\telse\n//\t\t{\n//\t\t\tif(!b[i]) block+=a[pos[i]]+a[pos[i]+1];\n//\t\t\telse block+=-a[pos[i]]-a[pos[i]+1];\n//\t\t}\n//\t\tres+=block;\n//\t\tcout<<i<<' '<<block<<endl;\n//\t}\n//\tcout<<res<<endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define SZ(X) ((int)(X).size())\n#define ALL(X) (X).begin(), (X).end()\n#define REP(I, N) for (int I = 0; I < (N); ++I)\n#define REPP(I, A, B) for (int I = (A); I < (B); ++I)\n#define RI(X) scanf(\"%d\", &(X))\n#define RII(X, Y) scanf(\"%d%d\", &(X), &(Y))\n#define RIII(X, Y, Z) scanf(\"%d%d%d\", &(X), &(Y), &(Z))\n#define DRI(X) int (X); scanf(\"%d\", &X)\n#define DRII(X, Y) int X, Y; scanf(\"%d%d\", &X, &Y)\n#define DRIII(X, Y, Z) int X, Y, Z; scanf(\"%d%d%d\", &X, &Y, &Z)\n#define RS(X) scanf(\"%s\", (X))\n#define CASET int ___T, case_n = 1; scanf(\"%d \", &___T); while (___T-- > 0)\n#define MP make_pair\n#define PB push_back\n#define MS0(X) memset((X), 0, sizeof((X)))\n#define MS1(X) memset((X), -1, sizeof((X)))\n#define LEN(X) strlen(X)\n#define VPII vector<pair<int,int> >\n#define F first\n#define S second\n#define RF(x) freopen(x,\"r\",stdin)\n#define WF(x) freopen(x,\"w\",stdout)\ntypedef long long LL;\nusing namespace std;\ntypedef pair<LL,LL> PLL;\ntypedef pair<int,int> PII;\nconst LL MOD = 1e9+7;\nconst int SIZE = 1e6+5;\nconst LL INF = 1LL<<58;\nconst double eps = 1e-13;\n\nint v[100009];\nbool o[100009];\nLL l[100009];\nLL r[100009];\n\nint main(){\n\tDRI(n);\n\tRI(v[0]);\n\tREPP(i,1,n){\n\t\tchar c;scanf(\" %c\",&c);\n\t\to[i]=(c=='+');\n\t\tRI(v[i]);\n\t}\n\tLL sum=0;\n\tREP(i,n){\n\t\tsum+=v[i];\n\t}\n\tREPP(i,1,n){\n\t\tif(!o[i]){\n\t\t\tl[i]=l[i-1]+v[i]*2;\n\t\t}\n\t\telse l[i]=l[i-1];\n\t}\n\tREPP(i,1,n){\n\t\tif(!o[i]){\n\t\t\tr[i]=2*v[i];\n\t\t\tfor(int j=i+1;j<n;j++){\n\t\t\t\tif(!o[j])break;\n\t\t\t\tr[i]+=2*v[j];\n\t\t\t}\n\t\t}\n\t}\n\t//REP(i,n)printf(\"%lld \",l[i]);puts(\"\");\n\t//REP(i,n)printf(\"%lld \",r[i]);puts(\"\");\n\tLL cmax=-INF;\n\tREPP(i,1,n){\n\t\tif(!o[i]){\n\t\t\tcmax=max(cmax,sum-l[i-1]-r[i]);\n\t\t}\n\t}\n\tif(cmax==-INF){\n\t\tcmax=sum;\n\t}\n\tprintf(\"%lld\",cmax);\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\n//#define FILE_IO\n\ntypedef long long LL;\n\nconst LL INF = (1LL << 60);\n\nint N;\nLL v[100005];\nbool f[100005][3];\nLL mem[100005][3];\n\nint gint()\n{\n    char ch = getchar();\n    int sgn = 1;\n    while(ch < '0' || '9' < ch)\n    {\n        if(ch == '-')   sgn = -1;\n        ch = getchar();\n    }\n    int x = 0;\n    while('0' <= ch && ch <= '9')\n    {\n        x = x * 10 + ch - '0';\n        ch = getchar();\n    }\n    x *= sgn;\n    return x;\n}\n\nLL solve(int pos, int grad)\n{\n    if(pos > N) return 0;\n    if(grad < 0 || grad > 2)  return (-INF);\n    if(f[pos][grad])    return  mem[pos][grad];\n\n    f[pos][grad] = 1;\n    LL val = v[pos];\n    if(grad & 1)    val *= -1;\n\n    LL slv1 = solve(pos + 1, grad - 2);\n    LL slv2 = solve(pos + 1, grad - 1);\n    LL slv3 = solve(pos + 1, grad);\n    LL slv4 = solve(pos + 1, grad + 1);\n    if(v[pos] > 0)  slv4 = -INF;\n\n    LL ans = val + max( max(slv1, slv2), max(slv3, slv4) );\n    mem[pos][grad] = ans;\n    return ans;\n}\n\nint main()\n{\n    #ifdef FILE_IO\n    freopen(\"1.in\", \"r\", stdin);\n    freopen(\"1.out\", \"w\", stdout);\n    #endif\n\n    N = gint();\n    for(int i = 1; i <= N; i++)\n        v[i] = gint();\n\n    LL ans = solve(1, 0);\n    printf(\"%lld\\n\", ans);\n\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n#define int long long\n#define rep(i,n) for(int i=0;i<(n);i++)\n#define MN 111111\nint N,z;\nint s[MN],A[MN];\nsigned main(){\n    cin>>N>>z;N--;\n    int h=0,a;\n    char c;\n    rep(i,N){\n        cin>>c>>a;\n        s[i]=(c=='+')?1:-1;\n        A[i]=a;\n        h+=a*s[i];\n    }\n\n    int ans=h,l=0,m=0;\n    for(int i=N-1;i>=0;i--){\n        l+=A[i];\n        h-=A[i]*s[i];\n        if(s[i]<0){\n            ans=max(ans,h-l+m);\n            m+=l;\n            l=0;\n        }\n    }\n    cout<<ans+z<<endl;\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "// 0bd35dc5e428754fa574049b6be8efe0\n\n#include <bits/stdc++.h>\n\nusing namespace std;\n\n#define DEBUG(...) fprintf(stderr, __VA_ARGS__)\n#define mp make_pair\n#define fst first\n#define snd second\n#define SZ(u) ((int) (u).size())\n#define ALL(u) (u).begin(), (u).end()\n\ninline void proc_status()\n{\n\tifstream t(\"/proc/self/status\");\n\tcerr << string(istreambuf_iterator<char>(t), istreambuf_iterator<char>()) << endl;\n}\n\ntemplate<typename T> inline bool chkmin(T &a, const T &b) { return a > b ? a = b, 1 : 0; }\ntemplate<typename T> inline bool chkmax(T &a, const T &b) { return a < b ? a = b, 1 : 0; }\ntemplate<typename T> inline T read()\n{\n\tregister T sum(0), fg(1);\n\tregister char ch(getchar());\n\tfor(; !isdigit(ch); ch = getchar()) if(ch == '-') fg = -1;\n\tfor(;  isdigit(ch); ch = getchar()) sum = sum * 10 - '0' + ch;\n\treturn sum * fg;\n}\n\ntypedef long long LL;\ntypedef pair<int, int> pii;\n\nconst int MAXN = (int) 1e5;\n\nint n;\n\nint A[MAXN + 5];\nchar type[MAXN + 5];\n\ninline char safe_getchar()\n{\n\tregister char ch(getchar());\n\twhile(!isgraph(ch)) ch = getchar();\n\treturn ch;\n}\n\ninline void input()\n{\n\tn = read<int>();\n\ttype[1] = '+';\n\tfor(int i = 1; i <= n; ++i)\n\t{\n\t\tif(i > 1) type[i] = safe_getchar();\n\t\tA[i] = read<int>();\n\t}\n}\n\ninline void solve()\n{\n\tLL suf = 0;\n\tfor(int i = 1; i <= n; ++i) suf += A[i];\n\n\tLL ans = LLONG_MIN, pre = 0;\n\tfor(int i = 1, j; i <= n; i = j)\n\t{\n\t\tLL res = A[i];\n\t\tsuf -= A[i];\n\t\tfor(j = i + 1; type[j] == '+'; ++j) res += A[j], suf -= A[j];\n\n\t\tif(i > 1)\n\t\t{\n\t\t\tchkmax(ans, pre - res + suf);\n\t\t\tpre += res - A[i] - A[i];\n\t\t}\n\t\telse pre += res;\n\t}\n\tchkmax(ans, pre);\n\n\tprintf(\"%lld\\n\", ans);\n}\n\nint main()\n{\n#ifndef ONLINE_JUDGE\n\tfreopen(\"E.in\", \"r\", stdin);\n\tfreopen(\"E.out\", \"w\", stdout);\n#endif\n\n\tinput();\n\tsolve();\n\n\treturn 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n#define N 1111116\n\nint n;\nvector<long long> a,b;\nlong long cnt,ans;\nchar opt='+';\n\nint read(){\n\tint x=0,f=1;char ch=getchar();\n\tfor (;!isdigit(ch);ch=getchar()) if (ch=='-') f=-f;\n\tfor (;isdigit(ch);ch=getchar()) x=x*10+ch-'0';\n\treturn x*f;\n}\n\nint main(){\n\tn=read();a.push_back(0);b.push_back(0);\n\tfor (int i=1;i<=n;i++){\n\t\tif (i!=1) scanf(\" %c\",&opt);\n\t\tint x=read();cnt+=x;\n\t\tif (opt=='+') b.back()+=x;\n\t\telse a.push_back(x),b.push_back(0);\n\t}\n\tfor (int i=1;i<(int) a.size();i++){\n\t\tans=max(ans,cnt-2*(a[i]+b[i]));\n\t\tcnt-=2*a[i];\n\t}\n\tprintf(\"%lld\\n\",max(ans,cnt));\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstdio>\n#include<algorithm>\n#include<cstring>\n\nusing namespace std;\n\nconst int MAXN = 100100;\ntypedef long long LL;\nconst LL INF = 1e16;\nchar opt[MAXN];\nint n,kind = 0;\nLL val[MAXN],ans = -INF,sum[MAXN];\n\ntemplate<typename T>\nvoid read(T &x)\n{\n\tx = 0;\n\tchar ch = getchar();\n\twhile(ch < '0' || ch > '9') ch = getchar();\n\twhile(ch >= '0' && ch <= '9')\n\t\tx = x * 10 + ch - '0',ch = getchar();\n}\n\nvoid init()\n{\n\tLL t1 = val[1],t2 = 0,temp;\n\tfor(int i = 1;i <= n-1;i++)\n\t{\n\t\tif(opt[i] == '+')\n\t\t{\n\t\t\tt1 += val[i+1];\n\t\t\tcontinue;\n\t\t} \n\t\tint now = i+1;temp = -val[i+1];\n\t\twhile(now < n && opt[now] == '+')\n\t\t{\n\t\t\tnow++;\n\t\t\ttemp -= val[now];\n\t\t}\n\t//\tprintf(\"%d\\n\",t1+t2+temp+sum[n]-sum[now]);\n\t\tans = max(ans,t1 + t2 + temp + sum[n] - sum[now]);\n\t\tt2 -= val[i+1];\n\t}\n}\n\nint main()\n{\n\t//freopen(\"T2.in\",\"r\",stdin);\n\tread(n);\n\tfor(int i = 1;i <= n;i++)\n\t{\n\t\tread(val[i]);\n\t\tsum[i] = sum[i-1] + val[i];\n\t\tif(i != n) cin >> opt[i];\n\t}\n\tinit();\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}\n/*\n5\n1 - 100 + 50 + 10 - 5\n*/\n"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <algorithm>\n#include <cstring>\n#include <ctime>\n\n#define Rep(i, n) for (int i = 1; i <= n; i ++)\n#define Rep0(i, n) for (int i = 0; i <= n; i ++)\n#define RepG(i, x) for (int i = head[x]; i; i = edge[i].next)\n#define v edge[i].to\n#define mp(a, b) make_pair(a, b)\n\nusing namespace std;\n\nconst int N = 100010;\n\nint f[N][4], c[N], a[N];\nchar op[2];\n\nint main()\n{\n\tint n;\n\tscanf(\"%d\", &n);\n\tRep(i, n) {\n\t\tif (i != 1) scanf(\"%s\", op);\n\t\tif (i == 1 || op[0] == '+') c[i] = 1;\n\t\telse c[i] = -1;\n\t\tscanf(\"%d\", &a[i]);\n\t}\n\tRep0(i, n) Rep0(j, 2) f[i][j] = -1e9;\n\tf[0][0] = 0;\n\tRep0(i, n) Rep0(j, 2){\n\t\tint tt = j == 1 ? -1 : 1;\n\t\tif (j) {\n\t\t\tf[i + 1][j - 1] = max(f[i + 1][j - 1], f[i][j] - tt * c[i + 1] * a[i + 1]);\n\t\t\tif (c[i + 1] == -1) f[i + 1][j] = max(f[i + 1][j], f[i][j] + tt * a[i + 1]);\n\t\t}\n\t\tif (c[i + 1] == -1)\n\t\t\tf[i + 1][j + 1] = max(f[i + 1][j + 1], f[i][j] + tt * c[i + 1] * a[i + 1]);\n\t\tf[i + 1][j] = max(f[i + 1][j], f[i][j] + tt * c[i + 1] * a[i + 1]);\n\t}\n\tprintf(\"%d\\n\", max(f[n][0], max(f[n][1], f[n][2])));\n\t\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "\n#include <cstdio>\n#include <cstring>\n#include <algorithm>\n\nusing namespace std;\ntypedef long long int LL;\nconst int Max_N(100050);\nconst LL INF(0X3F3F3F3F3F3F3F3FLL);\n\nint N, A[Max_N];\nbool can[Max_N];\nLL F[Max_N][3];\n\n/*\n显然，括号加在+号后面是没有意义的，所以括号只会加在-号后面\n假设一个数（考虑符号）之前的未消掉的括号（不考虑和它相邻的左括号）有x个，那么对答案的贡献就是(-1)^x \n同时，当括号层数>= 3时，可以通过一些变换使得括号层数变为<= 2层\n所以可以直接dp，F[i][j]表示考虑到第i个数，前面有j个左括号的最优代价。j <= 2，直接转移即可 \n*/\n\nvoid init()\n{\n\tchar op[10];\n\tscanf(\"%d\", &N);\n\tfor (int i = 1;i <= N;++i)\n\t{\n\t\tscanf(\"%d\", A + i);\n\t\tif (i + 1 <= N)\n\t\t{\n\t\t\tscanf(\"%s\", op);\n\t\t\tcan[i] = (*op == '-');\n\t\t}\n\t\tif (can[i - 1])\n\t\t\tA[i] = -A[i];\n\t}\n}\n\ninline void update(LL &a, const LL &b)\n{\n\ta = max(a, b);\n}\n\nint main()\n{\n\tinit();\n\tmemset(F, -0X3F, sizeof(F));\n\tF[0][0] = 0LL;\n\tfor (int i = 1;i <= N;++i)\n\t{\n\t\tfor (int j = 0;j <= 2;++j)\n\t\t\tif (F[i - 1][j] != -INF)\n\t\t\t\tif (j & 1)\n\t\t\t\t\tF[i - 1][j] -= A[i];\n\t\t\t\telse\n\t\t\t\t\tF[i - 1][j] += A[i];\n\t\tfor (int j = 0;j <= 2;++j)\n\t\t{\n\t\t\tupdate(F[i][j], F[i - 1][j]);\n\t\t\tif (can[i - 1] && j + 1 <= 2)\n\t\t\t\tupdate(F[i][j + 1], F[i - 1][j]);\n\t\t}\n\t\tfor (int j = 0;j <= 2;++j)\n\t\t\tif (j - 1 >= 0)\n\t\t\t\tupdate(F[i][j - 1], F[i][j]);\n\t}\n\tprintf(\"%lld\", F[N][0]);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n#define X first\n#define Y second\n#define pb push_back\ntypedef pair<int, int> ii;\ntypedef long long ll;\n\nconst int maxn = 2e5+5;\n\nint n;\n\nint arr[maxn];\n\nint pos[maxn];\nint sum[maxn];\nint qs[maxn];\n\nint main()\n{\n\tscanf(\"%d\", &n);\n\tint best = 0;\n\tfor(int i = 1; i<= n; i++)\n\t{\n\t\tchar tmp = '+';\n\t\tif(i != 1) scanf(\" %c\", &tmp);\n\t\tint x; scanf(\"%d\", &x);\n\t\tif(tmp == '-') x = -x;\n\t\tarr[i] = x;\n\t\tbest += arr[i];\n\t}\n\tsum[n] = abs(arr[n]);\n\tfor(int i = n-1; i>= 1; i--)\n\t{\n\t\tsum[i] = sum[i+1]+abs(arr[i]);\n\t}\n\tfor(int i = 1; i<= n; i++)\n\t{\n\t\tqs[i] = qs[i-1]+arr[i];\n\t}\n\tvector<int> neg;\n\tfor(int i = 1; i<= n; i++) if(arr[i]< 0) neg.pb(i);\n\tfor(int i = 0; i+1< (int) neg.size(); i++)\n\t{\n\t\tint loc = 0;\n\t\tloc += arr[neg[i]];\n\t\tfor(int j = neg[i]+1; j< neg[i+1]; j++)\n\t\t{\n\t\t\tloc -= arr[j];\n\t\t}\n\t\t// printf(\"[%d, %d) loc = %d\\n\", neg[i], neg[i+1], loc);\n\t\tbest = max(best, qs[neg[i]-1]+loc+sum[neg[i+1]]);\n\t}\n\tprintf(\"%d\\n\", best);\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\nusing namespace std;\nlong dp[3],a;\nchar op;\nint n;\nmain()\n{\n\tcin>>n>>dp[0];\n\tdp[1]=dp[2]=-1e18;\n\tfor(int i=1;i<n;i++)\n\t{\n\t\tcin>>op>>a;\n\t\tif(op=='+')\n\t\t{\n\t\t\tdp[0]=dp[1]=max(dp[1]-a,dp[2]+=a);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tdp[0]=dp[1]=max(dp[2]=dp[1]+a,dp[0]-a);\n\t\t}\n\t}\n\tcout<<dp[0]<<endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\nusing namespace std;\ntypedef long long ll;\nconst ll MOD = 1e9 + 7;\nint n, k;\nll a[115000];\nchar c[115000];\nll dp[115000][5];\n\nint main()\n{\n    cin >> n;\n    cin >> a[0];\n    for (int i = 0; i <= n; i++)\n        for (int j = 0; j <= n; j++)\n            dp[i][j] = -1e15;\n    dp[0][0] = a[0];\n    for (int i = 1; i < n; i++)\n    {\n        cin >> c[i] >> a[i];\n        if (c[i] == '+')\n        {\n            for (int k = 0; k < 5; k++)\n            {\n                for (int nk = 0; nk <= k; nk++)\n                {\n                    dp[i][nk] = max(dp[i][nk], dp[i - 1][k] + (k % 2 == 0 ? a[i] : -a[i]));\n                }\n            }\n        }\n        else\n        {\n            for (int k = 0; k < 4; k++)\n            {\n                for (int nk = 0; nk <= k + 1; nk++)\n                {\n                    dp[i][nk] = max(dp[i][nk], dp[i - 1][k] + (k % 2 == 0 ? -a[i] : a[i]));\n                }\n            }\n        }\n    }\n    cout << dp[n - 1][0] << endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <string>\n#include <list>\n#include <vector>\n#include <queue>\n#include <algorithm>\n#include <climits>\n#include <cstring>\n#define int long long\n#define uint unsigned long long\n#define CONTAINS(v,n) (find((v).begin(), (v).end(), (n)) != (v).end())\n#define SORT(v) sort((v).begin(), (v).end())\n#define RSORT(v) sort((v).rbegin(), (v).rend())\n#define ARY_SORT(a, size) sort((a), (a)+(size))\n#define MAX(a,b) (((a) > (b)) ? (a) : (b))\n#define MIN(a,b) (((a) < (b)) ? (a) : (b))\nusing namespace std;\n\nint INIT = 1000000000000000L; //10^5 * 10^9 * 10\n\nint N;\nint A[100000];\nchar op[100000];\n\nint max_dp[100000];\nint min_dp[100000];\n\nint get_max(int n);\nint get_min(int n);\n\nint get_max(int n) //n以降を作って作れるで最大の数\n{\n\tif (n == N - 1)\n\t{\n\t\treturn A[n];\n\t}\n\n\tif (max_dp[n] < INIT)\n\t{\n\t\treturn max_dp[n];\n\t}\n\n\tint res;\n\tif (n == 0 || op[n - 1] == '+')\n \t{\n\t\tres = A[n] + get_max(n + 1);\n\t}\n\telse\n\t{\n\t\tint d1 = -A[n] + get_max(n + 1);\n\t\tint d2 = -(A[n] + get_max(n + 1));\n\t\tint d3 = -A[n] + get_min(n + 1);\n\t\tint d4 = -(A[n] + get_min(n + 1));\n\t\tif (d1 >= d2 && d1 >= d3 && d1 >= d4)\n\t\t{\n\t\t\tres = d1;\n\t\t}\n\t\telse if (d2 >= d1 && d2 >= d3 && d2 >= d4)\n\t\t{\n\t\t\tres = d2;\n\t\t}\n\t\telse if (d3 >= d1 && d3 >= d2 && d3 >= d4)\n\t\t{\n\t\t\tres = d3;\n\t\t}\n\t\telse if (d4 >= d1 && d4 >= d2 && d4 >= d3)\n\t\t{\n\t\t\tres = d4;\n\t\t}\n\t}\n\tmax_dp[n] = res;\n\treturn res;\n}\n\nint get_min(int n) //n以降を作って作れるで最小の数\n{\n\tif (n == N - 1)\n\t{\n\t\treturn A[n];\n\t}\n\n\tif (min_dp[n] < INIT)\n\t{\n\t\treturn min_dp[n];\n\t}\n\n\tint res;\n\tif (n == 0 || op[n - 1] == '+')\n\t{\n\t\tres = A[n] + get_min(n + 1);\n\t}\n\telse\n\t{\n\t\tint d1 = -A[n] + get_max(n + 1);\n\t\tint d2 = -(A[n] + get_max(n + 1));\n\t\tint d3 = -A[n] + get_min(n + 1);\n\t\tint d4 = -(A[n] + get_min(n + 1));\n\t\tif (d1 <= d2 && d1 <= d3 && d1 <= d4)\n\t\t{\n\t\t\tres = d1;\n\t\t}\n\t\telse if (d2 <= d1 && d2 <= d3 && d2 <= d4)\n\t\t{\n\t\t\tres = d2;\n\t\t}\n\t\telse if (d3 <= d1 && d3 <= d2 && d3 <= d4)\n\t\t{\n\t\t\tres = d3;\n\t\t}\n\t\telse if (d4 <= d1 && d4 <= d2 && d4 <= d3)\n\t\t{\n\t\t\tres = d4;\n\t\t}\n\t}\n\tmin_dp[n] = res;\n\treturn res;\n}\n\nsigned main()\n{\n\tcin >> N;\n\tfor (int i = 0; i < N; i++)\n\t{\n\t\tcin >> A[i];\n\t\tif (i < N - 1) cin >> op[i];\n\t}\n\tfor (int i = 0; i < N; i++)\n\t{\n\t\tmax_dp[i] = INIT;\n\t\tmin_dp[i] = INIT;\n\t}\n\tcout << get_max(0) << endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<stdio.h>\nint n, w[101000], pv;\nlong long S[101000], MM, SS;\nchar op[101000];\nint main(){\n    int i;\n    scanf(\"%d\",&n);\n    for(i=1;i<=n;i++){\n        scanf(\"%d\",&w[i]);\n        S[i] = S[i-1] + w[i];\n        if(i==n)break;\n        scanf(\"%s\",op+i);\n    }\n    for(i=1;i<=n;i++)if(op[i]=='-')MM += w[i+1];\n    for(i=1;i<=n;i++){\n        if(op[i]=='-'){\n            if(!pv){\n                pv = i;\n                continue;\n            }\n            if(MM > S[i] - S[pv] + SS)MM = S[i] - S[pv] + SS;\n            SS += w[pv+1];\n            pv = i;\n        }\n    }\n    printf(\"%lld\\n\",S[n] - MM*2);\n}"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<cstring>\n#include<algorithm>\n#include<cstdlib>\n#include<ctime>\n#include<utility>\n#include<cmath>\n#include<functional>\nusing namespace std;\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef pair<int,int> pii;\ntypedef pair<ll,ll> pll;\nvoid sort(int &a,int &b)\n{\n\tif(a>b)\n\t\tswap(a,b);\n}\nvoid open(const char *s)\n{\n#ifndef ONLINE_JUDGE\n\tchar str[100];\n\tsprintf(str,\"%s.in\",s);\n\tfreopen(str,\"r\",stdin);\n\tsprintf(str,\"%s.out\",s);\n\tfreopen(str,\"w\",stdout);\n#endif\n}\nint rd()\n{\n\tint s=0,c;\n\twhile((c=getchar())<'0'||c>'9');\n\tdo\n\t{\n\t\ts=s*10+c-'0';\n\t}\n\twhile((c=getchar())>='0'&&c<='9');\n\treturn s;\n}\nint upmin(int &a,int b)\n{\n\tif(b<a)\n\t{\n\t\ta=b;\n\t\treturn 1;\n\t}\n\treturn 0;\n}\nint upmax(int &a,int b)\n{\n\tif(b>a)\n\t{\n\t\ta=b;\n\t\treturn 1;\n\t}\n\treturn 0;\n}\nint op[1000010];\nint a[1000010];\nint f[1000010][5];\nint main()\n{\n\tchar s[2];\n\tint n;\n\tscanf(\"%d\",&n);\n\tint i;\n\tfor(i=1;i<=n;i++)\n\t{\n\t\tif(i>1)\n\t\t{\n\t\t\tscanf(\"%s\",s);\n\t\t\tif(s[0]=='+')\n\t\t\t\top[i]=1;\n\t\t\telse\n\t\t\t\top[i]=2;\n\t\t}\n\t\telse\n\t\t\top[i]=1;\n\t\tscanf(\"%d\",&a[i]);\n\t}\n\tmemset(f,0x80,sizeof f);\n\tf[0][0]=0;\n\tfor(i=0;i<=n;i++)\n\t{\n\t\tupmax(f[i][1],f[i][2]);\n\t\tupmax(f[i][0],f[i][1]);\n\t\tif(i==n)\n\t\t\tcontinue;\n\t\tif(op[i+1]==1)\n\t\t{\n\t\t\tupmax(f[i+1][0],f[i][0]+a[i+1]);\n\t\t\tupmax(f[i+1][1],f[i][1]-a[i+1]);\n\t\t\tupmax(f[i+1][2],f[i][2]+a[i+1]);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tupmax(f[i+1][0],f[i][0]-a[i+1]);\n\t\t\tupmax(f[i+1][1],f[i][0]-a[i+1]);\n\t\t\tupmax(f[i+1][1],f[i][1]+a[i+1]);\n\t\t\tupmax(f[i+1][2],f[i][1]+a[i+1]);\n\t\t\tupmax(f[i+1][2],f[i][2]-a[i+1]);\n\t\t}\n\t}\n\tprintf(\"%d\\n\",f[n][0]);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#include<unordered_map>\n#include<unordered_set>\nusing namespace std;\n\n#define MAX 100002\n\nint n;\n\nlong long int a[MAX];\n\nchar buf[2];\n\nlong long int dp[MAX][3];\n\nint main(){\n\tcin >> n;\n\tfor (int i = 0; i < n; i++){\n\t\tfor (int j = 0; j < 3; j++){\n\t\t\tdp[i][j] = LLONG_MIN;\n\t\t}\n\t\tif (i){\n\t\t\tscanf(\"%s\", buf);\n\t\t}\n\t\tscanf(\"%lld\", &a[i]);\n\t\tif (i){\n\t\t\tif (buf[0] == '-'){\n\t\t\t\ta[i] *= -1;\n\t\t\t}\n\t\t}\n\t}\n\tdp[0][0] = a[0];\n\tfor (int i = 0; i+1 < n; i++){\n\t\tfor (int j = 0; j < 3; j++){\n\t\t\tif (dp[i][j] == LLONG_MIN)continue;\n\t\t\tlong long int val = 1;\n\t\t\tif (j % 2){\n\t\t\t\tval *= -1LL;\n\t\t\t}\n\t\t\tdp[i + 1][j] = max(dp[i + 1][j], dp[i][j]+a[i+1]*val);\n\t\t\tval *= -1LL;\n\t\t\tif (j){\n\t\t\t\tdp[i + 1][j - 1] = max(dp[i + 1][j - 1], dp[i][j] + a[i+1] * val);\n\t\t\t}\n\t\t\tif (j + 1 < 3&&a[i+1]<0){\n\t\t\t\tdp[i + 1][j + 1] = max(dp[i + 1][j + 1], dp[i][j] + a[i+1] * val*-1LL);\n\t\t\t}\n\t\t}\n\t}\n\tlong long int ans = dp[n-1][0];\n\tans = max(ans, dp[n - 1][1]);\n\tans = max(ans, dp[n - 1][2]);\n\tprintf(\"%lld\\n\", ans);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <bits/stdc++.h>\n\nusing namespace std;\nconst long long MAXN = 2e5+5;\nlong long dp[MAXN][5];\n\nint main()\n{\n    long long n;\n    cin>>n;\n    long long num;\n    cin>>num;\n    dp[0][0] = num;\n    dp[0][1] = -1e18;\n    dp[0][2] = -1e18;\n    \n    for(long long i=1;i<n;i++){\n        long long x;\n        char y;\n        \n        cin>>y;\n        cin>>x;\n        if(y == '+'){\n            dp[i][0] = dp[i-1][0]+x;\n            dp[i][0] = max(dp[i][0],dp[i-1][1]-x);\n            dp[i][1] = dp[i-1][1]-x;\n            dp[i][1] = max(dp[i][1],dp[i-1][2]+x);\n            dp[i][2] = dp[i-1][2]+x;\n        }else{\n           \n            dp[i][0] = dp[i-1][0]-x;\n            dp[i][0] = max(dp[i][0],dp[i-1][1]+x);\n            dp[i][1] = dp[i-1][1]+x;\n            dp[i][1] = max(dp[i][1],dp[i-1][0]-x);\n            dp[i][1] = max(dp[i][1],dp[i-1][2]-x);\n            dp[i][2] = dp[i-1][2]-x;\n            dp[i][2] = max(dp[i][2],dp[i-1][1]+x);\n        }\n     //   cout<<dp[i][0]<<\" \"<<dp[i][1]<<\" \"<<dp[i][2]<<endl;\n    }\n    cout<<max(dp[n-1][0],max(dp[n-1][1],dp[n-1][2]))<<endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <sstream>\n#include <string>\n#include <vector>\n#include <stack>\n#include <queue>\n#include <set>\n#include <map>\n#include <numeric>\n#include <algorithm>\n#include <cstdio>\n#include <cstdlib>\n#include <cstring>\n#include <cctype>\n#include <cmath>\n#include <cassert>\n#include <cstdarg>\n#include <sys/time.h>\n#include <fstream>\n//#include \"cout.h\"\n\nusing namespace std;\n\n#define SZ(x) ((int)x.size())\n#define MSET(x,a) memset(x, a, (int)sizeof(x))\n#define PB push_back\n#define VI vector < int >\n#define PII pair < int, int >\n#define LL long long\n#define FOR(i,a,b) for (int i = (a); i < (b); i++)\n#define REP(i,n) FOR(i,0,n)\n#define ALL(v) (v).begin(), (v).end()\n#define FIT(it,v) for (__typeof((v).begin()) it = (v).begin(); it != (v).end(); it++)\n#define OUT(A) cout << #A << \" = \"<< (A) << endl\n#define OUT2(A, B) cout << \"(\" << #A << \", \" << #B << \") = (\" << (A) << \", \"<< (B) << \")\" << endl\ntemplate<class T> void chmin(T &t, T f) { if (t > f) t = f; } \ntemplate<class T> void chmax(T &t, T f) { if (t < f) t = f; } \n\n#define present(c, e) ((c).find((e)) != (c).end())\n#define cpresent(c, e) (find(all(c), (e)) != (c).end())\n\nint n;\nLL a[100010];\nchar op[100010];\nLL dp[100010][3];\n\nvoid init() {\n}\n\nvoid input() {\n\tcin >> n;\n\tREP(i, n) {\n\t\tcin >> a[i];\n\t\tif (i < n-1) cin >> op[i+1];\n\t}\n}\n\nvoid solve() {\n\tREP(i, 100010) REP(j, 3) dp[i][j] = -(1LL<<60);\n\tdp[0][0] = a[0];\n\tFOR(i, 1, n){\n\t\tif(op[i] == '+'){\n\t\t\tdp[i][0] = max({\n\t\t\t\tdp[i-1][0]+a[i], \n\t\t\t\tdp[i-1][1]+a[i], \n\t\t\t\tdp[i-1][2]+a[i]\n\t\t\t\t});\n\t\t\tdp[i][1] = max({\n\t\t\t\tdp[i-1][1]-a[i], \n\t\t\t\tdp[i-1][2]-a[i]\n\t\t\t\t});\n\t\t\tdp[i][2] = max({\n\t\t\t\tdp[i-1][2]+a[i]\n\t\t\t\t});\n\t\t}\n\t\telse{\n\t\t\tdp[i][0] = max({\n\t\t\t\tdp[i-1][0]-a[i], \n\t\t\t\tdp[i-1][1]-a[i], \n\t\t\t\tdp[i-1][2]-a[i]\n\t\t\t\t});\n\t\t\tdp[i][1] = max({\n\t\t\t\tdp[i-1][0]-a[i], \n\t\t\t\tdp[i-1][1]+a[i], \n\t\t\t\tdp[i-1][2]+a[i]\n\t\t\t\t});\n\t\t\tdp[i][2] = max({\n\t\t\t\tdp[i-1][1]+a[i], \n\t\t\t\tdp[i-1][2]-a[i]\n\t\t\t\t});\n\t\t}\n\t}\n\tcout << max({dp[n-1][0], dp[n-1][1], dp[n-1][2]}) << endl;\n}\n\nint main() {\n\tinit();\n    input();\n    solve();\n\treturn 0;\n}\n\n\n\n\n\n\n"
  },
  {
    "language": "C++",
    "code": "//Created Time:2019年12月02日 星期一 21时16分28秒\n#include <iostream>\n#include <cstdio>\n#include <algorithm>\n#include <cstring>\n\nusing namespace std;\n\nint main(){\n\tint n; scanf(\"%d\", &n);\n\tlong long ans1 = 0, sum = 99999999999999, tmp = 0, ans2 = 0;\n\tscanf(\"%d\", &ans1); bool book = false; ans2 = ans1;\n\tfor(int i = 1; i < n; ++i){\n\t\tbool flag = false; char ch = getchar(); int x = 0;\n\t\tfor(; !isdigit(ch); ch = getchar()) flag |= (ch == '-');\n\t\tfor(; isdigit(ch); ch = getchar()) x = (x * 10) + (ch ^ 48);\n\t\tif(flag){\n\t\t\tif(book) sum = min(sum, tmp);\t\n\t\t\ttmp = x; book ^= 1;\n\t\t}\n\t\telse if(book) tmp += x;\n\t\tans1 += x; ans2 += flag ? -x : x;\n//\t\tcout << ans1 << ' ' << ans2 << endl;\n\t}\n\tif(sum == 99999999999999 && !book) sum = 0;\n\tcout << max(ans1 - sum * 2, ans2) << endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#pragma region include\n#include <iostream>\n#include <iomanip>\n#include <stdio.h>\n\n#include <sstream>\n#include <algorithm>\n#include <iterator>\n#include <cmath>\n#include <complex>\n\n#include <string>\n#include <cstring>\n#include <vector>\n#include <tuple>\n#include <bitset>\n\n#include <queue>\n#include <complex>\n#include <set>\n#include <map>\n#include <stack>\n#include <list>\n\n#include <fstream>\n#include <random>\n//#include <time.h>\n#include <ctime>\n#pragma endregion //#include\n/////////\n#define REP(i, x, n) for(int i = x; i < n; ++i)\n#define rep(i,n) REP(i,0,n)\n#define ALL(X) X.begin(), X.end()\n/////////\n#pragma region typedef\ntypedef long long LL;\ntypedef long double LD;\ntypedef unsigned long long ULL;\ntypedef std::pair<LL,LL> PLL;//\ntypedef std::pair<int,int> PII;//\n#pragma endregion //typedef\n////定数\nconst int INF = (int)1e9;\nconst LL MOD = (LL)1e9+7;\nconst LL LINF = (LL)1e18+20;\nconst double PI = acos(-1.0);\nconst double EPS = 1e-9;\n/////////\nusing namespace::std;\n\n/*\nthx\nhttp://kmjp.hatenablog.jp/entry/2017/01/11/1030\n*/\nvoid solve(){\n\tint N;\n\tcin >> N;\n\tvector<bool> OP(N);\n\tvector<LL> A(N);\n\tOP[0] = false;\n\tcin >> A[0];\n\tfor(int i=1;i<N;++i){\n\t\tchar op;\n\t\tcin >> op >> A[i];\n\t\tOP[i] = (op=='-');\n\t}\n\tvector< vector<LL> > dp(N+1,vector<LL>(3,-LINF));\n\tdp[0][0] = 0;\n\tfor(int i=0;i<N;++i){\n\t\tif( OP[i] == false){//'+' 開かない。閉じれる\n\t\t\tdp[i+1][2] = dp[i][2] + A[i];\n\t\t\t//dp[i+1][2]から一つ閉じるとdp[i+1][1]にいける\n\t\t\tdp[i+1][1] = max(dp[i+1][2], dp[i][1] - A[i]);\n\t\t\t//dp[i+1][1]から一つ閉じるとdp[i+1][0]にいける\n\t\t\tdp[i+1][0] = max(dp[i+1][1], dp[i][0] + A[i]);\n\t\t}else{//'-':必ず開き括弧を前につける。必ず開く。閉じれる\n\t\t\tdp[i+1][2] = dp[i][1] + A[i];\n\t\t\t//LL res1 = max(dp[i][0],dp[i][2]);//括弧をすべて閉じる\n\t\t\tLL res1 = dp[i][0];//前の項で括弧全部閉じてる\n\t\t\tdp[i+1][1] = max(dp[i+1][2], res1 - A[i]);\n\t\t\tdp[i+1][0] = max(dp[i+1][1], dp[i][1] + A[i]);\n\t\t}\n\t}\n\tLL ans = dp[N][0];//ここにまとまってる\n\tcout << ans << endl;\n}\n\n#pragma region main\nsigned main(void){\n\tstd::cin.tie(0);\n\tstd::ios::sync_with_stdio(false);\n\tstd::cout << std::fixed;//小数を10進数表示\n\tcout << setprecision(16);//小数点以下の桁数を指定//coutとcerrで別\t\n\n\tsolve();\n}\n#pragma endregion //main()"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n\nconst int MAXN=100011;\nconst long long LONF=4567891012345678910LL;\n\n\nint N;\nint A[MAXN];\nint O[MAXN];\n\nlong long F[MAXN][5];\n\nint rO(){\n\tstatic char ch[2];\n\tscanf(\"%s\", ch);\n\treturn ch[0]=='+';\n}\n\nvoid relax(long long &f, long long v){\n\tif(f<v)\tf=v;\n}\n\nint Calc(int t, int o, int a){\n\tif(t)\to=!o;\n\treturn ((o<<1)-1)*a;\n}\n\nint main(){\n\t\n\tscanf(\"%d\", &N);\n\t\n\tscanf(\"%d\", &A[1]);\n\tfor(int i=2;i<=N;++i){\n\t\tO[i]=rO();\n\t\tscanf(\"%d\", &A[i]);\n\t}\n\t\n\tfor(int i=1;i<=N;++i)\n\t\tfor(int j=0;j<=4;++j)\n\t\t\tF[i][j]=-LONF;\n\t\n\tF[1][0]=(long long)(A[1]);\n\tfor(int i=2;i<=N;++i){\n\t\tfor(int j=0;j<5;++j){\n\t\t\tif(j>0)\trelax(F[i][j-1], F[i-1][j]+Calc(!(j&1), O[i], A[i]));\n\t\t\trelax(F[i][j], F[i-1][j]+Calc(j&1, O[i], A[i]));\n\t\t\tif(j<4 && !O[i])\trelax(F[i][j+1], F[i-1][j]+Calc(j&1, O[i], A[i]));\n\t\t}\n\t\t//for(int j=0;j<5;++j)\tprintf(\"%d %d %lld\\n\", i, j, F[i][j]);\n\t\t\n\t}\n\t\n\tlong long Ans=-LONF;\n\tfor(int j=0;j<5;++j)\n\t\trelax(Ans, F[N][j]);\n\tprintf(\"%lld\\n\", Ans);\n\t\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\nconst int maxn = 1e5 + 5;\nconst long long INF = 1e18;\nstruct lpl{\n\tlong long data1, data2;\n\tint num1, num2;\n}dp[maxn];\nint n, f[maxn];\nlong long ini[maxn];\n\ninline void putit(){\n\tscanf(\"%d\", &n); char opt[30];\n\tscanf(\"%lld\", &ini[1]); f[1] = 1;\n\tfor(int i = 2; i <= n; ++i){\n\t\tscanf(\"%s\", opt + 1); f[i] = (opt[1] == '+') ? 1 : -1;\n\t\tscanf(\"%lld\", &ini[i]);\n\t} \n}\n\ninline void check(){\n\tfor(int i = 1; i <= n; ++i){\n\t\tprintf(\"i = %d\\n\", i);\n\t\tprintf(\"num1 = %d data1 = %lld num2 = %d data2 = %lld\\n\", dp[i].num1, dp[i].data1, dp[i].num2, dp[i].data2);\n\t}\n}\n\ninline void workk(){\n\tdp[1].data1 = ini[1]; dp[1].data2 = -INF;\n\tdp[1].num1 = 0; dp[1].num2 = 0;\n\tfor(int i = 2; i <= n; ++i){\n\t\tif(f[i] == 1){\n\t\t\tdp[i].num1 = dp[i - 1].num1; dp[i].data1 = dp[i - 1].data1 + ini[i];\n\t\t\tif(dp[i - 1].num2 && dp[i - 1].data2 > dp[i - 1].data1){\n\t\t\t\tdp[i].data1 = dp[i - 1].data2 + ini[i]; dp[i].num1 = dp[i - 1].num2 - 1;\n\t\t\t}\n\t\t\tdp[i].num2 = dp[i - 1].num2; dp[i].data2 = dp[i - 1].data2 - ini[i];\n\t\t}\n\t\telse{\n\t\t\tdp[i].num2 = dp[i - 1].num1 + 1; dp[i].data2 = dp[i - 1].data1 - ini[i];\n\t\t\tif(dp[i].data2 < dp[i - 1].data2 + ini[i]){\n\t\t\t\tdp[i].data2 = dp[i - 1].data2 + ini[i]; dp[i].num2 = dp[i - 1].num2;\n\t\t\t}\n\t\t\tif(dp[i - 1].num1 && dp[i].data2 < dp[i - 1].data1 + ini[i]){\n\t\t\t\tdp[i].num2 = dp[i - 1].num2 - 1; dp[i].data2 = dp[i - 1].data1 + ini[i];\n\t\t\t}\n\t\t\tdp[i].num1 = dp[i - 1].num1; dp[i].data1 = dp[i - 1].data1 - ini[i];\n\t\t\tif(dp[i - 1].num2 && dp[i - 1].data2 > dp[i - 1].data1){\n\t\t\t\tdp[i].num1 = dp[i - 1].num2 - 1; dp[i].data1 = dp[i - 1].data2 - ini[i];\n\t\t\t}\n\t\t\tif(dp[i - 1].data2 + ini[i] > dp[i].data1){\n\t\t\t\tdp[i].data1 = dp[i - 1].data2 + ini[i]; dp[i].num1 = dp[i - 1].num2 + 1;\n\t\t\t}\n\t\t}\n\t}\n\t//check();\n\tcout << max(dp[n].data1, dp[n].data2);\n}\n\nint main()\n{\n\t//freopen(\"lpl.in\", \"r\", stdin);\n\tputit();\n\tworkk();\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <iostream>\n#include <cstring>\n#include <cmath>\n#include <algorithm>\n#include <vector>\n\n\nusing namespace std;\n\n\n#define mp make_pair\n#define pb push_back\n#define ll long long\n\n#define maxN 100011\n#define inf 1LL << 55\n\nint n, i;\nll a[maxN];\nchar op[maxN];\n\nll dp[maxN][3];\n\nint main() {\n    \n    scanf(\"%d\", &n);\n    for (i = 1; i < n; i++) \n        scanf(\"%lld %c\", &a[i], &op[i + 1]);\n    scanf(\"%lld\", &a[n]);\n\n    for (i = 0; i <= n; i++)\n        dp[i][0] = dp[i][1] = dp[i][2] = -inf;\n        \n    op[1] = '+';\n    dp[0][0] = 0;\n    for (i = 1; i <= n; i++) {\n        if (op[i] == '+') {\n            dp[i][0] = max(dp[i - 1][0], max(dp[i - 1][1], dp[i - 1][2])) + a[i];\n            dp[i][1] = max(dp[i - 1][1], dp[i - 1][2]) - a[i];\n            dp[i][2] = dp[i - 1][2] + a[i];\n        } else {\n            dp[i][1] = max(dp[i - 1][0], max(dp[i - 1][1], dp[i - 1][2])) - a[i];\n            dp[i][2] = max(dp[i - 1][1], dp[i - 1][2]) + a[i];\n        }\n    }\n    \n    ll ans = max(dp[n][0], max(dp[n][1], dp[n][2]));\n    printf(\"%lld\", ans);\n    \n    \n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\nusing ll = long long;\nusing vi = vector<int>;\nusing vll = vector<ll>;\nusing vvi = vector<vector<int>>;\nusing vvl = vector<vector<ll>>;\n\nll dp[101010][3] = {0};\n\nint main() {\n  cin.tie(nullptr);\n  ios::sync_with_stdio(false);\n  int n;\n  cin >> n;\n  vector<ll> a(n);\n  vector<char> op(n);\n  ll INF = 1LL << 34;\n  op[0] = '+';\n  for (int i = 0; i < n; i++) {\n    cin >> a[i];\n    if (i < n - 1)\n      cin >> op[i + 1];\n  }\n  for (int i = 0; i <= n; i++) dp[i][0] = dp[i][1] = dp[i][2] = -INF;\n  dp[0][0] = 0;\n  for (int i = 0; i < n; i++) {\n    if (op[i] == '+') {\n      dp[i + 1][0] = max(a[i] + dp[i][0], max(a[i] + dp[i][1], a[i] + dp[i][2]));\n      dp[i + 1][1] = max(-a[i] + dp[i][1], a[i] + dp[i][2]);\n      dp[i + 1][2] = a[i] + dp[i][2];\n    } else {\n      dp[i + 1][0] = max(-a[i] + dp[i][0], max(a[i] + dp[i][1], a[i] + dp[i][2]));\n      dp[i + 1][1] = max(-a[i] + dp[i][0], max(a[i] + dp[i][1], a[i] + dp[i][2]));\n      dp[i + 1][2] = max(a[i] + dp[i][1], a[i] + dp[i][2]);\n    }\n  }\n\n  cout << dp[n][0] << endl;\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define ll long long\n#define pb push_back\n#define mk make_pair\n#define rint register int\nusing namespace std;\ninline int read(){int w=1,s=0;char ch=getchar();while(!isdigit(ch)){if(ch=='-')w=-1;ch=getchar();}while(isdigit(ch)){s=s*10+ch-'0';ch=getchar();}return w*s;}\nll f[3];int n;\nint Fu[1000010];\nint main()\n{\n\tmemset(f,-0x3f,sizeof(f));\n\tn=read();n--;\n\tf[0]=read();\n\tfor(rint i=1;i<=n;++i){char s[2];\n\t\tscanf(\"%s\",s+1);int x=read();if(s[1]=='+') Fu[i]=1;\n\t\telse Fu[i]=-1;x*=Fu[i];\n\t\tf[0]+=x;f[1]-=x;f[2]+=x;\n\t\tif(x<0) f[2]=max(f[2],f[1]),f[1]=max(f[0],f[1]);\n\t\tf[1]=max(f[1],f[2]);f[0]=max(f[0],f[1]);\n\t}cout<<f[0];\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#include <cstdlib>\n#include <cstring>\n#include <cstdio>\n#include <vector>\n#include <cmath>\n#include <ctime>\n#include <queue>\n#include <stack>\n#include <map>\n#include <set>\n#define ll long long\nusing namespace std;\nconst long long N=1e5+10,M=3e5+30,LEN=50;\nconst int Mod=10007;\nconst long double EPS=1e-7;\nconst long long MAX=1e18;\nint read() {\n    int x = 0, f = 1;\n    char c = getchar();\n    while (c < '0' || c > '9') f = (c == '-') ? -1 : f, c = getchar();\n    while (c >= '0' && c <= '9') x = x * 10 + c - '0', c = getchar();\n    return x * f;\n}\nint n,a;\nlong long f[N][5];\nint main(){\n    //freopen(\"problem.in\",\"r\",stdin);\n    //freopen(\"problem.ans\",\"w\",stdout);\n    scanf(\"%d\",&n);\n    f[0][0]=0;\n    f[0][1]=f[0][2]=-MAX;\n    for(int i=1;i<=n;i++){\n    \ta=read();\n    \tf[i][0]=max(f[i-1][0],f[i-1][1]);\n    \tf[i][1]=max(f[i-1][1],f[i-1][2]);\n    \tf[i][2]=f[i-1][2];\n    \tf[i][0]+=a;\n    \tf[i][1]-=a;\n    \tf[i][2]+=a;\n    \tif(a<0){\n    \t\tf[i][2]=max(f[i][2],f[i][1]);\n    \t\tf[i][1]=max(f[i][1],f[i][0]);\n    \t}\n    }\n    printf(\"%lld\\n\",max(f[n][0],max(f[n][1],f[n][2])));\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "// IOI 2021\n#include <bits/stdc++.h>\nusing namespace std;\n\n#define endl '\\n'\n#define ends ' '\n#define die(x) return cout << x << endl, 0\n#define all(v) v.begin(), v.end()\n#define sz(x) (int)(x.size())\nvoid debug_out() { cerr << endl; }\ntemplate <typename Head, typename... Tail>\nvoid debug_out(Head H, Tail... T) { cerr << ends << H; debug_out(T...); }\n#define debug(...) cerr << \"{\" << #__VA_ARGS__ << \"}:\", debug_out(__VA_ARGS__)\ntypedef long long ll;\ntypedef pair<int, int> pii;\nconst ll INF = 1e9;\nconst ll MOD = 1e9 + 7;\n \n////////////////////////////////////////////////////////////////////\n\nconst int N = 1e5 + 5, M = 1e2 + 2;\n\nint A[N], DP[N][M];\nbool P[N];\n\nint Sign(int i) { return i & 1 ? -1 : 1; }\n\nint main() {\n\n\tios::sync_with_stdio(0), cin.tie(0), cout.tie(0);\n\tmt19937 Rnd(time(0));\n\n\tfor (int i = 0; i < N; i++) for (int j = 0; j < M; j++) DP[i][j] = -INF;\n\tint n; cin >> n;\n\tfor (int i = 0; i < n; i++) {\n\t\tif (i) {\n\t\t\tchar c; cin >> c;\n\t\t\tP[i] = (c == '+');\n\t\t}\n\t\tcin >> A[i];\n\t}\n\tDP[0][0] = A[0];\n\tfor (int i = 1; i < n; i++) for (int j = M - 1; j >= 0; j--) {\n\t\tif (P[i]) DP[i][j] = DP[i - 1][j] + A[i] * Sign(j);\n\t\telse if (j) DP[i][j] = DP[i - 1][j - 1] + A[i] * Sign(j);\n\t\tif (j + 1 < M) DP[i][j] = max(DP[i][j], DP[i][j + 1]);\n\t}\n\tcout << DP[n - 1][0] << endl;\n\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\nlong long n,m,i,j,dp[100005][3],num[100005];\nchar c[100005];\nint main()\n{\n\tcin>>n;\n\tc[1]='+';\n\tfor (i=1;i<=n;i++)\n\t{\n\t\tif (i!=1) cin>>c[i];\n\t\tcin>>num[i];\n\t}\n\tdp[1][0]=num[1];\n\tdp[1][1]=dp[1][2]=-0x2222222222222222ll;\n\tfor (i=2;i<=n;i++)\n\t{\n\t\tif (c[i]=='+')\n\t\t{\n\t\t\tdp[i][0]=max(dp[i-1][1],dp[i-1][0])+num[i];\n\t\t\tdp[i][1]=dp[i-1][1]-num[i];\n\t\t\tdp[i][2]=dp[i-1][2]+num[i];\n\t\t}\n\t\telse\n\t\t{\n\t\t\tdp[i][0]=-0x2222222222222222ll;\n\t\t\tdp[i][1]=max(dp[i-1][0],dp[i-1][1])-num[i];\n\t\t\tdp[i][2]=max(dp[i-1][1],dp[i-1][2])+num[i];\n\t\t}\n\t}\n\tcout<<max(dp[n][0],max(dp[n][1],dp[n][2]))<<endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\nusing ll = long long;\n\nll solve() {\n    ll N;\n    cin >> N;\n    vector<ll> A(N), OP(N);\n    char op;\n    OP[0] = 1;\n    cin >> A[0];\n    for ( int i = 1; i < N; i++ ) {\n        cin >> op >> A[i];\n        OP[i] = op == '+' ? 1 : -1;\n    }\n    ll s_all = 0, ss = 0, cn = 0;\n    vector<ll> b(N);\n    for ( int i = 0; i < N; i++ ) {\n        s_all += A[i];\n        if ( OP[i] < 0 ) cn++;\n        ss += A[i] * OP[i];\n    }\n    if ( cn <= 1 ) {\n        return ss;\n    }\n    ll s = 0;\n    vector<ll> r(N); // 逆向き、-までの和\n    for ( int i = N-1; i >= 0; i-- ) {\n        s += A[i];\n        if ( OP[i] < 0 ) {\n            r[i] = s;\n            s = 0;\n        }\n    }\n    ll ans = - (1LL << 60), pn = 0;\n    for ( int i = 0; i < N; i++ ) {\n        if ( OP[i] < 0 ) {\n            ans = max(ans, s_all - pn * 2 - r[i] * 2);\n            pn += A[i];\n        }\n    }\n    return ans;\n}\n\nint main() {\n    auto ans = solve();\n    cout << ans << \"\\n\";\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "                            #include <bits/stdc++.h>\n                            #include<iostream>\n                            #include<cstdio>\n                            #include<vector>\n                            #include<queue>\n                            #include<map>\n                            #include<cstring>\n                            #include<string>\n                            #include <math.h>\n                            #include<algorithm>\n                        //    #include <boost/multiprecision/cpp_int.hpp>\n                            #include<functional>\n                     #define int long long\n                            #define inf  1000000007\n                            #define pa pair<int,int>\n                            #define ll long long\n                            #define pal pair<double,int>\n                            #define ppa pair<int,pa>\n                            #define ssa pair<string,int>\n                            #define  mp make_pair\n                            #define  pb push_back\n                            #define EPS (1e-10)\n                            #define equals(a,b) (fabs((a)-(b))<EPS)\n                     \n                            using namespace std;\n                     //priority_queue<int, vector<int>, greater<int> > que;\n                            class Point{\n                            \tpublic:\n                            \tdouble x,y;\n                            \tPoint(double x=0,double y=0):x(x),y(y) {}\n                            \tPoint operator + (Point p) {return Point(x+p.x,y+p.y);}\n                            \tPoint operator - (Point p) {return Point(x-p.x,y-p.y);}\n                            \tPoint operator * (double a) {return Point(x*a,y*a);}\n                            \tPoint operator / (double a) {return Point(x/a,y/a);}\n                            \tdouble absv() {return sqrt(norm());}\n                            \tdouble norm() {return x*x+y*y;}\n                            \tbool operator < (const Point &p) const{\n                            \t\treturn x != p.x ? x<p.x: y<p.y;\n                            \t}\n                            \tbool operator == (const Point &p) const{\n                            \t\treturn fabs(x-p.x)<EPS && fabs(y-p.y)<EPS;\n                            \t}\n                            };\n                            typedef Point Vector;\n                     \n                            struct Segment{\n                            Point p1,p2;\n                            };\n                     \n                        double hen(Vector a){\n                        if(fabs(a.x)<EPS && a.y>0) return acos(0);\n                        else if(fabs(a.x)<EPS && a.y<0) return 3*acos(0);\n                        else if(fabs(a.y)<EPS && a.x<0) return 2*acos(0);\n                        else if(fabs(a.y)<EPS && a.x>0) return 0.0;\n                        else if(a.y>0) return acos(a.x/a.absv());\n                        else return 2*acos(0)+acos(-a.x/a.absv());\n                     \n                        }\n                     \n                string itos( int i ) {\n                ostringstream s ;\n                s << i ;\n                return s.str() ;\n                }\n                 \n                int gcd(int v,int b){\n                \tif(v>b) return gcd(b,v);\n                \tif(v==b) return b;\n                \tif(b%v==0) return v;\n                \treturn gcd(v,b%v);\n                }\n                            double dot(Vector a,Vector b){\n                            \treturn a.x*b.x+a.y*b.y;\n                            }\n                            double cross(Vector a,Vector b){\n                            \treturn a.x*b.y-a.y*b.x;\n                            }\n                        \n                double distans(double x1,double y1,double x2,double y2){\n                \tdouble rr=(x1-x2)*(x1-x2)+(y1-y2)*(y1-y2);\n                \treturn sqrt(rr);\n                \t\n                }\n\n                            //----------------kokomade tenpure------------\n\nvoid no(){\n\tcout<<\"No\"<<endl;\n\treturn;\n}\n\nint beki(int r, int k){\n\tif(k==0) return 1;\n\telse return r*beki(r,k-1);\n}\nint a[100010];\nint op[100010];\nint dp[100010][3];\n signed  main(){\nint n;\n \tcin>>n;\n \tfor(int i=0;i<100010;i++)for(int j=0;j<3;j++) dp[i][j]= -inf*1000000000ll;\n \tfor(int i=0;i<n-1;i++){\n \t\tint dd;\n \t\tstring sa;\n \t\tcin>>dd>>sa;\n \t\ta[i+1]=dd;\n \t\tif(sa==\"+\")op[i+1]=1;\n \t\telse op[i+1]=-1;\n \t}\n \tcin>>a[n];\n \top[0]=1;\n \tdp[0][0]=0;\n \t\n \tfor(int i=1;i<=n;i++){\n \t\tif(op[i-1]==1){\n \t\t\tdp[i][0]=max(dp[i][0],dp[i-1][0]+a[i]);\n \t\t\tdp[i][0]=max(dp[i][0],dp[i-1][1]+a[i]);\n \t\t\tdp[i][1]=max(dp[i][1],dp[i-1][1]-a[i]);\n \t\t\tdp[i][1]=max(dp[i][1],dp[i-1][2]-a[i]);\n \t\t\tdp[i][2]=max(dp[i][2],dp[i-1][2]+a[i]);\n \t\t}\n \t\telse{\n \t//\t\tdp[i][0]=max(dp[i][0],dp[i-1][0]-a[i]);\n \t//\t\tdp[i][0]=max(dp[i][0],dp[i-1][1]-a[i]);\n \t\t\tdp[i][1]=max(dp[i][1],dp[i-1][0]-a[i]);\n \t\t\tdp[i][1]=max(dp[i][1],dp[i-1][1]-a[i]);\n \t\t\tdp[i][1]=max(dp[i][1],dp[i-1][2]-a[i]);\n \t\t\tdp[i][2]=max(dp[i][2],dp[i-1][1]+a[i]);\n \t\t\tdp[i][2]=max(dp[i][2],dp[i-1][2]+a[i]);\n \t\t}\n //\t\tcout<<dp[i][0]<<\" \"<<dp[i][1]<<\" \"<<dp[i][2]<<\" \"<<endl;\n \t\t\n \t}\n \tcout<<max(dp[n][0],max(dp[n][1],dp[n][2]))<<endl;\n \t\n                   //  \tprintf(\"%.10f\\n\",ans[n-1]);\n                    \treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<vector>\n#include<algorithm>\n#include<cstring>\n#include<cstdio>\n#include<cmath>\n#include<cstdlib>\n#include<ctime>\n#include<queue>\n#include<set>\n#include<map>\n#include<stack>\n#include<bitset>\nusing namespace std;\ntypedef long long LL;\nconst int N=2e5;\nint gi() {\n\tint w=0;bool q=1;char c=getchar();\n\twhile ((c<'0'||c>'9') && c!='-') c=getchar();\n\tif (c=='-') q=0,c=getchar();\n\twhile (c>='0'&&c <= '9') w=w*10+c-'0',c=getchar();\n\treturn q? w:-w;\n}\nint a[N];\nLL b[N];\nint main()\n{\n\tint n=gi()-1,i,m=0;char c;\n\tLL sum=gi(),ans=-1LL<<60;\n\tfor (i=1;i<=n;i++) {\n\t\twhile ((c=getchar())!='+'&&c!='-');\n\t\tif (c=='+') sum+=b[m]=gi();\n\t\telse sum+=a[++m]=gi();\n\t}\n\tfor (i=1;i<=m;i++) {\n\t\tans=max(ans,sum-(a[i]+b[i])*2);\n\t\tsum-=a[i]*2;\n\t}\n\tcout<<max(ans,sum)<<endl;\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\n#define pb push_back\n#define mp make_pair\n\n#define fi first\n#define se second\n\ntypedef long long ll;\n\nusing namespace std;\n\nconst ll INF = 2e15;\n\nll dp2[505][505];\n\nll dp[505][505];\n\nchar sign[505];\n\nint arr[505];\n\nint n;\n\nll calc2(int, int);\nll calc(int, int);\n\nvoid init() {\n    for (int l = 1; l <= n; ++l) {\n        for (int r = l; r <= n; ++r) {\n            dp[l][r] = dp2[l][r] = -INF;\n        }\n    }\n}\n\nll calc(int l, int r) {\n    if (l > r) {\n        return 0;\n    }\n\n    if (l == r) {\n        return arr[l];\n    }\n\n    ll &cur = dp[l][r];\n\n    if (cur != -INF) {\n        return cur;\n    }\n\n    cur = 0;\n\n    for (int i = l; i <= r; ++i) {\n        if (i == l || sign[i - 1] == '+') {\n            cur += arr[i];\n        }\n        else {\n            cur -= arr[i];\n        }\n    }\n\n    for (int mid = l; mid < r; ++mid) {\n        if (sign[mid] == '-') {\n            cur = max(cur, calc(l, mid) - calc2(mid + 1, r));\n        }\n    }\n\n    return cur;\n}\n\nll calc2(int l, int r) {\n    if (l > r) {\n        return 0;\n    }\n\n    if (l == r) {\n        return arr[l];\n    }\n\n    ll &cur = dp2[l][r];\n\n    if (cur != -INF) {\n        return cur;\n    }\n\n    cur = 0;\n\n    for (int i = l; i <= r; ++i) {\n        if (i == l || sign[i - 1] == '+') {\n            cur += arr[i];\n        }\n        else {\n            cur -= arr[i];\n        }\n    }\n\n    for (int mid = l; mid < r; ++mid) {\n        if (sign[mid] == '-') {\n            cur = min(cur, calc2(l, mid) - calc(mid + 1, r));\n        }\n    }\n\n    return cur;\n}\n\nvoid solve() {\n    scanf(\"%d\", &n);\n\n    assert(n <= 500);\n\n    for (int i = 1; i <= n; ++i) {\n        scanf(\"%d\", &arr[i]);\n\n        if (i < n) {\n            scanf(\" %c\", &sign[i]);\n        }\n    }\n\n    init();\n\n    printf(\"%lld\", calc(1, n));\n}\n\nint main() {\n    #ifdef BThero\n        freopen(\"input.txt\", \"r\", stdin);\n        freopen(\"output.txt\", \"w\", stdout);\n    #endif // BThero\n\n    int tt = 1;\n\n    while (tt--) {\n        solve();\n    }\n\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n#define N 100000 + 5\n#define M 15\n#define inf 10000000000000000\n#define int long long\n#define rep(i, l, r) for(int i = l; i <= r; ++i)\nchar ch[M];\nint n, len, a[N], op[N], dp[N][3];\nint read(){\n    char c; int x = 0, f = 1;\n    c = getchar();\n    while(c > '9' || c < '0'){ if(c == '-') f = -1; c = getchar();}\n    while(c >= '0' && c <= '9') x = x * 10 + c - '0', c = getchar();\n    return x * f;\n}\nsigned main(){\n    n = read();\n    rep(i, 1, 2 * n - 1){\n        if(i & 1) a[i / 2 + 1] = read();\n        else{\n            scanf(\"%s\", ch + 1);\n            if(ch[1] == '+') op[i / 2 + 1] = 1;\n            else op[i / 2 + 1] = 2;\n        }\n    }\n    dp[1][0] = a[1], dp[1][1] = dp[1][2] = -inf;\n    rep(i, 2, n){\n        if(op[i] == 1){\n            dp[i][0] = dp[i - 1][0] + a[i];\n            dp[i][0] = max(dp[i][0], dp[i - 1][1] - a[i]);\n            dp[i][0] = max(dp[i][0], dp[i - 1][2] + a[i]);\n            dp[i][1] = dp[i - 1][1] - a[i];\n            dp[i][1] = max(dp[i][1], dp[i - 1][2] + a[i]);\n            dp[i][2] = dp[i - 1][2] + a[i];\n        }\n        else{\n            dp[i][0] = dp[i - 1][0] - a[i];\n            dp[i][0] = max(dp[i][0], dp[i - 1][1] + a[i]);\n            dp[i][0] = max(dp[i][0], dp[i - 1][2] - a[i]);\n            dp[i][1] = dp[i - 1][1] + a[i];\n            dp[i][1] = max(dp[i][1], dp[i - 1][2] - a[i]);\n            dp[i][1] = max(dp[i][1], dp[i - 1][0] - a[i]);\n            dp[i][2] = dp[i - 1][2] - a[i];\n            dp[i][2] = max(dp[i][2], dp[i - 1][1] + a[i]);\n        }\n    }\n    printf(\"%lld\", dp[n][0]);\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "// includes\n#include <bits/stdc++.h>\nusing namespace std;\n\n// macros\n#define pb emplace_back\n#define mk make_pair\n#define FOR(i, a, b) for(int i=(a);i<(b);++i)\n#define rep(i, n) FOR(i, 0, n)\n#define rrep(i, n) for(int i=((int)(n)-1);i>=0;i--)\n#define irep(itr, st) for(auto itr = (st).begin(); itr != (st).end(); ++itr)\n#define irrep(itr, st) for(auto itr = (st).rbegin(); itr != (st).rend(); ++itr)\n#define all(x) (x).begin(),(x).end()\n#define sz(x) ((int)(x).size())\n#define UNIQUE(v) v.erase(unique(v.begin(), v.end()), v.end())\n#define bit(n) (1LL<<(n))\n// functions\ntemplate <class T>bool chmax(T &a, const T &b){if(a < b){a = b; return 1;} return 0;}\ntemplate <class T>bool chmin(T &a, const T &b){if(a > b){a = b; return 1;} return 0;}\ntemplate <typename T> istream &operator>>(istream &is, vector<T> &vec){for(auto &v: vec)is >> v; return is;}\ntemplate <typename T> ostream &operator<<(ostream &os, const vector<T>& vec){for(int i = 0; i < vec.size(); i++){ os << vec[i]; if(i + 1 != vec.size())os << \" \";} return os;}\ntemplate <typename T> ostream &operator<<(ostream &os, const set<T>& st){for(auto itr = st.begin(); itr != st.end(); ++itr){ os << *itr; auto titr = itr; if(++titr != st.end())os << \" \";} return os;}\ntemplate <typename T> ostream &operator<<(ostream &os, const unordered_set<T>& st){for(auto itr = st.begin(); itr != st.end(); ++itr){ os << *itr; auto titr = itr; if(++titr != st.end())os << \" \";} return os;}\ntemplate <typename T> ostream &operator<<(ostream &os, const multiset<T>& st){for(auto itr = st.begin(); itr != st.end(); ++itr){ os << *itr; auto titr = itr; if(++titr != st.end())os << \" \";} return os;}\ntemplate <typename T> ostream &operator<<(ostream &os, const unordered_multiset<T>& st){for(auto itr = st.begin(); itr != st.end(); ++itr){ os << *itr; auto titr = itr; if(++titr != st.end())os << \" \";} return os;}\ntemplate <typename T1, typename T2> ostream &operator<<(ostream &os, const pair<T1, T2> &p){os << p.first << \" \" << p.second; return os;}\ntemplate <typename T1, typename T2> ostream &operator<<(ostream &os, const map<T1, T2> &mp){for(auto itr = mp.begin(); itr != mp.end(); ++itr){ os << itr->first << \":\" << itr->second; auto titr = itr; if(++titr != mp.end())os << \" \"; } return os;}\ntemplate <typename T1, typename T2> ostream &operator<<(ostream &os, const unordered_map<T1, T2> &mp){for(auto itr = mp.begin(); itr != mp.end(); ++itr){ os << itr->first << \":\" << itr->second; auto titr = itr; if(++titr != mp.end())os << \" \"; } return os;}\n//  types\nusing ll = long long int;\nusing P = pair<int, int>;\n// constants\nconst int inf = 1e9;\nconst ll linf = 1LL << 50;\nconst double EPS = 1e-10;\nconst int mod = 1000000007;\nconst int dx[4] = {-1, 0, 1, 0};\nconst int dy[4] = {0, -1, 0, 1};\n// io\nstruct fast_io{\n  fast_io(){ios_base::sync_with_stdio(false); cin.tie(0); cout << fixed << setprecision(20);}\n} fast_io_;\n\nll dp[100010][2][2];\n\nint main(int argc, char const* argv[])\n{\n  int n; cin >> n;\n  vector<ll> a(n);\n  vector<string> op(n-1);\n  cin >> a[0];\n  rep(i, n - 1)cin >> op[i] >> a[i+1];\n  rep(i, n)rep(j, 2)rep(k, 2)dp[i][j][k] = -linf;\n  dp[0][0][0] = a[0];\n  rep(i, n - 1){\n    if(op[i] == \"+\"){\n      // j = 0\n      chmax(dp[i+1][0][0], dp[i][0][0] + a[i+1]);\n      chmax(dp[i+1][0][1], dp[i][0][1] + a[i+1]);\n      chmax(dp[i+1][1][1], dp[i][0][1] + a[i+1]);\n      // j = 1\n      chmax(dp[i+1][1][1], dp[i][1][1] - a[i+1]);\n      chmax(dp[i+1][0][1], dp[i][1][1] - a[i+1]);\n      chmax(dp[i+1][0][1], dp[i][1][1] - a[i+1]);\n    }else{\n      // j = 0\n      chmax(dp[i+1][0][0], dp[i][0][0] - a[i+1]);\n      chmax(dp[i+1][0][1], dp[i][0][1] - a[i+1]);\n      chmax(dp[i+1][1][1], dp[i][0][1] - a[i+1]);\n      // j = 1\n      chmax(dp[i+1][0][1], dp[i][1][1] + a[i+1]);\n      chmax(dp[i+1][1][1], dp[i][1][1] + a[i+1]);\n      chmax(dp[i+1][0][1], dp[i][1][1] + a[i+1]);\n      // add -\n      chmax(dp[i+1][1][1], dp[i][0][0] - a[i+1]);\n      chmax(dp[i+1][1][1], dp[i][0][1] - a[i+1]);\n      chmax(dp[i+1][0][1], dp[i][1][1] + a[i+1]);\n    }\n  }\n  /*rep(i, 3){\n    rep(j, 2){\n      rep(k, 2){\n        cerr << i << \" \" << j << \" \" << k << \" \" << dp[i][j][k] << endl;\n      }\n    }\n  }*/\n  cout << max(dp[n-1][0][0], dp[n-1][0][1]) << endl;\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nusing ll = long long;\nusing Pi = pair<int, int>;\nusing Pl = pair<ll, ll>;\nusing vint = vector<int>;\nusing vll = vector<ll>;\ntemplate<typename T> using uset = unordered_set<T>;\ntemplate<typename T1, typename T2> using umap = unordered_map<T1, T2>;\n\nconstexpr int INF = (1 << 30) - 1;\nconstexpr ll LLINF = 1LL << 60;\nconstexpr int dy[] = {1, 0, -1, 0, 1, -1, -1, 1};\nconstexpr int dx[] = {0, 1, 0, -1, 1, 1, -1, -1};\nconstexpr char el = '\\n';\nconstexpr int mod = 1000000007;\n\ntemplate<typename T> T gcd(T a, T b) { return (b ? gcd(b, a % b) : a); }\ntemplate<typename T> T lcm(T a, T b) { return (a / gcd(a, b) * b); }\ntemplate<typename T1, typename T2> inline void chmin(T1 &a, T2 b) { if (a > b) a = b; }\ntemplate<typename T1, typename T2> inline void chmax(T1 &a, T2 b) { if (a < b) a = b; }\n\nint main() {\n    ll N;\n    cin >> N;\n    ll dp[100005][3];\n\n    fill_n(*dp, 100005 * 3, -LLINF);\n    dp[0][0] = 0;\n    for (int i = 0; i < N; i++) {\n        char op;\n        ll A;\n        if (i == 0) op = '+';\n        else cin >> op;\n        cin >> A;\n        if (op == '-') A = -A;\n\n        chmax(dp[i + 1][0], dp[i][0] + A);\n        chmax(dp[i + 1][1], dp[i][1] - A);\n        chmax(dp[i + 1][2], dp[i][2] + A);\n        if (op == '-') {\n            chmax(dp[i + 1][1], dp[i][0] + A);\n            chmax(dp[i + 1][2], dp[i][1] - A);\n        }\n        chmax(dp[i + 1][1], dp[i][2] + A);\n    }\n    cout << max({dp[N][0], dp[N][1], dp[N][2]}) << endl;\n    return (0);\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <iomanip> // << fixed << setprecision(xxx)\n#include <algorithm> // do { } while ( next_permutation(A, A+xxx) ) ;\n#include <vector>\n#include <string> // to_string(nnn) // substr(m, n) // stoi(nnn)\n#include <complex>\n#include <tuple> // get<n>(xxx)\n#include <queue>\n#include <stack>\n#include <map> // if (M.find(key) != M.end()) { }\n#include <set> // S.insert(M);\n// if (S.find(key) != S.end()) { }\n// for (auto it=S.begin(); it != S.end(); it++) { }\n// auto it = S.lower_bound(M);\n#include <cctype>\n#include <cassert>\n#include <cmath>\n#include <cstdio>\n#include <cstdlib> // atoi(xxx)\nusing namespace std;\n\ntypedef long long ll;\n\n//const int dx[4] = {1, 0, -1, 0};\n//const int dy[4] = {0, 1, 0, -1};\n\n// const int C ;\n// const int M = 1000000007;\n\nconst ll infty = 1000000000000000;\n\nint N;\nll A[100010];\nbool op[100010];\nll dp[100010][2];\nint minusnum[100010];\n\nint main () {\n  cin >> N;\n  for (auto i = 0; i < N; i++) {\n    cin >> A[i];\n    if (i < N-1) {\n      char c;\n      cin >> c;\n      op[i] = (c == '+');\n      if (op[i]) {\n        minusnum[i] = 0;\n      } else {\n        minusnum[i] = 1;\n      }\n    }\n  }\n  for (auto i = 0; i < N; i++) {\n    minusnum[i+1] += minusnum[i];\n  }\n  dp[0][0] = A[0];\n  dp[0][1] = -infty;\n  for (auto i = 1; i < N; i++) {\n    if (op[i-1]) {\n      dp[i][1] = dp[i-1][1] - A[i];\n      dp[i][0] = max(dp[i-1][0] + A[i], dp[i-1][1] - A[i]);\n      if (minusnum[i-1] >= 2) {\n        dp[i][1] = max(dp[i][1], dp[i-1][1] + A[i]);\n      }\n    } else {\n      dp[i][1] = max(dp[i-1][1] + A[i], dp[i-1][0] - A[i]);\n      dp[i][0] = max(dp[i-1][1] + A[i], dp[i-1][0] - A[i]);\n    }\n  }\n  /*\n  for (auto i = 0; i < N; i++) {\n    cerr << \"dp[\" << i << \"] \" << dp[i][0] << \" \" << dp[i][1] << endl;\n  }\n  */\n  cout << max(dp[N-1][0], dp[N-1][1]) << endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#pragma GCC optimize(\"Ofast\")\n#include<bits/stdc++.h>\n#include <ext/pb_ds/assoc_container.hpp>\n\n#define F first\n#define S second\n#define int long long\n#define ll long long\n//#define int  unsigned long long\n#define pb push_back\n//#define double long double\n\nusing namespace std;\nusing namespace __gnu_pbds;\ntypedef  tree< int , null_type, less<int>, rb_tree_tag, tree_order_statistics_node_update> ordered_set;\n//const int mod = 1e9 + 7;\nconst int N = 310000;\nint a[N];\nmain(){\n    ios_base::sync_with_stdio(0);\n    cin.tie(0);\n   // freopen(\"input.txt\", \"r\", stdin);\n    int n;\n    cin >> n;\n    cin >> a[1];\n    int t = 0;\n    int m = 1;\n    for (int i = 1; i < n; i++){\n        string s;\n        cin >> s;\n        int x;\n        cin >> x;\n        if (s[0] == '-') x = -x;\n        if (x > 0 && a[m] > 0){\n            a[m] += x;\n        } else{\n            m++;\n            a[m] = x;\n        }\n    }\n    n = m;\n    for (int i = 1; i <= n; i++) t += abs(a[i]);\n    int p = 0;\n    int ans = -1e15;\n    for (int i = 1; i <= n; i++){\n        if (a[i] > 0){\n            p += a[i];\n            t -= abs(a[i]);\n            continue;\n        }\n        if (i == n){\n            p += a[i];\n            continue;\n        }\n        if (a[i + 1] < 0){\n            ans = max(ans, p + t + 2 * a[i]);\n        } else{\n            ans = max(ans, p + t + 2 * a[i] - 2 * a[i + 1]);\n        }\n        p += a[i];\n        t -= abs(a[i]);\n    }\n    ans = max(ans, p);\n    cout << ans;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <cstdlib>\n#include <cstring>\n#include <algorithm>\n#include <math.h>\nusing namespace std;\n\ntypedef long long ll;\nconst int MAXN = 1e5 + 10;\nint N;\nll A[MAXN];\nchar C[MAXN];\nll f[3];\n\nint main() {\n\tregister int i;\n\tf[0] = f[1] = f[2] = -1e18;\n\tscanf(\"%d\", &N);\n\tscanf(\"%lld\", &f[0]);\n\tfor(i = 1; i < N; ++i) {\n\t\tscanf(\" %c\", &C[i]);\n\t\tscanf(\"%lld\", &A[i]);\n\t\tC[i] = C[i] == '+' ? 1 : -1;\n\t\tf[0] += A[i] * C[i];\n\t\tf[1] -= A[i] * C[i];\n\t\tf[2] += A[i] * C[i];\n\t\tif(C[i] == -1) f[2] = max(f[2], f[1]), f[1] = max(f[1], f[0]);\n\t\tf[1] = max(f[1], f[2]), f[0] = max(f[0], f[1]);\n\t}\n\tprintf(\"%lld\\n\", f[0]);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\nconst int nmax = 1e5+5;\nconst long long inf = (1LL<<60);\n\nlong long dp[nmax][3];\nint a[nmax];\nchar op[nmax];\nint n;\n\nint main() {\n  cin >> n;\n  for (int i = 1; i <= n; i++) {\n    cin >> a[i];\n    if (i != n) cin >> op[i + 1];\n  }\n  op[1] = '+';\n\n  for (int i = 1; i <= n; i++) {\n    dp[i][1] = dp[i][2] = dp[i][0] = -inf;\n  }\n  dp[1][0] = a[1];\n\n  for (int i = 2; i <= n; i++) {\n    if (op[i] == '+') {\n      dp[i][0] = max(dp[i - 1][0], dp[i - 1][1]) + a[i];\n      dp[i][1] = dp[i - 1][1] - a[i];\n      dp[i][2] = dp[i - 1][2] + a[i];\n    } else {\n      dp[i][1] = dp[i - 1][0] - a[i];\n      dp[i][2] = max(dp[i - 1][1], dp[i - 1][2]) + a[i];\n    }\n  }\n\n  return 0 * printf(\"%lld\\n\", max(max(dp[n][1], dp[n][2]), dp[n][0]));\n}\n"
  },
  {
    "language": "C++",
    "code": "/*\nURL https://\nSCORE 0\nAC false\nWA false\nTLE false\nMLE false\nTASK_TYPE\nFAILURE_TYPE\nNOTES\n*/\n#include <iostream>\n#include <cstdint>\n#include <utility>\n#include <tuple>\n#include <vector>\n#include <stack>\n#include <queue>\n#include <unordered_map>\n#include <unordered_set>\n#include <map>\n#include <set>\n#include <algorithm>\n#include <limits>\n#include <numeric>\n#include <iomanip>\n#include <type_traits>\n#include <functional>\n\nusing namespace std; // TODO Remove this\n\n/* macros */\n// loops\n#define REP(i, n) for (i64 i = 0; i < static_cast<decltype(i)>(n); ++i)\n#define REPR(i, n) for (i64 i = (n) - 1; i >= static_cast<decltype(i)>(0); --i)\n#define FOR(i, n, m) for (i64 i = (n); i < static_cast<decltype(i)>(m); ++i)\n#define FORR(i, n, m) for (i64 i = (m) - 1; i >= static_cast<decltype(i)>(n); --i)\n#define EACH(x, xs) for (auto &x: (xs))\n\n// helpers\n#define CTR(x) (x).begin(), (x).end()\n\n/* internal code */\nnamespace internal {\n    /* utils for std::tuple */\n    namespace tuple_utils {\n        template<size_t...>\n        struct seq {};\n\n        template<size_t N, size_t... Is>\n        struct gen_seq : gen_seq<N - 1, N - 1, Is...> {};\n\n        template<size_t... Is>\n        struct gen_seq<0, Is...> : seq<Is...> {};\n\n        template<class Tuple, size_t... Is>\n        void read(istream &stream, Tuple &t, seq<Is...>) {\n            static_cast<void>((int[]) {0, (void(stream >> get<Is>(t)), 0)...});\n        }\n\n        template<class Tuple, size_t... Is>\n        void print(ostream &stream, Tuple const &t, seq<Is...>) {\n            static_cast<void>((int[]) {0, (void(stream << (Is == 0 ? \"\" : \", \") << get<Is>(t)), 0)...});\n        }\n\n        template<size_t I, class F, class A, class... Elems>\n        struct ForEach {\n            void operator()(A &arg, tuple<Elems...> const &t) const {\n                F()(arg, get<I>(t));\n                ForEach<I - 1, F, A, Elems...>()(arg, t);\n            }\n\n            void operator()(A &arg, tuple<Elems...> &t) const {\n                F()(arg, get<I>(t));\n                ForEach<I - 1, F, A, Elems...>()(arg, t);\n            }\n        };\n\n        template<class F, class A, class... Elems>\n        struct ForEach<0, F, A, Elems...> {\n            void operator()(A &arg, tuple<Elems...> const &t) const {\n                F()(arg, get<0>(t));\n            }\n\n            void operator()(A &arg, tuple<Elems...> &t) const {\n                F()(arg, get<0>(t));\n            }\n        };\n\n        template<class F, class A, class... Elems>\n        void for_each(A &arg, tuple<Elems...> const &t) {\n            ForEach<tuple_size<tuple<Elems...>>::value - 1, F, A, Elems...>()(arg, t);\n        }\n\n        template<class F, class A, class... Elems>\n        void for_each(A &arg, tuple<Elems...> &t) {\n            ForEach<tuple_size<tuple<Elems...>>::value - 1, F, A, Elems...>()(arg, t);\n        }\n\n        struct hash_for_element {\n            template<class V>\n            void operator()(size_t &size, const V &v) const {\n                size ^= hash<V>()(v);\n            }\n        };\n    }\n\n    /* utils for std::vector */\n    namespace vector_utils {\n        template <typename V, int N>\n        struct matrix_t {\n            using type = std::vector<typename matrix_t<V, N-1>::type>;\n        };\n        template <typename V>\n        struct matrix_t<V, 0> {\n            using type = V;\n        };\n\n        template <typename V, int N>\n        using Matrix = typename internal::vector_utils::matrix_t<V, N>::type;\n\n        template <typename V, typename It, int N>\n        struct matrix_helper {\n            static Matrix<V, N> create(const It &begin, const It &end, const V &default_value) {\n                return Matrix<V, N>(*begin, matrix_helper<V, It, N - 1>::create(begin + 1, end, default_value));\n            }\n        };\n        template <typename V, typename It>\n        struct matrix_helper<V, It, 0> {\n            static Matrix<V, 0> create(const It &begin, const It &end, const V &default_value) {\n                return default_value;\n            }\n        };\n    }\n}\n\n\n/* Primitive types */\nusing i8  =  int8_t; using  u8 =  uint8_t;\nusing i16 = int16_t; using u16 = uint16_t;\nusing i32 = int32_t; using u32 = uint32_t;\nusing i64 = int64_t; using u64 = uint64_t;\nusing usize = size_t;\n\n/* Data structure type */\ntemplate <class T> using V = vector<T>; // TODO Replace with Vector\ntemplate <typename T> using Vector = internal::vector_utils::Matrix<T, 1>;\ntemplate <typename T, int N> using Matrix = internal::vector_utils::Matrix<T, N>;\ntemplate <typename V> using OrderedSet = std::set<V>;\ntemplate <typename V> using HashSet = std::unordered_set<V>;\ntemplate <typename K, typename V> using OrderedMap = std::map<K, V>;\ntemplate <typename K, typename V> using HashMap = std::unordered_map<K, V>;\n\n/* utils for std::vector */\ntemplate <typename V>\nstd::vector<V> make_pre_allocated_vector(size_t N) {\n    std::vector<V> retval;\n    retval.reserve(N);\n    return retval;\n}\n\ntemplate <class V, int N>\nMatrix<V, N> make_matrix(const std::array<size_t, N> &shape, V default_value = V()) {\n    return internal::vector_utils::matrix_helper<V, decltype(shape.begin()), N>::create(shape.begin(), shape.end(), default_value);\n}\n/* utils for STL containers */\ntemplate <class Iterator>\nstruct Container {\n    Container(const Iterator &begin, const Iterator &end) : m_begin(begin), m_end(end) {}\n    const Iterator& begin() const {\n        return this->m_begin;\n    }\n    const Iterator& end() const {\n        return this->m_end;\n    }\n    Iterator m_begin;\n    Iterator m_end;\n};\n\n/* utils for STL iterators */\ntemplate <typename Iterator, typename F>\nstruct MappedIterator {\n    MappedIterator(const Iterator &it, const F &function) : it(it), function(function) {}\n    auto operator *() const {\n        return this->function(*this->it);\n    }\n    void operator++() { ++this->it; }\n    void operator+=(size_t n) { this->it += n; }\n    auto operator+(size_t n) const {\n        return MappedIterator<Iterator, F>(this->it + n, this->function);\n    }\n    bool operator==(const MappedIterator<Iterator, F> &rhs) const {\n        return this->it == rhs.it;\n    }\n    bool operator!=(const MappedIterator<Iterator, F> &rhs) const {\n        return !(*this == rhs);\n    }\nprivate:\n    Iterator it;\n    F function;\n};\ntemplate <typename Iterator, typename P>\nstruct FilteredIterator {\n    FilteredIterator(const Iterator &it, const Iterator &end, const P &predicate)\n            : it(it), end(end), predicate(predicate) {\n        if (this->it != end) {\n            if (!predicate(*this->it)) {\n                this->increment();\n            }\n        }\n    }\n    decltype(auto) operator *() const {\n        return *this->it;\n    }\n    void operator++() {\n        this->increment();\n    }\n    void operator+=(size_t n) {\n        REP (i, n) {\n            this->increment();\n        }\n    }\n    auto operator+(size_t n) const {\n        auto retval = *this;\n        retval += n;\n        return retval;\n    }\n    bool operator==(const FilteredIterator<Iterator, P> &rhs) const {\n        return this->it == rhs.it;\n    }\n    bool operator!=(const FilteredIterator<Iterator, P> &rhs) const {\n        return !(*this == rhs);\n    }\nprivate:\n    void increment() {\n        if (this->it == this->end) {\n            return ;\n        }\n        ++this->it;\n        while (this->it != this->end && !this->predicate(*this->it)) {\n            ++this->it;\n        }\n    }\n    Iterator it;\n    Iterator end;\n    P predicate;\n};\ntemplate <typename Iterator, typename ElementIterator>\nstruct FlattenedIterator {\n    FlattenedIterator(const Iterator &it, const Iterator &end) : it(it), end(end), elem_it() {\n        if (this->it != this->end) {\n            this->elem_it = it->begin();\n        }\n    }\n    decltype(auto) operator *() const {\n        return *this->elem_it;\n    }\n    void operator++() {\n        this->increment();\n    }\n    void operator+=(size_t n) {\n        REP (i, n) {\n            this->increment();\n        }\n    }\n    auto operator+(size_t n) const {\n        auto retval = *this;\n        retval += n;\n        return retval;\n    }\n    bool operator==(const FlattenedIterator<Iterator, ElementIterator> &rhs) const {\n        if (this->it != rhs.it) {\n            return false;\n        }\n        if (this->it == this->end || rhs.it == rhs.end) {\n            if (this->end == rhs.end) {\n                return true;\n            } else {\n                return false;\n            }\n        } else {\n            return this->elem_it == rhs.elem_it;\n        }\n    }\n    bool operator!=(const FlattenedIterator<Iterator, ElementIterator> &rhs) const {\n        return !(*this == rhs);\n    }\nprivate:\n    void increment() {\n        if (this->it == this->end) return ;\n\n        ++this->elem_it;\n        if (this->elem_it == this->it->end()) {\n            ++this->it;\n            if (this->it != this->end) {\n                this->elem_it = this->it->begin();\n            }\n        }\n    }\n    Iterator it;\n    Iterator end;\n    ElementIterator elem_it;\n};\n\ntemplate <typename C, typename F>\nauto iterator_map(const C &c, F function) {\n    using Iterator = std::remove_const_t<std::remove_reference_t<decltype(c.begin())>>;\n    return Container<MappedIterator<Iterator, F>>(MappedIterator<Iterator, F>(c.begin(), function),\n            MappedIterator<Iterator, F>(c.end(), function));\n}\n\ntemplate <typename C, typename P>\nauto iterator_filter(const C &c, P predicate) {\n    using Iterator = std::remove_const_t<std::remove_reference_t<decltype(c.begin())>>;\n    return Container<FilteredIterator<Iterator, P>>(FilteredIterator<Iterator, P>(c.begin(), c.end(), predicate),\n                                                    FilteredIterator<Iterator, P>(c.end(), c.end(), predicate));\n}\n\ntemplate <typename C>\nauto iterator_flatten(const C &c) {\n    using Iterator = std::remove_const_t<std::remove_reference_t<decltype(c.begin())>>;\n    using ElementIterator = std::remove_const_t<std::remove_reference_t<decltype(c.begin()->begin())>>;\n    return Container<FlattenedIterator<Iterator, ElementIterator>>(\n            FlattenedIterator<Iterator, ElementIterator>(c.begin(), c.end()),\n            FlattenedIterator<Iterator, ElementIterator>(c.end(), c.end()));\n}\n\n/* utils for STL iterators (TODO deprecated because it is too complex) */\ntemplate <class Functions>\nstruct BaseIterator {\n    using State = typename Functions::State;\n\n    BaseIterator(const State &state, const Functions &func) : state(state), func(func) {\n        while (!this->is_end() && !this->is_valid()) {\n            this->next();\n        }\n    }\n    BaseIterator(const State &state) : state(state), func() {\n        while (!this->is_end() && !this->is_valid()) {\n            this->next();\n        }\n    }\n\n    decltype(auto) operator*() {\n        return this->func.get_value(this->state);\n    }\n\n    decltype(auto) operator*() const {\n        return this->func.get_value(this->state);\n    }\n\n    BaseIterator &operator++() {\n        if (this->is_end()) {\n            return *this;\n        }\n\n        this->next();\n        while (!this->is_end() && !this->is_valid()) {\n            this->next();\n        }\n\n        return *this;\n    }\n\n    BaseIterator &operator--() {\n        if (this->is_begin()) {\n            return *this;\n        }\n\n        this->previous();\n        while (!this->is_begin() && !this->is_valid()) {\n            this->previous();\n        }\n\n        return *this;\n    }\n\n    bool operator==(const BaseIterator<Functions> &rhs) const {\n        return this->state == rhs.state;\n    }\n    bool operator!=(const BaseIterator<Functions> &rhs) const {\n        return !(*this == rhs);\n    }\n\n    bool is_begin() const {\n        return this->func.is_begin(this->state);\n    }\n    bool is_end() const {\n        return this->func.is_end(this->state);\n    }\n    const State &get_state() const {\n        return this->state;\n    }\nprivate:\n    bool is_valid() const {\n        return this->func.is_valid(this->state);\n    }\n    void next() {\n        this->func.next(this->state);\n    }\n    void previous() {\n        this->func.previous(this->state);\n    }\n    State state;\n    Functions func;\n};\n\n/* input */\ntemplate <class F, class S>\nistream &operator>>(istream &stream, pair<F, S> &pair) {\n    stream >> pair.first;\n    stream >> pair.second;\n    return stream;\n}\ntemplate <class ...Args>\nistream &operator>>(istream &stream, tuple<Args...> &tuple) {\n    internal::tuple_utils::read(stream, tuple, internal::tuple_utils::gen_seq<sizeof...(Args)>());\n    return stream;\n}\n\ntemplate <class T>\nT read() {\n    T t;\n    cin >> t;\n    return t;\n}\ntemplate <class F, class S>\npair<F, S> read() {\n    pair<F, S> p;\n    cin >> p;\n    return p;\n}\ntemplate <class T1, class T2, class T3, class ...Args>\ntuple<T1, T2, T3, Args...> read() {\n    tuple<T1, T2, T3, Args...> t;\n    cin >> t;\n    return t;\n}\ntemplate <typename T, typename F = std::function<T()>>\nVector<T> read(const usize length, F r) {\n    auto retval = make_pre_allocated_vector<T>(length);\n    REP (i, length) {\n        retval.emplace_back(r());\n    }\n    return retval;\n}\n\ntemplate <class T>\nVector<T> read(const usize length) {\n    return read<T>(length, [] { return read<T>(); });\n}\ntemplate <class F, class S>\nVector<pair<F, S>> read(const usize length) {\n    return read<pair<F, S>>(length);\n}\ntemplate <class T1, class T2, class T3, class ...Args>\nVector<tuple<T1, T2, T3, Args...>> read(const usize length) {\n    return read<tuple<T1, T2, T3, Args...>>(length);\n}\n\n/* debug output */\ntemplate <class F, class S>\nostream &operator<<(ostream& stream, const pair<F, S> &pair) {\n    stream << \"{\" << pair.first << \", \" << pair.second << \"}\";\n    return stream;\n}\ntemplate <class ...Args>\nostream &operator<<(ostream& stream, const tuple<Args...> &tuple) {\n    stream << \"{\";\n    internal::tuple_utils::print(stream, tuple, internal::tuple_utils::gen_seq<sizeof...(Args)>());\n    stream << \"}\";\n    return stream;\n}\n\ntemplate <typename T>\nvoid dump(const T& t) {\n    std::cerr << t << std::endl;\n}\ntemplate <typename F, typename S>\nvoid dump(const pair<F, S>& p) {\n    std::cerr << p << std::endl;\n}\ntemplate <class ...Args>\nvoid dump(const tuple<Args...> &tuple) {\n    std::cerr << tuple << std::endl;\n}\ntemplate <typename V1, typename V2, typename ...Args>\nvoid dump(const V1 &v1, const V2 &v2, const Args&... args) {\n    const auto x = std::make_tuple(v1, v2, args...);\n    internal::tuple_utils::print(std::cerr, x, internal::tuple_utils::gen_seq<sizeof...(Args) + 2>());\n    std::cerr << std::endl;\n}\n\ntemplate <typename T>\nvoid dump_matrix(const Matrix<T, 0> & matrix) {\n    dump(matrix);\n}\ntemplate <typename T>\nvoid dump_matrix(const Matrix<T, 1> & matrix) {\n    EACH (x, matrix) {\n        std::cerr << x << \" \";\n    }\n    std::cerr << std::endl;\n}\ntemplate <typename T>\nvoid dump_matrix(const Matrix<T, 2> & matrix) {\n    EACH (x, matrix) {\n        dump_matrix<T>(x);\n    }\n}\n\ntemplate <typename C>\nvoid dump_set(const C &container) {\n    EACH(c, container) {\n        dump(c);\n    }\n}\ntemplate <typename C>\nvoid dump_seq(const C &container) {\n    int index = 0;\n    EACH(c, container) {\n        dump(index, c);\n        index += 1;\n    }\n}\ntemplate <typename C>\nvoid dump_map(const C &container) {\n    EACH(c, container) {\n        const auto &key = c.first;\n        const auto &value = c.second;\n        std::cerr << key << \"\\t:\" << value << std::endl;\n    }\n}\n\n// Hash\nnamespace std {\n    template <class F, class S>\n    struct hash<pair<F, S>> {\n        size_t operator ()(const pair<F, S> &p) const {\n            return hash<F>()(p.first) ^ hash<S>()(p.second);\n        }\n    };\n\n    template <class ...Args>\n    struct hash<tuple<Args...>> {\n        size_t operator ()(const tuple<Args...> &t) const {\n            size_t retval = 0;\n\n            internal::tuple_utils::for_each<internal::tuple_utils::hash_for_element, size_t, Args...>(retval, t);\n\n            return retval;\n        }\n    };\n}\n#define MAIN\nvoid body();\n\n// main function (DO NOT EDIT)\nint main (int argc, char **argv) {\n    cin.tie(0);\n    ios_base::sync_with_stdio(false);\n\n    cout << fixed;\n    body();\n\n    return 0;\n}\n\nvoid body() {\n    auto N = read<i64>();\n    auto exp = read<string>(N + N - 1);\n    auto As = Vector<i64>(N);\n    auto ops = Vector<string>(N);\n    ops[0] = \"+\";\n    REP (i, N) {\n        As[i] = atol(exp[i * 2].c_str());\n        if (i + 1 != N) ops[i + 1] = exp[i * 2 + 1];\n    }\n\n    /*\n     * dp[n][m] = ???n?????m????????????????\n     *\n     * m >= 3?????????\n     * x1 ... xn - (y1 ... yn - (z1 ... zn - (w1 ... wn\n     * = x1 .. xn - (y1 ... yn - (z1 ... zn)) - (w1 ... wn\n     * ?????????\n     */\n    auto dp = make_matrix<i64, 2>({N + 1, 3}, 0);\n    i64 max_m = 0;\n    REP (i, N) {\n        auto n = i + 1;\n        auto A = As[i];\n        auto op = ops[i];\n        if (op == \"-\") {\n            max_m += 1;\n            max_m = min(i64(3), max_m);\n        }\n        REP (m, min(i64(3), max_m + 1)) {\n            // dp[n][m]???\n            i64 result = numeric_limits<i64>::min();\n            if (op == \"+\") {\n                /*\n                 * ... + A\n                 *\n                 * 1. dp[n-1][m] + A\n                 * 2. dp[n-1][m+x] + A)...) x??????\n                 * ????\n                 *\n                 * 1???A?????(-1)^m\n                 * 2???A?????(-1)^(m-x)\n                 */\n                FOR (m2, m, max_m + 1) {\n                    if (m == 3) continue;\n                    auto sign = (m2%  2 == 0) ? 1 : -1;\n                    result = std::max(result, dp[n - 1][m2] + sign * A);\n                }\n            } else {\n                /*\n                 * ... - (A\n                 *\n                 * 1. dp[n-1][m-1] - (A\n                 * 2. dp[n-1][m+x] - (A)...) x+1??????\n                 *\n                 * 1???A?????(-1)^m\n                 * 2???A??????(-1)^(m+x+1)\n                 */\n                FOR (m2, m - 1, max_m) {\n                    if (m2 < 0) continue ;\n                    auto sign = ((m2 + 1) % 2 == 0) ? 1 : -1;\n                    result = std::max(result, dp[n - 1][m2] + sign * A);\n                }\n            }\n            dp[n][m] = result;\n        }\n    }\n\n    cout << dp[N][0] << endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <stdio.h>\n#include <math.h>\n#include <string.h>\n#include <time.h>\n#include <stdlib.h>\n#include <string>\n#include <bitset>\n#include <vector>\n#include <set>\n#include <map>\n#include <queue>\n#include <algorithm>\n#include <sstream>\n#include <stack>\n#include <iomanip>\nusing namespace std;\n#define pb push_back\n#define mp make_pair\ntypedef pair<int,int> pii;\ntypedef long long ll;\ntypedef double ld;\ntypedef vector<int> vi;\n#define fi first\n#define se second\n#define fe first\n#define FO(x) {freopen(#x\".in\",\"r\",stdin);freopen(#x\".out\",\"w\",stdout);}\n#define Edg int M=0,fst[SZ],vb[SZ],nxt[SZ];void ad_de(int a,int b){++M;nxt[M]=fst[a];fst[a]=M;vb[M]=b;}void adde(int a,int b){ad_de(a,b);ad_de(b,a);}\n#define Edgc int M=0,fst[SZ],vb[SZ],nxt[SZ],vc[SZ];void ad_de(int a,int b,int c){++M;nxt[M]=fst[a];fst[a]=M;vb[M]=b;vc[M]=c;}void adde(int a,int b,int c){ad_de(a,b,c);ad_de(b,a,c);}\n#define es(x,e) (int e=fst[x];e;e=nxt[e])\n#define esb(x,e,b) (int e=fst[x],b=vb[e];e;e=nxt[e],b=vb[e])\n#define SZ 666666\n#define S 4\nint n,a[SZ];\nll f[S+1]; char o[SZ];\nint main()\n{\n\tmemset(f,-127/3,sizeof f);\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<n;++i)\n\t\tscanf(\"%d%s\",a+i,o+i+1);\n\tscanf(\"%d\",a+n);\n\tf[0]=0;\n\tfor(int i=n;i>=2;--i)\n\t{\n\t\tfor(int j=1;j<=S;++j)\n\t\t\tf[j]=max(f[j],f[j-1]);\n\t\tif(o[i]=='-')\n\t\t{\n\t\t\tfor(int j=1;j<=S;++j) f[j-1]=max(f[j-1],f[j]);\n\t\t\tfor(int j=0;j<=S;++j) f[j]-=(j&1)?(-a[i]):a[i];\n\t\t}\n\t\telse\n\t\t\tfor(int j=0;j<=S;++j) f[j]+=(j&1)?(-a[i]):a[i];\n\t}\n\tprintf(\"%lld\\n\",f[0]+a[1]);\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstdio>\n#include <map>\n#include <set>\n#include <queue>\n#include <vector>\n#include <cstring>\n#include <cstdlib>\n#include <algorithm>\n#define rep(i,a,b) for(int i = a; i <= b; i++)\n#define dep(i,a,b) for(int i = a; i >= b; i--) \n#define Rep(i,a) for(int i = 0; i < a; i++)\n#define pb(a) push_back(a)\n#define mp(a,b) make_pair(a,b)\n#define ab(x) ((x) < 0 ? -(x) : (x))\nusing namespace std;\ntypedef long long LL;\ntypedef map<int, int>::iterator mit;\ntypedef set<int ,int>::iterator sit;\nconst int N = 100010;\nchar c;\nint a[N]; bool b[N];\nLL s[N], sa[N];\nint main() {\n\tint n; scanf(\"%d\",&n);\n\trep(i,1,n) {\n\t\tscanf(\"%d\",&a[i]);\n\t\tif (i < n) {\n\t\t\tc = getchar(); while (c != '-' && c != '+') c = getchar();\n\t\t\tif (c == '-') b[i + 1] = true; else b[i + 1] = false;\n\t\t}\n\t}\n\tdep(i,n,1) sa[i] = sa[i + 1] + a[i];\n\trep(i,1,n) if (b[i]) a[i] = -a[i];\n\trep(i,1,n) s[i] = s[i - 1] + a[i];\n\tLL ans = s[n]; int last = 0;\n\trep(i,1,n) if (b[i]) {\n\t\tif (last) {\n\t\t\tans = max(ans, s[last] - (sa[last + 1] - sa[i]) + sa[i]);\n\t\t}\n\t\tlast = i;\n\t}\n\tcout <<ans<<endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\nusing ll=long long;\n\nint n;\nvector<int> a;\n\nll calc() {\n    ll dp[3];\n    dp[1] = dp[2] = -(1ll<<60);\n    dp[0] = 0;\n    for (int x: a) {\n        dp[0] += x;\n        dp[1] -= x;\n        dp[2] += x;\n        if (x < 0) {\n            dp[2] = max(dp[2], dp[1]);\n            dp[1] = max(dp[1], dp[0]);\n        }\n        dp[0] = max(dp[0], dp[1]);\n        dp[1] = max(dp[1], dp[2]);\n    }\n    return dp[0];\n}\nll calc2() {\n    ll base = 0;\n    ll pos = 0;\n    ll neg = 0;\n    ll mx = 0;\n    for (int i = n-1; i >= 0; i--) {\n        int x = a[i];\n        base += x;\n        if (x < 0) {\n            mx = max(mx, (-neg-pos)*2);\n            pos = 0;\n            neg += x;\n        } else pos += x;\n    }\n    return base + mx;\n}\n\nvoid solve() {\n    cin >> n; a.resize(n);\n    for (int i = 0; i < n; i++) {\n        char c = '+';\n        if (i) cin >> c;\n        cin >> a[i];\n        if (c=='-') a[i]*=-1;\n    }\n    ll x = calc();\n    ll y = calc2();\n    assert(x == y);\n    cout << y << \"\\n\";\n}\n\nint main() {\n    ios_base::sync_with_stdio(false);\n    cin.tie(NULL);\n    solve();\n    cout << endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<vector>\n#include<cstring>\n#include<queue>\n#include<algorithm>\nusing namespace std;\nconst long long MAXN=100005,INF=4223372036854775807ll;\nlong long n;\nlong long d[MAXN][3];\nlong long a;\nint main()\n{\n\tscanf(\"%lld\",&n);\n\tchar s[100];\n\tscanf(\"%lld\",&a);\n\tfor(long long i=0;i<=n+1;i++)\n\t{\n\t\td[i][0]=d[i][1]=d[i][2]=-INF;\n\t}\n\td[1][0]=a;\n\tfor(long long i=2;i<=n;i++)\n\t{\n\t\tscanf(\"%s\",s);\n\t\tscanf(\"%lld\",&a);\n\t\tif(s[0]=='+')\n\t\t{\n\t\t\td[i][0]=max(d[i-1][0]+a,d[i-1][1]+a);\n\t\t\td[i][1]=max(d[i-1][2]-a,d[i-1][1]-a);\n\t\t\td[i][2]=d[i-1][2]+a;\n\t\t}\n\t\tif(s[0]=='-')\n\t\t{\n\t\t\td[i][0]=max(d[i-1][0]-a,d[i-1][1]-a);\n\t\t\td[i][1]=max(max(d[i-1][0]-a,d[i-1][1]+a),d[i-1][2]+a);\n\t\t\td[i][2]=max(d[i-1][1]+a,d[i-1][2]-a);\n\t\t}\n\t}\n\tprintf(\"%lld\\n\",max(max(d[n][0],d[n][1]),d[n][2]));\n}"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<algorithm>\n#define fo(i,a,b) for(i=a;i<=b;i++)\nusing namespace std;\ntypedef long long ll;\nconst int maxn=100000+10;\nconst ll inf=1000000000000000000;\nint a[maxn];\nchar s[maxn];\nll f0,f1,f2;\nint i,j,k,l,t,n,m;\nint read(){\n\tint x=0,f=1;\n\tchar ch=getchar();\n\twhile (ch<'0'||ch>'9'){\n\t\tif (ch=='-') f=-1;\n\t\tch=getchar();\n\t}\n\twhile (ch>='0'&&ch<='9'){\n\t\tx=x*10+ch-'0';\n\t\tch=getchar();\n\t}\n\treturn x*f;\n}\nchar get(){\n\tchar ch=getchar();\n\twhile (ch!='+'&&ch!='-') ch=getchar();\n\treturn ch;\n}\nint main(){\n\tn=read();a[0]=read();\n\tn--;\n\tfo(i,1,n){\n\t\ts[i]=get();\n\t\ta[i]=read();\n\t}\n\tf0=a[0];f1=f2=-inf;\n\tfo(i,1,n){\n\t\tif (s[i]=='-'){\n\t\t\tf0-=(ll)a[i];\n\t\t\tf1+=(ll)a[i];\n\t\t\tf2-=(ll)a[i];\n\t\t\tif (f1>f2) f2=f1;\n\t\t\tif (f0>f1) f1=f0;\n\t\t}\n\t\telse{\n\t\t\tf0+=(ll)a[i];\n\t\t\tf1-=(ll)a[i];\n\t\t\tf2+=(ll)a[i];\n\t\t}\n\t\tif (f2>f1) f1=f2;\n\t\tif (f1>f0) f0=f1;\n\t}\n\tprintf(\"%lld\\n\",f0);\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define REP(i, n) for (int i = 0; (i) < (int)(n); ++ (i))\n#define REP3(i, m, n) for (int i = (m); (i) < (int)(n); ++ (i))\n#define ALL(x) begin(x), end(x)\nusing ll = long long;\nusing namespace std;\ntemplate <class T, class U> inline void chmax(T & a, U const & b) { a = max<T>(a, b); }\n\nll solve(int n, vector<int> const & a, vector<char> const & op) {\n    array<ll, 3> cur, prv;\n    fill(ALL(cur), LLONG_MIN);\n    cur[0] = a[0];\n    REP3 (i, 1, n) {\n        cur.swap(prv);\n        fill(ALL(cur), LLONG_MIN);\n        auto sign = [&](int j) { return (j % 2 == 0 ? +1 : -1); };\n        if (op[i - 1] == '+') {\n            REP (j, 3) {\n                if (prv[j] != LLONG_MIN) {\n                    chmax(cur[j], prv[j] + sign(j) * a[i]);   // ... + a_i\n                }\n                if (j + 1 < n and prv[j + 1] != LLONG_MIN) {\n                    chmax(cur[j], prv[j + 1] + sign(j) * a[i]);  // ...) + a_i\n                }\n            }\n        } else if (op[i - 1] == '-') {\n            REP (j, 3) {\n                if (j >= 1 and prv[j] != LLONG_MIN) {\n                    chmax(cur[j], prv[j] + sign(j) * a[i]);  // ...) - (a_i\n                }\n                if (j - 1 >= 0 and prv[j - 1] != LLONG_MIN) {\n                    chmax(cur[j], prv[j - 1] + sign(j) * a[i]);  // ... - (a_i\n                }\n            }\n        } else {\n            assert (false);\n        }\n    }\n    return *max_element(ALL(cur));  // ... )))\n}\n\nint main() {\n    int n; cin >> n;\n    vector<int> a(n);\n    vector<char> op(n - 1);\n    REP (i, n - 1) {\n        cin >> a[i] >> op[i];\n    }\n    cin >> a[n - 1];\n    cout << solve(n, a, op) << endl;\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<stdio.h>\n#include<stdlib.h>\n#include<string.h>\n#include<math.h>\n#include<iostream>\n#include<algorithm>\n#include<stack>\n#include<queue>\n#include<vector>\n#include<set>\n#include<map>\n#include<string>\nusing namespace std;\ntypedef long long ll;\ntypedef pair<int,int>P;\nconst int INF=0x3f3f3f3f;\nconst double pi=acos(-1.0);\nconst double eps=1e-9;\nconst ll mod=1e9+7;\nll dp[100010][3];\nll a;char c;int n;\nint main()\n{\n    cin>>n>>a;\n    memset(dp,-0x3f3f3f3f3f3f3f3f,sizeof(dp));\n    dp[0][0]=a;\n    for(int i=1;i<n;i++)\n    {\n        scanf(\" %c%d\",&c,&a);\n        if(c=='+')\n        {\n            dp[i][2]=dp[i-1][2]+a;\n            dp[i][1]=max(dp[i-1][1]-a,dp[i-1][2]+a);\n            dp[i][0]=max(dp[i-1][0]+a,max(dp[i-1][1]-a,dp[i-1][2]+a));\n        }\n        else\n        {\n            dp[i][2]=max(dp[i-1][1]+a,dp[i-1][2]-a);\n            dp[i][0]=dp[i][1]=max(dp[i-1][1]+a,max(dp[i-1][2]-a,dp[i-1][0]-a));\n        }\n    }\n    printf(\"%lld\\n\",max(dp[n-1][0],max(dp[n-1][1],dp[n-1][2])));\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <ctime>\n#include <cstdio>\n#include <cstdlib>\n#include <cstring>\n#include <cassert>\n#include <algorithm>\n#include <iostream>\n#include <vector>\n#include <queue>\n#include <stack>\n#include <deque>\n#include <set>\n#include <map>\nusing namespace std;\n\ntypedef long long ll;\ntypedef double lf;\ntypedef long double Lf;\ntypedef pair <int,int> pii;\ntypedef pair <ll, ll> pll;\n\n#define TRACE(x) cerr << #x << \"  \" << x << endl\n#define FOR(i, a, b) for (int i = (a); i < int(b); i++)\n#define REP(i, n) FOR(i, 0, n)\n#define all(x) (x).begin(), (x).end()\n#define _ << \" \" <<\n\n#define fi first\n#define sec second\n#define mp make_pair\n\nconst int MAXN = 100100;\nconst ll inf = (1LL << 60);\n\nint n;\nll p[MAXN], p1[MAXN], dp[MAXN][4];\n\nll rek(int a, int t) {\n\tif (a == n) return 0;\n\tif (t == 4) return -(1LL << 54);\n\tif (dp[a][t] != -1) return dp[a][t];\n\n\tll ret = -inf;\n\t\n\tif (t) ret = max(ret, rek(a, t - 1));\n\tint b = t % 2;\n\t\n\tif (!(b ^ p1[a])) ret = max(ret, rek(a + 1, t) + p[a]);\n\telse ret = max(ret, rek(a + 1, t) - p[a]);\n\t\n\tif (p1[a]) {\n\t\tint B = !b;\n\t\tif (!B) ret = max(ret, rek(a + 1, t + 1) + p[a]);\n\t\tif (B) ret = max(ret, rek(a + 1, t + 1) - p[a]);\n\t}\n\n\treturn dp[a][t] = ret;\n}\n\nint main() {\n\tscanf(\"%d\",&n);\n\tscanf(\"%lld\",&p[0]);\n\tREP(i, n - 1) {\n\t\tchar s[2];\n\t\tscanf(\"%s %lld\",s,&p[i + 1]);\n\t\tif (s[0] == '-') p1[i + 1] = 1;\n\t}\n\n\tmemset(dp, -1, sizeof dp);\n\tprintf(\"%lld\\n\",rek(0, 0));\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n\nusing namespace std;\n\ntypedef long long ll;\ntypedef pair<int, int> PII;\n\nconst int MM = 1e9 + 7;\nconst double eps = 1e-8;\nconst int MAXN = 2e6 + 10;\nconst ll INF = 1ll << 60;\n\nint n, m;\n\nll f[MAXN][2];\n\nint a[MAXN];\n\nvoid prework(){\n\n}\n\nint b[MAXN];\n\nvoid read(){\n\tscanf(\"%d\", &n);\n\tfor(int i = 1; i <= n; i++){\n\t\tscanf(\"%d\", &a[i]);\n\t\tchar s[10];\n\t\tif (i < n){\n\t\t\tscanf(\"%s\", s);\n\t\t\tif (s[0] == '+')\n\t\t\t\tb[i + 1] = 1;\n\t\t\telse\n\t\t\t\tb[i + 1] = -1;\n\t\t}\n\t}\n\tb[0] = b[1] = 1;\n\tf[0][0] = 0;\n\tf[0][2] = f[0][1] = -INF;\n\tfor(int i = 1; i <= n; i++){\n\t\tif (b[i] == 1){\n\t\t\tf[i][1] = max(f[i-1][1] - a[i], f[i-1][2] + a[i]);\n\t\t\tf[i][2] = f[i-1][2] + a[i];\n\t\t\tf[i][0] = max(f[i-1][0] + a[i], f[i][1]);\n\t\t}\n\t\telse{\n\t\t\tf[i][2] = max(f[i-1][1] + a[i], f[i-1][2] - a[i]);\n\t\t\tf[i][0] = max(f[i-1][0] - a[i], f[i][2]);\n\t\t\tf[i][1] = f[i][0];\n\t\t}\n\t\t//cout<<f[i][0]<<' '<<f[i][1]<<endl;\n\t}\n\tcout<<max(f[n][1],max(f[n][0], f[n][2]))<<endl;\n}\n\nvoid solve(int casi){\n\n}\n\nvoid printans(){\n\n}\n\n\nint main(){\n\tprework();\n\tint T = 1;\n//\tcin>>T;\n\tfor(int i = 1; i <= T; i++){\n\t\tread();\n\t\tsolve(i);\n\t\tprintans();\n\t}\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nlong long a[100054];\nint b[100054];\n\nint main() {\n\tint i, n = 0, m, x; long long s = 0, ans = LLONG_MAX; char op[4];\n\tfor (scanf(\"%d%lld\", &m, a); --m; )\n\t\tscanf(\"%s%d\", op, &x), *op == 43 ? a[n] += x : (++n, a[n] = b[n] = x);\n\tfor (++n, i = 1; i <= n; ++i) ans = std::min(ans, s + a[i]), s += b[i];\n\tprintf(\"%lld\\n\", std::accumulate(a, a + n, -2 * ans));\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\ntypedef long long ll;\nconst int maxn = 1e5 + 5;\n\ninline int gi()\n{\n\tchar c = getchar();\n\twhile (c < '0' || c > '9') c = getchar();\n\tint sum = 0;\n\twhile ('0' <= c && c <= '9') sum = sum * 10 + c - 48, c = getchar();\n\treturn sum;\n}\n\ninline int gc()\n{\n\tchar c = getchar();\n\twhile (c != '-' && c != '+') c = getchar();\n\treturn c == '+' ? 1 : -1;\n}\n\ninline void chkmax(ll &a, ll b) {if (a < b) a = b;}\n\nint n, a[maxn], b[maxn], pw[3];\nll f[maxn][3];\n\nint main()\n{\n\tn = gi();\n\ta[1] = gi(); b[1] = 1;\n\tfor (int i = 2; i <= n; ++i) b[i] = gc(), a[i] = gi();\n\n\tmemset(f, -63, sizeof(f));\n\tf[1][0] = a[1];\n\tpw[0] = pw[2] = 1; pw[1] = -1;\n\tfor (int i = 1; i <= n; ++i) {\n\t\tfor (int j = 0; j <= 2; ++j)\n\t\t\tif (f[i][j] > -1e18) {\n\t\t\t\tchkmax(f[i + 1][j], f[i][j] + a[i + 1] * b[i + 1] * pw[j]);\n\t\t\t\tif (j) chkmax(f[i + 1][j - 1], f[i][j] + a[i + 1] * b[i + 1] * pw[j - 1]);\n\t\t\t\tif (b[i + 1] < 0 && j < 2) chkmax(f[i + 1][j + 1], f[i][j] + a[i + 1] * b[i + 1] * pw[j]);\n\t\t\t\tif (b[i + 1] < 0 && j) chkmax(f[i + 1][j], f[i][j] + a[i + 1] * b[i + 1] * pw[j - 1]);\n\t\t\t}\n\t}\n\n\tprintf(\"%lld\\n\", max(f[n][0], max(f[n][1], f[n][2])));\n\t\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\nconst int S=(1<<20)+5;\nchar buf[S],*H,*T;\ninline char Get()\n{\n    if(H==T) T=(H=buf)+fread(buf,1,S,stdin);\n    if(H==T) return -1;return *H++;\n}\ninline int read()\n{\n    int x=0;char c=Get();\n    while(!isdigit(c)) c=Get();\n    while(isdigit(c)) x=x*10+c-'0',c=Get();\n    return x;\n}\ninline int readopt()\n{\n    char c=Get();\n    while(c!='+'&&c!='-') c=Get();\n    return c;\n}\n\nconst int INF=0x3f3f3f3f;\nconst int N=100010;\nint num[N],n;\nchar opt[N];\nint f[2][3],k;\n\nint main()\n{\n    n=read();\n    num[0]=read();\n    for(int i=1;i<n;i++)\n    {\n        opt[i]=readopt();\n        num[i]=read();\n    }\n    f[k=0][0]=num[0];\n    f[0][1]=f[0][2]=-INF;\n    for(int i=1;i<n;i++,k^=1)\n    {\n        if(opt[i]=='+')\n        {\n            f[k^1][0]=max(max(f[k][0],f[k][1]),f[k][2])+num[i];  //原地转移 或 拆1/2个括号\n            f[k^1][1]=max(f[k][1],f[k][2])-num[i];  //原地转移 或 拆1个括号\n            f[k^1][2]=f[k][2]+num[i];  //原地转移\n        }\n        else\n        {\n            f[k^1][0]=max(max(f[k][0],f[k][1]),f[k][2])-num[i];  //原地转移 或 拆1/2个括号\n            f[k^1][1]=max(max(f[k][1],f[k][2])+num[i],f[k][0]-num[i]);  //原地转移 或 拆1个括号 或 添1个括号\n            f[k^1][2]=max(f[k][2]-num[i],f[k][1]+num[i]);  //原地转移 或 添1个括号\n        }\n    }\n    int ans=max(max(f[k][0],f[k][1]),f[k][2]);\n    printf(\"%d\\n\",ans);\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<cstring>\n#include<algorithm>\nusing namespace std;\n#define N 100005\n#define LL long long\nint a[N],op[N];\nLL sum[N];\nchar s[4];\nint main()\n{\n\tint n,i,j;\n\tscanf(\"%d%d\",&n,&a[1]);op[1]=1;\n\tfor(i=2;i<=n;i++){\n\t\tscanf(\"%s%d\",s,&a[i]);\n\t\tif(s[0]=='-')op[i]=-1;\n\t\telse op[i]=1;\n\t}\n\tfor(i=n;i>=1;i--)sum[i]=sum[i+1]+a[i];\n\tLL s1=0,s2,ans=-0x3f3f3f3f3f3f3f3fll;\n\tfor(i=2;i<=n;i++){\n\t\ts1+=1ll*a[i-1]*op[i-1];\n\t\tif(op[i]==-1){\n\t\t\ts2=1ll*a[i];\n\t\t\tfor(j=i+1;j<=n;j++){\n\t\t\t\tif(op[j]==-1)break;\n\t\t\t\ts2+=1ll*a[j];\n\t\t\t}\n\t\t\tans=max(ans,s1-s2+sum[j]);\n\t\t}\n\t}\n\tprintf(\"%lld\",ans);\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\ntypedef unsigned long long int ull;\ntypedef long long int ll;\ntypedef pair<ll,ll> pll;\ntypedef long double D;\n//typedef complex<D> P;\n#define F first\n#define S second\nconst ll MOD=1000000007;\n//const ll MOD=998244353;\n\ntemplate<typename T,typename U>istream & operator >> (istream &i,pair<T,U> &A){i>>A.F>>A.S; return i;}\ntemplate<typename T>istream & operator >> (istream &i,vector<T> &A){for(auto &I:A){i>>I;} return i;}\ntemplate<typename T,typename U>ostream & operator << (ostream &o,const pair<T,U> &A){o<<A.F<<\" \"<<A.S; return o;}\ntemplate<typename T>ostream & operator << (ostream &o,const vector<T> &A){int i=A.size(); for(auto &I:A){o<<I<<(--i?\" \":\"\");} return o;}\n\nconst ll INF=1e16;\n\nint main(){\n  cin.tie(0);\n  ios::sync_with_stdio(false);\n  ll N;\n  cin>>N;\n  vector<ll> A(N);\n  vector<char> op(N,'+');\n  for(int i=0;i<N;i++){\n    if(i!=0){cin>>op[i];}\n    cin>>A[i];\n  }\n  vector<ll> dp1(N+1,-INF);\n  vector<ll> dp2(N+1,-INF);\n  vector<ll> dp3(N+1,-INF);\n  dp1[0]=0;\n  for(int i=0;i<N;i++){\n    if(op[i]=='+'){\n      dp1[i+1]=max(dp1[i+1],dp1[i]+A[i]);\n      dp1[i+1]=max(dp1[i+1],dp2[i]+A[i]);\n      dp1[i+1]=max(dp1[i+1],dp3[i]+A[i]);\n      dp2[i+1]=max(dp2[i+1],dp2[i]-A[i]);\n      dp2[i+1]=max(dp2[i+1],dp3[i]-A[i]);\n      dp3[i+1]=max(dp3[i+1],dp3[i]+A[i]);\n    }\n    else{\n      dp1[i+1]=max(dp1[i+1],dp2[i]+A[i]);\n      dp1[i+1]=max(dp1[i+1],dp3[i]+A[i]);\n      dp2[i+1]=max(dp2[i+1],dp1[i]-A[i]);\n      dp2[i+1]=max(dp2[i+1],dp2[i]-A[i]);\n      dp2[i+1]=max(dp2[i+1],dp3[i]-A[i]);\n      dp3[i+1]=max(dp3[i+1],dp2[i]+A[i]);\n      dp3[i+1]=max(dp3[i+1],dp3[i]+A[i]);\n    }\n  }\n  //cout<<dp1<<endl;\n  //cout<<dp2<<endl;\n  dp1.back()=max(dp1.back(),dp3.back());\n  cout<<max(dp1.back(),dp2.back())<<endl;\n\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\ntypedef long long ll;\n\ninline ll Max(const ll a,const ll b){return a>b?a:b;}\n\nint n,k;\nchar c;\nll f0,f1=-1e18,f2=-1e18,v0,v1,v2;\n\nint main()\n{\n    for(scanf(\"%d%d\",&n,&f0);--n;)\n    {\n        scanf(\" %c%d\",&c,&k),k=c=='+'?k:-k;\n        v0=f0+k,v1=f1-k,v2=f2+k,f0=Max(v0,Max(v1,v2));\n        if(c=='+')f1=Max(v1,v2),f2=v2;\n        else f1=Max(v0,f2=Max(v1,v2));\n    }\n    return printf(\"%lld\\n\",f0);\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<functional>\n#include <algorithm>\n#include  <iostream>\n#include   <ctype.h>\n#include   <cstring>\n#include   <fstream>\n#include    <cstdio>\n#include    <vector>\n#include    <string>\n#include     <cmath>\n#include     <deque>\n#include     <stack>\n#include     <queue>\n#include      <list>\n#include       <set>\n#include       <map>\n#define INF 0X7FFFFFFF\n#define PI acos(-1.0)\ntypedef long long ll;\nusing namespace std;\nconst int mod = 1e9 + 7;\ninline int getint()\n{\n\tint w = 0, q = 0;\n\tchar c = getchar();\n\twhile ((c<'0' || c>'9') && c != '-') c = getchar();\n\tif (c == '-') q = 1, c = getchar();\n\twhile (c >= '0'&&c <= '9') w = w * 10 + c - '0', c = getchar();\n\treturn q ? -w : w;\n}\nint n;\nll a[100005];\nchar c[100005];\nint main() {\n\tn = getint();\n\tint i = 0;\n\tll ans = 0;\n\tll sum = 0;\n\twhile (i < n) {\n\t\ta[i] = getint();\n\t\tsum += a[i];\n\t\tif (i != 0 && c[i - 1] == '-') {\n\t\t\tans -= a[i];\n\t\t}\n\t\telse {\n\t\t\tans += a[i];\n\t\t}\n\t\tif (i == n - 1) {\n\t\t\tbreak;\n\t\t}\n\t\tc[i] = getchar();\n\t\ti++;\n\t}\n\tint flag = 1;\n\tll t = ans;\n\tll m = sum;\n\tfor (int i = 0; i < n - 1; i++) {\n\t\tif (c[i] == '-') {\n\t\t\tsum = m;\n\t\t\tm -= a[i + 1] * 2;\n\t\t\tsum -= a[i + 1] * 2;\n\t\t\tint j = i + 1;\n\t\t\twhile (j < n) {\n\t\t\t\tif (c[j] == '+') {\n\t\t\t\t\tsum -= a[j + 1] * 2;\n\t\t\t\t\tj++;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tt = max(t, sum);\n\t\t}\n\t}\n\tans = max(t, ans);\n\tcout << ans << endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <algorithm>\n#include <cstring>\nusing namespace std;\n\ntypedef long long i64;\nconst int MAX_N = 100005;\n\ni64 f[MAX_N][3];\n\ninline void update(i64 &x, i64 y) {\n  if (x < y) x = y;\n}\n\nint main() {\n  int N, A;\n  scanf(\"%d\", &N);\n  memset(f, -0x3f, sizeof f);\n\n  scanf(\"%d\", &A), f[0][0] = A;\n  \n  for (int i = 1; i < N; ++i) {\n    static char op[10];\n    scanf(\"%s\", op);\n    scanf(\"%d\", &A);\n    for (int j = 0; j < 3; ++j) {\n      int val = (j & 1) ? 1 : 0, w;\n      if (*op == '-') val ^= 1;\n      w = A * (val & 1 ? -1 : 1);\n      if (*op == '-' && j < 2) update(f[i][j + 1], f[i - 1][j] + w);\n      if (j > 0) update(f[i][j - 1], f[i - 1][j] + w);\n      update(f[i][j], f[i - 1][j] + w);\n    }\n  }\n\n  printf(\"%lld\\n\", f[N - 1][0]);\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n#define REP(i, n) for (int i = 0; i < int(n); ++i)\n#define REPE(i, a, b) for (int i = (a); i <= int(b); ++i)\nusing LL = long long;\n\nint n;\nLL b;\nLL a[100010];\nint t[100010];\n\nLL dp[100010][5];\nbool v[100010][5];\nLL f(int x, int y) {\n  if (y == 5) y -= 2;\n  if (x >= n) return 0;\n  LL &ret = dp[x][y];\n  if (v[x][y]) return ret;\n  v[x][y] = true;\n  if (t[x] == 1) {\n    if (y == 0)\n      return ret = f(x + 1, y + 1) - a[x];\n    else if (~y & 1) {\n      return ret = max(f(x + 1, y) + a[x], f(x + 1, y + 1) - a[x]);\n    }\n    else\n      return ret = f(x + 1, y + 1) + a[x];\n  } else {\n    if (~y & 1)\n      return ret = f(x + 1, y) + a[x];\n    else\n      return ret = max(f(x + 1, y - 1) + a[x], f(x + 1, y) - a[x]);\n  }\n  return ret;\n}\n\nint main() {\n  scanf(\"%d%lld\", &n, &b);\n  n--;\n  char s[4];\n  REP(i, n) {\n    scanf(\"%s%lld\", s, &a[i]);\n    t[i] = s[0] == '+' ? 0 : 1;\n  }\n  cout << b + f(0, 0) << endl;\n  return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n#define lor(a,b,c) for(register int a=b;a<=c;++a)\n#define ror(a,b,c) for(register int a=c;a>=b;--a)\ntypedef long long ll;\n\nconst int N=1e5+5;\nint n,nxt[N]; ll a[N],sum[N],abssum[N],ans;\n\ntemplate <typename T> inline T read(){\n\tchar tmp=getchar(); T sum=0; bool flag=false;\n\twhile(tmp<'0'||tmp>'9'){\n\t\tif(tmp=='-') flag=true; tmp=getchar();\n\t}\n\twhile(tmp>='0'&&tmp<='9'){\n\t\tsum=(sum<<1)+(sum<<3)+tmp-'0'; tmp=getchar();\n\t}\n\treturn flag?-sum:sum;\n}\n\nint main(){\n\t#ifndef ONLINE_JUDGE\n\tfreopen(\"test.in\",\"r\",stdin);\n\t#endif\n\n\tn=read<int>(); lor(i,1,n) a[i]=read<ll>(),sum[i]=sum[i-1]+a[i],abssum[i]=abssum[i-1]+abs(a[i]); ans=sum[n];\n\tnxt[n+1]=n+1; sum[n+1]=sum[n]; abssum[n+1]=abssum[n]; ror(i,1,n) {if(a[i+1]<0) nxt[i]=i+1; else nxt[i]=nxt[i+1];}\n\tlor(i,1,n) if(a[i]<0){\n\t\tans=max(ans,sum[i-1]+(abssum[n]-abssum[nxt[i]-1])-(abssum[nxt[i]-1]-abssum[i-1]));\n\t}\n\tprintf(\"%lld\\n\",ans);\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\ntypedef long long LL;\nint N;\nchar op[100010];\nint v[100010];\nLL INF = LL(1e17);\nLL s1[100010],s2[100010];\n\n//A-(B-(C-(D-E)))  = A-B+C-D+E  = A-(B-C) - (D-E)\nvector <int> negpos; \n\nint main()\n{\n\tscanf(\"%d\",&N);\n\tscanf(\"%d\",&v[1]);\n\ts1[0] = s2[0] = 0;\n\top[1] = '+';\n\tfor (int i=2;i<=N;i++)\n\t{\n\t\tscanf(\" %c %d\",&op[i],&v[i]);\n\t\tif (op[i] == '-') negpos.push_back(i);\n\t}\n\tfor (int i=1;i<=N;i++)\n\t{\n\t\ts1[i] = s1[i-1] + LL(v[i]) * (op[i]=='+'?1:-1);\n\t\ts2[i] = s2[i-1] + LL(v[i]);\n\t}\n\t//for (int i=1;i<=N;i++)printf(\"%d %c %I64d %I64d\\n\",v[i],op[i],s1[i],s2[i]);\n\tLL ans = s1[N];\n\tint SZ = negpos.size();\n\tfor (int i=0;i<SZ-1;i++)\n\t{\n\t\tint p1,p2;\n\t\tp1 = negpos[i];\n\t\tp2 = negpos[i+1];\n\t\t//printf(\"%d %d %I64d\\n\",p1,p2,s1[p1-1] - (s1[p2-1]-s1[p1-1]) + (s2[N]-s2[p2-1]));\n\t\tans = max(ans,s1[p1-1] - (s2[p2-1]-s2[p1-1]) + (s2[N]-s2[p2-1]));\n\t}\n\tcout<<ans<<endl;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define ll long long\n#define lf double\n#define E complex<lf>\n#define eps 1e-9\n#define inf 0x7fffffff\n#define l(x) (x<<1)\n#define r(x) (x<<1|1)\n#define pa pair<int,int>\n#define pb push_back\n#define mod\n#define FIO \"problem\"\n#define N 100010\nusing namespace std;\ninline int read() {\n\tint x=0,f=1;char c=getchar();\n\twhile (c<'0'||c>'9') f=(c=='-')?-1:1,c=getchar();\n\twhile (c>='0'&&c<='9') x=x*10+c-'0',c=getchar();\n\treturn x*f;\n}\ninline void fre() {\n\tfreopen(FIO\".in\",\"r\",stdin);\n\tfreopen(FIO\".out\",\"w\",stdout);\n}\nint n;\nint num[N],opt[N];\nll sum;\nint sta[N],top=0;\nint main() {\n\tn=read();\n\tfor (int i=1; i<n; i++) {\n\t\tnum[i]=read(),sum+=num[i];\n\t\tchar s[5];\n\t\tscanf(\"%s\",s);\n\t\tif (s[0]=='-') opt[i]=-1;\n\t\telse opt[i]=1;\n\t}\n\tnum[n]=read(),sum+=num[n];\n\tll ans=-inf,hhh=0;\n\tfor (int i=1; i<n; i++) if (opt[i]==-1) {\n\t\tll tmp=sum;\n\t\tll sum2=num[i+1];\n\t\tfor (int j=i+1; j<n; j++) {\n\t\t\tif (opt[j]==1) sum2+=num[j+1];\n\t\t\telse break;\n\t\t}\n\t\ttmp-=2*(sum2+hhh);\n\t\tans=max(ans,tmp);\n\t\thhh+=num[i+1];\n\t}\n\tans=max(ans,sum-2*hhh);\n\tcout << ans << endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define INF (1e15)\n#define int long long\nusing namespace std;\n\nint n, dp[100005][3];\nchar C[100005];\nint A[100005];\n\nvoid solve(){\n  \n  for(int i=0;i<=n;i++)\n    for(int j=0;j<3;j++) dp[i][j]=-INF;\n  \n  dp[1][0]=A[0];\n  \n  for(int i=1;i<n;i++){\n    \n    for(int j=0;j<3;j++){\n      \n      if(dp[i][j]==-INF) continue;\n      \n      char c=C[i];\n      int num=A[i];  \n      \n      if(c=='+'){\n\t\n\tif(j==0) dp[i+1][0]=max(dp[i+1][0], dp[i][j]+num);\n\t\n\tif(j==1){\n\t  dp[i+1][0]=max(dp[i+1][0], dp[i][j]+num);\n\t  dp[i+1][1]=max(dp[i+1][1], dp[i][j]-num);\n\t}\n\tif(j==2){\n\t  dp[i+1][1]=max(dp[i+1][1], dp[i][j]-num);\n\t  dp[i+1][2]=max(dp[i+1][2], dp[i][j]+num);\n\t}\n\t    \n      } else{\n\t\n\tif(j==0){\n\t  dp[i+1][0]=max(dp[i+1][0], dp[i][j]-num);\n\t  dp[i+1][1]=max(dp[i+1][1], dp[i][j]-num);\n\t}\n\tif(j==1){\n\t  dp[i+1][0]=max(dp[i+1][0], dp[i][j]-num);\n\t  dp[i+1][1]=max(dp[i+1][1], dp[i][j]+num);\n\t  dp[i+1][2]=max(dp[i+1][2], dp[i][j]+num);\n\t}\n\tif(j==2){\n\t  dp[i+1][1]=max(dp[i+1][1], dp[i][j]-num);\n\t  dp[i+1][2]=max(dp[i+1][2], dp[i][j]+num);\n\t}\n\t\t\n      }\n      \n    }\n  }\n  \n  int ans=-INF;\n  \n  for(int i=0;i<3;i++) ans=max(ans, dp[n][i]);\n  \n  cout<<ans<<endl;\n}\n\nsigned main(){\n  \n  cin>>n;\n  \n  cin>>A[0];\n  \n  for(int i=1;i<n;i++) cin>>C[i]>>A[i];\n  \n  solve();\n  \n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<stdio.h>\n#include<stdlib.h>\n#include<string.h>\n#include<math.h>\n#include<iostream>\n#include<algorithm>\n#include<stack>\n#include<queue>\n#include<vector>\n#include<set>\n#include<map>\n#include<string>\nusing namespace std;\ntypedef long long ll;\ntypedef pair<int,int>P;\nconst int INF=0x3f3f3f3f;\nconst double pi=acos(-1.0);\nconst double eps=1e-9;\nconst ll mod=1e9+7;\nll dp[100010][5];\nll a;char c;int n;\nint main()\n{\n    cin>>n>>a;\n    memset(dp,-0x3f3f3f3f3f3f3f3f,sizeof(dp));\n    dp[0][0]=a;\n    for(int i=1;i<n;i++)\n    {\n        scanf(\" %c%d\",&c,&a);\n        if(c=='+')\n        {\n            dp[i][2]=dp[i-1][2]+a;\n            dp[i][1]=max(dp[i-1][1]-a,dp[i-1][2]+a);\n            dp[i][0]=max(dp[i-1][0]+a,max(dp[i-1][1]-1,dp[i-1][2]+a));\n        }\n        else\n        {\n            dp[i][2]=max(dp[i-1][1]+a,dp[i-1][2]-a);\n            dp[i][1]=max(dp[i-1][1]+a,max(dp[i-1][2]-a,dp[i-1][0]-a));\n        }\n\n    }\n    printf(\"%lld\\n\",max(dp[n-1][0],max(dp[n-1][1],dp[n-1][2])));\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\n//#define FILE_IO\n\ntypedef long long LL;\n\nconst LL INF = (1LL << 60);\n\nint N;\nLL v[100005];\nLL dp[100005][4];\n\nint gint()\n{\n    char ch = getchar();\n    int sgn = 1;\n    while(ch < '0' || '9' < ch)\n    {\n        if(ch == '-')   sgn = -1;\n        ch = getchar();\n    }\n    int x = 0;\n    while('0' <= ch && ch <= '9')\n    {\n        x = x * 10 + ch - '0';\n        ch = getchar();\n    }\n    x *= sgn;\n    return x;\n}\n\nint main()\n{\n    #ifdef FILE_IO\n    freopen(\"1.in\", \"r\", stdin);\n    freopen(\"1.out\", \"w\", stdout);\n    #endif\n\n    N = gint();\n    for(int i = 1; i <= N; i++)\n        v[i] = gint();\n\n    dp[0][0] = 0, dp[0][1] = dp[0][2] = dp[0][3] = -INF;\n    for(int i = 1; i <= N + 1; i++)\n    {\n        dp[i][0] = max( max(dp[i - 1][0], dp[i - 1][1]), max(dp[i - 1][2], dp[i - 1][3]) ) + v[i];\n        dp[i][1] = max( dp[i - 1][1], max(dp[i - 1][2], dp[i - 1][3]) ) - v[i];\n        dp[i][2] = max(dp[i - 1][2], dp[i - 1][3]) + v[i];\n        dp[i][3] = dp[i - 1][3] - v[i];\n\n        if(v[i] > 0)    continue;\n\n        dp[i][1] = max(dp[i][1], dp[i - 1][0] + v[i]);\n        dp[i][2] = max(dp[i][2], dp[i - 1][1] - v[i]);\n        dp[i][3] = max(dp[i][3], dp[i - 1][2] + v[i]);\n    }\n\n    printf(\"%lld\\n\", dp[N + 1][0]);\n\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef pair<ll, ll> P;\n\n#define fi first\n#define se second\n#define repl(i,a,b) for(ll i=(ll)(a);i<(ll)(b);i++)\n#define rep(i,n) repl(i,0,n)\n#define all(x) (x).begin(),(x).end()\n#define dbg(x) cout<<#x\"=\"<<x<<endl\n#define mmax(x,y) (x>y?x:y)\n#define mmin(x,y) (x<y?x:y)\n#define maxch(x,y) x=mmax(x,y)\n#define minch(x,y) x=mmin(x,y)\n#define uni(x) x.erase(unique(all(x)),x.end())\n#define exist(x,y) (find(all(x),y)!=x.end())\n#define bcnt __builtin_popcount\n\n#define INF 9e18\n#define mod 1000000007\n\nll n;\nll st;\nll dp[3];\n\nint main(){\n  cin>>n>>st;\n  dp[0]=st;dp[1]=-INF;dp[2]=-INF;\n  rep(i,n-1){\n    char c;\n    ll a;\n    cin>>c>>a;\n    ll nxt[3];\n    nxt[0]=nxt[1]=nxt[2]=-INF;\n    if(c=='+'){\n      maxch(nxt[0],dp[0]+a);\n\n      maxch(nxt[1],dp[1]-a);\n      maxch(nxt[0],dp[1]+a);\n\n      maxch(nxt[2],dp[2]+a);\n      maxch(nxt[1],dp[2]-a);\n      maxch(nxt[0],dp[2]+a);\n    }else{\n      maxch(nxt[0],dp[0]-a);\n      maxch(nxt[1],dp[0]-a);\n\n      maxch(nxt[1],dp[1]+a);\n      maxch(nxt[0],dp[1]-a);\n      maxch(nxt[2],dp[1]+a);\n\n      maxch(nxt[2],dp[2]-a);\n      maxch(nxt[1],dp[2]+a);\n      maxch(nxt[0],dp[2]-a);\n    }\n    dp[0]=nxt[0]; dp[1]=nxt[1]; dp[2]=nxt[2];\n  }\n  cout<<*max_element(dp,dp+3)<<endl;\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<cstring>\n#include<iostream>\n#include<cstdio>\n#define int long long\n#define maxn 100005\nusing namespace std;\ntypedef long long ll;\npair<int, char> a[maxn];\nll st[maxn];\nll p[maxn];\nll c[maxn], b[maxn];\nsigned main() {\n\tint n;\n\tcin >> n;\n\tchar s[2];\n\tfor(int i=1; i<=n; i++) {\n\t\tscanf(\"%d\",&a[i].first);\n\t\tif(i < n) {\n\t\t\tscanf(\"%s\",s);\n\t\t\ta[i].second = s[0];\n\t\t}\n\t}\n\ta[0] = make_pair(0,'&');\n\tint z=0;\n\tfor(int i=1; i<=n; i++) {\n\t\tchar op = a[i-1].second;\n\t\tif(op == '-') {\n\t\t\ta[i].first *= -1;\n\t\t\tst[++z] = a[i].first;\n\t\t}\n\t\tint pre = a[i-1].first;\n\t\tif(pre <= 0 && a[i].first > 0) {\n\t\t\tst[++z] = a[i].first;\n\t\t}\n\t\tif(pre > 0 && a[i].first > 0) {\n\t\t\tst[z] += a[i].first;\n\t\t}\n\t}\n\tc[z] = abs(st[z]);\n\tfor(int i=z-1; i>=1; i--) c[i] = c[i+1] + abs(st[i]);\n\tfor(int i=1; i<=z; i++) p[i] = p[i-1] + st[i];\n\tll ans = p[z];\n\tfor(int i=1; i<z; i++) {\n\t\tif(st[i+1] < 0) ans = max(ans,p[i+1]-st[i+2]+c[i+3]);\n\t}\n\tcout << ans << endl;\n}"
  },
  {
    "language": "C++",
    "code": "// Math = ♥\n// Sometimes it is people that no one imagines anything of who do things that no one can imagine\n// After all this time? Always\n\n#include <bits/stdc++.h>                        // uncomment before submission\n//#include <ext/pb_ds/assoc_container.hpp>\t\t// uncomment before submission\n//#include <ext/pb_ds/tree_policy.hpp>\t\t\t// uncomment before submission\n//using namespace __gnu_pbds;\t\t\t\t\t// uncomment before submission\nusing namespace std;\n//<---------------------------------------------------Template----------------------------------------------------------->\n#define int long long\n#define ll long long\n#define ld long double\nint INF = 1e9 + 7;\ntypedef pair<ll, ll> ii;\ntypedef vector<ll> vi;                  // Vector of long long\ntypedef vector<vi> vvi;                 // Vector of vi\ntypedef vector<ii> vii;                 // Vector of pairs\ntypedef vector<vii> vvii;               // Vector of Vector of pairs\ntypedef vector<bool> vb;                // Vector of bool\n#define pq priority_queue               // Max heap (To convert to min heap, use negative sign before every value)\n#define ff first                        // For pairs\n#define ss second                       // For pairs\n#define pb push_back                    // Pushback to vector\n#define mp make_pair                    // Makes pairs to be stored as pair\n#define all(c) (c).begin(), (c).end()   // Mainly used by me in sorting\n// ordered_set adds two new functions to set - (set).find_by_order([kth element based on zero indexing]) and order_of_key()\n// order_of_key returns number of elements less that parameter. If element exists, that order is its index\n#define ordered_set tree<ll, null_type, less<ll>, rb_tree_tag, tree_order_statistics_node_update>\n//<----------------------------------------------------------------------------------------------------------------------->\n\nsigned main()\n{\n    ios_base::sync_with_stdio(false);\n    cin.tie(NULL);\n    int n;\n    cin >> n;\n\n    vector<char> op;\n    vi num;\n\n    int x;\n    cin >> x, num.pb(x);\n    for (int i = 0; i < n - 1; i++)\n    {\n        char ch;\n        cin >> ch >> x;\n        op.pb(ch), num.pb(x);\n    }\n\n    vvi dp(n, vector<int>(3));\n    dp[0][0] = num[0];\n    dp[0][1] = -INF;\n    dp[0][2] = -INF;\n\n    for (int i = 1; i < n; i++)\n    {\n        if (op[i - 1] == '+')\n        {\n            dp[i][1] = dp[i - 1][1] - num[i];\n            dp[i][2] = dp[i - 1][2] + num[i];\n            dp[i][0] = max(dp[i - 1][0], dp[i - 1][1]) + num[i];\n        } else\n        {\n            dp[i][1] = max(dp[i - 1][0], dp[i - 1][1]) - num[i];\n            dp[i][2] = max(dp[i - 1][1], dp[i - 1][2]) + num[i];\n            dp[i][0] = -INF;\n        }\n        dp[i][0] = max(dp[i][0], max(dp[i][1], dp[i][2]));\n        dp[i][1] = max(dp[i][1], dp[i][2]);\n    }\n\n    int a[] = {dp[n - 1][0], dp[n - 1][1], dp[n - 1][2]};\n    sort(a, a + 3);\n\n    cout << a[2] << endl;\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#include <ext/pb_ds/assoc_container.hpp> // Common file\n#include <ext/pb_ds/tree_policy.hpp> // Including tree_order_statistics_node_update\n#define int         int64_t\n#define ii          pair<int,int>\n#define dd          pair<double,double>\n#define vi          vector<int>\n#define pb          push_back\n#define all(x)      (x).begin(), (x).end()\n#define checkBit(v, p)      (v&(1LL << p))\n#define loop(i,a,b) for(int i = a;i < int(b);i++)\n#define x           first\n#define y           second\nusing namespace std;\nint inf = 4e18;\nint32_t main()\n{\n    ios_base::sync_with_stdio(false); cout << fixed <<setprecision(0);\n    int n; cin >> n;\n    int res = 0;\n    vi arr(n), ps(n), ps2(n);\n    vector<char> si(n);\n    si[0] = '+';\n    for(int i=0;i<n;i++){\n        if(i) cin >> si[i];\n        cin >> arr[i];\n        if(i) ps[i] = ps[i-1] - arr[i];\n        else ps[0] = arr[0];\n        res += arr[i] * (si[i] == '+' ? 1 : -1);\n    }\n    for(int i=1, sum = 0;i<n;i++){\n        sum += arr[i-1] * (si[i-1] == '+' ? 1 : -1);\n        if(i < n-1 && si[i+1] == '-') res = max(res, sum - arr[i] - (ps.back() - ps[i]));\n    }\n    cout << res<<endl;\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <stdio.h>\n#include <stdlib.h>\n#include <string.h>\n#include <memory.h>\n#include <math.h>\n#include <assert.h>\n#include <stack>\n#include <queue>\n#include <map>\n#include <set>\n#include <algorithm>\n#include <string>\n#include <functional>\n#include <vector>\n#include <deque>\n#include <utility>\n#include <bitset>\n#include <limits.h>\n#include <time.h>\n#include <functional>\n#include <numeric>\n\nusing namespace std;\ntypedef long long ll;\ntypedef unsigned long long llu;\ntypedef double lf;\ntypedef unsigned int uint;\ntypedef long double llf;\ntypedef pair<int, int> pii;\ntypedef pair<ll, int> pli;\n\nconst int N_ = 100500;\n\nint N;\nint A[N_]; ll S[N_];\nchar op[N_];\n\nll ans;\n\nint main() {\n  scanf(\"%d\", &N);\n  for(int i = 1; i <= N-1; i++) {\n    char s[2];\n    scanf(\"%d%s\", &A[i], s);\n    S[i] = S[i-1] + A[i];\n    op[i] = *s;\n  }\n  scanf(\"%d\", &A[N]);\n  S[N] = S[N-1] + A[N];\n\n  int j = N;\n  for(int i = N-1; i > 0; i--) {\n    if(op[i] == '+') {\n      ans += A[i+1];\n    }else {\n      ans = max(ans, S[N] + S[i+1] - 2 * S[j]) - A[i+1];\n      j = i;\n    }\n  }\n\n  ans += A[1];\n  printf(\"%lld\\n\", ans);\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\nconst int maxn=1e5+10;\nconst ll inf=1e18;\nll a[maxn];\nll dp[3][maxn];\nchar op[10];\nint main(){\n    int n;\n    scanf(\"%d\",&n);\n    scanf(\"%lld\",&a[1]);\n    for(int i=2;i<=n;i++) {\n        scanf(\"%s %lld\",op,&a[i]);\n        if(op[0]=='-')a[i]=-a[i];\n    }\n    for(int i=0;i<maxn;i++) dp[1][i]=dp[2][i]=-inf;\n    ll ans=0;\n    dp[0][0]=0;\n    for(int i=1;i<=n;i++){\n        if(a[i]>=0){\n            dp[0][i]=max(max(dp[0][i-1]+a[i],dp[1][i-1]-a[i]),dp[2][i-1]+a[i]);\n            dp[1][i]=dp[1][i-1]==-inf?-inf:max(dp[1][i-1]-a[i],dp[2][i-1]+a[i]);\n            dp[2][i]=dp[2][i-1]==-inf?-inf:dp[2][i-1]+a[i];\n        }else {\n            dp[0][i]=max(dp[0][i-1]+a[i],max(dp[1][i-1]-a[i],dp[2][i-1]+a[i]));\n            dp[1][i]=max(dp[1][i-1]-a[i],max(dp[0][i-1]+a[i],dp[2][i-1]+a[i]));\n            dp[2][i]=max(dp[2][i-1]+a[i],dp[1][i-1]-a[i]);\n        }\n    }\n//    for(int i=1;i<=n;i++) cout<<dp[0][i]<<\" \";\n//    cout<<endl;\n//    for(int i=1;i<=n;i++) cout<<dp[1][i]<<\" \";\n//    cout<<endl;\n    cout<<max(dp[0][n],max(dp[1][n],dp[2][n]))<<endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\ntemplate<class T>bool chmax(T &a, const T &b) { if (a<b) { a=b; return true; } return false; }\ntemplate<class T>bool chmin(T &a, const T &b) { if (b<a) { a=b; return true; } return false; }\n#define all(x) (x).begin(),(x).end()\n#define fi first\n#define se second\n#define mp make_pair\n#define si(x) int(x.size())\nconst int mod=998244353,MAX=100005;\nconst ll INF=1LL<<60;\nll dp[MAX][3];\n\nint main(){\n    \n    std::ifstream in(\"text.txt\");\n    std::cin.rdbuf(in.rdbuf());\n    cin.tie(0);\n    ios::sync_with_stdio(false);\n    \n    int N;cin>>N;\n    vector<ll> A(N),B(N);\n    cin>>A[0];\n    for(int i=1;i<N;i++){\n        char c;cin>>c;\n        if(c=='-') B[i]=1;\n        cin>>A[i];\n    }\n    \n    for(int i=0;i<=N;i++){\n        for(int j=0;j<3;j++){\n            dp[i][j]=-INF;\n        }\n    }\n    dp[0][0]=0;\n    \n    for(int i=0;i<N;i++){\n        if(!B[i]){\n            chmax(dp[i+1][0],dp[i][0]+A[i]);\n            chmax(dp[i+1][0],dp[i][1]-A[i]);\n            \n            chmax(dp[i+1][1],dp[i][1]-A[i]);\n            chmax(dp[i+1][1],dp[i][2]+A[i]);\n            \n            chmax(dp[i+1][2],dp[i][2]+A[i]);\n        }else{\n            chmax(dp[i+1][0],dp[i][0]-A[i]);\n            \n            chmax(dp[i+1][1],dp[i][0]-A[i]);\n            chmax(dp[i+1][1],dp[i][1]+A[i]);\n            \n            chmax(dp[i+1][2],dp[i][1]+A[i]);\n            chmax(dp[i+1][2],dp[i][2]+A[i]);\n        }\n    }\n    \n    ll ans=-INF;\n    \n    for(int j=0;j<3;j++) chmax(ans,dp[N][j]);\n    \n    cout<<ans<<endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<cstring>\n#include<algorithm>\n#include<vector>\n#define MAXN 100000\nusing namespace std;\ntypedef long long LL;\nvector<int> vec;\nLL sum[MAXN+5],sum2[MAXN+5],a[MAXN+5];\nint n;\nbool dec[MAXN+5];\nchar str[5];\nint main()\n{\n\tscanf(\"%d\",&n);\n\tscanf(\"%lld\",&a[1]);\n\tfor(int i=2;i<=n;i++)\n\t{\n\t\tscanf(\"%s %lld\",str,&a[i]);\n\t\tif(str[0]=='-')\n\t\t\tvec.push_back(i),dec[i]=true;\n\t}\n\tfor(int i=1;i<=n;i++)\n\t\tsum[i]=sum[i-1]+a[i];\n\tfor(int i=1;i<=n;i++)\n\t\tif(dec[i]==true)\n\t\t\tsum2[i]=sum2[i-1]-a[i];\n\t\telse\n\t\t\tsum2[i]=sum2[i-1]+a[i];\n\tLL ans=sum2[n];\n\tint pos1,pos2;\n\tfor(int i=0;i<(int)vec.size()-1;i++)\n\t{\n\t\tpos1=vec[i],pos2=vec[i+1];\n\t\tans=max(ans,sum2[pos1]-(sum[pos2-1]-sum[pos1])+(sum[n]-sum[pos2-1]));\n\t}\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<vector>\n#include<algorithm>\n#include<set>\n#include<map>\n#include<unordered_map>\n#include<stack>\n#include<queue>\n#include<iomanip>\n#include<math.h>\n#include<bitset>\n#include<cassert>\n#include<random>\n#include<time.h>\n#include<functional>\nusing namespace std;\nusing ll=long long;\nusing ld=long double;\nusing pint=pair<int,int>;\nusing pll=pair<ll,ll>;\n#define MOD 1000000007LL\n#define INF 1000000000LL\n#define EPS 1e-10\n#define FOR(i,n,m) for(ll i=n;i<(ll)m;i++)\n#define REP(i,n) FOR(i,0,n)\n#define DUMP(a) REP(d,a.size()){cout<<a[d];if(d!=a.size()-1)cout<<\" \";else cout<<endl;}\n#define ALL(v) v.begin(),v.end()\n#define UNIQUE(v)  sort(ALL(v));v.erase(unique(ALL(v)),v.end());\n#define pb push_back\n\nint main() {\n\tcin.tie(0);\n\tios::sync_with_stdio(false);\n\tll n;\n\tcin >> n;\n\tvector<ll> a(n);\n\tvector<char> op(n);\n\tREP(i, n) {\n\t\tcin >> a[i];\n\t\tif(i != n - 1) cin >> op[i + 1];\n\t}\n\tvector<ll> revacm(n); revacm[n - 1] = a[n - 1];\n\tfor(ll i = n - 2; i >= 0; i--) {\n\t\trevacm[i] = revacm[i + 1] + a[i];\n\t}\n\tll ans = - INF * INF, sum = a[0];\n\tFOR(i, 1, n) {\n\t\tif(op[i] == '-') {\n\t\t\tsum += - a[i];\n\t\t\tll tmp = 0, idx = -1;\n\t\t\tFOR(j, i + 1, n) {\n\t\t\t\tif(op[j] == '-') {\n\t\t\t\t\tidx = j;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\ttmp += a[j];\n\t\t\t}\n\t\t\tif(idx != -1) ans = max(ans, sum - tmp + revacm[idx]);\n\t\t} else {\n\t\t\tsum += a[i];\n\t\t}\n\t}\n\tans = max(ans, sum);\n\tcout << ans << endl;\n\treturn 0;\n}\n\n/* --------------------------------------- */\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\ntypedef long long  LL;\nint n,a[100010];\nLL s,s2,ans;\nchar op[100010];\n\nvoid work()\n{\n\tscanf(\"%d %d\",&n,&a[1]),s=a[1];\n\tfor (int i=2; i<=n; i++)\n\t\t{\n\t\t\tdo  op[i]=getchar();  while ((op[i]!='+')&&(op[i]!='-'));\n\t\t\tscanf(\"%d\",&a[i]);\n\t\t\tif (op[i]=='+')  s+=a[i];  else  s+=a[i];\n\t\t}\n\tans=-1LL<<60,op[n+1]='-',s2=1LL<<60;\n\tfor (int i=1; i<=n+1; i++)\n\t\tif (op[i]=='-')  ans=max(ans,s-s2),s2=0,s-=2*a[i];\n\t\telse  s2+=2*a[i];\n\tprintf(\"%lld\",max(ans,s));\n}\n\nint main()\n{\n\twork();\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "// Math = ♥️\n\n#include <bits/stdc++.h>\n#include <ext/pb_ds/assoc_container.hpp>\n#include <ext/pb_ds/tree_policy.hpp>\nusing namespace __gnu_pbds;\nusing namespace std;\n\n/*-------------------------------------------------------------------------------------------------------------------------*/\n#define ll long long                  // Short form for long long\n#define ld long double                // Short form for long double\ntypedef pair<ll, ll> ii;              // Pair of long long\ntypedef vector<ll> vi;                // Vector of long long\ntypedef vector<vi> vvi;               // Vector of vector of long long\ntypedef vector<ii> vii;               // Vector of pairs\ntypedef vector<vii> vvii;             // Vector of vector of pairs\n#define pq priority_queue             // Max heap (To convert to min heap, use negative sign before every value)\n#define ff first                      // For pairs\n#define ss second                     // For pairs\n#define pb push_back                  // Pushback to vector\n#define mp make_pair                  // Makes pairs to be stored as pair\n#define all(c) (c).begin(), (c).end() // Mainly used by me in sorting\n// ordered_set adds two new functions to set - (set).find_by_order([kth element based on zero indexing]) and order_of_key()\n// order_of_key returns number of elements less that parameter. If element exists, that order is its index\n#define ordered_set tree<ll, null_type, less<ll>, rb_tree_tag, tree_order_statistics_node_update>\n/*-------------------------------------------------------------------------------------------------------------------------*/\n#define MAXN (ll)(1e5 + 5)\n\nll dp[MAXN][3];\nll n;\nvi arr;\n\nll solve(ll i, ll t)\n{\n    if (i == n)\n        return 0;\n\n    if (dp[i][t] == -1)\n    {\n        if (t == 0)\n        {\n            if (arr[i] < 0)\n                dp[i][t] = arr[i] + max(solve(i + 1, 0), solve(i + 1, 1));\n            else\n                dp[i][t] = arr[i] + solve(i + 1, 0);\n        }\n        else if (t == 1)\n        {\n            ll maxi = max(solve(i + 1, 0) + arr[i], solve(i + 1, 1) - arr[i]);\n            if (arr[i] < 0)\n                maxi = max(maxi, solve(i + 1, 2) - arr[i]);\n            dp[i][t] = maxi;\n        }\n        else\n            dp[i][t] = max(arr[i] + solve(i + 1, 2), max(-arr[i] + solve(i + 1, 1), arr[i] + solve(i + 1, 0)));\n    }\n    return dp[i][t];\n}\n\nint main(void)\n{\n    ios_base::sync_with_stdio(false);\n    cin.tie(NULL);\n\n    memset(dp, -1, sizeof(dp));\n    cin >> n;\n    arr.resize(n);\n\n    cin >> arr[0];\n\n    for (int i = 1; i < n; i++)\n    {\n        char c;\n        cin >> c >> arr[i];\n\n        if (c == '-')\n            arr[i] = -arr[i];\n    }\n\n    cout << solve(0, 0) << \"\\n\";\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstdio>\n#include<algorithm>\n#include<cstring>\n\nusing namespace std;\n\nconst int MAXN = 100100;\ntypedef long long LL;\nchar opt[MAXN];\nint n,kind = 0;\nLL val[MAXN],ans = 0,sum[MAXN];\n\ntemplate<typename T>\nvoid read(T &x)\n{\n\tx = 0;\n\tchar ch = getchar();\n\twhile(ch < '0' || ch > '9') ch = getchar();\n\twhile(ch >= '0' && ch <= '9')\n\t\tx = x * 10 + ch - '0',ch = getchar();\n}\n\nvoid init()\n{\n\tLL t1 = val[1],t2 = 0,temp;\n\tfor(int i = 1;i <= n-1;i++)\n\t{\n\t\tif(opt[i] == '+')\n\t\t{\n\t\t\tt1 += val[i+1];\n\t\t\tcontinue;\n\t\t} \n\t\tint now = i+1;temp = -val[i+1];\n\t\twhile(now < n && opt[now] == '+')\n\t\t{\n\t\t\tnow++;\n\t\t\ttemp -= val[now];\n\t\t}\n\t//\tprintf(\"%d\\n\",t1+t2+temp+sum[n]-sum[now]);\n\t\tans = max(ans,t1 + t2 + temp + sum[n] - sum[now]);\n\t\tt2 -= val[i+1];\n\t}\n}\n\nint main()\n{\n\t//freopen(\"T2.in\",\"r\",stdin);\n\tread(n);\n\tfor(int i = 1;i <= n;i++)\n\t{\n\t\tread(val[i]);\n\t\tsum[i] = sum[i-1] + val[i];\n\t\tif(i != n) cin >> opt[i];\n\t}\n\tinit();\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long LL;\n\nconst int N=1e5+100;\nint n,a[N];\nchar op[N];\nLL f[N][3];\n\nvoid cmax(LL &x,LL y) {x=x>y?x:y;}\n\nint main()\n{\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;++i)\n\t{\n\t\tscanf(\"%d\",&a[i]); op[i]='!';\n\t\tif(i == n) break;\n\t\twhile(op[i] != '+' && op[i] != '-') op[i]=getchar();\n\t}\n\tmemset(f,0xcf,sizeof(f)); f[1][0]=a[1];\n\tfor(int i=1;i<n;++i)\n\t{\n\t\tif(op[i] == '-') cmax(f[i+1][1],f[i][0]-a[i+1]);\n\t\tif(op[i] == '+') cmax(f[i+1][0],f[i][0]+a[i+1]);\n\t\tif(op[i] == '-') cmax(f[i+1][0],f[i][0]-a[i+1]);\n\t\t\n\t\tif(op[i] == '+') cmax(f[i+1][1],f[i][1]-a[i+1]);\n\t\tif(op[i] == '-') cmax(f[i+1][1],f[i][1]+a[i+1]);\n\t\t//if(op[i] == '-') cmax(f[i+1][1],f[i][1]-a[i+1]);\n\t\tif(op[i] == '-') cmax(f[i+1][2],f[i][1]+a[i+1]);\n\t\tif(op[i] == '+') cmax(f[i+1][0],f[i][1]+a[i+1]);\n\t\tif(op[i] == '-') cmax(f[i+1][0],f[i][1]-a[i+1]);\n\t\t\n\t\tif(op[i] == '+') cmax(f[i+1][2],f[i][2]+a[i+1]);\n\t\t//if(op[i] == '-') cmax(f[i+1][2],f[i][2]-a[i+1]);\n\t\tif(op[i] == '-') cmax(f[i+1][2],f[i][2]+a[i+1]);\n\t\tif(op[i] == '+') cmax(f[i+1][0],f[i][2]+a[i+1]);\n\t\tif(op[i] == '-') cmax(f[i+1][0],f[i][2]-a[i+1]);\n\t\tif(op[i] == '-') cmax(f[i+1][1],f[i][2]-a[i+1]);\n\t}\n\tprintf(\"%lld\",max(f[n][0],max(f[n][1],f[n][2])));\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "//Relive your past life.\n//Face your demons.\n//The past is never dead,it is not even past.\n//The memories are not only the key to the past but...also to the future.\n//coded in Rusty Lake\n#include<cmath>\n#include<math.h>\n#include<ctype.h>\n#include<algorithm>\n#include<bitset>\n#include<cassert>\n#include<cctype>\n#include<cerrno>\n#include<cfloat>\n#include<ciso646>\n#include<climits>\n#include<clocale>\n#include<complex>\n#include<csetjmp>\n#include<csignal>\n#include<cstdarg>\n#include<cstddef>\n#include<cstdio>\n#include<cstdlib>\n#include<cstring>\n#include<ctime>\n#include<cwchar>\n#include<cwctype>\n#include<deque>\n#include<exception>\n#include<fstream>\n#include<functional>\n#include<iomanip>\n#include<ios>\n#include<iosfwd>\n#include<iostream>\n#include<istream>\n#include<iterator>\n#include<limits>\n#include<list>\n#include<locale>\n#include<map>\n#include<memory>\n#include<new>\n#include<numeric>\n#include<ostream>\n#include<queue>\n#include<set>\n#include<sstream>\n#include<stack>\n#include<stdexcept>\n#include<streambuf>\n#include<string>\n#include<typeinfo>\n#include<utility>\n#include<valarray>\n#include<vector>\n#include<string.h>\n#include<stdlib.h>\n#include<stdio.h>\n#define ll   long long\n#define pb   push_back\n#define mp   make_pair\n#define orz  1000000007ll\n//作者:中国江苏南京丁天行\nusing namespace std;\nint n;\nll f[100005],s[100005],ans,sum;\nint c[100005],a[100005];\nint main(){\n    scanf(\"%d\",&n);\n    c[1]=1;\n    scanf(\"%d\",a+1);\n    for(int i=2;i<=n;++i){\n        char in;\n        scanf(\" %c%d\",&in,a+i);\n        if(in=='+')c[i]=1;\n        else c[i]=-1;\n    }\n    for(int i=n;i;--i)s[i]=abs(a[i])+s[i+1];\n    c[n+1]=-1;\n    ans=-orz*n;\n    for(int i=1;i<=n;++i){\n        if(c[i]==-1){\n            ll add=a[i];\n            int k=i+1;\n            while(c[k]==1)add+=a[k++];\n            ans=max(ans,sum-add+s[k]);\n        }\n        sum+=a[i]*c[i];\n    }\n    ans=max(ans,sum);\n    printf(\"%lld\\n\",ans);\n//\tsystem(\"pause\");\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\n#define rep(i , l , r) for(int i = (l) , ___ = (r) ; i <= ___ ; ++i)\n#define per(i , r , l) for(int i = (r) , ___ = (l) ; i >= ___ ; --i)\n\ntemplate<typename T>inline int chkmin(T &x , const T &y) { return x > y ? x = y , 1 : 0; }\ntemplate<typename T>inline int chkmax(T &x , const T &y) { return x < y ? x = y , 1 : 0; }\n\ntemplate<typename T>inline T read(T &f)\n{\n\tf = 0 ; int x = 1 ; char c = getchar();\n\twhile(!isdigit(c)) x = c == '-' ? -1 : 1 , c = getchar();\n\twhile(isdigit(c)) (f *= 10) += c & 15 , c = getchar();\n\treturn f *= x;\n}\n\nconst int N = 200000 + 5;\n\nusing int64 = long long;\n\nint n , cnt , A[N] , col[N] ;\n\nint64 s[N] , sum[N] , sl[N];\n\nint main()\n{\n\tread(n);\n\trep(i , 1 , n)\n\t{\n\t\tstatic char op[3] , last = 0;\n\t\tstatic int lastval = 0;\n\t\tread(A[i]) , last = op[0];\n\t\tif(i < n) scanf(\"%s\" , op);\n\t\tif(last == '-')\n\t\t{\n\t\t\tA[i] = -A[i];\n\t\t\tcol[++cnt] = -1;\n\t\t\ts[cnt] = A[i];\n\t\t}\n\t\tif(lastval <= 0 && A[i] > 0) s[++cnt] = A[i];\n\t\tif(lastval > 0 && A[i] > 0) s[cnt] += A[i];\n\t\tlastval = A[i];\n\t}\n\tper(i , cnt , 1)\n\t{\n\t\tsum[i] = sum[i + 1] + abs(s[i]);\n\t}\n\tint64 Ans = -(1ll << 60) , ret = 0;\n\trep(i , 1 , cnt)\n\t{\n\t\tsl[i] = sl[i - 1] + s[i];\n\t}\n\tcerr << cnt << endl;\n\trep(i , 1 , cnt)\n\t{\n\t\tif(col[i + 1] == -1)\n\t\t{\n\t\t\tchkmax(Ans , sl[i + 1] - s[i + 2] + sum[i + 3]);\n\t\t}\n\t}\n\tchkmax(Ans , sl[cnt]);\n\tcout << Ans << endl;\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <cstdlib>\n#include <cstring>\n#include <iostream>\n#include <algorithm>\ntypedef long long ll;\n#define rep(i, a, b) for (int i = a; i <= b; ++ i)\nusing namespace std;\nconst int maxn = 100010;\nint n; ll b[maxn], c[maxn];\nstruct epoch { int op; ll ave; } a[maxn];\nint main() {\n\tscanf(\"%d\", &n); char ch[10]; \n\tscanf(\"%lld\", &a[1].ave);\n\trep(i, 2, n) {\n\t\tscanf(\"%s%lld\", ch, &a[i].ave);\n\t\tif (ch[0] == '-') a[i].op = 1;\n\t}\n\trep(i, 1, n) b[i] = b[i - 1] + a[i].ave; int las = 0;\n\trep(i, 1, n) c[i] = c[i - 1] + ((a[i].op) ? - a[i].ave : a[i].ave);\n\tll ans = c[n];\n\trep(i, 1, n) if (a[i].op) {\n\t\tif (!las) {\n\t\t\tlas = i;\n\t\t\tcontinue;\n\t\t}\n\t\tans = max(ans, c[las] - (c[i - 1] - c[las]) + b[n] - b[i - 1]);\n\t\tlas = i;\n\t}\n\tprintf(\"%lld\", ans);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<iomanip>\n#include<map>\n#include<unordered_map>\n#include<set>\n#include<unordered_set>\n#include<vector>\n#include<array>\n#include<string>\n#include<stack>\n#include<queue>\n#include<algorithm>\n#include<cassert>\n#include<functional>\n#include<random>\n#include<complex>\n#include<bitset>\n#include<chrono>\n//#include<boost/multiprecision/cpp_int.hpp>\n#define int int64_t\n#define uint uint64_t\n#define REP(i, a, b) for (int64_t i = (int64_t)(a); i < (int64_t)(b); i++)\n#define rep(i, a) REP(i, 0, a)\n#define SZ(X) ((int64_t)((X).size()))\n#define ITR(x, a) for (auto x = a.begin(); x != a.end(); x++)\n#define ALL(a) (a.begin()), (a.end())\n#define HAS(a, x) (a.find(x) != a.end())\n#define Min(x) *min_element(ALL(x))\n#define Max(x) *max_element(ALL(x))\n#define Unique(L) (L.erase(unique(ALL(L)), L.end()))\n#define intmax (std::numeric_limits<int64_t>::max() / 4)\n#define doublemax (std::numeric_limits<double>::max() / 4)\nusing namespace std;\n//typedef boost::multiprecision::cpp_int bigint;\nconst double EPS = 1e-9;\nconst double PI = acos(-1.0);\n\n//sort(ALL(v),greater<int>());\nclass segtree_sum_pointupdate {\nprivate:\n\ttypedef int T;\npublic:\n\tsegtree_sum_pointupdate(const int N) {\n\t\tSIZE = roundup_pow2(N);\n\t\tv.clear();\n\t\tv.resize(SIZE * 2, 0);\n\t}\n\n\t//v[index]=numberとする。\n\tvoid update(const int index, const T number) {\n\t\tv[index + SIZE] = number;\n\t\tfor (int i = (index + SIZE) / 2; i; i = i / 2)v[i] = v[i * 2] + v[i * 2 + 1];\n\t}\n\n\t//[index]の値を返す。\n\tT getnum(const int index) {\n\t\treturn v[index + SIZE];\n\t}\n\n\t//[L,R)の総和を返す。\n\tT getsum(const int L, const int R) {\n\t\treturn getsum_inner(L, R, 1, 0, SIZE);\n\t}\nprivate:\n\tT getsum_inner(const int queryL, const int queryR, const int index, const int segL, const int segR) {\n\t\tif (queryR <= segL || segR <= queryL)return 0;\n\t\tif (queryL <= segL && segR <= queryR)return v[index];\n\t\treturn getsum_inner(queryL, queryR, index * 2, segL, (segL + segR) / 2) +\n\t\t\tgetsum_inner(queryL, queryR, index * 2 + 1, (segL + segR) / 2, segR);\n\t}\n\n\t//x以上であるような2のべき乗数のうち最小のものを返す。\n\tint roundup_pow2(int x) {\n\t\tx--;\n\t\trep(i, 6)x |= x >> (1LL << i);\n\t\treturn x + 1;\n\t}\n\n\tint SIZE;\n\tvector<T>v;\n};\nsegtree_sum_pointupdate seg(1);\n\nint minimize(vector<int>&A, int start, int end) {\n\t//A[start]のマイナス符号の直後に(を置いて、\n\t//endの直後に)を置くとして、\n\t//( ) の内側を最小化したときの値を返す。\n\tassert(A[start] < 0 && A[end] < 0);\n\tint ans = -A[start];\n\tint cursor = start + 1;\n\tfor (; 0 < A[cursor]; cursor++) {\n\t\tans += A[cursor];\n\t}\n\tans -= seg.getsum(cursor, end + 1);\n\treturn ans;\n}\n\nsigned main() {\n\tcin.tie(0);\n\tios::sync_with_stdio(false);\n\n\tint N;\n\tcin >> N;\n\n\tseg = segtree_sum_pointupdate(N);\n\n\tvector<int>A(N), op(N - 1);\n\tint first = -1, last = -1;\n\trep(i, N) {\n\t\tstring s;\n\t\tif (i)cin >> s;\n\t\telse s = \"+\";\n\t\tint hugou = 1;\n\t\tif (s[0] == '-') {\n\t\t\thugou *= -1;\n\t\t\tif (first == -1)first = i;\n\t\t\tlast = i;\n\t\t}\n\t\tcin >> A[i];\n\t\tseg.update(i, A[i]);\n\t\tA[i] *= hugou;\n\t}\n\tif (first == last) {//マイナスの数が0or1\n\t\tint ans = 0;\n\t\trep(i, N)ans += A[i];\n\t\tcout << ans << endl;\n\t\treturn 0;\n\t}\n\n\tint ans = 0;\n\tfor (int i = 0; i < first; i++) {\n\t\tassert(0 < A[i]);\n\t\tans += A[i];\n\t}\n\tfor (int i = last+1; i < N; i++) {\n\t\tassert(0 < A[i]);\n\t\tans += A[i];\n\t}\n\twhile (first != last) {\n\t\tint m = minimize(A, first, last);\n\t\tif (m < -A[first]) {\n\t\t\tans -= m;\n\t\t\tcout << ans << endl;\n\t\t\treturn 0;\n\t\t}\n\t\tans += A[first++];\n\t\tfor (; 0 < A[first]; first++)ans += A[first];\n\t}\n\tans += A[first];\n\tcout << ans << endl;\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define ll long long\n#define INF (1LL << 60)\n#define MOD 1000000007\n#define EPS 1e-10\n#define rep(i,n) for(int i=0;i<(int)(n);++i)\n#define rrep(i,n) for(int i=(int)(n)-1;i>=0;--i)\n#define srep(i,s,t) for(int i=(int)(s);i<(int)(t);++i)\n#define each(a,b) for(auto& (a): (b))\n#define all(v) (v).begin(),(v).end()\n#define len(v) (int)(v).size()\n#define zip(v) sort(all(v)),v.erase(unique(all(v)),v.end())\n#define cmx(x,y) x=max(x,y)\n#define cmn(x,y) x=min(x,y)\n#define fi first\n#define se second\n#define pb push_back\n#define show(x) cout<<#x<<\" = \"<<(x)<<endl\n#define spair(p) cout<<#p<<\": \"<<p.fi<<\" \"<<p.se<<endl\n#define sar(a,n) cout<<#a<<\":\";rep(pachico,n)cout<<\" \"<<a[pachico];cout<<endl\n#define svec(v) cout<<#v<<\":\";rep(pachico,v.size())cout<<\" \"<<v[pachico];cout<<endl\n#define svecp(v) cout<<#v<<\":\";each(pachico,v)cout<<\" {\"<<pachico.first<<\":\"<<pachico.second<<\"}\";cout<<endl\n#define sset(s) cout<<#s<<\":\";each(pachico,s)cout<<\" \"<<pachico;cout<<endl\n#define smap(m) cout<<#m<<\":\";each(pachico,m)cout<<\" {\"<<pachico.first<<\":\"<<pachico.second<<\"}\";cout<<endl\n\nusing namespace std;\n\ntypedef pair<int,int> P;\ntypedef pair<ll,ll> pll;\ntypedef vector<int> vi;\ntypedef vector<vi> vvi;\ntypedef vector<ll> vl;\ntypedef vector<vl> vvl;\ntypedef vector<double> vd;\ntypedef vector<P> vp;\ntypedef vector<string> vs;\n\nconst int MAX_N = 100005;\n\nll dp[MAX_N][3];\n\nint main()\n{\n    cin.tie(0);\n    ios::sync_with_stdio(false);\n    int n;\n    cin >> n;\n    vi a(n);\n    vs s(n);\n    s[0] = \"+\";\n    rep(i,n-1){\n        cin >> a[i] >> s[i+1];\n    }\n    cin >> a[n-1];\n    rep(i,n+1){\n        rep(j,3){\n            dp[i][j] = -INF;\n        }\n    }\n    dp[0][0] = 0;\n    rep(i,n){\n        rep(j,3){\n            if(s[i] == \"+\"){\n                if(j == 0){\n                    cmx(dp[i+1][j],dp[i][j]+a[i]);\n                }else if(j == 1){\n                    cmx(dp[i+1][j],dp[i][j]-a[i]);\n                    cmx(dp[i+1][j-1],dp[i][j]-a[i]);\n                }else{\n                    cmx(dp[i+1][j],dp[i][j]+a[i]);\n                    cmx(dp[i+1][j-1],dp[i][j]+a[i]);\n                    cmx(dp[i+1][j-2],dp[i][j]+a[i]);\n                }\n            }else{\n                if(j == 0){\n                    cmx(dp[i+1][j],dp[i][j]-a[i]);\n                    cmx(dp[i+1][j+1],dp[i][j]-a[i]);\n                }else if(j == 1){\n                    cmx(dp[i+1][j],dp[i][j]+a[i]);\n                    cmx(dp[i+1][j+1],dp[i][j]+a[i]);\n                    cmx(dp[i+1][j-1],dp[i][j]+a[i]);\n                }else{\n                    cmx(dp[i+1][j],dp[i][j]-a[i]);\n                    cmx(dp[i+1][j-1],dp[i][j]-a[i]);\n                    cmx(dp[i+1][j-2],dp[i][j]-a[i]);\n                }\n            }\n        }\n    }\n    // rep(i,n+1){\n    //     cout << dp[i][0] << \" \" << dp[i][1] << \" \" << dp[i][2] << \"\\n\";\n    // }\n    cout << dp[n][0] << \"\\n\";\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstdio>\n#include <map>\n#include <set>\n#include <queue>\n#include <vector>\n#include <cstring>\n#include <cstdlib>\n#include <algorithm>\n#define rep(i,a,b) for(int i = a; i <= b; i++)\n#define dep(i,a,b) for(int i = a; i >= b; i--) \n#define Rep(i,a) for(int i = 0; i < a; i++)\n#define pb(a) push_back(a)\n#define mp(a,b) make_pair(a,b)\n#define ab(x) ((x) < 0 ? -(x) : (x))\nusing namespace std;\ntypedef long long LL;\ntypedef map<int, int>::iterator mit;\ntypedef set<int ,int>::iterator sit;\nconst int N = 100010;\nchar c;\nint a[N]; bool b[N];\nLL s[N], sa[N];\nint main() {\n\tint n; scanf(\"%d\",&n);\n\trep(i,1,n) {\n\t\tscanf(\"%d\",&a[i]);\n\t\tif (i < n) {\n\t\t\tc = getchar(); while (c != '-' && c != '+') c = getchar();\n\t\t\tif (c == '-') b[i + 1] = true; else b[i + 1] = false;\n\t\t}\n\t}\n\tdep(i,n,1) sa[i] = sa[i + 1] + a[i];\n\trep(i,1,n) if (b[i]) a[i] = -a[i];\n\trep(i,1,n) s[i] = s[i - 1] + a[i];\n\tLL ans = s[n]; int last = 0;\n\trep(i,1,n) if (b[i]) {\n\t\tif (last) {\n\t\t\tans = max(ans, s[last] - (sa[last + 1] - sa[i]) + sa[i]);\n\t\t} else last = i;\n\t}\n\tcout <<ans<<endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\nusing ll = long long;\n#define int ll\nusing PII = pair<int, int>;\ntemplate <typename T> using V = vector<T>;\ntemplate <typename T> using VV = vector<V<T>>;\ntemplate <typename T> using VVV = vector<VV<T>>;\n\n#define FOR(i, a, n) for (ll i = (ll)a; i < (ll)n; ++i)\n#define REP(i, n) FOR(i, 0, n)\n#define ALL(x) x.begin(), x.end()\n#define PB push_back\n\nconst ll INF = (1LL<<60);\nconst int MOD = 1000000007;\n\ntemplate <typename T> T &chmin(T &a, const T &b) { return a = min(a, b); }\ntemplate <typename T> T &chmax(T &a, const T &b) { return a = max(a, b); }\ntemplate <typename T> bool IN(T a, T b, T x) { return a<=x&&x<b; }\ntemplate<typename T> T ceil(T a, T b) { return a/b + !!(a%b); }\ntemplate<class S,class T>\nostream &operator <<(ostream& out,const pair<S,T>& a){\n  out<<'('<<a.first<<','<<a.second<<')';\n  return out;\n}\ntemplate<class T>\nostream &operator <<(ostream& out,const vector<T>& a){\n  out<<'[';\n  REP(i, a.size()) {out<<a[i];if(i!=a.size()-1)out<<',';}\n  out<<']';\n  return out;\n}\n\nint dx[] = {0, 1, 0, -1}, dy[] = {1, 0, -1, 0};\n\nsigned main(void)\n{\n  cin.tie(0);\n  ios::sync_with_stdio(false);\n\n  int n;\n  cin >> n;\n  V<int> a(n);\n  V<char> op(n);\n  op[0] = '+'; cin >> a[0];\n  FOR(i, 1, n) cin >> op[i] >> a[i];\n\n  V<int> b(n); b[0] = a[0];\n  FOR(i, 1, n) b[i] = b[i-1] + a[i];\n\n  V<int> v;\n  REP(i, n) if(op[i] == '-') v.PB(i);\n  v.PB(n);\n  V<int> nxt(n);\n  REP(i, (int)v.size()-1) nxt[v[i]] = v[i+1];\n\n  int ret = -INF, now = 0;\n  REP(i, n) {\n    if(op[i]=='+') {\n      now += a[i];\n    } else {\n      chmax(ret, now - (b[nxt[i]-1]-b[i-1]) + (b[n-1]-b[nxt[i]-1]));\n      now -= a[i];\n    }\n  }\n  chmax(ret, now);\n\n  cout << ret << endl;\n\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <cstring>\n#include <cmath>\n#include <queue>\n#include <vector>\n#include <time.h>\n#include <string>\n#include <stack>\n#include <set>\n#include <map>\n#include <iostream>\n#include <bitset>\n#include <algorithm>\nusing namespace std;\n#define MP make_pair\n#define PB push_back\n#define ms(a,b) memset((a),(b),sizeof(a))\ntypedef long long LL;\ntypedef unsigned long long uLL;\ntypedef pair<int, int> Pii;\ntypedef vector<int> Vi;\ntypedef vector<Pii> Vii;\nconst int inf = 0x3f3f3f3f;\nconst LL INF = (1uLL << 63) - 1;\nconst LL mod = 1000000007;\nconst int N = 150 + 5;\nconst double Pi = acos(-1.0);\nconst int maxn = 200005;\nusing namespace std;\nint n;\nint num[maxn];\nint pos[maxn];\nLL suff[maxn];\nchar op[5];\nint main() {\n#ifdef local\n    freopen(\"in\",\"r\",stdin);\n#endif\n    scanf(\"%d%d\",&n,&num[0]);\n    for(int i = 1; i < n; i++){\n        scanf(\"%s%d\",op,&num[i]);\n        if(op[0] == '-')num[i] *= -1;\n    }\n    for(int i = n - 1; i >= 0; i--){\n        suff[i] = suff[i+1] + abs(num[i]);\n    }\n    LL ans = -INF;\n    LL res = 0;\n    num[n] = -1;\n    for(int i = 0; i < n; i++){\n        if(num[i] < 0){\n            int j = i + 1;\n            LL ff = num[i];\n            while(j <= n && num[j] >= 0)ff -= num[j++];\n            res += ff;\n            ans = max(res + suff[j],ans);\n            i = j - 1;\n        }\n        else res += num[i];\n    }\n    ans = max(res,ans);\n    cout<<ans<<endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include\"bits/stdc++.h\"\n\n\n#define PB push_back\n#define PF push_front\n#define LB lower_bound\n#define UB upper_bound\n#define fr(x) freopen(x,\"r\",stdin)\n#define fw(x) freopen(x,\"w\",stdout)\n#define iout(x) printf(\"%d\\n\",x)\n#define lout(x) printf(\"%lld\\n\",x)\n#define REP(x,l,u) for(int x = (l);x<=(u);x++)\n#define RREP(x,l,u) for(int x = (l);x>=(u);x--)\n#define mst(x,a) memset(x,a,sizeof(x))\n#define PII pair<int,int>\n#define PLL pair<ll,ll>\n#define MP make_pair\n#define se second\n#define fi first\n#define dbg(x) cout<<#x<<\" = \"<<(x)<<endl;\n#define sz(x) ((int)x.size())\n#define cl(x) x.clear()\n\ntypedef  long long ll;\ntypedef unsigned long long ull;\ntypedef double db;\ntypedef long double ld;\nusing namespace std;\n\nconst int maxn = 100010;\nconst int mod = 1e9+7;\nconst int MAX = 1000000010;\nconst double eps = 1e-6;\nconst double PI = acos(-1);\n\ntemplate<typename T> inline void read(T &x){\nx=0;T f=1;char ch;do{ch=getchar();if(ch=='-')f=-1;}while(ch<'0'||ch>'9');do x=x*10+ch-'0',ch=getchar();while(ch<='9'&&ch>='0');x*=f;\n}\n\ntemplate<typename A,typename B> inline void read(A&x,B&y){read(x);read(y);}\ntemplate<typename A,typename B,typename C> inline void read(A&x,B&y,C&z){read(x);read(y);read(z);}\ntemplate<typename A,typename B,typename C,typename D> inline void read(A&x,B&y,C&z,D&w){read(x);read(y);read(z);read(w);}\ntemplate<typename A,typename B> inline A fexp(A x,B p){A ans=1;for(;p;p>>=1,x=1LL*x*x%mod)if(p&1)ans=1LL*ans*x%mod;return ans;}\ntemplate<typename A,typename B> inline A fexp(A x,B p,A mo){A ans=1;for(;p;p>>=1,x=1LL*x*x%mo)if(p&1)ans=1LL*ans*x%mo;return ans;}\n\nint n;\n\nchar st[20];\n\nvoid Work(){\n\tll ans=0;\n\tint x;read(x);ans+=x;\n\tbool ok=0;\n\tREP(i,2,n){\n\t\tscanf(\"%s\",st+1);\n\t\tread(x);\n\t\tif(st[1]=='-'){\n\t\t\tif(ok)ans+=x;else ok=1,ans-=x;\n\t\t}\n\t\telse ans+=x;\n\t}\n\tcout<<ans<<endl;\n}\n\nvoid Init(){\n\tread(n);\n}\n\nint main(){\n\tInit();\n\tWork();\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <cmath>\n#include <cstdio>\n#include <string>\n#include <algorithm>\n#include <queue>\n#define ll long long\nusing namespace std;\n\n#define MOD 1000000007\n\nclass AdditionAndSubtractionHard\n{\npublic:\n\tint n;\n\tvector<ll> a;\n\tvector<string> op;\n\tvector<vector<ll > > dp;\n\n\tAdditionAndSubtractionHard(){\n\t\tcin >> n;\n\t\top.push_back(\"+\");\n\t\tfor (int i = 0; i < 2*n-1; ++i)\n\t\t {\n\t\t \tif(i % 2 == 0){\n\t\t \t\tll tmp;\n\t\t \t\tcin >> tmp;\n\t\t \t\ta.push_back(tmp);\n\t\t \t}else{\n\t\t \t\tstring tmpOp;\n\t\t \t\tcin >> tmpOp;\n\t\t \t\top.push_back(tmpOp);\n\t\t \t}\n\t\t } \n\t}\n\tvoid exec(){\n\t\tdp.resize(n+1);\n\t\tfor (int i = 0; i < n; ++i)\n\t\t{\n\t\t\tdp[i].resize(2);\n\t\t\t// dp[i][0].resize(2);\n\t\t\t// dp[i][1].resize(2);\n\t\t}\n\t\tdp[0][0] = a[0];\n\t\tdp[0][1] = -1 * MOD; // dp[n][1]の時は、符号が反対になっている。\n\t\tdp[0][2] = -1 * MOD;\n\t\tint flag = 0;\n\n\t\tfor (int i = 1; i < n; ++i)\n\t\t{\n\t\t\t// if(flag >= 2){\n\t\t\t// \tdp[i][0] = max(dp[i-1][0] + a[i], dp[i-1][1] + a[i]);\n\t\t\t// \tdp[i][1] = max(dp[i-1][0] + a[i], dp[i-1][1] + a[i]);\n\t\t\t// \tcontinue;\n\n\t\t\t// }\n\t\t\tif(op[i] == \"+\"){\n\t\t\t\tdp[i][0] = max(dp[i-1][0] + a[i], max(dp[i-1][1] - a[i],  dp[i-1][2] + a[i]) );\n\t\t\t\tdp[i][1] = dp[i-1][1] - a[i];\n\t\t\t\tdp[i][2] = dp[i-1][2] + a[i];\n\t\t\t}else{\n\t\t\t\tdp[i][0] = max(dp[i-1][1] + a[i], max(dp[i-1][0] - a[i], dp[i-1][2] - a[i]) );\n\t\t\t\tdp[i][1] = max(dp[i-1][1] + a[i], max(dp[i-1][0] - a[i], dp[i-1][2] - a[i]) );\n\t\t\t\tdp[i][2] = dp[i-1][2] - a[i]; \n\t\t\t\tflag++;\n\t\t\t}\n\t\t\t// cout << dp[i][0] << \" \" << dp[i][1] << endl;\n\t\t}\n\n\t\tcout << max(dp[n-1][0], dp[n-1][1]) << endl;\n\t}\n};\n\nint main(){\n\tAdditionAndSubtractionHard aash = AdditionAndSubtractionHard();\n\taash.exec();\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define N 100005\n#define LL long long\nusing namespace std;\nint n,m; LL a[N],b[N],sum,ans;\nint main()\n{\n\tint i,x; char op;\n\tscanf(\"%d\",&n);\n\tfor(i=1;i<=n;i++){\n\t\tscanf(\"%d \",&x),sum+=x;\n\t\tif(i==1) op='+'; else scanf(\"%c\",&op);\n\t\tif(op=='-') a[++m]=x; else b[m]+=x;\n\t  }\n\tif(!m) ans=sum;\n\tfor(i=1;i<=m;i++){\n\t\tans=max(ans,sum-2*(a[i]+b[i]));\n\t\tsum-=2*a[i];\n\t  }\n\tcout<<ans;\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\n#define rep(i , l , r) for(int i = (l) , ___ = (r) ; i <= ___ ; ++i)\n#define per(i , r , l) for(int i = (r) , ___ = (l) ; i >= ___ ; --i)\n\ntemplate<typename T>inline int chkmin(T &x , const T &y) { return x > y ? x = y , 1 : 0; }\ntemplate<typename T>inline int chkmax(T &x , const T &y) { return x < y ? x = y , 1 : 0; }\n\ntemplate<typename T>inline T read(T &f)\n{\n\tf = 0 ; int x = 1 ; char c = getchar();\n\twhile(!isdigit(c)) x = c == '-' ? -1 : 1 , c = getchar();\n\twhile(isdigit(c)) (f *= 10) += c & 15 , c = getchar();\n\treturn f *= x;\n}\n\nconst int N = 100000 + 5;\n\nusing int64 = long long;\n\nint n , cnt , A[N] , col[N] ;\n\nint64 s[N] , sum[N] , sl[N];\n\nint main()\n{\n\tread(n);\n\trep(i , 1 , n)\n\t{\n\t\tstatic char op[10];\n\t\tif(i == 1) read(A[i]) , col[++cnt] = 1 , s[1] = A[i];\n\t\telse\n\t\t{\n\t\t\tscanf(\"%s\" , op) , read(A[i]);\n\t\t\tif(*op == '-')\n\t\t\t{\n\t\t\t\tcol[++cnt] = -1;\n\t\t\t\ts[i] = -A[i];\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif(col[cnt] == 1) \n\t\t\t\t{\n\t\t\t\t\ts[cnt] += A[i];\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tcol[++cnt] = 1;\n\t\t\t\t\ts[cnt] = A[i];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tper(i , cnt , 1)\n\t{\n\t\tsum[i] = sum[i + 1] + abs(s[i]);\n\t}\n\tint64 Ans = -(1ll << 60) , ret = 0;\n\trep(i , 1 , cnt)\n\t{\n\t\tsl[i] = sl[i - 1] + s[i];\n\t}\n\tcerr << cnt << endl;\n\trep(i , 1 , cnt)\n\t{\n\t\tif(col[i + 1] == -1)\n\t\t{\n\t\t\tchkmax(Ans , sl[i + 1] - s[i + 2] + sum[i + 3]);\n\t\t}\n\t}\n\tchkmax(Ans , sl[cnt]);\n\tcout << Ans << endl;\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <iostream>\n#include <algorithm>\n#include <cstring>\n#define ll long long\nusing namespace std;\ntemplate <class T>\ninline void rd(T &x) {\n\tx=0; char c=getchar(); int f=1;\n\twhile(!isdigit(c)) { if(c=='-') f=-1; c=getchar(); }\n\twhile(isdigit(c)) x=x*10-'0'+c,c=getchar(); x*=f;\n}\ntemplate<class T> inline void cmax(T &x,T y) { if(y>x) x=y; }\nint sign(int x) { return x&1?-1:1; }\nconst int N=1e5+10;\nll f[N][3];\nint A[N],n;\nchar op[N][2];\nint main() {\n\trd(n); rd(A[1]),op[1][0]='+';\n\tfor(int i=2;i<=n;++i) {\n\t\tscanf(\"%s\",op[i]);\n\t\trd(A[i]);\n\t}\n\tmemset(f,-0x3f,sizeof(f));\n\tf[0][0]=0;\n\tfor(int i=1;i<=n;++i)\n\t\tfor(int j=0;j<3;++j) {\n\t\t\t//f[i-1][j]\n\t\t\tif(op[i][0]=='-') {\n\t\t\t\tif(j<2) cmax(f[i][j+1],f[i-1][j]+sign(j+1)*A[i]);\n\t\t\t\tcmax(f[i][j],f[i-1][j]+sign(j+1)*A[i]);\n\t\t\t\tif(j>0) cmax(f[i][j-1],f[i-1][j]+sign(j+1)*A[i]);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcmax(f[i][j],f[i-1][j]+sign(j)*A[i]);\n\t\t\t\tif(j>0) cmax(f[i][j-1],f[i-1][j]+sign(j)*A[i]);\n\t\t\t}\n\t\t}\n\tll ans=-1e18;\n\tfor(int j=0;j<3;++j) cmax(ans,f[n][j]);\n\tprintf(\"%lld\",ans);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\nconst int N = 100000 + 5;\nint a[N], f[N], n;\nlong long s[N], ss[N];\nint main() {\n\tscanf(\"%d\", &n); scanf(\"%d\", &a[1]); ss[1] = s[1] = a[1];\n\tfor(int i = 2; i <= n; ++i) {\n\t\tchar k; scanf(\"%c\", &k);\n\t\twhile (k != '+' && k != '-') scanf(\"%c\", &k);\n\t\tf[i] = k == '-' ? -1 : 1;\n\t\tscanf(\"%d\", &a[i]);\n\t\ts[i] = s[i - 1] + a[i] * f[i];\n\t\tss[i] = ss[i - 1] + a[i];\n\t}\n\tint lst = -1; long long ans = LLONG_MIN;\n\tfor(int i = n; i >= 1; --i) if(f[i] == -1) {\n\t\tans = max (ans, s[i] - (s[n] - s[i]));\n\t\tif (lst > 0)\n\t\t\tans = max (ans, s[i] - (s[lst] - s[i]) + ss[n] - ss[lst]);\n\t\tlst = i;\n\t}\n\tprintf (\"%lld\\n\", max (ans, s[n]));\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\nusing ll = long long;\nusing vi = vector<int>;\nusing vll = vector<ll>;\nusing vvi = vector<vector<int>>;\nusing vvl = vector<vector<ll>>;\n\nll dp[101010][3] = {0};\n\nint main() {\n  cin.tie(nullptr);\n  ios::sync_with_stdio(false);\n  int n;\n  cin >> n;\n  vector<ll> a(n);\n  vector<char> op(n);\n  ll INF = 1LL << 50;\n  op[0] = '+';\n  for (int i = 0; i < n; i++) {\n    cin >> a[i];\n    if (i < n - 1)\n      cin >> op[i + 1];\n  }\n  for (int i = 0; i <= n; i++) dp[i][0] = dp[i][1] = dp[i][2] = -INF;\n  dp[0][0] = 0;\n  for (int i = 0; i < n; i++) {\n    if (op[i] == '+') {\n      dp[i + 1][0] = max(a[i] + dp[i][0], max(a[i] + dp[i][1], a[i] + dp[i][2]));\n      dp[i + 1][1] = max(-a[i] + dp[i][1], -a[i] + dp[i][2]);\n      dp[i + 1][2] = a[i] + dp[i][2];\n    } else {\n      dp[i + 1][0] = max(-a[i] + dp[i][0], max(-a[i] + dp[i][1], -a[i] + dp[i][2]));\n      dp[i + 1][1] = max(-a[i] + dp[i][0], max(a[i] + dp[i][1], a[i] + dp[i][2]));\n      dp[i + 1][2] = max(a[i] + dp[i][1], a[i] + dp[i][2]);\n    }\n  }\n\n  cout << max(dp[n][0], max(dp[n][1], dp[n][2])) << endl;\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n#define rep(i,x,y) for(int i=(x);i<(y);++i)\n#define debug(x) #x << \"=\" << (x)\n\n#ifdef DEBUG\n#define _GLIBCXX_DEBUG\n#define print(x) std::cerr << debug(x) << \" (L:\" << __LINE__ << \")\" << std::endl\n#else\n#define print(x)\n#endif\n\nconst int inf=1e9;\nconst int64_t inf64=1e18;\nconst double eps=1e-9;\n\ntemplate <typename T> ostream &operator<<(ostream &os, const vector<T> &vec){\n    os << \"[\";\n    for (const auto &v : vec) {\n    \tos << v << \",\";\n    }\n    os << \"]\";\n    return os;\n}\n\nusing i64=int64_t;\n\nvoid solve(){\n    int N;\n    cin >> N;\n    vector<i64> A(N);\n    vector<char> op(N);\n    op[0]='+';\n    cin >> A[0];\n    rep(i,1,N) cin >> op[i] >> A[i];\n\n    static i64 memo[100001][3];\n    static bool done[100001][3];\n    fill_n((bool*)done,100001*3,false);\n    function<i64(int,int)> rec=[&](int i,int j){\n        auto &res=memo[i][j];\n        if(done[i][j]) return res;\n        done[i][j]=true;\n        if(i==N) return res=0;\n        res=-inf64;\n        int s=op[i]=='-';\n        rep(j_,0,j+1) res=max(res,((j_+s)%2==0?1:-1)*A[i]+rec(i+1,j_));\n        if(s) res=max(res,((j+s)%2==0?1:-1)*A[i]+rec(i+1,(j+1)%3));\n        return res;\n    };\n    cout << rec(0,0) << endl;\n}\n\nint main(){\n    std::cin.tie(0);\n    std::ios::sync_with_stdio(false);\n    cout.setf(ios::fixed);\n    cout.precision(10);\n    solve();\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\nconst int maxn=1e5+10;\nlong long dp[maxn][3];\nint n;\nint val[maxn],pos[maxn];\nchar op[3];\nint main()\n{\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tscanf(\"%d\",&val[i]);\n\t\tif(i!=n)\n\t\t{\n\t\t\tscanf(\"%s\",op+1);\n\t\t\tif(op[1]=='+')pos[i+1]=0;\n\t\t\telse pos[i+1]=1;\t\t\n\t\t}\n\t}\n\tmemset(dp,128,sizeof(dp));\n\tdp[0][0]=0;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tif(pos[i])\n\t\t{\n\t\t\tdp[i][0]=max(dp[i-1][0]-val[i],max(dp[i-1][1]+val[i],dp[i-1][2]-val[i]));\n\t\t\tdp[i][1]=max(dp[i-1][0]-val[i],max(dp[i-1][1]+val[i],dp[i-1][2]-val[i]));\n\t\t\tdp[i][2]=max(dp[i-1][1]+val[i],dp[i-1][2]-val[i]);\n\t\t}\n\t\telse \n\t\t{\n\t\t\tdp[i][0]=max(max(dp[i-1][1]-val[i],dp[i-1][2]+val[i]),dp[i-1][0]+val[i]);\n\t\t\tdp[i][1]=max(dp[i-1][1]-val[i],dp[i-1][2]+val[i]);\n\t\t\tdp[i][2]=dp[i-1][2]+val[i];\n\t\t}\n\t}\n\tprintf(\"%lld\\n\",dp[n][0]);\n}"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<algorithm>\n#include<cctype>\n#include<cstring>\n#include<iostream>\n#include<vector>\n\nusing namespace std;\n\n#define bomb exit(1)\n#define INF 1061109567\n#define LINF 4557430888798830399ll\n#define pprint(x) print(x),putchar(' ')\n#define fprint(x) print(x),putchar('\\n')\n#define EE(x); struct edge { int nxt,to;ll w; }e[M << 1]; int head[N],ecnt = 1;\\\n\tvoid add(int u,int v,ll w = 0) { e[++ecnt].w = w,e[ecnt].to = v,e[ecnt].nxt = head[u];head[u] = ecnt; }\\\n\tvoid add_edge(int u,int v,ll w = 0) { add(u,v,w),add(v,u,w * x); }\n#define ll long long\nint mod = 1000000007;\nll Mod(ll x) { return x >= mod ? x - mod : x; }\n#define eps 0.0000000001\n#define sqr(x) ((x) * (x))\n#define iter iterator\n#define fi first\n#define se second\n//#define getchar() (SS == TT && (TT = (SS = BB) + fread(BB,1,1 << 15,stdin),TT == SS) ? EOF : *SS++)\n//char BB[1 << 15],*SS = BB,*TT = BB;\nll read()\n{\n\tll x = 0;int f = 1;char ch = getchar();\n\tfor(;!isdigit(ch);ch = getchar()) if(ch == '-') f = -1;\n\tfor(;isdigit(ch);ch = getchar()) x = x * 10 + (ch ^ 48);\n\treturn x * f;\n}\nvoid print(ll x)\n{\n\tif(x < 0) putchar('-'),x = -x;\n\tif(x > 9) print(x / 10);putchar(x % 10 + '0');\n}\n\nconst int N = 100010;\nll ans,res;\nll a[N],pre[N],suf[N],tot;\nint n,op[N];\nint main()\n{\n\tn = read();\n\tfor(int i = 1;i < n;i++)\n\t{\n\t\ttot += (a[i] = read());\n\t\tchar ch = getchar();while(ch != '+' && ch != '-') ch = getchar();\n\t\top[i] = (ch == '+') ? 1 : -1;\n\t}tot += (a[n] = read());\n\tfor(int i = n;i;i--) { suf[i] = a[i];if(~op[i]) suf[i] += suf[i + 1]; }\n\tfor(int i = 1;i <= n;i++) pre[i] = pre[i - 1] + a[i];\n\tres = a[1];ans = -LINF;\n\tfor(int i = 2;i <= n;i++)\n\t{\n\t\tif(op[i - 1] == -1)\n\t\t\tans = max(ans,res + pre[n] - pre[i - 1] - 2 * suf[i]);\n\t\tres += a[i] * op[i - 1];\n\t}fprint(ans);\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\n#define pb push_back\n#define mp make_pair\n\n#define fi first\n#define se second\n\ntypedef long long ll;\n\nusing namespace std;\n\nchar sign[100005];\n\nint arr[100005];\n\nll sum, ans;\n\nint n;\n\nvoid solve() {\n    scanf(\"%d\", &n);\n\n    for (int i = 1; i <= n; ++i) {\n        if (i > 1) {\n            scanf(\" %c\", &sign[i]);\n        }\n        else {\n            sign[i] = '+';\n        }\n\n        scanf(\"%d\", &arr[i]);\n    }\n\n    for (int i = 1; i <= n; ++i) {\n        sum += arr[i];\n    }\n\n    int ptr = 1;\n\n    while (ptr <= n && sign[ptr] == '+') {\n        ++ptr;\n    }\n\n    ll cur1 = 0, cur2 = 0;\n\n    if (ptr > n) {\n        ans = 0;\n    }\n    else {\n        ans = 1e15;\n    }\n\n    for (; ptr <= n; ++ptr) {\n        if (sign[ptr] == '-') {\n            cur1 += arr[ptr];\n            cur2 = 0;\n        }\n        else {\n            cur2 += arr[ptr];\n        }\n\n        if (ptr == n || sign[ptr + 1] == '-') {\n            ans = min(ans, cur1 + cur2);\n        }\n    }\n\n    printf(\"%lld\\n\", sum - 2 * ans);\n}\n\nint main() {\n    #ifdef BThero\n        freopen(\"input.txt\", \"r\", stdin);\n        freopen(\"output.txt\", \"w\", stdout);\n    #endif // BThero\n\n    int tt = 1;\n\n    while (tt--) {\n        solve();\n    }\n\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n#define X first\n#define Y second\n#define LL long long\n#define ULL unsigned long long\n#define PB push_back\n#define MP make_pair\n#define VI vector<int>\n#define PII pair<int,int>\n#define IOS ios::sync_with_stdio(0);cin.tie(0);\n#define IN freopen(\"in\", \"r\", stdin);\n#define OUT freopen(\"out\", \"w\", stdout);\n\nconst int maxn=100010;\n\nLL a[maxn],per[maxn];\nchar c[maxn];\n\nint main()\n{\n\tIOS;\n\tint n;\n\tcin>>n>>a[0];\n\tper[0]=a[0];\n\tLL abssum=a[0];\n\tLL ans=a[0];\n\tVI sub;\n\tfor (int j=1;j<n;++j)\n\t{\n\t\tcin>>c[j]>>a[j];\n\t\tper[j]=per[j-1]+a[j];\n\t\tabssum+=a[j];\n\t\tif (c[j]=='+') ans+=a[j];\n\t\telse\n\t\t{\n\t\t\tans-=a[j];\n\t\t\tsub.PB(j);\n\t\t}\n\t}\n\tfor (int j=0;j<(int)sub.size()-1;++j)\n\t{\n\t\tint p1=sub[j];\n\t\tint p2=sub[j+1];\n\t\tLL tis=abssum-(per[p2-1]-per[p1-1])*2;\n\t\tans=max(ans,tis);\n\t\tabssum-=a[p1]*2;\n\t}\n\tcout<<ans<<endl;\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define MAX 100010\n#define inf 1<<29\n#define linf 1e16\n#define eps (1e-8)\n#define mod 1000000007\n#define pi acos(-1)\n#define phi (1.0+sqrt(5))/2.0\n#define f first\n#define s second\n#define mp make_pair\n#define pb push_back\n#define all(a) (a).begin(),(a).end()\n#define pd(a) printf(\"%.10f\\n\",(double)(a))\n#define FOR(i,a,b) for(int i=(a);i<(b);i++)\n#define RFOR(i,a,b) for(int i=(a)-1;(b)<=i;i--)\n#define equals(a,b) (fabs((a)-(b))<eps)\nusing namespace std;\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef pair<int,int> pii;\ntypedef pair<int,double> pid;\ntypedef pair<double,int> pdi;\ntypedef vector<int> vi;\ntypedef vector<pii> vpi;\nconst int dx[8]={1,0,-1,0,1,1,-1,-1};\nconst int dy[8]={0,1,0,-1,1,-1,1,-1};\n\nint n;\nll a[MAX];\nint b[MAX];\nstring c[MAX];\n\nll solve(){\n  ll res=0,sum=0;\n  int count=0;\n  FOR(i,1,n)if(c[i-1]==\"-\")a[i]=-a[i];\n  FOR(i,1,n){\n    b[i]=count;\n    if(c[i-1]==\"-\")count++;\n  }\n\n  FOR(i,0,n){\n    if(b[i]==0)res+=a[i];\n    else if(b[i]==1){\n      if(b[i-1]==0){\n        sum+=-a[i-1];\n        res-=a[i-1];\n      }\n      sum+=a[i];\n    }\n    else res+=max(a[i],-a[i]);   \n  }\n  res-=sum;\n  return res;\n}\n\nint main()\n{\n  cin>>n>>a[0];\n  FOR(i,1,n)cin>>c[i-1]>>a[i];\n  cout<<solve()<<endl;\n\n  return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstdio>\n#include <algorithm>\n#include <cstring>\n#include <cmath>\nusing namespace std;\nconst int N=100010;\nlong long f[N][3];\ninline int gi() {\n    int x=0,o=1;\n    char ch=getchar();\n    while(ch!='-'&&(ch<'0'||ch>'9')) ch=getchar();\n    if(ch=='-') o=-1,ch=getchar();\n    while(ch>='0'&&ch<='9') x=x*10+ch-'0',ch=getchar();\n    return x*o;\n}\nint main() {\n    int n;\n    char c='+';\n    cin>>n;\n    f[0][0]=0,f[0][1]=f[0][2]=-1LL<<60;\n    for(int i=1;i<=n;i++) {\n\tint x=gi();\n\tif(c=='+') {\n\t    f[i][0]=f[i-1][0]+x;\n\t    f[i][1]=f[i-1][1]-x;\n\t    f[i][2]=f[i-1][2]+x;\n\t}\n\telse {\n\t    f[i][0]=f[i-1][0]-x;\n\t    f[i][1]=max(f[i-1][1]+x,f[i-1][0]-x);\n\t    f[i][2]=max(f[i-1][2]-x,f[i-1][1]+x);\n\t}\n\tif(i<n) c=getchar();\n\tf[i][1]=max(f[i][1],f[i][2]);\n\tf[i][0]=max(f[i][0],f[i][1]);\n    }\n    cout<<f[n][0];\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "// #pragma GCC optimize(3)\n#include <map>\n#include <set>\n#include <queue>\n#include <cmath>\n#include <vector>\n#include <cstdio>\n#include <bitset>\n#include <cstring>\n#include <iostream>\n#include <algorithm>\n#define maxn 100010\n#define inf 0x3f3f3f3f\n// #define int long long\nusing namespace std;\nvoid write(int x){if(x<0){putchar('-');x=-x;}if(x>9) write(x/10);putchar(x%10+'0');}\nint read(){int d=0,w=1;char c=getchar();for(;c<'0'||c>'9';c=getchar())if(c=='-')\nw=-1;for(;c>='0'&&c<='9';c=getchar())d=(d<<1)+(d<<3)+c-48;return d*w;}\nvoid wln(int x){write(x);putchar('\\n');}\nvoid wrs(int x){write(x);putchar(' ');}\nint reac()\n{\n\tchar c=getchar();\n\tfor(;c!='-'&&c!='+';c=getchar());\n\treturn c=='+'?1:-1;\n}\nint n,a[maxn],c[maxn],f[maxn][3];\nsigned main()\n{\n\t// freopen(\".in\",\"r\",stdin);\n\t// freopen(\".out\",\"w\",stdout);\n\tn=read();\n\tc[1]=1;\n\ta[1]=read();\n\tfor(int i=2;i<=n;a[i++]=read())\n\t\tc[i]=reac();\n\tf[0][0]=0;\n\tf[0][1]=f[0][2]=-inf;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tf[i][0]=max(f[i-1][0],f[i-1][1])+a[i]*c[i];\n\t\tf[i][1]=max(max((c[i]==-1?f[i-1][0]:-inf)+a[i]*c[i],f[i-1][1]+a[i]*c[i]*-1),f[i-1][2]+a[i]*c[i]*-1);\n\t\tf[i][2]=max((c[i]==-1?f[i-1][1]:-inf)+a[i]*c[i]*-1,f[i-1][2]+a[i]*c[i]);\n\t\t// wrs(f[i][0]);\n\t\t// wrs(f[i][1]);\n\t\t// wln(f[i][2]);\n\t}\n\twrite(max(f[n][0],f[n][1]));\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define MAX 100010\n#define inf 1<<29\n#define linf 1e16\n#define eps (1e-8)\n#define mod 1000000007\n#define pi acos(-1)\n#define phi (1.0+sqrt(5))/2.0\n#define f first\n#define s second\n#define mp make_pair\n#define pb push_back\n#define all(a) (a).begin(),(a).end()\n#define pd(a) printf(\"%.10f\\n\",(double)(a))\n#define FOR(i,a,b) for(int i=(a);i<(b);i++)\n#define RFOR(i,a,b) for(int i=(a)-1;(b)<=i;i--)\n#define equals(a,b) (fabs((a)-(b))<eps)\nusing namespace std;\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef pair<int,int> pii;\ntypedef pair<int,double> pid;\ntypedef pair<double,int> pdi;\ntypedef vector<int> vi;\ntypedef vector<pii> vpi;\nconst int dx[8]={1,0,-1,0,1,1,-1,-1};\nconst int dy[8]={0,1,0,-1,1,-1,1,-1};\n\nint n;\nll a[MAX];\nint b[MAX];\nstring c[MAX];\n\nll solve(){\n  ll res=0,sum=0;\n  int count=0;\n  FOR(i,1,n)if(c[i-1]==\"-\")a[i]=-a[i];\n  FOR(i,1,n){\n    b[i]=count;\n    if(c[i-1]==\"-\")count++;\n  }\n  FOR(i,0,n){\n    if(b[i]==0)res+=a[i];\n    else if(b[i]==1)sum+=a[i];\n    else res+=max(a[i],-a[i]);   \n  }\n  res+=max(sum,-sum);\n  return res;\n}\n\nint main()\n{\n  cin>>n>>a[0];\n  FOR(i,1,n)cin>>c[i-1]>>a[i];\n  cout<<solve()<<endl;\n\n  return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<cstring>\n#include<cctype>\n#include<algorithm>\n#define maxn 100005\n#define LL long long\nusing namespace std;\n\ntemplate<class T>inline void read(T &res)\n{\n\tchar ch;\n\tfor(;!isdigit(ch=getchar()););\n\tfor(res= ch-'0';isdigit(ch=getchar());res=res*10+ch-'0');\n}\nint n;\nLL dp[maxn][3],val[maxn];\nchar op;\n\nint main()\n{\n\tscanf(\"%d\",&n);\n\tdp[0][0] = 0;\n\tdp[0][1] = dp[0][2] = -0x3f3f3f3f3f3f3f3f;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tread(val[i]);\n\t\tif(i<n) while((op = getchar())!='-'  && op!='+');\n\t\tdp[i][0] = max(dp[i-1][0] + val[i] , max(dp[i-1][1] - val[i] , dp[i-1][2] + val[i]));\n\t\tdp[i][1] = max(dp[i-1][1] - val[i] , dp[i-1][2] + val[i]);\n\t\tdp[i][2] = dp[i-1][2] + val[i];\n\t\tif(op=='-')\n\t\t{\n\t\t\tfor(int j=2;j>0;j--) dp[i][j] = dp[i][j-1];\n\t\t\tdp[i][0] = -0x3f3f3f3f3f3f3f3f;\n\t\t}\n\t}\n\tprintf(\"%lld\\n\",max(dp[n][0] ,max( dp[n][1] , dp[n][2])));\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<stdio.h>\n#include<stdlib.h>\n#include<string.h>\n#include<math.h>\n#include<iostream>\n#include<algorithm>\n#include<stack>\n#include<queue>\n#include<vector>\n#include<set>\n#include<map>\n#include<string>\nusing namespace std;\ntypedef long long ll;\ntypedef pair<int,int>P;\nconst int INF=0x3f3f3f3f;\nconst double pi=acos(-1.0);\nconst double eps=1e-9;\nconst ll mod=1e9+7;\nll dp[100010][3];\nll a;char c;int n;\nint main()\n{\n    cin>>n>>a;\n    memset(dp,-0x3f3f3f3f3f3f3f3f,sizeof(dp));\n    dp[0][0]=a;\n    for(int i=1;i<n;i++)\n    {\n        scanf(\" %c%d\",&c,&a);\n        if(c=='+')\n        {\n            dp[i][2]=dp[i-1][2]+a;\n            dp[i][1]=max(dp[i-1][1]-a,dp[i-1][2]+a);\n            dp[i][0]=max(dp[i-1][0]+a,max(dp[i-1][1]-a,dp[i-1][2]+a));\n        }\n        else\n        {\n            dp[i][2]=max(dp[i-1][1]+a,dp[i-1][2]-a);\n            dp[i][1]=max(dp[i-1][1]+a,max(dp[i-1][2]-a,dp[i-1][0]-a));\n        }\n\n    }\n    printf(\"%lld\\n\",max(dp[n-1][0],max(dp[n-1][1],dp[n-1][2])));\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include \"bits/stdc++.h\"\nusing namespace std;\nconst int N = 1e5 + 5;\nconst int C = 10;\nint n;\nint arr[N];\nint op[N];\nchar tmp[5];\nlong long dp[N][C];\nbool calc[N][C];\nlong long solve(int pos , int open){\n\tif(pos > n){\n\t\treturn 0;\n\t}\n\tif(calc[pos][open]){\n\t\treturn dp[pos][open];\n\t}\n\tlong long res = -1LL << 50;\n\tif(op[pos + 1] == 1){\n\t\tres = max(res , solve(pos + 1 , open) + ((open & 1) ? -1 : 1) * arr[pos]);\n\t\tif(open){\n\t\t\tres = max(res , solve(pos + 1 , open - 1) + ((open & 1) ? -1 : 1) * arr[pos]);\n\t\t}\n\t}\n\telse{\n\t\tif(open + 1 < C){\n\t\t\tres = max(res , solve(pos + 1 , open + 1) + ((open & 1) ? -1 : 1) * arr[pos]);\n\t\t}\n\t\tif(open){\n\t\t\tres = max(res , solve(pos + 1 , open) + ((open & 1) ? -1 : 1) * arr[pos]);\n\t\t}\n\t}\n\tcalc[pos][open] = 1;\n\treturn dp[pos][open] = res;\n}\nint main(){\n\tscanf(\"%d\" , &n);\n\tscanf(\"%d\" , arr + 1);\n\tfor(int i = 2 ; i <= n ; ++i){\n\t\tscanf(\"%s\" , tmp);\n\t\top[i] = (tmp[0] == '-') ? -1 : 1;\n\t\tscanf(\"%d\" , arr + i);\n\t}\n\tprintf(\"%lld\\n\" , solve(1 , 0));\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\nconst int N = 1e5 + 9;\n\nlong long a[N], dp[N], sum[N], nxt[N];\nchar s[N];\nint32_t main() {\n\tios_base::sync_with_stdio(0);\n\tcin.tie(0);\n\tint n; cin >> n >> a[1];\n\tsum[1] = a[1];\n\tfor (int i = 2; i <= n; i++) {\n\t\tcin >> s[i] >> a[i];\n\t\tsum[i] = sum[i - 1] + a[i];\n\t}\n\tnxt[n + 1] = n + 1;\n\tfor (int i = n; i >= 2; i--) {\n\t\tif (s[i] == '+') {\n\t\t\tdp[i] = dp[i + 1] + a[i];\n\t\t\tnxt[i] = nxt[i + 1];\n\t\t}\n\t\telse {\n\t\t\tdp[i] = dp[i + 1] - a[i];\n\t\t\tint k = nxt[i + 1];\n\t\t\tdp[i] = max(dp[i], sum[n] - sum[k - 1] - (sum[k - 1] - sum[i]) - a[i]);\n\t\t\tnxt[i] = i;\n\t\t}\n\t}\n\tcout << dp[2] + a[1] << '\\n';\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "//#include \"IntMod.h\"\n//typedef IntMod<1000000007> MInt;\n\n//#include \"Union_Find.h\"\n\n#include <cstdio>\n#include <iostream>\n#include <string>\n#include <vector>\n#include <utility>\n#include <algorithm>\n#include <functional>\n#include <cmath>\n#include <stack>\n#include <queue>\n#include <set>\n#include <map>\n//#include <unordered_set>\n//#include <unordered_map>\n#include <iomanip>\n#include <sstream>\n\nusing namespace std;\n#define REP(i,a,n) for(int i = a; i < n; ++i)\n#define REPM(i,n,a) for(int i = n - 1; i >= a; --i)\n#define EPS 0.0001\n#define INF 0x3FFFFFFF\n#define INFD 1.0e+308\ntypedef long long LL;\ntypedef unsigned long long ULL;\n\ntypedef pair<LL, LL> PP;\n\nLL N;\nLL A[100001];\nchar op[100001];\nLL dp[3][100001];\n\nint main() {\n\tcin >> N;\n\top[0] = '+';\n\tREP(i, 0, N) {\n\t\tif (i != 0) {\n\t\t\tcin >> op[i];\n\t\t}\n\t\tcin >> A[i];\n\t}\n\n\tdp[0][0] = A[0];\n\tdp[1][0] = -INF;\n\tdp[2][0] = -INF;\n\tREP(i, 1, N) {\n\t\tif (op[i] == '-') {\n\t\t\tdp[0][i] = max(max(dp[0][i - 1] - A[i], dp[1][i - 1] + A[i]), dp[2][i - 1] - A[i]);\n\t\t\tdp[1][i] = max(max(dp[1][i - 1] + A[i], dp[2][i - 1] - A[i]), dp[0][i - 1] - A[i]);\n\t\t\tdp[2][i] = max(dp[2][i - 1] - A[i], dp[1][i - 1] + A[i]);\n\t\t} else {\n\t\t\tdp[0][i] = max(dp[0][i - 1] + A[i], dp[1][i - 1] - A[i]);\n\t\t\tdp[1][i] = max(dp[1][i - 1] - A[i], dp[2][i - 1] + A[i]);\n\t\t\tdp[2][i] = dp[2][i - 1] + A[i];\n\t\t}\n\t}\n\tcout << max(max(dp[0][N - 1], dp[1][N - 1]), dp[2][N - 1]) << endl;\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<algorithm>\nusing namespace std;\nconst int MAXN=int(1e5+5);\ntypedef long long LL;\n#define INF LL(1e15)\nLL s1,s2,as,n;\nLL sz[MAXN],fh[MAXN];\nchar c[5];\nint main()\n{\n\tscanf(\"%lld\",&n);\n\tscanf(\"%lld\",&as);\n\tgetchar();\n\tfor(LL i=1;i<=n-1;i++) {\n\t\tscanf(\"%s\",c);\n\t\tscanf(\"%d\",&sz[i]);\n\t\tfh[i]=c[0];\n\t}\n\ts1=s2=-INF;\n\tfor(LL i=1;i<=n-1;i++) {\n\t\tif(fh[i]=='-') {\n\t\t\tas-=sz[i];\n\t\t\ts1-=sz[i];\n\t\t\ts2+=sz[i];\n\t\t\ts1=max(s1,s2);\n\t\t\ts2=max(as,s2);\n\t\t}\n\t\telse {\n\t\t\tas+=sz[i];\n\t\t\ts1+=sz[i];\n\t\t\ts2-=sz[i];\n\t\t}\n\t\ts2=max(s1,s2);\n\t\tas=max(s2,as);\n\t}\n\tprintf(\"%lld\",as);\n}\n/*5\n7 - 8 + 9 - 10 - 2*/"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <algorithm>\nusing namespace std;\nusing ll = long long int;\nconst ll INF = 1LL << 60;\n\nll N, A[100010], dp[100010][3];\nchar op[100010];\n\nint main() {\n    scanf(\"%lld\", &N);\n    for(int i=0; i<N; i++) {\n        if(i+1 != N) {\n            scanf(\" %lld %c\", &A[i], &op[i]);\n        }\n        else {\n            scanf(\" %lld\", &A[i]);\n        }\n    }\n\n    fill(dp[0], dp[100010], -INF);\n    dp[0][0] = 0;\n    for(int i=0; i<N; i++) {\n        for(int k=0; k<3; k++) {\n            if(dp[i][k] == -INF) continue;\n            int ni = i+1, nk = k;\n            if(i > 0 && op[i-1] == '-') nk++;\n            if(nk == 3) nk -= 2;\n            ll nval = dp[i][k] + A[i] * (nk % 2 ? -1 : 1);\n            for(; nk>=0; nk--) {\n                dp[ni][nk] = max(dp[ni][nk], nval);\n            }\n        }\n    }\n    /*\n    for(int i=0; i<=N; i++) {\n        for(int k=0; k<3; k++) {\n            printf(\"dp[%d][%d] = %lld\\n\", i, k, dp[i][k]);\n        }\n    }\n    */\n    printf(\"%lld\\n\", dp[N][0]);\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <string>\n#include <algorithm>\n#include <set>\n#include <cassert>\n\nusing namespace std;\n\nconstexpr int64_t kMod = 1e9+7;\n\nint main() {\n    std::vector<int64_t> v;\n\n    int n;\n    cin >> n;\n\n    int64_t answer = 0;\n    cin >> answer;\n    if (n == 1) {\n        cout << answer << endl;\n        return 0;\n    }\n    for (int i = 0; i < n - 1; i++) {\n        char c;\n        int x;\n        cin >> c >> x;\n        int new_x = x * (c == '+' ? 1 : -1);\n        if (v.empty()) {\n            v.push_back(new_x);\n        } else {\n            if (new_x > 0 && v.back() >= 1) {\n                v.back() += new_x;\n                continue;\n            }\n            if ((new_x > 0 && v.back() < 0) || (new_x < 0 && v.back() > 0)) {\n                v.push_back(new_x);\n                continue;\n            }\n            v.push_back(0);\n            v.push_back(new_x);\n        }\n    }\n    if (v.back() < 0) {\n        v.push_back(0);\n    }\n    if (v.size() && v[0] > 0) {\n        answer += v[0];\n        v.erase(v.begin());\n    }\n\n    int64_t sum = 0;\n    for (int i = 0; i < (int)v.size(); i++) {\n        sum += v[i];\n    }\n    int64_t best_ans = sum;\n    int64_t cur_sum = 0;\n\n    for (int i = (int)v.size() - 1; i >= 0; i--) {\n        assert(v[i] >= 0);\n        assert(i > 0);\n        assert(v[i - 1] < 0);\n\n        sum -= v[i];\n        sum -= v[i - 1];\n        best_ans = max(best_ans, cur_sum -v[i] + v[i - 1] + sum);\n        cur_sum += v[i];\n        cur_sum -= v[i - 1];\n        i--;\n    }\n    cout << best_ans + answer << endl;\n\n    return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "// need\n#include <iostream>\n#include <algorithm>\n\n// data structure\n#include <bitset>\n//#include <list>\n#include <map>\n#include <queue>\n#include <set>\n#include <stack>\n#include <string>\n#include <utility>\n#include <vector>\n//#include <array>\n//#include <tuple>\n#include <unordered_map>\n#include <unordered_set>\n//#include <complex>\n//#include <deque>\n\n// stream\n//#include <istream>\n//#include <sstream>\n//#include <ostream>\n\n// etc\n#include <cassert>\n#include <functional>\n#include <iomanip>\n//#include <typeinfo>\n#include <chrono>\n#include <random>\n#include <cfenv>\n\n#define INIT std::ios::sync_with_stdio(false);std::cin.tie(0);\n#define VAR(type, ...)type __VA_ARGS__;MACRO_VAR_Scan(__VA_ARGS__);\ntemplate<typename T> void MACRO_VAR_Scan(T& t) { std::cin >> t; }\ntemplate<typename First, typename...Rest>void MACRO_VAR_Scan(First& first, Rest&...rest) { std::cin >> first; MACRO_VAR_Scan(rest...); }\n#define VEC_ROW(type, n, ...)std::vector<type> __VA_ARGS__;MACRO_VEC_ROW_Init(n, __VA_ARGS__); for(int i=0; i<n; ++i){MACRO_VEC_ROW_Scan(i, __VA_ARGS__);}\ntemplate<typename T> void MACRO_VEC_ROW_Init(int n, T& t) { t.resize(n); }\ntemplate<typename First, typename...Rest>void MACRO_VEC_ROW_Init(int n, First& first, Rest&...rest) { first.resize(n); MACRO_VEC_ROW_Init(n, rest...); }\ntemplate<typename T> void MACRO_VEC_ROW_Scan(int p, T& t) { std::cin >> t[p]; }\ntemplate<typename First, typename...Rest>void MACRO_VEC_ROW_Scan(int p, First& first, Rest&...rest) { std::cin >> first[p]; MACRO_VEC_ROW_Scan(p, rest...); }\n#define OUT(d) std::cout<<d;\n#define FOUT(n, d) std::cout<<std::fixed<<std::setprecision(n)<<d;\n#define SOUT(n, c, d) std::cout<<std::setw(n)<<std::setfill(c)<<d;\n#define SP std::cout<<\" \";\n#define TAB std::cout<<\"\\t\";\n#define BR std::cout<<\"\\n\";\n#define ENDL std::cout<<std::endl;\n#define FLUSH std::cout<<std::flush;\n#define VEC(type, c, n) std::vector<type> c(n);for(auto& i:c)std::cin>>i;\n#define MAT(type, c, m, n) std::vector<std::vector<type>> c(m, std::vector<type>(n));for(auto& r:c)for(auto& i:r)std::cin>>i;\n#define ALL(a) (a).begin(),(a).end()\n#define FOR(i, a, b) for(int i=(a);i<(b);++i)\n#define RFOR(i, a, b) for(int i=(b)-1;i>=(a);--i)\n#define REP(i, n) for(int i=0;i<int(n);++i)\n#define RREP(i, n) for(int i=(n)-1;i>=0;--i)\n#define FORLL(i, a, b) for(ll i=ll(a);i<ll(b);++i)\n#define RFORLL(i, a, b) for(ll i=ll(b)-1;i>=ll(a);--i)\n#define REPLL(i, n) for(ll i=0;i<ll(n);++i)\n#define RREPLL(i, n) for(ll i=ll(n)-1;i>=0;--i)\n#define PAIR std::pair<int, int>\n#define PAIRLL std::pair<ll, ll>\n#define IN(a, x, b) (a<=x && x<b)\n#define SHOW(d) {std::cerr << #d << \"\\t:\" << d << \"\\n\";}\n#define SHOWVECTOR(v) {std::cerr << #v << \"\\t:\";for(const auto& xxx : v){std::cerr << xxx << \" \";}std::cerr << \"\\n\";}\n#define SHOWVECTOR2(v) {std::cerr << #v << \"\\t:\\n\";for(const auto& xxx : v){for(const auto& yyy : xxx){std::cerr << yyy << \" \";}std::cerr << \"\\n\";}}\n#define SHOWPAIR(p) {std::cerr << #p << \"\\t:(\" << p.first << \",\\t\" << p.second << \")\\n\";}\n#define SHOWPAIRVECTOR2(v) {std::cerr << #v << \"\\t:\\n\";for(const auto& xxx : v){for(const auto& yyy : xxx){std::cerr<<'('<<yyy.first<<\", \"<<yyy.second<<\") \";}std::cerr << \"\\n\";}}\n#define SHOWPAIRVECTOR(v) {for(const auto& xxx:v){std::cerr<<'('<<xxx.first<<\", \"<<xxx.second<<\") \";}std::cerr<<\"\\n\";}\n#define SHOWQUEUE(a) {std::queue<decltype(a.front())> tmp(a);std::cerr << #a << \"\\t:\";for(int i=0; i<static_cast<int>(a.size()); ++i){std::cerr << tmp.front() << \"\\n\";tmp.pop();}std::cerr << \"\\n\";}\ntemplate<typename T> inline T CHMAX(T& a, const T b) { return a = (a < b) ? b : a; }\ntemplate<typename T> inline T CHMIN(T& a, const T b) { return a = (a > b) ? b : a; }\n#define EXCEPTION(msg) throw std::string(\"Exception : \" msg \" [ in \") + __func__ + \" : \" + std::to_string(__LINE__) + \" lines ]\"\n#define TRY(cond, msg) try {if (cond) EXCEPTION(msg);}catch (std::string s) {std::cerr << s << std::endl;}\nvoid CHECKTIME(std::function<void()> f) { auto start = std::chrono::system_clock::now(); f(); auto end = std::chrono::system_clock::now(); auto res = std::chrono::duration_cast<std::chrono::nanoseconds>((end - start)).count(); std::cerr << \"[Time:\" << res << \"ns  (\" << res / (1.0e9) << \"s)]\\n\"; }\n\n#define int ll\nusing ll = long long;\nusing ull = unsigned long long;\nconstexpr int INFINT = 1 << 30;                          // 1.07x10^ 9\nconstexpr int INFINT_LIM = (1LL << 31) - 1;              // 2.15x10^ 9\nconstexpr ll INFLL = 1LL << 60;                          // 1.15x10^18\nconstexpr ll INFLL_LIM = (1LL << 62) - 1 + (1LL << 62);  // 9.22x10^19\nconstexpr double EPS = 1e-7;\nconstexpr int MOD = 1000000007;\nconstexpr double PI = 3.141592653589793238462643383279;\n\nsigned main() {\n\tINIT;\n\tVAR(int, n);\n\tstd::vector<int> a(n);\n\tstd::vector<char> op(n - 1);\n\tint minus = 0;\n\tREP(i, n-1) {\n\t\tstd::cin >> a[i] >> op[i];\n\t\tminus += (op[i] == '-');\n\t}\n\tstd::cin >> a[n - 1];\n\tll raw = a[0];\n\tREP(i, n-1) {\n\t\tif (op[i] == '+') raw += a[i + 1];\n\t\tif (op[i] == '-') raw -= a[i + 1];\n\t}\n\tll sum_ = 0;\n\tREP(i, n) {\n\t\tsum_ += a[i];\n\t}\n\tll ans = raw;\n\t//REP(m, minus) {\n\t\tll sum = sum_;\n\t\tint cnt = -0;\n\t\tREP(i, n - 1) {\n\t\t\tif (op[i] == '-') {\n\t\t\t\tif (cnt == 1) break;\n\t\t\t\tsum -= 2 * a[i + 1];\n\t\t\t\t++cnt;\n\t\t\t}\n\t\t\telse if (op[i] == '+' && cnt == 1) {\n\t\t\t\tsum -= 2 * a[i + 1];\n\t\t\t}\n\t\t}\n\t\tCHMAX(ans, sum);\n\t//}\n\tOUT(ans)BR;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n\nusing ui = uint64_t;\nusing li = int64_t;\n\nli num[100100];\nchar op[100100];\n\nconst li INF = li(100100) * 1000000000;\nli dp[100100];\n//op[i]==-\nli func(int i)\n{\n\t//i以降（i含む)で最大\n\tif (op[i + 1] == '-') { return dp[i]  = -(num[i] - num[i + 1]) + num[i + 1]; }\n\tif (dp[i] != INF) { return dp[i]; }\n\treturn dp[i] = -(num[i] - num[i+1])\n\t\t+ std::max(\n\t\t\t-(num[i + 1] - num[i + 2]) + num[i + 2],\n\t\t\t+(num[i + 1] - num[i + 2]) + func(i + 2)\n\t\t);\n}\n\nint main()\n{\n\tfor (auto& i : dp) {\n\t\ti = INF;\n\t}\n\tstd::cin.sync_with_stdio(false);\n\tstd::cout.sync_with_stdio(false);\n\tint N;\n\tstd::cin >> N;\n\tstd::cin >> num[0];\n\tint temp_n = 1;\n\tbool is_mode_add = true;\n\tfor (int i = 1; i < N; ++i) {\n\t\tstd::cin >> op[temp_n];\n\t\tstd::cin >> num[temp_n];\n\t\tbool next_mode = (op[temp_n] == '+');\n\t\tif (is_mode_add && next_mode) {\n\t\t\tnum[temp_n - 1] += num[temp_n];\n\t\t}\n\t\telse {\n\t\t\tis_mode_add = next_mode;\n\t\t\t++temp_n;\n\t\t}\n\t}\n\t//番兵\n\top[temp_n] = op[temp_n + 1] = '-';\n\tnum[temp_n] = num[temp_n + 1] = 0;\n\t//numを累積和に\n\tfor (int i = temp_n - 1; i >= 0; --i) {\n\t\tnum[i] += num[i + 1];\n\t}\n\n\tli res = (num[0] - num[0 + 1]);\n\tif (temp_n > 1) {\n\n\t\tres += func(1);\n\t}\n\tstd::cout << res << std::endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n#define rep(i,a,b) for(int i=(a);i<=(b);i++)\n#define re(i,a,b) for(int i=(a);i<(b);i++)\n#define repd(i,a,b) for(int i=(a);i>=(b);i--)\n#define run(a) for(int k=head[a];k;k=e[k].ne)\n#define v e[k].t\n#define clr(a) memset(a,0,sizeof(a));\n#define il inline\n#define sz(a) ((int)a.size())\n#define all(a) a.begin(),a.end()\n#define mp make_pair\n#define pb push_back \n#define w1 first\n#define w2 second\n#define adm(a,b,c) {a=a+b;if(a>=c)a-=c;else if(a<0)a+=c;}\ntypedef double db;\ntypedef long long ll;typedef long double ld;typedef unsigned long long ull;\ntypedef pair<ll,ll> pa;\nconst int N=1e6+5,M=5e3+5,INF=1e9,mod=998244353;\nconst ll linf=1e18;const double eps=1e-8,pi=acos(-1);\nil int gmin(int &a,int b){if(a>b)a=b;}il ll gmin(ll &a,ll b){if(a>b)a=b;}il int gmax(int &a,int b){if(a<b)a=b;}il ll gmax(ll &a,ll b){if(a<b)a=b;}\nil void read(ll&x){ll f=1,t=0;char ch=getchar();while(ch<'0'||ch>'9'){if(ch=='-')f=-1;ch=getchar();}while(ch>='0'&&ch<='9'){t=t*10+ch-'0';ch=getchar();}x=t*f;}il ll read(ll&x,ll&y){read(x);read(y);}\nil void read(int&x){int f=1,t=0;char ch=getchar();while(ch<'0'||ch>'9'){if(ch=='-')f=-1;ch=getchar();}while(ch>='0'&&ch<='9'){t=t*10+ch-'0';ch=getchar();}x=t*f;}il int read(int&x,int&y){read(x);read(y);}\nil void read(int&a,int&b,int&c){read(a);read(b);read(c);}il void read(ll&a,ll&b,ll&c){read(a);read(b);read(c);}\nil int read(){int x;read(x);return x;}\nil ll qpow(ll a,ll b,ll p){ll ret=1;for(;b;b>>=1,a=a*a%p)if(b&1)ret=ret*a%p;return ret;}il ll qpow(ll a,ll b){ll ret=1;for(;b;b>>=1,a=a*a%mod)if(b&1)ret=ret*a%mod;return ret;}\nil ll qmul(ll a,ll b,ll p){ll ret=0;for(;b;b>>=1,a=(a<<1)%p)if(b&1)adm(ret,a,p);return ret;}il ll qmul(ll a,ll b){ll ret=0;for(;b;b>>=1,a=(a<<1)%mod)if(b&1)adm(ret,a,mod);return ret;}\nil void judge(){\n\tfreopen(\"data.in\",\"r\",stdin);\n\tfreopen(\"data.out\",\"w\",stdout);}\nint n,sm;\nvector<pa>o;\nint main(){\n\tread(n);\n\trep(i,1,n){\n\t\tchar opt[5];if(i!=1)scanf(\"%s\",opt);else opt[0]='+';\n\t\tint x=read();sm+=x;\n\t\tif(opt[0]=='-')o.pb(pa(x,0));else if(o.size())o.back().w2+=x;\n\t}\n\tll ans;if(o.size()==0)ans=sm;else ans=-linf;\n\tre(i,0,o.size()){\n\t\tgmax(ans,sm-2*(o[i].w1+o[i].w2));\n\t\tsm-=o[i].w1*2;\n\t}\n\tcout<<ans<<endl;\n}"
  },
  {
    "language": "C++",
    "code": "                            #include <bits/stdc++.h>\n                            #include<iostream>\n                            #include<cstdio>\n                            #include<vector>\n                            #include<queue>\n                            #include<map>\n                            #include<cstring>\n                            #include<string>\n                            #include <math.h>\n                            #include<algorithm>\n                        //    #include <boost/multiprecision/cpp_int.hpp>\n                            #include<functional>\n                     #define int long long\n                            #define inf  1000000007\n                            #define pa pair<int,int>\n                            #define ll long long\n                            #define pal pair<double,int>\n                            #define ppa pair<int,pa>\n                            #define ssa pair<string,int>\n                            #define  mp make_pair\n                            #define  pb push_back\n                            #define EPS (1e-10)\n                            #define equals(a,b) (fabs((a)-(b))<EPS)\n                     \n                            using namespace std;\n                     //priority_queue<int, vector<int>, greater<int> > que;\n                            class Point{\n                            \tpublic:\n                            \tdouble x,y;\n                            \tPoint(double x=0,double y=0):x(x),y(y) {}\n                            \tPoint operator + (Point p) {return Point(x+p.x,y+p.y);}\n                            \tPoint operator - (Point p) {return Point(x-p.x,y-p.y);}\n                            \tPoint operator * (double a) {return Point(x*a,y*a);}\n                            \tPoint operator / (double a) {return Point(x/a,y/a);}\n                            \tdouble absv() {return sqrt(norm());}\n                            \tdouble norm() {return x*x+y*y;}\n                            \tbool operator < (const Point &p) const{\n                            \t\treturn x != p.x ? x<p.x: y<p.y;\n                            \t}\n                            \tbool operator == (const Point &p) const{\n                            \t\treturn fabs(x-p.x)<EPS && fabs(y-p.y)<EPS;\n                            \t}\n                            };\n                            typedef Point Vector;\n                     \n                            struct Segment{\n                            Point p1,p2;\n                            };\n                     \n                        double hen(Vector a){\n                        if(fabs(a.x)<EPS && a.y>0) return acos(0);\n                        else if(fabs(a.x)<EPS && a.y<0) return 3*acos(0);\n                        else if(fabs(a.y)<EPS && a.x<0) return 2*acos(0);\n                        else if(fabs(a.y)<EPS && a.x>0) return 0.0;\n                        else if(a.y>0) return acos(a.x/a.absv());\n                        else return 2*acos(0)+acos(-a.x/a.absv());\n                     \n                        }\n                     \n                string itos( int i ) {\n                ostringstream s ;\n                s << i ;\n                return s.str() ;\n                }\n                 \n                int gcd(int v,int b){\n                \tif(v>b) return gcd(b,v);\n                \tif(v==b) return b;\n                \tif(b%v==0) return v;\n                \treturn gcd(v,b%v);\n                }\n                            double dot(Vector a,Vector b){\n                            \treturn a.x*b.x+a.y*b.y;\n                            }\n                            double cross(Vector a,Vector b){\n                            \treturn a.x*b.y-a.y*b.x;\n                            }\n                        \n                double distans(double x1,double y1,double x2,double y2){\n                \tdouble rr=(x1-x2)*(x1-x2)+(y1-y2)*(y1-y2);\n                \treturn sqrt(rr);\n                \t\n                }\n\n                            //----------------kokomade tenpure------------\n\nvoid no(){\n\tcout<<\"No\"<<endl;\n\treturn;\n}\n\nint beki(int r, int k){\n\tif(k==0) return 1;\n\telse return r*beki(r,k-1);\n}\nint a[100010];\nint op[100010];\nint dp[100010][3];\n signed  main(){\nint n;\n \tcin>>n;\n \tfor(int i=0;i<100010;i++)for(int j=0;j<3;j++) dp[i][j]= -inf*10000000ll;\n \tfor(int i=0;i<n-1;i++){\n \t\tint dd;\n \t\tstring sa;\n \t\tcin>>dd>>sa;\n \t\ta[i+1]=dd;\n \t\tif(sa==\"+\")op[i+1]=1;\n \t\telse op[i+1]=-1;\n \t}\n \tcin>>a[n];\n \top[0]=1;\n \tdp[0][0]=0;\n \t\n \tfor(int i=1;i<=n;i++){\n \t\tif(op[i-1]==1){\n \t\t\tdp[i][0]=max(dp[i][0],dp[i-1][0]+a[i]);\n \t\t\tdp[i][0]=max(dp[i][0],dp[i-1][1]+a[i]);\n \t\t\tdp[i][1]=max(dp[i][1],dp[i-1][1]-a[i]);\n \t\t\tdp[i][1]=max(dp[i][1],dp[i-1][2]-a[i]);\n \t\t\tdp[i][2]=max(dp[i][2],dp[i-1][2]+a[i]);\n \t\t}\n \t\telse{\n \t\t\tdp[i][0]=max(dp[i][0],dp[i-1][0]-a[i]);\n \t\t\tdp[i][0]=max(dp[i][0],dp[i-1][1]-a[i]);\n \t\t\tdp[i][1]=max(dp[i][1],dp[i-1][0]-a[i]);\n \t\t\tdp[i][1]=max(dp[i][1],dp[i-1][1]+a[i]);\n \t\t\tdp[i][1]=max(dp[i][1],dp[i-1][2]+a[i]);\n \t\t\tdp[i][2]=max(dp[i][2],dp[i-1][1]+a[i]);\n \t\t\tdp[i][2]=max(dp[i][2],dp[i-1][2]-a[i]);\n \t\t}\n //\t\tcout<<dp[i][0]<<\" \"<<dp[i][1]<<\" \"<<dp[i][2]<<\" \"<<endl;\n \t\t\n \t}\n \tcout<<max(dp[n][0],dp[n][1])<<endl;\n \t\n                   //  \tprintf(\"%.10f\\n\",ans[n-1]);\n                    \treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define MAX 200000\n#define inf 1<<29\n#define linf 1e16\n#define eps (1e-8)\n#define mod 1000000007\n#define pi acos(-1)\n#define phi (1.0+sqrt(5))/2.0\n#define f first\n#define s second\n#define mp make_pair\n#define pb push_back\n#define all(a) (a).begin(),(a).end()\n#define pd(a) printf(\"%.10f\\n\",(double)(a))\n#define FOR(i,a,b) for(int i=(a);i<(b);i++)\n#define RFOR(i,a,b) for(int i=(a)-1;(b)<=i;i--)\n#define equals(a,b) (fabs((a)-(b))<eps)\nusing namespace std;\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef pair<int,int> pii;\ntypedef pair<int,double> pid;\ntypedef pair<double,int> pdi;\ntypedef vector<int> vi;\ntypedef vector<pii> vpi;\nconst int dx[8]={1,0,-1,0,1,1,-1,-1};\nconst int dy[8]={0,1,0,-1,1,-1,1,-1};\n\nint n;\nll a[MAX];\nll b[MAX];\nstring c[MAX];\n\nll solve(){\n  ll res=0,sum=0;\n  ll count=0;\n  FOR(i,1,n)if(c[i-1]==\"-\")a[i]=-a[i];\n  FOR(i,1,n){\n    b[i]=count;\n    if(c[i-1]==\"-\")count++;\n  }\n\n  FOR(i,0,n){\n    if(b[i]==0)res+=a[i];\n    else if(b[i]==1){\n      if(b[i-1]==0){\n        sum+=-a[i-1];\n        res-=a[i-1];\n      }\n      sum+=a[i];\n    }\n    else res+=max(a[i],-a[i]);   \n  }\n  res-=sum;\n  return res;\n}\n\nint main()\n{\n  cin>>n>>a[0];\n  FOR(i,1,n)cin>>c[i-1]>>a[i];\n  cout<<solve()<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\n\n\n#define MAX 100002\n\nlong long int dp[MAX][2];\n\n\nbool flag[MAX];\nlong long int a[MAX];\n\nchar buf[3];\nint main(){\n\tint n;\n\tcin >> n;\n\tscanf(\"%lld\", &a[0]);\n\tfor (int i = 1; i < n; i++){\n\t\tscanf(\"%s\", buf);\n\t\tscanf(\"%lld\", &a[i]);\n\t\tif (buf[0] == '-'){\n\t\t\ta[i] *= -1LL;\n\t\t\tflag[i] = true;\n\t\t}\n\t}\n\tlong long int ans = 0;\n\tbool ok = false;\n\tbool f = false;\n\tint mul = 1;\n\tfor (int i = 0; i < n; i++){\n\t\tif (ok == false){\n\t\t\tans += a[i];\n\t\t}\n\t\tif (flag[i]){\n\t\t\tok = true;\n\t\t\tlong long int sum = 0;\n\t\t\tfor (int j = i + 1; j < n; j++){\n\t\t\t\tif ((flag[j]) == false){\n\t\t\t\t\tsum += a[j]*mul;\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tsum += a[j]*mul;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmul *= -1;\n\t\t\tf ^= true;\n\t\t\tans += max(sum,-sum);\n\t\t}\n\t\t\n\t}\n\tprintf(\"%lld\\n\", ans);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <cstring>\n#include <iostream>\n#include <algorithm>\nusing namespace std;\n#define ll long long\n#define N 100005\n#define inf (1ll << 60)\nint n, A[N], B[N];\nll ans, s[N], t[N], now, tot;\nint main()\n{\n\tscanf(\"%d\", &n);\n\tscanf(\"%lld\", &ans);\n\tt[0] = ans;\n\tchar opt[5];\n\tfor (int i = 1; i < n; i++)\n\t{\n\t\tscanf(\"%s%d\", opt, &A[i]);\n\t\tB[i] = opt[0] == '+' ? 1 : -1;\n\t\tans += A[i] * B[i];\n\t}\n\tfor (int i = n; i >= 1; i--)\n\t\ts[i] = A[i] + s[i + 1];\n\tfor (int i = 1; i <= n; i++)\n\t\tt[i] = B[i] * A[i] + t[i - 1];\n\tnow = -inf;\n\ttot = 0;\n\tfor (int i = n; i >= 1; i--)\n\t{\n\t\ttot += A[i];\n\t\tif (B[i] == -1)\n\t\t{\n\t\t\tans = max(ans, t[i - 1] - tot + now);\n\t\t\tnow = s[i];\n\t\t\ttot = 0;\n\t\t}\n\t}\n\tprintf(\"%lld\\n\", ans);\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define LL long long\n\nusing namespace std;\nconst int N=1e5+10;\nint rd()\n{\n    int x=0,w=1;char ch=0;\n    while(ch<'0'||ch>'9'){if(ch=='-') w=-1;ch=getchar();}\n    while(ch>='0'&&ch<='9'){x=x*10+(ch^48);ch=getchar();}\n    return x*w;\n}\nLL n,a[N],z[N],f[N][3];\nchar cc[2];\n\nint main()\n{\n    //////\n\tn=rd(),z[1]=1,a[1]=rd();\n\tfor(int i=2;i<=n;++i) scanf(\"%s\",cc),z[i]=cc[0]=='-'?-1:1,a[i]=rd();\n\tmemset(f,-0x3f3f3f,sizeof(f));\n\tf[1][0]=a[1];\n\tfor(int i=2;i<=n;++i)\n\t{\n\t\tf[i][0]=max(f[i][0],f[i-1][0]+z[i]*a[i]);\n\t\tf[i][0]=max(f[i][0],f[i-1][1]-z[i]*a[i]);\n\t\tf[i][1]=max(f[i][1],f[i-1][1]-z[i]*a[i]);\n\t\tf[i][0]=max(f[i][0],f[i-1][2]+z[i]*a[i]);\n\t\tf[i][1]=max(f[i][1],f[i-1][2]+z[i]*a[i]);\n\t\tf[i][2]=max(f[i][2],f[i-1][2]+z[i]*a[i]);\n\t\tif(z[i]<0)\n\t\t{\n\t\t\tf[i][1]=max(f[i][1],f[i-1][0]+z[i]*a[i]);\n\t\t\tf[i][2]=max(f[i][2],f[i-1][1]-z[i]*a[i]);\n\t\t}\n\t}\n\tprintf(\"%lld\\n\",f[n][0]);\n    return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<algorithm>\n#define maxn 100005\n#define LL long long\n#define INF (LL)(1e16)\nusing namespace std;\nint n,a[maxn],f[maxn],pre[maxn];\nLL sum,ans=-INF;\nint main()\n{\n\tscanf(\"%d%d\",&n,&a[1]);\n\tfor(int i=2;i<=n;i++)\n\t{\n\t\tchar s[5];\n\t\tscanf(\"%s\",s);\n\t\tif(s[0]=='-') f[i]=1;\n\t\tscanf(\"%d\",&a[i]);\n\t}\n\tfor(int i=n;i>0;i--) pre[i]=pre[i+1]+a[i];\n\tint la=1;\n\twhile(la<=n&&!f[la]) sum+=1ll*a[la++];\n\twhile(la<=n)\n\t{\n\t\tint la1=la+1; LL sum1=0;\n\t\twhile(la1<=n&&!f[la1]) sum1+=1ll*a[la1++];\n\t\tif(la1<=n) ans=max(ans,sum-sum1-a[la]+pre[la1]);\n\t\tsum+=sum1-a[la]; la=la1; \n\t}\n\tans=max(ans,sum);\n\tprintf(\"%lld\\n\",ans);\n}"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<cstring>\n#include<algorithm>\n#define SF scanf\n#define PF printf\n#define MAXN 100010\n#define INF 0x3FFFFFFF\nusing namespace std;\ntypedef long long ll;\nint n;\nint a[MAXN];\nbool flag[MAXN];\nchar s[20];\nll pre[MAXN];\nll sum,ans=-INF;\nint main(){\n\tSF(\"%d\",&n);\n\tflag[1]=0;\n\tSF(\"%d\",&a[1]);\n\tfor(int i=2;i<=n;i++){\n\t\tSF(\"%s\",s);\n\t\tif(s[0]=='-')\n\t\t\tflag[i]=1;\n\t\tSF(\"%d\",&a[i]);\n\t}\n\tfor(int i=n;i>=1;i--)\n\t\tpre[i]=pre[i+1]+a[i];\n\tint las=1;\n\twhile(flag[las]==0&&las<=n){\n\t\tsum+=a[las];\n\t\tlas++;\n\t}\n\twhile(las<=n){\n\t\tint las1=las+1;\n\t\tll sum1=0;\n\t\twhile(flag[las1]==0&&las1<=n){\n\t\t\tsum1+=a[las1];\n\t\t\tlas1++;\n\t\t}\n\t\tif(las1<=n){\n\t\t\tans=max(ans,sum-sum1-a[las]+pre[las1]);\n\t\t}\n\t\tsum-=a[las];\n\t\tlas=las1;\n\t\tsum+=sum1;\n\t}\n\tans=max(ans,sum);\n\tPF(\"%lld\",ans);\n}\t"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define time Time\n#define pii pair<int,int>    \n#define x first    \n#define y second \n#define N 10000005   \n#define pb(x) push_back(x)\n#define mp(x,y) make_pair((x),(y))    \n#define sqr(x) ((x)*(x))\ntypedef long long LL;  \nusing namespace std;\nconst int mod=1e9+7;\nint main(){\n\tint n;\n\twhile(scanf(\"%d\",&n)!=EOF){\n\t\tlong long \tint a[100005];\n\t\tint op[100005];\n\t\top[0]=1;\n\t\tscanf(\"%d\",&a[0]);\n\t\tfor(int i=1;i<n;i++){\n\t\t\tchar c;\n\t\t\twhile(scanf(\"%c\",&c)&&c!='+'&&c!='-');\n\t\t\tif(c=='+')\n\t\t\top[i]=1;\n\t\t\telse\n\t\t\top[i]=0;\n\t\t\tscanf(\"%d\",&a[i]);\n\t\t} \n\t\tlong long int sum=0;\n\t\tfor(int i=0;i<n;i++){\n\t\t\tsum+=a[i];\n\t\t}\n\t\tlong long int ans=1e18;\n\t\tint i;\n\t\tfor(i=0;op[i]==1;i++);\n\t\tint last=i;\n\t\tlong long int ssum=0,sssum=a[i];\n\t\tfor(;i<n;i++)\n\t\t{\n\t\t\tssum+=a[i];\n\t\t\tif(op[i+1]==0||i+1==n)\n\t\t\tans=min(ssum+sssum-a[last],ans),ssum=0,sssum+=a[i],last=i;\n\t\t}\n\t\tprintf(\"%lld\\n\",sum-2*ans);\n\t}\n}\n/*\n\n \n  1 10 11 100 101 110 111 1000 1001 1010 1011 1100 1101 1110 1111  10000   17    18\n  1  2  3  4  5   6   7   8   9   10     11    12 13 14    15      16     10001 10010\n  2  4  5  8  10  13  14 18  21  26     28    33 36 40    41       46     50    57\n1 1  2  1  3  2   3   1  4   3   5      2     5  3  4    1        5       4     7\n0 0  1  0  2  1   2   0  3   2   4      1     4  2  3    0          4      3    6\n    \n\na^b+2a&b=a+b\n\n*/\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n#define r(i,n) for(int i=0;i<n;i++)\nint a[100009],dp[100009][4];\nstring s[100009];\nint main(){\n  r(i,100009)r(j,4)dp[i][j]=-(1e8);\n  int ans,n;\n  cin>>n>>ans;n--;\n  r(i,n)cin>>s[i]>>a[i];\n  dp[0][0]=0;\n  for(int i=0;i<n;i++){\n    if(s[i]==\"+\"){\n      dp[i+1][0]=dp[i][0]+a[i];\n      dp[i+1][1]=dp[i][1]-a[i];\n      dp[i+1][2]=dp[i][2]+a[i];\n    }\n    else{\n      dp[i+1][0]=max(dp[i][0]-a[i],dp[i][2]-a[i]);\n      dp[i+1][1]=max(dp[i][0]-a[i],dp[i][1]-a[i]);\n      dp[i+1][2]=max(dp[i][1]+a[i],dp[i][2]+a[i]);\n    }\n  }\n  cout<<ans+max(dp[n][0],max(dp[n][1],dp[n][2]))<<endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n#define FOR(i,l,r) for(int i = (l);i < (r);i++)\n#define ALL(x) (x).begin(),(x).end()\ntemplate<typename T> bool chmax(T& a,const T& b){return a < b ? (a = b,true) : false;}\ntemplate<typename T> bool chmin(T& a,const T& b){return b < a ? (a = b,true) : false;}\ntypedef long long ll;\n\nint N;\nll dp [100001] [3];\nconst ll INF = 1e17;\n\nint main()\n{\n\tcin.tie(nullptr);\n\tios::sync_with_stdio(false);\n\n\tcin >> N;\n\n\tfill(dp [0],dp [N + 1],-INF);\n\tdp [0] [0] = 0;\n\tFOR(i,0,N){\n\t\tll A;\n\t\tchar C;\n\t\tif(i == 0){\n\t\t\tcin >> A;\n\t\t\tchmax(dp [i + 1] [0],dp [i] [0] + A);\n\t\t}\n\t\telse{\n\t\t\tcin >> C >> A;\n\t\t\tfor(int j = 0;j <= 2;j++){\n\t\t\t\tfor(int k = C == '-';k <= min(j + (C == '-'),2);k++){\n\t\t\t\t\tchmax(dp [i + 1] [k],dp [i] [j] + (k % 2 == 0 ? A : -A));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tcout << *max_element(dp [N],dp [N + 1]) << endl;\n\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n#define llong long long\nconst llong inf=0x3f3f3f3f3f3f3f3f;\nint n;\nchar op[22];\nint a;\nllong dp[100100][3];\nint main()\n{\n    scanf(\"%d\",&n);\n    scanf(\"%d\",&a);\n    dp[1][0]=a;\n    dp[1][1]=dp[1][2]=-inf;\n    for(int i=2;i<=n;++i)\n    {\n        scanf(\"%s%d\",op,&a);\n        if(op[0]=='-')a=-a;\n//        cout<<\"i: \"<<i<<\" op: \"<<op[0]<<\" a: \"<<a<<endl;\n        dp[i][0]=max(dp[i-1][0],dp[i-1][1]);\n        dp[i][1]=max(dp[i-1][1],dp[i-1][2]);\n        dp[i][2]=dp[i-1][2]+a;\n//        cout<<dp[i][0]<<\" \"<<dp[i][1]<<\" \"<<dp[i][2]<<endl;cout<<endl;\n        dp[i][0]+=a;\n        dp[i][1]-=a;\n        if(op[0]=='-')\n        {\n            dp[i][2]=max(dp[i][2],dp[i][1]);\n            dp[i][1]=max(dp[i][1],dp[i][0]);\n        }\n//        cout<<dp[i][0]<<\" \"<<dp[i][1]<<\" \"<<dp[i][2]<<endl;cout<<endl;\n    }\n    printf(\"%lld\\n\",max(dp[n][0],max(dp[n][1],dp[n][2])));\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <string>\n#include <iostream>\n#include <algorithm>\nusing namespace std;\nint n, a[100009], dp[100009][3]; bool vis[100009][3]; string s[100009];\nlong long solve(int pos, int depth) {\n\tif (pos == n) return 0;\n\tif (vis[pos][depth]) return dp[pos][depth];\n\tlong long ret = -1LL << 61;\n\tif (s[pos] == \"+\") {\n\t\tret = solve(pos + 1, depth) + a[pos] * (depth % 2 ? -1 : 1);\n\t\tif (depth > 0) ret = max(ret, solve(pos + 1, depth - 1) + a[pos] * (depth % 2 ? 1 : -1));\n\t}\n\telse {\n\t\tret = solve(pos + 1, depth) + a[pos] * (depth % 2 ? 1 : -1);\n\t\tif (depth > 0) ret = max(ret, solve(pos + 1, depth - 1) + a[pos] * (depth % 2 ? -1 : 1));\n\t\tif (depth < 2) ret = max(ret, solve(pos + 1, depth + 1) + a[pos] * (depth % 2 ? 1 : -1));\n\t}\n\tvis[pos][depth] = true;\n\tdp[pos][depth] = ret;\n\treturn ret;\n}\nint main() {\n\tcin >> n;\n\ts[0] = \"+\"; cin >> a[0];\n\tfor (int i = 1; i < n; i++) cin >> s[i] >> a[i];\n\tlong long ret = solve(0, 0);\n\tcout << ret << endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define ll long long\nusing namespace std;\nconst int N=100010,oo=1e9;\nint n;\nll ans=0;\nint a[N],f[N][3],tot[N];\nbool b[N];\nint main(){\n\tchar c;\n\tscanf(\"%d\",&n);\n\tb[1]=1;\n\tfor(int i=1;i<=n;i++){\n\t\ttot[i]=tot[i-1];\n\t\tif(i>=2){\n\t\t\tscanf(\" %c\",&c);\n\t\t\tif(c=='+') b[i]=1;\n\t\t\telse tot[i]++;\n\t\t}\n\t\tscanf(\"%d\",&a[i]);\n\t}\n\tfor(int i=1;i<=n;i++){\n\t\t\tif(b[i]){\n\t\t\t\tf[i][0]=max(f[i-1][0],max(f[i-1][1],f[i-1][2]))+a[i];\n\t\t\t\tf[i][1]=max(f[i-1][1],f[i-1][2])-a[i];\n\t\t\t\tf[i][2]=f[i-1][2]+a[i];\n\t\t\t}else{\n\t\t\t\tf[i][0]=max(f[i-1][0],max(f[i-1][1],f[i-1][2]))-a[i];\n\t\t\t\tf[i][1]=max(f[i-1][0]-a[i],f[i-1][2]+a[i]);\n\t\t\t\tf[i][2]=max(f[i-1][1]+a[i],f[i-1][2]-a[i]);\n\t\t\t}\n\t\t\tif(tot[i]<2) f[i][2]=-oo;\n\t\t\tif(tot[i]<1) f[i][1]=-oo;\n\t}\n//\tfor(int i=1;i<=n;i++){\n//\t\tcout<<f[i][0]<<\" \";\n//\t}\n//\tcout<<endl;\n//\tfor(int i=1;i<=n;i++){\n//\t\tcout<<f[i][1]<<\" \";\n//\t}\n//\tcout<<endl;\n//\tfor(int i=1;i<=n;i++){\n//\t\tcout<<f[i][2]<<\" \";\n//\t}\n//\tcout<<endl;\n\tans=max(f[n][0],max(f[n][1],f[n][2]));\n\tcout<<ans;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nconst int N = 1e5 + 5;\nconst long long inf = 0x3f3f3f3f3f3f3f3f;\nint n;\nint a[N], op[N];\nlong long dp[N][20];\n\nint main() {\n\tscanf(\"%d\", &n);\n\tfor (int i = 0; i < n; ++ i) {\n\t\tif (i) {\n\t\t\tchar c[5]; scanf(\"%s\", c);\n\t\t\top[i] = (c[0] == '-' ? -1 : 1);\n\t\t}\n\t\tscanf(\"%d\", &a[i]);\n\t}\n\tmemset(dp, -inf, sizeof(dp));\n\tdp[0][0] = a[0];\n\tfor (int i = 1; i < n; ++ i) {\n\t\tfor (int j = 0; j < 20; ++ j) {\n\t\t\tif (j && op[i] < 0) dp[i][j] = max(dp[i][j], dp[i - 1][j - 1] + (j & 1 ? -1 : 1) * a[i]);\n\t\t\tdp[i][j] = max(dp[i][j], dp[i - 1][j] + (j & 1 ? -op[i] : op[i]) * a[i]);\n\t\t\tif (j < 19) dp[i][j] = max(dp[i][j], dp[i - 1][j + 1] + (j & 1 ? op[i] : -op[i]) * a[i]);\n\t\t}\n\t}\n\tprintf(\"%lld\\n\", dp[n - 1][0]);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\nusing namespace std;\nlong dp[3],a;\nchar op;\nint n;\nmain()\n{\n\tcin>>n>>dp[0];\n\tdp[1]=dp[2]=-1e18;\n\tfor(int i=1;i<n;i++)\n\t{\n\t\tcin>>op>>a;\n\t\tif(op=='+')\n\t\t{\n\t\t\tfor(int j=0;j<3;j++)dp[j]+=j%2?-a:a;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tdp[0]-=a;\n\t\t\tdp[1]=max(dp[1]+a,dp[0]-a);\n\t\t\tdp[2]=max(dp[2]+a,dp[1]+a);\n\t\t}\n\t}\n\tcout<<max({dp[0],dp[1],dp[2]})<<endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <string>\n#define int long long\n#define INF 1e+18\nusing namespace std;\n\nstring op[100010];\n\nsigned main(){\n\tint n,a[100010],imos[100010] = {},sum = 0,ma = -INF;\n\tcin >> n;\n\tfor(int i = 0;i < n;i++){\n\t\tif(i) cin >> op[i];\n\t\telse op[i] = \"+\";\n\t\tcin >> a[i];\n\t\timos[i + 1] = imos[i] + a[i];\n\t}\n\tfor(int i = 0;i < n;i++){\n\t\tif(op[i] == \"-\"){\n\t\t\tint pos = i + 1,tmp = -a[i];\n\t\t\twhile(op[pos] == \"+\" && pos < n) tmp -= a[pos++];\n\t\t\tma = max(ma,sum + tmp + imos[n] - imos[pos]);\n\t\t\tsum -= a[i];\n\t\t}else sum += a[i];\n\t}\n\tcout << max(ma,sum) << endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define pb push_back\n#define S second\n#define F first\n\nusing namespace std;\ntypedef long long ll;\n#define int ll\ntypedef pair<int,int> pii;\nconst int maxn = 1e6 + 10;\nconst int mod = 1e9 + 7;\nint cnt[maxn];\nint32_t main(){\n    int n;\n    cin >> n;\n    int l = 0;\n    int sum = 0;\n    bool can = false;\n    for (int i=0;i < 2 * n - 1;i++){\n        if (i % 2){\n            char ch;\n            cin >> ch;\n            if (ch == '+'){\n                can = false;\n                l = 0;\n            }else {\n                if (l == 1) can = true;\n                else can = false;\n                l = 1;\n            }\n        }else {\n            int a;\n            cin >> a;\n            if (l == 0 || can){\n                sum += a;\n            }else sum -= a;\n\n        }\n       // cout << sum << endl;\n    }\n    cout << sum << endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long LL;\nconst LL inf=1e18;\nint n;\nchar s[100005][2];\nLL a[100005],dp[100005][3];\nint main()\n{\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<n;i++) scanf(\"%lld%s\",&a[i],s[i]);scanf(\"%lld\",&a[n]);\n\tdp[1][0]=a[1];dp[1][1]=dp[1][2]=-inf;\n\tfor(int i=2;i<=n;i++)\n\t{\n\t\tif(s[i-1][0]=='-')\n\t\t{\n\t\t\tdp[i][0]=-inf;\n\t\t\tdp[i][1]=max(dp[i-1][0],dp[i-1][1])-a[i];\n\t\t\tdp[i][2]=max(dp[i-1][2],dp[i-1][1])+a[i];\n\t\t}\n\t\telse\n\t\t{\n\t\t\tdp[i][0]=max(dp[i-1][0],dp[i-1][1])+a[i];\n\t\t\tdp[i][1]=max(dp[i-1][1],dp[i-1][2])-a[i];\n\t\t\tdp[i][2]=dp[i-1][2]+a[i];\n\t\t}\n\t}\n\tprintf(\"%lld\\n\",max(max(dp[n][0],dp[n][1]),dp[n][2]));\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "//#define _GLIBCXX_DEBUG\n\n#include<bits/stdc++.h>\nusing namespace std;\n\n#define endl '\\n'\n#define lfs cout<<fixed<<setprecision(10)\n#define ALL(a)  (a).begin(),(a).end()\n#define ALLR(a)  (a).rbegin(),(a).rend()\n#define spa << \" \" <<\n#define fi first\n#define se second\n#define MP make_pair\n#define MT make_tuple\n#define PB push_back\n#define EB emplace_back\n#define rep(i,n,m) for(ll i = (n); i < (ll)(m); i++)\n#define rrep(i,n,m) for(ll i = (ll)(m) - 1; i >= (ll)(n); i--)\nusing ll = long long;\nusing ld = long double;\nconst ll MOD1 = 1e9+7;\nconst ll MOD9 = 998244353;\nconst ll INF = 1e18;\nusing P = pair<ll, ll>;\ntemplate<typename T1, typename T2>\nbool chmin(T1 &a,T2 b){if(a>b){a=b;return true;}else return false;}\ntemplate<typename T1, typename T2>\nbool chmax(T1 &a,T2 b){if(a<b){a=b;return true;}else return false;}\nll median(ll a,ll b, ll c){return a+b+c-max({a,b,c})-min({a,b,c});}\nvoid ans1(bool x){if(x) cout<<\"Yes\"<<endl;else cout<<\"No\"<<endl;}\nvoid ans2(bool x){if(x) cout<<\"YES\"<<endl;else cout<<\"NO\"<<endl;}\nvoid ans3(bool x){if(x) cout<<\"Yay!\"<<endl;else cout<<\":(\"<<endl;}\ntemplate<typename T1,typename T2>\nvoid ans(bool x,T1 y,T2 z){if(x)cout<<y<<endl;else cout<<z<<endl;}  \ntemplate<typename T>\nvoid debug(vector<vector<T>>&v,ll h,ll w){for(ll i=0;i<h;i++)\n{cout<<v[i][0];for(ll j=1;j<w;j++)cout spa v[i][j];cout<<endl;}};\nvoid debug(vector<string>&v,ll h,ll w){for(ll i=0;i<h;i++)\n{for(ll j=0;j<w;j++)cout<<v[i][j];cout<<endl;}};\ntemplate<typename T>\nvoid debug(vector<T>&v,ll n){if(n!=0)cout<<v[0];\nfor(ll i=1;i<n;i++)cout spa v[i];cout<<endl;};\ntemplate<typename T>\nvector<vector<T>>vec(ll x, ll y, T w){\n  vector<vector<T>>v(x,vector<T>(y,w));return v;}\nll gcd(ll x,ll y){ll r;while(y!=0&&(r=x%y)!=0){x=y;y=r;}return y==0?x:y;}\nvector<ll>dx={1,-1,0,0,1,1,-1,-1};\nvector<ll>dy={0,0,1,-1,1,-1,1,-1};\ntemplate<typename T>\nvector<T> make_v(size_t a,T b){return vector<T>(a,b);}\ntemplate<typename... Ts>\nauto make_v(size_t a,Ts... ts){\n  return vector<decltype(make_v(ts...))>(a,make_v(ts...));\n}\ntemplate<typename T1, typename T2>\nostream &operator<<(ostream &os, const pair<T1, T2>&p){\n  return os << p.first << \" \" << p.second;\n}\n//mt19937 mt(chrono::steady_clock::now().time_since_epoch().count());\n\nint main(){\n  cin.tie(nullptr);\n  ios_base::sync_with_stdio(false);\n  ll res=0,buf=0;\n  bool judge = true;\n  ll n;cin>>n;\n  cin>>res;\n  n--;\n  vector<ll>a(n);\n  vector<char>c(n);\n  rep(i,0,n){\n    cin>>c[i];\n    cin>>a[i];\n  }\n  auto dp=vec(n+1,3,-INF);\n  //0:括弧内でない\n  //1:-()内であり、まだ-がでてきていない\n  //2:-()内であり、-がでてきている\n  dp[0][0]=res;\n  rep(i,0,n){\n    if(c[i]=='+'){\n      chmax(dp[i+1][0],dp[i][0]+a[i]);\n      chmax(dp[i+1][1],dp[i][1]-a[i]);\n      chmax(dp[i+1][2],dp[i][2]+a[i]);\n    }\n    else{\n      chmax(dp[i+1][0],dp[i][0]-a[i]);\n      chmax(dp[i+1][1],dp[i][0]-a[i]);\n      chmax(dp[i+1][2],dp[i][1]+a[i]);\n      chmax(dp[i+1][2],dp[i][2]+a[i]);\n    }\n  }\n  //debug(dp,n+1,3);\n  cout<<*max_element(ALL(dp[n]))<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\ntypedef long long ll;\nll gi(){\n\tll x=0,f=1;\n\tchar ch=getchar();\n\twhile(!isdigit(ch))f^=ch=='-',ch=getchar();\n\twhile(isdigit(ch))x=x*10+ch-'0',ch=getchar();\n\treturn f?x:-x;\n}\nstd::mt19937 rnd(time(NULL));\n#define rand rnd\n#define pr std::pair<int,int>\n#define all(x) (x).begin(),(x).end()\n#define fi first\n#define se second\ntemplate<class T>void cxk(T&a,T b){a=a>b?a:b;}\ntemplate<class T>void cnk(T&a,T b){a=a<b?a:b;}\n#ifdef mod\nint pow(int x,int y){\n\tint ret=1;\n\twhile(y){\n\t\tif(y&1)ret=1ll*ret*x%mod;\n\t\tx=1ll*x*x%mod;y>>=1;\n\t}\n\treturn ret;\n}\ntemplate<class Ta,class Tb>void inc(Ta&a,Tb b){a=a+b>=mod?a+b-mod:a+b;}\ntemplate<class Ta,class Tb>void dec(Ta&a,Tb b){a=a>=b?a-b:a+mod-b;}\n#endif\nint A[100010];char ch[100010];\nll f[100010][3];\nint main(){\n#ifdef LOCAL\n\tfreopen(\"in.in\",\"r\",stdin);\n\t//freopen(\"out.out\",\"w\",stdout);\n#endif\n\tint n=gi();\n\tfor(int i=1;i<=n;++i)A[i]=gi(),ch[i]=getchar();\n\tfor(int i=1;i<=n;++i)if(ch[i]=='-')A[i+1]*=-1;\n\t++n;\n\tmemset(f,-63,sizeof f);\n\tf[0][0]=0;\n\tfor(int i=1;i<=n;++i)\n\t\tfor(int j=0;j<3;++j){\n\t\t\tfor(int k=0;k<3;++k){\n\t\t\t\tif(k>=j)cxk(f[i][j],f[i-1][k]+A[i]*(j&1?-1:1));\n\t\t\t\tif(A[i]<0&&j&&k>=j-1)cxk(f[i][j],f[i-1][k]+A[i]*(~j&1?-1:1));\n\t\t\t}\n\t\t}\n\tprintf(\"%lld\\n\",f[n][0]);\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\ntypedef double db;\ntypedef long long ll;\ntypedef vector<int> vi;\ntypedef pair<int, int> pii;\n#define fi first\n#define se second\n#define mp make_pair\n#define pb push_back\n#define pw(x) (1ll << (x))\n#define sz(x) ((int)(x).size())\n#define all(x) (x).begin(),(x).end()\n#define rep(i,l,r) for(int i=(l);i<(r);++i)\n#define per(i,l,r) for(int i=(r)-1;i>=(l);--i)\n#define dd(x) cout << #x << \" = \" << x << \", \"\n#define de(x) cout << #x << \" = \" << x << endl\n\n//-----\n\nint main() {\n\tstd::ios::sync_with_stdio(false);\n\tstd::cin.tie(0);\n  int n; cin >> n;\n  vector<pair<ll, ll> > v(1);\n  cin >> v[0].fi, v[0].se = v[0].fi;\n  rep(i, 1, n) {\n  \tchar op; int a; cin >> op >> a;\n  \tif (op == '+') v.back().se += a;\n  \telse v.pb({a, a});\n\t}\n\t//rep(i, 0, sz(v)) cout << v[i].fi << \" \" << v[i].se << endl;\n\tll ans = -LLONG_MAX, drop = 0, sum = 0;\n\trep(i, 0, sz(v)) sum += v[i].se;\n\trep(i, 1, sz(v)) {\n\t\tans = max(ans, sum - drop * 2- v[i].se * 2);\n\t\tdrop += v[i].fi;\n\t}\n\tans = max(ans, sum - drop * 2);\n\tcout << ans;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <string>\n#include <iostream>\n#include <algorithm>\nusing namespace std;\nint n, a[100009]; long long dp[100009][7]; bool vis[100009][7]; string s[100009];\nlong long solve(int pos, int depth) {\n\tif (pos == n) return 0;\n\tif (vis[pos][depth]) return dp[pos][depth];\n\tlong long ret = -1LL << 61;\n\tif (s[pos] == \"+\") {\n\t\tret = solve(pos + 1, depth) + a[pos] * (depth % 2 ? -1 : 1);\n\t\tif (depth > 0) ret = max(ret, solve(pos + 1, depth - 1) + a[pos] * (depth % 2 ? 1 : -1));\n\t}\n\telse {\n\t\tret = solve(pos + 1, depth) + a[pos] * (depth % 2 ? 1 : -1);\n\t\tif (depth > 0) ret = max(ret, solve(pos + 1, depth - 1) + a[pos] * (depth % 2 ? -1 : 1));\n\t\tif (depth < 6) ret = max(ret, solve(pos + 1, depth + 1) + a[pos] * (depth % 2 ? 1 : -1));\n\t}\n\tvis[pos][depth] = true;\n\tdp[pos][depth] = ret;\n\treturn ret;\n}\nint main() {\n\tcin >> n;\n\ts[0] = \"+\"; cin >> a[0];\n\tfor (int i = 1; i < n; i++) cin >> s[i] >> a[i];\n\tlong long ret = solve(0, 0);\n\tcout << ret << endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\nint main(){\n\tint n; cin >> n;\n\tvector<long long> vals(n);\n\tconst long long inf = 1ll<<60;\n\tconst int magic = 3;\n\tvector<vector<long long> > f(magic + 1, vector<long long>(n + 1, -inf));\n\tvector<char> sig(n + 1, '+');\n\tcin >> vals[0];\n\tfor(int i = 1; i < n; i++){\n\t\tcin >> sig[i] >> vals[i];\n\t}\n\tf[0][0] = 0;\n\tfor(int i = 0; i < n; i++){\n\t\tfor(int j = 0; j < magic; j++){\n\t\t\tint csig = j%2 == 0?1:-1;\n\t\t\tif(sig[i] == '-'){\n\t\t\t\tf[j][i+1] = max(f[j][i+1], f[j][i] - csig * vals[i]);\n\t\t\t\tif(j) f[j-1][i+1] = max(f[j-1][i+1], f[j][i] - csig * vals[i]);\n\t\t\t\tf[j+1][i+1] = max(f[j+1][i+1], f[j][i] - csig * vals[i]);\n\t\t\t} else {\n\t\t\t\tf[j][i+1] = max(f[j][i+1], f[j][i] + csig * vals[i]);\n\t\t\t\tif(j) f[j-1][i+1] = max(f[j-1][i+1], f[j][i] + csig * vals[i]);\n\t\t\t}\n\t\t}\n\t}\n\tcout << f[0][n] << endl;\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <cstdio>\nint main(){\n\tint n;long long f0,f1,f2;\n\tscanf(\"%d%lld\",&n,&f0);\n\tf1=f2=-1e18;\n\tfor (int i=1;i<n;i++){\n\t\tchar op;int x;\n\t\tscanf(\" %c%d\",&op,&x);\n\t\tif (op=='-') f0=f1=std::max(f0-x,f2=f1+x);\n\t\telse f0+=x,f1=std::max(f1-x,f2+=x);\n\t}\n\tprintf(\"%lld\\n\",f0);\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\nint n;\nlong long dp[100007][3];\nint read()\n{\n\tint num = 0, f = 1;\n\tchar c = getchar();\n\twhile ((c < '0' || c>'9') && c != '-')c = getchar();\n\tif (c == '-')f = -1, c = getchar();\n\twhile (c < '0' || c>'9')c = getchar();\n\twhile (c >= '0' && c <= '9')num = num * 10 + c - '0', c = getchar();\n\treturn num * f;\n}\nint main()\n{\n\tn = read();\n\tdp[0][0] = 0, dp[0][1] = dp[0][2] = -1e18;\n\tfor (int i = 1; i <= n; i++)\n\t{\n\t\tint v = read();\n\t\tdp[i][0] = max(dp[i - 1][0], dp[i - 1][1]) + v;\n\t\tdp[i][1] = max(dp[i - 1][1], dp[i - 1][2]) - v;\n\t\tdp[i][2] = dp[i - 1][2] + v;\n\t\tif (v < 0)\n\t\t{\n\t\t\tdp[i][2] = max(dp[i][2], dp[i][1]);\n\t\t\tdp[i][1] = max(dp[i][1], dp[i][0]);\n\t\t}\n\t}\n\tcout << max(dp[n][0], max(dp[n][1], dp[n][2])) << endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<string>\n#include<algorithm>\n#include<vector>\nusing namespace std;\nlong long dp[1000000][5], a[1000000], n;\nchar op[1000000];\nint main() {\n\tcin >> n;\n\tfor (int i = 0; i < n; i++) {\n\t\tcin >> a[i]; if (i != n - 1)cin >> op[i];\n\t}\n\tfor (int i = 0; i <= n; i++) {\n\t\tfor (int j = 0; j < 5; j++)dp[i][j] = -1LL << 62;\n\t}\n\tdp[0][0] = 0;\n\tfor (int i = 0; i < n; i++) {\n\t\tfor (int j = 0; j < 4; j++) {\n\t\t\tif (dp[i][j] == -1LL << 62)continue;\n\t\t\tif (i == 0 || op[i - 1] == '+') {\n\t\t\t\tif (j % 2 == 0) {\n\t\t\t\t\tdp[i + 1][j] = max(dp[i + 1][j], dp[i][j] + a[i]);\n\t\t\t\t\tif (j >= 1)dp[i + 1][j - 1] = max(dp[i + 1][j - 1], dp[i][j] + a[i]);\n\t\t\t\t}\n\t\t\t\tif (j % 2 == 1) {\n\t\t\t\t\tdp[i + 1][j] = max(dp[i + 1][j], dp[i][j] - a[i]);\n\t\t\t\t\tif (j >= 1)dp[i + 1][j - 1] = max(dp[i + 1][j - 1], dp[i][j] - a[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (j % 2 == 0) {\n\t\t\t\t\tdp[i + 1][j] = max(dp[i + 1][j], dp[i][j] - a[i]);\n\t\t\t\t\tdp[i + 1][j + 1] = max(dp[i + 1][j + 1], dp[i][j] - a[i]);\n\t\t\t\t\tif (j >= 1)dp[i + 1][j - 1] = max(dp[i + 1][j - 1], dp[i][j] - a[i]);\n\t\t\t\t}\n\t\t\t\tif (j % 2 == 1) {\n\t\t\t\t\tdp[i + 1][j] = max(dp[i + 1][j], dp[i][j] + a[i]);\n\t\t\t\t\tdp[i + 1][j + 1] = max(dp[i + 1][j + 1], dp[i][j] + a[i]);\n\t\t\t\t\tif (j >= 1)dp[i + 1][j - 1] = max(dp[i + 1][j - 1], dp[i][j] + a[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tcout << max(dp[n][0], max(dp[n][1], max(dp[n][2], dp[n][3]))) << endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<iomanip>\n#include<map>\n#include<unordered_map>\n#include<set>\n#include<unordered_set>\n#include<vector>\n#include<array>\n#include<string>\n#include<stack>\n#include<queue>\n#include<algorithm>\n#include<cassert>\n#include<functional>\n#include<random>\n#include<complex>\n#include<bitset>\n#include<chrono>\n//#include<boost/multiprecision/cpp_int.hpp>\n#define int int64_t\n#define uint uint64_t\n#define REP(i, a, b) for (int64_t i = (int64_t)(a); i < (int64_t)(b); i++)\n#define rep(i, a) REP(i, 0, a)\n#define SZ(X) ((int64_t)((X).size()))\n#define ITR(x, a) for (auto x = a.begin(); x != a.end(); x++)\n#define ALL(a) (a.begin()), (a.end())\n#define HAS(a, x) (a.find(x) != a.end())\n#define Min(x) *min_element(ALL(x))\n#define Max(x) *max_element(ALL(x))\n#define Unique(L) (L.erase(unique(ALL(L)), L.end()))\n#define intmax (std::numeric_limits<int64_t>::max() / 4)\n#define doublemax (std::numeric_limits<double>::max() / 4)\nusing namespace std;\n//typedef boost::multiprecision::cpp_int bigint;\nconst double EPS = 1e-9;\nconst double PI = acos(-1.0);\n\n//sort(ALL(v),greater<int>());\nclass segtree_sum_pointupdate {\nprivate:\n\ttypedef int T;\npublic:\n\tsegtree_sum_pointupdate(const int N) {\n\t\tSIZE = roundup_pow2(N);\n\t\tv.clear();\n\t\tv.resize(SIZE * 2, 0);\n\t}\n\n\t//v[index]=numberとする。\n\tvoid update(const int index, const T number) {\n\t\tv[index + SIZE] = number;\n\t\tfor (int i = (index + SIZE) / 2; i; i = i / 2)v[i] = v[i * 2] + v[i * 2 + 1];\n\t}\n\n\t//[index]の値を返す。\n\tT getnum(const int index) {\n\t\treturn v[index + SIZE];\n\t}\n\n\t//[L,R)の総和を返す。\n\tT getsum(const int L, const int R) {\n\t\treturn getsum_inner(L, R, 1, 0, SIZE);\n\t}\nprivate:\n\tT getsum_inner(const int queryL, const int queryR, const int index, const int segL, const int segR) {\n\t\tif (queryR <= segL || segR <= queryL)return 0;\n\t\tif (queryL <= segL && segR <= queryR)return v[index];\n\t\treturn getsum_inner(queryL, queryR, index * 2, segL, (segL + segR) / 2) +\n\t\t\tgetsum_inner(queryL, queryR, index * 2 + 1, (segL + segR) / 2, segR);\n\t}\n\n\t//x以上であるような2のべき乗数のうち最小のものを返す。\n\tint roundup_pow2(int x) {\n\t\tx--;\n\t\trep(i, 6)x |= x >> (1LL << i);\n\t\treturn x + 1;\n\t}\n\n\tint SIZE;\n\tvector<T>v;\n};\nsegtree_sum_pointupdate seg(1);\n\nint minimize(vector<int>&A, int start, int end) {\n\t//A[start]のマイナス符号の直後に(を置いて、\n\t//endの直後に)を置くとして、\n\t//( ) の内側を最小化したときの値を返す。\n\tassert(A[start] < 0 && A[end] < 0);\n\tint ans = -A[start];\n\tint cursor = start + 1;\n\tfor (; 0 < A[cursor]; cursor++) {\n\t\tans += A[cursor];\n\t}\n\tans -= seg.getsum(cursor, end + 1);\n\treturn ans;\n}\n\nsigned main() {\n\tcin.tie(0);\n\tios::sync_with_stdio(false);\n\n\tint N;\n\tcin >> N;\n\n\tseg = segtree_sum_pointupdate(N);\n\n\tvector<int>A(N), op(N - 1);\n\tint first = -1, last = -1;\n\trep(i, N) {\n\t\tstring s;\n\t\tif (i)cin >> s;\n\t\telse s = \"+\";\n\t\tint hugou = 1;\n\t\tif (s[0] == '-') {\n\t\t\thugou *= -1;\n\t\t\tif (first == -1)first = i;\n\t\t\tlast = i;\n\t\t}\n\t\tcin >> A[i];\n\t\tseg.update(i, A[i]);\n\t\tA[i] *= hugou;\n\t}\n\n\twhile (first != last) {\n\t\tint sum = A[last], cursor;\n\t\tfor (cursor = last - 1; 0 < A[cursor]; cursor--)sum += A[cursor];\n\t\tif (0 < sum)break;\n\t\tlast = cursor;\n\t}\n\n\n\tif (first == last) {//マイナスの数が0or1\n\t\tint ans = 0;\n\t\trep(i, N)ans += A[i];\n\t\tcout << ans << endl;\n\t\treturn 0;\n\t}\n\n\tint ans = 0;\n\tfor (int i = 0; i < first; i++) {\n\t\tassert(0 < A[i]);\n\t\tans += A[i];\n\t}\n\tfor (int i = last+1; i < N; i++) {\n\t\tassert(0 < A[i]);\n\t\tans += A[i];\n\t}\n\twhile (first != last) {\n\t\tint m = minimize(A, first, last);\n\t\tif (m <= -A[first]) {\n\t\t\tans -= m;\n\t\t\tcout << ans << endl;\n\t\t\treturn 0;\n\t\t}\n\t\tans += A[first++];\n\t\tfor (; 0 < A[first]; first++)ans += A[first];\n\t}\n\tans += A[first];\n\tcout << ans << endl;\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long LL;\nint n,a[100008],t,next,pos[100008];\nchar op[100008];\nLL ans,tmp,suf[100008];\nint main()\n{\n\tios::sync_with_stdio(false);\n\tcin>>n>>t;\n\tfor(int i=1;i<n;++i){\n\t\tcin>>op[i]>>a[i];\n\t}\n\tnext=n;\n\tfor(int i=n-1;i;--i){\n\t\tsuf[i]=suf[i+1]+a[i];\n\t\tif(op[i]=='-'){\n\t\t\tpos[i]=next;\n\t\t\tnext=i;\n\t\t}\n\t}\n\tfor(int i=1;i<n;++i){\n\t\tif(op[i]=='-'){\n\t\t\tans=max(ans,tmp-(suf[i]-suf[pos[i]])+suf[pos[i]]);\n\t\t\ttmp-=a[i];\n\t\t}\n\t\telse{\n\t\t\ttmp+=a[i];\n\t\t\tif(i==n-1)\tans=max(ans,tmp);\n\t\t}\n\t}\n\tcout<<ans+t;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\n#define rep(i , l , r) for(int i = (l) , ___ = (r) ; i <= ___ ; ++i)\n#define per(i , r , l) for(int i = (r) , ___ = (l) ; i >= ___ ; --i)\n\ntemplate<typename T>inline int chkmin(T &x , const T &y) { return x > y ? x = y , 1 : 0; }\ntemplate<typename T>inline int chkmax(T &x , const T &y) { return x < y ? x = y , 1 : 0; }\n\ntemplate<typename T>inline T read(T &f)\n{\n\tf = 0 ; int x = 1 ; char c = getchar();\n\twhile(!isdigit(c)) x = c == '-' ? -1 : 1 , c = getchar();\n\twhile(isdigit(c)) (f *= 10) += c & 15 , c = getchar();\n\treturn f *= x;\n}\n\nconst int N = 100000 + 5;\n\nusing int64 = long long;\n\nint n , cnt , A[N] , col[N] ;\n\nint64 s[N] , sum[N] , sl[N];\n\nint main()\n{\n\tread(n);\n\trep(i , 1 , n)\n\t{\n\t\tstatic int op[10];\n\t\tif(i == 1) read(A[i]) , col[++cnt] = 1 , s[1] = A[i];\n\t\telse\n\t\t{\n\t\t\tscanf(\"%s\" , op) , read(A[i]);\n\t\t\tif(*op == '-')\n\t\t\t{\n\t\t\t\tcol[++cnt] = -1;\n\t\t\t\ts[i] = -A[i];\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif(col[cnt] == 1) \n\t\t\t\t{\n\t\t\t\t\ts[cnt] += A[i];\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tcol[++cnt] = 1;\n\t\t\t\t\ts[cnt] = A[i];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tper(i , cnt , 1)\n\t{\n\t\tsum[i] = sum[i + 1] + abs(s[i]);\n\t}\n\tint64 Ans = -INT_MAX , ret = 0;\n\trep(i , 1 , cnt)\n\t{\n\t\tsl[i] = sl[i - 1] + s[i];\n\t}\n\tcerr << cnt << endl;\n\trep(i , 1 , cnt)\n\t{\n\t\tif(col[i + 1] == -1)\n\t\t{\n\t\t\tchkmax(Ans , sl[i + 1] - s[i + 2] + sum[i + 3]);\n\t\t}\n\t}\n\tchkmax(Ans , sl[cnt]);\n\tcout << Ans << endl;\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "// Math = ♥\n// Sometimes it is people that no one imagines anything of who do things that no one can imagine\n// After all this time? Always\n\n#include <bits/stdc++.h>                        // uncomment before submission\n//#include <ext/pb_ds/assoc_container.hpp>\t\t// uncomment before submission\n//#include <ext/pb_ds/tree_policy.hpp>\t\t\t// uncomment before submission\n//using namespace __gnu_pbds;\t\t\t\t\t// uncomment before submission\nusing namespace std;\n//<---------------------------------------------------Template----------------------------------------------------------->\n#define int long long\n#define ll long long\n#define ld long double\nint INF = 1e9 + 7;\ntypedef pair<ll, ll> ii;\ntypedef vector<ll> vi;                  // Vector of long long\ntypedef vector<vi> vvi;                 // Vector of vi\ntypedef vector<ii> vii;                 // Vector of pairs\ntypedef vector<vii> vvii;               // Vector of Vector of pairs\ntypedef vector<bool> vb;                // Vector of bool\n#define pq priority_queue               // Max heap (To convert to min heap, use negative sign before every value)\n#define ff first                        // For pairs\n#define ss second                       // For pairs\n#define pb push_back                    // Pushback to vector\n#define mp make_pair                    // Makes pairs to be stored as pair\n#define all(c) (c).begin(), (c).end()   // Mainly used by me in sorting\n// ordered_set adds two new functions to set - (set).find_by_order([kth element based on zero indexing]) and order_of_key()\n// order_of_key returns number of elements less that parameter. If element exists, that order is its index\n#define ordered_set tree<ll, null_type, less<ll>, rb_tree_tag, tree_order_statistics_node_update>\n//<----------------------------------------------------------------------------------------------------------------------->\n\nsigned main()\n{\n    ios_base::sync_with_stdio(false);\n    cin.tie(NULL);\n    int n;\n    cin >> n;\n\n    vector<char> op;\n    vi num;\n\n    int x;\n    cin >> x, num.pb(x);\n    for (int i = 0; i < n - 1; i++)\n    {\n        char ch;\n        cin >> ch >> x;\n        op.pb(ch), num.pb(x);\n    }\n\n    vvi dp(n, vector<int>(3));\n    dp[0][0] = num[0];\n    dp[0][1] = -INF;\n    dp[0][2] = -INF;\n\n    for (int i = 1; i < n; i++)\n    {\n        if (op[i - 1] == '+')\n        {\n            dp[i][0] = dp[i - 1][0] + num[i];\n            dp[i][1] = dp[i - 1][1] - num[i];\n            dp[i][2] = dp[i - 1][2] + num[i];\n            dp[i][0] = max(dp[i][0], max(dp[i][1], dp[i][2]));\n            dp[i][1] = max(dp[i][1], dp[i][2]);\n        } else\n        {\n            dp[i][1] = max(dp[i - 1][0], dp[i - 1][1]) - num[i];\n            dp[i][2] = max(dp[i - 1][1], dp[i - 1][2]) + num[i];\n            dp[i][0] = -INF;\n        }\n    }\n\n    int a[] = {dp[n - 1][0], dp[n - 1][1], dp[n - 1][2]};\n    sort(a, a + 3);\n\n    cout << a[2] << endl;\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n#define llong long long\nconst llong inf=0x3f3f3f3f3f3f3f3f;\nint n;\nchar op[22];\nint a;\nllong dp[100100][3];\nint main()\n{\n    scanf(\"%d\",&n);\n    scanf(\"%d\",&a);\n    dp[1][0]=a;\n    dp[1][1]=dp[1][2]=-inf;\n    for(int i=2;i<=n;++i)\n    {\n        scanf(\"%s%d\",op,&a);\n        if(op[0]=='-')a=-a;\n//        cout<<\"i: \"<<i<<\" op: \"<<op[0]<<\" a: \"<<a<<endl;\n        dp[i][0]=max(dp[i-1][0],dp[i-1][1]);\n        dp[i][1]=max(dp[i-1][1],dp[i-1][2]);\n        dp[i][2]=dp[i-1][2]+a;\n//        cout<<dp[i][0]<<\" \"<<dp[i][1]<<\" \"<<dp[i][2]<<endl;cout<<endl;\n        dp[i][0]+=a;\n        dp[i][1]-=a;\n        if(op[0]=='-')\n        {\n            dp[i][2]=max(dp[i][2],dp[i][1]);\n            dp[i][1]=max(dp[i][1],dp[i][0]);\n        }\n//        cout<<dp[i][0]<<\" \"<<dp[i][1]<<\" \"<<dp[i][2]<<endl;cout<<endl;\n    }\n    printf(\"%lld\\n\",max(dp[n][0],max(dp[n][1],dp[n][2])));\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define N 100005\n#define LL long long\nusing namespace std;\nLL val[N];//- -\nLL suf[N];\nint n; \nint main(){\n\tscanf(\"%d\",&n);\n\tscanf(\"%lld\",&val[1]);\n\tint cnt=1;\n\tfor(int i=2,t;i<=n;i++){\n\t\tchar ch=getchar();\n\t\twhile(ch!='+'&&ch!='-') ch=getchar();\n\t\tscanf(\"%d\",&t);\n\t\tif(ch=='+') val[cnt]+=t;\n\t\telse val[++cnt]=t;\n\t}\n\tfor(int i=cnt;i>=1;i--) suf[i]=suf[i+1]+val[i];\n\tLL pre=val[1],ans=-1e18;\n\tfor(int i=2;i<=cnt;i++){\n\t\tpre-=val[i];\n\t\tans=max(ans,pre+suf[i+1]);\n\t}\n\tcout<<ans<<endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n\nusing namespace std;\n\nlong A[200000];\nlong sum[200001];\nlong sum_abs[200001];\nvector<int> negs;\n\nint main(){\n    int N;\n    cin >> N;\n    long ans;\n    sum[0] = 0;\n    sum_abs[0] = 0;\n    cin >> A[0];\n    sum[1] = A[0];\n    sum_abs[1] = A[0];\n    for(int i = 1; i < N; i++){\n        char op;\n        cin >> op;\n        cin >> A[i];\n        if(op == '-') {\n            A[i] *= -1;\n            negs.push_back(i);\n        }\n        sum[i+1] = sum[i]+A[i];\n        sum_abs[i+1] = sum_abs[i]+abs(A[i]);\n    }\n    ans = sum[N];\n    for(int i = 0; i < negs.size()-1; i++){\n        int l = negs[i];\n        int r = negs[i+1];\n        long tmp = sum_abs[N]-sum_abs[r] + sum[l+1] - (sum_abs[r]-sum_abs[l+1]);\n        ans = max(ans, tmp);\n    }\n    cout << ans << endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <fstream>\n#include <set>\n#include <map>\n#include <string>\n#include <vector>\n#include <bitset>\n#include <algorithm>\n#include <cstring>\n#include <cstdlib>\n#include <cmath>\n#include <cassert>\n#include <queue>\n\n#define mp make_pair\n#define pb push_back\n\n\ntypedef long long ll;\ntypedef long double ld;\n\nusing namespace std;\n\nint n;\nint a[120000];\nchar c[120000];\nconst ll INF = 1e18;\n\nint main() {\n\tscanf(\"%d\", &n);\n\tfor (int i = 0; i < n; ++i) {\n\t\tscanf(\"%d\", a + i);\n\t\tif (i != n - 1)\n\t\t\tscanf(\" %c\", c + i + 1);\n\t}\n\tc[0] = '+';\n\tll mn = INF;\n\tll sum = 0;\n\tll cur = 0;\n\tll now = 0;\n\tfor (int i = 0; i < n; ++i) {\n\t\tsum += a[i];\n\t\tif (c[i] == '+') {\n\t\t\tcur += a[i];\n\t\t}\n\t\telse {\n\t\t\tif (now != 0)\n\t\t\t\tmn = min(mn, now + cur);\n\t\t\tcur = 0;\n\t\t\tnow += a[i];\n\t\t}\n\t}\n\tcout << sum - 2 * mn << \"\\n\";\n\treturn 0;\n}\n\n\n"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<cstring>\n#include<algorithm>\n\nusing namespace std;\ntypedef long long ll;\nconst int N=100100;\nint n;ll a[N],f[2][N];\nchar s[N];int op[N];\n\nll cg(int x){return (x&1)?-1:1;}\nint main(){\n\tscanf(\"%d\",&n);op[1]=1;\n\tfor (int i=1;i<n;i++){\n\t\tscanf(\"%d%s\",a+i,s);\n\t\tif (s[0]=='-')\n\t\t\top[i+1]=-1; else op[i+1]=1;\n\t}\n\tscanf(\"%d\",&a[n]);\n\tf[0][1]=a[1];f[1][1]=f[2][1]=-1e18;\n\tfor (int i=2;i<=n;i++){\n\t\tfor (int j=0;j<=2;j++) f[j][i]=-1e18;\n\t\tfor (int j=0;j<=2;j++)\n\t\t\tfor (int k=0;k<=j;k++)\n\t\t\t\tf[k][i]=max(f[k][i],f[j][i-1]+op[i]*a[i]*cg(k));\n\t\tif (op[i]==-1){\n\t\t\tfor (int j=2;j;j--)\n\t\t\t\tf[j][i]=max(f[j][i],f[j-1][i]);\n\t\t}\n\t}\n\tprintf(\"%lld\\n\",max(max(f[0][n],f[1][n]),f[2][n]));\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#include <math.h>\n#define uint unsigned long long\n#define ll long long\n#define db double\n#define ls rt << 1\n#define rs rt << 1 | 1\n#define pb push_back\n#define mp make_pair\n#define pii pair<int, int>\n#define X first\n#define Y second\n#define pcc pair<char, char>\n#define vi vector<int>\n#define vl vector<ll>\n#define rep(i, x, y) for(int i = x; i <= y; i ++)\n#define rrep(i, x, y) for(int i = x; i >= y; i --)\n#define ept 1e-9\n\nusing namespace std;\ninline int read()\n{\n    int x = 0, f = 1; char ch = getchar();\n    while (ch < '0' || ch > '9') { if (ch == '-') f = -1; ch = getchar(); }\n    while (ch >= '0' && ch <= '9') { x = x * 10 + ch - '0'; ch = getchar(); }\n    return x * f;\n}\nconst int mod = 1e9 + 7;\nll ps[200010], as[200010];\nvector<int>pos;\nvoid cut(ll &val, int pos1, int pos2)\n{\n    if (pos1 > pos2) return;\n    val -= as[pos2] - as[pos1 - 1];\n}\n\nint main()\n{\n    int n = read();\n    int val = read();\n    ps[1] = val;\n    as[1] = val;\n    rep(i, 2, n)\n    {\n        int val;\n        char op;\n        cin >> op;\n        scanf(\"%d\", &val);\n        if (op == '+') ps[i] = ps[i - 1] + val;\n       \telse ps[i] = ps[i - 1] - val, pos.push_back(i);\n        as[i] = as[i - 1] + val;\n    }\n    ll ans = ps[n];\n    int nn = pos.size() - 2;\n    rep(i, 0, nn)\n    {\n        int p1 = pos[i], p2 = pos[i + 1];\n        ll tans = as[n] - as[p2 - 1];\n        tans += ps[p1];\n        cut(tans, p1 + 1, p2 - 1);\n        ans = max(ans, tans);\n    }\n    cout << ans << endl;\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n#define int long long\nconst double PI = 3.14159265358979323846;\ntypedef vector<int> vint;\ntypedef pair<int, int> pint;\nint dx[8] = {1, 0, -1, 0, 1, -1, -1, 1};\nint dy[8] = {0, 1, 0, -1, 1, 1, -1, -1};\n\nint N;\nint A[110000];\nchar op[110000];\n\nsigned main() {\n    cin >> N;\n    cin >> A[0];\n    for (int i = 1; i < N; i++)cin >> op[i] >> A[i];\n    op[N] = '-'; A[N] = 0;\n\n    int sum = A[0], total_minus = 0, cur_minus = 0, min_minus = LLONG_MAX;\n    for (int i = 1; i <= N; i++) {\n        if (op[i] == '+') {\n            if (total_minus > 0)cur_minus += A[i];\n        } else {\n            if (total_minus > 0)min_minus = min(min_dec, total_minus + cur_minus);\n            total_minus += A[i];\n            cur_minus = 0;\n        }\n        sum += A[i];\n    }\n    if (min_minus == LLONG_MAX)min_minus = 0;\n    cout << sum - 2 * min_minus;\n\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\nusing namespace std;\nlong dp[3],a;\nchar op;\nint n;\nmain()\n{\n\tcin>>n>>dp[0];\n\tdp[1]=dp[2]=-1e18;\n\tfor(int i=1;i<n;i++)\n\t{\n\t\tcin>>op>>a;\n\t\tif(op=='+')\n\t\t{\n\t\t\tdp[0]+=a;\n\t\t\tdp[1]=max(dp[1]-a,dp[2]+=a);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tdp[0]=dp[1]=max(dp[2]=dp[1]+a,dp[0]-a);\n\t\t}\n\t}\n\tcout<<dp[0]<<endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <cstring>\n#include <algorithm>\ntypedef long long int64;\nstatic const int MAXN = 1e5 + 4;\n\nint n, a[MAXN];\nchar op[MAXN];\nint64 f[MAXN][3];\n\nint main()\n{\n    scanf(\"%d%d\", &n, &a[0]);\n    for (int i = 1; i < n; ++i) {\n        scanf(\" %c %d\", &op[i], &a[i]);\n        if (op[i] == '-') a[i] = -a[i];\n    }\n\n    memset(f, 0x80, sizeof f);\n    f[0][0] = a[0];\n    for (int i = 1; i < n; ++i) {\n        f[i][2] = f[i - 1][2] + a[i];\n        f[i][1] = std::max(f[i][2], f[i - 1][1] - a[i]);\n        f[i][0] = std::max(f[i][1], f[i - 1][0] + a[i]);\n        if (a[i] < 0) {\n            f[i][1] = std::max(f[i][1], f[i - 1][0] + a[i]);\n            f[i][2] = std::max(f[i][2], f[i - 1][1] - a[i]);\n        }\n    }\n\n    printf(\"%lld\\n\", std::max(std::max(f[n - 1][0], f[n - 1][1]), f[n - 1][2]));\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <sstream>\n#include <string>\n#include <vector>\n#include <stack>\n#include <queue>\n#include <set>\n#include <map>\n#include <numeric>\n#include <algorithm>\n#include <cstdio>\n#include <cstdlib>\n#include <cstring>\n#include <cctype>\n#include <cmath>\n#include <cassert>\n#include <cstdarg>\n#include <sys/time.h>\n#include <fstream>\n//#include \"cout.h\"\n\nusing namespace std;\n\n#define SZ(x) ((int)x.size())\n#define MSET(x,a) memset(x, a, (int)sizeof(x))\n#define PB push_back\n#define VI vector < int >\n#define PII pair < int, int >\n#define LL long long\n#define FOR(i,a,b) for (int i = (a); i < (b); i++)\n#define REP(i,n) FOR(i,0,n)\n#define ALL(v) (v).begin(), (v).end()\n#define FIT(it,v) for (__typeof((v).begin()) it = (v).begin(); it != (v).end(); it++)\n#define OUT(A) cout << #A << \" = \"<< (A) << endl\n#define OUT2(A, B) cout << \"(\" << #A << \", \" << #B << \") = (\" << (A) << \", \"<< (B) << \")\" << endl\ntemplate<class T> void chmin(T &t, T f) { if (t > f) t = f; } \ntemplate<class T> void chmax(T &t, T f) { if (t < f) t = f; } \n\n#define present(c, e) ((c).find((e)) != (c).end())\n#define cpresent(c, e) (find(all(c), (e)) != (c).end())\n\nint n;\nLL a[100010];\nchar op[100010];\nLL dp[100010][3];\n\nvoid init() {\n}\n\nvoid input() {\n\tcin >> n;\n\tREP(i, n) {\n\t\tcin >> a[i];\n\t\tif (i < n-1) cin >> op[i+1];\n\t}\n}\n\nvoid solve() {\n\tREP(i, 100010) REP(j, 3) dp[i][j] = -(1LL<<55);\n\tdp[0][0] = a[0];\n\tFOR(i, 1, n){\n\t\tif(op[i] == '+'){\n\t\t\tdp[i][0] = max({\n\t\t\t\tdp[i-1][0]+a[i], \n\t\t\t\tdp[i-1][1]+a[i], \n\t\t\t\tdp[i-1][2]+a[i]\n\t\t\t\t});\n\t\t\tdp[i][1] = max({\n\t\t\t\tdp[i-1][1]-a[i], \n\t\t\t\tdp[i-1][2]-a[i]\n\t\t\t\t});\n\t\t\tdp[i][2] = max({\n\t\t\t\tdp[i-1][2]+a[i]\n\t\t\t\t});\n\t\t}\n\t\telse{\n\t\t\tdp[i][0] = max({\n\t\t\t\tdp[i-1][0]-a[i], \n\t\t\t\tdp[i-1][1]-a[i], \n\t\t\t\tdp[i-1][2]-a[i]\n\t\t\t\t});\n\t\t\tdp[i][1] = max({\n\t\t\t\tdp[i-1][0]-a[i], \n\t\t\t\tdp[i-1][1]+a[i], \n\t\t\t\tdp[i-1][2]+a[i]\n\t\t\t\t});\n\t\t\tdp[i][2] = max({\n\t\t\t\tdp[i-1][1]+a[i], \n\t\t\t\tdp[i-1][2]-a[i]\n\t\t\t\t});\n\t\t}\n\t}\n\tcout << max({dp[n-1][0], dp[n-1][1], dp[n-1][2]}) << endl;\n}\n\nint main() {\n\tinit();\n    input();\n    solve();\n\treturn 0;\n}\n\n\n\n\n\n\n"
  },
  {
    "language": "C++",
    "code": "// In the name of Allah\n// #Isart\n\n#include<bits/stdc++.h>\n\n#define pii pair<int, int>\n#define pb push_back\n#define F first\n#define S second\n#define ll long long\n#define ld long double\n\nusing namespace std;\n\nconst int MAXN = 1e5 + 10;\nll a[MAXN], dp[MAXN], ps[MAXN];\nint r[MAXN];\n\nint main(){\n\tios::sync_with_stdio(false); cin.tie(0);\n\t\n\tint n, s = 1;\n\tcin >> n;\n\t\n\tfor(int i = 0; i < n; i ++){\n\t\tchar ch = '+';\n\t\tif(i) cin >> ch;\n\t\tif(ch == '+') s = 1;\n\t\telse s = -1;\n\t\tcin >> a[i];\n\t\ta[i] *= s;\n\t}\t\n\tfor(int i = n - 1; i > -1; i --)\n\t\tps[i] = ps[i + 1] + abs(a[i]);\n\n\tfor(int i = n - 1; i > -1; i --){\n\t\tif(a[i] > 0 and a[i + 1] <= 0) r[i] = i;\n\t\telse r[i] = r[i + 1];\n\t}\n\n\tfor(int i = n - 1; i > -1 ; i --){\n\t\tif(a[i] >= 0) dp[i] = dp[i + 1] + a[i];\n\t\telse if(a[i] < 0 and a[i + 1] < 0)\n\t\t\tdp[i] = a[i] + ps[i + 1];\n\t\telse if(a[i] < 0 and a[i + 1] > 0)\n\t\t\tdp[i] = max(a[i] + dp[i + 1], 2 * ps[r[i] + 1] - ps[i]);\n\t\t\n\t}\n\tcout << dp[0] << endl;\n\n//\tsystem(\"pause\");\n\treturn 0;\t\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define int long long\n#define fi first\n#define se second\n#define PB push_back\nusing namespace std;\ntypedef pair<int, int> P1;\ntypedef pair<int, pair<int, int> > P2;\nstatic const int INF = 1ll<<60;\nstatic const int dx[] = { 1, -1, 0, 0, };\nstatic const int dy[] = { 0, 0, 1, -1 };\nstatic const int mod = 1000000007;\n\nint N;\nint A[100005];\nchar op[100005];\nint dp[100005][5];\n//    [i項目][i項目までに開いているかっこの数]\n\nint solve(){\n    for(int i=0;i<100005;++i)for(int j=0;j<5;++j)dp[i][j]=-INF;\n    dp[0][0] = A[0];\n    for(int i=0;i<N-1;++i){\n        for(int j=0;j<=3ll;++j){\n            int f;\n            if(j%2==0)f=1;\n            else f=-1;\n            int t1 = f*A[i+1];\n            if(op[i+1]=='+'){\n                dp[i+1][j] = max(dp[i][j]+t1,dp[i+1][j]);\n                if(j!=0)dp[i+1][j-1] = max(dp[i][j]+t1,dp[i+1][j-1]);\n            }\n            else {\n                dp[i+1][j] = max(dp[i][j]-t1,dp[i+1][j]);\n                dp[i+1][j+1] = max(dp[i][j]-t1,dp[i+1][j+1]);\n                if(j!=0)dp[i+1][j-1] = max(dp[i][j]-t1,dp[i+1][j-1]);\n            }\n        }\n    }\n    int ans=-INF;\n    for(int i=0;i<=3;++i)ans=max(dp[N-1][i],ans);\n    return ans;\n}\n\n\nsigned main(){\n    cin>>N;\n    op[0]='+';\n    for(int i=0;i<N;++i){\n        cin>>A[i];\n        if(i!=N-1)cin>>op[i+1];\n    }\n    cout<<solve()<<endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n \ntypedef long long ll;\ntypedef pair<int,int> pii;\n \nconst int maxn=100003;\n \nint n,a[maxn],o[maxn];\nll f[maxn][3];\nchar s[3];\n \nint main(){\n\tscanf(\"%d\",&n);\n\tscanf(\"%d\",&a[1]);\n\tfor(int i=2;i<=n;++i){\n\t\tscanf(\"%s%d\",s,&a[i]);\n\t\tif(s[0]=='-')o[i]=1;\n\t}\n\tfor(int i=0;i<=n;++i)\n\t\tfor(int j=0;j<3;++j)\n\t\t\tf[i][j]=-1e18;\n\tf[0][0]=0;\n\tfor(int i=1;i<=n;++i){\n\t\tif(!o[i]){\n\t\t\tf[i][0]=max(f[i-1][0]+a[i],f[i-1][1]+a[i]);\n\t\t\tf[i][1]=max(f[i-1][1]-a[i],f[i-1][2]+a[i]);\n\t\t\tf[i][2]=f[i-1][2]+a[i];\n\t\t}else{\n\t\t\tf[i][1]=max(f[i-1][0]-a[i],f[i-1][1]+a[i]);\n\t\t\tf[i][2]=max(f[i-1][2]+a[i],f[i-1][1]+a[i]);\n\t\t}\n\t\t\n\t}\n\tprintf(\"%lld\\n\",max(f[n][0],f[n][1]));\n\treturn 0;\n}\n "
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<cstring>\n#include<algorithm>\n#define ll long long\nusing namespace std;\nconst int mn = 100005;\nll a[mn];\nint n;\nchar o[mn];\nll getmax(int s);\nll getmin(int s);\nll getmax(int s)\n{\n\tif(s == n - 1)\n\t\treturn a[n - 1] + a[n];\n\telse if(s == n)\n\t\treturn o[n - 1] == '+' ? a[n] : -a[n];\n\tll ret = a[s];\n\tfor(int i = s + 1; i <= n; i++)\n\t{\n\t\tif(o[i - 1] == '+')\n\t\t\tret += a[i];\n\t\telse\n\t\t{\n\t\t\tret -= getmin(i);\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn ret;\n}\nll getmin(int s)\n{\n\tif(s == n - 1)\n\t\treturn a[n - 1] - a[n];\n\telse if(s == n)\n\t\treturn o[n - 1] == '+' ? a[n] : -a[n];\n\tll ret = a[s];\n\tfor(int i = s + 1; i <= n; i++)\n\t{\n\t\tif(o[i - 1] == '+')\n\t\t\tret += a[i];\n\t\telse\n\t\t{\n\t\t\tret -= getmax(i);\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn ret;\n}\nint main()\n{\n\tint i;\n\tscanf(\"%d\", &n);\n\tfor(i = 1; i < n; i++)\n\t{\n\t\tscanf(\"%I64d\", &a[i]);\n\t\tgetchar();\n\t\to[i] = getchar();\n\t}\n\tscanf(\"%I64d\", &a[i]);\n\tprintf(\"%I64d\\n\", getmax(1));\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<vector>\n#include<cstring>\n#include<queue>\n#include<algorithm>\nusing namespace std;\nconst long long MAXN=100005,INF=4223372036854775807ll;\nlong long n;\nlong long d[MAXN][3];\nlong long a;\nint main()\n{\n\tscanf(\"%lld\",&n);\n\tchar s[100];\n\tscanf(\"%lld\",&a);\n\tfor(long long i=0;i<=n+1;i++)\n\t{\n\t\td[i][0]=d[i][1]=d[i][2]=-INF;\n\t}\n\td[1][0]=a;\n\tfor(long long i=2;i<=n;i++)\n\t{\n\t\tscanf(\"%s\",s);\n\t\tscanf(\"%lld\",&a);\n\t\tif(s[0]=='+')\n\t\t{\n\t\t\td[i][0]=max(d[i-1][0],d[i-1][1])+a;\n\t\t\td[i][1]=d[i-1][1]-a;\n\t\t\td[i][2]=d[i-1][2]+a;\n\t\t}\n\t\tif(s[0]=='-')\n\t\t{\n\t\t\td[i][0]=-INF;\n\t\t\td[i][1]=max(d[i-1][0],d[i-1][1])-a;\n\t\t\td[i][2]=max(d[i-1][1],d[i-1][2])+a;\n\t\t}\n\t}\n\tprintf(\"%lld\\n\",max(max(d[n][0],d[n][1]),d[n][2]));\n}"
  },
  {
    "language": "C++",
    "code": "// In the name of God\n\n#include <iostream>\n#include <algorithm>\n#include <fstream>\n#include <vector>\n#include <deque>\n#include <assert.h>\n#include <queue>\n#include <stack>\n#include <set>\n#include <map>\n#include <stdio.h>\n#include <string.h>\n#include <utility>\n#include <math.h>\n#include <bitset>\n#include <iomanip>\n\nusing namespace std;\n\nconst int N = (int) 1e6 + 6, mod = (int) 0;\nint a[N], p[N];\nchar op[N];\nint32_t main() {\n    ios_base::sync_with_stdio(0); cin.tie(0); cout.tie(0);\n    int n;\n    cin >> n;\n    for (int j = 0; j < n; ++j) {\n        p[j] = 1;\n        if (j > 0) {\n            cin >> op[j - 1];\n            p[j] = (op[j - 1] == '-'? -1: 1);\n        }\n        cin >> a[j];\n    }\n    long long sum = a[0];\n    int pp = 0;\n    while (pp < n - 1 && op[pp] != '-') {\n        sum += a[pp + 1];\n        pp++;\n    }\n    if (pp == n - 1) {\n        cout << sum << endl;\n        return 0;\n    }\n    long long abs_sum = a[n - 1], res = -1e18;\n    sum = 0;\n    for (int j = 0; j < n - 1; ++j)\n        sum += a[j] * p[j];\n    res = max(res, sum);\n    for (int j = n - 2; j >= 0; --j) {\n        if (op[j] == '-') {\n            int k = j + 1;\n            long long s = a[j + 1];\n            while (k < n - 1 && op[k] == '+') {\n                s += a[k + 1];\n                k++;\n            }\n            res = max(res, sum + abs_sum - 2 * s);\n        }\n        abs_sum += a[j];\n        sum -= a[j] * p[j];\n    }\n    cout << res << endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <string>\n#include <algorithm>\n#include <set>\n#include <cassert>\n\nusing namespace std;\n\nconstexpr int64_t kMod = 1e9+7;\n\nint main() {\n    std::vector<int64_t> v;\n\n    int n;\n    cin >> n;\n\n    int64_t answer = 0;\n    cin >> answer;\n    for (int i = 0; i < n - 1; i++) {\n        char c;\n        int x;\n        cin >> c >> x;\n        int new_x = x * (c == '+' ? 1 : -1);\n        if (v.empty()) {\n            v.push_back(new_x);\n        } else {\n            if (new_x > 0 && v.back() >= 1) {\n                v.back() += new_x;\n                continue;\n            }\n            if ((new_x > 0 && v.back() < 0) || (new_x < 0 && v.back() > 0)) {\n                v.push_back(new_x);\n                continue;\n            }\n            v.push_back(0);\n            v.push_back(new_x);\n        }\n    }\n    if (v.back() < 0) {\n        v.push_back(0);\n    }\n    if (v.size() && v[0] > 0) {\n        answer += v[0];\n        v.erase(v.begin());\n    }\n\n    int64_t sum = 0;\n    for (int i = 0; i < (int)v.size(); i++) {\n        sum += v[i];\n    }\n    int64_t best_ans = sum;\n    int64_t cur_sum = 0;\n\n    for (int i = (int)v.size() - 1; i >= 0; i--) {\n        // assert(v[i] >= 0);\n        // assert(i > 0);\n        // assert(v[i - 1] < 0);\n\n        sum -= v[i];\n        sum -= v[i - 1];\n        best_ans = max(best_ans, cur_sum -v[i] + v[i - 1] + sum);\n        cur_sum += v[i];\n        cur_sum -= v[i - 1];\n        i--;\n    }\n    cout << best_ans + answer << endl;\n\n    return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\ntypedef long long LL;\nconst int N=1e5+8;\nint A[N],op[N],n,suf[N],nxt[N],nx;\nLL ans,now;char s[4];\nint main(){\n\tscanf(\"%d%d\",&n,A+1),ans=A[1];\n\tfor(int i=2;i<=n;++i)scanf(\"%s%d\",s,A+i),ans+=A[i]*((op[i]=*s=='-')?-1:1);\n\tfor(int i=n;i;--i){\n\t\tsuf[i]=suf[i+1]+A[i];\n\t\tif(op[i])nxt[i]=nx,nx=i;\n\t}\n\tnow=A[1];\n\tfor(int i=2;i<=n;++i){\n\t\tif(op[i]&&nxt[i]){\n\t\t\tLL nw=now-suf[i]+2*suf[nxt[i]];\n\t\t\tif(nw>ans)ans=nw;\n\t\t}\n\t\tnow+=A[i]*(op[i]?-1:1);\n\t}\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <cmath>\nusing namespace std;\nconst int N = 1e+5+2;\nlong long array[N][3] = {0};\n\nusing P  = pair<char,int>;\nlong long solve(vector<P>& inputs) {\n\tint n = inputs.size();\n\tlong long (*dp)[3] = array+1;\n\tdp[-1][1] = -1e+9;\n\tdp[-1][2] = -1e+9;\n\n\tfor(int i = 0; i < n; i++) {\n\t\tauto pair = inputs[i];\n\n\t\tif(pair.first == '+'){\n\t\t\tdp[i][0] = max(dp[i-1][0] + pair.second, dp[i-1][1] + pair.second);\n\t\t\tdp[i][1] = max(dp[i-1][1] - pair.second, dp[i-1][2] + pair.second);\n\t\t\tdp[i][2] = dp[i-1][2] + pair.second;\n\t\t}else{\n\t\t\tdp[i][0] = max(dp[i-1][0] - pair.second,dp[i-1][1] - pair.second);\n\t\t\tdp[i][1] = max(dp[i-1][0] - pair.second, max(dp[i-1][1] - pair.second, dp[i-1][2] + pair.second));\n\t\t\tdp[i][2] = max(dp[i-1][1] + pair.second, dp[i-1][2] + pair.second);\n\t\t}\n// \t\tcout << dp[i][0] << \" \" << dp[i][1] << \" \" << dp[i][2] << endl;\n\t}\n\n\treturn max(dp[n-1][0], max(dp[n-1][1],dp[n-1][2]));\n}\n\nint main() {\n\tvector<P> inputs;\n\n\tint n;\n\tcin >> n;\n\n\tint first;\n\tcin >> first;\n\tinputs.push_back(P('+',first));\n\n\tfor(int i = 0; i < n-1; i++) {\n\t\tchar op;\n\t\tint m;\n\t\tcin >> op >> m;\n\t\tinputs.push_back(P(op,m));\n\t}\n\n// \tfor( auto pair: inputs)\n// \t\tcout << pair.first << \":\" << pair.second << endl;\n\tcout << solve(inputs) << endl;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<cstring>\n#include<algorithm>\nusing namespace std;\ntypedef long long ll;\n\nconst int MAXN=100005;\nconst int INF=0x3f3f3f3f;\n\nll sum[MAXN];\nll tot,ans=-INF;\nint n,a[MAXN];\nbool flag[MAXN];\nchar s[5];\n\nint main(){\n    scanf(\"%d%d\",&n,&a[1]);\n    for(int i=2;i<=n;i++){\n        scanf(\"%s%d\",s,&a[i]);\n        if(s[0]=='-') flag[i]=1;\n    }\n    for(int i=n;i>=1;i--)\n        sum[i]=sum[i+1]+a[i];\n    int last=1;\n    while(flag[last]==0&&last<=n){\n        tot+=a[last];\n        last++;\n    }\n    while(last<=n){\n        int last1=last+1;\n        ll tot1=0;\n        while(flag[last1]==0&&last1<=n){\n            tot1+=a[last1];\n            last1++;\n        }\n        if(last1<=n)\n            ans=max(ans,tot-tot1-a[last]+sum[last1]);\n        tot-=a[last];\n        last=last1;\n        tot+=tot1;\n    }\n    ans=max(ans,tot);\n    printf(\"%lld\",ans);\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <iostream>\n#include <algorithm>\n\nusing namespace std;\n\nconst int maxn = 100005;\nconst int inf = 0x3f3f3f3f;\n\nint op[maxn];\nint a[maxn];\nint qzhh[maxn];\nint yuan[maxn];\nint lstt[maxn];\nchar s[3];\nint n;\n\nint main()\n{\n\tscanf(\"%d\", &n);\n\tscanf(\"%d\", &a[1]);\n\tqzhh[1] = yuan[1] = a[1];\n\top[1] = 1;\n\tint ans = 0;\n\tfor(int i = 2; i <= n; ++i)\n\t{\n\t\tscanf(\"%s%d\", s, &a[i]);\n\t\top[i] = (s[0] == '+');\n\t\tqzhh[i] = qzhh[i - 1] + a[i];\n\t\tyuan[i] = yuan[i - 1] + (op[i] ? a[i] : -a[i]);\n\t}\n\top[n + 1] = op[n + 2] = 0;\n\tqzhh[n + 1] = qzhh[n + 2] = qzhh[n];\n\tyuan[n + 1] = yuan[n + 2] = yuan[n];\n\tn += 2;\n\tint lst = n + 1;\n\tfor(int i = n; i; --i)\n\t{\n\t\tif(!op[i])\n\t\t{\n\t\t\tlstt[i] = lst;\n\t\t\tlst = i;\n\t\t}\n\t}\n//\tcout << \"qzhh = \";\n//\tfor(int i = 1; i <= n; ++i)\n//\t\tcout << qzhh[i] << ' ';\n//\tcout << endl;\n//\tcout << \"yuan = \";\n//\tfor(int i = 1; i <= n; ++i)\n//\t\tcout << yuan[i] << ' ';\n//\tcout << endl;\n//\tcout << \"lstt = \";\n//\tfor(int i = 1; i <= n; ++i)\n//\t\tcout << lstt[i] << ' ';\n//\tcout << endl;\n\tfor(int i = lst; lstt[i] <= n; i = lstt[i])\n\t{\n\t\tint l = i, r = lstt[i];\n\t\tans = max(ans, yuan[l - 1] - (qzhh[r - 1] - qzhh[l - 1]) + qzhh[n] - qzhh[r - 1]);\n//\t\tcout << l << ' ' << r << ' ' << ans << endl;\n\t}\n\tprintf(\"%d\\n\", ans);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\ntypedef int sign;\ntypedef long long ll;\n#define For(i,a,b) for(register sign i=(sign)(a);i<=(sign)(b);++i)\n#define Fordown(i,a,b) for(register sign i=(sign)(a);i>=(sign)(b);--i)\nconst int N=1e5+5;\ntemplate<typename T>bool cmax(T &a,T b){return (a<b)?a=b,1:0;}\ntemplate<typename T>bool cmin(T &a,T b){return (a>b)?a=b,1:0;}\ntemplate<typename T>T read()\n{\n\tT ans=0,f=1;\n\tchar ch=getchar();\n\twhile(!isdigit(ch)&&ch!='-')ch=getchar();\n\tif(ch=='-')f=-1,ch=getchar();\n\twhile(isdigit(ch))ans=(ans<<3)+(ans<<1)+(ch-'0'),ch=getchar();\n\treturn ans*f;\n}\ntemplate<typename T>void write(T x,char y)\n{\n\tif(x==0)\n\t{\n\t\tputchar('0'),putchar(y);\n\t\treturn;\n\t}\n\tif(x<0)\n\t{\n\t\tputchar('-');\n\t\tx=-x;\n\t}\n\tstatic char wr[20];\n\tint top=0;\n\tfor(;x;x/=10)wr[++top]=x%10+'0';\n\twhile(top)putchar(wr[top--]);\n\tputchar(y);\n}\nvoid file()\n{\n#ifndef ONLINE_JUDGE\n\tfreopen(\"E.in\",\"r\",stdin);\n\tfreopen(\"E.out\",\"w\",stdout);\n#endif\n}\nint n;\nll dp[N][3];\nconst ll inf=1e18;\nvoid work()\n{\t\n\tn=read<int>();\n\tFor(i,1,n)For(j,0,2)dp[i][j]=-inf;\n\tchar s[5];\n\tint x;\n\tx=read<int>();\n\tdp[1][0]=x;\n\tint ty;\n\tFor(i,2,n)\n\t{\n\t\tscanf(\"%s\",s);\n\t\tx=read<int>();\n\t\tty=(s[0]=='+'?1:-1);\n\t\t\n\t\tcmax(dp[i][0],dp[i-1][0]+x*ty);\n\t\tcmax(dp[i][0],dp[i-1][1]+x*ty);\n\t\tcmax(dp[i][0],dp[i-1][2]+x*ty);\n\t\t\n\t\tcmax(dp[i][1],dp[i-1][1]+x*ty*(-1));\n\t\tcmax(dp[i][1],dp[i-1][2]+x*ty*(-1));\n\t\tif(s[0]=='-')cmax(dp[i][1],dp[i-1][0]-x);\n\t\n\t\tcmax(dp[i][2],dp[i-1][2]+x*ty);\n\t\tif(s[0]=='-')cmax(dp[i][2],dp[i-1][1]+x);\n\t\n\t\t//cout<<dp[i][0]<<' '<<dp[i][1]<<' '<<dp[i][2]<<endl;\n\t}\n\twrite(max(max(dp[n][0],dp[n][1]),dp[n][2]),'\\n');\n}\nint main()\n{\n\twork();\n\treturn 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "// Math = ♥\n// Sometimes it is people that no one imagines anything of who do things that no one can imagine\n// After all this time? Always\n\n#include <bits/stdc++.h>                        // uncomment before submission\n//#include <ext/pb_ds/assoc_container.hpp>\t\t// uncomment before submission\n//#include <ext/pb_ds/tree_policy.hpp>\t\t\t// uncomment before submission\n//using namespace __gnu_pbds;\t\t\t\t\t// uncomment before submission\nusing namespace std;\n//<---------------------------------------------------Template----------------------------------------------------------->\n#define int long long\n#define ll long long\n#define ld long double\nint INF = 1e15 + 7;\ntypedef pair<ll, ll> ii;\ntypedef vector<ll> vi;                  // Vector of long long\ntypedef vector<vi> vvi;                 // Vector of vi\ntypedef vector<ii> vii;                 // Vector of pairs\ntypedef vector<vii> vvii;               // Vector of Vector of pairs\ntypedef vector<bool> vb;                // Vector of bool\n#define pq priority_queue               // Max heap (To convert to min heap, use negative sign before every value)\n#define ff first                        // For pairs\n#define ss second                       // For pairs\n#define pb push_back                    // Pushback to vector\n#define mp make_pair                    // Makes pairs to be stored as pair\n#define all(c) (c).begin(), (c).end()   // Mainly used by me in sorting\n// ordered_set adds two new functions to set - (set).find_by_order([kth element based on zero indexing]) and order_of_key()\n// order_of_key returns number of elements less that parameter. If element exists, that order is its index\n#define ordered_set tree<ll, null_type, less<ll>, rb_tree_tag, tree_order_statistics_node_update>\n//<----------------------------------------------------------------------------------------------------------------------->\n\nsigned main()\n{\n    ios_base::sync_with_stdio(false);\n    cin.tie(NULL);\n    int n;\n    cin >> n;\n\n    vector<char> op;\n    vi num;\n\n    int x;\n    cin >> x, num.pb(x);\n    for (int i = 0; i < n - 1; i++)\n    {\n        char ch;\n        cin >> ch >> x;\n        op.pb(ch), num.pb(x);\n    }\n\n    vvi dp(n, vector<int>(3));\n    dp[0][0] = num[0];\n    dp[0][1] = -INF;\n    dp[0][2] = -INF;\n\n    for (int i = 1; i < n; i++)\n    {\n        if (op[i - 1] == '+')\n        {\n            dp[i][1] = dp[i - 1][1] - num[i];\n            dp[i][2] = dp[i - 1][2] + num[i];\n            dp[i][0] = max(dp[i - 1][0], dp[i - 1][1]) + num[i];\n        } else\n        {\n            dp[i][1] = max(dp[i - 1][0], dp[i - 1][1]) - num[i];\n            dp[i][2] = max(dp[i - 1][1], dp[i - 1][2]) + num[i];\n            dp[i][0] = -INF;\n        }\n        dp[i][0] = max(dp[i][0], max(dp[i][1], dp[i][2]));\n        dp[i][1] = max(dp[i][1], dp[i][2]);\n    }\n\n    int a[] = {dp[n - 1][0], dp[n - 1][1], dp[n - 1][2]};\n    sort(a, a + 3);\n\n    cout << a[2] << endl;\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n\ntypedef unsigned int uint;\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef double lf;\ntypedef long double llf;\ntypedef std::pair<int,int> pii;\n\n#define xx first\n#define yy second\n\ntemplate<typename T> inline T max(T a,T b){return a>b?a:b;}\ntemplate<typename T> inline T min(T a,T b){return a<b?a:b;}\ntemplate<typename T> inline T abs(T a){return a>0?a:-a;}\ntemplate<typename T> inline bool repr(T &a,T b){return a<b?a=b,1:0;}\ntemplate<typename T> inline bool repl(T &a,T b){return a>b?a=b,1:0;}\ntemplate<typename T> inline T gcd(T a,T b){T t;if(a<b){while(a){t=a;a=b%a;b=t;}return b;}else{while(b){t=b;b=a%b;a=t;}return a;}}\ntemplate<typename T> inline T sqr(T x){return x*x;}\n#define mp(a,b) std::make_pair(a,b)\n#define pb push_back\n#define I inline\n#define mset(a,b) memset(a,b,sizeof(a))\n#define mcpy(a,b) memcpy(a,b,sizeof(a))\n\n#define fo0(i,n) for(int i=0,i##end=n;i<i##end;i++)\n#define fo1(i,n) for(int i=1,i##end=n;i<=i##end;i++)\n#define fo(i,a,b) for(int i=a,i##end=b;i<=i##end;i++)\n#define fd0(i,n) for(int i=(n)-1;~i;i--)\n#define fd1(i,n) for(int i=n;i;i--)\n#define fd(i,a,b) for(int i=a,i##end=b;i>=i##end;i--)\n#define foe(i,x)for(__typeof(x.end())i=x.begin();i!=x.end();++i)\n\nstruct Cg{I char operator()(){return getchar();}};\nstruct Cp{I void operator()(char x){putchar(x);}};\n#define OP operator\n#define RT return *this;\n#define RX x=0;char t=P();while((t<'0'||t>'9')&&t!='-')t=P();bool f=0;\\\nif(t=='-')t=P(),f=1;x=t-'0';for(t=P();t>='0'&&t<='9';t=P())x=x*10+t-'0'\n#define RL if(t=='.'){lf u=0.1;for(t=P();t>='0'&&t<='9';t=P(),u*=0.1)x+=u*(t-'0');}if(f)x=-x\n#define RU x=0;char t=P();while(t<'0'||t>'9')t=P();x=t-'0';for(t=P();t>='0'&&t<='9';t=P())x=x*10+t-'0'\n#define TR *this,x;return x;\nI bool IS(char x){return x==10||x==13||x==' ';}template<typename T>struct Fr{T P;I Fr&OP,(int&x)\n{RX;if(f)x=-x;RT}I OP int(){int x;TR}I Fr&OP,(ll &x){RX;if(f)x=-x;RT}I OP ll(){ll x;TR}I Fr&OP,(char&x)\n{for(x=P();IS(x);x=P());RT}I OP char(){char x;TR}I Fr&OP,(char*x){char t=P();for(;IS(t);t=P());if(~t){for(;!IS\n(t)&&~t;t=P())*x++=t;}*x++=0;RT}I Fr&OP,(lf&x){RX;RL;RT}I OP lf(){lf x;TR}I Fr&OP,(llf&x){RX;RL;RT}I OP llf()\n{llf x;TR}I Fr&OP,(uint&x){RU;RT}I OP uint(){uint x;TR}I Fr&OP,(ull&x){RU;RT}I OP ull(){ull x;TR}};Fr<Cg>in;\n#define WI(S) if(x){if(x<0)P('-'),x=-x;char s[S],c=0;while(x)s[c++]=x%10+'0',x/=10;while(c--)P(s[c]);}else P('0')\n#define WL if(y){lf t=0.5;for(int i=y;i--;)t*=0.1;if(x>=0)x+=t;else x-=t,P('-');*this,(ll)(abs(x));P('.');if(x<0)\\\nx=-x;while(y--){x*=10;x-=floor(x*0.1)*10;P(((int)x)%10+'0');}}else if(x>=0)*this,(ll)(x+0.5);else *this,(ll)(x-0.5);\n#define WU(S) if(x){char s[S],c=0;while(x)s[c++]=x%10+'0',x/=10;while(c--)P(s[c]);}else P('0')\ntemplate<typename T>struct Fw{T P;I Fw&OP,(int x){WI(10);RT}I Fw&OP()(int x){WI(10);RT}I Fw&OP,(uint x){WU(10);RT}\nI Fw&OP()(uint x){WU(10);RT}I Fw&OP,(ll x){WI(19);RT}I Fw&OP()(ll x){WI(19);RT}I Fw&OP,(ull x){WU(20);RT}I Fw&OP()\n(ull x){WU(20);RT}I Fw&OP,(char x){P(x);RT}I Fw&OP()(char x){P(x);RT}I Fw&OP,(const char*x){while(*x)P(*x++);RT}\nI Fw&OP()(const char*x){while(*x)P(*x++);RT}I Fw&OP()(lf x,int y){WL;RT}I Fw&OP()(llf x,int y){WL;RT}};Fw<Cp>out;\n\nconst int N=100007;\n\nchar o[N];\nint n,s[N];\nll f[N][3];\n\nint main()\n{\n\tin,n;\n\tfo1(i,n)\n\t{\n\t\tin,s[i];\n\t\tif(i<n)in,o[i+1];\n\t}\n\tf[0][1]=f[0][2]=-1e18;\n\to[1]='+';\n\tfo1(i,n)\n\t{\n\t\tif(o[i]=='+')\n\t\t{\n\t\t\tf[i][2]=f[i-1][2]+s[i];\n\t\t\tf[i][1]=f[i-1][1]-s[i];\n\t\t\tf[i][0]=f[i-1][0]+s[i];\n\t\t}\n\t\telse\n\t\t{\n\t\t\tf[i][2]=f[i-1][2]-s[i];\n\t\t\tf[i][1]=f[i-1][1]+s[i];\n\t\t\tf[i][0]=f[i-1][0]-s[i];\n\t\t\trepr(f[i][2],f[i][1]);\n\t\t\trepr(f[i][1],f[i][0]);\n\t\t}\n\t\trepr(f[i][1],f[i][2]);\n\t\trepr(f[i][0],f[i][1]);\n\t\t//fo0(j,3)out,f[i][j],' ';out,'\\n';\n\t}\n\tout,f[n][0],'\\n';\n}"
  },
  {
    "language": "C++",
    "code": "//ΔARC066E\n#include<iostream>\n#include<cstdio>\n#include<fstream>\n#include<algorithm>\n#include<vector>\n#include<map>\n#include<set>\n#include<queue>\n#include<cmath>\n#include<cstring>\n#include<cstdlib>\nusing namespace std;\ntypedef long long LL;\ntypedef double DB;\nconst int N = 111111;\nconst LL INF = 1e18;\nint n,a[N],op[N];\nLL dp[N][3];\nint main()\n{\n\tint i,x;\n\tchar ch[5];\n\tscanf(\"%d\",&n);\n\tfor(i=1;i<n;i=i+1){\n\t\tscanf(\"%d%s\",a+i,ch);\n\t\top[i+1]=(ch[0]=='-');\n\t}\n\tscanf(\"%d\",a+n);\n\tdp[1][0]=a[1];\n\tdp[1][1]=-INF;\n\tdp[1][2]=-INF;\n\tfor(i=2;i<=n;i=i+1){\n\t\tif(op[i]){\n\t\t\tdp[i][0]=max(max(dp[i-1][0]-a[i],dp[i-1][1]+a[i]),dp[i-1][2]-a[i]);\n\t\t\tdp[i][1]=max(max(dp[i-1][0]-a[i],dp[i-1][1]+a[i]),dp[i-1][2]+a[i]);\n\t\t\tdp[i][2]=max(dp[i-1][1]+a[i],dp[i-1][2]+a[i]);\n\t\t}\n\t\telse{\n\t\t\tdp[i][0]=max(max(dp[i-1][0]+a[i],dp[i-1][1]+a[i]),dp[i-1][2]+a[i]);\n\t\t\tdp[i][1]=dp[i-1][1]-a[i];\n\t\t\tdp[i][2]=dp[i-1][2]+a[i];\n\t\t}\n\t}\n\tcout<<max(max(dp[n][0],dp[n][1]),dp[n][2]);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstdio>\n#include<algorithm>\n#include<cstring>\n\nusing namespace std;\n\nconst int MAXN = 100100;\ntypedef long long LL;\nconst LL INF = 1e16;\nchar opt[MAXN];\nint n,kind = 0;\nLL val[MAXN],ans = -INF,sum[MAXN];\n\ntemplate<typename T>\nvoid read(T &x)\n{\n\tx = 0;\n\tchar ch = getchar();\n\twhile(ch < '0' || ch > '9') ch = getchar();\n\twhile(ch >= '0' && ch <= '9')\n\t\tx = x * 10 + ch - '0',ch = getchar();\n}\n\nvoid init()\n{\n\tLL t1 = val[1],t2 = 0,temp;\n\tfor(int i = 1;i <= n-1;i++)\n\t{\n\t\tif(opt[i] == '+')\n\t\t{\n\t\t\tt1 += val[i+1];\n\t\t\tcontinue;\n\t\t} \n\t\tint now = i+1;temp = -val[i+1];\n\t\twhile(now < n && opt[now] == '+')\n\t\t{\n\t\t\tnow++;\n\t\t\ttemp -= val[now];\n\t\t}\n\t//\tprintf(\"%lld\\n\",t1+t2+temp+sum[n]-sum[now]);\n\t\tans = max(ans,t1 + t2 + temp + sum[n] - sum[now]);\n\t\tt2 -= val[i+1];\n\t}\n}\n\nint main()\n{\n\t//freopen(\"T2.in\",\"r\",stdin);\n\tread(n);\n\tfor(int i = 1;i <= n;i++)\n\t{\n\t\tcin >> val[i];\n\t\tsum[i] = sum[i-1] + val[i];\n\t\tif(i != n) cin >> opt[i];\n\t}\n\tinit();\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}\n/*\n5\n1 - 100 - 50 - 10 - 5\n*/\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\n#define int long long\ntypedef vector<int>vint;\ntypedef pair<int,int>pint;\ntypedef vector<pint>vpint;\n#define rep(i,n) for(int i=0;i<(n);i++)\n#define reps(i,f,n) for(int i=(f);i<(n);i++)\n#define all(v) (v).begin(),(v).end()\n#define each(it,v) for(__typeof((v).begin()) it=(v).begin();it!=(v).end();it++)\n#define pb push_back\n#define fi first\n#define se second\ntemplate<typename A,typename B>inline void chmin(A &a,B b){if(a>b)a=b;}\ntemplate<typename A,typename B>inline void chmax(A &a,B b){if(a<b)a=b;}\n\nint N;\n\nbool sig[111111];\nint A[111111];\n\nint dp[111111];\n\nint S[111111];\nsigned main(){\n    cin>>N;\n    cin>>dp[0];\n\n    N--;\n    rep(i,N){\n        char c;\n        int a;\n        cin>>c>>a;\n        sig[i]=c!='+';\n        A[i]=a;\n        S[i+1]=a;\n    }\n\n\n    rep(i,N)S[i+1]+=S[i];\n\n    int pre=-1,latte=-1001001001001001001ll;\n    rep(i,N){\n        if(sig[i]&&pre!=-1){\n            chmax(latte,dp[pre]-(S[i]-S[pre])-S[i]);\n        }\n        if(!sig[i]){\n            dp[i+1]=max(dp[i],latte+S[i])+A[i];\n        }\n        else{\n            dp[i+1]=max(dp[i]-A[i],latte+S[i]+A[i]);\n            pre=i;\n        }\n    }\n    cout<<dp[N]<<endl;\n    return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#define NDEBUG\n#include <bits/stdc++.h>\n#define mset(a,b) memset(a,b,sizeof a)\n#define mcpy(a,b) memcpy(a,b,sizeof b)\n#define xx first\n#define yy second\n#define pb push_back\n#define mp(a,b) make_pair(a,b)\n#define pii pair<int,int> \n#define lb(x) ((x)&(-(x)))\n#define dalao 1000000007\n#define inf 0x3f3f3f3f\n#define N 100010\nusing namespace std;\ntypedef long long ll;\nint n,a[N];\nll f[N][3];\nchar b[N];\ninline int get(int i,int j){return (j&1)^(b[i]=='-')?-a[i]:a[i];}\nint main(){\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++){\n\t\tif(i==1)b[i]='+';\n\t\telse while((b[i]=getchar())!='+'&&b[i]!='-');\n\t\tscanf(\"%d\",&a[i]);\n\t}\n\tfor(int i=1;i<=n+1;i++)for(int j=0;j<3;j++)f[i][j]=-0x3f3f3f3f3f3f3f3fll;\n\tf[1][0]=0;\n\tfor(int i=1;i<=n;i++)for(int j=0;j<3;j++)if(f[i][j]>-0x3f3f3f3f3f3f3f3fll){\n\t\tif(j<2&&b[i]=='-')f[i+1][j+1]=max(f[i+1][j+1],f[i][j]+get(i,j));\n\t\tif(j)f[i+1][j-1]=max(f[i+1][j-1],f[i][j]+get(i,j));\n\t\tf[i+1][j]=max(f[i+1][j],f[i][j]+get(i,j));\n//\t\tcout<<i<<\" \"<<j<<\" \"<<f[i][j]<<endl;\n\t}\n\tprintf(\"%lld\",f[n+1][0]);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define fi first\n#define se second\n#define bug cout<<\"--------------\"<<endl\nusing namespace std;\ntypedef long long ll;\nconst double PI=acos(-1.0);\nconst double eps=1e-6;\nconst ll inf=1e18;\nconst ll llf=1e18;\nconst int mod=1e9+7;\nconst int maxn=1e5+10;\nint n,x;\nll dp[3][maxn];\nint main(){\n\tios::sync_with_stdio(false);\n\t//freopen(\"in\",\"r\",stdin);\n\tcin>>n>>x;\n\tdp[0][1]=x;\n\tdp[1][1]=dp[2][1]=-inf;\n//\tcout<<dp[0][1]<<\" \"<<dp[1][1]<<\" \"<<dp[2][1]<<endl;\n\tfor(int i=2;i<=n;i++){\n\t\tchar c;\n\t\tcin>>c>>x;\n\t\tif(c=='+'){\n\t\t\tdp[0][i]=max(dp[0][i-1],dp[1][i-1])+x;\n\t\t\tdp[1][i]=max(dp[1][i-1],dp[2][i-1])-x;\n\t\t\tdp[2][i]=dp[2][i-1]+x;\n\t\t}else{\n\t\t\tdp[0][i]=max(dp[0][i-1]-x,dp[1][i-1]-x);\n\t\t\tdp[1][i]=max({dp[0][i-1]-x,dp[1][i-1]+x,dp[2][i-1]+x});\n\t\t\tdp[2][i]=max(dp[1][i-1]+x,dp[2][i-1]-x);\n\t\t}\n\t//\tcout<<dp[0][i]<<\" \"<<dp[1][i]<<\" \"<<dp[2][i]<<endl;\n\t}\n\tcout<<max({dp[0][n],dp[1][n],dp[2][n]});\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<algorithm>\n#include<cctype>\n#include<cstring>\n#include<iostream>\n#include<vector>\n\nusing namespace std;\n\n#define bomb exit(1)\n#define INF 1061109567\n#define LINF 4557430888798830399ll\n#define pprint(x) print(x),putchar(' ')\n#define fprint(x) print(x),putchar('\\n')\n#define EE(x); struct edge { int nxt,to;ll w; }e[M << 1]; int head[N],ecnt = 1;\\\n\tvoid add(int u,int v,ll w = 0) { e[++ecnt].w = w,e[ecnt].to = v,e[ecnt].nxt = head[u];head[u] = ecnt; }\\\n\tvoid add_edge(int u,int v,ll w = 0) { add(u,v,w),add(v,u,w * x); }\n#define ll long long\nint mod = 1000000007;\nll Mod(ll x) { return x >= mod ? x - mod : x; }\n#define eps 0.0000000001\n#define sqr(x) ((x) * (x))\n#define iter iterator\n#define fi first\n#define se second\n//#define getchar() (SS == TT && (TT = (SS = BB) + fread(BB,1,1 << 15,stdin),TT == SS) ? EOF : *SS++)\n//char BB[1 << 15],*SS = BB,*TT = BB;\nll read()\n{\n\tll x = 0;int f = 1;char ch = getchar();\n\tfor(;!isdigit(ch);ch = getchar()) if(ch == '-') f = -1;\n\tfor(;isdigit(ch);ch = getchar()) x = x * 10 + (ch ^ 48);\n\treturn x * f;\n}\nvoid print(ll x)\n{\n\tif(x < 0) putchar('-'),x = -x;\n\tif(x > 9) print(x / 10);putchar(x % 10 + '0');\n}\n\nconst int N = 100010;\nll ans,res;\nll a[N],pre[N],suf[N],tot;\nint n,op[N];\nint main()\n{\n\tn = read();\n\tfor(int i = 1;i < n;i++)\n\t{\n\t\ttot += (a[i] = read());\n\t\tchar ch = getchar();while(ch != '+' && ch != '-') ch = getchar();\n\t\top[i] = (ch == '+') ? 1 : -1;\n\t}tot += (a[n] = read());\n\tfor(int i = n;i;i--) { suf[i] = a[i];if(~op[i]) suf[i] += suf[i + 1]; }\n\tfor(int i = 1;i <= n;i++) pre[i] = pre[i - 1] + a[i];\n\tres = a[1];ans = -LINF;\n\tfor(int i = 2;i <= n;i++)\n\t{\n\t\tif(op[i - 1] == '-') ans = max(ans,res + pre[n] - pre[i - 1] - 2 * suf[i]);\n\t\tres += a[i] * op[i - 1];\n\t}ans = max(ans,res);fprint(ans);\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<cstring>\n#include<algorithm>\nusing namespace std;\n#define N 100005\n#define LL long long\nint a[N],op[N];\nLL sum[N];\nchar s[4];\nint main()\n{\n\tint n,i,j;\n\tscanf(\"%d%d\",&n,&a[1]);op[1]=1;\n\tfor(i=2;i<=n;i++){\n\t\tscanf(\"%s%d\",s,&a[i]);\n\t\tif(s[0]=='-')op[i]=-1;\n\t\telse op[i]=1;\n\t}\n\tfor(i=n;i>=1;i--)sum[i]=sum[i+1]+a[i];\n\tLL s1=0,s2,ans=-0x3f3f3f3f3f3f3f3fll;\n\tfor(i=2;i<=n;i++){\n\t\ts1+=1ll*a[i-1]*op[i-1];\n\t\tif(op[i]==-1){\n\t\t\ts2=1ll*a[i];\n\t\t\tfor(j=i+1;j<=n;j++){\n\t\t\t\tif(op[j]==-1)break;\n\t\t\t\ts2+=1ll*a[j];\n\t\t\t}\n\t\t\tans=max(ans,s1-s2+sum[j]);\n\t\t}\n\t}\n\ts1+=1ll*a[n]*op[n];\n\tprintf(\"%lld\",max(s1,ans));\n}"
  },
  {
    "language": "C++",
    "code": "// #pragma GCC optimize(3)\n#include <map>\n#include <set>\n#include <queue>\n#include <cmath>\n#include <vector>\n#include <cstdio>\n#include <bitset>\n#include <cstring>\n#include <iostream>\n#include <algorithm>\n#define maxn 100010\n#define inf 0x3f3f3f3f\n#define int long long\nusing namespace std;\nvoid write(int x){if(x<0){putchar('-');x=-x;}if(x>9) write(x/10);putchar(x%10+'0');}\nint read(){int d=0,w=1;char c=getchar();for(;c<'0'||c>'9';c=getchar())if(c=='-')\nw=-1;for(;c>='0'&&c<='9';c=getchar())d=(d<<1)+(d<<3)+c-48;return d*w;}\nvoid wln(int x){write(x);putchar('\\n');}\nvoid wrs(int x){write(x);putchar(' ');}\nint reac()\n{\n\tchar c=getchar();\n\tfor(;c!='-'&&c!='+';c=getchar());\n\treturn c=='+'?1:-1;\n}\nint n,a[maxn],c[maxn],f[maxn][3];\nsigned main()\n{\n\t// freopen(\".in\",\"r\",stdin);\n\t// freopen(\".out\",\"w\",stdout);\n\tn=read();\n\tc[1]=1;\n\ta[1]=read();\n\tfor(int i=2;i<=n;a[i++]=read())\n\t\tc[i]=reac();\n\tf[0][0]=0;\n\tf[0][1]=f[0][2]=-inf;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tf[i][0]=max(f[i-1][0],f[i-1][1])+a[i]*c[i];\n\t\tf[i][1]=max(max((c[i]==-1?f[i-1][0]:-inf)+a[i]*c[i],f[i-1][1]+a[i]*c[i]*-1),f[i-1][2]+a[i]*c[i]*-1);\n\t\tf[i][2]=max((c[i]==-1?f[i-1][1]:-inf)+a[i]*c[i]*-1,f[i-1][2]+a[i]*c[i]);\n\t\t// wrs(f[i][0]);\n\t\t// wrs(f[i][1]);\n\t\t// wln(f[i][2]);\n\t}\n\twrite(max(f[n][0],f[n][1]));\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <map>\n#include <set>\n#include <queue>\n#include <algorithm>\n#include <iomanip>\n#include <cassert>\nusing namespace std;\n\n#define GET_ARG(a,b,c,F,...) F\n#define REP3(i,s,e) for (i = s; i <= e; i++)\n#define REP2(i,n) REP3 (i,0,(int)(n)-1)\n#define REP(...) GET_ARG (__VA_ARGS__,REP3,REP2) (__VA_ARGS__)\n#define RREP3(i,s,e) for (i = s; i >= e; i--)\n#define RREP2(i,n) RREP3 (i,(int)(n)-1,0)\n#define RREP(...) GET_ARG (__VA_ARGS__,RREP3,RREP2) (__VA_ARGS__)\n#define DEBUG(x) cerr << #x \": \" << x << endl\n\ntypedef long long ll;\n\nconst ll INF = 1e15;\n\nll dp[100001][3];\nchar op[100000];\nint a[100000];\n\nint main(void) {\n    int i, n;\n    scanf(\"%d\",&n);\n    op[0] = '+';\n    REP (i,n-1) scanf(\"%d %c\",&a[i],&op[i+1]);\n    scanf(\"%d\",&a[n-1]);\n\n    dp[0][1] = dp[0][2] = -INF;\n    REP (i,n) {\n        if (op[i] == '+') {\n            dp[i+1][0] = max({dp[i][0] + a[i],dp[i][1] - a[i],dp[i][2] + a[i]});\n            dp[i+1][1] = max(dp[i][1] - a[i],dp[i][2] + a[i]);\n            dp[i+1][2] = dp[i][2] + a[i];\n        }\n        else {\n            dp[i+1][0] = max(dp[i][0] - a[i],dp[i][2] - a[i]);\n            dp[i+1][1] = max({dp[i][0] - a[i],dp[i][1] + a[i],dp[i][2] - a[i]});\n            dp[i+1][2] = dp[i][1] + a[i];\n        }\n    }\n    ll ans = 0;\n    REP (i,3) ans = max(ans,dp[n][i]);\n    printf(\"%lld\\n\",ans);\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\ntypedef long long ll;\nint n,x;char op;ll dp[3],nxt[3];\n\nint main()\n{\n\tscanf(\"%d%d\",&n,&dp[0]);\n\tdp[1]=dp[2]=-1ll<<60;\n\tfor(int i=1;i<n;i++)\n\t{\n\t\tscanf(\" %c%d\",&op,&x);\n\t\tif(op=='-') x=-x;\n\t\tnxt[0]=dp[0]+x,nxt[1]=dp[1]-x,nxt[2]=dp[2]+x;\n\t\tdp[0]=max(nxt[0],max(nxt[1],nxt[2]));\n\t\tif(op=='+') dp[1]=max(nxt[1],nxt[2]),dp[2]=nxt[2];\n\t\telse dp[1]=dp[0],dp[2]=max(nxt[1],nxt[2]);\n\t}\n\tprintf(\"%lld\",dp[0]);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\nconst int maxn=15;\nconst int mod=1e9+7; \nconst int S=(1<<4)+10;\nint n,k,top=0;\nint a[maxn],bel[maxn];\nstruct cat \n{\n\tint val,col;\n\tbool operator ==(const cat &b)const\n\t{\n\t\treturn val==b.val&&col==b.col;\n\t}\n\tbool operator <(const cat &b)const \n\t{\n\t\treturn val==b.val?col<b.col:val<b.val;\n\t}\n}s[S+maxn];\nint L[maxn],R[maxn];\nint pl[maxn],pr[maxn];\nbool dfs2(int dep,int lim)\n{\n\tif(dep==k+1)\n\t{\n\t\tbool flag=1;\n\t\tfor(int i=1;i<=lim;i++)\n\t\tif(L[i]<=pl[i]&&pr[i]<=R[i])flag=1;\n\t\telse return false;\n\t\treturn true;\n\t}\n\tfor(int i=1;i<=lim;i++)\n\t{\n\t\tint tmp=L[i],flag=0;\n\t\tL[i]=max(L[i],a[dep]),R[i]+=a[dep];\n\t\tflag=dfs2(dep+1,lim);\n\t\tL[i]=tmp,R[i]-=a[dep];\n\t\tif(flag)return true;\n\t}\n\treturn false;\n}\nint l[maxn],r[maxn],inv[maxn];\nint ans=0;\nint Pow(int a,long long k)\n{\n\tint ret=1;\n\twhile(k)\n\t{\n\t\tif(k&1)ret=ret*1LL*a%mod;\n\t\ta=a*1LL*a%mod,k>>=1; \n\t}\n\treturn ret;\n}\nint C(int n,int m)\n{\n\tint mul=1,c=1;\n\tfor(int i=n-m+1;i<=n;i++)mul=mul*1LL*i%mod; \n\tfor(int i=1;i<=m;i++)c=c*1LL*i%mod;\n\treturn mul*1LL*Pow(c,mod-2)%mod;\n}\nvoid calc(int cnt)\n{\n\tfor(int i=1;i<=cnt;i++)\n\t{\n\t\tif(s[bel[i]-1].col)pl[i]=s[bel[i]-1].val+1;\n\t\telse pl[i]=s[bel[i]-1].val;\n\t\tif(s[bel[i]].col)pr[i]=s[bel[i]].val;\n\t\telse pr[i]=s[bel[i]].val-1;\n\t}\n\tif(!dfs2(1,cnt))return;\n\tint now=0;\n\tl[++now]=0,r[now]=n;\n\tl[++now]=pl[1],r[now]=pr[1];\n\tfor(int i=2;i<=cnt;i++)\n\t{\n\t\tl[++now]=1,r[now]=n;\n\t\tl[++now]=pl[1],r[now]=pr[1];\n\t}\n\tl[++now]=0,r[now]=n;\n\tint all=(1<<now)-1;\n\tfor(int s=0;s<=all;s++)\n\t{\n\t\tlong long sum=0;\n\t\tfor(int i=1;i<=now;i++)\n\t\tif(s&(1<<i-1))sum+=r[i]+1;\n\t\telse sum+=l[i];\n\t\tif(sum>n)continue;\n\t\tans+=(count(s)&1?-1:1)*C(n-sum+now-1,now-1)%mod;\n\t\tans=(ans%mod+mod)%mod;\n\t}\n}\nvoid dfs(int dep)\n{\n\tcalc(dep-1);\n\tif(dep==k+1)return;\n\tfor(int i=2;i<=top;i++)bel[dep]=i,dfs(dep+1);\n}\nint main()\n{\n\tscanf(\"%d%d\",&n,&k);\n\t\n\tfor(int i=1;i<=k;i++)scanf(\"%d\",&a[i]);\n\tint all=(1<<k)-1;\n\tfor(int i=1;i<=k;i++)s[++top].val=a[i],s[top].col=0;\n\tfor(int s=1;s<=all;s++)\n\t{\n\t\tint sum=0;\n\t\tfor(int i=1;i<=k;i++)if(s&(1<<i-1))sum+=a[i];\n\t\ts[++top].val=sum;\n\t\ts[top].col=1;\n\t}\n\tsort(s+1,s+1+top);\n\ttop=unique(s+1,s+1+top)-s-1;\n\tdfs(1);\t\n\tprintf(\"%d\\n\",ans);\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n#define X first\n#define Y second\n#define pb push_back\ntypedef pair<int, int> ii;\ntypedef long long ll;\n\nconst int maxn = 2e5+5;\n\nint n;\n\nint arr[maxn];\n\nll sum[maxn];\nll qs[maxn];\n\nint main()\n{\n\tscanf(\"%d\", &n);\n\tll best = 0;\n\tfor(int i = 1; i<= n; i++)\n\t{\n\t\tchar tmp = '+';\n\t\tif(i != 1) scanf(\" %c\", &tmp);\n\t\tint x; scanf(\"%d\", &x);\n\t\tif(tmp == '-') x = -x;\n\t\tarr[i] = x;\n\t\tbest += arr[i];\n\t}\n\tsum[n] = abs(arr[n]);\n\tfor(int i = n-1; i>= 1; i--)\n\t{\n\t\tsum[i] = sum[i+1]+abs(arr[i]);\n\t}\n\tfor(int i = 1; i<= n; i++)\n\t{\n\t\tqs[i] = qs[i-1]+arr[i];\n\t}\n\tvector<int> neg;\n\tfor(int i = 1; i<= n; i++) if(arr[i]< 0) neg.pb(i);\n\tfor(int i = 0; i+1< (int) neg.size(); i++)\n\t{\n\t\tint loc = 0;\n\t\tloc += arr[neg[i]];\n\t\tfor(int j = neg[i]+1; j< neg[i+1]; j++)\n\t\t{\n\t\t\tloc -= arr[j];\n\t\t}\n\t\t// printf(\"[%d, %d) loc = %d\\n\", neg[i], neg[i+1], loc);\n\t\tbest = max(best, qs[neg[i]-1]+loc+sum[neg[i+1]]);\n\t}\n\tprintf(\"%d\\n\", best);\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <fstream>\n#include <cstdio>\n#include <cmath>\n#include <vector>\n#include <cstring>\n#include <string>\n#include <set>\n#include <map>\n#include <stack>\n#include <queue>\n#include <deque>\n#include <algorithm>\nusing namespace std;\n\n#define REP(i,n) for(int i=0; i<n; ++i)\n#define FOR(i,a,b) for(int i=a; i<=b; ++i)\n#define FORR(i,a,b) for (int i=a; i>=b; --i)\n#define ALL(c) (c).begin(), (c).end()\n\ntypedef long long ll;\ntypedef vector<int> VI;\ntypedef vector<ll> VL;\ntypedef vector<VL> VVL;\ntypedef vector<VI> VVI;\ntypedef pair<int,int> P;\ntypedef pair<ll,ll> PL;\n\nint main() {\n    int n;\n    cin >> n;\n    VL a(n);\n    vector<char> c(n-1);\n    REP(i,n){\n        scanf(\"%lld\", &a[i]);\n        if (i < n-1) cin >> c[i];\n    }\n    VL cumsum(n+1), sum(n+1);\n    REP(i,n) cumsum[i+1] = cumsum[i] + a[i];\n    sum[0] = a[0];\n    REP(i,n-1){\n        if (c[i] == '+') sum[i+1] = sum[i] + a[i+1];\n        else sum[i+1] = sum[i] - a[i+1];\n    }\n    ll ans = sum[n-1];\n    // cout << ans << endl;\n    VI neg;\n    REP(i,n-1) if (c[i] == '-') neg.push_back(i);\n    // cout << neg.size() << endl;\n    REP(k,(int)neg.size()-1){\n        int x = neg[k], y = neg[k+1];\n        // cout << x << \" \" << y << endl;\n        ll tmp = sum[x] - (cumsum[y+1] - cumsum[x+1]) + cumsum[n] - cumsum[y+1];\n        ans = max(ans, tmp);\n    }\n    cout << ans << endl;\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define time Time\n#define pii pair<int,int>    \n#define x first    \n#define y second \n#define N 10000005   \n#define pb(x) push_back(x)\n#define mp(x,y) make_pair((x),(y))    \n#define sqr(x) ((x)*(x))\ntypedef long long LL;  \nusing namespace std;\nconst int mod=1e9+7;\nint main(){\n\tint n;\n\twhile(scanf(\"%d\",&n)!=EOF){\n\t\tlong long \tint a[100005];\n\t\tint op[100005];\n\t\top[0]=1;\n\t\tscanf(\"%lld\",&a[0]);\n\t\tfor(int i=1;i<n;i++){\n\t\t\tchar c;\n\t\t\twhile(scanf(\"%c\",&c)&&c!='+'&&c!='-');\n\t\t\tif(c=='+')\n\t\t\top[i]=1;\n\t\t\telse\n\t\t\top[i]=0;\n\t\t\tscanf(\"%lld\",&a[i]);\n\t\t} \n\t\tlong long int sum=0;\n\t\tfor(int i=0;i<n;i++){\n\t\t\tsum+=a[i];\n\t\t}\n\t\tlong long int ans=1e18;\n\t\tint i;\n\t\tfor(i=0;op[i]==1;i++);\n\t\tint last=i;\n\t\tlong long int ssum=0,sssum=a[i];\n\t\tfor(;i<n;i++)\n\t\t{\n\t\t\tssum+=a[i];\n\t\t\tif(op[i]==0)\n\t\t\tsssum+=a[i],last=i;\n\t\t\tif(op[i+1]==0||i+1==n)\n\t\t\tans=min(ssum+sssum-a[last],ans),ssum=0;\n\t\t}\n\t\tans=min(sssum,ans);\n\t\tprintf(\"%lld\\n\",sum-2*ans);\n\t}\n}\n/*\n\n 1 - 1 + 2 + 10 - 2 + 3  + 5\n\n*/\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\nusing namespace std;\nlong dp[3],a;\nchar op;\nint n;\nmain()\n{\n\tcin>>n>>dp[0];\n\tdp[1]=dp[2]=-1e18;\n\tfor(int i=1;i<n;i++)\n\t{\n\t\tcin>>op>>a;\n\t\tif(op=='+')\n\t\t{\n\t\t\tfor(int j=0;j<3;j++)dp[j]+=j%2?-a:a;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tdp[2]=max(dp[2]+a,dp[1]+a);\n\t\t\tdp[1]=max(dp[1]+a,dp[0]-a);\n\t\t\tdp[0]-=a;\n\t\t}\n\t}\n\tcout<<max({dp[0],dp[1],dp[2]})<<endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "//khodaya khodet komak kon\n#include <bits/stdc++.h>\n\n#define F first\n#define S second\n#define pb push_back\n#define all(x) x.begin(), x.end()\n#pragma GCC optimise (\"ofast\")\n#pragma GCC optimise(\"unroll-loops\")\n#define int long long\n\nusing namespace std;\n\ntypedef long long ll;\ntypedef pair<int, int> pii;\ntypedef vector<int> vi;\n\nconst int N = 3000 + 10;\nconst ll MOD = 1000000000 + 7;\nconst ll INF = 1000000000000000000;\nconst ll LOG = 25;\n\nvector<int> nw;\nint n, a[N], dp[N][N];\nbool What[N];\n\nint POW(int x){\n\treturn (x % 2 ? -1 : 1);\n}\n\nint32_t main(){\n\tios::sync_with_stdio(0); cin.tie(0); cout.tie(0);\n\tcin >> n;\n\tfor( int i = 1; i <= n; i++){\n\t\tcin >> a[i];\n\t\tif (i != n){\n\t\t\tchar c;\n\t\t\tcin >> c;\n\t\t\tif (c == '-') What[i] = 1;\n\t\t}\n\t}\n\tfor( int i = 0; i < N; i++) for (int j = 0; j < N; j++) dp[i][j] = -INF;\n\tdp[0][0] = 0;\n\t//cout << POW(1) << ' ' << POW(2) << '\\n';\n\tfor (int i = 1; i <= n; i++){\n\t\tfor (int j = 0; j <= i - 1; j++){\n\t\t\tif (What[i - 1]){\n\t\t\t\tdp[i][j + 1] = max(dp[i][j + 1], dp[i - 1][j] + POW(j + 1) * a[i]);\n\t\t\t\tif (j != 0){\n\t\t\t\t\tdp[i][j - 1] = max(dp[i][j - 1], dp[i - 1][j] + POW(j + 1) * a[i]);\n\t\t\t\t}\n\t\t\t\tdp[i][j] = max(dp[i][j], dp[i - 1][j] + POW(j + 1) * a[i]);\n\t\t\t}else{\n\t\t\t\t//cout << i << '\\n';\n\t\t\t\tif (j != 0) dp[i][j - 1] = max(dp[i][j - 1], dp[i - 1][j] + POW(j) * a[i]);\n\t\t\t\tdp[i][j] = max(dp[i][j], dp[i - 1][j] + POW(j) * a[i]);\n\t\t\t}\n\t\t}\n\t}\n\t//cout << dp[1][0] << ' ' << dp[2][1] << ' ' << dp[3][1] << ' ' << dp[4][0] << '\\n';\n\tll ans = -INF;\n\tfor (int i = 0; i <= n; i++){\n\t\tans = max(ans, dp[n][i]);\n\t}\n\tcout << ans;\n\n\n\n\n\n\n\n\n\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define N 100005\n#define LL long long\nusing namespace std;\n\nLL read(){\n\tchar c=getchar();\n\tLL t=0,f=1;\n\twhile(c>'9'||c<'0') f=(c=='-')?-1:1,c=getchar();\n\twhile(c>='0'&&c<='9') t=t*10+c-'0',c=getchar();\n\treturn t*f;\n}\n\nint n,op[N],st;\nLL sum[N],absum[N]; \nchar ch[2];\n\nint main(){\n\tn=read(),sum[1]=absum[1]=read(),st=op[1]=1;\n\tfor(int i=2,x;i<=n;i++){\n\t\tscanf(\"%s\",ch),op[i]=(ch[0]=='-')?-1:1;\n\t\tx=read(),sum[i]=sum[i-1]+x*op[i],absum[i]=absum[i-1]+x;\n\t}\n\tLL ans=sum[n];\n\twhile(op[st]>0) st++;\n\tfor(int i=st,j=st+1;i<=n;i=j,j++){\n\t\tLL tmp=sum[i-1];\n\t\twhile(op[j]>0&&j<=n) j++;\n\t\ttmp+=(absum[n]-absum[j-1])-(absum[j-1]-absum[i-1]);\n\t\tans=max(ans,tmp);\n\t}\n\tprintf(\"%lld\\n\",ans);\n}\n/*\n3\n5 - 1 - 3\n5\n1 - 20 - 13 + 14 - 5\n6\n3 - 5 + 1 + 6 - 11 - 13\n*/"
  },
  {
    "language": "C++",
    "code": "#include<stdio.h>\n#include<vector>\n#include<algorithm>\nusing namespace std;\ntypedef long long ll;\nll dp[200000][3];\nint main()\n{\n\tint num;\n\tscanf(\"%d\", &num);\n\tll now = 0;\n\tfor (int i = 0; i < 200000; i++)dp[i][0] = dp[i][1] = dp[i][2] = -1000000000000000000LL;\n\tint zt;\n\tscanf(\"%d\", &zt);\n\tdp[0][0] = zt;\n\tfor (int i = 1; i < num; i++)\n\t{\n\t\tchar za;\n\t\tint zb;\n\t\tscanf(\" %c%d\", &za, &zb);\n\t\tif (za == '+')\n\t\t{\n\t\t\tdp[i][0] = max(dp[i][0], dp[i - 1][0] + zb);\n\t\t\tdp[i][1] = max(dp[i][1], dp[i - 1][1] - zb);\n\t\t\tdp[i][2] = max(dp[i][2], dp[i - 1][2] + zb);\n\t\t\tdp[i][0] = max(dp[i][0], dp[i - 1][1] - zb);\n\t\t\t//dp[i][0] = max(dp[i][0], dp[i - 1][2] + zb);\n\t\t\tdp[i][1] = max(dp[i][1], dp[i - 1][2] + zb);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tdp[i][0] = max(dp[i][0], dp[i - 1][0] - zb);\n\t\t\tdp[i][1] = max(dp[i][1], dp[i - 1][1] + zb);\n\t\t\tdp[i][2] = max(dp[i][2], dp[i - 1][2] - zb);\n\t\t\tdp[i][1] = max(dp[i][1], dp[i - 1][0] - zb);\n\t\t\tdp[i][2] = max(dp[i][2], dp[i - 1][1] + zb);\n\t\t\t//dp[i][2] = max(dp[i][2], dp[i - 1][0] - zb);\n\t\t\tdp[i][0] = max(dp[i][0], dp[i - 1][1] + zb);\n\t\t\t//dp[i][0] = max(dp[i][0], dp[i - 1][2] - zb);\n\t\t\tdp[i][1] = max(dp[i][1], dp[i - 1][2] - zb);\n\t\t}\n\t}\n\tprintf(\"%lld\\n\", max(dp[num - 1][0], max(dp[num - 1][1], dp[num - 1][2])));\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std; \n\nconst int maxn = 1e6; \n\nint n; \nint ans, sum; \nint op[maxn + 5], a[maxn + 5]; \n\nint main() {\n    scanf(\"%d\", &n); n--; \n    scanf(\"%d\", &sum);\n    for (int i = 1; i <= n; i++) {\n        char s[2]; \n        scanf(\"%s %d\", s, &a[i]); \n        if (s[0] == '-') op[i] = -1; \n        else op[i] = 1; \n        sum += a[i];\n    } \n    for (int i = 1; i <= n; i++) {\n        if (op[i] != -1) continue ; \n        int pos = i + 1, s = a[i]; \n        while (op[pos] == 1 && pos <= n) {\n            s += a[pos]; pos++; \n        }\n        ans = max(ans, sum - 2 * s); \n        sum -= 2 * a[i]; \n    }\n    if (ans == 0) ans = sum; \n    cout << ans << '\\n'; \n    return 0; \n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <cmath>\n#include <cstdio>\n#include <string>\n#include <algorithm>\n#include <queue>\n#define ll long long\nusing namespace std;\n\n#define MOD 1000000007\n\nclass AdditionAndSubtractionHard\n{\npublic:\n\tint n;\n\tvector<ll> a;\n\tvector<string> op;\n\tvector<vector<ll > > dp;\n\n\tAdditionAndSubtractionHard(){\n\t\tcin >> n;\n\t\top.push_back(\"+\");\n\t\tfor (int i = 0; i < 2*n-1; ++i)\n\t\t {\n\t\t \tif(i % 2 == 0){\n\t\t \t\tll tmp;\n\t\t \t\tcin >> tmp;\n\t\t \t\ta.push_back(tmp);\n\t\t \t}else{\n\t\t \t\tstring tmpOp;\n\t\t \t\tcin >> tmpOp;\n\t\t \t\top.push_back(tmpOp);\n\t\t \t}\n\t\t } \n\t}\n\tvoid exec(){\n\t\tdp.resize(n+1);\n\t\tfor (int i = 0; i < n; ++i)\n\t\t{\n\t\t\tdp[i].resize(2);\n\t\t\t// dp[i][0].resize(2);\n\t\t\t// dp[i][1].resize(2);\n\t\t}\n\t\tdp[0][0] = a[0];\n\t\tdp[0][1] = -1 * MOD; // dp[n][1]の時は、符号が反対になっている。\n\t\tint flag = 0;\n\n\t\tfor (int i = 1; i < n; ++i)\n\t\t{\n\t\t\tif(flag >= 2){\n\t\t\t\tdp[i][0] = max(dp[i-1][0] + a[i], dp[i-1][1] + a[i]);\n\t\t\t\tdp[i][1] = max(dp[i-1][0] + a[i], dp[i-1][1] + a[i]);\n\t\t\t\tcontinue;\n\n\t\t\t}\n\t\t\tif(op[i] == \"+\"){\n\t\t\t\tdp[i][0] = max(dp[i-1][0] + a[i], dp[i-1][1] - a[i]);\n\t\t\t\tdp[i][1] = dp[i-1][1] - a[i];\n\t\t\t}else{\n\t\t\t\tdp[i][0] = max(dp[i-1][0] - a[i], dp[i-1][1] + a[i]);\n\t\t\t\tdp[i][1] = max(dp[i-1][1] + a[i], dp[i-1][0] - a[i]);\n\t\t\t\tflag++;\n\t\t\t}\n\t\t\t// cout << dp[i][0] << \" \" << dp[i][1] << endl;\n\t\t}\n\n\t\tcout << max(dp[n-1][0], dp[n-1][1]) << endl;\n\t}\n};\n\nint main(){\n\tAdditionAndSubtractionHard aash = AdditionAndSubtractionHard();\n\taash.exec();\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n#include <cmath>\n#include <stdio.h>\n#include <stdlib.h>\n#include <vector>\n#include <map>\n#include <queue>\n#include <set>\n#include <string>\n#include <string.h>\n#include <stack>\n#include <assert.h>\n#define Endl endl\n#define mp make_pair\n#define ll long long \n#define pii pair<int,int>\n#define pll pair<ll,ll>\n#define over(A) {cout<<A<<endl;exit(0);}\n#define all(A) A.begin(),A.end()\n#define ceil(a,b) ((a-1)/b+1)\n#define srand() mt19937 rng(chrono::steady_clock::now().time_since_epoch().count());\n#define rand(l,r) uniform_int_distribution<int>(l,r)(rng)\ntypedef unsigned long long ull;\nconst int inf=1039074182;\nusing namespace std;\nint n;\nint a[100005];\nvector <ll> vec;\nvector <int> pos;\nvector <bool> b;\nll sumabs[100005];\n\nint main()\n{\n//\tfreopen(\"input.txt\",\"r\",stdin);\n\tcin>>n;\n\tchar x;\n\tcin>>a[0];\n\tll res=a[0];\n\tfor(int i=1;i<n;i++)\n\t{\n\t\twhile(x!='+' && x!='-') x=getchar();\n\t\tscanf(\"%d\",a+i);\n\t\tif(x=='-') a[i]=-a[i];\n\t\tx=getchar();\n\t\tres+=a[i];\n\t}\n//\tll res=-1LL*inf*inf;\n\tfor(int i=0;i<n;)\n\t{\n\t\tll sum=0;\n\t\twhile(a[i]>0 && i<n)\n\t\t{\n\t\t\tsum+=a[i];\n\t\t\ti++;\n\t\t}\n\t\tvec.push_back(sum);\n\t\twhile(a[i]<0 && i<n)\n\t\t{\n\t\t\tvec.push_back(a[i]);\n\t\t\ti++;\n\t\t}\n\t}\n\twhile(vec.back()==0) vec.pop_back();\n\tn=vec.size();\n\tfor(int i=0;i<n;i++)\n\t{\n\t\ta[i]=vec[i];\n\t}\n\tsumabs[n]=0;\n\tfor(int i=n-1;i>=0;i--)\n\t{\n\t\tsumabs[i]=sumabs[i+1]+abs(a[i]);\n\t}\n\tll now=0;\n\tfor(int i=0;i<n;i++)\n\t{\n\t\tnow+=a[i];\n\t\tif(a[i]<0)\n\t\t{\n\t\t\tres=max(res,now-a[i+1]+sumabs[i+2]);\n\t\t}\n//\t\tcout<<now<<' '<<a[i+1]<<' '<<sumabs[i+2]<<endl;\n\t}\n\tcout<<res<<endl;\n//\tll res=0;\n//\tfor(int i=0;i<n;i++)\n//\t{\n//\t\tif(vec[i]>0) pos.push_back(i);\n//\t}\n//\tint nn;\n//\tfor(int i=0;i<n-1;i++)\n//\t{\n//\t\tif(vec[i]<0 && vec[i+1]<0)\n//\t\t{\n//\t\t\tnn=i;\n//\t\t\tbreak;\n//\t\t}\n//\t}\n//\t\n//\tll res=0;\n//\tfor(int i=0;i<pos.size();i++)\n//\t{\n//\t\tint p=pos[i];\n//\t\tbool tb=false;\n//\t\tif(p!=0 && p!=n-1)\n//\t\t{\n//\t\t\tif(-vec[p+1]>vec[p])\n//\t\t\t{\n//\t\t\t\ttb=true;\n//\t\t\t}\n//\t\t}\n//\t\tb.push_back(tb);\n//\t}\n//\tfor(int i=0;i<n;i++)\n//\t{\n//\t\tcout<<vec[i]<<' ';\n//\t}\n//\tcout<<endl;\n//\tint l=0;\n//\tfor(int i=0;i<pos.size();i++)\n//\t{\n//\t\tll block=0;\n//\t\tfor(int j=pos[i]+2;j<(i==(int)pos.size()-1?n:pos[i+1]);j++)\n//\t\t{\n//\t\t\tblock+=abs(a[j]);\n//\t\t}\n//\t\tif(i==(int)pos.size()-1 && pos[i]==n-1)\n//\t\t{\n//\t\t\tblock+=abs(a[pos[i]]);\n//\t\t}\n//\t\telse\n//\t\t{\n//\t\t\tif(!b[i]) block+=a[pos[i]]+a[pos[i]+1];\n//\t\t\telse block+=-a[pos[i]]-a[pos[i]+1];\n//\t\t}\n//\t\tres+=block;\n//\t\tcout<<i<<' '<<block<<endl;\n//\t}\n//\tcout<<res<<endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<string>\n#include<cstdio>\n#include<vector>\n#include<cmath>\n#include<algorithm>\n#include<functional>\n#include<iomanip>\n#include<queue>\n#include<ciso646>\n#include<random>\n#include<map>\n#include<set>\n#include<complex>\n#include<bitset>\n#include<stack>\n#include<unordered_map>\n#include<utility>\nusing namespace std;\ntypedef long long ll;\ntypedef unsigned int ui;\nconst ll mod = 1000000007;\nconst ll INF = (ll)1000000007 * 1000000007;\ntypedef pair<int, int> P;\n#define stop char nyaa;cin>>nyaa;\n#define rep(i,n) for(int i=0;i<n;i++)\n#define per(i,n) for(int i=n-1;i>=0;i--)\n#define Rep(i,sta,n) for(int i=sta;i<n;i++)\n#define rep1(i,n) for(int i=1;i<=n;i++)\n#define per1(i,n) for(int i=n;i>=1;i--)\n#define Rep1(i,sta,n) for(int i=sta;i<=n;i++)\ntypedef long double ld;\ntypedef complex<ld> Point;\nconst ld eps = 1e-4;\nconst ld pi = acos(-1.0);\ntypedef pair<ll, ll> LP;\n\n\nint n;\nbool m[1 << 18];\nll a[1 << 18];\nll s[1 << 18];\nll sx[1 << 18];\nvector<int> v;\nint main() {\n\tcin >> n;\n\tcin >> a[0];\n\trep1(i, n-1) {\n\t\tchar t; cin >> t >> a[i];\n\t\tif (t == '-') {\n\t\t\tm[i] = true;\n\t\t\tv.push_back(i);\n\t\t}\n\t}\n\trep(i, n) {\n\t\ts[i + 1] = s[i] + a[i];\n\t\tif(!m[i])sx[i + 1] = sx[i] + a[i];\n\t\telse sx[i + 1] = sx[i] - a[i];\n\t}\n\tll ans = sx[n];\n\trep(i, (int)v.size() - 1) {\n\t\tint le = v[i], ri = v[i + 1];\n\t\tll z = sx[le] - (s[ri] - s[le]) + s[n] - s[ri];\n\t\tans = max(ans, z);\n\t}\n\tcout << ans << endl;\n\t//stop\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\n#define pb push_back\n#define mp make_pair\n#define forn(i, n) for (int i = 0; i < (int)(n); ++i)\ntypedef long long LL;\ntypedef pair<int, int> PII;\n\nint n;\nint a[100005];\nchar s[100005];\n\nint main() {\n    scanf(\"%d\", &n);\n    forn(i, n) {\n        if (i == 0) {\n            s[i] = '+';\n        } else {\n            scanf(\" %c\", s + i);\n        }\n        scanf(\"%d\", a + i);\n    }\n    LL ans = 0;\n    forn(i, n) {\n        ans += a[i];\n    }\n    bool ok = true;\n    forn(i, n) if (s[i] == '-') {\n        ok = false;\n        break;\n    }\n    if (ok) {\n        cout << ans << endl;\n        return 0;\n    }\n    LL sum = ans;\n    ans *= -1;\n    forn(i, n) if (s[i] == '-') {\n        LL cur = a[i];\n        for (int j = i + 1; j < n; ++j) {\n            if (s[j] == '-') {\n                break;\n            }\n            cur += a[j];\n        }\n        ans = max(ans, sum - 2ll * cur);\n        sum -= 2ll * a[i];\n    }\n    cout << ans << endl;\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <cstring>\n#include <iostream>\n#include <algorithm>\nusing namespace std;\n#define ll long long\n#define N 100005\n#define inf (1ll << 60)\nint n, A[N], B[N];\nll ans, s[N], t[N], now, tot;\nint main()\n{\n\tscanf(\"%d\", &n);\n\tscanf(\"%I64d\", &ans);\n\tt[0] = ans;\n\tchar opt[5];\n\tfor (int i = 1; i < n; i++)\n\t{\n\t\tscanf(\"%s%d\", opt, &A[i]);\n\t\tB[i] = opt[0] == '+' ? 1 : -1;\n\t\tans += A[i] * B[i];\n\t}\n\tfor (int i = n; i >= 1; i--)\n\t\ts[i] = A[i] + s[i + 1];\n\tfor (int i = 1; i <= n; i++)\n\t\tt[i] = B[i] * A[i] + t[i - 1];\n\tnow = -inf;\n\ttot = 0;\n\tfor (int i = n; i >= 1; i--)\n\t{\n\t\ttot += A[i];\n\t\tif (B[i] == -1)\n\t\t{\n\t\t\tans = max(ans, t[i - 1] - tot + now);\n\t\t\tnow = s[i];\n\t\t\ttot = 0;\n\t\t}\n\t}\n\tprintf(\"%I64d\\n\", ans);\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<algorithm>\nusing namespace std;\nconst int MAXN=int(1e5+5);\ntypedef long long LL;\n#define INF LL(1e15)\nLL s1,s2,as,n;\nLL sz[MAXN],fh[MAXN];\nchar c[5];\nint main()\n{\n\tscanf(\"%lld\",&n);\n\tscanf(\"%lld\",&as);\n\tgetchar();\n\tfor(LL i=1;i<=n-1;i++) {\n\t\tscanf(\"%s\",c);\n\t\tscanf(\"%d\",&sz[i]);\n\t\tfh[i]=c[0];\n\t}\n\ts1=s2=-INF;\n\tfor(LL i=1;i<=n-1;i++) {\n\t\tif(fh[i]=='-') {\n\t\t\tas-=sz[i];\n\t\t\ts1-=sz[i];\n\t\t\ts2+=sz[i];\n\t\t\ts1=max(s1,s2);\n\t\t\ts2=max(as,s2);\n\t\t\tas=max(s1,s2);\n\t\t}\n\t\telse {\n\t\t\tas+=sz[i];\n\t\t\ts1+=sz[i];\n\t\t\ts2-=sz[i];\n\t\t\ts2=max(s1,s2);\n\t\t\tas=max(s2,as);\n\t\t}\n\t}\n\tprintf(\"%lld\",as); \n}\n/*\n5\n7 - 8 + 9 - 10 - 2*/"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<vector>\n#include<cstring>\n#include<algorithm>\nusing namespace std;\ntypedef double db;\ntypedef long long ll;\ntypedef vector<int> vi;\ntypedef pair<int, int> pii;\n#define fi first\n#define se second\n#define mp make_pair\n#define pb push_back\n#define pw(x) (1ll << (x))\n#define sz(x) ((int)(x).size())\n#define all(x) (x).begin(),(x).end()\n#define rep(i,l,r) for(i=(l);i<(r);++i)\n#define per(i,l,r) for(i=(r)-1;i>=(l);--i)\n#define dd(x) cout << #x << \" = \" << x << \", \"\n#define de(x) cout << #x << \" = \" << x << endl\n//-----\nconst int N=100005;\nll pre[N],rpre[N];\nint vec[N],sz=0;\nll qry(int l,int r) {\n  return pre[r]-pre[l-1];\n}\nll mymax(ll a,ll b) {\n  return a>b?a:b;\n}\nint main() {\n  int i;\n  sz=0;\n  int n,a;scanf(\"%d%d\",&n,&a);pre[1]=rpre[1]=a;\n  rep(i,2,n+1) {\n    char s[5];\n    int a;scanf(\"%s%d\",s,&a);\n    pre[i]=pre[i-1]+a;\n    if(s[0]=='-') {\n      rpre[i]=rpre[i-1]-a;\n      vec[sz++]=i;\n    }\n    else rpre[i]=rpre[i-1]+a;\n  }\n  ll ans=rpre[n];\n  rep(i,0,sz-1)ans=mymax(ans,rpre[vec[i]-1]-qry(vec[i],vec[i+1]-1)+qry(vec[i+1],n));\n  printf(\"%lld\\n\",ans);\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\nusing ll = long long;\n#define int ll\nusing PII = pair<int, int>;\ntemplate <typename T> using V = vector<T>;\ntemplate <typename T> using VV = vector<V<T>>;\ntemplate <typename T> using VVV = vector<VV<T>>;\n\n#define FOR(i, a, n) for (ll i = (ll)a; i < (ll)n; ++i)\n#define REP(i, n) FOR(i, 0, n)\n#define ALL(x) x.begin(), x.end()\n#define PB push_back\n\nconst ll INF = (1LL<<60);\nconst int MOD = 1000000007;\n\ntemplate <typename T> T &chmin(T &a, const T &b) { return a = min(a, b); }\ntemplate <typename T> T &chmax(T &a, const T &b) { return a = max(a, b); }\ntemplate <typename T> bool IN(T a, T b, T x) { return a<=x&&x<b; }\ntemplate<typename T> T ceil(T a, T b) { return a/b + !!(a%b); }\ntemplate<class S,class T>\nostream &operator <<(ostream& out,const pair<S,T>& a){\n  out<<'('<<a.first<<','<<a.second<<')';\n  return out;\n}\ntemplate<class T>\nostream &operator <<(ostream& out,const vector<T>& a){\n  out<<'[';\n  REP(i, a.size()) {out<<a[i];if(i!=a.size()-1)out<<',';}\n  out<<']';\n  return out;\n}\n\nint dx[] = {0, 1, 0, -1}, dy[] = {1, 0, -1, 0};\n\nsigned main(void)\n{\n  cin.tie(0);\n  ios::sync_with_stdio(false);\n\n  int n;\n  cin >> n;\n  V<int> a(n);\n  V<char> op(n);\n  op[0] = '+'; cin >> a[0];\n  FOR(i, 1, n) cin >> op[i] >> a[i];\n\n  V<int> b(n); b[0] = a[0];\n  FOR(i, 1, n) b[i] = b[i-1] + a[i];\n\n  V<int> v;\n  REP(i, n) if(op[i] == '-') v.PB(i);\n  v.PB(n);\n  V<int> nxt(n);\n  REP(i, v.size()-1) nxt[v[i]] = v[i+1];\n\n  int now = 0;\n  REP(i, n) {\n    if(op[i]=='+') now += a[i];\n    else now -= a[i];\n  }\n\n  int ret = now; now = 0;\n  REP(i, n) {\n    if(op[i]=='+') {\n      now += a[i];\n    } else {\n      chmax(ret, now - (b[nxt[i]-1]-b[i-1]) + (b[n-1]-b[nxt[i]-1]));\n      now -= a[i];\n    }\n  }\n\n  cout << ret << endl;\n\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\nint N;\nvector<int> A;\nvector<char> O;\nvector<int> psum;\nvector<int> sidx;\nvector<int> res;\n\nint main() {\n    scanf(\"%d\", &N);\n    A.resize(N);\n    O.resize(N - 1);\n    for(int i = 0; i < N - 1; i++) {\n        scanf(\"%d %c\", &A[i], &O[i]);\n    }\n    scanf(\"%d\", &A[N - 1]);\n\n    psum.resize(N);\n    for(int i = 0; i < N; i++) {\n        psum[i] = A[i];\n        if(i) psum[i] += psum[i - 1];\n    }\n\n    for(int i = 0; i < N - 1; i++) {\n        if(O[i] == '-') sidx.push_back(i);\n    }\n\n    int ans = A[0];\n    res.resize(N);\n    res[0] = ans;\n\n    for(int i = 1; i < N; i++) {\n        ans += O[i - 1] == '+'? A[i] : -A[i];\n        res[i] = ans;\n    }\n\n    sidx.push_back(N - 1);\n\n    for(int i = 0; i < (int)sidx.size() - 1; i++) {\n        int now = sidx[i];\n        int nxt = sidx[i + 1];\n\n        ans = max(ans, res[now] + -(psum[nxt] - psum[now]) + psum[N - 1] - psum[nxt]);\n    }\n\n    printf(\"%d\", ans);\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<cstring>\n#include<algorithm>\nusing namespace std;\n#define N 100005\n#define LL long long\nint a[N],op[N];\nLL sum[N];\nchar s[4];\nint main()\n{\n\tint n,i,j;\n\tscanf(\"%d%d\",&n,&a[1]);op[1]=1;\n\tfor(i=2;i<=n;i++){\n\t\tscanf(\"%s%d\",s,&a[i]);\n\t\tif(s[0]=='-')op[i]=-1;\n\t\telse op[i]=1;\n\t}\n\tfor(i=n;i>=1;i--)sum[i]=sum[i+1]+a[i];\n\tLL s1=0,s2,ans=-0x3f3f3f3f3f3f3f3fll;\n\tfor(i=2;i<=n;i++){\n\t\ts1+=1ll*a[i-1]*op[i-1];\n\t\tif(op[i]==-1){\n\t\t\ts2=1ll*a[i];\n\t\t\tfor(j=i+1;j<=n;j++){\n\t\t\t\tif(op[j]==-1)break;\n\t\t\t\ts2+=1ll*a[j];\n\t\t\t}\n\t\t\tans=max(ans,s1-s2+sum[j]);\n\t\t}\n\t}\n\ts1+=1ll*a[n]*op[n];\n\tprintf(\"%lld\",max(s1,ans));\n}"
  },
  {
    "language": "C++",
    "code": "#include \"bits/stdc++.h\"\nusing namespace std;\n#define FOR(i,j,k) for(int (i)=(j);(i)<(int)(k);++(i))\n#define rep(i,j) FOR(i,0,j)\n#define each(x,y) for(auto &(x):(y))\n#define mp make_pair\n#define mt make_tuple\n#define all(x) (x).begin(),(x).end()\n#define debug(x) cout<<#x<<\": \"<<(x)<<endl\n#define smax(x,y) (x)=max((x),(y))\n#define smin(x,y) (x)=min((x),(y))\n#define MEM(x,y) memset((x),(y),sizeof (x))\n#define sz(x) (int)(x).size()\ntypedef long long ll;\ntypedef pair<int, int> pii;\ntypedef vector<int> vi;\ntypedef vector<ll> vll;\n\nint N, A[100001];\nll dp[100001][3];\nconst ll MI = LONG_MIN / 3;\n\nint main(){\n    ios::sync_with_stdio(false);\n    cin.tie(0);\n    \n    cin >> N;\n    cin >> A[0];\n    FOR(i, 1, N) {\n        char c; cin >> c;\n        cin >> A[i];\n        if(c == '-')A[i] = -A[i];\n    }\n\n    rep(i, N + 1)rep(j, 3)dp[i][j] = MI;\n\n    dp[0][0] = 0;\n    rep(i, N) rep(j, 3) if(dp[i][j]>MI){\n        for(int nj = 0; nj <= min(j + (A[i]<0), 2); ++nj) {\n            smax(dp[i + 1][nj], dp[i][j] + ((j & 1) ? -A[i] : A[i]));\n        }\n    }\n\n    cout << dp[N][0] << endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\ntypedef signed long long ll;\n\n#undef _P\n#define _P(...) (void)printf(__VA_ARGS__)\n#define FOR(x,to) for(x=0;x<(to);x++)\n#define FORR(x,arr) for(auto& x:arr)\n#define ITR(x,c) for(__typeof(c.begin()) x=c.begin();x!=c.end();x++)\n#define ALL(a) (a.begin()),(a.end())\n#define ZERO(a) memset(a,0,sizeof(a))\n#define MINUS(a) memset(a,0xff,sizeof(a))\n//-------------------------------------------------------\n\nint N;\nll dp[101010][4];\n\nvoid solve() {\n\tint i,j,k,l,r,x,y; string s;\n\t\n\tcin>>N;\n\tcin>>x;\n\tmemset(dp,0xcf,sizeof(dp));\n\tdp[0][0]=x;\n\tFOR(i,N-1) {\n\t\tcin>>s>>x;\n\t\t\n\t\tif(s==\"+\") {\n\t\t\tdp[i+1][3] = dp[i][3]-x;\n\t\t\tdp[i+1][2] = max(dp[i+1][3], dp[i][2]+x);\n\t\t\tdp[i+1][1] = max(dp[i+1][2], dp[i][1]-x);\n\t\t\tdp[i+1][0] = max(dp[i+1][1], dp[i][0]+x);\n\t\t}\n\t\tif(s==\"-\") {\n\t\t\tll T[4];\n\t\t\t\n\t\t\tT[0]=dp[i][1];\n\t\t\tT[1]=max(dp[i][0],dp[i][2]);\n\t\t\tT[2]=max(dp[i][1],dp[i][3]);\n\t\t\tT[3]=dp[i][2];\n\t\t\tdp[i+1][3] = T[3]-x;\n\t\t\tdp[i+1][2] = max(dp[i+1][3], T[2]+x);\n\t\t\tdp[i+1][1] = max(dp[i+1][2], T[1]-x);\n\t\t\tdp[i+1][0] = max(dp[i+1][1], T[0]+x);\n\t\t}\n\t\t\n\t}\n\t\n\tcout<<*max_element(dp[N-1],dp[N-1]+4)<<endl;\n\t\n}\n\n\nint main(int argc,char** argv){\n\tstring s;int i;\n\tif(argc==1) ios::sync_with_stdio(false), cin.tie(0);\n\tFOR(i,argc-1) s+=argv[i+1],s+='\\n';\n\tFOR(i,s.size()) ungetc(s[s.size()-1-i],stdin);\n\tsolve(); return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define time Time\n#define pii pair<int,int>    \n#define x first    \n#define y second \n#define N 10000005   \n#define pb(x) push_back(x)\n#define mp(x,y) make_pair((x),(y))    \n#define sqr(x) ((x)*(x))\ntypedef long long LL;  \nusing namespace std;\nconst int mod=1e9+7;\nint main(){\n\tint n;\n\twhile(scanf(\"%d\",&n)!=EOF){\n\t\tlong long \tint a[100005];\n\t\tint op[100005];\n\t\top[0]=1;\n\t\tscanf(\"%lld\",&a[0]);\n\t\tfor(int i=1;i<n;i++){\n\t\t\tchar c;\n\t\t\twhile(scanf(\"%c\",&c)&&c!='+'&&c!='-');\n\t\t\tif(c=='+')\n\t\t\top[i]=1;\n\t\t\telse\n\t\t\top[i]=0;\n\t\t\tscanf(\"%lld\",&a[i]);\n\t\t} \n\t\tlong long int sum=0;\n\t\tfor(int i=0;i<n;i++){\n\t\t\tsum+=a[i];\n\t\t}\n\t\tlong long int ans=1e18;\n\t\tint i;\n\t\tfor(i=0;op[i]==1;i++);\n\t\tint last=i;\n\t\tlong long int ssum=0,sssum=a[i];\n\t\tfor(;i<n;i++)\n\t\t{\n\t\t\tssum+=a[i];\n\t\t\tif(op[i+1]==0||i+1==n)\n\t\t\tans=min(ssum+sssum-a[last],ans),ssum=0;\n\t\t\tif(op[i+1]==0)\n\t\t\tsssum+=a[i+1],last=i+1;\n\t\t}\n\t\tans=min(sssum,ans);\n\t\tprintf(\"%lld\\n\",sum-2*ans);\n\t}\n}\n/*\n\n 1 - 1 + 2 + 10 - 2 + 3  + 5\n\n*/\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define err(args...) {}\n#ifdef DEBUG\n#include \"_debug.cpp\"\n#endif\nusing namespace std;\nusing ll = long long;\nusing ld = long double;\ntemplate <typename T> using lim = numeric_limits<T>;\ntemplate <typename T> istream& operator>>(istream& is, vector<T>& a) { for(T& x : a) { is >> x; } return is; }\n\nint main() {\n    ios_base::sync_with_stdio(false);\n    cin.tie(0);\n    int n;\n    cin >> n;\n    vector<int> a(n), sgn(n);\n    for(int i = 0; i < n; i++) {\n        char c = '+';\n        if(i) cin >> c;\n        sgn[i] = c == '+' ? 1 : -1;\n        cin >> a[i];\n    }\n    const int N = 100'000;\n    static ll opt[N + 1][2][3];\n    for(int i = n; i >= 0; i--) {\n        for(int flipped = 0; flipped <= 1; flipped++) {\n            for(int has_flipped = 0; has_flipped <= 2; has_flipped++) {\n                ll& ans = opt[i][flipped][has_flipped];\n                if(i == n) {\n                    ans = 0;\n                } else {\n                    ans = a[i] * sgn[i] * (flipped ? -1 : 1) + opt[i + 1][flipped][has_flipped];\n                    if(sgn[i] == -1) {\n                        ans = max(ans, a[i] * sgn[i] * (flipped ? -1 : 1) + opt[i + 1][not flipped][min(has_flipped + 1, 2)]);\n                    }\n                    if(has_flipped >= 1) {\n                        ans = max(ans, a[i] * sgn[i] + opt[i + 1][0][0]);\n                    }\n                    if(has_flipped >= 2) {\n                        ans = max(ans, a[i] * sgn[i] * -1 + opt[i + 1][1][1]);\n                    }\n                }\n            }\n        }\n    }\n    cout << opt[0][0][0] << endl;\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "# include <stdio.h>\n# include <bits/stdc++.h>\nusing namespace std;\n# define fi cin\n# define fo cout\n# define x first\n# define y second\n# define ll long long\n# define IOS ios_base :: sync_with_stdio(0);cin.tie(0)\n# define p(v) cerr << #v << \" = \" << v << '\\n'\n# define p2(v) cerr << #v << \" = \" << (complex < int > (v.x,v.y)) << '\\n'\n# define vi vector < int >\n# define vl vector < ll >\n# define pii pair < int , int >\n# define mp make_pair\n# define db long double\n# define pb push_back\n# define pdd pair < db , db >\n# define int ll\nint32_t main(void)\n{\n    #ifdef CF\n    freopen(\"input\",\"r\",stdin);\n    #endif // CF\n    srand(time(0));\n    fo << fixed << setprecision(7);\n    cerr << fixed << setprecision(7);\n    int n;\n    fi>>n;\n    static int s[1 << 20];\n    static char op[1 << 20];\n    op[1] = '+';\n    for (int i = 1;i <= n;++i)\n    {\n        fi>>s[i];\n        if (i < n)\n            fi>>op[i + 1];\n    }\n    static int ss[1 << 20];\n    for (int i = 1;i <= n;++i)\n        ss[i] = (op[i] == '-' ? -1 : 1) * s[i] + ss[i - 1];\n    static int ab[1 << 20];\n    for (int i = n;i;--i)\n        ab[i] = ab[i + 1] + s[i];\n    static int mn[1 << 20];\n    for (int i = n;i;--i)\n        mn[i] = op[i] == '+' ? mn[i + 1] : i;\n    int ans = ss[n];\n    for (int i = 0;i <= n;++i)\n        if (op[i] == '-')\n            ans = max(ans,ss[i - 1] - (-ab[mn[i + 1]] + ab[i]) + ab[mn[i + 1]]);\n    fo << ans << '\\n';\n    cerr << \"Time elapsed :\" << clock() * 1000.0 / CLOCKS_PER_SEC << \" ms\" << '\\n';\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\nconst int MaxN=100010;\nint N,A[MaxN];\nlong long S[MaxN];\nchar op[MaxN];\nvoid cmax(long long&a,long long b){b>a?a=b:1;}\nint main(){\n\tscanf(\"%d%d\",&N,A);\n\tfor(int i=1;i<N;i++)scanf(\"%s%d\",op+i,A+i);\n\tlong long ans=0,cur=0;\n\tfor(int i=0;i<N;i++){\n\t\tS[i+1]=S[i]+A[i];\n\t\tans+=op[i]=='-'?-A[i]:A[i];\n\t}\n\tfor(int i=0,j;i<N;i++){\n\t\tif(op[i]=='-'){\n\t\t\tfor(j=i+1;j<N&&op[j]!='-';j++);\n\t\t\tcmax(ans,cur+S[N]-S[j]*2+S[i]);\n\t\t\tcur-=A[i];\n\t\t}\n\t\telse cur+=A[i];\n\t}\n\tprintf(\"%lld\\n\",ans);\n}"
  },
  {
    "language": "C++",
    "code": "#define STOPIT\n#include <bits/stdc++.h>\n#define loop(n) for (int ngtkana_is_a_genius = 0; ngtkana_is_a_genius < int(n); ngtkana_is_a_genius++)\n#define rep(i, begin, end) for (int i = int(begin); (i) < int(end); i++)\n#define all(v) v.begin(), v.end()\n#define rand(l, r) std::uniform_int_distribution<>(l, r)(mt)\nusing lint = long long;\nauto mt = std::mt19937_64(std::random_device{}());\nauto cmn = [](auto& a, auto b){ if (a > b) {a = b; return true;} return false; };\nauto cmx = [](auto& a, auto b){ if (a < b) {a = b; return true;} return false; };\nvoid debug_impl() { std::cerr << std::endl; }\ntemplate <typename Head, typename... Tail>\nvoid debug_impl(Head head, Tail... tail) { std::cerr << \" \" << head; debug_impl(tail...); }\n#ifndef STOPIT\n#define debug(...)\\\n  do {\\\n    std::cerr << std::boolalpha << \"[\" << #__VA_ARGS__ << \"]:\";\\\n    debug_impl(__VA_ARGS__);\\\n    std::cerr << std::noboolalpha;\\\n  } while (false)\n#else\n#define debug(...) 0;\n#endif\n\ntemplate < typename Container, typename Value = typename Container::value_type, std::enable_if_t<!std::is_same< Container, std::string >::value, std::nullptr_t> = nullptr>\nstd::istream& operator>> (std::istream& is, Container& v)\n  { for (auto & x : v) { is >> x; } return is; }\n\ntemplate < typename Container, typename Value = typename Container::value_type, std::enable_if_t<!std::is_same< Container, std::string >::value, std::nullptr_t> = nullptr >\nstd::ostream& operator<< (std::ostream& os, Container const& v) {\n os << \"{\";\n  for (auto it = v.begin(); it != v.end(); it++)\n    {os << (it != v.begin() ? \",\" : \"\") << *it;}\n  return os << \"}\";\n}\n\ntemplate < template < typename ... > class Tuple,  typename... Args, std::size_t ... Inds, std::size_t = std::tuple_size< Tuple < Args ... > >::value >\nstd::istream& tuple_input_impl(std::istream& os, Tuple<Args...>& tuple, std::integer_sequence<std::size_t, Inds...>)\n  { (void)std::initializer_list<int>{((void)(os >> std::get< Inds >(tuple)), 0)...}; return os; }\ntemplate < template < typename ... > class Tuple,  typename... Args, std::size_t = std::tuple_size< Tuple < Args ... > >::value >\nstd::istream& operator>> (std::istream& os, Tuple<Args...>& tuple)\n  { return tuple_input_impl(os, tuple, std::index_sequence_for<Args...>()); }\n\ntemplate < template < typename ... > class Tuple,  typename... Args, std::size_t ... Inds, std::size_t = std::tuple_size< Tuple < Args ... > >::value >\nstd::ostream& tuple_output_impl(std::ostream& os, const Tuple<Args...>& tuple, std::integer_sequence<std::size_t, Inds...>)\n  { os << \"(\"; (void)std::initializer_list<int>{((void)(os << (Inds > 0 ? \",\" : \"\") << std::get< Inds >(tuple)), 0)...}; return os << \")\"; }\ntemplate < template < typename ... > class Tuple,  typename... Args, std::size_t = std::tuple_size< Tuple < Args ... > >::value >\nstd::ostream& operator<< (std::ostream& os, const Tuple<Args...>& tuple)\n { return tuple_output_impl(os, tuple, std::index_sequence_for<Args...>()); }\n\nint main() {\n  std::cin.tie(0); std::cin.sync_with_stdio(false);\n  int n; std::cin >> n;\n  std::vector< std::pair< int, lint > > data(n);\n  lint all_positive = 0;\n  rep(i,0,n) {\n    char c = '+';\n    if (0 < i) std::cin >> c;\n    lint x; std::cin >> x;\n    all_positive += x;\n    data.at(i) = {(c == '+' ? +1 : -1), x};\n  }\n  debug(data);\n  lint ans = 0;\n  rep(i,0,n) {\n    int s; lint x; std::tie(s,x) = data.at(i);\n    if (s < 0) x = -x;\n    ans += x;\n  }\n  debug(all_positive, ans);\n\n  lint now = 1e17;\n  for (auto&& pair : data) {\n    int s; lint x; std::tie(s,x) = pair;\n    if (s < 0) {\n      lint tmp = all_positive - 2 * now;\n      debug(tmp);\n      now = 0;\n      cmx(ans, tmp);\n    }\n    now += x;\n  }\n  std::cout << ans << std::endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <sstream>\n#include <string>\n#include <vector>\n#include <stack>\n#include <queue>\n#include <set>\n#include <map>\n#include <numeric>\n#include <algorithm>\n#include <cstdio>\n#include <cstdlib>\n#include <cstring>\n#include <cctype>\n#include <cmath>\n#include <cassert>\n#include <cstdarg>\n#include <sys/time.h>\n#include <fstream>\n//#include \"cout.h\"\n\nusing namespace std;\n\n#define SZ(x) ((int)x.size())\n#define MSET(x,a) memset(x, a, (int)sizeof(x))\n#define PB push_back\n#define VI vector < int >\n#define PII pair < int, int >\n#define LL long long\n#define FOR(i,a,b) for (int i = (a); i < (b); i++)\n#define REP(i,n) FOR(i,0,n)\n#define ALL(v) (v).begin(), (v).end()\n#define FIT(it,v) for (__typeof((v).begin()) it = (v).begin(); it != (v).end(); it++)\n#define OUT(A) cout << #A << \" = \"<< (A) << endl\n#define OUT2(A, B) cout << \"(\" << #A << \", \" << #B << \") = (\" << (A) << \", \"<< (B) << \")\" << endl\ntemplate<class T> void chmin(T &t, T f) { if (t > f) t = f; } \ntemplate<class T> void chmax(T &t, T f) { if (t < f) t = f; } \n\n#define present(c, e) ((c).find((e)) != (c).end())\n#define cpresent(c, e) (find(all(c), (e)) != (c).end())\n\nint n;\nLL a[100010];\nchar op[100010];\nLL dp[100010][3];\n\nvoid init() {\n}\n\nvoid input() {\n\tcin >> n;\n\tREP(i, n) {\n\t\tcin >> a[i];\n\t\tif (i < n-1) cin >> op[i+1];\n\t}\n}\n\nvoid solve() {\n\tREP(i, 100010) REP(j, 3) dp[i][j] = -(1LL<<60);\n\tdp[0][0] = a[0];\n\tFOR(i, 1, n){\n\t\tif(op[i] == '+'){\n\t\t\tchmax(dp[i][0], max({\n\t\t\t\tdp[i-1][0]+a[i], \n\t\t\t\tdp[i-1][1]+a[i], \n\t\t\t\tdp[i-1][2]+a[i]\n\t\t\t\t}));\n\t\t\tchmax(dp[i][1], max({\n\t\t\t\tdp[i-1][1]-a[i], \n\t\t\t\tdp[i-1][2]-a[i]\n\t\t\t\t}));\n\t\t\tchmax(dp[i][2], max({\n\t\t\t\tdp[i-1][2]+a[i]\n\t\t\t\t}));\n\t\t}\n\t\telse{\n\t\t\tchmax(dp[i][0], max({\n\t\t\t\tdp[i-1][0]-a[i], \n\t\t\t\tdp[i-1][1]-a[i], \n\t\t\t\tdp[i-1][2]-a[i]\n\t\t\t\t}));\n\t\t\tchmax(dp[i][1], max({\n\t\t\t\tdp[i-1][0]-a[i], \n\t\t\t\tdp[i-1][1]+a[i], \n\t\t\t\tdp[i-1][2]+a[i]\n\t\t\t\t}));\n\t\t\tchmax(dp[i][2], max({\n\t\t\t\tdp[i-1][1]+a[i], \n\t\t\t\tdp[i-1][2]-a[i]\n\t\t\t\t}));\n\t\t}\n\t}\n\tcout << max({dp[n-1][0], dp[n-1][1], dp[n-1][2]}) << endl;\n}\n\nint main() {\n\tinit();\n    input();\n    solve();\n\treturn 0;\n}\n\n\n\n\n\n\n"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <iostream>\n#include <cstring>\n#include <algorithm>\n#include <climits>\n\nusing namespace std;\n\ntypedef long long LL;\n\nconst LL Maxn = 100010;\n\nLL A[Maxn]; char ch[Maxn]; LL N;\n\nLL Sum[Maxn];\nLL Add[Maxn];\n\n\nint main()\n{\n  scanf(\"%lld\",&N); scanf(\"%lld\",&A[0]); ch[0]='+';\n  for(LL i=1;i<N;i++)\n  {\n    char c=getchar(); while(c!='+' && c !='-') c=getchar();\n    ch[i]=c; scanf(\"%lld\",&A[i]);\n  }\n\n  for(LL i=0;i<N;i++) Add[i]=Add[i-1]+A[i];\n  for(LL i=0;i<N;i++) Sum[i]=Sum[i-1]+A[i]*((ch[i]=='+') ? 1 : -1);\n\n  LL nx=N; LL ans=Sum[N-1];\n\n  for(LL i=N-1;i>=0;i--) if(ch[i]=='-')\n  {\n    if(nx!=N) ans=max(ans,Sum[i-1]-(Add[nx-1]-Add[i-1])+(Add[N-1]-Add[nx-1]));\n    nx=i;\n  }\n  return printf(\"%lld\\n\",ans),0;\n}"
  },
  {
    "language": "C++",
    "code": "//khodaya khodet komak kon\n#include <bits/stdc++.h>\n\n#define F first\n#define S second\n#define pb push_back\n#define all(x) x.begin(), x.end()\n#pragma GCC optimise (\"ofast\")\n#pragma GCC optimise(\"unroll-loops\")\n#define int long long\n\nusing namespace std;\n\ntypedef long long ll;\ntypedef pair<int, int> pii;\ntypedef vector<int> vi;\n\nconst int N = 100000 + 10;\nconst ll MOD = 1000000000 + 7;\nconst ll INF = 1000000000000000000;\nconst ll LOG = 25;\n\nvector<int> nw;\nint n, a[N], dp[N][4];\nbool What[N];\n\nint POW(int x){\n\treturn (x % 2 ? -1 : 1);\n}\n\nint32_t main(){\n\tios::sync_with_stdio(0); cin.tie(0); cout.tie(0);\n\tcin >> n;\n\tfor( int i = 1; i <= n; i++){\n\t\tcin >> a[i];\n\t\tif (i != n){\n\t\t\tchar c;\n\t\t\tcin >> c;\n\t\t\tif (c == '-') What[i] = 1;\n\t\t}\n\t}\n\tfor( int i = 0; i < N; i++) for (int j = 0; j < 3; j++) dp[i][j] = -INF;\n\tdp[0][0] = 0;\n\t//cout << POW(1) << ' ' << POW(2) << '\\n';\n\tfor (int i = 1; i <= n; i++){\n\t\tfor (int j = 0; j <= 2; j++){\n\t\t\tif (What[i - 1]){\n\t\t\t\tdp[i][j + 1] = max(dp[i][j + 1], dp[i - 1][j] + POW(j + 1) * a[i]);\n\t\t\t\tif (j != 0){\n\t\t\t\t\tdp[i][j - 1] = max(dp[i][j - 1], dp[i - 1][j] + POW(j + 1) * a[i]);\n\t\t\t\t}\n\t\t\t\tdp[i][j] = max(dp[i][j], dp[i - 1][j] + POW(j + 1) * a[i]);\n\t\t\t}else{\n\t\t\t\t//cout << i << '\\n';\n\t\t\t\tif (j != 0) dp[i][j - 1] = max(dp[i][j - 1], dp[i - 1][j] + POW(j) * a[i]);\n\t\t\t\tdp[i][j] = max(dp[i][j], dp[i - 1][j] + POW(j) * a[i]);\n\t\t\t}\n\t\t}\n\t}\n\t//cout << dp[1][0] << ' ' << dp[2][1] << ' ' << dp[3][1] << ' ' << dp[4][0] << '\\n';\n\tll ans = max(dp[n][0], max(dp[n][2], dp[n][1]));\n\tcout << ans;\n\n\n\n\n\n\n\n\n\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <cstdlib>\n#include <algorithm>\n#include <vector>\n#include <cstring>\n#include <queue>\n#include <map>\n#include <set>\n#include <functional>\n#include <stack>\n#include <cmath>\n#include <string>\n#define SIZE 100005\n#define INF 100000000000000000LL\n\nusing namespace std;\ntypedef long long int ll;\ntypedef pair <ll,ll> P;\n\nint A[SIZE];\nint tp[SIZE];\nchar str[SIZE];\n\nint main()\n{\n\tint n;\n\tscanf(\"%d\",&n);\n\tll ret=0;\n\tscanf(\"%lld\",&ret);\n\tn--;\n\tfor(int i=0;i<n;i++)\n\t{\n\t\tscanf(\"%s\",&str);\n\t\tint a;\n\t\tscanf(\"%d\",&a);\n\t\tif(str[0]=='-') tp[i]=0;\n\t\telse tp[i]=1;\n\t\tA[i]=a;\n\t}\n\tbool up=true;\n\tvector <P> vx;\n\tll sum=0;\n\tfor(int i=0;i<n;i++)\n\t{\n\t\tif(up&&tp[i]==1)\n\t\t{\n\t\t\tret+=A[i];\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif(up)\n\t\t\t{\n\t\t\t\tup=false;\n\t\t\t\tvx.push_back(P(A[i],0));\n\t\t\t\tsum=0;\n\t\t\t}\n\t\t\telse if(tp[i]==0)\n\t\t\t{\n\t\t\t\tvx[vx.size()-1].second=sum;\n\t\t\t\tvx.push_back(P(A[i],0));\n\t\t\t\tsum=0;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tsum+=A[i];\n\t\t\t}\n\t\t}\n\t}\n\tif(up)\n\t{\n\t\tprintf(\"%lld\\n\",ret);\n\t\treturn 0;\n\t}\n\tvx[vx.size()-1].second=sum;\n\tll all=0;\n\tfor(int i=0;i<vx.size();i++) all+=vx[i].first+vx[i].second;\n\tll now=-INF;\n\tfor(int i=0;i<vx.size();i++)\n\t{\n\t\tall-=vx[i].first+vx[i].second;\n\t\tnow=max(now,all-(vx[i].first+vx[i].second));\n\t\tall-=vx[i].first;\n\t\tall+=vx[i].second;\n\t}\n\tnow=max(now,all);\n\tprintf(\"%lld\\n\",ret+now);\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<cstring>\n#include<vector>\n#include<queue>\n#include<algorithm>\n#include<cmath>\n#include<climits>\n#include<string>\n#include<set>\n#include<numeric>\n#include<map>\n#include<iostream>\nusing namespace std;\n#define rep(i,n) for(int i = 0;i<((int)(n));i++)\n#define reg(i,a,b) for(int i = ((int)(a));i<=((int)(b));i++)\n#define irep(i,n) for(int i = ((int)(n)-1);i>=0;i--)\n#define ireg(i,a,b) for(int i = ((int)(b));i>=((int)(a));i--)\ntypedef long long int lli;\ntypedef pair<int, int> mp;\n#define fir first\n#define sec second\n#define IINF INT_MAX\n#define LINF LLONG_MAX\n#define eprintf(...) fprintf(stderr,__VA_ARGS__)\n#define pque(type) priority_queue<type,vector<type>,greater<type> >\n#define memst(a,b) memset(a,b,sizeof(a))\n\nint main(void){\n\tint n, m = 1; cin >> n;\n\tvector<vector<lli>> v(1, vector<lli>(1, 0));\n\tcin >> v[0][0];\n\trep(i, n-1){\n\t\tchar op; lli t; cin >> op >> t;\n\t\tif(v.size() < m) v.push_back(vector<lli>(0));\n\t\tif(op == '-'){\n\t\t\tv.back().push_back(-t);\n\t\t\tm++;\n\t\t}else{\n\t\t\tv.back().push_back(t);\n\t\t}\n\t}\n\t\n\tlli ans = accumulate(v[0].begin(), v[0].end(), 0);\n\t\n\tlli s1min = 0, s1s = 0;\n\trep(j, v[1].size()){\n\t\ts1s += v[1][j];\n\t\ts1min = min(s1min, s1s);\n\t}\n\tans += s1s - s1min*2;\n\t\n\tfor(int i = 2; i < v.size(); i++){\n\t\tlli smax = 0, smin = 0, ss = 0;\n\t\trep(j, v[i].size()){\n\t\t\tss += v[i][j];\n\t\t\tsmin = min(smin, ss);\n\t\t\tsmax = max(smax, ss);\n\t\t}\n\t\tans += max(ss - smin*2, 2*smax - ss);\n\t}\n\t\n\tcout << ans << endl;\n\t\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing std::swap;\ntypedef long long i64;\nconst i64 inf=1ll<<60;\nconst int N=110007;\nint n,v0[N],ps[N],pp=0;\nchar op[N];\ni64 ans=0,s1[N],s2[N];\ni64 min(i64 a,i64 b){return a<b?a:b;}\nint main(){\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;++i){\n\t\tif(i>1)scanf(\"%s\",op+i);\n\t\tscanf(\"%d\",v0+i);\n\t\ts1[i]=v0[i];\n\t\tif(op[i]=='-')v0[i]*=-1,ps[pp++]=i;\n\t\tans+=v0[i];\n\t\ts2[i]=v0[i]+s2[i-1];\n\t}\n\tfor(int i=n;i;--i)s1[i]+=s1[i+1];\n\tfor(int i=1;i<pp;++i){\n\t\tint l=ps[i-1],r=ps[i];\n\t\ti64 v=s2[l]+s1[r]-(s2[r-1]-s2[l]);\n\t\tif(v>ans)ans=v;\n\t}\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\nconst int N=100005;\n#define ll long long\nll f[N][3];char s;\nint main (){\n\tint n;cin>>n;\n\tcin>>f[0][0];f[0][1]=f[0][2]=-1ll<<60;\n\tfor (int i=1,x;i<n;i++){\n\t\tcin>>s>>x;\n\t\tif (s=='+'){\n\t\t\tf[i][0]=max(max(f[i-1][0],f[i-1][1]),f[i-1][2])+x;\n\t\t\tf[i][1]=max(f[i-1][1],f[i-1][2])+x;\n\t\t\tf[i][2]=f[i-1][2]+x;\n\t\t}else{\n\t\t\tf[i][0]=max(max(f[i-1][0],f[i-1][1]),f[i-1][2])-x;\n\t\t\tf[i][1]=max(max(f[i-1][1],f[i-1][2])+x,f[i-1][0]-x);\n\t\t\tf[i][1]=max(max(f[i-1][1],f[i-1][2])-x,f[i][1]);\n\t\t\tf[i][2]=max(f[i-1][2],f[i-1][1])+x;\n\t\t}\n\t}\n\tprintf (\"%lld\",max(max(f[n-1][0],f[n-1][1]),f[n-1][2]));\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <cstring>\n#include <algorithm>\nusing namespace std;\ntypedef long long ll;\nconst int N = 1e5 + 5;\nconst ll inf = 1e15;\nint n;\nll a[N], dp[N][3];\nchar s[N][2];\nint main() {\n    scanf(\"%d\", &n);\n    for(int i = 1; i < n; ++i) {\n        scanf(\"%lld%s\", &a[i], s[i]);\n    }\n    scanf(\"%lld\", &a[n]);\n    dp[1][0] = a[1];\n    dp[1][1] = dp[1][2] = -inf; \n    for(int i = 2; i <= n; ++i) {\n        if(s[i - 1][0] == '-') {\n            dp[i][0] = -inf;\n            dp[i][1] = max(dp[i - 1][0], dp[i - 1][1]) - a[i];\n            dp[i][2] = max(dp[i - 1][1], dp[i - 1][2]) + a[i];\n        } else {\n            dp[i][0] = max(dp[i - 1][0], dp[i - 1][1]) + a[i];\n            dp[i][1] = max(dp[i - 1][2], dp[i - 1][1]) - a[i];\n            dp[i][2] = dp[i - 1][2] + a[i];\n        }\n    }\n    printf(\"%lld\\n\", max(max(dp[n][0], dp[n][1]), dp[n][2]));\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include\"bits/stdc++.h\"\n\n\n#define PB push_back\n#define PF push_front\n#define LB lower_bound\n#define UB upper_bound\n#define fr(x) freopen(x,\"r\",stdin)\n#define fw(x) freopen(x,\"w\",stdout)\n#define iout(x) printf(\"%d\\n\",x)\n#define lout(x) printf(\"%lld\\n\",x)\n#define REP(x,l,u) for(int x = (l);x<=(u);x++)\n#define RREP(x,l,u) for(int x = (l);x>=(u);x--)\n#define mst(x,a) memset(x,a,sizeof(x))\n#define PII pair<int,int>\n#define PLL pair<ll,ll>\n#define MP make_pair\n#define se second\n#define fi first\n#define dbg(x) cout<<#x<<\" = \"<<(x)<<endl;\n#define sz(x) ((int)x.size())\n#define cl(x) x.clear()\n\ntypedef  long long ll;\ntypedef unsigned long long ull;\ntypedef double db;\ntypedef long double ld;\nusing namespace std;\n\nconst int maxn = 100010;\nconst int mod = 1e9+7;\nconst int MAX = 1000000010;\nconst double eps = 1e-6;\nconst double PI = acos(-1);\n\ntemplate<typename T> inline void read(T &x){\nx=0;T f=1;char ch;do{ch=getchar();if(ch=='-')f=-1;}while(ch<'0'||ch>'9');do x=x*10+ch-'0',ch=getchar();while(ch<='9'&&ch>='0');x*=f;\n}\n\ntemplate<typename A,typename B> inline void read(A&x,B&y){read(x);read(y);}\ntemplate<typename A,typename B,typename C> inline void read(A&x,B&y,C&z){read(x);read(y);read(z);}\ntemplate<typename A,typename B,typename C,typename D> inline void read(A&x,B&y,C&z,D&w){read(x);read(y);read(z);read(w);}\ntemplate<typename A,typename B> inline A fexp(A x,B p){A ans=1;for(;p;p>>=1,x=1LL*x*x%mod)if(p&1)ans=1LL*ans*x%mod;return ans;}\ntemplate<typename A,typename B> inline A fexp(A x,B p,A mo){A ans=1;for(;p;p>>=1,x=1LL*x*x%mo)if(p&1)ans=1LL*ans*x%mo;return ans;}\n\nint n,cnt;\n\nchar st[20];\n\nPLL A[maxn];\n\nll sm[maxn];\n\nvoid Work(){\n\tll ans=0;\n\tint x;read(x);ans+=x;\n\tbool ok=0;\n\tll pos,tot;\n\tREP(i,2,n){\n\t\tscanf(\"%s\",st);read(x);\n\t\tif(!ok){\n\t\t\tif(st[0]=='+')ans+=x;\n\t\t\telse{\n\t\t\t\tok=1;\n\t\t\t\tpos=x;tot=0;\n\t\t\t}\n\t\t}\n\t\telse{\n\t\t\tif(st[0]=='+')tot+=x;\n\t\t\telse{\n\t\t\t\tA[++cnt]=MP(pos,tot);\n\t\t\t\tpos=x;tot=0;\n\t\t\t}\n\t\t}\n\t}\n\tA[++cnt]=MP(pos,tot);\n\tll mx=0;\n\tREP(i,1,cnt)mx+=A[i].se-A[i].fi;\n\tRREP(i,cnt,1)sm[i]=sm[i+1]+A[i].fi+A[i].se;\n\tll now=0;\n\tREP(i,1,cnt){\n\t\tmx=max(mx,now+sm[i+1]-A[i].fi-A[i].se);\n\t\tnow+=A[i].se-A[i].fi;\n\t}\n\tcout<<mx+ans<<endl;\n}\n\nvoid Init(){\n\tread(n);\n}\n\nint main(){\n\tInit();\n\tWork();\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "//by yjz\n#include<bits/stdc++.h>\nusing namespace std;\n#define FF first\n#define SS second\n#define PB push_back\n#define MP make_pair\n#define bged(v) (v).begin(),(v).end()\n#define foreach(it,s) for(__typeof((s).begin()) it=(s).begin();it!=(s).end();it++)\ntypedef long long ll;\nconst int Imx=2147483647;\nconst ll Lbig=2e18;\nconst int mod=1e9+7;\n//My i/o stream\nstruct fastio\n{\n\tchar s[100000];\n\tint it,len;\n\tfastio(){it=len=0;}\n\tinline char get()\n\t{\n\t\tif(it<len)return s[it++];it=0;\n\t\tlen=fread(s,1,100000,stdin);\n\t\tif(len==0)return EOF;else return s[it++];\n\t}\n\tbool notend()\n\t{\n\t\tchar c=get();\n\t\twhile(c==' '||c=='\\n')c=get();\n\t\tif(it>0)it--;\n\t\treturn c!=EOF;\n\t}\n}_buff;\n#define geti(x) x=getnum()\n#define getii(x,y) geti(x),geti(y)\n#define getiii(x,y,z) getii(x,y),geti(z)\n#define puti(x) putnum(x),putchar(' ')\n#define putii(x,y) puti(x),puti(y)\n#define putiii(x,y,z) putii(x,y),puti(z)\n#define putsi(x) putnum(x),putchar('\\n')\n#define putsii(x,y) puti(x),putsi(y)\n#define putsiii(x,y,z) putii(x,y),putsi(z)\ninline ll getnum()\n{\n\tll r=0;bool ng=0;char c;c=_buff.get();\n\twhile(c!='-'&&(c<'0'||c>'9'))c=_buff.get();\n\tif(c=='-')ng=1,c=_buff.get();\n\twhile(c>='0'&&c<='9')r=r*10+c-'0',c=_buff.get();\n\treturn ng?-r:r;\n}\ntemplate<class T> inline void putnum(T x)\n{\n\tif(x<0)putchar('-'),x=-x;\n\tregister short a[20]={},sz=0;\n\twhile(x)a[sz++]=x%10,x/=10;\n\tif(sz==0)putchar('0');\n\tfor(int i=sz-1;i>=0;i--)putchar('0'+a[i]);\n}\ninline char getreal(){char c=_buff.get();while(c<=32)c=_buff.get();return c;}\nll qpow(ll x,ll k){return k==0?1:1ll*qpow(1ll*x*x%mod,k>>1)*(k&1?x:1)%mod;}\nll n,a[100111];\nint p[100111],pn;\nint main()\n{\n\tgeti(n);\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tchar op;\n\t\tif(i>1)op=getreal();\n\t\telse op='+';\n\t\tgeti(a[i]);\n\t\ta[i]+=a[i-1];\n\t\tif(op=='-')p[pn++]=i;\n\t}\n\tll s=0;\n\tll ans=-1e18;\n\tfor(int i=0;i<pn;i++)\n\t{\n\t\tif(i+1<pn)\n\t\t{\n\t\t\tans=max(ans,a[n]-(a[p[i+1]-1]-a[p[i]-1]+s)*2);\n\t\t}\n\t\ts+=a[p[i]]-a[p[i]-1];\n\t}\n\tans=max(ans,a[n]-s*2);\n\tcout<<ans<<endl;\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstdio>\n#define N 100005\n\nusing namespace std;\n\nint n;\nint val[N], func[N], nex[N];\nlong long sum[N];\n\ninline void read(int &x) {\n\tx = 0; char ch = getchar();\n\twhile(!isdigit(ch)) ch = getchar();\n\twhile(isdigit(ch)) x = x * 10 + ch - '0', ch = getchar();\n}\n\nint main() {\n\tread(n);\n\tread(val[1]), func[1] = 1;\n\tfor(int i = 2; i <= n; ++i) {\n\t\tfunc[i] = (getchar() == '+' ? 1 : -1);\n\t\tread(val[i]);\n//\t\tprintf(\"%d\\n\", func[i] * val[i]);\n\t}\n\t\n\tnex[n] = n + 1;\n\tfor(int i = n; i > 1; --i) {\n\t\tsum[i] = val[i] + sum[i + 1];\n\t\tnex[i - 1] = (func[i] == -1 ? i : nex[i]);\n\t}\n\t\n\tlong long ans, cur, res;\n\tans = -1e18, cur = val[1];\n\tfor(int i = 2; i <= n; ++i) {\n\t\tif(func[i] == -1) {\n\t\t\tres = cur - (sum[i] - sum[nex[i]]) + sum[nex[i]];\n\t\t\tif(res > ans) ans = res;\n\t\t}\n\t\tcur += func[i] * val[i];\n\t}\n\t\n\tif(cur > ans) ans = cur;\n\tcout << ans << endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "// includes {{{\n#include<iostream>\n#include<iomanip>\n#include<algorithm>\n#include<vector>\n#include<stack>\n#include<queue>\n#include<map>\n#include<set>\n#include<tuple>\n#include<cmath>\n#include<random>\n#include<cassert>\n// #include<deque>\n// #include<multiset>\n// #include<bitset>\n// #include<cstring>\n// #include<bits/stdc++.h>\n// }}}\nusing namespace std;\nusing ll = long long;\n\nconst int N = 1e5 + 1;\nint n;\nconst ll inf = 1e18;\n\nll dp[N][3];\n\nint a[N];\nint op[N];\n\n// smin, smax {{{\n// clang-format off\ntemplate < class T, class U > inline void smin(T &a, const U &b) { a = a < (T) b ? a : b; }\ntemplate < class T, class U > inline void smax(T &a, const U &b) { a = a < (T) b ? b : a; }\n// clang-format on\n// }}}\n\nint main() {\n  ios::sync_with_stdio(false), cin.tie(0);\n  cin >> n;\n  op[0] = 1;\n  for(int i = 0; i < n; i++) {\n    char t_op;\n    if(i) {\n      cin >> t_op;\n      op[i] = t_op == '-' ? -1 : 1;\n    }\n    cin >> a[i];\n  }\n\n  for(int i = 0; i < n; i++) for(int j = 0; j < 3; j++) dp[i][j] = -inf;\n\n  dp[0][0] = a[0];\n\n  for(int i = 1; i < n; i++) for(int j = 0; j < 3; j++) {\n    for(int k = 0; k <= j; k++) {\n      smax(dp[i][k], dp[i-1][j] + (j & 1 ? -1 : 1) * op[i] * a[i]);\n    }\n    if(op[i] == -1 && j <= 1) {\n      smax(dp[i][j + 1], dp[i-1][j] + (j & 1 ? -1 : 1) * op[i] * a[i]);\n    }\n  }\n  \n  // -(...-(...-(x)) - y - z\n\n  cout << dp[n-1][0] << endl;\n  return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "/*\nThough leaves are many , the root is one.\nThrough all the lying days of my youth\nI swayed my leaves and flowers in the sun.\nNow I may wither into the truth.\n\t  \t  \t- William Butler Yeats\n*/\n//#pragma GCC optimize(\"Ofast,no-stack-protector\")\n//#pragma GCC target(\"sse,sse2,sse3,ssse3,sse4,popcnt,abm,mmx\")\n//#pragma GCC target(\"avx,tune=native\")\n#include<bits/stdc++.h>\n#define int long long\n#pragma comment(\"-Wl,--stack=1024000000\")\n//#include<ext/pb_ds/assoc_container.hpp>\nusing namespace std;\n//using namespace __gnu_pbds;\nconst int inf=0x3f3f3f3f;\nconst double eps=1e-6;\nconst int mod=1000000007;\ntypedef long long ll;\n#ifndef LOCAL\n#define cerr if(0)cout\n#define eprintf(...) 0\n#else\n#define eprintf(...) fprintf(stderr, __VA_ARGS__)\n#endif\ninline string getstr(string &s,int l,int r){string ret=\"\";for(int i=l;i<=r;i++)ret.push_back(s[i]);return ret;}\nint modpow(int x,int y,int md=mod){if(y==0)return 1;int ret=modpow(x,y>>1,md);ret=(ll)ret*ret%md;if(y&1)ret=(ll)ret*x%md;return ret;}\nint n,a[100005];\nchar c[100005];\nint dp[100005][2];\nint suf[100005];\ninline int f(char x){\n\treturn x=='+'?1:-1;\n}\nsigned main(){\n\tcin>>n;cin>>a[1];\n\tfor(int i=2;i<=n;i++){\n\t\tcin>>c[i]>>a[i];\n\t}\n\tfor(int i=n;i>=1;i--)suf[i]=suf[i+1]+abs(a[i]);\n\tmemset(dp,0xf7,sizeof dp);\n\tdp[1][0]=a[1];\n\tfor(int i=2;i<=n;i++){\n\t\tdp[i][0]=max(dp[i-1][0]+f(c[i])*a[i],dp[i-1][1]+f(c[i])*a[i]);\n\t\tdp[i][1]=dp[i-1][1]-f(c[i])*a[i];\n\t\tif(c[i]=='-')dp[i][1]=max(dp[i][1],dp[i-1][0]+f(c[i])*a[i]);\n\t}\n\tll ans=dp[n][0];\n\tfor(int i=2;i<=n;i++)if(c[i]=='-')ans=max(ans,dp[i-1][1]+suf[i]);\n\tcout<<ans<<endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<stdio.h>\n#include<stdlib.h>\n#include<string.h>\n#include<math.h>\n#include<iostream>\n#include<algorithm>\n#include<stack>\n#include<queue>\n#include<vector>\n#include<set>\n#include<map>\n#include<string>\nusing namespace std;\ntypedef long long ll;\ntypedef pair<int,int>P;\nconst int INF=0x3f3f3f3f;\nconst double pi=acos(-1.0);\nconst double eps=1e-9;\nconst ll mod=1e9+7;\nll dp[100010][5];\nll a;char c;int n;\nint main()\n{\n    cin>>n>>a;\n    memset(dp,-0x3f3f3f3f3f3f3f3f,sizeof(dp));\n    dp[0][0]=a;\n    for(int i=1;i<n;i++)\n    {\n        scanf(\" %c%d\",&c,&a);\n        if(c=='+')\n        {\n            dp[i][2]=dp[i-1][2]+a;\n            dp[i][1]=max(dp[i-1][1]-a,dp[i-1][2]+a);\n            dp[i][0]=max(dp[i-1][0]+a,max(dp[i-1][1]-1,dp[i-1][2]+a));\n        }\n        else\n        {\n            dp[i][2]=dp[i-1][1]+a;\n            dp[i][1]=max(dp[i-1][1]+a,max(dp[i-1][2]-a,dp[i-1][0]-a));\n        }\n\n    }\n    printf(\"%lld\\n\",max(dp[n-1][0],max(dp[n-1][1],dp[n-1][2])));\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\ntemplate <class T>\ninline void read(T &res)\n{\n\tres = 0; bool bo = 0; char c;\n\twhile (((c = getchar()) < '0' || c > '9') && c != '-');\n\tif (c == '-') bo = 1; else res = c - 48;\n\twhile ((c = getchar()) >= '0' && c <= '9')\n\t\tres = (res << 3) + (res << 1) + (c - 48);\n\tif (bo) res = ~res + 1;\n}\n\ntemplate <class T>\ninline T Max(const T &a, const T &b) {return a > b ? a : b;}\n\ntypedef long long ll;\n\nconst int N = 2e5 + 5, M = 4e6 + 5;\n\nint n, a[N], add[N];\nchar s[M], op[N];\nll sum[N];\n\nvoid work()\n{\n\tint tot = 1, m; a[1] = 0;\n\tread(n); getline(s + 1);\n\tm = strlen(s + 1);\n\tfor (int i = 1; i <= m; i++)\n\t{\n\t\tif (s[i] == ' ') continue;\n\t\tif (s[i] == '+' || s[i] == '-') op[tot++] = s[i], a[tot] = 0;\n\t\telse a[tot] = a[tot] * 10 + s[i] - '0';\n\t}\n\tfor (int i = 1; i <= n; i++) sum[i] = sum[i - 1] + a[i];\n\tadd[n] = 0;\n\tfor (int i = n - 1; i >= 1; i--) add[i] = op[i] == '-' ? 0 : add[i + 1] + 1;\n\tll cur = a[1], ans = -1e18;\n\tfor (int i = 1; i < n; i++)\n\t\tif (op[i] == '-') ans = Max(ans, cur - (sum[i + 1 + add[i + 1]]\n\t\t\t- sum[i]) + sum[n] - sum[i + 1 + add[i + 1]]), cur -= a[i + 1];\n\t\telse cur += a[i + 1];\n\tprintf(\"%lld\\n\", Max(cur, ans));\n}\n\n\nint main()\n{\n\tT = 1;\n\twhile (T--) work();\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstdio>\n#include <cstring>\n#define N 100005\nusing namespace std;\ntypedef long long ll;\nint a[N],op[N],n;\nll f[N][3];\nint main(){\n\tscanf(\"%d\",&n);\n\tconst ll inf=1LL<<60;\n\tchar aa[2];\n\tfor(int i=1;i<=n;i++){\n\t\tif(i>1) scanf(\"%s\",aa);\n\t\telse aa[0]='+';\n\t\tscanf(\"%d\",&a[i]);\n\t\top[i]=aa[0]=='+'?1:-1;\n\t\tfor(int p=0;p<3;p++) f[i][p]=-inf;\n\t}\n\tf[0][2]=f[0][1]=-inf;\n\tfor(int i=1;i<=n;i++){\n\t\tf[i][2]=f[i-1][2]+a[i];\n\t\tif(op[i]==1){\n\t\t\tf[i][0]=max(f[i-1][0],f[i-1][1])+a[i];\n\t\t\tf[i][1]=f[i-1][1]-a[i];\n\t\t}else{\n\t\t\tf[i][0]=-inf;\n\t\t\tf[i][1]=f[i-1][0]-a[i];\n\t\t\tf[i][2]=max(f[i][2],f[i-1][1]+a[i]);\n\t\t}\n\t}\n\tprintf(\"%lld\",max(f[n][0],max(f[n][1],f[n][2])));\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <sstream>\n#include <vector>\n#include <set>\n#include <map>\n#include <unordered_map>\n#include <unordered_set>\n#include <algorithm>\n#include <queue>\n#include <deque>\n#include <stack>\n#include <iomanip>\n#include <cmath>\n\n\nusing namespace std;\n\n\ntypedef long long ll;\ntypedef long double ld;\n\n\nconst ll MOD_CONST = 1000000007ll;\n\n\nll modSum(ll a, ll b, ll MOD = MOD_CONST) {\n  return ((a % MOD) + (b % MOD)) % MOD;\n}\n\n\nll modSubtract(ll a, ll b, ll MOD = MOD_CONST) {\n  return (((a % MOD) - (b % MOD)) + MOD + MOD) % MOD;\n}\n\n\nll modProd(ll a, ll b, ll MOD = MOD_CONST) {\n  return ((a % MOD) * (b % MOD)) % MOD;\n}\n\n\nll getPowMod(ll x, ll e, ll MOD = MOD_CONST) {\n  if (e == 0) return 1;\n  if (e % 2 == 0) {\n    ll tmp = getPowMod(x, e/2, MOD);\n    return modProd(tmp, tmp);\n  } else {\n    ll tmp = getPowMod(x, e-1, MOD);\n    return modProd(tmp, x);\n  }\n}\n\n\nll getPow(ll x, ll e) {\n  if (e == 0) return 1;\n  if (e % 2 == 0) {\n    ll tmp = getPow(x, e/2);\n    return tmp * tmp;\n  } else {\n    ll tmp = getPow(x, e-1);\n    return tmp * x;\n  }\n}\n\n\nll getInverse(ll x, ll MOD = MOD_CONST) {\n  return getPowMod(x, MOD-2, MOD);\n}\n\n\nbool isEven(ll x) {\n  ll tmp = ((x % 2) + 2) % 2;\n  return tmp == 0;\n}\n\n\nll getSumOfDigitsInBase(ll n, ll b) {\n  ll ret = 0;\n  while (n > 0) {\n    ret += n % b;\n    n /= b;\n  }\n  return ret;\n}\n\n\nvector<int> getKMP(string &s) {\n  int len = (int)s.size();\n  vector<int> ret (len, 0);\n  for (int i = 1 ; i < len ; i++) {\n    int at = ret[i-1];\n    while (at > 0 && s[i] != s[at]) {\n      at = ret[at-1];\n    }\n    if (s[i] == s[at]) {\n      at++;\n    }\n    ret[i] = at;\n  }\n  return ret;\n}\n\n\nstring getSubstring(string &s, int from, int to) {\n  int l = to-from+1;\n  if (l <= 0) {\n    return \"\";\n  }\n  return s.substr(from, l);\n}\n\nll gcd(ll a, ll b, ll & x, ll & y) {\n    if (a == 0) {\n        x = 0;\n        y = 1;\n        return b;\n    }\n    ll x1, y1;\n    ll d = gcd(b % a, a, x1, y1);\n    x = y1 - (b / a) * x1;\n    y = x1;\n    return d;\n}\n\n\npair<ll, ll> getIntersectingRange(ll a1, ll b1, ll a2, ll b2) {\n  ll s = max(a1, a2);\n  ll e = min(b1, b2);\n\n  return {s, e};\n}\n\n\nbool isNonEmptyIntersection(ll a1, ll b1, ll a2, ll b2) {\n  auto p = getIntersectingRange(a1, b1, a2, b2);\n  return p.first <= p.second;\n}\n\n\ndouble getPointDistance(double x1, double y1, double x2, double y2) {\n  double dx = x1-x2;\n  double dy = y1-y2;\n  double d = (dx * dx) + (dy * dy);\n  return sqrt(d);\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst ll INF = 10000000000000000ll;\n\n\nint N;\n\n\nvoid input() {\n  cin >> N;\n}\n\n\nvoid preprocess() {\n}\n\n\nvoid solve() {\n  char sign;\n  ll nxt;\n  vector<ll> curMemo(3, -INF);\n  cin >> curMemo[0];\n  for (int i = 2 ; i <= N ; i++) {\n    vector<ll> nxtMemo(3, -INF);\n    cin >> sign  >> nxt; \n    if (sign == '+') {\n      nxtMemo[0] = max(nxtMemo[0], curMemo[0] + nxt);\n      nxtMemo[1] = max(nxtMemo[1], curMemo[1] - nxt);\n      nxtMemo[1] = max(nxtMemo[1], curMemo[2] - nxt);\n      nxtMemo[0] = max(nxtMemo[0], curMemo[1] + nxt);\n      nxtMemo[2] = max(nxtMemo[2], curMemo[2] + nxt);\n    } else {\n      nxtMemo[1] = max(nxtMemo[1], curMemo[0] - nxt);\n      nxtMemo[2] = max(nxtMemo[2], curMemo[1] + nxt);\n      nxtMemo[2] = max(nxtMemo[2], curMemo[2] + nxt);\n    }\n    curMemo = nxtMemo;\n  }\n  cout << max(curMemo[0], max(curMemo[1], curMemo[2]));\n}\n\n\nint main() {\n  ios::sync_with_stdio(0);\n  cin.tie(0);\n  cout.tie(0);\n  cerr.tie(0);\n\n  int T;\n//  cin >> T;\n  T = 1;\n\n  for (int i = 0 ; i < T ; i++) {\n    input();\n    preprocess();\n    solve();\n  }\n\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n// template {{{\n#define pb push_back\n#define eb emplace_back\n#define mp make_pair\n#define mt make_tuple\n#define lb lower_bound\n#define ub upper_bound\n#define f first\n#define s second\n#define resz resize\n\n#define sz(x) int((x).size())\n#define all(x) (x).begin(), (x).end()\n\n#define FOR(i, a, b) for (int i = (a); i < (b); i++)\n#define F0R(i, a) for (int i = 0; i < (a); i++)\n#define FORd(i, a, b) for (int i = (b)-1; i >= (a); i--)\n#define F0Rd(i, a) for (int i = (a)-1; i >= 0; i--)\n#define trav(a, x) for (auto& a : x)\n\n#define sort_by(x, y) sort(all(x), [&](const auto& a, const auto& b) { return y; })\n\nusing ll = long long;\nusing vi = vector<int>;\nusing vvi = vector<vi>;\nusing vll = vector<ll>;\nusing vvll = vector<vll>;\nusing vb = vector<bool>;\nusing vd = vector<double>;\nusing vs = vector<string>;\n\nusing pii = pair<int, int>;\nusing pll = pair<ll, ll>;\nusing pdd = pair<double, double>;\n\nusing vpii = vector<pii>;\nusing vvpii = vector<vpii>;\nusing vpll = vector<pll>;\nusing vvpll = vector<vpll>;\nusing vpdd = vector<pdd>;\nusing vvpdd = vector<vpdd>;\n\ntemplate<typename T> void ckmin(T& a, const T& b) { a = min(a, b); }\ntemplate<typename T> void ckmax(T& a, const T& b) { a = max(a, b); }\n\nmt19937_64 rng(chrono::steady_clock::now().time_since_epoch().count());\n\nnamespace __input {\n    template<class T1, class T2> void re(pair<T1,T2>& p);\n    template<class T> void re(vector<T>& a);\n    template<class T, size_t SZ> void re(array<T,SZ>& a);\n\n    template<class T> void re(T& x) { cin >> x; }\n    void re(double& x) { string t; re(t); x = stod(t); }\n    template<class Arg, class... Args> void re(Arg& first, Args&... rest) {\n        re(first); re(rest...);\n    }\n\n    template<class T1, class T2> void re(pair<T1,T2>& p) { re(p.f,p.s); }\n    template<class T> void re(vector<T>& a) { F0R(i,sz(a)) re(a[i]); }\n    template<class T, size_t SZ> void re(array<T,SZ>& a) { F0R(i,SZ) re(a[i]); }\n}\nusing namespace __input;\n\nnamespace __output {\n    template<class T1, class T2> void pr(const pair<T1,T2>& x);\n    template<class T, size_t SZ> void pr(const array<T,SZ>& x);\n    template<class T> void pr(const vector<T>& x);\n    template<class T> void pr(const deque<T>& x);\n    template<class T> void pr(const set<T>& x);\n    template<class T1, class T2> void pr(const map<T1,T2>& x);\n\n    template<class T> void pr(const T& x) { cout << x; }\n    template<class Arg, class... Args> void pr(const Arg& first, const Args&... rest) {\n        pr(first); pr(rest...);\n    }\n\n    template<class T1, class T2> void pr(const pair<T1,T2>& x) {\n        pr(\"{\",x.f,\", \",x.s,\"}\");\n    }\n    template<class T, bool pretty = true> void prContain(const T& x) {\n        if (pretty) pr(\"{\");\n        bool fst = 1; for (const auto& a: x) pr(!fst?pretty?\", \":\" \":\"\",a), fst = 0;\n        if (pretty) pr(\"}\");\n    }\n    template<class T> void pc(const T& x) { prContain<T, false>(x); pr(\"\\n\"); }\n    template<class T, size_t SZ> void pr(const array<T,SZ>& x) { prContain(x); }\n    template<class T> void pr(const vector<T>& x) { prContain(x); }\n    template<class T> void pr(const deque<T>& x) { prContain(x); }\n    template<class T> void pr(const set<T>& x) { prContain(x); }\n    template<class T1, class T2> void pr(const map<T1,T2>& x) { prContain(x); }\n\n    void ps() { pr(\"\\n\"); }\n    template<class Arg> void ps(const Arg& first) {\n        pr(first); ps();\n    }\n    template<class Arg, class... Args> void ps(const Arg& first, const Args&... rest) {\n        pr(first,\" \"); ps(rest...);\n    }\n}\nusing namespace __output;\n\n#define TRACE(x) x\n#define __pn(x) pr(#x, \" = \")\n#define pd(...) __pn((__VA_ARGS__)), ps(__VA_ARGS__), cout << flush\n\nnamespace __algorithm {\n    template<typename T> void dedup(vector<T>& v) {\n        sort(all(v)); v.erase(unique(all(v)), v.end());\n    }\n    template<typename T> typename vector<T>::iterator find(vector<T>& v, const T& x) {\n        auto it = lower_bound(all(v), x); return it != v.end() && *it == x ? it : v.end();\n    }\n    template<typename T> size_t index(vector<T>& v, const T& x) {\n        auto it = find(v, x); assert(it != v.end() && *it == x); return it - v.begin();\n    }\n    template<typename C, typename T, typename OP> vector<T> prefixes(const C& v, T id, OP op) {\n        vector<T> r(sz(v)+1, id); F0R (i, sz(v)) r[i+1] = op(r[i], v[i]); return r;\n    }\n    template<typename C, typename T, typename OP> vector<T> suffixes(const C& v, T id, OP op) {\n        vector<T> r(sz(v)+1, id); F0Rd (i, sz(v)) r[i] = op(v[i], r[i+1]); return r;\n    }\n}\nusing namespace __algorithm;\n\nstruct monostate {\n    friend istream& operator>>(istream& is, const __attribute__((unused))monostate& ms) { return is; }\n    friend ostream& operator<<(ostream& os, const __attribute__((unused))monostate& ms) { return os; }\n} ms;\n\ntemplate<typename W=monostate> struct wedge {\n    int u, v, i; W w;\n    wedge<W>(int _u=-1, int _v=-1, int _i=-1) : u(_u), v(_v), i(_i) {}\n    int operator[](int loc) const { return u ^ v ^ loc; }\n    friend void re(wedge& e) { re(e.u, e.v, e.w); --e.u, --e.v; }\n    friend void pr(const wedge& e) { pr(e.u, \"<-\", e.w, \"->\", e.v); }\n};\n\nnamespace __io {\n    void setIn(string s) { freopen(s.c_str(),\"r\",stdin); }\n    void setOut(string s) { freopen(s.c_str(),\"w\",stdout); }\n    void setIO(string s = \"\") {\n        ios_base::sync_with_stdio(0); cin.tie(0);\n        cout << fixed << setprecision(15);\n        if (sz(s)) { setIn(s+\".in\"), setOut(s+\".out\"); }\n    }\n}\nusing namespace __io;\n// }}}\n\nint main() {\n    setIO();\n\n    int N; re(N);\n\n    vi vals(N);\n    vb neg(N);\n\n    F0R (i, N) {\n        if (i) { char op; re(op); neg[i] = op == '-'; }\n        re(vals[i]);\n    }\n\n    vll suff = suffixes(vals, 0ll, plus<ll>());\n\n    ll ans = 0;\n\n    ll pref = 0, since = 0, lead = 0; bool seen = 0;\n    F0R (i, N) {\n        if (neg[i]) {\n            if (seen) {\n                ckmax(ans, pref - since + suff[i]);\n                pref += since - 2 * lead;\n            } else {\n                seen = 1;\n            }\n            since = lead = vals[i];\n        } else {\n            if (seen) since += vals[i];\n            else pref += vals[i];\n        }\n    }\n\n    ps(max(ans, pref + since - 2 * lead));\n\n    // did you check N=1? did you mix up N,M?\n    return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define time Time\n#define pii pair<int,int>    \n#define x first    \n#define y second \n#define N 10000005   \n#define pb(x) push_back(x)\n#define mp(x,y) make_pair((x),(y))    \n#define sqr(x) ((x)*(x))\ntypedef long long LL;  \nusing namespace std;\nconst int mod=1e9+7;\nint main(){\n\tint n;\n\twhile(scanf(\"%d\",&n)!=EOF){\n\t\tlong long \tint a[100005];\n\t\tint op[100005];\n\t\top[0]=1;\n\t\tscanf(\"%lld\",&a[0]);\n\t\tfor(int i=1;i<n;i++){\n\t\t\tchar c;\n\t\t\twhile(scanf(\"%c\",&c)&&c!='+'&&c!='-');\n\t\t\tif(c=='+')\n\t\t\top[i]=1;\n\t\t\telse\n\t\t\top[i]=0;\n\t\t\tscanf(\"%lld\",&a[i]);\n\t\t} \n\t\tlong long int sum=0;\n\t\tfor(int i=0;i<n;i++){\n\t\t\tsum+=a[i];\n\t\t}\n\t\tlong long int ans=1e18;\n\t\tint i;\n\t\tfor(i=0;op[i]==1;i++);\n\t\tint last=i;\n\t\tlong long int ssum=0,sssum=a[i];\n\t\tfor(;i<n;i++)\n\t\t{\n\t\t\tssum+=a[i];\n\t\t\tif(op[i+1]==0||i+1==n)\n\t\t\tans=min(ssum+sssum-a[last],ans),ssum=0,sssum+=a[i],last=i;\n\t\t}\n\t\tans=min(sssum-a[n-1],ans);\n\t\tprintf(\"%lld\\n\",sum-2*ans);\n\t}\n}\n/*\n\n 1 - 1 + 2 + 10 - 2 + 3  - 5\n\n*/\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n#define ff first\n#define ss second\n#define pb push_back\n#define pf push_front\n#define ppb pop_back()\n#define ppf pop_front()\n#define all(vec) vec.begin(), vec.end()\n#define fol(i,a,b) for(int i=a;i<b;i++)\n#define loop(i,a,b) for(int i=a;i>=b;i--)\n#define forr(x,arr) for(auto& x:arr)\n#define mod 1000000007\n#define INF 0x3f3f3f3f3f3f3f3f\n#define EPS 1e-7\n#define sz(x) ((lli)(x).size())\n\nusing   lli     =   long long;\nusing   lld     =   long double;\nusing   ulli    =   unsigned long long int;\nusing   pll     =   pair<lli, lli>;\nusing   ttt     =   pair<lli, pll>;\nusing   vttt    =   vector<ttt>;\nusing   vll     =   vector<pll>;\nusing   vl      =   vector<lli>;\nusing   vi      =   vector<int>;\nusing   vvi     =   vector<vector<int>>;\nusing   cd      =   complex<lld>;\nconst double PI = acos(-1);\n\n#ifndef tejasp\n#define trace(...) {}\n#define cotra(...) {}\n#define end_routine() {}\n#define localsys 0\n#define endl '\\n'\n#endif\n\nint tejas_919(int kkkk)\n{\n    lli n, m, k, q, u, v, temp=0, ans=0;\n    cin>>n;\n    int phase=1;\n    lli pref[n+5]={}, arr[n+5]={};\n    vi pos;\n    char ch='+';\n    fol(i,1,n+1)\n    {\n        if(i>1)\n        {\n            cin>>ch;\n            if(ch=='-') pos.pb(i);\n        }\n        cin>>arr[i];\n        pref[i]=pref[i-1]+arr[i];\n        if(ch=='+') ans+=arr[i];\n        else ans-=arr[i];\n    }\n    trace(pref,n+1)\n    fol(i,0,sz(pos)-1)\n    {\n        lli curans=0;\n        int cur=pos[i]-1, next=pos[i+1]-1;\n        trace(cur,next)\n        curans = pref[n]-(2LL*(pref[next]-pref[cur]));\n        ans=max(ans,curans);\n    }\n    \n    cout<<ans<<endl;\n    return 0;\n}\n\nsigned main()\n{\n    #ifdef tejasp\n            freopen(\"input.txt\", \"rt\", stdin);\n            freopen(\"output.txt\", \"wt\", stdout);\n    #endif\n    if(!localsys) { ios_base::sync_with_stdio(false);cin.tie(NULL);cout.tie(NULL); }\n    cout << fixed << setprecision(10);\n    int t=1;\n    //cin>>t;\n    fol(i,0,t) { tejas_919(i+1); }\n    end_routine();\n    if(localsys) system(\"pause\");\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n// template {{{\n#define pb push_back\n#define eb emplace_back\n#define mp make_pair\n#define mt make_tuple\n#define lb lower_bound\n#define ub upper_bound\n#define f first\n#define s second\n#define resz resize\n\n#define sz(x) int((x).size())\n#define all(x) (x).begin(), (x).end()\n\n#define FOR(i, a, b) for (int i = (a); i < (b); i++)\n#define F0R(i, a) for (int i = 0; i < (a); i++)\n#define FORd(i, a, b) for (int i = (b)-1; i >= (a); i--)\n#define F0Rd(i, a) for (int i = (a)-1; i >= 0; i--)\n#define trav(a, x) for (auto& a : x)\n\n#define sort_by(x, y) sort(all(x), [&](const auto& a, const auto& b) { return y; })\n\nusing ll = long long;\nusing vi = vector<int>;\nusing vvi = vector<vi>;\nusing vll = vector<ll>;\nusing vvll = vector<vll>;\nusing vb = vector<bool>;\nusing vd = vector<double>;\nusing vs = vector<string>;\n\nusing pii = pair<int, int>;\nusing pll = pair<ll, ll>;\nusing pdd = pair<double, double>;\n\nusing vpii = vector<pii>;\nusing vvpii = vector<vpii>;\nusing vpll = vector<pll>;\nusing vvpll = vector<vpll>;\nusing vpdd = vector<pdd>;\nusing vvpdd = vector<vpdd>;\n\ntemplate<typename T> void ckmin(T& a, const T& b) { a = min(a, b); }\ntemplate<typename T> void ckmax(T& a, const T& b) { a = max(a, b); }\n\nmt19937_64 rng(chrono::steady_clock::now().time_since_epoch().count());\n\nnamespace __input {\n    template<class T1, class T2> void re(pair<T1,T2>& p);\n    template<class T> void re(vector<T>& a);\n    template<class T, size_t SZ> void re(array<T,SZ>& a);\n\n    template<class T> void re(T& x) { cin >> x; }\n    void re(double& x) { string t; re(t); x = stod(t); }\n    template<class Arg, class... Args> void re(Arg& first, Args&... rest) {\n        re(first); re(rest...);\n    }\n\n    template<class T1, class T2> void re(pair<T1,T2>& p) { re(p.f,p.s); }\n    template<class T> void re(vector<T>& a) { F0R(i,sz(a)) re(a[i]); }\n    template<class T, size_t SZ> void re(array<T,SZ>& a) { F0R(i,SZ) re(a[i]); }\n}\nusing namespace __input;\n\nnamespace __output {\n    template<class T1, class T2> void pr(const pair<T1,T2>& x);\n    template<class T, size_t SZ> void pr(const array<T,SZ>& x);\n    template<class T> void pr(const vector<T>& x);\n    template<class T> void pr(const deque<T>& x);\n    template<class T> void pr(const set<T>& x);\n    template<class T1, class T2> void pr(const map<T1,T2>& x);\n\n    template<class T> void pr(const T& x) { cout << x; }\n    template<class Arg, class... Args> void pr(const Arg& first, const Args&... rest) {\n        pr(first); pr(rest...);\n    }\n\n    template<class T1, class T2> void pr(const pair<T1,T2>& x) {\n        pr(\"{\",x.f,\", \",x.s,\"}\");\n    }\n    template<class T, bool pretty = true> void prContain(const T& x) {\n        if (pretty) pr(\"{\");\n        bool fst = 1; for (const auto& a: x) pr(!fst?pretty?\", \":\" \":\"\",a), fst = 0;\n        if (pretty) pr(\"}\");\n    }\n    template<class T> void pc(const T& x) { prContain<T, false>(x); pr(\"\\n\"); }\n    template<class T, size_t SZ> void pr(const array<T,SZ>& x) { prContain(x); }\n    template<class T> void pr(const vector<T>& x) { prContain(x); }\n    template<class T> void pr(const deque<T>& x) { prContain(x); }\n    template<class T> void pr(const set<T>& x) { prContain(x); }\n    template<class T1, class T2> void pr(const map<T1,T2>& x) { prContain(x); }\n\n    void ps() { pr(\"\\n\"); }\n    template<class Arg> void ps(const Arg& first) {\n        pr(first); ps();\n    }\n    template<class Arg, class... Args> void ps(const Arg& first, const Args&... rest) {\n        pr(first,\" \"); ps(rest...);\n    }\n}\nusing namespace __output;\n\n#define TRACE(x) x\n#define __pn(x) pr(#x, \" = \")\n#define pd(...) __pn((__VA_ARGS__)), ps(__VA_ARGS__), cout << flush\n\nnamespace __algorithm {\n    template<typename T> void dedup(vector<T>& v) {\n        sort(all(v)); v.erase(unique(all(v)), v.end());\n    }\n    template<typename T> typename vector<T>::iterator find(vector<T>& v, const T& x) {\n        auto it = lower_bound(all(v), x); return it != v.end() && *it == x ? it : v.end();\n    }\n    template<typename T> size_t index(vector<T>& v, const T& x) {\n        auto it = find(v, x); assert(it != v.end() && *it == x); return it - v.begin();\n    }\n    template<typename C, typename T, typename OP> vector<T> prefixes(const C& v, T id, OP op) {\n        vector<T> r(sz(v)+1, id); F0R (i, sz(v)) r[i+1] = op(r[i], v[i]); return r;\n    }\n    template<typename C, typename T, typename OP> vector<T> suffixes(const C& v, T id, OP op) {\n        vector<T> r(sz(v)+1, id); F0Rd (i, sz(v)) r[i] = op(v[i], r[i+1]); return r;\n    }\n}\nusing namespace __algorithm;\n\nstruct monostate {\n    friend istream& operator>>(istream& is, const __attribute__((unused))monostate& ms) { return is; }\n    friend ostream& operator<<(ostream& os, const __attribute__((unused))monostate& ms) { return os; }\n} ms;\n\ntemplate<typename W=monostate> struct wedge {\n    int u, v, i; W w;\n    wedge<W>(int _u=-1, int _v=-1, int _i=-1) : u(_u), v(_v), i(_i) {}\n    int operator[](int loc) const { return u ^ v ^ loc; }\n    friend void re(wedge& e) { re(e.u, e.v, e.w); --e.u, --e.v; }\n    friend void pr(const wedge& e) { pr(e.u, \"<-\", e.w, \"->\", e.v); }\n};\n\nnamespace __io {\n    void setIn(string s) { freopen(s.c_str(),\"r\",stdin); }\n    void setOut(string s) { freopen(s.c_str(),\"w\",stdout); }\n    void setIO(string s = \"\") {\n        ios_base::sync_with_stdio(0); cin.tie(0);\n        cout << fixed << setprecision(15);\n        if (sz(s)) { setIn(s+\".in\"), setOut(s+\".out\"); }\n    }\n}\nusing namespace __io;\n// }}}\n\nint main() {\n    setIO();\n\n    int N; re(N);\n\n    vi vals(N);\n    vb neg(N);\n\n    F0R (i, N) {\n        if (i) { char op; re(op); neg[i] = op == '-'; }\n        re(vals[i]);\n    }\n\n    vll suff = suffixes(vals, 0ll, plus<ll>());\n\n    ll ans = 0;\n\n    ll pref = 0, since = 0, lead = 0; bool seen = 0;\n    F0R (i, N) {\n        if (neg[i]) {\n            if (seen) {\n                ckmax(ans, pref - since + suff[i]);\n                pref += since - 2 * lead;\n            } else {\n                seen = 1;\n            }\n            since = lead = vals[i];\n        } else {\n            if (seen) since += vals[i];\n            else pref += vals[i];\n        }\n    }\n\n    ps(ans);\n\n    // did you check N=1? did you mix up N,M?\n    return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long LL;\n\nconst int N=1e5+100;\nint n,a[N];\nchar op[N];\nLL f[N][3];\n\nvoid cmax(LL &x,LL y) {x=x>y?x:y;}\n\nint main()\n{\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;++i)\n\t{\n\t\tscanf(\"%d\",&a[i]); op[i]='!';\n\t\tif(i == n) break;\n\t\twhile(op[i] != '+' && op[i] != '-') op[i]=getchar();\n\t}\n\tmemset(f,0xcf,sizeof(f)); f[1][0]=a[1];\n\tfor(int i=1;i<n;++i)\n\t{\n\t\tif(op[i] == '-') cmax(f[i+1][1],f[i][0]-a[i+1]);\n\t\tif(op[i] == '+') cmax(f[i+1][0],f[i][0]+a[i+1]);\n\t\tif(op[i] == '-') cmax(f[i+1][0],f[i][0]-a[i+1]);\n\t\t\n\t\tif(op[i] == '+') cmax(f[i+1][1],f[i][1]-a[i+1]);\n\t\tif(op[i] == '-') cmax(f[i+1][1],f[i][1]+a[i+1]);\n\t\t//if(op[i] == '-') cmax(f[i+1][1],f[i][1]-a[i+1]);\n\t\tif(op[i] == '-') cmax(f[i+1][2],f[i][1]+a[i+1]);\n\t\tif(op[i] == '+') cmax(f[i+1][0],f[i][1]+a[i+1]);\n\t\tif(op[i] == '-') cmax(f[i+1][0],f[i][1]-a[i+1]);\n\t\t\n\t\tif(op[i] == '+') cmax(f[i+1][2],f[i][2]+a[i+1]);\n\t\t//if(op[i] == '-') cmax(f[i+1][2],f[i][2]-a[i+1]);\n\t\tif(op[i] == '-') cmax(f[i+1][2],f[i][2]+a[i+1]);\n\t\tif(op[i] == '+') cmax(f[i+1][0],f[i][2]+a[i+1]);\n\t\tif(op[i] == '-') cmax(f[i+1][0],f[i][2]-a[i+1]);\n\t\tif(op[i] == '-') cmax(f[i+1][1],f[i][2]-a[i+1]);\n\t}\n\tprintf(\"%lld\",max(f[n][0],max(f[n][1],f[n][2])));\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\nusing ll = long long;\n\nll a[100010], sum[100010];\n\nint main() {\n\tcin.tie(0);\n\tios::sync_with_stdio(false);\n\tint n;\n\tcin >> n;\n\tcin >> a[0];\n\tvector<int> minus;\n\tfor (int i = 1; i < n; i++) {\n\t\tchar op;\n\t\tcin >> op >> a[i];\n\t\tif (op == '-') minus.push_back(i);\n\t}\n\n\tfor (int i = n - 2; i >= 0; i--) {\n\t\tsum[i] = sum[i + 1] + a[i + 1];\n\t}\n\n\tll ans = 0, hoge = 0;\n\tif (minus.empty()) {\n\t\tfor (int i = 0; i < n; i++) {\n\t\t\tans += a[i];\n\t\t}\n\t} else {\n\t\tfor (int i = 0; i < minus.front(); i++) hoge += a[i];\n\t\tfor (int i = 0; i < minus.size(); i++) {\n\t\t\thoge -= a[minus[i]];\n\t\t\tif (i + 1 == minus.size()) {\n\t\t\t\thoge += sum[minus[i]];\n\t\t\t\tans = max(ans, hoge);\n\t\t\t} else {\n\t\t\t\tll tmp = sum[minus[i]] - sum[minus[i + 1] - 1];\n\t\t\t\tans = max(ans, hoge + sum[minus[i + 1] - 1] - tmp);\n\t\t\t\thoge += tmp;\n\t\t\t}\n\t\t}\n\t}\n\n\tcout << ans << endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<iostream>\n#define gmax(x, y) if ((y) > x) x = (y);\nusing namespace std;\ntypedef long long ll;\ninline char nc() {\n\tstatic char b[1<<12],*s=b,*t=b;\n\treturn s==t&&(t=(s=b)+fread(b,1,1<<12,stdin),s==t)?-1:*s++;\n}\ntemplate < class T >\ninline void read(T &x) {\n\tchar b = nc(); x = 0;\n\tfor (; !isdigit(b); b = nc());\n\tfor (; isdigit(b); b = nc()) x = x * 10 + b - '0';\n}\ninline ll read() {\n\tchar b = nc();\n\tfor (; b != '-' && b != '+'; b = nc());\n\treturn b == '-' ? -1 : 1;\n}\nint n;\nll f0, f1, f2;\nint main() {\n\tread(n); read(f0); f1 = f2 = -1e9;\n\tfor (int a, op, i = 1; i < n; ++i) {\n\t\top = read(); read(a);\n\t\tf0 += a * op; f1 -= a * op; f2 += a * op;\n\t\tif (op == -1) {\n\t\t\tgmax(f2, f1); gmax(f1, f0);\n\t\t} gmax(f1, f2); gmax(f0, f1);\n\t} printf(\"%lld\\n\", f0);\n\treturn 0;\t\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define N (100009)\n#define LL long long\nusing namespace std;\n\nLL n,a[N],f[N][3];\nchar opt[N][2];\n\nint main()\n{\n\tcin>>n;\n\tfor (int i=1; i<n; ++i)\n\t\tcin>>a[i]>>opt[i];\n\tcin>>a[n];\n\tf[1][0]=a[1]; f[1][1]=f[1][2]=-1e18;\n\tfor (int i=2; i<=n; ++i)\n\t\tif (opt[i-1][0]=='+')\n\t\t{\n\t\t\tf[i][0]=max(f[i-1][0],f[i-1][1])+a[i];\n\t\t\tf[i][1]=f[i-1][1]-a[i];\n\t\t\tf[i][2]=f[i-1][2]+a[i];\n\t\t}\n\t\telse\n\t\t{\n\t\t\tf[i][0]=-1e18;\n\t\t\tf[i][1]=max(f[i-1][0],f[i-1][1])-a[i];\n\t\t\tf[i][2]=max(f[i-1][1],f[i-1][2])+a[i];\n\t\t}\n\tcout<<max(f[n][0],max(f[n][1],f[n][2]))<<endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <stdio.h>\n#include <iostream>\n#include <algorithm>\n#include <memory.h>\n\nusing namespace std;\ntypedef long long LL;\nconst int maxn = 100005;\nconst LL inf = 1ll<<50;\n\nLL f[maxn][3];\nchar c[maxn][5];int n,a[maxn];\n\nint main()\n{\n\t#ifdef Amberframe\n\t\tfreopen(\"arc066c.in\",\"r\",stdin);\n\t\tfreopen(\"arc066c.out\",\"w\",stdout);\n\t#endif\n\tscanf(\"%d %d\",&n,&a[0]);\n\tfor (int i=1;i<n;i++)\n\t\tscanf(\"%s %d\",c[i],&a[i]);\n\tf[0][0]=a[0];f[0][1]=f[0][2]=-inf;\n\t\n\tfor (int i=1;i<n;i++)\n\tif (*c[i]=='-') {\n\t\tf[i][0]=-inf;\n\t\tf[i][1]=f[i-1][0]-a[i];\n\t\tf[i][2]=f[i-1][1]+a[i];\n\t\tf[i][1]=max(f[i][1],f[i][2]);\n\t\tf[i][0]=max(f[i][0],f[i][1]);\n\t}\n\telse {\n\t\tf[i][0]=f[i-1][0]+a[i];\n\t\tf[i][1]=f[i-1][1]-a[i];\n\t\tf[i][2]=f[i-1][2]+a[i];\n\t\tf[i][1]=max(f[i][1],f[i][2]);\n\t\tf[i][0]=max(f[i][0],f[i][1]);\n\t}\n\tprintf(\"%lld\",f[n-1][0]);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstdio>\n#include <cstring>\n#include <algorithm>\n#include <cmath>\n#include <queue>\n#include <stack>\n#include <map>\n#include <set>\n#include <vector>\n#include <iomanip>\n#define ALL(x) (x).begin(), (x).end()\n#define rt return\n#define dll(x) scanf(\"%I64d\",&x)\n#define xll(x) printf(\"%I64d\\n\",x)\n#define sz(a) int(a.size())\n#define all(a) a.begin(), a.end()\n#define rep(i,x,n) for(int i=x;i<n;i++)\n#define repd(i,x,n) for(int i=x;i<=n;i++)\n#define pii pair<int,int>\n#define pll pair<long long ,long long>\n#define gbtb ios::sync_with_stdio(false),cin.tie(0),cout.tie(0)\n#define MS0(X) memset((X), 0, sizeof((X)))\n#define MSC0(X) memset((X), '\\0', sizeof((X)))\n#define pb push_back\n#define mp make_pair\n#define fi first\n#define se second\n#define eps 1e-6\n#define gg(x) getInt(&x)\n#define db(x) cout<<\"== [ \"<<x<<\" ] ==\"<<endl;\nusing namespace std;\ntypedef long long ll;\nll gcd(ll a,ll b){return b?gcd(b,a%b):a;}\nll lcm(ll a,ll b){return a/gcd(a,b)*b;}\nll powmod(ll a,ll b,ll MOD){ll ans=1;while(b){if(b%2)ans=ans*a%MOD;a=a*a%MOD;b/=2;}return ans;}\ninline void getInt(int* p);\nconst int maxn=1000010;\n// const int inf=0x3f3f3f3f;\n/*** TEMPLATE CODE * * STARTS HERE ***/\nint n;\nchar op[maxn];\nint a[maxn];\nll dp[maxn/10][4];\nconst ll inf=(ll)(1e18);\n\nint main()\n{\n    //freopen(\"D:\\\\common_text\\\\code_stream\\\\in.txt\",\"r\",stdin);\n    //freopen(\"D:\\\\common_text\\\\code_stream\\\\out.txt\",\"w\",stdout);\n    gbtb;\n    cin>>n;\n    cin>>a[1];\n    repd(i,2,n)\n    {\n        cin>>op[i]>>a[i];\n    }\n    dp[1][0]=a[1];\n    dp[1][1]=dp[1][2]=-inf;\n    repd(i,2,n)\n    {\n        if(op[i]=='+')\n        {\n            dp[i][0]=max(dp[i-1][0],max(dp[i-1][2],dp[i-1][1]))+a[i];\n            dp[i][1]=dp[i-1][1]-a[i];\n            dp[i][2]=dp[i-1][2]+a[i];\n        }else\n        {\n            dp[i][0]=-inf;\n            dp[i][1]=max(dp[i-1][0],dp[i-1][1])-a[i];\n            dp[i][2]=max(dp[i-1][2],dp[i-1][1])+a[i];\n        }\n    }\n    cout<<max(dp[n][0],max(dp[n][1],dp[n][2]))<<endl;\n    \n    return 0;\n    \n}\n\ninline void getInt(int* p) {\n    char ch;\n    do {\n        ch = getchar();\n    } while (ch == ' ' || ch == '\\n');\n    if (ch == '-') {\n        *p = -(getchar() - '0');\n        while ((ch = getchar()) >= '0' && ch <= '9') {\n            *p = *p * 10 - ch + '0';\n        }\n    }\n    else {\n        *p = ch - '0';\n        while ((ch = getchar()) >= '0' && ch <= '9') {\n            *p = *p * 10 + ch - '0';\n        }\n    }\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include<deque>\n#include<queue>\n#include<vector>\n#include<algorithm>\n#include<iostream>\n#include<set>\n#include<cmath>\n#include<tuple>\n#include<string>\n#include<chrono>\n#include<functional>\n#include<iterator>\n#include<random>\n#include<unordered_set>\n#include<unordered_map>\n#include<array>\n#include<map>\n#include<bitset>\n#include<iomanip>\n#include<list>\n#include <numeric>\nusing namespace std;\ntypedef unsigned long long int ulint;\ntypedef long long int llint;\ntypedef long double lldo;\n#define mp make_pair\n#define mt make_tuple\n#define pub push_back\n#define puf push_front\n#define pob pop_back\n#define pof pop_front\n#define fir first\n#define sec second\n#define res resize\n#define ins insert\n#define era erase\n#define RE return 0\n//ios::sync_with_stdio(false);\n//std::cin.tie(0);\n//<< setprecision(20)\nconst int mod=(int)1e9+7;\nconst llint big=(llint)(2.19e15)+1;\nconst long double pai=3.141592653589793238462643383279502884197;\nconst long double ena=2.71828182845904523536;\nconst long double eps=1e-7;\n\ntemplate <class T,class U>bool mineq(T& a,U b){if(a>b){a=b;return true;}return false;}\ntemplate <class T,class U>bool maxeq(T& a,U b){if(a<b){a=b;return true;}return false;}\ntemplate <class T> void soun(T& ar)\n{sort(ar.begin(),ar.end());ar.erase(unique(ar.begin(),ar.end()),ar.end());}\nllint gcd(llint a,llint b){if(a%b==0){return b;}else{return gcd(b,a%b);}}\nllint lcm(llint a,llint b){return a/gcd(a,b) *b;}\ntemplate<class T,class U> auto LB(T& ve,U in){return lower_bound(ve.begin(),ve.end(),in);}\ntemplate<class T,class U> auto UB(T& ve,U in){return upper_bound(ve.begin(),ve.end(),in);}\ntemplate<class T,class U> auto LBI(T& ve,U in){return LB(ve,in)-ve.begin();}\ntemplate<class T,class U> auto UBI(T& ve,U in){return UB(ve,in)-ve.begin();}\ntemplate<class T> void SO(T& ve){sort(ve.begin(),ve.end());}\ntemplate<class T> void REV(T& ve){reverse(ve.begin(),ve.end());}\n\nint main(void){\n\tint n,i;cin>>n;\n\tllint dp,ep=-big,fp=-big;cin>>dp;\n\tbool mai=true;\n\tfor(i=1;i<n;i++){\n\t\tchar c;cin>>c;\n\t\tllint a;cin>>a;\n\t\tif(c=='-'){\n\t\t\tmaxeq(fp,ep);\n\t\t\tmaxeq(ep,dp);\n\t\t\tdp-=a;\n\t\t\tep-=a;\n\t\t\tfp+=a;\n\t\t}else{\n\t\t\tdp+=a;\n\t\t\tep-=a;\n\t\t\tfp+=a;\n\t\t}\n\t}\n\tmaxeq(fp,dp);\n\tcout<<fp<<endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <cstdlib>\n#include <algorithm>\n#include <iostream>\n#include <vector>\n#include <cstring>\n#include <string>\n#include <cassert>\n\nusing namespace std;\n\nconst int N = 1e5 + 7;\nconst long long INF = 1LL << 60;\nint n;\nint a[N];\nchar sign[N];\nlong long base = 0;\n\nint main() {\n\tscanf(\"%d\", &n);\n\tcin >> base;\n\tlong long all = 0;\n\tfor (int i = 1; i < n; i++) {\n\t\tchar buffer[10];\n\t\tscanf(\"%s %d\", buffer, &a[i]);\n\t\tsign[i] = buffer[0];\n\t\tall += a[i];\n\t}\n\tlong long ans = -INF;\n\tfor (int i = 1; i < n; i++) {\n\t\tif (sign[i] == '-') {\n\t\t\tlong long middle = 0;\n\t\t\tint j;\n\t\t\tfor (j = i + 1; j < n; j++) {\n\t\t\t\tif (sign[j] == '-') {\n\t\t\t\t\tbreak;\n\t\t\t\t} else {\n\t\t\t\t\tmiddle += a[j];\n\t\t\t\t}\n\t\t\t}\n\t\t\tans = max(ans, all - 2 * a[i] - 2 * middle + base);\n\t\t\tbase -= a[i];\n\t\t} else {\n\t\t\tbase += a[i];\n\t\t}\n\t\tall -= a[i];\n\t}\n\tcout << max(base, ans) << endl;\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n#define LL long long\ninline int read(){\n\tint x=0,f=1;\n\tchar ch=getchar();\n\twhile (ch<'0' || ch>'9'){\n\t\tif (ch=='-') f=-1;\n\t\tch=getchar();\n\t}\n\twhile (ch>='0' && ch<='9'){\n\t\tx=x*10+ch-'0';ch=getchar();\n\t}\n\treturn x*f;\n}\nsigned main(){\n\tint n=read();\n\tx=0,y=z=-10000000000000ll;\n\tfor (int i=1;i<=n;++i){\n\t\tLL p=read();x+=p;y-=p;z+=p;\n\t\tif (p<0){\n\t\t\tz=max(y,z);y=max(x,y);\n\t\t}\n\t\tx=max(x,y);y=max(y,z);\n\t}\n\tcout<<x<<endl;\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define ll long long\nusing namespace std;\nconst int N=100010,oo=1e9;\nint n;\nll ans=0,f[N][3];\nint a[N],tot[N];\nbool b[N];\nint main(){\n//\tfreopen(\"in.txt\",\"r\",stdin);\n\tchar c;\n\tscanf(\"%d\",&n);\n\tb[1]=1;\n\tfor(int i=1;i<=n;i++){\n\t\ttot[i]=tot[i-1];\n\t\tif(i>=2){\n\t\t\tscanf(\" %c\",&c);\n\t\t\tif(c=='+') b[i]=1;\n\t\t\telse tot[i]++;\n\t\t}\n\t\tscanf(\"%d\",&a[i]);\n\t}\n\tfor(int i=1;i<=n;i++){\n\t\t\tif(b[i]){\n\t\t\t\tf[i][0]=max(f[i-1][0],max(f[i-1][1],f[i-1][2]))+a[i];\n\t\t\t\tf[i][1]=max(f[i-1][1]-a[i],f[i-1][2]+a[i]);\n\t\t\t\tf[i][2]=f[i-1][2]+a[i];\n\t\t\t}else{\n\t\t\t\tf[i][0]=max(f[i-1][0],max(f[i-1][1],f[i-1][2]))-a[i];\n\t\t\t\tf[i][1]=max(f[i-1][0]-a[i],max(f[i-1][1]+a[i],f[i-1][2]-a[i]));\n\t\t\t\tf[i][2]=max(f[i-1][1]+a[i],f[i-1][2]-a[i]);\n\t\t\t}\n\t\t\tif(tot[i]<2) f[i][2]=-oo;\n\t\t\tif(tot[i]<1) f[i][1]=-oo;\n\t}\n//\tfor(int i=1;i<=n;i++){\n//\t\tcout<<f[i][0]<<\" \";\n//\t}\n//\tcout<<endl;\n//\tfor(int i=1;i<=n;i++){\n//\t\tcout<<f[i][1]<<\" \";\n//\t}\n//\tcout<<endl;\n//\tfor(int i=1;i<=n;i++){\n//\t\tcout<<f[i][2]<<\" \";\n//\t}\n//\tcout<<endl;\n\tans=max(f[n][0],max(f[n][1],f[n][2]));\n\tcout<<ans;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "// IOI 2021\n#include <bits/stdc++.h>\nusing namespace std;\n\n#define int ll\n#define endl '\\n'\n#define ends ' '\n#define die(x) return cout << x << endl, 0\n#define all(v) v.begin(), v.end()\n#define sz(x) (int)(x.size())\nvoid debug_out() { cerr << endl; }\ntemplate <typename Head, typename... Tail>\nvoid debug_out(Head H, Tail... T) { cerr << ends << H; debug_out(T...); }\n#define debug(...) cerr << \"{\" << #__VA_ARGS__ << \"}:\", debug_out(__VA_ARGS__)\ntypedef long long ll;\ntypedef pair<int, int> pii;\nconst ll INF = 1e15;\nconst ll MOD = 1e9 + 7;\n \n////////////////////////////////////////////////////////////////////\n\nconst int N = 1e5 + 5, M = 3;\n\nint A[N], DP[N][M];\nbool P[N];\n\nint Sign(int i) { return i & 1 ? -1 : 1; }\n\nint32_t main() {\n\n\tios::sync_with_stdio(0), cin.tie(0), cout.tie(0);\n\tmt19937 Rnd(time(0));\n\n\tfor (int i = 0; i < N; i++) for (int j = 0; j < M; j++) DP[i][j] = -INF;\n\tint n; cin >> n;\n\tfor (int i = 0; i < n; i++) {\n\t\tif (i) {\n\t\t\tchar c; cin >> c;\n\t\t\tP[i] = (c == '+');\n\t\t}\n\t\tcin >> A[i];\n\t}\n\tDP[0][0] = A[0];\n\tfor (int i = 1; i < n; i++) for (int j = M - 1; j >= 0; j--) {\n\t\tif (P[i]) DP[i][j] = DP[i - 1][j] + A[i] * Sign(j);\n\t\telse if (j) DP[i][j] = DP[i - 1][j - 1] + A[i] * Sign(j);\n\t\tif (j + 1 < M) DP[i][j] = max(DP[i][j], DP[i][j + 1]);\n\t}\n\tcout << DP[n - 1][0] << endl;\n\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstdio>\n#include <algorithm>\n#include <vector>\n#include <stack>\n#include <queue>\n#include <map>\n#include <set>\n#include <string>\n#include <cstring>\n#include <bitset>\n#define ll long long\n#define rep(x,n) for(ll (x)=0;(x)<n;(x)++)\n#define rep1(x,n) for(ll (x)=1;(x)<=n;(x)++)\n#define ios::sync_with_stdio(0);\n#define lson(x) ((x)<<1)\n#define rson(x) ((x)<<1|1)\nusing namespace std;\n\nconst ll N=100010;\nll a[N],per[N];\nvector<ll> sub;\n\nint main()\n{\n    #ifdef LOCAL\n        //freopen(\"C_data.txt\",\"r\",stdin);\n    #endif // LOCAL\n    ll n;\n    ll\n    cin>>n>>a[0];\n    per[0]=a[0];\n    ll abssum=a[0],ans=a[0];\n    char op;\n    for(ll j=1;j<n;j++)\n    {\n        cin>>op>>a[j];\n        per[j]=per[j-1]+a[j];\n        abssum+=a[j];\n        if(op=='+') ans+=a[j];\n        else\n        {\n            ans-=a[j];\n            sub.push_back(j);\n        }\n    }\n    for(ll j=0;j<sub.size()-1;j++)\n    {\n        ll p1=sub[j],p2=sub[j+1];\n        ll t=abssum-=(per[p2-1]-per[p1-1])*2;\n        ans=max(ans,t);\n        abssum-=a[p1]*2;\n    }\n    cout<<ans<<endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define rep(i,n) for(int i = 0; i < n; i++)\nusing namespace std;\ntypedef long long ll;\ntypedef pair<ll,ll> P;\n \nconst double EPS = 1e-10;\nconst ll INF = 100000000;\nconst ll MOD = 1000000007;\n\nint n;\nll a[100000];\nchar c[100000];\n\nint main() {\n    cin >> n;\n    rep(i,n) {\n        if (i == 0) cin >> a[i];\n        else cin >> c[i-1] >> a[i];\n    }\n    ll ans = 0;\n    bool head = true;\n    ll sum = 0;\n    ll mcnt = INF*INF;\n    ll pm = 0;\n    rep(i,n) sum += a[i];\n    rep(i,n-1) {\n        if (c[i] == '+') {\n            mcnt += a[i+1];\n        } else {\n            if (!head) ans = max(ans, sum-mcnt*2);\n            head = false;\n            mcnt = a[i+1];\n            sum -= pm*2;\n            pm = a[i+1];\n        }\n    }\n    if (head) ans = sum;\n    cout << max(ans, sum-mcnt*2) << endl;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\ntypedef signed long long ll;\n\n#undef _P\n#define _P(...) (void)printf(__VA_ARGS__)\n#define FOR(x,to) for(x=0;x<(to);x++)\n#define FORR(x,arr) for(auto& x:arr)\n#define ITR(x,c) for(__typeof(c.begin()) x=c.begin();x!=c.end();x++)\n#define ALL(a) (a.begin()),(a.end())\n#define ZERO(a) memset(a,0,sizeof(a))\n#define MINUS(a) memset(a,0xff,sizeof(a))\n//-------------------------------------------------------\n\nint N;\nll A[101010];\nll S[101010];\n\nll O[101010];\nll ret=0;\n\nll mi[101010],ma[101010];\nint nex[101010],nex2[101010];\nvoid solve() {\n\tint i,j,k,l,r,x,y; string s;\n\t\n\tcin>>N;\n\tcin>>A[0];\n\tFOR(i,N-1) {\n\t\tcin>>s>>A[i+1];\n\t\tO[i+1]=(s[0]=='+') ? 1 : -1;\n\t}\n\tFOR(i,N) S[i+1]=S[i]+A[i];\n\tnex[N]=N;\n\tnex[N-1]=N;\n\tfor(i=N-2;i>=0;i--) {\n\t\tif(O[i+1]==-1) nex[i]=i+1;\n\t\telse nex[i]=nex[i+1];\n\t}\n\t\n\tif(N==1) return _P(\"%lld\\n\",A[0]);\n\tif(N==2) return _P(\"%lld\\n\",A[0]+O[1]*A[1]);\n\tmi[N-1]=ma[N-1]=A[N-1];\n\tfor(i=N-2;i>=0;i--) {\n\t\tif(O[i+1]==1) {\n\t\t\tma[i]=A[i]+ma[i+1];\n\t\t\tmi[i]=A[i]+mi[i+1];\n\t\t}\n\t\telse {\n\t\t\tma[i]=max(A[i]-A[i+1]+ma[i+2],A[i]-A[i+1]-mi[i+2]);\n\t\t\tma[i]=max(ma[i],A[i]-mi[i+1]);\n\t\t\tmi[i]=min(A[i]-A[i+1]-ma[i+2],A[i]-A[i+1]+mi[i+2]);\n\t\t\tmi[i]=min(mi[i],A[i]-ma[i+1]);\n\t\t\tif(nex[i+1]<N) {\n\t\t\t\tmi[i]=min(mi[i],A[i]-(S[nex[i+1]]-S[i+1])-mi[nex[i+1]]);\n\t\t\t}\n\t\t}\n\t\t\n\t\t//_P(\"%d %lld %lld\\n\",i,ma[i],mi[i]);\n\t}\n\tcout<<ma[0]<<endl;\n\t\n}\n\n\nint main(int argc,char** argv){\n\tstring s;int i;\n\tif(argc==1) ios::sync_with_stdio(false), cin.tie(0);\n\tFOR(i,argc-1) s+=argv[i+1],s+='\\n';\n\tFOR(i,s.size()) ungetc(s[s.size()-1-i],stdin);\n\tsolve(); return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\nstruct _IO{_IO(){ios::sync_with_stdio(0);cin.tie(0);}}_io;\n\ntypedef long long ll;\ntypedef long double db;\ntypedef unsigned long long ull;\ntypedef vector<int> vi;\ntypedef pair<int, int> pi;\ntypedef tuple<int, int, int> t3;\ntypedef map<int, int> mi;\n#define fi first\n#define se second\n#define vt vector\n#define be begin()\n#define ed end()\n#define sz size()\n#define cl clear()\n#define pb push_back\n#define eb emplace_back\n#define is insert\n#define all(x) x.begin(), x.end()\n#define lb(v, x) lower_bound(v.begin(), v.end(), x)\n#define lbi(v, x) (lb(v, x) - v.begin())\n#define tp(t, x, y) t x, y; tie(x, y)\n#define tp3(t, x, y, z) t x, y, z; tie(x, y, z)\n#define mp make_pair\n#define mt make_tuple\n#define co const\n#define fc(x) for(int x = 1, _end = ri(); x <= _end; x++)\nvoid uni(vi &v) { sort(v.begin(), v.end()); v.erase(unique(v.begin(), v.end()), v.end()); }\n\ndb rd() { db x; cin >> x; return x; }\nll ri() { ll x; cin >> x; return x; }\nstring rs() { string s; cin >> s; return s; }\npi rpi() { pi x; cin >> x.fi >> x.se; return x; }\nvi rvi(int n, int f = 0) { vi v(n + f); for (int i = f; i < v.size(); i++) cin >> v[i]; return v; }\nvoid pr() {}; template <class T, class ...U> void pr(T x, U ...y) { cout << x << ' ', pr(y...); }\nvoid prl() { cout << '\\n'; }; template <class T, class ...U> void prl(T x, U ...y) { cout << x << ' ', prl(y...); }\nvoid pr(const vi &v, int f = 0) { for (int i = f; i < v.size(); i++) cout << v[i] << ' '; }\nvoid prl(const vi &v, int f = 0) { pr(v, f); cout << '\\n'; }\nvoid kk() { cerr << endl; }; template <class T, class ...U> void kk(T x, U ...y) { cerr << x << ' ', prl(y...); }\n\n#define rep(i, l, r) for (int i = (l); i < (r); ++i)\n#define per(i, l, r) for (int i = (l); i >= (r); --i)\n\nconst int N = 3e5 + 5, M = 1e9 + 7;\nint main() {\n  int n = ri(), lst = 0;\n  vi a;\n  rep(i, 0, n) {\n    int flg = 1;\n    if (i) flg = rs() == \"+\";\n    int x = ri();\n    if (flg) lst += x;\n    else a.pb(lst), a.pb(-x), lst = 0;\n  }\n  if (lst) a.pb(lst);\n  vt<ll> b(a.sz + 1);\n  rep(i, 0, a.sz) {\n    b[i+1] = b[i] + a[i];\n  }\n  ll ans = b[a.sz], sum = abs(a.back());\n  per(i, a.sz - 1, 1) {\n    if (a[i-1] > 0) sum += a[i-1];\n    else {\n      if (a[i] > 0) ans = max(ans, sum - 2 * a[i] + a[i-1] + b[i-1]);\n      else ans = max(ans, sum + a[i-1] + b[i-1]);\n      sum -= a[i-1];\n    }\n  }\n  prl(ans);\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <algorithm>\n\nusing namespace std;\n\n#define REP(i,n)   for(int i=0; i<(int)(n); i++)\n#define FOR(i,b,e) for(int i=(b); i<=(int)(e); i++)\n#define DUMP2D(a, n, m) REP(i, n) REP(j, m) printf(\"%lld%c\", a[i][j], j + 1 == m ? '\\n' : ' '); puts(\"\")\n\ntypedef long long ll;\n\nconst int N_MAX = 100000;\nconst ll INF = 1e15;\n\nint N;\nint A[N_MAX];\nint op[N_MAX];\nll dp[N_MAX + 1][50];\n\nvoid solve() {\n  fill(dp[0], dp[N + 1], -INF);\n  fill(dp[0], dp[1], 0);\n  int m = 1;\n  REP(i, N) {\n    REP(j, m) {\n      int k = j + op[i];\n      int f = (k % 2 == 0 ? 1 : -1);\n      dp[i + 1][j] = max(dp[i + 1][j], dp[i][j] + A[i] * f);\n      if (op[i] > 0) {\n        dp[i + 1][j + 1] = max(dp[i + 1][j + 1], dp[i][j] + A[i] * f);\n      }\n      if (j > 0) {\n        dp[i + 1][j - 1] = max(dp[i + 1][j - 1], dp[i][j] + A[i] * -f);\n      }\n    }\n    if (i + 1 < N) m += op[i];\n  }\n\n  // DUMP2D(dp, N + 1, 5);\n\n  ll ans = -INF;\n  REP(j, m) ans = max(ans, dp[N][j]);\n  printf(\"%lld\\n\", ans);\n}\n\nvoid input() {\n  scanf(\"%d\", &N);\n  REP(i, N) {\n    scanf(\"%d\", A + i);\n    if (i + 1 < N) {\n      char buf[2];\n      scanf(\"%s\", buf);\n      op[i + 1] = buf[0] == '-' ? 1 : 0;\n    }\n  }\n}\n\nint main() {\n  input();\n  solve();\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <algorithm>\n#include <cstring>\n#include <set>\n#include <iostream>\n#include <stack>\n#include <vector>\n#include <string>\n#include <map>\n#include <cmath>\n#include <queue>\n#include <random>\n#include <chrono>\nusing namespace std;\n\nconst int maxn = 1e5 + 5;\n\nint a[maxn];\n\ntypedef long long LL;\nLL suf[maxn], suf1[maxn];\nint n;\nint op[maxn];\nint nxt[maxn];\nint main(){\n    ios::sync_with_stdio(false);\n    cin >> n;\n    string s;\n    for(int i = 1;i <= n;i++){\n        if(i != 1){\n            cin >> s;\n            if(s[0] == '-'){\n                op[i] = 0;\n            }else{\n                op[i] = 1;\n            }\n        }\n        cin >> a[i];\n    }\n    op[1] = 1;\n    suf[n + 1] = 0;\n    suf1[n + 1] = 0;\n    for(int i = n;i >= 1;i--){\n        suf[i] = suf[i + 1] + a[i];\n        if(op[i] == 0)\n            suf1[i] = suf1[i + 1] - a[i];\n        else\n            suf1[i] = suf1[i + 1] + a[i];\n        //cout << suf[i] << \" \" << suf1[i] << endl;\n    }\n    int j = n + 1;\n    for(int i = n;i >= 1;i--){ nxt[i] = j;\n        if(op[i] == 0){\n            j = i;\n        }\n    }\n    long long ans = 0;\n    for(int i = 1;i <= n;i++){\n        if(op[i] == 1)\n            ans += a[i];\n        else\n            ans -= a[i];\n    }\n    for(int i = 1;i <= n;i++){\n        if(op[i] == 1)\n            continue;\n        long long tmp = suf1[1] - suf1[i + 1];\n        long long tmp1 = suf1[i + 1] - suf1[nxt[i]];\n        long long tmp2 = suf[nxt[i]];\n        ans = max(ans, tmp - tmp1 + tmp2);\n    }\n    cout << ans << endl;\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define ll long long\n#define N 100010\nusing namespace std;\n\nll f[N],g[N],a[N];\nchar op,lst;\n\nint main(){\n\tint n,x,y=0,i,cnt=0;\n\tcin>>n;\n\tll ans=0;\n\tfor(i=1;i<=n;++i){\n\t\tcin>>x;lst=op;\n\t\tif(i<n) cin>>op;\n\t\tif(lst=='-'){\n\t\t\tx=-x;\n\t\t\ta[++cnt]=x;\n\t\t}\n\t\tif(y<=0 && x>0) cnt++,a[cnt]=x;\n\t\tif(y>0 && x>0) a[cnt]+=x;\n\t\ty=x;\n\t} f[1]=a[1];\n\tfor(i=cnt;i>=1;--i) g[i]=g[i+1]+abs(a[i]);\n\tfor(i=2;i<=cnt;++i) f[i]=f[i-1]+a[i];\n\tans=f[cnt];\n\tfor(i=1;i<cnt;++i)\n\t\tif(a[i+1]<0) ans=max(ans,f[i+1]-a[i+2]+g[i+3]);\n \tcout<<ans; \n} "
  },
  {
    "language": "C++",
    "code": "/*input\n5\n1 - 20 - 13 + 14 - 5\n*/\n#include<bits/stdc++.h>\n#include <ext/pb_ds/assoc_container.hpp>\n#include <ext/pb_ds/tree_policy.hpp>\nusing namespace std;\nusing namespace __gnu_pbds;\n\n#define int long long \n#define double long double\n#define f first\n#define s second\n#define mp make_pair\n#define pb push_back\n\n#define RE(i,n) for (int i = 1; i <= n; i++)\n#define RED(i,n) for (int i = n; i > 0; i--)\n#define REPS(i,n) for(int i = 1; (i*i) <= n; i++)\n#define REP(i,n) for (int i = 0; i < (int)n; i++)\n#define FOR(i,a,b) for (int i = a; i < b; i++)\n#define REPD(i,n) for (int i = n-1; i >= 0; i--)\n#define FORD(i,a,b) for (int i = a; i >= b; i--)\n\n#define all(v) v.begin(),v.end()\n#define pii pair<int,int>\n#define vi vector<int>\n#define vvi vector<vi>\n#define print(arr) for (auto it = arr.begin(); it != arr.end(); ++it) cout << *it << \" \"; cout << endl;\n#define debug(x) cout << x << endl;\n#define debug2(x,y) cout << x << \" \" << y << endl;\n#define debug3(x,y,z) cout << x << \" \" << y << \" \" << z << endl;\n\ntypedef tree<\nint,\nnull_type,\nless<int>,\nrb_tree_tag,\ntree_order_statistics_node_update>\nordered_set;\n\nconst int INF = 1e18+1;\nconst int MOD = 1e9+7;\nconst double PI = 3.14159265358979323846264338;\n\nint raise(int a,int n,int m = MOD){\n  if(n == 0)return 1;\n  if(n == 1)return a;\n  int x = 1;\n    x *= raise(a,n/2,m);\n    x %= m;\n    x *= x;\n    x %= m;\n    if(n%2)x*= a;\n    x %= m;\n    return x;\n}\n\nint floor1(int n,int k){\n    if(n%k == 0 || n >= 0)return n/k;\n    return (n/k)-1;\n}\n\nint ceil1(int n,int k){\n    return floor1(n+k-1,k);\n}\n\nconst int N = 1e5+1;\nint prefr[N];\nint prefa[N];\nint n;\nint a[N];\nint op[N];\n\nvoid solve(){\n  \tcin >> n;\n  \top[1] = 1;\n  \tcin >> a[1];\n  \tprefr[1] = prefa[1] = a[1];\n  \tfor(int i = 2;i <= n;i++){\n  \t\tchar o;cin >> o;\n  \t\top[i] = -1+2*(o == '+');\n  \t\tcin >> a[i];\n  \t\tprefr[i] = prefr[i-1]+a[i]*op[i];\n  \t\tprefa[i] = prefa[i-1]+a[i];\n  \t}\n  \tint ans = prefr[n];\n  \tfor(int i = 1;i <= n;i++){\n  \t\tif(op[i] == -1){\n  \t\t\tfor(int j = i+1;j <= n;j++){\n  \t\t\t\tif(op[j] == -1){\n  \t\t\t\t\tint one = prefr[i-1]+prefa[n]-prefa[j-1]-(prefa[j-1]-prefa[i-1]);\n  \t\t\t\t//\tcout << i << \" \" << j << \" \" << one << endl;\n  \t\t\t\t\tans = max(ans,one);\n  \t\t\t\t}\n  \t\t\t}\n  \t\t}\n  \t}\n  \tcout << ans;\n}\n\nsigned main(){\n  ios_base::sync_with_stdio(0);cin.tie(0);cout.tie(0);\n  //freopen(\".in\",\"r\",stdin);freopen(\".out\",\"w\",stdout);\n  int t = 1;\n  //cin >> t;\n  while(t--){\n    solve();\n  }\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstdio>\n#include<cstring>\ntypedef long long lint;\nconst int N=1e5+2;\nint n;\nlint dp[2][3];\n\ntemplate <class T> inline void apx(T &x,const T y){\n\tif(x<y) x=y;\n}\n\ninline int nxi(){\n\tint x=0;\n\tchar c;\n\twhile((c=getchar())>'9'||c<'0');\n\twhile(x=x*10-48+c,(c=getchar())>='0'&&c<='9');\n\treturn x;\n}\n\nint main(){\n\tn=nxi();\n\tdp[1][0]=nxi();\n\tdp[1][1]=dp[1][2]=-1e13;\n\tfor(int i=2;i<=n;++i){\n\t\tchar op;\n\t\twhile((op=getchar())!='-'&&op!='+');\n\t\tconst int hx=nxi(),p=i&1;\n\t\tconst int cur=hx*(op=='+'?1:-1);\n\t\tdp[p][0]=dp[p^1][0]+cur;\n\t\tdp[p][1]=dp[p^1][1]-cur;\n\t\tdp[p][2]=dp[p^1][2]+cur;\n\t\tapx(dp[p][1],dp[p][2]);\n\t\tapx(dp[p][0],dp[p][1]);\n\t\tif(op=='-'){\n\t\t\tapx(dp[p][1],dp[p^1][0]-hx);\n\t\t\tapx(dp[p][2],dp[p^1][1]+hx);\n\t\t}\n\t}\n\tlint ans=-1e16;\n\tfor(int i=0;i<3;++i){\n\t\tapx(ans,dp[n&1][i]);\n\t}\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\n#define For(i, j, k) for(int i = j; i <= k; i++)\n\nusing namespace std;\n\nconst int N = 100010;\n\ntypedef long long LL;\n\nvoid chkmax(LL &x, LL y){\n\tx = x > y ? x : y;\n}\n\nint n;\nint op[N], A[N];\nLL dp[N][3];\n\nint main(){\n\tscanf(\"%d%d\", &n, &A[1]);\n\tFor(i, 2, n){\n\t\tchar s[3];\n\t\tscanf(\"%s%d\", s, &A[i]);\n\t\top[i] = s[0] == '-';\n\t}\n\n\tFor(i, 0, n) For(j, 0, 2) dp[i][j] = -(1ll << 60);\n\tdp[0][0] = 0;\n\n\tFor(i, 1, n) For(j, 0, 2){\n\t\tLL val = dp[i - 1][j];\n\t\tFor(k, 0, j)\n\t\t\tif(!op[i]) chkmax(dp[i][k], val + (k & 1 ? -A[i] : A[i]));\n\t\t\telse if(k != 2) chkmax(dp[i][k + 1], val + (k & 1 ? A[i] : -A[i]));\n\t}\n\tprintf(\"%lld\\n\", max(dp[n][0], max(dp[n][1], dp[n][2])));\n\t\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include \"bits/stdc++.h\"\nusing namespace std;\n\n#define int long long\n#define DBG 0\n#define dump(o) if(DBG){cerr<<#o<<\" \"<<o<<endl;}\n#define dumpc(o) if(DBG){cerr<<#o; for(auto &e:(o))cerr<<\" \"<<e;cerr<<endl;}\n#define rep(i,a,b) for(int i=(a);i<(b);i++)\n#define rrep(i,a,b) for(int i=(b)-1;i>=(a);i--)\n#define each(it,c) for(auto it=(c).begin();it!=(c).end();it++)\n#define all(c) c.begin(),c.end()\nconst int INF = sizeof(int) == sizeof(long long) ? 0x3f3f3f3f3f3f3f3fLL : 0x3f3f3f3f;\nconst int MOD = (int)(1e9 + 7);\n\n#define MAX_N 100010\nint N;\nint A[MAX_N] = {};\nchar op[MAX_N] = {};\n\npair<int, int> ma(int l);\npair<int, int> mi(int l);\n\npair<int, int> mi(int l) {\n\tdump(\"mi\");\n\tint ret = A[l];\n\tint tmp = A[l];\n\tint min_index = l;\n\trep(i, l + 1, N) {\n\t\tif (op[i] == '-') {\n\t\t\tpair<int, int> res = ma(i);\n\t\t\ttmp -= res.first;\n\t\t\ti = res.second;\n\t\t}\n\t\telse {\n\t\t\ttmp += A[i];\n\t\t}\n\t\tif (tmp < ret) {\n\t\t\tret = tmp;\n\t\t\tmin_index = i;\n\t\t}\n\t\tdump(i);\n\t\tdump(tmp);\n\t\tdump(ret);\n\t}\n\treturn make_pair(ret, min_index);\n}\n\npair<int, int> ma(int l) {\n\tdump(\"ma\");\n\tint ret = A[l];\n\tint tmp = A[l];\n\tint max_index = l;\n\trep(i, l + 1, N) {\n\t\tif (op[i] == '-') {\n\t\t\tpair<int, int> res = mi(i);\n\t\t\ttmp -= res.first;\n\t\t\ti = res.second;\n\t\t}\n\t\telse {\n\t\t\ttmp += A[i];\n\t\t}\n\t\tif (tmp > ret) {\n\t\t\tret = tmp;\n\t\t\tmax_index = i;\n\t\t}\n\t\tdump(i);\n\t\tdump(tmp);\n\t\tdump(ret);\n\t}\n\treturn make_pair(ret, max_index);\n}\n\nint solve() {\n\tpair<int, int> res = ma(0);\n\tint ret = res.first;\n\twhile (res.second < N) {\n\t\tres = ma(res.second + 1);\n\t\tret += res.first;\n\t}\n\treturn ret;\n}\n\nsigned main() {\n\tcin >> N;\n\tcin >> A[0];\n\trep(i, 1, N)cin >> op[i] >> A[i];\n\tcout << solve() << endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define REP(i, n) for (int i = 0; (i) < (int)(n); ++ (i))\n#define REP3(i, m, n) for (int i = (m); (i) < (int)(n); ++ (i))\n#define REP_R(i, n) for (int i = int(n) - 1; (i) >= 0; -- (i))\n#define REP3R(i, m, n) for (int i = int(n) - 1; (i) >= (int)(m); -- (i))\n#define ALL(x) begin(x), end(x)\nusing ll = long long;\nusing namespace std;\ntemplate <class T, class U> inline void chmax(T & a, U const & b) { a = max<T>(a, b); }\n\nll solve(int n, vector<int> const & a, vector<char> const & op) {\n    vector<ll> cur(n, LLONG_MIN), prv;\n    cur[0] = a[0];\n    REP3 (i, 1, n) {\n        cur.swap(prv);\n        cur.assign(n, LLONG_MIN);\n        auto sign = [&](int j) { return (j % 2 == 0 ? +1 : -1); };\n        if (op[i - 1] == '+') {\n            REP (j, n) {\n                if (prv[j] != LLONG_MIN) {\n                    chmax(cur[j], prv[j] + sign(j) * a[i]);   // ... + a_i\n                }\n                if (j + 1 < n and prv[j + 1] != LLONG_MIN) {\n                    chmax(cur[j], prv[j + 1] + sign(j) * a[i]);  // ...) + a_i\n                }\n            }\n        } else if (op[i - 1] == '-') {\n            REP (j, n) {\n                if (j >= 1 and prv[j] != LLONG_MIN) {\n                    chmax(cur[j], prv[j] + sign(j) * a[i]);  // ...) - (a_i\n                }\n                if (j - 1 >= 0 and prv[j - 1] != LLONG_MIN) {\n                    chmax(cur[j], prv[j - 1] + sign(j) * a[i]);  // ... - (a_i\n                }\n            }\n        } else {\n            assert (false);\n        }\n    }\n    return *max_element(ALL(cur));\n}\n\nint main() {\n    int n; cin >> n;\n    vector<int> a(n);\n    vector<char> op(n - 1);\n    REP (i, n - 1) {\n        cin >> a[i] >> op[i];\n    }\n    cin >> a[n - 1];\n    cout << solve(n, a, op) << endl;\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define gc getchar()\n#define rep(i,a,b) for(int i=a;i<=b;i++)\n#define Rep(i,v) rep(i,0,(int)v.size()-1)\n#define lint long long\n#define db double\n#define pb push_back\n#define mp make_pair\n#define fir first\n#define sec second\n#define debug(x) cerr<<#x<<\"=\"<<x\n#define sp <<\" \"\n#define ln <<endl\nusing namespace std;\ntypedef pair<int,int> pii;\ntypedef set<int>::iterator sit;\ninline int inn()\n{\n\tint x,ch;while((ch=gc)<'0'||ch>'9');\n\tx=ch^'0';while((ch=gc)>='0'&&ch<='9')\n\t\tx=(x<<1)+(x<<3)+(ch^'0');return x;\n}\nconst int N=100010;lint ps[N],ss[N];int a[N],sg[N],R[N];\ninline lint S(int l,int r) { if(l>r) return 0;return ss[r]-ss[l-1]; }\nint main()\n{\n\tint n=inn();a[1]=inn(),ps[1]=a[1],ss[1]=a[1];\n\tfor(int i=1;i<n;i++)\n\t{\n\t\twhile((sg[i]=gc)!='+'&&sg[i]!='-');a[i+1]=inn();\n\t\tif(sg[i]=='+') ps[i+1]=ps[i]+a[i+1];\n\t\telse ps[i+1]=ps[i]-a[i+1];ss[i+1]=ss[i]+a[i+1];\n\t}\n\tR[n]=n;lint ans=ps[n];for(int i=n-1;i;i--) if(sg[i]=='+') R[i]=R[i+1];else R[i]=i;\n\trep(i,1,n-1) if(sg[i]=='-')\n\t\tans=max(ans,ps[i]-S(i+1,R[i+1])+ss[n]-ss[R[i+1]]);\n\treturn !printf(\"%lld\\n\",ans);\n}"
  },
  {
    "language": "C++",
    "code": "#include <stdio.h>\n#include <iostream>\n#include <vector>\n#include <assert.h>\n#include <set>\n#include <map>\n#include <cmath>\n#include <queue>\n#include <stack>\n#include <string>\n#include <sstream>\n#include <memory.h>\n#include <time.h>\n#include <string.h>\n#include <stdlib.h>\n#include <algorithm>\nusing namespace std;\ntypedef long long ll;\nint n;\nvector<int> v;\nvector<char> op;\nll dp[100000][3];\nll calc(int i, int o) {\n\tif (o == 3)\n\t\treturn -1e18;\n\tif (i == n)\n\t\treturn 0;\n\tll &ret = dp[i][o];\n\tif (ret != -1)\n\t\treturn ret;\n\tret = calc(i + 1, o) + v[i] * (o & 1 ? -1 : 1);\n\tif (o)\n\t\tret = max(ret, calc(i, o - 1));\n\tif (v[i] < 0)\n\t\tret = max(ret, calc(i + 1, o + 1) + v[i] * (o & 1 ? -1 : 1));\n\treturn ret;\n}\nint main()\n{\n\tcin >> n;\n\tv.resize(n);\n\top.resize(n - 1);\n\tcin >> v[0];\n\tfor (int i = 1; i < n; ++i) {\n\t\tcin >> op[i - 1] >> v[i];\n\t\tv[i] *= op[i - 1] == '+' ? 1 : -1;\n\t}\n\tmemset(dp, -1, sizeof(dp));\n\tcout << calc(1, 0) + v[0] << endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "// IOI 2021\n#include <bits/stdc++.h>\nusing namespace std;\n\n#define int ll\n#define endl '\\n'\n#define ends ' '\n#define die(x) return cout << x << endl, 0\n#define all(v) v.begin(), v.end()\n#define sz(x) (int)(x.size())\nvoid debug_out() { cerr << endl; }\ntemplate <typename Head, typename... Tail>\nvoid debug_out(Head H, Tail... T) { cerr << ends << H; debug_out(T...); }\n#define debug(...) cerr << \"{\" << #__VA_ARGS__ << \"}:\", debug_out(__VA_ARGS__)\ntypedef long long ll;\ntypedef pair<int, int> pii;\nconst ll INF = 1e9;\nconst ll MOD = 1e9 + 7;\n \n////////////////////////////////////////////////////////////////////\n\nconst int N = 1e5 + 5, M = 1e2 + 2;\n\nint A[N], DP[N][M];\nbool P[N];\n\nint Sign(int i) { return i & 1 ? -1 : 1; }\n\nint32_t main() {\n\n\tios::sync_with_stdio(0), cin.tie(0), cout.tie(0);\n\tmt19937 Rnd(time(0));\n\n\tfor (int i = 0; i < N; i++) for (int j = 0; j < M; j++) DP[i][j] = -INF;\n\tint n; cin >> n;\n\tfor (int i = 0; i < n; i++) {\n\t\tif (i) {\n\t\t\tchar c; cin >> c;\n\t\t\tP[i] = (c == '+');\n\t\t}\n\t\tcin >> A[i];\n\t}\n\tDP[0][0] = A[0];\n\tfor (int i = 1; i < n; i++) for (int j = M - 1; j >= 0; j--) {\n\t\tif (P[i]) DP[i][j] = DP[i - 1][j] + A[i] * Sign(j);\n\t\telse if (j) DP[i][j] = DP[i - 1][j - 1] + A[i] * Sign(j);\n\t\tif (j + 1 < M) DP[i][j] = max(DP[i][j], DP[i][j + 1]);\n\t}\n\tcout << DP[n - 1][0] << endl;\n\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define loop(n) for (int ngtkana_is_genius = 0; ngtkana_is_genius < int(n); ngtkana_is_genius++)\n#define rep(i, begin, end) for(int i = int(begin); i < int(end); i++)\n#define all(v) v.begin(), v.end()\n#define rand(l, r) std::uniform_int_distribution<>(l, r)(mt)\n#define lint long long\nauto cmn = [](auto& a, auto b){if (a > b) {a = b; return true;} return false;};\nauto cmx = [](auto& a, auto b){if (a < b) {a = b; return true;} return false;};\nvoid debug_impl() { std::cerr << std::endl; }\ntemplate <typename Head, typename... Tail>\nvoid debug_impl(Head head, Tail... tail){\n  std::cerr << \" \" << head;\n  debug_impl(tail...);\n}\n#ifndef STOPIT\n#define debug(...)\\\n  std::cerr << std::boolalpha << \"[\" << #__VA_ARGS__ << \"]:\";\\\n  debug_impl(__VA_ARGS__);\\\n  std::cerr << std::noboolalpha;\n#else\n#define debug 0;\n#endif\n\ntemplate < typename Container, typename Value = typename Container::value_type, std::enable_if_t<!std::is_same< Container, std::string >::value, std::nullptr_t> = nullptr>\nstd::istream& operator>> (std::istream& is, Container& v)\n  { for (auto & x : v) { is >> x; } return is; }\n\ntemplate < typename Container, typename Value = typename Container::value_type, std::enable_if_t<!std::is_same< Container, std::string >::value, std::nullptr_t> = nullptr >\nstd::ostream& operator<< (std::ostream& os, Container const& v) {\n os << \"{\";\n  for (auto it = v.begin(); it != v.end(); it++)\n    {os << (it != v.begin() ? \",\" : \"\") << *it;}\n  return os << \"}\";\n}\n\ntemplate < template < typename ... > class Tuple,  typename... Args, std::size_t ... Inds, std::size_t = std::tuple_size< Tuple < Args ... > >::value >\nstd::istream& tuple_input_impl(std::istream& os, Tuple<Args...>& tuple, std::integer_sequence<std::size_t, Inds...>)\n  { (void)std::initializer_list<int>{((void)(os >> std::get< Inds >(tuple)), 0)...}; return os; }\ntemplate < template < typename ... > class Tuple,  typename... Args, std::size_t = std::tuple_size< Tuple < Args ... > >::value >\nstd::istream& operator>> (std::istream& os, Tuple<Args...>& tuple)\n  { return tuple_input_impl(os, tuple, std::index_sequence_for<Args...>()); }\n\ntemplate < template < typename ... > class Tuple,  typename... Args, std::size_t ... Inds, std::size_t = std::tuple_size< Tuple < Args ... > >::value >\nstd::ostream& tuple_output_impl(std::ostream& os, const Tuple<Args...>& tuple, std::integer_sequence<std::size_t, Inds...>)\n  { os << \"(\"; (void)std::initializer_list<int>{((void)(os << (Inds > 0 ? \",\" : \"\") << std::get< Inds >(tuple)), 0)...}; return os << \")\"; }\ntemplate < template < typename ... > class Tuple,  typename... Args, std::size_t = std::tuple_size< Tuple < Args ... > >::value >\nstd::ostream& operator<< (std::ostream& os, const Tuple<Args...>& tuple)\n { return tuple_output_impl(os, tuple, std::index_sequence_for<Args...>()); }\n\nint main() {\n  std::cin.tie(0); std::cin.sync_with_stdio(false);\n  int n; std::cin >> n;\n  std::vector< lint > a(n);\n  std::vector< int > minus;\n  rep(i, 0, n) {\n    if (0 < i) {\n      char c; std::cin >> c;\n      if (c == '-')\n        { minus.emplace_back(i); }\n    }\n    int x; std::cin >> a.at(i);\n  }\n  std::vector< lint > b(n);\n  std::partial_sum(all(a), b.begin());\n  lint sum = b.back();\n  // debug(a);\n  // debug(b);\n  // debug(minus);\n  if (minus.empty()) {\n    std::cout << sum << std::endl;\n    return 0;\n  }\n\n  int m = minus.size();\n  minus.emplace_back(n);\n  b.insert(b.begin(), 0LL);\n  std::vector< std::pair< lint, lint > > data(m);\n  rep(i, 0, m) {\n    auto x = minus.at(i);\n    auto y = minus.at(i + 1);\n    data.at(i) = { a.at(x), b.at(y) - b.at(x) };\n  }\n  // debug(data);\n  lint min = std::accumulate(all(data), 0, [](auto x, auto p){ return x + p.first; });\n  lint now = 0;\n  for (auto pair : data) {\n    lint x, y; std::tie(x, y) = pair;\n    // debug(now, y);\n    cmn(min, now + y);\n    now += x;\n  }\n  auto ret = sum - 2 * min;\n  std::cout << ret << std::endl;\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n#include <vector>\n#include <string>\n#include <utility>\n#include <cstdlib>\n#include <cmath>\n#include <functional>\n#include <queue>\n\nusing namespace std;\ntypedef long long ll;\ntypedef pair<int, int> pii;\n#define fst first\n#define snd second\nconst ll mod = 1000000007;\nconst ll INF = mod * mod;\n\nint main(){\n\tll n;\n\tll a[100010];\n\tbool m[100010];\n\tll dp[100010][3];\n\n\tcin >> n;\n\tm[0] = 0;\n\tcin >> a[0];\n\tfor (int i = 1; i < n; i++) {\n\t\tchar c;\n\t\tcin >> c;\n\t\tif (c == '+')m[i] = false;\n\t\telse m[i] = true;\n\t\tcin >> a[i];\n\t}\n\tdp[0][0] = a[0]; dp[0][1] = -INF; dp[0][2] = -INF;\n\tfor (int i = 1; i < n; i++) {\n\t\tif (m[i]) {\n\t\t\tdp[i][0] = -INF;\n\t\t\tdp[i][1] = -a[i] + max(dp[i - 1][1], dp[i - 1][0]);\n\t\t\tif (dp[i - 1][1] != -INF || dp[i - 1][2] != -INF) {\n\t\t\t\tdp[i][2] = a[i] + max(dp[i - 1][1], dp[i - 1][2]);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdp[i][2] = -INF;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tdp[i][0] = a[i] + max(dp[i - 1][0], dp[i - 1][1]);\n\t\t\tdp[i][1] = -a[i] + dp[i-1][1];\n\t\t\tif (dp[i - 1][2] != -INF) {\n\t\t\t\tdp[i][2] = a[i] + dp[i - 1][2];\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdp[i][2] = -INF;\n\t\t\t}\n\t\t}\n\t}\n\tll ans = dp[n - 1][2];\n\tans = max(ans, dp[n - 1][1]);\n\tans = max(ans, dp[n - 1][0]);\n\tcout << ans << endl;\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <cstring>\n#include <string>\n#include <vector>\n#include <map>\n#include <set>\n#include <queue>\n#include <deque>\n#include <algorithm>\n#define INF 10000000000000000LL\nusing namespace std;\n\nint main()\n{\n\tint n;\n  scanf(\"%d\", &n);\n  long long int a[100001];\n  long long int sum[100001];\n  sum[0]=0;\n  vector<int> minus;\n  for(int i=1; i<=n; i++){\n    if(i<=n-1){\n      char op;\n      scanf(\"%lld \", &a[i]);\n      sum[i]=sum[i-1]+a[i];\n      scanf(\"%c \", &op);\n      if(op=='-'){\n        minus.push_back(i);\n      }\n    }else{\n      scanf(\"%lld\", &a[i]);\n      sum[i]=sum[i-1]+a[i];\n    }\n  }\n  long long int ans=-INF, sum1=sum[n];\n  \n  int m=minus.size();\n  if(m==0){\n    printf(\"%lld\\n\", sum[n]);\n    return 0;\n  }\n  if(m==1){\n    printf(\"%lld\\n\", sum[n]-2*a[minus[0]+1]);\n    return 0;\n  }\n  for(int i=0; i<m; i++){\n    if(i<m-1){\n      long long int s=sum1-2*(sum[minus[i+1]]-sum[minus[i]]);\n      if(ans<s) ans=s;\n      sum1-=2*a[minus[i]+1];\n    }else{\n      sum1-=2*a[minus[i]+1];\n      if(ans<sum1) ans=sum1;\n    }\n  }\n  printf(\"%lld\\n\", ans);\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <cstdlib>\n#include <cstring>\n#include <cctype>\n#include <cmath>\n#include <algorithm>\n#define rep(i, a, b) for (int i = (a), _ = (b); i <= _; ++ i)\n#define per(i, a, b) for (int i = (a), _ = (b); i >= _; -- i)\n#define For(i, a, b) for (int i = (a), _ = (b); i < _; ++ i)\n#define ri rd<int>\nusing namespace std;\ntypedef long long LL;\nconst int maxN = 1e5 + 7;\nconst LL INF = (1LL << 61) + 7;\n\ntemplate<class T> inline T rd() {\n\tbool f = 1; char c = getchar(); for (; !isdigit(c); c = getchar()) if (c == '-') f = 0;\n\tT x = 0; for (; isdigit(c); c = getchar()) x = x * 10 + c - 48; return f ? x : -x;\n}\n\ninline LL getch() {\n\tstatic char s[5]; scanf(\"%s\", s);\n\treturn s[0] == '-' ? -1 : 1;\n}\n\ninline LL sgn(int x) {return (x & 1) ? -1 : 1;}\n\ninline void Max(LL &x, LL y) {if (y > x) x = y;}\n\nint n;\nLL a[maxN], opr[maxN];\nLL f[3][maxN];\n\nint main() {\n\t\n\tn = ri();\n\topr[1] = 1;\n\trep (i, 1, n) a[i] = ri(), opr[i + 1] = getch();\n\n\tf[0][0] = 0; f[1][0] = f[2][0] = -INF;\n\trep (i, 1, n) {\n\t\trep (j, 0, 2) f[j][i] = -INF;\n\t\trep (j, 0, 2) rep (k, 0, j) {\n\t\t\tMax(f[k][i], f[j][i - 1] + sgn(k) * opr[i] * a[i]);\n\t\t}\n\t\tif (opr[i] == -1) {\n\t\t\tper (j, 2, 1) {\n\t\t\t\tMax(f[j][i], f[j-1][i]);\n\t\t\t}\n\t\t}\n\t}\n\n\tprintf(\"%lld\\n\", max(max(f[0][n], f[1][n]), f[2][n]));\n\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\nconst int maxn = 1e5 + 5;\nconst long long INF = 1e18;\nint n, f[maxn];\nlong long ini[maxn], dp[maxn][3];\n\ninline void putit(){\n\tscanf(\"%d\", &n); char opt[30];\n\tscanf(\"%lld\", &ini[1]); f[1] = 1;\n\tfor(int i = 2; i <= n; ++i){\n\t\tscanf(\"%s\", opt + 1); f[i] = (opt[1] == '+') ? 1 : -1;\n\t\tscanf(\"%lld\", &ini[i]);\n\t} \n}\n\ninline void check(){\n\tfor(int i = 1; i <= n; ++i){\n\t\tprintf(\"dp[%d][0] = %lld \", i, dp[i][0]);\n\t\tprintf(\"dp[%d][1] = %lld \", i, dp[i][1]);\n\t\tprintf(\"dp[%d][2] = %lld \", i, dp[i][2]);\n\t\tprintf(\"\\n\");\n\t}\n}\n\ninline void workk(){\n\tlong long lin0, lin1, lin2;\n\tdp[1][0] = ini[1]; dp[1][1] = dp[1][2] = -INF;\n\tfor(int i = 2; i <= n; ++i){\n\t\tif(f[i] == 1){\n\t\t\tlin0 = dp[i - 1][0] + ini[i];\n\t\t\tlin1 = dp[i - 1][1] - ini[i];\n\t\t\tlin2 = dp[i - 1][2] + ini[i];\n\t\t\tdp[i][0] = max(lin0, lin1); dp[i][1] = max(lin1, lin2); dp[i][2] = lin2;\n\t\t}\n\t\telse{\n\t\t\tlin0 = dp[i - 1][0] - ini[i];\n\t\t\tlin1 = dp[i - 1][1] + ini[i];\n\t\t\tlin2 = dp[i - 1][2] - ini[i];\n\t\t\tdp[i][1] = max(lin1, lin0); dp[i][2] = max(lin2, lin1);\n\t\t\tdp[i][0] = max(lin0, lin1); dp[i][1] = max(dp[i][1], dp[i][2]);\n\t\t}\n\t}\n\t//check();\n\tcout << max(dp[n][0], max(dp[n][1], dp[n][2]));\n}\n\nint main()\n{\n\t//freopen(\"lpl.in\", \"r\", stdin);\n\t//freopen(\"lpl.out\", \"w\", stdout);\n\tputit();\n\tworkk();\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <iostream>\n#include <algorithm>\n#include <string>\n#include <cstring>\n#include <vector>\n#include <queue>\n#include <set>\n#include <map>\n#include <cmath>\n#include <iomanip>\nusing namespace std;\n\ntypedef pair<int, int> P;\n#define rep(i, n) for (int i=0; i<(n); i++)\n#define all(c) (c).begin(), (c).end()\n#define uniq(c) c.erase(unique(all(c)), (c).end())\n#define _1 first\n#define _2 second\n#define pb push_back\n#define INF (1LL<<60)\n#define MOD 1000000007\n\nint N;\nint A[100000];\nbool sign[100000];\n\nlong long dp[100001][3];\n\nsigned main() {\n  ios::sync_with_stdio(false); cin.tie(0);\n  cin >> N;\n  rep(i, N) {\n    if (i > 0) {\n      char c;\n      cin >> c;\n      sign[i] = c == '-';\n    }\n    cin >> A[i];\n  }\n\n  rep(i, N) {\n    rep(j, 3) dp[i][j] = -INF;\n  }\n  dp[0][0] = 0;\n  rep(i, N) {\n    rep(d, 3) {\n      if (dp[i][d] == -INF) continue;\n      int nd = d;\n      if (sign[i]) {\n        nd++;\n        if (nd == 3) nd = 1;\n      }\n      int b = (nd % 2 == 0) ? 1 : -1;\n      dp[i+1][nd] = max(dp[i+1][nd], dp[i][d] + 1LL*b*A[i]);\n    }\n\n    dp[i+1][1] = max(dp[i+1][1], dp[i+1][2]);\n    dp[i+1][0] = max(dp[i+1][0], dp[i+1][1]);\n  }\n  cout << dp[N][0] << \"\\n\";\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\nusing ll = long long;\n#define int ll\nusing PII = pair<int, int>;\ntemplate <typename T> using V = vector<T>;\ntemplate <typename T> using VV = vector<V<T>>;\ntemplate <typename T> using VVV = vector<VV<T>>;\n\n#define FOR(i, a, n) for (ll i = (ll)a; i < (ll)n; ++i)\n#define REP(i, n) FOR(i, 0, n)\n#define ALL(x) x.begin(), x.end()\n#define PB push_back\n\nconst ll INF = (1LL<<60);\nconst int MOD = 1000000007;\n\ntemplate <typename T> T &chmin(T &a, const T &b) { return a = min(a, b); }\ntemplate <typename T> T &chmax(T &a, const T &b) { return a = max(a, b); }\ntemplate <typename T> bool IN(T a, T b, T x) { return a<=x&&x<b; }\ntemplate<typename T> T ceil(T a, T b) { return a/b + !!(a%b); }\ntemplate<class S,class T>\nostream &operator <<(ostream& out,const pair<S,T>& a){\n  out<<'('<<a.first<<','<<a.second<<')';\n  return out;\n}\ntemplate<class T>\nostream &operator <<(ostream& out,const vector<T>& a){\n  out<<'[';\n  REP(i, a.size()) {out<<a[i];if(i!=a.size()-1)out<<',';}\n  out<<']';\n  return out;\n}\n\nint dx[] = {0, 1, 0, -1}, dy[] = {1, 0, -1, 0};\n\nsigned main(void)\n{\n  cin.tie(0);\n  ios::sync_with_stdio(false);\n\n  int n;\n  cin >> n;\n  V<int> a(n);\n  V<char> op(n);\n  op[0] = '+'; cin >> a[0];\n  FOR(i, 1, n) cin >> op[i] >> a[i];\n\n  V<int> b(n); b[0] = a[0];\n  FOR(i, 1, n) b[i] = b[i-1] + a[i];\n\n  V<int> v;\n  REP(i, n) if(op[i] == '-') v.PB(i);\n  v.PB(n);\n  V<int> nxt(n);\n  REP(i, v.size()-1) nxt[v[i]] = v[i+1];\n\n  int ret = -INF, now = 0;\n  REP(i, n) {\n    if(op[i]=='+') {\n      now += a[i];\n    } else {\n      chmax(ret, now - (b[nxt[i]-1]-b[i-1]) + (b[n-1]-b[nxt[i]-1]));\n      now -= a[i];\n    }\n  }\n  chmax(ret, now);\n\n  cout << ret << endl;\n\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\nconst int maxn = 2e5 + 10;\nint a[maxn], sign[maxn];\nlong long mem[maxn][3];\nint n;\n\nlong long dp(int cur, int nest) {\n  if(cur == n) {\n    return 0;\n  }\n  if(mem[cur][nest] != -1) return mem[cur][nest];\n  int val = (nest & 1) ? -1 : 1;\n  val *= sign[cur] * a[cur]; \n  long long ans = dp(cur + 1, nest) + val;\n  if(nest > 0) ans = max(ans, dp(cur + 1, nest - 1) + val);\n  if(sign[cur] == -1 && nest < 2) {\n    ans = max(ans, dp(cur + 1, nest + 1) + val);\n  }\n  return mem[cur][nest] = ans;\n}\n\nint main() {\n  ios_base :: sync_with_stdio(false);\n  cin.tie(0);\n  cin >> n;\n  sign[0] = 1;\n  cin >> a[0];\n  for(int i = 1; i < n; i++) {\n    char c;\n    cin >> c >> a[i];\n    sign[i] = (c == '-') ? -1 : 1;\n  }\n  memset(mem, -1, sizeof mem);\n  cout << dp(0, 0) << endl;\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <cstdio>\ntypedef long long ll; \nconst int INF = 1e9; \nint arr[100005]; \nchar op[100005]; \nll dp[100005][3]; \nint main()\n{\n\t// freopen(\"ARC066-E.in\", \"r\", stdin); \n\tint n;\n\tscanf(\"%d\", &n); \n\tfor (int i = 0; i < n - 1; i++)\n\t\tscanf(\"%d %c\", arr + i, op + i); \n\tscanf(\"%d\", arr + n - 1); \n\tdp[0][0] = arr[0]; \n\tdp[0][1] = dp[0][2] = -INF; \n\tfor (int i = 1; i < n; i++)\n\t{\n\t\tif (op[i - 1] == '+')\n\t\t{\n\t\t\tdp[i][0] = std::max(dp[i - 1][0], dp[i - 1][1]) + arr[i];\n\t\t\tdp[i][1] = dp[i - 1][1] - arr[i]; \n\t\t\tdp[i][2] = dp[i - 1][2] + arr[i]; \n\t\t}\n\t\telse\n\t\t{\n\t\t\tdp[i][0] = -INF; \n\t\t\tdp[i][1] = std::max(dp[i - 1][0], dp[i - 1][1]) - arr[i]; \n\t\t\tdp[i][2] = std::max(dp[i - 1][1], dp[i - 1][2]) + arr[i]; \n\t\t}\n\t}\n\tprintf(\"%lld\\n\", std::max(dp[n - 1][0], std::max(dp[n - 1][1], dp[n - 1][2])));\n\treturn 0; \n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\nint x,n;char o;long long a,b=-1e18,c=-1e18;\nint main()\n{\n\tscanf(\"%d%lld\",&n,&a);\n\tfor(int i=1;i<n;i++){scanf(\" %c%d\",&o,&x);if(o=='-') a=b=max(a-x,(c=b+x));else a+=x,b=max(b-x,c+=x);}\n\tprintf(\"%lld\\n\",a);\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n#define x first\n#define y second\n#define mp make_pair\n#define REP(i,j,k)  for(int i=(j);i<=(k);++i)\n#define REPD(i,j,k) for(int i=(j);i>=(k);--i)\n\nconst int maxn = 1e5+10;\nlong long a[maxn],sum[maxn],abssum[maxn];\nint xs[maxn],nxt[maxn];\nint n;\n\nvoid init()\n{\n\tchar op[5];\n\tcin>>n>>a[1];\n\tsum[1]=abssum[1]=a[1];\n\tREP(i,2,n)\n\t{\n\t\tcin>>op>>a[i];\n\t\tif(op[0]=='-') xs[i]=-1;\n\t\telse xs[i]=1;\n\t\tabssum[i]=abssum[i-1]+a[i];\n\t\tsum[i]=sum[i-1]+xs[i]*a[i];\n\t}\n\tnxt[n]=n;\n\tREPD(i,n-1,2)\n\t\tif(xs[i+1]==-1) nxt[i]=i;\n\t\telse nxt[i]=nxt[i+1];\n}\n\nvoid solve()\n{\n\tlong long ans=sum[n];\n\tREP(i,2,n)\n\t\tif(xs[i]==-1)\n\t\t\tans=max(ans,sum[i-1]-(abssum[nxt[i]]-abssum[i-1])+abssum[n]-abssum[nxt[i]]);\n\tcout<<ans<<endl;\n}\n\nint main()\n{\n\tinit();\n\tsolve();\n\t\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\ntypedef int int_t;\n#define int long long\n\nconst int maxn=1e5+5,INF=0x3f3f3f3f3f3f3f3fll;\nint F[maxn][4],A[maxn],N,op[maxn];\n\nint_t main(){\n\tscanf(\"%lld\",&N);\n\tfor(int i=1;i<=N;i++){\n\t\tint bj=1,x;\n\t\tif(i>1){\n\t\t\tchar buf[10];scanf(\"%s\",buf);\n\t\t\tbj = buf[0] == '+'? +1 : -1 ;\n\t\t}\n\t\tscanf(\"%lld\", &x);\n\t\tA[i]=bj*x;\n\t\top[i]=bj;\n\t}\n\tF[0][1]=-INF;F[0][2]=-INF;\n\tfor(int i=1;i<=N;i++){\n\t\tF[i][0]=F[i-1][0]+A[i];\n\t\tF[i][1]=F[i-1][1]-A[i];\n\t\tF[i][2]=F[i-1][2]+A[i];\n\t\tif(op[i]<0){\n\t\t\tF[i][1]=max(F[i][1],F[i-1][0]+A[i]);\n\t\t\tF[i][2]=max(F[i][2],F[i-1][1]-A[i]);\n\t\t}\n\t\tF[i][0]=max(F[i][0],F[i-1][1]+A[i]);\n\t\tF[i][1]=max(F[i][1],F[i-1][2]-A[i]);\n\t}\n\tcout<<max({F[N][0],F[N][1],F[N][2]})<<'\\n';\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include \"bits/stdc++.h\"\nusing namespace std;\ntypedef long long ll;\nconst ll MOD = 1e9 + 7;\nconst ll INF = 1LL << 60;\nconst double PI = 3.141592653589793238;\nconst double EPS = 1e-10;\nll A[100000];\nstring op[100000];\nll dp[100000][3];\nint main() {\n\tint N;\n\tcin >> N;\n\tcin >> A[0];\n\tfor (int i = 0; i + 1 < N; i++) {\n\t\tcin >> op[i] >> A[i + 1];\n\t}\n\tfill((ll*)dp, (ll*)(dp + N), -INF);\n\tdp[0][0] = A[0];\n\tfor (int i = 0; i + 1 < N; i++) {\n\t\tfor (int j = 0; j < 3; j++) {\n\t\t\tif (dp[i][j] == -INF) continue;\n\t\t\tif (op[i] == \"+\") {\n\t\t\t\tif (j % 2 == 0) dp[i + 1][j] = max(dp[i + 1][j], dp[i][j] + A[i + 1]);\n\t\t\t\telse dp[i + 1][j] = max(dp[i + 1][j], dp[i][j] - A[i + 1]);\n\t\t\t\tif (j > 0) {\n\t\t\t\t\tif (j % 2 == 0) dp[i + 1][j - 1] = max(dp[i + 1][j - 1], dp[i][j] - A[i + 1]);\n\t\t\t\t\telse dp[i + 1][j - 1] = max(dp[i + 1][j - 1], dp[i][j] + A[i + 1]);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (j > 0) {\n\t\t\t\t\tif (j % 2 == 0) dp[i + 1][j] = max(dp[i + 1][j], dp[i][j] + A[i + 1]);\n\t\t\t\t\telse dp[i + 1][j] = max(dp[i + 1][j], dp[i][j] - A[i + 1]);\n\t\t\t\t}\n\t\t\t\tif (j < 2) {\n\t\t\t\t\tif (j % 2 == 0) dp[i + 1][j + 1] = max(dp[i + 1][j + 1], dp[i][j] - A[i + 1]);\n\t\t\t\t\telse dp[i + 1][j + 1] = max(dp[i + 1][j + 1], dp[i][j] + A[i + 1]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tll ans = -INF;\n\tfor (int i = 0; i < 3; i++) {\n\t\tans = max(ans, dp[N - 1][i]);\n\t}\n\tcout << ans << endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "//#include \"IntMod.h\"\n//typedef IntMod<1000000007> MInt;\n\n//#include \"Union_Find.h\"\n\n#include <cstdio>\n#include <iostream>\n#include <string>\n#include <vector>\n#include <utility>\n#include <algorithm>\n#include <functional>\n#include <cmath>\n#include <stack>\n#include <queue>\n#include <set>\n#include <map>\n//#include <unordered_set>\n//#include <unordered_map>\n#include <iomanip>\n#include <sstream>\n\nusing namespace std;\n#define REP(i,a,n) for(int i = a; i < n; ++i)\n#define REPM(i,n,a) for(int i = n - 1; i >= a; --i)\n#define EPS 0.0001\n#define INF 0x3FFFFFFF\n#define INFLL 0x3FFFFFFFFFFFFFFF\n#define INFD 1.0e+308\ntypedef long long LL;\ntypedef unsigned long long ULL;\n\ntypedef pair<LL, LL> PP;\n\nLL N;\nLL A[100001];\nchar op[100001];\nLL dp[3][100001];\n\nint main() {\n\tcin >> N;\n\top[0] = '+';\n\tREP(i, 0, N) {\n\t\tif (i != 0) {\n\t\t\tcin >> op[i];\n\t\t}\n\t\tcin >> A[i];\n\t}\n\n\tdp[0][0] = A[0];\n\tdp[1][0] = -INFLL;\n\tdp[2][0] = -INFLL;\n\tREP(i, 1, N) {\n\t\tif (op[i] == '-') {\n\t\t\tdp[0][i] = max(max(dp[0][i - 1] - A[i], dp[1][i - 1] + A[i]), dp[2][i - 1] - A[i]);\n\t\t\tdp[1][i] = max(max(dp[1][i - 1] + A[i], dp[2][i - 1] - A[i]), dp[0][i - 1] - A[i]);\n\t\t\tdp[2][i] = max(dp[2][i - 1] - A[i], dp[1][i - 1] + A[i]);\n\t\t} else {\n\t\t\tdp[0][i] = max(dp[0][i - 1] + A[i], dp[1][i - 1] - A[i]);\n\t\t\tdp[1][i] = max(dp[1][i - 1] - A[i], dp[2][i - 1] + A[i]);\n\t\t\tdp[2][i] = dp[2][i - 1] + A[i];\n\t\t}\n\t}\n\tcout << max(max(dp[0][N - 1], dp[1][N - 1]), dp[2][N - 1]) << endl;\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\ntypedef int int_t;\n#define int long long\n\nconst int maxn=1e5+5;\nconst int INF=0x3f3f3f3f3f3f3f3fll;\n\nint F[maxn][4];\nint A[maxn],N;\nint op[maxn];\n\nint_t main(){\n\tscanf(\"%lld\",&N);\n\tfor(int i=1;i<=N;i++){\n\t\tint bj=1,x;\n\t\tif(i>1){\n\t\t\tchar buf[10];scanf(\"%s\",buf);\n\t\t\tbj=buf[0]=='+'?+1:-1;\n\t\t}\n\t\tscanf(\"%lld\",&x);A[i]=bj*x;op[i]=bj;\n\t}\n\tF[0][1]=-INF;F[0][2]=-INF;\n\tfor(int i=1;i<=N;i++){\n\t\tF[i][0]=max({F[i-1][0]+A[i],F[i-1][1]+A[i],F[i-1][2]+A[i]});\n\t\tF[i][1]=max({op[i]<0?F[i-1][0]+A[i]:-INF,F[i-1][1]-A[i],F[i-1][2]-A[i]});\n\t\tF[i][2]=max({op[i]<0?F[i-1][1]-A[i]:-INF,F[i-1][2]-A[i]});\n\t}\n\tcout<<max({F[N][0],F[N][1],F[N][2]})<<'\\n';\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define maxn 100005\n#define LL long long\nusing namespace std;\nchar cb[1<<20],*cs,*ct;\n#define getc() (cs==ct&&(ct=(cs=cb)+fread(cb,1,1<<20,stdin),cs==ct)?0:*cs++)\ntemplate<class T>inline void read(T &a){\n\tchar c;bool f=0;while(!isdigit(c=getc())) c=='-'&&(f=1);\n\tfor(a=c-'0';isdigit(c=getc());a=a*10+c-'0'); f&&(a=-a);\n}\nint n;\nLL F[maxn],G[maxn],a[maxn];\nint main()\n{\n\tread(n);\n\tfor(int i=1;i<=n;i++){\n\t\tread(a[i]);\n\t\tif(i>1&&a[i-1]>0&&a[i]>0) a[i-1]+=a[i],i--,n--;\n\t}\n\tfor(int i=1;i<=n;i++) F[i]=F[i-1]+a[i],G[i]=G[i-1]+abs(a[i]);\n\tLL ans=F[n];\n\tfor(int i=2;i<n;i++) if(a[i]<0) ans=max(ans,F[i]-a[i+1]+G[n]-G[i+1]);\n\tprintf(\"%lld\\n\",ans);\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdlib>\n#include <cmath>\n#include <climits>\n#include <cfloat>\n#include <map>\n#include <set>\n#include <iostream>\n#include <string>\n#include <vector>\n#include <algorithm>\n#include <sstream>\n#include <complex>\n#include <stack>\n#include <queue>\n#include <cstdio>\n#include <cstring>\n#include <iterator>\n#include <bitset>\n#include <unordered_set>\n#include <unordered_map>\n#include <fstream>\n#include <iomanip>\n#include <cassert>\n#include <utility>\n#include <memory>\n#include <functional>\n#include <deque>\n#include <cctype>\n#include <ctime>\n#include <numeric>\n#include <list>\n#include <iomanip>\n\n#if __cplusplus >= 201103L\n#include <array>\n#include <tuple>\n#include <initializer_list>\n#include <forward_list>\n\n#define cauto const auto&\n#else\n\n#endif\n\nusing namespace std;\n\n\ntypedef long long ll;\ntypedef pair<int,int> pii;\ntypedef pair<ll,ll> pll;\n\ntypedef vector<int> vint;\ntypedef vector<vector<int> > vvint;\ntypedef vector<long long> vll;\ntypedef vector<vector<long long> > vvll;\n\n#define VV(T) vector<vector< T > >\n\ntemplate <class T>\nvoid initvv(vector<vector<T> > &v, int a, int b, const T &t = T()){\n    v.assign(a, vector<T>(b, t));\n}\n\ntemplate <class F, class T>\nvoid convert(const F &f, T &t){\n    stringstream ss;\n    ss << f;\n    ss >> t;\n}\n\n#define GET_MACRO(_1, _2, _3, NAME, ...) NAME\n#define _rep(i,n) _rep2((i),0,(n))\n#define _rep2(i,a,b) for(int i=(a);i<(b);++i)\n#define rep(...) GET_MACRO(__VA_ARGS__, _rep2, _rep)(__VA_ARGS__)\n#define ALL(v) (v).begin(),(v).end()\n#define PB push_back\n#define fi first\n#define se second\n#define mkp make_pair\n#define DEBUG\n#ifdef DEBUG\n#define dump(x)  cout << #x << \" = \" << (x) << endl;\n#define debug(x) cout << #x << \" = \" << (x) << \" (L\" << __LINE__ << \")\" << \" \" << __FILE__ << endl;\n#else\n#define dump(x) \n#define debug(x) \n#endif\n\n#define MOD 1000000007LL\n#define EPS 1e-8\n#define INF 0x3f3f3f3f\n#define INFL 0x3f3f3f3f3f3f3f3fLL\n#define maxs(x,y) x=max(x,y)\n#define mins(x,y) x=min(x,y)\n\nll mainmain(){\n\tint n;\n\tcin>>n;\n\tll ans1;\n\tcin>>ans1;\n\tif(n==1){\n\t\treturn ans1;\n\t}\n\tvint op(n-1);\n\tvll v(n-1);\n\tvint minus;\n\trep(i,n-1){\n\t\tchar t;\n\t\tcin>>t;\n\t\tcin>>v[i];\n\t\tif(t=='-'){\n\t\t\tminus.PB(i);\n\t\t\top[i] = -1;\n\t\t}\n\t\telse{\n\t\t\top[i] = 1;\n\t\t}\n\t}\n\tvll suf(n-1);\n\tfor(int i=n-2; i>=0; i--){\n\t\tsuf[i] = v[i];\n\t\tif(i<n-2) suf[i] += suf[i+1];\n\t}\n\tll ans2 = -INFL;\n\tll tval = ans1;\n\tint p = 0;\n\tif(minus.size()>1) rep(i,minus.size()-1){\n\t\tint l = minus[i];\n\t\tint r = minus[i+1];\n\t\twhile(p<l) tval += op[p]*v[p],p++;\n\t\tll tmp = suf[l]-suf[r];\n\t\ttmp *= -1;\n\t\t// cout<<l<<\" \"<<r<<endl;\n\t\t// cout<<tval<<\" \"<<tmp<<\" \"<<suf[r]<<endl;\n\t\ttmp += tval;\n\t\ttmp += suf[r];\n\t\tmaxs(ans2, tmp);\n\t}\n\tll tmp = ans1;\n\trep(i,n-1) tmp += op[i]*v[i];\n\tmaxs(ans2, tmp);\n\treturn ans2;\n}\n\n\nsigned main() {\n    ios_base::sync_with_stdio(false);\n    cin.tie(0);\n    cout<<fixed<<setprecision(20);\n    cout<<mainmain()<<endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <sstream>\n#include <string>\n#include <vector>\n#include <stack>\n#include <queue>\n#include <set>\n#include <map>\n#include <numeric>\n#include <algorithm>\n#include <cstdio>\n#include <cstdlib>\n#include <cstring>\n#include <cctype>\n#include <cmath>\n#include <cassert>\n#include <cstdarg>\n#include <sys/time.h>\n#include <fstream>\n//#include \"cout.h\"\n\nusing namespace std;\n\n#define SZ(x) ((int)x.size())\n#define MSET(x,a) memset(x, a, (int)sizeof(x))\n#define PB push_back\n#define VI vector < int >\n#define PII pair < int, int >\n#define LL long long\n#define FOR(i,a,b) for (int i = (a); i < (b); i++)\n#define REP(i,n) FOR(i,0,n)\n#define ALL(v) (v).begin(), (v).end()\n#define FIT(it,v) for (__typeof((v).begin()) it = (v).begin(); it != (v).end(); it++)\n#define OUT(A) cout << #A << \" = \"<< (A) << endl\n#define OUT2(A, B) cout << \"(\" << #A << \", \" << #B << \") = (\" << (A) << \", \"<< (B) << \")\" << endl\ntemplate<class T> void chmin(T &t, T f) { if (t > f) t = f; } \ntemplate<class T> void chmax(T &t, T f) { if (t < f) t = f; } \n\n#define present(c, e) ((c).find((e)) != (c).end())\n#define cpresent(c, e) (find(all(c), (e)) != (c).end())\n\nint n;\nLL a[100010];\nchar op[100010];\nLL dp[100010][3];\n\nvoid init() {\n}\n\nvoid input() {\n\tcin >> n;\n\tREP(i, n) {\n\t\tcin >> a[i];\n\t\tif (i < n-1) cin >> op[i+1];\n\t}\n}\n\nvoid solve() {\n\tREP(i, 100010) REP(j, 3) dp[i][j] = -1e15;\n\tdp[0][0] = a[0];\n\tFOR(i, 1, n){\n\t\tif(op[i] == '+'){\n\t\t\tdp[i][0] = max({\n\t\t\t\tdp[i-1][0]+a[i], \n\t\t\t\tdp[i-1][1]+a[i], \n\t\t\t\tdp[i-1][2]+a[i]\n\t\t\t\t});\n\t\t\tdp[i][1] = max({\n\t\t\t\tdp[i-1][1]-a[i], \n\t\t\t\tdp[i-1][2]-a[i]\n\t\t\t\t});\n\t\t\tdp[i][2] = max({\n\t\t\t\tdp[i-1][2]+a[i]\n\t\t\t\t});\n\t\t}\n\t\telse{\n\t\t\tdp[i][1] = max({\n\t\t\t\tdp[i-1][0]-a[i], \n\t\t\t\tdp[i-1][1]-a[i], \n\t\t\t\tdp[i-1][2]-a[i]\n\t\t\t\t});\n\t\t\tdp[i][2] = max({\n\t\t\t\tdp[i-1][1]+a[i], \n\t\t\t\tdp[i-1][2]+a[i]\n\t\t\t\t});\n\t\t}\n\t}\n\tcout << max({dp[n-1][0], dp[n-1][1], dp[n-1][2]}) << endl;\n}\n\nint main() {\n\tinit();\n    input();\n    solve();\n\treturn 0;\n}\n\n\n\n\n\n\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\nconst int N=2e5+5;\nint a[N];\nlong long f[N][3];\nint main()\n{\n\tint n; scanf(\"%d%d\",&n,&a[1]);\n\tfor(int i=2;i<=n;++i)\n\t{\n\t\tchar op[2];\n\t\tscanf(\"%s%d\",op,&a[i]);\n\t\ta[i]=(op[0]=='+'?a[i]:-a[i]);\n\t}\n\tf[1][0]=a[1],f[1][1]=f[1][2]=-1ll<<60;\n\tfor(int i=2;i<=n;++i)\n\t{\n\t\tf[i][0]=max(f[i-1][0],max(f[i-1][1],f[i-1][2]))+a[i];\n\t\tf[i][1]=max(f[i-1][1],f[i-1][2])-a[i];\n\t\tf[i][2]=f[i-1][2]+a[i];\n\t\tif(a[i]<0)\n\t\t{\n\t\t\tf[i][1]=max(f[i][1],f[i-1][0]+a[i]);\n\t\t\tf[i][1]=max(f[i][1],f[i-1][1]+a[i]);\n\t\t\tf[i][1]=max(f[i][1],f[i-1][2]+a[i]);\n\t\t\tf[i][2]=max(f[i][2],f[i-1][1]-a[i]);\n\t\t\tf[i][2]=max(f[i][2],f[i-1][2]-a[i]);\n\t\t}\n\t}\n\t\tprintf(\"%lld\",max(f[n][0],max(f[n][1],f[n][2])));\n}"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<algorithm>\nusing namespace std;\ntypedef long long ll;\nconst ll INF=1ll<<60;\nint n,x; ll f[3];\nchar Getchar(){\n    static char now[1<<20],*S,*T;\n    if (T==S){\n        T=(S=now)+fread(now,1,1<<20,stdin);\n        if (T==S) return EOF;\n    }\n    return *S++;\n}\nint read(){\n    int x=0,f=1;\n    char ch=Getchar();\n    while (ch<'0'||ch>'9'){\n        if (ch=='-') f=-1;\n        ch=Getchar();\n    }\n    while (ch<='9'&&ch>='0') x=x*10+ch-'0',ch=Getchar();\n    return x*f;\n}\nint main(){\n\tn=read();\n\tf[0]=0; f[1]=-INF; f[2]=-INF;\n\tfor (int i=1;i<=n;i++){\n\t\tx=read();\n\t\tf[0]+=x; f[1]-=x; f[2]+=x;\n\t\tif (x<0) f[2]=max(f[1],f[2]),f[1]=max(f[0],f[1]);\n\t\tf[0]=max(f[0],f[1]); f[1]=max(f[1],f[2]);\n\t}\n\tprintf(\"%lld\\n\",f[0]);\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "/********************************************************************************\n\t\n\tCode by a weak man named CYJian, and he hopes the code can get more points.\n\n\tAlgorithm: \n\n ********************************************************************************/\n\n#include <bits/stdc++.h>\n\nusing namespace std;\n\ntypedef long long ll;\n\n//{{{ FAST IO AND SOME FUNCTIONS\nconst int __SIZE = 1 << 18;\nchar ibuf[__SIZE], *iS, *iT;\n\n#define ge (iS == iT ? (iT = (iS = ibuf) + fread(ibuf, 1, __SIZE, stdin), (iS == iT ? EOF : *iS++)) : *iS++)\n#define ri read_int()\n#define rl read_ll()\n#define FILE(s) freopen(s\"in\", \"r\", stdin), freopen(s\"out\", \"w\", stdout)\n\ntemplate<typename T>\ninline void read(T &x) {\n\tchar ch, t = 0; x = 0;\n\twhile(!isdigit(ch = ge)) t |= ch == '-';\n\twhile(isdigit(ch)) x = x * 10 + (ch ^ 48), ch = ge;\n\tx = t ? -x : x;\n}\ninline int read_int() { int x; return read(x), x; }\ninline ll read_ll() { ll x; return read(x), x; }\n\ntemplate<typename T> inline void chkmin(T&a, T b) { a = a < b ? a : b; }\ntemplate<typename T> inline void chkmax(T&a, T b) { a = a > b ? a : b; }\n//}}}\n\nll f[2][3];\n\nint main() {\n#ifdef LOCAL\n\tFILE(\"\");\n#endif\n\n\n\tint n = ri, x = ri, o = 0, t = 1;\n\tf[0][0] = x, f[0][1] = -1e18, f[0][2] = -1e18;\n\tfor(int i = 1; i < n; i++) {\n\t\tchar opt = ge;\n\t\twhile(opt != '-' && opt != '+') opt = ge;\n\t\tx = ri;\n\t\tif(opt == '+') {\n\t\t\tf[t][0] = max(f[o][0], max(f[o][1], f[o][2])) + x;\n\t\t\tf[t][1] = max(f[o][1], f[o][2]) - x;\n\t\t\tf[t][2] = f[o][2] + x;\n\t\t} else {\n\t\t\tf[t][0] = max(f[o][0] - x, max(f[o][1], f[o][2]) + x);\n\t\t\tf[t][1] = max(f[o][0] - x, max(f[o][1], f[o][2]) + x);\n\t\t\tf[t][2] = f[o][1] + x;\n\t\t} o ^= 1, t ^= 1;\n\t} cout << max(max(f[o][0], f[o][1]), f[o][2]) << endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <string>\n#include <iostream>\n#include <algorithm>\nusing namespace std;\nint n, a[100009]; long long dp[100009][7]; bool vis[100009][7]; string s[100009];\nlong long solve(int pos, int depth) {\n\tif (pos == n) return 0;\n\tif (vis[pos][depth]) return dp[pos][depth];\n\tlong long ret = -1LL << 61;\n\tif (s[pos] == \"+\") {\n\t\tret = solve(pos + 1, depth) + a[pos] * (depth % 2 ? -1 : 1);\n\t\tif (depth > 0) ret = max(ret, solve(pos + 1, depth - 1) + a[pos] * (depth % 2 ? -1 : 1));\n\t}\n\telse {\n\t\tret = solve(pos + 1, depth) + a[pos] * (depth % 2 ? 1 : -1);\n\t\tif (depth > 0) ret = max(ret, solve(pos + 1, depth - 1) + a[pos] * (depth % 2 ? 1 : -1));\n\t\tif (depth < 6) ret = max(ret, solve(pos + 1, depth + 1) + a[pos] * (depth % 2 ? 1 : -1));\n\t}\n\tvis[pos][depth] = true;\n\tdp[pos][depth] = ret;\n\treturn ret;\n}\nint main() {\n\tcin >> n;\n\ts[0] = \"+\"; cin >> a[0];\n\tfor (int i = 1; i < n; i++) cin >> s[i] >> a[i];\n\tlong long ret = solve(0, 0);\n\tcout << ret << endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n#include <vector>\n#include <set>\n#include <map>\n#include <queue>\n#include <stack>\n#include <cstdio>\n#include <cstring>\nusing namespace std;\ntypedef long long ll;\ntypedef pair<ll,ll> P;\n#define M 1000000007\n#define F first\n#define S second\n#define PB push_back\nll n,ans;\nvector<P>a;\nll p[100005];\nint main(void){\n    cin>>n;\n    ll b=1,c;\n    cin>>c;\n    for(int i=1;i<n;i++){\n        char s;\n        ll x;\n        cin>>s>>x;\n        if(s=='-'){\n            a.PB(P(b,c));\n            b=-1;\n            c=x;\n        }else{\n            if(b==1)c+=x;\n            else{\n                a.PB(P(b,c));\n                b=1;\n                c=x;\n            }\n        }\n    }\n    a.PB(P(b,c));\n    n=a.size();\n    for(int i=n-1;i>=0;i--){\n        p[i]+=p[i+1];\n        p[i]+=a[i].S;\n        ans+=a[i].F*a[i].S;\n    }\n    if(n==2){\n        cout<<a[0].S+a[1].F*a[1].S<<endl;\n        return 0;\n    }\n    ll r=a[0].S;\n    for(int i=1;i<n-1;i+=2){\n        if(a[i+1].F==1){\n            ans=max(ans,r-a[i].S-a[i+1].S+p[i+2]);\n            r=r-a[i].S+a[i+1].S;\n        }else{\n            ans=max(ans,r-a[i].S+p[i+1]);\n            break;\n        }\n    }\n    cout<<ans<<endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\ntypedef long long ll;\ntypedef pair<int,int> pii;\n\nconst int maxn=100003;\n\nint n,a[maxn],o[maxn];\nll f[maxn][3];\nchar s[3];\n\nint main(){\n\tscanf(\"%d\",&n);\n\tscanf(\"%d\",&a[1]);\n\tfor(int i=2;i<=n;++i){\n\t\tscanf(\"%s%d\",s,&a[i]);\n\t\tif(s[0]=='-')o[i]=1;\n\t}\n\tfor(int i=0;i<=n;++i)\n\t\tfor(int j=0;j<3;++j)\n\t\t\tf[i][j]=-1e18;\n\tf[0][0]=0;\n\tfor(int i=1;i<=n;++i){\n\t\tif(!o[i]){\n\t\t\tf[i][0]=max(f[i-1][0],f[i-1][1])+a[i];\n\t\t\tf[i][1]=max(f[i-1][1],f[i-1][2])-a[i];\n\t\t\tf[i][2]=f[i-1][2]+a[i];\n//\t\t\tprintf(\"%d %lld %lld %lld *\\n\",a[i],f[i][0],f[i][1],f[i][2]);\n\t\t\tcontinue;\n\t\t}\n\t\tf[i][0]=max(f[i-1][0],f[i-1][1])-a[i];\n\t\tf[i][1]=max(f[i-1][1],f[i-1][2])+a[i];\n\t\tf[i][2]=f[i-1][2]-a[i];\n\t\tf[i][1]=max(f[i][1],f[i-1][0]-a[i]);\n\t\tf[i][2]=max(f[i][2],f[i-1][1]+a[i]);\n//\t\tprintf(\"%d %lld %lld %lld *\\n\",a[i],f[i][0],f[i][1],f[i][2]);\n\t}\n\tprintf(\"%lld\\n\",max(f[n][0],f[n][1]));\n\treturn 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#define yuki(x, y) for(int i = x, __yuki = y; i < __yuki; ++i)\n#define yukj(x, y) for(int j = x, __yukj = y; j < __yukj; ++j)\n#define yukii(x, y) for(int i = x; __yukii = y; i <= __yukii; ++i)\n#define yukji(x, y) for(int j = x; __yukji = y; j <= __yukji; ++j)\n#define yuk(x, y, z) for(int x = y, __yuk = z; x < __yuk; ++x)\n#define yui(x, y, z) for(int x = y, __yui = z; x >= __yui; --x)\n#define sclr(x) memset(x, 0, sizeof(x))\n#define sclr1(x) memset(x, -1, sizeof(x))\n#define scl(x, y) memset(x, y, sizeof(x))\n#define ft first\n#define sc second\n#include <cstdio>\n#include <cstring>\n#include <algorithm>\nusing namespace std;\ntypedef long long lol;\nint n, a[100100];\nbool op[100100];\nvoid sread()\n{\n    scanf(\"%d\", &n);\n    char s[10];\n    yuki(0, n-1)\n    {\n\tscanf(\"%d%s\", a+i, s);\n\top[i+1] = s[0] == '-';\n    }\n    scanf(\"%d\", a+n-1);\n}\nint main(int argc, char **argv)\n{\n    sread();\n    lol maxs = 0, mins = 0, curs = 0, t;\n    yui(i, n-1, 1)\n\tif(op[i])\n\t{\n\t    t = maxs;\n\t    maxs = max(-a[i]+curs+maxs, -(a[i]+curs+mins));\n\t    mins = min(-(a[i]+curs)+mins, -(a[i]+curs+t));\n\t    curs = 0;\n\t}else\n\t    curs += a[i];\n    printf(\"%lld\\n\", maxs+a[0]);\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n#define ll long long\n#define FOR(i,l,r) for(ll i=(l);i<(r);++i)\n#define REP(i,n) FOR(i,0,n)\n#define REPS(i,n) FOR(i,1,n+1)\n#define RFOR(i,l,r) for(ll i=(l);i>=(r);--i)\n#define RREP(i,n) RFOR(i,n-1,0)\n#define RREPS(i,n) RFOR(i,n,1)\n#define pb push_back\n#define eb emplace_back\n#define SZ(x) ((ll)(x).size())\n#define all(x) (x).begin(),(x).end()\n#define rall(x) (x).rbegin(),(x).rend()\ntemplate<class T = ll> using V = vector<T>;\ntemplate<class T = ll> using VV = V<V<T>>;\ntemplate<class T> inline bool chmin(T& a, T b) {if (a > b) {a = b; return true; }return false; }\ntemplate<class T> inline bool chmax(T& a, T b) {if (a < b) {a = b; return true; }return false; }\ninline void Yes(bool b = true) {cout << (b ? \"Yes\" : \"No\") << '\\n';}\ninline void YES(bool b = true) {cout << (b ? \"YES\" : \"NO\") << '\\n';}\ninline void err(bool b = true) {if(b) {cout << -1 << '\\n'; exit(0);}}\ntemplate<class T> inline void fin(bool b = true, T e = 0) {if(b) {cout << e << '\\n'; exit(0);}}\ntemplate<class T> T Roundup_div(T x, T y) {return (x+(y-1))/y;}\nconst ll INF = 1e18;\n\nint main(){\n    ios::sync_with_stdio(false);\n    cin.tie(nullptr);\n    int n; cin >> n;\n    ll dp[n][3][2][2];\n    REP(i,n)REP(j,3)REP(s,2)REP(t,2) dp[i][j][s][t] = -INF;\n    //dp[i][j][s][t]はi番まで見たとき,カッコがj個ひらいていて,sはfirst(の前がminusなら1,tはsecond(の前がminusなら1のときの最大値\n    ll a; cin >> a;\n    dp[0][0][0][0] = a;\n    REP(i, n - 1){\n        char c; ll a; cin >> c >> a;\n        int z = (c == '+' ? 0 : 1);\n\n        //カッコを変化させない場合\n        REP(j,3)REP(s,2)REP(t,2)\n        chmax(dp[i+1][j][s][t], dp[i][j][s][t] + (s xor t xor z ? -a : a) );\n\n        //カッコを増やす場合\n        chmax(dp[i+1][1][z][0], dp[i][0][0][0] + (z ? -a : a) );\n        REP(s,2) chmax(dp[i+1][2][s][z], dp[i][1][s][0] + (s xor z ? -a : a) );\n\n        //カッコを減らす場合\n        REP(s,2)REP(t,2) chmax(dp[i+1][1][s][0], dp[i][2][s][t] + (s xor t xor z ? -a : a) );\n        REP(s,2) chmax(dp[i+1][0][0][0], dp[i][1][s][0] + (s xor z ? -a : a) );\n\n    }\n    cout << dp[n-1][0][0][0] << endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <assert.h>\n#include <iostream>\n#include <cstring>\n#include <vector>\n#include <cstdio>\n#include <cmath>\n\nusing namespace std;\n\ntypedef long long ll;\n\nconst int MX = 100005;\n\ntemplate <typename T> void read(T &x)\n{\n\tx = 0; char c = getchar(); bool f = 0;\n\twhile(!isdigit(c) && c!='-') c = getchar();\n\tif(c == '-') f = 1, c = getchar();\n\twhile(isdigit(c)) x = x*10+c-'0', c = getchar();\n\tif(f) x = -x;\n}\n\ntemplate <typename T> T max(const T &x, const T &y, const T &z)\n{\n\treturn max(max(x, y), z);\n}\n\nint n;\nint opr[MX], seq[MX];\nll f[MX][3];\n\nint main()\n{\n\tread(n);\n\topr[1] = +1;\n\tfor(int i=1; i<=n; i++)\n\t{\n\t\tread(seq[i]);\n\t\tif(i != n)\n\t\t{\n\t\t\tchar c = getchar();\n\t\t\twhile(c!='+' && c!='-') c = getchar();\n\t\t\tif(c == '+') opr[i+1] = +1;\n\t\t\telse opr[i+1] = -1;\n\t\t}\n\t}\n\tf[0][1] = f[0][2] = -1e18;\n\tfor(int i=1; i<=n; i++)\n\t{\n\t\tif(opr[i] == +1)\n\t\t{\n\t\t\tf[i][0] = max(f[i-1][0]+seq[i], f[i-1][1]+seq[i], f[i-1][2] + seq[i]);\n\t\t\tf[i][1] = max(f[i-1][1]-seq[i], f[i-1][2]-seq[i]);\n\t\t\tf[i][2] = f[i-1][2]+seq[i];\n\t\t}\n\t\telse\n\t\t{\n\t\t\tf[i][0] = -1e18;\n\t\t\tf[i][1] = max(f[i-1][0]-seq[i], f[i-1][1]-seq[i], f[i-1][2]-seq[i]);\n\t\t\tf[i][2] = max(f[i-1][1]+seq[i], f[i-1][2]+seq[i]);\n\t\t}\n\t\t//cout<<i<<\" : \"<<f[i][0]<<\" \"<<f[i][1]<<\" \"<<f[i][2]<<endl;\n\t}\n\tprintf(\"%lld\\n\", max(f[n][0], f[n][1], f[n][2]));\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "// Math = ♥️\n\n#include <bits/stdc++.h>\n#include <ext/pb_ds/assoc_container.hpp>\n#include <ext/pb_ds/tree_policy.hpp>\nusing namespace __gnu_pbds;\nusing namespace std;\n\n/*-------------------------------------------------------------------------------------------------------------------------*/\n#define ll long long                  // Short form for long long\n#define ld long double                // Short form for long double\ntypedef pair<ll, ll> ii;              // Pair of long long\ntypedef vector<ll> vi;                // Vector of long long\ntypedef vector<vi> vvi;               // Vector of vector of long long\ntypedef vector<ii> vii;               // Vector of pairs\ntypedef vector<vii> vvii;             // Vector of vector of pairs\n#define pq priority_queue             // Max heap (To convert to min heap, use negative sign before every value)\n#define ff first                      // For pairs\n#define ss second                     // For pairs\n#define pb push_back                  // Pushback to vector\n#define mp make_pair                  // Makes pairs to be stored as pair\n#define all(c) (c).begin(), (c).end() // Mainly used by me in sorting\n// ordered_set adds two new functions to set - (set).find_by_order([kth element based on zero indexing]) and order_of_key()\n// order_of_key returns number of elements less that parameter. If element exists, that order is its index\n#define ordered_set tree<ll, null_type, less<ll>, rb_tree_tag, tree_order_statistics_node_update>\n/*-------------------------------------------------------------------------------------------------------------------------*/\n#define MAXN (ll)(1e5 + 5)\n#define INF (ll)(1e18)\n\nll dp[MAXN][3];\nll n;\nvi arr;\n\nll solve(ll i, ll t)\n{\n    if (i == n)\n        return 0;\n\n    if (dp[i][t] == INF)\n    {\n        if (t == 0)\n        {\n            if (arr[i] < 0)\n                dp[i][t] = arr[i] + max(solve(i + 1, 0), solve(i + 1, 1));\n            else\n                dp[i][t] = arr[i] + solve(i + 1, 0);\n        }\n        else if (t == 1)\n        {\n            ll maxi = max(solve(i + 1, 0) + arr[i], solve(i + 1, 1) - arr[i]);\n            if (arr[i] < 0)\n                maxi = max(maxi, solve(i + 1, 2) - arr[i]);\n            dp[i][t] = maxi;\n        }\n        else\n            dp[i][t] = max(arr[i] + solve(i + 1, 2), max(-arr[i] + solve(i + 1, 1), arr[i] + solve(i + 1, 0)));\n    }\n    return dp[i][t];\n}\n\nint main(void)\n{\n    ios_base::sync_with_stdio(false);\n    cin.tie(NULL);\n\n    for (int i = 0; i < n; i++)\n        dp[i] = INF;\n    cin >> n;\n    arr.resize(n);\n\n    cin >> arr[0];\n\n    for (int i = 1; i < n; i++)\n    {\n        char c;\n        cin >> c >> arr[i];\n\n        if (c == '-')\n            arr[i] = -arr[i];\n    }\n\n    cout << solve(0, 0) << \"\\n\";\n}\n"
  },
  {
    "language": "C++",
    "code": "///////////////////////////////////////////////////////////\n///////////////////////////////////////////////////////////\n//                       _oo0oo_                         //\n//                      o8888888o                        //\n//                      88\" . \"88      ------ hzt1       //\n//                      (| -_- |)                        //\n//                      0\\  =  /0                        //\n//                    ___/`---'\\___                      //\n//                  .' \\|     |// '.                     //\n//                 / \\|||  :  |||// \\                    //\n//                / _||||| -:- |||||- \\                  //\n//               |   | \\  -  /// |     |                 //\n//               | \\_|  ''\\---/''  |_/ |                 //\n//               \\  .-\\__  '-'  ___/-. /                 //\n//             ___'. .'  /--.--\\  `. .'___               //\n//          .\"\" '<  `.___\\_<|>_/___.' >' \"\".             //\n//         | | :  `- \\`.;`\\ _ /`;.`/ - ` : | |           //\n//         \\  \\ `_.   \\_ __\\ /__ _/   .-` /  /           //\n//     =====`-.____`.___ \\_____/___.-`___.-'=====        //\n//                       `=---='                         //\n//                                                       //\n//                                                       //\n//     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~       //\n//                                                       //\n//                 God-He Bless All.                     //\n//           This Code Will Never Explode.               //\n//                                                       //\n//                                                       //\n///////////////////////////////////////////////////////////\n///////////////////////////////////////////////////////////\n#include<cstdio>\n#include<cstring>\n#include<cctype>\n#include<algorithm>\n#include<vector>\n#define pb push_back\n#define mp make_pair\n#define xx first\n#define yy second\n#define rep(i,a,b) for(int i=(a),i##_end_=(b);i<=i##_end_;i++)\n#define dwn(i,a,b) for(int i=(a),i##_end_=(b);i>=i##_end_;i--)\nusing namespace std;\nconst int Size=1<<16;\nchar buffer[Size],*head,*tail;\ninline char Getchar() {\n    if(head==tail) {\n        int l=fread(buffer,1,Size,stdin);\n        tail=(head=buffer)+l;\n    }\n    if(head==tail) return -1;\n    return *head++;\n}\ninline int read() {\n    int x=0,f=1;char c=Getchar();\n    for(;!isdigit(c);c=Getchar()) if(c=='-') f=-1;\n    for(;isdigit(c);c=Getchar()) x=x*10+c-'0';\n    return x*f;\n}\ninline char readc() {\n\tchar c=Getchar();\n\twhile(c!='-'&&c!='+') c=Getchar();\n\treturn c;\n}\ntypedef long long ll;\ntypedef pair<int,int> pii;\nconst int maxn=100010;\nconst ll inf=1ll<<60;\nint n,A[maxn],tp[maxn],nxt[maxn];\nll sum[maxn],S[maxn];\nint main() {\n\tn=read();ll res=read();\n\trep(i,2,n) {\n\t\tchar c=readc();A[i]=read();\n\t\tif(c=='+') tp[i]=1;\n\t\telse tp[i]=0;\n\t}\n\tS[1]=res;\n\trep(i,2,n) S[i]=S[i-1]+A[i]*(tp[i]==1?1:-1);\n\tdwn(i,n,2) sum[i]=sum[i+1]+A[i];\n\tll ans=S[n];\n\tdwn(i,n,1) {\n\t\tnxt[i]=nxt[i+1];\n\t\tif(tp[i]==0) nxt[i]=i;\n\t}\n\t//printf(\"%lld\\n\",ans);\n\trep(i,2,n) if(!tp[i]) {\n\t\tint j=nxt[i+1];\n\t\tif(!j) break;\n\t//\tprintf(\"%d %d %lld\\n\",i,j,sum[j]+S[i]-(sum[i+1]-sum[j]));\n\t\tans=max(ans,sum[j]+S[i]-(sum[i+1]-sum[j]));\n\t}\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "/*!|||||||!!!!!!!!!!!!!!!!!!|%%$&&&&&&&&&&&&&|'`......```':'':!;.  ......````':!;..\n||||||||||||!!!!!!!!!!!!!!!!!!!;;;;;!|%$$&&&|'..  ....``'''''::`  ......`````';:.\n||||||||||||||||||||||!!!!!!!!!!;;;;;;;;;;;'`..  ....``'''''':` ........````':'.\n|||||||||%%||%%|||||||||||||||||!;;;;;;;;'....   ....`````'''`..........````''.\n%%%%%%%%%%%%%%%%%%|%||||%%|%%%%|!;!;;;;:.       ....```````'::'`........`````.\n$$$$$$$%%$%%$$$$$%%%%%%%%%%%%%%|!!!!;'.        ....````````';|!!!!:`....```..\n$$$$$$%%%$%%$$$$$%%%%%%%%%%%%%%!;!!;`          ....```````':!!!!!!!!|||;'`.\n$$$%$%|%%||%%%%%%%%%%||%%%%%|%|!;!!:.         ....````````:!;;;!;;!!|%$$$$|:`\n%%%%%||||||||||||||||||||||||||!;!;'`.        ....```````';!!!!!!!!||;';%$&@@%:`.\n|||||||||!!|||||||||||||||||||!;!!:':'.       ..```''```';!!!!!!!||%$$%!` .'|&@@%:`. .\n||||||||!!!|||||||||||||||||||!;!;::;;:`     ..````'''`';;!!!!!!|%%$$$$&&%'   .;&#@!'....\n|||||||!!!!|||||||||||||||||||!;!;:;;;;;'.  ..```''''`:!!!!!;!!|%$$$$&&&&&@$:.   .;&#$:....\n|||!||||!!||||||||||||||||||||!;!::;;;;;;;`..```''':':;!!!!!!!!|%$$&&&&&&@&@#$:.   .`!@$:...\n|||!|||!!!|||||||||||||||||||!!;;:;;;;;;;!!;'`'''':':!;;;;;!!|||||%$&&&&@@@@@@@%`......:$$:...\n||!!||!!!!!||||||||||||||||||!!;;:;;;;;;;!!|!;'''``'':;!!;!!;!|$$$%|%&&&@@@@@@@#&;.......'%|`..\n||!!||!!!!!!|||||||||||||||!!!!;;:;;;;;;:''::::;;!;;;;':!!!!!!!!!%$&$|%&@@@@@@#@@&!`.......`|;..\n||!!|!!!!!!!||||||||||||||||||!;;:;;'````:!%%%%|;:;;:::::;|!!||!!!!|$&$%%&@@&@@##@&!'........;|'.\n|!!!|!!!!!!!|||||||||||||||!!!!;:'```';!!||!!!|!!;;;;:::::;%%||%%|||||%&$%%&@@@@@##&;`` ......'!:.\n|!!!!!!!!!!!!|||||||||||||!!!!!;::;;;;;:;!!!|||||!!;;;;;;;;!%$%|%$$%||||%$$%$&@@@@#@$:``      .`''.\n|!!!||!!!!!!!||||||||||||!!!!!!!;;;:::;;!!|||||||||!!;;;;;;;;|$%|%%$$$%|||%%$$&@&@@#@!.`'.     ...`.\n|!!!||!!!!!!!||||||||||||!!!!!!!;:;;;;;!!!!!|||||||||!!;;;;;;;|$$||%$$&&$%%%%%$&&&&@@@!.``.    ....`.\n|!!!||!!|!!||!|||||||||||!!!!!!!;;;;;;;!!||||||||||!!!;;;;;;;;;|$$||$$$&&&$%%%|%$&&&@@@; .`.    .. ...\n|!!!||!!||!!|!!|||||||||||!!!!!!!;;;;;!!||||||||!!!|||||!!;;;;;;|$$|!$$$&&&&$%%|%$&&&&@$' .`.   ..  ..\n|!!!||!!||!!||!|||||||||||!!!!!!!;;;;;!||||||!!!|||||||||!::'::::!$$!!%$$&&&&$$%!!%$$&&&!. .`.  ..\n|!!!|||!|||!!|!!|||||||||||!!!!!!!;;;!!||||!!|||||||||!;;!!!!!!;;;|$%!|$$$&&&&&$|`.;$$&&|`  .`...\n|!!!!||!||||!!|!!||||||||||!!!!!!!!!;!|||!||||||||!!!!||!:'`.`:;!!!%$%!|$$$&&&&&$;  '%$&$;   ``\n|!!!!||!!||||!!|!!|||||||%||!!!!!!!!!!||||||||||!!!|!:.      ....`';|||!|$$&&&&&@|`  '%&$%:   ..\n|!!!!|||||||||!|||!||||||%%|!!|!!!!!!!||||||||!!!;` ...      ...';||%$|;!%$$&&&&@$:   :$&$$|.  ..\n||!!!||||||||||!!||||||||%%||!!|!!!!!!|||||||!!'..```..``... `:;;;!|%$$|!|%$&&&&&&;   '|$%:!$: ...\n||!;!|||||||||||!!%|||||%%%%|||||!|!!|||||||!'..```.`'```..`!%!!%%%%|$$||!|$$&&&&&;   ';!%: `|%`..\n||!!!!!|||||%||||!!%%||%%%%%%|||||||!||||||;:`.``.`:;;`.':```:':|%%%%$$%|!;|&&&&&$:   ''`!;    :|:.\n|||!!!!!||||%%%|%%||%%|%%%$$%|||%|!||!||||!:`....';;!|%;.```''::!%%%|%$$$|';$&&&&%'  .`  ::       .`''`. .``.\n|||!!!!!||||%%%%%%%|||%%%$$$$%|%%%||%|!||!:```....`;|%$$|'':`'!;!%%%%%%$&@%!%&$$&!. .`.  ``.      .\n|||!!!|!!|%%%%%%%%%%%||%%%$$$%|%%%%||%|!|!!|||||||!;::|$$$%|%%%!!|%%%%%%$&&&$$$$%' .`    ..\n|||!!!||!!|%%%%%%%%%%%%||%%%$$%|%%$%|%%!!|||||||||||||||!!!||||%%%%%%%%%$$$$$$$$&%:.     ..\n||||!!|%|!;!%%%%%%%%%%%%%%|%%%$||%$%%|%|!!||||||||||||||%%%%%%%%$$$%%%%$$$$%%$$$&&&&&&$%'..\n!|||!!!|%|!;!%%%%%%%%%%%%%%%|%%%||%%%||%|!!!||||||||||||%%%%%%%%%%%%%%%$$$$%%$$$$$$$$$$%'\n;!||!!!|%%%|!;|%%%%%%%%%%%%%%%%|%||%%%!!||!!!|%%||||||%%%%%%%%%%%%%%%%$$$$%%%%%$$$$$$$$!`\n;;!||!!!|%%||!;!||%%%%%%%%%%%%%%%||%%%|!!|||!!!|%$%|||%%%%%%%%%%%%%%%%%%%%%%%$$$$$$$$$$;.\n;;;||!!!!|%%||!;;!|%%%%%%%|||||%%|||||||!!||||||||%$%|%%%%%%%%%%%%%%%%$%%%%%$$$$$$$$$$%'\n!!;!|!;;!!|%%|||!;!||%%%||||||||||||||||!!|%||||||||%%||%%%%%%%%%%%%$$$$$$$$$$$$$$$$$$!`\n!!;;!!;;!!!||||||!;;!|||||||||||||||!||||!;;|%%%%%%%|%%%%%%%%%%%%%%%$$$$$$$$$$$$$$$$$$%'\n!!!;;!!;;!!!||||||!!;;!||||||||||||||!||||!!!!%$%|%%%%%%%%%%%%%%%%%%$$$$$$$$$$$$$$$$$$$%'\n!!!!;;!!;;;!!!|||||!!::;|||||!|||||||!!|||||!!!|$$%%%%%%%%%%%%%%%$$$$$$$$$$$$$$$$$$$$&&&$:\n;;!!!!;!;;;;!!!|||||!!;::;!|!!!!||||||!!|||%%|!!!%&%%%%%%%%%%%%%%$$$$$$$$$$$$$$$$$$$$$&$!`\n|!!!!;!;;;;::;!!!||!||!;;;;;!!!!!!|||||!!|||%%|||!|$&$%%%%%%%%$$$$$$$$$$$$$$$$$$$$$$$$%!`\n:::;!;;;;::;::;;!!|||!!!!;;;;;!!!!!!||||!!|||%$%%||||$&$%%%%%%$$$$$$$$$$$$$$$$$$$$$$$$$%'\n;;;;;!!!!!;:::;;:;!!||!!!!!;;;;;!!!!!!||||!!||%$%%%%%%%%$$%%%$$$$$$$$$$$$$$$$$$$$$$$$$$$$:\n;;;;;;;;;!!!;::;;;:;!!|||||!!!!;;;;!!!!!|||||||%$$%%%%%%%%$$$$$$$$$$$$$$$$$$$$$$$$$$$$&$!.\n;;;;;;;;:::::::::;;;;;;!||!!!!!!!!;;;!!!!!||||||||$$%%%%%%%%%%$$$$$$$$$$$$$$$$$$$$$$$$$&!.\n;;;;;;;::;;:::;;;;:;;;;;;;;!!!|!!!!!!;;;!!!!!|%%||||%$%%%%%%%%%$$$$$$$$$$$$$$$$$$$$$$$$&%`\n;;;;;;;:::;;::;;;;;;;;;;;;::;!!!!!!!!|!;!!!!!!!|%%%%%%%%%%$$$$$$$$$$$$$$$$$$$$$$$$$$$$$&&:\n;;;;;;;::;::;:;;;;;;;;;!!!!!!!;;!!|||||!!!|!!!!!!!|%%%%%%%%%%%%%%%%$$$$$$$$$$$$$$$$$$$$&&|`\n;;;;;;;::;;;::;;;;;;;;;;!!!!!!!!!||||||||;!!|||||||||%%%%%%%%%%%%%%%$$$$$$$$$$$$$$$$$$$$&&!.\n;;;;;;;::;;;;::;;;;;;;;;;!!!!!!!!|||||||||;;;!!|||||||||%%%%%%%%%%%%%%%%$$$$$$$$$$$$$$$$$&|`\n!;;;;;;;::;;;:;;;;;;;;;;;!!!!!!!!!|||||||%!;;;;;!||||||||||%%%%%%%%%%%%%%%$$$$$$$$$$$$$$$$!.\n;!;;;;;;::;;;:;;;;::;;;;;!!!!!!!!!|||||||%%!;;;;;;!!!|||||||%%%%%%%%%%%%%%%%%%$$$$$$$$$$&|`\n:;!!;;;;:::;;;:;;;:::;;;;;!!!!!!!!||||||||$|;;;;;;;;!!!!||||||||%%%%%%%%%%%%%%%%%%%$$$|'\n::;!!;;;::::;;:;;;;::;;;;;;!!!!!!!!|||||||$$!;;;;;;;;;;;!!!!!||||||%%%%%%%%%%%%|!:`.\n:::;!!;;;:::;;;;;;;:::;;;;;!!!!!!!!||%||||%&%!;;;;;;;;;;;;!!!!!!!!!!!|!;:`.\n::::;!!!;::::;::;;;::::;;;;;!!!!!!!!|%%|||!%&%;;;;;;;;;;;;;;;;;;;;;%|`\n:::::;!!!;:::::::;;:::::;;;;!!!!!!!!||%%%%!;%$|;;;;;;;;;;;;;;;;;;%@@$:\n::::::;!!!:::::':;;::::::;;;;;!!|!!!||%$%%|!;%$!;;;;;;;;;;;;;;;;|$&@@|`\n:::::':;;!;::::'';;;::::::;;;;!!!|!!!||%$%%|;;%%;;;;;;;;;;;;;;!||%$&#@|`\n::::::':;;;:::''':;;:::::::;;;!!!||!!!|%$$%%|;;||;;;;;;;;;;;!||||%%%&#@%'\n:::::::':;;;::'. ';;::::::::;;;!!!|!!!||%$$$%;;;||;;;;;;;;;|%%|||||%%&@@*/\n#include <bits/stdc++.h>\nusing namespace std;\n\nint val[100005];\nchar fh[100005];\nint n;\nlong long dp[100005][3];\n\nint main(){\n\tscanf(\"%d\",&n);\n\tfh[1]='+';\n\tfor(int i=1;i<=n;i++){\n\t\tscanf(\"%d\",val+i);\n\t\tif(i!=n){\n\t\t\tscanf(\" %c\",fh+i+1);\n\t\t}\n\t}\n\tfor(int i=0;i<=n;i++){\n\t\tfor(int j=0;j<3;j++){\n\t\t\tdp[i][j]=-0x3f3f3f3f3f3f3f3fll;\n\t\t}\n\t}\n\tdp[0][0]=0;\n\tfor(int i=1;i<=n;i++){\n\t\tfor(int j=0;j<3;j++){\n\t\t\tif(fh[i]=='-'){\n\t\t\t\tdp[i][j+1]=max(dp[i][j+1],dp[i-1][j]+(j==1?1:-1)*val[i]);\n\t\t\t}\n\t\t\tif(j){\n\t\t\t\tdp[i][j-1]=max(dp[i][j-1],dp[i-1][j]+(j==2?-1:1)*(fh[i]=='-'?-1:1)*val[i]);\n\t\t\t}\n\t\t\tif(j>1){\n\t\t\t\tdp[i][j-1]=max(dp[i][j-1],dp[i-1][j]+(fh[i]=='-'?-1:1)*val[i]);\n\t\t\t}\n\t\t\tdp[i][j]=max(dp[i][j],dp[i-1][j]+(j%2?-1:1)*(fh[i]=='-'?-1:1)*val[i]);\n\t\t}\n\t}\n\tprintf(\"%lld\\n\",max(dp[n][0],max(dp[n][1],dp[n][2])));\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\nusing namespace std;\ntypedef long long lli;\nlli n;\nvector<lli> a;\nlli dp[100005][2][2];\nint main(int argc, char const *argv[]) {\n    cin >> n;\n    lli x;\n    char c;\n    cin >> x;\n    a.push_back(x);\n    for(lli i = 1;i < n;i++){\n        cin >> c >> x;\n        if(c == '-') a.push_back(x*-1);\n        if(c == '+'){\n            if(a.back() > 0) a.back() += x;\n            else a.push_back(x);\n        }\n    }\n    for(lli i = 0;i < a.size();i++){\n        dp[i][0][0] = dp[i][1][0] = dp[i][1][1] = -1000000000000000000;\n    }\n    dp[2][0][0] = dp[2][1][1] = a[0]+a[1];\n    for(lli i = 2;i < a.size();i++){\n        if(a[i] < 0){\n            dp[i+1][0][0] = dp[i][0][0]+a[i];\n            dp[i+1][1][0] = max(dp[i][1][0]+a[i],dp[i][1][1]-a[i]);\n            dp[i+1][1][1] = max(dp[i][1][0]+a[i],max(dp[i][1][1]-a[i],dp[i][0][0]+a[i]));\n        }else{\n            dp[i+1][0][0] = dp[i][0][0]+a[i];\n            dp[i+1][1][0] = max(dp[i][1][0]+a[i],dp[i][1][1]-a[i]);\n            dp[i+1][1][1] = max(dp[i][1][0]+a[i],dp[i][1][1]-a[i]);\n        }\n    }\n    cout << max(max(dp[a.size()][0][0],dp[a.size()][1][0]),dp[a.size()][1][1]) << endl;\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "//\n// Created by Administrator on 2020/2/6.\n//\n\n#include <bits/stdc++.h>\n\nusing namespace std;\nconst int maxn = 1e5 + 10;\nlong long a[maxn], pre[maxn], sum[maxn];\nchar opt[maxn];\n\nint main() {\n    int n;\n    while (~scanf(\"%d\", &n)) {\n        for (int i = 1; i < n; ++i) {\n            scanf(\"%lld %c\", &a[i], &opt[i]);\n            pre[i] = pre[i - 1] + a[i];\n            if (i > 1 && opt[i - 1] == '-') sum[i] = sum[i - 1] - a[i];\n            else sum[i] = sum[i - 1] + a[i];\n        }\n        scanf(\" %lld\", &a[n]);\n        if (opt[n - 1] == '-') sum[n] = sum[n - 1] - a[n];\n        else sum[n] = sum[n - 1] + a[n];\n        pre[n] = pre[n - 1] + a[n];\n        long long ans = sum[n];\n        for (int i = 1; i < n; ++i) {\n            if (opt[i] == '-') {\n                long long temp = 0;\n                int j;\n                for (j = i + 1; j < n; ++j)\n                    if (opt[j] == '-') break;\n                temp = sum[i] - (pre[j] - pre[i]) + pre[n] - pre[j];\n//                printf(\"%lld %d %d %lld %lld %lld\\n\", temp, i, j, sum[i], pre[j], pre[n]);\n                ans = max(ans, temp);\n            }\n        }\n        printf(\"%lld\\n\", ans);\n    }\n    return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define INF 0x3f3f3f3f\nusing namespace std;\ntypedef long long LL;\nconst double eps = 1e-10;\nconst int maxn = 1e5 + 100;\nvector<int >g;\nlong long a[maxn],sum[maxn],ss[maxn]; char s[maxn];\nint main() {\n#ifdef ac\n    freopen(\"in.txt\" , \"r\" , stdin);\n//    freopen(\"out.txt\" , \"w\" , stdout);\n#endif\n    int n;\n    cin >> n;\n    cin >> a[1];\n    int flag=0;\n    sum[0]=0;\n   sum[1]=ss[1]=a[1];\n//   cout <<1<<\":\" << ss[1] << \" \" << sum[1] <<endl;\n    for(int i=2;i<=n;++i) {\n        cin >> s[i]>>a[i];\n        sum[i]=sum[i-1]+a[i];\n        if(s[i]=='-')g.push_back(i),ss[i]-=a[i];\n        else ss[i]+=a[i];\n//        cout <<i<<\":\" << ss[i] << \" \" << sum[i] <<endl;\n    }\n    ss[n+1]=ss[n];sum[n+1]=sum[n];\n    g.push_back(g[g.size()-1]+1);\n    long long ans=ss[n];\n    for(int i=0;i<g.size()-1;++i) {\n        int x=g[i],y=g[i+1]-1;\n\n        ans=max(ss[x-1]-(sum[y]-sum[x-1])+(sum[n]-sum[y]),ans);\n//         cout <<x << \" \" << y << \" \" << ans << endl;\n    }\n    cout << ans << endl;\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define int long long\nconst int N = 1e5 + 5, INF = 1e18;\nusing namespace std;\nint n, dp[N][3], arr[N];\nchar c[N];\nsigned main()\n{\n    cin >> n;\n    for (int i = 0; i < n; i++)\n    {\n        for(int j = 0; j < 3; j++)\n        {\n            dp[i][j]=-INF;\n        }\n        int mult = 1;\n        if (i)\n        {\n            cin >> c[i];\n            if (c[i] == '-') mult = -1;\n        }\n        cin >> arr[i];\n        arr[i] *= mult;\n    }\n    dp[0][0] = arr[0];\n    for(int i = 1; i < n; i++)\n    {\n        dp[i][0]=dp[i-1][0] + arr[i];\n        dp[i][1]=dp[i-1][1] - arr[i];\n        if(c[i] == '-') dp[i][1] = max(dp[i][1], dp[i-1][0] + arr[i]);\n        dp[i][2]=dp[i-1][2] + arr[i];\n        if(c[i] == '-') dp[i][2] = max(dp[i][2], dp[i-1][1] - arr[i]);\n        dp[i][1]=max(dp[i][1], dp[i][2]);\n        dp[i][0]=max(dp[i][0], dp[i][1]);\n\n    }\n    cout << dp[n-1][0];\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n#define MAXN\t100005\n#define INF\t1e18\ntemplate <typename T> void read(T &x) {\n\tx = 0; int f = 1;\n\tchar c = getchar();\n\tfor (; !isdigit(c); c = getchar()) if (c == '-') f = -f;\n\tfor (; isdigit(c); c = getchar()) x = x * 10 + c - '0';\n\tx *= f;\n}\nlong long dp[3][MAXN], a[MAXN];\nvoid update (long long &x, long long y) {\n\tx = max(x, y);\n}\nint main() {\n\tint n; read(n);\n\tfor (int i = 1; i <= n; i++)\n\t\tread(a[i]);\n\tfor (int i = 0; i < MAXN; i++)\n\t\tdp[0][i] = dp[1][i] = dp[2][i] = -INF;\n\tdp[0][1] = a[1];\n\tfor (int i = 1; i < n; i++)\n\t\tif (a[i + 1] >= 0) {\n\t\t\t//Non - parentheses\n\t\t\tupdate(dp[0][i + 1], dp[0][i] + a[i + 1]);\n\t\t\tupdate(dp[1][i + 1], dp[1][i] - a[i + 1]);\n\t\t\tupdate(dp[0][i + 1], dp[1][i] - a[i + 1]);\n\t\t\tupdate(dp[2][i + 1], dp[2][i] + a[i + 1]);\n\t\t\tupdate(dp[1][i + 1], dp[2][i] + a[i + 1]);\n\t\t\tupdate(dp[0][i + 1], dp[2][i] + a[i + 1]);\n\t\t} else {\n\t\t\t//Non - parentheses\n\t\t\tupdate(dp[0][i + 1], dp[0][i] + a[i + 1]);\n\t\t\tupdate(dp[1][i + 1], dp[1][i] - a[i + 1]);\n\t\t\tupdate(dp[0][i + 1], dp[1][i] - a[i + 1]);\n\t\t\tupdate(dp[2][i + 1], dp[2][i] + a[i + 1]);\n\t\t\tupdate(dp[1][i + 1], dp[2][i] + a[i + 1]);\n\t\t\tupdate(dp[0][i + 1], dp[2][i] + a[i + 1]);\n\t\t\t//Add - parentheses\n\t\t\tupdate(dp[1][i + 1], dp[0][i] + a[i + 1]);\n\t\t\tupdate(dp[2][i + 1], dp[1][i] - a[i + 1]);\n\t\t}\n\tcout << dp[0][n] << endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#include <cstring>\n#include <cstdio>\n#include <cmath>\nusing namespace std;\n\ntypedef long long s64;\n\ninline int getint()\n{\n\tstatic char c;\n\twhile ((c = getchar()) < '0' || c > '9');\n\n\tint res = c - '0';\n\twhile ((c = getchar()) >= '0' && c <= '9')\n\t\tres = res * 10 + c - '0';\n\treturn res;\n}\n\ninline char nextChar()\n{\n\tstatic char c;\n\twhile ((c = getchar()) != '+' && c != '-');\n\n\treturn c;\n}\n\ntemplate <class T>\ninline void relax(T &a, const T &b)\n{\n\tif (b > a)\n\t\ta = b;\n}\n\nconst int MaxN = 100000;\nconst s64 INF = 0x3f3f3f3f3f3f3f3fll;\n\nint n;\n\ns64 f0, f1, f2;\n\nint main()\n{\n\tcin >> n;\n\n\tf0 = getint();\n\tf1 = f2 = -INF;\n\tfor (int i = 1; i < n; ++i)\n\t{\n\t\tif (nextChar() == '+')\n\t\t{\n\t\t\tint v = getint();\n\t\t\tf0 += v, f2 += v;\n\t\t\tf1 -= v;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tint v = getint();\n\t\t\tf0 -= v, f2 -= v;\n\t\t\tf1 += v;\n\n\t\t\trelax(f2, f1);\n\t\t\trelax(f1, f0);\n\t\t}\n\n\t\trelax(f1, f2);\n\t\trelax(f0, f1);\n\t}\n\n\tcout << f0 << endl;\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define FOR(i,a,b) for(ut i=(a);i<(ut)(b);i++)\n#define REP(i,b) FOR(i,0,b)\n#define ALL(c) c.begin(),c.end()\n#define PB push_back\n#define FF first\n#define SS second\n#define cat //cout << __LINE__ << endl;\nusing namespace std;\ntypedef long long LL;\ntypedef double ld;\ntypedef LL ut;\ntypedef complex<int> cli;\ntypedef vector<ut> VI;\ntypedef pair<ut,ut> pr;\ntypedef pair<ut,pr> ppr;\ntypedef vector<pr> Vpr;\ntypedef vector<ppr> Vppr;\ntypedef priority_queue<pr,Vpr> PQ;\ntypedef priority_queue<ut,VI,greater<ut> > PPQ;\nconst int SIZE=5+1e5;\nconst LL INF=1<<30;\nconst LL p=7+(1e9);\nLL A[SIZE];\nchar B[SIZE];\nbool isMinus[SIZE];\nint main(){\n\tint N;\n\tstring s;\n\tcin.tie(0);\n\tcin >> N;\n\tLL ans=0;\n\tcin >> ans;\n\tREP(i,N-1){\n\t\tcin >> B[i];\n\t\tcin >> A[i];\n\t\tisMinus[i]=B[i]=='-';\n\t}\n\tLL freedom=0,needm=0,cost=0;\n\tREP(j,N-1){\n\t\tint i=N-1-j-1;\n\t\tif(isMinus[i]){\n\n\t\t\tcost+=A[i];\n\t\t\tfreedom-=A[i];\n\t\t\tneedm+=A[i];\n\t\t\tfreedom=max(freedom,needm-cost*2);\n\t\t\tcost=0;\n\t\t}\n\t\telse{\n\t\t\tcost+=A[i];\n\t\t\tneedm+=A[i];\n\t\t\tfreedom+=A[i];\n\t\t}\n\t}\n\tcout << freedom+ans << endl;\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n\nusing namespace std;\n\ntypedef long long ll;\ntypedef pair<int, int> PII;\n\nconst int MM = 1e9 + 7;\nconst double eps = 1e-8;\nconst int MAXN = 2e6 + 10;\nconst ll INF = 1ll << 60;\n\nint n, m;\n\nll f[MAXN][2];\n\nint a[MAXN];\n\nvoid prework(){\n\n}\n\nint b[MAXN];\n\nvoid read(){\n\tscanf(\"%d\", &n);\n\tfor(int i = 1; i <= n; i++){\n\t\tscanf(\"%d\", &a[i]);\n\t\tchar s[10];\n\t\tif (i < n){\n\t\t\tscanf(\"%s\", s);\n\t\t\tif (s[0] == '+')\n\t\t\t\tb[i + 1] = 1;\n\t\t\telse\n\t\t\t\tb[i + 1] = -1;\n\t\t}\n\t}\n\tb[0] = b[1] = 1;\n\tf[0][0] = 0;\n\tf[0][2] = f[0][1] = -INF;\n\tfor(int i = 1; i <= n; i++){\n\t\tif (b[i] == 1){\n\t\t\tf[i][1] = max(f[i-1][1] - a[i], f[i-1][2] + a[i]);\n\t\t\tf[i][2] = f[i-1][2] + a[i];\n\t\t\tf[i][0] = max(f[i-1][0] + a[i], f[i-1][1]);\n\t\t}\n\t\telse{\n\t\t\tf[i][2] = max(f[i-1][1] + a[i], f[i-1][2] - a[i]);\n\t\t\tf[i][0] = max(f[i-1][0] - a[i], f[i][2]);\n\t\t\tf[i][1] = f[i][0];\n\t\t}\n\t\t//cout<<f[i][0]<<' '<<f[i][1]<<endl;\n\t}\n\tcout<<max(f[n][1],max(f[n][0], f[n][2]))<<endl;\n}\n\nvoid solve(int casi){\n\n}\n\nvoid printans(){\n\n}\n\n\nint main(){\n\tprework();\n\tint T = 1;\n//\tcin>>T;\n\tfor(int i = 1; i <= T; i++){\n\t\tread();\n\t\tsolve(i);\n\t\tprintans();\n\t}\n\treturn 0;\n}\n\n\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstdio>\n#include <cstring>\n#include <cassert>\n#include <cctype>\nusing namespace std;\ntypedef long long lint;\n#define cout cerr\n#define ni (next_num<int>())\ntemplate<class T>inline T next_num(){\n\tT i=0;char c;\n\twhile(!isdigit(c=getchar())&&c!='-');\n\tbool flag=c=='-';\n\tflag?c=getchar():0;\n\twhile(i=i*10-'0'+c,isdigit(c=getchar()));\n\treturn flag?-i:i;\n}\ntemplate<class T1,class T2>inline void apmax(T1 &a,const T2 &b){if(a<b)a=b;}\ntemplate<class T1,class T2>inline void apmin(T1 &a,const T2 &b){if(b<a)a=b;}\nconst int N=100010;\nconst lint LINF=0x7f7f7f7f7f7f7f7fll;\nint main(){\n\tint n=ni;\n\tlint f[3]={ni,-LINF,-LINF};\n\tfor(int i=2;i<=n;i++){\n\t\tchar c;\n\t\twhile(c=getchar(),c!='+'&&c!='-');\n\t\tint val=ni;\n\t\tif(c=='-'){\n\t\t\tf[2]=f[1],f[1]=f[0],f[0]=-LINF;\n\t\t}\n\t\tif(f[1]!=-LINF){\n\t\t\tf[1]-=val;\n\t\t\tif(f[2]!=-LINF){\n\t\t\t\tapmax(f[1],f[2]+=val);\n\t\t\t}\n\t\t\tapmax(f[0],f[1]);\n\t\t}\n\t\tassert(f[0]>=f[1]&&f[1]>=f[2]);\n\t}\n\tprintf(\"%lld\\n\",f[0]);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstdio>\n#include<algorithm>\n#include<set>\n#include<map>\n#include<queue>\n#include<cassert>\n#define PB push_back\n#define MP make_pair\n#define sz(v) (in((v).size()))\n#define forn(i,n) for(in i=0;i<(n);++i)\n#define forv(i,v) forn(i,sz(v))\n#define fors(i,s) for(auto i=(s).begin();i!=(s).end();++i)\n#define all(v) (v).begin(),(v).end()\nusing namespace std;\ntypedef long long in;\ntypedef vector<in> VI;\ntypedef vector<VI> VVI;\nint main(){\n  ios::sync_with_stdio(0);\n  cin.tie(0);\n  in n;\n  cin>>n;\n  const in inf=1e16;\n  VI bst(3,-inf);\n  VI nubst(3,-inf);\n  cin>>bst[0];\n  char sgn;\n  in ta;\n  forn(z,n-1){\n    cin>>sgn;\n    assert(sgn=='+' || sgn=='-');\n    cin>>ta;\n    nubst=VI(3,-inf);\n    if(sgn=='+'){\n      nubst[0]=max(nubst[0],bst[0]+ta);\n      nubst[1]=max(nubst[1],bst[1]-ta);\n      nubst[0]=max(nubst[0],bst[1]+ta);\n      nubst[2]=max(nubst[2],bst[2]+ta);\n    }\n    else{\n      nubst[1]=max(nubst[1],bst[0]-ta);\n      nubst[2]=max(nubst[2],bst[1]+ta);\n      nubst[2]=max(nubst[2],bst[2]+ta);\n    }\n    bst=nubst;\n  }\n  cout<<max(bst[0],max(bst[1],bst[2]))<<endl;\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\n#define int long long\n\n#define rep(i,n) for(int i=0;i<(n);i++)\n#define pb push_back\n#define all(v) (v).begin(),(v).end()\n#define fi first\n#define se second\ntypedef vector<int>vint;\ntypedef pair<int,int>pint;\ntypedef vector<pint>vpint;\n\ntemplate<typename A,typename B>inline void chmin(A &a,B b){if(a>b)a=b;}\ntemplate<typename A,typename B>inline void chmax(A &a,B b){if(a<b)a=b;}\n\nint N;\nint A[111111];\n\nint sum[111111];\n\nint dp[111111];\nsigned main(){\n    cin>>N;\n    rep(i,N){\n        char op='+';\n        if(i)cin>>op;\n        cin>>A[i];\n        if(op=='-')A[i]*=-1;\n    }\n\n    rep(i,N)sum[i+1]=sum[i]+abs(A[i]);\n\n    int L=-1001001001001001001ll;\n\n    for(int i=0;i<N;i++){\n        dp[i+1]=dp[i]+A[i];\n        chmax(dp[i+1],sum[i+1]+L);\n        if(A[i]<0)chmax(L,dp[i+1]-sum[i+1]);\n    }\n\n    cout<<dp[N]<<endl;\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n#define int long long\nconst int N=100005;\nint n,a[N],dp[N][3],opt[N];\nint get(){\n\tchar s[2];\n\tscanf(\"%s\",s);\n\tif (s[0]=='-')return 1;\n\treturn 0;\n}\nsigned main(){\n\tscanf(\"%lld\",&n);\n\tscanf(\"%lld\",&a[1]);\n\tfor (int i=2;i<=n;i++)opt[i]=get(),scanf(\"%lld\",&a[i]);\n\tdp[1][0]=a[1];\n\tdp[1][1]=dp[1][2]=-1e18;\n\tfor (int i=2;i<=n;i++){\n\t\tfor (int j=0;j<=2;j++)dp[i][j]=-1e18;\n\t\tfor (int j=0;j<=2;j++){\n\t\t\tint t=(opt[i]==1),now=((j^t)&1)?-a[i]:a[i];\n\t\t\tif (t&&j<2)dp[i][j+1]=max(dp[i][j+1],dp[i-1][j]+now);\n\t\t\tfor (int l=0;l<=j;l++)dp[i][l]=max(dp[i][l],dp[i-1][j]+now);\n\t\t}\n\t}\n\tprintf(\"%lld\\n\",max(max(dp[n][0],dp[n][1]),dp[n][2]));\n}\n"
  },
  {
    "language": "C++",
    "code": "#include \"iostream\"\n#include \"climits\"\n#include \"list\"\n#include \"queue\"\n#include \"stack\"\n#include \"set\"\n#include \"functional\"\n#include \"algorithm\"\n#include \"string\"\n#include \"map\"\n#include \"unordered_map\"\n#include \"unordered_set\"\n#include \"iomanip\"\n#include \"cmath\"\n#include \"random\"\n#include \"bitset\"\n#include \"cstdio\"\n\nusing namespace std;\n\nconst long long int MOD = 1000000007;\n\nlong long int N, M, K, H, W, L, R;\n\nint main() {\n\tios::sync_with_stdio(false);\n\tcin.tie(0);\n\n\tcin >> N;\n\tvector<long long int>v(N + 1);\n\tvector<string> s(N);\n\tcin >> v[0];\n\ts[0] = \"+\";\n\tfor (int i = 1; i < N; i++) {\n\t\tcin >> s[i] >> v[i];\n\t}\n\tvector<long long int>sum = v;\n\tfor (int i = N - 1; i >= 0; i--) {\n\t\tsum[i] += sum[i + 1];\n\t}\n\n\tvector<long long int>Mdp(N + 1, -MOD * MOD);\n\tvector<long long int>mdp(N + 1, MOD*MOD);\n\tMdp[N] = 0;\n\tmdp[N] = 0;\n\tfor (int i = N - 1; i >= 0; i--) {\n\t\tif (s[i] == \"+\") {\n\t\t\tMdp[i] = Mdp[i + 1] + v[i];\n\t\t\tmdp[i] = mdp[i + 1] + v[i];\n\t\t}\n\t\telse {\n\t\t\tMdp[i] = max(Mdp[i + 1] - v[i], -mdp[i + 1] - v[i]);\n\t\t\tmdp[i] = -sum[i];\n\t\t}\n\t}\n\tcout << Mdp[0] << endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\ntypedef long long lint;\ntypedef pair<int, int> pi;\n\nlint n, a[100005], dp[100005];\nlint sum[100005];\nint nxt[100005];\nstring s[100005];\n\nlint getsum(int ss, int e){\n\treturn sum[e] - sum[ss-1];\n}\n\nlint getcost(int x){\n\tlint ret = 0;\n\tint w = nxt[x];\n\treturn -getsum(x, w-1) + getsum(w, n);\n}\n\nint main(){\n\tscanf(\"%lld %lld\",&n, &a[1]);\n\tsum[1] = a[1];\n\tfor(int i=2; i<=n; i++){\n\t\tcin >> s[i] >> a[i];\n\t\tsum[i] = sum[i-1] + a[i];\n\t}\n\tnxt[n+1] = n+1;\n\tfor(int i=n; i>=2; i--){\n\t\tif(s[i] == \"+\"){\n\t\t\tnxt[i] = nxt[i+1];\n\t\t\tdp[i] = dp[i+1] + a[i];\n\t\t}\n\t\telse{\n\t\t\tnxt[i] = i;\n\t\t\tdp[i] = max(dp[i+1] - a[i], getcost(i+1) - a[i]);\n\t\t}\n\t}\n\tcout << dp[2] + a[1] << endl;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<iostream>\n#define gmax(x, y) if ((y) > x) x = (y);\nusing namespace std;\ntypedef long long ll;\ninline char nc() {\n\tstatic char b[1<<12],*s=b,*t=b;\n\treturn s==t&&(t=(s=b)+fread(b,1,1<<12,stdin),s==t)?-1:*s++;\n}\ntemplate < class T >\ninline void read(T &x) {\n\tchar b = nc(); x = 0;\n\tfor (; !isdigit(b); b = nc());\n\tfor (; isdigit(b); b = nc()) x = x * 10 + b - '0';\n}\ninline ll read() {\n\tchar b = nc();\n\tfor (; b != '-' && b != '+'; b = nc());\n\treturn b == '-' ? -1 : 1;\n}\nint n;\nll f0, f1, f2;\nint main() {\n\tread(n); read(f0); f1 = f2 = -1e15;\n\tfor (int a, op, i = 1; i < n; ++i) {\n\t\top = read(); read(a);\n\t\tf0 += a * op; f1 -= a * op; f2 += a * op;\n\t\tif (op == -1) {\n\t\t\tgmax(f1, f0); gmax(f2, f1);\n\t\t} gmax(f1, f2); gmax(f0, f1);\n\t} printf(\"%lld\\n\", f0);\n\treturn 0;\t\n}\n"
  },
  {
    "language": "C++",
    "code": "//Created Time:2019年12月02日 星期一 21时16分28秒\n#include <iostream>\n#include <cstdio>\n#include <algorithm>\n#include <cstring>\n\nusing namespace std;\n\nint main(){\n\tint n; scanf(\"%d\", &n);\n\tlong long ans = 0, sum = 99999999999999, tmp = 9999999999999;\n\tscanf(\"%d\", &ans); \n\tfor(int i = 1; i < n; ++i){\n\t\tbool flag = false; char ch = getchar(); int x = 0;\n\t\tfor(; !isdigit(ch); ch = getchar()) flag |= (ch == '-');\n\t\tfor(; isdigit(ch); ch = getchar()) x = (x * 10) + (ch ^ 48);\n\t\tif(flag) sum = min(sum, tmp), tmp = x;\n\t\telse tmp += x; ans += x;\n\t}\n\tcout << ans - sum * 2 << endl;\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <cassert>// c\n#include <iostream>// io\n#include <iomanip>\n#include <fstream>\n#include <sstream>\n#include <vector>// container\n#include <map>\n#include <set>\n#include <queue>\n#include <bitset>\n#include <stack>\n#include <algorithm>// other\n#include <complex>\n#include <numeric>\n#include <functional>\n#include <random>\n#include <regex>\nusing namespace std;\n\ntypedef long long ll;typedef unsigned long long ull;typedef long double ld;\n\n#define ALL(c) c.begin(),c.end()\n#define IN(l,v,r) (l<=v && v < r)\ntemplate<class T> void UNIQUE(T& v){v.erase(unique(ALL(v)),v.end());}\n//debug==\n#define DUMP(x) cerr << #x <<\" = \" << (x)\n#define LINE() cerr<< \" (L\" << __LINE__ << \")\"\n\nstruct range{\n\tstruct Iter{\n\t\tint v,step;\n\t\tIter& operator++(){v+=step;return *this;}\n\t\tbool operator!=(Iter& itr){return v<itr.v;}\n\t\tint& operator*(){return v;}\n\t};\n\tIter i, n;\n\trange(int i, int n,int step):i({i,step}), n({n,step}){}\n\trange(int i, int n):range(i,n,1){}\n\trange(int n):range(0,n){}\n\tIter& begin(){return i;}\n\tIter& end(){return n;}\n};\nstruct rrange{\n\tstruct Iter{\n\t\tint v,step;\n\t\tIter& operator++(){v-=step;return *this;}\n\t\tbool operator!=(Iter& itr){return v>itr.v;}\n\t\tint& operator*(){return v;}\n\t};\n\tIter i, n;\n\trrange(int i, int n,int step):i({i-1,step}), n({n-1,step}){}\n\trrange(int i, int n):rrange(i,n,1){}\n\trrange(int n) :rrange(0,n){}\n\tIter& begin(){return n;}\n\tIter& end(){return i;}\n};\n\n//input\ntemplate<typename T1,typename T2> istream& operator >> (istream& is,pair<T1,T2>& p){return is>>p.first>>p.second;}\ntemplate<typename T1> istream& operator >> (istream& is,tuple<T1>& t){return is >> get<0>(t);}\ntemplate<typename T1,typename T2> istream& operator >> (istream& is,tuple<T1,T2>& t){return is >> get<0>(t) >> get<1>(t);}\ntemplate<typename T1,typename T2,typename T3> istream& operator >> (istream& is,tuple<T1,T2,T3>& t){return is >>get<0>(t)>>get<1>(t)>>get<2>(t);}\ntemplate<typename T1,typename T2,typename T3,typename T4> istream& operator >> (istream& is,tuple<T1,T2,T3,T4>& t){return is >> get<0>(t)>>get<1>(t)>>get<2>(t)>>get<3>(t);}\ntemplate<typename T> istream& operator >> (istream& is,vector<T>& as){for(int i:range(as.size()))is >>as[i];return is;}\n//output\ntemplate<typename T> ostream& operator << (ostream& os, const set<T>& ss){for(auto a:ss){if(a!=ss.begin())os<<\" \"; os<<a;}return os;}\ntemplate<typename T1,typename T2> ostream& operator << (ostream& os, const pair<T1,T2>& p){return os<<p.first<<\" \"<<p.second;}\ntemplate<typename K,typename V> ostream& operator << (ostream& os, const map<K,V>& m){bool isF=true;for(auto& p:m){if(!isF)os<<endl;os<<p;isF=false;}return os;}\ntemplate<typename T1> ostream& operator << (ostream& os, const tuple<T1>& t){return os << get<0>(t);}\ntemplate<typename T1,typename T2> ostream& operator << (ostream& os, const tuple<T1,T2>& t){return os << get<0>(t)<<\" \"<<get<1>(t);}\ntemplate<typename T1,typename T2,typename T3> ostream& operator << (ostream& os, const tuple<T1,T2,T3>& t){return os << get<0>(t)<<\" \"<<get<1>(t)<<\" \"<<get<2>(t);}\ntemplate<typename T1,typename T2,typename T3,typename T4> ostream& operator << (ostream& os, const tuple<T1,T2,T3,T4>& t){return os << get<0>(t)<<\" \"<<get<1>(t)<<\" \"<<get<2>(t)<<\" \"<<get<3>(t);}\ntemplate<typename T> ostream& operator << (ostream& os, const vector<T>& as){for(int i:range(as.size())){if(i!=0)os<<\" \"; os<<as[i];}return os;}\ntemplate<typename T> ostream& operator << (ostream& os, const vector<vector<T>>& as){for(int i:range(as.size())){if(i!=0)os<<endl; os<<as[i];}return os;}\n\n// values\ntemplate<typename T> inline T INF(){assert(false);};\ntemplate<> inline int INF<int>(){return 1<<28;};\ntemplate<> inline ll INF<ll>(){return 1LL<<60;};\ntemplate<> inline double INF<double>(){return 1e16;};\ntemplate<> inline long double INF<long double>(){return 1e16;};\n\ntemplate<class T> inline T EPS(){assert(false);};\ntemplate<> inline int EPS<int>(){return 1;};\ntemplate<> inline ll EPS<ll>(){return 1LL;};\ntemplate<> inline double EPS<double>(){return 1e-12;};\ntemplate<> inline long double EPS<long double>(){return 1e-12;};\n\n// min{2^r | n < 2^r}\ntemplate<typename T> inline T upper_pow2(T n){ T res=1;while(res<n)res<<=1;return res;}\n// max{d | 2^d  <= n}\ntemplate<typename T> inline T msb(T n){ int d=62;while((1LL<<d)>n)d--;return d;}\n\ntemplate<typename T,typename U> T pmod(T v,U M){return (v%M+M)%M;}\n\nclass Main{\n\tpublic:\n\n\tvoid run(){\n\t\tint N;cin >> N;\n\n\t\tvector<vector<ll>> dp(N+1,vector<ll>(3,-INF<ll>()));\n\t\tcin >> dp[1][0];\n\t\tfor(int i:range(1,N)){\n\t\t\tchar c;ll a;cin >> c >> a;\n\t\t\tfor(int nest:range(3)){\n\t\t\t\tif(c =='+'){\n\t\t\t\t\tfor(int nnest:range(nest+1)){\n\t\t\t\t\t\tdp[i+1][nnest] = max(dp[i+1][nnest],dp[i][nest]+(nnest%2?-1:1)*a);\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tfor(int nnest:range(nest+1)){\n\t\t\t\t\t\tdp[i+1][nnest] = max(dp[i+1][nnest],dp[i][nest]-(nnest%2?-1:1)*a);\n\t\t\t\t\t}\n\t\t\t\t\tfor(int nnest:range(1,nest+2))if(nnest < 3){\n\t\t\t\t\t\tdp[i+1][nnest] = max(dp[i+1][nnest],dp[i][nest]-((nnest-1)%2?-1:1)*a);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tll Mv = 0;\n\t\tfor(int nest:range(3)) Mv=max(Mv,dp[N][nest]);\n\t\tcout << Mv << endl;\n\n\t}\n};\n\nint main(){\n\tcout <<fixed<<setprecision(20);\n\tcin.tie(0);\n\tios::sync_with_stdio(false);\n\tMain().run();\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <cstring>\n#include <algorithm>\nusing namespace std;\ntypedef long long ll;\nconst int N = 1e5 + 5;\nconst ll inf = 1e15;\nint n;\nll a[N], dp[N][3];\nchar s[N][2];\nint main() {\n    scanf(\"%d\", &n);\n    for(int i = 1; i < n; ++i) {\n        scanf(\"%lld%s\", &a[i], s[i]);\n    }\n    scanf(\"%lld\", &a[n]);\n    dp[1][0] = a[1];\n    dp[1][1] = dp[1][2] = -inf; \n    for(int i = 2; i <= n; ++i) {\n        if(s[i - 1][0] == '-') {\n            dp[i][0] = -inf;\n            dp[i][1] = max(dp[i - 1][0], dp[i - 1][1]) - a[i];\n            dp[i][2] = max(dp[i - 1][1], dp[i - 1][2]) + a[i];\n        } else {\n            dp[i][0] = max(dp[i - 1][0], dp[i - 1][1]) + a[i];\n            dp[i][1] = max(dp[i - 1][2], dp[i - 1][1]) - a[i];\n            dp[i][2] = dp[i - 1][2] + a[i];\n        }\n    }\n    printf(\"%lld\\n\", max(max(dp[n][0], dp[n][1]), dp[n][2]));\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n\nusing namespace std;\n\nlong A[100000];\nlong sum[100001];\nlong sum_abs[100001];\nvector<int> negs;\n\nint main(){\n    int N;\n    cin >> N;\n    //cout << negs.size() << endl;\n    long ans;\n    sum[0] = 0;\n    sum_abs[0] = 0;\n    cin >> A[0];\n    sum[1] = A[0];\n    sum_abs[1] = A[0];\n    for(int i = 1; i < N; i++){\n        char op;\n        cin >> op;\n        cin >> A[i];\n        if(op == '-') {\n            A[i] *= -1;\n            negs.push_back(i);\n        }\n        sum[i+1] = sum[i]+A[i];\n        sum_abs[i+1] = sum_abs[i]+abs(A[i]);\n    }\n    ans = sum[N];\n    for(int i = 0; i+1 < negs.size(); i++){\n        int l = negs[i];\n        int r = negs[i+1];\n        long tmp = sum_abs[N]-sum_abs[r] + sum[l+1] - (sum_abs[r]-sum_abs[l+1]);\n        ans = max(ans, tmp);\n    }\n    cout << ans << endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<algorithm>\nusing namespace std;\nconst int MAXN=int(1e5+5);\ntypedef long long LL;\n#define INF LL(1e15)\nLL s1,s2,as,n;\nLL sz[MAXN],fh[MAXN];\nchar c[5];\nint main()\n{\n\tscanf(\"%lld\",&n);\n\tscanf(\"%lld\",&as);\n\tgetchar();\n\tfor(LL i=1;i<=n-1;i++) {\n\t\tscanf(\"%s\",c);\n\t\tscanf(\"%d\",&sz[i]);\n\t\tfh[i]=c[0];\n\t}\n\ts1=s2=-INF;\n\tfor(LL i=1;i<=n-1;i++) {\n\t\tif(fh[i]=='-') {\n\t\t\tas-=sz[i];\n\t\t\ts2-=sz[i];\n\t\t\ts1+=sz[i];\n\t\t\ts2=max(s1,s2);\n\t\t\ts1=max(as,s1);\n\t\t\tas=max(s1,s2);\n\t\t}\n\t\telse {\n\t\t\tas+=sz[i];\n\t\t\ts2+=sz[i];\n\t\t\ts1-=sz[i];\n\t\t\ts1=max(s1,s2);\n\t\t\tas=max(s1,as);\n\t\t}\n\t}\n\tprintf(\"%lld\",as); \n}\n/*\n5\n7 - 8 + 9 - 10 - 2*/"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define N 100005\n#define LL long long\n#define mod 1000000007\n#define pr pair<int,int>\n#define mp(x,y) make_pair(x,y)\nusing namespace std;\n\nint read(){\n\tchar c=getchar();\n\tint t=0,f=1;\n\twhile(c>'9'||c<'0') f=(c=='-')?-1:1,c=getchar();\n\twhile(c>='0'&&c<='9') t=t*10+c-'0',c=getchar();\n\treturn t*f;\n}\n\nint n,op[N];\nLL sum[N],absum[N]; \nchar ch[2];\n\nint main(){\n\tn=read(),sum[1]=absum[1]=read();\n\tfor(int i=2,x;i<=n;i++){\n\t\tscanf(\"%s\",ch),op[i]=(ch[0]=='-')?-1:1;\n\t\tx=read(),sum[i]=sum[i-1]+x*op[i],absum[i]=absum[i-1]+x;\n\t}\n\tLL ans=sum[n];\n\tfor(int i=2,j;i<=n;i=j){\n\t\tif(op[i]>0) continue;\n\t\tLL tmp=sum[i-1];\n\t\tj=i+1;\n\t\twhile(op[j]>0&&j<=n) j++;\n\t\ttmp+=(absum[n]-absum[j-1])-(absum[j-1]-absum[i-1]);\n\t\tans=max(ans,tmp);\n\t}\n\tprintf(\"%lld\\n\",ans);\n}\n/*\n3\n5 - 1 - 3\n5\n1 - 20 - 13 + 14 - 5\n*/"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\n#define pb push_back\n#define mp make_pair\n\n#define fi first\n#define se second\n\ntypedef long long ll;\n\nusing namespace std;\n\nconst ll INF = 2e15;\n\nll dp2[505][505];\n\nll dp[505][505];\n\nchar sign[505];\n\nint arr[505];\n\nint n;\n\nvoid solve() {\n    scanf(\"%d\", &n);\n\n    assert(n <= 500);\n\n    for (int i = 1; i <= n; ++i) {\n        scanf(\"%d\", &arr[i]);\n\n        if (i < n) {\n            scanf(\" %c\", &sign[i]);\n        }\n    }\n\n    for (int i = 1; i <= n; ++i) {\n        dp[i][i] = dp2[i][i] = arr[i];\n    }\n\n    for (int len = 2; len <= n; ++len) {\n        for (int l = 1; l + len - 1 <= n; ++l) {\n            int r = l + len - 1;\n\n            for (int i = l; i <= r; ++i) {\n                if (i == l || sign[i - 1] == '+') {\n                    dp[l][r] += arr[i];\n                    dp2[l][r] += arr[i];\n                }\n                else {\n                    dp[l][r] -= arr[i];\n                    dp2[l][r] -= arr[i];\n                }\n            }\n\n            for (int i = l; i < r; ++i) {\n                if (sign[i] == '-') {\n                    dp[l][r] = max(dp[l][r], dp[l][i] - dp2[i + 1][r]);\n                    dp2[l][r] = min(dp2[l][r], dp2[l][i] - dp[i + 1][r]);\n                }\n            }\n        }\n    }\n\n    printf(\"%lld\", dp[1][n]);\n}\n\nint main() {\n    #ifdef BThero\n        freopen(\"input.txt\", \"r\", stdin);\n        freopen(\"output.txt\", \"w\", stdout);\n    #endif // BThero\n\n    int tt = 1;\n\n    while (tt--) {\n        solve();\n    }\n\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\ntypedef long long ll;\ntypedef long double ld;\nconst int maxn = 1e5 + 100;\nconst ll INF = 1e18;\nconst int MOD = 1e9 + 7;\n\nll t[4 * maxn];\nll to_add[4 * maxn];\nvoid push(int v) {\n    if (to_add[v]) {\n        t[v << 1] += to_add[v];\n        t[v << 1 | 1] += to_add[v];\n        to_add[v << 1] += to_add[v];\n        to_add[v << 1 | 1] += to_add[v];\n        to_add[v] = 0;\n    }\n}\nvoid add(int v, int tl, int tr, int l, int r, int val) {\n    if (tl >= r || l >= tr) {\n        return;\n    }\n    if (tl >= l && tr <= r) {\n        to_add[v] += val;\n        t[v] += val;\n        return;\n    }\n    int tm = (tl + tr) >> 1;\n    push(v);\n    add(v << 1, tl, tm, l, r, val);\n    add(v << 1 | 1, tm, tr, l, r, val);\n    t[v] = max(t[v << 1], t[v << 1 | 1]);\n}\nll get(int v, int tl, int tr, int l, int r) {\n    if (l >= tr || tl >= r) {\n        return -INF;\n    }\n    if (tl >= l && tr <= r) {\n        return t[v];\n    }\n    push(v);\n    int tm = (tl + tr) >> 1;\n    return max(get(v << 1, tl, tm, l, r), get(v << 1 | 1, tm, tr, l, r));\n}\nint main() {\n    int n;\n    cin >> n;\n\n    vector<int> vals;\n    vector<char> symbols;\n    symbols.push_back('+');\n    for (int i = 0; i + 1 < n; ++i) {\n        int x;\n        cin >> x;\n        vals.emplace_back(x);\n        char c;\n        cin >> c;\n        symbols.emplace_back(c);\n    }\n    int x;\n    cin >> x;\n    vals.push_back(x);\n    if (n == 1) {\n        cout << vals.back();\n        return 0;\n    }\n    vector<vector<ll>> dp(n + 1, vector<ll>(3));\n    for (auto &vec:dp) {\n        for (auto &el:vec) {\n            el = -INF;\n        }\n    }\n    dp[0][0] = 0;\n    auto get_sign = [](int pw) {\n        return pw & 1 ? -1 : 1;\n    };\n    for (int i = 0; i < n; ++i) {\n        for (int j = 0; j <= 2; ++j) {\n            if (dp[i][j] == -INF) {\n                continue;\n            }\n//            cout << i << \" \" << j << \" \" << dp[i][j] << endl;\n            if (symbols[i] == '-') {\n                if (j == 0) {\n                    dp[i + 1][j + 1] = max(dp[i + 1][j + 1], dp[i][j] + get_sign(j + 1) * vals[i]);\n                } else {\n                    for (int e = 1; e <= 2; ++e) {\n                        dp[i + 1][e] = max(dp[i + 1][e], dp[i][j] + get_sign(e) * vals[i]);\n                    }\n                }\n            } else {\n                for (int e = 0; e <= j; ++e) {\n                    dp[i + 1][e] = max(dp[i + 1][e], dp[i][j] + get_sign(e) * vals[i]);\n                }\n            }\n        }\n    }\n    cout << max({dp[n][0], dp[n][1], dp[n][2]});\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n \nconst int N = 100005;\nconst int M = 3;\nconst long long inf = 1e18+7;\n \n#define REP(i, n) for (int (i) = 0; (i) < (n); ++(i))\n \nint n, a[N];\nchar c;\nlong long f[N][M+1];\n \nint main() {\n\tios::sync_with_stdio(false);\n \n\tcin >> n >> a[0];\n\tfor (int i = 1; i < n; ++i) {\n\t\tcin >> c >> a[i];\n\t\tif (c == '-') a[i] *= -1;\n\t}\n\tREP(i, n+1) REP(a, M+1) {\n\t\tf[i][a] = -inf;\n\t}\n\tf[0][0] = 0;\n\tREP(i, n) REP(x, M) {\n\t\tif (f[i][x] == -inf) continue;\n\t\tlong long val = f[i][x] + (x%2?-1:+1)*a[i];\n\t\tf[i+1][x] = max(f[i+1][x], val);\n\t\tif (a[i] < 0) f[i+1][min(x+1,M)] = max(f[i+1][min(x+1,M)], val);\n\t\tif (x > 0) f[i+1][max(x-1,0)] = max(f[i+1][max(x-1,0)], val);\n\t}\n\tlong long result = -inf;\n\tREP(a, M) result = max(result, f[n][a]);\n\tcout << result << endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "// includes\n#include <bits/stdc++.h>\nusing namespace std;\n\n// macros\n#define pb emplace_back\n#define mk make_pair\n#define FOR(i, a, b) for(int i=(a);i<(b);++i)\n#define rep(i, n) FOR(i, 0, n)\n#define rrep(i, n) for(int i=((int)(n)-1);i>=0;i--)\n#define irep(itr, st) for(auto itr = (st).begin(); itr != (st).end(); ++itr)\n#define irrep(itr, st) for(auto itr = (st).rbegin(); itr != (st).rend(); ++itr)\n#define all(x) (x).begin(),(x).end()\n#define sz(x) ((int)(x).size())\n#define UNIQUE(v) v.erase(unique(v.begin(), v.end()), v.end())\n#define bit(n) (1LL<<(n))\n// functions\ntemplate <class T>bool chmax(T &a, const T &b){if(a < b){a = b; return 1;} return 0;}\ntemplate <class T>bool chmin(T &a, const T &b){if(a > b){a = b; return 1;} return 0;}\ntemplate <typename T> istream &operator>>(istream &is, vector<T> &vec){for(auto &v: vec)is >> v; return is;}\ntemplate <typename T> ostream &operator<<(ostream &os, const vector<T>& vec){for(int i = 0; i < vec.size(); i++){ os << vec[i]; if(i + 1 != vec.size())os << \" \";} return os;}\ntemplate <typename T> ostream &operator<<(ostream &os, const set<T>& st){for(auto itr = st.begin(); itr != st.end(); ++itr){ os << *itr; auto titr = itr; if(++titr != st.end())os << \" \";} return os;}\ntemplate <typename T> ostream &operator<<(ostream &os, const unordered_set<T>& st){for(auto itr = st.begin(); itr != st.end(); ++itr){ os << *itr; auto titr = itr; if(++titr != st.end())os << \" \";} return os;}\ntemplate <typename T> ostream &operator<<(ostream &os, const multiset<T>& st){for(auto itr = st.begin(); itr != st.end(); ++itr){ os << *itr; auto titr = itr; if(++titr != st.end())os << \" \";} return os;}\ntemplate <typename T> ostream &operator<<(ostream &os, const unordered_multiset<T>& st){for(auto itr = st.begin(); itr != st.end(); ++itr){ os << *itr; auto titr = itr; if(++titr != st.end())os << \" \";} return os;}\ntemplate <typename T1, typename T2> ostream &operator<<(ostream &os, const pair<T1, T2> &p){os << p.first << \" \" << p.second; return os;}\ntemplate <typename T1, typename T2> ostream &operator<<(ostream &os, const map<T1, T2> &mp){for(auto itr = mp.begin(); itr != mp.end(); ++itr){ os << itr->first << \":\" << itr->second; auto titr = itr; if(++titr != mp.end())os << \" \"; } return os;}\ntemplate <typename T1, typename T2> ostream &operator<<(ostream &os, const unordered_map<T1, T2> &mp){for(auto itr = mp.begin(); itr != mp.end(); ++itr){ os << itr->first << \":\" << itr->second; auto titr = itr; if(++titr != mp.end())os << \" \"; } return os;}\n//  types\nusing ll = long long int;\nusing P = pair<int, int>;\n// constants\nconst int inf = 1e9;\nconst ll linf = 1LL << 50;\nconst double EPS = 1e-10;\nconst int mod = 1000000007;\nconst int dx[4] = {-1, 0, 1, 0};\nconst int dy[4] = {0, -1, 0, 1};\n// io\nstruct fast_io{\n  fast_io(){ios_base::sync_with_stdio(false); cin.tie(0); cout << fixed << setprecision(20);}\n} fast_io_;\n\nll dp[100010][3];\n\nint main(int argc, char const* argv[])\n{\n  int n; cin >> n;\n  vector<ll> a(n);\n  vector<string> op(n-1);\n  cin >> a[0];\n  rep(i, n - 1)cin >> op[i] >> a[i+1];\n  rep(i, n)rep(j, 3)dp[i][j] = - linf;\n  dp[0][0] = a[0];\n  rep(i, n - 1){\n    if(op[i] == \"+\"){\n      chmax(dp[i+1][0], dp[i][0] + a[i+1]);\n      chmax(dp[i+1][1], dp[i][1] - a[i+1]);\n      chmax(dp[i+1][2], dp[i][2] + a[i+1]);\n      chmax(dp[i+1][1], dp[i][2] + a[i+1]);\n      chmax(dp[i+1][0], dp[i][1] - a[i+1]);\n    }else{\n      chmax(dp[i+1][0], dp[i][0] - a[i+1]);\n      chmax(dp[i+1][1], dp[i][1] + a[i+1]);\n      chmax(dp[i+1][2], dp[i][2] - a[i+1]);\n      chmax(dp[i+1][1], dp[i][2] - a[i+1]);\n      chmax(dp[i+1][0], dp[i][1] + a[i+1]);\n      chmax(dp[i+1][1], dp[i][0] - a[i+1]);\n      chmax(dp[i+1][2], dp[i][1] + a[i+1]);\n      chmax(dp[i+1][2], dp[i][2] - a[i+1]);\n    }\n  }\n  cout << dp[n-1][0] << endl;\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define INF 0x3f3f3f3f\nusing namespace std;\ntypedef long long LL;\nconst double eps = 1e-10;\nconst int maxn = 1e5 + 100;\nvector<int>g;\nlong long a[maxn],sum[maxn],ss[maxn]; char s[maxn];\nint main() {\n#ifdef ac\n    freopen(\"in.txt\" , \"r\" , stdin);\n//    freopen(\"out.txt\" , \"w\" , stdout);\n#endif\n    int n;\n    cin >> n;\n    cin >> a[1];\n    if(n==1)\n    sum[0]=0;ss[0]=0;\n    sum[1]=ss[1]=a[1];int flag=0;\n\n    for(int i=2;i<=n;++i) {\n        cin >> s[i] >> a[i];\n        sum[i]=sum[i-1]+a[i];\n        if(s[i]=='-'){g.push_back(i);ss[i]=ss[i-1]-a[i];flag=1;}\n        else ss[i]=ss[i-1]+a[i];\n    }\n    if(!flag){cout <<sum[n]<<endl;return 0;}\n    ss[n+1]=ss[n];sum[n+1]=sum[n];\n    g.push_back(g[g.size()-1]+1);\n    long long ans=ss[n];\n    for(int i=0;i<g.size()-1;++i) {\n        int x=g[i],y=g[i+1]-1;\n\n        ans=max(ss[x-1]-(sum[y]-sum[x-1])+(sum[n]-sum[y]),ans);\n//         cout <<x << \" \" << y << \" \" << ans << endl;\n    }\n    cout << ans << endl;\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\nusing lint = long long int;\n\nint N;\n\nint main()\n{\n    cin >> N;\n    char c;\n    lint sum, now, msum = 0;\n    cin >> sum;\n    lint tmp = 0;\n    vector<lint> mlst;\n    for (int i=1; i<N; i++)\n    {\n        cin >> c >> now;\n        sum += now;\n        if (c == '-') {\n            mlst.push_back(tmp);\n            msum += now;\n            tmp = msum;\n        }\n        else {\n            tmp += now;\n        }\n    }\n    if (!mlst.empty()) mlst[0] = -1;\n    mlst.push_back(msum);\n    sort(mlst.begin(), mlst.end());\n    cout << sum - mlst[1] * 2 << endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <map>\n#include <set>\n#include <queue>\n#include <algorithm>\n#include <iomanip>\n#include <cassert>\nusing namespace std;\n\n#define GET_ARG(a,b,c,F,...) F\n#define REP3(i,s,e) for (i = s; i <= e; i++)\n#define REP2(i,n) REP3 (i,0,(int)(n)-1)\n#define REP(...) GET_ARG (__VA_ARGS__,REP3,REP2) (__VA_ARGS__)\n#define RREP3(i,s,e) for (i = s; i >= e; i--)\n#define RREP2(i,n) RREP3 (i,(int)(n)-1,0)\n#define RREP(...) GET_ARG (__VA_ARGS__,RREP3,RREP2) (__VA_ARGS__)\n#define DEBUG(x) cerr << #x \": \" << x << endl\n\ntypedef long long ll;\n\nconst ll INF = 1e15;\n\nll dp[100001][2];\nint a[100000];\nchar op[100000];\nbool mis[100000];\n\nint main(void) {\n    int i, n;\n    scanf(\"%d\",&n);\n    REP (i,n-1) scanf(\"%d %c\",&a[i],&op[i]);\n    scanf(\"%d\",&a[n-1]);\n    REP (i,n-1) mis[i] = op[i] == '-';\n    REP (i,n-1) mis[i+1] |= mis[i];\n    REP (i,n) {\n        dp[i][0] = INF;\n        dp[i][1] = -INF;\n    }\n    RREP (i,n-1,1) {\n        if (op[i-1] == '+') {\n            if (mis[i-1]) {\n                dp[i][0] = min(a[i]+dp[i+1][0],-a[i]+dp[i+1][1]);\n                dp[i][1] = max(a[i]+dp[i+1][1],-a[i]-dp[i+1][0]);\n            }\n            else {\n                dp[i][0] = a[i] + dp[i+1][0];\n                dp[i][1] = a[i] + dp[i+1][1];\n            }\n        }\n        else {\n            dp[i][0] = min(-a[i]+dp[i+1][0],-a[i]-dp[i+1][1]);\n            dp[i][1] = max(-a[i]+dp[i+1][1],-a[i]-dp[i+1][0]);\n        }\n    }\n    printf(\"%lld\\n\",dp[1][1] + a[0]);\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<algorithm>\n#define MAXN 100006\n#define INF 23333333333333333\nusing namespace std;\nint n,r[MAXN];\nlong long a[MAXN],sum[MAXN],ans=-INF;\nchar op[MAXN];\nint main()\n{\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tif(i==1) scanf(\"%lld\",&a[i]);\n\t\telse scanf(\" %c %lld\",&op[i],&a[i]);\n\t}\n\tint last=n+1;\n\tfor(int i=n;i>=1;i--)\n\t{\n\t\tsum[i]=sum[i+1]+a[i];\n\t\tr[i]=last;\n\t\tif(op[i]=='-') last=i;\n\t}\n\tlong long sumlast=a[1];\n\tfor(int i=2;i<=n;i++)\n\t{\n\t\tif(op[i]=='-') ans=max(ans,sumlast+sum[r[i]]*2-sum[i]);\n\t\tif(op[i]=='+') sumlast+=a[i];\n\t\telse sumlast-=a[i];\n\t}\n\tprintf(\"%lld\",max(ans,sumlast));\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef pair<int, int> ii;\ntypedef vector<int> vi;\n\n#define SZ(x) ((int)x.size())\n\nconst int N = (int)1e5+5;\nint n, op[N];\nll a[N], sum[N], dp[N];\npriority_queue<ll> pq;\nvector<int> q;\n\nint main() {\n\tscanf(\"%d\", &n);\n\tfor (int i = 1; i <= n; ++i) {\n\t\tscanf(\"%lld\", &a[i]);\n\t\tsum[i] = sum[i - 1] + a[i];\n\t\tif (i == n) break;\n\t\tchar s[2]; scanf(\"%s\", s);\n\t\tif (s[0] == '-') op[i] = -1;\n\t\telse op[i] = 1;\n\t}\n\tint idx = 1;\n\tfor (; idx <= n; ++idx) {\n\t\tdp[idx] = sum[idx];\n\t\tif (op[idx] == -1) break;\n\t}\n\tfor (int i = idx + 1; i <= n; ++i) {\n\t\tdp[i] = dp[i - 1] + (ll)op[i - 1] * a[i];\n\t\tif (op[i - 1] == -1) {\n\t\t\tif (SZ(q)) {\n\t\t\t\tll val = sum[i - 1] - sum[q.back() - 1];\n\t\t\t\tpq.push(dp[q.back() - 1] - val - sum[i - 1]);\n\t\t\t}\n\t\t\tq.push_back(i);\n\t\t}\n\t\tif (SZ(pq) > 0) dp[i] = max(dp[i], pq.top() + sum[i]);\n\t}\n\tprintf(\"%lld\", dp[n]);\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<string>\n#include<cstdio>\n#include<vector>\n#include<cmath>\n#include<algorithm>\n#include<functional>\n#include<iomanip>\n#include<queue>\n#include<ciso646>\n#include<random>\n#include<map>\n#include<set>\n#include<complex>\n#include<bitset>\n#include<stack>\n#include<unordered_map>\n#include<utility>\nusing namespace std;\ntypedef long long ll;\ntypedef unsigned int ui;\nconst ll mod = 1000000007;\nconst ll INF = (ll)1000000007 * 1000000007;\ntypedef pair<int, int> P;\n#define stop char nyaa;cin>>nyaa;\n#define rep(i,n) for(int i=0;i<n;i++)\n#define per(i,n) for(int i=n-1;i>=0;i--)\n#define Rep(i,sta,n) for(int i=sta;i<n;i++)\n#define rep1(i,n) for(int i=1;i<=n;i++)\n#define per1(i,n) for(int i=n;i>=1;i--)\n#define Rep1(i,sta,n) for(int i=sta;i<=n;i++)\ntypedef long double ld;\ntypedef complex<ld> Point;\nconst ld eps = 1e-4;\nconst ld pi = acos(-1.0);\ntypedef pair<ll, ll> LP;\n\n\nint n;\nbool m[1 << 17];\nll a[1 << 17];\nll s[1 << 17];\nll sx[1 << 17];\nvector<int> v;\nint main() {\n\tcin >> n;\n\tcin >> a[0];\n\trep1(i, n-1) {\n\t\tchar t; cin >> t >> a[i];\n\t\tif (t == '-') {\n\t\t\tm[i] = true;\n\t\t\tv.push_back(i);\n\t\t}\n\t}\n\trep(i, n) {\n\t\ts[i + 1] = s[i] + a[i];\n\t\tif(!m[i])sx[i + 1] = sx[i] + a[i];\n\t\telse sx[i + 1] = sx[i] - a[i];\n\t}\n\tll ans = sx[n];\n\trep(i, v.size() - 1) {\n\t\tint le = v[i], ri = v[i + 1];\n\t\tll z = sx[le] - (s[ri] - s[le]) + s[n] - s[ri];\n\t\tans = max(ans, z);\n\t}\n\tcout << ans << endl;\n\t//stop\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <cstdio>\ntypedef long long ll; \nconst ll INF = 1e18; \nint arr[100005]; \nchar op[100005]; \nll dp[100005][3]; \nint main()\n{\n\t// freopen(\"ARC066-E.in\", \"r\", stdin); \n\tint n;\n\tscanf(\"%d\", &n); \n\tfor (int i = 0; i < n - 1; i++)\n\t\tscanf(\"%d %c\", arr + i, op + i); \n\tscanf(\"%d\", arr + n - 1); \n\tdp[0][0] = arr[0]; \n\tdp[0][1] = dp[0][2] = -INF; \n\tfor (int i = 1; i < n; i++)\n\t{\n\t\tif (op[i - 1] == '+')\n\t\t{\n\t\t\tdp[i][0] = std::max(dp[i - 1][0], dp[i - 1][1]) + arr[i];\n\t\t\tdp[i][1] = dp[i - 1][1] - arr[i]; \n\t\t\tdp[i][2] = dp[i - 1][2] + arr[i]; \n\t\t}\n\t\telse\n\t\t{\n\t\t\tdp[i][0] = -INF; \n\t\t\tdp[i][1] = std::max(dp[i - 1][0], dp[i - 1][1]) - arr[i]; \n\t\t\tdp[i][2] = std::max(dp[i - 1][1], dp[i - 1][2]) + arr[i]; \n\t\t}\n\t}\n\tprintf(\"%lld\\n\", std::max(dp[n - 1][0], std::max(dp[n - 1][1], dp[n - 1][2])));\n\treturn 0; \n}\n"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <assert.h>\n#include <iostream>\n#include <cstring>\n#include <vector>\n#include <cstdio>\n#include <cmath>\n\nusing namespace std;\n\ntypedef long long ll;\n\nconst int MX = 100005;\n\ntemplate <typename T> void read(T &x)\n{\n\tx = 0; char c = getchar(); bool f = 0;\n\twhile(!isdigit(c) && c!='-') c = getchar();\n\tif(c == '-') f = 1, c = getchar();\n\twhile(isdigit(c)) x = x*10+c-'0', c = getchar();\n\tif(f) x = -x;\n}\n\ntemplate <typename T> T max(const T &x, const T &y, const T &z)\n{\n\treturn max(max(x, y), z);\n}\n\nint n;\nint opr[MX], seq[MX];\nll f[MX][3];\n\nvoid work()\n{\n\tread(n);\n\tassert(n >= 2);\n\topr[1] = +1;\n\tfor(int i=1; i<=n; i++)\n\t{\n\t\tread(seq[i]);\n\t\tif(i != n)\n\t\t{\n\t\t\tchar c = getchar();\n\t\t\twhile(c!='+' && c!='-') c = getchar();\n\t\t\tif(c == '+') opr[i+1] = +1;\n\t\t\telse opr[i+1] = -1;\n\t\t}\n\t}\n\tf[0][0] = 0;\n\tf[0][1] = f[0][2] = -1e18;\n\tfor(int i=1; i<=n; i++)\n\t{\n\t\tif(opr[i] == +1)\n\t\t{\n\t\t\tf[i][0] = max(f[i-1][0]+seq[i], f[i-1][1]+seq[i], f[i-1][2] + seq[i]);\n\t\t\tf[i][1] = max(f[i-1][1]-seq[i], f[i-1][2]-seq[i]);\n\t\t\tf[i][2] = f[i-1][2]+seq[i];\n\t\t}\n\t\telse\n\t\t{\n\t\t\tf[i][0] = -1e18;\n\t\t\tf[i][1] = max(f[i-1][0]-seq[i], f[i-1][1]-seq[i], f[i-1][2]-seq[i]);\n\t\t\tf[i][2] = max(f[i-1][1]+seq[i], f[i-1][2]+seq[i]);\n\t\t}\n\t}\n\tprintf(\"%lld\\n\", max(f[n][0], f[n][1], f[n][2]));\n}\n\nint main()\n{\n\tint t;\n\tread(t);\n\tfor(int i=1; i<=t; i++) work();\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define int long long \nusing namespace std;\nint f[100100],g[100100],a[100100];\nchar opt,lst;\nint x,y,ans,cnt,n;\nsigned main(){\n\tscanf(\"%lld\",&n);\n\tfor(int i=1;i<=n;i++){\n\t\tscanf(\"%lld\",&x);\n\t\tlst=opt;\n\t\tif(i!=n)cin>>opt;\n\t\tif(lst=='-'){\n\t\t\tx=-x;\n\t\t\ta[++cnt]=x;\n\t\t}\n\t\tif(y<=0&&x>0)a[++cnt]=x;\n\t\tif(y>0&&x>0)a[cnt]+=x;\n\t\ty=x;\n\t}\n\tf[1]=a[1];\n\tfor(int i=cnt;i>=1;i--)g[i]=g[i+1]+abs(a[i]);\n\tfor(int i=2;i<=cnt;i++)f[i]=f[i-1]+a[i];\n\tans=f[cnt];\n\tfor(int i=1;i<cnt;i++)\n\t\tif(a[i+1]<0)\n\t\t\tans=max(ans,f[i+1]-a[i+2]+g[i+3]);\n\tprintf(\"%lld\\n\",ans);\n} "
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\n#define DEBUG(x) cerr<<#x<<\": \"<<x<<endl;\n#define DEBUG_VEC(v) cerr<<#v<<\":\";for(int i=0;i<v.size();i++) cerr<<\" \"<<v[i]; cerr<<endl\n\ntypedef long long ll;\n#define vi vector<int>\n#define vl vector<ll>\n#define vii vector< vector<int> >\n#define vll vector< vector<ll> >\n#define vs vector<string>\n#define pii pair<int,int>\n#define pis pair<int,string>\n#define psi pair<string,int>\n#define pll pair<ll,ll>\ntemplate<class S, class T> pair<S, T> operator+(const pair<S, T> &s, const pair<S, T> &t) { return pair<S, T>(s.first + t.first, s.second + t.second); }\ntemplate<class S, class T> pair<S, T> operator-(const pair<S, T> &s, const pair<S, T> &t) { return pair<S, T>(s.first - t.first, s.second - t.second); }\ntemplate<class S, class T> ostream& operator<<(ostream& os, pair<S, T> p) { os << \"(\" << p.first << \", \" << p.second << \")\"; return os; }\n#define X first\n#define Y second\n#define rep(i,n) for(int i=0;i<(n);i++)\n#define rep1(i,n) for(int i=1;i<=(n);i++)\n#define rrep(i,n) for(int i=(n)-1;i>=0;i--)\n#define rrep1(i,n) for(int i=(n);i>0;i--)\n#define REP(i,a,b) for(int i=a;i<b;i++)\n#define in(x, a, b) (a <= x && x < b)\n#define all(c) c.begin(),c.end()\ntemplate<class T> bool chmax(T &a, const T &b) { if (a<b) { a = b; return 1; } return 0; }\ntemplate<class T> bool chmin(T &a, const T &b) { if (a>b) { a = b; return 1; } return 0; }\n#define UNIQUE(v) v.erase(std::unique(v.begin(), v.end()), v.end());\nconst ll inf = 1000000001;\nconst ll INF = 1e18;\nconst ll MOD = 1000000007;\n//const ll MOD = 998244353;\nconst double pi = 3.14159265358979323846;\n#define Sp(p) cout<<setprecision(15)<< fixed<<p;\nint dx[4] = { 1,0, -1,0 }, dy[4] = { 0,1,0,-1 };\nint dx2[8] = { 1,1,0,-1,-1,-1,0,1 }, dy2[8] = { 0,1,1,1,0,-1,-1,-1 };\n#define fio() cin.tie(0); ios::sync_with_stdio(false);\n//#define mp make_pair\n\nint main() {\n  int n;\n  cin >> n;\n  vl a(n);\n  string s;\n  cin >> a[0];\n  rep1 (i, n - 1) {\n    char c;\n    cin >> c;\n    s.push_back(c);\n    cin >> a[i];\n  }\n  int m = 3;\n  vll dp(n, vl(m, -INF));\n  dp[0][0] = a[0];\n  rep1 (i, n - 1) {\n    char op = s[i - 1];\n    rep (j, m) {\n      ll bai;\n      if (j % 2 == 0) {\n        bai = 1;\n      }\n      else {\n        bai = -1;\n      }\n      if (op == '+') {\n        dp[i][j] = max(dp[i][j], dp[i - 1][j] + bai*a[i]);\n        if (j != 0) {\n          dp[i][j - 1] = max(dp[i][j - 1], dp[i - 1][j] - bai*a[i]);\n        }\n      }\n      else {\n        dp[i][j] = max(dp[i][j], dp[i - 1][j] - bai*a[i]);\n        if (j != 0) {\n          dp[i][j] = max(dp[i][j], dp[i - 1][j] + bai*a[i]);\n        }\n        if (j != m - 1) {\n          dp[i][j + 1] = max(dp[i][j + 1], dp[i - 1][j] - bai*a[i]);\n        }\n      }\n    }\n  }\n  ll ans = -INF;\n  rep (j, m) {\n    chmax(ans, dp[n - 1][j]);\n  }\n  cout << ans << endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\nconst int N(111111);\nlong long dp[N][3];\nchar st[N], s[N];\nint a[N];\nint main() {\n\tint n;\n\tscanf(\"%d\", &n);\n\tfor(int i(0); i < n; i++) {\n\t\tif(i) {\n\t\t\tscanf(\"%s\", st);\n\t\t\ts[i] = st[0];\n\t\t}else {\n\t\t\ts[i] = '+';\n\t\t}\n\t\tscanf(\"%d\", &a[i]);\n\t\tif(s[i] == '-')\n\t\t\ta[i] = -a[i];\n\t}\n\tfor(int i(0); i < n; i++) {\n\t\tfor(int j(0); j <= 2; j++) {\n\t\t\tdp[i][j] = -1e18;\n\t\t}\n\t}\n\tdp[0][0] = a[0];\n\tfor(int i(1); i < n; i++) {\n\t\tfor(int j(0); j <= 2; j++) {\n\t\t\tfor(int k(0); k <= j + 1; k++) {\n\t\t\t\tif(s[i] == '+' && k > j) \n\t\t\t\t\tcontinue;\n\t\t\t\tdp[i][k] = max(dp[i][k], dp[i - 1][j] + a[i] * (j % 2 == 0 ? 1 : -1));\n\t\t\t}\n\t\t}\n\t}\n\tcout << dp[n - 1][0] << endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n#define r(i,n) for(int i=0;i<n;i++)\nint a[100009],dp[100009][4];\nstring s[100009];\nint main(){\n  r(i,100009)r(j,4)dp[i][j]=-(1e9);\n  int ans,n;\n  cin>>n>>ans;n--;\n  r(i,n)cin>>s[i]>>a[i];\n  dp[0][0]=0;\n  for(int i=0;i<n;i++){\n    if(s[i]==\"+\"){\n      dp[i+1][0]=max(dp[i+1][0],max(dp[i][0]+a[i],dp[i][1]+a[i]));\n      dp[i+1][1]=max(dp[i+1][1],max(dp[i][1]-a[i],dp[i][2]-a[i]));\n      dp[i+1][2]=max(dp[i+1][2],dp[i][2]+a[i]);\n    }\n    else{\n      dp[i+1][0]=max(dp[i+1][0],max(dp[i][0]-a[i],dp[i][1]-a[i]));\n      dp[i+1][1]=max(dp[i+1][1],max(dp[i][0]-a[i],max(dp[i][1]+a[i],dp[i][2]+a[i])));\n      dp[i+1][2]=max(dp[i+1][2],max(dp[i][2]-a[i],dp[i][1]+a[i]));\n    }\n  }\n  cout<<ans+max(dp[n][0],max(dp[n][1],dp[n][2]))<<endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define N 200005\n#define LL long long\nusing namespace std;\nLL val[N];//- + - +\nLL suf[N];\nint n; \nint main(){\n\tscanf(\"%d\",&n);\n\tscanf(\"%lld\",&val[1]);\n\tint cnt=1;\n\tfor(int i=2,t,last='+';i<=n;i++){\n\t\tchar ch=getchar();\n\t\twhile(ch!='+'&&ch!='-') ch=getchar();\n\t\tscanf(\"%d\",&t);\n\t\tif(ch=='+'&&last=='+') val[cnt]+=t;\n\t\telse if(ch!=last) val[++cnt]=t;\n\t\telse val[++cnt]=0,val[++cnt]=t;\n\t\tlast=ch;\n\t}\n\tfor(int i=cnt;i>=1;i--) suf[i]=suf[i+1]+val[i];\n\tLL pre=0,ans=-1e18;\n\tfor(int i=1;i<=cnt;i++){\n\t\tpre+=val[i]*(i%2==0 ? -1:1);\n\t\tif(i%2==0){\n\t\t\tans=max(ans,pre-val[i+1]+suf[i+2]);\n\t\t}\n\t}\n\tcout<<ans<<endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define int long long\n\nusing namespace std; \n\nconst int maxn = 1e6; \n\nint n; \nint ans, sum; \nint op[maxn + 5], a[maxn + 5]; \n\nsigned main() {\n    scanf(\"%lld\", &n); n--; \n    scanf(\"%lld\", &sum);\n    for (int i = 1; i <= n; i++) {\n        char s[2]; \n        scanf(\"%s %lld\", s, &a[i]); \n        if (s[0] == '-') op[i] = -1; \n        else op[i] = 1; \n        sum += a[i];\n    } \n    for (int i = 1; i <= n; i++) {\n        if (op[i] != -1) continue ; \n        int pos = i + 1, s = a[i]; \n        while (op[pos] == 1 && pos <= n) {\n            s += a[pos]; pos++; \n        }\n        ans = max(ans, sum - 2 * s); \n        sum -= 2 * a[i]; \n    }\n    if (ans == 0) ans = sum; \n    cout << ans << '\\n'; \n    return 0; \n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nconst long long INF = 3LL << 60;\n\nlong long memo[100005][3];\n\nlong long A[100005];\nchar op[100005];\n\nint N;\n\nlong long dp(int i, int j){\n    if(i == N){\n        return 0;\n    }else if(memo[i][j] != -INF){\n        return memo[i][j];\n    }else if(op[i] == '+'){\n        if(j == 0){\n            return memo[i][j] = A[i] + dp(i+1, 0);\n        }else if(j == 1){\n            return memo[i][j] = -A[i] + max(dp(i+1, 1), dp(i+1, 0));\n        }else if(j == 2){\n            return memo[i][j] = A[i] + max(dp(i+1, 2), dp(i+1, 1));\n        }\n    }else if(op[i] == '-'){\n        if(j == 0){\n            return memo[i][j] = max(-A[i] + dp(i+1, 1), -A[i]+dp(i+1, 0));\n        }else if(j == 1){\n            return memo[i][j] = max(max(A[i] + dp(i+1, 1), A[i]+dp(i+1, 2)), A[i]+dp(i+1, 0));\n        }else if(j == 2){\n            return memo[i][j] = max(-A[i] + dp(i+1, 1), -A[i]+dp(i+1, 2));\n        }\n    }\n}\n\nint main(){\n    scanf(\"%d\", &N);\n\n    scanf(\"%d\", &A[0]);\n    op[0] = '+';\n    for(int i = 1; i < N; i ++){\n        scanf(\" %c %d\", &op[i], &A[i]);\n    }\n\n    for(int i = 0; i <= N; i ++){\n        for(int j = 0; j < 3; j ++){\n            memo[i][j] = -INF;\n        }\n    }\n\n    /*for(int i = 0; i <= N; i ++){\n        for(int j = 0; j < 3; j ++){\n            printf(\"memo[%d][%d] = %lld\\n\", i, j, dp(i, j));\n        }\n    }*/\n\n    printf(\"%lld\", dp(0, 0));\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<iostream>\n#include<cstring>\n#define ll long long\n#define maxn 100010\nusing namespace std;\nint n,i;\nll a[maxn],b[maxn],f[maxn][3];\nint read()\n{\n\tint x=0;\n\tchar c=getchar();\n\twhile(!isdigit(c))c=getchar();\n\twhile(isdigit(c))\n\t{\n\t\tx=x*10+c-'0';\n\t\tc=getchar();\n\t}\n\treturn x;\n}\nchar readch()\n{\n\tchar c=getchar();\n\twhile(c!='-'&&c!='+')c=getchar();\n\treturn c;\n}\nint main()\n{\n\tn=read();\n\ta[1]=read();\n\tfor(i=2;i<=n;i++)\n\t{\n\t\tif(readch()=='-')b[i]=-1;else b[i]=1;\n\t\ta[i]=read();\n\t}\n\tmemset(f,-0x3f,sizeof(f));\n\tf[1][0]=a[1];\n\tfor(i=2;i<=n;i++)\n\t{\n\t\tf[i][0]=max(f[i-1][0]+b[i]*a[i],f[i-1][1]-b[i]*a[i]);\n\t\tf[i][1]=max(f[i-1][1]-b[i]*a[i],f[i-1][2]+b[i]*a[i]);\n\t\tif(b[i]==-1)f[i][1]=max(f[i][1],f[i-1][0]+b[i]*a[i]);\n\t\tf[i][2]=f[i-1][2]+b[i]*a[i];\n\t\tif(b[i]==-1)f[i][2]=max(f[i][2],f[i-1][1]-b[i]*a[i]);\n\t}\n\tprintf(\"%lld\\n\",f[n][0]);\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\n#define lld long long\n#define pii pair<int,int>\n#define pb push_back\n#define next nextt\n#define Inf 1000000000\n#define Linf 1000000000000000000LL\n#define Mod 1000000007\n\nusing namespace std;\n\nint N; lld ans;\nint op[100002],next[100002];\nlld a[100002],sum[100002],sum2[100002];\n\nint main(){\n\tscanf(\"%d\",&N);\n\tscanf(\"%lld\",&a[1]);\n\tsum[1] = a[1];\n\tfor(int i=2; i<=N; i++){\n\t\tchar s[3];\n\t\tscanf(\"%s\",s);\n\t\tif(s[0]=='-') op[i] = -1;\n\t\telse op[i] =1;\n\t\tscanf(\"%lld\",&a[i]);\n\t\tsum[i] = sum[i-1]+(a[i]*op[i]);\n\t}\n\tfor(int i=N; i>=1; i--){\n\t\tsum2[i] = sum2[i+1]+a[i];\n\t}\n\tint tmp = N+1;\n\tfor(int i=N; i>=2; i--){\n\t\tif(op[i] == -1){\n\t\t\tnext[i] = tmp;\n\t\t\ttmp = i;\n\t\t}\n\t}\n\tans = sum[N];\n\tfor(int i=2; i<=N; i++){\n\t\tif(op[i] == 1) continue;\n\t\tans = max(ans,sum[i-1]-(sum2[i]-sum2[next[i]])+sum2[next[i]]);\n\t}\n\tprintf(\"%lld\\n\",ans);\n\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <cstdlib>\n#include <cstring>\n#include <cmath>\n#include <algorithm>\n#include <assert.h>\n#define IOS ios::sync_with_stdio(false)\nusing namespace std;\n#define inf (0x3f3f3f3f)\ntypedef long long int LL;\n\n\n#include <iostream>\n#include <sstream>\n#include <vector>\n#include <set>\n#include <map>\n#include <queue>\n#include <string>\n#include <bitset>\nconst int maxn = 1e5 + 20;\nLL perfixSum[maxn], absSum[maxn];\nvector<int>pos;\nvoid cut(LL &val, int pos1, int pos2) {\n    if (pos1 > pos2) return;\n    val -= absSum[pos2] - absSum[pos1 - 1];\n}\nvoid work() {\n    int n;\n    scanf(\"%d\", &n);\n    int val;\n    scanf(\"%d\", &val);\n    perfixSum[1] = val;\n    absSum[1] = val;\n    for (int i = 2; i <= n; ++i) {\n        int val;\n        char op;\n        cin >> op;\n        scanf(\"%d\", &val);\n        if (op == '+') {\n            perfixSum[i] = perfixSum[i - 1] + val;\n        } else {\n            perfixSum[i] = perfixSum[i - 1] - val;\n            pos.push_back(i);\n        }\n        absSum[i] = absSum[i - 1] + val;\n    }\n    LL ans = perfixSum[n];\n    for (int i = 0; i <= (int)pos.size() - 2; ++i) {\n        int p1 = pos[i], p2 = pos[i + 1];\n        LL tans = absSum[n] - absSum[p2 - 1];\n        tans += perfixSum[p1];\n        cut(tans, p1 + 1, p2 - 1);\n        ans = max(ans, tans);\n    }\n    cout << ans << endl;\n}\n\nint main() {\n#ifdef local\n    freopen(\"data.txt\", \"r\", stdin);\n//    freopen(\"data.txt\", \"w\", stdout);\n#endif\n//    int val;\n//    scanf(\"%d\", &val);\n//    cout << val << endl;\n    work();\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "// eddy1021\n#pragma GCC optimize(\"O3\")\n#include <bits/stdc++.h>\nusing namespace std;\ntypedef double D;\ntypedef long double LD;\ntypedef long long LL;\ntypedef pair<int,int> PII;\ntypedef pair<LL,LL> PLL;\ntypedef pair<LD,LD> Pt;\ntypedef tuple<int,int,int> tiii;\ntypedef tuple<LL,LL,LL> tlll;\n#define mod9 1000000009LL\n#define mod7 1000000007LL\n#define INF  1023456789LL\n#define INF16 10000000000000000LL\n#define eps 1e-9\n#define SZ(x) (int)(x).size()\n#define ALL(x) (x).begin(), (x).end()\n#ifndef ONLINE_JUDGE\n#define debug(...) printf(__VA_ARGS__)\n#else \n#define debug(...)\n#endif\ninline LL getint(){\n  LL _x=0,_tmp=1; char _tc=getchar();    \n  while( (_tc<'0'||_tc>'9')&&_tc!='-' ) _tc=getchar();\n  if( _tc == '-' ) _tc=getchar() , _tmp = -1;\n  while(_tc>='0'&&_tc<='9') _x*=10,_x+=(_tc-'0'),_tc=getchar();\n  return _x*_tmp;\n}\ninline LL add( LL _x , LL _y , LL _mod = mod7 ){\n  _x += _y;\n  return _x >= _mod ? _x - _mod : _x;\n}\ninline LL sub( LL _x , LL _y , LL _mod = mod7 ){\n  _x -= _y;\n  return _x < 0 ? _x + _mod : _x;\n}\ninline LL mul( LL _x , LL _y , LL _mod = mod7 ){\n  _x *= _y;\n  return _x >= _mod ? _x % _mod : _x;\n}\nLL mypow( LL _a , LL _x , LL _mod ){\n  if( _x == 0 ) return 1LL;\n  LL _ret = mypow( mul( _a , _a , _mod ) , _x >> 1 , _mod );\n  if( _x & 1 ) _ret = mul( _ret , _a , _mod );\n  return _ret;\n}\nLL mymul( LL _a , LL _x , LL _mod ){\n  if( _x == 0 ) return 0LL;\n  LL _ret = mymul( add( _a , _a , _mod ) , _x >> 1 , _mod );\n  if( _x & 1 ) _ret = add( _ret , _a , _mod );\n  return _ret;\n}\ninline bool equal( D _x ,  D _y ){\n  return _x > _y - eps && _x < _y + eps;\n}\n#define Bye exit(0)\nint __ = 1 , _cs;\n/*********default*********/\n#define N 101010\nvoid build(){\n\n}\nint n , op[ N ];\nLL vl[ N ] , sv[ N ] , ans , ev[ N ];\nvoid init(){\n  n = getint();\n  for( int i = 1 ; i <= n ; i ++ ){\n    if( i > 1 ){\n      char c[ 9 ]; scanf( \"%s\" , c );\n      if( c[ 0 ] == '-' )\n        op[ i ] = 1;\n    }\n    vl[ i ] = getint();\n    sv[ i ] = sv[ i - 1 ] + vl[ i ];\n    if( op[ i ] ) ans -= vl[ i ];\n    else ans += vl[ i ];\n    ev[ i ] = ans;\n  }\n}\nvoid solve(){\n  int lst = -1;\n  for( int i = n ; i >= 1 ; i -- )\n    if( op[ i ] ){\n      if( lst != -1 ){\n        LL tans = ev[ i - 1 ] - ( sv[ lst - 1 ] - sv[ i - 1 ] ) +\n                                ( sv[ n ] - sv[ lst - 1 ] );\n        //printf( \"%d %lld %d %lld %lld %lld\\n\" , i , tans , lst , ev[ i - 1 ] , sv[ lst ] - sv[ i - 1 ] , sv[ n ] - sv[ lst - 1 ] );\n        ans = max( ans , tans );\n      }\n      lst = i;\n    }\n  printf( \"%lld\\n\" , ans );\n}\nint main(){\n  build();\n  //__ = getint();\n  while( __ -- ){\n    init();\n    solve();\n  }\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<cstring>\n#include<algorithm>\n#include<cstdlib>\n#include<ctime>\n#include<utility>\n#include<cmath>\n#include<functional>\nusing namespace std;\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef pair<int,int> pii;\ntypedef pair<ll,ll> pll;\nvoid sort(int &a,int &b)\n{\n\tif(a>b)\n\t\tswap(a,b);\n}\nvoid open(const char *s)\n{\n#ifndef ONLINE_JUDGE\n\tchar str[100];\n\tsprintf(str,\"%s.in\",s);\n\tfreopen(str,\"r\",stdin);\n\tsprintf(str,\"%s.out\",s);\n\tfreopen(str,\"w\",stdout);\n#endif\n}\nint rd()\n{\n\tint s=0,c;\n\twhile((c=getchar())<'0'||c>'9');\n\tdo\n\t{\n\t\ts=s*10+c-'0';\n\t}\n\twhile((c=getchar())>='0'&&c<='9');\n\treturn s;\n}\nint upmin(int &a,int b)\n{\n\tif(b<a)\n\t{\n\t\ta=b;\n\t\treturn 1;\n\t}\n\treturn 0;\n}\nll upmax(ll &a,ll b)\n{\n\tif(b>a)\n\t{\n\t\ta=b;\n\t\treturn 1;\n\t}\n\treturn 0;\n}\nint op[1000010];\nint a[1000010];\nll f[1000010][5];\nint main()\n{\n\tchar s[2];\n\tint n;\n\tscanf(\"%d\",&n);\n\tint i;\n\tfor(i=1;i<=n;i++)\n\t{\n\t\tif(i>1)\n\t\t{\n\t\t\tscanf(\"%s\",s);\n\t\t\tif(s[0]=='+')\n\t\t\t\top[i]=1;\n\t\t\telse\n\t\t\t\top[i]=2;\n\t\t}\n\t\telse\n\t\t\top[i]=1;\n\t\tscanf(\"%d\",&a[i]);\n\t}\n\tmemset(f,0x80,sizeof f);\n\tf[0][0]=0;\n\tfor(i=0;i<=n;i++)\n\t{\n\t\tupmax(f[i][1],f[i][2]);\n\t\tupmax(f[i][0],f[i][1]);\n\t\tif(i==n)\n\t\t\tcontinue;\n\t\tif(op[i+1]==1)\n\t\t{\n\t\t\tupmax(f[i+1][0],f[i][0]+a[i+1]);\n\t\t\tupmax(f[i+1][1],f[i][1]-a[i+1]);\n\t\t\tupmax(f[i+1][2],f[i][2]+a[i+1]);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tupmax(f[i+1][0],f[i][0]-a[i+1]);\n\t\t\tupmax(f[i+1][1],f[i][0]-a[i+1]);\n\t\t\tupmax(f[i+1][1],f[i][1]+a[i+1]);\n\t\t\tupmax(f[i+1][2],f[i][1]+a[i+1]);\n\t\t\tupmax(f[i+1][2],f[i][2]-a[i+1]);\n\t\t}\n\t}\n\tprintf(\"%lld\\n\",f[n][0]);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "\n#include <iostream>\n#include <algorithm>\n#include <string.h>\n\nusing namespace std;\n\n#define pb push_back\n#define mp make_pair\n#define ll long long\n#define ull unsigned ll\n#define db double\n#define INF 0x3f3f3f3f\n#define MOD 1000000007\n#define PII pair<int, int>\n\nint n;\nll a[100010];\nchar op[100010];\nchar buf[8];\nll left=0,right=0,ans=-2e11;\n\nint main() {\n    scanf(\"%d\",&n);\n    scanf(\"%lld\",&a[0]);\n    left=a[0];\n    for (int i=1;i<n;i++) {\n        scanf(\"%s\",buf);\n        scanf(\"%lld\",a+i);\n        op[i]=buf[0];\n        right+=a[i];\n    }\n    int idx=1;\n    while (idx<n&&op[idx]=='+') {\n        left+=a[idx];\n        right-=a[idx];\n        idx++;\n    }\n    ll tmp=0;\n    while (idx<n) {\n        left+=2*tmp;\n        left-=a[idx];\n        right-=a[idx];\n        idx++;\n        tmp=0;\n        while (idx<n&&op[idx]=='+') {\n            tmp+=a[idx];\n            left-=a[idx];\n            right-=a[idx];\n            idx++;\n        }\n        ans=max(ans,left+right);\n    }\n    ans=max(ans,left+right);\n    printf(\"%lld\\n\",ans);\n}"
  },
  {
    "language": "C++",
    "code": "\n#include <iostream>\n#include <algorithm>\n#include <string.h>\n\nusing namespace std;\n\n#define pb push_back\n#define mp make_pair\n#define ll long long\n#define ull unsigned ll\n#define db double\n#define INF 0x3f3f3f3f\n#define MOD 1000000007\n#define PII pair<int, int>\n\nint n;\nll a[100010];\nchar op[100010];\nchar buf[8];\nll l=0,r=0,ans=-2e11;\n\nint main() {\n    scanf(\"%d\",&n);\n    scanf(\"%lld\",&a[0]);\n    l=a[0];\n    for (int i=1;i<n;i++) {\n        scanf(\"%s\",buf);\n        scanf(\"%lld\",a+i);\n        op[i]=buf[0];\n        r+=a[i];\n    }\n    int idx=1;\n    while (idx<n&&op[idx]=='+') {\n        l+=a[idx];\n        r-=a[idx];\n        idx++;\n    }\n    ll tmp=0;\n    while (idx<n) {\n        l+=2*tmp;\n        l-=a[idx];\n        r-=a[idx];\n        idx++;\n        tmp=0;\n        while (idx<n&&op[idx]=='+') {\n            tmp+=a[idx];\n            l-=a[idx];\n            r-=a[idx];\n            idx++;\n        }\n        ans=max(ans,l+r);\n    }\n    ans=max(ans,l+r);\n    printf(\"%lld\\n\",ans);\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <string>\n#include <algorithm>\n#include <set>\n#include <cassert>\n\nusing namespace std;\n\nconstexpr int64_t kMod = 1e9+7;\n\nint main() {\n    std::vector<int64_t> v;\n\n    int n;\n    cin >> n;\n\n    int64_t answer = 0;\n    cin >> answer;\n    for (int i = 0; i < n - 1; i++) {\n        char c;\n        int x;\n        cin >> c >> x;\n        int new_x = x * (c == '+' ? 1 : -1);\n        if (v.empty()) {\n            v.push_back(new_x);\n        } else {\n            if (new_x > 0 && v.back() >= 1) {\n                v.back() += new_x;\n                continue;\n            }\n            if ((new_x > 0 && v.back() < 0) || (new_x < 0 && v.back() > 0)) {\n                v.push_back(new_x);\n                continue;\n            }\n            v.push_back(0);\n            v.push_back(new_x);\n        }\n    }\n    if (v.back() < 0) {\n        v.push_back(0);\n    }\n    if (v.size() && v[0] > 0) {\n        answer += v[0];\n        v.erase(v.begin());\n    }\n\n    int64_t sum = 0;\n    for (int i = 0; i < (int)v.size(); i++) {\n        sum += v[i];\n    }\n    int64_t best_ans = sum;\n    int64_t cur_sum = 0;\n\n    for (int i = (int)v.size() - 1; i >= 0; i--) {\n        assert(v[i] >= 0);\n        assert(i > 0);\n        assert(v[i - 1] < 0);\n\n        sum -= v[i];\n        sum -= v[i - 1];\n        best_ans = max(best_ans, cur_sum -v[i] + v[i - 1] + sum);\n        cur_sum += v[i];\n        cur_sum -= v[i - 1];\n        i--;\n    }\n    cout << best_ans + answer << endl;\n\n    return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define int long long\n#define N 100005\nusing namespace std;\nint n,a[N],b[N],sum[N];\nint f[N][2];\nsigned main()\n{\n    scanf(\"%lld\",&n);b[1]=1;\n    scanf(\"%lld\",&a[1]);\n    for(int i=2;i<=n;i++)\n    {\n        char c;\n        scanf(\" %c %lld\",&c,&a[i]);\n        if(c=='-')b[i]=-1;\n        else b[i]=1;\n    }\n    for(int i=n;i>=1;i--)sum[i]=sum[i+1]+a[i];\n    memset(f,0xcf,sizeof(f));\n    f[0][0]=0;int ans=-(1LL<<60);\n    for(int i=1;i<=n;i++)\n    {\n        f[i][0]=max(f[i-1][0],f[i-1][1])+a[i]*b[i];\n        f[i][1]=f[i-1][1]+a[i]*b[i]*(-1);\n        if(b[i]==-1)\n        {\n            f[i][1]=max(f[i][1],f[i-1][0]+a[i]*b[i]);\n            ans=max(ans,f[i-1][1]-a[i]*b[i]+sum[i+1]);\n        }\n    }\n    cout<<ans<<endl;\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstring>\n#include <algorithm>\n#include <vector>\n#include <string>\n#include <math.h>\n#include <stdio.h>\n#include <iomanip>\n#include <limits>\n#include <list>\n#include <queue>\n#include <tuple>\n#include <map>\n#include <set>\n#include <sstream>\nusing namespace std;\n#define MOD (long long int)(1e9+7)\n#define ll long long int\n#define rep(i,n) for(int i=0; i<(int)(n); i++)\n#define reps(i,n) for(int i=1; i<=(int)(n); i++)\n#define REP(i,n) for(int i=n-1; i>=0; i--)\n#define REPS(i,n) for(int i=n; i>0; i--)\n#define FOR(i,a,b) for(int i=a; i<(int)(b); i++)\n#define ALL(x) (x).begin(),(x).end()\n#define RALL(a) (a).rbegin(), (a).rend()\n#define SORT(c) sort(ALL(x))\n#define CLR(a) memset((a), 0 ,sizeof(a))\n#define PB push_back\n#define MP make_pair\n#define SP << \" \" <<\nconst int INF = 1001001001;\nconst ll LINF = 100100100100100100;\nconst double EPS = 1e-10;\nconst double PI  = acos(-1.0);\ntypedef pair<int,int> PII;\ntypedef vector<int> VI;\ntypedef vector<VI> VVI;\n\ntemplate<typename A, size_t N, typename T>\nvoid Fill(A (&array)[N], const T &val){\n    std::fill( (T*)array, (T*)(array+N), val );\n}\n\n__attribute__((constructor))\nvoid initial(){\n\tcin.tie(nullptr);\n\tios::sync_with_stdio(false);\n\tcout << fixed << setprecision(15);\n}\n\nsigned main(){\n  int n; cin>>n;\n  int a; string op; cin>>a;\n  ll dp[n][3]; memset(dp,-INF,sizeof(dp)); dp[0][0]=a;\n\n  rep(i,n-1){\n    cin>>op>>a;\n    ll tmp[3];\n    if(op==\"+\"){\n      rep(j,3) tmp[j]=dp[i][j];\n    }else{\n      tmp[0]=dp[i][1];\n      tmp[1]=max(dp[i][0],dp[i][2]);\n      tmp[2]=dp[i][1];\n    }\n    dp[i+1][2] = tmp[2]+a;\n    dp[i+1][1] = max(dp[i+1][2], tmp[1]-a);\n    dp[i+1][0] = max(dp[i+1][1], tmp[0]+a);\n  }\n  ll ans = max(dp[n-1][0],dp[n-1][1]);\n  ans = max(ans,dp[n-1][2]);\n\n  cout << ans << endl;\n\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\ntypedef long long ll;\ntypedef pair<int,int> pii;\n\nconst int maxn=100003;\n\nint n,a[maxn],o[maxn];\nll f[maxn][6];\nchar s[3];\n\nint main(){\n\tscanf(\"%d\",&n);\n\tscanf(\"%d\",&a[1]);\n\tfor(int i=2;i<=n;++i){\n\t\tscanf(\"%s%d\",s,&a[i]);\n\t\tif(s[0]=='-')o[i]=1;\n\t}\n\tfor(int i=0;i<=n;++i)\n\t\tfor(int j=0;j<5;++j)\n\t\t\tf[i][j]=-1e18;\n\tf[0][0]=0;\n\tfor(int i=1;i<=n;++i){\n\t\tif(!o[i]){\n\t\t\tf[i][0]=max(f[i-1][0],f[i-1][1])+a[i];\n\t\t\tf[i][1]=max(f[i-1][1],f[i-1][2])-a[i];\n\t\t\tf[i][2]=max(f[i-1][2],f[i-1][3])+a[i];\n\t\t\tf[i][3]=max(f[i-1][3],f[i-1][4])-a[i];\n\t\t\tf[i][4]=f[i-1][4]+a[i];\n//\t\t\tprintf(\"%d %lld %lld %lld *\\n\",a[i],f[i][0],f[i][1],f[i][2]);\n\t\t\tcontinue;\n\t\t}\n\t\tf[i][0]=max(f[i-1][0],f[i-1][1])-a[i];\n\t\tf[i][1]=max(f[i-1][1],f[i-1][2])+a[i];\n\t\tf[i][2]=max(f[i-1][2],f[i-1][3])-a[i];\n\t\tf[i][3]=max(f[i-1][3],f[i-1][4])+a[i];\n\t\tf[i][4]=f[i-1][4]-a[i];\n\t\tf[i][1]=max(f[i][1],f[i-1][0]-a[i]);\n\t\tf[i][2]=max(f[i][2],f[i-1][1]+a[i]);\n\t\tf[i][3]=max(f[i][3],f[i-1][2]-a[i]);\n\t\tf[i][4]=max(f[i][4],f[i-1][3]+a[i]);\n//\t\tprintf(\"%d %lld %lld %lld *\\n\",a[i],f[i][0],f[i][1],f[i][2]);\n\t}\n\tprintf(\"%lld\\n\",max(f[n][0],f[n][1]));\n\treturn 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <cmath>\nusing namespace std;\nconst int N = 1e+5+2;\nlong long array[N][3] = {0};\n\nusing P  = pair<char,int>;\nlong long solve(vector<P>& inputs) {\n\tint n = inputs.size();\n\tlong long (*dp)[3] = array+1;\n\tdp[-1][1] = -1e+9;\n\tdp[-1][2] = -1e+9;\n\n\tfor(int i = 0; i < n; i++) {\n\t\tauto pair = inputs[i];\n\n\t\tif(pair.first == '+'){\n\t\t\tfor(int j = 0; j < 3; j++){\n\t\t\t\tdp[i][j] = dp[i-1][j] + pow(-1,j)*pair.second;\n\t\t\t}\n\t\t}else{\n\t\t\tdp[i][0] = max(dp[i-1][0] - pair.second,dp[i-1][0] - pair.second);\n\t\t\tdp[i][1] = max(dp[i-1][0] - pair.second, max(dp[i-1][1] - pair.second, dp[i-1][2] + pair.second));\n\t\t\tdp[i][2] = max(dp[i-1][1] + pair.second, dp[i-1][2] + pair.second);\n\t\t}\n// \t\tcout << dp[i][0] << \" \" << dp[i][1] << \" \" << dp[i][2] << endl;\n\t}\n\n\treturn max(dp[n-1][0], max(dp[n-1][1],dp[n-1][2]));\n}\n\nint main() {\n\tvector<P> inputs;\n\n\tint n;\n\tcin >> n;\n\n\tint first;\n\tcin >> first;\n\tinputs.push_back(P('+',first));\n\n\tfor(int i = 0; i < n-1; i++) {\n\t\tchar op;\n\t\tint m;\n\t\tcin >> op >> m;\n\t\tinputs.push_back(P(op,m));\n\t}\n\n// \tfor( auto pair: inputs)\n// \t\tcout << pair.first << \":\" << pair.second << endl;\n\tcout << solve(inputs) << endl;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\n#define int long long \n\nvoid read(int &x) {\n    x=0;int f=1;char ch=getchar();\n    for(;!isdigit(ch);ch=getchar()) if(ch=='-') f=-f;\n    for(;isdigit(ch);ch=getchar()) x=x*10+ch-'0';x*=f;\n}\n\nvoid print(int x) {\n    if(x<0) putchar('-'),x=-x;\n    if(!x) return ;print(x/10),putchar(x%10+48);\n}\nvoid write(int x) {if(!x) putchar('0');else print(x);putchar('\\n');}\n\n#define lf double\n#define ll long long \n\n#define pii pair<int,int >\n#define vec vector<int >\n\n#define pb push_back\n#define mp make_pair\n#define fr first\n#define sc second\n\n#define data asd09123jdf02i3h\n\n#define FOR(i,l,r) for(int i=l,i##_r=r;i<=i##_r;i++)\n\nconst int maxn = 1e6+10;\nconst int inf = 1e9;\nconst lf eps = 1e-8;\nconst int mod = 1e9+7;\n\nint f[maxn][3],a[maxn],n,t[maxn];\nchar s[maxn];\n\nvoid update(int &x,int y) {\n    if(y>x) x=y;\n}\n\nsigned main() {\n    read(n);\n    for(int i=1;i<=n;i++) {\n        read(a[i]);\n        if(i==n) break;\n        scanf(\"%s\",s+1);\n        if(s[1]=='-') t[i+1]=-1;\n        else t[i+1]=1;\n    }t[1]=1;\n    memset(f,-63,sizeof f);\n    f[0][0]=0;\n    for(int i=1;i<=n;i++) {\n        if(t[i]<0) {\n            f[i][0]=f[i-1][0]-a[i];\n            f[i][1]=max(f[i-1][0],f[i-1][1])-a[i];\n            f[i][2]=max(f[i-1][1],f[i-1][2])+a[i];\n        } else {\n            f[i][0]=max(max(f[i-1][0],f[i-1][1]),f[i-1][2])+a[i];\n            f[i][1]=f[i-1][1]-a[i];\n            f[i][2]=f[i-1][2]+a[i];\n        }\n    }\n    write(max(max(f[n][0],f[n][1]),f[n][2]));\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\ntypedef int int_t;\n#define int long long\n\nconst int maxn=1e5+5;\nconst int INF=0x3f3f3f3f3f3f3f3fll;\n\nint F[maxn][4];\nint A[maxn],N;\nint op[maxn];\n\nint_t main(){\n\tscanf(\"%lld\",&N);\n\tfor(int i=1;i<=N;i++){\n\t\tint bj=1,x;\n\t\tif(i>1){\n\t\t\tchar buf[10];scanf(\"%s\",buf);\n\t\t\tbj=buf[0]=='+'?+1:-1;\n\t\t}\n\t\tscanf(\"%lld\",&x);A[i]=bj*x;op[i]=bj;\n\t}\n\tA[++N]=0;F[0][1]=-INF;F[0][2]=-INF;\n\tfor(int i=1;i<=N;i++){\n\t\tF[i][0]=max(F[i-1][0]+A[i],F[i-1][1]+A[i]);\n\t\tF[i][1]=max(F[i-1][1]-A[i],F[i-1][2]-A[i]);\n\t\tF[i][2]=F[i-1][2]+A[i];\n\t\tif(op[i]<0){\n\t\t\tF[i][1]=max(F[i][1],F[i-1][0]+A[i]);\n\t\t\tF[i][2]=max(F[i][2],F[i-1][1]-A[i]);\n\t\t}\n\t}\n\tcout<<F[N][0]<<'\\n';\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n#define int long long\nconst int N = 1e5 + 5, M = 3, inf = 1e15;\nint dp[N][M], a[N];\nchar op[N];\n\nint Sign(int x) {\n    if (x % 2) return -1;\n    return 1;\n}\n\nint32_t main() {\n    ios::sync_with_stdio(0), cin.tie(0), cout.tie(0), cout.tie(0);\n    for (int i = 0; i < N; i++) for (int j = 0; j < M; j++) dp[i][j] = -inf;\n    int n; cin >> n >> a[0];\n    for (int i = 1; i < n; i++) cin >> op[i] >> a[i];\n    dp[0][0] = a[0];\n    for (int i = 1; i < n; i++) for (int j = M - 1; j >= 0; j--) {\n        if (op[i] == '+') dp[i][j] = dp[i - 1][j] + a[i] * Sign(j);\n        else if (j) dp[i][j] = dp[i - 1][j - 1] + a[i] * Sign(j);\n        if (j + 1 < M) dp[i][j] = max(dp[i][j], dp[i][j + 1]);\n    }\n    cout << dp[n-1][0] << \"\\n\";\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define L long long\n#define pb push_back\n#define pi pair<int,int>\n#define pii pair<pair<int,int>,int>\n#define aa first\n#define bb second\n#define mp make_pair\n#define mpp(a,b,c) mp(mp(a,b),c)\nusing namespace std;\nint n,x[100010],y[100010];\nchar s[5];\nL p;\nint main()\n{\n\t//freopen(\".in\",\"r\",stdin);\n\t//freopen(\".out\",\"w\",stdout);\n\tint i,j;\n\tL k,l,u;\n\tscanf(\"%d\",&n);\n\tfor(i=1;i<=n;i++)\n\t  {\n\t   if(i>1)\n\t     {\n\t\t  scanf(\"%s\",s);\n\t\t  if(s[0]=='-')\n\t\t    y[i]=1;\n\t\t }\n\t   scanf(\"%d\",&x[i]);\n\t  }\n\tp=1e18;\n\tfor(i=1,j=0,k=0,l=0,u=0;i<=n;i++)\n\t  {\n\t   if(y[i])\n\t     {\n\t      if(!j)\n\t        j=1,k=0;\n\t      else\n\t        p=min(p,k+l),k=0;\n\t      l+=u;\n\t      u=x[i];\n\t\t }\n\t   k+=x[i];\n\t  }\n\tif(j)\n\t  p=min(p,k+l);\n\tif(p>1e17)\n\t  p=0;\n\telse\n\t  p*=-2;\n\tfor(i=1;i<=n;i++)\n\t  p+=x[i];\n\tprintf(\"%lld\\n\",p);\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef pair<ll, ll> P;\n\n#define fi first\n#define se second\n#define repl(i,a,b) for(ll i=(ll)(a);i<(ll)(b);i++)\n#define rep(i,n) repl(i,0,n)\n#define all(x) (x).begin(),(x).end()\n#define dbg(x) cout<<#x\"=\"<<x<<endl\n#define mmax(x,y) (x>y?x:y)\n#define mmin(x,y) (x<y?x:y)\n#define maxch(x,y) x=mmax(x,y)\n#define minch(x,y) x=mmin(x,y)\n#define uni(x) x.erase(unique(all(x)),x.end())\n#define exist(x,y) (find(all(x),y)!=x.end())\n#define bcnt __builtin_popcount\n\n#define INF 1e18\n#define mod 1000000007\n\nll n;\nll st;\nll dp[3];\n\nint main(){\n  cin>>n>>st;\n  dp[0]=st;dp[1]=-INF;dp[2]=-INF;\n  rep(i,n-1){\n    char c;\n    ll a;\n    cin>>c>>a;\n    ll nxt[3];\n    nxt[0]=nxt[1]=nxt[2]=-INF;\n    if(c=='+'){\n      maxch(nxt[0],dp[0]+a);\n\n      maxch(nxt[1],dp[1]-a);\n      maxch(nxt[0],dp[1]+a);\n\n      maxch(nxt[2],dp[2]+a);\n      maxch(nxt[1],dp[2]-a);\n    }else{\n      maxch(nxt[0],dp[0]-a);\n      maxch(nxt[1],dp[0]-a);\n\n      maxch(nxt[1],dp[1]+a);\n      maxch(nxt[0],dp[1]-a);\n      maxch(nxt[2],dp[1]+a);\n\n      maxch(nxt[2],dp[2]-a);\n      maxch(nxt[1],dp[2]+a);\n    }\n    if(nxt[0]<-1e15)nxt[0]=-INF;\n    if(nxt[1]<-1e15)nxt[1]=-INF;\n    if(nxt[2]<-1e15)nxt[2]=-INF;\n    dp[0]=nxt[0]; dp[1]=nxt[1]; dp[2]=nxt[2];\n  }\n  cout<<*max_element(dp,dp+3)<<endl;\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define maxn 100086\n\nusing namespace std;\n\nint n;\nlong long f[maxn][3];\nint x;\nchar s[maxn];\n\nint main(){\n\tmemset(f, -0x3f, sizeof(f));\n\tscanf(\"%d\", &n);\n\tscanf(\"%d\", &x);\n\tf[1][0] = x;\n\tfor(int i = 2;i <= n;i++){\n\t\tscanf(\"%s%d\", s, &x);\n\t\tif(s[0] == '-'){\n\t\t\tfor(int j = 0;j < 3;j++) f[i][j] = max(f[i][j], f[i - 1][j] + x * (j & 1 ? 1 : -1));\n\t\t\tfor(int j = 0;j < 2;j++) f[i][j + 1] = max(f[i][j + 1], f[i - 1][j] + x * (j & 1 ? 1 : -1));\n\t\t}else{\n\t\t\tfor(int j = 0;j < 3;j++) f[i][j] = max(f[i][j], f[i - 1][j] + x * (j & 1 ? -1 : 1));\n\t\t}\n\t\tf[i][0] = max(f[i][0], f[i][1]);\n\t\tf[i][1] = max(f[i][1], f[i][2]);\n\t}\n\tprintf(\"%lld\", f[n][0]);\n}"
  },
  {
    "language": "C++",
    "code": "// g++ -std=c++11 a.cpp\n#include<iostream>\n#include<vector>\n#include<string>\n#include<algorithm>\t\n#include<map>\n#include<set>\n#include<unordered_map>\n#include<utility>\n#include<cmath>\n#include<random>\n#include<cstring>\n#include<queue>\n#include<stack>\n#include<bitset>\n#include<cstdio>\n#include<sstream>\n#include<iomanip>\n#include<assert.h>\n#include<typeinfo>\n#define loop(i,a,b) for(int i=a;i<b;i++) \n#define rep(i,a) loop(i,0,a)\n#define FOR(i,a) for(auto i:a)\n#define pb push_back\n#define all(in) in.begin(),in.end()\n#define shosu(x) fixed<<setprecision(x)\nusing namespace std;\n//kaewasuretyuui\ntypedef long long ll;\n//#define int ll\ntypedef ll Def;\ntypedef pair<Def,Def> pii;\ntypedef vector<Def> vi;\ntypedef vector<vi> vvi;\ntypedef vector<pii> vp;\ntypedef vector<vp> vvp;\ntypedef vector<string> vs;\ntypedef vector<double> vd;\ntypedef vector<vd> vvd;\ntypedef pair<Def,pii> pip;\ntypedef vector<pip>vip;\n#define mt make_tuple\ntypedef tuple<int,int,int> tp;\ntypedef vector<tp> vt;\ntemplate<typename A,typename B>bool cmin(A &a,const B &b){return a>b?(a=b,true):false;}\ntemplate<typename A,typename B>bool cmax(A &a,const B &b){return a<b?(a=b,true):false;}\n//template<class C>constexpr int size(const C &c){return (int)c.size();}\n//template<class T,size_t N> constexpr int size(const T (&xs)[N])noexcept{return (int)N;}\nconst double PI=acos(-1);\nconst double EPS=1e-9;\nDef inf = sizeof(Def) == sizeof(long long) ? 2e18 : 1e9+10;\nint dx[]={0,1,0,-1};\nint dy[]={1,0,-1,0};\nint main(){\n\tint n;\n\tcin>>n;\n\tvvi in(n,vi(2));\n\trep(i,n){\n\t\tif(i){\n\t\t\tchar c;cin>>c;\n\t\t\tin[i][1]=c=='-';\n\t\t}\n\t\tcin>>in[i][0];\n\t}\n\tvvi dp(n+1,vi(3,-inf));\n\tdp[0][0]=0;\n\trep(i,n)rep(j,3)if(dp[i][j]!=-inf){\n\t\tint s=in[i][0];\n\t\tif(in[i][1])s*=-1;\n\t\tif(j==1)s*=-1;\n\t\tdp[i+1][j]=max(dp[i+1][j],dp[i][j]+s);\n\t\tif(j<2&&in[i][1])dp[i+1][j+1]=max(dp[i+1][j+1],dp[i][j]+s);\n\t\tif(j)dp[i+1][j-1]=max(dp[i+1][j-1],dp[i][j]+s);\n\t\tif(j>1)dp[i+1][j-2]=max(dp[i+1][j-2],dp[i][j]+s);\n\t}\n\t\n\tcout<<dp[n][0]<<endl;\n}\n\n\n\n\n\n\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define maxn 100005\n#define LL long long\nusing namespace std;\n\nint n;\nLL sm[maxn],lsm[maxn];\nbool isn[maxn];\n\nint main(){\n\tscanf(\"%d\",&n);\n\tLL ans = 0;\n\tfor(int i=1;i<=n;i++){\n\t\tscanf(\"%lld\",&sm[i]);\n\t\tif(isn[i-1]) ans -= sm[i];\n\t\telse ans += sm[i];\n\t\tlsm[i] = ans;\n\t\tsm[i] += sm[i-1];\n\t\tchar ch[2];\n\t\tif(i<n){\n\t\t\tscanf(\"%s\",ch);\n\t\t\tif(ch[0] == '-')isn[i] = 1;\n\t\t}\n\t}\n\tint nx = n;\n\tfor(int i=n-1;i>=0;i--) if(isn[i]){\n\t\tans = max(ans , sm[n] - sm[nx] - (sm[nx] - sm[i]) + lsm[i]);\n\t\tnx = i;\n\t}\n\tprintf(\"%lld\\n\",ans);\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\nusing ll = long long;\nconst int N = 1e5 + 5;\nconst ll oo = 1e18;\n\nint n, a[N], opt[N];\nll f[N][3];\n\nint main() {\n  ios::sync_with_stdio(false); cin.tie(0); cout.tie(0);\n  cin >> n;\n  opt[1] = 1; cin >> a[1];\n  for (int i = 2; i <= n; ++i) {\n    char c;\n    cin >> c >> a[i];\n    opt[i] = (c == '+') ? 1 : -1;\n  }\n  f[0][1] = f[0][2] = -oo;\n  for (int i = 1; i <= n; ++i) {\n    f[i][0] = *max_element(f[i - 1], f[i - 1] + 3) + 1LL * opt[i] * a[i];\n    f[i][1] = max(f[i - 1][1], f[i - 1][2]) + -1LL * opt[i] * a[i];\n    f[i][2] = f[i - 1][2] + 1LL * opt[i] * a[i];\n    if (opt[i] == -1) {\n      f[i][1] = max(f[i][1], f[i - 1][0] + 1LL * opt[i] * a[i]);\n      f[i][2] = max(f[i][2], f[i - 1][1] + -1LL * opt[i] * a[i]);\n    }\n  }\n  cout << *max_element(f[n], f[n] + 3);\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n#define int long long\nconst double PI = 3.14159265358979323846;\ntypedef vector<int> vint;\ntypedef pair<int, int> pint;\nint dx[8] = {1, 0, -1, 0, 1, -1, -1, 1};\nint dy[8] = {0, 1, 0, -1, 1, 1, -1, -1};\n\nint N;\nint A[110000];\nchar op[110000];\n\nsigned main() {\n    cin >> N;\n    cin >> A[0];\n    for (int i = 1; i < N; i++)cin >> op[i] >> A[i];\n    op[N] = '-'; A[N] = 0;\n\n    int sum = A[0], total_minus = 0, cur_minus = 0, min_dec = LLONG_MAX;\n    for (int i = 1; i <= N; i++) {\n        if (op[i] == '+') {\n            if (total_minus > 0)cur_minus += A[i];\n        } else {\n            if (total_minus > 0)min_dec = min(min_dec, total_minus + cur_minus);\n            total_minus += A[i];\n            cur_minus = 0;\n        }\n        sum += A[i];\n    }\n    if (min_dec == LLONG_MAX)min_dec = 0;\n    cout << sum - 2 * min_dec;\n\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define to edge[i].v\n#define mp make_pair\n#define rint register int\n#define debug(x) cerr<<#x<<\"=\"<<x<<endl\n#define fgx cerr<<\"-------------\"<<endl\n#define N 100010\nusing namespace std;\ntypedef long long ll;\ntypedef long double db;\ntypedef pair<int,int> pii;\nint a[N]; ll pre[N],suf[N]; char c[N];\nint main()\n{\tios::sync_with_stdio(false);\n\tint n; ll ans=0; cin>>n>>a[1]; pre[1]=a[1];\n\tfor(rint i=2;i<=n;i++) cin>>c[i]>>a[i];\n\tfor(rint i=2;i<=n;i++) pre[i]=(c[i]=='-')?pre[i-1]-a[i]:pre[i-1]+a[i];\n\tfor(rint i=n;i>=1;i--) suf[i]=suf[i+1]+a[i];\n\tfor(rint i=1,j;i<=n;i++)\n\tif(c[i]=='-')\n\t{\tll sum=a[i];\n\t\tfor(j=i+1;j<=n&&c[j]=='+';j++) sum+=a[j];\n\t\tans=max(ans,pre[i-1]+suf[j]-sum);\n\t}\n\tcout<<max(ans,pre[n]);\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <cstring>\n#include <deque>\n#include <fstream>\n#include <functional>\n#include <iostream>\n#include <limits>\n#include <map>\n#include <numeric>\n#include <queue>\n#include <set>\n#include <vector>\nusing namespace std;\nusing ll = long long;\n#define fst first\n#define snd second\n\n/* clang-format off */\ntemplate <class T, size_t D> struct _vec { using type = vector<typename _vec<T, D - 1>::type>; };\ntemplate <class T> struct _vec<T, 0> { using type = T; };\ntemplate <class T, size_t D> using vec = typename _vec<T, D>::type;\ntemplate <class T> vector<T> make_v(size_t size, const T& init) { return vector<T>(size, init); }\ntemplate <class... Ts> auto make_v(size_t size, Ts... rest) { return vector<decltype(make_v(rest...))>(size, make_v(rest...)); }\n/* clang-format on */\n\nint main() {\n  int N;\n  while (cin >> N) {\n    vector<ll> A;\n    for (int i = 0; i < N; i++) {\n      char op = '+';\n      if (i > 0) cin >> op;\n      ll x;\n      cin >> x;\n      if (op == '-') x = -x;\n      A.push_back(x);\n    }\n    vector<int> minus;\n    for (int i = 0; i < N; i++) {\n      if (A[i] < 0) minus.push_back(i);\n    }\n    vector<ll> sum(N + 1, 0), asum(N + 1, 0);\n    for (int i = 0; i < N; i++) {\n      sum[i + 1] = sum[i] + A[i];\n      asum[i + 1] = asum[i] + abs(A[i]);\n    }\n    ll res = sum[N];\n    for (int i = 0; i + 1 < minus.size(); i++) {\n      int a = minus[i], b = minus[i + 1];\n      res = max(res, sum[a] - (asum[b] - asum[a]) + (asum[N] - asum[b]));\n    }\n    cout << res << endl;\n  }\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\ntypedef long long ll;\nll gi(){\n\tll x=0,f=1;\n\tchar ch=getchar();\n\twhile(!isdigit(ch))f^=ch=='-',ch=getchar();\n\twhile(isdigit(ch))x=x*10+ch-'0',ch=getchar();\n\treturn f?x:-x;\n}\nstd::mt19937 rnd(time(NULL));\n#define rand rnd\n#define pr std::pair<int,int>\n#define all(x) (x).begin(),(x).end()\n#define fi first\n#define se second\ntemplate<class T>void cxk(T&a,T b){a=a>b?a:b;}\ntemplate<class T>void cnk(T&a,T b){a=a<b?a:b;}\n#ifdef mod\nint pow(int x,int y){\n\tint ret=1;\n\twhile(y){\n\t\tif(y&1)ret=1ll*ret*x%mod;\n\t\tx=1ll*x*x%mod;y>>=1;\n\t}\n\treturn ret;\n}\ntemplate<class Ta,class Tb>void inc(Ta&a,Tb b){a=a+b>=mod?a+b-mod:a+b;}\ntemplate<class Ta,class Tb>void dec(Ta&a,Tb b){a=a>=b?a-b:a+mod-b;}\n#endif\nint A[100010];char ch[100010];\nll f[100010][3];\nint main(){\n#ifdef LOCAL\n\tfreopen(\"in.in\",\"r\",stdin);\n\t//freopen(\"out.out\",\"w\",stdout);\n#endif\n\tint n=gi();\n\tfor(int i=1;i<=n;++i)A[i]=gi(),ch[i]=getchar();\n\tfor(int i=1;i<=n;++i)if(ch[i]=='-')A[i+1]*=-1;\n\t++n;\n\tmemset(f,-63,sizeof f);\n\tf[0][0]=0;\n\tfor(int i=1;i<=n;++i)\n\t\tfor(int j=0;j<3;++j){\n\t\t\tfor(int k=j;k<3;++k)cxk(f[i][j],f[i-1][k]+A[i]*(j&1?-1:1));\n\t\t\tif(A[i]<0&&j)cxk(f[i][j],f[i-1][j-1]+A[i]*(~j&1?-1:1));\n\t\t}\n\tprintf(\"%lld\\n\",f[n][0]);\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <iostream>\n#include <cstring>\n#include <algorithm>\n#include <climits>\n\nusing namespace std;\n\ntypedef long long LL;\n\nconst LL Maxn = 100010;\n\nLL A[Maxn]; char ch[Maxn]; LL N;\n\nLL Sum[Maxn];\nLL Add[Maxn];\n\n\nint main()\n{\n  scanf(\"%lld\",&N); scanf(\"%lld\",&A[0]); ch[0]='+';\n  for(LL i=1;i<N;i++)\n  {\n    char c=getchar(); while(c!='+' && c !='-') c=getchar();\n    ch[i]=c; scanf(\"%lld\",&A[i]);\n  }\n\n  for(LL i=0;i<N;i++) Add[i]=Add[i-1]+A[i];\n  for(LL i=0;i<N;i++) Sum[i]=Sum[i-1]+A[i]*((ch[i]=='+') ? 1 : -1);\n\n  LL nx=N; LL ans=LLONG_MIN;\n\n  for(LL i=N-1;i>=0;i--) if(ch[i]=='-')\n  {\n    if(nx==N) ans=max(ans,Sum[i-1]-A[i]+Add[i+1]);\n    else ans=max(ans,Sum[i-1]-(Add[nx-1]-Add[i-1])+(Add[N-1]-Add[nx-1]));\n    nx=i;\n  }\n\n  if(nx==N) ans=max(ans,Sum[N-1]);\n  return printf(\"%lld\\n\",ans),0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <sstream>\n#include <vector>\n#include <set>\n#include <map>\n#include <unordered_map>\n#include <unordered_set>\n#include <algorithm>\n#include <queue>\n#include <deque>\n#include <stack>\n#include <iomanip>\n#include <cmath>\n\n\nusing namespace std;\n\n\ntypedef long long ll;\ntypedef long double ld;\n\n\nconst ll MOD_CONST = 1000000007ll;\n\n\nll modSum(ll a, ll b, ll MOD = MOD_CONST) {\n  return ((a % MOD) + (b % MOD)) % MOD;\n}\n\n\nll modSubtract(ll a, ll b, ll MOD = MOD_CONST) {\n  return (((a % MOD) - (b % MOD)) + MOD + MOD) % MOD;\n}\n\n\nll modProd(ll a, ll b, ll MOD = MOD_CONST) {\n  return ((a % MOD) * (b % MOD)) % MOD;\n}\n\n\nll getPowMod(ll x, ll e, ll MOD = MOD_CONST) {\n  if (e == 0) return 1;\n  if (e % 2 == 0) {\n    ll tmp = getPowMod(x, e/2, MOD);\n    return modProd(tmp, tmp);\n  } else {\n    ll tmp = getPowMod(x, e-1, MOD);\n    return modProd(tmp, x);\n  }\n}\n\n\nll getPow(ll x, ll e) {\n  if (e == 0) return 1;\n  if (e % 2 == 0) {\n    ll tmp = getPow(x, e/2);\n    return tmp * tmp;\n  } else {\n    ll tmp = getPow(x, e-1);\n    return tmp * x;\n  }\n}\n\n\nll getInverse(ll x, ll MOD = MOD_CONST) {\n  return getPowMod(x, MOD-2, MOD);\n}\n\n\nbool isEven(ll x) {\n  ll tmp = ((x % 2) + 2) % 2;\n  return tmp == 0;\n}\n\n\nll getSumOfDigitsInBase(ll n, ll b) {\n  ll ret = 0;\n  while (n > 0) {\n    ret += n % b;\n    n /= b;\n  }\n  return ret;\n}\n\n\nvector<int> getKMP(string &s) {\n  int len = (int)s.size();\n  vector<int> ret (len, 0);\n  for (int i = 1 ; i < len ; i++) {\n    int at = ret[i-1];\n    while (at > 0 && s[i] != s[at]) {\n      at = ret[at-1];\n    }\n    if (s[i] == s[at]) {\n      at++;\n    }\n    ret[i] = at;\n  }\n  return ret;\n}\n\n\nstring getSubstring(string &s, int from, int to) {\n  int l = to-from+1;\n  if (l <= 0) {\n    return \"\";\n  }\n  return s.substr(from, l);\n}\n\nll gcd(ll a, ll b, ll & x, ll & y) {\n    if (a == 0) {\n        x = 0;\n        y = 1;\n        return b;\n    }\n    ll x1, y1;\n    ll d = gcd(b % a, a, x1, y1);\n    x = y1 - (b / a) * x1;\n    y = x1;\n    return d;\n}\n\n\npair<ll, ll> getIntersectingRange(ll a1, ll b1, ll a2, ll b2) {\n  ll s = max(a1, a2);\n  ll e = min(b1, b2);\n\n  return {s, e};\n}\n\n\nbool isNonEmptyIntersection(ll a1, ll b1, ll a2, ll b2) {\n  auto p = getIntersectingRange(a1, b1, a2, b2);\n  return p.first <= p.second;\n}\n\n\ndouble getPointDistance(double x1, double y1, double x2, double y2) {\n  double dx = x1-x2;\n  double dy = y1-y2;\n  double d = (dx * dx) + (dy * dy);\n  return sqrt(d);\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst ll INF = 10000000000000000ll;\n\n\nint N;\n\n\nvoid input() {\n  cin >> N;\n}\n\n\nvoid preprocess() {\n}\n\n\nvoid solve() {\n  char sign;\n  ll nxt;\n  vector<ll> curMemo(3, -INF);\n  cin >> curMemo[0];\n  for (int i = 2 ; i <= N ; i++) {\n    vector<ll> nxtMemo(3, -INF);\n    cin >> sign  >> nxt; \n    if (sign == '+') {\n      nxtMemo[0] = max(nxtMemo[0], curMemo[0] + nxt);\n      nxtMemo[1] = max(nxtMemo[1], curMemo[1] - nxt);\n      nxtMemo[1] = max(nxtMemo[1], curMemo[2] - nxt);\n      nxtMemo[0] = max(nxtMemo[0], curMemo[1] + nxt);\n      nxtMemo[2] = max(nxtMemo[2], curMemo[2] + nxt);\n    } else {\n      nxtMemo[1] = max(nxtMemo[1], curMemo[0] - nxt);\n      nxtMemo[1] = max(nxtMemo[1], curMemo[1] - nxt);\n      nxtMemo[2] = max(nxtMemo[2], curMemo[1] + nxt);\n      nxtMemo[2] = max(nxtMemo[2], curMemo[2] + nxt);\n    }\n    curMemo = nxtMemo;\n  }\n  cout << max(curMemo[0], max(curMemo[1], curMemo[2]));\n}\n\n\nint main() {\n  ios::sync_with_stdio(0);\n  cin.tie(0);\n  cout.tie(0);\n  cerr.tie(0);\n\n  int T;\n//  cin >> T;\n  T = 1;\n\n  for (int i = 0 ; i < T ; i++) {\n    input();\n    preprocess();\n    solve();\n  }\n\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<vector>\n#include<algorithm>\n#include<cstring>\n#include<cstdio>\n#include<cmath>\n#include<cstdlib>\n#include<ctime>\n#include<queue>\n#include<set>\n#include<map>\n#include<stack>\n#include<bitset>\nusing namespace std;\ntypedef long long LL;\nconst int N=2e5;\nint gi() {\n\tint w=0;bool q=1;char c=getchar();\n\twhile ((c<'0'||c>'9') && c!='-') c=getchar();\n\tif (c=='-') q=0,c=getchar();\n\twhile (c>='0'&&c <= '9') w=w*10+c-'0',c=getchar();\n\treturn q? w:-w;\n}\nint a[N];\nLL b[N];\nint main()\n{\n\tint n=gi()-1,i,m=0,x;char c;\n\tLL sum=gi(),ans=-1LL<<60;\n\tfor (i=1;i<=n;i++) {\n\t\twhile ((c=getchar())!='+'&&c!='-');\n\t\tsum+=x=gi();\n\t\tif (c=='+') b[m]+=x; else a[++m]=x;\n\t}\n\tfor (i=1;i<=m;i++) {\n\t\tans=max(ans,sum-(a[i]+b[i])*2);\n\t\tsum-=a[i]*2;\n\t}\n\tcout<<max(ans,sum)<<endl;\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <cstring>\n#include <algorithm>\nusing namespace std;\ntypedef long long ll;\nconst int N = 1e5 + 5;\nconst ll inf = 1e15;\nint n;\nll a[N], dp[N][3];\nchar s[N][2];\nint main() {\n\tscanf(\"%d\", &n);\n\tfor(int i = 1; i < n; ++i) {\n\t\tscanf(\"%lld%s\", &a[i], s[i]);\n\t}\n\tscanf(\"%lld\", &a[n]);\n\tdp[1][0] = a[1];\n\tdp[1][1] = dp[1][2] = -inf;\t\n\tfor(int i = 2; i <= n; ++i) {\n\t\tif(s[i - 1][0] == '-') {\n\t\t\tdp[i][0] = -inf;\n\t\t\tdp[i][1] = max(dp[i - 1][0], dp[i - 1][1]) - a[i];\n\t\t\tdp[i][2] = max(dp[i - 1][1], dp[i - 1][2]) + a[i];\n\t\t} else {\n\t\t\tdp[i][0] = max(dp[i - 1][0], dp[i - 1][1]) + a[i];\n\t\t\tdp[i][1] = max(dp[i - 1][2], dp[i - 1][1]) + a[i];\n\t\t\tdp[i][2] = dp[i - 1][2] + a[i];\n\t\t}\n\t}\n\tprintf(\"%lld\\n\", max(max(dp[n][0], dp[n][1]), dp[n][2]));\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "/* --- author: dxm --- */\n#include<bits/stdc++.h>\nusing namespace std;\n\n#define INF 1e9\n#define Inf 1e18\n#define rep(i,n) for(int (i)=0;(i)<n;i++)\n#define REP(i,n) for(int (i)=1;(i)<=n;i++)\n#define mp make_pair\n#define pb push_back\n#define pii pair<int,int>\ntypedef long long ll;\ninline void Fail(){printf(\"0\");exit(0);}\n\nconst int maxn=100005;\nint n;\nint a[maxn];\nll ans;\nll sum[maxn],sum2[maxn];\nchar c[2];\n \nint main(){\n\tscanf(\"%d\",&n);\n\tint op=1;\n\trep(i,n){\n\t\tscanf(\"%d\",&a[i]);\n\t\ta[i]*=op;\n\t\tif(i!=n-1){\n\t\t\tscanf(\"%s\",c);\n\t\t\tif(c[0]=='-')op=-1;\n\t\t\telse op=1;\n\t\t}\n\t}\n\tfor(int i=n-1;i>=0;i--)sum[i]=sum[i+1]+abs(a[i]);\n\tfor(int i=n-1;i>=0;i--){\n\t\tif(a[i]<0)sum2[i]=0;\n\t\telse sum2[i]=sum2[i+1]+a[i];\n\t}\n\tll cur=0;\n\trep(i,n){\n\t\tcur+=a[i];\n\t\tif(a[i]<0)ans=max(ans,cur+sum[i+1]-2*sum2[i+1]);\n\t}\n\tprintf(\"%lld\",ans);\n\treturn 0;\n}\n\n/*\nInput:\n-----------------\nOutput:\n*/"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nconst long long INF = 3LL << 60;\n\nlong long memo[100005][3];\n\nlong long A[100005];\nchar op[100005];\n\nint N;\n\nlong long dp(int i, int j){\n    if(i == N){\n        return 0;\n    }else if(memo[i][j] != -INF){\n        return memo[i][j];\n    }else if(op[i] == '+'){\n        if(j == 0){\n            return memo[i][j] = A[i] + dp(i+1, 0);\n        }else if(j == 1){\n            return memo[i][j] = -A[i] + max(dp(i+1, 1), dp(i+1, 0));\n        }else if(j == 2){\n            return memo[i][j] = A[i] + max(dp(i+1, 2), dp(i+1, 1));\n        }\n    }else if(op[i] == '-'){\n        if(j == 0 || j == 2){\n            return memo[i][j] = max(max(-A[i] + dp(i+1, 1), -A[i]+dp(i+1, 2)), -A[i]+dp(i+1, 0));\n        }else if(j == 1){\n            return memo[i][j] = max(max(A[i] + dp(i+1, 1), A[i]+dp(i+1, 2)), A[i]+dp(i+1, 0));\n        }\n    }\n}\n\nint main(){\n    scanf(\"%d\", &N);\n\n    scanf(\"%d\", &A[0]);\n    op[0] = '+';\n    for(int i = 1; i < N; i ++){\n        scanf(\" %c %d\", &op[i], &A[i]);\n    }\n\n    for(int i = 0; i <= N; i ++){\n        for(int j = 0; j < 3; j ++){\n            memo[i][j] = -INF;\n        }\n    }\n\n    /*for(int i = 0; i <= N; i ++){\n        for(int j = 0; j < 3; j ++){\n            printf(\"memo[%d][%d] = %lld\\n\", i, j, dp(i, j));\n        }\n    }*/\n\n    printf(\"%lld\", dp(0, 0));\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n\nconst int MAXN=100011;\nconst long long LONF=4567891012345678910LL;\n\n\nint N;\nint A[MAXN];\nint O[MAXN];\n\nlong long F[MAXN][3];\n\nint rO(){\n\tstatic char ch[2];\n\tscanf(\"%s\", ch);\n\treturn ch[0]=='+';\n}\n\nvoid relax(long long &f, long long v){\n\tif(f<v)\tf=v;\n}\n\nint Calc(int t, int o, int a){\n\tif(t)\to=!o;\n\treturn ((o<<1)-1)*a;\n}\n\nint main(){\n\t\n\tscanf(\"%d\", &N);\n\t\n\tscanf(\"%d\", &A[1]);\n\tfor(int i=2;i<=N;++i){\n\t\tO[i]=rO();\n\t\tscanf(\"%d\", &A[i]);\n\t}\n\t\n\tfor(int i=1;i<=N;++i)\n\t\tfor(int j=0;j<=2;++j)\n\t\t\tF[i][j]=-LONF;\n\t\n\tF[1][0]=(long long)(A[1]);\n\tfor(int i=2;i<=N;++i){\n\t\tfor(int j=0;j<3;++j){\n\t\t\tfor(int k=0;k<=j;++k){\n\t\t\t\trelax(F[i][k], F[i-1][j]+Calc(k&1, O[i], A[i]));\n\t\t\t}\n\t\t\tif(!O[i]){\n\t\t\t\tfor(int k=0;k<=j && k<2;++k){\n\t\t\t\t\trelax(F[i][k+1], F[i-1][j]+Calc(k&1, O[i], A[i]));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\tlong long Ans=-LONF;\n\tfor(int j=0;j<3;++j)\n\t\trelax(Ans, F[N][j]);\n\tprintf(\"%lld\\n\", Ans);\n\t\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define maxn 200005\n#define LL long long\nusing namespace std;\nconst int mod = 1e9+7;\nint n,Q,pre,now;\nstruct Seg{\n\tLL mn[maxn<<2],tag[maxn<<2]; int flg;\n\tSeg(){memset(mn,0x3f,sizeof mn);}\n\tinline void add(int i,LL v){mn[i]+=v,tag[i]+=v;}\n\tinline void down(int i){if(tag[i]) add(i<<1,tag[i]),add(i<<1|1,tag[i]),tag[i]=0;}\n\tvoid ins(int i,int l,int r,int x,LL v){\n\t\tif(l==r) {mn[i]=min(mn[i],v+l*flg);return;}\n\t\tint mid=(l+r)>>1; down(i);\n\t\tx<=mid?ins(i<<1,l,mid,x,v):ins(i<<1|1,mid+1,r,x,v);\n\t\tmn[i]=min(mn[i<<1],mn[i<<1|1]);\n\t}\n\tLL qry(int i,int l,int r,int x,int y){\n\t\tif(x<=l&&r<=y) return mn[i];\n\t\tint mid=(l+r)>>1; LL ret=mn[0]; down(i);\n\t\tif(x<=mid) ret=min(ret,qry(i<<1,l,mid,x,y));\n\t\tif(y>mid) ret=min(ret,qry(i<<1|1,mid+1,r,x,y));\n\t\treturn ret;\n\t}\n\tLL whole(int i,int l,int r){\n\t\tif(l==r) return mn[i]+l;\n\t\tint mid=(l+r)>>1; down(i);\n\t\treturn min(whole(i<<1,l,mid),whole(i<<1|1,mid+1,r));\n\t}\n}T1,T2;\nint main()\n{\n\tscanf(\"%d%d%d%d\",&n,&Q,&pre,&now),T1.flg=-1,T2.flg=1;\n\tT1.ins(1,1,n,now,0),T2.ins(1,1,n,now,0);\n\tfor(int i=1;i<=Q;i++,pre=now){\n\t\tscanf(\"%d\",&now); if(now==pre) continue;\n\t\tLL tmp=min(T1.qry(1,1,n,1,now)+now,T2.qry(1,1,n,now,n)-now);\n\t\tT1.add(1,abs(now-pre)),T2.add(1,abs(now-pre));\n\t\tT1.ins(1,1,n,pre,tmp),T2.ins(1,1,n,pre,tmp);\n\t}\n\tprintf(\"%lld\\n\",T1.whole(1,1,n));\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define N (100009)\n#define LL long long\nusing namespace std;\n\nLL n,a[N],f[N][3];\nchar opt[N][2];\n\nint main()\n{\n\tcin>>n;\n\tfor (int i=1; i<n; ++i)\n\t\tcin>>a[i]>>opt[i];\n\tcin>>a[n];\n\tf[1][0]=a[1]; f[1][1]=f[1][2]=-1e18;\n\tfor (int i=2; i<=n; ++i)\n\t\tif (opt[i-1][0]=='+')\n\t\t{\n\t\t\tf[i][0]=max(f[i-1][0],f[i-1][1]);\n\t\t\tf[i][1]=f[i-1][1]-a[i];\n\t\t\tf[i][2]=f[i-1][2]+a[i];\n\t\t}\n\t\telse\n\t\t{\n\t\t\tf[i][0]=-1e18;\n\t\t\tf[i][1]=max(f[i-1][0],f[i-1][1])-a[i];\n\t\t\tf[i][2]=max(f[i-1][1],f[i-1][2])+a[i];\n\t\t}\n\tcout<<max(f[n][0],max(f[n][1],f[n][2]))<<endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <cassert>// c\n#include <iostream>// io\n#include <iomanip>\n#include <fstream>\n#include <sstream>\n#include <vector>// container\n#include <map>\n#include <set>\n#include <queue>\n#include <bitset>\n#include <stack>\n#include <algorithm>// other\n#include <complex>\n#include <numeric>\n#include <functional>\n#include <random>\n#include <regex>\nusing namespace std;\n\ntypedef long long ll;typedef unsigned long long ull;typedef long double ld;\n\n#define ALL(c) c.begin(),c.end()\n#define IN(l,v,r) (l<=v && v < r)\ntemplate<class T> void UNIQUE(T& v){v.erase(unique(ALL(v)),v.end());}\n//debug==\n#define DUMP(x) cerr << #x <<\" = \" << (x)\n#define LINE() cerr<< \" (L\" << __LINE__ << \")\"\n\nstruct range{\n\tstruct Iter{\n\t\tint v,step;\n\t\tIter& operator++(){v+=step;return *this;}\n\t\tbool operator!=(Iter& itr){return v<itr.v;}\n\t\tint& operator*(){return v;}\n\t};\n\tIter i, n;\n\trange(int i, int n,int step):i({i,step}), n({n,step}){}\n\trange(int i, int n):range(i,n,1){}\n\trange(int n):range(0,n){}\n\tIter& begin(){return i;}\n\tIter& end(){return n;}\n};\nstruct rrange{\n\tstruct Iter{\n\t\tint v,step;\n\t\tIter& operator++(){v-=step;return *this;}\n\t\tbool operator!=(Iter& itr){return v>itr.v;}\n\t\tint& operator*(){return v;}\n\t};\n\tIter i, n;\n\trrange(int i, int n,int step):i({i-1,step}), n({n-1,step}){}\n\trrange(int i, int n):rrange(i,n,1){}\n\trrange(int n) :rrange(0,n){}\n\tIter& begin(){return n;}\n\tIter& end(){return i;}\n};\n\n//input\ntemplate<typename T1,typename T2> istream& operator >> (istream& is,pair<T1,T2>& p){return is>>p.first>>p.second;}\ntemplate<typename T1> istream& operator >> (istream& is,tuple<T1>& t){return is >> get<0>(t);}\ntemplate<typename T1,typename T2> istream& operator >> (istream& is,tuple<T1,T2>& t){return is >> get<0>(t) >> get<1>(t);}\ntemplate<typename T1,typename T2,typename T3> istream& operator >> (istream& is,tuple<T1,T2,T3>& t){return is >>get<0>(t)>>get<1>(t)>>get<2>(t);}\ntemplate<typename T1,typename T2,typename T3,typename T4> istream& operator >> (istream& is,tuple<T1,T2,T3,T4>& t){return is >> get<0>(t)>>get<1>(t)>>get<2>(t)>>get<3>(t);}\ntemplate<typename T> istream& operator >> (istream& is,vector<T>& as){for(int i:range(as.size()))is >>as[i];return is;}\n//output\ntemplate<typename T> ostream& operator << (ostream& os, const set<T>& ss){for(auto a:ss){if(a!=ss.begin())os<<\" \"; os<<a;}return os;}\ntemplate<typename T1,typename T2> ostream& operator << (ostream& os, const pair<T1,T2>& p){return os<<p.first<<\" \"<<p.second;}\ntemplate<typename K,typename V> ostream& operator << (ostream& os, const map<K,V>& m){bool isF=true;for(auto& p:m){if(!isF)os<<endl;os<<p;isF=false;}return os;}\ntemplate<typename T1> ostream& operator << (ostream& os, const tuple<T1>& t){return os << get<0>(t);}\ntemplate<typename T1,typename T2> ostream& operator << (ostream& os, const tuple<T1,T2>& t){return os << get<0>(t)<<\" \"<<get<1>(t);}\ntemplate<typename T1,typename T2,typename T3> ostream& operator << (ostream& os, const tuple<T1,T2,T3>& t){return os << get<0>(t)<<\" \"<<get<1>(t)<<\" \"<<get<2>(t);}\ntemplate<typename T1,typename T2,typename T3,typename T4> ostream& operator << (ostream& os, const tuple<T1,T2,T3,T4>& t){return os << get<0>(t)<<\" \"<<get<1>(t)<<\" \"<<get<2>(t)<<\" \"<<get<3>(t);}\ntemplate<typename T> ostream& operator << (ostream& os, const vector<T>& as){for(int i:range(as.size())){if(i!=0)os<<\" \"; os<<as[i];}return os;}\ntemplate<typename T> ostream& operator << (ostream& os, const vector<vector<T>>& as){for(int i:range(as.size())){if(i!=0)os<<endl; os<<as[i];}return os;}\n\n// values\ntemplate<typename T> inline T INF(){assert(false);};\ntemplate<> inline int INF<int>(){return 1<<28;};\ntemplate<> inline ll INF<ll>(){return 1LL<<60;};\ntemplate<> inline double INF<double>(){return 1e16;};\ntemplate<> inline long double INF<long double>(){return 1e16;};\n\ntemplate<class T> inline T EPS(){assert(false);};\ntemplate<> inline int EPS<int>(){return 1;};\ntemplate<> inline ll EPS<ll>(){return 1LL;};\ntemplate<> inline double EPS<double>(){return 1e-12;};\ntemplate<> inline long double EPS<long double>(){return 1e-12;};\n\n// min{2^r | n < 2^r}\ntemplate<typename T> inline T upper_pow2(T n){ T res=1;while(res<n)res<<=1;return res;}\n// max{d | 2^d  <= n}\ntemplate<typename T> inline T msb(T n){ int d=62;while((1LL<<d)>n)d--;return d;}\n\ntemplate<typename T,typename U> T pmod(T v,U M){return (v%M+M)%M;}\n\nclass Main{\n\tpublic:\n\n\tvoid run(){\n\t\tint N;cin >> N;\n\n\t\tvector<vector<ll>> dp(N+1,vector<ll>(3,-INF<ll>()));\n\t\tcin >> dp[1][0];\n\t\tfor(int i:range(1,N)){\n\t\t\tchar c;ll a;cin >> c >> a;\n\t\t\tfor(int nest:range(3)){\n\t\t\t\tif(c =='+'){\n\t\t\t\t\tfor(int nnest:range(nest+1)){\n\t\t\t\t\t\tdp[i+1][nnest] = max(dp[i+1][nnest],dp[i][nest]+(nnest%2?-1:1)*a);\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tfor(int nnest:range(nest+1)){\n\t\t\t\t\t\tdp[i+1][nnest] = max(dp[i+1][nnest],dp[i][nest]-(nnest%2?-1:1)*a);\n\t\t\t\t\t}\n\t\t\t\t\tfor(int nnest:range(1,nest+2)){\n\t\t\t\t\t\tdp[i+1][nnest] = max(dp[i+1][nnest],dp[i][nest]-((nnest-1)%2?-1:1)*a);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tll Mv = 0;\n\t\tfor(int nest:range(3)) Mv=max(Mv,dp[N][nest]);\n\t\tcout << Mv << endl;\n\n\t}\n};\n\nint main(){\n\tcout <<fixed<<setprecision(20);\n\tcin.tie(0);\n\tios::sync_with_stdio(false);\n\tMain().run();\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n#define rep(i,n) for(int i=0; i<(n); i++)\nusing ll = long long;\nint n;\nll dp[3], a, b, c, d;\nchar o;\nint main(){\n\tscanf(\"%d%lld\", &n, dp);\n\tdp[1] = dp[2] = -1e15;\n\trep(i,n-1){\n\t\tscanf(\" %c %lld\", &o, &a);\n\t\tb = dp[0]; c = dp[1]; d = dp[2];\n\t\tif(o == '+'){\n\t\t\tdp[0] = max({b, c, d}) + a;\n\t\t\tdp[1] = max(c, d) - a;\n\t\t\tdp[2] += a;\n\t\t}else{\n\t\t\tdp[0] = max({b, c, d}) - a;\n\t\t\tdp[1] = max(max(c, d) + a, b - a);\n\t\t\tdp[2] = max(c, d) + a;\n\t\t}\n\t}\n\tprintf(\"%lld\\n\", max({dp[0], dp[1], dp[2]}));\n}"
  },
  {
    "language": "C++",
    "code": "//ΔARC066E\n#include<iostream>\n#include<cstdio>\n#include<fstream>\n#include<algorithm>\n#include<vector>\n#include<map>\n#include<set>\n#include<queue>\n#include<cmath>\n#include<cstring>\n#include<cstdlib>\nusing namespace std;\ntypedef long long LL;\ntypedef double DB;\nconst int N = 111111;\nconst LL INF = 1e18;\nint n,a[N],op[N];\nLL dp[N][3];\nint main()\n{\n\tint i,x;\n\tchar ch[5];\n\tscanf(\"%d\",&n);\n\tfor(i=1;i<n;i=i+1){\n\t\tscanf(\"%d%s\",a+i,ch);\n\t\top[i+1]=(ch[0]=='-');\n\t}\n\tscanf(\"%d\",a+n);\n\tdp[1][0]=a[1];\n\tdp[1][1]=-INF;\n\tdp[1][2]=-INF;\n\tfor(i=2;i<=n;i=i+1){\n\t\tif(op[i]){\n\t\t\tdp[i][0]=max(max(dp[i-1][0]-a[i],dp[i-1][1]+a[i]),dp[i-1][2]-a[i]);\n\t\t\tdp[i][1]=max(max([i-1][0]-a[i],dp[i-1][1]+a[i]),dp[i-1][2]+a[i]);\n\t\t\tdp[i][2]=max(dp[i-1][1]+a[i],dp[i-1][2]+a[i]);\n\t\t}\n\t\telse{\n\t\t\tdp[i][0]=max(max(dp[i-1][0]+a[i],dp[i-1][1]+a[i]),dp[i-1][2]+a[i]);\n\t\t\tdp[i][1]=dp[i-1][1]-a[i];\n\t\t\tdp[i][2]=dp[i-1][2]+a[i];\n\t\t}\n\t}\n\tcout<<max(max(dp[n][0],dp[n][1]),dp[n][2]);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "/********************************************************************************\n\t\n\tCode by a weak man named CYJian, and he hopes the code can get more points.\n\n\tAlgorithm: \n\n ********************************************************************************/\n\n#include <bits/stdc++.h>\n\nusing namespace std;\n\ntypedef long long ll;\n\n//{{{ FAST IO AND SOME FUNCTIONS\nconst int __SIZE = 1 << 18;\nchar ibuf[__SIZE], *iS, *iT;\n\n#define ge (iS == iT ? (iT = (iS = ibuf) + fread(ibuf, 1, __SIZE, stdin), (iS == iT ? EOF : *iS++)) : *iS++)\n#define ri read_int()\n#define rl read_ll()\n#define FILE(s) freopen(s\"in\", \"r\", stdin), freopen(s\"out\", \"w\", stdout)\n\ntemplate<typename T>\ninline void read(T &x) {\n\tchar ch, t = 0; x = 0;\n\twhile(!isdigit(ch = ge)) t |= ch == '-';\n\twhile(isdigit(ch)) x = x * 10 + (ch ^ 48), ch = ge;\n\tx = t ? -x : x;\n}\ninline int read_int() { int x; return read(x), x; }\ninline ll read_ll() { ll x; return read(x), x; }\n\ntemplate<typename T> inline void chkmin(T&a, T b) { a = a < b ? a : b; }\ntemplate<typename T> inline void chkmax(T&a, T b) { a = a > b ? a : b; }\n//}}}\n\nconst int MAXN = 100010;\n\nint a[MAXN];\nint op[MAXN];\nll suf[MAXN];\nll pre[MAXN];\n\nint main() {\n#ifdef LOCAL\n\tFILE(\"\");\n#endif\n\n\tint n = ri - 1;\n\tpre[0] = a[0] = ri;\n\tfor(int i = 1; i <= n; i++) {\n\t\tchar opt = ge;\n\t\twhile(opt != '-' && opt != '+') opt = ge;\n\t\top[i] = opt == '-' ? -1 : 1;\n\t\ta[i] = ri, pre[i] = pre[i - 1] + (opt == '-' ? -a[i] : a[i]);\n\t}\n\n\tfor(int i = n; i >= 1; i--) suf[i] = suf[i + 1] + a[i];\n\n\tll res = pre[n];\n\tint las = n + 1;\n\tfor(int i = n; i >= 1; i--)\n\t\tif(op[i] == -1) {\n\t\t\tchkmax(res, pre[i - 1] + suf[las] * 2 - suf[i]);\n\t\t\tlas = i;\n\t\t}\n\tcout << res << endl;\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n\nusing namespace std;\n\ntypedef long long int64;\nconst int64 INF = 1LL << 58;\n\nint main()\n{\n  int N, A[100000];\n  char op[100000];\n\n  cin >> N;\n  for(int i = 0; i < N; i++) {\n    if(i > 0) cin >> op[i];\n    cin >> A[i];\n  }\n\n  int64 dp[3] = {A[0], -INF, -INF};\n  for(int i = 1; i < N; i++) {\n    if(op[i] == '+') {\n      dp[0] = max(dp[0], dp[1]) + A[i];\n      dp[1] -= A[i];\n      dp[2] += A[i];\n    } else {\n      dp[2] = max(dp[1], dp[2]) + A[i];\n      dp[1] = max(dp[0], dp[1]) - A[i];\n      dp[0] -= A[i];\n    }\n  }\n  cout << max({dp[0], dp[1], dp[2]}) << endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <string>\n#include <list>\n#include <vector>\n#include <queue>\n#include <algorithm>\n#include <climits>\n#include <cstring>\n#define int long long\n#define uint unsigned long long\n#define CONTAINS(v,n) (find((v).begin(), (v).end(), (n)) != (v).end())\n#define SORT(v) sort((v).begin(), (v).end())\n#define RSORT(v) sort((v).rbegin(), (v).rend())\n#define ARY_SORT(a, size) sort((a), (a)+(size))\n#define MAX(a,b) (((a) > (b)) ? (a) : (b))\n#define MIN(a,b) (((a) < (b)) ? (a) : (b))\nusing namespace std;\n\nint INIT = 1000000000000000L; //10^5 * 10^9 * 10\n\nint N;\nint A[100000];\nchar op[100000];\n\nint dp[100000][3];\n\nint func(int n, int o) //括弧がo個開いている時、n番目以降を使ってつくれる最大の数\n{\n\tif (dp[n][o] < INIT)\n\t{\n\t\treturn dp[n][o];\n\t}\n\n\tint res;\n\tif (n == N - 1)\n\t{\n\t\tif (o % 2 == 0)\n\t\t{\n\t\t\tres = A[n];\n\t\t}\n\t\telse\n\t\t{\n\t\t\tres = -A[n];\n\t\t}\n\t}\n\telse\n\t{\n\t\tif (op[n + 1] == '+')\n\t\t{\n\t\t\tif (o == 0)\n\t\t\t{\n\t\t\t\tres = A[n] + func(n + 1, o);\n\t\t\t}\n\t\t\telse if (o == 1)\n\t\t\t{\n\t\t\t\tint d1 = -A[n] + func(n + 1, o);\n\t\t\t\tint d2 = -A[n] + func(n + 1, o - 1);\n\t\t\t\tres = MAX(d1, d2);\n\t\t\t}\n\t\t\telse if (o == 2)\n\t\t\t{\n\t\t\t\tint d1 = A[n] + func(n + 1, o);\n\t\t\t\tint d2 = A[n] + func(n + 1, o - 1);\n\t\t\t\tint d3 = A[n] + func(n + 1, o - 2);\n\t\t\t\tres = MAX(d1, MAX(d2, d3));\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (o == 0)\n\t\t\t{\n\t\t\t\tres = A[n] + func(n + 1, o + 1);\n\t\t\t}\n\t\t\telse if (o == 1)\n\t\t\t{\n\t\t\t\tint d1 = -A[n] + func(n + 1, o + 1);\n\t\t\t\tint d2 = -A[n] + func(n + 1, o);\n\t\t\t\tres = MAX(d1, d2);\n\t\t\t}\n\t\t\telse if (o == 2)\n\t\t\t{\n\t\t\t\tint d1 = A[n] + func(n + 1, o);\n\t\t\t\tint d2 = A[n] + func(n + 1, o - 1);\n\t\t\t\tres = MAX(d1, d2);\n\t\t\t}\n\t\t}\n\t}\n\n\tdp[n][o] = res;\n\treturn res;\n}\n\nsigned main()\n{\n\tcin >> N;\n\top[0] = '+';\n\tfor (int i = 0; i < N; i++)\n\t{\n\t\tif (i > 0)\n\t\t{\n\t\t\tcin >> op[i];\n\t\t}\n\t\tcin >> A[i];\n\n\t\tfor (int j = 0; j < 3; j++) dp[i][j] = INIT;\n\t}\n\tfor (int i = N - 1; i >= 0; i--)\n\t{\n\t\tfor (int j = 0; j < 3; j++)\n\t\t{\n\t\t\tfunc(i, j);\n\t\t}\n\t}\n\tcout << func(0, 0) << endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\nconst int MAXSIZE=10000020;\nconst ll INF=0x3f3f3f3f3f3f3f3fLL;\nint bufpos;\nchar buf[MAXSIZE];\n#define NEG 1\nvoid init(){\n\t#ifdef LOCAL\n\t\tfreopen(\"C.txt\",\"r\",stdin);\n\t#endif\n\tbuf[fread(buf,1,MAXSIZE,stdin)]='\\0';\n\tbufpos=0;\n}\n#if NEG\nint readint(){\n\tbool isneg=0;\n\tint val=0;\n\tfor(;!isdigit(buf[bufpos]);bufpos++)\n\t\tif (buf[bufpos]=='-')\n\t\t\tisneg=1;\n\tfor(;isdigit(buf[bufpos]);bufpos++)\n\t\tval=val*10+buf[bufpos]-'0';\n\treturn isneg?-val:val;\n}\n#else\nint readint(){\n\tint val=0;\n\tfor(;!isdigit(buf[bufpos]);bufpos++);\n\tfor(;isdigit(buf[bufpos]);bufpos++)\n\t\tval=val*10+buf[bufpos]-'0';\n\treturn val;\n}\n#endif\nchar readchar(){\n\tfor(;isspace(buf[bufpos]);bufpos++);\n\treturn buf[bufpos++];\n}\nint readstr(char* s){\n\tint cur=0;\n\tfor(;isspace(buf[bufpos]);bufpos++);\n\tfor(;!isspace(buf[bufpos]);bufpos++)\n\t\ts[cur++]=buf[bufpos];\n\ts[cur]='\\0';\n\treturn cur;\n}\nint a[100002];\nll dp[100002][4];\ninline void tense(ll &x,ll y){\n\tif (x<y)\n\t\tx=y;\n}\nint main(){\n\tinit();\n\tint n=readint();\n\tfor(int i=1;i<=n;i++){\n\t\ta[i]=readint();\n\t\t// printf(\"%d\\n\",a[i]);\n\t}\n\tfor(int i=0;i<=n+1;i++)\t\n\t\tfor(int j=0;j<4;j++)\n\t\t\tdp[i][j]=-INF;\n\tdp[1][0]=0;\n\tfor(int i=1;i<=n;i++){\n\t\tint sgn=1;\n\t\tfor(int j=0;j<3;j++){\n\t\t\t// printf(\"dp[%d][%d]=%lld\\n\",i,j,dp[i][j]);\n\t\t\t//0 0\n\t\t\ttense(dp[i+1][j],sgn*a[i]+dp[i][j]);\n\t\t\t//0 1\n\t\t\tif (j)\n\t\t\t\ttense(dp[i+1][j-1],sgn*a[i]+dp[i][j]);\n\t\t\t//1 0\n\t\t\tif (a[i]<0)\n\t\t\t\ttense(dp[i+1][j+1],sgn*a[i]+dp[i][j]);\n\t\t\tsgn=-sgn;\n\t\t}\n\t}\n\tprintf(\"%lld\",dp[n+1][0]);\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nusing ll = long long;\nusing Pi = pair<int, int>;\nusing Pl = pair<ll, ll>;\nusing vint = vector<int>;\nusing vll = vector<ll>;\nusing uint = unsigned int;\nusing ull = unsigned long long;\n\ntemplate<typename T> using uset = unordered_set<T>;\ntemplate<typename T1, typename T2> using umap = unordered_map<T1, T2>;\n\nconstexpr int INF = (1 << 30) - 1;\nconstexpr ll LLINF = 1LL << 60;\nconstexpr int dy[] = {1, 0, -1, 0, 1, -1, -1, 1};\nconstexpr int dx[] = {0, 1, 0, -1, 1, 1, -1, -1};\nconstexpr char el = '\\n';\nconstexpr int mod = 1000000007;\n\ntemplate<typename T> T gcd(T a, T b) { return (b ? gcd(b, a % b) : a); }\ntemplate<typename T> T lcm(T a, T b) { return (a / gcd(a, b) * b); }\ntemplate<typename T1, typename T2> inline void chmin(T1 &a, T2 b) { if (a > b) a = b; }\ntemplate<typename T1, typename T2> inline void chmax(T1 &a, T2 b) { if (a < b) a = b; }\n\ntemplate<typename T>\nostream& operator <<(ostream &os, vector<T> &v) {\n\tfor (auto &u : v) os << u << el;\n\treturn (os);\n}\n\ntemplate<typename T>\nistream& operator >>(istream &is, vector<T> &v) {\n\tfor (auto &u : v) is >> u;\n\treturn (is);\n}\n\ntemplate<typename T1, typename T2>\nistream& operator >>(istream &is, pair<T1, T2> &p) {\n\treturn (is >> p.first >> p.second);\n}\n\nint main() {\n\tint N; cin >> N;\n\tvector<vll> dp(N, vll(3, -LLINF));\n\n\tcin >> dp[0][0];\n\tfor (int i = 1; i < N; i++) {\n\t\tchar op; ll val;\n\t\tcin >> op >> val;\n\t\tif (op == '-') val = -val;\n\t\tchmax(dp[i][0], dp[i-1][0] + val);\n\t\tchmax(dp[i][1], dp[i-1][1] - val);\n\t\tchmax(dp[i][2], dp[i-1][2] + val);\n\t\tif (op == '-') {\n\t\t\tchmax(dp[i][1], dp[i-1][0] + val);\n\t\t\tchmax(dp[i][2], max(dp[i-1][1], dp[i-1][2]) - val);\n\t\t}\n\t\tchmax(dp[i][0], dp[i-1][1] + val);\n\t}\n\tcout << max({dp[N-1][0], dp[N-1][1], dp[N-1][2]}) << endl;\n\treturn (0);\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <iostream>\n#include <algorithm>\nusing namespace std;\nlong long pre[111000],suf[111000],ans;\nint a[110000],rr[111000],m,n,l,k,j;\nchar sg[1110000];\nlong long cmp(int l,int r)\n{\n\tif(l>r)\n\t{\n\t\treturn 0;\n\t}\n\telse\n\t{\n\t\treturn suf[r]-suf[l-1];\n\t}\n}\nint main()\n{\n\tcin>>m;\n\tcin>>a[1];\n\tpre[1]=a[1];\n\tsuf[1]=a[1];\n\tfor(int x=1;x<m;x++)\n\t{\n\tscanf(\" %c %d\",&sg[x],&a[x+1]);\n\t\tif(sg[x]=='+')\n\t\t{\n\t\t\tpre[x+1]=pre[x]+a[x+1];\n\t\t}\n\t\telse\n\t\t{\n\t\t\tpre[x+1]=pre[x]-a[x+1];\n\t\t}\n\t\t\tsuf[x+1]=suf[x]+a[x+1];\n\t}\n\trr[m]=m;\n\tans=pre[m];\n\tfor(int x=m-1;x>=0;x--)\n\t{\n\t\tif(sg[x]=='+')\n\t\t{\n\t\t\trr[x]=rr[x+1];\n\t\t}\n\t\telse\n\t\t{\n\t\t\trr[x]=x;\n\t\t}\n\t}\n\tfor(int x=1;x<m;x++)\n\t{\n\t\tif(sg[x]=='-')\n\t\tans=max(ans,pre[x]-cmp(x+1,rr[x+1])+suf[m]-suf[rr[x+1]]);\n\t}\n\tprintf(\"%lld\\n\",ans);\n}"
  },
  {
    "language": "C++",
    "code": "\n#include <cstdio>\n#include <cstdlib>\n#include <cmath>\n#include <climits>\n#include <cfloat>\n#include <cstring>\n#include <map>\n#include <utility>\n#include <set>\n#include <iostream>\n#include <memory>\n#include <string>\n#include <vector>\n#include <list>\n#include <algorithm>\n#include <functional>\n#include <sstream>\n#include <complex>\n#include <stack>\n#include <queue>\n#include <unordered_set>\n#include <unordered_map>\n#include <array>\n#include <cassert>\n#include <bitset>\nusing namespace std;\nusing LL = long long;\n\nint n;\nLL a[114514];\nbool p[114514];//true=+ false=-\n\nconst LL INF = 1e17;\n\nint main(void)\n{\n\tcin >> n;\n\tfor (int i = 0; i < n; ++i)\n\t{\n\t\tif (i != 0)\n\t\t{\n\t\t\tchar c;\n\t\t\tcin >> c;\n\t\t\tp[i] = (c == '+');\n\t\t}\n\t\tcin >> a[i];\n\t}\n\tp[0] = true;\n\tLL dp[4], ndp[4];\n\tdp[0] = 0;\n\tdp[1] = dp[2] = dp[3] = -INF;\n\tfor (int i = 0; i < n; ++i)\n\t{\n\t\tfill(ndp, ndp + 4, -INF);\n\t\tfor (int j = 0; j <= 2; ++j)\n\t\t{\n\t\t\tint jj = j + (!p[i]);\n\t\t\tbool neg = jj % 2;\n\t\t\tLL val = -114514;\n\t\t\tif (!p[i])\n\t\t\t{\n\t\t\t\tval = -a[i];\n\t\t\t\tif (!neg)val = -val;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tval = a[i];\n\t\t\t\tif (neg)val = -val;\n\t\t\t}\n\t\t\tndp[jj] = dp[j] + val;\n\t\t}\n\t\t//括弧を閉じる\n\t\tfor (int j = 3; j >= 1; --j)\n\t\t{\n\t\t\tndp[j - 1] = max(ndp[j - 1], ndp[j]);\n\t\t}\n\t\tcopy(ndp, ndp + 4, dp);\n\t}\n\tcout << dp[0] << endl;\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define int long long\nconst int N = 1e5 + 5, INF = 1e18;\nusing namespace std;\nint n, dp[N][3], arr[N];\nchar c[N];\nsigned main()\n{\n    cin >> n;\n    for (int i = 0; i < n; i++)\n    {\n        for(int j = 0; j < 3; j++)\n        {\n            dp[i][j]=-INF;\n        }\n        int mult = 1;\n        if (i)\n        {\n            cin >> c[i];\n            if (c[i] == '-') mult = -1;\n        }\n        cin >> arr[i];\n        arr[i] *= mult;\n    }\n    dp[0][0] = arr[0];\n    for(int i = 1; i < n; i++)\n    {\n        dp[i][0]=dp[i-1][0] + arr[i];\n        dp[i][0]=max(dp[i][0], dp[i-1][1] + arr[i]);\n        dp[i][0]=max(dp[i][0], dp[i-1][2] + arr[i]);\n        dp[i][1]=dp[i-1][1] - arr[i];\n        if(c[i] == '-') dp[i][1] = max(dp[i][1], dp[i-1][0] + arr[i]);\n        dp[i][1]=max(dp[i][1], dp[i-1][2] - arr[i]);\n        dp[i][2]=dp[i-1][2] + arr[i];\n        if(c[i] == '-') dp[i][2] = max(dp[i][2], dp[i-1][1] - arr[i]);\n    }\n    int ans = max(dp[n-1][0], dp[n-1][1]);\n    ans = max(ans, dp[n-1][2]);\n    cout << ans;\n}"
  },
  {
    "language": "C++",
    "code": "//I love Nanami Chiaki\n#include<bits/stdc++.h>\nusing namespace std;\n#define ll long long\ninline int read(){\n\tint re=0;char c=getchar();\n\twhile (c<'0' || c>'9') c=getchar();\n\twhile (c>='0' && c<='9') {re=(re<<1)+(re<<3)+c-'0';c=getchar();}\n\treturn re;\n}\ninline int readc(){\n\tchar c=getchar();\n\twhile (c!='+' && c!='-') c=getchar();\n\tif (c=='+') return 1;\n\treturn -1;\n}\nint n;\nll ans=0;\nint main(){\n\tint n=read();\n\tans+=read();\n\tint pre=-1,op,a;\n\tll hve=0,add=-1;\n\tfor (int i=1;i<n;i++){\n\t\top=readc();a=read();\n\t\tans+=a;\n\t\tif (op==-1){\n\t\t\tif (pre==-1){\n\t\t\t\tpre=a;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (add==-1) add=pre+hve;\n\t\t\telse add=min(add,pre+hve);\n\t\t\tpre+=a;\n\t\t\thve=0;\n\t\t}\n\t\telse{\n\t\t\thve+=a;\n\t\t}\n\t}\n\tif (pre==-1){\n\t\tprintf(\"%lld\\n\",ans);\n\t\treturn 0;\n\t}\n\telse if (add==-1) ans-=2*pre;\n\telse ans-=2*add;\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\nusing namespace std;\nlong dp[3],a;\nchar op;\nint n;\nmain()\n{\n\tcin>>n>>dp[0];\n\tdp[1]=dp[2]=-1e18;\n\tfor(int i=1;i<n;i++)\n\t{\n\t\tcin>>op>>a;\n\t\tif(op=='+')\n\t\t{\n\t\t\tfor(int j=0;j<3;j++)dp[j]+=j%2?-a:a;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tdp[2]=max(dp[2]+a,dp[1]+a);\n\t\t\tdp[1]=max(dp[1]+a,dp[0]-a);\n\t\t\tdp[0]-=a;\n\t\t}\n\t\tdp[1]=max(dp[1],dp[2]);\n\t\tdp[0]=max(dp[0],dp[1]);\n\t}\n\tcout<<dp[0]<<endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n#define maxn 100010\ntemplate <typename T>inline T read()\n{\n    register T sum=0;\n    register char cc=getchar();\n    int sym=1;\n    while(cc!='-'&&(cc>'9'||cc<'0'))cc=getchar();\n    if(cc=='-')sym=-1,cc=getchar();\n    sum=sum*10+cc-'0';\n    cc=getchar();\n    while(cc>='0'&&cc<='9')sum=sum*10+cc-'0',cc=getchar();\n    return sym*sum;\n}\ntemplate <typename T>inline T read(T &a)\n{\n    a=read<T>();\n    return a;\n}\ntemplate <typename T,typename... Others> inline void read(T& a, Others&... b)\n{\n    a=read(a);\n\tread(b...);\n}\nint n,l=1,r,a[maxn],flg[maxn];\nlong long ans=-1e18,f[maxn],g[maxn];\nint main()\n{\n\tread(n);\n\tflg[1]=1;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tread(a[i]);\n\t\tif(i<n)\n\t\t{\n\t\t\tchar cc;\n\t\t\tscanf(\"%s\",&cc);\n\t\t\tif(cc=='-')\n\t\t\t\tflg[i+1]=-1;\n\t\t\telse\n\t\t\t\tflg[i+1]=1;\n\t\t}\n\t}\n\tfor(int i=1;i<=n;i++)\n\t\tf[i]=f[i-1]+flg[i]*a[i];\n\tfor(int i=n;i>=1;i--)\n\t\tg[i]=g[i+1]+a[i];\n\twhile(l<=n&&flg[l]==1)\n\t\tl+=1;\n\tfor(;l<=n;l=r+1)\n\t{\n\t\tlong long s=a[l];\n\t\tr=l;\n\t\twhile(r<n&&flg[r+1]==1)\n\t\t{\n\t\t\tr+=1;\n\t\t\ts+=a[r];\n\t\t}\n\t\tans=max(ans,f[l-1]+g[r+1]-s);\n\t}\n\tprintf(\"%lld\\n\",max(ans,f[n]));\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <map>\n#include <set>\n#include <ctime>\n#include <queue>\n#include <stack>\n#include <cmath>\n#include <vector>\n#include <bitset>\n#include <cstdio>\n#include <cctype>\n#include <string>\n#include <numeric>\n#include <cstring>\n#include <cassert>\n#include <climits>\n#include <cstdlib>\n#include <iostream>\n#include <algorithm>\n#include <functional>\nusing namespace std ;\n#define int long long\n#define rep(i, a, b) for (ll i = (a); i <= (b); ++i)\n#define per(i, a, b) for (ll i = (a); i >= (b); --i)\n#define loop(it, v) for (auto it = v.begin(); it != v.end(); it++)\n#define cont(i, x) for (ll i = head[x]; i; i = edge[i].nex)\n#define clr(a) memset(a, 0, sizeof(a))\n#define ass(a, cnt) memset(a, cnt, sizeof(a))\n#define cop(a, b) memcpy(a, b, sizeof(a))\n#define lowbit(x) (x & -x)\n#define all(x) x.begin(), x.end()\n#define SC(t, x) static_cast <t> (x)\n#define ub upper_bound\n#define lb lower_bound\n#define pqueue priority_queue\n#define mp make_pair\n#define pb push_back\n#define pof pop_front\n#define pob pop_back\n#define fi first\n#define se second\n#define y1 y1_\n#define Pi acos(-1.0)\n#define iv inline void\n#define enter putchar('\\n')\n#define siz(x) ((ll)x.size())\n#define file(x) freopen(x\".in\", \"r\", stdin),freopen(x\".out\", \"w\", stdout)\ntypedef double db ;\ntypedef long long ll ;\ntypedef unsigned long long ull ;\ntypedef pair <ll, ll> pii ;\ntypedef vector <ll> vi ;\ntypedef vector <pii> vii ;\ntypedef queue <ll> qi ;\ntypedef queue <pii> qii ;\ntypedef set <ll> si ;\ntypedef map <ll, ll> mii ;\ntypedef map <string, ll> msi ;\nconst ll maxn = 2e6 + 100 ;\nconst ll inf = 0x3f3f3f3f ;\nconst ll iinf = 1 << 30 ;\nconst ll linf = 2e18 ;\nconst ll mod = 998244353 ;\nconst double eps = 1e-7 ;\ntemplate <class T = ll> T chmin(T &a, T b) { return a = min(a, b);}\ntemplate <class T = ll> T chmax(T &a, T b) { return a = max(a, b);}\ntemplate <class T = ll> T read()\n{\n\tT f = 1, a = 0;\n\tchar ch = getchar() ;\n\twhile (!isdigit(ch)) { if (ch == '-') f = -1 ; ch = getchar() ; }\n\twhile (isdigit(ch)) { a =  (a << 3) + (a << 1) + ch - '0' ; ch = getchar() ; }\n\treturn a * f ;\n}\n\nll n, ans = -linf;\n\nll a[maxn], opt = 1, pre[maxn], sum, cnt;\n\nchar s;\n\nsigned main()\n{\n\tn = read();\n\tpre[1] = a[1] = read();\n\trep(i, 2, n)\n\t{\n\t\tscanf(\"%c\", &s);\n\t\tif(s == '-') opt = -1;\n\t\telse opt = 1;\n\t\ta[i] = read() * opt;\n\t\tpre[i] += pre[i - 1] + a[i];\n\t}\n\tans = pre[n];\n\tper(i, n, 1)\n\t{\n\t\tif(a[i] < 0)\n\t\t{\n\t\t\tsum += a[i];\n\t\t\tchmax(ans, sum + cnt + pre[i - 1]);\n\t\t\tcnt -= sum;\n\t\t\tsum = 0;\n\t\t}\n\t\telse sum -= a[i];\n\t}\n\tprintf(\"%lld\\n\", ans);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n//ios::sync_with_stdio(false);cin.tie(0);cout.tie(0);\nusing namespace std;\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef pair<int,int> pii;\ntypedef pair<pii,int> ppii;\ntypedef pair<int,pii> pipi;\ntypedef pair<ll,ll> pll;\ntypedef pair<pll,ll> ppll;\ntypedef pair<ll,pll> plpl;\ntypedef tuple<ll,ll,ll> tl;\nll mod=1000000007;\nll mod2=998244353;\nll mod3=1000003;\nll mod4=998244853;\nll inf=1000000000000000000;\ndouble pi=acos(-1.0);\n#define rep(i,m,n) for(ll i=m;i<n;i++)\n#define rrep(i,n,m) for(ll i=n;i>=m;i--)\nint dh[4]={1,-1,0,0};\nint dw[4]={0,0,1,-1};\nint ddh[8]={-1,-1,-1,0,0,1,1,1};\nint ddw[8]={-1,0,1,-1,1,-1,0,1};\nll lmax(ll a,ll b){\n    if(a<b)return b;\n    else return a;\n}\nll lmin(ll a,ll b){\n    if(a<b)return a;\n    else return b;\n}\nll gcd(ll a,ll b){\n    if(a<b)swap(a,b);\n    if(b==0)return a;\n    if(a%b==0)return b;\n    return gcd(b,a%b);\n}\nll Pow(ll n,ll k){\n    ll ret=1;\n    ll now=n;\n    while(k>0){\n        if(k&1)ret*=now;\n        now*=now;\n        k/=2;\n    }\n    return ret;\n}\nll beki(ll n,ll k,ll md){\n  ll ret=1;\n  ll now=n;\n  while(k>0){\n    if(k%2==1){\n      ret*=now;\n      ret%=md;\n    }\n    now*=now;\n    now%=md;\n    k/=2;\n  }\n  return ret;\n}\nll gyaku(ll n,ll md){\n  return beki(n,md-2,md);\n}\n\nint main(){\n    ios::sync_with_stdio(false);cin.tie(0);\n    ll n;cin>>n;\n    ll aa;cin>>aa;\n    vector<ll> v;\n    v.push_back(aa);\n    rep(i,0,n-1){\n        char c;cin>>c;\n        ll a;cin>>a;\n        if(c=='+')v.push_back(a);\n        else v.push_back(-a);\n    }\n    ll ans=0;\n    ll c=0;\n    rep(i,0,v.size()){\n        if(v[i]<0){\n            if(c==0){\n                c=1;\n            }\n            else c=2;\n        }\n        if(c==1)ans+=-abs(v[i]);\n        else ans+=abs(v[i]);\n    }\n    cout<<ans<<endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\nconst int inf = 0x3f3f3f3f;\nconst long long INF = 0x3f3f3f3f3f3f3f3f;\ninline void read(int &x) {\n  x = 0;\n  bool flag = 0;\n  char ch = getchar();\n  while (!isdigit(ch)) {\n    if (ch == '-') {\n      flag = 1;\n    }\n    ch = getchar();\n  }\n  while (isdigit(ch)) {\n    x = x * 10 + ch - 48;\n    ch = getchar();\n  }\n  if (flag) {\n    x = -x;\n  }\n}\nint main() {\n  int n;  \n  read(n);\n  long long f[3] = {0, -INF, -INF};\n  for (int i = 1; i <= n; ++i) {\n    int x;\n    read(x);\n    f[0] += x;\n    f[1] -= x;\n    f[2] += x;\n    f[0] = max(f[0], f[1]);\n    f[1] = max(f[1], f[2]);\n    if (x < 0) {\n      f[2] = max(f[2], f[1]);\n      f[1] = max(f[1], f[0]);\n    }\n  }\n  printf(\"%lld\\n\", f[0]);\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#include <ext/pb_ds/assoc_container.hpp>\n#include <ext/pb_ds/tree_policy.hpp>\n \nusing namespace std;\nusing namespace __gnu_pbds;\n \n#define fi first\n#define se second\n#define mp make_pair\n#define pb push_back\n#define fbo find_by_order\n#define ook order_of_key\n \ntypedef long long ll;\ntypedef pair<int,int> ii;\ntypedef vector<int> vi;\ntypedef long double ld; \ntypedef tree<int, null_type, less<int>, rb_tree_tag, tree_order_statistics_node_update> pbds;\ntypedef set<int>::iterator sit;\ntypedef map<int,int>::iterator mit;\ntypedef vector<int>::iterator vit;\n\nvector<ll> dq;\nvector<ll> S;\n\nint main()\n{\n\tios_base::sync_with_stdio(0); cin.tie(0);\n\tint n; cin>>n;\n\tdq.pb(0); S.pb(0);\n\tll sum=0;\n\tfor(int i=0;i<n;i++)\n\t{\n\t\tchar c='+';\n\t\tif(i>0) \n\t\t{\n\t\t\tcin>>c;\n\t\t}\n\t\tll x; cin>>x;\n\t\tsum+=x;\n\t\tif(c=='+')\n\t\t{\n\t\t\tS.back()+=x;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tS.pb(0);\n\t\t\tdq.pb(x);\n\t\t}\n\t}\n\tif(dq.size()==1)\n\t{\n\t\tcout<<sum<<'\\n';\n\t\treturn 0;\n\t}\n\tll ans = -ll(1e18);\n\tfor(int i=1;i<S.size();i++)\n\t{\n\t\tans=max(ans, sum - 2LL*(S[i]+dq[i]));\n\t\tsum-=dq[i];\n\t}\n\tcout<<ans<<'\\n';\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<cstring>\n#include<algorithm>\n#include<vector>\n#define MAXN 100000\nusing namespace std;\ntypedef long long LL;\nvector<int> vec;\nLL sum[MAXN+5],sum2[MAXN+5],a[MAXN+5];\nint n;\nbool dec[MAXN+5];\nchar str[5];\nint main()\n{\n\tscanf(\"%d\",&n);\n\tscanf(\"%lld\",&a[1]);\n\tfor(int i=2;i<=n;i++)\n\t{\n\t\tscanf(\"%s %lld\",str,&a[i]);\n\t\tif(str[0]=='-')\n\t\t\tvec.push_back(i),dec[i]=true;\n\t}\n\tfor(int i=1;i<=n;i++)\n\t\tsum[i]=sum[i-1]+a[i];\n\tfor(int i=1;i<=n;i++)\n\t\tif(dec[i]==true)\n\t\t\tsum2[i]=sum2[i-1]-a[i];\n\t\telse\n\t\t\tsum2[i]=sum2[i-1]+a[i];\n\tLL ans=sum2[n];\n\tint pos1,pos2;\n\tfor(int i=0;i<(int)vec.size()-1;i++)\n\t{\n\t\tpos1=vec[i],pos2=vec[i+1];\n\t\tans=max(ans,sum2[pos1]-(sum[pos2-1]-sum[pos1])+(sum[n]-sum[pos2-1]));\n\t}\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio> \n#include <cstring>\n#include <algorithm>\nusing namespace std;\n#define LL long long\nint n, num[100005], opt[100005];\nLL sum[100005], now[100005], ans;\nint main()\n{\n\tchar ch[2];\n\tscanf(\"%d%d\", &n, &num[1]); opt[1] = 1;\n\tnow[1] = sum[1] = num[1];\n\tfor(int i = 2; i <= n; i++)\n\t{\n\t\tscanf(\"%s%d\", ch, &num[i]); opt[i] = (ch[0] == '+') ? 1 : -1;\n\t\tnow[i] = now[i-1] + opt[i] * num[i];\n\t\tsum[i] = sum[i-1] + num[i];\n\t}\n\tans = now[n];\n\tint last = -1;\n\tfor(int i = 1; i <= n; i++) if(opt[i] == -1)\n\t{\n\t\tif(last != -1)\n\t\t\tans = max(ans, now[last-1] - (sum[i-1] - sum[last-1]) + (sum[n] - sum[i-1]));\n\t\tlast = i;\n\t}\n\tprintf(\"%lld\\n\", ans);\n}\n \n\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define INF 0x3f3f3f3f\nusing namespace std;\ntypedef long long LL;\nconst double eps = 1e-10;\nconst int maxn = 1e5 + 100;\nvector<int>g;\nlong long a[maxn],sum[maxn],ss[maxn]; char s[maxn];\nint main() {\n#ifdef ac\n    freopen(\"in.txt\" , \"r\" , stdin);\n//    freopen(\"out.txt\" , \"w\" , stdout);\n#endif\n    int n;\n    cin >> n;\n    cin >> a[1];\n    if(n==1){cout <<a[1]<<endl;return 0;}\n    sum[0]=0;ss[0]=0;\n   sum[1]=ss[1]=a[1];\n//   cout <<1<<\":\" << ss[1] << \" \" << sum[1] <<endl;\n    for(int i=2;i<=n;++i) {\n        cin >> s[i]>>a[i];\n        sum[i]=sum[i-1]+a[i];\n        if(s[i]=='-')g.push_back(i),ss[i]-=a[i];\n        else ss[i]+=a[i];\n//        cout <<i<<\":\" << ss[i] << \" \" << sum[i] <<endl;\n    }\n    ss[n+1]=ss[n];sum[n+1]=sum[n];\n    g.push_back(g[g.size()-1]+1);\n    long long ans=ss[n];\n    for(int i=0;i<g.size()-1;++i) {\n        int x=g[i],y=g[i+1]-1;\n\n        ans=max(ss[x-1]-(sum[y]-sum[x-1])+(sum[n]-sum[y]),ans);\n//         cout <<x << \" \" << y << \" \" << ans << endl;\n    }\n    cout << ans << endl;\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n#include <string>\n#include <vector>\n#include <cmath>\n#include <map>\n#include <queue>\n#include <iomanip>\n#include <set>\n#include <tuple>\n#define mkp make_pair\n#define mkt make_tuple\n#define rep(i,n) for(int i = 0; i < (n); ++i)\nusing namespace std;\ntypedef long long ll;\nconst ll MOD=1e9+7;\n\nint N;\nvector<ll> A;\nvector<char> opt;\n\nll sum[100010];\nint nxt[100010];\nll rsum[100010];\n\nvoid chmax(ll &a,ll b){\n    if(a<b) a=b;\n}\n\nint main(){\n  cin>>N;\n  A.resize(N);\n  opt.resize(N);\n  cin>>A[0];\n  opt[0]='+';\n  for(int i=1;i<N;i++){\n      cin>>opt[i];\n      cin>>A[i];\n  }\n\n  for(int i=0;i<=N;i++) nxt[i]=N;\n  for(int i=N-1;i>=0;i--){\n      nxt[i]=nxt[i+1];\n      if(opt[i]=='-') nxt[i]=i;\n  }\n\n  for(int i=0;i<N;i++){\n      if(i>0) sum[i]=sum[i-1];\n      if(opt[i]=='+') sum[i]+=A[i];\n      else sum[i]-=A[i];\n  }\n\n  for(int i=N-1;i>=0;i--){\n      rsum[i]=rsum[i+1];\n      rsum[i]+=A[i];\n  }\n\n  ll ans=sum[N-1];\n  for(int i=0;i<N;i++){\n      if(opt[i]=='+') continue;\n      ll res=sum[i-1]+rsum[nxt[i+1]];\n      ll minus=abs(rsum[i]-rsum[nxt[i+1]]);\n      res-=minus;\n      ans=max(ans,res);\n  }\n\n  cout<<ans<<endl;\n\n\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n#define maxn 100010\ntemplate <typename T>inline T read()\n{\n    register T sum=0;\n    register char cc=getchar();\n    int sym=1;\n    while(cc!='-'&&(cc>'9'||cc<'0'))cc=getchar();\n    if(cc=='-')sym=-1,cc=getchar();\n    sum=sum*10+cc-'0';\n    cc=getchar();\n    while(cc>='0'&&cc<='9')sum=sum*10+cc-'0',cc=getchar();\n    return sym*sum;\n}\ntemplate <typename T>inline T read(T &a)\n{\n    a=read<T>();\n    return a;\n}\ntemplate <typename T,typename... Others> inline void read(T& a, Others&... b)\n{\n    a=read(a);\n\tread(b...);\n}\nint n,l=1,r,a[maxn],flg[maxn];\nlong long ans=-1e18,f[maxn],g[maxn];\nint main()\n{\n\tread(n);\n\tflg[1]=1;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tread(a[i]);\n\t\tif(i<n)\n\t\t{\n\t\t\tchar cc;\n\t\t\tscanf(\"%s\",&cc);\n\t\t\tif(cc=='-')\n\t\t\t\tflg[i+1]=-1;\n\t\t\telse\n\t\t\t\tflg[i+1]=1;\n\t\t}\n\t}\n\tfor(int i=1;i<=n;i++)\n\t\tf[i]=f[i-1]+flg[i]*a[i];\n\tfor(int i=n;i>=1;i--)\n\t\tg[i]=g[i+1]+a[i];\n\twhile(l<=n&&flg[l]==1)\n\t\tl+=1;\n\tfor(;l<=n;l=r+1)\n\t{\n\t\tlong long s=a[l];\n\t\tr=l;\n\t\twhile(r<n&&flg[r+1]==1)\n\t\t{\n\t\t\tr+=1;\n\t\t\ts+=a[r];\n\t\t}\n\t\tans=max(ans,f[l-1]+g[r+1]-s);\n\t}\n\tprintf(\"%lld\\n\",ans);\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\ntypedef signed long long ll;\n\n#undef _P\n#define _P(...) (void)printf(__VA_ARGS__)\n#define FOR(x,to) for(x=0;x<(to);x++)\n#define FORR(x,arr) for(auto& x:arr)\n#define ITR(x,c) for(__typeof(c.begin()) x=c.begin();x!=c.end();x++)\n#define ALL(a) (a.begin()),(a.end())\n#define ZERO(a) memset(a,0,sizeof(a))\n#define MINUS(a) memset(a,0xff,sizeof(a))\n//-------------------------------------------------------\n\nint N;\nll dp[101010][4];\n\nvoid solve() {\n\tint i,j,k,l,r,x,y; string s;\n\t\n\tcin>>N;\n\tcin>>x;\n\tmemset(dp,0xcf,sizeof(dp));\n\tdp[0][0]=x;\n\tFOR(i,N-1) {\n\t\tcin>>s>>x;\n\t\t\n\t\tll T[3];\n\t\tif(s==\"+\") {\n\t\t\tT[0]=dp[i][0];\n\t\t\tT[1]=dp[i][1];\n\t\t\tT[2]=dp[i][2];\n\t\t\t//T[3]=dp[i][3];\n\t\t}\n\t\telse {\n\t\t\tT[0]=dp[i][1];\n\t\t\tT[1]=max(dp[i][0],dp[i][2]);\n\t\t\tT[2]=dp[i][1];\n\t\t\t//T[3]=dp[i][2];\n\t\t}\n\t\t//dp[i+1][3] = T[3]-x;\n\t\tdp[i+1][2] = T[2]+x;\n\t\tdp[i+1][1] = max(dp[i+1][2], T[1]-x);\n\t\tdp[i+1][0] = max(dp[i+1][1], T[0]+x);\n\t}\n\t\n\tcout<<*max_element(dp[N-1],dp[N-1]+4)<<endl;\n\t\n}\n\n\nint main(int argc,char** argv){\n\tstring s;int i;\n\tif(argc==1) ios::sync_with_stdio(false), cin.tie(0);\n\tFOR(i,argc-1) s+=argv[i+1],s+='\\n';\n\tFOR(i,s.size()) ungetc(s[s.size()-1-i],stdin);\n\tsolve(); return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <string>\n#define int long long\n#define INF 1e+18\nusing namespace std;\n\nsigned main(){\n\tint n,a[100000],imos[100001] = {},sum = 0,ma = -INF;\n\tstring op[100000];\n\tcin >> n;\n\tfor(int i = 0;i < n;i++){\n\t\tif(i) cin >> op[i];\n\t\telse op[i] = \"+\";\n\t\tcin >> a[i];\n\t\timos[i + 1] = imos[i] + a[i];\n\t}\n\tfor(int i = 0;i < n;i++){\n\t\tif(op[i] == \"-\"){\n\t\t\tint pos = i + 1,tmp = -a[i];\n\t\t\twhile(op[pos] == \"+\" && pos < n) tmp -= a[pos++];\n\t\t\tma = max(ma,sum + tmp + imos[n] - imos[pos]);\n\t\t\tsum -= a[i];\n\t\t}else sum += a[i];\n\t}\n\tcout << max(ma,sum) << endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n#define int long long\nint n,a[100005],hz[100005];\nchar s[100005];\nint max(int x,int y)\n{\n\treturn x>y?x:y;\n}\nsigned main()\n{\n\tscanf(\"%lld\",&n);\n\tfor(int i=1;i<n;++i){\n\t\tscanf(\"%lld\",&a[i]);\n\t\tscanf(\" %c\",&s[i]);\n\t}\n\tscanf(\"%lld\",&a[n]);\n\ts[0]='+';\n\tint ans=0;\n\tfor(int i=1;i<=n;++i)\n\t{\n\t\tif(s[i-1]=='+')ans+=a[i];\n\t\telse ans-=a[i];\n\t}\n\thz[n]=a[n];\n\tfor(int i=n-1;i>=1;--i)hz[i]=hz[i+1]+a[i];\n\tint now=0;\n\tfor(int i=1;i<=n;++i)\n\t{\n\t\tif(s[i-1]=='+')now+=a[i];\n\t\tif(s[i-1]=='-')\n\t\t{\n\t\t\tnow-=a[i];\n\t\t  int hh=now;\n\t\t\tint j=i;\n\t\t\twhile(j<n&&s[j]!='-')\n\t\t\t{\n\t\t\t\thh-=a[j+1];\n\t\t\t\tj++;\n\t\t\t}\n\t\t\tif(j>=n)break;\n\t\t\thh+=hz[j+1];\n\t\t\tans=max(ans,hh);\n\t\t\tnow-=a[i];\n\t\t}\n\t}\n\tcout<<ans<<endl;\n}"
  },
  {
    "language": "C++",
    "code": "/*!|||||||!!!!!!!!!!!!!!!!!!|%%$&&&&&&&&&&&&&|'`......```':'':!;.  ......````':!;..\n||||||||||||!!!!!!!!!!!!!!!!!!!;;;;;!|%$$&&&|'..  ....``'''''::`  ......`````';:.\n||||||||||||||||||||||!!!!!!!!!!;;;;;;;;;;;'`..  ....``'''''':` ........````':'.\n|||||||||%%||%%|||||||||||||||||!;;;;;;;;'....   ....`````'''`..........````''.\n%%%%%%%%%%%%%%%%%%|%||||%%|%%%%|!;!;;;;:.       ....```````'::'`........`````.\n$$$$$$$%%$%%$$$$$%%%%%%%%%%%%%%|!!!!;'.        ....````````';|!!!!:`....```..\n$$$$$$%%%$%%$$$$$%%%%%%%%%%%%%%!;!!;`          ....```````':!!!!!!!!|||;'`.\n$$$%$%|%%||%%%%%%%%%%||%%%%%|%|!;!!:.         ....````````:!;;;!;;!!|%$$$$|:`\n%%%%%||||||||||||||||||||||||||!;!;'`.        ....```````';!!!!!!!!||;';%$&@@%:`.\n|||||||||!!|||||||||||||||||||!;!!:':'.       ..```''```';!!!!!!!||%$$%!` .'|&@@%:`. .\n||||||||!!!|||||||||||||||||||!;!;::;;:`     ..````'''`';;!!!!!!|%%$$$$&&%'   .;&#@!'....\n|||||||!!!!|||||||||||||||||||!;!;:;;;;;'.  ..```''''`:!!!!!;!!|%$$$$&&&&&@$:.   .;&#$:....\n|||!||||!!||||||||||||||||||||!;!::;;;;;;;`..```''':':;!!!!!!!!|%$$&&&&&&@&@#$:.   .`!@$:...\n|||!|||!!!|||||||||||||||||||!!;;:;;;;;;;!!;'`'''':':!;;;;;!!|||||%$&&&&@@@@@@@%`......:$$:...\n||!!||!!!!!||||||||||||||||||!!;;:;;;;;;;!!|!;'''``'':;!!;!!;!|$$$%|%&&&@@@@@@@#&;.......'%|`..\n||!!||!!!!!!|||||||||||||||!!!!;;:;;;;;;:''::::;;!;;;;':!!!!!!!!!%$&$|%&@@@@@@#@@&!`.......`|;..\n||!!|!!!!!!!||||||||||||||||||!;;:;;'````:!%%%%|;:;;:::::;|!!||!!!!|$&$%%&@@&@@##@&!'........;|'.\n|!!!|!!!!!!!|||||||||||||||!!!!;:'```';!!||!!!|!!;;;;:::::;%%||%%|||||%&$%%&@@@@@##&;`` ......'!:.\n|!!!!!!!!!!!!|||||||||||||!!!!!;::;;;;;:;!!!|||||!!;;;;;;;;!%$%|%$$%||||%$$%$&@@@@#@$:``      .`''.\n|!!!||!!!!!!!||||||||||||!!!!!!!;;;:::;;!!|||||||||!!;;;;;;;;|$%|%%$$$%|||%%$$&@&@@#@!.`'.     ...`.\n|!!!||!!!!!!!||||||||||||!!!!!!!;:;;;;;!!!!!|||||||||!!;;;;;;;|$$||%$$&&$%%%%%$&&&&@@@!.``.    ....`.\n|!!!||!!|!!||!|||||||||||!!!!!!!;;;;;;;!!||||||||||!!!;;;;;;;;;|$$||$$$&&&$%%%|%$&&&@@@; .`.    .. ...\n|!!!||!!||!!|!!|||||||||||!!!!!!!;;;;;!!||||||||!!!|||||!!;;;;;;|$$|!$$$&&&&$%%|%$&&&&@$' .`.   ..  ..\n|!!!||!!||!!||!|||||||||||!!!!!!!;;;;;!||||||!!!|||||||||!::'::::!$$!!%$$&&&&$$%!!%$$&&&!. .`.  ..\n|!!!|||!|||!!|!!|||||||||||!!!!!!!;;;!!||||!!|||||||||!;;!!!!!!;;;|$%!|$$$&&&&&$|`.;$$&&|`  .`...\n|!!!!||!||||!!|!!||||||||||!!!!!!!!!;!|||!||||||||!!!!||!:'`.`:;!!!%$%!|$$$&&&&&$;  '%$&$;   ``\n|!!!!||!!||||!!|!!|||||||%||!!!!!!!!!!||||||||||!!!|!:.      ....`';|||!|$$&&&&&@|`  '%&$%:   ..\n|!!!!|||||||||!|||!||||||%%|!!|!!!!!!!||||||||!!!;` ...      ...';||%$|;!%$$&&&&@$:   :$&$$|.  ..\n||!!!||||||||||!!||||||||%%||!!|!!!!!!|||||||!!'..```..``... `:;;;!|%$$|!|%$&&&&&&;   '|$%:!$: ...\n||!;!|||||||||||!!%|||||%%%%|||||!|!!|||||||!'..```.`'```..`!%!!%%%%|$$||!|$$&&&&&;   ';!%: `|%`..\n||!!!!!|||||%||||!!%%||%%%%%%|||||||!||||||;:`.``.`:;;`.':```:':|%%%%$$%|!;|&&&&&$:   ''`!;    :|:.\n|||!!!!!||||%%%|%%||%%|%%%$$%|||%|!||!||||!:`....';;!|%;.```''::!%%%|%$$$|';$&&&&%'  .`  ::       .`''`. .``.\n|||!!!!!||||%%%%%%%|||%%%$$$$%|%%%||%|!||!:```....`;|%$$|'':`'!;!%%%%%%$&@%!%&$$&!. .`.  ``.      .\n|||!!!|!!|%%%%%%%%%%%||%%%$$$%|%%%%||%|!|!!|||||||!;::|$$$%|%%%!!|%%%%%%$&&&$$$$%' .`    ..\n|||!!!||!!|%%%%%%%%%%%%||%%%$$%|%%$%|%%!!|||||||||||||||!!!||||%%%%%%%%%$$$$$$$$&%:.     ..\n||||!!|%|!;!%%%%%%%%%%%%%%|%%%$||%$%%|%|!!||||||||||||||%%%%%%%%$$$%%%%$$$$%%$$$&&&&&&$%'..\n!|||!!!|%|!;!%%%%%%%%%%%%%%%|%%%||%%%||%|!!!||||||||||||%%%%%%%%%%%%%%%$$$$%%$$$$$$$$$$%'\n;!||!!!|%%%|!;|%%%%%%%%%%%%%%%%|%||%%%!!||!!!|%%||||||%%%%%%%%%%%%%%%%$$$$%%%%%$$$$$$$$!`\n;;!||!!!|%%||!;!||%%%%%%%%%%%%%%%||%%%|!!|||!!!|%$%|||%%%%%%%%%%%%%%%%%%%%%%%$$$$$$$$$$;.\n;;;||!!!!|%%||!;;!|%%%%%%%|||||%%|||||||!!||||||||%$%|%%%%%%%%%%%%%%%%$%%%%%$$$$$$$$$$%'\n!!;!|!;;!!|%%|||!;!||%%%||||||||||||||||!!|%||||||||%%||%%%%%%%%%%%%$$$$$$$$$$$$$$$$$$!`\n!!;;!!;;!!!||||||!;;!|||||||||||||||!||||!;;|%%%%%%%|%%%%%%%%%%%%%%%$$$$$$$$$$$$$$$$$$%'\n!!!;;!!;;!!!||||||!!;;!||||||||||||||!||||!!!!%$%|%%%%%%%%%%%%%%%%%%$$$$$$$$$$$$$$$$$$$%'\n!!!!;;!!;;;!!!|||||!!::;|||||!|||||||!!|||||!!!|$$%%%%%%%%%%%%%%%$$$$$$$$$$$$$$$$$$$$&&&$:\n;;!!!!;!;;;;!!!|||||!!;::;!|!!!!||||||!!|||%%|!!!%&%%%%%%%%%%%%%%$$$$$$$$$$$$$$$$$$$$$&$!`\n|!!!!;!;;;;::;!!!||!||!;;;;;!!!!!!|||||!!|||%%|||!|$&$%%%%%%%%$$$$$$$$$$$$$$$$$$$$$$$$%!`\n:::;!;;;;::;::;;!!|||!!!!;;;;;!!!!!!||||!!|||%$%%||||$&$%%%%%%$$$$$$$$$$$$$$$$$$$$$$$$$%'\n;;;;;!!!!!;:::;;:;!!||!!!!!;;;;;!!!!!!||||!!||%$%%%%%%%%$$%%%$$$$$$$$$$$$$$$$$$$$$$$$$$$$:\n;;;;;;;;;!!!;::;;;:;!!|||||!!!!;;;;!!!!!|||||||%$$%%%%%%%%$$$$$$$$$$$$$$$$$$$$$$$$$$$$&$!.\n;;;;;;;;:::::::::;;;;;;!||!!!!!!!!;;;!!!!!||||||||$$%%%%%%%%%%$$$$$$$$$$$$$$$$$$$$$$$$$&!.\n;;;;;;;::;;:::;;;;:;;;;;;;;!!!|!!!!!!;;;!!!!!|%%||||%$%%%%%%%%%$$$$$$$$$$$$$$$$$$$$$$$$&%`\n;;;;;;;:::;;::;;;;;;;;;;;;::;!!!!!!!!|!;!!!!!!!|%%%%%%%%%%$$$$$$$$$$$$$$$$$$$$$$$$$$$$$&&:\n;;;;;;;::;::;:;;;;;;;;;!!!!!!!;;!!|||||!!!|!!!!!!!|%%%%%%%%%%%%%%%%$$$$$$$$$$$$$$$$$$$$&&|`\n;;;;;;;::;;;::;;;;;;;;;;!!!!!!!!!||||||||;!!|||||||||%%%%%%%%%%%%%%%$$$$$$$$$$$$$$$$$$$$&&!.\n;;;;;;;::;;;;::;;;;;;;;;;!!!!!!!!|||||||||;;;!!|||||||||%%%%%%%%%%%%%%%%$$$$$$$$$$$$$$$$$&|`\n!;;;;;;;::;;;:;;;;;;;;;;;!!!!!!!!!|||||||%!;;;;;!||||||||||%%%%%%%%%%%%%%%$$$$$$$$$$$$$$$$!.\n;!;;;;;;::;;;:;;;;::;;;;;!!!!!!!!!|||||||%%!;;;;;;!!!|||||||%%%%%%%%%%%%%%%%%%$$$$$$$$$$&|`\n:;!!;;;;:::;;;:;;;:::;;;;;!!!!!!!!||||||||$|;;;;;;;;!!!!||||||||%%%%%%%%%%%%%%%%%%%$$$|'\n::;!!;;;::::;;:;;;;::;;;;;;!!!!!!!!|||||||$$!;;;;;;;;;;;!!!!!||||||%%%%%%%%%%%%|!:`.\n:::;!!;;;:::;;;;;;;:::;;;;;!!!!!!!!||%||||%&%!;;;;;;;;;;;;!!!!!!!!!!!|!;:`.\n::::;!!!;::::;::;;;::::;;;;;!!!!!!!!|%%|||!%&%;;;;;;;;;;;;;;;;;;;;;%|`\n:::::;!!!;:::::::;;:::::;;;;!!!!!!!!||%%%%!;%$|;;;;;;;;;;;;;;;;;;%@@$:\n::::::;!!!:::::':;;::::::;;;;;!!|!!!||%$%%|!;%$!;;;;;;;;;;;;;;;;|$&@@|`\n:::::':;;!;::::'';;;::::::;;;;!!!|!!!||%$%%|;;%%;;;;;;;;;;;;;;!||%$&#@|`\n::::::':;;;:::''':;;:::::::;;;!!!||!!!|%$$%%|;;||;;;;;;;;;;;!||||%%%&#@%'\n:::::::':;;;::'. ';;::::::::;;;!!!|!!!||%$$$%;;;||;;;;;;;;;|%%|||||%%&@@*/\n#include <bits/stdc++.h>\nusing namespace std;\n\nint val[100005];\nchar fh[100005];\nint n;\nlong long dp[100005][3];\n\nint main(){\n\tscanf(\"%d\",&n);\n\tfh[1]='+';\n\tfor(int i=1;i<=n;i++){\n\t\tscanf(\"%d\",val+i);\n\t\tif(i!=n){\n\t\t\tscanf(\" %c\",fh+i+1);\n\t\t}\n\t}\n\tfor(int i=0;i<=n;i++){\n\t\tfor(int j=0;j<3;j++){\n\t\t\tdp[i][j]=-0x3f3f3f3f3f3f3f3fll;\n\t\t}\n\t}\n\tdp[0][0]=0;\n\tfor(int i=1;i<=n;i++){\n\t\tfor(int j=0;j<3;j++){\n\t\t\tif(fh[i]=='-'){\n\t\t\t\tdp[i][j+1]=max(dp[i][j+1],dp[i-1][j]+(j==1?1:-1)*val[i]);\n\t\t\t}\n\t\t\tif(j){\n\t\t\t\tdp[i][j-1]=max(dp[i][j-1],dp[i-1][j]+(j==2?-1:1)*(fh[i]=='-'?-1:1)*val[i]);\n\t\t\t}\n\t\t\tif(j>1){\n\t\t\t\tdp[i][j-1]=max(dp[i][j-1],dp[i-1][j]+(fh[i]=='-'?-1:1)*val[i]);\n\t\t\t}\n\t\t\tdp[i][j]=max(dp[i][j],dp[i-1][j]+(j%2?-1:1)*(fh[i]=='-'?-1:1)*val[i]);\n\t\t}\n\t}\n\tprintf(\"%lld\\n\",max(dp[n][0],max(dp[n][1],dp[n][2])));\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<stdio.h>\n#define N (100010)\ntypedef long long LL;\nint a[N];\nchar b[N][2];\nint n;\nint main(){\n\tscanf(\"%d\",&n);\n\tfor (int i=1;i<n;i++){\n\t\tscanf(\"%d%s\",a+i,b[i]);\n\t}\n\tscanf(\"%d\",a+n);\n\tLL ans1=a[1];\n\tfor (int i=1;i<n;i++) ans1+=b[i][0]=='+'?a[i+1]:-a[i+1];\n\tLL temp=ans1;\n\tLL cur=a[n],tot=0;\n\tfor (int i=n-1;i;i--){\n\t\tif (b[i][0]=='-'){\n\t\t\ttemp=temp+a[i+1];\n\t\t\tif (temp-cur+tot>ans1) ans1=temp-cur+tot;\n\t\t\ttot+=cur;\n\t\t\tcur=0;\n\t\t}\n\t\telse {\n\t\t\ttemp=temp-a[i+1];\n\t\t}\n\t\tcur+=a[i];\n\t}\n\tprintf(\"%lld\\n\",ans1);\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n#define ll long long\n\nll pre[100010],pre1[100010],num[100010],n,ans;\nbool bo[100010];\nchar s[233];\n\ninline ll rd()\n{\n\tll x=0;char ch=getchar();\n\tfor (;ch<'0'||ch>'9';ch=getchar());\n\tfor (;ch>='0'&&ch<='9';ch=getchar()) x=x*10+ch-'0';\n\treturn x;\n}\n\nint main()\n{\n\tn=rd();num[1]=rd();bo[1]=true;\n\tfor (int i=2;i<=n;i++)\n\t{\n\t\tscanf(\"%s\",s+1);num[i]=rd();\n\t\tbo[i]=(s[1]=='+');\n\t}\n\tfor (int i=1;i<=n;i++) pre[i]=pre[i-1]+(bo[i]?num[i]:-num[i]);\n\tfor (int i=1;i<=n;i++) pre1[i]=pre1[i-1]+num[i];\n\tans=pre[n];\n\tint lst=0;\n\tfor (int i=1;i<=n;i++)\n\t{\n\t\tif (bo[i]) continue;\n\t\tif (!lst) { lst=i;continue; }\n\t\tans=max(ans,pre[lst-1]-(pre1[i-1]-pre1[lst-1])+(pre1[n]-pre1[i-1]));\n\t\tlst=i;\n\t}\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\ntypedef long long ll;\ntypedef pair<int, int> pii;\ntypedef pair<int, pii> pipii;\ntypedef pair<pii, int> piipi;\ntypedef pair<pii, pii> piipii;\n\n#define mp make_pair\n#define fi first\n#define se second\n#define all(a) (a).begin(), (a).end()\n#define sz(a) (int)(a).size()\n#define eb emplace_back\n\nint a[100005];\nll dp[100005][5];\nint main(){\n    int n;\n    scanf(\"%d\", &n);\n\n    for(int i=1;i<=n;i++){\n        for(int j=0;j<4;j++) dp[i][j] = -1e18;\n    }\n\n    scanf(\"%d\", &a[1]);\n    dp[1][0] = a[1];\n    for(int i=2;i<=n;i++){\n        char s[2];\n        scanf(\"%s\", s);\n        scanf(\"%d\", &a[i]);\n        for(int j=0;j<4;j++){\n            int op = j%2;\n            if(s[0] == '-') op = (op+1)%2;\n\n            // open\n            if(s[0] == '-'){\n                if(op == 0) dp[i][j+1] = max(dp[i][j+1], dp[i-1][j] + a[i]);\n                else dp[i][j+1] = max(dp[i][j+1], dp[i-1][j] - a[i]);\n            }\n\n            // close\n            if(j > 0){\n                if(op == 0) dp[i][j-1] = max(dp[i][j-1], dp[i-1][j] + a[i]);\n                else dp[i][j-1] = max(dp[i][j-1], dp[i-1][j] - a[i]);\n            }\n\n            // none\n            if(op == 0) dp[i][j] = max(dp[i][j], dp[i-1][j] + a[i]);\n            else dp[i][j] = max(dp[i][j], dp[i-1][j] - a[i]);\n        }\n    }   \n    ll ans = -1e18;\n    for(int j=0;j<4;j++) ans = max(ans, dp[n][j]);\n    printf(\"%lld\\n\", ans);\n}"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<cstring>\n#include<algorithm>\nusing namespace std;\ntypedef long long ll;\nconst int N=100100;\nint i,j,k,n,ch;\nint a[N],op[N];\nll f[N][3];\nvoid R(int &x) {\n\tx=0;ch=getchar();\n\twhile (ch<'0' || '9'<ch) ch=getchar();\n\twhile ('0'<=ch && ch<='9') x=x*10+ch-'0',ch=getchar();\n}\nvoid W(ll x) {\n\tif (x>=10) W(x/10);\n\tputchar(x%10+'0');\n}\nint main() {\n\tR(n);\n\tfor (i=1;i<n;i++) {\n\t\tR(a[i]);\n\t\tch=getchar();\n\t\twhile (ch!='+' && ch!='-') ch=getchar();\n\t\tif (ch=='-') op[i]=1;\n\t\telse op[i]=0;\n\t}\n\tR(a[n]);\n\tmemset(f,190,sizeof f);\n\tf[1][0]=a[1];\n\tfor (i=1;i<n;i++) {\n\t\tfor (j=0;j<=2;j++) {\n\t\t\tif (op[i]) {\n\t\t\t\tif ((j&1)^1) f[i+1][j]=max(f[i+1][j],f[i][j]-a[i+1]);\n\t\t\t\telse f[i+1][j]=max(f[i+1][j],f[i][j]+a[i+1]);\n\t\t\t\tif (j<2) {\n\t\t\t\t\tif ((j&1)^1) f[i+1][j+1]=max(f[i+1][j+1],f[i][j]-a[i+1]);\n\t\t\t\t\telse f[i+1][j+1]=max(f[i+1][j+1],f[i][j]+a[i+1]);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (j&1) f[i+1][j]=max(f[i+1][j],f[i][j]-a[i+1]);\n\t\t\t\telse f[i+1][j]=max(f[i+1][j],f[i][j]+a[i+1]);\t\n\t\t\t}\n\t\t}\n\t\tf[i+1][1]=max(f[i+1][1],f[i+1][2]);\n\t\tf[i+1][0]=max(f[i+1][0],f[i+1][1]);\n\t}\n\tW(f[n][0]);puts(\"\");\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\n#define rep(i,n) for(int i=0; i<(int)(n); i++)\n#define debug(x) cerr << #x << \": \" << x << \", \"\n#define debugln(x) cerr << #x << \": \" << x << '\\n'\n\ntemplate<class T> inline bool chmax(T& a, T b) { if (a < b) { a = b; return true; } return false; }\ntemplate<class T> inline bool chmin(T& a, T b) { if (a > b) { a = b; return true; } return false; }\n\nusing namespace std;\nusing ll = long long;\nusing P = pair<ll, ll>;\n\n//constexpr ll mod = 998244353;\nconstexpr ll mod = 1e9+7;\nconst double PI = acos(-1.0);\nmt19937_64 engine(chrono::steady_clock::now().time_since_epoch().count());\n\nsigned main() {\n  ios_base::sync_with_stdio(false);\n  cin.tie(nullptr);\n\n  int n; cin >> n;\n  vector<ll> dp1(3, LLONG_MIN);\n  vector<ll> dp2(3, LLONG_MIN);\n\n  cin >> dp1[0];\n\n  n--;\n  rep(i, n) {\n    char op; cin >> op;\n    ll a; cin >> a;\n    if (op == '+') {\n      dp2[0] = dp1[0] + a;\n      dp2[1] = dp1[1] - a;\n      dp2[2] = dp1[2] + a;\n    } else {\n      dp2[0] = dp1[0] - a;\n      dp2[1] = max(dp1[0]-a, dp1[1]+a);\n      dp2[2] = max(dp1[1]+a, dp1[2]+a);\n    }\n    swap(dp1, dp2);\n  }\n\n  ll ma = LLONG_MIN;\n  rep(i, 3) {\n    chmax(ma, dp1[i]);\n  }\n  cout << ma << endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include<cstdio>\n#include<algorithm>\n#define MAXN 100006\n#define INF 23333333333333333\nusing namespace std;\nint n,r[MAXN];\nlong long a[MAXN],sum[MAXN],ans=-INF;\nchar op[MAXN];\nint main()\n{\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tif(i==1) scanf(\"%lld\",&a[i]);\n\t\telse scanf(\" %c %lld\",&op[i],&a[i]);\n\t}\n\tint last=n+1;\n\tfor(int i=n;i>=1;i--)\n\t{\n\t\tsum[i]=sum[i+1]+a[i];\n\t\tr[i]=last;\n\t\tif(op[i]=='-') last=i;\n\t}\n\tlong long sumlast=a[1];\n\tfor(int i=2;i<=n;i++)\n\t{\n\t\tans=max(ans,sumlast+sum[r[i]]*2-sum[i]);\n\t\tif(op[i]=='+') sumlast+=a[i];\n\t\telse sumlast-=a[i];\n\t}\n\tprintf(\"%lld\",ans);\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\nusing ll = long long;\n\nll a[100010], sum[100010];\n\nint main() {\n\tcin.tie(0);\n\tios::sync_with_stdio(false);\n\tint n;\n\tcin >> n;\n\tcin >> a[0];\n\tvector<int> minus;\n\tfor (int i = 1; i < n; i++) {\n\t\tchar op;\n\t\tcin >> op >> a[i];\n\t\tif (op == '-') minus.push_back(i);\n\t}\n\n\tfor (int i = n - 2; i >= 0; i--) {\n\t\tsum[i] = sum[i + 1] + a[i + 1];\n\t}\n\n\tll ans = 0;\n\tif (minus.empty()) {\n\t\tfor (int i = 0; i < n; i++) {\n\t\t\tans += a[i];\n\t\t}\n\t} else {\n\t\tfor (int i = 0; i < minus.front(); i++) ans += a[i];\n\t\tfor (int i = 0; i < minus.size(); i++) {\n\t\t\tans -= a[minus[i]];\n\t\t\tif (i + 1 == minus.size()) {\n\t\t\t\tans += sum[minus[i]];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\n\t\t\tll tmp = sum[minus[i]] - sum[minus[i + 1] - 1];\n\t\t\tif (sum[minus[i + 1] - 1] >= tmp) {\n\t\t\t\tans += sum[minus[i + 1] - 1] - tmp;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tans += tmp;\n\t\t}\n\t}\n\n\tcout << ans << endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstdio>\n#include <cmath>\n#include <cstring>\n#include <algorithm>\n#include <vector>\n#include <map>\n#include <cstdlib>\n#include <set>\n#include <queue>\nusing namespace std;\n\n#define X first\n#define Y second\n#define N 100010\ntypedef long long ll;\ntypedef pair<int,int> pii;\nconst int Mod=1000000007;\n\nconst double INF=1e18;\n\nint n;\nint a[N];\nll s[N],f[N];\n\nint main()\n{\n\t//freopen(\"in.in\",\"r\",stdin);\n\t//freopen(\"out.out\",\"w\",stdout);\n\t\n\tscanf(\"%d\",&n);  scanf(\"%d\",&a[1]); s[1]=a[1];\n\tfor (int i=2;i<=n;i++)\n\t{\n\t\tchar op; scanf(\" %c\",&op);\n\t\tscanf(\"%d\",&a[i]);\n\t\tif (op=='-') a[i]=-a[i];\n\t\ts[i]=a[i]+s[i-1];\n\t}\n\t\n\tf[n]=a[n];\n\tll mx=-s[n];\n\tfor (int i=n-1;i>=1;i--)\n\t{\n\t\tif (a[i]<0) \n\t\t{\n\t\t\tf[i]=a[i]+f[i+1];\n\t\t\tf[i]=max(f[i],a[i]+s[i]+mx);\n\t\t}\n\t\telse f[i]=a[i]+f[i+1];\n\t\tmx=max(mx,f[i+1]-s[i]);\n\t\t//cout<<i<<\" \"<<f[i]<<\" \"<<a[i]<<\" \"<<s[i]<<\" \"<<mx<<endl;\n\t}\n\tcout<<f[1]<<endl;\n\treturn 0;\n\n}\n"
  },
  {
    "language": "C++",
    "code": "#include \"bits/stdc++.h\"\nusing namespace std;\n\n#define int long long\n#define DBG 0\n#define dump(o) if(DBG){cerr<<#o<<\" \"<<o<<endl;}\n#define dumpc(o) if(DBG){cerr<<#o; for(auto &e:(o))cerr<<\" \"<<e;cerr<<endl;}\n#define rep(i,a,b) for(int i=(a);i<(b);i++)\n#define rrep(i,a,b) for(int i=(b)-1;i>=(a);i--)\n#define each(it,c) for(auto it=(c).begin();it!=(c).end();it++)\n#define all(c) c.begin(),c.end()\nconst int INF = sizeof(int) == sizeof(long long) ? 0x3f3f3f3f3f3f3f3fLL : 0x3f3f3f3f;\nconst int MOD = (int)(1e9 + 7);\n\n#define MAX_N 200000\nint N;\nint A[MAX_N] = {};\nchar op[MAX_N] = {};\n\npair<int, int> ma(int l);\npair<int, int> mi(int l);\n\npair<int, int> mi(int l) {\n\tdump(\"mi\");\n\tint ret = A[l];\n\tint tmp = A[l];\n\tint min_index = l;\n\trep(i, l + 1, N) {\n\t\tif (op[i] == '-') {\n\t\t\tpair<int, int> res = ma(i);\n\t\t\ttmp -= res.first;\n\t\t\ti = res.second;\n\t\t}\n\t\telse {\n\t\t\ttmp += A[i];\n\t\t}\n\t\tif (tmp <= ret) {\n\t\t\tret = tmp;\n\t\t\tmin_index = i;\n\t\t}\n\t\tdump(i);\n\t\tdump(tmp);\n\t\tdump(ret);\n\t}\n\treturn make_pair(ret, min_index);\n}\n\npair<int, int> ma(int l) {\n\tdump(\"ma\");\n\tint ret = A[l];\n\tint tmp = A[l];\n\tint max_index = l;\n\trep(i, l + 1, N) {\n\t\tif (op[i] == '-') {\n\t\t\tpair<int, int> res = mi(i);\n\t\t\ttmp -= res.first;\n\t\t\ti = res.second;\n\t\t}\n\t\telse {\n\t\t\ttmp += A[i];\n\t\t}\n\t\tif (tmp >= ret) {\n\t\t\tret = tmp;\n\t\t\tmax_index = i;\n\t\t}\n\t\tdump(i);\n\t\tdump(tmp);\n\t\tdump(ret);\n\t}\n\treturn make_pair(ret, max_index);\n}\n\nint solve() {\n\tpair<int, int> res = ma(0);\n\tint ret = res.first;\n\twhile (res.second < N) {\n\t\tres = ma(res.second + 1);\n\t\tret += res.first;\n\t}\n\treturn ret;\n}\n\nsigned main() {\n\tcin >> N;\n\tcin >> A[0];\n\trep(i, 1, N)cin >> op[i] >> A[i];\n\tcout << solve() << endl;\n\treturn 0;\n}"
  },
  {
    "language": "C",
    "code": "#include <stdio.h>\n\n#define MAX(a, b) ((a)>(b))?(a):(b)\n#define MIN(a, b) ((a)<(b))?(a):(b)\n\n\nconst long long int z = 1000000000000000ULL;\n\nint a[200000];\nchar b[200000];\n\nlong long int dpmax[100000][100000];\nlong long int dpmin[100000][100000];\n\nvoid solve(int i, int j){\n  long long int x, y;\n  if(dpmax[i][j] != z) return;\n\n  solve(i+1, j);\n  solve(i, j-1);\n\n  if(b[i]) x = a[i] - dpmin[i+1][j];\n  else     x = a[i] + dpmax[i+1][j];\n\n  if(b[j-1]) y = dpmax[i][j-1] - a[j];\n  else       y = dpmax[i][j-1] + a[j];\n\n  dpmax[i][j] = MAX(x, y);\n\n  if(b[i]) x = a[i] - dpmax[i+1][j];\n  else     x = a[i] + dpmin[i+1][j];\n\n  if(b[j-1]) y = dpmin[i][j-1] - a[j];\n  else       y = dpmin[i][j-1] + a[j];\n\n  dpmin[i][j] = MIN(x, y);\n\n//  if(b[i] && b[j-1]) dp[i][j] = MAX(dp[i][j], a[i] - solve(i+1,j-1) - a[j]);\n\nprintf(\"dpmax %d, %d = %lld\\n\", i, j, dpmax[i][j]);\nprintf(\"dpmin %d, %d = %lld\\n\", i, j, dpmin[i][j]);\n\n//  return dp[i][j];\n}\n\nint main(){\n  int i, j;\n  int n;\n  scanf(\"%d\", &n);\n  for(i=0;i<n-1;i++){\n    scanf(\"%d \", a+i);\n    scanf(\"%c\", b+i);\n    b[i] &= 0x4;\n  }\n  scanf(\"%d\", a+n-1);\n\n  for(i=0;i<n;i++){\n    printf(\"a[%d] = %d\\n\", i, a[i]);\n  }\n  for(i=0;i<n-1;i++){\n    printf(\"b[%d] = %d\\n\", i, b[i]);\n  }\n\n  for(i=0;i<n;i++){\n    dpmax[i][i] = dpmin[i][i] = a[i];\n    if(b[i]) dpmax[i][i+1] = dpmin[i][i+1] = a[i] - a[i+1];\n    else     dpmax[i][i+1] = dpmin[i][i+1] = a[i] + a[i+1];\n    for(j=i+2;j<n;j++){\n      dpmax[i][j] = dpmin[i][j] = z;\n    }\n  }\n\n  solve(0, n-1);\n\n  printf(\"%lld\", dpmax[0][n-1]);\n}\n"
  },
  {
    "language": "C",
    "code": "long a,b,c;o;\nmain(A){\n\tb=c=-1e18;\n\tfor(scanf(\"%*d\");~scanf(\"%c%d \",&o,&A);)\n\t\tb=o%3?a+=A,fmax(b-A,c+=A):(a=fmax(a-A,c=b+A));\n\tprintf(\"%ld\",a);\n}"
  },
  {
    "language": "C",
    "code": "//set many funcs template\n//Ver.20180717\n#include<stdio.h>\n#include<string.h>\n#include<stdlib.h>\n#include<stdbool.h>\n#include<time.h>\n#define inf 1072114514\n#define llinf 4154118101919364364\n#define mod 1000000007\n#define pi 3.1415926535897932384\n\nint max(int a,int b){if(a>b){return a;}return b;}\nint min(int a,int b){if(a<b){return a;}return b;}\nint zt(int a,int b){return max(a,b)-min(a,b);}\nint round(int a,int b){if((a%b)*2 >= b){return (a/b)+1;}return a/b;}\nint ceil(int a,int b){if(a%b==0){return a/b;}return (a/b)+1;}\nint gcd(int a,int b){int c;while(b!=0){c=a%b;a=b;b=c;}return a;}\nint lcm(int a,int b){int c=gcd(a,b);a/=c;return a*b;}\nint nCr(int a,int b){int i,r=1;for(i=1;i<=b;i++){r*=(a+1-i);r/=i;}return r;}\nint nHr(int a,int b){return nCr(a+b-1,b);}\nint fact(int a){int i,r=1;for(i=1;i<=a;i++){r*=i;}return r;}\nint pow(int a,int b){int i,r=1;for(i=1;i<=b;i++){r*=a;}return r;}\nint dsum(int x){int r=0;while(x){r+=(x%10);x/=10;}return r;}\nint dsumb(int x,int b){int r=0;while(x){r+=(x%b);x/=b;}return r;}\nint sankaku(int x){return ((1+x)*x)/2;}\nlong long llmax(long long a,long long b){if(a>b){return a;}return b;}\nlong long llmin(long long a,long long b){if(a<b){return a;}return b;}\nlong long llzt(long long a,long long b){return llmax(a,b)-llmin(a,b);}\nlong long llround(long long a,long long b){if((a%b)*2 >= b){return (a/b)+1;}return a/b;}\nlong long llceil(long long a,long long b){if(a%b==0){return a/b;}return (a/b)+1;}\nlong long llgcd(long long a,long long b){long long c;while(b!=0){c=a%b;a=b;b=c;}return a;}\nlong long lllcm(long long a,long long b){long long c=llgcd(a,b);a/=c;return a*b;}\nlong long llnCr(long long a,long long b){long long i,r=1;for(i=1;i<=b;i++){r*=(a+1-i);r/=i;}return r;}\nlong long llnHr(long long a,long long b){return llnCr(a+b-1,b);}\nlong long llfact(long long a){long long i,r=1;for(i=1;i<=a;i++){r*=i;}return r;}\nlong long llpow(long long a,long long b){long long i,r=1;for(i=1;i<=b;i++){r*=a;}return r;}\nlong long lldsum(long long x){long long r=0;while(x){r+=(x%10);x/=10;}return r;}\nlong long lldsumb(long long x,long long b){long long r=0;while(x){r+=(x%b);x/=b;}return r;}\nlong long llsankaku(long long x){return ((1+x)*x)/2;}\ndouble dbmax(double a,double b){if(a>b){return a;}return b;}\ndouble dbmin(double a,double b){if(a<b){return a;}return b;}\ndouble dbzt(double a,double b){return dbmax(a,b)-dbmin(a,b);}\nint sortfncsj(const void *a,const void *b){if(*(int *)a>*(int *)b){return 1;}if(*(int *)a==*(int *)b){return 0;}return -1;}\nint sortfnckj(const void *a,const void *b){if(*(int *)a<*(int *)b){return 1;}if(*(int *)a==*(int *)b){return 0;}return -1;}\nint llsortfncsj(const void *a,const void *b){if(*(long long *)a>*(long long *)b){return 1;}if(*(long long *)a==*(long long *)b){return 0;}return -1;}\nint llsortfnckj(const void *a,const void *b){if(*(long long *)a<*(long long *)b){return 1;}if(*(long long *)a==*(long long *)b){return 0;}return -1;}\nint dbsortfncsj(const void *a,const void *b){if(*(double *)a>*(double *)b){return 1;}if(*(double *)a==*(double *)b){return 0;}return -1;}\nint dbsortfnckj(const void *a,const void *b){if(*(double *)a<*(double *)b){return 1;}if(*(double *)a==*(double *)b){return 0;}return -1;}\nint strsortfncsj(const void *a,const void *b){return strcmp((char *)a,(char *)b);}\nint strsortfnckj(const void *a,const void *b){return strcmp((char *)b,(char *)a);}\n\nvoid shuffledget(int x[],int n){\n    srand(time(0));\n    int i,b[524288],p,c;\n    for(i=0;i<n;i++){\n        b[i]=i;\n    }\n    for(i=n;i>=1;i--){\n        p=rand()%i;\n        c=b[i-1];b[i-1]=b[p];b[p]=c;\n    }\n    for(i=0;i<n;i++){\n        scanf(\"%d\",&x[b[i]]);\n    }\n}\n\nint dx4[4]={1,-1,0,0};\nint dy4[4]={0,0,1,-1};\nint dx8[8]={-1,-1,-1,0,0,1,1,1};\nint dy8[8]={-1,0,1,-1,1,-1,0,1};\n\nint search(int x,int a[],int n){\n    int st=0,fi=n-1,te;\n    while(st<=fi){\n        te=(st+fi)/2;\n        if(a[te]<x){st=te+1;}else{fi=te-1;}\n    }\n    return st;\n}\n\ntypedef struct{\nint val;\nint node;\n}sd;\n\nint sdsortfnc(const void *a,const void *b){\nif(((sd*)a)->val < ((sd*)b)->val){return -1;}\nif(((sd*)a)->val > ((sd*)b)->val){return 1;}\nreturn 0;\n}\n\nint main(void){\n    long long bs,tc,i,j,n,m,k,a[524288],b,c,h,w,r=0,l,t;\n    double d;\n    char s[524288];\n    scanf(\"%lld%lld\",&n,&r);\n    bs=0;tc=0;\n    w=llinf;\n    for(i=1;i<n;i++){\n        scanf(\"%s%lld\",s,&a[i]);\n        r+=a[i];\n        if(s[0]=='-'){\n            if(bs!=0){w=llmin(w,bs+tc);}\n            bs+=a[i];\n            tc=0;\n        }\n        else{tc+=a[i];}\n    }\n    if(w==llinf){printf(\"%lld\\n\",r);}\n    else{printf(\"%lld\\n\",llmax(r-2*w,r-2*bs));}\n    return 0;\n}"
  },
  {
    "language": "C",
    "code": "long a,b,c;o;\nmain(A){\n\tb=c=-1e18;\n\tfor(scanf(\"%*d%ld\",&a);~scanf(\" %c%d\",&o,&A);)\n\t\tb=o%3?a+=A,fmax(b-A,c+=A):(a=fmax(a-A,c=b+A));\n\tprintf(\"%ld\",a);\n}"
  },
  {
    "language": "C",
    "code": "long a,b,c;o;\nmain(A){\n\tb=c=-1e18;\n\tfor(scanf(\"%*d%d\",&a);~scanf(\" %c%d\",&o,&A);)\n\t\tb=o%3?a+=A,fmax(b-A,c+=A):(a=fmax(a-A,c=b+A));\n\tprintf(\"%ld\",a);\n}"
  },
  {
    "language": "C",
    "code": "#include<stdio.h>\n#define max(x,y) ((x)>(y)?(x):(y))\n\nint main(){\n\tlong n,i;\n\tlong long a,s;\n\tlong long ans;\n\tchar op,f;\n\tscanf(\"%ld\",&n);\n\tscanf(\"%lld\",&a);\n\tf=0;\n\ts=0;\n\tans=a;\n\tfor(i=0;i<n-1;i++){\n\t\tscanf(\" %c\",&op);\n\t\tscanf(\"%lld\",&a);\n\t\tif(f==0 && op=='-'){\n\t\t\tans-=a;\n\t\t\tf=1;\n\t\t\ts=0;\n\t\t}else if(f==1 && op=='+'){\n\t\t\ts+=a;\n\t\t}else if(f==1 && op=='-'){\n\t\t\ta=max(s-a,a-s);\n\t\t\tans+=a;\n\t\t\ts=0;\n\t\t\tf=2;\n\t\t}else{\n\t\t\tans+=a;\n\t\t}\n\t}\n\tif(s>0){\n\t\tans+=s;\n\t}\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}\n"
  },
  {
    "language": "C",
    "code": "long a,b,c;o;\nmain(A){\n\tb=c=-9e9;\n\tfor(scanf(\"%*d%ld\",&a);~scanf(\" %c%d\",&o,&A);)\n\t\tb=o%3?a+=A,fmax(b-A,c+=A):(a=fmax(a-A,c=b+A));\n\tprintf(\"%ld\",a);\n}"
  },
  {
    "language": "C",
    "code": "#include<stdio.h>\n#define max(x,y) ((x)>(y)?(x):(y))\n\nint main(){\n\tlong n,i;\n\tlong long a,s;\n\tlong long ans,cmp=0;\n\tchar op,f;\n\tscanf(\"%ld\",&n);\n\tscanf(\"%lld\",&a);\n\tf=0;\n\ts=0;\n\tans=a;\n\tfor(i=0;i<n-1;i++){\n\t\tscanf(\" %c\",&op);\n\t\tscanf(\"%lld\",&a);\n\t\tif(f==0 && op=='-'){\n\t\t\tans-=a;\n\t\t\tf=1;\n\t\t\ts=0;\n\t\t}else if(f==1 && op=='+'){\n\t\t\ts+=a;\n\t\t}else if(f==1 && op=='-'){\n\t\t\tif(s-a<=a-s){\n\t\t\t\tans+=a-s;\n\t\t\t\ts=0;\n\t\t\t\tf=2;\n\t\t\t}else{\n\t\t\t\tcmp=ans+a-s;\n\t\t\t\tans+=s-a;\n\t\t\t\tf=3;\n\t\t\t\ts=0;\n\t\t\t}\n\t\t}else if(f==3){\n\t\t\tcmp+=a;\n\t\t\tif(op=='+'){\n\t\t\t\ts+=a;\n\t\t\t}else{\n\t\t\t\tif(s-a<=a-s){\n\t\t\t\t\tans+=a-s;\n\t\t\t\t\ts=0;\n\t\t\t\t\tf=4;\n\t\t\t\t}else{\n\t\t\t\t\tans+=s-a;\n\t\t\t\t\ts=0;\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\tans+=a;\n\t\t\tcmp+=a;\n\t\t}\n\t}\n\tif(s>0){\n\t\tans+=s;\n\t}\n\tif(f>=3){\n\t\tans=max(ans,cmp);\n\t}\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}\n"
  },
  {
    "language": "C",
    "code": "#include<stdio.h>\n#define max(x,y) ((x)>(y)?(x):(y))\n\nint main(){\n\tlong n,i;\n\tlong long a,s;\n\tlong long ans,cmp=0;\n\tchar op,f;\n\tscanf(\"%ld\",&n);\n\tscanf(\"%lld\",&a);\n\tf=0;\n\ts=0;\n\tans=a;\n\tfor(i=0;i<n-1;i++){\n\t\tscanf(\" %c\",&op);\n\t\tscanf(\"%lld\",&a);\n\t\tif(f==0 && op=='-'){\n\t\t\tans-=a;\n\t\t\tf=1;\n\t\t\ts=0;\n\t\t}else if(f==1 && op=='+'){\n\t\t\ts+=a;\n\t\t}else if(f==1 && op=='-'){\n\t\t\tif(s-a<=a-s){\n\t\t\t\tans+=a-s;\n\t\t\t\ts=0;\n\t\t\t\tf=2;\n\t\t\t}else{\n\t\t\t\tcmp=ans+a-s;\n\t\t\t\tans+=s-a;\n\t\t\t\tf=3;\n\t\t\t\ts=0;\n\t\t\t}\n\t\t}else if(f==3){\n\t\t\tcmp+=a;\n\t\t\tif(op=='+'){\n\t\t\t\ts+=a;\n\t\t\t}else{\n\t\t\t\tif(s-a<=a-s){\n\t\t\t\t\tans+=a-s;\n\t\t\t\t\ts=0;\n\t\t\t\t\tf=4;\n\t\t\t\t}else{\n\t\t\t\t\tcmp=max(cmp,ans+a-s);\n\t\t\t\t\tans+=s-a;\n\t\t\t\t\ts=0;\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\tans+=a;\n\t\t\tcmp+=a;\n\t\t}\n\t}\n\tif(s>0){\n\t\tans+=s;\n\t}\n\tif(f>=3){\n\t\tans=max(ans,cmp);\n\t}\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}\n"
  },
  {
    "language": "C",
    "code": "#include <stdio.h>\n#include <stdlib.h>\n#define int long long\n#define inf (int)(1e18)\n\nint max(int a, int b){\n\treturn a >= b ? a : b;\n}\n\nsigned main(){\n\tint N, i, j;\n\tchar sub[2];\n\tscanf(\"%lld\", &N);\n\tint *A = (int *)malloc(sizeof(int) * N);\n\tint *op = (int *)malloc(sizeof(int) * N);\n\tfor(i = 0; i < N; i++){\n\t\tif(i == 0){\n\t\t\top[i] = 1;\n\t\t}\n\t\telse{\n\t\t\tscanf(\"%s\", sub);\n\t\t\top[i] = (sub[0] == '+' ? 1 : -1);\n\t\t}\n\t\tscanf(\"%lld\", &A[i]);\n\t}\n\tint **dp = (int **)malloc(sizeof(int *) * N);\n\tfor(i = 0; i < N; i++){\n\t\tdp[i] = (int *)malloc(sizeof(int) * 3);\n\t\tfor(j = 0; j < 3; j++){\n\t\t\tdp[i][j] = -inf;\n\t\t}\n\t}\n\tdp[0][0] = A[0];\n\tfor(i = 1; i < N; i++){\n\t\tif(op[i] == 1){\n\t\t\tdp[i][0] = max(max(dp[i - 1][0] + A[i], dp[i - 1][1] - A[i]), dp[i - 1][2] + A[i]);\n\t\t\tdp[i][1] = max(dp[i - 1][1] - A[i], dp[i - 1][2] + A[i]);\n\t\t\tdp[i][2] = dp[i - 1][2] + A[i];\n\t\t}\n\t\telse{\n\t\t\tdp[i][0] = max(max(dp[i - 1][0] - A[i], dp[i - 1][1] + A[i]), dp[i - 1][2] - A[i]);\n\t\t\tdp[i][1] = max(max(dp[i - 1][1] + A[i], dp[i - 1][2] - A[i]), dp[i - 1][0] - A[i]);\n\t\t\tdp[i][2] = max(dp[i - 1][2] - A[i], dp[i - 1][1] + A[i]);\n\t\t}\n\t}\n\tprintf(\"%lld\\n\", dp[N - 1][0]);\n\treturn 0;\n}"
  },
  {
    "language": "C",
    "code": "long a,b,c;o;\nmain(A){\n\tb=c=-1e9;\n\tfor(scanf(\"%*d%ld\",&a);~scanf(\" %c%d\",&o,&A);)\n\t\tb=o%3?a+=A,fmax(b-A,c+=A):(a=fmax(a-A,c=b+A));\n\tprintf(\"%ld\",a);\n}"
  },
  {
    "language": "C",
    "code": "long a,b,c;o;\nmain(A){\n\tgets(&b);\n\tfor(b=c=-1e18;~scanf(\"%c%d \",&o,&A);)\n\t\tb=o%3?a+=A,fmax(b-A,c+=A):(a=fmax(a-A,c=b+A));\n\tprintf(\"%ld\",a);\n}"
  },
  {
    "language": "C",
    "code": "/*\ncat <<EOF >mistaken-paste\n*/\n\n#pragma GCC diagnostic ignored \"-Wincompatible-pointer-types\"\n#define _USE_MATH_DEFINES\n\n#include <stdio.h>\n#include <stdint.h>\n#include <stdlib.h>\n#include <string.h>\n#include <stdbool.h>\n#include <math.h>\n#include <time.h>\n\n#define BIG 2000000007\n#define VERYBIG 200000000000007LL\n\n#define MOD 1000000007\n#define FOD  998244353\ntypedef uint64_t ull;\ntypedef  int64_t sll;\n\n#define N_MAX 300000\n#define M_MAX 200000\n\n#ifdef __cplusplus\n#include <queue>\n#include <stack>\n// #include <tuple>\n#include <set>\n#include <map>\n\n// using namespace std; // HELL\nusing std::queue;\nusing std::priority_queue;\nusing std::stack;\n// using std::tuple;\nusing std::set;\nusing std::map;\nusing std::vector;\nusing std::greater;\nusing std::pair;\n\n#endif\n\ntypedef struct {\n\tint32_t a;\n\tint32_t b;\n} hw;\n\ntypedef struct {\n\tsll a;\n\tsll b;\n} hwll;\n\ntypedef struct {\n\tsll a;\n\tsll b;\n\tsll c;\n} hwllc;\n\ntypedef struct {\n\thwll a;\n\thwll b;\n} linell;\n\null n, m;\null h, w;\null k;\null q;\null vua, vub, vuc, vud, vue, vuf;\nsll vsa, vsb, vsc, vsd, vse, vsf;\nlong double vra, vrb, vrc;\ndouble vda, vdb, vdc;\nsize_t slen;\nsize_t tlen;\nchar ch, dh;\n\null umin (ull x, ull y) {\n\treturn (x < y) ? x : y;\n}\n\null umax (ull x, ull y) {\n\treturn (x > y) ? x : y;\n}\n\nsll smin (sll x, sll y) {\n\treturn (x < y) ? x : y;\n}\n\nsll smax (sll x, sll y) {\n\treturn (x > y) ? x : y;\n}\n\null gcd (ull x, ull y) {\n\tif (x < y) {\n\t\treturn gcd(y, x);\n\t} else if (y == 0) {\n\t\treturn x;\n\t} else {\n\t\treturn gcd(y, x % y);\n\t}\n}\n\null bitpow (ull a, ull x, ull modulo) {\n\tull result = 1;\n\twhile (x) {\n\t\tif (x & 1) {\n\t\t\tresult *= a;\n\t\t\tresult %= modulo;\n\t\t}\n\t\tx /= 2;\n\t\ta = (a * a) % modulo;\n\t}\n\treturn result;\n}\n\null divide (ull a, ull b, ull modulo) {\n\treturn (a * bitpow(b, modulo - 2, modulo)) % modulo;\n}\n\null udiff (ull a, ull b) {\n\tif (a >= b) {\n\t\treturn a - b;\n\t} else {\n\t\treturn b - a;\n\t}\n}\n\nsll sdiff (sll a, sll b) {\n\tif (a >= b) {\n\t\treturn a - b;\n\t} else {\n\t\treturn b - a;\n\t}\n}\n\nvoid printUquotient (ull left, ull right) {\n\tconst int32_t digits = 20;\n\n\tprintf(\"%llu.\", left / right);\n\tleft %= right;\n\tfor (int32_t i = 0; i < digits; i++) {\n\t\tleft *= 10;\n\t\tprintf(\"%1d\", left / right);\n\t\tleft %= right;\n\t}\n\tputs(\"\");\n\n\treturn;\n}\n\nvoid printSquotient (sll left, sll right) {\n\tif (left * right < 0) putchar('-');\n\tprintUquotient(sdiff(left, 0), sdiff(right, 0));\n\n\treturn;\n}\n\nint bitcount (ull n) {\n\tint result = 0;\n\twhile (n) {\n\t\tif (n & 1) result++;\n\t\tn /= 2;\n\t}\n\treturn result;\n}\n\n#ifdef __cplusplus\n\nbool setfind (set<ull> s, ull x) {\n\treturn (s.find(x) != s.end());\n}\n\n#endif\n\n// double distance (sll x1, sll y1, sll x2, sll y2) {\n// \tdouble xdist2, ydist2, origindist, dist;\n\n// \txdist2 = (x1 - x2) * (x1 - x2);\n// \tydist2 = (y1 - y2) * (y1 - y2);\n// \treturn sqrt(xdist2 + ydist2);\n// }\n\nint32_t pullcomp (const void *left, const void *right) {\n\tull l = *(ull*)left;\n\tull r = *(ull*)right;\n\tif (l < r) {\n\t\treturn -1;\n\t}\n\tif (l > r) {\n\t\treturn +1;\n\t}\n\treturn 0;\n}\n\nint32_t psllcomp (const void *left, const void *right) {\n\tsll l = *(sll*)left;\n\tsll r = *(sll*)right;\n\tif (l < r) {\n\t\treturn -1;\n\t}\n\tif (l > r) {\n\t\treturn +1;\n\t}\n\treturn 0;\n}\n\nint32_t pcharcomp (const void *left, const void *right) {\n\tchar l = *(char*)left;\n\tchar r = *(char*)right;\n\tif (l < r) {\n\t\treturn -1;\n\t}\n\tif (l > r) {\n\t\treturn +1;\n\t}\n\treturn 0;\n}\n\nint32_t pstrcomp (const void *left, const void *right) {\n\tchar* l = *(char**)left;\n\tchar* r = *(char**)right;\n\n\treturn strcmp(l, r);\n}\n\nint32_t phwllABcomp (const void *left, const void *right) {\n\thwll l = *(hwll*)left;\n\thwll r = *(hwll*)right;\n\tif (l.a < r.a) {\n\t\treturn -1;\n\t}\n\tif (l.a > r.a) {\n\t\treturn +1;\n\t}\n\tif (l.b < r.b) {\n\t\treturn -1;\n\t}\n\tif (l.b > r.b) {\n\t\treturn +1;\n\t}\n\treturn 0;\n}\n\nint32_t ptriplecomp (const void *left, const void *right) {\n\thwllc l = *(hwllc*)left;\n\thwllc r = *(hwllc*)right;\n\n\tif (l.a < r.a) {\n\t\treturn -1;\n\t}\n\tif (l.a > r.a) {\n\t\treturn +1;\n\t}\n\tif (l.b < r.b) {\n\t\treturn -1;\n\t}\n\tif (l.b > r.b) {\n\t\treturn +1;\n\t}\n\tif (l.c < r.c) {\n\t\treturn -1;\n\t}\n\tif (l.c > r.c) {\n\t\treturn +1;\n\t}\n\treturn 0;\n}\n\nbool isinrange (sll left, sll x, sll right) {\n\treturn (left <= x && x <= right);\n}\n\null parent[N_MAX];\null rank[N_MAX];\nvoid uf_init (ull n) {\n\tfor (sll i = 0; i < n; i++) {\n\t\tparent[i] = i;\n\t\trank[i] = 0;\n\t}\n}\null uf_find (ull x) {\n\tif (parent[x] == x) return x;\n\treturn parent[x] = uf_find(parent[x]);\n}\nbool uf_union (ull a, ull b) {\n\ta = uf_find(a);\n\tb = uf_find(b);\n\tif (a == b) return false;\n\n\tif (rank[a] > rank[b]) {\n\t\tparent[b] = a;\n\t} else {\n\t\tparent[a] = b;\n\t\tif (rank[a] == rank[b]) {\n\t\t\trank[b]++;\n\t\t}\n\t}\n\treturn true;\n}\n\n\nsll a[N_MAX];\nsll b[N_MAX];\nsll c[N_MAX];\n// char s[N_MAX];\nchar s[3010][3010];\n\n// ull dp[1000][1000];\nbool sign[N_MAX];\n\null solve () {\n\tsll i, j, ki, li;\n\t// ull result = 0;\n\tsll result = 0;\n\tdouble dresult = 0;\n\t// ull maybe = 0;\n\tsll maybe = 0;\n\t// ull sum = 0;\n\tsll sum = 0;\n\tsll item;\n\tull *dpcell;\n\n\tfor (i = 0; i < n; i++) {\n\t\tif (i) {\n\t\t\tscanf(\" %c\", &ch);\n\t\t\tsign[i] = (ch == '+' ? true : false);\n\t\t} else {\n\t\t\tsign[i] = true;\n\t\t}\n\t\tscanf(\"%llu\", &a[i]);\n\t}\n\n\tsum = 0;\n\tull minors = 0;\n\tfor (i = 0; i < n; i++) {\n\t\tsum += a[i];\n\t\tif (!sign[i]) minors += a[i];\n\t}\n\n\tull lm = 0;\n\ti = 0;\n\twhile (i < n && sign[i]) i++;\n\twhile (i < n) {\n\t\tlm += a[i];\n\n\t\tull add = 0;\n\t\twhile (++i < n && sign[i]) {\n\t\t\tadd += a[i];\n\t\t}\n\n\t\tminors = umin(minors, lm + add);\n\n\t}\n\n\tresult = sum - minors * 2;\n\n\tprintf(\"%lld\\n\", result);\n\t// printf(\"%.12lf\\n\", dresult);\n\t// puts(s);\n\n\treturn 0;\n\n\tsuccess:\n\t// puts(\"YES\");\n\tputs(\"Yes\");\n\t// printf(\"%llu\\n\", result);\n\t// puts(\"0\");\n\t// puts(\"Takahashi\");\n\treturn 0;\n\n\tfail:\n\t// puts(\"NO\");\n\tputs(\"No\");\n\t// puts(\"0\");\n\t// puts(\"-1\");\n\t// puts(\"-1 -1 -1\");\n\t// puts(\"Aoki\");\n\treturn 1;\n}\n\nint32_t main (void) {\n\tint32_t i, j;\n\tint32_t x, y;\n\n\t// scanf(\"%lf%lf\", &vda, &vdb, &vdc);\n\t// scanf(\"%lld%lld\", &vsa, &vsb, &vsc, &vsd);\n\t// scanf(\"%llu%llu\", &vua, &vub, &vuc, &vud);\n\t// scanf(\"%*llu%*llu\");\n\tscanf(\"%llu\", &n, &m);\n\t// scanf(\"%llu\", &k, &n);\n\t// scanf(\"%llu%llu\", &h, &w);\n\t// scanf(\"%llu%llu\", &vua, &vub, &vuc, &vud, &vue, &vuf);\n\t// vua--;\n\t// vub--;\n\t// scanf(\"%lld%lld\", &vsa, &vsb, &vsc);\n\t// scanf(\"%s\", s);\n\t// scanf(\"%s\", t);\n\t// scanf(\"%llu\", &k);\n\t// scanf(\"%llu\", &q);\n\t// for (i = 0; i < n; i++) {\n\t// \tscanf(\"%lld\", &a[i]);\n\t// \tscanf(\"%lld\", &b[i]);\n\t// \t// scanf(\"%llu\", &c[i]);\n\t// \t// a[i]--;\n\t// \t// b[i]--;\n\t// \t// c[i]--;\n\t// }\n\t// scanf(\"%llu\", &q);\n\n\t// for (i = 0; i < h; i++) {\n\t// \tfor (j = 0; j < w; j++) {\n\t// \t\tscanf(\"%llu\", &a[i][j]);\n\t// \t}\n\t// }\n\t// for (i = 0; i < h; i++) {\n\t// \tscanf(\"%s\", &s[i]);\n\t// }\n\n\t// scanf(\"%llu\", &k);\n\t// scanf(\"%llu\", &q);\n\tsolve();\n\n\treturn 0;\n}\n"
  },
  {
    "language": "C",
    "code": "long a,b,c;o;main(A){b=c=-1e18;for(scanf(\"%*d\");~scanf(\"%c%d \",&o,&A);)b=o%3?a+=A,fmax(b-A,c+=A):(a=fmax(a-A,c=b+A));printf(\"%ld\",a);}"
  },
  {
    "language": "C",
    "code": "#include<stdio.h>\n#define max(x,y) ((x)>(y)?(x):(y))\n\nint main(){\n\tlong n,i;\n\tlong long a,s;\n\tlong long ans;\n\tchar op,f;\n\tscanf(\"%ld\",&n);\n\tscanf(\"%lld\",&a);\n\tf=0;\n\tans=a;\n\tfor(i=0;i<n-1;i++){\n\t\tscanf(\" %c\",&op);\n\t\tscanf(\"%lld\",&a);\n\t\tif(f==0 && op=='-'){\n\t\t\tans-=a;\n\t\t\tf=1;\n\t\t\ts=0;\n\t\t}else if(f==1 && op=='+'){\n\t\t\ts+=a;\n\t\t}else if(f==1 && op=='-'){\n\t\t\ta=max(s-a,a-s);\n\t\t\tans+=a;\n\t\t\ts=0;\n\t\t\tf=2;\n\t\t}else{\n\t\t\tans+=a;\n\t\t}\n\t}\n\tif(s>0){\n\t\tans+=s;\n\t}\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}\n"
  },
  {
    "language": "Java",
    "code": "\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.util.Arrays;\nimport java.util.NoSuchElementException;\n\npublic class Main {\n\n\tpublic static void main(String[] args) {\n\t\tFastScanner sc = new FastScanner();\n\t\tint N = sc.nextInt();\n\n\t\tlong[] A = new long[N + 1];\n\t\tlong[] B = new long[N + 1];\n\t\tboolean[] p = new boolean[N + 1];\n\t\tp[1] = true;\n\n\t\tfor (int i = 1; i <= N; i++) {\n\t\t\tif (i > 1) {\n\t\t\t\tp[i] = sc.next().equals(\"+\");\n\t\t\t}\n\t\t\tA[i] = sc.nextLong();\n\n\t\t\tB[i] = A[i] * (p[i] ? 1 : -1);\n\t\t}\n\n\t\tlong[][] dp = new long[N + 1][3];\n\t\tfor (long[] v : dp) Arrays.fill(v, Long.MIN_VALUE / 2);\n\t\tdp[0][0] = 0;\n\n\t\tfor (int i = 0; i < N; i++) {\n\t\t\tif (p[i + 1]) {\n\t\t\t\tdp[i + 1][0] = Math.max(dp[i + 1][0], dp[i][0] + A[i + 1]);\n\t\t\t\tdp[i + 1][0] = Math.max(dp[i + 1][0], dp[i][1] + A[i + 1]);\n\t\t\t\tdp[i + 1][0] = Math.max(dp[i + 1][0], dp[i][2] + A[i + 1]);\n\n\t\t\t\tdp[i + 1][1] = Math.max(dp[i + 1][1], dp[i][1] - A[i + 1]);\n\t\t\t\tdp[i + 1][1] = Math.max(dp[i + 1][1], dp[i][2] - A[i + 1]);\n\n\t\t\t\tdp[i + 1][2] = Math.max(dp[i + 1][2], dp[i][2] + A[i + 1]);\n\n\t\t\t} else {\n\t\t\t\tdp[i + 1][0] = Math.max(dp[i + 1][0], dp[i][0] - A[i + 1]);\n\t\t\t\tdp[i + 1][0] = Math.max(dp[i + 1][0], dp[i][1] - A[i + 1]);\n\t\t\t\tdp[i + 1][0] = Math.max(dp[i + 1][0], dp[i][2] - A[i + 1]);\n\n\t\t\t\tdp[i + 1][1] = Math.max(dp[i + 1][1], dp[i][0] - A[i + 1]);\n\t\t\t\tdp[i + 1][1] = Math.max(dp[i + 1][1], dp[i][1] + A[i + 1]);\n\t\t\t\tdp[i + 1][1] = Math.max(dp[i + 1][1], dp[i][2] + A[i + 1]);\n\n\t\t\t\tdp[i + 1][2] = Math.max(dp[i + 1][2], dp[i][1] + A[i + 1]);\n\t\t\t\tdp[i + 1][2] = Math.max(dp[i + 1][2], dp[i][2] + A[i + 1]);\n\t\t\t}\n\t\t}\n\t\tlong max = Long.MIN_VALUE / 2;\n\t\tmax = Math.max(dp[N][0], max);\n\t\tmax = Math.max(dp[N][1], max);\n\t\tmax = Math.max(dp[N][2], max);\n\n\t\tSystem.out.println(max);\n\t}\n}\n\nclass FastScanner {\n\tpublic static String debug = null;\n\n\tprivate final InputStream in = System.in;\n\tprivate int ptr = 0;\n\tprivate int buflen = 0;\n\tprivate byte[] buffer = new byte[1024];\n\tprivate boolean eos = false;\n\n\tprivate boolean hasNextByte() {\n\t\tif (ptr < buflen) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\tptr = 0;\n\t\t\ttry {\n\t\t\t\tif (debug != null) {\n\t\t\t\t\tbuflen = debug.length();\n\t\t\t\t\tbuffer = debug.getBytes();\n\t\t\t\t\tdebug = \"\";\n\t\t\t\t\teos = true;\n\t\t\t\t} else {\n\t\t\t\t\tbuflen = in.read(buffer);\n\t\t\t\t}\n\t\t\t} catch (IOException e) {\n\t\t\t\te.printStackTrace();\n\t\t\t}\n\t\t\tif (buflen < 0) {\n\t\t\t\teos = true;\n\t\t\t\treturn false;\n\t\t\t} else if (buflen == 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\tprivate int readByte() {\n\t\tif (hasNextByte())\n\t\t\treturn buffer[ptr++];\n\t\telse\n\t\t\treturn -1;\n\t}\n\n\tprivate static boolean isPrintableChar(int c) {\n\t\treturn 33 <= c && c <= 126;\n\t}\n\n\tprivate void skipUnprintable() {\n\t\twhile (hasNextByte() && !isPrintableChar(buffer[ptr]))\n\t\t\tptr++;\n\t}\n\n\tpublic boolean isEOS() {\n\t\treturn this.eos;\n\t}\n\n\tpublic boolean hasNext() {\n\t\tskipUnprintable();\n\t\treturn hasNextByte();\n\t}\n\n\tpublic String next() {\n\t\tif (!hasNext())\n\t\t\tthrow new NoSuchElementException();\n\t\tStringBuilder sb = new StringBuilder();\n\t\tint b = readByte();\n\t\twhile (isPrintableChar(b)) {\n\t\t\tsb.appendCodePoint(b);\n\t\t\tb = readByte();\n\t\t}\n\t\treturn sb.toString();\n\t}\n\n\tpublic long nextLong() {\n\t\tif (!hasNext())\n\t\t\tthrow new NoSuchElementException();\n\t\tlong n = 0;\n\t\tboolean minus = false;\n\t\tint b = readByte();\n\t\tif (b == '-') {\n\t\t\tminus = true;\n\t\t\tb = readByte();\n\t\t}\n\t\tif (b < '0' || '9' < b) {\n\t\t\tthrow new NumberFormatException();\n\t\t}\n\t\twhile (true) {\n\t\t\tif ('0' <= b && b <= '9') {\n\t\t\t\tn *= 10;\n\t\t\t\tn += b - '0';\n\t\t\t} else if (b == -1 || !isPrintableChar(b)) {\n\t\t\t\treturn minus ? -n : n;\n\t\t\t} else {\n\t\t\t\tthrow new NumberFormatException();\n\t\t\t}\n\t\t\tb = readByte();\n\t\t}\n\t}\n\n\tpublic int nextInt() {\n\t\treturn (int) nextLong();\n\t}\n\n\tpublic long[] nextLongList(int n) {\n\t\treturn nextLongTable(1, n)[0];\n\t}\n\n\tpublic int[] nextIntList(int n) {\n\t\treturn nextIntTable(1, n)[0];\n\t}\n\n\tpublic long[][] nextLongTable(int n, int m) {\n\t\tlong[][] ret = new long[n][m];\n\t\tfor (int i = 0; i < n; i++) {\n\t\t\tfor (int j = 0; j < m; j++) {\n\t\t\t\tret[i][j] = nextLong();\n\t\t\t}\n\t\t}\n\t\treturn ret;\n\t}\n\n\tpublic int[][] nextIntTable(int n, int m) {\n\t\tint[][] ret = new int[n][m];\n\t\tfor (int i = 0; i < n; i++) {\n\t\t\tfor (int j = 0; j < m; j++) {\n\t\t\t\tret[i][j] = nextInt();\n\t\t\t}\n\t\t}\n\t\treturn ret;\n\t}\n}"
  },
  {
    "language": "Java",
    "code": "import java.io.OutputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.OutputStream;\nimport java.util.Arrays;\nimport java.io.IOException;\nimport java.io.UncheckedIOException;\nimport java.io.Closeable;\nimport java.io.Writer;\nimport java.io.OutputStreamWriter;\nimport java.io.InputStream;\n\n/**\n * Built using CHelper plug-in Actual solution is at the top\n * \n * @author daltao\n */\npublic class Main {\n    public static void main(String[] args) throws Exception {\n        Thread thread = new Thread(null, new TaskAdapter(), \"daltao\", 1 << 27);\n        thread.start();\n        thread.join();\n    }\n\n    static class TaskAdapter implements Runnable {\n        @Override\n        public void run() {\n            InputStream inputStream = System.in;\n            OutputStream outputStream = System.out;\n            FastInput in = new FastInput(inputStream);\n            FastOutput out = new FastOutput(outputStream);\n            TaskD solver = new TaskD();\n            solver.solve(1, in, out);\n            out.close();\n        }\n    }\n    static class TaskD {\n        public void solve(int testNumber, FastInput in, FastOutput out) {\n            int n = in.readInt();\n            int[] vals = new int[n + 1];\n            vals[1] = in.readInt();\n            for (int i = 2; i <= n; i++) {\n                char c = in.readChar();\n                vals[i] = in.readInt();\n                if (c == '-') {\n                    vals[i] = -vals[i];\n                }\n            }\n\n            long[][] dp = new long[n + 1][3];\n            ArrayUtils.deepFill(dp, (long) -1e18);\n            dp[0][0] = 0;\n            int[] sign = new int[] {1, -1, 1};\n            for (int i = 1; i <= n; i++) {\n                for (int j = 2; j >= 0; j--) {\n                    if (j < 2) {\n                        dp[i][j] = Math.max(dp[i][j], dp[i][j + 1]);\n                    }\n                    dp[i][j] = Math.max(dp[i][j], dp[i - 1][j] + sign[j] * vals[i]);\n                    if (vals[i] < 0 && j > 0) {\n                        dp[i][j] = Math.max(dp[i][j], dp[i - 1][j - 1] + sign[j - 1] * vals[i]);\n                    }\n                }\n            }\n\n            out.println(dp[n][0]);\n        }\n\n    }\n    static class ArrayUtils {\n        public static void deepFill(Object array, long val) {\n            if (!array.getClass().isArray()) {\n                throw new IllegalArgumentException();\n            }\n            if (array instanceof long[]) {\n                long[] longArray = (long[]) array;\n                Arrays.fill(longArray, val);\n            } else {\n                Object[] objArray = (Object[]) array;\n                for (Object obj : objArray) {\n                    deepFill(obj, val);\n                }\n            }\n        }\n\n    }\n    static class FastInput {\n        private final InputStream is;\n        private byte[] buf = new byte[1 << 13];\n        private int bufLen;\n        private int bufOffset;\n        private int next;\n\n        public FastInput(InputStream is) {\n            this.is = is;\n        }\n\n        private int read() {\n            while (bufLen == bufOffset) {\n                bufOffset = 0;\n                try {\n                    bufLen = is.read(buf);\n                } catch (IOException e) {\n                    throw new RuntimeException(e);\n                }\n                if (bufLen == -1) {\n                    return -1;\n                }\n            }\n            return buf[bufOffset++];\n        }\n\n        public void skipBlank() {\n            while (next >= 0 && next <= 32) {\n                next = read();\n            }\n        }\n\n        public int readInt() {\n            int sign = 1;\n\n            skipBlank();\n            if (next == '+' || next == '-') {\n                sign = next == '+' ? 1 : -1;\n                next = read();\n            }\n\n            int val = 0;\n            if (sign == 1) {\n                while (next >= '0' && next <= '9') {\n                    val = val * 10 + next - '0';\n                    next = read();\n                }\n            } else {\n                while (next >= '0' && next <= '9') {\n                    val = val * 10 - next + '0';\n                    next = read();\n                }\n            }\n\n            return val;\n        }\n\n        public char readChar() {\n            skipBlank();\n            char c = (char) next;\n            next = read();\n            return c;\n        }\n\n    }\n    static class FastOutput implements AutoCloseable, Closeable {\n        private StringBuilder cache = new StringBuilder(1 << 20);\n        private final Writer os;\n\n        public FastOutput(Writer os) {\n            this.os = os;\n        }\n\n        public FastOutput(OutputStream os) {\n            this(new OutputStreamWriter(os));\n        }\n\n        public FastOutput println(long c) {\n            cache.append(c).append('\\n');\n            return this;\n        }\n\n        public FastOutput flush() {\n            try {\n                os.append(cache);\n                cache.setLength(0);\n            } catch (IOException e) {\n                throw new UncheckedIOException(e);\n            }\n            return this;\n        }\n\n        public void close() {\n            flush();\n            try {\n                os.close();\n            } catch (IOException e) {\n                throw new UncheckedIOException(e);\n            }\n        }\n\n    }\n}\n\n"
  },
  {
    "language": "Java",
    "code": "import java.io.*;\nimport java.util.*;\n\npublic class Main {\n\tvoid run() {\n\t\tint n = in.nextInt() - 1;\n\t\tint[] a = new int[n];\n\t\tboolean[] minus = new boolean[n];\n\t\tlong total = in.nextInt();\n\t\tfor (int i = 0; i < n; i++) {\n\t\t\tminus[i] = \"-\".equals(in.next());\n\t\t\ta[i] = in.nextInt();\n\t\t\ttotal += a[i];\n\t\t}\n\t\tint i = 0;\n\t\twhile (i < n && !minus[i]) {\n\t\t\ti++;\n\t\t}\n\t\tif (i == n) {\n\t\t\tout.println(total);\n\t\t\treturn;\n\t\t}\n\t\tlong bestSub = Long.MAX_VALUE;\n\t\tlong sub = 0;\n\t\twhile (i < n) {\n\t\t\tint x = a[i];\n\t\t\tlong y = 0;\n\t\t\ti++;\n\t\t\twhile (i < n && !minus[i]) {\n\t\t\t\ty += a[i];\n\t\t\t\ti++;\n\t\t\t}\n\t\t\tbestSub = Math.min(bestSub, sub + x + y);\n\t\t\tsub += x;\n\t\t}\n\t\tbestSub = Math.min(bestSub, sub);\n\t\tout.println(total - 2 * bestSub);\n\t}\n\n\tstatic MyScanner in;\n\tstatic PrintWriter out;\n\n\tpublic static void main(String[] args) throws IOException {\n\t\tboolean stdStreams = true;\n\t\tString fileName = Main.class.getSimpleName().replaceFirst(\"_.*\", \"\").toLowerCase();\n\t\tString inputFileName = fileName + \".in\";\n\t\tString outputFileName = fileName + \".out\";\n\t\t\n\t\tLocale.setDefault(Locale.US);\n\t\tBufferedReader br;\n\t\tif (stdStreams) {\n\t\t\tbr = new BufferedReader(new InputStreamReader(System.in));\n\t\t\tout = new PrintWriter(System.out);\n\t\t} else {\n\t\t\tbr = new BufferedReader(new FileReader(inputFileName));\n\t\t\tout = new PrintWriter(outputFileName);\n\t\t}\n\t\tin = new MyScanner(br);\n\t\tint tests = 1;//in.nextInt();\n\t\tfor (int test = 0; test < tests; test++) {\n\t\t\tnew Main().run();\n\t\t}\n\t\tbr.close();\n\t\tout.close();\n\t}\n\t\n\tstatic class MyScanner {\n\t\tBufferedReader br;\n\t\tStringTokenizer st;\n\n\t\tMyScanner(BufferedReader br) {\n\t\t\tthis.br = br;\n\t\t}\n\t\t\n\t\tvoid findToken() {\n\t\t\twhile (st == null || !st.hasMoreTokens()) {\n\t\t\t\ttry {\n\t\t\t\t\tst = new StringTokenizer(br.readLine());\n\t\t\t\t} catch (IOException e) {\n\t\t\t\t\tthrow new RuntimeException(e);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tString next() {\n\t\t\tfindToken();\n\t\t\treturn st.nextToken();\n\t\t}\n\t\t\n\t\tint nextInt() {\n\t\t\treturn Integer.parseInt(next());\n\t\t}\n\t\t\n\t\tlong nextLong() {\n\t\t\treturn Long.parseLong(next());\n\t\t}\n\t\t\n\t\tdouble nextDouble() {\n\t\t\treturn Double.parseDouble(next());\n\t\t}\n\t}\n}\n"
  },
  {
    "language": "Java",
    "code": "\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.util.Arrays;\nimport java.util.NoSuchElementException;\n\npublic class Main {\n\n\tpublic static void main(String[] args) {\n\t\tFastScanner sc = new FastScanner();\n\t\tint N = sc.nextInt();\n\n\t\tlong[] A = new long[N + 1];\n\t\tlong[] B = new long[N + 1];\n\t\tboolean[] p = new boolean[N + 1];\n\t\tp[1] = true;\n\n\t\tfor (int i = 1; i <= N; i++) {\n\t\t\tif (i > 1) {\n\t\t\t\tp[i] = sc.next().equals(\"+\");\n\t\t\t}\n\t\t\tA[i] = sc.nextLong();\n\n\t\t\tB[i] = A[i] * (p[i] ? 1 : -1);\n\t\t}\n\n\t\tlong[][] dp = new long[N + 1][3];\n\t\tfor (long[] v : dp) Arrays.fill(v, Integer.MIN_VALUE);\n\t\tdp[0][0] = 0;\n\n\t\tfor (int i = 0; i < N; i++) {\n\t\t\tif (p[i + 1]) {\n\t\t\t\tdp[i + 1][0] = Math.max(dp[i + 1][0], dp[i][0] + A[i + 1]);\n\t\t\t\tdp[i + 1][0] = Math.max(dp[i + 1][0], dp[i][1] + A[i + 1]);\n\t\t\t\tdp[i + 1][0] = Math.max(dp[i + 1][0], dp[i][2] + A[i + 1]);\n\n\t\t\t\tdp[i + 1][1] = Math.max(dp[i + 1][1], dp[i][1] - A[i + 1]);\n\t\t\t\tdp[i + 1][1] = Math.max(dp[i + 1][1], dp[i][2] - A[i + 1]);\n\n\t\t\t\tdp[i + 1][2] = Math.max(dp[i + 1][2], dp[i][2] + A[i + 1]);\n\n\t\t\t} else {\n\t\t\t\tdp[i + 1][0] = Math.max(dp[i + 1][0], dp[i][0] - A[i + 1]);\n\t\t\t\tdp[i + 1][0] = Math.max(dp[i + 1][0], dp[i][1] - A[i + 1]);\n\t\t\t\tdp[i + 1][0] = Math.max(dp[i + 1][0], dp[i][2] - A[i + 1]);\n\n\t\t\t\tdp[i + 1][1] = Math.max(dp[i + 1][1], dp[i][0] - A[i + 1]);\n\t\t\t\tdp[i + 1][1] = Math.max(dp[i + 1][1], dp[i][1] + A[i + 1]);\n\t\t\t\tdp[i + 1][1] = Math.max(dp[i + 1][1], dp[i][2] + A[i + 1]);\n\n\t\t\t\tdp[i + 1][2] = Math.max(dp[i + 1][2], dp[i][1] + A[i + 1]);\n\t\t\t\tdp[i + 1][2] = Math.max(dp[i + 1][2], dp[i][2] - A[i + 1]);\n\t\t\t}\n\t\t}\n\t\tlong max = Integer.MIN_VALUE;\n\t\tmax = Math.max(dp[N][0], max);\n\t\tmax = Math.max(dp[N][1], max);\n\t\tmax = Math.max(dp[N][2], max);\n\n\t\tSystem.out.println(max);\n\t}\n}\n\nclass FastScanner {\n\tpublic static String debug = null;\n\n\tprivate final InputStream in = System.in;\n\tprivate int ptr = 0;\n\tprivate int buflen = 0;\n\tprivate byte[] buffer = new byte[1024];\n\tprivate boolean eos = false;\n\n\tprivate boolean hasNextByte() {\n\t\tif (ptr < buflen) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\tptr = 0;\n\t\t\ttry {\n\t\t\t\tif (debug != null) {\n\t\t\t\t\tbuflen = debug.length();\n\t\t\t\t\tbuffer = debug.getBytes();\n\t\t\t\t\tdebug = \"\";\n\t\t\t\t\teos = true;\n\t\t\t\t} else {\n\t\t\t\t\tbuflen = in.read(buffer);\n\t\t\t\t}\n\t\t\t} catch (IOException e) {\n\t\t\t\te.printStackTrace();\n\t\t\t}\n\t\t\tif (buflen < 0) {\n\t\t\t\teos = true;\n\t\t\t\treturn false;\n\t\t\t} else if (buflen == 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\tprivate int readByte() {\n\t\tif (hasNextByte())\n\t\t\treturn buffer[ptr++];\n\t\telse\n\t\t\treturn -1;\n\t}\n\n\tprivate static boolean isPrintableChar(int c) {\n\t\treturn 33 <= c && c <= 126;\n\t}\n\n\tprivate void skipUnprintable() {\n\t\twhile (hasNextByte() && !isPrintableChar(buffer[ptr]))\n\t\t\tptr++;\n\t}\n\n\tpublic boolean isEOS() {\n\t\treturn this.eos;\n\t}\n\n\tpublic boolean hasNext() {\n\t\tskipUnprintable();\n\t\treturn hasNextByte();\n\t}\n\n\tpublic String next() {\n\t\tif (!hasNext())\n\t\t\tthrow new NoSuchElementException();\n\t\tStringBuilder sb = new StringBuilder();\n\t\tint b = readByte();\n\t\twhile (isPrintableChar(b)) {\n\t\t\tsb.appendCodePoint(b);\n\t\t\tb = readByte();\n\t\t}\n\t\treturn sb.toString();\n\t}\n\n\tpublic long nextLong() {\n\t\tif (!hasNext())\n\t\t\tthrow new NoSuchElementException();\n\t\tlong n = 0;\n\t\tboolean minus = false;\n\t\tint b = readByte();\n\t\tif (b == '-') {\n\t\t\tminus = true;\n\t\t\tb = readByte();\n\t\t}\n\t\tif (b < '0' || '9' < b) {\n\t\t\tthrow new NumberFormatException();\n\t\t}\n\t\twhile (true) {\n\t\t\tif ('0' <= b && b <= '9') {\n\t\t\t\tn *= 10;\n\t\t\t\tn += b - '0';\n\t\t\t} else if (b == -1 || !isPrintableChar(b)) {\n\t\t\t\treturn minus ? -n : n;\n\t\t\t} else {\n\t\t\t\tthrow new NumberFormatException();\n\t\t\t}\n\t\t\tb = readByte();\n\t\t}\n\t}\n\n\tpublic int nextInt() {\n\t\treturn (int) nextLong();\n\t}\n\n\tpublic long[] nextLongList(int n) {\n\t\treturn nextLongTable(1, n)[0];\n\t}\n\n\tpublic int[] nextIntList(int n) {\n\t\treturn nextIntTable(1, n)[0];\n\t}\n\n\tpublic long[][] nextLongTable(int n, int m) {\n\t\tlong[][] ret = new long[n][m];\n\t\tfor (int i = 0; i < n; i++) {\n\t\t\tfor (int j = 0; j < m; j++) {\n\t\t\t\tret[i][j] = nextLong();\n\t\t\t}\n\t\t}\n\t\treturn ret;\n\t}\n\n\tpublic int[][] nextIntTable(int n, int m) {\n\t\tint[][] ret = new int[n][m];\n\t\tfor (int i = 0; i < n; i++) {\n\t\t\tfor (int j = 0; j < m; j++) {\n\t\t\t\tret[i][j] = nextInt();\n\t\t\t}\n\t\t}\n\t\treturn ret;\n\t}\n}"
  },
  {
    "language": "Java",
    "code": "import java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.io.PrintWriter;\nimport java.util.StringTokenizer;\n\n/**\n * @author Pavel Mavrin\n */\npublic class Main {\n\n    private void solve() throws IOException {\n        int n = nextInt();\n        long[] a = new long[n];\n        char[] c = new char[n];\n        c[0] = '+';\n        for (int i = 0; i < n; i++) {\n            if (i > 0) {\n                c[i] = next().charAt(0);\n            }\n            a[i] = nextInt();\n        }\n        long s = 0;\n        long ss = 0;\n        long ans = 0;\n        for (int i = n - 1; i >= 0; i--) {\n            if (c[i] == '+') {\n                s += a[i];\n            } else {\n                ans = Math.max(-a[i] + s + ans, -a[i] - s + ss);\n                ss += s + a[i];\n                s = 0;\n            }\n        }\n        ans += s;\n        out.println(ans);\n    }\n\n\n\n\n    BufferedReader br = new BufferedReader(new InputStreamReader(System.in));\n    StringTokenizer st;\n    PrintWriter out = new PrintWriter(System.out);\n\n    String next() throws IOException {\n        while (st == null || !st.hasMoreTokens()) {\n            st = new StringTokenizer(br.readLine());\n        }\n        return st.nextToken();\n    }\n\n    int nextInt() throws IOException {\n        return Integer.parseInt(next());\n    }\n\n    public static void main(String[] args) throws IOException {\n        new Main().run();\n    }\n\n    private void run() throws IOException {\n        solve();\n        out.close();\n    }\n\n}\n"
  },
  {
    "language": "Java",
    "code": "import java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.Collections;\nimport java.util.PriorityQueue;\nimport java.util.Random;\nimport java.util.Scanner;\n\nclass Main {\n\tpublic static void main(String[] args) {\n\t\tnew Main().run();\n\t}\n\n\tvoid run() {\n\t\tsolve();\n\t}\n\n\tvoid solve() {\n\t\tScanner sc = new Scanner(System.in);\n\t\tint n = sc.nextInt();\n\t\tint[] a = new int[n];\n\t\tchar[] op = new char[n];\n\t\top[0] = '+';\n\t\tfor (int i = 0; i < n; ++i) {\n\t\t\tif (i != 0)\n\t\t\t\top[i] = sc.next().charAt(0);\n\t\t\ta[i] = sc.nextInt();\n\t\t}\n\n\t\tint[][] dp = new int[n][3];\n\t\tfor (int i = 0; i < dp.length; ++i) {\n\t\t\tfor (int j = 0; j < dp[i].length; ++j) {\n\t\t\t\tdp[i][j] = -Integer.MAX_VALUE / 10;\n\t\t\t}\n\t\t}\n\n\t\tfor (int i = 0; i < n; ++i) {\n\t\t\tif (i == 0) {\n\t\t\t\tdp[0][0] = a[0];\n\t\t\t} else {\n\t\t\t\tfor (int pre = 0; pre <= 2; ++pre) {\n\t\t\t\t\tfor (int next = op[i] == '-' ? 1 : 0; next <= pre + (op[i] == '-' ? 1 : 0); ++next) {\n\t\t\t\t\t\tif (next <= 2) {\n\t\t\t\t\t\t\tdp[i][next] = Math.max(dp[i][next], dp[i - 1][pre] + a[i] * (int) Math.pow(-1, next));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tlong ans = -Long.MAX_VALUE / 10;\n\t\tfor (int i = 0; i <= 2; ++i) {\n\t\t\tans = Math.max(ans, dp[n - 1][i]);\n\t\t}\n\t\tSystem.out.println(ans);\n\t}\n\n\tvoid tr(Object... objects) {\n\t\tSystem.out.println(Arrays.deepToString(objects));\n\t}\n}"
  },
  {
    "language": "Java",
    "code": "import java.io.*;\nimport java.math.*;\nimport java.util.*;\nimport java.util.stream.*;\n\npublic class mm_martian_n2 {\n\n\tstatic final long INF = Long.MAX_VALUE / 10;\n\t\n\tvoid submit() {\n\t\tint n = nextInt();\n\t\tlong[] a = new long[n];\n\t\tboolean[] plus = new boolean[n - 1];\n\t\tfor (int i = 0; i < n; i++) {\n\t\t\ta[i] = nextInt();\n\t\t\tif (i != n - 1) {\n\t\t\t\tplus[i] = nextToken().equals(\"+\");\n\t\t\t}\n\t\t}\n\t\t\n\t\tlong[] dp = new long[n];\n\t\tArrays.fill(dp, -INF);\n\t\tdp[0] = a[0];\n\t\t\n\t\tfor (int i = 1; i < n; i++) {\n\t\t\tlong[] nxt = new long[n];\n\t\t\tArrays.fill(nxt, -INF);\n\t\t\tboolean sgn = plus[i - 1];\n\t\t\tlong x = a[i];\n\t\t\t\n\t\t\tfor (int was = 0; was < C; was++) {\n\t\t\t\tint nowMax = Math.min(was + (sgn ? 0 : 1), n - 1);\n\t\t\t\tlong delta = (nowMax % 2 == 0) ? x : -x;\n\t\t\t\tfor (int j = 0; j <= nowMax; j++) {\n\t\t\t\t\tnxt[j] = Math.max(nxt[j], dp[was] + delta);\n\t\t\t\t}\n\t\t\t}\n\t\t\tdp = nxt;\n\t\t}\n\t\t\n\t\tout.println(Arrays.stream(dp).max().getAsLong());\n\t}\n\n\tvoid test() {\n\n\t}\n\n\tvoid stress() {\n\t\tfor (int tst = 0;; tst++) {\n\t\t\tif (false) {\n\t\t\t\tthrow new AssertionError();\n\t\t\t}\n\t\t\tSystem.err.println(tst);\n\t\t}\n\t}\n\n\tmm_martian_n2() throws IOException {\n\t\tis = System.in;\n\t\tout = new PrintWriter(System.out);\n\t\tsubmit();\n\t\t// stress();\n\t\t// test();\n\t\tout.close();\n\t}\n\n\tstatic final Random rng = new Random();\n\tstatic final int C = 5;\n\n\tstatic int rand(int l, int r) {\n\t\treturn l + rng.nextInt(r - l + 1);\n\t}\n\n\tpublic static void main(String[] args) throws IOException {\n\t\tnew mm_martian_n2();\n\t}\n\n\tprivate InputStream is;\n\tPrintWriter out;\n\n\tprivate byte[] buf = new byte[1 << 14];\n\tprivate int bufSz = 0, bufPtr = 0;\n\n\tprivate int readByte() {\n\t\tif (bufSz == -1)\n\t\t\tthrow new RuntimeException(\"Reading past EOF\");\n\t\tif (bufPtr >= bufSz) {\n\t\t\tbufPtr = 0;\n\t\t\ttry {\n\t\t\t\tbufSz = is.read(buf);\n\t\t\t} catch (IOException e) {\n\t\t\t\tthrow new RuntimeException(e);\n\t\t\t}\n\t\t\tif (bufSz <= 0)\n\t\t\t\treturn -1;\n\t\t}\n\t\treturn buf[bufPtr++];\n\t}\n\n\tprivate boolean isTrash(int c) {\n\t\treturn c < 33 || c > 126;\n\t}\n\n\tprivate int skip() {\n\t\tint b;\n\t\twhile ((b = readByte()) != -1 && isTrash(b))\n\t\t\t;\n\t\treturn b;\n\t}\n\n\tString nextToken() {\n\t\tint b = skip();\n\t\tStringBuilder sb = new StringBuilder();\n\t\twhile (!isTrash(b)) {\n\t\t\tsb.appendCodePoint(b);\n\t\t\tb = readByte();\n\t\t}\n\t\treturn sb.toString();\n\t}\n\n\tString nextString() {\n\t\tint b = readByte();\n\t\tStringBuilder sb = new StringBuilder();\n\t\twhile (!isTrash(b) || b == ' ') {\n\t\t\tsb.appendCodePoint(b);\n\t\t\tb = readByte();\n\t\t}\n\t\treturn sb.toString();\n\t}\n\n\tdouble nextDouble() {\n\t\treturn Double.parseDouble(nextToken());\n\t}\n\n\tchar nextChar() {\n\t\treturn (char) skip();\n\t}\n\n\tint nextInt() {\n\t\tint ret = 0;\n\t\tint b = skip();\n\t\tif (b != '-' && (b < '0' || b > '9')) {\n\t\t\tthrow new InputMismatchException();\n\t\t}\n\t\tboolean neg = false;\n\t\tif (b == '-') {\n\t\t\tneg = true;\n\t\t\tb = readByte();\n\t\t}\n\t\twhile (true) {\n\t\t\tif (b >= '0' && b <= '9') {\n\t\t\t\tret = ret * 10 + (b - '0');\n\t\t\t} else {\n\t\t\t\tif (b != -1 && !isTrash(b)) {\n\t\t\t\t\tthrow new InputMismatchException();\n\t\t\t\t}\n\t\t\t\treturn neg ? -ret : ret;\n\t\t\t}\n\t\t\tb = readByte();\n\t\t}\n\t}\n\n\tlong nextLong() {\n\t\tlong ret = 0;\n\t\tint b = skip();\n\t\tif (b != '-' && (b < '0' || b > '9')) {\n\t\t\tthrow new InputMismatchException();\n\t\t}\n\t\tboolean neg = false;\n\t\tif (b == '-') {\n\t\t\tneg = true;\n\t\t\tb = readByte();\n\t\t}\n\t\twhile (true) {\n\t\t\tif (b >= '0' && b <= '9') {\n\t\t\t\tret = ret * 10 + (b - '0');\n\t\t\t} else {\n\t\t\t\tif (b != -1 && !isTrash(b)) {\n\t\t\t\t\tthrow new InputMismatchException();\n\t\t\t\t}\n\t\t\t\treturn neg ? -ret : ret;\n\t\t\t}\n\t\t\tb = readByte();\n\t\t}\n\t}\n}\n"
  },
  {
    "language": "Java",
    "code": "import java.io.*;\nimport java.util.*;\npublic class Main\n{\n\tfinal long inf=(long)(1e18+1);\n\tprivate void solve()throws IOException\n\t{\n\t\tint n=nextInt();\n\t\tint a[]=new int[n+1];\n\t\tchar op[]=new char[n+1];\n\t\tfor(int i=1;i<=n;i++)\n\t\t{\n\t\t\tif(i==1)\n\t\t\t\top[i]='+';\n\t\t\telse\n\t\t\t\top[i]=nextToken().charAt(0);\n\t\t\ta[i]=nextInt();\n\t\t}\n\t\t//dp[i][j] is the max value of expr[1..i] such that there are j parenthesis enclosing a[i]\n\t\tlong dp[][]=new long[n+1][3];\n\t\tfor(int i=0;i<=n;i++)\n\t\t\tArrays.fill(dp[i],-inf);\t\n\t\tdp[0][0]=0;\n\t\tfor(int i=1;i<=n;i++)\n\t\t\tfor(int j=0;j<=2;j++)\n\t\t\t{\n\t\t\t\tif(op[i]=='-')\n\t\t\t\t{\n\t\t\t\t\tif(j==0)\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\tfor(int k=j-1;k<=2;k++)\n\t\t\t\t\t\tdp[i][j]=Math.max(dp[i][j],dp[i-1][k]+(j%2==0?a[i]:-a[i]));\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tfor(int k=j;k<=2;k++)\n\t\t\t\t\t\tdp[i][j]=Math.max(dp[i][j],dp[i-1][k]+(j%2==0?a[i]:-a[i]));\n\t\t\t\t}\n\t\t\t}\n\t\tlong ans=-inf;\n\t\tfor(int j=0;j<=2;j++)\n\t\t\tans=Math.max(ans,dp[n][j]);\n\t\tout.println(ans);\n\t}\n\n\t \n\t///////////////////////////////////////////////////////////\n\n\tpublic void run()throws IOException\n\t{\n\t\tbr=new BufferedReader(new InputStreamReader(System.in));\n\t\tst=null;\n\t\tout=new PrintWriter(System.out);\n\n\t\tsolve();\n\t\t\n\t\tbr.close();\n\t\tout.close();\n\t}\n\tpublic static void main(String args[])throws IOException{\n\t\tnew Main().run();\n\t}\n\tBufferedReader br;\n\tStringTokenizer st;\n\tPrintWriter out;\n\tString nextToken()throws IOException{\n\t\twhile(st==null || !st.hasMoreTokens())\n\t\tst=new StringTokenizer(br.readLine());\n\t\treturn st.nextToken();\n\t}\n\tString nextLine()throws IOException{\n\t\treturn br.readLine();\n\t}\n\tint nextInt()throws IOException{\n\t\treturn Integer.parseInt(nextToken());\n\t}\n\tlong nextLong()throws IOException{\n\t\treturn Long.parseLong(nextToken());\n\t}\n\tdouble nextDouble()throws IOException{\n\t\treturn Double.parseDouble(nextToken());\n\t}\n}"
  },
  {
    "language": "Java",
    "code": "// package atcoder.arc.arc066;\n\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.PrintWriter;\nimport java.util.Arrays;\nimport java.util.InputMismatchException;\n\npublic class Main {\n    static final long INF = (long)1e18;\n\n    public static void main(String[] args) {\n        InputReader in = new InputReader(System.in);\n        PrintWriter out = new PrintWriter(System.out);\n\n        int n = in.nextInt();\n\n        int[] flg = new int[n];\n        long[] num = new long[n];\n        for (int i = 0; i < n ; i++) {\n            num[i] = in.nextInt();\n            if (i+1 < n) {\n                flg[i+1] = in.nextToken().toCharArray()[0] == '+' ? 1 : -1;\n            }\n        }\n        flg[0] = 1;\n        \n        long[][] dp = new long[n+1][3];\n        for (int i = 0; i <= n; i++) {\n            Arrays.fill(dp[i], -INF);\n        }\n        dp[0][0] = 0;\n        for (int i = 0; i < n ; i++) {\n            for (int c = 0; c <= 2; c++) {\n                long base = dp[i][c];\n                if (base == -INF) {\n                    continue;\n                }\n                long add = ((c % 2 == 0) ? 1 : -1) * flg[i] * num[i];\n\n                if (flg[i] == -1) {\n                    for (int tc = c ; tc <= Math.min(2, c+1) ; tc++) {\n                        dp[i+1][tc] = Math.max(dp[i+1][tc], base+add);\n                    }\n                }\n                for (int tc = c ; tc >= 0 ; tc--) {\n                    dp[i+1][tc] = Math.max(dp[i+1][tc], base+add);\n                }\n            }\n        }\n        out.println(dp[n][0]);\n        out.flush();\n    }\n\n    static class InputReader {\n        private InputStream stream;\n        private byte[] buf = new byte[1024];\n        private int curChar;\n        private int numChars;\n\n        public InputReader(InputStream stream) {\n            this.stream = stream;\n        }\n\n        private int[] nextInts(int n) {\n            int[] ret = new int[n];\n            for (int i = 0; i < n; i++) {\n                ret[i] = nextInt();\n            }\n            return ret;\n        }\n\n        private int[][] nextIntTable(int n, int m) {\n            int[][] ret = new int[n][m];\n            for (int i = 0; i < n; i++) {\n                for (int j = 0; j < m; j++) {\n                    ret[i][j] = nextInt();\n                }\n            }\n            return ret;\n        }\n\n        private long[] nextLongs(int n) {\n            long[] ret = new long[n];\n            for (int i = 0; i < n; i++) {\n                ret[i] = nextLong();\n            }\n            return ret;\n        }\n\n        private long[][] nextLongTable(int n, int m) {\n            long[][] ret = new long[n][m];\n            for (int i = 0; i < n; i++) {\n                for (int j = 0; j < m; j++) {\n                    ret[i][j] = nextLong();\n                }\n            }\n            return ret;\n        }\n\n        private double[] nextDoubles(int n) {\n            double[] ret = new double[n];\n            for (int i = 0; i < n; i++) {\n                ret[i] = nextDouble();\n            }\n            return ret;\n        }\n\n        private int next() {\n            if (numChars == -1)\n                throw new InputMismatchException();\n            if (curChar >= numChars) {\n                curChar = 0;\n                try {\n                    numChars = stream.read(buf);\n                } catch (IOException e) {\n                    throw new InputMismatchException();\n                }\n                if (numChars <= 0)\n                    return -1;\n            }\n            return buf[curChar++];\n        }\n\n        public char nextChar() {\n            int c = next();\n            while (isSpaceChar(c))\n                c = next();\n            if ('a' <= c && c <= 'z') {\n                return (char) c;\n            }\n            if ('A' <= c && c <= 'Z') {\n                return (char) c;\n            }\n            throw new InputMismatchException();\n        }\n\n        public String nextToken() {\n            int c = next();\n            while (isSpaceChar(c))\n                c = next();\n            StringBuilder res = new StringBuilder();\n            do {\n                res.append((char) c);\n                c = next();\n            } while (!isSpaceChar(c));\n            return res.toString();\n        }\n\n        public int nextInt() {\n            int c = next();\n            while (isSpaceChar(c))\n                c = next();\n            int sgn = 1;\n            if (c == '-') {\n                sgn = -1;\n                c = next();\n            }\n            int res = 0;\n            do {\n                if (c < '0' || c > '9')\n                    throw new InputMismatchException();\n                res *= 10;\n                res += c-'0';\n                c = next();\n            } while (!isSpaceChar(c));\n            return res*sgn;\n        }\n\n        public long nextLong() {\n            int c = next();\n            while (isSpaceChar(c))\n                c = next();\n            long sgn = 1;\n            if (c == '-') {\n                sgn = -1;\n                c = next();\n            }\n            long res = 0;\n            do {\n                if (c < '0' || c > '9')\n                    throw new InputMismatchException();\n                res *= 10;\n                res += c-'0';\n                c = next();\n            } while (!isSpaceChar(c));\n            return res*sgn;\n        }\n\n        public double nextDouble() {\n            return Double.valueOf(nextToken());\n        }\n\n        public boolean isSpaceChar(int c) {\n            return c == ' ' || c == '\\n' || c == '\\r' || c == '\\t' || c == -1;\n        }\n\n        public interface SpaceCharFilter {\n            public boolean isSpaceChar(int ch);\n        }\n    }\n\n    static void debug(Object... o) {\n        System.err.println(Arrays.deepToString(o));\n    }\n}\n"
  },
  {
    "language": "Java",
    "code": "import java.io.*;\nimport java.math.*;\nimport java.util.*;\nimport java.util.stream.*;\n\npublic class Main {\n\n\tstatic final long INF = Long.MAX_VALUE / 10;\n\t\n\tvoid submit() {\n\t\tint n = nextInt();\n\t\tlong[] a = new long[n];\n\t\tboolean[] plus = new boolean[n - 1];\n\t\tfor (int i = 0; i < n; i++) {\n\t\t\ta[i] = nextInt();\n\t\t\tif (i != n - 1) {\n\t\t\t\tplus[i] = nextToken().equals(\"+\");\n\t\t\t}\n\t\t}\n\t\t\n\t\tlong[] dp = new long[n];\n\t\tArrays.fill(dp, -INF);\n\t\tdp[0] = a[0];\n\t\t\n\t\tfor (int i = 1; i < n; i++) {\n\t\t\tlong[] nxt = new long[n];\n\t\t\tArrays.fill(nxt, -INF);\n\t\t\tboolean sgn = plus[i - 1];\n\t\t\tlong x = a[i];\n\t\t\t\n\t\t\tfor (int was = 0; was < C; was++) {\n\t\t\t\tint nowMax = Math.min(was + (sgn ? 0 : 1), n - 1);\n\t\t\t\tlong delta = (nowMax % 2 == 0) ? x : -x;\n\t\t\t\tfor (int j = 0; j <= nowMax; j++) {\n\t\t\t\t\tnxt[j] = Math.max(nxt[j], dp[was] + delta);\n\t\t\t\t}\n\t\t\t}\n\t\t\tdp = nxt;\n\t\t}\n\t\t\n\t\tout.println(Arrays.stream(dp).max().getAsLong());\n\t}\n\n\tvoid test() {\n\n\t}\n\n\tvoid stress() {\n\t\tfor (int tst = 0;; tst++) {\n\t\t\tif (false) {\n\t\t\t\tthrow new AssertionError();\n\t\t\t}\n\t\t\tSystem.err.println(tst);\n\t\t}\n\t}\n\n\tMain() throws IOException {\n\t\tis = System.in;\n\t\tout = new PrintWriter(System.out);\n\t\tsubmit();\n\t\t// stress();\n\t\t// test();\n\t\tout.close();\n\t}\n\n\tstatic final Random rng = new Random();\n\tstatic final int C = 5;\n\n\tstatic int rand(int l, int r) {\n\t\treturn l + rng.nextInt(r - l + 1);\n\t}\n\n\tpublic static void main(String[] args) throws IOException {\n\t\tnew Main();\n\t}\n\n\tprivate InputStream is;\n\tPrintWriter out;\n\n\tprivate byte[] buf = new byte[1 << 14];\n\tprivate int bufSz = 0, bufPtr = 0;\n\n\tprivate int readByte() {\n\t\tif (bufSz == -1)\n\t\t\tthrow new RuntimeException(\"Reading past EOF\");\n\t\tif (bufPtr >= bufSz) {\n\t\t\tbufPtr = 0;\n\t\t\ttry {\n\t\t\t\tbufSz = is.read(buf);\n\t\t\t} catch (IOException e) {\n\t\t\t\tthrow new RuntimeException(e);\n\t\t\t}\n\t\t\tif (bufSz <= 0)\n\t\t\t\treturn -1;\n\t\t}\n\t\treturn buf[bufPtr++];\n\t}\n\n\tprivate boolean isTrash(int c) {\n\t\treturn c < 33 || c > 126;\n\t}\n\n\tprivate int skip() {\n\t\tint b;\n\t\twhile ((b = readByte()) != -1 && isTrash(b))\n\t\t\t;\n\t\treturn b;\n\t}\n\n\tString nextToken() {\n\t\tint b = skip();\n\t\tStringBuilder sb = new StringBuilder();\n\t\twhile (!isTrash(b)) {\n\t\t\tsb.appendCodePoint(b);\n\t\t\tb = readByte();\n\t\t}\n\t\treturn sb.toString();\n\t}\n\n\tString nextString() {\n\t\tint b = readByte();\n\t\tStringBuilder sb = new StringBuilder();\n\t\twhile (!isTrash(b) || b == ' ') {\n\t\t\tsb.appendCodePoint(b);\n\t\t\tb = readByte();\n\t\t}\n\t\treturn sb.toString();\n\t}\n\n\tdouble nextDouble() {\n\t\treturn Double.parseDouble(nextToken());\n\t}\n\n\tchar nextChar() {\n\t\treturn (char) skip();\n\t}\n\n\tint nextInt() {\n\t\tint ret = 0;\n\t\tint b = skip();\n\t\tif (b != '-' && (b < '0' || b > '9')) {\n\t\t\tthrow new InputMismatchException();\n\t\t}\n\t\tboolean neg = false;\n\t\tif (b == '-') {\n\t\t\tneg = true;\n\t\t\tb = readByte();\n\t\t}\n\t\twhile (true) {\n\t\t\tif (b >= '0' && b <= '9') {\n\t\t\t\tret = ret * 10 + (b - '0');\n\t\t\t} else {\n\t\t\t\tif (b != -1 && !isTrash(b)) {\n\t\t\t\t\tthrow new InputMismatchException();\n\t\t\t\t}\n\t\t\t\treturn neg ? -ret : ret;\n\t\t\t}\n\t\t\tb = readByte();\n\t\t}\n\t}\n\n\tlong nextLong() {\n\t\tlong ret = 0;\n\t\tint b = skip();\n\t\tif (b != '-' && (b < '0' || b > '9')) {\n\t\t\tthrow new InputMismatchException();\n\t\t}\n\t\tboolean neg = false;\n\t\tif (b == '-') {\n\t\t\tneg = true;\n\t\t\tb = readByte();\n\t\t}\n\t\twhile (true) {\n\t\t\tif (b >= '0' && b <= '9') {\n\t\t\t\tret = ret * 10 + (b - '0');\n\t\t\t} else {\n\t\t\t\tif (b != -1 && !isTrash(b)) {\n\t\t\t\t\tthrow new InputMismatchException();\n\t\t\t\t}\n\t\t\t\treturn neg ? -ret : ret;\n\t\t\t}\n\t\t\tb = readByte();\n\t\t}\n\t}\n}\n"
  },
  {
    "language": "Java",
    "code": "import java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.Collections;\nimport java.util.PriorityQueue;\nimport java.util.Random;\nimport java.util.Scanner;\n\nclass Main {\n\tpublic static void main(String[] args) {\n\t\tnew Main().run();\n\t}\n\n\tvoid run() {\n\t\tsolve();\n\t}\n\n\tvoid solve() {\n\t\tScanner sc = new Scanner(System.in);\n\t\tint n = sc.nextInt();\n\t\tlong[] a = new long[n];\n\t\tchar[] op = new char[n];\n\t\top[0] = '+';\n\t\tfor (int i = 0; i < n; ++i) {\n\t\t\tif (i != 0)\n\t\t\t\top[i] = sc.next().charAt(0);\n\t\t\ta[i] = sc.nextLong();\n\t\t}\n\n\t\tlong[][] dp = new long[n][3];\n\t\tfor (int i = 0; i < dp.length; ++i) {\n\t\t\tfor (int j = 0; j < dp[i].length; ++j) {\n\t\t\t\tdp[i][j] = -Long.MAX_VALUE / 10;\n\t\t\t}\n\t\t}\n\n\t\tfor (int i = 0; i < n; ++i) {\n\t\t\tif (i == 0) {\n\t\t\t\tdp[0][0] = a[0];\n\t\t\t} else {\n\t\t\t\tfor (int pre = 0; pre <= 2; ++pre) {\n\t\t\t\t\tfor (int next = op[i] == '-' ? 1 : 0; next <= pre + (op[i] == '-' ? 1 : 0); ++next) {\n\t\t\t\t\t\tif (next <= 2) {\n\t\t\t\t\t\t\tdp[i][next] = Math.max(dp[i][next], dp[i - 1][pre] + a[i] * (int) Math.pow(-1, next));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tlong ans = -Long.MAX_VALUE / 10;\n\t\tfor (int i = 0; i <= 2; ++i) {\n\t\t\tans = Math.max(ans, dp[n - 1][i]);\n\t\t}\n\t\tSystem.out.println(ans);\n\t}\n\n\tvoid tr(Object... objects) {\n\t\tSystem.out.println(Arrays.deepToString(objects));\n\t}\n}"
  },
  {
    "language": "Java",
    "code": "import java.io.ByteArrayInputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.PrintWriter;\nimport java.util.Arrays;\nimport java.util.InputMismatchException;\n\npublic class Main {\n\tstatic InputStream is;\n\tstatic PrintWriter out;\n\tstatic String INPUT = \"\";\n\t\n\tstatic void solve()\n\t{\n\t\tint n = ni();\n\t\tlong[] a = new long[n];\n\t\tchar[] op = new char[n-1];\n\t\tfor(int i = 0;i < n;i++){\n\t\t\ta[i] = ni();\n\t\t\tif(i < n-1)op[i] = nc();\n\t\t}\n\t\tlong[][] dp = new long[10][n+1];\n\t\tfor(int i = 0;i < 10;i++){\n\t\t\tArrays.fill(dp[i], Long.MIN_VALUE / 2);\n\t\t}\n\t\tdp[0][0] = 0;\n\t\tfor(int i = 0;i < n;i++){\n\t\t\tchar c = i == 0 ? '+' : op[i-1];\n\t\t\tfor(int j = 0;j < 10;j++){\n\t\t\t\tif(c == '-'){\n\t\t\t\t\tif(j % 2 == 0){\n\t\t\t\t\t\tif(j >= 2){\n\t\t\t\t\t\t\tdp[j][i+1] = Math.max(dp[j][i+1], dp[j][i] + a[i]);\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tdp[1][i+1] = Math.max(dp[1][i+1], dp[j][i] - a[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tif(j+1 < 10)dp[j+1][i+1] = Math.max(dp[j+1][i+1], dp[j][i] + a[i]);\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tif(j % 2 == 0){\n\t\t\t\t\t\tdp[j][i+1] = Math.max(dp[j][i+1], dp[j][i] + a[i]);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tdp[j-1][i+1] = Math.max(dp[j-1][i+1], dp[j][i] + a[i]);\n\t\t\t\t\t\tdp[j][i+1] = Math.max(dp[j][i+1], dp[j][i] - a[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tlong max = Long.MIN_VALUE;\n\t\tfor(int j = 0;j < 10;j++){\n\t\t\tmax = Math.max(max, dp[j][n]);\n\t\t}\n\t\tout.println(max);\n\t}\n\t\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tlong S = System.currentTimeMillis();\n\t\tis = INPUT.isEmpty() ? System.in : new ByteArrayInputStream(INPUT.getBytes());\n\t\tout = new PrintWriter(System.out);\n\t\t\n\t\tsolve();\n\t\tout.flush();\n\t\tlong G = System.currentTimeMillis();\n\t\ttr(G-S+\"ms\");\n\t}\n\t\n\tprivate static boolean eof()\n\t{\n\t\tif(lenbuf == -1)return true;\n\t\tint lptr = ptrbuf;\n\t\twhile(lptr < lenbuf)if(!isSpaceChar(inbuf[lptr++]))return false;\n\t\t\n\t\ttry {\n\t\t\tis.mark(1000);\n\t\t\twhile(true){\n\t\t\t\tint b = is.read();\n\t\t\t\tif(b == -1){\n\t\t\t\t\tis.reset();\n\t\t\t\t\treturn true;\n\t\t\t\t}else if(!isSpaceChar(b)){\n\t\t\t\t\tis.reset();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (IOException e) {\n\t\t\treturn true;\n\t\t}\n\t}\n\t\n\tprivate static byte[] inbuf = new byte[1024];\n\tstatic int lenbuf = 0, ptrbuf = 0;\n\t\n\tprivate static int readByte()\n\t{\n\t\tif(lenbuf == -1)throw new InputMismatchException();\n\t\tif(ptrbuf >= lenbuf){\n\t\t\tptrbuf = 0;\n\t\t\ttry { lenbuf = is.read(inbuf); } catch (IOException e) { throw new InputMismatchException(); }\n\t\t\tif(lenbuf <= 0)return -1;\n\t\t}\n\t\treturn inbuf[ptrbuf++];\n\t}\n\t\n\tprivate static boolean isSpaceChar(int c) { return !(c >= 33 && c <= 126); }\n//\tprivate static boolean isSpaceChar(int c) { return !(c >= 32 && c <= 126); }\n\tprivate static int skip() { int b; while((b = readByte()) != -1 && isSpaceChar(b)); return b; }\n\t\n\tprivate static double nd() { return Double.parseDouble(ns()); }\n\tprivate static char nc() { return (char)skip(); }\n\t\n\tprivate static String ns()\n\t{\n\t\tint b = skip();\n\t\tStringBuilder sb = new StringBuilder();\n\t\twhile(!(isSpaceChar(b))){\n\t\t\tsb.appendCodePoint(b);\n\t\t\tb = readByte();\n\t\t}\n\t\treturn sb.toString();\n\t}\n\t\n\tprivate static char[] ns(int n)\n\t{\n\t\tchar[] buf = new char[n];\n\t\tint b = skip(), p = 0;\n\t\twhile(p < n && !(isSpaceChar(b))){\n\t\t\tbuf[p++] = (char)b;\n\t\t\tb = readByte();\n\t\t}\n\t\treturn n == p ? buf : Arrays.copyOf(buf, p);\n\t}\n\t\n\tprivate static char[][] nm(int n, int m)\n\t{\n\t\tchar[][] map = new char[n][];\n\t\tfor(int i = 0;i < n;i++)map[i] = ns(m);\n\t\treturn map;\n\t}\n\t\n\tprivate static int[] na(int n)\n\t{\n\t\tint[] a = new int[n];\n\t\tfor(int i = 0;i < n;i++)a[i] = ni();\n\t\treturn a;\n\t}\n\t\n\tprivate static int ni()\n\t{\n\t\tint num = 0, b;\n\t\tboolean minus = false;\n\t\twhile((b = readByte()) != -1 && !((b >= '0' && b <= '9') || b == '-'));\n\t\tif(b == '-'){\n\t\t\tminus = true;\n\t\t\tb = readByte();\n\t\t}\n\t\t\n\t\twhile(true){\n\t\t\tif(b >= '0' && b <= '9'){\n\t\t\t\tnum = num * 10 + (b - '0');\n\t\t\t}else{\n\t\t\t\treturn minus ? -num : num;\n\t\t\t}\n\t\t\tb = readByte();\n\t\t}\n\t}\n\t\n\tprivate static long nl()\n\t{\n\t\tlong num = 0;\n\t\tint b;\n\t\tboolean minus = false;\n\t\twhile((b = readByte()) != -1 && !((b >= '0' && b <= '9') || b == '-'));\n\t\tif(b == '-'){\n\t\t\tminus = true;\n\t\t\tb = readByte();\n\t\t}\n\t\t\n\t\twhile(true){\n\t\t\tif(b >= '0' && b <= '9'){\n\t\t\t\tnum = num * 10 + (b - '0');\n\t\t\t}else{\n\t\t\t\treturn minus ? -num : num;\n\t\t\t}\n\t\t\tb = readByte();\n\t\t}\n\t}\n\t\n\tprivate static void tr(Object... o) { if(INPUT.length() != 0)System.out.println(Arrays.deepToString(o)); }\n}\n"
  },
  {
    "language": "Java",
    "code": "import java.io.IOException;\nimport java.io.InputStream;\nimport java.io.PrintWriter;\nimport java.util.Arrays;\nimport java.util.InputMismatchException;\nimport java.util.NoSuchElementException;\n\npublic class Main {\n\n\tstatic PrintWriter out;\n\tstatic InputReader ir;\n\tstatic boolean debug = false;\n\n\tstatic void solve() {\n\t\tint n = ir.nextInt();\n\t\tint[] a = new int[n];\n\t\tchar[] op = new char[n - 1];\n\t\tfor (int i = 0; i < n - 1; i++) {\n\t\t\ta[i] = ir.nextInt();\n\t\t\top[i] = ir.next().charAt(0);\n\t\t}\n\t\ta[n - 1] = ir.nextInt();\n\t\tlong loss = 0;\n\t\tlong mi = (long) 1e18;\n\t\tfor (int i = 0; i < n - 1; i++) {\n\t\t\tif (op[i] == '-') {\n\t\t\t\tloss += a[i + 1];\n\t\t\t\tlong t = 0;\n\t\t\t\ti++;\n\t\t\t\twhile (i < n - 1 && op[i] == '+')\n\t\t\t\t\tt += a[++i];\n\t\t\t\ti--;\n\t\t\t\tmi = Math.min(mi, loss + t);\n\t\t\t}\n\t\t}\n\t\tlong sum = 0;\n\t\tfor (int i = 0; i < n; i++)\n\t\t\tsum += a[i];\n\t\tif (mi == (long) 1e18)\n\t\t\tout.println(sum);\n\t\telse\n\t\t\tout.println(sum - mi * 2);\n\t}\n\n\tpublic static void main(String[] args) {\n\t\tir = new InputReader(System.in);\n\t\tout = new PrintWriter(System.out);\n\t\tsolve();\n\t\tout.flush();\n\t}\n\n\tstatic class InputReader {\n\n\t\tprivate InputStream in;\n\t\tprivate byte[] buffer = new byte[1024];\n\t\tprivate int curbuf;\n\t\tprivate int lenbuf;\n\n\t\tpublic InputReader(InputStream in) {\n\t\t\tthis.in = in;\n\t\t\tthis.curbuf = this.lenbuf = 0;\n\t\t}\n\n\t\tpublic boolean hasNextByte() {\n\t\t\tif (curbuf >= lenbuf) {\n\t\t\t\tcurbuf = 0;\n\t\t\t\ttry {\n\t\t\t\t\tlenbuf = in.read(buffer);\n\t\t\t\t} catch (IOException e) {\n\t\t\t\t\tthrow new InputMismatchException();\n\t\t\t\t}\n\t\t\t\tif (lenbuf <= 0)\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\n\t\tprivate int readByte() {\n\t\t\tif (hasNextByte())\n\t\t\t\treturn buffer[curbuf++];\n\t\t\telse\n\t\t\t\treturn -1;\n\t\t}\n\n\t\tprivate boolean isSpaceChar(int c) {\n\t\t\treturn !(c >= 33 && c <= 126);\n\t\t}\n\n\t\tprivate void skip() {\n\t\t\twhile (hasNextByte() && isSpaceChar(buffer[curbuf]))\n\t\t\t\tcurbuf++;\n\t\t}\n\n\t\tpublic boolean hasNext() {\n\t\t\tskip();\n\t\t\treturn hasNextByte();\n\t\t}\n\n\t\tpublic String next() {\n\t\t\tif (!hasNext())\n\t\t\t\tthrow new NoSuchElementException();\n\t\t\tStringBuilder sb = new StringBuilder();\n\t\t\tint b = readByte();\n\t\t\twhile (!isSpaceChar(b)) {\n\t\t\t\tsb.appendCodePoint(b);\n\t\t\t\tb = readByte();\n\t\t\t}\n\t\t\treturn sb.toString();\n\t\t}\n\n\t\tpublic int nextInt() {\n\t\t\tif (!hasNext())\n\t\t\t\tthrow new NoSuchElementException();\n\t\t\tint c = readByte();\n\t\t\twhile (isSpaceChar(c))\n\t\t\t\tc = readByte();\n\t\t\tboolean minus = false;\n\t\t\tif (c == '-') {\n\t\t\t\tminus = true;\n\t\t\t\tc = readByte();\n\t\t\t}\n\t\t\tint res = 0;\n\t\t\tdo {\n\t\t\t\tif (c < '0' || c > '9')\n\t\t\t\t\tthrow new InputMismatchException();\n\t\t\t\tres = res * 10 + c - '0';\n\t\t\t\tc = readByte();\n\t\t\t} while (!isSpaceChar(c));\n\t\t\treturn (minus) ? -res : res;\n\t\t}\n\n\t\tpublic long nextLong() {\n\t\t\tif (!hasNext())\n\t\t\t\tthrow new NoSuchElementException();\n\t\t\tint c = readByte();\n\t\t\twhile (isSpaceChar(c))\n\t\t\t\tc = readByte();\n\t\t\tboolean minus = false;\n\t\t\tif (c == '-') {\n\t\t\t\tminus = true;\n\t\t\t\tc = readByte();\n\t\t\t}\n\t\t\tlong res = 0;\n\t\t\tdo {\n\t\t\t\tif (c < '0' || c > '9')\n\t\t\t\t\tthrow new InputMismatchException();\n\t\t\t\tres = res * 10 + c - '0';\n\t\t\t\tc = readByte();\n\t\t\t} while (!isSpaceChar(c));\n\t\t\treturn (minus) ? -res : res;\n\t\t}\n\n\t\tpublic double nextDouble() {\n\t\t\treturn Double.parseDouble(next());\n\t\t}\n\n\t\tpublic int[] nextIntArray(int n) {\n\t\t\tint[] a = new int[n];\n\t\t\tfor (int i = 0; i < n; i++)\n\t\t\t\ta[i] = nextInt();\n\t\t\treturn a;\n\t\t}\n\n\t\tpublic long[] nextLongArray(int n) {\n\t\t\tlong[] a = new long[n];\n\t\t\tfor (int i = 0; i < n; i++)\n\t\t\t\ta[i] = nextLong();\n\t\t\treturn a;\n\t\t}\n\n\t\tpublic char[][] nextCharMap(int n, int m) {\n\t\t\tchar[][] map = new char[n][m];\n\t\t\tfor (int i = 0; i < n; i++)\n\t\t\t\tmap[i] = next().toCharArray();\n\t\t\treturn map;\n\t\t}\n\t}\n\n\tstatic void tr(Object... o) {\n\t\tif (debug)\n\t\t\tout.println(Arrays.deepToString(o));\n\t}\n}\n"
  },
  {
    "language": "Java",
    "code": "import java.io.IOException;\nimport java.io.InputStream;\nimport java.io.PrintWriter;\nimport java.util.Arrays;\nimport java.util.InputMismatchException;\nimport java.util.NoSuchElementException;\n\npublic class Main {\n\n\tstatic PrintWriter out;\n\tstatic InputReader ir;\n\tstatic boolean debug = false;\n\n\tstatic void solve() {\n\t\tint n = ir.nextInt();\n\t\tint[] a = new int[n];\n\t\tchar[] op = new char[n - 1];\n\t\tfor (int i = 0; i < n - 1; i++) {\n\t\t\ta[i] = ir.nextInt();\n\t\t\top[i] = ir.next().charAt(0);\n\t\t}\n\t\ta[n - 1] = ir.nextInt();\n\t\tlong loss = 0;\n\t\tlong mi = (long) 1e18;\n\t\tfor (int i = 0; i < n - 1; i++) {\n\t\t\tif (op[i] == '-') {\n\t\t\t\tloss += a[i + 1];\n\t\t\t\tlong t = 0;\n\t\t\t\ti++;\n\t\t\t\twhile (i < n - 1 && op[i] == '+')\n\t\t\t\t\tt += a[++i];\n\t\t\t\tmi = Math.min(mi, loss + t);\n\t\t\t}\n\t\t}\n\t\tlong sum = 0;\n\t\tfor (int i = 0; i < n; i++)\n\t\t\tsum += a[i];\n\t\tif (mi == (long) 1e18)\n\t\t\tout.println(sum);\n\t\telse\n\t\t\tout.println(sum - mi * 2);\n\t}\n\n\tpublic static void main(String[] args) {\n\t\tir = new InputReader(System.in);\n\t\tout = new PrintWriter(System.out);\n\t\tsolve();\n\t\tout.flush();\n\t}\n\n\tstatic class InputReader {\n\n\t\tprivate InputStream in;\n\t\tprivate byte[] buffer = new byte[1024];\n\t\tprivate int curbuf;\n\t\tprivate int lenbuf;\n\n\t\tpublic InputReader(InputStream in) {\n\t\t\tthis.in = in;\n\t\t\tthis.curbuf = this.lenbuf = 0;\n\t\t}\n\n\t\tpublic boolean hasNextByte() {\n\t\t\tif (curbuf >= lenbuf) {\n\t\t\t\tcurbuf = 0;\n\t\t\t\ttry {\n\t\t\t\t\tlenbuf = in.read(buffer);\n\t\t\t\t} catch (IOException e) {\n\t\t\t\t\tthrow new InputMismatchException();\n\t\t\t\t}\n\t\t\t\tif (lenbuf <= 0)\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\n\t\tprivate int readByte() {\n\t\t\tif (hasNextByte())\n\t\t\t\treturn buffer[curbuf++];\n\t\t\telse\n\t\t\t\treturn -1;\n\t\t}\n\n\t\tprivate boolean isSpaceChar(int c) {\n\t\t\treturn !(c >= 33 && c <= 126);\n\t\t}\n\n\t\tprivate void skip() {\n\t\t\twhile (hasNextByte() && isSpaceChar(buffer[curbuf]))\n\t\t\t\tcurbuf++;\n\t\t}\n\n\t\tpublic boolean hasNext() {\n\t\t\tskip();\n\t\t\treturn hasNextByte();\n\t\t}\n\n\t\tpublic String next() {\n\t\t\tif (!hasNext())\n\t\t\t\tthrow new NoSuchElementException();\n\t\t\tStringBuilder sb = new StringBuilder();\n\t\t\tint b = readByte();\n\t\t\twhile (!isSpaceChar(b)) {\n\t\t\t\tsb.appendCodePoint(b);\n\t\t\t\tb = readByte();\n\t\t\t}\n\t\t\treturn sb.toString();\n\t\t}\n\n\t\tpublic int nextInt() {\n\t\t\tif (!hasNext())\n\t\t\t\tthrow new NoSuchElementException();\n\t\t\tint c = readByte();\n\t\t\twhile (isSpaceChar(c))\n\t\t\t\tc = readByte();\n\t\t\tboolean minus = false;\n\t\t\tif (c == '-') {\n\t\t\t\tminus = true;\n\t\t\t\tc = readByte();\n\t\t\t}\n\t\t\tint res = 0;\n\t\t\tdo {\n\t\t\t\tif (c < '0' || c > '9')\n\t\t\t\t\tthrow new InputMismatchException();\n\t\t\t\tres = res * 10 + c - '0';\n\t\t\t\tc = readByte();\n\t\t\t} while (!isSpaceChar(c));\n\t\t\treturn (minus) ? -res : res;\n\t\t}\n\n\t\tpublic long nextLong() {\n\t\t\tif (!hasNext())\n\t\t\t\tthrow new NoSuchElementException();\n\t\t\tint c = readByte();\n\t\t\twhile (isSpaceChar(c))\n\t\t\t\tc = readByte();\n\t\t\tboolean minus = false;\n\t\t\tif (c == '-') {\n\t\t\t\tminus = true;\n\t\t\t\tc = readByte();\n\t\t\t}\n\t\t\tlong res = 0;\n\t\t\tdo {\n\t\t\t\tif (c < '0' || c > '9')\n\t\t\t\t\tthrow new InputMismatchException();\n\t\t\t\tres = res * 10 + c - '0';\n\t\t\t\tc = readByte();\n\t\t\t} while (!isSpaceChar(c));\n\t\t\treturn (minus) ? -res : res;\n\t\t}\n\n\t\tpublic double nextDouble() {\n\t\t\treturn Double.parseDouble(next());\n\t\t}\n\n\t\tpublic int[] nextIntArray(int n) {\n\t\t\tint[] a = new int[n];\n\t\t\tfor (int i = 0; i < n; i++)\n\t\t\t\ta[i] = nextInt();\n\t\t\treturn a;\n\t\t}\n\n\t\tpublic long[] nextLongArray(int n) {\n\t\t\tlong[] a = new long[n];\n\t\t\tfor (int i = 0; i < n; i++)\n\t\t\t\ta[i] = nextLong();\n\t\t\treturn a;\n\t\t}\n\n\t\tpublic char[][] nextCharMap(int n, int m) {\n\t\t\tchar[][] map = new char[n][m];\n\t\t\tfor (int i = 0; i < n; i++)\n\t\t\t\tmap[i] = next().toCharArray();\n\t\t\treturn map;\n\t\t}\n\t}\n\n\tstatic void tr(Object... o) {\n\t\tif (debug)\n\t\t\tout.println(Arrays.deepToString(o));\n\t}\n}\n"
  },
  {
    "language": "Java",
    "code": "import java.io.*;\nimport java.math.*;\nimport java.util.*;\nimport java.util.stream.*;\n\npublic class Main {\n\n\tstatic final long INF = Long.MAX_VALUE / 10;\n\t\n\tvoid submit() {\n\t\tint n = nextInt();\n\t\tlong[] a = new long[n];\n\t\tboolean[] plus = new boolean[n - 1];\n\t\tfor (int i = 0; i < n; i++) {\n\t\t\ta[i] = nextInt();\n\t\t\tif (i != n - 1) {\n\t\t\t\tplus[i] = nextToken().equals(\"+\");\n\t\t\t}\n\t\t}\n\t\t\n\t\tlong[] dp = new long[C];\n\t\tArrays.fill(dp, -INF);\n\t\tdp[0] = a[0];\n\t\t\n\t\tfor (int i = 1; i < n; i++) {\n\t\t\tlong[] nxt = new long[C];\n\t\t\tArrays.fill(nxt, -INF);\n\t\t\tboolean sgn = plus[i - 1];\n\t\t\tlong x = a[i];\n\t\t\t\n\t\t\tfor (int was = 0; was < C; was++) {\n\t\t\t\tint nowMax = Math.min(was + (sgn ? 0 : 1), C - 1);\n\t\t\t\tlong delta = (nowMax % 2 == 0) ? x : -x;\n\t\t\t\tfor (int j = 0; j <= nowMax; j++) {\n\t\t\t\t\tnxt[j] = Math.max(nxt[j], dp[was] + delta);\n\t\t\t\t}\n\t\t\t}\n\t\t\tdp = nxt;\n\t\t}\n\t\t\n\t\tout.println(Arrays.stream(dp).max().getAsLong());\n\t}\n\n\tvoid test() {\n\n\t}\n\n\tvoid stress() {\n\t\tfor (int tst = 0;; tst++) {\n\t\t\tif (false) {\n\t\t\t\tthrow new AssertionError();\n\t\t\t}\n\t\t\tSystem.err.println(tst);\n\t\t}\n\t}\n\n\tMain() throws IOException {\n\t\tis = System.in;\n\t\tout = new PrintWriter(System.out);\n\t\tsubmit();\n\t\t// stress();\n\t\t// test();\n\t\tout.close();\n\t}\n\n\tstatic final Random rng = new Random();\n\tstatic final int C = 5;\n\n\tstatic int rand(int l, int r) {\n\t\treturn l + rng.nextInt(r - l + 1);\n\t}\n\n\tpublic static void main(String[] args) throws IOException {\n\t\tnew Main();\n\t}\n\n\tprivate InputStream is;\n\tPrintWriter out;\n\n\tprivate byte[] buf = new byte[1 << 14];\n\tprivate int bufSz = 0, bufPtr = 0;\n\n\tprivate int readByte() {\n\t\tif (bufSz == -1)\n\t\t\tthrow new RuntimeException(\"Reading past EOF\");\n\t\tif (bufPtr >= bufSz) {\n\t\t\tbufPtr = 0;\n\t\t\ttry {\n\t\t\t\tbufSz = is.read(buf);\n\t\t\t} catch (IOException e) {\n\t\t\t\tthrow new RuntimeException(e);\n\t\t\t}\n\t\t\tif (bufSz <= 0)\n\t\t\t\treturn -1;\n\t\t}\n\t\treturn buf[bufPtr++];\n\t}\n\n\tprivate boolean isTrash(int c) {\n\t\treturn c < 33 || c > 126;\n\t}\n\n\tprivate int skip() {\n\t\tint b;\n\t\twhile ((b = readByte()) != -1 && isTrash(b))\n\t\t\t;\n\t\treturn b;\n\t}\n\n\tString nextToken() {\n\t\tint b = skip();\n\t\tStringBuilder sb = new StringBuilder();\n\t\twhile (!isTrash(b)) {\n\t\t\tsb.appendCodePoint(b);\n\t\t\tb = readByte();\n\t\t}\n\t\treturn sb.toString();\n\t}\n\n\tString nextString() {\n\t\tint b = readByte();\n\t\tStringBuilder sb = new StringBuilder();\n\t\twhile (!isTrash(b) || b == ' ') {\n\t\t\tsb.appendCodePoint(b);\n\t\t\tb = readByte();\n\t\t}\n\t\treturn sb.toString();\n\t}\n\n\tdouble nextDouble() {\n\t\treturn Double.parseDouble(nextToken());\n\t}\n\n\tchar nextChar() {\n\t\treturn (char) skip();\n\t}\n\n\tint nextInt() {\n\t\tint ret = 0;\n\t\tint b = skip();\n\t\tif (b != '-' && (b < '0' || b > '9')) {\n\t\t\tthrow new InputMismatchException();\n\t\t}\n\t\tboolean neg = false;\n\t\tif (b == '-') {\n\t\t\tneg = true;\n\t\t\tb = readByte();\n\t\t}\n\t\twhile (true) {\n\t\t\tif (b >= '0' && b <= '9') {\n\t\t\t\tret = ret * 10 + (b - '0');\n\t\t\t} else {\n\t\t\t\tif (b != -1 && !isTrash(b)) {\n\t\t\t\t\tthrow new InputMismatchException();\n\t\t\t\t}\n\t\t\t\treturn neg ? -ret : ret;\n\t\t\t}\n\t\t\tb = readByte();\n\t\t}\n\t}\n\n\tlong nextLong() {\n\t\tlong ret = 0;\n\t\tint b = skip();\n\t\tif (b != '-' && (b < '0' || b > '9')) {\n\t\t\tthrow new InputMismatchException();\n\t\t}\n\t\tboolean neg = false;\n\t\tif (b == '-') {\n\t\t\tneg = true;\n\t\t\tb = readByte();\n\t\t}\n\t\twhile (true) {\n\t\t\tif (b >= '0' && b <= '9') {\n\t\t\t\tret = ret * 10 + (b - '0');\n\t\t\t} else {\n\t\t\t\tif (b != -1 && !isTrash(b)) {\n\t\t\t\t\tthrow new InputMismatchException();\n\t\t\t\t}\n\t\t\t\treturn neg ? -ret : ret;\n\t\t\t}\n\t\t\tb = readByte();\n\t\t}\n\t}\n}\n"
  },
  {
    "language": "Java",
    "code": "import java.util.ArrayList;\nimport java.util.List;\nimport java.util.Scanner;\n\nclass Main{\n    public static void main(String[] args){\n        Scanner scan = new Scanner(System.in);\n        int N = scan.nextInt();\n        long[] sum = new long[N];\n        long[] a = new long[N];\n        long[] abssum = new long[N+1];\n        List<Integer> minusIndex = new ArrayList<>();\n        for(int i=0;i<N;++i){\n            if(i==0){\n                a[i] = scan.nextLong();\n                sum[i]=a[i];\n            }else{\n                boolean minus = (scan.next().equals(\"-\"));\n                a[i] = scan.nextLong();\n                sum[i] = sum[i-1] + a[i]*(minus ? -1:1);\n                if(minus)minusIndex.add(i-1);\n            }\n        }\n        for(int i=N-1;i>=0;--i)abssum[i] = abssum[i+1]+a[i];\n\n        long ans = sum[N-1];\n        for(int i=0;i<minusIndex.size()-1;++i){\n            ans = Math.max(ans, sum[minusIndex.get(i)] - abssum[minusIndex.get(i)+1] + 2*abssum[minusIndex.get(i+1)+1]);\n        }\n        System.out.println(ans);\n    }\n}"
  },
  {
    "language": "Java",
    "code": "import java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.io.PrintWriter;\nimport java.util.*;\n\npublic class Main {\n\n    static BufferedReader in;\n    static PrintWriter out;\n    static StringTokenizer tok;\n\n    void solve() throws IOException {\n        n = ni();\n        a = new int[n];\n        p = new boolean[n - 1];\n\n        dp = new long[2][2][n];\n\n        for (int i = 0; i < n; i++) {\n            a[i] = ni();\n            if (i < n - 1) p[i] = ns().equals(\"+\");\n        }\n\n        dp[0][0][0] = a[0];\n        dp[1][0][0] = dp[1][1][0] = dp[0][1][0] = Long.MIN_VALUE / 2;\n\n        for (int i = 1; i < n; i++) {\n            if (p[i - 1]) {\n                dp[0][0][i] = Math.max(dp[0][0][i - 1] + a[i], dp[0][1][i - 1] + a[i]);\n                dp[0][1][i] = dp[0][1][i - 1] - a[i];\n                dp[1][0][i] = dp[1][1][i - 1] + a[i];\n                dp[1][1][i] = dp[1][1][i - 1] + a[i];\n\n            } else {\n                dp[0][0][i] = dp[0][1][i - 1] + a[i];\n                dp[0][1][i] = dp[0][0][i - 1] - a[i];\n                long ret = Long.MIN_VALUE;\n                for (int j = 0; j < 2; j++) {\n                    for (int k = 0; k < 2; k++) {\n                        if (j == 0 && k == 0) continue;\n                        ret = Math.max(ret, dp[j][k][i - 1]);\n                    }\n                }\n                dp[1][0][i] = Math.max(dp[0][1][i - 1] + a[i], ret + a[i]);\n                dp[1][1][i] = Math.max(dp[0][1][i - 1] - a[i], ret + a[i]);\n            }\n        }\n\n        long ans = Long.MIN_VALUE;\n\n        for (int i = 0; i < 2; i++) {\n            for (int j = 0; j < 2; j++) {\n                ans = Math.max(ans, dp[i][j][n - 1]);\n            }\n        }\n\n        out.println(ans);\n    }\n\n    int n;\n    int[] a;\n    boolean[] p;\n    long[][][] dp;\n\n    String ns() throws IOException {\n        while (!tok.hasMoreTokens()) {\n            tok = new StringTokenizer(in.readLine(), \" \");\n        }\n        return tok.nextToken();\n    }\n\n    int ni() throws IOException {\n        return Integer.parseInt(ns());\n    }\n\n    long nl() throws IOException {\n        return Long.parseLong(ns());\n    }\n\n    double nd() throws IOException {\n        return Double.parseDouble(ns());\n    }\n\n    String[] nsa(int n) throws IOException {\n        String[] res = new String[n];\n        for (int i = 0; i < n; i++) {\n            res[i] = ns();\n        }\n        return res;\n    }\n\n    int[] nia(int n) throws IOException {\n        int[] res = new int[n];\n        for (int i = 0; i < n; i++) {\n            res[i] = ni();\n        }\n        return res;\n    }\n\n    long[] nla(int n) throws IOException {\n        long[] res = new long[n];\n        for (int i = 0; i < n; i++) {\n            res[i] = nl();\n        }\n        return res;\n    }\n\n    public static void main(String[] args) throws IOException {\n        in = new BufferedReader(new InputStreamReader(System.in));\n        out = new PrintWriter(System.out);\n        tok = new StringTokenizer(\"\");\n        Main main = new Main();\n        main.solve();\n        out.close();\n    }\n}"
  },
  {
    "language": "Java",
    "code": "import java.io.OutputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.OutputStream;\nimport java.util.Arrays;\nimport java.io.IOException;\nimport java.io.UncheckedIOException;\nimport java.io.Closeable;\nimport java.io.Writer;\nimport java.io.OutputStreamWriter;\nimport java.io.InputStream;\n\n/**\n * Built using CHelper plug-in Actual solution is at the top\n * \n * @author daltao\n */\npublic class Main {\n    public static void main(String[] args) throws Exception {\n        Thread thread = new Thread(null, new TaskAdapter(), \"daltao\", 1 << 27);\n        thread.start();\n        thread.join();\n    }\n\n    static class TaskAdapter implements Runnable {\n        @Override\n        public void run() {\n            InputStream inputStream = System.in;\n            OutputStream outputStream = System.out;\n            FastInput in = new FastInput(inputStream);\n            FastOutput out = new FastOutput(outputStream);\n            TaskD solver = new TaskD();\n            solver.solve(1, in, out);\n            out.close();\n        }\n    }\n    static class TaskD {\n        public void solve(int testNumber, FastInput in, FastOutput out) {\n            int n = in.readInt();\n            int[] vals = new int[n + 1];\n            vals[1] = in.readInt();\n            for (int i = 2; i <= n; i++) {\n                char c = in.readChar();\n                vals[i] = in.readInt();\n                if (c == '-') {\n                    vals[i] = -vals[i];\n                }\n            }\n\n            long[][] dp = new long[n + 1][3];\n            ArrayUtils.deepFill(dp, (long) -1e18);\n            dp[0][0] = 0;\n            int[] sign = new int[] {1, -1, 1};\n            for (int i = 1; i <= n; i++) {\n                for (int j = 2; j >= 0; j--) {\n                    if (j < 2) {\n                        dp[i][j] = Math.max(dp[i][j], dp[i][j + 1]);\n                    }\n                    dp[i][j] = Math.max(dp[i][j], dp[i - 1][j] + sign[j] * vals[i]);\n                    if (vals[i] < 0 && j > 0) {\n                        dp[i][j] = Math.max(dp[i][j], dp[i - 1][j - 1] + sign[j - 1] * vals[i]);\n                    }\n                }\n            }\n\n            out.println(dp[n][0]);\n        }\n\n    }\n    static class ArrayUtils {\n        public static void deepFill(Object array, long val) {\n            if (!array.getClass().isArray()) {\n                throw new IllegalArgumentException();\n            }\n            if (array instanceof long[]) {\n                long[] longArray = (long[]) array;\n                Arrays.fill(longArray, val);\n            } else {\n                Object[] objArray = (Object[]) array;\n                for (Object obj : objArray) {\n                    deepFill(obj, val);\n                }\n            }\n        }\n\n    }\n    static class FastInput {\n        private final InputStream is;\n        private byte[] buf = new byte[1 << 13];\n        private int bufLen;\n        private int bufOffset;\n        private int next;\n\n        public FastInput(InputStream is) {\n            this.is = is;\n        }\n\n        private int read() {\n            while (bufLen == bufOffset) {\n                bufOffset = 0;\n                try {\n                    bufLen = is.read(buf);\n                } catch (IOException e) {\n                    throw new RuntimeException(e);\n                }\n                if (bufLen == -1) {\n                    return -1;\n                }\n            }\n            return buf[bufOffset++];\n        }\n\n        public void skipBlank() {\n            while (next >= 0 && next <= 32) {\n                next = read();\n            }\n        }\n\n        public int readInt() {\n            int sign = 1;\n\n            skipBlank();\n            if (next == '+' || next == '-') {\n                sign = next == '+' ? 1 : -1;\n                next = read();\n            }\n\n            int val = 0;\n            if (sign == 1) {\n                while (next >= '0' && next <= '9') {\n                    val = val * 10 + next - '0';\n                    next = read();\n                }\n            } else {\n                while (next >= '0' && next <= '9') {\n                    val = val * 10 - next + '0';\n                    next = read();\n                }\n            }\n\n            return val;\n        }\n\n        public char readChar() {\n            skipBlank();\n            char c = (char) next;\n            next = read();\n            return c;\n        }\n\n    }\n    static class FastOutput implements AutoCloseable, Closeable {\n        private StringBuilder cache = new StringBuilder(1 << 20);\n        private final Writer os;\n\n        public FastOutput(Writer os) {\n            this.os = os;\n        }\n\n        public FastOutput(OutputStream os) {\n            this(new OutputStreamWriter(os));\n        }\n\n        public FastOutput println(long c) {\n            cache.append(c).append('\\n');\n            return this;\n        }\n\n        public FastOutput flush() {\n            try {\n                os.append(cache);\n                cache.setLength(0);\n            } catch (IOException e) {\n                throw new UncheckedIOException(e);\n            }\n            return this;\n        }\n\n        public void close() {\n            flush();\n            try {\n                os.close();\n            } catch (IOException e) {\n                throw new UncheckedIOException(e);\n            }\n        }\n\n    }\n}\n\n"
  },
  {
    "language": "Java",
    "code": "import java.io.IOException;\nimport java.io.InputStream;\nimport java.io.PrintWriter;\nimport java.util.Arrays;\nimport java.util.NoSuchElementException;\nimport java.util.PrimitiveIterator;\nimport java.util.function.IntBinaryOperator;\nimport java.util.function.IntFunction;\nimport java.util.function.IntPredicate;\nimport java.util.function.IntUnaryOperator;\nimport java.util.function.LongUnaryOperator;\nimport static java.lang.Math.max;\n\n\n\npublic class Main {\n    public static void main(String[] args) {\n        StringBuilder out = new StringBuilder();\n        solve(out);\n        PrintWriter pw = new PrintWriter(System.out);\n        pw.println(out);\n        pw.flush();\n        pw.close();\n    }\n\n    public static void solve(StringBuilder out) {\n        int n = In.ni();\n        long[] a = new long[n];\n        long[] s = new long[n + 1];\n        boolean[] neg = new boolean[n];\n        IntArrayList nl = new IntArrayList();\n        long sum = 0;\n        long max = 0;\n        for (int i = 0; i < n; i++) {\n            if (i > 0) {\n                neg[i] = In.nc()[0] == '-';\n                if (neg[i]) {\n                    nl.add(i);\n                }\n            }\n            a[i] = In.nl();\n            s[i + 1] = s[i] + a[i];\n            sum += a[i];\n            max += neg[i] ? -a[i] : a[i];\n        }\n        int m = nl.size();\n        long[] ns = new long[m];\n        for (int i = 1; i < m; i++) {\n            ns[i] = ns[i - 1] + a[nl.get(i - 1)];\n        }\n        for (int i = 0; i < m - 1; i++) {\n            long v = sum - 2 * (s[nl.get(i + 1)] - s[nl.get(i)]);\n            v -= 2 * ns[i];\n            max = max(max, v);\n        }\n        out.append(max);\n    }\n}\n\n\n/**\n * @author https://atcoder.jp/users/suisen\n */\nfinal class In {\n    public static final FastScanner fsc = new FastScanner();\n    public static int ni() {return fsc.nextInt();}\n    public static int[] ni(final int n) {\n        final int[] a = new int[n];\n        for (int i = 0; i < n; i++) a[i] = fsc.nextInt();\n        return a;\n    }\n    public static int[] ni(final int n, final IntUnaryOperator f) {\n        final int[] a = new int[n];\n        for (int i = 0; i < n; i++) a[i] = f.applyAsInt(fsc.nextInt());\n        return a;\n    }\n    public static int[][] ni(final int n, final int m) {\n        final int[][] a = new int[n][m];\n        for (int i = 0; i < n; i++) a[i] = ni(m);\n        return a;\n    }\n    public static int[][] ni(final int n, final int m, final IntUnaryOperator f) {\n        final int[][] a = new int[n][m];\n        for (int i = 0; i < n; i++) a[i] = ni(m, f);\n        return a;\n    }\n    public static long nl() {return fsc.nextLong();}\n    public static long[] nl(final int n) {\n        final long[] a = new long[n];\n        for (int i = 0; i < n; i++) a[i] = fsc.nextLong();\n        return a;\n    }\n    public static long[] nl(final int n, final LongUnaryOperator f) {\n        final long[] a = new long[n];\n        for (int i = 0; i < n; i++) a[i] = f.applyAsLong(fsc.nextLong());\n        return a;\n    }\n    public static long[][] nl(final int n, final int m) {\n        final long[][] a = new long[n][m];\n        for (int i = 0; i < n; i++) a[i] = nl(m);\n        return a;\n    }\n    public static long[][] nl(final int n, final int m, final LongUnaryOperator f) {\n        final long[][] a = new long[n][m];\n        for (int i = 0; i < n; i++) a[i] = nl(m, f);\n        return a;\n    }\n    public static char[] nc() {return fsc.next().toCharArray();}\n    public static char[][] nc(final int n) {\n        final char[][] c = new char[n][];\n        for (int i = 0; i < n; i++) c[i] = nc();\n        return c;\n    }\n    public static double nd() {return fsc.nextDouble();}\n    public static double[] nd(final int n) {\n        final double[] a = new double[n];\n        for (int i = 0; i < n; i++) a[i] = fsc.nextDouble();\n        return a;\n    }\n    public static double[][] nd(final int n, final int m) {\n        final double[][] a = new double[n][m];\n        for (int i = 0; i < n; i++) a[i] = nd(m);\n        return a;\n    }\n    public static String ns() {return fsc.next();}\n    public static String[] ns(final int n) {\n        final String[] s = new String[n];\n        for (int i = 0; i < n; i++) s[i] = fsc.next();\n        return s;\n    }\n    public static boolean[][] grid(final int h, final int w, final char trueCharacter) {\n        final boolean[][] grid = new boolean[h][w];\n        for (int i = 0; i < h; i++) {\n            final char[] s = fsc.next().toCharArray();\n            for (int j = 0; j < w; j++) grid[i][j] = s[j] == trueCharacter;\n        }\n        return grid;\n    }\n}\n\n\nfinal class FastScanner {\n    private final InputStream in = System.in;\n    private final byte[] buffer = new byte[1024];\n    private int ptr = 0;\n    private int buflen = 0;\n    private boolean hasNextByte() {\n        if (ptr < buflen) return true;\n        ptr = 0;\n        try {buflen = in.read(buffer);}\n        catch (final IOException e) {e.printStackTrace();}\n        return buflen > 0;\n    }\n    private int readByte() {return hasNextByte() ? buffer[ptr++] : -1;}\n    public boolean hasNext() {\n        while (hasNextByte() && !(33 <= buffer[ptr] && buffer[ptr] <= 126)) ptr++;\n        return hasNextByte();\n    }\n    public String next() {\n        if (!hasNext()) throw new NoSuchElementException();\n        final StringBuilder sb = new StringBuilder();\n        int b = readByte();\n        while (33 <= b && b <= 126) {sb.appendCodePoint(b); b = readByte();}\n        return sb.toString();\n    }\n    public long nextLong() {\n        if (!hasNext()) throw new NoSuchElementException();\n        long n = 0;\n        boolean minus = false;\n        int b = readByte();\n        if (b == '-') {minus = true; b = readByte();}\n        if (b < '0' || '9' < b) throw new NumberFormatException();\n        for (; ; b = readByte()) {\n            if ('0' <= b && b <= '9') n = n * 10 + b - '0';\n            else if (b == -1 || !(33 <= b && b <= 126)) return minus ? -n : n;\n            else throw new NumberFormatException();\n        }\n    }\n    public int nextInt() {return Math.toIntExact(nextLong());}\n    public double nextDouble() {return Double.parseDouble(next());}\n}\n\n\n\n/**\n * @author https://atcoder.jp/users/suisen\n */\nfinal class IntArrayList implements Iterable<Integer> {\n    private int[] a;\n    private int tail = 0;\n    private static final int DEFAULT_SIZE = 64;\n    public IntArrayList(final int capacity) {this.a = new int[Math.max(1, capacity)];}\n    public IntArrayList() {this(DEFAULT_SIZE);}\n    public void add(final int v) {\n        if (tail == a.length) grow();\n        a[tail++] = v;\n    }\n    public int removeLast() {return a[tail--];}\n    public int get(final int i) {\n        if (i >= tail) throw new IndexOutOfBoundsException(\"Index \" + i + \" out of bounds for length \" + size());\n        return a[i];\n    }\n    public void set(final int i, final int v) {\n        if (i >= tail) throw new IndexOutOfBoundsException(\"Index \" + i + \" out of bounds for length \" + size());\n        a[i] = v;\n    }\n    private void grow() {\n        final int[] b = new int[a.length << 1];\n        System.arraycopy(a, 0, b, 0, a.length);\n        a = b;\n    }\n    public int size() {return tail;}\n    public void reverse(final int begin, final int end) {IntArrays.reverse(a, begin, end);}\n    public void reverse() {IntArrays.reverse(a, 0, tail);}\n    public int[] toArray() {\n        final int[] ret = new int[tail];\n        System.arraycopy(a, 0, ret, 0, tail);\n        return ret;\n    }\n    public boolean addIf(final int v, final IntPredicate p) {\n        if (p.test(v)) {add(v); return true;}\n        return false;\n    }\n    public void clear() {tail = 0;}\n    public PrimitiveIterator.OfInt iterator() {return new IntArrayListIterator();}\n    private class IntArrayListIterator implements PrimitiveIterator.OfInt {\n        private int i = 0;\n        public boolean hasNext() {return i < tail;}\n        public int nextInt() {return a[i++];}\n    }\n}\n\n\n/**\n * @author https://atcoder.jp/users/suisen\n * \n * 1. DESTRUCTIVE methods for int arrays.\n * 2. methods that receives arrays and return some results (except for int arrays).\n */\nfinal class IntArrays {\n    private IntArrays(){}\n    public static void swap(final int[] a, final int u, final int v) {\n        final int tmp = a[u]; a[u] = a[v]; a[v] = tmp;\n    }\n    public static void reverse(final int[] a, final int begin, final int end) {\n        for (int i = begin; i < begin + (end - begin) / 2; i++) swap(a, i, begin + end - i - 1);\n    }\n    public static void reverse(final int[] a) {reverse(a, 0, a.length);}\n    public static void sortDescending(final int[] a) {Arrays.sort(a); reverse(a);}\n    public static int reduce(final int[] a, final IntBinaryOperator op) {\n        int ret = a[0]; for (int i = 1; i < a.length; i++) ret = op.applyAsInt(ret, a[i]);\n        return ret;\n    }\n    public static void map(final int[] a, final IntUnaryOperator op) {Arrays.setAll(a, i -> op.applyAsInt(a[i]));}\n    public static int filter(final int[] src, final int[] dst, final IntPredicate p) {\n        int idx = 0;\n        for (final int e : src) if (p.test(e)) dst[idx++] = e;\n        return idx;\n    }\n    public static int filterIndex(final int[] dst, final int beginIndex, final int endIndex, final IntPredicate p) {\n        int idx = 0;\n        for (int i = beginIndex; i < endIndex; i++) if (p.test(i)) dst[idx++] = i;\n        return idx;\n    }\n    public static int filterIndex(final int dst[], final int endIndex, final IntPredicate p) {\n        return filterIndex(dst, 0, endIndex, p);\n    }\n    public static void accumulate(final int[] a, final IntBinaryOperator op) {\n        for (int i = 1; i < a.length; i++) a[i] = op.applyAsInt(a[i - 1], a[i]);\n    }\n    public static void accumulate(final int[] a) {\n        for (int i = 1; i < a.length; i++) a[i] += a[i - 1];\n    }\n    public static void permute(int[] a, int[] p) {\n        int n = p.length;\n        boolean[] settled = new boolean[n];\n        for (int i = 0; i < n; i++) {\n            for (int j = i; !settled[j]; j = p[j]) {\n                if (p[j] == i) {\n                    settled[j] = true;\n                    break;\n                }\n                swap(a, j, p[j]);\n                settled[j] = true;\n            }\n        }\n    }\n    public static int compare(final int[] a, final int[] b) {\n        for (int i = 0; i < a.length; i++) {\n            if (i >= b.length) return -1;\n            if (a[i] > b[i]) return 1;\n            if (a[i] < b[i]) return -1;\n        }\n        return a.length < b.length ? 1 : 0;\n    }\n    public static boolean equals(final int[] a, final int[] b) {return compare(a, b) == 0;}\n    public static String join(final int[] a, final String sep) {\n        final StringBuilder sb = new StringBuilder();\n        for (int i = 0; i < a.length; i++) {\n            sb.append(a[i]);\n            if (i < a.length - 1) sb.append(sep);\n        }\n        return sb.toString();\n    }\n    public static String joinWithPrefixAndSuffix(final int[] a, final IntFunction<String> idxToPre, final IntFunction<String> idxToSuf, final String sep) {\n        final StringBuilder sb = new StringBuilder();\n        for (int i = 0; i < a.length; i++) {\n            sb.append(idxToPre.apply(i)).append(a[i]).append(idxToSuf.apply(i));\n            if (i < a.length - 1) sb.append(sep);\n        }\n        return sb.toString();\n    }\n}\n"
  },
  {
    "language": "Java",
    "code": "import java.io.*;\nimport java.math.*;\nimport java.util.*;\nimport java.util.stream.*;\n\npublic class mm_martian_ac {\n\n\tstatic final long INF = Long.MAX_VALUE / 10;\n\t\n\tvoid submit() {\n\t\tint n = nextInt();\n\t\tlong[] a = new long[n];\n\t\tboolean[] plus = new boolean[n - 1];\n\t\tfor (int i = 0; i < n; i++) {\n\t\t\ta[i] = nextInt();\n\t\t\tif (i != n - 1) {\n\t\t\t\tplus[i] = nextToken().equals(\"+\");\n\t\t\t}\n\t\t}\n\t\t\n\t\tlong[] dp = new long[C];\n\t\tArrays.fill(dp, -INF);\n\t\tdp[0] = a[0];\n\t\t\n\t\tfor (int i = 1; i < n; i++) {\n\t\t\tlong[] nxt = new long[C];\n\t\t\tArrays.fill(nxt, -INF);\n\t\t\tboolean sgn = plus[i - 1];\n\t\t\tlong x = a[i];\n\t\t\t\n\t\t\tfor (int was = 0; was < C; was++) {\n\t\t\t\tint nowMax = Math.min(was + (sgn ? 0 : 1), C - 1);\n\t\t\t\tlong delta = (nowMax % 2 == 0) ? x : -x;\n\t\t\t\tfor (int j = 0; j <= nowMax; j++) {\n\t\t\t\t\tnxt[j] = Math.max(nxt[j], dp[was] + delta);\n\t\t\t\t}\n\t\t\t}\n\t\t\tdp = nxt;\n\t\t}\n\t\t\n\t\tout.println(Arrays.stream(dp).max().getAsLong());\n\t}\n\n\tvoid test() {\n\n\t}\n\n\tvoid stress() {\n\t\tfor (int tst = 0;; tst++) {\n\t\t\tif (false) {\n\t\t\t\tthrow new AssertionError();\n\t\t\t}\n\t\t\tSystem.err.println(tst);\n\t\t}\n\t}\n\n\tmm_martian_ac() throws IOException {\n\t\tis = System.in;\n\t\tout = new PrintWriter(System.out);\n\t\tsubmit();\n\t\t// stress();\n\t\t// test();\n\t\tout.close();\n\t}\n\n\tstatic final Random rng = new Random();\n\tstatic final int C = 5;\n\n\tstatic int rand(int l, int r) {\n\t\treturn l + rng.nextInt(r - l + 1);\n\t}\n\n\tpublic static void main(String[] args) throws IOException {\n\t\tnew mm_martian_ac();\n\t}\n\n\tprivate InputStream is;\n\tPrintWriter out;\n\n\tprivate byte[] buf = new byte[1 << 14];\n\tprivate int bufSz = 0, bufPtr = 0;\n\n\tprivate int readByte() {\n\t\tif (bufSz == -1)\n\t\t\tthrow new RuntimeException(\"Reading past EOF\");\n\t\tif (bufPtr >= bufSz) {\n\t\t\tbufPtr = 0;\n\t\t\ttry {\n\t\t\t\tbufSz = is.read(buf);\n\t\t\t} catch (IOException e) {\n\t\t\t\tthrow new RuntimeException(e);\n\t\t\t}\n\t\t\tif (bufSz <= 0)\n\t\t\t\treturn -1;\n\t\t}\n\t\treturn buf[bufPtr++];\n\t}\n\n\tprivate boolean isTrash(int c) {\n\t\treturn c < 33 || c > 126;\n\t}\n\n\tprivate int skip() {\n\t\tint b;\n\t\twhile ((b = readByte()) != -1 && isTrash(b))\n\t\t\t;\n\t\treturn b;\n\t}\n\n\tString nextToken() {\n\t\tint b = skip();\n\t\tStringBuilder sb = new StringBuilder();\n\t\twhile (!isTrash(b)) {\n\t\t\tsb.appendCodePoint(b);\n\t\t\tb = readByte();\n\t\t}\n\t\treturn sb.toString();\n\t}\n\n\tString nextString() {\n\t\tint b = readByte();\n\t\tStringBuilder sb = new StringBuilder();\n\t\twhile (!isTrash(b) || b == ' ') {\n\t\t\tsb.appendCodePoint(b);\n\t\t\tb = readByte();\n\t\t}\n\t\treturn sb.toString();\n\t}\n\n\tdouble nextDouble() {\n\t\treturn Double.parseDouble(nextToken());\n\t}\n\n\tchar nextChar() {\n\t\treturn (char) skip();\n\t}\n\n\tint nextInt() {\n\t\tint ret = 0;\n\t\tint b = skip();\n\t\tif (b != '-' && (b < '0' || b > '9')) {\n\t\t\tthrow new InputMismatchException();\n\t\t}\n\t\tboolean neg = false;\n\t\tif (b == '-') {\n\t\t\tneg = true;\n\t\t\tb = readByte();\n\t\t}\n\t\twhile (true) {\n\t\t\tif (b >= '0' && b <= '9') {\n\t\t\t\tret = ret * 10 + (b - '0');\n\t\t\t} else {\n\t\t\t\tif (b != -1 && !isTrash(b)) {\n\t\t\t\t\tthrow new InputMismatchException();\n\t\t\t\t}\n\t\t\t\treturn neg ? -ret : ret;\n\t\t\t}\n\t\t\tb = readByte();\n\t\t}\n\t}\n\n\tlong nextLong() {\n\t\tlong ret = 0;\n\t\tint b = skip();\n\t\tif (b != '-' && (b < '0' || b > '9')) {\n\t\t\tthrow new InputMismatchException();\n\t\t}\n\t\tboolean neg = false;\n\t\tif (b == '-') {\n\t\t\tneg = true;\n\t\t\tb = readByte();\n\t\t}\n\t\twhile (true) {\n\t\t\tif (b >= '0' && b <= '9') {\n\t\t\t\tret = ret * 10 + (b - '0');\n\t\t\t} else {\n\t\t\t\tif (b != -1 && !isTrash(b)) {\n\t\t\t\t\tthrow new InputMismatchException();\n\t\t\t\t}\n\t\t\t\treturn neg ? -ret : ret;\n\t\t\t}\n\t\t\tb = readByte();\n\t\t}\n\t}\n}\n"
  },
  {
    "language": "Java",
    "code": "\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.util.Arrays;\nimport java.util.NoSuchElementException;\n\npublic class Main {\n\n\tpublic static void main(String[] args) {\n\t\tFastScanner sc = new FastScanner();\n\t\tint N = sc.nextInt();\n\n\t\tlong[] A = new long[N + 1];\n\t\tlong[] B = new long[N + 1];\n\t\tboolean[] p = new boolean[N + 1];\n\t\tp[1] = true;\n\n\t\tfor (int i = 1; i <= N; i++) {\n\t\t\tif (i > 1) {\n\t\t\t\tp[i] = sc.next().equals(\"+\");\n\t\t\t}\n\t\t\tA[i] = sc.nextLong();\n\n\t\t\tB[i] = A[i] * (p[i] ? 1 : -1);\n\t\t}\n\n\t\tlong[][] dp = new long[N + 1][3];\n\t\tfor (long[] v : dp) Arrays.fill(v, Long.MIN_VALUE / 2);\n\t\tdp[0][0] = 0;\n\n\t\tfor (int i = 0; i < N; i++) {\n\t\t\tif (p[i + 1]) {\n\t\t\t\tdp[i + 1][0] = Math.max(dp[i + 1][0], dp[i][0] + A[i + 1]);\n\t\t\t\tdp[i + 1][0] = Math.max(dp[i + 1][0], dp[i][1] + A[i + 1]);\n\t\t\t\tdp[i + 1][0] = Math.max(dp[i + 1][0], dp[i][2] + A[i + 1]);\n\n\t\t\t\tdp[i + 1][1] = Math.max(dp[i + 1][1], dp[i][1] - A[i + 1]);\n\t\t\t\tdp[i + 1][1] = Math.max(dp[i + 1][1], dp[i][2] - A[i + 1]);\n\n\t\t\t\tdp[i + 1][2] = Math.max(dp[i + 1][2], dp[i][2] + A[i + 1]);\n\n\t\t\t} else {\n\t\t\t\tdp[i + 1][0] = Math.max(dp[i + 1][0], dp[i][0] - A[i + 1]);\n\t\t\t\tdp[i + 1][0] = Math.max(dp[i + 1][0], dp[i][1] - A[i + 1]);\n\t\t\t\tdp[i + 1][0] = Math.max(dp[i + 1][0], dp[i][2] - A[i + 1]);\n\n\t\t\t\tdp[i + 1][1] = Math.max(dp[i + 1][1], dp[i][0] - A[i + 1]);\n\t\t\t\tdp[i + 1][1] = Math.max(dp[i + 1][1], dp[i][1] + A[i + 1]);\n\t\t\t\tdp[i + 1][1] = Math.max(dp[i + 1][1], dp[i][2] + A[i + 1]);\n\n\t\t\t\tdp[i + 1][2] = Math.max(dp[i + 1][2], dp[i][1] + A[i + 1]);\n\t\t\t\tdp[i + 1][2] = Math.max(dp[i + 1][2], dp[i][2] - A[i + 1]);\n\t\t\t}\n\t\t}\n\t\tlong max = Long.MIN_VALUE / 2;\n\t\tmax = Math.max(dp[N][0], max);\n\t\tmax = Math.max(dp[N][1], max);\n\t\tmax = Math.max(dp[N][2], max);\n\n\t\tSystem.out.println(max);\n\t}\n}\n\nclass FastScanner {\n\tpublic static String debug = null;\n\n\tprivate final InputStream in = System.in;\n\tprivate int ptr = 0;\n\tprivate int buflen = 0;\n\tprivate byte[] buffer = new byte[1024];\n\tprivate boolean eos = false;\n\n\tprivate boolean hasNextByte() {\n\t\tif (ptr < buflen) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\tptr = 0;\n\t\t\ttry {\n\t\t\t\tif (debug != null) {\n\t\t\t\t\tbuflen = debug.length();\n\t\t\t\t\tbuffer = debug.getBytes();\n\t\t\t\t\tdebug = \"\";\n\t\t\t\t\teos = true;\n\t\t\t\t} else {\n\t\t\t\t\tbuflen = in.read(buffer);\n\t\t\t\t}\n\t\t\t} catch (IOException e) {\n\t\t\t\te.printStackTrace();\n\t\t\t}\n\t\t\tif (buflen < 0) {\n\t\t\t\teos = true;\n\t\t\t\treturn false;\n\t\t\t} else if (buflen == 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\tprivate int readByte() {\n\t\tif (hasNextByte())\n\t\t\treturn buffer[ptr++];\n\t\telse\n\t\t\treturn -1;\n\t}\n\n\tprivate static boolean isPrintableChar(int c) {\n\t\treturn 33 <= c && c <= 126;\n\t}\n\n\tprivate void skipUnprintable() {\n\t\twhile (hasNextByte() && !isPrintableChar(buffer[ptr]))\n\t\t\tptr++;\n\t}\n\n\tpublic boolean isEOS() {\n\t\treturn this.eos;\n\t}\n\n\tpublic boolean hasNext() {\n\t\tskipUnprintable();\n\t\treturn hasNextByte();\n\t}\n\n\tpublic String next() {\n\t\tif (!hasNext())\n\t\t\tthrow new NoSuchElementException();\n\t\tStringBuilder sb = new StringBuilder();\n\t\tint b = readByte();\n\t\twhile (isPrintableChar(b)) {\n\t\t\tsb.appendCodePoint(b);\n\t\t\tb = readByte();\n\t\t}\n\t\treturn sb.toString();\n\t}\n\n\tpublic long nextLong() {\n\t\tif (!hasNext())\n\t\t\tthrow new NoSuchElementException();\n\t\tlong n = 0;\n\t\tboolean minus = false;\n\t\tint b = readByte();\n\t\tif (b == '-') {\n\t\t\tminus = true;\n\t\t\tb = readByte();\n\t\t}\n\t\tif (b < '0' || '9' < b) {\n\t\t\tthrow new NumberFormatException();\n\t\t}\n\t\twhile (true) {\n\t\t\tif ('0' <= b && b <= '9') {\n\t\t\t\tn *= 10;\n\t\t\t\tn += b - '0';\n\t\t\t} else if (b == -1 || !isPrintableChar(b)) {\n\t\t\t\treturn minus ? -n : n;\n\t\t\t} else {\n\t\t\t\tthrow new NumberFormatException();\n\t\t\t}\n\t\t\tb = readByte();\n\t\t}\n\t}\n\n\tpublic int nextInt() {\n\t\treturn (int) nextLong();\n\t}\n\n\tpublic long[] nextLongList(int n) {\n\t\treturn nextLongTable(1, n)[0];\n\t}\n\n\tpublic int[] nextIntList(int n) {\n\t\treturn nextIntTable(1, n)[0];\n\t}\n\n\tpublic long[][] nextLongTable(int n, int m) {\n\t\tlong[][] ret = new long[n][m];\n\t\tfor (int i = 0; i < n; i++) {\n\t\t\tfor (int j = 0; j < m; j++) {\n\t\t\t\tret[i][j] = nextLong();\n\t\t\t}\n\t\t}\n\t\treturn ret;\n\t}\n\n\tpublic int[][] nextIntTable(int n, int m) {\n\t\tint[][] ret = new int[n][m];\n\t\tfor (int i = 0; i < n; i++) {\n\t\t\tfor (int j = 0; j < m; j++) {\n\t\t\t\tret[i][j] = nextInt();\n\t\t\t}\n\t\t}\n\t\treturn ret;\n\t}\n}"
  },
  {
    "language": "C#",
    "code": "using System;\nusing System.Collections.Generic;\n\npublic class CSharp{\n    public static void Main(){\n        Kyopuro chokudai = new Kyopuro();\n\t    chokudai.AtCoder();\n\t}\n}\n\npublic class Kyopuro{\n    \n    int n;\n    int[] a;\n    long[] sum;\n    List<long> b;\n    long ans;\n    \n    public void AtCoder(){\n        n = int.Parse(Console.ReadLine());\n        a = new int[n];\n        string[] s = Console.ReadLine().Split(' ');\n        ans = long.Parse(s[0]);\n        int sign;\n        for(int i=1; i<n; i++){\n            sign = 1;\n            if(s[i*2-1] == \"-\") sign = -1;\n            a[i] = int.Parse(s[i*2]) * sign;\n        }\n        \n        long tmp;\n        b = new List<long>();\n        int c = 1;\n        while(c<n && a[c]>0) ans += a[c++];\n        if(c<n) ans += a[c++];\n        while(c<n){\n            tmp = 0;\n            if(a[c]<0){\n                //while(c<n && a[c]<0) tmp -= a[c++];\n                //while(c<n && a[c]>0) tmp += a[c++];\n                while(c<n) tmp += Math.Abs(a[c++]);\n                ans += tmp;\n                b.Add(0);\n            } else {\n                while(c<n && a[c]>0) tmp += a[c++];\n                b.Add(tmp);\n            }\n            if(c<n) b.Add(a[c++]);\n            else b.Add(0);\n        }\n        \n        c = 0;\n        while(c + 1 < b.Count){\n            tmp = 0;\n            tmp += b[c++];\n            tmp += b[c++];\n            ans += Math.Abs(tmp);\n        }\n        c = 1;\n        tmp = 0;\n        if(b.Count > 0){\n            sum = new long[b.Count];\n            sum[0] = b[0];\n            tmp = b[0];\n        }\n        for(int i=1; i<b.Count; i++){\n            sum[i] = sum[i-1] + Math.Abs(b[i]);\n        }\n        while(c + 1 < b.Count){\n            if(b[c] + b[c+1] < 0){\n                ans = Math.Max(ans, tmp + b[c] + b[c+1] + sum[b.Count - 1] - sum[c+1]);\n            }\n            tmp = tmp - b[c-1] + Math.Abs(b[c-1] + b[c]) + b[c+1];\n            c = c + 2;\n        }\n        c = 3;\n        if(b.Count > 1) tmp = b[0];\n        while(c < b.Count){\n            if(b[c] + b[c-1] < 0){\n                ans = Math.Max(ans, tmp - b[c] - b[c-1] + b[c-2] + sum[b.Count - 1] - sum[c]);\n            }\n            tmp = tmp - b[c-3] + Math.Abs(b[c-3] + b[c-2]) + b[c-1];\n            c = c + 2;\n        }\n        \n        Console.WriteLine(ans);\n    }\n    \n    public static void DebugWL(object x){ System.Diagnostics.Debug.WriteLine(x); }\n}"
  },
  {
    "language": "C#",
    "code": "//author: camypaper\nusing System;\nusing System.Linq;\nusing System.Collections.Generic;\nusing System.Text.RegularExpressions;\nusing Debug = System.Diagnostics.Debug;\nusing SB = System.Text.StringBuilder;\nusing System.Numerics;\nusing Point = System.Numerics.Complex;\nusing static System.Math;\nusing Number = System.Int64;\nusing System.Runtime.CompilerServices;\n\nnamespace Program {\n    public class Solver {\n        Random rnd = new Random(0);\n        public void Solve() {\n            var n = rl;\n            var a = new long[n - 1];\n            var op = new string[n - 1];\n            var ans = rl;\n            for (int i = 0; i < n - 1; i++) {\n                op[i] = rs;\n                a[i] = rl;\n            }\n            var dp = new long[3];\n            dp[1] = -INF;\n            dp[2] = -INF;\n            for (int i = 0; i < n - 1; i++) {\n                dp[1] = Max(dp[1], dp[2]);\n                dp[0] = Max(dp[0], dp[1]);\n                Debug.WriteLine(dp.AsJoinedString());\n                var next = new long[3] { -INF, -INF, -INF };\n                var v = a[i];\n\n                if (op[i] == \"-\") {\n                    v *= -1;\n                    next[0] = dp[0] + v;\n                    next[1] = dp[1] - v;\n                    next[2] = dp[2] + v;\n                    next[1] = Max(next[1], dp[0] + v);\n                    next[2] = Max(next[2], dp[1] - v);\n                }\n                else {\n                    next[0] = dp[0] + v;\n                    next[1] = dp[1] - v;\n                    next[2] = dp[2] + v;\n                }\n                dp = next;\n            }\n            Console.WriteLine(ans + dp.Max());\n\n        }\n        const long INF = 1L << 60;\n        int ri => sc.Integer();\n        long rl => sc.Long();\n        double rd => sc.Double();\n        string rs => sc.Scan();\n        public IO.StreamScanner sc = new IO.StreamScanner(Console.OpenStandardInput());\n\n        static IEnumerable<int> Rep(int n) => Enumerable.Range(0, n);\n        static IEnumerable<int> RRep(int n) => Enumerable.Range(0, n).Reverse();\n        static T[] Enumerate<T>(int n, Func<int, T> f) {\n            var a = new T[n];\n            for (int i = 0; i < a.Length; ++i) a[i] = f(i);\n            return a;\n        }\n        static public void Swap<T>(ref T a, ref T b) { var tmp = a; a = b; b = tmp; }\n    }\n}\n\n#region main\nstatic class Ex {\n    static public string AsString(this IEnumerable<char> ie) { return new string(ie.ToArray()); }\n    static public string AsJoinedString<T>(this IEnumerable<T> ie, string st = \" \") {\n        return string.Join(st, ie);\n    }\n    static public void Main() {\n        Console.SetOut(new Program.IO.Printer(Console.OpenStandardOutput()) { AutoFlush = false });\n        var solver = new Program.Solver();\n        solver.Solve();\n        Console.Out.Flush();\n    }\n}\n#endregion\n#region Ex\nnamespace Program.IO {\n    using System.IO;\n    using System.Text;\n    using System.Globalization;\n\n    public class Printer : StreamWriter {\n        public override IFormatProvider FormatProvider => CultureInfo.InvariantCulture;\n        public Printer(Stream stream) : base(stream, new UTF8Encoding(false, true)) { }\n    }\n\n    public class StreamScanner {\n        public StreamScanner(Stream stream) { str = stream; }\n\n        public readonly Stream str;\n        private readonly byte[] buf = new byte[1024];\n        private int len, ptr;\n        public bool isEof = false;\n\n        private byte read() {\n            if (isEof) return 0;\n            if (ptr >= len) {\n                ptr = 0;\n                if ((len = str.Read(buf, 0, 1024)) <= 0) {\n                    isEof = true;\n                    return 0;\n                }\n            }\n            return buf[ptr++];\n        }\n\n        public char Char() {\n            byte b = 0;\n            do b = read(); while ((b < 33 || 126 < b) && !isEof);\n            return (char)b;\n        }\n        public string Scan() {\n            var sb = new StringBuilder();\n            for (var b = Char(); b >= 33 && b <= 126; b = (char)read()) sb.Append(b);\n            return sb.ToString();\n        }\n        public string ScanLine() {\n            var sb = new StringBuilder();\n            for (var b = Char(); b != '\\n' && b != 0; b = (char)read()) if (b != '\\r') sb.Append(b);\n            return sb.ToString();\n        }\n        public long Long() { return isEof ? long.MinValue : long.Parse(Scan()); }\n        public int Integer() { return isEof ? int.MinValue : int.Parse(Scan()); }\n        public double Double() { return isEof ? double.NaN : double.Parse(Scan(), CultureInfo.InvariantCulture); }\n    }\n}\n\n#endregion\n"
  },
  {
    "language": "C#",
    "code": "using System;\nusing System.Collections.Generic;\n\npublic class CSharp{\n    public static void Main(){\n        Kyopuro chokudai = new Kyopuro();\n\t    chokudai.AtCoder();\n\t}\n}\n\npublic class Kyopuro{\n    \n    int n;\n    int[] a;\n    long[] sum;\n    List<long> b;\n    long ans;\n    \n    public void AtCoder(){\n        n = int.Parse(Console.ReadLine());\n        a = new int[n];\n        string[] s = Console.ReadLine().Split(' ');\n        ans = long.Parse(s[0]);\n        int sign;\n        for(int i=1; i<n; i++){\n            sign = 1;\n            if(s[i*2-1] == \"-\") sign = -1;\n            a[i] = int.Parse(s[i*2]) * sign;\n        }\n        \n        long tmp;\n        b = new List<long>();\n        int c = 1;\n        while(c<n && a[c]>0) ans += a[c++];\n        if(c<n) ans += a[c++];\n        while(c<n){\n            tmp = 0;\n            if(a[c]<0){\n                //while(c<n && a[c]<0) tmp -= a[c++];\n                //while(c<n && a[c]>0) tmp += a[c++];\n                while(c<n) tmp += Math.Abs(a[c++]);\n                ans += tmp;\n                b.Add(0);\n            } else {\n                while(c<n && a[c]>0) tmp += a[c++];\n                b.Add(tmp);\n            }\n            if(c<n) b.Add(a[c++]);\n            else b.Add(0);\n        }\n        \n        c = 0;\n        while(c + 1 < b.Count){\n            tmp = 0;\n            tmp += b[c++];\n            tmp += b[c++];\n            ans += Math.Abs(tmp);\n        }\n        c = 1;\n        tmp = 0;\n        if(b.Count > 0){\n            sum = new long[b.Count];\n            sum[0] = b[0];\n            tmp = b[0];\n        }\n        for(int i=1; i<b.Count; i++){\n            sum[i] = sum[i-1] + Math.Abs(b[i]);\n        }\n        while(c + 1 < b.Count){\n            if(b[c] + b[c+1] < 0){\n                ans = Math.Max(ans, tmp + b[c] + b[c+1] + sum[b.Count - 1] - sum[c+1]);\n            }\n            tmp = tmp - b[c-1] + Math.Abs(b[c-1] + b[c]);\n            c = c + 2;\n        }\n        c = 3;\n        if(b.Count > 1) tmp = b[0];\n        while(c + 1 < b.Count){\n            if(b[c] + b[c-1] < 0){\n                ans = Math.Max(ans, tmp - b[c] - b[c-1] + b[c-2] + sum[b.Count - 1] - sum[c]);\n            }\n            tmp = tmp + Math.Abs(b[c-1] + b[c-2]);\n            c = c + 2;\n        }\n        \n        Console.WriteLine(ans);\n    }\n    \n    public static void DebugWL(object x){ System.Diagnostics.Debug.WriteLine(x); }\n}"
  },
  {
    "language": "C#",
    "code": "using System;\nusing System.Collections.Generic;\n\npublic class CSharp{\n    public static void Main(){\n        Kyopuro chokudai = new Kyopuro();\n\t    chokudai.AtCoder();\n\t}\n}\n\npublic class Kyopuro{\n    \n    int n;\n    int[] a;\n    long[] sum;\n    List<long> b;\n    long ans;\n    \n    public void AtCoder(){\n        n = int.Parse(Console.ReadLine());\n        a = new int[n];\n        string[] s = Console.ReadLine().Split(' ');\n        ans = long.Parse(s[0]);\n        int sign;\n        for(int i=1; i<n; i++){\n            sign = 1;\n            if(s[i*2-1] == \"-\") sign = -1;\n            a[i] = int.Parse(s[i*2]) * sign;\n        }\n        \n        long tmp;\n        b = new List<long>();\n        int c = 1;\n        while(c<n && a[c]>0) ans += a[c++];\n        if(c<n) ans += a[c++];\n        while(c<n){\n            tmp = 0;\n            if(a[c]<0){\n                //while(c<n && a[c]<0) tmp -= a[c++];\n                //while(c<n && a[c]>0) tmp += a[c++];\n                while(c<n) tmp += Math.Abs(a[c++]);\n                ans += tmp;\n                b.Add(0);\n            } else {\n                while(c<n && a[c]>0) tmp += a[c++];\n                b.Add(tmp);\n            }\n            if(c<n) b.Add(a[c++]);\n            else b.Add(0);\n        }\n        \n        c = 0;\n        while(c + 1 < b.Count){\n            tmp = 0;\n            tmp += b[c++];\n            tmp += b[c++];\n            ans += Math.Abs(tmp);\n        }\n        c = 1;\n        tmp = 0;\n        if(b.Count > 0){\n            sum = new long[b.Count];\n            sum[0] = b[0];\n            tmp = b[0];\n        }\n        for(int i=1; i<b.Count; i++){\n            sum[i] = sum[i-1] + Math.Abs(b[i]);\n        }\n        while(c + 1 < b.Count){\n            if(b[c] + b[c+1] < 0){\n                ans = Math.Max(ans, tmp + b[c] + b[c+1] + sum[b.Count - 1] - sum[c+1]);\n            }\n            tmp = tmp - b[c-1] + Math.Abs(b[c-1] + b[c]);\n            c = c + 2;\n        }\n        c = 3;\n        if(b.Count > 1) tmp = b[0];\n        while(c < b.Count){\n            if(b[c] + b[c-1] < 0){\n                ans = Math.Max(ans, tmp - b[c] - b[c-1] + b[c-2] + sum[b.Count - 1] - sum[c]);\n            }\n            tmp = tmp - b[c-3] + Math.Abs(b[c-3] + b[c-2]) + b[c-1];\n            c = c + 2;\n        }\n        \n        Console.WriteLine(ans);\n    }\n    \n    public static void DebugWL(object x){ System.Diagnostics.Debug.WriteLine(x); }\n}"
  },
  {
    "language": "C#",
    "code": "using System;\nusing System.Text;\nusing System.Collections.Generic;\nclass Solve{\n    public Solve(){}\n    StringBuilder sb;\n    public static int Main(){\n        new Solve().Run();\n        return 0;\n    }\n    void Run(){\n        sb = new StringBuilder();\n        Calc();\n        Console.Write(sb.ToString());\n    }\n    void Calc(){\n        int N = int.Parse(Console.ReadLine());\n        long[] A = new long[N];\n        bool[] opr = new bool[N-1];\n        string[] str = Console.ReadLine().Split(' ');\n        for(int i=0;i<2*N-1;i++){\n            if(i%2 == 0){\n                A[i/2] = int.Parse(str[i]);\n            }\n            else{\n                opr[i/2] = str[i] == \"-\";\n            }\n        }\n        long[] sum = new long[N];\n        sum[0] = A[0];\n        for(int i=1;i<N;i++){\n            sum[i] = sum[i-1] + A[i];\n        }\n        long max = 0;\n        long minus = 0;\n        for(int i=0;i<N-1;i++){\n            if(!opr[i]){\n                continue;\n            }\n            long count = 0;\n            minus += A[i+1];\n            i++;\n            for(;i<N-1 && !opr[i];i++){\n                count += A[i+1];\n            }\n            max = Math.Max(max,sum[N-1]-2*minus-2*count);\n            i--;\n        }\n        sb.Append(max+\"\\n\");\n    }\n}"
  },
  {
    "language": "C#",
    "code": "using System;\nusing System.Collections.Generic;\n\npublic class CSharp{\n    public static void Main(){\n        Kyopuro chokudai = new Kyopuro();\n\t    chokudai.AtCoder();\n\t}\n}\n\npublic class Kyopuro{\n    \n    int n;\n    int[] a;\n    long[] sum;\n    List<long> b;\n    long ans;\n    \n    public void AtCoder(){\n        n = int.Parse(Console.ReadLine());\n        a = new int[n];\n        string[] s = Console.ReadLine().Split(' ');\n        ans = long.Parse(s[0]);\n        int sign;\n        for(int i=1; i<n; i++){\n            sign = 1;\n            if(s[i*2-1] == \"-\") sign = -1;\n            a[i] = int.Parse(s[i*2]) * sign;\n        }\n        \n        long tmp;\n        b = new List<long>();\n        int c = 1;\n        while(c<n && a[c]>0) ans += a[c++];\n        if(c<n) ans += a[c++];\n        while(c<n){\n            tmp = 0;\n            if(a[c]<0){\n                //while(c<n && a[c]<0) tmp -= a[c++];\n                //while(c<n && a[c]>0) tmp += a[c++];\n                while(c<n) tmp += Math.Abs(a[c++]);\n                ans += tmp;\n                b.Add(0);\n            } else {\n                while(c<n && a[c]>0) tmp += a[c++];\n                b.Add(tmp);\n            }\n            if(c<n) b.Add(a[c++]);\n            else b.Add(0);\n        }\n        \n        sum = new long[b.Count];\n        sum[0] = b[0];\n        for(int i=1; i<b.Count; i++){\n            sum[i] = sum[i-1] + Math.Abs(b[i]);\n        }\n        \n        c = 0;\n        while(c + 1 < b.Count){\n            tmp = 0;\n            tmp += b[c++];\n            tmp += b[c++];\n            ans += Math.Abs(tmp);\n        }\n        c = 1;\n        tmp = b[0];\n        while(c + 1 < b.Count){\n            if(b[c] + b[c+1] < 0){\n                ans = Math.Max(ans, tmp + b[c] + b[c+1] + sum[b.Count - 1] - sum[c+1]);\n            }\n            tmp = tmp - b[c-1] + Math.Abs(b[c-1] + b[c]);\n            c = c + 2;\n        }\n        \n        \n        Console.WriteLine(ans);\n    }\n    \n    public static void DebugWL(object x){ System.Diagnostics.Debug.WriteLine(x); }\n}"
  },
  {
    "language": "C#",
    "code": "using System;\nusing System.Collections.Generic;\n\npublic class CSharp{\n    public static void Main(){\n        Kyopuro chokudai = new Kyopuro();\n\t    chokudai.AtCoder();\n\t}\n}\n\npublic class Kyopuro{\n    \n    int n;\n    int[] a;\n    List<long> b;\n    long ans;\n    \n    public void AtCoder(){\n        n = int.Parse(Console.ReadLine());\n        a = new int[n];\n        string[] s = Console.ReadLine().Split(' ');\n        ans = long.Parse(s[0]);\n        int sign;\n        for(int i=1; i<n; i++){\n            sign = 1;\n            if(s[i*2-1] == \"-\") sign = -1;\n            a[i] = int.Parse(s[i*2]) * sign;\n        }\n        \n        long tmp;\n        b = new List<long>();\n        int c = 1;\n        while(c<n && a[c]>0) ans += a[c++];\n        if(c<n) ans += a[c++];\n        while(c<n){\n            tmp = 0;\n            if(a[c]<0){\n                while(c<n && a[c]<0) tmp -= a[c++];\n                while(c<n && a[c]>0) tmp += a[c++];\n                ans += tmp;\n                b.Add(0);\n            } else {\n                while(c<n && a[c]>0) tmp += a[c++];\n                b.Add(tmp);\n            }\n            if(c<n) b.Add(a[c++]);\n            else b.Add(0);\n        }\n        \n        c = 0;\n        while(c + 1 < b.Count){\n            tmp = 0;\n            tmp += b[c++];\n            tmp += b[c++];\n            ans += Math.Abs(tmp);\n        }\n        Console.WriteLine(ans);\n    }\n    \n    public static void DebugWL(object x){ System.Diagnostics.Debug.WriteLine(x); }\n}"
  },
  {
    "language": "C#",
    "code": "using System;\nusing System.IO;\nusing System.Linq;\nusing System.Text;\nusing System.Text.RegularExpressions;\nusing System.Collections.Generic;\nusing System.Diagnostics;\nusing System.Numerics;\nusing Enu = System.Linq.Enumerable;\n\npublic class Program\n{\n    static readonly long INF = (long)1e18;\n    static readonly int[] Sign = { 1, -1, 1 };\n\n    public void Solve()\n    {\n        int N = Reader.Int();\n        var S = Reader.StringArray(N * 2 - 1);\n        var A = S.Where((v, i) => i % 2 == 0).Select(s => long.Parse(s)).ToArray();\n        var op = new[] { \"+\" }.Concat(S.Where((v, i) => i % 2 == 1)).ToArray();\n        var dp = new long[N + 1, 3];\n        Fill(dp, -INF);\n        dp[0, 0] = 0;\n\n        for (int i = 0; i < N; i++)\n            for (int open = 0; open <= 2; open++)\n                if (dp[i, open] > -INF)\n                    if (op[i] == \"+\")\n                    {\n                        int nopen = Math.Max(0, open - 1);\n                        CheckMax(ref dp[i + 1, open], dp[i, open] + A[i] * Sign[open]);\n                        CheckMax(ref dp[i + 1, nopen], dp[i, open] + A[i] * Sign[nopen]);\n                    }\n                    else\n                    {\n                        int nopen = Math.Min(2, open + 1);\n                        CheckMax(ref dp[i + 1, nopen], dp[i, open] + A[i] * Sign[nopen]);\n                    }\n\n        Console.WriteLine(Math.Max(dp[N, 0], Math.Max(dp[N, 1], dp[N, 2])));\n    }\n\n    bool CheckMax(ref long a, long b) { if (b > a) { a = b; return true; } return false; }\n\n    void Fill<T>(T[,] A, T val)\n    {\n        for (int a = 0; a < A.GetLength(0); a++)\n            for (int b = 0; b < A.GetLength(1); b++)\n                A[a, b] = val;\n    }\n}\n\n\nclass Entry { static void Main() { new Program().Solve(); } }\nclass Reader\n{\n    static TextReader reader = Console.In;\n    static readonly char[] separator = { ' ' };\n    static readonly StringSplitOptions op = StringSplitOptions.RemoveEmptyEntries;\n    static string[] A = new string[0];\n    static int i;\n    static void Init() { A = new string[0]; }\n    public static void Set(TextReader r) { reader = r; Init(); }\n    public static void Set(string file) { reader = new StreamReader(file); Init(); }\n    public static bool HasNext() { return CheckNext(); }\n    public static string String() { return Next(); }\n    public static int Int() { return int.Parse(Next()); }\n    public static long Long() { return long.Parse(Next()); }\n    public static double Double() { return double.Parse(Next()); }\n    public static int[] IntLine() { return Array.ConvertAll(Split(Line()), int.Parse); }\n    public static int[] IntArray(int N) { return Range(N, Int); }\n    public static int[][] IntTable(int H) { return Range(H, IntLine); }\n    public static string[] StringArray(int N) { return Range(N, Next); }\n    public static string[][] StringTable(int N) { return Range(N, () => Split(Line())); }\n    public static string Line() { return reader.ReadLine().Trim(); }\n    public static T[] Range<T>(int N, Func<T> f) { var r = new T[N]; for (int i = 0; i < N; r[i++] = f()) ; return r; }\n    static string[] Split(string s) { return s.Split(separator, op); }\n    static string Next() { CheckNext(); return A[i++]; }\n    static bool CheckNext()\n    {\n        if (i < A.Length) return true;\n        string line = reader.ReadLine();\n        if (line == null) return false;\n        if (line == \"\") return CheckNext();\n        A = Split(line);\n        i = 0;\n        return true;\n    }\n}"
  },
  {
    "language": "C#",
    "code": "using System;\nusing System.Text;\nusing System.Collections.Generic;\nclass Solve{\n    public Solve(){}\n    StringBuilder sb;\n    public static int Main(){\n        new Solve().Run();\n        return 0;\n    }\n    void Run(){\n        sb = new StringBuilder();\n        Calc();\n        Console.Write(sb.ToString());\n    }\n    void Calc(){\n        int N = int.Parse(Console.ReadLine());\n        long[] A = new long[N];\n        bool[] opr = new bool[N-1];\n        string[] str = Console.ReadLine().Split(' ');\n        for(int i=0;i<2*N-1;i++){\n            if(i%2 == 0){\n                A[i/2] = int.Parse(str[i]);\n            }\n            else{\n                opr[i/2] = str[i] == \"-\";\n            }\n        }\n        long[] sum = new long[N];\n        sum[0] = A[0];\n        for(int i=1;i<N;i++){\n            sum[i] = sum[i-1] + A[i];\n        }\n        long max = 0;\n        long minus = 0;\n        for(int i=0;i<N-1;i++){\n            if(!opr[i]){\n                continue;\n            }\n            long count = 0;\n            minus += A[i+1];\n            i++;\n            for(;i<N-1 && !opr[i];i++){\n                count += A[i+1];\n            }\n            max = Math.Max(max,sum[N-1]-2*minus-2*count);\n            i--;\n        }\n        max = Math.Max(max,sum[N-1]-2*minus);\n        sb.Append(max+\"\\n\");\n    }\n}"
  },
  {
    "language": "C#",
    "code": "using System;\nusing System.Collections.Generic;\n\npublic class CSharp{\n    public static void Main(){\n        Kyopuro chokudai = new Kyopuro();\n\t    chokudai.AtCoder();\n\t}\n}\n\npublic class Kyopuro{\n    \n    int n;\n    int[] a;\n    List<long> b;\n    long ans;\n    \n    public void AtCoder(){\n        n = int.Parse(Console.ReadLine());\n        a = new int[n];\n        string[] s = Console.ReadLine().Split(' ');\n        ans = long.Parse(s[0]);\n        int sign;\n        for(int i=1; i<n; i++){\n            sign = 1;\n            if(s[i*2-1] == \"-\") sign = -1;\n            a[i] = int.Parse(s[i*2]) * sign;\n        }\n        \n        long tmp;\n        b = new List<long>();\n        int c = 1;\n        while(c<n && a[c]>0) ans += a[c++];\n        if(c<n) ans += a[c++];\n        while(c<n){\n            tmp = 0;\n            if(a[c]<0){\n                //while(c<n && a[c]<0) tmp -= a[c++];\n                //while(c<n && a[c]>0) tmp += a[c++];\n                while(c<n) tmp += Math.Abs(a[c++]);\n                ans += tmp;\n                b.Add(0);\n            } else {\n                while(c<n && a[c]>0) tmp += a[c++];\n                b.Add(tmp);\n            }\n            if(c<n) b.Add(a[c++]);\n            else b.Add(0);\n        }\n        \n        c = 0;\n        while(c + 1 < b.Count){\n            tmp = 0;\n            tmp += b[c++];\n            tmp += b[c++];\n            ans += Math.Abs(tmp);\n        }\n        Console.WriteLine(ans);\n    }\n    \n    public static void DebugWL(object x){ System.Diagnostics.Debug.WriteLine(x); }\n}"
  },
  {
    "language": "Ruby",
    "code": "N = gets.to_i\narr = gets.chomp.split\nnums = []\nops = []\nfirst = arr.shift.to_i\n(N-1).times do\n    ops << arr.shift\n    nums << arr.shift.to_i\nend\nops << '-'\nnums << 0\nsum = first + nums.inject(0, :+)\n\nBIG = 10**20\nloss = BIG\nminus = 0\nplus = 0\nN.times do |i|\n    if ops[i] == '+'\n        if minus > 0\n            plus += nums[i]\n        end\n    else\n        if minus > 0\n            result = minus + plus\n            loss = result if loss > result\n            plus = 0\n        end\n        minus += nums[i]\n    end\nend\nputs loss == BIG ? sum : sum - 2 * loss"
  },
  {
    "language": "Ruby",
    "code": "b=c=-1e18;a=0;`sed 1d`.split.map{|e|a+=t=e.to_i;b=!$_?[b-t,c+=t].max: a=[a-t*2,c=b+t].max;$_=e[?-]};p a"
  },
  {
    "language": "Ruby",
    "code": "b=c=-9**20;s=gets;a=0;gets.split.map{|e|t=e.to_i;b=s[?-]?(a=[a-t,c=b+t].max):(a+=t;[b-t,c+=t].max);s=e};p a"
  },
  {
    "language": "Ruby",
    "code": "b=c=-1e18;a=0;`sed 1d`.split.map{|e|a+=t=e.to_i;b=!$&?[b-t,c+=t].max: a=[a-t*2,c=b+t].max;e=~/-/};p a"
  },
  {
    "language": "Ruby",
    "code": "b=c=-1e18\na=0\n`sed 1d`.split.map{a+=t=_1.to_i\nb=!$&?[b-t,c+=t].max: a=[a-t*2,c=b+t].max\n_1=~/-/}\np a"
  },
  {
    "language": "Ruby",
    "code": "b=c=-1e18\n`sed 1d`.split.map{$.+=t=_1.to_i\nb=!$&?[b-t,c+=t].max: $.=[$.-t*2,c=b+t].max\n_1=~/-/}\np$."
  },
  {
    "language": "Ruby",
    "code": "# Here your code !\n\nN = gets.to_i\nas=[]\nops=[]\ngets.split.each_with_index{|v,i|\n    if i==0\n        as[0]=v.to_i\n    else\n        j=(i-1)/2+1\n        if i%2==1\n            ops[j]=v\n        else\n            as[j]=v.to_i\n        end\n    end\n}\ntotal = as[0]\ni=1\nmode='+'\nwhile i < N\n   #  puts \"i=#{i}, total=#{total}\"\n    if mode == '+'\n        if ops[i]=='+'\n            total += as[i]\n        else\n            total -= as[i]\n            mode = '-'\n        end\n    else\n        if ops[i]=='-'\n            total += as[i]\n        else\n            j=i\n            pval=0\n            while ops[j]=='+' && j<N\n                pval += as[i]\n                j+=1\n            end\n            if ops[j]=='-' && as[j]>pval\n                total += as[j] - pval\n                i = j\n            else\n                total += as[i]\n                mode = '+'\n            end\n        end\n    end\n    i+=1\nend\nputs total\n"
  },
  {
    "language": "Ruby",
    "code": "b=c=-9**20;s=gets;a=0;gets.split.map{|e|a+=t=e.to_i;b=s[?-]?(a=[a-t*2,c=b+t].max):[b-t,c+=t].max;s=e};p a"
  },
  {
    "language": "Ruby",
    "code": "b=c=-1e18;`sed 1d`.split.map{|e|$.+=t=e.to_i;b=!$&?[b-t,c+=t].max: $.=[$.-t*2,c=b+t].max;e=~/-/};p$."
  },
  {
    "language": "Ruby",
    "code": "b=c=-1e18;s=gets;a=0;gets.split.map{|e|a+=t=e.to_i;b=s[?-]?(a=[a-t*2,c=b+t].max):[b-t,c+=t].max;s=e};p a"
  },
  {
    "language": "Go",
    "code": "package main\nimport \"fmt\"\nfunc main() {\n  var n int\n  var f,f0,f1,f2 int64\n  var s string\n  fmt.Scan(&n,&f0)\n  f1,f2 = -(1<<60),-(1<<60)\n  for i:=1;i<n;i++ {\n    fmt.Scan(&s,&f)\n    if s == \"-\" {\n      f2 = f1+f\n      f1 = max(f0-f,f2)\n      f0 = f1\n    } else {\n      f2 += f\n      f1 = max(f1-f,f2)\n      f0 += f\n    }\n  }\n  fmt.Println(f0)\n}\nfunc max(x,y int64) int64 {\n  if x > y { return x }\n  return y\n}"
  },
  {
    "language": "Perl",
    "code": "<>;$b=$c=-1e18;map$x=-$_?$x?($b=($\\-=$_)+=$-=($c=$b+$_)-$\\):($\\+=$_,($b-=$_)+=$-=($c+=$_)-$b):/-/,glob<>;print"
  },
  {
    "language": "Perl",
    "code": "<>;$b=$c=-~0;map$_+0?$&?($b=($\\-=$_)+=$-=($c=$b+$_)-$\\):($\\+=$_,($b-=$_)+=$-=($c+=$_)-$b):/-/,glob<>;print"
  },
  {
    "language": "Perl",
    "code": "<>;$b=$c=-1e18;map$x=+$_?$x?($b=($\\-=$_)+=$-=($c=$b+$_)-$\\):($\\+=$_,($b-=$_)+=$-=($c+=$_)-$b):/-/,glob<>;print"
  },
  {
    "language": "Perl",
    "code": "<>;$b=$c=-1e18;\nmap$x=/\\d/?$x?($b=($a-=$_)+=$-=($c=$b+$_)-$a):($a+=$_,($b-=$_)+=$-=($c+=$_)-$b):/-/,glob<>;\nprint$a"
  },
  {
    "language": "Perl",
    "code": "$b=$c=-~<>;map$x=/\\d/?$x?($b=($\\-=$_)+=$-=($c=$b+$_)-$\\):($\\+=$_,($b-=$_)+=$-=($c+=$_)-$b):/-/,glob<>;print"
  },
  {
    "language": "Perl",
    "code": "<>;$b=$c=-1e18;map$_+0?$&?($b=($\\-=$_)+=$-=($c=$b+$_)-$\\):($\\+=$_,($b-=$_)+=$-=($c+=$_)-$b):/-/,glob<>;print"
  },
  {
    "language": "Perl",
    "code": "<>;$b=$c=-1e18;map$x=0+$_?$x?($b=($\\-=$_)+=$-=($c=$b+$_)-$\\):($\\+=$_,($b-=$_)+=$-=($c+=$_)-$b):/-/,glob<>;print"
  },
  {
    "language": "Perl",
    "code": "<>;$b=$c=-~0;map$x=/\\d/?$x?($b=($\\-=$_)+=$-=($c=$b+$_)-$\\):($\\+=$_,($b-=$_)+=$-=($c+=$_)-$b):/-/,glob<>;print"
  },
  {
    "language": "Perl",
    "code": "<>;$b=$c=-~0;map$x=/\\d/?$x?$b=($\\-=$_)+=$-=($c=$b+$_)-$\\:($\\+=$_,($b-=$_)+=$-=($c+=$_)-$b):/-/,glob<>;print"
  },
  {
    "language": "Perl",
    "code": "<>;$b=$c=-1e18;map$x=/\\d/?$x?($b=($\\-=$_)+=$-=($c=$b+$_)-$\\):($\\+=$_,($b-=$_)+=$-=($c+=$_)-$b):/-/,glob<>;print"
  },
  {
    "language": "D",
    "code": "/+ dub.sdl:\n    name \"A\"\n    dependency \"dcomp\" version=\">=0.2.2\"\n    lflags \"-stack_size\" \"100000000\"\n+/\n\nimport std.stdio, std.conv, std.algorithm;\n\n// import dcomp.scanner;\n// import dcomp.numeric.modint;\n\nint main() {\n    auto sc = new Scanner();\n    int n;\n    sc.read(n);\n    long[] d = new long[n];\n    foreach (i; 0..n) {\n        bool plus = true;\n        if (i) {\n            char c;\n            sc.read(c);\n            plus = (c == '+');\n        }\n        sc.read(d[i]);\n        if (!plus) d[i] *= -1;\n    }\n\n    long[][] dp = new long[][](n, 3);\n    bool[][] used = new bool[][](n, 3);\n    long calc(int p, int co) {\n        if (p == n) return 0;\n        if (2 < co) return 0;\n        if (used[p][co]) return dp[p][co];\n        used[p][co] = true;\n        long ans = -10L^^18;\n        if (co) ans = max(ans, calc(p, co-1));\n        ans = max(ans, (-1)^^co * d[p] + calc(p+1, co));\n        if (d[p] < 0) {\n            ans = max(ans, (-1)^^co * d[p] + calc(p+1, co+1));\n        }\n        return dp[p][co] = ans;\n    }\n    writeln(calc(0, 0));\n    return 0;\n}\n/* IMPORT /Users/yosupo/Program/dcomp/source/dcomp/scanner.d */\n// module dcomp.scanner;\n\nclass Scanner {\n    import std.stdio : File, stdin;\n    import std.conv : to;\n    import std.range : front, popFront, array, ElementType;\n    import std.array : split;\n    import std.traits : isSomeChar, isStaticArray, isArray; \n    import std.algorithm : map;\n    File f;\n    this(File f = stdin) {\n        this.f = f;\n    }\n    string[] buf;\n    private bool succ() {\n        while (!buf.length) {\n            if (f.eof) return false;\n            buf = f.readln.split;\n        }\n        return true;\n    }\n    private bool readSingle(T)(ref T x) {\n        if (!succ()) return false;\n        static if (isArray!T) {\n            alias E = ElementType!T;\n            static if (isSomeChar!E) {\n                //string or char[10] etc\n                x = buf.front;\n                buf.popFront;\n            } else {\n                static if (isStaticArray!T) {\n                    //static\n                    assert(buf.length == T.length);\n                }\n                x = buf.map!(to!E).array;\n                buf.length = 0;                \n            }\n        } else {\n            x = buf.front.to!T;\n            buf.popFront;            \n        }\n        return true;\n    }\n    int read(T, Args...)(ref T x, auto ref Args args) {\n        if (!readSingle(x)) return 0;\n        static if (args.length == 0) {\n            return 1;\n        } else {\n            return 1 + read(args);\n        }\n    }\n}\n\nunittest {\n    import std.path : buildPath;\n    import std.file : tempDir;\n    import std.algorithm : equal;\n    import std.stdio : File;\n    string fileName = buildPath(tempDir, \"kyuridenanmaida.txt\");\n    auto fout = File(fileName, \"w\");\n    fout.writeln(\"1 2 3\");\n    fout.writeln(\"ab cde\");\n    fout.writeln(\"1.0 1.0 2.0\");\n    fout.close;\n    Scanner sc = new Scanner(File(fileName, \"r\"));\n    int a;\n    int[2] b;\n    char[2] c;\n    string d;\n    double e;\n    double[] f;\n    sc.read(a, b, c, d, e, f);\n    assert(a == 1);\n    assert(equal(b[], [2, 3]));\n    assert(equal(c[], \"ab\"));\n    assert(equal(d, \"cde\"));\n    assert(e == 1.0);\n    assert(equal(f, [1.0, 2.0]));\n}\n/* IMPORT /Users/yosupo/Program/dcomp/source/dcomp/numeric/modint.d */\n// module dcomp.numeric.modint;\n\n// import dcomp.numeric.primitive;\n\nstruct ModInt(uint MD) if (MD < int.max) {\n    import std.conv : to;\n    uint v;\n    this(int v) {this.v = (long(v)%MD+MD)%MD;}\n    this(long v) {this.v = (v%MD+MD)%MD;}\n    auto normS(uint x) {return (x<MD)?x:x-MD;}\n    auto make(uint x) {ModInt m; m.v = x; return m;}\n    auto opBinary(string op:\"+\")(ModInt r) {return make(normS(v+r.v));}\n    auto opBinary(string op:\"-\")(ModInt r) {return make(normS(v+MD-r.v));}\n    auto opBinary(string op:\"*\")(ModInt r) {return make( (long(v)*r.v%MD).to!uint );}\n    auto opBinary(string op:\"/\")(ModInt r) {return this*inv(r);}\n    auto opOpAssign(string op)(ModInt r) {return mixin (\"this=this\"~op~\"r\");}\n    static ModInt inv(ModInt x) {return ModInt(extGcd!int(x.v, MD)[0]);}\n    string toString() {return v.to!string;}\n}\n\nunittest {\n    static assert( is(ModInt!(uint(1000000000) * 2))); //not overflow\n    static assert(!is(ModInt!(uint(1145141919) * 2))); //overflow!\n    alias Mint = ModInt!(10^^9+7);\n    // negative check\n    assert(Mint(-1).v == 10^^9 + 6);\n    assert(Mint(-1L).v == 10^^9 + 6);\n\n    Mint a = 48;\n    Mint b = Mint.inv(a);\n    assert(b.v == 520833337);\n\n    Mint c = Mint(15);\n    Mint d = Mint(3);\n    assert((c/d).v == 5);\n}\n\nstruct DModInt {\n    import std.conv : to;\n    uint MD, v;\n    this(int v, uint md) {\n        MD = md;\n        this.v = ((long(v)%MD+MD)%MD).to!uint;\n    }\n    this(long v, uint md) {\n        MD = md;\n        this.v = ((v%MD+MD)%MD).to!uint;\n    }\n    auto normS(uint x) {return (x<MD)?x:x-MD;}\n    auto make(uint x) {DModInt m; m.MD = MD; m.v = x; return m;}\n    auto opBinary(string op:\"+\")(DModInt r) {\n        assert(MD == r.MD);\n        return make(normS(v+r.v));\n    }\n    auto opBinary(string op:\"-\")(DModInt r) {\n        assert(MD == r.MD);\n        return make(normS(v+MD-r.v));\n    }\n    auto opBinary(string op:\"*\")(DModInt r) {\n        assert(MD == r.MD);\n        return make((long(v)*r.v%MD).to!uint);\n    }\n    auto opBinary(string op:\"/\")(DModInt r) {\n        assert(MD == r.MD);\n        return this*inv(r);\n    }\n    auto opOpAssign(string op)(DModInt r) {return mixin (\"this=this\"~op~\"r\");}\n    static DModInt inv(DModInt x) {\n        return DModInt(extGcd!int(x.v, x.MD)[0], x.MD);\n    }\n    string toString() {return v.to!string;}\n}\n\nunittest {\n    immutable MD = 10^^9 + 7;\n    alias Mint = DModInt;\n    //negative check\n    assert(Mint(-1, MD).v == 10^^9 + 6);\n    assert(Mint(-1L, MD).v == 10^^9 + 6);\n    Mint a = Mint(48, MD);\n    Mint b = Mint.inv(a);\n    assert(b.v == 520833337);\n    Mint c = Mint(15, MD);\n    Mint d = Mint(3, MD);\n    assert((c/d).v == 5);\n}\n/* IMPORT /Users/yosupo/Program/dcomp/source/dcomp/numeric/primitive.d */\n// module dcomp.numeric.primitive;\n\nimport std.traits;\n\nT pow(T, U)(T x, U n) { return pow(x, n, T(1)); }\nT pow(T, U)(T x, U n, T e) {\n    while (n) {\n        if (n & 1) e *= x;\n        x *= x;\n        n /= 2;\n    }\n    return e;\n}\n\nunittest {\n    assert(pow(3, 5) == 243);\n    assert(pow(3, 5, 2) == 486);\n}\n\nT lcm(T)(in T a, in T b) {\n    import std.numeric : gcd;\n    return a / gcd(a,b) * b;\n}\n\nunittest {\n    assert(lcm(2, 4) == 4);\n    assert(lcm(3, 5) == 15);\n    assert(lcm(1, 1) == 1);\n    assert(lcm(0, 100) == 0);\n}\n\n//a*T[0]+b*T[1]=T[2], T[2]=gcd\n//todo: to binary extgcd\nT[3] extGcd(T)(in T a, in T b) \nif (!isIntegral!T || isSigned!T) //unsignedはNG\n{\n    if (b==0) {\n        return [1, 0, a];\n    } else {\n        auto e = extGcd(b, a%b);\n        return [e[1], e[0]-a/b*e[1], e[2]];\n    }\n}\n\nunittest {\n    import std.numeric : gcd;\n    foreach (i; 0..100) {\n        foreach (j; 0..100) {\n            auto e = extGcd(i, j);\n            assert(e[2] == gcd(i, j));\n            assert(e[0] * i + e[1] * j == e[2]);\n        }\n    }\n}\n\nT[] factTable(T)(size_t length) {\n    import std.range : take, recurrence;\n    import std.array : array;\n    return T(1).recurrence!((a, n) => a[n-1]*T(n)).take(length).array;\n}\n\n// optimize\nT[] invFactTable(T)(size_t length) {\n    import std.range : take, recurrence;\n    import std.array : array;\n    return T(1).recurrence!((a, n) => a[n-1]/T(n)).take(length).array;\n}\n\nunittest {\n    import std.stdio;\n//     import dcomp.numeric.modint;\n    alias Mint = ModInt!(10^^9 + 7);\n    auto r = factTable!Mint(20);\n    Mint a = 1;\n    assert(r[0] == Mint(1));\n    foreach (i; 1..20) {\n        a *= Mint(i);\n        assert(r[i] == a);\n    }\n    auto p = invFactTable!Mint(20);\n    foreach (i; 1..20) {\n        assert((r[i]*p[i]).v == 1);\n    }\n}\n"
  },
  {
    "language": "D",
    "code": "import std.stdio, std.array, std.string, std.conv, std.algorithm;\nimport std.typecons, std.range, std.random, std.math, std.container;\nimport std.numeric, std.bigint, core.bitop, core.stdc.stdio;\n\n\nvoid main() {\n    auto N = readln.chomp.to!int;\n    auto A = readln.split;\n\n    auto dp = new long[][](N, 3);\n    dp[0][0] = A[0].to!long;\n    dp[0][1] = dp[0][2] = - (10L^^15);\n\n\n    foreach (i; 1..N) {\n        auto sign = A[i*2-1];\n        auto num  = A[i*2].to!long;\n        if (sign == \"+\") {\n            dp[i][0] = max(dp[i-1][0] + num, dp[i-1][1] - num, dp[i-1][2] + num);\n            dp[i][1] = max(dp[i-1][1] - num, dp[i-1][2] + num);\n            dp[i][2] = dp[i-1][2] + num;\n        }\n        else {\n            dp[i][0] = max(dp[i-1][0] - num, dp[i-1][1] + num, dp[i-1][2] - num);\n            dp[i][1] = max(dp[i-1][0] - num, dp[i-1][1] + num, dp[i-1][2] - num);\n            dp[i][2] = max(dp[i-1][1] + num, dp[i-1][2] - num);\n        }\n    }\n\n    dp[N-1].reduce!(max).writeln;\n    \n}\n"
  },
  {
    "language": "D",
    "code": "import std.stdio, std.array, std.string, std.conv, std.algorithm;\nimport std.typecons, std.range, std.random, std.math, std.container;\nimport std.numeric, std.bigint, core.bitop, core.stdc.stdio;\n\n\nvoid main() {\n    auto N = readln.chomp.to!int;\n    auto A = readln.split;\n\n    auto dp = new long[][](N, 3);\n    dp[0][0] = A[0].to!long;\n    dp[0][1] = dp[0][2] = - (10L^^15);\n\n\n    foreach (i; 1..N) {\n        auto sign = A[i*2-1];\n        auto num = A[i*2].to!long;\n        if (sign == \"+\") {\n            dp[i][0] = max(dp[i-1][0] + num, dp[i-1][1] + num, dp[i-1][2] + num);\n            dp[i][1] = max(dp[i-1][1] - num, dp[i-1][2] - num);\n            dp[i][2] = dp[i-1][2] + num;\n        }\n        else {\n            dp[i][0] = max(dp[i-1][0] - num, dp[i-1][1] - num, dp[i-1][2] - num);\n            dp[i][1] = max(dp[i-1][0] - num, dp[i-1][1] + num, dp[i-1][2] + num);\n            dp[i][2] = max(dp[i-1][1] + num, dp[i-1][2] - num);\n        }\n    }\n\n    //dp.writeln;\n    dp[N-1].reduce!(max).writeln;\n    \n}\n"
  },
  {
    "language": "D",
    "code": "import std.stdio, std.array, std.string, std.conv, std.algorithm;\nimport std.typecons, std.range, std.random, std.math, std.container;\nimport std.numeric, std.bigint, core.bitop, core.stdc.stdio;\n\n\nvoid main() {\n    auto N = readln.chomp.to!int;\n    auto A = readln.split;\n\n    auto dp = new long[][](N, 3);\n    dp[0][0] = A[0].to!long;\n    dp[0][1] = dp[0][2] = - (10L^^15);\n\n\n    foreach (i; 1..N) {\n        auto sign = A[i*2-1];\n        auto num = A[i*2].to!long;\n        if (sign == \"+\") {\n            dp[i][0] = max(dp[i-1][0] + num, dp[i-1][1] + num);\n            dp[i][1] = max(dp[i-1][1] - num, dp[i-1][2] - num);\n            dp[i][2] = dp[i-1][2] + num;\n        }\n        else {\n            dp[i][0] = max(dp[i-1][0] - num, dp[i-1][1] - num);\n            dp[i][1] = max(dp[i-1][0] - num, dp[i-1][1] + num, dp[i-1][2] + num);\n            dp[i][2] = max(dp[i-1][1] + num, dp[i-1][2] - num);\n        }\n    }\n\n    //dp.writeln;\n    dp[N-1][0..3].reduce!(max).writeln;\n    \n}\n"
  },
  {
    "language": "D",
    "code": "import std.stdio;\nimport std.string;\nimport std.conv;\nimport std.typecons;\nimport std.algorithm;\nimport std.functional;\nimport std.bigint;\nimport std.numeric;\nimport std.array;\nimport std.math;\nimport std.range;\nimport std.container;\nimport std.ascii;\nimport std.concurrency;\n\nlong INF = long.max/3;\nvoid main() {\n    int N = readln.chomp.to!int;\n    long[] as = new long[N];\n    int[] bs = new int[N+1];\n    string[] input = [\"+\"] ~ readln.split.array;\n    foreach(i; 0..N) {\n        as[i] = input[2*i+1].to!long;\n        bs[i] = input[2*i] == \"-\" ? 1 : 0;\n    }\n\n    long f(int i, int j) {\n        if (j>2) return memoize!f(i, 2);\n        if (i==N) return 0;\n        return (j+1).iota.map!(\n            k => memoize!f(i+1, k + bs[i+1])\n        ).reduce!max + as[i]*((-1)^^j);\n    }\n\n    f(0, 0).writeln;\n}\n\n// ----------------------------------------------\n\nvoid times(alias fun)(int n) {\n    // n.iota.each!(i => fun());\n    foreach(i; 0..n) fun();\n}\nauto rep(alias fun, T = typeof(fun()))(int n) {\n    // return n.iota.map!(i => fun()).array;\n    T[] res = new T[n];\n    foreach(ref e; res) e = fun();\n    return res;\n}\n\n// fold was added in D 2.071.0\nstatic if (__VERSION__ < 2071) {\n    template fold(fun...) if (fun.length >= 1) {\n        auto fold(R, S...)(R r, S seed) {\n            static if (S.length < 2) {\n                return reduce!fun(seed, r);\n            } else {\n                return reduce!fun(tuple(seed), r);\n            }\n        }\n    }\n}\n\n// cumulativeFold was added in D 2.072.0\nstatic if (__VERSION__ < 2072) {\n    template cumulativeFold(fun...)\n    if (fun.length >= 1)\n    {\n        import std.meta : staticMap;\n        private alias binfuns = staticMap!(binaryFun, fun);\n\n        auto cumulativeFold(R)(R range)\n        if (isInputRange!(Unqual!R))\n        {\n            return cumulativeFoldImpl(range);\n        }\n\n        auto cumulativeFold(R, S)(R range, S seed)\n        if (isInputRange!(Unqual!R))\n        {\n            static if (fun.length == 1)\n                return cumulativeFoldImpl(range, seed);\n            else\n                return cumulativeFoldImpl(range, seed.expand);\n        }\n\n        private auto cumulativeFoldImpl(R, Args...)(R range, ref Args args)\n        {\n            import std.algorithm.internal : algoFormat;\n\n            static assert(Args.length == 0 || Args.length == fun.length,\n                algoFormat(\"Seed %s does not have the correct amount of fields (should be %s)\",\n                    Args.stringof, fun.length));\n\n            static if (args.length)\n                alias State = staticMap!(Unqual, Args);\n            else\n                alias State = staticMap!(ReduceSeedType!(ElementType!R), binfuns);\n\n            foreach (i, f; binfuns)\n            {\n                static assert(!__traits(compiles, f(args[i], e)) || __traits(compiles,\n                        { args[i] = f(args[i], e); }()),\n                    algoFormat(\"Incompatible function/seed/element: %s/%s/%s\",\n                        fullyQualifiedName!f, Args[i].stringof, E.stringof));\n            }\n\n            static struct Result\n            {\n            private:\n                R source;\n                State state;\n\n                this(R range, ref Args args)\n                {\n                    source = range;\n                    if (source.empty)\n                        return;\n\n                    foreach (i, f; binfuns)\n                    {\n                        static if (args.length)\n                            state[i] = f(args[i], source.front);\n                        else\n                            state[i] = source.front;\n                    }\n                }\n\n            public:\n                @property bool empty()\n                {\n                    return source.empty;\n                }\n\n                @property auto front()\n                {\n                    assert(!empty, \"Attempting to fetch the front of an empty cumulativeFold.\");\n                    static if (fun.length > 1)\n                    {\n                        import std.typecons : tuple;\n                        return tuple(state);\n                    }\n                    else\n                    {\n                        return state[0];\n                    }\n                }\n\n                void popFront()\n                {\n                    assert(!empty, \"Attempting to popFront an empty cumulativeFold.\");\n                    source.popFront;\n\n                    if (source.empty)\n                        return;\n\n                    foreach (i, f; binfuns)\n                        state[i] = f(state[i], source.front);\n                }\n\n                static if (isForwardRange!R)\n                {\n                    @property auto save()\n                    {\n                        auto result = this;\n                        result.source = source.save;\n                        return result;\n                    }\n                }\n\n                static if (hasLength!R)\n                {\n                    @property size_t length()\n                    {\n                        return source.length;\n                    }\n                }\n            }\n\n            return Result(range, args);\n        }\n    }\n}\n\n// minElement/maxElement was added in D 2.072.0\nstatic if (__VERSION__ < 2072) {\n    auto minElement(alias map, Range)(Range r)\n    if (isInputRange!Range && !isInfinite!Range)\n    {\n        alias mapFun = unaryFun!map;\n        auto element = r.front;\n        auto minimum = mapFun(element);\n        r.popFront;\n        foreach(a; r) {\n            auto b = mapFun(a);\n            if (b < minimum) {\n                element = a;\n                minimum = b;\n            }\n        }\n        return element;\n    }\n    auto maxElement(alias map, Range)(Range r)\n    if (isInputRange!Range && !isInfinite!Range)\n    {\n        alias mapFun = unaryFun!map;\n        auto element = r.front;\n        auto maximum = mapFun(element);\n        r.popFront;\n        foreach(a; r) {\n            auto b = mapFun(a);\n            if (b > maximum) {\n                element = a;\n                maximum = b;\n            }\n        }\n        return element;\n    }\n}\n"
  },
  {
    "language": "D",
    "code": "import std.stdio, std.array, std.string, std.conv, std.algorithm;\nimport std.typecons, std.range, std.random, std.math, std.container;\nimport std.numeric, std.bigint, core.bitop, core.stdc.stdio;\n\n\nvoid main() {\n    auto N = readln.chomp.to!int;\n    auto A = readln.split;\n\n    auto dp = new long[][](N, 3);\n    foreach (i; 0..N) foreach (j; 0..2) dp[i][j] = 0;\n    dp[0][0] = A[0].to!long;\n    dp[0][1] = dp[0][2] = - (1L << 50);\n\n\n    foreach (i; 1..N) {\n        auto sign = A[i*2-1];\n        auto num = A[i*2].to!long;\n        if (sign == \"+\") {\n            dp[i][0] = max(dp[i-1][0] + num, dp[i-1][1] + num);\n            dp[i][1] = max(dp[i-1][1] - num, dp[i-1][2] - num);\n            dp[i][2] = dp[i-1][2] + num;\n        }\n        else {\n            dp[i][0] = max(dp[i-1][0] - num, dp[i-1][1] - num);\n            dp[i][1] = max(dp[i-1][0] - num, dp[i-1][1] + num, dp[i-1][2] + num);\n            dp[i][2] = max(dp[i-1][1] + num, dp[i-1][2] - num);\n        }\n    }\n\n    //dp.writeln;\n    dp[N-1][0..3].reduce!(max).writeln;\n    \n}\n"
  },
  {
    "language": "D",
    "code": "/+ dub.sdl:\n    name \"A\"\n    dependency \"dcomp\" version=\">=0.2.2\"\n    lflags \"-stack_size\" \"100000000\"\n+/\n\nimport std.stdio, std.conv, std.algorithm;\n\n// import dcomp.scanner;\n// import dcomp.numeric.modint;\n\nint main() {\n    auto sc = new Scanner();\n    int n;\n    sc.read(n);\n    long[] d = new long[n];\n    foreach (i; 0..n) {\n        bool plus = true;\n        if (i) {\n            char c;\n            sc.read(c);\n            plus = (c == '+');\n        }\n        sc.read(d[i]);\n        if (!plus) d[i] *= -1;\n    }\n    writeln(d);\n\n    long[][] dp = new long[][](n, 3);\n    bool[][] used = new bool[][](n, 3);\n    long calc(int p, int co) {\n        if (p == n) return 0;\n        if (2 < co) return 0;\n        if (used[p][co]) return dp[p][co];\n        used[p][co] = true;\n        long ans = -10L^^18;\n        if (co) ans = max(ans, calc(p, co-1));\n        ans = max(ans, (-1)^^co * d[p] + calc(p+1, co));\n        if (d[p] < 0) {\n            ans = max(ans, (-1)^^co * d[p] + calc(p+1, co+1));\n        }\n        return dp[p][co] = ans;\n    }\n    writeln(calc(0, 0));\n    return 0;\n}\n/* IMPORT /Users/yosupo/Program/dcomp/source/dcomp/scanner.d */\n// module dcomp.scanner;\n\nclass Scanner {\n    import std.stdio : File, stdin;\n    import std.conv : to;\n    import std.range : front, popFront, array, ElementType;\n    import std.array : split;\n    import std.traits : isSomeChar, isStaticArray, isArray; \n    import std.algorithm : map;\n    File f;\n    this(File f = stdin) {\n        this.f = f;\n    }\n    string[] buf;\n    private bool succ() {\n        while (!buf.length) {\n            if (f.eof) return false;\n            buf = f.readln.split;\n        }\n        return true;\n    }\n    private bool readSingle(T)(ref T x) {\n        if (!succ()) return false;\n        static if (isArray!T) {\n            alias E = ElementType!T;\n            static if (isSomeChar!E) {\n                //string or char[10] etc\n                x = buf.front;\n                buf.popFront;\n            } else {\n                static if (isStaticArray!T) {\n                    //static\n                    assert(buf.length == T.length);\n                }\n                x = buf.map!(to!E).array;\n                buf.length = 0;                \n            }\n        } else {\n            x = buf.front.to!T;\n            buf.popFront;            \n        }\n        return true;\n    }\n    int read(T, Args...)(ref T x, auto ref Args args) {\n        if (!readSingle(x)) return 0;\n        static if (args.length == 0) {\n            return 1;\n        } else {\n            return 1 + read(args);\n        }\n    }\n}\n\nunittest {\n    import std.path : buildPath;\n    import std.file : tempDir;\n    import std.algorithm : equal;\n    import std.stdio : File;\n    string fileName = buildPath(tempDir, \"kyuridenanmaida.txt\");\n    auto fout = File(fileName, \"w\");\n    fout.writeln(\"1 2 3\");\n    fout.writeln(\"ab cde\");\n    fout.writeln(\"1.0 1.0 2.0\");\n    fout.close;\n    Scanner sc = new Scanner(File(fileName, \"r\"));\n    int a;\n    int[2] b;\n    char[2] c;\n    string d;\n    double e;\n    double[] f;\n    sc.read(a, b, c, d, e, f);\n    assert(a == 1);\n    assert(equal(b[], [2, 3]));\n    assert(equal(c[], \"ab\"));\n    assert(equal(d, \"cde\"));\n    assert(e == 1.0);\n    assert(equal(f, [1.0, 2.0]));\n}\n/* IMPORT /Users/yosupo/Program/dcomp/source/dcomp/numeric/modint.d */\n// module dcomp.numeric.modint;\n\n// import dcomp.numeric.primitive;\n\nstruct ModInt(uint MD) if (MD < int.max) {\n    import std.conv : to;\n    uint v;\n    this(int v) {this.v = (long(v)%MD+MD)%MD;}\n    this(long v) {this.v = (v%MD+MD)%MD;}\n    auto normS(uint x) {return (x<MD)?x:x-MD;}\n    auto make(uint x) {ModInt m; m.v = x; return m;}\n    auto opBinary(string op:\"+\")(ModInt r) {return make(normS(v+r.v));}\n    auto opBinary(string op:\"-\")(ModInt r) {return make(normS(v+MD-r.v));}\n    auto opBinary(string op:\"*\")(ModInt r) {return make( (long(v)*r.v%MD).to!uint );}\n    auto opBinary(string op:\"/\")(ModInt r) {return this*inv(r);}\n    auto opOpAssign(string op)(ModInt r) {return mixin (\"this=this\"~op~\"r\");}\n    static ModInt inv(ModInt x) {return ModInt(extGcd!int(x.v, MD)[0]);}\n    string toString() {return v.to!string;}\n}\n\nunittest {\n    static assert( is(ModInt!(uint(1000000000) * 2))); //not overflow\n    static assert(!is(ModInt!(uint(1145141919) * 2))); //overflow!\n    alias Mint = ModInt!(10^^9+7);\n    // negative check\n    assert(Mint(-1).v == 10^^9 + 6);\n    assert(Mint(-1L).v == 10^^9 + 6);\n\n    Mint a = 48;\n    Mint b = Mint.inv(a);\n    assert(b.v == 520833337);\n\n    Mint c = Mint(15);\n    Mint d = Mint(3);\n    assert((c/d).v == 5);\n}\n\nstruct DModInt {\n    import std.conv : to;\n    uint MD, v;\n    this(int v, uint md) {\n        MD = md;\n        this.v = ((long(v)%MD+MD)%MD).to!uint;\n    }\n    this(long v, uint md) {\n        MD = md;\n        this.v = ((v%MD+MD)%MD).to!uint;\n    }\n    auto normS(uint x) {return (x<MD)?x:x-MD;}\n    auto make(uint x) {DModInt m; m.MD = MD; m.v = x; return m;}\n    auto opBinary(string op:\"+\")(DModInt r) {\n        assert(MD == r.MD);\n        return make(normS(v+r.v));\n    }\n    auto opBinary(string op:\"-\")(DModInt r) {\n        assert(MD == r.MD);\n        return make(normS(v+MD-r.v));\n    }\n    auto opBinary(string op:\"*\")(DModInt r) {\n        assert(MD == r.MD);\n        return make((long(v)*r.v%MD).to!uint);\n    }\n    auto opBinary(string op:\"/\")(DModInt r) {\n        assert(MD == r.MD);\n        return this*inv(r);\n    }\n    auto opOpAssign(string op)(DModInt r) {return mixin (\"this=this\"~op~\"r\");}\n    static DModInt inv(DModInt x) {\n        return DModInt(extGcd!int(x.v, x.MD)[0], x.MD);\n    }\n    string toString() {return v.to!string;}\n}\n\nunittest {\n    immutable MD = 10^^9 + 7;\n    alias Mint = DModInt;\n    //negative check\n    assert(Mint(-1, MD).v == 10^^9 + 6);\n    assert(Mint(-1L, MD).v == 10^^9 + 6);\n    Mint a = Mint(48, MD);\n    Mint b = Mint.inv(a);\n    assert(b.v == 520833337);\n    Mint c = Mint(15, MD);\n    Mint d = Mint(3, MD);\n    assert((c/d).v == 5);\n}\n/* IMPORT /Users/yosupo/Program/dcomp/source/dcomp/numeric/primitive.d */\n// module dcomp.numeric.primitive;\n\nimport std.traits;\n\nT pow(T, U)(T x, U n) { return pow(x, n, T(1)); }\nT pow(T, U)(T x, U n, T e) {\n    while (n) {\n        if (n & 1) e *= x;\n        x *= x;\n        n /= 2;\n    }\n    return e;\n}\n\nunittest {\n    assert(pow(3, 5) == 243);\n    assert(pow(3, 5, 2) == 486);\n}\n\nT lcm(T)(in T a, in T b) {\n    import std.numeric : gcd;\n    return a / gcd(a,b) * b;\n}\n\nunittest {\n    assert(lcm(2, 4) == 4);\n    assert(lcm(3, 5) == 15);\n    assert(lcm(1, 1) == 1);\n    assert(lcm(0, 100) == 0);\n}\n\n//a*T[0]+b*T[1]=T[2], T[2]=gcd\n//todo: to binary extgcd\nT[3] extGcd(T)(in T a, in T b) \nif (!isIntegral!T || isSigned!T) //unsignedはNG\n{\n    if (b==0) {\n        return [1, 0, a];\n    } else {\n        auto e = extGcd(b, a%b);\n        return [e[1], e[0]-a/b*e[1], e[2]];\n    }\n}\n\nunittest {\n    import std.numeric : gcd;\n    foreach (i; 0..100) {\n        foreach (j; 0..100) {\n            auto e = extGcd(i, j);\n            assert(e[2] == gcd(i, j));\n            assert(e[0] * i + e[1] * j == e[2]);\n        }\n    }\n}\n\nT[] factTable(T)(size_t length) {\n    import std.range : take, recurrence;\n    import std.array : array;\n    return T(1).recurrence!((a, n) => a[n-1]*T(n)).take(length).array;\n}\n\n// optimize\nT[] invFactTable(T)(size_t length) {\n    import std.range : take, recurrence;\n    import std.array : array;\n    return T(1).recurrence!((a, n) => a[n-1]/T(n)).take(length).array;\n}\n\nunittest {\n    import std.stdio;\n//     import dcomp.numeric.modint;\n    alias Mint = ModInt!(10^^9 + 7);\n    auto r = factTable!Mint(20);\n    Mint a = 1;\n    assert(r[0] == Mint(1));\n    foreach (i; 1..20) {\n        a *= Mint(i);\n        assert(r[i] == a);\n    }\n    auto p = invFactTable!Mint(20);\n    foreach (i; 1..20) {\n        assert((r[i]*p[i]).v == 1);\n    }\n}\n"
  },
  {
    "language": "D",
    "code": "import std.algorithm, std.container, std.conv, std.math, std.range, std.typecons, std.stdio, std.string;\n\nauto rdsp(){return readln.splitter;}\nvoid pick(R,T)(ref R r,ref T t){t=r.front.to!T;r.popFront;}\nvoid pickV(R,T...)(ref R r,ref T t){foreach(ref v;t)pick(r,v);}\nvoid readV(T...)(ref T t){auto r=rdsp;foreach(ref v;t)pick(r,v);}\n\nvoid main()\n{\n  int n; readV(n);\n\n  auto a = new int[](n), op = new string[](n), rd = rdsp;\n  pick(rd, a[0]); op[0] = \"+\";\n  foreach (i; 1..n) pickV(rd, op[i], a[i]);\n\n  auto dp = new long[][](n+1, 3);\n  foreach (ref dpi; dp) dpi[] = -10L^^17;\n  dp[0][0] = 0;\n\n  foreach (i; 0..n) {\n    if (op[i] == \"+\") {\n      auto r0 = dp[i][0]+a[i];\n      auto r1 = dp[i][1]-a[i];\n      auto r2 = dp[i][2]+a[i];\n      dp[i+1][0] = max(r0, r1, r2);\n      dp[i+1][1] = max(r1, r2);\n      dp[i+1][2] = r2;\n    } else {\n      auto r1 = max(dp[i][0], dp[i][2])-a[i];\n      auto r2 = dp[i][1]+a[i];\n      dp[i+1][0] = max(r1, r2);\n      dp[i+1][1] = max(r1, r2);\n      dp[i+1][2] = r2;\n    }\n  }\n\n  writeln(dp[$-1][0]);\n}\n"
  },
  {
    "language": "Bash",
    "code": "#include<cstdio>\n#include<cstring>\n#include<algorithm>\n#define SF scanf\n#define PF printf\n#define MAXN 100010\nusing namespace std;\ntypedef long long ll;\nint n;\nint a[MAXN];\nbool flag[MAXN];\nchar s[20];\nll pre[MAXN];\nll sum,ans;\nint main(){\n\tSF(\"%d\",&n);\n\tflag[1]=0;\n\tSF(\"%d\",&a[1]);\n\tfor(int i=2;i<=n;i++){\n\t\tSF(\"%s\",s);\n\t\tif(s[0]=='-')\n\t\t\tflag[i]=1;\n\t\tSF(\"%d\",&a[i]);\n\t}\n\tfor(int i=n;i>=1;i--)\n\t\tpre[i]=pre[i+1]+a[i];\n\tint las=1;\n\twhile(flag[las]==0&&las<=n){\n\t\tsum+=a[las];\n\t\tlas++;\n\t}\n\twhile(las<=n){\n\t\tint las1=las+1;\n\t\tll sum1=0;\n\t\twhile(flag[las1]==0&&las1<=n){\n\t\t\tsum1+=a[las1];\n\t\t\tlas1++;\n\t\t}\n\t\tif(las1<=n)\n\t\t\tans=max(ans,sum-sum1-a[las]+pre[las1]);\n\t\tlas=las1;\n\t\tsum-=a[las];\n\t\tsum+=sum1;\n\t}\n\tans=max(ans,sum);\n\tPF(\"%lld\",ans);\n}\t"
  },
  {
    "language": "Bash",
    "code": "#include <bits/stdc++.h>\n#include <ext/pb_ds/assoc_container.hpp>\n#include <ext/pb_ds/tree_policy.hpp>\nusing namespace __gnu_pbds;\nusing namespace std;\n#define ll long long int\n#define ordered_set tree < ll ,  null_type ,  less<ll> ,  rb_tree_tag ,  tree_order_statistics_node_update >\n//added two more functions to set\n//(1)*(set.find_by_order(k))[kth element in the sorted set] \n//(2)set.order_of_key(k)[count of elements strictly less than k]\ntypedef vector< int > vi;\ntypedef vector< ll > lvi;\ntypedef vector< vi > vvi;\ntypedef vector< lvi > lvvi;\ntypedef pair< int,int > ii;\ntypedef pair< ll,ll > lii;\n#define sz(a) int((a).size())\n#define pb push_back\n#define all(c) (c).begin(),(c).end()\n#define tr(c,i) for(auto i = (c).begin(); i != (c).end(); i++)//remember i is an iterator\n#define present(c,x) ((c).find(x) != (c).end())//for sets,maps,multimaps\n#define cpresent(c,x) (find(all(c),x) != (c).end())//for vectors\n#define tc(t) int (t); cin>>(t);while((t)--)\n#define ff first\n#define ss second\n#define mp make_pair\n#define ld long double\n#define ull unsigned long long int\n#define mod 1000000007\nstring s;\nlvi v;\nlvvi dp;\nll n,y;\nll recurs(int idx,int state)\n{\n\tif(idx>=n) return 0LL;\n\tif(dp[idx][state]!=((ll)-1e15)) return dp[idx][state];\n\tif(s[idx]=='-')\n\t{\n\t\tif(state==0)\n\t\t{\n\t\t\tdp[idx][state]=max(recurs(idx+1,state)-v[idx],recurs(idx+1,state+1)-v[idx]);\n\t\t}\n\t\tif(state==1)\n\t\t{\n\n\t\t\tdp[idx][state]=max(recurs(idx+1,state-1)+v[idx],max(recurs(idx+1,state)+v[idx],recurs(idx+1,state+1)+v[idx]));\n\t\t}\n\t\tif(state==2)\n\t\t{\n\n\t\t\tdp[idx][state]=max(recurs(idx+1,state)-v[idx],recurs(idx+1,state-1)-v[idx]);\n\t\t}\n\t}\n\telse\n\t{\n\t\tif(state==0)\n\t\t{\n\t\t\tdp[idx][state]=recurs(idx+1,state)+v[idx];\n\t\t}\n\t\tif(state==1)\n\t\t{\n\n\t\t\tdp[idx][state]=max(recurs(idx+1,state-1)-v[idx],recurs(idx+1,state)-v[idx]);\n\t\t}\n\t\tif(state==2)\n\t\t{\n\t\t\t\n\t\t\tdp[idx][state]=max(recurs(idx+1,state)+v[idx],recurs(idx+1,state-1)+v[idx]);\n\t\t}\n\t}\n\tcout<<idx<<\" \"<<state<<\" \"<<dp[idx][state]<<endl;\n\treturn dp[idx][state];\n}\nint main()\n{\n\tios_base::sync_with_stdio(false);\n    cin.tie(NULL);\t\n\tcin>>n>>y;\n\tdp.assign(n+2,lvi(4,-1e15));\n\tfor(int i=1;i<n;i++)\n\t{\n\t\tchar ch;\n\t\tcin>>ch;\n\t\tll x;\n\t\tcin>>x;\n\t\ts.pb(ch);\n\t\tv.pb(x);\n\t}\n\tll ans=recurs(0,0)+y;\n\tcout<<ans<<endl;\n\treturn 0;\n}"
  },
  {
    "language": "Bash",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\nlong long  a[100005];\nchar s[100005];\nint n;\nlong long dp[100005][3];\nint main()\n{\n    ios::sync_with_stdio(0);\n    cin>>n>>a[0];\n    for(int i =1;i<n;i++)\n        cin>>s[i]>>a[i];\n    for(int i =0;i<n;i++)\n        for(int j =0;j<3;j++)\n          dp[i][j]=-1e15;\n    dp[0][0]=a[0];\n    for(int i =1;i<n;i++)\n    {\n        dp[i][1]=dp[i-1][1];\n        dp[i][2]=dp[i-1][2];\n        dp[i][0]=dp[i-1][0];\n      //  cout<<a[i]<<\" \"<<s[i]<<endl;\n     //   cout<<dp[i][0]<<\" \"<<dp[i][1]<<\" \"<<dp[i][2]<<endl;\n        if(s[i]=='-')\n        {\n             dp[i][0]-=a[i];\n             dp[i][1]+=a[i];\n             dp[i][2]-=a[i];\n             dp[i][2]=max(dp[i][1],dp[i][2]);\n             dp[i][1]=max(dp[i][0],dp[i][1]);\n        }\n        else\n        {\n             dp[i][0]+=a[i];\n             dp[i][1]-=a[i];\n             dp[i][2]+=a[i];\n        }\n        dp[i][1]=max(dp[i][2],dp[i][1]);\n        dp[i][0]=max(dp[i][1],dp[i][0]);\n     // cout<<dp[i][0]<<\" \"<<dp[i][1]<<\" \"<<dp[i][2]<<endl;\n    }\n    cout<<dp[n-1][0]<<endl;\n}\n"
  },
  {
    "language": "Bash",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\nconst int maxn=1e5+10;\nll a[maxn];\nll dp[2][maxn];\nll cnt[2][maxn];\nchar op[10];\nint main(){\n    int n;\n    scanf(\"%d\",&n);\n    scanf(\"%lld\",&a[1]);\n    for(int i=2;i<=n;i++) {\n        scanf(\"%s %lld\",op,&a[i]);\n        if(op[0]=='-')a[i]=-a[i];\n    }\n    ll ans=0;\n    int beg=1;\n    while(beg<=n&&a[beg]>=0) {\n        ans+=a[beg];\n        beg++;\n    }\n    dp[0][beg]=dp[1][beg]=a[beg];\n    cnt[1][beg]=1;\n    for(int i=beg+1;i<=n;i++){\n        if(a[i]<0){\n            dp[0][i]=max(dp[1][i-1],dp[0][i-1])+a[i];\n            cnt[0][i]=dp[1][i-1]>=dp[0][i-1]?cnt[1][i-1]+1:cnt[0][i-1];\n            dp[1][i]=max(dp[0][i-1]+a[i],dp[1][i-1]-a[i]);\n            cnt[1][i]=dp[1][i-1]-a[i]>dp[0][i-1]+a[i]?cnt[1][i-1]:cnt[0][i-1]+1;\n        }else {\n            if(dp[1][i-1]>dp[0][i-1]&&cnt[1][i-1]){\n                dp[0][i]=dp[1][i-1]+a[i];\n                cnt[0][i]=cnt[1][i-1]-1;\n            }else{\n                dp[0][i]=dp[0][i-1]+a[i];\n                cnt[0][i]=cnt[0][i-1];\n            }\n            if(dp[0][i-1]>dp[1][i-1]&&cnt[0][i-1]){\n                dp[1][i]=dp[0][i-1]-a[i];\n                cnt[1][i]=cnt[0][i-1]-1;\n            }else {\n                dp[1][i]=dp[1][i-1]-a[i];\n                cnt[1][i]=cnt[1][i-1];\n            }\n        }\n    }\n//    for(int i=1;i<=n;i++) cout<<dp[0][i]<<\" \";\n//    cout<<endl;\n//    for(int i=1;i<=n;i++) cout<<dp[1][i]<<\" \";\n//    cout<<endl;\n//    for(int i=1;i<=n;i++) cout<<cnt[0][i]<<\" \";\n//    cout<<endl;\n//    for(int i=1;i<=n;i++) cout<<cnt[1][i]<<\" \";\n//    cout<<endl;\n    cout<<ans+max(dp[0][n],dp[1][n])<<endl;\n}\n"
  },
  {
    "language": "Nim",
    "code": "import strutils\nimport sequtils\nimport algorithm\nimport math\nimport queues\nimport tables\nimport logging\nimport future\n\nconst INF* = int(1e18 + 373)\n\nwhen not defined(release):\n  addHandler(newFileLogger(stderr, lvlAll, \"[ $levelname ] \"))\n\nproc readInt1*(): int = stdin.readLine().strip().parseInt()\nproc readInt2*(): (int, int) =\n    let v = stdin.readLine().strip().split().map(parseInt)\n    return (v[0], v[1])\nproc readInt3*(): (int, int, int) =\n    let v = stdin.readLine().strip().split().map(parseInt)\n    return (v[0], v[1], v[2])\n\nproc readSeq*(): seq[string] = stdin.readLine().strip().split()\nproc readSeq*(n: Natural): seq[string] =\n  result = newSeq[string](n)\n  for i in 0..<n:\n    result[i] = stdin.readLine().strip()\n\ntype seq2*[T] = seq[seq[T]]\nproc newSeq2*[T](n1, n2: Natural): seq2[T] = newSeqWith(n1, newSeq[T](n2))\n\n#------------------------------------------------------------------------------#\nproc solve(n: int; op: seq[char]; num: seq[int]): int =\n  var dp = newSeq2[int](n + 1, 3)\n  dp[0][0] = 0\n  dp[0][1] = -INF\n  dp[0][2] = -INF\n  for i in 1..n:\n    let a = num[i - 1]\n    let dp0 = dp[i - 1][0]\n    let dp1 = dp[i - 1][1]\n    let dp2 = dp[i - 1][2]\n\n    case op[i - 1]:\n    of '+':\n      dp[i][0] = max([dp0 + a, dp1 + a, dp2 + a])\n      dp[i][1] = max([dp1 - a, dp2 + a])\n      dp[i][2] = dp2 + a\n    of '-':\n      dp[i][0] = max([dp0 - a, dp1 + a, dp2 + a])\n      dp[i][1] = max([dp0 - a, dp1 + a, dp2 + a])\n      dp[i][2] = max([dp1 + a, dp2 + a])\n    else: discard\n\n  return max([ dp[n][0], dp[n][1], dp[n][2] ])\n\nproc main() =\n  let n = readInt1()\n  let a = stdin.readLine().split()\n\n  var op = newSeq[char](n)\n  var num = newSeq[int](n)\n\n  op[0] = '+'\n  num[0] = a[0].parseInt()\n  var p = 1\n  for i in 1..<n:\n    op[i] = a[p][0]\n    num[i] = a[p + 1].parseInt()\n    p += 2\n\n  echo solve(n, op, num)\n\nmain()\n\n"
  },
  {
    "language": "Python",
    "code": "import sys\n\nn = int(next(sys.stdin).strip())\nitems = next(sys.stdin).strip().split()\n\ncache = {(i, i + 1): (int(items[2 * i]), int(items[2 * i])) for i in range(n)}\n\n\ndef value(l, r):\n    if (l, r) in cache:\n        return cache[(l, r)]\n\n    lower, upper = float('inf'), float('-inf')\n    for c in range(l + 1, r):\n        ll, lu = value(l, c)\n        rl, ru = value(c, r)\n        op = items[2 * c - 1]\n        if op == '+':\n            lower = min(lower, ll + rl)\n            upper = max(upper, lu + ru)\n        elif op == '-':\n            lower = min(lower, ll - ru)\n            upper = max(upper, lu - rl)\n\n    cache[(l, r)] = (lower, upper)\n    return lower, upper\n\nlower, upper = value(0, n)\nprint(upper)\n"
  },
  {
    "language": "Python",
    "code": "n = input()\ns = map(int, ('+ ' + raw_input()).replace('+ ', '+').replace('- ', '-').split())\ns0 = [abs(x) for x in s]\nt = filter(lambda x: s[x + 1] < 0, xrange(n - 1)) + [n - 1] * 2\nfor i in xrange(1, n):\n\ts[i] += s[i - 1]\n\ts0[i] += s0[i - 1]\nprint max([s0[n - 1] - 2 * s0[t[i + 1]] + s0[t[i]] + s[t[i]] for i in xrange(len(t) - 1)])\n"
  },
  {
    "language": "Python",
    "code": "n = int(input())\nipt = input().split()\nnode = [int(ipt[0])]\nplus = n\nwhile plus > 1 and ipt[2*plus-1] == '+':\n    node[0] += int(ipt[2*plus])\n    plus -= 1\nfor i in range(plus):\n    if ipt[2*i+1] == '+':\n        node[-1] += int(ipt[2*i+2])\n    else:\n        node.append(int(ipt[2*i+2]))\nif len(node) == 1:\n    print(node[0])\nelse:\n    print(sum(node) - 2*node[1])"
  },
  {
    "language": "Python",
    "code": "n = input()\ncode = raw_input().split()\n# DP(N, <parentheses nested>)\na = int(code[0]); b = c = -10**18\nfor op, v in zip(code[1::2], map(int,code[2::2])):\n    if op is \"+\":\n        d = max(b-v, c+v)\n        a,b,c = max(a+v, d), d, c+v\n    else:\n        d = max(b+v, c-v)\n        a,b,c = max(a-v, d), max(a-v, d), d\nprint max(a, b, c)"
  },
  {
    "language": "Python",
    "code": "n = input()\ncode = raw_input().split()\na = int(code[0]); b = c = -10**18\nfor op, v in zip(code[1::2], map(int,code[2::2])):\n    if op is \"+\":\n        b = max(b-v, c+v)\n        c += v\n        a = max(a+v, b)\n    else:\n        c = max(b+v, c-v)\n        a = b = max(a-v, c)\nprint max(a, b, c)"
  },
  {
    "language": "Python",
    "code": "n = int(input())\na = list(map(str,input().split()))\ndp = [[-float(\"inf\")] *4 for i in range(n+1)]\ndp[0][0] = 0\nfor i in range(len(a)):\n    b = i//2+1\n    if a[i] == \"-\":\n        tmp = [-float(\"inf\"),0,0,0]\n        for j in range(3):\n            tmp[j+1] = dp[b][j]\n        dp[b] = tmp\n        continue\n    elif a[i] == \"+\":\n        continue\n    for j in range(4):\n        for k in range(3):\n            if j >= k:\n                dp[b][k] = max(dp[b][k],dp[b-1][j]+((-1)**j)*int(a[i]))\nprint(dp[n][0])\n    "
  },
  {
    "language": "Python",
    "code": "#!/usr/bin/env python3\n\n\ndef solve(n):\n\n    s = input()\n    sum_a = 0\n    sum_n = 0\n    sum_np = 0\n    min_sum_np = 10 ** 15\n\n    j = s.find('-')\n    if j < 0:\n        return sum(list(map(int, s.split(' + '))))\n\n    sum_a = sum(list(map(int, s[:j - 1].split(' + '))))\n    j += 2\n    s += ' '\n    len_s = len(s)\n    sign = -1\n    w = ''\n    while j < len_s:\n        ch = s[j]\n        j += 1\n        if ch == ' ':\n            if len(w):\n                a = int(w)\n                sum_a += a\n                w = ''\n                if sign < 0:\n                    sum_n += a\n                    sum_np = 0\n                else:\n                    sum_np += a\n        elif ch == '+':\n            sign = 1\n        elif ch == '-':\n            min_sum_np = min(min_sum_np, sum_n + sum_np)\n            sign = -1\n        else:\n            w += ch\n\n    min_sum_np = min(min_sum_np, sum_n + sum_np)\n    return sum_a - 2 * min_sum_np\n\n\ndef main():\n    n = input()\n    n = int(n)\n\n    print(solve(n))\n\n\nif __name__ == '__main__':\n    main()\n\n"
  },
  {
    "language": "Python",
    "code": "from collections import deque\n\nn = int(raw_input())\na = deque(map(str, raw_input().split()))\n\nm = int(a.popleft())\nb = deque([])\nwhile True:\n    if len(a) == 0:\n        b.append(m)\n        break\n    else:\n        op = a.popleft()\n        if op == '+':\n            m += int(a.popleft())\n        else:\n            b.append(m)\n            m = int(a.popleft())\n\nif len(b) == 1:\n    print b.popleft()\nelse:\n    h = b.popleft() - b.popleft()\n    print h + sum(b)"
  },
  {
    "language": "Python",
    "code": "n = int(input())\nipt = input().split()\nnode = [int(ipt[0])]\nplus = n-1\nwhile plus > 0 and ipt[2*plus-1] == '+':\n    node[0] += int(ipt[2*plus])\n    plus -= 1\nfor i in range(plus):\n    if ipt[2*i+1] == '+':\n        node[-1] += int(ipt[2*i+2])\n    else:\n        node.append(int(ipt[2*i+2]))\nif len(node) == 1:\n    print(node[0])\nelse:\n    print(sum(node) - 2*node[1])"
  },
  {
    "language": "Python",
    "code": "n = int(input())\nipt = input().split()\na = [int(ipt[i]) for i in range(0, 2*n,2)] + [0]\nopr = [''] + [ipt[i] for i in range(1, 2*n-1, 2)] + ['-']\nmax_v = a[0]\nfor i in range(1,n):\n    if opr[i] == '+':\n        max_v += a[i]\n    else:\n        max_v -= a[i]\n\ns = sum(a)\ncur = 0\nfor i in range(1,n+1):\n    if opr[i] == '-':\n        if cur != 0:\n            max_v = max(max_v, s-2*cur)\n        cur = a[i]\n    else:\n        if cur != 0:\n            cur += a[i]\nprint(max_v)"
  },
  {
    "language": "Python",
    "code": "n = int(input())\nipt = input().split()\nnode = [int(ipt[0])]\nplus = n-1\nwhile plus > 0 and ipt[2*plus] == '+':\n    node[0] += int(ipt[2*plus+1])\n    plus -= 1\nfor i in range(plus):\n    if ipt[2*i+1] == '+':\n        node[-1] += int(ipt[2*i+2])\n    else:\n        node.append(int(ipt[2*i+2]))\nif len(node) == 1:\n    print(node[0])\nelse:\n    print(sum(node) - 2*node[1])"
  },
  {
    "language": "Python",
    "code": "input()\nsm = de = 0\nans = 10 ** 15\nfor s in input().split('-'):\n    a = list(map(int, s.split('+')))\n    if sm:\n        ans = min(ans, sum(a) + de)\n        de += a[0]\n    sm += sum(a)\nprint(sm - 2 * ans)"
  },
  {
    "language": "Python",
    "code": "n = input()\ns = map(int, ('+ ' + raw_input()).replace('+ ', '+').replace('- ', '-').split())\ns0 = [abs(x) for x in s]\nfor i in xrange(1, n):\n\ts0[i] += s0[i - 1]\nloc = filter(lambda x: s[x] < 0, xrange(n)) + [n, n]\nprint max(sum(s), max([s0[n - 1] - (s0[loc[i + 1] - 1] - s0[loc[i] - 1]) * 2 for i in xrange(len(loc) - 1)]))\n"
  },
  {
    "language": "Python",
    "code": "n = input()\ns = map(int, ('+ ' + raw_input()).replace('+ ', '+').replace('- ', '-').split())\ns0 = [abs(x) for x in s]\nfor i in xrange(1, n):\n\ts0[i] += s0[i - 1]\nloc = filter(lambda x: s[x] < 0, xrange(n))\nprint max(sum(s), max([s0[n - 1] - (s0[loc[i + 1] - 1] - s0[loc[i] - 1]) * 2 for i in xrange(len(loc) - 1)]))\n"
  },
  {
    "language": "Python",
    "code": "n = int(input())\nipt = input().split()\na = [int(ipt[i]) for i in range(0, 2*n+1,2)] + [0]\nopr = [''] + [ipt[i] for i in range(1, 2*n, 2)] + ['-']\nmax_v = a[0]\nfor i in range(1,n):\n    if opr[i] == '+':\n        max_v += a[i]\n    else:\n        max_v -= a[i]\n\ns = sum(a)\ncur = 0\nfor i in range(1,n+1):\n    if opr[i] == '-':\n        if cur != 0:\n            max_v = max(max_v, s-2*cur)\n        cur = a[i]\n    else:\n        if cur != 0:\n            cur += a[i]\nprint(max_v)"
  },
  {
    "language": "Python",
    "code": "input()\nsm = de = 0\nans = 10 ** 15\nfor s in (input() + \"-0\").split('-'):\n    a = list(map(int, s.split('+')))\n    if sm:\n        ans = min(ans, sum(a) + de)\n        de += a[0]\n    sm += sum(a)\nprint(sm - 2 * ans)"
  },
  {
    "language": "Python",
    "code": "N = int(input())\nM = list(input().split())\nmini = 0\nans = 0\nfor s in M:\n    if s == '-':\n        mini += 1\n    elif s == '+':\n        pass\n    else:\n        s = int(s)\n        if mini == 1:\n            ans -= s\n        else:\n            ans += s\nprint(max(ans,eval(''.join(M))))"
  },
  {
    "language": "Python",
    "code": "#include<bits/stdc++.h>\n//using namespace std;\n#pragma GCC target(\"avx\")\n#pragma GCC optimize(\"O3\")\n#pragma GCC optimize(\"unroll-loops\")\n#pragma GCC target(\"sse,sse2,sse3,ssse3,sse4,popcnt,abm,mmx,avx,tune=native\")\n#define rep(i,j,n) for(ll i=(ll)(j);i<(ll)(n);i++)\n#define REP(i,j,n) for(ll i=(ll)(j);i<=(ll)(n);i++)\n#define per(i,j,n) for(ll i=(ll)(j);(ll)(n)<=i;i--)\n#define ll long long\n#define ALL(a) (a).begin(),(a).end()\n#define disup(A,key) distance(A.begin(),upper_bound(ALL(A),(ll)(key)))\n#define dislow(A,key) distance(A.begin(),lower_bound(ALL(A),(ll)(key)))\n#define pb emplace_back\n#define mp std::make_pair\n//\n#define endl \"\\n\"\n//using std::endl;\nusing std::cin;\nusing std::cout;\nusing std::vector;\nusing std::string;\nusing std::upper_bound;\nusing std::lower_bound;\nusing vi=vector<ll>;\nusing vii=vector<vi>;\nusing pii=std::pair<ll,ll>;\n//\nconstexpr ll MOD=1e9+7;\n//constexpr ll MOD=998244353; \n//constexpr ll MOD=10000000;\n//constexpr ll MOD=1e4;\n//constexpr ll MOD=1e5;\nconstexpr ll MAX=3e6;\nconstexpr ll inf=(1ll<<60);\ntemplate<class T>\nclass prique :public std::priority_queue<T, std::vector<T>, std::greater<T>> {};\ntemplate<typename T>\nstruct Segment_tree{\n    ll N;\n    T mem;\n    vector<T> node;\n    Segment_tree(vector<T> &X,T m):mem(m){\n        ll sz=X.size();\n        N=1;\n        while(N<sz) N*=2;\n        node.resize(2*N-1,mem);\n        rep(i,0,sz) node[N-1+i]=X[i];\n        per(i,N-2,0){\n            node[i]=Compare(node[i*2+1],node[i*2+2]);\n        }\n    }\n    T Compare(T &A,T &B){\n        return std::max(A,B);\n    }\n    void update(ll X,T val){\n        X+=N-1;\n        node[X]=val;\n        while(X>0){\n            X=(X-1)/2;\n            node[X]=Compare(node[X*2+1],node[X*2+2]);\n        }\n    }\n    T Query(ll a,ll b,ll now,ll l,ll r){ //[a,b),[l,r)\n        if(r<0) r=N;\n        if(r<=a||b<=l) return mem;\n        if(a<=l&&r<=b) return node[now];\n        auto vl=Query(a,b,now*2+1,l,(l+r)/2),vr=Query(a,b,now*2+2,(l+r)/2,r);\n        return Compare(vl,vr);\n    }\n};\ntemplate<typename T>\nstruct lazy_Segment_tree{\n    int N;\n    vector<T> node,lazy;\n    T INF;\n    lazy_Segment_tree(vector<T> X,T Y):INF(Y){\n        N=1;\n        while(X.size()>N) N*=2;\n        node.resize(2*N-1,Y);\n        lazy.resize(2*N-1);\n        rep(i,0,X.size()) node[i+N-1]=X[i];\n        per(i,N-2,0) node[i]=compare(node[i*2+1],node[i*2+2]);\n    }\n    T compare(T X,T Y){\n        return std::max(X,Y);\n    }\n    T plus(T X,int l,int r){\n        return X;\n    }\n    void eval(int now,int l,int r){\n        if(lazy[now]==0) return;\n        node[now]+=lazy[now];\n        if(r-l>1){\n            lazy[now*2+1]+=plus(lazy[now],l,r);\n            lazy[now*2+2]+=plus(lazy[now],l,r);\n        }\n        lazy[now]=0;\n    }\n    void update(int a,int b,T add,int now=0,int l=0,int r=-1){\n        if(r<0) r=N;\n        eval(now,l,r);\n        if(b<=l||r<=a) return;\n        if(a<=l&&r<=b){\n            lazy[now]+=add;\n            eval(now,l,r);\n        }\n        else{\n            update(a,b,add,now*2+1,l,(r+l)/2);\n            update(a,b,add,now*2+2,(r+l)/2,r);\n            node[now]=compare(node[now*2+1],node[now*2+2]);\n        }\n    }\n    T Query(int a,int b,int now=0,int l=0,int r=-1){\n        if(r<0) r=N;\n        eval(now,l,r);\n        if(b<=l||r<=a) return INF;\n        if(a<=l&&r<=b) return node[now];\n        return compare(Query(a,b,now*2+1,l,(r+l)/2),Query(a,b,now*2+2,(r+l)/2,r));\n    }\n};\nstruct Tree{\n    int N;\n    vii dp;\n    vi dist;\n    Tree(vii edge){\n        N=edge.size();\n        dp.resize(N);\n        dist.resize(N,-1);\n        for(int i=0;i<N;i++) dp[i].resize(30);\n        dist[0]=dp[0][0]=0;\n        std::queue<int> que;\n        que.push(0);\n        while(!que.empty()){\n            int now=que.front(); que.pop();\n            for(int i=0;i<edge[now].size();i++){\n                int next=edge[now][i];\n                if(dist[next]==-1){\n                    dist[next]=dist[now]+1;\n                    que.push(next);\n                    dp[next][0]=now;\n                }\n            }\n        }\n        for(int i=1;i<30;i++){\n            for(int j=0;j<N;j++) dp[j][i]=dp[dp[j][i-1]][i-1];\n        }\n    }\n    int LCA(int X,int Y){\n        if(dist[X]<dist[Y]) std::swap(X,Y);\n        {\n            int Z=dist[X]-dist[Y];\n            for(int i=0;i<30;i++){\n                if(Z&(1<<i)){\n                    X=dp[X][i];\n                }\n            }\n        }\n        if(X==Y) return X;\n        for(int i=29;i>=0;i--){\n            if(dp[X][i]!=dp[Y][i]){\n                X=dp[X][i];\n                Y=dp[Y][i];\n            }\n        }\n        return dp[X][0];\n    }\n};\nstruct Binary_indexed_tree{\n    int N;\n    vi bit;\n    Binary_indexed_tree(int n):N(n){\n        bit.resize(N+1,0);\n    }\n    void add(int x,ll a){\n        for(x;x<=N;x+=(x&-x)) bit[x]+=a;\n    }\n    ll sum(int x){\n        ll ret=0;\n        for(x;x>0;x-=(x&-x)) ret+=bit[x];\n        return ret;\n    }\n    ll lower_bound(ll X){\n        if(sum(N)<X) return -1;\n        ll ret=0,memo=1,sum=0;\n        while(memo*2<=N) memo*=2;\n        while(memo>0){\n            if(memo+ret<=N&&sum+bit[memo+ret]<X){\n                sum+=bit[memo+ret];\n                ret+=memo;\n            }\n            memo/=2;\n        }\n        return ret+1;\n    }\n};\nstruct Union_Find{\n    ll N;\n    vi par;\n    vi siz;\n    Union_Find(int n):N(n){\n        par.resize(N);\n        siz.resize(N,1);\n        rep(i,0,N) par[i]=i;\n    }\n    ll root(ll X){\n        if(par[X]==X) return X;\n        return par[X]=root(par[X]);\n    }\n    bool same(ll X,ll Y){\n        return root(X)==root(Y);\n    }\n    void unite(ll X,ll Y){\n        X=root(X);\n        Y=root(Y);\n        if(X==Y) return;\n        par[X]=Y;\n        siz[Y]+=siz[X];\n        siz[X]=0;\n    }\n    ll size(ll X){\n        return siz[root(X)];\n    }\n};\nlong long modpow(long long a, long long n, long long mod) {\n    long long res = 1;\n    while (n > 0) {\n        if (n & 1) res = res * a % mod;\n        a = a * a % mod;\n        n >>= 1;\n    }\n    return res;\n}\nvi fac,finv,inv;\nvoid COMinit() {\n    fac.resize(MAX);\n    finv.resize(MAX);\n    inv.resize(MAX);\n    fac[0] = fac[1] = 1;\n    finv[0] = finv[1] = 1;\n    inv[1] = 1;\n    for (int i = 2; i < MAX; i++){\n        fac[i] = fac[i - 1] * i % MOD;\n        inv[i] = MOD - inv[MOD%i] * (MOD / i) % MOD;\n        finv[i] = finv[i - 1] * inv[i] % MOD;\n    }\n}\nll COM(ll n,ll r){\n    if(n<r||n<0||r<0) return 0;\n    return fac[n]*finv[r]%MOD*finv[n-r]%MOD;\n}\nvoid comp(vi &A){\n    std::map<ll,ll> memo;\n    rep(i,0,A.size()) memo[A[i]]=0;\n    ll cnt=1;\n    for(auto &p:memo) p.second=cnt++;\n    rep(i,0,A.size()) A[i]=memo[A[i]];\n}\nvoid dec(std::map<ll,ll> &mem,ll X){\n    mem[X]--;\n    if(mem[X]==0) mem.erase(X);\n}\nint main(){\n    std::ios::sync_with_stdio(false);\n    std::cin.tie(nullptr);\n    ll N; cin>>N;\n    vi A(N);\n    vector<char> op(N);\n    rep(i,0,N-1) cin>>A[i]>>op[i];\n    cin>>A[N-1];\n    vii dp(N,vi(3,-inf));\n    dp[0][0]=A[0];\n    rep(i,1,N){\n        if(op[i-1]=='+'){\n            dp[i][0]=std::max({dp[i-1][0],dp[i-1][1],dp[i-1][2]})+A[i];\n            dp[i][1]=dp[i-1][1]-A[i];\n            dp[i][2]=dp[i-1][2]+A[i];\n        }\n        else{\n            dp[i][0]=dp[i-1][0]-A[i];\n            dp[i][1]=std::max(dp[i-1][0]-A[i],dp[i-1][1]+A[i]);\n            dp[i][2]=std::max(dp[i-1][2]+A[i],dp[i-1][1]+A[i]);\n        }\n    }\n    ll ans=-inf;\n    rep(i,0,3) ans=std::max(ans,dp[N-1][i]);\n    cout<<ans<<endl;\n}\n"
  },
  {
    "language": "Python",
    "code": "n = int(input())\nipt = input().split()\nnode = [int(ipt[0])]\nfor i in range(n-1):\n    if ipt[2*i+1] == '+':\n        node[-1] += int(ipt[2*i+2])\n    else:\n        node.append(int(ipt[2*i+2]))\nif len(node) == 1:\n    print(node[0])\nelse:\n    print(sum(node) - 2*node[1])"
  },
  {
    "language": "Python",
    "code": "n = int(input())\nipt = input().split()\na = [int(ipt[i]) for i in range(0, 2*n+1,2)] + [0]\nopr = [''] + [ipt[i] for i in range(1, 2*n, 2)] + ['-']\nmax_v = a[0]\nfor i in range(1,n):\n    if opr[i] == '+':\n        max_v += a[i]\n    else:\n        max_v -= a[i]\n\ns = sum(a)\ncur = 0\nfor i in range(1,n+1):\n    if opr[i] == '-':\n        if cur != 0:\n            max_v = max(max_v, s-2*cur)\n        cur = a[i]\n    else:\n        if cur != 0:\n            cur += a[i]\nprint(max_v)"
  },
  {
    "language": "Python",
    "code": "n = input()\ncode = raw_input().split()\n# DP(N, <parentheses nested>)\ndp = [[0]*3 for i in xrange(n)]\ndp[0] = [int(code[0]), -10**18, -10**18]\nfor i in xrange(1,n):\n    op, a = code[2*i-1: 2*i+1]\n    v = int(a)\n    if op is \"+\":\n        dp[i][0] = max(dp[i-1][0]+v, dp[i-1][1]-v, dp[i-1][2]+v)\n        dp[i][1] = max(              dp[i-1][1]-v, dp[i-1][2]+v)\n        dp[i][2] =                                 dp[i-1][2]+v\n    else:\n        dp[i][0] = max(dp[i-1][0]-v, dp[i-1][1]+v, dp[i-1][2]-v)\n        dp[i][1] = max(dp[i-1][0]-v, dp[i-1][1]+v, dp[i-1][2]-v)\n        dp[i][2] = max(              dp[i-1][1]+v, dp[i-1][2]-v)\nprint max(dp[-1])"
  },
  {
    "language": "Python",
    "code": "import sys\n\nn = int(next(sys.stdin).strip())\nitems = next(sys.stdin).strip().split()\n\ncache = {(i, i + 1): (int(items[2 * i]), int(items[2 * i])) for i in range(n)}\n\n\ndef value(l, r):\n    if (l, r) in cache:\n        return cache[(l, r)]\n\n    lower, upper = float('inf'), float('-inf')\n    for c in range(l + 1, r):\n        ll, lu = value(l, c)\n        rl, ru = value(c, r)\n        op = items[2 * c - 1]\n        if op == '+':\n            lower = min(lower, ll + rl)\n            upper = max(upper, lu + ru)\n        elif op == '-':\n            lower = min(lower, ll - ru)\n            upper = max(upper, lu - rl)\n\n    return lower, upper\n\nlower, upper = value(0, n)\nprint(upper)\n"
  },
  {
    "language": "Python",
    "code": "import sys\ninput = sys.stdin.readline\n\nN = int(input())\nterms = [[]] # マイナス区切り\nop = '+'\nfor x in input().rstrip().split():\n    if x in '+-':\n        op = x\n        continue\n    x = int(x)\n    if op == '+':\n        terms[-1].append(x)\n    else:\n        terms.append([x])\n\n# 何をマイナスにするか\n\nmin_minus = 10 ** 18\nfirst_sum = 0\nfor t in terms[1:]:\n    x = first_sum + sum(t)\n    if x < min_minus:\n        min_minus = x\n    first_sum += t[0]\n\nanswer = sum(sum(t) for t in terms)\nif len(terms) > 1:\n    answer -= 2 * min_minus\n\nprint(answer)"
  },
  {
    "language": "Python",
    "code": "N = int(input())\nM = list(input().split())\nmini = 0\nans = 0\nfor s in M:\n    if s == '-':\n        mini += 1\n    elif s == '+':\n        pass\n    else:\n        s = int(s)\n        if mini == 1:\n            ans -= s\n        else:\n            ans += s\nprint(ans)"
  },
  {
    "language": "Python",
    "code": "n = int(input())\nipt = input().split()\na = [int(ipt[i]) for i in range(0, 2*n,2)] + [0]\nopr = [''] + [ipt[i] for i in range(1, 2*n-1, 2)] + ['-']\nmax_v = a[0]\nfor i in range(1,n):\n    if opr[i] == '+':\n        max_v += a[i]\n    else:\n        max_v -= a[i]\ns = sum(a)\npre_minus = 0\ntotal_pre_minus = 0\ncur = 0\nfor i in range(1,n+1):\n    if opr[i] == '-':\n        if cur != 0:\n            max_v = max(max_v, s-2*cur-total_pre_minus)\n        cur = a[i]\n        total_pre_minus += pre_minus\n        pre_minus = a[i]\n    else:\n        if cur != 0:\n            cur += a[i]\nprint(max_v)"
  },
  {
    "language": "Python",
    "code": "def solve(n, inp):\n    if n == 1:\n        return int(inp[0])\n\n    INF = -(10 ** 18)\n\n    dp1, dp2, dp3 = int(inp[0]), INF, INF\n    for op, a in zip(inp[1::2], inp[2::2]):\n        a = int(a)\n        if op == '+':\n            dp1, dp2, dp3 = dp1 + a, max(dp2 - a, dp3 + a), dp3 + a\n        else:\n            dp1, dp2, dp3 = max(dp1 - a, dp2 + a), max(dp1 - a, dp2 + a), max(dp2 + a, dp3 - a)\n\n    return dp1\n\n\nn = int(input())\ninp = input().split()\nprint(solve(n, inp))\n"
  },
  {
    "language": "Python",
    "code": "\n\"\"\"\n\nhttps://atcoder.jp/contests/arc066/tasks/arc066_c\n\n最終的な式における寄与を考える\n-はどういう効果を持っている？\n\n愚直な方法としてdpがある\ndp[i][mnum] = i番目まで見て、-がmnum個重なってる状態での最大値\n→ O(N^2)\nじつは簡単にできる・保持しておくべき(答えになる)状態はもっと少ないのでは？\n→これ、割と濃厚…か？\n\n-の効果は、それ以降の寄与を反転させる\nなるべく必要のない(無駄な)ところでは戻さない方が最適に近づく\n現状 - で、足すやつを寄与+にしたい! → 戻す\n現状 + で、足すやつを寄与-にしたい！→そんな場合はない\n－直後のやつを寄与+にしたい！→ 戻せる+なら直前で-に戻せばいい\n\nお？？？\nA-B+C-D+E+F-…とやっていく\n一度マイナスのカッコに入ると決めたとする\nA-(B+C-(D+E+F)-G-(H+I))\nすると、次の-以降はすべて+の寄与にできる\n\nあとは耳dp！\ndp[i][state] = i番目まで見て,stateの時の最大値\nstate = 0 #かっこをつけないで計算するモード\nstate = 1 #全引きモード\nstate = 2 #全足しモード\n\n\"\"\"\n\nN = int(input())\n\nA = input().split()\n\ndp = [int(A[0]),float(\"-inf\"),float(\"-inf\")]\n\nfor i in range(N-1):\n\n    op = A[i*2+1]\n    a =  int(A[i*2+2])\n\n    ndp = [float(\"inf\")] * 3\n\n    if op == \"+\":\n\n        ndp[0] = dp[0] + a\n        ndp[1] = dp[1] - a\n        ndp[2] = dp[2] + a\n\n    else:\n\n        ndp[0] = dp[0] - a\n        ndp[1] = dp[0] - a\n        ndp[2] = max(dp[2]+a ,dp[1]+a)\n\n    dp = ndp\n\nprint (max(dp))\n        \n"
  },
  {
    "language": "Python",
    "code": "n = int(input())\nipt = input().split()\nnode = [int(ipt[0])]\nplus = n-1\nwhile plus > 0 and ipt[2*plus-1] == '+':\n    node[0] += int(ipt[2*plus])\n    plus -= 1\nfor i in range(plus):\n    if ipt[2*i+1] == '+':\n        node[-1] += int(ipt[2*i+2])\n    else:\n        node.append(int(ipt[2*i+2]))\nif len(node) == 1:\n    print(node[0])\nelse:\n    print(sum(node) - 2*node[1])"
  },
  {
    "language": "Python",
    "code": "n = int(input())\na = input().split()\nif(n==1):\n    print(a[0])\n    exit()\n\na_num = list( map(int, a[::2]))\na_op = a[1::2]\n\ncumsum = a_num[::]\ncumsum_op = [0] * n\ncumsum_op[0] = a_num[0]\nminus_ind = []\nfor i in range(1,n):\n    cumsum[i] += cumsum[i-1]\n    if(a_op[i-1] == '+'):\n        cumsum_op[i] = cumsum_op[i-1] + a_num[i]\n    else:\n        cumsum_op[i] = cumsum_op[i-1] - a_num[i]\n        minus_ind.append(i)\n\nans = cumsum_op[-1]\nif(len(minus_ind)<2):\n    print(ans)\n    exit()\n\nfor l,r in zip(minus_ind[:-1],minus_ind[1:]):\n    # lまでは符号通り、l,r-1までを減算、r以降を全て加算\n    tmp = cumsum_op[l-1] - (cumsum[r-1] - cumsum[l-1]) + (cumsum[-1] - cumsum[r-1])\n    ans = max(ans,tmp)\n\nprint(ans)"
  },
  {
    "language": "Python",
    "code": "n = int(input())\nipt = input().split()\na = [int(ipt[i]) for i in range(0, 2*n,2)] + [0]\nopr = [''] + [ipt[i] for i in range(1, 2*n-1, 2)] + ['-']\nmax_v = a[0]\nfor i in range(1,n):\n    if opr[i] == '+':\n        max_v += a[i]\n    else:\n        max_v -= a[i]\ns = sum(a)\nprint(s)\npre_minus = 0\ntotal_pre_minus = 0\ncur = 0\nfor i in range(1,n+1):\n    if opr[i] == '-':\n        if cur != 0:\n            max_v = max(max_v, s-2*cur-total_pre_minus)\n        cur = a[i]\n        total_pre_minus += pre_minus\n        pre_minus = a[i]\n    else:\n        if cur != 0:\n            cur += a[i]\nprint(max_v)"
  },
  {
    "language": "Rust",
    "code": "use std::io::*;\nuse utils::*;\nuse std::collections::*;\n\npub fn main() {\n    let i = stdin();\n    let mut o = Vec::new();\n    run(i.lock(), &mut o);\n    stdout().write_all(&o).unwrap();\n}\n\npub fn run<R: BufRead, W: Write>(i: R, o: &mut W) {\n    let mut i = CpReader::new(i);\n    let n = i.read::<usize>();\n    let mut a = Vec::with_capacity(n);\n    a.push(i.read::<isize>());\n    for _ in 1..n {\n        let s = i.read::<char>();\n        let sign = if s == '+' { 1 } else { -1 };\n        a.push(i.read::<isize>() * sign);\n    }\n    writeln!(o, \"{}\", solve(&a)).unwrap();\n}\nfn solve(a: &[isize]) -> isize {\n    let mut ms = VecDeque::new(); // ms[i]はi個 括弧がネストした状態での最大値\n    ms.push_back(0); \n    for &a in a.iter().rev() {\n        let last = *ms.back().unwrap();\n        ms.push_back(last);\n\n        if a < 0 {\n            ms.pop_front();\n            ms.push_back(last);\n        }\n\n        let mut sign = 1;\n        let mut max_idx = 0;\n        let mut max_val = isize::min_value();\n        for i in 0..ms.len() {\n            let val = ms[i] + a * sign;\n            if val > max_val {\n                max_val = val;\n                max_idx = i;\n            }\n            ms[i] = max_val;\n            sign = sign * -1;\n        }\n        ms.truncate(max_idx + 1);\n    }\n    ms[0]\n}\n\npub mod utils {\n    use super::*;\n\n    pub struct CpReader<R: BufRead> {\n        r: R,\n        b: Vec<u8>,\n    }\n    impl<R: BufRead> CpReader<R> {\n        pub fn new(r: R) -> Self {\n            CpReader {\n                r: r,\n                b: Vec::new(),\n            }\n        }\n        pub fn read_word(&mut self) -> &[u8] {\n            self.b.clear();\n            let mut consume = 0;\n            loop {\n                self.r.consume(consume);\n                let b = self.r.fill_buf().unwrap();\n                assert!(b.len() != 0);\n                if let Some(p) = b.iter().position(|&x| x == b' ' || x == b'\\n') {\n                    self.b.extend_from_slice(&b[..p]);\n                    consume = p + 1;\n                    break;\n                }\n                self.b.extend_from_slice(b);\n                consume = b.len();\n            }\n            self.r.consume(consume);\n            &self.b\n        }\n        pub fn read_word_str(&mut self) -> &str {\n            unsafe { std::str::from_utf8_unchecked(self.read_word()) }\n        }\n\n        pub fn read_line(&mut self) -> &[u8] {\n            self.b.clear();\n            self.r.read_until(b'\\n', &mut self.b).unwrap();\n            if self.b.last() == Some(&b'\\n') {\n                &self.b[..self.b.len() - 1]\n            } else {\n                &self.b\n            }\n        }\n        pub fn read_line_str(&mut self) -> &str {\n            unsafe { std::str::from_utf8_unchecked(self.read_line()) }\n        }\n\n        pub fn read<T: CpIn>(&mut self) -> T {\n            T::read_from(self)\n        }\n\n        pub fn read_vec<T: CpIn>(&mut self, n: usize) -> Vec<T> {\n            (0..n).map(|_| self.read()).collect()\n        }\n        pub fn read_iter<'a, T: CpIn>(&'a mut self, n: usize) -> CpIter<'a, R, T> {\n            CpIter {\n                r: self,\n                n: n,\n                _pd: Default::default(),\n            }\n        }\n    }\n    pub struct CpIter<'a, R: BufRead + 'a, T> {\n        r: &'a mut CpReader<R>,\n        n: usize,\n        _pd: std::marker::PhantomData<fn() -> T>,\n    }\n    impl<'a, R: BufRead, T: CpIn> Iterator for CpIter<'a, R, T> {\n        type Item = T;\n        fn next(&mut self) -> Option<T> {\n            if self.n == 0 {\n                None\n            } else {\n                self.n -= 1;\n                Some(self.r.read())\n            }\n        }\n    }\n\n    pub trait CpIn {\n        fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self;\n    }\n\n    impl CpIn for u64 {\n        fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n            read_u64_fast(&mut r.r)\n        }\n    }\n    impl CpIn for i64 {\n        fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n            read_i64_fast(&mut r.r)\n        }\n    }\n    impl CpIn for char {\n        fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n            let b = r.r.fill_buf().unwrap()[0] as char;\n            r.r.consume(1);\n            let s = r.r.fill_buf().unwrap()[0];\n            assert!(s == b' ' || s == b'\\n');\n            r.r.consume(1);\n            b\n        }\n    }\n\n    macro_rules! cpin_tuple {\n        ($($t:ident),*) => {\n            impl<$($t: CpIn),*> CpIn for ($($t),*) {\n                fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n                    ($($t::read_from(r)),*)\n                }\n            }\n        };\n    }\n\n    macro_rules! cpin_cast {\n        ($t_self:ty, $t_read:ty) => {\n            impl CpIn for $t_self {\n                fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n                    <$t_read>::read_from(r) as $t_self\n                }\n            }\n        };\n    }\n    macro_rules! cpin_parse {\n        ($t:ty) => {\n            impl CpIn for $t {\n                fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n                    r.read_word_str().parse().unwrap()\n                }\n            }\n        };\n    }\n    cpin_cast!(usize, u64);\n    cpin_cast!(isize, i64);\n    cpin_cast!(u32, u64);\n    cpin_cast!(u16, u64);\n    cpin_cast!(i32, i64);\n    cpin_cast!(i16, i64);\n    cpin_cast!(i8, i64);\n\n    cpin_parse!(f64);\n\n    cpin_tuple!(T1, T2);\n    cpin_tuple!(T1, T2, T3);\n    cpin_tuple!(T1, T2, T3, T4);\n    cpin_tuple!(T1, T2, T3, T4, T5);\n\n\n    fn read_u64_fast<R: BufRead>(r: &mut R) -> u64 {\n        let mut value = 0;\n        loop {\n            let mut idx = 0;\n            let buf_len;\n            {\n                let buf = r.fill_buf().unwrap();\n                buf_len = buf.len();\n                assert!(buf_len != 0);\n                while idx < buf_len && b'0' <= buf[idx] && buf[idx] <= b'9' {\n                    value = value * 10 + (buf[idx] - b'0') as u64;\n                    idx += 1;\n                }\n            }\n            if idx < buf_len {\n                r.consume(idx + 1);\n                return value;\n            }\n            r.consume(idx);\n        }\n    }\n    fn read_i64_fast<R: BufRead>(r: &mut R) -> i64 {\n        let (consume, sign) = match r.fill_buf().unwrap()[0] {\n            b'+' => (true, 1),\n            b'-' => (true, -1),\n            _ => (false, 1),\n        };\n        if consume {\n            r.consume(1);\n        }\n        read_u64_fast(r) as i64 * sign\n    }\n}"
  },
  {
    "language": "Rust",
    "code": "#[allow(dead_code)]\nfn getline() -> String {\n    let mut res = String::new();\n    std::io::stdin().read_line(&mut res).ok();\n    res\n}\n\n#[allow(unused_macros)]\nmacro_rules! readl {\n    ($t: ty) => {\n        {\n            let s = getline();\n            s.trim().parse::<$t>().unwrap()\n        }\n    };\n    ($( $t: ty),+ ) => {\n        {\n            let s = getline();\n            let mut iter = s.trim().split(' ');\n            ($(iter.next().unwrap().parse::<$t>().unwrap(),)*)\n        }\n    };\n}\n\n#[allow(unused_macros)]\nmacro_rules! readlvec {\n    ($t: ty) => {\n        {\n            let s = getline();\n            let iter = s.trim().split(' ');\n            iter.map(|x| x.parse().unwrap()).collect::<Vec<$t>>()\n        }\n    }\n}\n\n#[allow(unused_macros)]\nmacro_rules! debug { ($x: expr) => { println!(\"{}: {:?}\", stringify!($x), $x) } }\n// macro_rules! debug { ($x: expr) => () }\n\n#[allow(dead_code)]\nfn show<T>(iter: T) -> String\nwhere\n    T: Iterator,\n    T::Item: std::fmt::Display\n{\n    let mut res = iter.fold(String::new(), |sum, e| sum + &format!(\"{} \", e));\n    res.pop();\n    res\n}\n\n#[allow(unused_imports)]\nuse std::cmp::{max, min};\n#[allow(unused_imports)]\nuse std::collections::{BTreeMap, BinaryHeap, HashMap, HashSet};\n#[allow(unused_imports)]\nuse std::collections::btree_map::Entry::{Occupied, Vacant};\n\nfn main() {\n    use std::io::Write;\n    let out = std::io::stdout();\n    let mut out = std::io::BufWriter::new(out.lock());\n    macro_rules! printf { ($($arg:tt)*) => (write!(out, $($arg)*).unwrap()); }\n    macro_rules! printfln { () => (writeln!(out).unwrap()); ($($arg:tt)*) => (writeln!(out, $($arg)*).unwrap()); }\n\n    let n = readl!(usize);\n    let s = readlvec!(String);\n    let mut a = vec![0; n];\n    a[0] = s[0].parse().unwrap();\n    let mut sign = vec![false; n-1];\n    for i in 0..n-1 {\n        sign[i] = s[i*2+1] == \"-\";\n        if sign[i] {\n            a[i+1] = -s[i*2+2].parse::<i64>().unwrap();\n        } else {\n            a[i+1] = s[i*2+2].parse().unwrap();\n        }\n    }\n    let a = a;\n    \n    // debug!(sign);\n    // let mut dp = vec![[0;4]; n+1];\n    // dp[0][1] = -1_000_000_000_000_000;\n    let inf = 1_000_000_000_000_000;\n    let mut dp = [-inf;3];\n    dp[0] = 0;\n    for i in 0..n {\n        let mut nex = [-inf; 3];\n        {\n            let nv = dp[0] + a[i];\n            nex[0] = max(nex[0], nv);\n            if i >= 1 && sign[i-1] {\n                nex[1] = max(nex[1], nv);\n            }\n        }\n        {\n            let nv = dp[1] - a[i];\n            nex[1] = max(nex[1], nv);\n            nex[0] = max(nex[0], nv);\n            if i >= 1 && sign[i-1] {\n                nex[2] = max(nex[2], nv);\n            }\n        }\n        {\n            let nv = dp[2] + a[i].abs();\n            nex[2] = max(nex[2], nv);\n            nex[0] = max(nex[0], nv);\n        }\n        dp = nex;\n        // dp[i+1] = dp[i];\n        // dp[i+1][0] += a[i];\n        // dp[i+1][1] -= a[i];\n        // dp[i+1][0] = max(dp[i+1][0], dp[i][1]+a[i]);\n        // if i >= 2 && sign[i-2] {\n        //     debug!(i);\n        //     dp[i+1][1] = max(dp[i+1][1], dp[i][0]-a[i]);\n        // }\n    }\n    printfln!(\"{}\", max(dp[0], max(dp[1], dp[2])));\n    // debug!(dp);\n    // println!(\"{}\", max(dp[n][0], dp[n][1]));\n\n\n}\n"
  },
  {
    "language": "Rust",
    "code": "use std::io::*;\nuse utils::*;\n\npub fn main() {\n    let i = stdin();\n    let mut o = Vec::new();\n    run(i.lock(), &mut o);\n    stdout().write_all(&o).unwrap();\n}\n\npub fn run<R: BufRead, W: Write>(i: R, o: &mut W) {\n    let mut i = CpReader::new(i);\n    let n = i.read::<usize>();\n    let mut a = Vec::with_capacity(n);\n    for idx in 0..n {\n        let sign = if idx == 0 {\n            1\n        } else {\n            let s = i.read::<char>();\n            dbg!(s);\n            if s == '+' {\n                1\n            } else {\n                -1\n            }\n        };\n        a.push(sign * i.read::<isize>());\n    }\n    writeln!(o, \"{}\", solve(&a)).unwrap();\n}\nfn solve(a: &[isize]) -> isize {\n    let mut ms = vec![0]; // ms[i]はi個 括弧がネストした状態での最大値\n    for &a in a.iter().rev() {\n        if a < 0 {\n            for i in 1..ms.len() {\n                ms[i - 1] = ms[i];\n            }\n        }\n        let last = *ms.last().unwrap();\n        ms.push(last);\n\n\n        let mut sign = 1;\n        let mut max_idx = 0;\n        let mut max_val = isize::min_value();\n        for i in 0..ms.len() {\n            let val = ms[i] + a * sign;\n            if val > max_val {\n                max_val = val;\n                max_idx = i;\n            }\n            ms[i] = val;\n            sign = sign * -1;\n        }\n        ms.truncate(max_idx + 1);\n    }\n    ms[0]\n}\n\npub mod utils {\n    use super::*;\n\n    pub struct CpReader<R: BufRead> {\n        r: R,\n        b: Vec<u8>,\n    }\n    impl<R: BufRead> CpReader<R> {\n        pub fn new(r: R) -> Self {\n            CpReader {\n                r: r,\n                b: Vec::new(),\n            }\n        }\n        pub fn read_word(&mut self) -> &[u8] {\n            self.b.clear();\n            let mut consume = 0;\n            loop {\n                self.r.consume(consume);\n                let b = self.r.fill_buf().unwrap();\n                assert!(b.len() != 0);\n                if let Some(p) = b.iter().position(|&x| x == b' ' || x == b'\\n') {\n                    self.b.extend_from_slice(&b[..p]);\n                    consume = p + 1;\n                    break;\n                }\n                self.b.extend_from_slice(b);\n                consume = b.len();\n            }\n            self.r.consume(consume);\n            &self.b\n        }\n        pub fn read_word_str(&mut self) -> &str {\n            unsafe { std::str::from_utf8_unchecked(self.read_word()) }\n        }\n\n        pub fn read_line(&mut self) -> &[u8] {\n            self.b.clear();\n            self.r.read_until(b'\\n', &mut self.b).unwrap();\n            if self.b.last() == Some(&b'\\n') {\n                &self.b[..self.b.len() - 1]\n            } else {\n                &self.b\n            }\n        }\n        pub fn read_line_str(&mut self) -> &str {\n            unsafe { std::str::from_utf8_unchecked(self.read_line()) }\n        }\n\n        pub fn read<T: CpIn>(&mut self) -> T {\n            T::read_from(self)\n        }\n\n        pub fn read_vec<T: CpIn>(&mut self, n: usize) -> Vec<T> {\n            (0..n).map(|_| self.read()).collect()\n        }\n        pub fn read_iter<'a, T: CpIn>(&'a mut self, n: usize) -> CpIter<'a, R, T> {\n            CpIter {\n                r: self,\n                n: n,\n                _pd: Default::default(),\n            }\n        }\n    }\n    pub struct CpIter<'a, R: BufRead + 'a, T> {\n        r: &'a mut CpReader<R>,\n        n: usize,\n        _pd: std::marker::PhantomData<fn() -> T>,\n    }\n    impl<'a, R: BufRead, T: CpIn> Iterator for CpIter<'a, R, T> {\n        type Item = T;\n        fn next(&mut self) -> Option<T> {\n            if self.n == 0 {\n                None\n            } else {\n                self.n -= 1;\n                Some(self.r.read())\n            }\n        }\n    }\n\n    pub trait CpIn {\n        fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self;\n    }\n\n    impl CpIn for u64 {\n        fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n            read_u64_fast(&mut r.r)\n        }\n    }\n    impl CpIn for i64 {\n        fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n            read_i64_fast(&mut r.r)\n        }\n    }\n    impl CpIn for char {\n        fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n            let b = r.r.fill_buf().unwrap()[0] as char;\n            r.r.consume(1);\n            let s = r.r.fill_buf().unwrap()[0];\n            assert!(s == b' ' || s == b'\\n');\n            r.r.consume(1);\n            b\n        }\n    }\n\n    macro_rules! cpin_tuple {\n        ($($t:ident),*) => {\n            impl<$($t: CpIn),*> CpIn for ($($t),*) {\n                fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n                    ($($t::read_from(r)),*)\n                }\n            }\n        };\n    }\n\n    macro_rules! cpin_cast {\n        ($t_self:ty, $t_read:ty) => {\n            impl CpIn for $t_self {\n                fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n                    <$t_read>::read_from(r) as $t_self\n                }\n            }\n        };\n    }\n    macro_rules! cpin_parse {\n        ($t:ty) => {\n            impl CpIn for $t {\n                fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n                    r.read_word_str().parse().unwrap()\n                }\n            }\n        };\n    }\n    cpin_cast!(usize, u64);\n    cpin_cast!(isize, i64);\n    cpin_cast!(u32, u64);\n    cpin_cast!(u16, u64);\n    cpin_cast!(i32, i64);\n    cpin_cast!(i16, i64);\n    cpin_cast!(i8, i64);\n\n    cpin_parse!(f64);\n\n    cpin_tuple!(T1, T2);\n    cpin_tuple!(T1, T2, T3);\n    cpin_tuple!(T1, T2, T3, T4);\n    cpin_tuple!(T1, T2, T3, T4, T5);\n\n\n    fn read_u64_fast<R: BufRead>(r: &mut R) -> u64 {\n        let mut value = 0;\n        loop {\n            let mut idx = 0;\n            let buf_len;\n            {\n                let buf = r.fill_buf().unwrap();\n                buf_len = buf.len();\n                assert!(buf_len != 0);\n                while idx < buf_len && b'0' <= buf[idx] && buf[idx] <= b'9' {\n                    value = value * 10 + (buf[idx] - b'0') as u64;\n                    idx += 1;\n                }\n            }\n            if idx < buf_len {\n                r.consume(idx + 1);\n                return value;\n            }\n            r.consume(idx);\n        }\n    }\n    fn read_i64_fast<R: BufRead>(r: &mut R) -> i64 {\n        let (consume, sign) = match r.fill_buf().unwrap()[0] {\n            b'+' => (true, 1),\n            b'-' => (true, -1),\n            _ => (false, 1),\n        };\n        if consume {\n            r.consume(1);\n        }\n        read_u64_fast(r) as i64 * sign\n    }\n\n\n}\n\n"
  },
  {
    "language": "Rust",
    "code": "macro_rules! input {\n    (source = $s:expr, $($r:tt)*) => {\n        let mut iter = $s.split_whitespace();\n        let mut next = || { iter.next().unwrap() };\n        input_inner!{next, $($r)*}\n    };\n    ($($r:tt)*) => {\n        let stdin = std::io::stdin();\n        let mut bytes = std::io::Read::bytes(std::io::BufReader::new(stdin.lock()));\n        let mut next = move || -> String {\n            bytes\n                .by_ref()\n                .map(|r| r.unwrap() as char)\n                .skip_while(|c| c.is_whitespace())\n                .take_while(|c| !c.is_whitespace())\n                .collect()\n        };\n        input_inner!{next, $($r)*}\n    };\n}\n\nmacro_rules! input_inner {\n    ($next:expr) => {};\n    ($next:expr, ) => {};\n\n    ($next:expr, $var:ident : $t:tt $($r:tt)*) => {\n        let $var = read_value!($next, $t);\n        input_inner!{$next $($r)*}\n    };\n}\n\nmacro_rules! read_value {\n    ($next:expr, ( $($t:tt),* )) => {\n        ( $(read_value!($next, $t)),* )\n    };\n\n    ($next:expr, [ $t:tt ; $len:expr ]) => {\n        (0..$len).map(|_| read_value!($next, $t)).collect::<Vec<_>>()\n    };\n\n    ($next:expr, chars) => {\n        read_value!($next, String).chars().collect::<Vec<char>>()\n    };\n\n    ($next:expr, usize1) => {\n        read_value!($next, usize) - 1\n    };\n\n    ($next:expr, $t:ty) => {\n        $next().parse::<$t>().expect(\"Parse error\")\n    };\n}\n\nuse std::cmp::max;\n\nfn main() {\n    input!{\n        n: usize,\n        v: [String; 2 * n - 1]\n    }\n    let mut tab = vec![vec![0; 3]; n];\n    tab[0][0] = v[0].parse::<i64>().unwrap();\n    tab[0][1] = i64::min_value();\n    tab[0][2] = i64::min_value();\n    for i in 1..n {\n        let vi = v[2 * i].parse::<i64>().unwrap();\n        if v[2 * i - 1] == \"+\" {\n            tab[i][0] = max(tab[i - 1][0], tab[i - 1][1]) + vi;\n            if max(tab[i - 1][1], tab[i - 1][2]) > i64::min_value() {\n                tab[i][1] = max(tab[i - 1][1], tab[i - 1][2]) - vi;\n            }\n            tab[i][2] = tab[i - 1][2] + vi;\n        } else {\n            tab[i][1] = max(tab[i - 1][0], tab[i - 1][1]) - vi;\n            tab[i][2] = max(tab[i - 1][1], tab[i - 1][2]) + vi;\n        }\n    }\n    println!(\"{}\", tab[n-1].iter().max().unwrap());\n}\n"
  },
  {
    "language": "Rust",
    "code": "use std::io::*;\nuse utils::*;\n\npub fn main() {\n    let i = stdin();\n    let mut o = Vec::new();\n    run(i.lock(), &mut o);\n    stdout().write_all(&o).unwrap();\n}\n\npub fn run<R: BufRead, W: Write>(i: R, o: &mut W) {\n    let mut i = CpReader::new(i);\n    let n = i.read::<usize>();\n    let mut a = Vec::with_capacity(n);\n    for idx in 0..n {\n        let sign = if idx == 0 {\n            1\n        } else {\n            let s = i.read::<char>();\n            if s == '+' {\n                1\n            } else {\n                -1\n            }\n        };\n        a.push(sign * i.read::<isize>());\n    }\n    writeln!(o, \"{}\", solve(&a)).unwrap();\n}\nfn solve(a: &[isize]) -> isize {\n    let mut ms = vec![0]; // ms[i]はi個 括弧がネストした状態での最大値\n    for &a in a.iter().rev() {\n        if a < 0 {\n            for i in 1..ms.len() {\n                ms[i - 1] = ms[i];\n            }\n        }\n        let last = *ms.last().unwrap();\n        ms.push(last);\n\n\n        let mut sign = 1;\n        let mut max_idx = 0;\n        let mut max_val = isize::min_value();\n        for i in 0..ms.len() {\n            let val = ms[i] + a * sign;\n            if val > max_val {\n                max_val = val;\n                max_idx = i;\n            }\n            ms[i] = max_val;\n            sign = sign * -1;\n        }\n        ms.truncate(max_idx + 1);\n        dbg!(&ms);\n    }\n    ms[0]\n}\n\npub mod utils {\n    use super::*;\n\n    pub struct CpReader<R: BufRead> {\n        r: R,\n        b: Vec<u8>,\n    }\n    impl<R: BufRead> CpReader<R> {\n        pub fn new(r: R) -> Self {\n            CpReader {\n                r: r,\n                b: Vec::new(),\n            }\n        }\n        pub fn read_word(&mut self) -> &[u8] {\n            self.b.clear();\n            let mut consume = 0;\n            loop {\n                self.r.consume(consume);\n                let b = self.r.fill_buf().unwrap();\n                assert!(b.len() != 0);\n                if let Some(p) = b.iter().position(|&x| x == b' ' || x == b'\\n') {\n                    self.b.extend_from_slice(&b[..p]);\n                    consume = p + 1;\n                    break;\n                }\n                self.b.extend_from_slice(b);\n                consume = b.len();\n            }\n            self.r.consume(consume);\n            &self.b\n        }\n        pub fn read_word_str(&mut self) -> &str {\n            unsafe { std::str::from_utf8_unchecked(self.read_word()) }\n        }\n\n        pub fn read_line(&mut self) -> &[u8] {\n            self.b.clear();\n            self.r.read_until(b'\\n', &mut self.b).unwrap();\n            if self.b.last() == Some(&b'\\n') {\n                &self.b[..self.b.len() - 1]\n            } else {\n                &self.b\n            }\n        }\n        pub fn read_line_str(&mut self) -> &str {\n            unsafe { std::str::from_utf8_unchecked(self.read_line()) }\n        }\n\n        pub fn read<T: CpIn>(&mut self) -> T {\n            T::read_from(self)\n        }\n\n        pub fn read_vec<T: CpIn>(&mut self, n: usize) -> Vec<T> {\n            (0..n).map(|_| self.read()).collect()\n        }\n        pub fn read_iter<'a, T: CpIn>(&'a mut self, n: usize) -> CpIter<'a, R, T> {\n            CpIter {\n                r: self,\n                n: n,\n                _pd: Default::default(),\n            }\n        }\n    }\n    pub struct CpIter<'a, R: BufRead + 'a, T> {\n        r: &'a mut CpReader<R>,\n        n: usize,\n        _pd: std::marker::PhantomData<fn() -> T>,\n    }\n    impl<'a, R: BufRead, T: CpIn> Iterator for CpIter<'a, R, T> {\n        type Item = T;\n        fn next(&mut self) -> Option<T> {\n            if self.n == 0 {\n                None\n            } else {\n                self.n -= 1;\n                Some(self.r.read())\n            }\n        }\n    }\n\n    pub trait CpIn {\n        fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self;\n    }\n\n    impl CpIn for u64 {\n        fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n            read_u64_fast(&mut r.r)\n        }\n    }\n    impl CpIn for i64 {\n        fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n            read_i64_fast(&mut r.r)\n        }\n    }\n    impl CpIn for char {\n        fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n            let b = r.r.fill_buf().unwrap()[0] as char;\n            r.r.consume(1);\n            let s = r.r.fill_buf().unwrap()[0];\n            assert!(s == b' ' || s == b'\\n');\n            r.r.consume(1);\n            b\n        }\n    }\n\n    macro_rules! cpin_tuple {\n        ($($t:ident),*) => {\n            impl<$($t: CpIn),*> CpIn for ($($t),*) {\n                fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n                    ($($t::read_from(r)),*)\n                }\n            }\n        };\n    }\n\n    macro_rules! cpin_cast {\n        ($t_self:ty, $t_read:ty) => {\n            impl CpIn for $t_self {\n                fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n                    <$t_read>::read_from(r) as $t_self\n                }\n            }\n        };\n    }\n    macro_rules! cpin_parse {\n        ($t:ty) => {\n            impl CpIn for $t {\n                fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n                    r.read_word_str().parse().unwrap()\n                }\n            }\n        };\n    }\n    cpin_cast!(usize, u64);\n    cpin_cast!(isize, i64);\n    cpin_cast!(u32, u64);\n    cpin_cast!(u16, u64);\n    cpin_cast!(i32, i64);\n    cpin_cast!(i16, i64);\n    cpin_cast!(i8, i64);\n\n    cpin_parse!(f64);\n\n    cpin_tuple!(T1, T2);\n    cpin_tuple!(T1, T2, T3);\n    cpin_tuple!(T1, T2, T3, T4);\n    cpin_tuple!(T1, T2, T3, T4, T5);\n\n\n    fn read_u64_fast<R: BufRead>(r: &mut R) -> u64 {\n        let mut value = 0;\n        loop {\n            let mut idx = 0;\n            let buf_len;\n            {\n                let buf = r.fill_buf().unwrap();\n                buf_len = buf.len();\n                assert!(buf_len != 0);\n                while idx < buf_len && b'0' <= buf[idx] && buf[idx] <= b'9' {\n                    value = value * 10 + (buf[idx] - b'0') as u64;\n                    idx += 1;\n                }\n            }\n            if idx < buf_len {\n                r.consume(idx + 1);\n                return value;\n            }\n            r.consume(idx);\n        }\n    }\n    fn read_i64_fast<R: BufRead>(r: &mut R) -> i64 {\n        let (consume, sign) = match r.fill_buf().unwrap()[0] {\n            b'+' => (true, 1),\n            b'-' => (true, -1),\n            _ => (false, 1),\n        };\n        if consume {\n            r.consume(1);\n        }\n        read_u64_fast(r) as i64 * sign\n    }\n}"
  },
  {
    "language": "Rust",
    "code": "use std::io::*;\nuse utils::*;\n\npub fn main() {\n    let i = stdin();\n    let mut o = Vec::new();\n    run(i.lock(), &mut o);\n    stdout().write_all(&o).unwrap();\n}\n\npub fn run<R: BufRead, W: Write>(i: R, o: &mut W) {\n    let mut i = CpReader::new(i);\n    let n = i.read::<usize>();\n    let mut a = Vec::with_capacity(n);\n    for idx in 0..n {\n        let sign = if idx == 0 {\n            1\n        } else {\n            let s = i.read::<char>();\n            if s == '+' {\n                1\n            } else {\n                -1\n            }\n        };\n        a.push(sign * i.read::<isize>());\n    }\n    writeln!(o, \"{}\", solve(&a)).unwrap();\n}\nfn solve(a: &[isize]) -> isize {\n    let mut ms = vec![0]; // ms[i]はi個 括弧がネストした状態での最大値\n    for &a in a.iter().rev() {\n        if a < 0 {\n            for i in 1..ms.len() {\n                ms[i - 1] = ms[i];\n            }\n        }\n        let last = *ms.last().unwrap();\n        ms.push(last);\n\n\n        let mut sign = 1;\n        let mut max_idx = 0;\n        let mut max_val = isize::min_value();\n        for i in 0..ms.len() {\n            let val = ms[i] + a * sign;\n            if val > max_val {\n                max_val = val;\n                max_idx = i;\n            }\n            ms[i] = max_val;\n            sign = sign * -1;\n        }\n        ms.truncate(max_idx + 1);\n    }\n    ms[0]\n}\n\npub mod utils {\n    use super::*;\n\n    pub struct CpReader<R: BufRead> {\n        r: R,\n        b: Vec<u8>,\n    }\n    impl<R: BufRead> CpReader<R> {\n        pub fn new(r: R) -> Self {\n            CpReader {\n                r: r,\n                b: Vec::new(),\n            }\n        }\n        pub fn read_word(&mut self) -> &[u8] {\n            self.b.clear();\n            let mut consume = 0;\n            loop {\n                self.r.consume(consume);\n                let b = self.r.fill_buf().unwrap();\n                assert!(b.len() != 0);\n                if let Some(p) = b.iter().position(|&x| x == b' ' || x == b'\\n') {\n                    self.b.extend_from_slice(&b[..p]);\n                    consume = p + 1;\n                    break;\n                }\n                self.b.extend_from_slice(b);\n                consume = b.len();\n            }\n            self.r.consume(consume);\n            &self.b\n        }\n        pub fn read_word_str(&mut self) -> &str {\n            unsafe { std::str::from_utf8_unchecked(self.read_word()) }\n        }\n\n        pub fn read_line(&mut self) -> &[u8] {\n            self.b.clear();\n            self.r.read_until(b'\\n', &mut self.b).unwrap();\n            if self.b.last() == Some(&b'\\n') {\n                &self.b[..self.b.len() - 1]\n            } else {\n                &self.b\n            }\n        }\n        pub fn read_line_str(&mut self) -> &str {\n            unsafe { std::str::from_utf8_unchecked(self.read_line()) }\n        }\n\n        pub fn read<T: CpIn>(&mut self) -> T {\n            T::read_from(self)\n        }\n\n        pub fn read_vec<T: CpIn>(&mut self, n: usize) -> Vec<T> {\n            (0..n).map(|_| self.read()).collect()\n        }\n        pub fn read_iter<'a, T: CpIn>(&'a mut self, n: usize) -> CpIter<'a, R, T> {\n            CpIter {\n                r: self,\n                n: n,\n                _pd: Default::default(),\n            }\n        }\n    }\n    pub struct CpIter<'a, R: BufRead + 'a, T> {\n        r: &'a mut CpReader<R>,\n        n: usize,\n        _pd: std::marker::PhantomData<fn() -> T>,\n    }\n    impl<'a, R: BufRead, T: CpIn> Iterator for CpIter<'a, R, T> {\n        type Item = T;\n        fn next(&mut self) -> Option<T> {\n            if self.n == 0 {\n                None\n            } else {\n                self.n -= 1;\n                Some(self.r.read())\n            }\n        }\n    }\n\n    pub trait CpIn {\n        fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self;\n    }\n\n    impl CpIn for u64 {\n        fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n            read_u64_fast(&mut r.r)\n        }\n    }\n    impl CpIn for i64 {\n        fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n            read_i64_fast(&mut r.r)\n        }\n    }\n    impl CpIn for char {\n        fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n            let b = r.r.fill_buf().unwrap()[0] as char;\n            r.r.consume(1);\n            let s = r.r.fill_buf().unwrap()[0];\n            assert!(s == b' ' || s == b'\\n');\n            r.r.consume(1);\n            b\n        }\n    }\n\n    macro_rules! cpin_tuple {\n        ($($t:ident),*) => {\n            impl<$($t: CpIn),*> CpIn for ($($t),*) {\n                fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n                    ($($t::read_from(r)),*)\n                }\n            }\n        };\n    }\n\n    macro_rules! cpin_cast {\n        ($t_self:ty, $t_read:ty) => {\n            impl CpIn for $t_self {\n                fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n                    <$t_read>::read_from(r) as $t_self\n                }\n            }\n        };\n    }\n    macro_rules! cpin_parse {\n        ($t:ty) => {\n            impl CpIn for $t {\n                fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n                    r.read_word_str().parse().unwrap()\n                }\n            }\n        };\n    }\n    cpin_cast!(usize, u64);\n    cpin_cast!(isize, i64);\n    cpin_cast!(u32, u64);\n    cpin_cast!(u16, u64);\n    cpin_cast!(i32, i64);\n    cpin_cast!(i16, i64);\n    cpin_cast!(i8, i64);\n\n    cpin_parse!(f64);\n\n    cpin_tuple!(T1, T2);\n    cpin_tuple!(T1, T2, T3);\n    cpin_tuple!(T1, T2, T3, T4);\n    cpin_tuple!(T1, T2, T3, T4, T5);\n\n\n    fn read_u64_fast<R: BufRead>(r: &mut R) -> u64 {\n        let mut value = 0;\n        loop {\n            let mut idx = 0;\n            let buf_len;\n            {\n                let buf = r.fill_buf().unwrap();\n                buf_len = buf.len();\n                assert!(buf_len != 0);\n                while idx < buf_len && b'0' <= buf[idx] && buf[idx] <= b'9' {\n                    value = value * 10 + (buf[idx] - b'0') as u64;\n                    idx += 1;\n                }\n            }\n            if idx < buf_len {\n                r.consume(idx + 1);\n                return value;\n            }\n            r.consume(idx);\n        }\n    }\n    fn read_i64_fast<R: BufRead>(r: &mut R) -> i64 {\n        let (consume, sign) = match r.fill_buf().unwrap()[0] {\n            b'+' => (true, 1),\n            b'-' => (true, -1),\n            _ => (false, 1),\n        };\n        if consume {\n            r.consume(1);\n        }\n        read_u64_fast(r) as i64 * sign\n    }\n}"
  },
  {
    "language": "Rust",
    "code": "use std::io::*;\nuse utils::*;\n\npub fn main() {\n    let i = stdin();\n    let mut o = Vec::new();\n    run(i.lock(), &mut o);\n    stdout().write_all(&o).unwrap();\n}\n\npub fn run<R: BufRead, W: Write>(i: R, o: &mut W) {\n    let mut i = CpReader::new(i);\n    let n = i.read::<usize>();\n    let mut a = Vec::with_capacity(n);\n    a.push(i.read::<isize>());\n    for _ in 1..n {\n        let s = i.read::<char>();\n        let sign = if s == '+' { 1 } else { -1 };\n        let val = i.read::<isize>() * sign;\n        if *a.last().unwrap() > 0 && sign == 1 {\n            *a.last_mut().unwrap() += val;\n        } else {\n            a.push(val);\n        }\n    }\n    writeln!(o, \"{}\", solve(&a)).unwrap();\n}\nfn solve(a: &[isize]) -> isize {\n    let mut ms = vec![0]; // ms[i]はi個 括弧がネストした状態での最大値\n    for &a in a.iter().rev() {\n        if a < 0 {\n            for i in 1..ms.len() {\n                ms[i - 1] = ms[i];\n            }\n        }\n        let last = *ms.last().unwrap();\n        ms.push(last);\n\n\n        let mut sign = 1;\n        let mut max_idx = 0;\n        let mut max_val = isize::min_value();\n        for i in 0..ms.len() {\n            let val = ms[i] + a * sign;\n            if val > max_val {\n                max_val = val;\n                max_idx = i;\n            }\n            ms[i] = max_val;\n            sign = sign * -1;\n        }\n        ms.truncate(max_idx + 1);\n    }\n    ms[0]\n}\n\npub mod utils {\n    use super::*;\n\n    pub struct CpReader<R: BufRead> {\n        r: R,\n        b: Vec<u8>,\n    }\n    impl<R: BufRead> CpReader<R> {\n        pub fn new(r: R) -> Self {\n            CpReader {\n                r: r,\n                b: Vec::new(),\n            }\n        }\n        pub fn read_word(&mut self) -> &[u8] {\n            self.b.clear();\n            let mut consume = 0;\n            loop {\n                self.r.consume(consume);\n                let b = self.r.fill_buf().unwrap();\n                assert!(b.len() != 0);\n                if let Some(p) = b.iter().position(|&x| x == b' ' || x == b'\\n') {\n                    self.b.extend_from_slice(&b[..p]);\n                    consume = p + 1;\n                    break;\n                }\n                self.b.extend_from_slice(b);\n                consume = b.len();\n            }\n            self.r.consume(consume);\n            &self.b\n        }\n        pub fn read_word_str(&mut self) -> &str {\n            unsafe { std::str::from_utf8_unchecked(self.read_word()) }\n        }\n\n        pub fn read_line(&mut self) -> &[u8] {\n            self.b.clear();\n            self.r.read_until(b'\\n', &mut self.b).unwrap();\n            if self.b.last() == Some(&b'\\n') {\n                &self.b[..self.b.len() - 1]\n            } else {\n                &self.b\n            }\n        }\n        pub fn read_line_str(&mut self) -> &str {\n            unsafe { std::str::from_utf8_unchecked(self.read_line()) }\n        }\n\n        pub fn read<T: CpIn>(&mut self) -> T {\n            T::read_from(self)\n        }\n\n        pub fn read_vec<T: CpIn>(&mut self, n: usize) -> Vec<T> {\n            (0..n).map(|_| self.read()).collect()\n        }\n        pub fn read_iter<'a, T: CpIn>(&'a mut self, n: usize) -> CpIter<'a, R, T> {\n            CpIter {\n                r: self,\n                n: n,\n                _pd: Default::default(),\n            }\n        }\n    }\n    pub struct CpIter<'a, R: BufRead + 'a, T> {\n        r: &'a mut CpReader<R>,\n        n: usize,\n        _pd: std::marker::PhantomData<fn() -> T>,\n    }\n    impl<'a, R: BufRead, T: CpIn> Iterator for CpIter<'a, R, T> {\n        type Item = T;\n        fn next(&mut self) -> Option<T> {\n            if self.n == 0 {\n                None\n            } else {\n                self.n -= 1;\n                Some(self.r.read())\n            }\n        }\n    }\n\n    pub trait CpIn {\n        fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self;\n    }\n\n    impl CpIn for u64 {\n        fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n            read_u64_fast(&mut r.r)\n        }\n    }\n    impl CpIn for i64 {\n        fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n            read_i64_fast(&mut r.r)\n        }\n    }\n    impl CpIn for char {\n        fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n            let b = r.r.fill_buf().unwrap()[0] as char;\n            r.r.consume(1);\n            let s = r.r.fill_buf().unwrap()[0];\n            assert!(s == b' ' || s == b'\\n');\n            r.r.consume(1);\n            b\n        }\n    }\n\n    macro_rules! cpin_tuple {\n        ($($t:ident),*) => {\n            impl<$($t: CpIn),*> CpIn for ($($t),*) {\n                fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n                    ($($t::read_from(r)),*)\n                }\n            }\n        };\n    }\n\n    macro_rules! cpin_cast {\n        ($t_self:ty, $t_read:ty) => {\n            impl CpIn for $t_self {\n                fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n                    <$t_read>::read_from(r) as $t_self\n                }\n            }\n        };\n    }\n    macro_rules! cpin_parse {\n        ($t:ty) => {\n            impl CpIn for $t {\n                fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n                    r.read_word_str().parse().unwrap()\n                }\n            }\n        };\n    }\n    cpin_cast!(usize, u64);\n    cpin_cast!(isize, i64);\n    cpin_cast!(u32, u64);\n    cpin_cast!(u16, u64);\n    cpin_cast!(i32, i64);\n    cpin_cast!(i16, i64);\n    cpin_cast!(i8, i64);\n\n    cpin_parse!(f64);\n\n    cpin_tuple!(T1, T2);\n    cpin_tuple!(T1, T2, T3);\n    cpin_tuple!(T1, T2, T3, T4);\n    cpin_tuple!(T1, T2, T3, T4, T5);\n\n\n    fn read_u64_fast<R: BufRead>(r: &mut R) -> u64 {\n        let mut value = 0;\n        loop {\n            let mut idx = 0;\n            let buf_len;\n            {\n                let buf = r.fill_buf().unwrap();\n                buf_len = buf.len();\n                assert!(buf_len != 0);\n                while idx < buf_len && b'0' <= buf[idx] && buf[idx] <= b'9' {\n                    value = value * 10 + (buf[idx] - b'0') as u64;\n                    idx += 1;\n                }\n            }\n            if idx < buf_len {\n                r.consume(idx + 1);\n                return value;\n            }\n            r.consume(idx);\n        }\n    }\n    fn read_i64_fast<R: BufRead>(r: &mut R) -> i64 {\n        let (consume, sign) = match r.fill_buf().unwrap()[0] {\n            b'+' => (true, 1),\n            b'-' => (true, -1),\n            _ => (false, 1),\n        };\n        if consume {\n            r.consume(1);\n        }\n        read_u64_fast(r) as i64 * sign\n    }\n}"
  },
  {
    "language": "Rust",
    "code": "use std::cmp::max;\nuse std::collections::*;\nuse std::io::*;\nuse utils::*;\n\n\npub fn main() {\n    let i = stdin();\n    let mut o = Vec::new();\n    run(i.lock(), &mut o);\n    stdout().write_all(&o).unwrap();\n}\n\npub fn run<R: BufRead, W: Write>(i: R, o: &mut W) {\n    let mut i = CpReader::new(i);\n    let n = i.read();\n\n    let invalid = -100000_000000000;\n    let mut ms = [0, invalid, invalid];\n\n    for idx in 0..n {\n        let s = if idx == 0 { '+' } else { i.read::<char>() };\n        let a = i.read::<isize>();\n        let a = if s == '+' { a } else { -a };\n\n        if a > 0 {\n            ms = [ms[0] + a, ms[1] - a, ms[2] + a];\n        } else {\n            ms = [ms[0] + a, ms[0] + a, max(ms[2] - a, ms[1] - a)];\n        }\n    }\n    let ans = *ms.iter().max().unwrap();\n    writeln!(o, \"{}\", ans).unwrap();\n}\n\npub mod utils {\n    use super::*;\n\n    pub struct CpReader<R: BufRead> {\n        r: R,\n        b: Vec<u8>,\n    }\n    impl<R: BufRead> CpReader<R> {\n        pub fn new(r: R) -> Self {\n            CpReader {\n                r: r,\n                b: Vec::new(),\n            }\n        }\n        pub fn read_word(&mut self) -> &[u8] {\n            self.b.clear();\n            let mut consume = 0;\n            loop {\n                self.r.consume(consume);\n                let b = self.r.fill_buf().unwrap();\n                assert!(b.len() != 0);\n                if let Some(p) = b.iter().position(|&x| x == b' ' || x == b'\\n') {\n                    self.b.extend_from_slice(&b[..p]);\n                    consume = p + 1;\n                    break;\n                }\n                self.b.extend_from_slice(b);\n                consume = b.len();\n            }\n            self.r.consume(consume);\n            &self.b\n        }\n        pub fn read_word_str(&mut self) -> &str {\n            unsafe { std::str::from_utf8_unchecked(self.read_word()) }\n        }\n\n        pub fn read_line(&mut self) -> &[u8] {\n            self.b.clear();\n            self.r.read_until(b'\\n', &mut self.b).unwrap();\n            if self.b.last() == Some(&b'\\n') {\n                &self.b[..self.b.len() - 1]\n            } else {\n                &self.b\n            }\n        }\n        pub fn read_line_str(&mut self) -> &str {\n            unsafe { std::str::from_utf8_unchecked(self.read_line()) }\n        }\n\n        pub fn read<T: CpIn>(&mut self) -> T {\n            T::read_from(self)\n        }\n\n        pub fn read_vec<T: CpIn>(&mut self, n: usize) -> Vec<T> {\n            (0..n).map(|_| self.read()).collect()\n        }\n        pub fn read_iter<'a, T: CpIn>(&'a mut self, n: usize) -> CpIter<'a, R, T> {\n            CpIter {\n                r: self,\n                n: n,\n                _pd: Default::default(),\n            }\n        }\n    }\n    pub struct CpIter<'a, R: BufRead + 'a, T> {\n        r: &'a mut CpReader<R>,\n        n: usize,\n        _pd: std::marker::PhantomData<fn() -> T>,\n    }\n    impl<'a, R: BufRead, T: CpIn> Iterator for CpIter<'a, R, T> {\n        type Item = T;\n        fn next(&mut self) -> Option<T> {\n            if self.n == 0 {\n                None\n            } else {\n                self.n -= 1;\n                Some(self.r.read())\n            }\n        }\n    }\n\n    pub trait CpIn {\n        fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self;\n    }\n\n    impl CpIn for u64 {\n        fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n            read_u64_fast(&mut r.r)\n        }\n    }\n    impl CpIn for i64 {\n        fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n            read_i64_fast(&mut r.r)\n        }\n    }\n    impl CpIn for char {\n        fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n            let b = r.r.fill_buf().unwrap()[0] as char;\n            r.r.consume(1);\n            let s = r.r.fill_buf().unwrap()[0];\n            assert!(s == b' ' || s == b'\\n');\n            r.r.consume(1);\n            b\n        }\n    }\n\n    macro_rules! cpin_tuple {\n        ($($t:ident),*) => {\n            impl<$($t: CpIn),*> CpIn for ($($t),*) {\n                fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n                    ($($t::read_from(r)),*)\n                }\n            }\n        };\n    }\n\n    macro_rules! cpin_cast {\n        ($t_self:ty, $t_read:ty) => {\n            impl CpIn for $t_self {\n                fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n                    <$t_read>::read_from(r) as $t_self\n                }\n            }\n        };\n    }\n    macro_rules! cpin_parse {\n        ($t:ty) => {\n            impl CpIn for $t {\n                fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n                    r.read_word_str().parse().unwrap()\n                }\n            }\n        };\n    }\n    cpin_cast!(usize, u64);\n    cpin_cast!(isize, i64);\n    cpin_cast!(u32, u64);\n    cpin_cast!(u16, u64);\n    cpin_cast!(i32, i64);\n    cpin_cast!(i16, i64);\n    cpin_cast!(i8, i64);\n\n    cpin_parse!(f64);\n\n    cpin_tuple!(T1, T2);\n    cpin_tuple!(T1, T2, T3);\n    cpin_tuple!(T1, T2, T3, T4);\n    cpin_tuple!(T1, T2, T3, T4, T5);\n\n\n    fn read_u64_fast<R: BufRead>(r: &mut R) -> u64 {\n        let mut value = 0;\n        loop {\n            let mut idx = 0;\n            let buf_len;\n            {\n                let buf = r.fill_buf().unwrap();\n                buf_len = buf.len();\n                assert!(buf_len != 0);\n                while idx < buf_len && b'0' <= buf[idx] && buf[idx] <= b'9' {\n                    value = value * 10 + (buf[idx] - b'0') as u64;\n                    idx += 1;\n                }\n            }\n            if idx < buf_len {\n                r.consume(idx + 1);\n                return value;\n            }\n            r.consume(idx);\n        }\n    }\n    fn read_i64_fast<R: BufRead>(r: &mut R) -> i64 {\n        let (consume, sign) = match r.fill_buf().unwrap()[0] {\n            b'+' => (true, 1),\n            b'-' => (true, -1),\n            _ => (false, 1),\n        };\n        if consume {\n            r.consume(1);\n        }\n        read_u64_fast(r) as i64 * sign\n    }\n}"
  },
  {
    "language": "Rust",
    "code": "macro_rules! input {\n    (source = $s:expr, $($r:tt)*) => {\n        let mut iter = $s.split_whitespace();\n        let mut next = || { iter.next().unwrap() };\n        input_inner!{next, $($r)*}\n    };\n    ($($r:tt)*) => {\n        let stdin = std::io::stdin();\n        let mut bytes = std::io::Read::bytes(std::io::BufReader::new(stdin.lock()));\n        let mut next = move || -> String {\n            bytes\n                .by_ref()\n                .map(|r| r.unwrap() as char)\n                .skip_while(|c| c.is_whitespace())\n                .take_while(|c| !c.is_whitespace())\n                .collect()\n        };\n        input_inner!{next, $($r)*}\n    };\n}\n\nmacro_rules! input_inner {\n    ($next:expr) => {};\n    ($next:expr, ) => {};\n\n    ($next:expr, $var:ident : $t:tt $($r:tt)*) => {\n        let $var = read_value!($next, $t);\n        input_inner!{$next $($r)*}\n    };\n}\n\nmacro_rules! read_value {\n    ($next:expr, ( $($t:tt),* )) => {\n        ( $(read_value!($next, $t)),* )\n    };\n\n    ($next:expr, [ $t:tt ; $len:expr ]) => {\n        (0..$len).map(|_| read_value!($next, $t)).collect::<Vec<_>>()\n    };\n\n    ($next:expr, chars) => {\n        read_value!($next, String).chars().collect::<Vec<char>>()\n    };\n\n    ($next:expr, usize1) => {\n        read_value!($next, usize) - 1\n    };\n\n    ($next:expr, $t:ty) => {\n        $next().parse::<$t>().expect(\"Parse error\")\n    };\n}\n\nuse std::cmp::max;\n\nfn main() {\n    input!{\n        n: usize,\n        v: [String; 2 * n - 1]\n    }\n    let mut tab = vec![vec![i64::min_value(); 3]; n];\n    tab[0][0] = v[0].parse::<i64>().unwrap();\n    for i in 1..n {\n        let vi = v[2 * i].parse::<i64>().unwrap();\n        if v[2 * i - 1] == \"+\" {\n            tab[i][0] = max(tab[i - 1][0], tab[i - 1][1]) + vi;\n            if max(tab[i - 1][1], tab[i - 1][2]) > i64::min_value() {\n                tab[i][1] = max(tab[i - 1][1], tab[i - 1][2]) - vi;\n                tab[i][2] = tab[i - 1][2] + vi;\n            }\n        } else {\n            tab[i][1] = max(tab[i - 1][0], tab[i - 1][1]) - vi;\n            tab[i][2] = max(tab[i - 1][1], tab[i - 1][2]) + vi;\n        }\n    }\n    println!(\"{}\", tab[n-1].iter().max().unwrap());\n}\n"
  },
  {
    "language": "Rust",
    "code": "use std::cmp::max;\nuse std::collections::*;\nuse std::io::*;\nuse utils::*;\n\n\npub fn main() {\n    let i = stdin();\n    let mut o = Vec::new();\n    run(i.lock(), &mut o);\n    stdout().write_all(&o).unwrap();\n}\n\npub fn run<R: BufRead, W: Write>(i: R, o: &mut W) {\n    let mut i = CpReader::new(i);\n    let n = i.read();\n    let mut a = Vec::with_capacity(n);\n    a.push(i.read::<isize>());\n    for _ in 1..n {\n        let s = i.read::<char>();\n        let sign = if s == '+' { 1 } else { -1 };\n        a.push(i.read::<isize>() * sign);\n    }\n    writeln!(o, \"{}\", solve(&a)).unwrap();\n}\nfn solve(a: &[isize]) -> isize {\n    let invalid = -100000_000000000;\n    let mut ms = [0, invalid, invalid];\n    for &a in a {\n        if a > 0 {\n            ms = [ms[0] + a, ms[1] - a, ms[2] + a];\n        } else {\n            ms = [ms[0] + a, ms[0] + a, max(ms[2] - a, ms[1] - a)];\n        }\n    }\n    *ms.iter().max().unwrap()\n}\n\npub mod utils {\n    use super::*;\n\n    pub struct CpReader<R: BufRead> {\n        r: R,\n        b: Vec<u8>,\n    }\n    impl<R: BufRead> CpReader<R> {\n        pub fn new(r: R) -> Self {\n            CpReader {\n                r: r,\n                b: Vec::new(),\n            }\n        }\n        pub fn read_word(&mut self) -> &[u8] {\n            self.b.clear();\n            let mut consume = 0;\n            loop {\n                self.r.consume(consume);\n                let b = self.r.fill_buf().unwrap();\n                assert!(b.len() != 0);\n                if let Some(p) = b.iter().position(|&x| x == b' ' || x == b'\\n') {\n                    self.b.extend_from_slice(&b[..p]);\n                    consume = p + 1;\n                    break;\n                }\n                self.b.extend_from_slice(b);\n                consume = b.len();\n            }\n            self.r.consume(consume);\n            &self.b\n        }\n        pub fn read_word_str(&mut self) -> &str {\n            unsafe { std::str::from_utf8_unchecked(self.read_word()) }\n        }\n\n        pub fn read_line(&mut self) -> &[u8] {\n            self.b.clear();\n            self.r.read_until(b'\\n', &mut self.b).unwrap();\n            if self.b.last() == Some(&b'\\n') {\n                &self.b[..self.b.len() - 1]\n            } else {\n                &self.b\n            }\n        }\n        pub fn read_line_str(&mut self) -> &str {\n            unsafe { std::str::from_utf8_unchecked(self.read_line()) }\n        }\n\n        pub fn read<T: CpIn>(&mut self) -> T {\n            T::read_from(self)\n        }\n\n        pub fn read_vec<T: CpIn>(&mut self, n: usize) -> Vec<T> {\n            (0..n).map(|_| self.read()).collect()\n        }\n        pub fn read_iter<'a, T: CpIn>(&'a mut self, n: usize) -> CpIter<'a, R, T> {\n            CpIter {\n                r: self,\n                n: n,\n                _pd: Default::default(),\n            }\n        }\n    }\n    pub struct CpIter<'a, R: BufRead + 'a, T> {\n        r: &'a mut CpReader<R>,\n        n: usize,\n        _pd: std::marker::PhantomData<fn() -> T>,\n    }\n    impl<'a, R: BufRead, T: CpIn> Iterator for CpIter<'a, R, T> {\n        type Item = T;\n        fn next(&mut self) -> Option<T> {\n            if self.n == 0 {\n                None\n            } else {\n                self.n -= 1;\n                Some(self.r.read())\n            }\n        }\n    }\n\n    pub trait CpIn {\n        fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self;\n    }\n\n    impl CpIn for u64 {\n        fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n            read_u64_fast(&mut r.r)\n        }\n    }\n    impl CpIn for i64 {\n        fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n            read_i64_fast(&mut r.r)\n        }\n    }\n    impl CpIn for char {\n        fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n            let b = r.r.fill_buf().unwrap()[0] as char;\n            r.r.consume(1);\n            let s = r.r.fill_buf().unwrap()[0];\n            assert!(s == b' ' || s == b'\\n');\n            r.r.consume(1);\n            b\n        }\n    }\n\n    macro_rules! cpin_tuple {\n        ($($t:ident),*) => {\n            impl<$($t: CpIn),*> CpIn for ($($t),*) {\n                fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n                    ($($t::read_from(r)),*)\n                }\n            }\n        };\n    }\n\n    macro_rules! cpin_cast {\n        ($t_self:ty, $t_read:ty) => {\n            impl CpIn for $t_self {\n                fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n                    <$t_read>::read_from(r) as $t_self\n                }\n            }\n        };\n    }\n    macro_rules! cpin_parse {\n        ($t:ty) => {\n            impl CpIn for $t {\n                fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n                    r.read_word_str().parse().unwrap()\n                }\n            }\n        };\n    }\n    cpin_cast!(usize, u64);\n    cpin_cast!(isize, i64);\n    cpin_cast!(u32, u64);\n    cpin_cast!(u16, u64);\n    cpin_cast!(i32, i64);\n    cpin_cast!(i16, i64);\n    cpin_cast!(i8, i64);\n\n    cpin_parse!(f64);\n\n    cpin_tuple!(T1, T2);\n    cpin_tuple!(T1, T2, T3);\n    cpin_tuple!(T1, T2, T3, T4);\n    cpin_tuple!(T1, T2, T3, T4, T5);\n\n\n    fn read_u64_fast<R: BufRead>(r: &mut R) -> u64 {\n        let mut value = 0;\n        loop {\n            let mut idx = 0;\n            let buf_len;\n            {\n                let buf = r.fill_buf().unwrap();\n                buf_len = buf.len();\n                assert!(buf_len != 0);\n                while idx < buf_len && b'0' <= buf[idx] && buf[idx] <= b'9' {\n                    value = value * 10 + (buf[idx] - b'0') as u64;\n                    idx += 1;\n                }\n            }\n            if idx < buf_len {\n                r.consume(idx + 1);\n                return value;\n            }\n            r.consume(idx);\n        }\n    }\n    fn read_i64_fast<R: BufRead>(r: &mut R) -> i64 {\n        let (consume, sign) = match r.fill_buf().unwrap()[0] {\n            b'+' => (true, 1),\n            b'-' => (true, -1),\n            _ => (false, 1),\n        };\n        if consume {\n            r.consume(1);\n        }\n        read_u64_fast(r) as i64 * sign\n    }\n}"
  },
  {
    "language": "Rust",
    "code": "#![allow(unused_imports, unused_variables, dead_code)]\nuse std::io::*;\nuse std::fmt::*;\nuse std::str::*;\nuse std::cmp::*;\nuse std::collections::*;\n\ntrait InputValue {\n    fn parse(s: &str) -> Self;\n}\n\nfn read<T: InputValue>() -> T {\n    let mut buf = String::new();\n    let _ = stdin().read_line(&mut buf);\n    T::parse(&buf.trim())\n}\n\nfn readnc<T: InputValue>() -> Vec<T> {\n    let mut vec = vec![];\n    let line: String = read();\n    for token in line.split_whitespace() {\n        vec.push(T::parse(token));\n    }\n    vec\n}\n\nfn readn<T: InputValue>(n: usize) -> Vec<T> {\n    let mut vec = vec![];\n    for _ in 0..n {\n        vec.push(read());\n    }\n    vec\n}\n\nmacro_rules! parse_single_value {\n    ($($t:ty),*) => {\n        $(\n            impl InputValue for $t {\n                fn parse(s: &str) -> $t { s.parse().unwrap() }\n            }\n        )*\n\t}\n}\nparse_single_value!(i32, i64, f32, f64, usize, String);\n\nmacro_rules! parse_tuple {\n\t($($t:ident),*) => {\n\t\timpl<$($t),*> InputValue for ($($t),*) where $($t: InputValue),* {\n\t\t\tfn parse(s: &str) -> ($($t),*) {\n\t\t\t\tlet mut tokens = s.split_whitespace();\n\t\t\t\tlet t = ($($t::parse(tokens.next().unwrap())),*);\n\t\t\t\tt\n\t\t\t}\n\t\t}\n\t}\n}\nparse_tuple!(A, B);\nparse_tuple!(A, B, C);\n\n// ===\n\nfn main() {\n    let n: usize = read();\n    let cr: Vec<String> = readnc();\n\n    let mut a: Vec<i64> = vec![];\n    a.push(i64::parse(&cr[0]));\n\n    for i in 1..n {\n        let p = cr[i*2-1].to_string();\n        let v = i64::parse(&cr[i*2]);\n        if p == \"+\" {\n            a.push(v);\n        } else {\n            a.push(-v);\n        }\n    }\n\n    let mut ans = 0;\n    let mut imos = vec![0; n+1];\n    for i in (0..n).rev() {\n        imos[i] = imos[i+1] + a[i].abs();\n    }\n\n    let mut sum = 0;\n    let mut head = 0;\n    while head < n {\n        if a[head] < 0 {\n            let mut to = head + 1;\n            let mut part_minus = a[head];\n            let mut hoge = a[head];\n            while to < n && a[to] >= 1 {\n                part_minus -= a[to];\n                hoge += a[to];\n                to += 1;\n            }\n            ans = max(ans, sum + part_minus + imos[to]);\n            sum += hoge;\n            head = to;\n        } else {\n            sum += a[head];\n            head += 1;\n        }\n    }\n    ans = max(ans, sum);\n\n    println!(\"{}\", ans);\n}"
  },
  {
    "language": "Rust",
    "code": "use std::io::*;\nuse utils::*;\n\npub fn main() {\n    let i = stdin();\n    let mut o = Vec::new();\n    run(i.lock(), &mut o);\n    stdout().write_all(&o).unwrap();\n}\n\npub fn run<R: BufRead, W: Write>(i: R, o: &mut W) {\n    let mut i = CpReader::new(i);\n    let n = i.read::<usize>();\n    let mut a = Vec::with_capacity(n);\n    for idx in 0..n {\n        let sign = if idx == 0 {\n            1\n        } else {\n            let s = i.read::<char>();\n            dbg!(s);\n            if s == '+' {\n                1\n            } else {\n                -1\n            }\n        };\n        a.push(sign * i.read::<isize>());\n    }\n    writeln!(o, \"{}\", solve(&a)).unwrap();\n}\nfn solve(a: &[isize]) -> isize {\n    let mut ms = vec![0]; // ms[i]はi個 括弧がネストした状態での最大値\n    for &a in a.iter().rev() {\n        if a < 0 {\n            for i in 1..ms.len() {\n                ms[i - 1] = ms[i];\n            }\n        }\n        let last = *ms.last().unwrap();\n        ms.push(last);\n\n\n        let mut sign = 1;\n        let mut max_idx = 0;\n        let mut max_val = isize::min_value();\n        for i in 0..ms.len() {\n            let val = ms[i] + a * sign;\n            if val > max_val {\n                max_val = val;\n                max_idx = i;\n            }\n            ms[i] = val;\n            sign = sign * -1;\n        }\n        ms.truncate(max_idx + 1);\n        dbg!(&ms);\n    }\n    ms[0]\n}\n\npub mod utils {\n    use super::*;\n\n    pub struct CpReader<R: BufRead> {\n        r: R,\n        b: Vec<u8>,\n    }\n    impl<R: BufRead> CpReader<R> {\n        pub fn new(r: R) -> Self {\n            CpReader {\n                r: r,\n                b: Vec::new(),\n            }\n        }\n        pub fn read_word(&mut self) -> &[u8] {\n            self.b.clear();\n            let mut consume = 0;\n            loop {\n                self.r.consume(consume);\n                let b = self.r.fill_buf().unwrap();\n                assert!(b.len() != 0);\n                if let Some(p) = b.iter().position(|&x| x == b' ' || x == b'\\n') {\n                    self.b.extend_from_slice(&b[..p]);\n                    consume = p + 1;\n                    break;\n                }\n                self.b.extend_from_slice(b);\n                consume = b.len();\n            }\n            self.r.consume(consume);\n            &self.b\n        }\n        pub fn read_word_str(&mut self) -> &str {\n            unsafe { std::str::from_utf8_unchecked(self.read_word()) }\n        }\n\n        pub fn read_line(&mut self) -> &[u8] {\n            self.b.clear();\n            self.r.read_until(b'\\n', &mut self.b).unwrap();\n            if self.b.last() == Some(&b'\\n') {\n                &self.b[..self.b.len() - 1]\n            } else {\n                &self.b\n            }\n        }\n        pub fn read_line_str(&mut self) -> &str {\n            unsafe { std::str::from_utf8_unchecked(self.read_line()) }\n        }\n\n        pub fn read<T: CpIn>(&mut self) -> T {\n            T::read_from(self)\n        }\n\n        pub fn read_vec<T: CpIn>(&mut self, n: usize) -> Vec<T> {\n            (0..n).map(|_| self.read()).collect()\n        }\n        pub fn read_iter<'a, T: CpIn>(&'a mut self, n: usize) -> CpIter<'a, R, T> {\n            CpIter {\n                r: self,\n                n: n,\n                _pd: Default::default(),\n            }\n        }\n    }\n    pub struct CpIter<'a, R: BufRead + 'a, T> {\n        r: &'a mut CpReader<R>,\n        n: usize,\n        _pd: std::marker::PhantomData<fn() -> T>,\n    }\n    impl<'a, R: BufRead, T: CpIn> Iterator for CpIter<'a, R, T> {\n        type Item = T;\n        fn next(&mut self) -> Option<T> {\n            if self.n == 0 {\n                None\n            } else {\n                self.n -= 1;\n                Some(self.r.read())\n            }\n        }\n    }\n\n    pub trait CpIn {\n        fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self;\n    }\n\n    impl CpIn for u64 {\n        fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n            read_u64_fast(&mut r.r)\n        }\n    }\n    impl CpIn for i64 {\n        fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n            read_i64_fast(&mut r.r)\n        }\n    }\n    impl CpIn for char {\n        fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n            let b = r.r.fill_buf().unwrap()[0] as char;\n            r.r.consume(1);\n            let s = r.r.fill_buf().unwrap()[0];\n            assert!(s == b' ' || s == b'\\n');\n            r.r.consume(1);\n            b\n        }\n    }\n\n    macro_rules! cpin_tuple {\n        ($($t:ident),*) => {\n            impl<$($t: CpIn),*> CpIn for ($($t),*) {\n                fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n                    ($($t::read_from(r)),*)\n                }\n            }\n        };\n    }\n\n    macro_rules! cpin_cast {\n        ($t_self:ty, $t_read:ty) => {\n            impl CpIn for $t_self {\n                fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n                    <$t_read>::read_from(r) as $t_self\n                }\n            }\n        };\n    }\n    macro_rules! cpin_parse {\n        ($t:ty) => {\n            impl CpIn for $t {\n                fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n                    r.read_word_str().parse().unwrap()\n                }\n            }\n        };\n    }\n    cpin_cast!(usize, u64);\n    cpin_cast!(isize, i64);\n    cpin_cast!(u32, u64);\n    cpin_cast!(u16, u64);\n    cpin_cast!(i32, i64);\n    cpin_cast!(i16, i64);\n    cpin_cast!(i8, i64);\n\n    cpin_parse!(f64);\n\n    cpin_tuple!(T1, T2);\n    cpin_tuple!(T1, T2, T3);\n    cpin_tuple!(T1, T2, T3, T4);\n    cpin_tuple!(T1, T2, T3, T4, T5);\n\n\n    fn read_u64_fast<R: BufRead>(r: &mut R) -> u64 {\n        let mut value = 0;\n        loop {\n            let mut idx = 0;\n            let buf_len;\n            {\n                let buf = r.fill_buf().unwrap();\n                buf_len = buf.len();\n                assert!(buf_len != 0);\n                while idx < buf_len && b'0' <= buf[idx] && buf[idx] <= b'9' {\n                    value = value * 10 + (buf[idx] - b'0') as u64;\n                    idx += 1;\n                }\n            }\n            if idx < buf_len {\n                r.consume(idx + 1);\n                return value;\n            }\n            r.consume(idx);\n        }\n    }\n    fn read_i64_fast<R: BufRead>(r: &mut R) -> i64 {\n        let (consume, sign) = match r.fill_buf().unwrap()[0] {\n            b'+' => (true, 1),\n            b'-' => (true, -1),\n            _ => (false, 1),\n        };\n        if consume {\n            r.consume(1);\n        }\n        read_u64_fast(r) as i64 * sign\n    }\n\n\n}\n\n"
  },
  {
    "language": "Rust",
    "code": "use std::cmp::max;\nuse std::io::*;\nuse utils::*;\n\n\npub fn main() {\n    let i = stdin();\n    let mut o = Vec::new();\n    run(i.lock(), &mut o);\n    stdout().write_all(&o).unwrap();\n}\n\npub fn run<R: BufRead, W: Write>(i: R, o: &mut W) {\n    let mut i = CpReader::new(i);\n    let n = i.read();\n\n    let invalid = -100000_000000000;\n    let mut ms = [i.read::<usize>() as isize, invalid, invalid];\n\n    for _ in 1..n {\n        let s = i.read::<char>();\n        let a = i.read::<usize>() as isize;\n        if s == '+' {\n            ms = [ms[0] + a, ms[1] - a, ms[2] + a];\n        } else {\n            ms = [ms[0] - a, ms[0] - a, max(ms[2] + a, ms[1] + a)];\n        }\n    }\n    let ans = *ms.iter().max().unwrap();\n    writeln!(o, \"{}\", ans).unwrap();\n}\n\npub mod utils {\n    use super::*;\n\n    pub struct CpReader<R: BufRead> {\n        r: R,\n        b: Vec<u8>,\n    }\n    impl<R: BufRead> CpReader<R> {\n        pub fn new(r: R) -> Self {\n            CpReader {\n                r: r,\n                b: Vec::new(),\n            }\n        }\n        pub fn read_word(&mut self) -> &[u8] {\n            self.b.clear();\n            let mut consume = 0;\n            loop {\n                self.r.consume(consume);\n                let b = self.r.fill_buf().unwrap();\n                assert!(b.len() != 0);\n                if let Some(p) = b.iter().position(|&x| x == b' ' || x == b'\\n') {\n                    self.b.extend_from_slice(&b[..p]);\n                    consume = p + 1;\n                    break;\n                }\n                self.b.extend_from_slice(b);\n                consume = b.len();\n            }\n            self.r.consume(consume);\n            &self.b\n        }\n        pub fn read_word_str(&mut self) -> &str {\n            unsafe { std::str::from_utf8_unchecked(self.read_word()) }\n        }\n\n        pub fn read_line(&mut self) -> &[u8] {\n            self.b.clear();\n            self.r.read_until(b'\\n', &mut self.b).unwrap();\n            if self.b.last() == Some(&b'\\n') {\n                &self.b[..self.b.len() - 1]\n            } else {\n                &self.b\n            }\n        }\n        pub fn read_line_str(&mut self) -> &str {\n            unsafe { std::str::from_utf8_unchecked(self.read_line()) }\n        }\n\n        pub fn read<T: CpIn>(&mut self) -> T {\n            T::read_from(self)\n        }\n\n        pub fn read_vec<T: CpIn>(&mut self, n: usize) -> Vec<T> {\n            (0..n).map(|_| self.read()).collect()\n        }\n        pub fn read_iter<'a, T: CpIn>(&'a mut self, n: usize) -> CpIter<'a, R, T> {\n            CpIter {\n                r: self,\n                n: n,\n                _pd: Default::default(),\n            }\n        }\n    }\n    pub struct CpIter<'a, R: BufRead + 'a, T> {\n        r: &'a mut CpReader<R>,\n        n: usize,\n        _pd: std::marker::PhantomData<fn() -> T>,\n    }\n    impl<'a, R: BufRead, T: CpIn> Iterator for CpIter<'a, R, T> {\n        type Item = T;\n        fn next(&mut self) -> Option<T> {\n            if self.n == 0 {\n                None\n            } else {\n                self.n -= 1;\n                Some(self.r.read())\n            }\n        }\n    }\n\n    pub trait CpIn {\n        fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self;\n    }\n\n    impl CpIn for u64 {\n        fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n            read_u64_fast(&mut r.r)\n        }\n    }\n    impl CpIn for i64 {\n        fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n            read_i64_fast(&mut r.r)\n        }\n    }\n    impl CpIn for char {\n        fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n            let b = r.r.fill_buf().unwrap()[0] as char;\n            r.r.consume(1);\n            let s = r.r.fill_buf().unwrap()[0];\n            assert!(s == b' ' || s == b'\\n');\n            r.r.consume(1);\n            b\n        }\n    }\n\n    macro_rules! cpin_tuple {\n        ($($t:ident),*) => {\n            impl<$($t: CpIn),*> CpIn for ($($t),*) {\n                fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n                    ($($t::read_from(r)),*)\n                }\n            }\n        };\n    }\n\n    macro_rules! cpin_cast {\n        ($t_self:ty, $t_read:ty) => {\n            impl CpIn for $t_self {\n                fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n                    <$t_read>::read_from(r) as $t_self\n                }\n            }\n        };\n    }\n    macro_rules! cpin_parse {\n        ($t:ty) => {\n            impl CpIn for $t {\n                fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n                    r.read_word_str().parse().unwrap()\n                }\n            }\n        };\n    }\n    cpin_cast!(usize, u64);\n    cpin_cast!(isize, i64);\n    cpin_cast!(u32, u64);\n    cpin_cast!(u16, u64);\n    cpin_cast!(i32, i64);\n    cpin_cast!(i16, i64);\n    cpin_cast!(i8, i64);\n\n    cpin_parse!(f64);\n\n    cpin_tuple!(T1, T2);\n    cpin_tuple!(T1, T2, T3);\n    cpin_tuple!(T1, T2, T3, T4);\n    cpin_tuple!(T1, T2, T3, T4, T5);\n\n\n    fn read_u64_fast<R: BufRead>(r: &mut R) -> u64 {\n        let mut value = 0;\n        loop {\n            let mut idx = 0;\n            let buf_len;\n            {\n                let buf = r.fill_buf().unwrap();\n                buf_len = buf.len();\n                assert!(buf_len != 0);\n                while idx < buf_len && b'0' <= buf[idx] && buf[idx] <= b'9' {\n                    value = value * 10 + (buf[idx] - b'0') as u64;\n                    idx += 1;\n                }\n            }\n            if idx < buf_len {\n                r.consume(idx + 1);\n                return value;\n            }\n            r.consume(idx);\n        }\n    }\n    fn read_i64_fast<R: BufRead>(r: &mut R) -> i64 {\n        let (consume, sign) = match r.fill_buf().unwrap()[0] {\n            b'+' => (true, 1),\n            b'-' => (true, -1),\n            _ => (false, 1),\n        };\n        if consume {\n            r.consume(1);\n        }\n        read_u64_fast(r) as i64 * sign\n    }\n}"
  },
  {
    "language": "Rust",
    "code": "use std::io::*;\nuse std::collections::*;\nuse utils::*;\n\n\npub fn main() {\n    let i = stdin();\n    let mut o = Vec::new();\n    run(i.lock(), &mut o);\n    stdout().write_all(&o).unwrap();\n}\n\npub fn run<R: BufRead, W: Write>(i: R, o: &mut W) {\n    let mut i = CpReader::new(i);\n    let n = i.read::<usize>();\n    let mut a = Vec::with_capacity(n);\n    a.push(i.read::<isize>());\n    for _ in 1..n {\n        let s = i.read::<char>();\n        let sign = if s == '+' { 1 } else { -1 };\n        a.push(i.read::<isize>() * sign);\n    }\n    writeln!(o, \"{}\", solve(&a)).unwrap();\n}\nfn solve(a: &[isize]) -> isize {\n    let mut ms = VecDeque::new(); // ms[i]はi個 括弧がネストした状態での最大値\n    ms.push_back(0);\n    for &a in a.iter().rev() {\n        let last = *ms.back().unwrap();\n        ms.push_back(last);\n\n        if a < 0 {\n            ms.pop_front();\n            ms.push_back(last);\n        }\n\n        let mut sign = 1;\n        let mut max_idx = 0;\n        let mut max_val = isize::min_value();\n        for i in 0..ms.len() {\n            let val = ms[i] + a * sign;\n            if val > max_val {\n                max_val = val;\n                max_idx = i;\n            }\n            ms[i] = max_val;\n            sign = sign * -1;\n        }\n        while ms.len() > max_idx + 1 {\n            ms.pop_back();\n        }\n    }\n    ms[0]\n}\n\npub mod utils {\n    use super::*;\n\n    pub struct CpReader<R: BufRead> {\n        r: R,\n        b: Vec<u8>,\n    }\n    impl<R: BufRead> CpReader<R> {\n        pub fn new(r: R) -> Self {\n            CpReader {\n                r: r,\n                b: Vec::new(),\n            }\n        }\n        pub fn read_word(&mut self) -> &[u8] {\n            self.b.clear();\n            let mut consume = 0;\n            loop {\n                self.r.consume(consume);\n                let b = self.r.fill_buf().unwrap();\n                assert!(b.len() != 0);\n                if let Some(p) = b.iter().position(|&x| x == b' ' || x == b'\\n') {\n                    self.b.extend_from_slice(&b[..p]);\n                    consume = p + 1;\n                    break;\n                }\n                self.b.extend_from_slice(b);\n                consume = b.len();\n            }\n            self.r.consume(consume);\n            &self.b\n        }\n        pub fn read_word_str(&mut self) -> &str {\n            unsafe { std::str::from_utf8_unchecked(self.read_word()) }\n        }\n\n        pub fn read_line(&mut self) -> &[u8] {\n            self.b.clear();\n            self.r.read_until(b'\\n', &mut self.b).unwrap();\n            if self.b.last() == Some(&b'\\n') {\n                &self.b[..self.b.len() - 1]\n            } else {\n                &self.b\n            }\n        }\n        pub fn read_line_str(&mut self) -> &str {\n            unsafe { std::str::from_utf8_unchecked(self.read_line()) }\n        }\n\n        pub fn read<T: CpIn>(&mut self) -> T {\n            T::read_from(self)\n        }\n\n        pub fn read_vec<T: CpIn>(&mut self, n: usize) -> Vec<T> {\n            (0..n).map(|_| self.read()).collect()\n        }\n        pub fn read_iter<'a, T: CpIn>(&'a mut self, n: usize) -> CpIter<'a, R, T> {\n            CpIter {\n                r: self,\n                n: n,\n                _pd: Default::default(),\n            }\n        }\n    }\n    pub struct CpIter<'a, R: BufRead + 'a, T> {\n        r: &'a mut CpReader<R>,\n        n: usize,\n        _pd: std::marker::PhantomData<fn() -> T>,\n    }\n    impl<'a, R: BufRead, T: CpIn> Iterator for CpIter<'a, R, T> {\n        type Item = T;\n        fn next(&mut self) -> Option<T> {\n            if self.n == 0 {\n                None\n            } else {\n                self.n -= 1;\n                Some(self.r.read())\n            }\n        }\n    }\n\n    pub trait CpIn {\n        fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self;\n    }\n\n    impl CpIn for u64 {\n        fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n            read_u64_fast(&mut r.r)\n        }\n    }\n    impl CpIn for i64 {\n        fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n            read_i64_fast(&mut r.r)\n        }\n    }\n    impl CpIn for char {\n        fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n            let b = r.r.fill_buf().unwrap()[0] as char;\n            r.r.consume(1);\n            let s = r.r.fill_buf().unwrap()[0];\n            assert!(s == b' ' || s == b'\\n');\n            r.r.consume(1);\n            b\n        }\n    }\n\n    macro_rules! cpin_tuple {\n        ($($t:ident),*) => {\n            impl<$($t: CpIn),*> CpIn for ($($t),*) {\n                fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n                    ($($t::read_from(r)),*)\n                }\n            }\n        };\n    }\n\n    macro_rules! cpin_cast {\n        ($t_self:ty, $t_read:ty) => {\n            impl CpIn for $t_self {\n                fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n                    <$t_read>::read_from(r) as $t_self\n                }\n            }\n        };\n    }\n    macro_rules! cpin_parse {\n        ($t:ty) => {\n            impl CpIn for $t {\n                fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n                    r.read_word_str().parse().unwrap()\n                }\n            }\n        };\n    }\n    cpin_cast!(usize, u64);\n    cpin_cast!(isize, i64);\n    cpin_cast!(u32, u64);\n    cpin_cast!(u16, u64);\n    cpin_cast!(i32, i64);\n    cpin_cast!(i16, i64);\n    cpin_cast!(i8, i64);\n\n    cpin_parse!(f64);\n\n    cpin_tuple!(T1, T2);\n    cpin_tuple!(T1, T2, T3);\n    cpin_tuple!(T1, T2, T3, T4);\n    cpin_tuple!(T1, T2, T3, T4, T5);\n\n\n    fn read_u64_fast<R: BufRead>(r: &mut R) -> u64 {\n        let mut value = 0;\n        loop {\n            let mut idx = 0;\n            let buf_len;\n            {\n                let buf = r.fill_buf().unwrap();\n                buf_len = buf.len();\n                assert!(buf_len != 0);\n                while idx < buf_len && b'0' <= buf[idx] && buf[idx] <= b'9' {\n                    value = value * 10 + (buf[idx] - b'0') as u64;\n                    idx += 1;\n                }\n            }\n            if idx < buf_len {\n                r.consume(idx + 1);\n                return value;\n            }\n            r.consume(idx);\n        }\n    }\n    fn read_i64_fast<R: BufRead>(r: &mut R) -> i64 {\n        let (consume, sign) = match r.fill_buf().unwrap()[0] {\n            b'+' => (true, 1),\n            b'-' => (true, -1),\n            _ => (false, 1),\n        };\n        if consume {\n            r.consume(1);\n        }\n        read_u64_fast(r) as i64 * sign\n    }\n}"
  },
  {
    "language": "Rust",
    "code": "macro_rules! input {\n    (source = $s:expr, $($r:tt)*) => {\n        let mut iter = $s.split_whitespace();\n        let mut next = || { iter.next().unwrap() };\n        input_inner!{next, $($r)*}\n    };\n    ($($r:tt)*) => {\n        let stdin = std::io::stdin();\n        let mut bytes = std::io::Read::bytes(std::io::BufReader::new(stdin.lock()));\n        let mut next = move || -> String {\n            bytes\n                .by_ref()\n                .map(|r| r.unwrap() as char)\n                .skip_while(|c| c.is_whitespace())\n                .take_while(|c| !c.is_whitespace())\n                .collect()\n        };\n        input_inner!{next, $($r)*}\n    };\n}\n\nmacro_rules! input_inner {\n    ($next:expr) => {};\n    ($next:expr, ) => {};\n\n    ($next:expr, $var:ident : $t:tt $($r:tt)*) => {\n        let $var = read_value!($next, $t);\n        input_inner!{$next $($r)*}\n    };\n}\n\nmacro_rules! read_value {\n    ($next:expr, ( $($t:tt),* )) => {\n        ( $(read_value!($next, $t)),* )\n    };\n\n    ($next:expr, [ $t:tt ; $len:expr ]) => {\n        (0..$len).map(|_| read_value!($next, $t)).collect::<Vec<_>>()\n    };\n\n    ($next:expr, chars) => {\n        read_value!($next, String).chars().collect::<Vec<char>>()\n    };\n\n    ($next:expr, usize1) => {\n        read_value!($next, usize) - 1\n    };\n\n    ($next:expr, $t:ty) => {\n        $next().parse::<$t>().expect(\"Parse error\")\n    };\n}\n\nuse std::cmp::max;\n\nfn main() {\n    input!{\n        n: usize,\n        v: [String; 2 * n - 1]\n    }\n    let mut tab = vec![vec![0; 3]; n];\n    tab[0][0] = v[0].parse::<i64>().unwrap();\n    tab[0][1] = i64::min_value();\n    tab[0][2] = i64::min_value();\n    for i in 1..n {\n        let vi = v[2 * i].parse::<i64>().unwrap();\n        if v[2 * i - 1] == \"+\" {\n            tab[i][0] = max(tab[i - 1][0], tab[i - 1][1]) + vi;\n            tab[i][1] = max(tab[i - 1][1], tab[i - 1][2]) - vi;\n            tab[i][2] = tab[i - 1][2] + vi;\n        } else {\n            tab[i][1] = max(tab[i - 1][0], tab[i - 1][1]) - vi;\n            tab[i][2] = max(tab[i - 1][1], tab[i - 1][2]) + vi;\n        }\n    }\n    println!(\"{}\", tab[n-1].iter().max().unwrap());\n}\n"
  },
  {
    "language": "Rust",
    "code": "use std::io::*;\nuse utils::*;\n\npub fn main() {\n    let i = stdin();\n    let mut o = Vec::new();\n    run(i.lock(), &mut o);\n    stdout().write_all(&o).unwrap();\n}\n\npub fn run<R: BufRead, W: Write>(i: R, o: &mut W) {\n    let mut i = CpReader::new(i);\n    let n = i.read::<usize>();\n    let mut a = Vec::with_capacity(n);\n    for idx in 0..n {\n        let sign = if idx == 0 {\n            1\n        } else {\n            let s = i.read::<char>();\n            if s == '+' {\n                1\n            } else {\n                -1\n            }\n        };\n        a.push(sign * i.read::<isize>());\n    }\n    writeln!(o, \"{}\", solve(&a)).unwrap();\n}\nfn solve(a: &[isize]) -> isize {\n    let mut ms = vec![0]; // ms[i]はi個 括弧がネストした状態での最大値\n    for &a in a.iter().rev() {\n        if a < 0 {\n            for i in 1..ms.len() {\n                ms[i - 1] = ms[i];\n            }\n        }\n        let last = *ms.last().unwrap();\n        ms.push(last);\n\n\n        let mut sign = 1;\n        let mut max_idx = 0;\n        let mut max_val = isize::min_value();\n        for i in 0..ms.len() {\n            let val = ms[i] + a * sign;\n            if val > max_val {\n                max_val = val;\n                max_idx = i;\n            }\n            ms[i] = val;\n            sign = sign * -1;\n        }\n        ms.truncate(max_idx + 1);\n    }\n    ms[0]\n}\n\npub mod utils {\n    use super::*;\n\n    pub struct CpReader<R: BufRead> {\n        r: R,\n        b: Vec<u8>,\n    }\n    impl<R: BufRead> CpReader<R> {\n        pub fn new(r: R) -> Self {\n            CpReader {\n                r: r,\n                b: Vec::new(),\n            }\n        }\n        pub fn read_word(&mut self) -> &[u8] {\n            self.b.clear();\n            let mut consume = 0;\n            loop {\n                self.r.consume(consume);\n                let b = self.r.fill_buf().unwrap();\n                assert!(b.len() != 0);\n                if let Some(p) = b.iter().position(|&x| x == b' ' || x == b'\\n') {\n                    self.b.extend_from_slice(&b[..p]);\n                    consume = p + 1;\n                    break;\n                }\n                self.b.extend_from_slice(b);\n                consume = b.len();\n            }\n            self.r.consume(consume);\n            &self.b\n        }\n        pub fn read_word_str(&mut self) -> &str {\n            unsafe { std::str::from_utf8_unchecked(self.read_word()) }\n        }\n\n        pub fn read_line(&mut self) -> &[u8] {\n            self.b.clear();\n            self.r.read_until(b'\\n', &mut self.b).unwrap();\n            if self.b.last() == Some(&b'\\n') {\n                &self.b[..self.b.len() - 1]\n            } else {\n                &self.b\n            }\n        }\n        pub fn read_line_str(&mut self) -> &str {\n            unsafe { std::str::from_utf8_unchecked(self.read_line()) }\n        }\n\n        pub fn read<T: CpIn>(&mut self) -> T {\n            T::read_from(self)\n        }\n\n        pub fn read_vec<T: CpIn>(&mut self, n: usize) -> Vec<T> {\n            (0..n).map(|_| self.read()).collect()\n        }\n        pub fn read_iter<'a, T: CpIn>(&'a mut self, n: usize) -> CpIter<'a, R, T> {\n            CpIter {\n                r: self,\n                n: n,\n                _pd: Default::default(),\n            }\n        }\n    }\n    pub struct CpIter<'a, R: BufRead + 'a, T> {\n        r: &'a mut CpReader<R>,\n        n: usize,\n        _pd: std::marker::PhantomData<fn() -> T>,\n    }\n    impl<'a, R: BufRead, T: CpIn> Iterator for CpIter<'a, R, T> {\n        type Item = T;\n        fn next(&mut self) -> Option<T> {\n            if self.n == 0 {\n                None\n            } else {\n                self.n -= 1;\n                Some(self.r.read())\n            }\n        }\n    }\n\n    pub trait CpIn {\n        fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self;\n    }\n\n    impl CpIn for u64 {\n        fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n            read_u64_fast(&mut r.r)\n        }\n    }\n    impl CpIn for i64 {\n        fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n            read_i64_fast(&mut r.r)\n        }\n    }\n    impl CpIn for char {\n        fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n            let b = r.r.fill_buf().unwrap()[0] as char;\n            r.r.consume(1);\n            let s = r.r.fill_buf().unwrap()[0];\n            assert!(s == b' ' || s == b'\\n');\n            r.r.consume(1);\n            b\n        }\n    }\n\n    macro_rules! cpin_tuple {\n        ($($t:ident),*) => {\n            impl<$($t: CpIn),*> CpIn for ($($t),*) {\n                fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n                    ($($t::read_from(r)),*)\n                }\n            }\n        };\n    }\n\n    macro_rules! cpin_cast {\n        ($t_self:ty, $t_read:ty) => {\n            impl CpIn for $t_self {\n                fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n                    <$t_read>::read_from(r) as $t_self\n                }\n            }\n        };\n    }\n    macro_rules! cpin_parse {\n        ($t:ty) => {\n            impl CpIn for $t {\n                fn read_from<R: BufRead>(r: &mut CpReader<R>) -> Self {\n                    r.read_word_str().parse().unwrap()\n                }\n            }\n        };\n    }\n    cpin_cast!(usize, u64);\n    cpin_cast!(isize, i64);\n    cpin_cast!(u32, u64);\n    cpin_cast!(u16, u64);\n    cpin_cast!(i32, i64);\n    cpin_cast!(i16, i64);\n    cpin_cast!(i8, i64);\n\n    cpin_parse!(f64);\n\n    cpin_tuple!(T1, T2);\n    cpin_tuple!(T1, T2, T3);\n    cpin_tuple!(T1, T2, T3, T4);\n    cpin_tuple!(T1, T2, T3, T4, T5);\n\n\n    fn read_u64_fast<R: BufRead>(r: &mut R) -> u64 {\n        let mut value = 0;\n        loop {\n            let mut idx = 0;\n            let buf_len;\n            {\n                let buf = r.fill_buf().unwrap();\n                buf_len = buf.len();\n                assert!(buf_len != 0);\n                while idx < buf_len && b'0' <= buf[idx] && buf[idx] <= b'9' {\n                    value = value * 10 + (buf[idx] - b'0') as u64;\n                    idx += 1;\n                }\n            }\n            if idx < buf_len {\n                r.consume(idx + 1);\n                return value;\n            }\n            r.consume(idx);\n        }\n    }\n    fn read_i64_fast<R: BufRead>(r: &mut R) -> i64 {\n        let (consume, sign) = match r.fill_buf().unwrap()[0] {\n            b'+' => (true, 1),\n            b'-' => (true, -1),\n            _ => (false, 1),\n        };\n        if consume {\n            r.consume(1);\n        }\n        read_u64_fast(r) as i64 * sign\n    }\n\n\n}\n\n"
  }
]