Snuke's town has a subway system, consisting of N stations and M railway lines. Each line connects two stations bidirectionally and is operated by a company. The travel fare is 1 yen if only lines operated by the same company are used. An additional fare of 1 yen is charged for each change of company. Starting from station 1, find the minimum required fare to reach station N, or return -1 if it is impossible.