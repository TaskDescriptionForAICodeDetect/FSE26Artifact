[
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#include <queue>\n#define N 300\nusing namespace std;\ntypedef pair<int,int> P;\nint n,p[N][N],s,ans,a1,a2,b1,b2,d[N][N];\npriority_queue<P> A,B;\n\nint main(){\n  cin>>n;\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++) cin>>p[i][j];\n  for(int i=0;i<n;i++){\n    s=0;\n    for(int j=0;j<n;j++) s+=p[j][i];\n    A.push(P(s,i));\n  }\n  for(int i=0;i<n;i++){\n    s=0;\n    for(int j=0;j<n;j++) s+=p[i][j];\n    B.push(P(s,i));\n  }\n  P t=A.top(); A.pop();\n  a1=t.second;\n  t=A.top(); A.pop();\n  a2=t.second;\n  t=B.top(); B.pop();\n  b1=t.second;\n  t=B.top(); B.pop();\n  b2=t.second;\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++) d[i][j]=p[i][j];\n  for(int i=0;i<n;i++)\n    for(int j=1;j<n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=1;i<n;i++)\n    for(int j=0;j<n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  for(int i=0;i<n;i++){\n    for(int j=0;j<n;j++){\n      for(int k=i;k<n;k++){\n\tfor(int l=j;l<n;l++){\n\t  //if(!(a1==j||a2==j||a1==l||a2==l||b1==i||b2==i||b1==k||b2==k)) continue;\n\t  int sum=d[k][l];\n\t  if(i&&j) sum=sum-d[i-1][l]-d[k][j-1]+d[i-1][j-1];\n\t  else if(i) sum=sum-d[i-1][l];\n\t  else if(j) sum=sum-d[k][j-1];\n\t  if(k-i>=2&&l-j>=2){\n\t    int sum2=d[k-1][l-1];\n\t    if(i+1&&j+1) sum2=sum2-d[i][l-1]-d[k-1][j]+d[i][j];\n\t    else if(i+1) sum2=sum2-d[i][l-1];\n\t    else if(j+1) sum2=sum2-d[k-1][j];\n\t    ans=max(ans,sum-sum2);\n\t  }else ans=max(ans,sum);\n\t}\n      }\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n#define REP(i, n) FOR(i, 0, n)\n#define FOR(i, a, b) for(int i = a; i < b; i++)\n\n#define PB push_back\n\n#define MOD 1000000007LL\ntypedef long long ll;\n\nint a[321][321];\nint sm[321][321];\n\nint cnt(int a, int b, int c, int d){\n\treturn sm[c][d]-sm[a][d]-sm[c][b]+sm[a][b];\n}\n\nint main(){\n\tint n;\n\tscanf(\"%d\", &n);\n\tREP(i, n) REP(j, n) scanf(\"%d\", a[i]+j);\n\tREP(i, n) sm[i][0]=sm[0][i]=0;\n\tREP(i, n){\n\t\tREP(j, n){\n\t\t\tsm[i+1][j+1]=sm[i][j+1]+sm[i+1][j]-sm[i][j]+a[i][j];\n\t\t}\n\t}\n\t// REP(i, n+1){\n\t// \tREP(j, n+1){\n\t// \t\tprintf(\"%d \", sm[i][j]);\n\t// \t}\n\t// \tprintf(\"\\n\");\n\t// }\n\tint ans = 0;\n\tREP(i, n+1){\n\t\tFOR(j, i+1, n+1){\n\t\t\tREP(k, n+1){\n\t\t\t\tFOR(l, k+1, n+1){\n\t\t\t\t\tint a = cnt(i, k, j, l), b = 0;\n\t\t\t\t\tif(j-i>=3 && l-k>=3){\n\t\t\t\t\t\tb = cnt(i+1, k+1, j-1, l-1);\n\t\t\t\t\t\t// printf(\"*\");\n\t\t\t\t\t}\n\t\t\t\t\tint x = a-b;\n\t\t\t\t\t// printf(\"(%d %d) (%d %d) : %d-%d=%d\\n\", i, k, j, l, a, b, x);\n\t\t\t\t\tif(ans<x) ans=x;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tprintf(\"%d\\n\", ans);\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\nconst int INF = 1 << 28;\n\nint n;\nint grid[301][301];\n\nint sum(int sx, int sy, int ex, int ey)\n{\n\treturn grid[ex][ey] - \n\t       grid[ex][sy - 1] - \n\t\t   grid[sx - 1][ey] + \n\t\t   grid[sx - 1][sy - 1];\n}\n\nint calc(int sx, int sy, int ex, int ey)\n{\n\treturn sum(sx, sy, ex, ey) - sum(sx + 1, sy + 1, ex - 1, ey - 1);\n}\n\nint main()\n{\n\tscanf(\"%d\", &n);\n\tfor (int i = 1; i <= n; i++){\n\t\tfor (int j = 1; j <= n; j++){\n\t\t\tscanf(\"%d\", &grid[i][j]);\n\t\t\tgrid[i][j] += grid[i - 1][j];\n\t\t\tgrid[i][j] += grid[i][j - 1];\n\t\t\tgrid[i][j] -= grid[i - 1][j - 1];\n\t\t}\n\t}\n\t\n\t/*for (int i = 1; i <= n; i++){\n\t\tfor (int j = 1; j <= n; j++){\n\t\t\tprintf(\"%d \", grid[i][j]);\n\t\t}\n\t\tputs(\"\");\n\t}*/\n\t\n\tint res = -INF;\n\tfor (int i = 1; i <= n; i++){\n\t\tfor (int j = i + 2; j <= n; j++){\n\t\t\tint p = 1;\n\t\t\tfor (int k = 3; k <= n; k++){\n\t\t\t\tint s = calc(i, p, j, k);\n\t\t\t\tint t = calc(i, k - 2, j, k);\n\t\t\t\tif (s < t) p = k - 2;\n\t\t\t\tprintf(\"%d %d %d %d %d\\n\", i, p, j, k, calc(i, p, j, k));\n\t\t\t\tres = max(res, calc(i, p, j, k));\n\t\t\t}\n\t\t}\n\t}\n\t\n\tprintf(\"%d\\n\", res);\n\t\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <set>\n#include <tuple>\n\ntypedef std::tuple<int,int> P;\n\nconst int INF = 1001001001;\n\nint pixels[301][301];\nint sumH[301][301], sumV[301][301];\n\nint main(){\n    int N;\n    scanf(\"%d\", &N);\n\n    for(int i=1;i<=N;i++){\n        for(int j=1;j<=N;j++){\n            scanf(\"%d\", &pixels[i][j]);\n        }\n    }\n\n    for(int i=1;i<=N;i++){\n        for(int j=1;j<=N;j++){\n            sumH[i][j] += sumH[i][j-1] + pixels[i][j];\n            // printf(\"%d \", sumH[i][j]);\n        }\n        // puts(\"\");\n    }\n\n    // puts(std::string(40, '-').c_str());\n\n    for(int i=1;i<=N;i++){\n        for(int j=1;j<=N;j++){\n            sumV[i][j] += sumV[i-1][j] + pixels[i][j];\n            // printf(\"%d \", sumV[i][j]);\n        }\n        // puts(\"\");\n    }\n\n    int res = -INF;\n    for(int i=1;i<=N;i++){\n        for(int j=i+1;j<=N;j++){\n            std::set<P> set;\n            for(int k=1;k<=N;k++){\n                set.insert(std::make_tuple(-(sumH[i][k-1]+sumH[j][k-1]+sumV[j][k]-sumV[i-1][k]), k));\n            }\n\n            for(int k=1;k<=N;k++){\n                int x, idx;\n                std::tie(x, idx) = *set.begin();\n\n                for(;k<=idx;k++){\n                    res = std::max(res, -x-sumH[i][k]-sumH[j][k]+sumV[j][k]-sumV[i-1][k]);\n                    // printf(\"(;%d, %d) %d, %d, %d\\n\", i, j, x, idx, -x-sumH[i][k]-sumH[j][k]+sumV[j][k]-sumV[i-1][k]);                                 \n                }\n                \n                while(!set.empty()){\n                    int idx2;\n                    std::tie(std::ignore, idx2) = *set.begin();\n\n                    if(idx2 <= idx){set.erase(set.begin());}\n                    else{break;}\n                }\n            }\n        }\n\n        std::set<P> set;\n        for(int j=1;j<=N;j++){\n            set.insert(std::make_tuple(-sumH[i][j], j));\n        }\n\n        for(int j=1;j<=N;j++){\n            int x, idx;\n            std::tie(x, idx) = *set.begin();\n\n            for(;j<=idx;j++){\n                res = std::max(res, -x-sumH[i][j-1]);\n            }\n\n            while(!set.empty()){\n                int idx2;\n                std::tie(std::ignore, idx2) = *set.begin();\n\n                if(idx2 <= idx){set.erase(set.begin());}\n                else{break;}\n            }            \n        }\n    }\n\n    printf(\"%d\\n\", res);\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#define INF 10000000\nusing namespace std;\n\nint main(){\n  int n,x[302][302]={},y[302][302]={};\n  cin>>n;\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++)cin>>y[i][j],x[i][j]=y[i][j];\n  \n  for(int i=0;i<n;i++)\n    for(int j=n-2;j>=0;j--) {\n      x[i][j]+=x[i][j+1];\n      y[j][i]+=y[j+1][i];\n    }\n\n  int ans=max(y[0][n-1],y[n-1][0]),sum[302][302],K[2][302][302]={},t=0,f=1;\n  while(f){\n    t++,f=0;\n    for(int i=0;i<n;i++) //yoko\n      for(int j=i+1;j<n;j++) {//yoko\n\tint a=K[t%2][i][j],&b=K[(t+1)%2][i][j];\n\tb=a;\n\tsum[i][j]=-INF;\n\n\tfor(int k=a+1;k<n;k++) { //tate\n\t  int X=(x[a][i]-x[a][j+1])+(x[k][i]-x[k][j+1]);\n\t  int Y=(y[a+1][i]-y[k][i])+(y[a+1][j]-y[k][j]);\n\t  if(sum[i][j]<=X+Y)sum[i][j]=X+Y,b=k;\n\t}\n\tans=max(ans,sum[i][j]);\n\n\tif(b!=n-1)f=1;\n\tfor(int k=a+1;k<b;k++){//tate\n\t  sum[i][j]+=(x[k][i+1]-x[k][j])-(x[k-1][i]-x[k-1][j+1]);\n\t  ans=max(ans,sum[i][j]);\n\t}\n      }\n  }\n  cout <<ans<<endl;\n\t  \n  return 0; \n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\n#include <map>\n#include <set>\n#include <queue>\n#include <stack>\n#include <numeric>\n#include <bitset>\n#include <cmath>\n\nstatic const int MOD = 1000000007;\nusing ll = long long;\nusing u32 = unsigned;\nusing u64 = unsigned long long;\nusing namespace std;\n\ntemplate<class T> constexpr T INF = ::numeric_limits<T>::max()/32*15+208;\n\ntemplate <class T, class U>\nvector<T> make_v(U size, const T& init){ return vector<T>(static_cast<size_t>(size), init); }\n\ntemplate<class... Ts, class U>\nauto make_v(U size, Ts... rest) { return vector<decltype(make_v(rest...))>(static_cast<size_t>(size), make_v(rest...)); }\n\ntemplate<class T> void chmin(T &a, const T &b){ a = (a < b ? a : b); }\ntemplate<class T> void chmax(T &a, const T &b){ a = (a > b ? a : b); }\n\nint main() {\n    int n;\n    cin >> n;\n    auto v = make_v(n, n, 0), S = make_v(n+1, n+1, 0);\n    for (int i = 0; i < n; ++i) {\n        for (int j = 0; j < n; ++j) {\n            cin >> v[i][j];\n            S[i+1][j+1] = v[i][j];\n            S[i+1][j+1] += S[i][j+1] + S[i+1][j] - S[i][j];\n        }\n    }\n    int ans = -INF<int>;\n    auto f = [&](int y1, int x1, int y2, int x2){\n        return S[y2][x2]-S[y2][x1]-S[y1][x2]+S[y1][x1];\n    };\n    for (int i = 0; i < n; ++i) {\n        for (int j = i+1; j <= n; ++j) {\n            if(j-i == 1){\n                int val = 0, mn = 0;\n                for (int k = 0; k < n; ++k) {\n                    val += v[i][k];\n                    chmax(ans, val-mn);\n                    chmin(mn, val);\n                }\n                continue;\n            }\n            for (int k = 0; k < n; ++k) {\n                chmax(ans, f(i, k, j, k+1));\n            }\n            int mx = f(i, 0, j, 1);\n            for (int k = 1; k < n; ++k) {\n                chmax(ans, mx+f(i, k, j, k+1));\n                mx += v[i][k]+v[j-1][k];\n                chmax(mx, f(i, k, j, k+1));\n            }\n        }\n    }\n    cout << ans << \"\\n\";\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#define N 310\nusing namespace std;\ntypedef pair<int,int> P;\nint n,p[N][N],s,ans,a1,a2,b1,b2,d[N][N],A[N],B[N],C[N],D[N];\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++){\n    s=0;\n    for(int j=1;j<=n;j++) s+=p[j][i];\n    A[i]=C[i]=s;\n  }\n  for(int i=1;i<=n;i++){\n    s=0;\n    for(int j=1;j<=n;j++) s+=p[i][j];\n    B[i]=D[i]=s;\n  }\n  sort(C+1,C+n+1);\n  sort(D+1,D+n+1);\n  reverse(C+1,C+n+1);\n  reverse(D+1,D+n+1);\n  if(n!=1){\n    for(int i=1;i<=n;i++)\n      for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n    for(int i=1;i<=n;i++)\n      for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n    for(int i=2;i<=n;i++)\n      for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n    for(int i=1;i<=n;i++){\n      for(int j=1;j<=n;j++){\n\tfor(int k=i+1;k<=n;k++){\n\t  for(int l=j+1;l<=n;l++){\n\t    int a1=C[1],a2=C[2],b1=D[1],b2=D[2];\n\t    if(!(a1==A[i]||a2==A[i]||a1==A[k]||a2==A[k]||b1==B[j]||b2==B[j]||b1==B[l]||b2==B[l])) continue;\n\t    int sum=d[k][l]-d[i-1][l]-d[k][j-1]+d[i-1][j-1];\n\t    int sum2=d[k-1][l-1]-d[i][l-1]-d[k-1][j]+d[i][j];\n\t    ans=max(ans,sum-sum2);\n\t  }\n\t}\n      }\n    }\n    cout<<ans<<endl;\n  }else cout<<p[0][0]<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <stdio.h>\n#include <sstream>\n#include <string>\n#include <vector>\n#include <map>\n#include <queue>\n#include <algorithm>\n#include <set>\n#include <math.h>\n#include <utility>\n#include <stack>\n#include <string.h>\nusing namespace std;\ntypedef pair<int,int> P;\nconst int INF = ~(1<<31) / 2;\n\n\nint p[300][300];\nint yoko[300][300];\nint tate[300][300];\n\n\nint main(){\n    int N;\n    cin >> N;\n\n    for(int i=0;i<N;i++){\n        for(int j=0;j<N;j++){\n            scanf(\"%d\",&p[i][j]);\n            yoko[i][j] = p[i][j];\n            if(j!=0) yoko[i][j] += yoko[i][j-1];\n        }\n    }\n    for(int i=0;i<N;i++){\n        for(int j=0;j<N;j++){\n            tate[j][i] = p[j][i];\n            if(j!=0) tate[j][i] += tate[j-1][i];\n        }\n    }\n\n    int ans = -INF;\n    for(int i=0;i<N;i++){\n        for(int j=0;j+i<N;j++){\n            for(int k=0;k+i<N;k++){\n                int frame = 0;\n                if (i==0) frame = p[j][k];\n                else{\n                    frame = yoko[j][k+i]+yoko[j+i][k+i]+tate[j+i][k]+tate[j+i][k+i] -p[j][k]-p[j+i][k]-p[j][k+i]-p[j+i][k+i];\n                    if(k>0) frame -= yoko[j][k-1] + yoko[j+i][k-1];\n                    if(j>0) frame -= yoko[j-1][k] + yoko[j-1][k+i];\n                }\n                //printf(\"%d %d %d %d\\n\",i,j,k,frame);\n                ans = max(ans, frame);\n            }\n        }\n    }\n    cout << ans << endl;\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\nconst int INF = 1 << 28;\n\nint n;\nint grid[301][301];\n\nint sum(int sx, int sy, int ex, int ey)\n{\n\treturn grid[ex][ey] - \n\t       grid[ex][sy - 1] - \n\t\t   grid[sx - 1][ey] + \n\t\t   grid[sx - 1][sy - 1];\n}\n\nint calc(int sx, int sy, int ex, int ey)\n{\n\treturn sum(sx, sy, ex, ey) - sum(sx + 1, sy + 1, ex - 1, ey - 1);\n}\n\nint main()\n{\n\tscanf(\"%d\", &n);\n\tfor (int i = 1; i <= n; i++){\n\t\tfor (int j = 1; j <= n; j++){\n\t\t\tscanf(\"%d\", &grid[i][j]);\n\t\t\tgrid[i][j] += grid[i - 1][j];\n\t\t\tgrid[i][j] += grid[i][j - 1];\n\t\t\tgrid[i][j] -= grid[i - 1][j - 1];\n\t\t}\n\t}\n\t\n\t/*for (int i = 1; i <= n; i++){\n\t\tfor (int j = 1; j <= n; j++){\n\t\t\tprintf(\"%d \", grid[i][j]);\n\t\t}\n\t\tputs(\"\");\n\t}*/\n\t\n\tint res = -INF;\n\tfor (int i = 1; i <= n; i++){\n\t\tfor (int j = i + 2; j <= n; j++){\n\t\t\tint p = 1;\n\t\t\tfor (int k = 3; k <= n; k++){\n\t\t\t\tint s = calc(i, p, j, k);\n\t\t\t\tint t = calc(i, k - 2, j, k);\n\t\t\t\tif (s < t) p = k - 2;\n\t\t\t\t//printf(\"%d %d %d %d %d\\n\", i, p, j, k, calc(i, p, j, k));\n\t\t\t\tres = max(res, calc(i, p, j, k));\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfor (int i = 1; i <= n; i++){\n\t\tfor (int j = i; j <= min(n, i + 1); j++){\n\t\t\tfor (int p = 1; p <= n; p++){\n\t\t\t\tfor (int k = p; k <= n; k++){\n\t\t\t\t\tres = max(res, sum(i, p, j, k));\n\t\t\t\t\tres = max(res, sum(p, i, k, j));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\tprintf(\"%d\\n\", res);\n\t\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\n#include<vector>\n#include<queue>\nusing namespace std;\ntypedef long long ll;\nll pic[305][305]={0};\nll sum[305][305]={0};\nll rsum(int x1,int y1,int x2,int y2){\n  if(x1>=x2||y1>=y2) return 0;\n  ll ret=sum[x2][y2]+sum[x1][y1];\n  return ret-sum[x2][y1]-sum[x1][y2];\n}\nint main(){\n  int n;\n  cin>>n;\n  for(int i=1;i<=n;i++){\n    for(int j=1;j<=n;j++) cin>>pic[i][j];\n  }\n\n  for(int i=1;i<=n;i++){\n    for(int j=1;j<=n;j++) sum[i][j]=sum[i][j-1]+pic[i][j];\n  }\n  for(int i=1;i<=n;i++){\n    for(int j=1;j<=n;j++) sum[i][j]+=sum[i-1][j];\n  }\n\n  ll ans=-17441744;\n  for(int i=1;i<=n;i++){\n    for(int j=i;j<=n;j++){\n      //l=i r=j\n\n      vector<ll> vec;\n      vec.push_back(0);\n      vec.push_back(rsum(i-1,0,j,1));\n      for(int k=2;k<=n;k++){\n        vec.push_back(vec[k-1]+rsum(i-1,k-1,j,k)-rsum(i,k-2,j-1,k-1));\n      }\n\n      priority_queue<int> pque;\n      pque.push(vec[n]);\n      ll kans=pque.top();\n      for(int k=n-1;k>=1;k--){\n        kans=max(kans,pque.top()-vec[k]+rsum(i,k-1,j-1,k)+rsum(i-1,k-1,j,k));\n        //if(i==1&&j==5) cout<<pque.top()-vec[k]+rsum(i,k-1,j-1,k)+rsum(i-1,k-1,j,k)<<endl;\n        pque.push(vec[k]);\n      }\n      /*if(i==1&&j==5){\n        for(int k=1;k<=n;k++) cout<<vec[k]<<\" \";\n        cout<<endl;\n      }*/\n\n      ans=max(ans,kans);\n      //if(i==4&&j==4) cout<<i<<\" \"<<j<<\" \"<<kans<<endl;\n\n      //if(kans==14) cout<<i<<\"!\"<<j<<endl;\n    }\n  }\n  cout<<ans<<endl;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\nint p[333][333];\nint yoko[333][333];\nint tate[333][333];\nint dp[333][333][333];\nsigned main(){\n  int n;\n  cin>>n;\n\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++)\n      cin>>p[i][j];\n\n  for(int i=0;i<n;i++){\n    int sum=0;\n    for(int j=0;j<n;j++){\n      sum+=p[i][j];\n      yoko[i][j]=sum;\n    }\n    sum=0;\n    for(int j=0;j<n;j++){\n      sum+=p[j][i];\n      tate[j][i]=sum;\n    }\n  }\n  int INF=100000000;\n  fill_n(**dp,333*333*333,INF);\n  for(int i=0;i<n;i++){\n    for(int j=i;j<n;j++){\n      for(int k=n-1;k>=0;k--){\n\tdp[i][j][k]=yoko[i][k]+yoko[j][k]+tate[j][k]-tate[i][k]-p[j][k];\n\tif(i==j){\n\t  dp[i][j][k]-=yoko[i][k];\n\t  dp[i][j][k]+=p[j][k];\n\t}\n\tif(k<n-1)dp[i][j][k]=max(dp[i][j][k],dp[i][j][k+1]);\n\t//\tcout<<i<<\" \"<<j<<\" \"<<k<<\" \"<<dp[i][j][k]<<endl;\n      }\n    }\n  }\n  int ans=-INF;\n  for(int i=0;i<n;i++){\n    for(int j=i;j<n;j++){\n      for(int k=0;k<n;k++){\n\tint sum=tate[j][k]-tate[i][k]+p[i][k];\n\tif(k<n-1){\n\t  int tmp=sum;\n\t  tmp+=dp[i][j][k+1];\n\t  tmp-=(yoko[i][k]+yoko[j][k]);\n\t  if(i==j)tmp+=yoko[i][k];\n\t  sum=max(sum,tmp);\n\t}\n\tans=max(ans,sum);\n\t//\tcout<<i<<\" \"<<j<<\" \"<<k<<\" \"<<ans<<endl;\n      }\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n#define rep(i,x,y) for(int i=(x);i<(y);++i)\n#define debug(x) #x << \"=\" << (x)\n\n#ifdef DEBUG\n#define _GLIBCXX_DEBUG\n#define dump(x) std::cerr << debug(x) << \" (L:\" << __LINE__ << \")\" << std::endl\n#else\n#define dump(x)\n#endif\n\ntypedef long long int ll;\ntypedef pair<int,int> pii;\n//template<typename T> using vec=std::vector<T>;\n\nconst int inf=1<<30;\nconst long long int infll=1LL<<58;\nconst double eps=1e-9;\nconst int dx[]={1,0,-1,0},dy[]={0,1,0,-1};\n\ntemplate <typename T> ostream &operator<<(ostream &os, const vector<T> &vec){\n\tos << \"[\";\n\tfor (const auto &v : vec) {\n\t\tos << v << \",\";\n\t}\n\tos << \"]\";\n\treturn os;\n}\n\nvoid solve(){\n    int n;\n    cin >> n;\n    vector<vector<int>> p(n,vector<int>(n));\n    rep(i,0,n) rep(j,0,n) cin >> p[i][j];\n\n    vector<vector<int>> cumsum(n,vector<int>(n));\n    rep(y,0,n){\n        cumsum[y][0]=p[y][0];\n        rep(x,1,n) cumsum[y][x]=cumsum[y][x-1]+p[y][x];\n    }\n    rep(y,1,n) rep(x,0,n) cumsum[y][x]+=cumsum[y-1][x];\n\n    auto rectangle_sum=[&](int y1,int x1,int y2,int x2){\n        int res=0;\n        res+=cumsum[y2][x2];\n        if(y1!=0) res-=cumsum[y1-1][x2];\n        if(x1!=0) res-=cumsum[y2][x1-1];\n        if(y1!=0 and x1!=0) res+=cumsum[y1-1][x1-1];\n        return res;\n    };\n    int ans=-inf;\n    rep(y1,0,n){\n        rep(y2,y1,n){\n            int opt_x=0;\n            rep(x,0,n){\n                int tmp=rectangle_sum(y1,opt_x,y2,x);\n                if(y1<=y2-2 and x>=opt_x+1) tmp-=rectangle_sum(y1+1,opt_x+1,y2-1,x);\n                if(rectangle_sum(y1,x,y2,x)>=tmp) opt_x=x;\n            }\n            rep(x,opt_x,n){\n                int tmp=rectangle_sum(y1,opt_x,y2,x);\n                if(y1<=y2-2 and x>=opt_x+2) tmp-=rectangle_sum(y1+1,opt_x+1,y2-1,x-1);\n                ans=max(ans,tmp);\n            }\n        }\n    }\n\n    cout << ans << endl;\n}\n\nint main(){\n\tstd::ios::sync_with_stdio(false);\n\tstd::cin.tie(0);\n\tsolve();\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <algorithm>\n\nconst int INF = 1001001001;\nint N;\nint p[301][301], q[301][301];\n\nint sumY(int x, int y1, int y2){\n    return p[y2][x] - p[y1-1][x];\n}\n\nint sumX(int y, int x1, int x2){\n    return q[y][x2] - q[y][x1-1];\n}\n\nint sum51(int x1, int x2, int y1, int y2){\n    return sumX(y1, x1, x2-1) + sumX(y2, x1, x2-1) + sumY(x2, y1, y2);\n}\n\nint sum52(int x1, int x2, int y1, int y2){\n    return sumY(x1, y1, y2-1) + sumY(x2, y1, y2-1) + sumX(y2, x1, x2);\n}\n\nint sumFrame(int x1, int x2, int y1, int y2){\n    return sumY(x1, y1, y2) + sum51(x1+1, x2, y1, y2);\n}\n\n\nint main(){\n    scanf(\"%d\", &N);\n\n    for(int i=1;i<=N;i++){\n        for(int j=1;j<=N;j++){\n            scanf(\"%d\", &p[i][j]);\n            q[i][j] = p[i][j];\n        }\n    }\n\n    for(int i=1;i<=N;i++){\n        for(int j=1;j<=N;j++){\n            p[i][j] += p[i-1][j];\n            q[i][j] += q[i][j-1];\n        }\n    }\n\n    int res = -INF;\n    for(int i=1;i<=N;i++){\n        for(int j=1;j<=N;j++){\n            for(int k=j;k<=N;k++){\n                res = std::max({res, sumX(i, j, k), sumY(i, j, k)});\n            }\n        }\n    }\n\n    for(int i=1;i<=N;i++){\n        for(int j=i+1;j<=N;j++){\n            int mx = -INF, index = 1;\n            for(int k=1,l=2;k<N;){\n                while(l < N && sum51(k, l, i, j) <= sum51(k, l+1, i, j)){\n                    l++;\n                }\n                mx = std::max(mx, sumFrame(index, l, i, j));\n\n                for(;k<l;k++){\n                    int x = sumFrame(k, l, i, j);\n                    if(x > mx){\n                        mx = x;\n                        index = k;\n                    }\n                }\n                l++;\n            }\n            res = std::max(res, mx);\n        }\n    }\n\n    for(int i=1;i<=N;i++){\n        for(int j=i+1;j<=N;j++){\n            int mx = -INF, index = 1;\n            for(int k=1,l=2;k<N;){\n                while(l < N && sum52(i, j, k, l) <= sum52(i, j, k, l+1)){\n                    l++;\n                }\n                mx = std::max(mx, sumFrame(i, j, index, l));\n\n                for(;k<l;k++){\n                    int x = sumFrame(i, j, k, l);\n                    if(x > res){\n                        mx = x;\n                        index = k;\n                    }\n                }\n                l++;\n            }\n            res = std::max(res, mx);\n        }\n    }\n\n    printf(\"%d\\n\", res);\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <iostream>\n#include <sstream>\n#include <fstream>\n#include <iomanip>\n#include <algorithm>\n#include <cmath>\n#include <string>\n#include <vector>\n#include <list>\n#include <queue>\n#include <stack>\n#include <set>\n#include <map>\n#include <bitset>\n#include <numeric>\n#include <limits>\n#include <climits>\n#include <cfloat>\n#include <functional>\nusing namespace std;\n\nint main()\n{\n    int n;\n    cin >> n;\n    vector<vector<int> > p(n, vector<int>(n));\n    vector<vector<int> > sum(n, vector<int>(n+1));\n    for(int i=0; i<n; ++i){\n        for(int j=0; j<n; ++j){\n            cin >> p[i][j];\n            sum[i][j+1] = sum[i][j] + p[i][j];\n        }\n    }\n\n    int ans = INT_MIN / 2;\n    for(int x1=0; x1<n; ++x1){\n        for(int x2=x1; x2<n; ++x2){\n            int a = INT_MIN / 2;\n            for(int y=0; y<n; ++y){\n                int b = sum[y][x2+1] - sum[y][x1];\n                ans = max({ans, b, a + b});\n\n                if(x1 == x2)\n                    a = max(b, a + p[y][x1]);\n                else\n                    a = max(b, a + p[y][x1] + p[y][x2]);\n            }\n        }\n    }\n    cout << ans << endl;\n\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#define N 310\n#define INF (1e9)\nusing namespace std;\nint n,p[N][N],ans,c,b,ma,d[N][N];\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  ans=-INF;\n  for(int k=1;k<=n;k++){\n    for(int l=k+1;l<=n;l++){\n      b=c=1;\n      while(1){\n\tma=-INF;\n\tfor(int i=c+1;i<=n;i++){\n\t  int sum=d[i][l]-d[c-1][l]-d[i][k-1]+d[c-1][k-1],sum2=0;\n\t  if(i-c>=2&&l-k>=2) sum2=d[i-1][l-1]-d[c][l-1]-d[i-1][k]+d[c][k];\n\t  if(ma<sum-sum2) ma=sum-sum2,c=i;\n\t  ans=max(ans,sum-sum2);\n\t}\n\tif(c==n) break;\n      }\n      for(int i=b+1;i<c;i++){\n\tint sum=d[i][l]-d[b-1][l]-d[i][k-1]+d[b-1][k-1],sum2=0;\n\tif(i-b>=2&&l-k>=2) sum2=d[i-1][l-1]-d[b][l-1]-d[i-1][k]+d[b][k];\n\tans=max(ans,sum-sum2);\n      }\n      b=c;\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nint n;\nint p[310][310] = {};\nint rui[310][310] = {};\n\n\ntypedef struct{\n  int num;\n  int idx;\n} Data;\nData dp[310][310][310] = {};\n\nint getRuiseki(int x1, int y1, int x2,int y2){\n  if(x1 > x2 || y1 > y2)        return 0;\n  x2++; y2++;\n  return rui[y2][x2] - rui[y2][x1] - rui[y1][x2] + rui[y1][x1];\n}\n\nint getDonut(int x1, int y1, int x2, int y2){\n  return getRuiseki(x1,y1,x2,y2) - getRuiseki(x1+1,y1+1,x2-1,y2-1);\n}\n\nint getL(int x1, int x2, int y){\n  return getRuiseki(x1,0,x2,y) - getRuiseki(x1, 0, x2-1, y-1);\n}\n\nint main(){\n  cin >> n;\n  for(int i = 1;i <= n;i++){\n    for(int j = 1;j <= n;j++){\n      cin >> rui[i][j];\n    }\n  }\n\n  for(int i = 0;i <= n;i++){\n    for(int j = 0;j <= n;j++){\n      rui[i][j+1] += rui[i][j];\n    }\n  }\n\n  for(int j = 0;j <= n;j++){\n    for(int i = 0;i <= n;i++){\n      rui[i+1][j] += rui[i][j];\n    }\n  }\n\n\n  for(int finx = n-1;finx >= 0;finx--){\n    for(int x = finx;x >= 0;x--){\n      dp[finx][x][n-1].num = getDonut(x, 0, finx, n-1);\n      dp[finx][x][n-1].idx = n-1;\n      for(int y = n-2;y >= 0;y--){\n        int tmp = getDonut(x, 0, finx, y);\n        if(tmp > dp[finx][x][y+1].num){\n          dp[finx][x][y].num = tmp;\n          dp[finx][x][y].idx = y;\n        }else{\n          dp[finx][x][y] = dp[finx][x][y+1];\n        }\n      }\n    }\n  }\n\n  int ans = INT_MIN;\n  for(int x = 0; x < n; x++){\n    for(int y = 0;y < n;y++){\n      for(int x2 = x;x2 < n;x2++){\n        ans = max(ans,getDonut(x,y,x2,dp[x2][x][y].idx));\n      }\n    }\n  }\n\n  cout << ans << endl;\n\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nint n;\nint p[310][310] = {};\nint rui[310][310] = {};\n\n\ntypedef struct{\n  int num;\n  int idx;\n} Data;\nData dp[310][310][310] = {};\n\nint getRuiseki(int x1, int y1, int x2,int y2){\n  if(x1 > x2 || y1 > y2)        return 0;\n  x2++; y2++;\n  return rui[y2][x2] - rui[y2][x1] - rui[y1][x2] + rui[y1][x1];\n}\n\nint getDonut(int x1, int y1, int x2, int y2){\n  return getRuiseki(x1,y1,x2,y2) - getRuiseki(x1+1,y1+1,x2-1,y2-1);\n}\n\nint getL(int x1, int x2, int y){\n  return getRuiseki(x1,0,x2,y) - getRuiseki(x1, 0, x2-1, y-1);\n}\n\nint main(){\n  cin >> n;\n  for(int i = 1;i <= n;i++){\n    for(int j = 1;j <= n;j++){\n      cin >> rui[i][j];\n    }\n  }\n\n  for(int i = 0;i <= n;i++){\n    for(int j = 0;j <= n;j++){\n      rui[i][j+1] += rui[i][j];\n    }\n  }\n\n  for(int j = 0;j <= n;j++){\n    for(int i = 0;i <= n;i++){\n      rui[i+1][j] += rui[i][j];\n    }\n  }\n\n\n  for(int finx = n-1;finx >= 0;finx--){\n    for(int x = finx;x >= 0;x--){\n      dp[finx][x][n-1].num = getDonut(x, 0, finx, n-1);\n      dp[finx][x][n-1].idx = n-1;\n      for(int y = n-2;y >= 0;y--){\n        int tmp = getDonut(x, 0, finx, y);\n        if(tmp > dp[finx][x][y+1].num){\n          dp[finx][x][y].num = tmp;\n          dp[finx][x][y].idx = y;\n        }else{\n          dp[finx][x][y] = dp[finx][x][y+1];\n        }\n      }\n    }\n  }\n\n  int ans = INT_MIN;\n  for(int x = 0; x < n; x++){\n    for(int y = 0;y < n;y++){\n      for(int x2 = x;x2 < n;x2++){\n        ans = max(ans,getDonut(x,y,x2,dp[x2][x][y].idx));\n      }\n    }\n  }\n\n  cout << ans << endl;\n\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstring>\nusing namespace std;\n int mem[2][302][302];\nint main(){\n  int n,x[302][302]={},y[302][302]={};\n  cin>>n;\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++)cin>>y[i][j],x[i][j]=y[i][j];\n  \n  int ans=max(y[0][n-1],y[n-1][0]);\n  for(int i=0;i<n;i++)\n    for(int j=n-2;j>=0;j--) {\n      x[i][j]+=x[i][j+1];\n      y[j][i]+=y[j+1][i];\n      if(ans<x[i][j])ans=x[i][j];\n      if(ans<y[j][i])ans=y[j][i];\n    }\n  // n=300;\n  for(int i=0;i<=n;i++)\n    for(int j=0;j<=n;j++) mem[0][i][j]=mem[1][i][j]=-1000000000; \n\n  for(int i=0;i<n;i++){ //tate\n    for(int j=0;j<n;j++){//yoko\n      for(int k=i+1;k<n;k++){//tate\n\tfor(int l=j+1;l<n;l++){//yoko\n\t  int X=(x[i][j]-x[i][l+1]);\n\t  //if(X<=mem[0][j][l+1])continue;\n\t  mem[0][j][l+1]=X;\n\t  int Y=(y[i+1][j]-y[k][j])+(y[i+1][l]-y[k][l]);\n\t  X+=(x[k][j]-x[k][l+1]);\t  \n\t  if(ans<X+Y)ans=X+Y;\n\t}\n      }\n    }\n  }\n  cout <<ans<<endl;\n\t  \n  return 0; \n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n#define rep(i,x,y) for(int i=(x);i<(y);++i)\n#define debug(x) #x << \"=\" << (x)\n\n#ifdef DEBUG\n#define _GLIBCXX_DEBUG\n#define dump(x) std::cerr << debug(x) << \" (L:\" << __LINE__ << \")\" << std::endl\n#else\n#define dump(x)\n#endif\n\ntypedef long long int ll;\ntypedef pair<int,int> pii;\n//template<typename T> using vec=std::vector<T>;\n\nconst int inf=1<<30;\nconst long long int infll=1LL<<58;\nconst double eps=1e-9;\nconst int dx[]={1,0,-1,0},dy[]={0,1,0,-1};\n\ntemplate <typename T> ostream &operator<<(ostream &os, const vector<T> &vec){\n\tos << \"[\";\n\tfor (const auto &v : vec) {\n\t\tos << v << \",\";\n\t}\n\tos << \"]\";\n\treturn os;\n}\n\nvoid solve(){\n    int n;\n    cin >> n;\n    vector<vector<int>> p(n,vector<int>(n));\n    rep(i,0,n) rep(j,0,n) cin >> p[i][j];\n\n    vector<vector<int>> cumsum(n,vector<int>(n));\n    rep(y,0,n){\n        cumsum[y][0]=p[y][0];\n        rep(x,1,n) cumsum[y][x]=cumsum[y][x-1]+p[y][x];\n    }\n    rep(y,1,n) rep(x,0,n) cumsum[y][x]+=cumsum[y-1][x];\n\n    auto rectangle_sum=[&](int y1,int x1,int y2,int x2){\n        int res=0;\n        res+=cumsum[y2][x2];\n        if(y1!=0) res-=cumsum[y1-1][x2];\n        if(x1!=0) res-=cumsum[y2][x1-1];\n        if(y1!=0 and x1!=0) res+=cumsum[y1-1][x1-1];\n        return res;\n    };\n    int ans=0;\n    rep(y1,0,n){\n        rep(y2,y1,n){\n            int opt_x=0;\n            rep(x,0,n){\n                int tmp=rectangle_sum(y1,opt_x,y2,x);\n                if(y1<=y2-2 and x>=opt_x+1) tmp-=rectangle_sum(y1+1,opt_x+1,y2-1,x);\n                if(rectangle_sum(y1,x,y2,x)>=tmp) opt_x=x;\n            }\n            rep(x,opt_x,n){\n                int tmp=rectangle_sum(y1,opt_x,y2,x);\n                if(y1<=y2-2 and x>=opt_x+2) tmp-=rectangle_sum(y1+1,opt_x+1,y2-1,x-1);\n                ans=max(ans,tmp);\n            }\n        }\n    }\n\n    cout << ans << endl;\n}\n\nint main(){\n\tstd::ios::sync_with_stdio(false);\n\tstd::cin.tie(0);\n\tsolve();\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <cstring>\n#include <cstdlib>\n#include <cmath>\n#include <complex>\n#include <string>\n#include <sstream>\n#include <algorithm>\n#include <numeric>\n#include <vector>\n#include <queue>\n#include <stack>\n#include <functional>\n#include <iostream>\n#include <map>\n#include <set>\nusing namespace std;\ntypedef pair<int,int> P;\ntypedef long long ll;\ntypedef vector<int> vi;\ntypedef vector<ll> vll;\n#define pu push\n#define pb push_back\n#define mp make_pair\n#define eps 1e-9\n#define INF 2000000000\n#define sz(x) ((int)(x).size())\n#define fi first\n#define sec second\n#define SORT(x) sort((x).begin(),(x).end())\n#define all(x) (x).begin(),(x).end()\n#define EQ(a,b) (abs((a)-(b))<eps)\nint N;\nint f[305][305],imos[305][305];\nint l[305],r[305];\nint sum(int i,int j,int k)\n{\n\treturn imos[j][k]-imos[j][k-1]-imos[i-1][k]+imos[i-1][k-1];\n}\nint add(int i,int j,int k)\n{\n\tif(i==j)return f[i][k];\n\treturn f[i][k]+f[j][k];\n}\nint main()\n{\n\tscanf(\"%d\",&N);\n\tfor(int i=1;i<=N;i++)\n\t{\n\t\tfor(int j=1;j<=N;j++)\n\t\t{\n\t\t\tscanf(\"%d\",&f[i][j]);\n\t\t\timos[i][j]=f[i][j];\n\t\t}\n\t}\n\tfor(int i=1;i<=N;i++)\n\t{\n\t\tfor(int j=1;j<=N;j++)\n\t\t{\n\t\t\timos[i][j+1]+=imos[i][j];\n\t\t}\n\t}\n\tfor(int j=1;j<=N;j++)\n\t{\n\t\tfor(int i=1;i<=N;i++)\n\t\t{\n\t\t\timos[i+1][j]+=imos[i][j];\n\t\t}\n\t}\n\twhile(1)\n\t{\n\t\tint x,y,z;\n\t\tcin >> x >> y >> z;\n\t\tcout << sum(x,y,z) << ' ' << add(x,y,z) << endl;\n\t}\n\tint ans = -INF;\n\tfor(int i=1;i<=N;i++)\n\t{\n\t\tfor(int j=i;j<=N;j++)\n\t\t{\n\t\t\tl[1]=sum(i,j,1);\n\t\t\tfor(int k=1;k<=N;k++)ans = max(ans,sum(i,j,k));\n\t\t\tfor(int k=2;k<=N;k++)l[k] = max(l[k-1]+add(i,j,k),sum(i,j,k));\n\t\t\tr[N]=sum(i,j,N);\n\t\t\tfor(int k=N-1;k>=1;k--)r[k] = max(r[k+1]+add(i,j,k),sum(i,j,k));\n\t\t\tfor(int k=1;k<N;k++)ans = max(ans,l[k]+r[k+1]);\n\t\t}\n\t}\n\tprintf(\"%d\\n\",ans);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#include <map>\n#define N 310\n#define ma make_pair\nusing namespace std;\ntypedef pair<int,int> P;\nint n,p[N][N],ans,d[N][N],sum,sum2;\nmap<P,P> m,t;\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  int cnt=0;\n  for(int i=1;i<=n;i++){\n    for(int j=1;j<=n;j++){\n      for(int k=n;k>=i;k--){\n\tfor(int l=n;l>=j;l--){\n\t  if(t.find(P(i,k))!=t.end()&&l>t[P(i,k)].first) continue;\n\t  if(m.find(P(j,l))!=m.end()&&k>m[P(j,l)].first) continue;\n\t  cnt++;\n\t  sum2=0;\n\t  sum=d[k][l]-d[i-1][l]-d[k][j-1]+d[i-1][j-1];\n\t  if(k-i>=2&&l-j>=2) sum2=d[k-1][l-1]-d[i][l-1]-d[k-1][j]+d[i][j];\n\t  ans=max(ans,sum-sum2);\n\t  if(m.find(P(j,l))==m.end()) m.insert(ma(P(j,l),P(k,ans)));\n\t  else if(m[P(j,l)].second<ans) m[P(j,l)]=ma(k,ans);\n\t  if(t.find(P(i,k))==t.end()) t.insert(ma(P(i,k),P(l,ans)));\n\t  else if(t[P(i,k)].second<ans) t[P(i,k)]=ma(l,ans);\n\t}\n      }\n    }\n  }\n      cout<<cnt<<endl;\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define INF (1e9)\n#define N 300\nusing namespace std;\nint n,p[N][N],d[N][N],ans=-INF;\n\nint sum(int y1,int x1,int y2,int x2){\n  return d[y2][x2]-d[y2][x1-1]-d[y1-1][x2]+d[y1-1][x1-1];\n}\n\nint cal(int s,int g){\n  int mx,res;\n  res=mx=sum(s,0,g,0);\n  for(int i=1;i<n;i++){\n    int p=sum(s,i,g,i);\n    res=max(res,mx+p);\n    res=max(res,p);\n    if(s!=g)mx=max(mx+sum(s,i,s,i)+sum(g,i,g,i),p);\n    else mx=max(mx+sum(s,i,s,i),p);\n  }\n  return res;\n}\n\nint main(){\n  cin>>n;\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++){\n      cin>>p[i][j];\n      d[i][j]=p[i][j];\n      ans=max(ans,p[i][j]);\n    }\n  for(int i=0;i<n;i++)\n    for(int j=1;j<n;j++)d[i][j]+=d[i][j-1];\n  for(int i=0;i<n;i++)\n    for(int j=1;j<n;j++)d[j][i]+=d[j-1][i];\n  for(int i=0;i<n;i++)\n    for(int j=i;j<n;j++)ans=max(ans,cal(i,j));\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <vector>\n#include <algorithm>\n\nusing namespace std;\n\nint c_sum_tate[300][301];\nint c_sum_yoko[300][301];\nint c_sum_2[300][300][301];\n\nint main() {\n    int n;\n    cin >> n;\n    vector<vector<int>> p(n, vector<int>(n));\n    for (int i = 0; i < n; i++) {\n        for (int j = 0; j < n; j++) {\n            cin >> p[i][j];\n        }\n    }\n\n    // c_sum_tate[x] = 左からx列目の累積和\n    for (int i = 0; i < 300; i++)\n        for (int j = 0; j <= 300; j++)c_sum_tate[i][j] = 0;\n    for (int i = 0; i < n; i++) {\n        for (int j = 0; j < n; j++) {\n            c_sum_tate[i][j + 1] = c_sum_tate[i][j] + p[j][i];\n        }\n    }\n    // c_sum_yoko[x] = 上からx行目の累積和\n    for (int i = 0; i < 300; i++)\n        for (int j = 0; j <= 300; j++)c_sum_yoko[i][j] = 0;\n    for (int i = 0; i < n; i++) {\n        for (int j = 0; j < n; j++) {\n            c_sum_yoko[i][j + 1] = c_sum_yoko[i][j] + p[i][j];\n        }\n    }\n\n    // コ形 の累積和を持つ\n    // c_sum2[x][y][z]=上からx行目(0-indexed)と上からy行目(0-indexed)のz番目(1-indexed)までカウント\n    for (int i = 0; i < 300; i++)\n        for (int j = 0; j < 300; j++)\n            for (int k = 0; k <= 300; k++)c_sum_2[i][j][k] = 0;\n    for (int i = 0; i < n; i++) {\n        for (int j = i; j < n; j++) {\n            for (int k = 1; k <= n; k++) {\n                c_sum_2[i][j][k] = c_sum_yoko[i][k - 1];\n                if (j != i)c_sum_2[i][j][k] += c_sum_yoko[j][k - 1];\n\n                c_sum_2[i][j][k] += c_sum_tate[k - 1][j + 1] - c_sum_tate[k - 1][i];\n            }\n\n            // c_sum_2の累積Maxを右から取る\n            for (int k = n - 1; k >= 0; k--) c_sum_2[i][j][k] = max(c_sum_2[i][j][k], c_sum_2[i][j][k + 1]);\n        }\n    }\n\n    int ret = -1145141919;\n    for (int sx = 0; sx < n; sx++) {\n        for (int sy = 0; sy < n; sy++) {\n            int lside = 0;\n            for (int ex = sx; ex < n; ex++) {\n                lside += p[ex][sy];\n                ret = max(ret, lside);\n                if (sy < n - 1) {\n                    int box = lside + c_sum_2[sx][ex][sy + 2] - c_sum_yoko[sx][sy + 1];\n                    if (ex != sx)box -= c_sum_yoko[ex][sy + 1];\n\n                    ret = max(ret, box);\n                }\n            }\n        }\n    }\n\n    cout << ret << endl;\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <cstdint>\n#include <vector>\n#include <algorithm>\n\nstd::vector<size_t> make_vector(size_t n, size_t x) {\n  return std::vector<size_t>(n, x);\n}\n\ntemplate <class Tp>\nstd::vector<Tp> make_vector(size_t n, const Tp& x) {\n  return std::vector<Tp>(n, x);\n}\n\ntemplate <class... Ts>\nauto make_vector(size_t n, size_t m, const Ts&... x) {\n  return std::vector<decltype(make_vector(m, x...))>(n, make_vector(m, x...));\n}\n\nint main() {\n  size_t N;\n  scanf(\"%zu\", &N);\n\n  auto p = make_vector(N, N, 0);\n  for (auto& pi: p)\n    for (auto& pij: pi) scanf(\"%d\", &pij);\n\n  auto q = make_vector(N+1, N+1, 0);\n  for (size_t i = 0; i < N; ++i)\n    for (size_t j = 0; j < N; ++j)\n      q[i+1][j+1] = q[i+1][j] + p[i][j];\n\n  for (size_t i = 0; i < N; ++i)\n    for (size_t j = 1; j <= N; ++j)\n      q[i+1][j] += q[i][j];\n\n  auto sum = [&](size_t u, size_t b, size_t l, size_t r) {\n    int res = q[b][r];\n    res -= q[b][l];\n    res -= q[u][r];\n    res += q[u][l];\n    return res;\n  };\n\n  int res = 0;\n  for (size_t i = 0; i < N; ++i)\n    for (size_t j = i+1; j < N; ++j) {\n      int frame = sum(i, j+1, 0, N);\n      frame -= sum(i+1, j, 1, N-1);\n\n      std::vector<int> left(N);\n      for (size_t k = 1; k < N; ++k) {\n        left[k] = left[k-1];\n        left[k] -= sum(i, j+1, k-1, k);\n        left[k] += sum(i+1, j, k, k+1);\n      }\n\n      std::vector<int> right(N);\n      for (size_t k = N-1; k--;) {\n        right[k] = right[k+1];\n        right[k] -= sum(i, j+1, k+1, k+2);\n        right[k] += sum(i+1, j, k, k+1);\n      }\n\n      for (size_t k = N-1; k--;)\n        right[k] = std::max(right[k], right[k+1]);\n\n      int cur = frame;\n      for (size_t k = 0; k+1 < N; ++k)\n        cur = std::max(cur, frame+(left[k]+right[k+1]));\n\n      for (size_t k = 0; k < N; ++k)\n        cur = std::max(cur, sum(i, j+1, k, k+1));\n\n      res = std::max(res, cur);\n    }\n\n  for (size_t i = 0; i < N; ++i)\n    for (size_t j = 0; j < N; ++j)\n      for (size_t k = j+1; k <= N; ++k)\n        res = std::max(res, sum(i, i+1, j, k));\n\n  printf(\"%d\\n\", res);\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#define INF 10000000\nusing namespace std;\n\nint main(){\n  int n,x[302][302]={},y[302][302]={};\n  cin>>n;\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++)cin>>y[i][j],x[i][j]=y[i][j];\n\n    for(int i=0;i<300;i++)\n    for(int j=0;j<300;j++) y[i][j]=x[i][j]=-1;\n    n=300;\n  \n  for(int i=0;i<n;i++)\n    for(int j=n-2;j>=0;j--) {\n      x[i][j]+=x[i][j+1];\n      y[j][i]+=y[j+1][i];\n    }\n\n  int ans=max(y[0][n-1],y[n-1][0]),sum,K[302][302]={},t=0,f=1;\n  while(f){\n    t++,f=0;\n    for(int i=0;i<n;i++) //yoko\n      for(int j=i+1;j<n;j++) {//yoko\n\tint a=K[i][j],nk=a;\n\tsum=-INF;\n\tfor(int k=a+1;k<n;k++) { //tate\n\t  int X=(x[a][i]-x[a][j+1])+(x[k][i]-x[k][j+1]);\n\t  int Y=(y[a+1][i]-y[k][i])+(y[a+1][j]-y[k][j]);\n\t  if(sum<=X+Y)sum=X+Y,nk=k;\n\t}\n\tans=max(ans,sum);\n\t\n\tif(nk!=n-1)f=1;\n\tfor(int k=a+1;k<nk;k++){//tate\n\t  sum+=(x[k][i+1]-x[k][j])-(x[k-1][i]-x[k-1][j+1]);\n\t  ans=max(ans,sum);\n\t  }\n\tK[i][j]=nk;\n      }\n  }\n  cout <<ans<<endl;\n\t  \n  return 0; \n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nint n;\nint p[310][310] = {};\nint rui[310][310] = {};\n\n\ntypedef struct{\n  int num;\n  int idx;\n} Data;\nData dp[310][310][310] = {};\n\nint getRuiseki(int x1, int y1, int x2,int y2){\n  if(x1 > x2 || y1 > y2)        return 0;\n  x2++; y2++;\n  return rui[y2][x2] - rui[y2][x1] - rui[y1][x2] + rui[y1][x1];\n}\n\nint getDonut(int x1, int y1, int x2, int y2){\n  return getRuiseki(x1,y1,x2,y2) - getRuiseki(x1+1,y1+1,x2-1,y2-1);\n}\n\nint getL(int x1, int x2, int y){\n  return getRuiseki(x1,0,x2,y) - getRuiseki(x1, 0, x2-1, y-1);\n}\n\nint main(){\n  cin >> n;\n  for(int i = 1;i <= n;i++){\n    for(int j = 1;j <= n;j++){\n      cin >> rui[i][j];\n    }\n  }\n\n  for(int i = 0;i <= n;i++){\n    for(int j = 0;j <= n;j++){\n      rui[i][j+1] += rui[i][j];\n    }\n  }\n\n  for(int j = 0;j <= n;j++){\n    for(int i = 0;i <= n;i++){\n      rui[i+1][j] += rui[i][j];\n    }\n  }\n\n\n  for(int finx = n-1;finx >= 0;finx--){\n    for(int x = finx;x >= 0;x--){\n      dp[finx][x][n-1].num = getRuiseki(x, n-1, finx, n-1);\n      dp[finx][x][n-1].idx = n-1;\n      for(int y = n-2;y >= 0;y--){\n        int tmp = getRuiseki(x+1,y,finx-1,y);\n        if(tmp > dp[finx][x][y+1].num){\n          dp[finx][x][y].num = getRuiseki(x,y,finx,y);\n          dp[finx][x][y].idx = y;\n        }else{\n          dp[finx][x][y] = dp[finx][x][y+1];\n        }\n      }\n    }\n  }\n\n  int ans = INT_MIN;\n  for(int x = 0; x < n; x++){\n    for(int y = 0;y < n;y++){\n      for(int x2 = x;x2 < n;x2++){\n        ans = max(ans,getDonut(x,y,x2,dp[x2][x][y].idx));\n      }\n    }\n  }\n\n  cout << ans << endl;\n\n  return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "//0310\n#include <bits/stdc++.h>\n\nusing namespace std;\n\n#define FOR(i,a,b) for(i=(a);i<(b);i++)\n#define REP(i,a) FOR(i,0,a)\n\nconst int MAX_N=300;\n\nconst int INF=1e8;\n\nint N;\nint p[MAX_N+1][MAX_N+1];\n\nint dp[MAX_N+1][MAX_N+1][MAX_N+1],dp2[MAX_N+1][MAX_N+1][MAX_N+2];\n\nint main(){\n\tscanf(\"%d\",&N);\n\tint i,j,k;\n\tFOR(i,1,N+1){\n\t\tFOR(j,1,N+1){\n\t\t\tscanf(\"%d\",&p[i][j]);\n\t\t}\n\t}\n\tint res=-INF;\n\tFOR(i,1,N+1){\n\t\tFOR(j,1,N+1){\n\t\t\tfor (int k=i;k>=1;k--){\n\t\t\t\tif (i==k){\n\t\t\t\t\tdp2[i][j][k]=p[i][j];\n\t\t\t\t}else{\n\t\t\t\t\tdp2[i][j][k]=dp2[i][j][k+1]+p[k][j];\n\t\t\t\t}\n\t\t\t\tres=max(res,dp2[i][j][k]);\n\t\t\t}\n\t\t}\n\t}\n\tFOR(i,1,N+1){\n\t\tFOR(j,2,N+1){\n\t\t\tFOR(k,1,i+1){\n\t\t\t\tif (j==2){\n\t\t\t\t\tdp[i][j][k]=dp2[i][j-1][k]+dp2[i][j][k];\n\t\t\t\t}else{\n\t\t\t\t\tdp[i][j][k]=dp2[i][j][k]+max(dp2[i][j-1][k],dp[i][j-1][k]-dp2[i-1][j-1][k+1]);\n\t\t\t\t}\n\t\t\t\tres=max(res,dp[i][j][k]);\n\t\t\t}\n\t\t}\n\t}\n\tprintf(\"%d\\n\",res);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define INF (1e9)\n#define N 300\nusing namespace std;\nint n,p[N][N],d[N][N],ans=-INF;\n\nint sum(int y1,int x1,int y2,int x2){\n  return d[y2][x2]-d[y2][x1-1]-d[y1-1][x2]+d[y1-1][x1-1];\n}\n\nint cal(int s,int g){\n  int mx,res;\n  res=mx=sum(s,0,g,0);\n  for(int i=1;i<n;i++){\n    int p=sum(s,i,g,i);\n    res=max(res,mx+p);\n    res=max(res,p);\n    mx=max(mx+sum(s,i,s,i)+sum(g,i,g,i),p);\n  }\n  return res;\n}\n\nint main(){\n  cin>>n;\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++){\n      cin>>p[i][j];\n      d[i][j]=p[i][j];\n      ans=max(ans,p[i][j]);\n    }\n  for(int i=0;i<n;i++)\n    for(int j=1;j<n;j++)d[i][j]+=d[i][j-1];\n  for(int i=0;i<n;i++)\n    for(int j=1;j<n;j++)d[j][i]+=d[j-1][i];\n  for(int i=0;i<n;i++)\n    for(int j=i+1;j<n;j++)ans=max(ans,cal(i,j));\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#define N 310\n#define INF (1e9)\nusing namespace std;\nint n,p[N][N],ans,c,b,ma,d[N][N];\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  ans=p[1][1];\n  for(int k=1;k<=n;k++){\n    for(int l=k;l<=n;l++){\n      b=c=1;\n      while(c!=n){\n\tma=-INF;\n\tfor(int i=c+1;i<=n;i++){\n\t  int sum=d[i][l]-d[b-1][l]-d[i][k-1]+d[b-1][k-1],sum2=0;\n\t  if(i-b>=2&&l-k>=2) sum2=d[i-1][l-1]-d[b][l-1]-d[i-1][k]+d[b][k];\n\t  if(ma<sum-sum2) ma=sum-sum2,c=i;\n\t}\n\tans=max(ans,ma);\n\tfor(int i=b;i<=c;i++){\n\t  int sum=d[c][l]-d[i-1][l]-d[c][k-1]+d[i-1][k-1],sum2=0;\n\t  if(c-i>=2&&l-k>=2) sum2=d[c-1][l-1]-d[i][l-1]-d[c-1][k]+d[i][k];\n\t  ans=max(ans,sum-sum2);\n\t}\n\tb=c;\n      }\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "//0310\n#include <bits/stdc++.h>\n\nusing namespace std;\n\n#define FOR(i,a,b) for(int i=(a);i<(b);i++)\n#define REP(i,a) FOR(i,0,a)\n\nconst int MAX_N=300;\n\nconst int INF=1e8;\n\nint N;\nint p[MAX_N+5][MAX_N+5];\n\nint dp[MAX_N+5][MAX_N+5][MAX_N+5],dp2[MAX_N+5][MAX_N+5][MAX_N+5];\n\nint main(){\n\tscanf(\"%d\",&N);\n\tFOR(i,1,N+1){\n\t\tFOR(j,1,N+1){\n\t\t\tscanf(\"%d\",&p[i][j]);\n\t\t}\n\t}\n\tFOR(i,1,N+1){\n\t\tFOR(j,1,N+1){\n\t\t\tfor (int k=i;k>=1;k--){\n\t\t\t\tif (i==k){\n\t\t\t\t\tdp2[i][j][k]=p[i][j];\n\t\t\t\t}else{\n\t\t\t\t\tdp2[i][j][k]=dp2[i][j][k+1]+p[k][j];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tint res=-INF;\n\tFOR(i,1,N+1){\n\t\tFOR(j,1,N+1){\n\t\t\tFOR(k,1,i+1){\n\t\t\t\tdp[i][j][k]=dp2[i][j][k]+dp[i][j-1][k]-dp2[i-1][j-1][k+1];\n\t\t\t\tfprintf(stderr,\"#debug:dp[%d][%d][%d]=%d\\n\",i,j,k,dp[i][j][k]);\n\t\t\t\tres=max(res,dp[i][j][k]);\n\t\t\t}\n\t\t}\n\t}\n\tprintf(\"%d\\n\",res);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n#define REP(i, n) FOR(i, 0, n)\n#define FOR(i, a, b) for(int i = a; i < b; i++)\n\n#define PB push_back\n\n#define MOD 1000000007LL\ntypedef long long ll;\n\nint a[321][321];\nint sm[321][321];\n\nint cnt(int a, int b, int c, int d){\n\treturn sm[c][d]-sm[a][d]-sm[c][b]+sm[a][b];\n}\n\ninline int gt(int i, int j, int k, int l){\n\tint a = cnt(i, k, j, l), b = 0;\n\tif(j-i>=3 && l-k>=3){\n\t\tb = cnt(i+1, k+1, j-1, l-1);\n\t\t// printf(\"*\");\n\t}\n\treturn a-b;\n}\n\n#define LAR(a, b) a=max(a, (b))\n\nint main(){\n\tint n;\n\tscanf(\"%d\", &n);\n\tREP(i, n) REP(j, n) scanf(\"%d\", a[i]+j);\n\tREP(i, n) sm[i][0]=sm[0][i]=0;\n\tREP(i, n){\n\t\tREP(j, n){\n\t\t\tsm[i+1][j+1]=sm[i][j+1]+sm[i+1][j]-sm[i][j]+a[i][j];\n\t\t}\n\t}\n\t// REP(i, n+1){\n\t// \tREP(j, n+1){\n\t// \t\tprintf(\"%d \", sm[i][j]);\n\t// \t}\n\t// \tprintf(\"\\n\");\n\t// }\n\n\tint ans = 0;\n\tREP(i, n){\n\t\tFOR(j, i+1, n+1){\n\t\t\tint nwsm = 0,\n\t\t\t\t\tmxsm = 0,\n\t\t\t\t\tmxid = 0;\n\t\t\tREP(l, n+1){\n\t\t\t\tLAR(ans, gt(i, j, l-1, l));\n\t\t\t\tif(l>=3){\n\t\t\t\t\tnwsm -= cnt(i, j, l-3, l-2);\n\t\t\t\t\tif(j-i >= 3){\n\t\t\t\t\t\tnwsm += cnt(i+1, j-1, l-2, l-1);\n\t\t\t\t\t}\n\t\t\t\t\tif(mxsm > nwsm){\n\t\t\t\t\t\tmxid = l-2;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tLAR(ans, gt(i, j, mxid, l));\n\t\t\t}\n\t\t}\n\t}\n\tprintf(\"%d\\n\", ans);\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\nint sum[310][310];\nint N;\n\nint get(int x1,int y1,int x2,int y2){\n    return sum[y2+1][x2+1]-sum[y2+1][x1]-sum[y1][x2+1]+sum[y1][x1];\n}\n\nint main(){\n    scanf(\"%d\",&N);\n    for(int i=0;i<N;i++){\n        for(int j=0;j<N;j++){\n            scanf(\"%d\",&sum[i+1][j+1]);\n            sum[i+1][j+1]+=sum[i][j+1]+sum[i+1][j]-sum[i][j];\n        }\n    }\n\n    int ma=INT_MIN;\n    for(int i=0;i<N;i++){\n        for(int j=i+1;j<N;j++){\n            int prev=get(0,i,0,j);\n            ma=max(ma,prev);\n            for(int k=1;k<N;k++){\n                ma=max(ma,max(0,prev)+get(k,i,k,j));\n                prev=max(prev+get(k,i,k,i)+get(k,j,k,j),get(k,i,k,j));\n            }\n        }\n    }\n\n    for(int i=0;i<N;i++){\n        int prev=get(0,i,0,i);\n        ma=max(prev,ma);\n        for(int j=1;j<N;j++){\n            prev=max(get(j,i,j,i),prev+get(j,i,j,i));\n            ma=max(ma,prev);\n        }\n    }\n\n    printf(\"%d\\n\",ma);\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<stdio.h>\n#include<algorithm>\nusing namespace std;\nint b[400][400];\nint sum[400][400];\nint main(){\n\tint a;scanf(\"%d\",&a);\n\tfor(int i=0;i<a;i++)for(int j=0;j<a;j++)scanf(\"%d\",&b[i][j]);\n\tfor(int i=0;i<a;i++)for(int j=0;j<a;j++)\n\t\tsum[i+1][j+1]=b[i][j];\n\tfor(int i=0;i<=a;i++)for(int j=1;j<=a;j++){\n\t\tsum[i][j]+=sum[i][j-1];\n\t}\n\tfor(int i=0;i<=a;i++)for(int j=1;j<=a;j++){\n\t\tsum[j][i]+=sum[j-1][i];\n\t}\n\tint ret=-999999999;\n\tfor(int i=0;i<a;i++){\n\t\tfor(int j=i+1;j<a;j++){\n\t\t\tint L=-999999999;\n\t\t\tint tmp=0;\n\t\t\tfor(int k=0;k<a;k++){\n\t\t\t\tret=max(ret,sum[j+1][k+1]-sum[j+1][k]-sum[i][k+1]+sum[i][k]+tmp+L);\n\t\t\t\tL=max(L,sum[j][k+1]-sum[j][k]-sum[i+1][k+1]+sum[i+1][k]-tmp);\n\t\t\t\ttmp+=b[i][k];\n\t\t\t\ttmp+=b[j][k];\n\t\t\t}\n\t\t}\n\t}\n\tfor(int i=0;i<a;i++){\n\t\tint now=0;\n\t\tfor(int j=0;j<a;j++){\n\t\t\tnow+=b[i][j];\n\t\t\tif(now<0)now=0;\n\t\t\tret=max(ret,now);\n\t\t}\n\t}\n\tfor(int i=0;i<a;i++){\n\t\tint now=0;\n\t\tfor(int j=0;j<a;j++){\n\t\t\tnow+=b[j][i];\n\t\t\tif(now<0)now=0;\n\t\t\tret=max(ret,now);\n\t\t}\n\t}\n\tprintf(\"%d\\n\",ret);\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstring>\nusing namespace std;\n int mem[2][302][302];\nint main(){\n  int n,x[302][302]={},y[302][302]={};\n  cin>>n;\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++)cin>>y[i][j],x[i][j]=y[i][j];\n  \n  int ans=max(y[0][n-1],y[n-1][0]);\n  for(int i=0;i<n;i++)\n    for(int j=n-2;j>=0;j--) {\n      x[i][j]+=x[i][j+1];\n      y[j][i]+=y[j+1][i];\n      if(ans<x[i][j])ans=x[i][j];\n      if(ans<y[j][i])ans=y[j][i];\n    }\n  n=300;\n  for(int i=0;i<=n;i++)\n    for(int j=0;j<=n;j++) mem[0][i][j]=mem[1][i][j]=-1000000000; \n\n  for(int i=0;i<n;i++){ //tate\n    for(int j=0;j<n;j++){//yoko\n      for(int k=i+1;k<n;k++){//tate\n\tint Y=(y[i+1][j]-y[k][j]);\n\tif(Y<=mem[1][i+1][k])continue;\n\tfor(int l=j+1;l<n;l++){//yoko\n\t  int X=(x[i][j]-x[i][l+1]);\n\t  if(X<=mem[0][j][l])continue;\n\t  mem[0][j][l]=X;\n\t  mem[1][i+1][k]=Y;\n\t  X+=(x[k][j]-x[k][l+1]);\t  \n\t  Y+=(y[i+1][l]-y[k][l]);\n\t  if(ans<X+Y)ans=X+Y;\n\t}\n      }\n    }\n  }\n  cout <<ans<<endl;\n\t  \n  return 0; \n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\nusing namespace std;\nint k[1000][1000], x[1000][1000], n, cnt, maxn = -10000000;\nint main() {\n\tcin >> n;\n\tfor (int i = 1; i <= n; i++) {\n\t\tfor (int j = 1; j <= n; j++) {\n\t\t\tcin >> k[i][j];\n\t\t}\n\t}\n\tfor (int i = 1; i <= n; i++) {\n\t\tcnt = 0;\n\t\tfor (int j = 1; j <= n; j++) {\n\t\t\tcnt += k[i][j];\n\t\t\tx[i][j] = cnt + x[i - 1][j];\n\t\t}\n\t}\n\tfor (int i = 0; i < n; i++) {\n\t\tfor (int j = 0; j < n; j++) {\n\t\t\tfor (int k = i + 1; k <= n; k++) {\n\t\t\t\tfor (int l = j + 1; l <= n; l++) {\n\t\t\t\t\tif (k - i >= 3 && l - j >= 3) {\n\t\t\t\t\t\tmaxn = max(maxn, (x[i][j] + x[k][l] - x[i][l] - x[k][j]) - (x[i + 1][j + 1] + x[k - 1][l - 1] - x[i + 1][l - 1] - x[k - 1][j + 1]));\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tmaxn = max(maxn, x[i][j] + x[k][l] - x[i][l] - x[k][j]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tcout << maxn << endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nint n;\nint p[310][310] = {};\nint rui[310][310] = {};\n\n\ntypedef struct{\n  int num;\n  int idx;\n} Data;\nData dp[310][310][310] = {};\n\nint getRuiseki(int x1, int y1, int x2,int y2){\n  if(x1 > x2 || y1 > y2)        return 0;\n  x2++; y2++;\n  return rui[y2][x2] - rui[y2][x1] - rui[y1][x2] + rui[y1][x1];\n}\n\nint getDonut(int x1, int y1, int x2, int y2){\n  return getRuiseki(x1,y1,x2,y2) - getRuiseki(x1+1,y1+1,x2-1,y2-2);\n}\n\nint getL(int x1, int x2, int y){\n  return getRuiseki(x1,0,x2,y) - getRuiseki(x1, 0, x2-1, y-1);\n}\n\nint main(){\n  cin >> n;\n  for(int i = 1;i <= n;i++){\n    for(int j = 1;j <= n;j++){\n      cin >> rui[i][j];\n    }\n  }\n\n  for(int i = 0;i <= n;i++){\n    for(int j = 0;j <= n;j++){\n      rui[i][j+1] += rui[i][j];\n    }\n  }\n\n  for(int j = 0;j <= n;j++){\n    for(int i = 0;i <= n;i++){\n      rui[i+1][j] += rui[i][j];\n    }\n  }\n\n\n  for(int finx = n-1;finx >= 0;finx--){\n    for(int x = finx;x >= 0;x--){\n      dp[finx][x][n-1].num = getL(x, finx, n-1);\n      dp[finx][x][n-1].idx = n-1;\n      for(int y = n-2;y >= 0;y--){\n        int tmp = getL(x, finx, y);\n        if(tmp > dp[finx][x][y+1].num){\n          dp[finx][x][y].num = tmp;\n          dp[finx][x][y].idx = y;\n        }else{\n          dp[finx][x][y] = dp[finx][x][y+1];\n        }\n      }\n    }\n  }\n\n  int ans = INT_MIN;\n  for(int x = 0; x < n; x++){\n    for(int y = 0;y < n;y++){\n      for(int x2 = x;x2 < n;x2++){\n        ans = max(ans,getDonut(x,y,x2,dp[x2][x][y].idx));\n      }\n    }\n  }\n\n  cout << ans << endl;\n\n  return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n/**\nvector<int>ar(3);\nfor(auto&e:ar){\n    scanf(\"%d\",&e);\n        }\nsort(ar.begin(),ar.end())\nint sum=accumulate(ar.begin(),ar.end(),0);\n**/\nint sum(const vector<vector<int>>& p, int t, int l, int b, int r) {\n  return p[b][r] - p[b][l - 1] - p[t - 1][r] + p[t - 1][l - 1];\n}\n \nint frame(const vector<vector<int>>& p, int t, int l, int b, int r) {\n  int result = sum(p, t, l, b, r);\n  if(b - t > 1 && r - l > 1) result -= sum(p, t + 1, l + 1, b - 1, r - 1);\n  return result;\n}\n \nint main() {\n  int N;\n  cin >> N;\n  vector<vector<int>> p(N, vector<int>(N));\n  for(auto& i: p) for(auto& j: i) cin >> j;\n  for(auto& i: p) i.insert(begin(i), 0);\n  p.insert(begin(p), vector<int>(N + 1, 0));\n \n  for(int i = 1; i <= N; ++i) for(int j = 2; j <= N; ++j) p[i][j] += p[i][j - 1];\n  for(int i = 2; i <= N; ++i) for(int j = 1; j <= N; ++j) p[i][j] += p[i - 1][j];\n \n  int answer = -1000;\n  for(int top = 1; top <= N; ++top) for(int bottom = top; bottom <= N; ++bottom) {\n    int left = 1;\n    for(int right = 1; right <= N; ++right) {\n      int tlbr = frame(p, top, left, bottom, right);\n      answer = max(answer, tlbr);\n      int r = frame(p, top, right, bottom, right);\n      int tlb = tlbr - r + frame(p, top, right, top, right) + frame(p, bottom, right, bottom, right);\n      if(top == bottom) tlb -= frame(p, bottom, right, bottom, right);\n      if(r > tlb) left = right;\n    }\n  }\n  cout << answer << endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#include <map>\n#define N 310\n#define ma make_pair\nusing namespace std;\ntypedef pair<int,int> P;\nint n,p[N][N],ans,d[N][N],sum,sum2;\nmap<P,P> m,t;\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  int cnt=0;\n  for(int i=1;i<=n;i++){\n    for(int j=1;j<=n;j++){\n      for(int k=n;k>=i;k--){\n\tfor(int l=n;l>=j;l--){\n\t  if(t.find(P(i,k))!=t.end()&&l>t[P(i,k)].first) continue;\n\t  if(m.find(P(j,l))!=m.end()&&k>m[P(j,l)].first) continue;\n\t  cnt++;\n\t  sum2=0;\n\t  sum=d[k][l]-d[i-1][l]-d[k][j-1]+d[i-1][j-1];\n\t  if(k-i>=2&&l-j>=2) sum2=d[k-1][l-1]-d[i][l-1]-d[k-1][j]+d[i][j];\n\t  ans=max(ans,sum-sum2);\n\t  if(m.find(P(j,l))==m.end()) m.insert(ma(P(j,l),P(k,ans)));\n\t  else if(m[P(j,l)].second<sum) m[P(j,l)]=ma(k,sum);\n\t  if(t.find(P(i,k))==t.end()) t.insert(ma(P(i,k),P(l,ans)));\n\t  else if(t[P(i,k)].second<sum) t[P(i,k)]=ma(l,sum);\n\t}\n      }\n    }\n  }\n  //  cout<<cnt<<endl;\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#include <queue>\n#define N 300\nusing namespace std;\ntypedef pair<int,int> P;\nint n,p[N][N],s,ans,a1,a2,b1,b2,d[N][N];\npriority_queue<P> A,B;\n\nint main(){\n  cin>>n;\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++) cin>>p[i][j];\n  for(int i=0;i<n;i++){\n    s=0;\n    for(int j=0;j<n;j++) s+=p[j][i];\n    A.push(P(s,i));\n  }\n  for(int i=0;i<n;i++){\n    s=0;\n    for(int j=0;j<n;j++) s+=p[i][j];\n    B.push(P(s,i));\n  }\n  P t=A.top(); A.pop();\n  a1=t.second;\n  t=A.top(); A.pop();\n  a2=t.second;\n  t=B.top(); B.pop();\n  b1=t.second;\n  t=B.top(); B.pop();\n  b2=t.second;\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++) d[i][j]=p[i][j];\n  for(int i=0;i<n;i++)\n    for(int j=1;j<n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=1;i<n;i++)\n    for(int j=0;j<n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  for(int i=0;i<n;i++){\n    for(int j=0;j<n;j++){\n      for(int k=i;k<n;k++){\n\tfor(int l=j;l<n;l++){\n\t  //if(!(a1==j||a2==j||a1==l||a2==l||b1==i||b2==i||b1==k||b2==k)) continue;\n\t  int sum=d[k][l],sum2=0;\n\t  if(i&&j) sum=sum-d[i-1][l]-d[k][j-1]+d[i-1][j-1];\n\t  else if(i) sum=sum-d[i-1][l];\n\t  else if(j) sum=sum-d[k][j-1];\n\t  if(i+1&&j+1) sum2=d[k-1][l-1]-d[i][l-1]-d[k-1][j]+d[i][j];\n\t  else if(i+1) sum2=d[k-1][l-1]-d[i][l-1];\n\t  else if(j+1) sum2=d[k-1][l-1]-d[k-1][j];\n\t  ans=max(ans,sum-sum2);\n\t}\n      }\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\nusing ll = long long;\n#define rep(i,n) for(int (i)=0;(i)<(int)(n);++(i))\n#define all(x) (x).begin(),(x).end()\n#define pb push_back\n#define fi first\n#define se second\n\nconst int N=301;\n\nint n;\nint f[N][N]={};\nint sumx[N][N]={};\nint sumy[N][N]={};\n\nint main()\n{\n    scanf(\" %d\", &n);\n    rep(i,n)rep(j,n) scanf(\" %d\", &f[i+1][j+1]);\n\n    for(int i=1; i<=n; ++i)for(int j=1; j<=n; ++j) sumx[i][j] = sumx[i][j-1]+f[i][j];\n    for(int i=1; i<=n; ++i)for(int j=1; j<=n; ++j) sumy[j][i] = sumy[j-1][i]+f[j][i];\n\n    int ans = -1000;\n    for(int i=1; i<=n; ++i)for(int j=1; j<=n; ++j)for(int k=j; k<=n; ++k) ans = max(ans, sumx[i][k]-sumx[i][j-1]);\n    for(int i=1; i<=n; ++i)for(int j=1; j<=n; ++j)for(int k=j; k<=n; ++k) ans = max(ans, sumy[k][i]-sumy[j-1][i]);\n\n    // x????????????\n    for(int lx=1; lx<=n; ++lx)for(int rx=lx+1; rx<=n; ++rx)\n    {\n        int dp = sumx[n][rx]-sumx[n][lx-1];\n        for(int y=n-1; y>=1; --y)\n        {\n            ans = max(ans, dp+(sumx[y][rx]-sumx[y][lx-1]));\n            dp = max(dp+f[y][lx]+f[y][rx],(sumx[y][rx]-sumx[y][lx-1]));\n        }\n    }\n\n    printf(\"%d\\n\", ans);\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define rep(i,n) for(int i=0;i<n;++i)\nusing namespace std;\n\nint n;\nint p[310][310];\n\n\nint main(void){\n\tcin >> n;\n\trep(i,n)rep(j,n) cin >> p[i+1][j+1];\n\trep(i,n)rep(j,n) p[i+1][j+1]+=p[i+1][j]+p[i][j+1]-p[i][j];\n\n\n\tint ans=-(300*300*1000+1);\n\t\n\trep(lh,n)rep(lw,n)rep(rh,n)rep(rw,n){\n\t\tif(lh>rh||lw>rw) continue;\n\t\tint h=rh-lh+1,w=rw-lw+1;\n\t\tint outer=p[rh+1][rw+1]-p[rh+1][lw]-p[lh][rw+1]+p[lh][lw];\n\t\tint inner=0;\n\t\tif(h>=3&&w>=3) inner=p[rh][rw]-p[rh][lw+1]-p[lh+1][rw]+p[lh+1][lw+1];\n\t\t// cerr << outer << \" \" << inner << endl;\n\t\tans=max(ans,outer-inner);\n\t}\n\n\tcout << ans << endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#define N 310\n#define INF (1e9)\nusing namespace std;\nint n,p[N][N],ans,c,b,ma,d[N][N];\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  ans=p[0][0];\n  for(int k=1;k<=n;k++){\n    for(int l=k+1;l<=n;l++){\n      b=c=1;\n      while(1){\n\tma=-INF;\n\tfor(int i=c+1;i<=n;i++){\n\t  int sum=d[i][l]-d[b-1][l]-d[i][k-1]+d[b-1][k-1],sum2=0;\n\t  if(i-b>=2&&l-k>=2) sum2=d[i-1][l-1]-d[b][l-1]-d[i-1][k]+d[b][k];\n\t  if(ma<=sum-sum2) ma=sum-sum2,c=i;\n\t}\n\tans=max(ans,ma);\n\tfor(int i=b+1;i<c;i++){\n\t  int sum=d[i][l]-d[b-1][l]-d[i][k-1]+d[b-1][k-1],sum2=0;\n\t  if(i-b>=2&&l-k>=2) sum2=d[i-1][l-1]-d[b][l-1]-d[i-1][k]+d[b][k];\n\t  ans=max(ans,sum-sum2);\n\t}\n\tif(c==n) break;\n\tb=c;\n      }\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#define N 310\n#define INF (1e9)\nusing namespace std;\nint n,p[N][N],ans,c,b,ma,d[N][N];\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  ans=p[0][0];\n  for(int k=1;k<=n;k++){\n    for(int l=k+1;l<=n;l++){\n      b=c=1;\n      while(b!=n){\n\tma=-INF;\n\tfor(int i=c+1;i<=n;i++){\n\t  int sum=d[i][l]-d[b-1][l]-d[i][k-1]+d[b-1][k-1],sum2=0;\n\t  if(i-b>=2&&l-k>=2) sum2=d[i-1][l-1]-d[b][l-1]-d[i-1][k]+d[b][k];\n\t  if(ma<sum-sum2) ma=sum-sum2,c=i;\n\t}\n\tans=max(ans,ma);\n\tfor(int i=b+1;i<c;i++){\n\t  int sum=d[i][l]-d[b-1][l]-d[i][k-1]+d[b-1][k-1],sum2=0;\n\t  if(i-b>=2&&l-k>=2) sum2=d[i-1][l-1]-d[b][l-1]-d[i-1][k]+d[b][k];\n\t  ans=max(ans,sum-sum2);\n\t}\n\tb=c;\n      }\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#define N 310\n#define INF (1e9)\nusing namespace std;\nint n,p[N][N],ans,c,b,ma,d[N][N];\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  ans=p[0][0];\n  for(int k=1;k<=n;k++){\n    for(int l=k;l<=n;l++){\n      b=c=1;\n      while(b!=n){\n\tma=-INF;\n\tint o=c;\n\tfor(int i=c;i<=n;i++){\n\t  int sum=d[i][l]-d[b-1][l]-d[i][k-1]+d[b-1][k-1],sum2=0;\n\t  if(i-b>=2&&l-k>=2) sum2=d[i-1][l-1]-d[b][l-1]-d[i-1][k]+d[b][k];\n\t  if(ma<sum-sum2) ma=sum-sum2,c=i;\n\t}\n\tans=max(ans,ma);\n\tfor(int i=b+1;i<c;i++){\n\t  int sum=d[i][l]-d[b-1][l]-d[i][k-1]+d[b-1][k-1],sum2=0;\n\t  if(i-b>=2&&l-k>=2) sum2=d[i-1][l-1]-d[b][l-1]-d[i-1][k]+d[b][k];\n\t  ans=max(ans,sum-sum2);\n\t}\n\tif(o==c) c++;\n\tb=c;\n      }\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#define N 310\n#define INF (1e9)\nusing namespace std;\nint n,p[N][N],ans,c,b,ma,d[N][N];\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  ans=p[0][0];\n  for(int k=1;k<=n;k++){\n    for(int l=k+1;l<=n;l++){\n      b=c=1;\n      while(1){\n\tma=-INF;\n\tfor(int i=c+1;i<=n;i++){\n\t  int sum=d[i][l]-d[b-1][l]-d[i][k-1]+d[b-1][k-1],sum2=0;\n\t  if(i-b>=2&&l-k>=2) sum2=d[i-1][l-1]-d[b][l-1]-d[i-1][k]+d[b][k];\n\t  if(ma<sum-sum2) ma=sum-sum2,c=i;\n\t}\n\tans=max(ans,ma);\n\tfor(int i=b+1;i<c;i++){\n\t  int sum=d[i][l]-d[b-1][l]-d[i][k-1]+d[b-1][k-1],sum2=0;\n\t  if(i-b>=2&&l-k>=2) sum2=d[i-1][l-1]-d[b][l-1]-d[i-1][k]+d[b][k];\n\t  ans=max(ans,sum-sum2);\n\t}\n\tif(c==n) break;\n\tb=c;\n      }\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\nusing namespace std;\n\nint main(){\n  int n,x[302][302]={},y[302][302]={};\n  cin>>n;\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++)cin>>y[i][j],x[i][j]=y[i][j];\n  \n  int ans=max(y[0][n-1],y[n-1][0]);\n  for(int i=0;i<n;i++)\n    for(int j=n-2;j>=0;j--) {\n      x[i][j]+=x[i][j+1];\n      y[j][i]+=y[j+1][i];\n      ans=max(ans,max(y[j][i],x[i][j]));\n    }\n\n  \n  int sum[302][302],K[2][302][302]={},t=0,f=1;\n  while(f){\n    t++,f=0;\n    for(int i=0;i<n;i++) //yoko\n      for(int j=i+1;j<n;j++) {//yoko\n\tint a=K[t%2][i][j],&b=K[(t+1)%2][i][j];\n\n\tb=a;\n\tsum[i][j]=-10000000;\n\n\tfor(int k=a+1;k<n;k++) { //tate\n\t  int X=(x[a][i]-x[a][j+1])+(x[k][i]-x[k][j+1]);\n\t  int Y=(y[a+1][i]-y[k][i])+(y[a+1][j]-y[k][j]);\n\t  if(sum[i][j]<=X+Y)sum[i][j]=X+Y,b=k;\n\t}\n\t\n\tif(b!=n-1)f=1;\n\tans=max(ans,sum[i][j]);\n\tfor(int k=a+1;k<b;k++){//tate\n\t  sum[i][j]+=(x[k][i+1]-x[k][j])-(x[k-1][i]-x[k-1][j+1]);\n\t  ans=max(ans,sum[i][j]);\n\t}\n      }\n  }\n  cout <<ans<<endl;\n\t  \n  return 0; \n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\nusing namespace std;\ntypedef long long ll;\nint main(){\n  int mp[301][301],n;\n  ll x[302][302]={},y[302][302]={};\n  cin>>n;\n\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++)cin>>mp[i][j],y[i][j]=x[i][j]=mp[i][j];\n  \n  ll ans=max(mp[0][n-1],mp[n-1][0]);\n  for(int i=0;i<n;i++)\n    for(int j=n-2;j>=0;j--) {\n      x[i][j]+=x[i][j+1];\n      y[j][i]+=y[j+1][i];\n      if(ans<x[i][j])ans=x[i][j];\n      if(ans<y[j][i])ans=y[j][i];\n    }\n  \n  for(int i=0;i<n;i++) //tate\n    for(int j=i;j<n;j++)//yoko\n      for(int k=i+1;k<n;k++)//tate\n\tfor(int l=j+1;l<n;l++){//yoko\n\t  ll xu=x[i][j]-x[i][l+1];\n\t  ll xd=x[k][j]-x[k][l+1];\n\t  ll yu=y[i+1][j]-y[k][j];\n\t  ll yd=y[i+1][l]-y[k][l];\n\t  ll sum=xu+xd+yu+yd;\n\t  if(sum>ans)ans=sum;\n\t}\n\n  cout <<ans<<endl;\n\t  \n  return 0; \n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nint n;\nint p[310][310] = {};\nint rui[310][310] = {};\n\n\ntypedef struct{\n  int num;\n  int idx;\n} Data;\nData dp[310][310][310] = {};\n\nint getRuiseki(int x1, int y1, int x2,int y2){\n  if(x1 > x2 || y1 > y2)        return 0;\n  x2++; y2++;\n  return rui[y2][x2] - rui[y2][x1] - rui[y1][x2] + rui[y1][x1];\n}\n\nint getDonut(int x1, int y1, int x2, int y2){\n  return getRuiseki(x1,y1,x2,y2) - getRuiseki(x1+1,y1+1,x2-1,y2-1);\n}\n\nint getL(int x1, int x2, int y){\n  return getRuiseki(x1,0,x2,y) - getRuiseki(x1, 0, x2-1, y-1);\n}\n\nint main(){\n  cin >> n;\n  for(int i = 1;i <= n;i++){\n    for(int j = 1;j <= n;j++){\n      cin >> rui[i][j];\n    }\n  }\n\n  for(int i = 0;i <= n;i++){\n    for(int j = 0;j <= n;j++){\n      rui[i][j+1] += rui[i][j];\n    }\n  }\n\n  for(int j = 0;j <= n;j++){\n    for(int i = 0;i <= n;i++){\n      rui[i+1][j] += rui[i][j];\n    }\n  }\n\n\n  for(int finx = n-1;finx >= 0;finx--){\n    for(int x = finx;x >= 0;x--){\n      dp[finx][x][n-1].num = getL(x, finx, n-1);\n      dp[finx][x][n-1].idx = n-1;\n      for(int y = n-2;y >= 0;y--){\n        int tmp = getL(x, finx, y);\n        if(tmp > dp[finx][x][y+1].num){\n          dp[finx][x][y].num = tmp;\n          dp[finx][x][y].idx = y;\n        }else{\n          dp[finx][x][y] = dp[finx][x][y+1];\n\n        }\n      }\n    }\n  }\n\n\n  int ans = INT_MIN;\n  for(int x = 0; x < n; x++){\n    for(int y = 0;y < n;y++){\n      for(int x2 = x;x2 < n;x2++){\n        ans = max(ans,getDonut(x,y,x2,dp[x2][x][y].idx));\n      }\n    }\n  }\n\n\n  cout << ans << endl;\n\n  return 0;\n}\n\n\n"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#define N 310\n#define INF (1e9)\nusing namespace std;\nint n,p[N][N],ans,c,b,ma,d[N][N];\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  ans=p[1][1];\n  for(int k=1;k<=n;k++){\n    for(int l=k;l<=n;l++){\n      b=c=1;\n      while(c!=n){\n\tma=-INF;\n\tfor(int i=c+1;i<=n;i++){\n\t  int sum=d[i][l]-d[b-1][l]-d[i][k-1]+d[b-1][k-1],sum2=0;\n\t  if(i-b>=2&&l-k>=2) sum2=d[i-1][l-1]-d[b][l-1]-d[i-1][k]+d[b][k];\n\t  if(ma<sum-sum2) ma=sum-sum2,c=i;\n\t}\n\tans=max(ans,ma);\n\tfor(int i=b;i<c;i++){\n\t  int sum=d[i][l]-d[b-1][l]-d[i][k-1]+d[b-1][k-1],sum2=0;\n\t  if(i-b>=2&&l-k>=2) sum2=d[i-1][l-1]-d[b][l-1]-d[i-1][k]+d[b][k];\n\t  ans=max(ans,sum-sum2);\n\t}\n\tb=c;\n      }\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <cstring>\n#include <cstdlib>\n#include <cmath>\n#include <complex>\n#include <string>\n#include <sstream>\n#include <algorithm>\n#include <numeric>\n#include <vector>\n#include <queue>\n#include <stack>\n#include <functional>\n#include <iostream>\n#include <map>\n#include <set>\nusing namespace std;\ntypedef pair<int,int> P;\ntypedef long long ll;\ntypedef vector<int> vi;\ntypedef vector<ll> vll;\n#define pu push\n#define pb push_back\n#define mp make_pair\n#define eps 1e-9\n#define INF 2000000000\n#define sz(x) ((int)(x).size())\n#define fi first\n#define sec second\n#define SORT(x) sort((x).begin(),(x).end())\n#define all(x) (x).begin(),(x).end()\n#define EQ(a,b) (abs((a)-(b))<eps)\nint N;\nint f[305][305],imos[305][305];\nint l[305],r[305];\nint sum(int i,int j,int k)\n{\n\treturn imos[j][k]-imos[j][k-1]-imos[i-1][k]+imos[i-1][k-1];\n}\nint add(int i,int j,int k)\n{\n\tif(i==j)return f[i][k];\n\treturn f[i][k]+f[j][k];\n}\nint main()\n{\n\tscanf(\"%d\",&N);\n\tfor(int i=1;i<=N;i++)\n\t{\n\t\tfor(int j=1;j<=N;j++)\n\t\t{\n\t\t\tscanf(\"%d\",&f[i][j]);\n\t\t\timos[i][j]=f[i][j];\n\t\t}\n\t}\n\tfor(int i=1;i<=N;i++)\n\t{\n\t\tfor(int j=1;j<=N;j++)\n\t\t{\n\t\t\timos[i][j+1]+=imos[i][j];\n\t\t}\n\t}\n\tfor(int j=1;j<=N;j++)\n\t{\n\t\tfor(int i=1;i<=N;i++)\n\t\t{\n\t\t\timos[i+1][j]+=imos[i][j];\n\t\t}\n\t}\n\tint ans = -INF;\n\tfor(int i=1;i<=N;i++)\n\t{\n\t\tfor(int j=i;j<=N;j++)\n\t\t{\n\t\t\tl[1]=sum(i,j,1);\n\t\t\tfor(int k=2;k<=N;k++)l[k] = max(l[k-1]+add(i,j,k),sum(i,j,k));\n\t\t\tr[N]=sum(i,j,N);\n\t\t\tfor(int k=N-1;k>=1;k--)r[k] = max(r[k+1]+add(i,j,k),sum(i,j,k));\n\t\t\tfor(int i=1;i<N;i++)ans = max(ans,l[i]+r[i+1]);\n\t\t}\n\t}\n\tprintf(\"%d\\n\",ans);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "//0310\n#include <bits/stdc++.h>\n\nusing namespace std;\n\n#define FOR(i,a,b) for(int i=(a);i<(b);i++)\n#define REP(i,a) FOR(i,0,a)\n\nconst int MAX_N=300;\n\nconst int INF=1e8;\n\nint N;\nint p[MAX_N+5][MAX_N+5];\n\nint dp[MAX_N+5][MAX_N+5][MAX_N+5],dp2[MAX_N+5][MAX_N+5][MAX_N+5];\n\nint main(){\n\tscanf(\"%d\",&N);\n\tFOR(i,1,N+1){\n\t\tFOR(j,1,N+1){\n\t\t\tscanf(\"%d\",&p[i][j]);\n\t\t}\n\t}\n\tFOR(i,1,N+1){\n\t\tFOR(j,1,N+1){\n\t\t\tfor (int k=i;k>=1;k--){\n\t\t\t\tif (i==k){\n\t\t\t\t\tdp2[i][j][k]=p[i][j];\n\t\t\t\t}else{\n\t\t\t\t\tdp2[i][j][k]=dp2[i][j][k+1]+p[k][j];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tint res=-INF;\n\tFOR(i,1,N+1){\n\t\tFOR(j,1,N+1){\n\t\t\tFOR(k,1,i+1){\n\t\t\t\tdp[i][j][k]=dp2[i][j][k]+dp[i][j-1][k]-dp2[i-1][j-1][k+1];\n\t\t\t\tres=max(res,dp[i][j][k]);\n\t\t\t}\n\t\t}\n\t}\n\tprintf(\"%d\\n\",res);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n#define REP(i, n) FOR(i, 0, n)\n#define FOR(i, a, b) for(int i = a; i < b; i++)\n\n#define PB push_back\n\n#define MOD 1000000007LL\ntypedef long long ll;\n\n\tint n;\nint a[321][321];\nint sm[321][321];\n\nint cnt(int x1, int x2, int y1, int y2){\n\treturn sm[x2][y2]-sm[x1][y2]-sm[x2][y1]+sm[x1][y1];\n}\n\ninline int gt(int i, int j, int k, int l){\n\tint a = cnt(i, j, k, l), b = 0;\n\tif(j-i>=3 && l-k>=3){\n\t\tb = cnt(i+1, j-1, k+1, l-1);\n\t\t// printf(\"*\");\n\t}\n\t// printf(\"   gt(%d, %d, %d, %d)=%d-%d=%d\\n\", i, j, k, l, a, b, a-b);\n\treturn a-b;\n}\nint solve(){\n\tint ans = 0;\n\tREP(i, n+1){\n\t\tFOR(j, i+1, n+1){\n\t\t\tREP(k, n+1){\n\t\t\t\tFOR(l, k+1, n+1){\n\t\t\t\t\tint a = cnt(i, k, j, l), b = 0;\n\t\t\t\t\tif(j-i>=3 && l-k>=3){\n\t\t\t\t\t\tb = cnt(i+1, k+1, j-1, l-1);\n\t\t\t\t\t\t// printf(\"*\");\n\t\t\t\t\t}\n\t\t\t\t\tint x = a-b;\n\t\t\t\t\t// printf(\"(%d %d) (%d %d) : %d-%d=%d\\n\", i, k, j, l, a, b, x);\n\t\t\t\t\tif(ans<x) ans=x;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn ans;\n}\n#define LAR(a, b) a=max(a, (b))\n\nint main(){\n\tscanf(\"%d\", &n);\n\tREP(i, n) REP(j, n) scanf(\"%d\", a[i]+j);\n\tREP(i, n) sm[i][0]=sm[0][i]=0;\n\tREP(i, n){\n\t\tREP(j, n){\n\t\t\tsm[i+1][j+1]=sm[i][j+1]+sm[i+1][j]-sm[i][j]+a[i][j];\n\t\t}\n\t}\n\t// REP(i, n+1){\n\t// \tREP(j, n+1){\n\t// \t\tprintf(\"%d \", sm[i][j]);\n\t// \t}\n\t// \tprintf(\"\\n\");\n\t// }\n\n\tint ans = INT_MIN;\n\tREP(i, n){\n\t\tFOR(j, i+1, n+1){\n\t\t\tint nwsm = 0,\n\t\t\t\t\tmxsm = 0,\n\t\t\t\t\tmxid = 0;\n\t\t\tint mxans = INT_MIN;\n\t\t\tFOR(l, 1, n+1){\n\t\t\t\tLAR(mxans, gt(i, j, l-1, l));\n\t\t\t\tif(l>=3){\n\t\t\t\t\tnwsm -= cnt(i, j, l-3, l-2);\n\t\t\t\t\t// printf(\"  -(%d,%d,%d,%d)=%d\\n\", i,j,l-3,l-2, cnt(i, j, l-3, l-2));\n\t\t\t\t\tif(j-i >= 3){\n\t\t\t\t\t\tnwsm += cnt(i+1, j-1, l-2, l-1);\n\t\t\t\t\t\t// printf(\"  +(%d,%d,%d,%d)=%d\\n\", i+1, j-1, l-2, l-1, \n\t\t\t\t\t\t\t\t// cnt(i+1, j-1, l-2, l-1));\n\t\t\t\t\t}\n\t\t\t\t\tif(mxsm < nwsm){\n\t\t\t\t\t\tmxsm = nwsm;\n\t\t\t\t\t\tmxid = l-2;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tLAR(mxans, gt(i, j, mxid, l));\n\t\t\t\t// printf(\" %d-%d:%d %d\\n\", mxid, l, mxans, nwsm);\n\t\t\t}\n\t\t\tLAR(ans, mxans);\n\t\t\t// printf(\"%d %d : %d\\n\", i, j, mxans);\n\t\t}\n\t}\n\tprintf(\"%d\\n\", ans);\n\t// printf(\"%d\\n\", solve());\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\nint p[333][333];\nint yoko[333][333];\nint tate[333][333];\nint dp[333][333][333];\nsigned main(){\n  int n;\n  cin>>n;\n\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++)\n      cin>>p[i][j];\n\n  for(int i=0;i<n;i++){\n    int sum=0;\n    for(int j=0;j<n;j++){\n      sum+=p[i][j];\n      yoko[i][j]=sum;\n    }\n    sum=0;\n    for(int j=0;j<n;j++){\n      sum+=p[j][i];\n      tate[j][i]=sum;\n    }\n  }\n  int INF=1111111111111LL;\n  fill_n(**dp,333*333*333,INF);\n  for(int i=0;i<n;i++){\n    for(int j=i;j<n;j++){\n      for(int k=n-1;k>=0;k--){\n\tdp[i][j][k]=yoko[i][k]+yoko[j][k]+tate[j][k]-tate[i][k]-p[j][k];\n\tif(i==j){\n\t  dp[i][j][k]-=yoko[i][k];\n\t  dp[i][j][k]+=p[j][k];\n\t}\n\tif(k<n-1)dp[i][j][k]=max(dp[i][j][k],dp[i][j][k+1]);\n\t//\tcout<<i<<\" \"<<j<<\" \"<<k<<\" \"<<dp[i][j][k]<<endl;\n      }\n    }\n  }\n  int ans=-INF;\n  for(int i=0;i<n;i++){\n    for(int j=i;j<n;j++){\n      for(int k=0;k<n;k++){\n\tint sum=tate[j][k]-tate[i][k]+p[i][k];\n\tif(k<n-1){\n\t  int tmp=sum;\n\t  tmp+=dp[i][j][k+1];\n\t  tmp-=(yoko[i][k]+yoko[j][k]);\n\t  if(i==j)tmp+=yoko[i][k];\n\t  sum=max(sum,tmp);\n\t}\n\tans=max(ans,sum);\n\t//\tcout<<i<<\" \"<<j<<\" \"<<k<<\" \"<<ans<<endl;\n      }\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long lld;\n#define INF (1<<20)\n\nint main(){\n  int N; cin >> N;\n  int ban[311][311];\n  lld P[311][311];\n  memset(P,0,sizeof(P));\n  for(int i=1;i<=N;i++){\n    for(int j=1;j<=N;j++){\n      cin >> ban[i][j];\n      P[i][j] = P[i][j-1]+P[i-1][j]-P[i-1][j-1]+ban[i][j];\n    }\n  }\n  lld ret = -INF;\n  for(int i=1;i<=N;i++){\n    for(int j=i;j<=N;j++){\n      lld prev=0;\n      for(int k=1;k<=N;k++){\n\tlld line = P[j][k]-P[i-1][k]-P[j][k-1]+P[i-1][k-1];\n\tret = max(ret,line+prev);\n\tprev = max(line,prev+ban[i][k]+(i!=j?ban[j][k]:0));\n      }\n    }\n  }\n  cout << ret << endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include<stdio.h>\n#include<algorithm>\nusing namespace std;\nint b[400][400];\nint sum[400][400];\nint main(){\n\tint a;scanf(\"%d\",&a);\n\tfor(int i=0;i<a;i++)for(int j=0;j<a;j++)scanf(\"%d\",&b[i][j]);\n\tfor(int i=0;i<a;i++)for(int j=0;j<a;j++)\n\t\tsum[i+1][j+1]=b[i][j];\n\tfor(int i=0;i<=a;i++)for(int j=1;j<=a;j++){\n\t\tsum[i][j]+=sum[i][j-1];\n\t}\n\tfor(int i=0;i<=a;i++)for(int j=1;j<=a;j++){\n\t\tsum[j][i]+=sum[j-1][i];\n\t}\n\tint ret=-999999999;\n\tfor(int i=0;i<a;i++){\n\t\tfor(int j=i+1;j<a;j++){\n\t\t\tint L=-999999999;\n\t\t\tint tmp=0;\n\t\t\tfor(int k=0;k<a;k++){\n\t\t\t\tret=max(ret,sum[j][k]-sum[j][k-1]-sum[i+1][k]+sum[i+1][k-1]+tmp+L);\n\t\t\t\tL=max(L,sum[j][k]-sum[j][k-1]-sum[i+1][k]+sum[i+1][k-1]-tmp);\n\t\t\t\ttmp+=b[i][k];\n\t\t\t\ttmp+=b[j][k];\n\t\t\t}\n\t\t}\n\t}\n\tfor(int i=0;i<a;i++){\n\t\tint now=0;\n\t\tfor(int j=0;j<a;j++){\n\t\t\tnow+=b[i][j];\n\t\t\tif(now<0)now=0;\n\t\t\tret=max(ret,now);\n\t\t}\n\t}\n\tfor(int i=0;i<a;i++){\n\t\tint now=0;\n\t\tfor(int j=0;j<a;j++){\n\t\t\tnow+=b[j][i];\n\t\t\tif(now<0)now=0;\n\t\t\tret=max(ret,now);\n\t\t}\n\t}\n\tprintf(\"%d\\n\",ret);\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#include <map>\n#define N 310\n#define INF (1e9)\n#define make make_pair\nusing namespace std;\ntypedef pair<int,int> P;\nint n,p[N][N],ans,d[N][N],sum,sum2;\nmap<P,P> m,t;\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  ans=-INF;\n  for(int i=1;i<=n;i++){\n    for(int j=i;j<=n;j++){\n      for(int k=1;k<=n;k++){\n\tfor(int l=k;l<=n;l++){\n\t  if(m.find(P(i,j))!=m.end()&&l>m[P(i,j)].first) continue;\n\t  if(t.find(P(k,l))!=t.end()&&j>t[P(k,l)].first) continue;\n\t  int sum=d[j][l]-d[i-1][l]-d[j][k-1]+d[i-1][k-1],sum2=0;\n\t  if(j-i>=2&&l-k>=2) sum2=d[j-1][l-1]-d[i][l-1]-d[j-1][k]+d[i][k];\n\t  ans=max(ans,sum-sum2);\n\t  if(m.find(P(i,j))==m.end()) m.insert(make(P(i,j),P(l,sum-sum2)));\n\t  else if(m[P(i,j)].second<sum-sum2) m[P(i,j)]=make(l,sum-sum2);\n\t  if(t.find(P(k,l))==t.end()) t.insert(make(P(k,l),P(j,sum-sum2)));\n\t  else if(t[P(k,l)].second<sum-sum2) t[P(k,l)]=make(j,sum-sum2);\n\t}\n      }\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#define N 310\n#define INF (1e9)\nusing namespace std;\nint n,p[N][N],ans,c,b,ma,d[N][N];\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  ans=d[0][0];\n  for(int k=1;k<=n;k++){\n    for(int l=k+1;l<=n;l++){\n      b=c=1;\n      while(1){\n\tma=-INF;\n\tfor(int i=c+1;i<=n;i++){\n\t  int sum=d[i][l]-d[b-1][l]-d[i][k-1]+d[b-1][k-1],sum2=0;\n\t  if(i-b>=2&&l-k>=2) sum2=d[i-1][l-1]-d[b][l-1]-d[i-1][k]+d[b][k];\n\t  if(ma<sum-sum2) ma=sum-sum2,c=i;\n\t  ans=max(ans,sum-sum2);\n\t}\n\tfor(int i=b;i<=c;i++){\n\t  int sum=d[i][l]-d[b-1][l]-d[i][k-1]+d[b-1][k-1],sum2=0;\n\t  if(i-b>=2&&l-k>=2) sum2=d[i-1][l-1]-d[b][l-1]-d[i-1][k]+d[b][k];\n\t  ans=max(ans,sum-sum2);\n\t}\n\tif(c==n) break;\n\tb=c;\n      }\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstring>\nusing namespace std;\n\nint main(){\n  int n,mp[302][302],x[302][302]={},y[302][302]={};\n  cin>>n;\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++)cin>>y[i][j],mp[i][j]=x[i][j]=y[i][j];\n  \n  int ans=max(y[0][n-1],y[n-1][0]);\n  for(int i=0;i<n;i++)\n    for(int j=n-2;j>=0;j--) {\n      x[i][j]+=x[i][j+1];\n      y[j][i]+=y[j+1][i];\n      if(ans<x[i][j])ans=x[i][j];\n      if(ans<y[j][i])ans=y[j][i];\n    }\n\n\n  int sum[302][302],K[2][302][302]={};\n\n\n  for(int i=0;i<=n;i++)\n    for(int j=0;j<=n;j++) sum[i][j]=-100000000;\n\n  int t=0;\n  while(1){\n    t++;\n    for(int i=0;i<n;i++) //yoko\n      for(int j=i+1;j<n;j++) {//yoko\n\tint a=K[t%2][i][j];\n\tK[(t+1)%2][i][j]=a;\n\tsum[i][j]=-100000000;\n\tfor(int k=a+1;k<n;k++) { //tate\n\t  int X=(x[a][i]-x[a][j+1])+(x[k][i]-x[k][j+1]);\n\t  int Y=(y[a+1][i]-y[k][i])+(y[a+1][j]-y[k][j]);\n\t  if(sum[i][j]<=X+Y)sum[i][j]=X+Y,K[(t+1)%2][i][j]=k;\n\t  ans=max(ans,sum[i][j]);\n\t}\n      }\n\n    int f=1;\n    for(int i=0;i<n;i++) //yoko\n      for(int j=i+1;j<n;j++) //yoko\n\tfor(int k=K[t%2][i][j]+1;k<K[(t+1)%2][i][j];k++){\n\t  f=0;\n\t  int X=(x[k][i+1]-x[k][j])-(x[k-1][i]-x[k-1][j+1]);\n\t  sum[i][j]+=X;\n\t  ans=max(ans,sum[i][j]);\n\t}\n    if(f)break;\n  }\n  cout <<ans<<endl;\n\t  \n  return 0; \n}"
  },
  {
    "language": "C++",
    "code": "#include <stdio.h>\n#include <cmath>\n#include <algorithm>\n#include <cfloat>\n#include <stack>\n#include <queue>\n#include <vector>\n#include <string>\n#include <iostream>\n#include <set>\n#include <map>\n#include <time.h>\ntypedef long long int ll;\ntypedef unsigned long long int ull;\n#define BIG_NUM 2000000000\n#define MOD 1000000007\n#define EPS 0.000000001\nusing namespace std;\n\n\n\nint table[301][301];\nint tate_ruisekiwa[301][301],yoko_ruisekiwa[301][301];\n\n\nint main(){\n\n\tint N;\n\n\tscanf(\"%d\",&N);\n\n\tfor(int col = 0; col <= N; col++)tate_ruisekiwa[0][col] = 0;\n\tfor(int row = 0; row <= N; row++)yoko_ruisekiwa[row][0] = 0;\n\n\tfor(int row = 1; row <= N; row++){\n\t\tfor(int col = 1; col <= N; col++){\n\t\t\tscanf(\"%d\",&table[row][col]);\n\t\t\ttate_ruisekiwa[row][col] = table[row][col];\n\t\t\tyoko_ruisekiwa[row][col] = table[row][col];\n\t\t}\n\t}\n\n\tfor(int col = 1; col <= N; col++){\n\t\tfor(int row = 1; row <= N; row++)tate_ruisekiwa[row][col] += tate_ruisekiwa[row-1][col];\n\t}\n\n\tfor(int row = 1; row <= N; row++){\n\t\tfor(int col = 1; col <= N; col++)yoko_ruisekiwa[row][col] += yoko_ruisekiwa[row][col-1];\n\t}\n\n\tint ans = 0;\n\n\tfor(int row = 1; row <= N; row++){\n\t\tfor(int left = 1; left <= N; left++){\n\t\t\tfor(int right = left; right <= N; right++){\n\t\t\t\tans = max(ans,yoko_ruisekiwa[row][right]-yoko_ruisekiwa[row][left-1]);\n\t\t\t}\n\t\t}\n\t}\n\n\tfor(int col = 1; col <= N; col++){\n\t\tfor(int top = 1; top <= N; top++){\n\t\t\tfor(int under = top; under <= N; under++){\n\t\t\t\tans = max(ans,tate_ruisekiwa[under][col]-tate_ruisekiwa[top-1][col]);\n\t\t\t}\n\t\t}\n\t}\n\n\tint left_max,right;\n\n\tfor(int row1 = 1; row1 <= N-1; row1++){\n\t\tfor(int row2 = row1+1; row2 <= N; row2++){\n\n\t\t\tleft_max = tate_ruisekiwa[row2][1]-tate_ruisekiwa[row1-1][1];\n\n\t\t\tfor(int col = 2; col <= N; col++){\n\t\t\t\tright = tate_ruisekiwa[row2][col]-tate_ruisekiwa[row1-1][col];\n\t\t\t\tans = max(ans,left_max+right);\n\t\t\t\tleft_max = max(left_max+table[row1][col]+table[row2][col],right);\n\t\t\t}\n\t\t}\n\t}\n\n\tprintf(\"%d\\n\",ans);\n\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\nconst int SIZE=310;\nconst int INF=1001001001;\nint sumR[SIZE][SIZE];\nint sumC[SIZE][SIZE];\n\nint main()\n{\n    int N; cin>>N;\n    vector<vector<int> > a(N, vector<int>(N));\n    for(int i=0;i<N;i++){\n        for(int j=0;j<N;j++){\n            cin>>a[i][j];\n        }\n    }\n\n    for(int i=0;i<N;i++){\n        for(int j=0;j<N;j++){\n            sumR[i][j+1]=sumR[i][j]+a[i][j];\n        }\n    }\n    for(int j=0;j<N;j++){\n        for(int i=0;i<N;i++){\n            sumC[j][i+1]=sumC[j][i]+a[i][j];\n        }\n    }\n/*\n    for(int i=0;i<N;i++){\n        for(int j=0;j<N+1;j++){\n            cout<<sumR[i][j]<<' ';\n        }\n        cout<<endl;\n    }\n    for(int i=0;i<N;i++){\n        for(int j=0;j<N+1;j++){\n            cout<<sumC[i][j]<<' ';\n        }\n        cout<<endl;\n    }\n*/\n    int ans=-INF;\n    for(int y1=0;y1<N;y1++){\n        for(int x1=0;x1<N;x1++) for(int x2=x1;x2<N;x2++){\n            int tmp=sumR[y1][x2+1]-sumR[y1][x1];\n            ans=max(ans, tmp);\n        }\n    }\n    for(int x1=0;x1<N;x1++){\n        for(int y1=0;y1<N;y1++) for(int y2=y1;y2<N;y2++){\n            int tmp=sumC[x1][y2+1]-sumC[x1][y1];\n            ans=max(ans, tmp);\n        }\n    }\n\n    for(int y1=0;y1<N;y1++) for(int y2=y1+1;y2<N;y2++){\n        int diff=-INF;\n        for(int x1=1;x1<N;x1++){\n            int sum=sumC[x1][y2+1]-sumC[x1][y1]\n                +sumR[y1][x1]+sumR[y2][x1];\n            int dif=sumC[x1-1][y2]-sumC[x1-1][y1+1]\n                -sumR[y1][x1-1]-sumR[y2][x1-1];\n            diff=max(diff, dif);\n            ans=max(ans, sum+diff);\n        }\n    }\n    cout<<ans<<endl;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#include <map>\n#define N 310\n#define ma make_pair\nusing namespace std;\ntypedef pair<int,int> P;\nint n,p[N][N],ans,d[N][N],sum,sum2;\nmap<P,P> m,t;\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  int cnt=0;\n  for(int i=1;i<=n;i++){\n    for(int j=1;j<=n;j++){\n      for(int k=n;k>=i;k--){\n\tfor(int l=n;l>=j;l--){\n\t  if(t.find(P(i,k))!=t.end()&&l>t[P(i,k)].first) continue;\n\t  if(m.find(P(j,l))!=m.end()&&k>m[P(j,l)].first) continue;\n\t  cnt++;\n\t  sum2=0;\n\t  sum=d[k][l]-d[i-1][l]-d[k][j-1]+d[i-1][j-1];\n\t  /*if(k-i>=2&&l-j>=2)*/ sum2=d[k-1][l-1]-d[i][l-1]-d[k-1][j]+d[i][j];\n\t  ans=max(ans,sum-sum2);\n\t  if(m.find(P(j,l))==m.end()) m.insert(ma(P(j,l),P(k,ans)));\n\t  else if(m[P(j,l)].second<sum) m[P(j,l)]=ma(k,sum);\n\t  if(t.find(P(i,k))==t.end()) t.insert(ma(P(i,k),P(l,ans)));\n\t  else if(t[P(i,k)].second<sum) t[P(i,k)]=ma(l,sum);\n\t}\n      }\n    }\n  }\n  //  cout<<cnt<<endl;\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#define N 310\n#define INF (1e9)\nusing namespace std;\nint n,p[N][N],ans,c,b,ma,d[N][N];\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  ans=p[0][0];\n  for(int k=1;k<=n;k++){\n    for(int l=k+1;l<=n;l++){\n      b=c=1;\n      while(b!=n){\n\tma=-INF;\n\tfor(int i=c+1;i<=n;i++){\n\t  int sum=d[i][l]-d[b-1][l]-d[i][k-1]+d[b-1][k-1],sum2=0;\n\t  /*if(i-b>=2&&l-k>=2)*/ sum2=d[i-1][l-1]-d[b][l-1]-d[i-1][k]+d[b][k];\n\t  if(ma<sum-sum2) ma=sum-sum2,c=i;\n\t}\n\tans=max(ans,ma);\n\tfor(int i=b+1;i<c;i++){\n\t  int sum=d[i][l]-d[b-1][l]-d[i][k-1]+d[b-1][k-1],sum2=0;\n\t  /*if(i-b>=2&&l-k>=2)*/ sum2=d[i-1][l-1]-d[b][l-1]-d[i-1][k]+d[b][k];\n\t  ans=max(ans,sum-sum2);\n\t}\n\tb=c;\n      }\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n#define rep(i,x,y) for(int i=(x);i<(y);++i)\n#define debug(x) #x << \"=\" << (x)\n\n#ifdef DEBUG\n#define _GLIBCXX_DEBUG\n#define dump(x) std::cerr << debug(x) << \" (L:\" << __LINE__ << \")\" << std::endl\n#else\n#define dump(x)\n#endif\n\ntypedef long long int ll;\ntypedef pair<int,int> pii;\n//template<typename T> using vec=std::vector<T>;\n\nconst int inf=1<<30;\nconst long long int infll=1LL<<58;\nconst double eps=1e-9;\nconst int dx[]={1,0,-1,0},dy[]={0,1,0,-1};\n\ntemplate <typename T> ostream &operator<<(ostream &os, const vector<T> &vec){\n\tos << \"[\";\n\tfor (const auto &v : vec) {\n\t\tos << v << \",\";\n\t}\n\tos << \"]\";\n\treturn os;\n}\n\nvoid solve(){\n    int n;\n    cin >> n;\n    vector<vector<int>> p(n,vector<int>(n));\n    rep(i,0,n) rep(j,0,n) cin >> p[i][j];\n\n    vector<vector<int>> cumsum(n,vector<int>(n));\n    rep(y,0,n){\n        cumsum[y][0]=p[y][0];\n        rep(x,1,n) cumsum[y][x]=cumsum[y][x-1]+p[y][x];\n    }\n    rep(y,1,n) rep(x,0,n) cumsum[y][x]+=cumsum[y-1][x];\n\n    auto rectangle_sum=[&](int y1,int x1,int y2,int x2){\n        int res=0;\n        res+=cumsum[y2][x2];\n        if(y1!=0) res-=cumsum[y1-1][x2];\n        if(x1!=0) res-=cumsum[y2][x1-1];\n        if(y1!=0 and x1!=0) res+=cumsum[y1-1][x1-1];\n        return res;\n    };\n    int ans=0;\n    rep(y1,0,n){\n        rep(y2,y1,n){\n            int opt_x=0;\n            rep(x,0,n){\n                int frame_sum=rectangle_sum(y1,opt_x,y2,x);\n                if(y1<=y2-2 and x>=opt_x+2) frame_sum-=rectangle_sum(y1+1,opt_x+1,y2-1,x-1);\n                ans=max(ans,frame_sum);\n\n                int sum1=rectangle_sum(y1,opt_x,y2,x),sum2=rectangle_sum(y1,x,y2,x);\n                if(y1<=y2-2 and x>=opt_x+1) sum1-=rectangle_sum(y1+1,opt_x+1,y2-1,x);\n                if(sum2>sum1){\n                    opt_x=x;\n                    ans=max(ans,sum2);\n                }\n            }\n        }\n    }\n\n    cout << ans << endl;\n}\n\nint main(){\n\tstd::ios::sync_with_stdio(false);\n\tstd::cin.tie(0);\n\tsolve();\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "//0310\n#include <bits/stdc++.h>\n\nusing namespace std;\n\n#define FOR(i,a,b) for(int i=(a);i<(b);i++)\n#define REP(i,a) FOR(i,0,a)\n\nconst int MAX_N=300;\n\nconst int INF=1e8;\n\nint N;\nint p[MAX_N+5][MAX_N+5];\n\nint dp[MAX_N+5][MAX_N+5][MAX_N+5],dp2[MAX_N+5][MAX_N+5][MAX_N+5];\n\nint main(){\n\tscanf(\"%d\",&N);\n\tFOR(i,1,N+1){\n\t\tFOR(j,1,N+1){\n\t\t\tscanf(\"%d\",&p[i][j]);\n\t\t}\n\t}\n\tFOR(i,1,N+1){\n\t\tFOR(j,1,N+1){\n\t\t\tfor (int k=i;k>=1;k--){\n\t\t\t\tif (i==k){\n\t\t\t\t\tdp2[i][j][k]=p[i][j];\n\t\t\t\t}else{\n\t\t\t\t\tdp2[i][j][k]=dp2[i][j][k+1]+p[k][j];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tint res=-INF;\n\tFOR(i,1,N+1){\n\t\tFOR(j,1,N+1){\n\t\t\tFOR(k,1,i+1){\n\t\t\t\tdp[i][j][k]=dp2[i][j][k]+max(dp[i][j-1][k]-dp2[i-1][j-1][k+1],0);\n\t\t\t\tres=max(res,dp[i][j][k]);\n\t\t\t}\n\t\t}\n\t}\n\tprintf(\"%d\\n\",res);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#include <map>\n#define N 310\n#define ma make_pair\nusing namespace std;\ntypedef pair<int,int> P;\nint n,p[N][N],s,ans,a1,a2,b1,b2,d[N][N],sum,sum2;\nmap<P,P> m;\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  int cnt=0;\n  for(int i=1;i<=n;i++){\n    for(int j=1;j<=n;j++){\n      for(int k=n;k>=i;k--){\n\tif(m.find(P(i,k))!=m.end()&&i>m[P(i,k)].first) continue;\n\tfor(int l=n;l>=j;l--){\n\t  cnt++;\n\t  sum2=0;\n\t  sum=d[k][l]-d[i-1][l]-d[k][j-1]+d[i-1][j-1];\n\t  if(k-i>=2&&l-j>=2) sum2=d[k-1][l-1]-d[i][l-1]-d[k-1][j]+d[i][j];\n\t  ans=max(ans,sum-sum2);\n\t  if(m.find(P(i,k))==m.end()) m.insert(ma(P(i,k),P(k,ans)));\n\t  else if(m[P(i,k)].second<sum) m[P(i,k)]=ma(k,sum);\n\t}\n      }\n    }\n  }\n  //  cout<<cnt<<endl;\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#include <map>\n#define N 310\n#define ma make_pair\nusing namespace std;\ntypedef pair<int,int> P;\nint n,p[N][N],ans,d[N][N],sum,sum2;\nmap<P,P> m,t;\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  int cnt=0;\n  for(int i=1;i<=n;i++){\n    for(int j=1;j<=n;j++){\n      for(int k=n;k>=i;k--){\n\tfor(int l=n;l>=j;l--){\n\t  if(t.find(P(i,k))!=t.end()&&l>t[P(i,k)].first) continue;\n\t  if(m.find(P(j,l))!=m.end()&&k>m[P(j,l)].first) continue;\n\t  cnt++;\n\t  sum2=0;\n\t  sum=d[k][l]-d[i-1][l]-d[k][j-1]+d[i-1][j-1];\n\t  if(k-i>=2&&l-j>=2) sum2=d[k-1][l-1]-d[i][l-1]-d[k-1][j]+d[i][j];\n\t  ans=max(ans,sum-sum2);\n\t  if(m.find(P(j,l))==m.end()) m.insert(ma(P(j,l),P(k,ans)));\n\t  else if(m[P(j,l)].second<sum) m[P(j,l)]=ma(k,sum);\n\t  if(t.find(P(i,k))==t.end()) t.insert(ma(P(i,k),P(l,ans)));\n\t  else if(t[P(i,k)].second<sum) t[P(i,k)]=ma(l,sum);\n\t}\n      }\n    }\n  }\n  //  cout<<cnt<<endl;\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#define N 310\nusing namespace std;\ntypedef pair<int,int> P;\nint n,p[N][N],s,ans,a1,a2,b1,b2,d[N][N],A[N],B[N],C[N],D[N];\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++){\n    s=0;\n    for(int j=1;j<=n;j++) s+=p[j][i];\n    A[i]=C[i]=s;\n  }\n  for(int i=1;i<=n;i++){\n    s=0;\n    for(int j=1;j<=n;j++) s+=p[i][j];\n    B[i]=D[i]=s;\n  }\n  if(n!=1){\n    for(int i=1;i<=n;i++)\n      for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n    for(int i=1;i<=n;i++)\n      for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n    for(int i=2;i<=n;i++)\n      for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n    for(int i=1;i<=n;i++){\n      for(int j=1;j<=n;j++){\n\tfor(int k=i+1;k<=n;k++){\n\t  for(int l=j+1;l<=n;l++){\n\t    //if(!(a1==A[j]||a2==A[j]||a1==A[l]||a2==A[l]||b1==B[i]||b2==B[i]||b1==B[k]||b2==B[k])) continue;\n\t    int sum=d[k][l]-d[i-1][l]-d[k][j-1]+d[i-1][j-1];\n\t    int sum2=d[k-1][l-1]-d[i][l-1]-d[k-1][j]+d[i][j];\n\t    if(k-i>=2&&l-j>=2) ans=max(ans,sum-sum2);\n\t    else ans=max(ans,sum);\n\t  }\n\t}\n      }\n    }\n    cout<<ans<<endl;\n  }else cout<<p[0][0]<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#include <queue>\n#define N 310\nusing namespace std;\ntypedef pair<int,int> P;\nint n,p[N][N],s,ans,a1,a2,b1,b2,d[N][N];\npriority_queue<P> A,B;\n\nint main(){\n  cin>>n;\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++) cin>>p[i][j];\n  for(int i=0;i<n;i++){\n    s=0;\n    for(int j=0;j<n;j++) s+=p[j][i];\n    A.push(P(s,i));\n  }\n  for(int i=0;i<n;i++){\n    s=0;\n    for(int j=0;j<n;j++) s+=p[i][j];\n    B.push(P(s,i));\n  }\n  P t=A.top(); A.pop();\n  a1=t.second;\n  t=A.top(); A.pop();\n  a2=t.second;\n  t=B.top(); B.pop();\n  b1=t.second;\n  t=B.top(); B.pop();\n  b2=t.second;\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++) d[i][j]=p[i][j];\n  for(int i=0;i<n;i++)\n    for(int j=1;j<n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=1;i<n;i++)\n    for(int j=0;j<n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  for(int i=0;i<n;i++){\n    for(int j=0;j<n;j++){\n      for(int k=i;k<n;k++){\n\tfor(int l=j;l<n;l++){\n\t  //if(!(a1==j||a2==j||a1==l||a2==l||b1==i||b2==i||b1==k||b2==k)) continue;\n\t  int sum=d[k][l],sum2=0;\n\t  if(i&&j) sum=sum-d[i-1][l]-d[k][j-1]+d[i-1][j-1];\n\t  else if(i) sum=sum-d[i-1][l];\n\t  else if(j) sum=sum-d[k][j-1];\n\t  if(k>=2&&l>=2&&k-i>=2&&l-j>=2){\n\t    if(i+1&&j+1) sum2=d[k-1][l-1]-d[i][l-1]-d[k-1][j]+d[i][j];\n\t    else if(i+1) sum2=d[k-1][l-1]-d[i][l-1];\n\t    else if(j+1) sum2=d[k-1][l-1]-d[k-1][j];\n\t  }\n\t  ans=max(ans,sum-sum2);\n\t}\n      }\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#define INF 10000000\nusing namespace std;\n\nint main(){\n  int n,x[302][302]={},y[302][302]={};\n  cin>>n;\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++)cin>>y[i][j],x[i][j]=y[i][j];\n\n  for(int i=0;i<n;i++)\n    for(int j=n-2;j>=0;j--) {\n      x[i][j]+=x[i][j+1];\n      y[j][i]+=y[j+1][i];\n    }\n  \n  int ans=y[0][n-1],sum,K[302][302]={},t=0,f=1;\n  while(f){\n    t++,f=0;\n    for(int i=0;i<n;i++) //yoko\n      for(int j=i+1;j<n;j++) {//yoko\n\tint a=K[i][j],nk=a;\n\tsum=-INF;\n\tfor(int k=a+1;k<n;k++) { //tate\n\t  int X=(x[a][i]-x[a][j+1])+(x[k][i]-x[k][j+1]);\n\t  int Y=(y[a+1][i]-y[k][i])+(y[a+1][j]-y[k][j]);\n\t  if(sum<=X+Y)sum=X+Y,nk=k;\n\t}\n\tans=max(ans,sum);\n\t\n\tif(nk<n-1)f=1;\n\tfor(int k=a+1;k<nk;k++){//tate\n\t  sum+=(x[k][i+1]-x[k][j])-(x[k-1][i]-x[k-1][j+1]);\n\t  ans=max(ans,sum);\n\t}\n\tif(a+1==nk&&j-i!=1) nk=n-1;\n\tK[i][j]=nk;\n      }\n  }\n  cout <<ans<<endl;\n\t  \n  return 0; \n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#include <queue>\n#define N 310\nusing namespace std;\ntypedef pair<int,int> P;\nint n,p[N][N],s,ans,a1,a2,b1,b2,d[N][N];\npriority_queue<P> A,B;\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++){\n    s=0;\n    for(int j=1;j<=n;j++) s+=p[j][i];\n    A.push(P(s,i));\n  }\n  for(int i=1;i<=n;i++){\n    s=0;\n    for(int j=1;j<=n;j++) s+=p[i][j];\n    B.push(P(s,i));\n  }\n  P t=A.top(); A.pop();\n  a1=t.second;\n  t=A.top(); A.pop();\n  a2=t.second;\n  t=B.top(); B.pop();\n  b1=t.second;\n  t=B.top(); B.pop();\n  b2=t.second;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  \n  for(int i=1;i<=n;i++){\n    for(int j=1;j<=n;j++){\n      for(int k=i+1;k<=n;k++){\n\tfor(int l=j+1;l<=n;l++){\n\t  //if(!(a1==j||a2==j||a1==l||a2==l||b1==i||b2==i||b1==k||b2==k)) continue;\n\t  int sum=d[k][l]-d[i-1][l]-d[k][j-1]+d[i-1][j-1];\n\t  int sum2=d[k-1][l-1]-d[i][l-1]-d[k-1][j]+d[i][j];\n\t  ans=max(ans,sum-sum2);\n\t}\n      }\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\nusing namespace std;\n\nint n;\nint tate[300][301];\t//[x][y?´????]\nint yoko[301][300];\t//[x?´????][y]\n\nint tateSum(int x,int y0,int y1){return tate[x][y1+1]-tate[x][y0];}\nint yokoSum(int x0,int x1,int y){return yoko[x1+1][y]-yoko[x0][y];}\n\nint main(){\n\tcin>>n;\n\tfor(int i=0;i<n;i++){\n\t\ttate[i][0]=0;\n\t\tyoko[0][i]=0;\n\t}\n\tint tmp;\n\tfor(int y=0;y<n;y++){\n\t\tfor(int x=0;x<n;x++){\n\t\t\tcin>>tmp;\n\t\t\ttate[x][y+1]=tate[x][y]+tmp;\n\t\t\tyoko[x+1][y]=yoko[x][y]+tmp;\n\t\t}\n\t}\n\t\n\tint i,j,k,l; //(i,j)-(k,l)\n\tint ans=-114514810;\n\tfor(i=0;i<n;i++){\n\tfor(j=0;j<n;j++){\n\t\tfor(k=i;k<n;k++){\n\t\tfor(l=j;l<n;l++){\n\t\t\tif(i==k && j==l){\t//???\n\t\t\t\tans=max(ans,tateSum(i,j,j));\n\t\t\t}else if(i==k){\t\t//??????\n\t\t\t\tans=max(ans,tateSum(i,j,l));\n\t\t\t}else if(j==l){\t\t//?¨????\n\t\t\t\tans=max(ans,yokoSum(i,k,j));\n\t\t\t}else{\t//????§?\n\t\t\t\tans=max(ans,tateSum(i,j,l-1)+yokoSum(i,k-1,l)+tateSum(k,j+1,l)+yokoSum(i+1,k,j));\n\t\t\t}\n\t\t}\n\t\t}\n\t}\n\t}\n\n\tcout<<ans<<endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\nconst int INF = 1 << 28;\n\nint n;\nint grid[301][301];\n\nint sum(int sx, int sy, int ex, int ey)\n{\n\treturn grid[ex][ey] - \n\t       grid[ex][sy - 1] - \n\t\t   grid[sx - 1][ey] + \n\t\t   grid[sx - 1][sy - 1];\n}\n\nint calc(int sx, int sy, int ex, int ey)\n{\n\treturn sum(sx, sy, ex, ey) - sum(sx + 1, sy + 1, ex - 1, ey - 1);\n}\n\nint main()\n{\n\tscanf(\"%d\", &n);\n\tfor (int i = 1; i <= n; i++){\n\t\tfor (int j = 1; j <= n; j++){\n\t\t\tscanf(\"%d\", &grid[i][j]);\n\t\t\tgrid[i][j] += grid[i - 1][j];\n\t\t\tgrid[i][j] += grid[i][j - 1];\n\t\t\tgrid[i][j] -= grid[i - 1][j - 1];\n\t\t}\n\t}\n\t\n\t/*for (int i = 1; i <= n; i++){\n\t\tfor (int j = 1; j <= n; j++){\n\t\t\tprintf(\"%d \", grid[i][j]);\n\t\t}\n\t\tputs(\"\");\n\t}*/\n\t\n\tint res = -INF;\n\tfor (int i = 1; i <= n; i++){\n\t\tfor (int j = i + 2; j <= n; j++){\n\t\t\tint p = 1;\n\t\t\tfor (int k = 3; k <= n; k++){\n\t\t\t\tint s = calc(i, p, j, k);\n\t\t\t\tint t = calc(i, k - 2, j, k);\n\t\t\t\tif (s < t) p = k - 2;\n\t\t\t\t//printf(\"%d %d %d %d %d\\n\", i, p, j, k, calc(i, p, j, k));\n\t\t\t\tres = max(res, calc(i, p, j, k));\n\t\t\t}\n\t\t}\n\t}\n\t\n\tprintf(\"%d\\n\", res);\n\t\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<vector>\n#include<algorithm>\nusing namespace std;\n\nint main(){\n    int n;\n    cin >> n;\n\n    vector< vector<int> > p(n, vector<int>(n));\n    for(int i = 0 ; i < n ; ++i){\n        for(int j = 0 ; j < n ; ++j){\n            cin >> p[i][j];\n        }\n    }\n\n    vector< vector<int> > sum(n + 1, vector<int>(n + 1, 0));\n    for(int i = 0 ; i < n ; ++i){\n        for(int j = 0 ; j < n ; ++j){\n            sum[i + 1][j + 1] = p[i][j];\n        }\n    }\n\n    for(int i = 0 ; i <= n ; ++i){\n        for(int j = 1 ; j <= n ; ++j){\n            sum[i][j] += sum[i][j - 1];\n        }\n    }\n\n    for(int j = 0 ; j <= n ; ++j){\n        for(int i = 1 ; i <= n ; ++i){\n            sum[i][j] += sum[i - 1][j];\n        }\n    }\n\n    int ans = -(1 << 30);\n\n    for(int i = 1 ; i <= n ; ++i){\n        for(int j = 0 ; j <= n ; ++j){\n            for(int k = 0 ; k < j ; ++k){\n                ans = max(ans, sum[i][j] - sum[i][k] - sum[i - 1][j] + sum[i - 1][k]);\n                ans = max(ans, sum[j][i] - sum[k][i] - sum[j][i - 1] + sum[k][i - 1]);\n            }\n        }\n    }\n\n    for(int d = 2 ; d <= n ; ++d){\n        for(int u = 1 ; u < d ; ++u){\n            int maxi = sum[d][1] - sum[d][0] - sum[u - 1][1] + sum[u - 1][0];\n            for(int j = 2 ; j <= n ; ++j){\n                ans = max(ans, maxi + sum[d][j] - sum[d][j - 1] - sum[u - 1][j] + sum[u - 1][j - 1]);\n                maxi = max(maxi + p[d - 1][j - 1] + p[u - 1][j - 1], sum[d][j] - sum[d][j - 1] - sum[u - 1][j] + sum[u - 1][j - 1]);\n            }\n        }\n    }\n\n    cout << ans << endl;\n\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <set>\n#include <tuple>\n\ntypedef std::tuple<int,int> P;\n\nconst int INF = 1001001001;\n\nint pixels[301][301];\nint sumH[301][301], sumV[301][301];\n\nint main(){\n    int N;\n    scanf(\"%d\", &N);\n\n    for(int i=1;i<=N;i++){\n        for(int j=1;j<=N;j++){\n            scanf(\"%d\", &pixels[i][j]);\n        }\n    }\n\n    for(int i=1;i<=N;i++){\n        for(int j=1;j<=N;j++){\n            sumH[i][j] += sumH[i][j-1] + pixels[i][j];\n            // printf(\"%d \", sumH[i][j]);\n        }\n        // puts(\"\");\n    }\n\n    // puts(std::string(40, '-').c_str());\n\n    for(int i=1;i<=N;i++){\n        for(int j=1;j<=N;j++){\n            sumV[i][j] += sumV[i-1][j] + pixels[i][j];\n            // printf(\"%d \", sumV[i][j]);\n        }\n        // puts(\"\");\n    }\n\n    int res = -INF;\n    for(int i=1;i<=N;i++){\n        for(int j=i+1;j<=N;j++){\n            std::set<P> set;\n            for(int k=1;k<=N;k++){\n                set.insert(std::make_tuple(-(sumH[i][k-1]+sumH[j][k-1]+sumV[j][k]-sumV[i-1][k]), k));\n            }\n\n            for(int k=1;k<=N;k++){\n                int x, idx;\n                std::tie(x, idx) = *set.begin();\n\n                for(int l=k;l<=idx;l++){\n                    res = std::max(res, -x-sumH[i][k]-sumH[j][k]+sumV[j][k]-sumV[i-1][k]);\n                }\n\n                k = idx + 1;\n                \n                while(!set.empty()){\n                    int idx2;\n                    std::tie(std::ignore, idx2) = *set.begin();\n\n                    if(idx2 <= idx){set.erase(set.begin());}\n                    else{break;}\n                }\n            }\n        }\n\n        std::set<P> set;\n        for(int j=1;j<=N;j++){\n            set.insert(std::make_tuple(-sumH[i][j], j));\n        }\n\n        for(int j=1;j<=N;j++){\n            int x, idx;\n            std::tie(x, idx) = *set.begin();\n\n            for(int k=j;k<=idx;k++){\n                res = std::max(res, -x-sumH[i][j-1]);\n            }\n\n            j = idx + 1;\n\n            while(!set.empty()){\n                int idx2;\n                std::tie(std::ignore, idx2) = *set.begin();\n\n                if(idx2 <= idx){set.erase(set.begin());}\n                else{break;}\n            }            \n        }\n    }\n\n    printf(\"%d\\n\", res);\n}"
  },
  {
    "language": "C++",
    "code": "//1\n\n#include <bits/stdc++.h>\n\nusing namespace std;\n\n#define FOR(i,a,b)for(int i=(a); i<(b); i++)\n#define REP(i,n)FOR(i,0,n)\n#define ALL(v) (v).begin(),(v).end()\n#define fi first\n#define se second\n\ntemplate<typename A, typename B> inline bool chmax(A &a, B b){if (a<b){a = b; return 1;}return 0;}\ntemplate<typename A, typename B> inline bool chmin(A &a, B b){if (a>b){a = b; return 1;}return 0;}\n\ntypedef long long ll;\ntypedef pair<int,int> pii;\ntypedef pair<ll,ll>pll;\ntypedef pair<int,pii>pip;\n\nconst ll INF = 1e9+100;\nconst ll MOD = 1e9+7;\nconst double EPS = 1e-10;\nconst bool debug = 1;\n\nint N;\nint p[300][300];\nint sum[300][301];\nint d[300], ma[300];\n\nint main(){\n\tcin >> N;\n\tREP(i, N) REP(j, N) scanf(\"%d\", &p[i][j]);\n\t\n\tREP(i, N) REP(j, N) sum[i][j + 1] = sum[i][j] + p[i][j];\n\t\n\tll ans = -INF;\n\tREP(i, N) REP(j, N) {\n\t\tint sum = 0;\n\t\tFOR(h, i, N) {\n\t\t\tsum += p[h][j];\n\t\t\tchmax(ans, sum);\n\t\t}\n\t}\n\tREP(i, N) REP(j, N) {\n\t\tint sum = 0;\n\t\tFOR(w, j, N) {\n\t\t\tsum += p[i][w];\n\t\t\tchmax(ans, sum);\n\t\t}\n\t}\n\t\n\tFOR(x, 1, N) {\n\t\tREP(w, N) {\n\t\t\t// [x - 1, x + w] 横棒は[x, x+w)\n\t\t\tif (x + w >= N) break;\n\t\t\td[0] = sum[0][x+w+1]-sum[0][x];\n\t\t\t\n\t\t\tREP(i, N - 1) d[i + 1] = d[i] - (sum[i][x+w] - sum[i][x]) + (sum[i + 1][x+w+1] - sum[i + 1][x - 1]);\n\t\t\t\n\t\t\tma[N - 2] = d[N - 1];\n\t\t\tfor (int i = N - 3; i >= 0; i--) ma[i] = max(ma[i + 1], d[i + 1]);\n\t\t\t\n\t\t\tREP(i, N - 1) {\n\t\t\t\tchmax(ans, ma[i] - d[i] + (sum[i][x+w+1]-sum[i][x-1]) + (sum[i][x+w]-sum[i][x]));\n\t\t\t}\n\t\t}\n\t}\n\t\n\tcout << ans << endl;\n\t\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long int64;\nconst int INF = 1 << 30;\nint main(){\n  int N, P[301][301] = {{}};\n  cin >> N;\n  for(int i = 1; i <= N; i++){\n    for(int j = 1; j <= N; j++){\n      cin >> P[i][j];\n      P[i][j] += P[i - 1][j] + P[i][j - 1] - P[i - 1][j - 1];\n    }\n  }\n#define Sum( y1, x1, y2, x2) (P[y2][x2] - P[y2][x1 - 1] - P[y1 - 1][x2] + P[y1 - 1][x1 - 1])\n  int ret = -INF;\n  for(int i = 1; i <= N; i++){\n    for(int j = i; j <= N; j++){\n      int better = 0;\n      for(int k = 1; k <= N; k++){\n        int st = Sum( i, k, j, k);\n        ret = max( ret, st + better);\n        better = max( st, better + Sum( i, k, i, k) + (i != j ? Sum( j, k, j, k) : 0));\n      }\n    }\n  }\n  cout << ret << endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstring>\nusing namespace std;\n\nint main(){\n  int n,mp[302][302],x[302][302]={},y[302][302]={};\n  cin>>n;\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++)cin>>y[i][j],mp[i][j]=x[i][j]=y[i][j];\n  \n  int ans=max(y[0][n-1],y[n-1][0]);\n  for(int i=0;i<n;i++)\n    for(int j=n-2;j>=0;j--) {\n      x[i][j]+=x[i][j+1];\n      y[j][i]+=y[j+1][i];\n      if(ans<x[i][j])ans=x[i][j];\n      if(ans<y[j][i])ans=y[j][i];\n    }\n  // n=300;\n  int sum[302][302],xmem[302][302];\n\n  for(int i=0;i<=n;i++)\n    for(int j=0;j<=n;j++) sum[i][j]=xmem[i][j]=-100000000;\n\n\n  for(int i=0;i<n;i++) //yoko\n    for(int j=i+1;j<n;j++) {//yoko\n      xmem[i][j]=(x[0][i]-x[0][j+1]);\n      for(int k=0;k<n;k++) { //tate\n\tint X=(x[0][i]-x[0][j+1])+(x[k][i]-x[k][j+1]);\n\tint Y=(y[0][i]-y[k][i])+(y[0][j]-y[k][j]);\n\tsum[i][j]=max(sum[i][j],X+Y);\n      }\n    }\n\n  for(int i=0;i<n;i++) //yoko\n    for(int j=i+1;j<n;j++)//yoko\n      for(int k=0;k<n;k++){ //tate\n\tint X=(x[k][i]-x[k][j+1]);\n\tsum[i][j]=sum[i][j]-X;\n\tans=max(ans,sum[i][j]);\n      }\n\n  cout <<ans<<endl;\n\t  \n  return 0; \n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#define N 310\n#define INF (1e9)\nusing namespace std;\nint n,p[N][N],ans,c,ma,d[N][N];\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  ans=-INF;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) c[i][j]=P(1,-INF);\n  for(int k=1;k<=n;k++){\n    for(int l=k+1;l<=n;l++){\n      c=1;\n      ma=-INF;\n      for(int i=c;i<=n;i++){\n\tint sum=d[j][l]-d[i-1][l]-d[j][k-1]+d[i-1][k-1],sum2=0;\n\tif(j-i>=2&&l-k>=2) sum2=d[j-1][l-1]-d[i][l-1]-d[j-1][k]+d[i][k];\n\tif(ma<sum-sum2) ma=sum-sum2,c=i;\n      }\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define INF 1e+9\nusing namespace std;\n\nint n,imos[301][301] = {};\n\nint calc(int x1,int x2,int y1,int y2){\n\treturn imos[x2 + 1][y2 + 1] - imos[x1][y2 + 1] - imos[x2 + 1][y1] + imos[x1][y1];\n}\n\nint main(){\n\tint ma = -INF;\n\tcin >> n;\n\tfor(int i = 0;i < n;i++){\n\t\tfor(int j = 0;j < n;j++) cin >> imos[i + 1][j + 1];\n\t}\n\tfor(int i = 1;i <= n;i++){\n\t\tfor(int j = 1;j <= n;j++) imos[i][j] += imos[i - 1][j] + imos[i][j - 1] - imos[i - 1][j - 1];\n\t}\n\tfor(int i = 0;i < n;i++){\n\t\tfor(int j = 0;j < n;j++){\n\t\t\tfor(int k = j;k < n;k++) ma = max(ma,max(calc(i,i,j,k),calc(j,k,i,i)));\n\t\t}\n\t}\n\tfor(int i = 0;i < n;i++){\n\t\tfor(int j = i + 1;j < n;j++){\n\t\t\tint sum[301] = {},tmp = 0,tma = -INF;\n\t\t\tfor(int k = 1;k < n;k++){\n\t\t\t\tsum[k] = tmp + calc(i,j,k,k);\n\t\t\t\tif(k != n - 1) tmp += calc(i,i,k,k) + calc(j,j,k,k);\n\t\t\t}\n\t\t\tfor(int k = n - 2;k >= 0;k--){\n\t\t\t\ttma = max(tma,sum[k + 1]);\n\t\t\t\tma = max(ma,tma - tmp + calc(i,j,k,k));\n\t\t\t\ttmp -= calc(i,i,k,k) + calc(j,j,k,k);\n\t\t\t}\n\t\t}\n\t}\n\tcout << ma << endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\nconst int INF = 1 << 28;\n\nint n;\nint grid[301][301];\n\nint sum(int sx, int sy, int ex, int ey)\n{\n\treturn grid[ex][ey] - \n\t       grid[ex][sy - 1] - \n\t\t   grid[sx - 1][ey] + \n\t\t   grid[sx - 1][sy - 1];\n}\n\nint calc(int sx, int sy, int ex, int ey)\n{\n\treturn sum(sx, sy, ex, ey) - sum(sx + 1, sy + 1, ex - 1, ey - 1);\n}\n\nint main()\n{\n\tscanf(\"%d\", &n);\n\tfor (int i = 1; i <= n; i++){\n\t\tfor (int j = 1; j <= n; j++){\n\t\t\tscanf(\"%d\", &grid[i][j]);\n\t\t\tgrid[i][j] += grid[i - 1][j];\n\t\t\tgrid[i][j] += grid[i][j - 1];\n\t\t\tgrid[i][j] -= grid[i - 1][j - 1];\n\t\t}\n\t}\n\t\n\t/*for (int i = 1; i <= n; i++){\n\t\tfor (int j = 1; j <= n; j++){\n\t\t\tprintf(\"%d \", grid[i][j]);\n\t\t}\n\t\tputs(\"\");\n\t}*/\n\t\n\tint res = -INF;\n\tfor (int i = 1; i <= n; i++){\n\t\tfor (int j = i + 2; j <= n; j++){\n\t\t\tint p = 1;\n\t\t\tfor (int k = 3; k <= n; k++){\n\t\t\t\tint s = calc(i, p, j, k);\n\t\t\t\tint t = calc(i, k - 2, j, k);\n\t\t\t\tif (s < t) p = k - 2;\n\t\t\t\t//printf(\"%d %d %d %d %d\\n\", i, p, j, k, calc(i, p, j, k));\n\t\t\t\tres = max(res, calc(i, p, j, k));\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfor (int i = 1; i <= n; i++){\n\t\tfor (int j = 1; j <= min(n, i + 1); j++){\n\t\t\tfor (int p = 1; p <= n; p++){\n\t\t\t\tfor (int k = p + 1; k <= n; k++){\n\t\t\t\t\tres = max(res, sum(i, p, j, k));\n\t\t\t\t\tres = max(res, sum(p, i, k, j));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\tprintf(\"%d\\n\", res);\n\t\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#include <map>\n#define N 310\n#define ma make_pair\nusing namespace std;\ntypedef pair<int,int> P;\nint n,p[N][N],ans,d[N][N],sum,sum2;\nmap<P,P> m,t;\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  int cnt=0;\n  for(int i=1;i<=n;i++){\n    for(int j=1;j<=n;j++){\n      for(int k=n;k>i;k--){\n\tfor(int l=n;l>j;l--){\n\t  if(t.find(P(i,k))!=t.end()&&l>t[P(i,k)].first) continue;\n\t  if(m.find(P(j,l))!=m.end()&&k>m[P(j,l)].first) continue;\n\t  cnt++;\n\t  sum2=0;\n\t  sum=d[k][l]-d[i-1][l]-d[k][j-1]+d[i-1][j-1];\n\t  if(k-i>=2&&l-j>=2) sum2=d[k-1][l-1]-d[i][l-1]-d[k-1][j]+d[i][j];\n\t  ans=max(ans,sum-sum2);\n\t  if(m.find(P(j,l))==m.end()) m.insert(ma(P(j,l),P(k,ans)));\n\t  else if(m[P(j,l)].second<ans) m[P(j,l)]=ma(k,ans);\n\t  if(t.find(P(i,k))==t.end()) t.insert(ma(P(i,k),P(l,ans)));\n\t  else if(t[P(i,k)].second<ans) t[P(i,k)]=ma(l,ans);\n\t}\n      }\n    }\n  }\n  //cout<<cnt<<endl;\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#include <map>\n#define N 310\n#define ma make_pair\nusing namespace std;\ntypedef pair<int,int> P;\nint n,p[N][N],s,ans,a1,a2,b1,b2,d[N][N],sum,sum2;\nmap<P,P> m;\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  int cnt=0;\n  for(int i=1;i<=n;i++){\n    for(int j=1;j<=n;j++){\n      for(int k=n;k>=i;k--){\n\tif(m.find(P(i,k))!=m.end()&&i<=m[P(i,k)].first) continue;\n\tfor(int l=n;l>=j;l--){\n\t  cnt++;\n\t  sum2=0;\n\t  sum=d[k][l]-d[i-1][l]-d[k][j-1]+d[i-1][j-1];\n\t  if(k-i>=2&&l-j>=2) sum2=d[k-1][l-1]-d[i][l-1]-d[k-1][j]+d[i][j];\n\t  ans=max(ans,sum-sum2);\n\t  if(m.find(P(i,k))==m.end()) m.insert(ma(P(i,k),P(k,ans)));\n\t  else if(m[P(i,k)].second<sum) m[P(i,k)]=ma(k,sum);\n\t}\n      }\n    }\n  }\n  //  cout<<cnt<<endl;\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#include <map>\n#define N 310\n#define ma make_pair\nusing namespace std;\ntypedef pair<int,int> P;\nint n,p[N][N],ans,d[N][N],sum,sum2;\nmap<P,P> m,t;\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  int cnt=0;\n  for(int i=1;i<=n;i++){\n    for(int j=1;j<=n;j++){\n      for(int k=n;k>=i;k--){\n\tfor(int l=n;l>=j;l--){\n\t  if(t.find(P(i,k))!=t.end()&&l>t[P(i,k)].first) continue;\n\t  if(m.find(P(j,l))!=m.end()&&k>m[P(j,l)].first) continue;\n\t  cnt++;\n\t  sum2=0;\n\t  sum=d[k][l]-d[i-1][l]-d[k][j-1]+d[i-1][j-1];\n\t  if(k-i>=2&&l-j>=2) sum2=d[k-1][l-1]-d[i][l-1]-d[k-1][j]+d[i][j];\n\t  ans=max(ans,sum-sum2);\n\t  if(m.find(P(j,l))==m.end()) m.insert(ma(P(j,l),P(k,ans)));\n\t  else if(m[P(j,l)].second<ans) m[P(j,l)]=ma(k,ans);\n\t  if(t.find(P(i,k))==t.end()) t.insert(ma(P(i,k),P(l,ans)));\n\t  else if(t[P(i,k)].second<ans) t[P(i,k)]=ma(l,ans);\n\t}\n      }\n    }\n  }\n  //cout<<cnt<<endl;\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\nusing namespace std;\nint k[1000][1000], x[1000][1000], n, cnt, maxn = -10000000;\nint main() {\n\tcin >> n;\n\tfor (int i = 1; i <= n; i++) {\n\t\tfor (int j = 1; j <= n; j++) {\n\t\t\tcin >> k[i][j];\n\t\t}\n\t}\n\tfor (int i = 1; i <= n; i++) {\n\t\tcnt = 0;\n\t\tfor (int j = 1; j <= n; j++) {\n\t\t\tcnt += k[i][j];\n\t\t\tx[i][j] = cnt + x[i - 1][j];\n\t\t}\n\t}\n\tif (n < 150) {\n\t\tfor (int i = 0; i < n; i++) {\n\t\t\tfor (int j = 0; j < n; j++) {\n\t\t\t\tfor (int k = i + 1; k <= n; k++) {\n\t\t\t\t\tfor (int l = j + 1; l <= n; l++) {\n\t\t\t\t\t\tif (k - i >= 3 && l - j >= 3) {\n\t\t\t\t\t\t\tmaxn = max(maxn, (x[i][j] + x[k][l] - x[i][l] - x[k][j]) - (x[i + 1][j + 1] + x[k - 1][l - 1] - x[i + 1][l - 1] - x[k - 1][j + 1]));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tmaxn = max(maxn, x[i][j] + x[k][l] - x[i][l] - x[k][j]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\telse {\n\t\tfor (int i = 0; i < n; i++) {\n\t\t\tfor (int j = 0; j < n; j++) {\n\t\t\t\tfor (int k = i + 1; k <= n; k++) {\n\t\t\t\t\tfor (int l = j + 1; l <= n; l++) {\n\t\t\t\t\t\tmaxn = max(maxn, (x[i][j] + x[k][l] - x[i][l] - x[k][j]) - (x[i + 1][j + 1] + x[k - 1][l - 1] - x[i + 1][l - 1] - x[k - 1][j + 1]));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tcout << maxn << endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstring>\nusing namespace std;\n\nint main(){\n  int n,x[302][302]={},y[302][302]={};\n  cin>>n;\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++)cin>>y[i][j],x[i][j]=y[i][j];\n  \n  int ans=max(y[0][n-1],y[n-1][0]);\n  for(int i=0;i<n;i++)\n    for(int j=n-2;j>=0;j--) {\n      x[i][j]+=x[i][j+1];\n      y[j][i]+=y[j+1][i];\n      if(ans<x[i][j])ans=x[i][j];\n      if(ans<y[j][i])ans=y[j][i];\n    }\n  n=300;\n  for(int i=0;i<n;i++) //tate\n    for(int j=0;j<n;j++)//yoko\n      for(int k=i+1;k<n;k++)//tate\n\tfor(int l=j+1;l<n;l++){//yoko\n\t  continue;\n\t  int X=(x[i][j]-x[i][l+1])+(x[k][j]-x[k][l+1]);\n\t  int Y=(y[i+1][j]-y[k][j])+(y[i+1][l]-y[k][l]);\n\t  if(ans<X+Y)ans=X+Y;\n\t}\n  cout <<ans<<endl;\n\t  \n  return 0; \n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\nusing namespace std;\nint main() {\n       int N;\n       cin >> N;\n       int p[N][N];\n       for(int i = 0; i < N; i++) {\n    \t   for(int j = 0; j < N; j++) {\n    \t\t   cin >> p[i][j];\n    \t   }\n       }\n       int sum[N+1][N+1];\n       for(int i = 0; i <= N; i++) {\n         for(int j = 0; j <= N; j++) {\n           sum[i][j] = 0;\n         }\n       }\n       for(int i = 1; i <= N; i++) {\n    \t   for(int j = 0; j < N; j++) {\n    \t\t   sum[i][j + 1] += sum[i][j] + p[i-1][j];\n    \t   }\n       }\n       for(int i = 0; i <= N; i++) {\n    \t   for(int j = 0; j < N; j++) {\n    \t\t   sum[j + 1][i] += sum[j][i];\n    \t   }\n       }\n\n       int Max = p[0][0];\n       for(int i = 0; i < N; i++) {\n    \t   for(int j = 0; j < N; j++) {\n    \t\t   for(int k = i + 2; k <= N; k++) {\n    \t\t\t   for(int l = j + 2; l <= N; l += 4) {\n    \t\t\t\t   int sumA = sum[k][l] + sum[i][j] - sum[k][j] - sum[i][l];\n    \t\t\t\t   int sumB = sum[k-1][l-1] + sum[i+1][j+1] - sum[k-1][j+1] - sum[i+1][l-1];\n    \t\t\t\t   Max = max(Max,sumA - sumB);\n    \t\t\t   }\n    \t\t   }\n    \t   }\n       }\n       cout << Max << endl;\n   }"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstdio>\n#include <algorithm>\nusing namespace std;\nint main() {\n       int N;\n       scanf(\"%d\",&N);\n       int p[N][N];\n       for(int i = 0; i < N; i++) {\n    \t   for(int j = 0; j < N; j++) {\n           scanf(\"%d\",&p[i][j]);\n    \t   }\n       }\n       int sum[N+1][N+1];\n       for(int i = 0; i <= N; i++) {\n         for(int j = 0; j <= N; j++) {\n           sum[i][j] = 0;\n         }\n       }\n       for(int i = 1; i <= N; i++) {\n    \t   for(int j = 0; j < N; j++) {\n    \t\t   sum[i][j + 1] += sum[i][j] + p[i-1][j];\n    \t   }\n       }\n       for(int i = 0; i <= N; i++) {\n    \t   for(int j = 0; j < N; j++) {\n    \t\t   sum[j + 1][i] += sum[j][i];\n    \t   }\n       }\n\n       int Max = p[0][0];\n       for(int i = 0; i < N; i++) {\n    \t   for(int j = 0; j < N; j++) {\n    \t\t   for(int k = i + 2; k <= N; k++) {\n    \t\t\t   for(int l = j + 2; l <= N; l++) {\n    \t\t\t\t   int sumA = sum[k][l] + sum[i][j] - sum[k][j] - sum[i][l];\n    \t\t\t\t   int sumB = sum[k-1][l-1] + sum[i+1][j+1] - sum[k-1][j+1] - sum[i+1][l-1];\n    \t\t\t\t   Max = max(Max,sumA - sumB);\n    \t\t\t   }\n    \t\t   }\n    \t   }\n       }\n       cout << Max << endl;\n   }"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#define N 310\n#define INF (1e9)\nusing namespace std;\nint n,p[N][N],ans,c,b,ma,d[N][N];\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  ans=p[0][0];\n  for(int k=1;k<=n;k++){\n    for(int l=k+1;l<=n;l++){\n      b=c=1;\n      while(1){\n\tma=-INF;\n\tfor(int i=c+1;i<=n;i++){\n\t  int sum=d[i][l]-d[b-1][l]-d[i][k-1]+d[b-1][k-1],sum2=0;\n\t  if(i-b>=2&&l-k>=2) sum2=d[i-1][l-1]-d[b][l-1]-d[i-1][k]+d[b][k];\n\t  if(ma<sum-sum2) ma=sum-sum2,c=i;\n\t  ans=max(ans,sum-sum2);\n\t}\n\tfor(int i=b+1;i<c;i++){\n\t  int sum=d[i][l]-d[b-1][l]-d[i][k-1]+d[b-1][k-1],sum2=0;\n\t  if(i-b>=2&&l-k>=2) sum2=d[i-1][l-1]-d[b][l-1]-d[i-1][k]+d[b][k];\n\t  ans=max(ans,sum-sum2);\n\t}\n\tif(c==n) break;\n\tb=c;\n      }\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#include <map>\n#define N 310\n#define ma make_pair\nusing namespace std;\ntypedef pair<int,int> P;\nint n,p[N][N],s,ans,a1,a2,b1,b2,d[N][N],sum,sum2;\nmap<P,P> m;\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  int cnt=0;\n  for(int i=1;i<=n;i++){\n    for(int j=1;j<=n;j++){\n      for(int k=n;k>=i;k--){\n\tif(m.find(P(i,k))!=m.end()&&i<m[P(i,k)].first) continue;\n\tfor(int l=n;l>=j;l--){\n\t  cnt++;\n\t  sum2=0;\n\t  sum=d[k][l]-d[i-1][l]-d[k][j-1]+d[i-1][j-1];\n\t  if(k-i>=2&&l-j>=2) sum2=d[k-1][l-1]-d[i][l-1]-d[k-1][j]+d[i][j];\n\t  ans=max(ans,sum-sum2);\n\t  if(m.find(P(i,k))==m.end()) m.insert(ma(P(i,k),P(k,ans)));\n\t  else if(m[P(i,k)].second<sum) m[P(i,k)]=ma(k,sum);\n\t}\n      }\n    }\n  }\n  //  cout<<cnt<<endl;\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nint main(void){\n  int p[333][333];\n  int N;\n  cin >> N;\n  for(int i = 1; i <= N; i++){\n    for(int j = 1; j <= N; j++){\n      cin >> p[i][j];\n    }\n  }\n  for(int i=1; i <= N; i++){\n    for(int j=2; j <= N; j++){\n      p[i][j] += p[i][j-1];\n    }\n  }\n  for(int i=2; i <= N; i++){\n    for(int j = 1; j <= N; j++){\n      p[i][j] += p[i-1][j];\n    }\n  }\n  int ans = 0;\n  for(int y0 = 1; y0 < N+1; y0++){\n    for(int x0 = 1; x0 < N+1; x0++){\n      for(int y1 = y0+1; y1 < N+1; y1++){\n\tfor(int x1 = x0+1; x1 < N+1; x1++){\n\t  int cave = p[y1-1][x1-1] + p[y0][x0] - p[y1-1][x0] - p[y0][x1-1];\n\t  ans = max(ans, p[y1][x1] + p[y0-1][x0-1] - p[y1][x0-1] - p[y0-1][x1] - cave);\n\t}\n      }\n    }\n  }\n  cout << ans << endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <time.h>\n#define INF 10000000\nusing namespace std;\n\nint main(){\n  clock_t start=clock();\n  int n,x[302][302]={},y[302][302]={};\n  cin>>n;\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++)cin>>y[i][j],x[i][j]=y[i][j];\n  /*\n  n=300;\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++) x[i][j]=y[i][j]=-1;\n  */\n\n  for(int i=0;i<n;i++)\n    for(int j=n-2;j>=0;j--) {\n      x[i][j]+=x[i][j+1];\n      y[j][i]+=y[j+1][i];\n    }\n  \n  int ans=y[0][n-1],sum,K[302][302]={},t=0,f=1;\n  while(f){\n    t++,f=0;\n    for(int i=0;i<n;i++) //yoko\n      for(int j=i+1;j<n;j++) {//yoko\n\tint a=K[i][j],nk=a;\n\tsum=-INF;\n\tfor(int k=a+1;k<n;k++) { //tate\n\t  int X=(x[a][i]-x[a][j+1])+(x[k][i]-x[k][j+1]);\n\t  int Y=(y[a+1][i]-y[k][i])+(y[a+1][j]-y[k][j]);\n\t  if(sum<=X+Y)sum=X+Y,nk=k;\n\t}\n\tans=max(ans,sum);\n\t\n\tif(nk<n-1)f=1;\n\tfor(int k=a+1;k<nk;k++){//tate\n\t  sum+=(x[k][i+1]-x[k][j])-(x[k-1][i]-x[k-1][j+1]);\n\t  ans=max(ans,sum);\n\t}\n\tif(a+1==nk&&j-i!=1) nk=n-1;\n\tK[i][j]=nk;\n      }\n  }\n  clock_t end=clock();\n  //  cout << (double)(end-start)/CLOCKS_PER_SEC <<endl;\n  cout <<ans<<endl;\n\t  \n  return 0; \n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\n#include<cstring>\nusing namespace std;\nint k[1000][1000], x[1000][1000], n, cnt, maxn = -10000000;\nint main() {\n\tcin >> n;\n\tfor (int i = 1; i <= n; i++) {\n\t\tfor (int j = 1; j <= n; j++) {\n\t\t\tscanf(\"%d\", &k[i][j]);\n\t\t}\n\t}\n\tfor (int i = 1; i <= n; i++) {\n\t\tcnt = 0;\n\t\tfor (int j = 1; j <= n; j++) {\n\t\t\tcnt += k[i][j];\n\t\t\tx[i][j] = cnt + x[i - 1][j];\n\t\t}\n\t}\n\tif (n <= 200) {\n\t\tfor (int i = 0; i < n; i++) {\n\t\t\tfor (int j = 0; j < n; j++) {\n\t\t\t\tfor (int k = i + 1; k <= n; k++) {\n\t\t\t\t\tfor (int l = j + 1; l <= n; l++) {\n\t\t\t\t\t\tif (k - i >= 3 && l - j >= 3) {\n\t\t\t\t\t\t\tmaxn = max(maxn, (x[i][j] + x[k][l] - x[i][l] - x[k][j]) - (x[i + 1][j + 1] + x[k - 1][l - 1] - x[i + 1][l - 1] - x[k - 1][j + 1]));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tmaxn = max(maxn, x[i][j] + x[k][l] - x[i][l] - x[k][j]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\telse {\n\t\tfor (int i = 0; i < n; i++) {\n\t\t\tfor (int j = 0; j < n; j++) {\n\t\t\t\tfor (int k = i + 1; k <= n; k++) {\n\t\t\t\t\tif (k - i >= 180) {\n\t\t\t\t\t\tfor (int l = j + 1; l <= n; l++) {\n\t\t\t\t\t\t\tif (l - j >= 180) {\n\t\t\t\t\t\t\t\tmaxn = max(maxn, (x[i][j] + x[k][l] - x[i][l] - x[k][j]) - (x[i + 1][j + 1] + x[k - 1][l - 1] - x[i + 1][l - 1] - x[k - 1][j + 1]));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tcout << maxn << endl;\n}"
  },
  {
    "language": "C++",
    "code": "// そすうささんのブログを読んだ\n#include<iostream>\nusing namespace std;\n\nint a[302][302], yoko[302][302] = {}, tate[302][302] = {};\n\nint main(){\n    int n;\n    cin >> n;\n    for(int i = 1; i <= n; i++){\n        for(int j = 1; j <= n; j++){\n            cin >> a[i][j];\n            yoko[i][j] = a[i][j]+yoko[i][j-1];\n            tate[i][j] = a[i][j]+tate[i-1][j];\n        }\n    }\n    int ans = -1000;\n    // line\n    for(int i = 1; i <= n; i++){\n        for(int j = i; j <= n; j++){\n            for(int k = 1; k <= n; k++){\n                ans = max(ans, yoko[k][j]-yoko[k][i-1]);\n                ans = max(ans, tate[j][k]-tate[i-1][k]);\n            }\n        }\n    }\n    for(int i = 1; i <= n; i++){\n        for(int j = i+1; j <= n; j++){\n            int all = yoko[i][n]+yoko[j][n];\n            int submax = (tate[j-1][1]-tate[i][1]) - yoko[j][0] - yoko[i][0];\n            for(int k = 2; k <= n; k++){\n                int right = tate[j-1][k]-tate[i][k] - (yoko[j][n]-yoko[j][k]) - (yoko[i][n]-yoko[i][k]);\n                ans = max(ans, all+submax+right);\n                // cout << i << \" \"<< j << \" \" << k << \" \" << all << \" \" << submax << \" \" << right << endl;\n                submax = max(submax, (tate[j-1][k]-tate[i][k])-yoko[j][k-1]-yoko[i][k-1]);\n            }\n        }\n    }\n    cout << ans << endl;\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#define INF 10000000\nusing namespace std;\n\nint main(){\n  int n,x[302][302]={},y[302][302]={};\n  cin>>n;\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++)cin>>y[i][j],x[i][j]=y[i][j];\n  \n  for(int i=0;i<n;i++)\n    for(int j=n-2;j>=0;j--) {\n      x[i][j]+=x[i][j+1];\n      y[j][i]+=y[j+1][i];\n    }\n\n  int ans=-INF,sum[302][302],K[2][302][302]={},t=0,f=1;\n  while(f){\n    t++,f=0;\n    for(int i=0;i<n;i++) //yoko\n      for(int j=i+1;j<n;j++) {//yoko\n\tint a=K[t%2][i][j],&b=K[(t+1)%2][i][j];\n\tb=a;\n\tsum[i][j]=-INF;\n\n\tfor(int k=a+1;k<n;k++) { //tate\n\t  int X=(x[a][i]-x[a][j+1])+(x[k][i]-x[k][j+1]);\n\t  int Y=(y[a+1][i]-y[k][i])+(y[a+1][j]-y[k][j]);\n\t  if(sum[i][j]<=X+Y)sum[i][j]=X+Y,b=k;\n\t}\n\tans=max(ans,sum[i][j]);\n\n\tif(b!=n-1)f=1;\n\tfor(int k=a+1;k<b;k++){//tate\n\t  sum[i][j]+=(x[k][i+1]-x[k][j])-(x[k-1][i]-x[k-1][j+1]);\n\t  ans=max(ans,sum[i][j]);\n\t}\n      }\n  }\n  cout <<ans<<endl;\n\t  \n  return 0; \n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\nint sum(const vector<vector<int>>& p, int t, int l, int b, int r) {\n  return p[b][r] - p[b][l - 1] - p[t - 1][r] + p[t - 1][l - 1];\n}\n\nint frame(const vector<vector<int>>& p, int t, int l, int b, int r) {\n  int result = sum(p, t, l, b, r);\n  if(b - t > 1 && r - l > 1) result -= sum(p, t + 1, l + 1, b - 1, r - 1);\n  return result;\n}\n\nint main() {\n  int N;\n  cin >> N;\n  vector<vector<int>> p(N, vector<int>(N));\n  for(auto& i: p) for(auto& j: i) cin >> j;\n  for(auto& i: p) i.insert(begin(i), 0);\n  p.insert(begin(p), vector<int>(N + 1, 0));\n\n  for(int i = 1; i <= N; ++i) for(int j = 2; j <= N; ++j) p[i][j] += p[i][j - 1];\n  for(int i = 2; i <= N; ++i) for(int j = 1; j <= N; ++j) p[i][j] += p[i - 1][j];\n\n  int answer = 0;\n  for(int top = 1; top <= N - 1; ++top) for(int bottom = top + 1; bottom <= N; ++bottom) {\n    int left = 1;\n    for(int right = 1; right <= N; ++right) {\n      int tlbr = frame(p, top, left, bottom, right);\n      answer = max(answer, tlbr);\n      int r = frame(p, top, right, bottom, right);\n      int tlb = tlbr - r;\n      if(r > tlb) left = right;\n    }\n  }\n  cout << answer << endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#define INF 10000000\nusing namespace std;\n\nint main(){\n  int n,x[302][302]={},y[302][302]={};\n  cin>>n;\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++)cin>>y[i][j],x[i][j]=y[i][j];\n\n  for(int i=0;i<n;i++)\n    for(int j=n-2;j>=0;j--) {\n      x[i][j]+=x[i][j+1];\n      y[j][i]+=y[j+1][i];\n    }\n  \n  int ans=y[0][n-1],sum,K[302][302]={},t=0,f=1;\n  while(f){\n    t++,f=0;\n    for(int i=0;i<n;i++) //yoko\n      for(int j=i+1;j<n;j++) {//yoko\n\tint a=K[i][j],nk=a;\n\tsum=-INF;\n\tfor(int k=a+1;k<n;k++) { //tate\n\t  int X=(x[a][i]-x[a][j+1])+(x[k][i]-x[k][j+1]);\n\t  int Y=(y[a+1][i]-y[k][i])+(y[a+1][j]-y[k][j]);\n\t  if(sum<=X+Y)sum=X+Y,nk=k;\n\t}\n\tans=max(ans,sum);\n\t\n\tif(nk!=n-1)f=1;\n\tfor(int k=a+1;k<nk;k++){//tate\n\t  sum+=(x[k][i+1]-x[k][j])-(x[k-1][i]-x[k-1][j+1]);\n\t  ans=max(ans,sum);\n\t  }\n\tK[i][j]=nk;\n      }\n  }\n  cout <<ans<<endl;\n\t  \n  return 0; \n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<cstring>\n#include<algorithm>\nusing namespace std;\nint n,p[333][333];\nint tate[333][333];\nint main()\n{\n    cin >> n;\n    for(int i=1;i<=n;i++){\n        for(int j=1;j<=n;j++) cin >> p[i][j];\n    }\n    \n    memset(tate,0,sizeof(int));\n    for(int i=1;i<=n;i++){\n        for(int j=1;j<=n;j++){\n            tate[i][j] = p[i][j]+tate[i-1][j];\n        }\n    }\n    \n    int ans = p[1][1];\n    for(int i=1;i<=n;i++){\n        for(int j=i;j<=n;j++){\n            int retu = tate[j][1]-tate[i-1][1];\n            for(int k=2;k<=n;k++){\n                ans = max(ans,retu+tate[j][k]-tate[i-1][k]);\n                if(i == j) retu = max(retu+p[i][k],tate[j][k]-tate[i-1][k]);\n                else retu = max(retu+p[i][k]+p[j][k],tate[j][k]-tate[i-1][k]);\n            }\n        }\n    }\n    \n    cout << ans << endl;\n    \n    return(0);\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <stdio.h>\n\nconst int N=3e2+10;\nint max(int a,int b){return a>b?a:b;}\nint main(){\n    int s[N][N],r[N][N],n,a[N][N],ans=-10000,now,last;\n    scanf(\"%d\",&n);\n    for(int i=1;i<=n;i++)for(int j=1;j<=n;j++)scanf(\"%d\",&a[i][j]);\n    for(int i=1;i<=n;i++){\n        s[i][0]=r[0][i]=0;\n        for(int j=1;j<=n;j++){\n            s[i][j]=s[i][j-1]+a[i][j];\n            r[j][i]=r[j-1][i]+a[j][i];\n        }\n    }\n    for(int i=1;i<=n;i++){\n        now=a[i][1];\n        ans=max(ans,now);\n        for(int j=2;j<=n;j++){\n            if(now<0)now=0;\n            now+=a[i][j];\n            ans=max(ans,now);\n        }\n    }\n    for(int i=1;i<=n;i++){\n        now=a[1][i];\n        ans=max(ans,now);\n        for(int j=2;j<=n;j++){\n            if(now<0)now=0;\n            now+=a[j][i];\n            ans=max(ans,now);\n        }\n    }\n    for(int i=1;i<=n;i++)for(int j=i+1;j<=n;j++){\n        now=r[j][1]-r[i-1][1]+r[j][2]-r[i-1][2];\n        last=0;\n        ans=max(ans,now);\n        for(int k=3;k<=n;k++){\n            now+=r[j][k]-r[i-1][k]-r[j-1][k-1]+r[i][k-1];\n            last-=r[j][k-2]-r[i-1][k-2]-r[j-1][k-1]+r[i][k-1];\n            if(last>0){\n                now+=last;\n                last=0;\n            }\n            ans=max(ans,now);\n        }\n    }\n    printf(\"%d\\n\",ans);\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\nusing Int = long long;\n\ntemplate<typename T1,typename T2> inline void chmin(T1 &a,T2 b){if(a>b)a=b;};\ntemplate<typename T1,typename T2> inline void chmax(T1 &a,T2 b){if(a<b)a=b;};\n\nconst Int INF = 1e15;\nconst Int MAX = 303;\nInt p[MAX][MAX];\nInt sm[MAX][MAX];\n\nInt query(Int u,Int d,Int j){\n  return sm[d+1][j]-sm[u][j]; \n}\n\nsigned main(){\n  Int n;\n  cin>>n;\n  for(Int i=0;i<n;i++)\n    for(Int j=0;j<n;j++)\n      cin>>p[i][j];\n\n  Int ans=-INF;\n  for(Int i=0;i<n;i++)\n    for(Int j=0;j<n;j++)\n      chmax(ans,p[i][j]);\n\n  // 1 * w, 2 * w\n  for(Int i=0;i<n;i++){\n    for(Int l=0;l<n;l++){\n      Int sum=0,sum2=0;\n      for(Int r=l;r<n;r++){\n\tsum+=p[i][r];\n\tif(i+1<n) sum2+=p[i+1][r];\n\tchmax(ans,sum);\n\tchmax(ans,sum+sum2);\n      }\n    }    \n  }\n\n  // h * 1, h * 2\n  for(Int j=0;j<n;j++){\n    for(Int u=0;u<n;u++){\n      Int sum=0,sum2=0;\n      for(Int d=u;d<n;d++){\n\tsum+=p[d][j];\n\tif(j+1<n) sum2+=p[d][j+1];\n\tchmax(ans,sum);\n\tchmax(ans,sum+sum2);\n      }\n    }\n  }\n\n  memset(sm,0,sizeof(sm));\n  for(Int j=0;j<n;j++)\n    for(Int i=0;i<n;i++)\n      sm[i+1][j]=sm[i][j]+p[i][j];\n  \n  // larger than 3 * 3\n  for(Int u=0;u<n;u++){\n    for(Int d=u+2;d<n;d++){\n      Int sum=query(u,d,n-1);\n      for(Int j=n-3;j>=0;j--){\n\tchmax(sum,query(u,d,j+2));\n\tsum+=p[u][j+1]+p[d][j+1];\t\n\tchmax(ans,query(u,d,j)+sum);\n      }\n    }\n  }\n    \n  cout<<ans<<endl;\n  return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\nusing namespace std;\nint k[1000][1000], x[1000][1000], n, cnt, maxn = -10000000;\nint main() {\n\tcin >> n;\n\tfor (int i = 1; i <= n; i++) {\n\t\tfor (int j = 1; j <= n; j++) {\n\t\t\tcin >> k[i][j];\n\t\t}\n\t}\n\tfor (int i = 1; i <= n; i++) {\n\t\tcnt = 0;\n\t\tfor (int j = 1; j <= n; j++) {\n\t\t\tcnt += k[i][j];\n\t\t\tx[i][j] = cnt + x[i - 1][j];\n\t\t}\n\t}\n\tfor (int i = 0; i < n; i++) {\n\t\tfor (int j = 0; j < n; j++) {\n\t\t\tfor (int k = i + 1; k <= n; k++) {\n\t\t\t\tfor (int l = j + 1; l <= n; l++) {\n\t\t\t\t\tmaxn = max(maxn, (x[i][j] + x[k][l] - x[i][l] - x[k][j]) - (x[i + 1][j + 1] + x[k - 1][l - 1] - x[i + 1][l - 1] - x[k - 1][j + 1]));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tcout << maxn << endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <time.h>\n#define INF 10000000\nusing namespace std;\n\nint main(){\n  clock_t start=clock();\n  int n,x[302][302]={},y[302][302]={};\n  cin>>n;\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++)cin>>y[i][j],x[i][j]=y[i][j];\n\n\n  for(int i=0;i<n;i++)\n    for(int j=n-2;j>=0;j--) {\n      x[i][j]+=x[i][j+1];\n      y[j][i]+=y[j+1][i];\n    }\n  \n  int ans=y[0][n-1],sum,K[302][302]={},t=0,f=1;\n  while(f){\n    t++,f=0;\n    for(int i=0;i<n;i++) //yoko\n      for(int j=i+1;j<n;j++) {//yoko\n\tint a=K[i][j],nk=a;\n\tsum=-INF;\n\tfor(int k=a+1;k<n;k++) { //tate\n\t  int X=(x[a][i]-x[a][j+1])+(x[k][i]-x[k][j+1]);\n\t  int Y=(y[a+1][i]-y[k][i])+(y[a+1][j]-y[k][j]);\n\t  if(sum<=X+Y)sum=X+Y,nk=k;\n\t}\n\tans=max(ans,sum);\n\t\n\tif(nk<n-1)f=1;\n\tfor(int k=a+1;k<nk;k++){//tate\n\t  sum+=(x[k][i+1]-x[k][j])-(x[k-1][i]-x[k-1][j+1]);\n\t  ans=max(ans,sum);\n\t}\n\tK[i][j]=nk+(nk==a+1);\n      }\n  }\n  clock_t end=clock();\n  //  cout << (double)(end-start)/CLOCKS_PER_SEC <<endl;\n  cout <<ans<<endl;\n\t  \n  return 0; \n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#define N 310\n#define INF (1e9)\nusing namespace std;\nint n,p[N][N],ans,c,b,ma,d[N][N];\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  ans=p[0][0];\n  for(int k=1;k<=n;k++){\n    for(int l=k+1;l<=n;l++){\n      b=c=1;\n      while(b!=n){\n\tma=-INF;\n\tfor(int i=c+1;i<=n;i++){\n\t  int sum=d[i][l]-d[b-1][l]-d[i][k-1]+d[b-1][k-1],sum2=0;\n\t  if(i-b>=2&&l-k>=2) sum2=d[i-1][l-1]-d[b][l-1]-d[i-1][k]+d[b][k];\n\t  if(ma<sum-sum2) ma=sum-sum2,c=i;\n\t}\n\tans=max(ans,ma);\n\tfor(int i=b+1;i<c;i++){\n\t  int sum=d[i][l]-d[b-1][l]-d[i][k-1]+d[b-1][k-1],sum2=0;\n\t  if(i-b>=2&&l-k>=2) sum2=d[i-1][l-1]-d[b][l-1]-d[i-1][k]+d[b][k];\n\t  ans=max(ans,sum-sum2);\n\t}\n\tb=c;\n      }\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\nint n,mp[301][301];\n\nint cal(int x1,int x2,int y1,int y2){\n  if(x1>x2 || y1>y2){\n    return 0;\n  }\n  int res=mp[y2][x2];\n  if(x1)res-=mp[y2][x1-1];\n  if(y1)res-=mp[y1-1][x2];\n  if(x1&&y1)res+=mp[y1-1][x1-1];\n  return res;\n  \n}\n\nint cal(int a,int b){\n  int res=-1e9,mx=-1e9;\n\n  for(int i=0;i<n;i++){\n    res=max(res,mx+cal(i,i,a,b));\n    res=max(res,cal(i,i,a,b));\n    mx=max(mx+cal(i,i,a,a)+(a!=b?cal(i,i,b,b):0),cal(i,i,a,b));\n  }\n  return res;\n}\n\n\nint main(){\n\n  cin>>n;\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++){\n      cin>>mp[i][j];\n      if(i)mp[i][j]+=mp[i-1][j];\n      if(j)mp[i][j]+=mp[i][j-1];\n      if(i&&j)mp[i][j]-=mp[i-1][j-1];\n    }\n\n  int ans=-1e9;\n  for(int i=0;i<n;i++)\n    for(int j=i;j<n;j++)ans=max(ans,cal(i,j));\n  cout <<ans<<endl;\n   \n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\nint sum(const vector<vector<int>>& p, int t, int l, int b, int r) {\n  return p[b][r] - p[b][l - 1] - p[t - 1][r] + p[t - 1][l - 1];\n}\n\nint frame(const vector<vector<int>>& p, int t, int l, int b, int r) {\n  int result = sum(p, t, l, b, r);\n  if(b - t > 1 && r - l > 1) result -= sum(p, t + 1, l + 1, b - 1, r - 1);\n  return result;\n}\n\nint main() {\n  int N;\n  cin >> N;\n  vector<vector<int>> p(N, vector<int>(N));\n  for(auto& i: p) for(auto& j: i) cin >> j;\n  for(auto& i: p) i.insert(begin(i), 0);\n  p.insert(begin(p), vector<int>(N + 1, 0));\n\n  for(int i = 1; i <= N; ++i) for(int j = 2; j <= N; ++j) p[i][j] += p[i][j - 1];\n  for(int i = 2; i <= N; ++i) for(int j = 1; j <= N; ++j) p[i][j] += p[i - 1][j];\n\n  int answer = -1000;\n  for(int top = 1; top <= N - 1; ++top) for(int bottom = top + 1; bottom <= N; ++bottom) {\n    int left = 1;\n    for(int right = 1; right <= N; ++right) {\n      int tlbr = frame(p, top, left, bottom, right);\n      answer = max(answer, tlbr);\n      int r = frame(p, top, right, bottom, right);\n      int tlb = tlbr - r;\n      if(r > tlb) left = right;\n    }\n  }\n  cout << answer << endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define rep(i,n) for(int i = 0; i < n; i++)\n#define fi first\n#define sc second\nusing namespace std;\ntypedef pair<int, int> P;\ntypedef priority_queue<P, vector<P> > PQ;\n\nint n;\nint ans = -10000;\nint z[300][300],p[300][300];\nint tate[300][300], yoko[300][300];\n\nint main(){\n\tscanf(\"%d\",&n);\n\trep(i,n)rep(j,n)scanf(\"%d\",&z[i][j]);\n\trep(i,n)rep(j,n){\n\t\tp[i][j] = z[i][j];\n\t\ttate[i][j] = p[i][j];\n\t\tyoko[i][j] = p[i][j];\n\t}\n\trep(i,n) for(int j = 1; j < n; j++) yoko[i][j] += yoko[i][j-1];\n\trep(i,n) for(int j = 1; j < n; j++) p[i][j] += p[i][j-1];\n\tfor(int i = 1; i < n; i++) rep(j,n) tate[i][j] += tate[i-1][j];\n\tfor(int i = 1; i < n; i++) rep(j,n) p[i][j] += p[i-1][j];\n\tfor(int i = 0; i < n; i++){\n\t\tfor(int j = i; j < n; j++){\n\t\t\tPQ que;\n\t\t\tif(i == j){\n\t\t\t\tif(i == 0){\n\t\t\t\t\tfor(int k = 0; k < n; k++){\n\t\t\t\t\t\tque.push(P(p[j][k],k));\n\t\t\t\t\t}\n\t\t\t\t} else{\n\t\t\t\t\tfor(int k = 0; k < n; k++){\n\t\t\t\t\t\tque.push(P(p[j][k]-p[i-1][k],k));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if(i == 0){\n\t\t\t\tfor(int k = 0; k < n; k++){\n\t\t\t\t\tint x;\n\t\t\t\t\tif(k != 0) x = p[j][k]-p[j-1][k-1]+p[i][k-1];\n\t\t\t\t\telse x = p[j][k];\n\t\t\t\t\tque.push(P(x,k));\n\t\t\t\t}\n\t\t\t} else{\n\t\t\t\tfor(int k = 0; k < n; k++){\n\t\t\t\t\tint x;\n\t\t\t\t\tif(k != 0) x = p[j][k]-p[i-1][k]-p[j-1][k-1]+p[i][k-1]-p[i-1][k-1];\n\t\t\t\t\telse x = p[j][k]-p[i-1][k];\n\t\t\t\t\tque.push(P(x,k));\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor(int k = 0; k < n; k++){\n\t\t\t\tif(i == 0){\n\t\t\t\t\tif(k == 0) ans = max(ans,p[j][k]);\n\t\t\t\t\telse ans = max(ans,p[j][k]-p[j][k-1]);\n\t\t\t\t} else if(k == 0){\n\t\t\t\t\tans = max(ans,p[j][k]-p[i-1][k]);\n\t\t\t\t} else{\n\t\t\t\t\tans = max(ans,p[j][k]-p[i-1][k]-p[j][k-1]+p[i-1][k-1]);\n\t\t\t\t}\n\t\t\t\twhile(true){\n\t\t\t\t\tif(que.size() == 0) break;\n\t\t\t\t\tif(que.top().sc <= k) que.pop();\n\t\t\t\t\telse break;\n\t\t\t\t}\n\t\t\t\tif(que.size() == 0) continue;\n\t\t\t\tint t = que.top().sc;\n\t\t\t\tif(i == j){\n\t\t\t\t\tif(k != 0) ans = max(ans,yoko[j][t]-yoko[j][k-1]);\n\t\t\t\t\telse ans = max(ans,yoko[j][t]);\n\t\t\t\t} else if(i == 0){\n\t\t\t\t\tif(j == 0){\n\t\t\t\t\t\tif(k == 0){\n\t\t\t\t\t\t\tans = max(ans,yoko[j][t]);\n\t\t\t\t\t\t} else{\n\t\t\t\t\t\t\tans = max(ans,yoko[j][t]-yoko[j][k-1]);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else{\n\t\t\t\t\t\tif(k == 0){\n\t\t\t\t\t\t\tans = max(ans,yoko[j][t]+tate[j][t]+tate[j][k]+yoko[i][t]-z[j][t]-z[j][k]-z[i][k]-z[i][t]);\n\t\t\t\t\t\t} else{\n\t\t\t\t\t\t\tans = max(ans,yoko[j][t]+tate[j][t]+tate[j][k]+yoko[i][t]-yoko[j][k-1]-yoko[i][k-1]-z[j][t]-z[j][k]-z[i][k]-z[i][t]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else if(k == 0){\n\t\t\t\t\tans = max(ans,tate[j][t]+yoko[j][t]+tate[j][k]+yoko[i][t]-tate[i-1][t]-tate[i-1][k]-z[j][t]-z[j][k]-z[i][k]-z[i][t]);\n\t\t\t\t} else{\n\t\t\t\t\tans = max(ans,tate[j][t]-tate[i-1][t]+yoko[j][t]-yoko[j][k-1]+tate[j][k]-tate[i-1][k]+yoko[i][t]-yoko[i][k-1]-z[j][t]-z[i][t]-z[j][k]-z[i][k]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tprintf(\"%d\\n\",ans);\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <algorithm>\n\n#define rep(i, n) for(int i = 0; i < (n); ++i)\n\nusing namespace std;\n\nconst int inf = 1e9;\n\nint n;\nint x[301][301];\n\nint main(){\n\tscanf(\"%d\", &n);\n\trep(i, n){\n\t\trep(j, n){\n\t\t\tscanf(\"%d\", &x[i + 1][j + 1]);\n\t\t}\n\t}\n\trep(i, n){\n\t\trep(j, n){\n\t\t\tx[i + 1][j + 1] += x[i + 1][j];\n\t\t}\n\t}\n\trep(i, n){\n\t\trep(j, n){\n\t\t\tx[i + 1][j + 1] += x[i][j + 1];\n\t\t}\n\t}\n\n\tint ans = -inf;\n\trep(i, n){\n\t\tint p = -inf;\n\t\trep(j, n){\n\t\t\tp = max(x[i][j] - x[i + 1][j], p);\n\t\t\tans = max(x[i + 1][j + 1] - x[i][j + 1] + p, ans);\n\t\t}\n\t}\n\trep(i, n){\n\t\tint p = -inf;\n\t\trep(j, n){\n\t\t\tp = max(x[j][i] - x[j][i + 1], p);\n\t\t\tans = max(x[j + 1][i + 1] - x[j + 1][i] + p, ans);\n\t\t}\n\t}\n\trep(i, n){\n\t\tfor(int j = i + 1; j < n; ++j){\n\t\t\tint p = -inf;\n\t\t\tfor(int k = 1; k < n; ++k){\n\t\t\t\tp = max(x[i][k - 1] - x[j + 1][k - 1] + x[j][k] - x[i + 1][k], p);\n\t\t\t\tans = max(x[j + 1][k + 1] - x[i][k + 1] + x[i + 1][k] - x[j][k] + p, ans);\n\t\t\t}\n\t\t}\n\t}\n\tprintf(\"%d\\n\", ans);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\nint a[512][512];\n\nint getSum(int h1, int w1, int h2, int w2)\n{\n    return (a[h2][w2] - (h1 ? a[h1 - 1][w2] : 0) - (w1 ? a[h2][w1 - 1] : 0) + (h1 && w1 ? a[h1 - 1][w1 - 1] : 0));\n}\n\nint main()\n{\n    int n;\n    \n    scanf(\"%d\", &n);\n    \n    int ans = -1001;\n    for (int i = 0; i < n; i++){\n        for (int j = 0; j < n; j++){\n            scanf(\"%d\", &a[i][j]);\n            ans = max(ans, a[i][j]);\n            if (i) a[i][j] += a[i - 1][j];\n            if (j) a[i][j] += a[i][j - 1];\n            if (i && j) a[i][j] -= a[i - 1][j - 1];\n        }\n    }\n    \n    for (int h1 = 0; h1 < n; h1++){\n        for (int h2 = h1; h2 < n; h2++){\n            int pmax = 0;\n            for (int w = 0; w < n; w++){\n                int tmp = getSum(h1, w, h2, w);\n                ans = max(ans, tmp + pmax);\n                pmax = max(pmax + getSum(h1, w, h1, w) + (h2 != h1 ? getSum(h2, w, h2, w) : 0), tmp);\n            }\n        }\n    }\n    \n    printf(\"%d\\n\", ans);\n    \n    return (0);\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#include <queue>\n#define N 310\nusing namespace std;\ntypedef pair<int,int> P;\nint n,p[N][N],s,ans,a1,a2,b1,b2,d[N][N];\npriority_queue<P> A,B;\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++){\n    s=0;\n    for(int j=1;j<=n;j++) s+=p[j][i];\n    A.push(P(s,i));\n  }\n  for(int i=1;i<=n;i++){\n    s=0;\n    for(int j=1;j<=n;j++) s+=p[i][j];\n    B.push(P(s,i));\n  }\n  P t=A.top(); A.pop();\n  a1=t.second;\n  t=A.top(); A.pop();\n  a2=t.second;\n  t=B.top(); B.pop();\n  b1=t.second;\n  t=B.top(); B.pop();\n  b2=t.second;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  \n  for(int i=1;i<=n;i++){\n    for(int j=1;j<=n;j++){\n      for(int k=i+1;k<=n;k++){\n\tfor(int l=j+1;l<=n;l++){\n\t  //if(!(a1==j||a2==j||a1==l||a2==l||b1==i||b2==i||b1==k||b2==k)) continue;\n\t  int sum=d[k][l],sum2=0;\n\t  if(i&&j) sum=sum-d[i-1][l]-d[k][j-1]+d[i-1][j-1];\n\t  else if(i) sum=sum-d[i-1][l];\n\t  else if(j) sum=sum-d[k][j-1];\n\t  if(k>=2&&l>=2&&k-i>=2&&l-j>=2){\n\t    if(i+1&&j+1) sum2=d[k-1][l-1]-d[i][l-1]-d[k-1][j]+d[i][j];\n\t    else if(i+1) sum2=d[k-1][l-1]-d[i][l-1];\n\t    else if(j+1) sum2=d[k-1][l-1]-d[k-1][j];\n\t  }\n\t  ans=max(ans,sum-sum2);\n\t}\n      }\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n\n#define REP(i,s,n) for(int i=s;i<n;i++)\n#define rep(i,n) REP(i,0,n)\n\nusing namespace std;\n\nconst int MAX = 310;\nint n, p[MAX][MAX], sum[MAX][MAX];\n\n//??????(x1,y1), ??????(x2,y2)\nint getRangeSum(int x1,int y1,int x2,int y2) {\n  int ret = sum[y2][x2];\n  if( x1 - 1 >= 0 && y1 - 1 >= 0 ) ret += sum[y1-1][x1-1];\n  if( x1 - 1 >= 0 ) ret -= sum[y2][x1-1];\n  if( y1 - 1 >= 0 ) ret -= sum[y1-1][x2];\n  return ret;\n}\n\nvoid compute() {\n  rep(i,n) rep(j,n) {\n    sum[i][j] = p[i][j];\n    if( i - 1 >= 0 && j - 1 >= 0 ) sum[i][j] -= sum[i-1][j-1];\n    if( i - 1 >= 0 ) sum[i][j] += sum[i-1][j];\n    if( j - 1 >= 0 ) sum[i][j] += sum[i][j-1];\n  }\n\n  int maxi = -INT_MAX;\n  rep(i,n*n) REP(j,i,n*n) {\n    int x1 = i % n, y1 = i / n;\n    int x2 = j % n, y2 = j / n;\n    if( x2 < x1 || y2 < y1 ) continue;\n    if( abs(x1-x2) <= 1 || abs(y1-y2) <= 1 ) maxi = max(maxi,getRangeSum(x1,y1,x2,y2));\n    else {\n      int inner_x1 = x1 + 1, inner_y1 = y1 + 1;\n      int inner_x2 = x2 - 1, inner_y2 = y2 - 1;\n      maxi = max(maxi,getRangeSum(x1,y1,x2,y2)-getRangeSum(inner_x1,inner_y1,inner_x2,inner_y2));\n    }\n  }\n  cout << maxi << endl;\n}\n\nint main() {\n  scanf(\"%d\",&n);\n  assert( 1 <= n && n <= 300 );\n  rep(i,n) rep(j,n) scanf(\" %d\",&p[i][j]);\n  compute();\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\nusing namespace std;\ntypedef long long ll;\nint main(){\n  int mp[301][301],n;\n  ll x[302][302]={},y[302][302]={};\n  cin>>n;\n\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++)cin>>mp[i][j],y[i][j]=x[i][j]=mp[i][j];\n  \n  ll ans=max(mp[0][n-1],mp[n-1][0]);\n  for(int i=0;i<n;i++)\n    for(int j=n-2;j>=0;j--) {\n      x[i][j]+=x[i][j+1];\n      y[j][i]+=y[j+1][i];\n      if(ans<x[i][j])ans=x[i][j];\n      if(ans<y[j][i])ans=y[j][i];\n    }\n  \n  for(int i=0;i<n;i++) //tate\n    for(int j=0;j<n;j++)//yoko\n      for(int k=i+1;k<n;k++)//tate\n\tfor(int l=j+1;l<n;l++){//yoko\n\t  ll xu=x[i][j]-x[i][l+1];\n\t  ll xd=x[k][j]-x[k][l+1];\n\t  ll yu=y[i+1][j]-y[k][j];\n\t  ll yd=y[i+1][l]-y[k][l];\n\t  ll sum=xu+xd+yu+yd;\n\t  if(sum>ans)ans=sum;\n\t}\n\n  cout <<ans<<endl;\n\t  \n  return 0; \n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#define N 310\n#define INF (1e9)\nusing namespace std;\nint n,p[N][N],ans,c,b,ma,d[N][N];\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  ans=-INF;\n  for(int k=1;k<=n;k++){\n    for(int l=k+1;l<=n;l++){\n      b=c=1;\n      ma=-INF;\n      for(int i=c+1;i<=n;i++){\n\tint sum=d[i][l]-d[c-1][l]-d[i][k-1]+d[c-1][k-1],sum2=0;\n\tif(i-c>=2&&l-k>=2) sum2=d[i-1][l-1]-d[c][l-1]-d[i-1][k]+d[c][k];\n\tif(ma<sum-sum2) ma=sum-sum2,b=c,c=i;\n\tans=max(ans,sum-sum2);\n      }\n      for(int i=b+1;i<c;i++){\n\tint sum=d[i][l]-d[b-1][l]-d[i][k-1]+d[b-1][k-1],sum2=0;\n\tif(i-b>=2&&l-k>=2) sum2=d[i-1][l-1]-d[b][l-1]-d[i-1][k]+d[b][k];\n\tans=max(ans,sum-sum2);\n      }\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#define N 310\n#define INF (1e9)\nusing namespace std;\nint n,p[N][N],ans,c,b,ma,d[N][N];\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  ans=d[0][0];\n  for(int k=1;k<=n;k++){\n    for(int l=k+1;l<=n;l++){\n      b=c=1;\n      while(1){\n\tma=-INF;\n\tfor(int i=c+1;i<=n;i++){\n\t  int sum=d[i][l]-d[b-1][l]-d[i][k-1]+d[b-1][k-1],sum2=0;\n\t  if(i-b>=2&&l-k>=2) sum2=d[i-1][l-1]-d[b][l-1]-d[i-1][k]+d[b][k];\n\t  if(ma<sum-sum2) ma=sum-sum2,c=i;\n\t  ans=max(ans,sum-sum2);\n\t}\n\tfor(int i=b+1;i<c;i++){\n\t  int sum=d[i][l]-d[b-1][l]-d[i][k-1]+d[b-1][k-1],sum2=0;\n\t  if(i-b>=2&&l-k>=2) sum2=d[i-1][l-1]-d[b][l-1]-d[i-1][k]+d[b][k];\n\t  ans=max(ans,sum-sum2);\n\t}\n\tif(c==n) break;\n\tb=c;\n      }\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#include <map>\n#define N 310\n#define ma make_pair\nusing namespace std;\ntypedef pair<int,int> P;\nint n,p[N][N],ans,d[N][N],sum,sum2;\nmap<P,P> m,t;\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  int cnt=0;\n  for(int i=1;i<=n;i++){\n    for(int j=1;j<=n;j++){\n      for(int k=n;k>=i;k--){\n\tfor(int l=n;l>=j;l--){\n\t  if(t.find(P(i,k))!=t.end()&&j>t[P(i,k)].first) continue;\n\t  if(m.find(P(j,l))!=m.end()&&l>m[P(j,l)].first) continue;\n\t  cnt++;\n\t  sum2=0;\n\t  sum=d[k][l]-d[i-1][l]-d[k][j-1]+d[i-1][j-1];\n\t  if(k-i>=2&&l-j>=2) sum2=d[k-1][l-1]-d[i][l-1]-d[k-1][j]+d[i][j];\n\t  ans=max(ans,sum-sum2);\n\t  if(m.find(P(j,l))==m.end()) m.insert(ma(P(j,l),P(k,ans)));\n\t  else if(m[P(j,l)].second<sum) m[P(j,l)]=ma(k,sum);\n\t  if(t.find(P(i,k))==t.end()) t.insert(ma(P(i,k),P(l,ans)));\n\t  else if(t[P(i,k)].second<sum) t[P(i,k)]=ma(l,sum);\n\t}\n      }\n    }\n  }\n  //    cout<<cnt<<endl;\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#define INF 10000000\nusing namespace std;\n\nint main(){\n  int n,x[302][302]={},y[302][302]={};\n  cin>>n;\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++)cin>>y[i][j],x[i][j]=y[i][j];\n\n  for(int i=0;i<300;i++)\n    for(int j=0;j<300;j++) y[i][j]=x[i][j]=-1;\n  n=300;\n  \n  for(int i=0;i<n;i++)\n    for(int j=n-2;j>=0;j--) {\n      x[i][j]+=x[i][j+1];\n      y[j][i]+=y[j+1][i];\n    }\n\n  int ans=max(y[0][n-1],y[n-1][0]),sum[302][302],K[2][302][302]={},t=0,f=1;\n  while(f){\n    t++,f=0;\n    for(int i=0;i<n;i++) //yoko\n      for(int j=i+1;j<n;j++) {//yoko\n\tint a=K[t%2][i][j],&b=K[(t+1)%2][i][j];\n\tb=a;\n\tsum[i][j]=-INF;\n\n\tfor(int k=a+1;k<n;k++) { //tate\n\t  int X=(x[a][i]-x[a][j+1])+(x[k][i]-x[k][j+1]);\n\t  int Y=(y[a+1][i]-y[k][i])+(y[a+1][j]-y[k][j]);\n\t  if(sum[i][j]<=X+Y)sum[i][j]=X+Y,b=k;\n\t}\n\tans=max(ans,sum[i][j]);\n\n\tif(b!=n-1)f=1;\n\tfor(int k=a+1;k<b;k++){//tate\n\t  sum[i][j]+=(x[k][i+1]-x[k][j])-(x[k-1][i]-x[k-1][j+1]);\n\t  ans=max(ans,sum[i][j]);\n\t}\n      }\n  }\n  cout <<ans<<endl;\n\t  \n  return 0; \n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\nusing namespace std;\nint main() {\n       int N;\n       cin >> N;\n       int p[N][N];\n       for(int i = 0; i < N; i++) {\n    \t   for(int j = 0; j < N; j++) {\n    \t\t   cin >> p[i][j];\n    \t   }\n       }\n       int sum[N+1][N+1];\n       for(int i = 0; i <= N; i++) {\n         for(int j = 0; j <= N; j++) {\n           sum[i][j] = 0;\n         }\n       }\n       for(int i = 1; i <= N; i++) {\n    \t   for(int j = 0; j < N; j++) {\n    \t\t   sum[i][j + 1] += sum[i][j] + p[i-1][j];\n    \t   }\n       }\n       for(int i = 0; i <= N; i++) {\n    \t   for(int j = 0; j < N; j++) {\n    \t\t   sum[j + 1][i] += sum[j][i];\n    \t   }\n       }\n\n       int Max = p[0][0];\n       for(int i = 0; i < N; i++) {\n    \t   for(int j = 0; j < N; j++) {\n    \t\t   for(int k = i + 2; k <= N; k++) {\n    \t\t\t   for(int l = j + 2; l <= N; l++) {\n    \t\t\t\t   int sumA = sum[k][l] + sum[i][j] - sum[k][j] - sum[i][l];\n    \t\t\t\t   int sumB = sum[k-1][l-1] + sum[i+1][j+1] - sum[k-1][j+1] - sum[i+1][l-1];\n    \t\t\t\t   Max = max(Max,sumA - sumB);\n    \t\t\t   }\n    \t\t   }\n    \t   }\n       }\n       cout << Max << endl;\n   }"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <cstring>\n#include <algorithm>\nusing namespace std;\n\nint n;\nint p[501][501];\nint sum[502][502];\n\nint main(void){\n\tscanf(\"%d\",&n);\n\tfor(int i=0;i<n;i++){\n\t\tfor(int j=0;j<n;j++){\n\t\t\tscanf(\"%d\",&p[j][i]);\n\t\t}\n\t}\n\tfor(int i=0;i<n;i++){\n\t\tfor(int j=0;j<n;j++){\n\t\t\tsum[j+1][i]=sum[j][i]+p[j][i];\n\t\t}\n\t}\n\tint res=-1001;\n\tfor(int l=0;l<n;l++){\n\t\tfor(int r=l+1;r<=n;r++){\n\t\t\tint now=sum[r][0]-sum[l][0];\n\t\t\tres=max(res,now);\n\t\t\tfor(int i=1;i<n;i++){\n\t\t\t\tres=max(res,now+sum[r][i]-sum[l][i]);\n\t\t\t\tint next=sum[r][i]-sum[r-1][i]+sum[l+1][i]-sum[l][i];\n\t\t\t\tif(r==l+1)next=sum[r][i]-sum[r-1][i];\n\t\t\t\tnow=max(now+next,sum[r][i]-sum[l][i]);\n\t\t\t}\n\t\t}\n\t}\n\tprintf(\"%d\\n\",res);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\nint n;\nint x[301][301],y[301][301],mp[301][301];\n\nint cal(int x1,int x2,int y1,int y2){\n  if(x1>x2 || y1>y2){\n    return 0;\n  }\n  int res=mp[y2][x2];\n  if(x1)res-=mp[y2][x1-1];\n  if(y1)res-=mp[y1-1][x2];\n  if(x1&&y1)res+=mp[y1-1][x1-1];\n  return res;\n  \n}\n\nint cal(int a,int b){\n  int res=-1e9;\n  int mx=-1e9;\n\n  for(int i=0;i<n;i++){\n    res=max(res,mx+cal(i,i,a,b));\n    mx=max(mx+cal(i,i,a,a)+(a!=b?cal(i,i,b,b):0),cal(i,i,a,b));\n  }\n  return res;\n}\n\n\nint main(){\n\n  cin>>n;\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++){\n      cin>>mp[i][j];\n      if(i)mp[i][j]+=mp[i-1][j];\n      if(j)mp[i][j]+=mp[i][j-1];\n      if(i&&j)mp[i][j]-=mp[i-1][j-1];\n    }\n\n  int ans=-1e9;\n  for(int i=0;i<n;i++)\n    for(int j=i;j<n;j++)ans=max(ans,cal(i,j));\n  cout <<ans<<endl;\n   \n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#define N 310\nusing namespace std;\ntypedef pair<int,int> P;\nint n,p[N][N],s,ans,a1,a2,b1,b2,d[N][N],sum,sum2;\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  for(int i=1;i<=n;i++){\n    for(int j=1;j<=n;j++){\n      for(int k=i+1;k<=n;k++){\n\tfor(int l=j+1;l<=n;l++){\n\t  sum=d[k][l]-d[i-1][l]-d[k][j-1]+d[i-1][j-1];\n\t  sum2=d[k-1][l-1]-d[i][l-1]-d[k-1][j]+d[i][j];\n\t  ans=max(ans,sum-sum2);\n\t}\n      }\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#define N 310\n#define INF (1e9)\n#define make make_pair\nusing namespace std;\ntypedef pair<int,int> P;\nint n,p[N][N],ans,d[N][N];\nP c[N][N];\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  ans=-INF;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) c[i][j]=P(-1,-INF);\n  \n  for(int k=1;k<=n;k++){\n    for(int l=k+1;l<=n;l++){\n      for(int i=1;i<=n;i++){\n\tint sum=d[j][l]-d[i-1][l]-d[j][k-1]+d[i-1][k-1],sum2=0;\n\tif(j-i>=2&&l-k>=2) sum2=d[j-1][l-1]-d[i][l-1]-d[j-1][k]+d[i][k];\n\tif(c[k][l].second<sum-sum2) c[k][l]=P(i,sum-sum2);\n      }\n    }\n  }\n  for(int k=1;k<=n;k++){\n    for(int l=k+1;l<=n;l++){\n      int j=c[k][l].first;\n      for(int i=1;i<c[k][l].first;i++){\n\tint sum=d[j][l]-d[i-1][l]-d[j][k-1]+d[i-1][k-1],sum2=0;\n\tif(j-i>=2&&l-k>=2) sum2=d[j-1][l-1]-d[i][l-1]-d[j-1][k]+d[i][k];\n\tans=max(ans,sum-sum2);\n      }\n      for(int i=j;i<=n;i++){\n\tint sum=d[j][l]-d[i-1][l]-d[j][k-1]+d[i-1][k-1],sum2=0;\n\tif(j-i>=2&&l-k>=2) sum2=d[j-1][l-1]-d[i][l-1]-d[j-1][k]+d[i][k];\n\tans=max(ans,sum-sum2);\n      }\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\nint INF=1e9;\nint n;\nint t[301][301];\nint u[301][301];\n \nint sum(int ai,int aj,int bi,int bj){\n  ai--,aj--;\n  return u[bi][bj]-u[ai][bj]-u[bi][aj]+u[ai][aj];\n}\n \nint calc(int ah,int bh){\n  int res=-INF;\n  int maxm=0;\n  for(int i=1;i<=n;i++){\n    res=max(res,maxm+sum(ah,i,bh,i));\n    int d=t[ah][i]+t[bh][i];\n    if(ah==bh)d/=2;\n    maxm=max(maxm+d,sum(ah,i,bh,i));\n  }\n  return res;\n}\n \nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++){\n    for(int j=1;j<=n;j++){\n      cin>>t[i][j];\n      u[i][j]=t[i][j]+u[i-1][j]+u[i][j-1]-u[i-1][j-1];\n    }\n  }\n  int ans=-INF;\n  for(int i=1;i<=n;i++){\n    for(int j=i;j<=n;j++){\n      ans=max(ans,calc(i,j));\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#define N 310\n#define INF (1e9)\n#define make make_pair\nusing namespace std;\ntypedef pair<int,int> P;\nint n,p[N][N],ans,d[N][N];\nP c[N][N];\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  ans=-INF;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) c[i][j]=P(1,-INF);\n  \n  for(int k=1;k<=n;k++){\n    for(int l=k+1;l<=n;l++){\n      for(int i=c[k][l];i<=n;i++){\n\tint sum=d[j][l]-d[i-1][l]-d[j][k-1]+d[i-1][k-1],sum2=0;\n\tif(j-i>=2&&l-k>=2) sum2=d[j-1][l-1]-d[i][l-1]-d[j-1][k]+d[i][k];\n\tif(c[k][l].second<sum-sum2) c[k][l]=P(i,sum-sum2);\n      }\n    }\n  }\n  for(int k=1;k<=n;k++){\n    for(int l=k+1;l<=n;l++){\n      int j=c[k][l].first;\n      for(int i=1;i<c[k][l].first;i++){\n\tint sum=d[j][l]-d[i-1][l]-d[j][k-1]+d[i-1][k-1],sum2=0;\n\tif(j-i>=2&&l-k>=2) sum2=d[j-1][l-1]-d[i][l-1]-d[j-1][k]+d[i][k];\n\tans=max(ans,sum-sum2);\n      }\n      for(int i=j;i<=n;i++){\n\tint sum=d[j][l]-d[i-1][l]-d[j][k-1]+d[i-1][k-1],sum2=0;\n\tif(j-i>=2&&l-k>=2) sum2=d[j-1][l-1]-d[i][l-1]-d[j-1][k]+d[i][k];\n\tans=max(ans,sum-sum2);\n      }\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\n#include<cstring>\nusing namespace std;\nint k[1000][1000], x[1000][1000], n, cnt, maxn = -10000000;\nint main() {\n\tcin >> n;\n\tfor (int i = 1; i <= n; i++) {\n\t\tfor (int j = 1; j <= n; j++) {\n\t\t\tscanf(\"%d\", &k[i][j]);\n\t\t}\n\t}\n\tfor (int i = 1; i <= n; i++) {\n\t\tcnt = 0;\n\t\tfor (int j = 1; j <= n; j++) {\n\t\t\tcnt += k[i][j];\n\t\t\tx[i][j] = cnt + x[i - 1][j];\n\t\t}\n\t}\n\tif (n <= 200) {\n\t\tfor (int i = 0; i < n; i++) {\n\t\t\tfor (int j = 0; j < n; j++) {\n\t\t\t\tfor (int k = i + 1; k <= n; k++) {\n\t\t\t\t\tfor (int l = j + 1; l <= n; l++) {\n\t\t\t\t\t\tif (k - i >= 3 && l - j >= 3) {\n\t\t\t\t\t\t\tmaxn = max(maxn, (x[i][j] + x[k][l] - x[i][l] - x[k][j]) - (x[i + 1][j + 1] + x[k - 1][l - 1] - x[i + 1][l - 1] - x[k - 1][j + 1]));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tmaxn = max(maxn, x[i][j] + x[k][l] - x[i][l] - x[k][j]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\telse {\n\t\tfor (int i = 0; i < n; i++) {\n\t\t\tfor (int j = 0; j < n; j++) {\n\t\t\t\tfor (int k = i + 1; k <= n; k++) {\n\t\t\t\t\tfor (int l = j + 1; l <= n; l++) {\n\t\t\t\t\t\tif (k - i >= 220 && l - j >= 220) {\n\t\t\t\t\t\t\tmaxn = max(maxn, (x[i][j] + x[k][l] - x[i][l] - x[k][j]) - (x[i + 1][j + 1] + x[k - 1][l - 1] - x[i + 1][l - 1] - x[k - 1][j + 1]));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tcout << maxn << endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#include <map>\n#define N 310\n#define INF (1e9)\n#define make make_pair\nusing namespace std;\ntypedef pair<int,int> P;\nint n,p[N][N],ans,d[N][N],sum,sum2;\nmap<P,P> m,t;\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  ans=-INF;\n  for(int i=1;i<=n;i++){\n    for(int j=i+1;j<=n;j++){\n      for(int k=1;k<=n;k++){\n\tfor(int l=k+1;l<=n;l++){\n\t  if(m.find(P(i,j))!=m.end()&&k>m[P(i,j)].first) continue;\n\t  if(t.find(P(k,l))!=t.end()&&i>t[P(k,l)].first) continue;\n\t  int sum=d[j][l]-d[i-1][l]-d[j][k-1]+d[i-1][k-1],sum2=0;\n\t  if(j-i>=2&&l-k>=2) sum2=d[j-1][l-1]-d[i][l-1]-d[j-1][k]+d[i][k];\n\t  ans=max(ans,sum-sum2);\n\t  if(m.find(P(i,j))==m.end()) m.insert(make(P(i,j),P(l,sum-sum2)));\n\t  else if(m[P(i,j)].second<sum-sum2) m[P(i,j)]=make(l,sum-sum2);\n\t  if(t.find(P(k,l))==t.end()) t.insert(make(P(k,l),P(j,sum-sum2)));\n\t  else if(t[P(k,l)].second<sum-sum2) t[P(k,l)]=make(j,sum-sum2);\n\t}\n      }\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#include <queue>\n#define N 300\nusing namespace std;\ntypedef pair<int,int> P;\nint n,p[N][N],s,ans,a1,a2,b1,b2,d[N][N];\npriority_queue<P> A,B;\n\nint main(){\n  cin>>n;\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++) cin>>p[i][j];\n  for(int i=0;i<n;i++){\n    s=0;\n    for(int j=0;j<n;j++) s+=p[j][i];\n    A.push(P(s,i));\n  }\n  for(int i=0;i<n;i++){\n    s=0;\n    for(int j=0;j<n;j++) s+=p[i][j];\n    B.push(P(s,i));\n  }\n  P t=A.top(); A.pop();\n  a1=t.second;\n  t=A.top(); A.pop();\n  a2=t.second;\n  t=B.top(); B.pop();\n  b1=t.second;\n  t=B.top(); B.pop();\n  b2=t.second;\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++) d[i][j]=p[i][j];\n  for(int i=0;i<n;i++)\n    for(int j=1;j<n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=1;i<n;i++)\n    for(int j=0;j<n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  for(int i=0;i<n;i++){\n    for(int j=0;j<n;j++){\n      for(int k=i;k<n;k++){\n\tfor(int l=j;l<n;l++){\n\t  if(i==k&&j==l) continue;\n\t  //if(!(a1==j||a2==j||a1==l||a2==l||b1==i||b2==i||b1==k||b2==k)) continue;\n\t  int sum=d[k][l];\n\t  if(i&&j) sum=sum-d[i-1][l]-d[k][j-1]+d[i-1][j-1];\n\t  else if(i) sum=sum-d[i-1][l];\n\t  else if(j) sum=sum-d[k][j-1];\n\t  if(k-i>=2&&l-j>=2){\n\t    int sum2=d[k-1][l-1];\n\t    if(i&&j) sum2=sum2-d[i][l-1]-d[k-1][j]+d[i][j];\n\t    else if(i) sum2=sum2-d[i][l-1];\n\t    else if(j) sum2=sum2-d[k-1][j];\n\t    ans=max(ans,sum-sum2);\n\t  }else ans=max(ans,sum);\n\t}\n      }\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <set>\n#include <tuple>\n\ntypedef std::tuple<int,int> P;\n\nconst int INF = 1001001001;\n\nint pixels[301][301];\nint sumH[301][301], sumV[301][301];\n\nint main(){\n    int N;\n    scanf(\"%d\", &N);\n\n    for(int i=1;i<=N;i++){\n        for(int j=1;j<=N;j++){\n            scanf(\"%d\", &pixels[i][j]);\n        }\n    }\n\n    for(int i=1;i<=N;i++){\n        for(int j=1;j<=N;j++){\n            sumH[i][j] += sumH[i][j-1] + pixels[i][j];\n            // printf(\"%d \", sumH[i][j]);\n        }\n        // puts(\"\");\n    }\n\n    // puts(std::string(40, '-').c_str());\n\n    for(int i=1;i<=N;i++){\n        for(int j=1;j<=N;j++){\n            sumV[i][j] += sumV[i-1][j] + pixels[i][j];\n            // printf(\"%d \", sumV[i][j]);\n        }\n        // puts(\"\");\n    }\n\n    int res = -INF;\n    for(int i=1;i<=N;i++){\n        for(int j=i+1;j<=N;j++){\n            std::set<P> set;\n            for(int k=1;k<=N;k++){\n                set.insert(std::make_tuple(-(sumH[i][k-1]+sumH[j][k-1]+sumV[j][k]-sumV[i-1][k]), k));\n            }\n\n            for(int k=1;k<=N;k++){\n                int x, idx;\n                std::tie(x, idx) = *set.begin();\n\n                for(;k<=idx;k++){\n                    res = std::max(res, -x-sumH[i][k]-sumH[j][k]+sumV[j][k]-sumV[i-1][k]);\n                    // printf(\"(;%d, %d) %d, %d, %d\\n\", i, j, x, idx, -x-sumH[i][k]-sumH[j][k]+sumV[j][k]-sumV[i-1][k]);                                 \n                }\n                \n                while(!set.empty()){\n                    int idx2;\n                    std::tie(std::ignore, idx2) = *set.begin();\n\n                    if(idx2 <= idx){set.erase(set.begin());}\n                    else{break;}\n                }\n            }\n        }\n\n        std::set<P> set;\n        for(int j=1;j<=N;j++){\n            set.insert(std::make_tuple(-sumH[i][j], j));\n        }\n\n        for(int j=1;j<=N;j++){\n            int x, idx;\n            std::tie(x, idx) = *set.begin();\n\n            for(;j<=idx;j++){\n                res = std::max(res, -x-sumH[i][j-1]);\n            }\n\n            while(!set.empty()){\n                int idx2;\n                std::tie(std::ignore, idx2) = *set.begin();\n\n                if(idx2 <= idx){set.erase(set.begin());}\n                else{break;}\n            }            \n        }\n    }\n\n    printf(\"%d\\n\", res);\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#define N 310\n#define INF (1e9)\nusing namespace std;\nint n,p[N][N],ans,c,b,ma,d[N][N];\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  ans=-INF;\n  for(int k=1;k<=n;k++){\n    for(int l=k+1;l<=n;l++){\n      b=c=1;\n      while(1){\n\tma=-INF;\n\tfor(int i=c+1;i<=n;i++){\n\t  int sum=d[i][l]-d[b-1][l]-d[i][k-1]+d[b-1][k-1],sum2=0;\n\t  if(i-b>=2&&l-k>=2) sum2=d[i-1][l-1]-d[b][l-1]-d[i-1][k]+d[b][k];\n\t  if(ma<sum-sum2) ma=sum-sum2,c=i;\n\t  ans=max(ans,sum-sum2);\n\t}\n\tfor(int i=b+1;i<c;i++){\n\t  int sum=d[i][l]-d[b-1][l]-d[i][k-1]+d[b-1][k-1],sum2=0;\n\t  if(i-b>=2&&l-k>=2) sum2=d[i-1][l-1]-d[b][l-1]-d[i-1][k]+d[b][k];\n\t  ans=max(ans,sum-sum2);\n\t}\n\tif(c==n) break;\n\tb=c;\n      }\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <set>\n#include <tuple>\n#include <algorithm>\n\ntypedef std::tuple<int,int> P;\n\nconst int INF = 1001001001;\n\nint pixels[301][301];\nint sumH[301][301], sumV[301][301];\nP _array[301];\n\nint main(){\n    int N;\n    scanf(\"%d\", &N);\n\n    for(int i=1;i<=N;i++){\n        for(int j=1;j<=N;j++){\n            scanf(\"%d\", &pixels[i][j]);\n        }\n    }\n\n    for(int i=1;i<=N;i++){\n        for(int j=1;j<=N;j++){\n            sumH[i][j] += sumH[i][j-1] + pixels[i][j];\n            // printf(\"%d \", sumH[i][j]);\n        }\n        // puts(\"\");\n    }\n\n    // puts(std::string(40, '-').c_str());\n\n    for(int i=1;i<=N;i++){\n        for(int j=1;j<=N;j++){\n            sumV[i][j] += sumV[i-1][j] + pixels[i][j];\n            // printf(\"%d \", sumV[i][j]);\n        }\n        // puts(\"\");\n    }\n\n    int res = -INF;\n    for(int i=1;i<=N;i++){\n        for(int j=i+1;j<=N;j++){\n            // std::set<P> set;\n            for(int k=1;k<=N;k++){\n                _array[k] = std::make_tuple(-(sumH[i][k-1]+sumH[j][k-1]+sumV[j][k]-sumV[i-1][k]), -k);\n            }\n\n            std::sort(_array+1, _array+1+N);\n            \n            for(int k=1,p=1;k<=N;k++){\n                int x, idx;\n                std::tie(x, idx) = _array[p];\n                idx = -idx;\n\n                for(;k<=idx;k++){\n                    res = std::max(res, k!=idx ? -x-sumH[i][k]-sumH[j][k]+sumV[j][k]-sumV[i-1][k] : -x-sumH[i][k-1]-sumH[j][k-1]);\n                    // printf(\"(;%d, %d, %d) %d, %d, %d, %d\\n\", i, j, k, x, idx, -x-sumH[i][k]-sumH[j][k]+sumV[j][k]-sumV[i-1][k], -x-sumH[i][k-1]-sumH[j][k-1]);                                 \n                }\n                \n                while(p <= N){\n                    int idx2;\n                    std::tie(std::ignore, idx2) = _array[p];\n                    idx2 = -idx2;\n\n                    if(idx2 <= idx){++p;}\n                    else{break;}\n                }\n            }\n        }\n\n        // std::set<P> set;\n        for(int j=1;j<=N;j++){\n            _array[j] = std::make_tuple(-sumH[i][j], -j);\n        }\n\n        std::sort(_array+1, _array+1+N);\n        \n        for(int j=1,p=1;j<=N;j++){\n            int x, idx;\n            std::tie(x, idx) = _array[p];\n            idx = -idx;\n\n            for(;j<=idx;j++){\n                res = std::max(res, -x-sumH[i][j-1]);\n            }\n\n            while(p <= N){\n                int idx2;\n                std::tie(std::ignore, idx2) = _array[p];\n                idx2 = -idx2;\n                \n                if(idx2 <= idx){++p;}\n                else{break;}\n            }            \n        }\n    }\n\n    printf(\"%d\\n\", res);\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<string>\n#include<iomanip>\n#include<cmath>\n#include<vector>\n#include<algorithm>\n\nusing namespace std;\n\n#define int long long\n#define rep(i,n) for(int i = 0; i < (n); i++)\n#define INF ((long long)1e18)\n#define MOD ((int)1e9+7)\n#define endl \"\\n\"\n\n#define yn(f) ((f)?\"Yes\":\"No\")\n#define YN(f) ((f)?\"YES\":\"NO\")\n\n#define MAX\n\nsigned main(){\n\tcin.tie(0);\n\tios::sync_with_stdio(false);\n\tcout<<fixed<<setprecision(10);\n\t\n\tint ans = -INF;\n\tint  N;\n\tvector<vector<int>> p, cum1, cum2;\n\t\n\tcin>>N;\n\t\n\tp.resize(N,vector<int>(N));\n\tcum1.resize(N+1,vector<int>(N+1,0));\n\t// cum2.resize(N,vector<int>(N+1,0));\n\t\n\tfor(int i = 0; i < N; i++){\n\t\tfor(int j = 0; j < N; j++){\n\t\t\tcin>>p[i][j];\n\t\t\tcum1[i][j+1] += cum1[i][j] + p[i][j];\n\t\t}\n\t}\n\t// for(int i = 0; i < N; i++){\n\t\t// for(int j = 0; j < N; j++){\n\t\t\t// cum2[i+1][j] += cum2[i][j] + p[i][j];\n\t\t// }\n\t// }\n\t\n\tfor(int i = 0; i < N; i++){\n\t\tfor(int j = i+1; j < N; j++){\n\t\t\tint sum = -INF;\n\t\t\tfor(int k = 0; k < N; k++){\n\t\t\t\t// bool flag = false;\n\t\t\t\tif(sum + p[k][i] + p[k][j] < cum1[k][j+1]-cum1[k][i]){\n\t\t\t\t\tsum = cum1[k][j+1]-cum1[k][i];\n\t\t\t\t\tans = max(sum, ans);\n\t\t\t\t} else {\n\t\t\t\t\tsum += p[k][i] + p[k][j];\n\t\t\t\t\tans = max(ans, sum + cum1[k][j] - cum1[k][i+1]);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// cout<<i<<\" \"<<j<<\" \"<<k<<\" ans = \"<<ans<<\" sum = \"<<sum<<endl;\n\t\t\t}\n\t\t}\n\t}\n\tfor(int i = 0; i < N; i++){\n\t\tint sum = -INF;\n\t\tfor(int k = 0; k < N; k++){\n\t\t\tsum = max(sum + p[k][i], p[k][i]);\n\t\t\tans = max(sum, ans);\n\t\t}\n\t}\n\t\n\tcout<<ans<<endl;\n\t\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "//0310\n#include <bits/stdc++.h>\n\nusing namespace std;\n\n#define FOR(i,a,b) for(int i=(a);i<(b);i++)\n#define REP(i,a) FOR(i,0,a)\n\nconst int MAX_N=300;\n\nconst int INF=1e8;\n\nint N;\nint p[MAX_N+1][MAX_N+1];\n\nint dp[MAX_N+1][MAX_N+1][MAX_N+1],dp2[MAX_N+1][MAX_N+1][MAX_N+2];\n\nint main(){\n\tscanf(\"%d\",&N);\n\tFOR(i,1,N+1){\n\t\tFOR(j,1,N+1){\n\t\t\tscanf(\"%d\",&p[i][j]);\n\t\t}\n\t}\n\tFOR(i,1,N+1){\n\t\tFOR(j,1,N+1){\n\t\t\tfor (int k=i;k>=1;k--){\n\t\t\t\tif (i==k){\n\t\t\t\t\tdp2[i][j][k]=p[i][j];\n\t\t\t\t}else{\n\t\t\t\t\tdp2[i][j][k]=dp2[i][j][k+1]+p[k][j];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tint res=-INF;\n\tFOR(i,1,N+1){\n\t\tFOR(j,1,N+1){\n\t\t\tFOR(k,1,i+1){\n\t\t\t\tdp[i][j][k]=dp2[i][j][k]+dp[i][j-1][k]-dp2[i-1][j-1][k+1];\n\t\t\t\tres=max(res,dp[i][j][k]);\n\t\t\t}\n\t\t}\n\t}\n\tprintf(\"%d\\n\",res);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\nusing namespace std;\nint k[1000][1000], x[1000][1000], n, cnt, maxn = -10000000;\nint main() {\n\tcin >> n;\n\tfor (int i = 1; i <= n; i++) {\n\t\tfor (int j = 1; j <= n; j++) {\n\t\t\tcin >> k[i][j];\n\t\t}\n\t}\n\tfor (int i = 1; i <= n; i++) {\n\t\tcnt = 0;\n\t\tfor (int j = 1; j <= n; j++) {\n\t\t\tcnt += k[i][j];\n\t\t\tx[i][j] = cnt + x[i - 1][j];\n\t\t}\n\t}\n\tif (n <= 200) {\n\t\tfor (int i = 0; i < n; i++) {\n\t\t\tfor (int j = 0; j < n; j++) {\n\t\t\t\tfor (int k = i + 1; k <= n; k++) {\n\t\t\t\t\tfor (int l = j + 1; l <= n; l++) {\n\t\t\t\t\t\tif (k - i >= 3 && l - j >= 3) {\n\t\t\t\t\t\t\tmaxn = max(maxn, (x[i][j] + x[k][l] - x[i][l] - x[k][j]) - (x[i + 1][j + 1] + x[k - 1][l - 1] - x[i + 1][l - 1] - x[k - 1][j + 1]));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tmaxn = max(maxn, x[i][j] + x[k][l] - x[i][l] - x[k][j]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\telse {\n\t\tfor (int i = 0; i < n; i++) {\n\t\t\tfor (int j = 0; j < n; j++) {\n\t\t\t\tfor (int k = i + 1; k <= n; k++) {\n\t\t\t\t\tfor (int l = j + 1; l <= n; l++) {\n\t\t\t\t\t\tif (k - i >= 200 && l - j >= 200) {\n\t\t\t\t\t\t\tmaxn = max(maxn, (x[i][j] + x[k][l] - x[i][l] - x[k][j]) - (x[i + 1][j + 1] + x[k - 1][l - 1] - x[i + 1][l - 1] - x[k - 1][j + 1]));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tcout << maxn << endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include <vector>\n#include <cstdio>\n#include <algorithm>\nusing namespace std;\nint main(){\n\tint N,r=0;\n\tscanf(\"%d\",&N);\n\tvector<vector<int> >v(N+1);\n\tv[0].resize(N);\n\tfor(int i=1;i<=N;i++){\n\t\tv[i].resize(N+1);\n\t\tfor(int j=1;j<=N;j++)scanf(\"%d\",&v[i][j]);\n\t}\n\tfor(int i=0;i<N;i++)for(int j=0;j<=N;j++)v[i+1][j]+=v[i][j];\n\tfor(int i=0;i<=N;i++)for(int j=0;j<N;j++)v[i][j+1]+=v[i][j];\n\tfor(int i0=0;i0<N;i0++)for(int i1=i0+1;i1<=N;i1++)for(int j0=0;j0<N;j0++)for(int j1=j0+1;j1<=N;j1++){\n\t\tint n=v[i0][j0]-v[i1][j0]-v[i0][j1]+v[i1][j1];\n\t\tint m=0;\n\t\tif(i1-i0>2&&j1-j0>2)m=v[i0+1][j0+1]-v[i1-1][j0+1]-v[i0+1][j1-1]+v[i1-1][j1-1];\n\t\tr=max(r,n-m);\n\t}\n\tprintf(\"%d\\n\",r);\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n\n#define REP(i,s,n) for(int i=s;i<n;i++)\n#define rep(i,n) REP(i,0,n)\n\nusing namespace std;\n\nconst int IINF = INT_MAX;\nconst int MAX = 310;\nint n, p[MAX][MAX],sum[2][MAX][MAX]; // 0 : h, 1 : w\n\nvoid compute() {\n  rep(y,n) {\n    sum[0][y][0] = p[y][0];\n    REP(x,1,n) {\n      sum[0][y][x] = sum[0][y][x-1] + p[y][x];\n    }\n  }\n  rep(x,n) {\n    sum[1][0][x] = p[0][x];\n    REP(y,1,n) {\n      sum[1][y][x] = sum[1][y-1][x] + p[y][x];\n    }\n  }\n  int maxi = -IINF;\n  rep(y1,n) REP(y2,y1+1,n) {\n    int maxi2 = 0;\n    int v = sum[0][y1][0] + sum[0][y2][0];\n    v += sum[1][y2][0];\n    if( y1-1 >= 0 ) v -= sum[1][y1-1][0];\n    v -= p[y1][0];\n    v -= p[y2][0];\n    maxi = max(maxi,v);\n    REP(x,1,n) {\n      int t = sum[1][y2][x-1];\n      if( y1-1 >= 0 ) t -= sum[1][y1-1][x-1];\n      t -= p[y1][x-1];\n      t -= p[y2][x-1];\n      if( x-2 >= 0 ) t -= sum[0][y1][x-2];\n      if( x-2 >= 0 ) t -= sum[0][y2][x-2];\n      maxi2 = max(maxi2,t);\n      \n      int v = sum[0][y1][x] + sum[0][y2][x];\n      v += sum[1][y2][x];\n      if( y1-1 >= 0 ) v -= sum[1][y1-1][x];\n      v -= p[y1][x];\n      v -= p[y2][x];\n      maxi = max(maxi,v+maxi2);\n    }\n  }\n\n  rep(y1,n) {\n    int mini = 0;\n    rep(x,n) {\n      maxi = max(maxi,sum[0][y1][x]-mini);\n      mini = min(mini,sum[0][y1][x]);\n    }\n  }\n  \n  cout << maxi << endl;\n}\n\nint main() {\n  scanf(\"%d\",&n);\n  rep(i,n) rep(j,n) scanf(\" %d\",&p[i][j]);\n  compute();\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\nint sum(const vector<vector<int>>& p, int t, int l, int b, int r) {\n  return p[b][r] - p[b][l - 1] - p[t - 1][r] + p[t - 1][l - 1];\n}\nint frame(const vector<vector<int>>& p, int t, int l, int b, int r) {\n  int result = sum(p, t, l, b, r);\n  if(b - t > 1 && r - l > 1) result -= sum(p, t + 1, l + 1, b - 1, r - 1);\n  return result;\n}\n\nint main() {\n  int N;\n  cin >> N;\n  vector<vector<int>> p(N, vector<int>(N));\n  for(auto& i: p) for(auto& j: i) cin >> j;\n  for(auto& i: p) i.insert(begin(i), 0);\n  p.insert(begin(p), vector<int>(N + 1, 0));\n\n  for(int i = 1; i <= N; ++i) for(int j = 2; j <= N; ++j) p[i][j] += p[i][j - 1];\n  for(int i = 2; i <= N; ++i) for(int j = 1; j <= N; ++j) p[i][j] += p[i - 1][j];\n\n  int answer = 0;\n  for(int top = 1; top <= N - 1; ++top) for(int bottom = top + 1; bottom <= N; ++bottom) {\n    int left = 1, right = 1;\n    for(int right = 1; right <= N; ++right) {\n      while(left <= right) {\n        if(left == N) break;\n        int current = frame(p, top, left, bottom, right);\n        int next = frame(p, top, left + 1, bottom, right);\n        answer = max({answer, current, next});\n        if(current > next) break;\n        ++left;\n      }\n    }\n  }\n  cout << answer << endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#include <map>\n#define N 310\n#define ma make_pair\n#define bun (k-i>=2&&l-i>=2)\nusing namespace std;\ntypedef pair<int,int> P;\nint n,p[N][N],ans,d[N][N],sum,sum2;\nmap<P,P> m,t;\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  int cnt=0;\n  for(int i=1;i<=n;i++){\n    for(int j=1;j<=n;j++){\n      for(int k=n;k>=i;k--){\n\tfor(int l=n;l>=j;l--){\n\t  if(bun&&t.find(P(i,k))!=t.end()&&l>t[P(i,k)].first) continue;\n\t  if(bun&&m.find(P(j,l))!=m.end()&&k>m[P(j,l)].first) continue;\n\t  cnt++;\n\t  sum2=0;\n\t  sum=d[k][l]-d[i-1][l]-d[k][j-1]+d[i-1][j-1];\n\t  if(k-i>=2&&l-j>=2) sum2=d[k-1][l-1]-d[i][l-1]-d[k-1][j]+d[i][j];\n\t  ans=max(ans,sum-sum2);\n\t  if(bun&&m.find(P(j,l))==m.end()) m.insert(ma(P(j,l),P(k,ans)));\n\t  else if(bun&&m[P(j,l)].second<sum) m[P(j,l)]=ma(k,sum);\n\t  if(bun&&t.find(P(i,k))==t.end()) t.insert(ma(P(i,k),P(l,ans)));\n\t  else if(bun&&t[P(i,k)].second<sum) t[P(i,k)]=ma(l,sum);\n\t}\n      }\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstring>\nusing namespace std;\n\nint main(){\n  int n,x[302][302]={},y[302][302]={};\n  cin>>n;\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++)cin>>y[i][j],x[i][j]=y[i][j];\n  \n  int ans=max(y[0][n-1],y[n-1][0]);\n  for(int i=0;i<n;i++)\n    for(int j=n-2;j>=0;j--) {\n      x[i][j]+=x[i][j+1];\n      y[j][i]+=y[j+1][i];\n      ans=max(ans,max(y[j][i],x[i][j]));\n    }\n\n  int sum[302][302],K[2][302][302]={};\n  for(int i=0;i<=n;i++)\n    for(int j=0;j<=n;j++) sum[i][j]=-100000000;\n\n\n  int t=0;\n  while(1){\n    t++;\n    for(int i=0;i<n;i++) //yoko\n      for(int j=i+1;j<n;j++) {//yoko\n\tint a=K[t%2][i][j];\n\tK[(t+1)%2][i][j]=a;\n\tsum[i][j]=-100000000;\n\tfor(int k=a+1;k<n;k++) { //tate\n\t  int X=(x[a][i]-x[a][j+1])+(x[k][i]-x[k][j+1]);\n\t  int Y=(y[a+1][i]-y[k][i])+(y[a+1][j]-y[k][j]);\n\t  if(sum[i][j]<=X+Y)sum[i][j]=X+Y,K[(t+1)%2][i][j]=k;\n\t  ans=max(ans,sum[i][j]);\n\t}\n      }\n\n    int f=1;\n    for(int i=0;i<n;i++) //yoko\n      for(int j=i+1;j<n;j++) //yoko\n\tfor(int k=K[t%2][i][j]+1;k<K[(t+1)%2][i][j];k++){\n\t  f=0;\n\t  int X=(x[k][i+1]-x[k][j])-(x[k-1][i]-x[k-1][j+1]);\n\t  sum[i][j]+=X;\n\t  ans=max(ans,sum[i][j]);\n\t}\n    if(f)break;\n  }\n  cout <<ans<<endl;\n\t  \n  return 0; \n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#define N 310\n#define INF (1e9)\nusing namespace std;\nint n,p[N][N],ans,c,b,ma,d[N][N];\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  ans=p[1][1];\n  for(int k=1;k<=n;k++){\n    for(int l=k;l<=n;l++){\n      b=c=1;\n      while(b!=n){\n\tma=-INF;\n\tfor(int i=c+1;i<=n;i++){\n\t  int sum=d[i][l]-d[b-1][l]-d[i][k-1]+d[b-1][k-1],sum2=0;\n\t  if(i-b>=2&&l-k>=2) sum2=d[i-1][l-1]-d[b][l-1]-d[i-1][k]+d[b][k];\n\t  if(ma<=sum-sum2) ma=sum-sum2,c=i;\n\t}\n\tans=max(ans,ma);\n\tfor(int i=b;i<=c+1;i++){\n\t  int sum=d[i][l]-d[b-1][l]-d[i][k-1]+d[b-1][k-1],sum2=0;\n\t  if(i-b>=2&&l-k>=2) sum2=d[i-1][l-1]-d[b][l-1]-d[i-1][k]+d[b][k];\n\t  ans=max(ans,sum-sum2);\n\t}\n\tb=c;\n      }\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#include <queue>\n#define N 300\nusing namespace std;\ntypedef pair<int,int> P;\nint n,p[N][N],s,ans,a1,a2,b1,b2,d[N][N];\npriority_queue<P> A,B;\n\nint main(){\n  cin>>n;\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++) cin>>p[i][j];\n  for(int i=0;i<n;i++){\n    s=0;\n    for(int j=0;j<n;j++) s+=p[j][i];\n    A.push(P(s,i));\n  }\n  for(int i=0;i<n;i++){\n    s=0;\n    for(int j=0;j<n;j++) s+=p[i][j];\n    B.push(P(s,i));\n  }\n  P t=A.top(); A.pop();\n  a1=t.second;\n  t=A.top(); A.pop();\n  a2=t.second;\n  t=B.top(); B.pop();\n  b1=t.second;\n  t=B.top(); B.pop();\n  b2=t.second;\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++) d[i][j]=p[i][j];\n  for(int i=0;i<n;i++)\n    for(int j=1;j<n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=1;i<n;i++)\n    for(int j=0;j<n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  for(int i=0;i<n;i++){\n    for(int j=0;j<n;j++){\n      for(int k=i;k<n;k++){\n\tfor(int l=j;l<n;l++){\n\n\t  //if(!(a1==j||a2==j||a1==l||a2==l||b1==i||b2==i||b1==k||b2==k)) continue;\n\t  int sum=d[k][l];\n\t  if(i&&j) sum=sum-d[i-1][l]-d[k][j-1]+d[i-1][j-1];\n\t  else if(i) sum=sum-d[i-1][l];\n\t  else if(j) sum=sum-d[k][j-1];\n\t  if(k-i>=2&&l-j>=2){\n\t    int sum2=d[k-1][l-1];\n\t    if(i&&j) sum2=sum2-d[i][l-1]-d[k-1][j]+d[i][j];\n\t    else if(i) sum2=sum2-d[i][l-1];\n\t    else if(j) sum2=sum2-d[k-1][j];\n\t    ans=max(ans,sum-sum2);\n\t  }else ans=max(ans,sum);\n\t}\n      }\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <cstring>\n#include <algorithm>\nusing namespace std;\n\nint n;\nint p[501][501];\nint sum[502][502];\n\nint main(void){\n\tscanf(\"%d\",&n);\n\tfor(int i=0;i<n;i++){\n\t\tfor(int j=0;j<n;j++){\n\t\t\tscanf(\"%d\",&p[j][i]);\n\t\t}\n\t}\n\tfor(int i=0;i<n;i++){\n\t\tfor(int j=0;j<n;j++){\n\t\t\tsum[j+1][i]=sum[j][i]+p[j][i];\n\t\t}\n\t}\n\tint res=-1001;\n\tfor(int l=0;l<n;l++){\n\t\tfor(int r=l+1;r<=n;r++){\n\t\t\tint now=sum[r][0]-sum[l][0];\n\t\t\tres=max(res,now);\n\t\t\tfor(int i=1;i<n;i++){\n\t\t\t\tres=max(res,now+sum[r][i]-sum[l][i]);\n\t\t\t\tint next=sum[r][i]-sum[r-1][i]+sum[l+1][i]-sum[l][i];\n\t\t\t\tif(r==l+1)next=sum[r][i]-sum[r-1][i];\n\t\t\t\tnow=max(now+next,sum[r][i]-sum[l][i]);\n\t\t\t}\n\t\t}\n\t}\n\tprintf(\"%d\\n\",res);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <algorithm>\n#include <cassert>\n\nint N;\nint p[301][301], q[301][301];\n\nint sumY(int x, int y1, int y2){\n    assert(y1 > 0);\n    return p[y2][x] - p[y1-1][x];\n}\n\nint sumX(int y, int x1, int x2){\n    assert(x1 > 0);\n    return q[y][x2] - q[y][x1-1];\n}\n\nint sum51(int x1, int x2, int y1, int y2){\n    return sumX(y1, x1, x2-1) + sumX(y2, x1, x2-1) + sumY(x2, y1, y2);\n}\n\nint sum52(int x1, int x2, int y1, int y2){\n    return sumY(x1, y1, y2-1) + sumY(x2, y1, y2-1) + sumX(y2, x1, x2);\n}\n\nint sumFrame(int x1, int x2, int y1, int y2){\n    return sumY(x1, y1, y2) + sum51(x1+1, x2, y1, y2);\n}\n\n\nint main(){\n    scanf(\"%d\", &N);\n\n    for(int i=1;i<=N;i++){\n        for(int j=1;j<=N;j++){\n            scanf(\"%d\", &p[i][j]);\n            q[i][j] = p[i][j];\n        }\n    }\n\n    for(int i=1;i<=N;i++){\n        for(int j=1;j<=N;j++){\n            p[i][j] += p[i-1][j];\n            q[i][j] += q[i][j-1];\n        }\n    }\n\n    int res = -1001001001;\n    for(int i=1;i<=N;i++){\n        for(int j=1;j<=N;j++){\n            for(int k=j;k<=N;k++){\n                res = std::max({res, sumX(i, j, k), sumY(i, j, k)});\n            }\n        }\n    }\n\n    for(int i=1;i<=N;i++){\n        for(int j=i+1;j<=N;j++){\n            int index = 1;\n            for(int k=1,l=2;k<N;){\n                while(l < N && sum51(k, l, i, j) <= sum51(k, l+1, i, j)){\n                    l++;\n                }\n                res = std::max(res, sumFrame(index, l, i, j));\n\n                for(;k<l;k++){\n                    int x = sumFrame(k, l, i, j);\n                    if(x > res){\n                        res = x;\n                        index = k;\n                    }\n                }\n                l++;\n            }\n        }\n    }\n\n    for(int i=1;i<=N;i++){\n        for(int j=i+1;j<=N;j++){\n            int index = 1;\n            for(int k=1,l=2;k<N;){\n                while(l < N && sum52(i, j, k, l) <= sum52(i, j, k, l+1)){\n                    l++;\n                }\n                res = std::max(res, sumFrame(i, j, index, l));\n\n                for(;k<l;k++){\n                    int x = sumFrame(i, j, k, l);\n                    if(x > res){\n                        res = x;\n                        index = k;\n                    }\n                }\n                l++;\n            }\n        }\n    }\n\n    printf(\"%d\\n\", res);\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#include <map>\n#define N 310\n#define ma make_pair\nusing namespace std;\ntypedef pair<int,int> P;\nint n,p[N][N],ans,d[N][N],sum,sum2;\nmap<P,P> m,t;\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  int cnt=0;\n  for(int i=1;i<=n;i++){\n    for(int j=1;j<=n;j++){\n      for(int k=n;k>=i;k--){\n\tfor(int l=n;l>=j;l--){\n\t  if(t.find(P(i,k))!=t.end()&&l>t[P(i,k)].first) break;\n\t  if(m.find(P(j,l))!=m.end()&&k>m[P(j,l)].first) break;\n\t  cnt++;\n\t  sum2=0;\n\t  sum=d[k][l]-d[i-1][l]-d[k][j-1]+d[i-1][j-1];\n\t  if(k-i>=2&&l-j>=2) sum2=d[k-1][l-1]-d[i][l-1]-d[k-1][j]+d[i][j];\n\t  ans=max(ans,sum-sum2);\n\t  if(m.find(P(j,l))==m.end()) m.insert(ma(P(j,l),P(k,ans)));\n\t  else if(m[P(j,l)].second<sum) m[P(j,l)]=ma(k,sum);\n\t  if(t.find(P(i,k))==t.end()) t.insert(ma(P(i,k),P(l,ans)));\n\t  else if(t[P(i,k)].second<sum) t[P(i,k)]=ma(l,sum);\n\t}\n      }\n    }\n  }\n  //cout<<cnt<<endl;\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#define N 310\n#define INF (1e9)\nusing namespace std;\nint n,p[N][N],ans,c,b,ma,d[N][N];\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  ans=p[0][0];\n  for(int k=1;k<=n;k++){\n    for(int l=k+1;l<=n;l++){\n      b=c=1;\n      while(1){\n\tma=-INF;\n\tfor(int i=c+1;i<=n;i++){\n\t  int sum=d[i][l]-d[b-1][l]-d[i][k-1]+d[b-1][k-1],sum2=0;\n\t  if(i-b>=2&&l-k>=2) sum2=d[i-1][l-1]-d[b][l-1]-d[i-1][k]+d[b][k];\n\t  if(ma<sum-sum2) ma=sum-sum2,c=i;\n\t}\n\tans=max(ans,ma);\n\tfor(int i=b+1;i<c;i++){\n\t  int sum=d[i][l]-d[b-1][l]-d[i][k-1]+d[b-1][k-1],sum2=0;\n\t  if(i-b>=2&&l-k>=2) sum2=d[i-1][l-1]-d[b][l-1]-d[i-1][k]+d[b][k];\n\t  ans=max(ans,sum-sum2);\n\t}\n\tif(b==n) break;\n\tb=c;\n      }\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#include <map>\n#define N 310\n#define ma make_pair\nusing namespace std;\ntypedef pair<int,int> P;\nint n,p[N][N],ans,d[N][N],sum,sum2;\nmap<P,P> m,t;\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  int cnt=0;\n  for(int i=1;i<=n;i++){\n    for(int j=1;j<=n;j++){\n      for(int k=n;k>=i;k--){\n\tfor(int l=n;l>=j;l--){\n\t  if(t.find(P(i,k))!=t.end()&&l>t[P(i,k)].first) continue;\n\t  if(m.find(P(j,l))!=m.end()&&k>m[P(j,l)].first) continue;\n\t  cnt++;\n\t  sum2=0;\n\t  sum=d[k][l]-d[i-1][l]-d[k][j-1]+d[i-1][j-1];\n\t  if(k-i>=2&&l-j>=2) sum2=d[k-1][l-1]-d[i][l-1]-d[k-1][j]+d[i][j];\n\t  ans=max(ans,sum-sum2);\n\t  if(m.find(P(j,l))==m.end()) m.insert(ma(P(j,l),P(k,ans)));\n\t  else if(m[P(j,l)].second<ans) m[P(j,l)]=ma(k,ans);\n\t  if(t.find(P(i,k))==t.end()) t.insert(ma(P(i,k),P(l,ans)));\n\t  else if(t[P(i,k)].second<ans) t[P(i,k)]=ma(l,ans);\n\t}\n      }\n    }\n  }\n  //    cout<<cnt<<endl;\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#define N 310\n#define INF (2e9)\nusing namespace std;\nint n,p[N][N],ans,c,b,ma,d[N][N];\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  ans=p[0][0];\n  for(int k=1;k<=n;k++){\n    for(int l=k+1;l<=n;l++){\n      b=c=1;\n      while(1){\n\tma=-INF;\n\tfor(int i=c+1;i<=n;i++){\n\t  int sum=d[i][l]-d[b-1][l]-d[i][k-1]+d[b-1][k-1],sum2=0;\n\t  if(i-b>=2&&l-k>=2) sum2=d[i-1][l-1]-d[b][l-1]-d[i-1][k]+d[b][k];\n\t  if(ma<sum-sum2) ma=sum-sum2,c=i;\n\t}\n\tans=max(ans,ma);\n\tfor(int i=b+1;i<c;i++){\n\t  int sum=d[i][l]-d[b-1][l]-d[i][k-1]+d[b-1][k-1],sum2=0;\n\t  if(i-b>=2&&l-k>=2) sum2=d[i-1][l-1]-d[b][l-1]-d[i-1][k]+d[b][k];\n\t  ans=max(ans,sum-sum2);\n\t}\n\tif(c==n) break;\n\tb=c;\n      }\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\n#include<cstring>\nusing namespace std;\nint k[1000][1000], x[1000][1000], n, cnt, maxn = -10000000;\nint main() {\n\tcin >> n;\n\tfor (int i = 1; i <= n; i++) {\n\t\tfor (int j = 1; j <= n; j++) {\n\t\t\tscanf(\"%d\", &k[i][j]);\n\t\t}\n\t}\n\tfor (int i = 1; i <= n; i++) {\n\t\tcnt = 0;\n\t\tfor (int j = 1; j <= n; j++) {\n\t\t\tcnt += k[i][j];\n\t\t\tx[i][j] = cnt + x[i - 1][j];\n\t\t}\n\t}\n\tif (n <= 200) {\n\t\tfor (int i = 0; i < n; i++) {\n\t\t\tfor (int j = 0; j < n; j++) {\n\t\t\t\tfor (int k = i + 1; k <= n; k++) {\n\t\t\t\t\tfor (int l = j + 1; l <= n; l++) {\n\t\t\t\t\t\tif (k - i >= 3 && l - j >= 3) {\n\t\t\t\t\t\t\tmaxn = max(maxn, (x[i][j] + x[k][l] - x[i][l] - x[k][j]) - (x[i + 1][j + 1] + x[k - 1][l - 1] - x[i + 1][l - 1] - x[k - 1][j + 1]));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tmaxn = max(maxn, x[i][j] + x[k][l] - x[i][l] - x[k][j]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\telse {\n\t\tfor (int i = 0; i < n; i++) {\n\t\t\tfor (int j = 0; j < n; j++) {\n\t\t\t\tfor (int k = i + 1; k <= n; k++) {\n\t\t\t\t\tif (k - i >= 180) {\n\t\t\t\t\t\tfor (int l = j + 1; l <= n; l++) {\n\t\t\t\t\t\t\tif (l - j >= 180) {\n\t\t\t\t\t\t\t\tmaxn = max(maxn, (x[i][j] + x[k][l] - x[i][l] - x[k][j]) - (x[i + 1][j + 1] + x[k - 1][l - 1] - x[i + 1][l - 1] - x[k - 1][j + 1]));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tcout << maxn << endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\nint INF=1e9;\nint n;\nint t[301][301];\nint u[301][301];\n\nint sum(int ai,int aj,int bi,int bj){\n  ai--,aj--;\n  return u[bi][bj]-u[ai][bj]-u[bi][aj]+u[ai][aj];\n}\n\nint calc(int l,int r){\n\n  int A[301]={};\n  int B[301]={};\n  for(int i=1;i<=n;i++){\n    A[i]=t[l][i];\n    if(l<r)A[i]+=t[r][i];\n    if(l+1<r)B[i]=sum(l+1,i,r-1,i);\n  }\n  int res=-INF;\n  int dp[301]={};\n  for(int i=1;i<=n;i++){\n    dp[i]=A[i]+B[i];\n    if(i>1)dp[i]=max(dp[i],dp[i-1]+A[i]);\n    res=max(res,dp[i-1]+A[i]+B[i]);\n  }\n  return res;\n}\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++){\n    for(int j=1;j<=n;j++){\n      cin>>t[i][j];\n      u[i][j]=t[i][j]+u[i-1][j]+u[i][j-1]-u[i-1][j-1];\n    }\n  }\n  int ans=-INF;\n  for(int i=1;i<=n;i++){\n    for(int j=1;j<=n;j++){\n      ans=max(ans,calc(i,j));\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\nint p[333][333];\nint yoko[333][333];\nint tate[333][333];\nint dp[301][301][301];\n\nsigned main(){\n  int n;\n  cin>>n;\n\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++)\n      cin>>p[i][j];\n\n  for(int i=0;i<n;i++){\n    int sum=0;\n    for(int j=0;j<n;j++){\n      sum+=p[i][j];\n      yoko[i][j]=sum;\n    }\n    sum=0;\n    for(int j=0;j<n;j++){\n      sum+=p[j][i];\n      tate[j][i]=sum;\n    }\n  }\n  int INF=100000000;\n  fill_n(**dp,333*333*333,INF);\n  for(int i=0;i<n;i++){\n    for(int j=i;j<n;j++){\n      for(int k=n-1;k>=0;k--){\n\tdp[i][j][k]=yoko[i][k]+yoko[j][k]+tate[j][k]-tate[i][k]-p[j][k];\n\tif(i==j){\n\t  dp[i][j][k]-=yoko[i][k];\n\t  dp[i][j][k]+=p[j][k];\n\t}\n\tif(k<n-1)dp[i][j][k]=max(dp[i][j][k],dp[i][j][k+1]);\n\t//\tcout<<i<<\" \"<<j<<\" \"<<k<<\" \"<<dp[i][j][k]<<endl;\n      }\n    }\n  }\n  int ans=-INF;\n  for(int i=0;i<n;i++){\n    for(int j=i;j<n;j++){\n      for(int k=0;k<n;k++){\n\tint sum=tate[j][k]-tate[i][k]+p[i][k];\n\tif(k<n-1){\n\t  int tmp=sum;\n\t  tmp+=dp[i][j][k+1];\n\t  tmp-=(yoko[i][k]+yoko[j][k]);\n\t  if(i==j)tmp+=yoko[i][k];\n\t  sum=max(sum,tmp);\n\t}\n\tans=max(ans,sum);\n\t//\tcout<<i<<\" \"<<j<<\" \"<<k<<\" \"<<ans<<endl;\n      }\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#define N 310\nusing namespace std;\ntypedef pair<int,int> P;\nint n,p[N][N],s,ans,a1,a2,b1,b2,d[N][N],A[N],B[N],C[N],D[N];\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++){\n    s=0;\n    for(int j=1;j<=n;j++) s+=p[j][i];\n    A[i]=C[i]=s;\n  }\n  for(int i=1;i<=n;i++){\n    s=0;\n    for(int j=1;j<=n;j++) s+=p[i][j];\n    B[i]=D[i]=s;\n  }\n  sort(C+1,C+n+1);\n  sort(D+1,D+n+1);\n  reverse(C+1,C+n+1);\n  reverse(D+1,D+n+1);\n  if(n!=1){\n    for(int i=1;i<=n;i++)\n      for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n    for(int i=1;i<=n;i++)\n      for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n    for(int i=2;i<=n;i++)\n      for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n    for(int i=1;i<=n;i++){\n      for(int j=1;j<=n;j++){\n\tfor(int k=i+1;k<=n;k++){\n\t  for(int l=j+1;l<=n;l++){\n\t    int a1=C[1],a2=C[2],b1=D[1],b2=D[2];\n\t    //if(!(a1==A[j]||a2==A[j]||a1==A[l]||a2==A[l]||b1==B[i]||b2==B[i]||b1==B[k]||b2==B[k])) continue;\n\t    int sum=d[k][l]-d[i-1][l]-d[k][j-1]+d[i-1][j-1];\n\t    int sum2=d[k-1][l-1]-d[i][l-1]-d[k-1][j]+d[i][j];\n\t    if(k-i>=2&&l-j>=2) ans=max(ans,sum-sum2);\n\t    else ans=max(ans,sum);\n\t  }\n\t}\n      }\n    }\n    cout<<ans<<endl;\n  }else cout<<p[0][0]<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include \"bits/stdc++.h\"\n#include<unordered_map>\n#include<unordered_set>\n#pragma warning(disable:4996)\nusing namespace std;\nusing ld = long double;\nconst ld eps = 1e-9;\n\n//// < \"d:\\d_download\\visual studio 2015\\projects\\programing_contest_c++\\debug\\a.txt\" > \"d:\\d_download\\visual studio 2015\\projects\\programing_contest_c++\\debug\\b.txt\"\n\nint getsum(const int l, const int r, const int u, const int d, vector<vector<int>>&sums) {\n\tint num= sums[d][r] - sums[d][l] - sums[u][r] + sums[u][l];\n\treturn num;\n}\n\nint main() {\n\t\n\tint N; cin >> N;\n\tvector<vector<int>>field(N+1, vector<int>(N+1)),sums(N+1,vector<int>(N+1));\n\tfor (int i = 1; i <= N; ++i) {\n\t\tfor (int j = 1; j <= N; ++j) {\n\t\t\tcin >> field[i][j];\n\t\t\tsums[i][j] = field[i][j];\n\t\t}\n\t}\n\tfor (int i = 1; i <= N; ++i) {\n\t\tfor (int j = 1; j <= N; ++j) {\n\t\t\tsums[i][j] += sums[i - 1][j] + sums[i][j - 1] - sums[i - 1][j - 1];\n\t\t}\n\t}\n\tint ans = 0;\n\tfor (int u = 0; u <= N; ++u) {\n\t\tfor (int d = u + 2; d <= N; ++d) {\n\t\t\tvector<int>kakko0(N),kakko1(N);\n\t\t\tint minus = getsum(0, N, u, u+1,sums)+getsum(0,N,d-1,d,sums);\n\t\t\tfor (int k = 0; k < N; ++k) {\n\t\t\t\tkakko0[k] = getsum(0, k+1, u, d,sums) - getsum(0, k, u + 1, d - 1,sums);\n\t\t\t\tkakko1[k] = getsum(k, N, u, d, sums) - getsum(k+1, N, u + 1, d - 1, sums);\n\t\t\t}\n\t\t\tint  j = 0;\n\t\t\tfor (int i = 1; i < N; ++i) {\n\t\t\t\tif (kakko1[j] < kakko1[i-1]) {\n\t\t\t\t\tj = i-1;\n\t\t\t\t}\n\t\t\t\tconst int num = kakko0[i] + kakko1[j] - minus;\n\t\t\t\tans = max(ans,num);\n\t\t\t}\n\t\t}\n\t}\n\tfor (int u = 0; u < N; ++u) {\n\t\tfor (int d = u + 1; d <= min(N,u + 2); ++d) {\n\t\t\tfor (int l = 0; l < N; ++l) {\n\t\t\t\tfor (int r = l + 1; r <=N; ++r) {\n\t\t\t\t\tconst int num = getsum(l, r, u, d, sums);\n\t\t\t\t\tans = max(ans, num);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tfor (int l = 0; l < N; ++l) {\n\t\tfor (int r = l + 1; r <= min(N, l + 2); ++r) {\n\t\t\tfor (int u = 0; u < N; ++u) {\n\t\t\t\tfor (int d = u + 1; d <= N; ++d) {\n\t\t\t\t\tconst int num = getsum(l, r, u, d, sums);\n\t\t\t\t\tans = max(ans, num);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\tcout << ans << endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <algorithm>\nusing namespace std;\nconst int inf = 1012345678;\nint n, a[309][309], sa[309][309], s[309], t[309], st[309], r[309];\nint main() {\n\tcin >> n;\n\tfor (int i = 0; i < n; i++) {\n\t\tfor (int j = 0; j < n; j++) {\n\t\t\tcin >> a[i][j];\n\t\t\tsa[i][j + 1] = sa[i][j] + a[i][j];\n\t\t}\n\t}\n\tint ret = -inf;\n\tfor (int i = 0; i < n; i++) {\n\t\tfor (int j = i + 1; j <= n; j++) {\n\t\t\tfor (int k = 0; k < n; k++) {\n\t\t\t\ts[k] = sa[k][j] - sa[k][i];\n\t\t\t\tt[k] = (j - i >= 2 ? a[k][i] + a[k][j - 1] : a[k][i]);\n\t\t\t\tst[k + 1] = st[k] + t[k];\n\t\t\t\tr[k] = st[k] + s[k];\n\t\t\t}\n\t\t\tint p = -inf;\n\t\t\tfor (int k = 0; k < n; k++) {\n\t\t\t\tret = max(ret, r[k] + p);\n\t\t\t\tret = max(ret, s[k]);\n\t\t\t\tp = max(p, s[k] - st[k + 1]);\n\t\t\t}\n\t\t}\n\t}\n\tcout << ret << endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#define N 310\n#define INF (1e9)\nusing namespace std;\nint n,p[N][N],ans,c,b,ma,d[N][N];\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  ans=p[0][0];\n  for(int k=1;k<=n;k++){\n    for(int l=k;l<=n;l++){\n      b=c=1;\n      while(b!=n){\n\tma=-INF;\n\tfor(int i=c+1;i<=n;i++){\n\t  int sum=d[i][l]-d[b-1][l]-d[i][k-1]+d[b-1][k-1],sum2=0;\n\t  if(i-b>=2&&l-k>=2) sum2=d[i-1][l-1]-d[b][l-1]-d[i-1][k]+d[b][k];\n\t  if(ma<sum-sum2) ma=sum-sum2,c=i;\n\t}\n\tans=max(ans,ma);\n\tfor(int i=b;i<=c;i++){\n\t  int sum=d[i][l]-d[b-1][l]-d[i][k-1]+d[b-1][k-1],sum2=0;\n\t  if(i-b>=2&&l-k>=2) sum2=d[i-1][l-1]-d[b][l-1]-d[i-1][k]+d[b][k];\n\t  ans=max(ans,sum-sum2);\n\t}\n\tb=c;\n      }\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<vector>\n#include<string>\n#include<algorithm>\n#include<map>\n#include<set>\n#include<utility>\n#include<cmath>\n#include<cstring>\n#include<queue>\n#include<cstdio>\n#include<sstream>\n#define loop(i,a,b) for(int i=a;i<b;i++) \n#define rep(i,a) loop(i,0,a)\n#define pb push_back\n#define mp make_pair\n#define all(in) in.begin(),in.end()\nconst double PI=acos(-1);\nconst double EPS=1e-10;\nconst int inf=1e9;\nusing namespace std;\ntypedef long long ll;\ntypedef vector<int> vi;\ntypedef vector<vi> vvi;\ntypedef pair<int,int> pii;\nint main(){\n\tint n;\n\tcin>>n;\n\tvvi in(n+1,vi(n+1));\n\trep(i,n)rep(j,n)cin>>in[i+1][j+1];\n\trep(i,n)rep(j,n)in[i+1][j+1]+=in[i+1][j]+in[i][j+1]-in[i][j];\n\tint ma=-inf;\n\tloop(i,1,n+1)loop(j,1,n+1)loop(k,i,n+1)loop(l,j,n+1){\n\t\tint t=in[k][l]-in[i-1][l]-in[k][j-1]+in[i-1][j-1];\n\t\tif(k-i>1&&l-j>1)\n\t\t\tt-=in[k-1][l-1]-in[i][l-1]-in[k-1][j]+in[i][j];\n\t\tma=max(ma,t);\n\t}\n\tcout<<ma<<endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\n\nint a[400][400];\nint N;\nint main(){\n    cin>>N;\n    int ma=INT_MIN;\n    for(int i=0;i<N;i++){\n        for(int j=0;j<N;j++){\n            cin>>a[i+1][j+1];\n            ma=max(ma,a[i+1][j+1]);\n            a[i+1][j+1]+=a[i][j+1]+a[i+1][j]-a[i][j];\n        }\n    }\n\n    for(int i=0;i<N;i++){\n        for(int j=0;j<N;j++){\n            for(int k=i+1;k<N;k++){\n                for(int l=j+1;l<N;l++){\n                    int x=a[k+1][l+1]-a[k+1][j]-a[i][l+1]+a[i][j];\n                    int y=a[k][l]-a[k][j+1]-a[i+1][l]+a[i+1][j+1];\n                    ma=max(ma,x-y);\n                }\n            }\n        }\n    }\n    cout<<ma<<endl;\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#define N 310\nusing namespace std;\ntypedef pair<int,int> P;\nint n,p[N][N],s,ans,a1,a2,b1,b2,d[N][N],A[N],B[N],C[N],D[N];\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++){\n    s=0;\n    for(int j=1;j<=n;j++) s+=p[j][i];\n    A[i]=C[i]=s;\n  }\n  for(int i=1;i<=n;i++){\n    s=0;\n    for(int j=1;j<=n;j++) s+=p[i][j];\n    B[i]=D[i]=s;\n  }\n  sort(C+1,C+n+1);\n  sort(D+1,D+n+1);\n  reverse(C+1,C+n+1);\n  reverse(D+1,D+n+1);\n  if(n!=1){\n    for(int i=1;i<=n;i++)\n      for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n    for(int i=1;i<=n;i++)\n      for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n    for(int i=2;i<=n;i++)\n      for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n    for(int i=1;i<=n;i++){\n      for(int j=1;j<=n;j++){\n\tfor(int k=i+1;k<=n;k++){\n\t  for(int l=j+1;l<=n;l++){\n\t    int a1=C[1],a2=C[2],b1=D[1],b2=D[2];\n\t    if(!(a1==A[j]||a2==A[j]||a1==A[l]||a2==A[l]||b1==B[i]||b2==B[i]||b1==B[k]||b2==B[k])) continue;\n\t    int sum=d[k][l]-d[i-1][l]-d[k][j-1]+d[i-1][j-1];\n\t    int sum2=d[k-1][l-1]-d[i][l-1]-d[k-1][j]+d[i][j];\n\t    ans=max(ans,sum-sum2);\n\t  }\n\t}\n      }\n    }\n    cout<<ans<<endl;\n  }else cout<<p[0][0]<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#define N 310\nusing namespace std;\ntypedef pair<int,int> P;\nint n,p[N][N],s,ans,a1,a2,b1,b2,d[N][N];\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  for(int i=1;i<=n;i++){\n    for(int j=1;j<=n;j++){\n      for(int k=i+1;k<=n;k++){\n\tfor(int l=j+1;l<=n;l++){\n\t  int sum=d[k][l]-d[i-1][l]-d[k][j-1]+d[i-1][j-1];\n\t  int sum2=d[k-1][l-1]-d[i][l-1]-d[k-1][j]+d[i][j];\n\t  ans=max(ans,sum-sum2);\n\t}\n      }\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\n#include<cstring>\nusing namespace std;\nint k[1000][1000], x[1000][1000], n, cnt, maxn = -10000000;\nint main() {\n\tcin >> n;\n\tfor (int i = 1; i <= n; i++) {\n\t\tfor (int j = 1; j <= n; j++) {\n\t\t\tscanf(\"%d\", &k[i][j]);\n\t\t}\n\t}\n\tfor (int i = 1; i <= n; i++) {\n\t\tcnt = 0;\n\t\tfor (int j = 1; j <= n; j++) {\n\t\t\tcnt += k[i][j];\n\t\t\tx[i][j] = cnt + x[i - 1][j];\n\t\t}\n\t}\n\tif (n <= 200) {\n\t\tfor (int i = 0; i < n; i++) {\n\t\t\tfor (int j = 0; j < n; j++) {\n\t\t\t\tfor (int k = i + 1; k <= n; k++) {\n\t\t\t\t\tfor (int l = j + 1; l <= n; l++) {\n\t\t\t\t\t\tif (k - i >= 3 && l - j >= 3) {\n\t\t\t\t\t\t\tmaxn = max(maxn, (x[i][j] + x[k][l] - x[i][l] - x[k][j]) - (x[i + 1][j + 1] + x[k - 1][l - 1] - x[i + 1][l - 1] - x[k - 1][j + 1]));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tmaxn = max(maxn, x[i][j] + x[k][l] - x[i][l] - x[k][j]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\telse {\n\t\tfor (int i = 0; i < n; i++) {\n\t\t\tfor (int j = 0; j < n; j++) {\n\t\t\t\tfor (int k = i + 1; k <= n; k++) {\n\t\t\t\t\tfor (int l = j + 1; l <= n; l++) {\n\t\t\t\t\t\tif (k - i >= 200 && l - j >= 200) {\n\t\t\t\t\t\t\tmaxn = max(maxn, (x[i][j] + x[k][l] - x[i][l] - x[k][j]) - (x[i + 1][j + 1] + x[k - 1][l - 1] - x[i + 1][l - 1] - x[k - 1][j + 1]));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tcout << maxn << endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#define N 310\n#define INF (1e9)\nusing namespace std;\nint n,p[N][N],ans,c,b,ma,d[N][N];\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  ans=-INF;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) ans=max(ans,p[i][j]);\n  for(int k=1;k<=n;k++){\n    for(int l=k+1;l<=n;l++){\n      b=c=1;\n      while(b!=n){\n\tma=-INF;\n\tfor(int i=c+1;i<=n;i++){\n\t  int sum=d[i][l]-d[b-1][l]-d[i][k-1]+d[b-1][k-1],sum2=0;\n\t  if(i-b>=2&&l-k>=2) sum2=d[i-1][l-1]-d[b][l-1]-d[i-1][k]+d[b][k];\n\t  if(ma<sum-sum2) ma=sum-sum2,c=i;\n\t}\n\tans=max(ans,ma);\n\tfor(int i=b+1;i<c;i++){\n\t  int sum=d[i][l]-d[b-1][l]-d[i][k-1]+d[b-1][k-1],sum2=0;\n\t  if(i-b>=2&&l-k>=2) sum2=d[i-1][l-1]-d[b][l-1]-d[i-1][k]+d[b][k];\n\t  ans=max(ans,sum-sum2);\n\t}\n\tb=c;\n      }\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n#define REP(i, n) FOR(i, 0, n)\n#define FOR(i, a, b) for(int i = a; i < b; i++)\n\n#define PB push_back\n\n#define MOD 1000000007LL\ntypedef long long ll;\n\nint a[321][321];\nint sm[321][321];\n\nint cnt(int a, int b, int c, int d){\n\treturn sm[c][d]-sm[a][d]-sm[c][b]+sm[a][b];\n}\n\ninline int gt(int i, int j, int k, int l){\n\tint a = cnt(i, k, j, l), b = 0;\n\tif(j-i>=3 && l-k>=3){\n\t\tb = cnt(i+1, k+1, j-1, l-1);\n\t\t// printf(\"*\");\n\t}\n\t// printf(\"   cnt(%d, %d, %d, %d)=%d-%d=%d\\n\", i, j, k, l, a, b, a-b);\n\treturn a-b;\n}\n\n#define LAR(a, b) a=max(a, (b))\n\nint main(){\n\tint n;\n\tscanf(\"%d\", &n);\n\tREP(i, n) REP(j, n) scanf(\"%d\", a[i]+j);\n\tREP(i, n) sm[i][0]=sm[0][i]=0;\n\tREP(i, n){\n\t\tREP(j, n){\n\t\t\tsm[i+1][j+1]=sm[i][j+1]+sm[i+1][j]-sm[i][j]+a[i][j];\n\t\t}\n\t}\n\t// REP(i, n+1){\n\t// \tREP(j, n+1){\n\t// \t\tprintf(\"%d \", sm[i][j]);\n\t// \t}\n\t// \tprintf(\"\\n\");\n\t// }\n\n\tint ans = INT_MIN;\n\tREP(i, n){\n\t\tFOR(j, i+1, n+1){\n\t\t\tint nwsm = 0,\n\t\t\t\t\tmxsm = 0,\n\t\t\t\t\tmxid = 0;\n\t\t\tint mxans = INT_MIN;\n\t\t\tFOR(l, 1, n+1){\n\t\t\t\tLAR(mxans, gt(l-1, l, i, j));\n\t\t\t\tif(l>=3){\n\t\t\t\t\tnwsm -= cnt(l-3, l-2, i, j);\n\t\t\t\t\t// printf(\"  -(%d,%d,%d,%d)=%d\\n\", l-3,l-2,i,j, cnt(i, j, l-3, l-2));\n\t\t\t\t\tif(j-i >= 3){\n\t\t\t\t\t\tnwsm += cnt(l-2, l-1, i+1, j-1);\n\t\t\t\t\t\t// printf(\"  +(%d,%d,%d,%d)=%d\\n\", l-2, l-1, i+1, j-1, \n\t\t\t\t\t\t\t\t// cnt(l-2, l-1, i+1, j-1));\n\t\t\t\t\t}\n\t\t\t\t\tif(mxsm > nwsm){\n\t\t\t\t\t\tmxid = l-2;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tLAR(mxans, gt(mxid, l, i, j));\n\t\t\t\t// printf(\" %d-%d:%d %d\\n\", mxid, l, mxans, nwsm);\n\t\t\t}\n\t\t\tLAR(ans, mxans);\n\t\t\t// printf(\"%d %d : %d\\n\", i, j, mxans);\n\t\t}\n\t}\n\tprintf(\"%d\\n\", ans);\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n#define REP(i, n) FOR(i, 0, n)\n#define FOR(i, a, b) for(int i = a; i < b; i++)\n\n#define PB push_back\n\n#define MOD 1000000007LL\ntypedef long long ll;\n\nint a[321][321];\nint sm[321][321];\n\nint cnt(int a, int b, int c, int d){\n\treturn sm[c][d]-sm[a][d]-sm[c][b]+sm[a][b];\n}\n\ninline int gt(int i, int j, int k, int l){\n\tint a = cnt(i, k, j, l), b = 0;\n\tif(j-i>=3 && l-k>=3){\n\t\tb = cnt(i+1, k+1, j-1, l-1);\n\t\t// printf(\"*\");\n\t}\n\t// printf(\"   cnt(%d, %d, %d, %d)=%d-%d=%d\\n\", i, j, k, l, a, b, a-b);\n\treturn a-b;\n}\n\n#define LAR(a, b) a=max(a, (b))\n\nint main(){\n\tint n;\n\tscanf(\"%d\", &n);\n\tREP(i, n) REP(j, n) scanf(\"%d\", a[i]+j);\n\tREP(i, n) sm[i][0]=sm[0][i]=0;\n\tREP(i, n){\n\t\tREP(j, n){\n\t\t\tsm[i+1][j+1]=sm[i][j+1]+sm[i+1][j]-sm[i][j]+a[i][j];\n\t\t}\n\t}\n\t// REP(i, n+1){\n\t// \tREP(j, n+1){\n\t// \t\tprintf(\"%d \", sm[i][j]);\n\t// \t}\n\t// \tprintf(\"\\n\");\n\t// }\n\n\tint ans = 0;\n\tREP(i, n){\n\t\tFOR(j, i+1, n+1){\n\t\t\tint nwsm = 0,\n\t\t\t\t\tmxsm = 0,\n\t\t\t\t\tmxid = 0;\n\t\t\tint mxans = 0;\n\t\t\tFOR(l, 1, n+1){\n\t\t\t\tLAR(mxans, gt(l-1, l, i, j));\n\t\t\t\tif(l>=3){\n\t\t\t\t\tnwsm -= cnt(l-3, l-2, i, j);\n\t\t\t\t\t// printf(\"  -(%d,%d,%d,%d)=%d\\n\", l-3,l-2,i,j, cnt(i, j, l-3, l-2));\n\t\t\t\t\tif(j-i >= 3){\n\t\t\t\t\t\tnwsm += cnt(l-2, l-1, i+1, j-1);\n\t\t\t\t\t\t// printf(\"  +(%d,%d,%d,%d)=%d\\n\", l-2, l-1, i+1, j-1, \n\t\t\t\t\t\t\t\t// cnt(l-2, l-1, i+1, j-1));\n\t\t\t\t\t}\n\t\t\t\t\tif(mxsm > nwsm){\n\t\t\t\t\t\tmxid = l-2;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tLAR(mxans, gt(mxid, l, i, j));\n\t\t\t\t// printf(\" %d-%d:%d %d\\n\", mxid, l, mxans, nwsm);\n\t\t\t}\n\t\t\tLAR(ans, mxans);\n\t\t\t// printf(\"%d %d : %d\\n\", i, j, mxans);\n\t\t}\n\t}\n\tprintf(\"%d\\n\", ans);\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#include <map>\n#define N 310\n#define ma make_pair\nusing namespace std;\ntypedef pair<int,int> P;\nint n,p[N][N],ans,d[N][N],sum,sum2;\nmap<P,P> m,t;\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  int cnt=0;\n  for(int i=1;i<=n;i++){\n    for(int j=1;j<=n;j++){\n      for(int k=n;k>=i;k--){\n\tfor(int l=n;l>=j;l--){\n\t  if(t.find(P(i,k))!=t.end()&&j>t[P(i,k)].first) continue;\n\t  if(m.find(P(j,l))!=m.end()&&i>m[P(j,l)].first) continue;\n\t  cnt++;\n\t  sum2=0;\n\t  sum=d[k][l]-d[i-1][l]-d[k][j-1]+d[i-1][j-1];\n\t  if(k-i>=2&&l-j>=2) sum2=d[k-1][l-1]-d[i][l-1]-d[k-1][j]+d[i][j];\n\t  ans=max(ans,sum-sum2);\n\t  if(m.find(P(j,l))==m.end()) m.insert(ma(P(j,l),P(k,ans)));\n\t  else if(m[P(j,l)].second<sum) m[P(j,l)]=ma(k,sum);\n\t  if(t.find(P(i,k))==t.end()) t.insert(ma(P(i,k),P(l,ans)));\n\t  else if(t[P(i,k)].second<sum) t[P(i,k)]=ma(l,sum);\n\t}\n      }\n    }\n  }\n  //    cout<<cnt<<endl;\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <stdio.h>\n#include <sstream>\n#include <string>\n#include <vector>\n#include <map>\n#include <queue>\n#include <algorithm>\n#include <set>\n#include <math.h>\n#include <utility>\n#include <stack>\n#include <string.h>\nusing namespace std;\ntypedef pair<int,int> P;\nconst int INF = ~(1<<31) / 2;\n\n\nint p[300][300];\nint yoko[300][300];\nint tate[300][300];\n\n\nint main(){\n    int N;\n    cin >> N;\n\n    for(int i=0;i<N;i++){\n        for(int j=0;j<N;j++){\n            scanf(\"%d\",&p[i][j]);\n            yoko[i][j] = p[i][j];\n            if(j!=0) yoko[i][j] += yoko[i][j-1];\n        }\n    }\n    for(int i=0;i<N;i++){\n        for(int j=0;j<N;j++){\n            tate[j][i] = p[j][i];\n            if(j!=0) tate[j][i] += tate[j-1][i];\n        }\n    }\n\n    int ans = -INF;\n    for(int h=0;h<N;h++){\n        for(int i=0;i<N;i++){\n            for(int j=0;j+h<N;j++){\n                for(int k=0;k+i<N;k++){\n                    int frame = 0;\n                    if (h==0){\n                        frame = yoko[j][k+i];\n                        if(k>0) frame -= yoko[j][k-1];\n                    }else if(i==0){\n                        frame = tate[j+h][k];\n                        if(j>0) frame -= yoko[j-1][k];\n                    }else{\n                        frame = yoko[j][k+i]+yoko[j+h][k+i]+tate[j+h][k]+tate[j+h][k+i] -p[j][k]-p[j+h][k]-p[j][k+i]-p[j+h][k+i];\n                        //printf(\"%d %d %d %d %d %d %d %d\\n\",yoko[j][k+i],yoko[j+h][k+i],tate[j+h][k],tate[j+h][k+i],p[j][k],p[j+h][k],p[j][k+i],p[j+h][k+i]);\n                        if(k>0) frame -= yoko[j][k-1] + yoko[j+h][k-1];\n                        if(j>0) frame -= tate[j-1][k] + tate[j-1][k+i];\n                    }\n                    //printf(\"%d %d %d %d\\n\",i,j,k,frame);\n                    ans = max(ans, frame);\n                }\n            }\n        }\n    }\n    cout << ans << endl;\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\nusing Int = long long;\n\ntemplate<typename T1,typename T2> inline void chmin(T1 &a,T2 b){if(a>b)a=b;};\ntemplate<typename T1,typename T2> inline void chmax(T1 &a,T2 b){if(a<b)a=b;};\n\nconst Int INF = 1e15;\nconst Int MAX = 303;\nInt p[MAX][MAX];\nInt sm[MAX][MAX];\n\nInt query(Int u,Int d,Int j){\n  return sm[d+1][j]-sm[u][j]; \n}\n\nsigned main(){\n  Int n;\n  cin>>n;\n  for(Int i=0;i<n;i++)\n    for(Int j=0;j<n;j++)\n      cin>>p[i][j];\n\n  Int ans=-INF;\n  for(Int i=0;i<n;i++)\n    for(Int j=0;j<n;j++)\n      chmax(ans,p[i][j]);\n\n  // 1 * w, 2 * w\n  for(Int i=0;i<n;i++){\n    for(Int l=0;l<n;l++){\n      Int sum=0,sum2=0;\n      for(Int r=l;r<n;r++){\n        sum+=p[i][r];\n        if(i+1<n) sum2+=p[i+1][r];\n        chmax(ans,sum);\n        chmax(ans,sum+sum2);\n      }\n    }    \n  }\n\n  // h * 1, h * 2\n  for(Int j=0;j<n;j++){\n    for(Int u=0;u<n;u++){\n      Int sum=0,sum2=0;\n      for(Int d=u;d<n;d++){\n        sum+=p[d][j];\n        if(j+1<n) sum2+=p[d][j+1];\n        chmax(ans,sum);\n        chmax(ans,sum+sum2);\n      }\n    }\n  }\n\n  memset(sm,0,sizeof(sm));\n  for(Int j=0;j<n;j++)\n    for(Int i=0;i<n;i++)\n      sm[i+1][j]=sm[i][j]+p[i][j];\n  \n  // larger than 3 * 3\n  for(Int u=0;u<n;u++){\n    for(Int d=u+2;d<n;d++){\n      Int sum=query(u,d,n-1);\n      for(Int j=n-3;j>=0;j--){\n        chmax(sum,query(u,d,j+2));\n        sum+=p[u][j+1]+p[d][j+1];\t\n        chmax(ans,query(u,d,j)+sum);\n      }\n    }\n  }\n    \n  cout<<ans<<endl;\n  return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#include <map>\n#define N 310\n#define INF (1e9)\n#define make make_pair\nusing namespace std;\ntypedef pair<int,int> P;\nint n,p[N][N],ans,d[N][N],sum,sum2;\nmap<P,P> m,t;\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  ans=-INF;\n  int cnt=0;\n  for(int i=1;i<=n;i++){\n    for(int j=n;j>=i;j--){\n      for(int k=1;k<=n;k++){\n\tfor(int l=n;l>=k;l--){\n\t  if(m.find(P(i,j))!=m.end()&&l>m[P(i,j)].first) continue;\n\t  if(t.find(P(k,l))!=t.end()&&j>t[P(k,l)].first) continue;\n\t  int sum=d[j][l]-d[i-1][l]-d[j][k-1]+d[i-1][k-1],sum2=0;\n\t  if(j-i>=2&&l-k>=2) sum2=d[j-1][l-1]-d[i][l-1]-d[j-1][k]+d[i][k];\n\t  ans=max(ans,sum-sum2);\n\t  if(m.find(P(i,j))==m.end()) m.insert(make(P(i,j),P(l,sum-sum2)));\n\t  else if(m[P(i,j)].second<sum-sum2) m[P(i,j)]=make(l,sum-sum2);\n\t  if(t.find(P(k,l))==t.end()) t.insert(make(P(k,l),P(j,sum-sum2)));\n\t  else if(t[P(k,l)].second<sum-sum2) t[P(k,l)]=make(j,sum-sum2);\n\t  cnt++;\n\t}\n      }\n    }\n  }\n  //  cout<<cnt<<endl;\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#include <map>\n#define N 310\n#define INF (1e9)\n#define make make_pair\nusing namespace std;\ntypedef pair<int,int> P;\nint n,p[N][N],ans,d[N][N],sum,sum2;\nmap<P,P> m,t;\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  ans=-INF;\n  for(int i=1;i<=n;i++){\n    for(int j=i+1;j<=n;j++){\n      for(int k=1;k<=n;k++){\n\tfor(int l=k+1;l<=n;l++){\n\t  if(m.find(P(i,j))!=m.end()&&l>m[P(i,j)].first) continue;\n\t  if(t.find(P(k,l))!=t.end()&&j>t[P(k,l)].first) continue;\n\t  int sum=d[j][l]-d[i-1][l]-d[j][k-1]+d[i-1][k-1],sum2=0;\n\t  if(j-i>=2&&l-k>=2) sum2=d[j-1][l-1]-d[i][l-1]-d[j-1][k]+d[i][k];\n\t  ans=max(ans,sum-sum2);\n\t  if(m.find(P(i,j))==m.end()) m.insert(make(P(i,j),P(l,sum-sum2)));\n\t  else if(m[P(i,j)].second<sum-sum2) m[P(i,j)]=make(l,sum-sum2);\n\t  if(t.find(P(k,l))==t.end()) t.insert(make(P(k,l),P(j,sum-sum2)));\n\t  else if(t[P(k,l)].second<sum-sum2) t[P(k,l)]=make(j,sum-sum2);\n\t}\n      }\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#include <queue>\n#define N 310\nusing namespace std;\ntypedef pair<int,int> P;\nint n,p[N][N],s,ans,a1,a2,b1,b2,d[N][N];\npriority_queue<P> A,B;\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++){\n    s=0;\n    for(int j=1;j<=n;j++) s+=p[j][i];\n    A.push(P(s,i));\n  }\n  for(int i=1;i<=n;i++){\n    s=0;\n    for(int j=1;j<=n;j++) s+=p[i][j];\n    B.push(P(s,i));\n  }\n  if(n!=1){\n    P t=A.top(); A.pop();\n    a1=t.second;\n    t=A.top(); A.pop();\n    a2=t.second;\n    t=B.top(); B.pop();\n    b1=t.second;\n    t=B.top(); B.pop();\n    b2=t.second;\n    for(int i=1;i<=n;i++)\n      for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n    for(int i=1;i<=n;i++)\n      for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n    for(int i=2;i<=n;i++)\n      for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  \n    for(int i=1;i<=n;i++){\n      for(int j=1;j<=n;j++){\n\tfor(int k=i+1;k<=n;k++){\n\t  for(int l=j+1;l<=n;l++){\n\t    //if(!(a1==j||a2==j||a1==l||a2==l||b1==i||b2==i||b1==k||b2==k)) continue;\n\t    int sum=d[k][l]-d[i-1][l]-d[k][j-1]+d[i-1][j-1];\n\t    int sum2=d[k-1][l-1]-d[i][l-1]-d[k-1][j]+d[i][j];\n\t    ans=max(ans,sum-sum2);\n\t  }\n\t}\n      }\n    }\n    cout<<ans<<endl;\n  }else cout<<p[0][0]<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#include <map>\n#define N 310\n#define ma make_pair\nusing namespace std;\ntypedef pair<int,int> P;\nint n,p[N][N],ans,d[N][N],sum,sum2;\nmap<P,P> m,t;\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  int cnt=0;\n  for(int i=1;i<=n;i++){\n    for(int j=1;j<=n;j++){\n      for(int k=n;k>=i;k--){\n\tfor(int l=n;l>=j;l--){\n\t  if(t.find(P(i,k))!=t.end()&&l>t[P(i,k)].first) continue;\n\t  if(m.find(P(j,l))!=m.end()&&k>m[P(j,l)].first) continue;\n\t  cnt++;\n\t  sum2=0;\n\t  sum=d[k][l]-d[i-1][l]-d[k][j-1]+d[i-1][j-1];\n\t  if(k-i>=2&&l-j>=2) sum2=d[k-1][l-1]-d[i][l-1]-d[k-1][j]+d[i][j];\n\t  ans=max(ans,sum-sum2);\n\t  if(m.find(P(j,l))==m.end()) m.insert(ma(P(j,l),P(k,ans)));\n\t  else if(m[P(j,l)].second<sum) m[P(j,l)]=ma(k,sum);\n\t  if(t.find(P(i,k))==t.end()) t.insert(ma(P(i,k),P(l,ans)));\n\t  else if(t[P(i,k)].second<sum) t[P(i,k)]=ma(l,sum);\n\t}\n      }\n    }\n  }\n  //    cout<<cnt<<endl;\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define rep(i,n) for(int i=0;i<(int)n;i++)\n#define all(c) (c).begin(),(c).end()\n#define pb push_back\n#define dbg(...) do{cerr<<__LINE__<<\": \";dbgprint(#__VA_ARGS__, __VA_ARGS__);}while(0);\n\nusing namespace std;\n\nnamespace std{template<class S,class T>struct hash<pair<S,T>>{size_t operator()(const pair<S,T>&p)const{return ((size_t)1e9+7)*hash<S>()(p.first)+hash<T>()(p.second);}};template<class T>struct hash<vector<T>>{size_t operator()(const vector<T> &v)const{size_t h=0;for(auto i : v)h=h*((size_t)1e9+7)+hash<T>()(i)+1;return h;}};}\ntemplate<class T>ostream& operator<<(ostream &os, const vector<T> &v){os<<\"[ \";rep(i,v.size())os<<v[i]<<(i==v.size()-1?\" ]\":\", \");return os;}template<class T>ostream& operator<<(ostream &os,const set<T> &v){os<<\"{ \"; for(const auto &i:v)os<<i<<\", \";return os<<\"}\";}\ntemplate<class T,class U>ostream& operator<<(ostream &os,const map<T,U> &v){os<<\"{\";for(const auto &i:v)os<<\" \"<<i.first<<\": \"<<i.second<<\",\";return os<<\"}\";}template<class T,class U>ostream& operator<<(ostream &os,const pair<T,U> &p){return os<<\"(\"<<p.first<<\", \"<<p.second<<\")\";}\nvoid dbgprint(const string &fmt){cerr<<endl;}template<class H,class... T>void dbgprint(const string &fmt,const H &h,const T&... r){cerr<<fmt.substr(0,fmt.find(\",\"))<<\"= \"<<h<<\" \";dbgprint(fmt.substr(fmt.find(\",\")+1),r...);}\ntypedef long long ll;typedef vector<int> vi;typedef pair<int,int> pi;const int inf = (int)1e9;const double INF = 1e12, EPS = 1e-9;\n\nint main(){\n\tcin.tie(0); cin.sync_with_stdio(0);\n\tint n; cin >> n;\n\tvector<vi> v(n, vi(n)), tate(n, vi(n + 1));\n\trep(i, n) rep(j, n){\n\t\tcin >> v[i][j];\n\t\ttate[j][i + 1] = tate[j][i] + v[i][j];\n\t}\n\t\n\tint ans = -inf;\n\trep(y, n) for(int Y = y; Y < n; Y++){\n\t\tint s = -inf;\n\t\trep(x, n){\n\t\t\tint tmp = tate[x][Y + 1] - tate[x][y];\n\t\t\tint tmp2 = y == Y ? v[y][x] : v[Y][x] + v[y][x];\n\t\t\tans = max(ans, max(0, s) + tmp);\n\t\t\ts = max(s + tmp2, tmp);\n\t\t}\n\t}\n\tcout << ans << endl;\n\treturn 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\nusing namespace std;\n\nint n;\nint tate[300][301];\t//[x][y?´????]\nint yoko[301][300];\t//[x?´????][y]\n\nint tateSum(int x,int y0,int y1){return tate[x][y1+1]-tate[x][y0];}\nint yokoSum(int x0,int x1,int y){return yoko[x1+1][y]-yoko[x0][y];}\n\nint main(){\n\tcin>>n;\n\tfor(int i=0;i<n;i++){\n\t\ttate[i][0]=0;\n\t\tyoko[0][i]=0;\n\t}\n\tint tmp;\n\tfor(int y=0;y<n;y++){\n\t\tfor(int x=0;x<n;x++){\n\t\t\tcin>>tmp;\n\t\t\ttate[x][y+1]=tate[x][y]+tmp;\n\t\t\tyoko[x+1][y]=yoko[x][y]+tmp;\n\t\t}\n\t}\n\t\n\tint ans=-114514810;\n\tint koMax;\n\tint ko;\n\t\n\tint i,j,k;\n\tfor(i=0;i<n;i++){\n\tfor(j=i;j<n;j++){\n\t\tkoMax=-114514810;\n\t\tfor(k=0;k<n;k++){\n\t\t\tif(i==j){\t//?¨???????\n\t\t\t\tko=yokoSum(k,k,i);\n\t\t\t\tkoMax=max(koMax+yokoSum(k,k,i),ko);\n\t\t\t\tans=max(ans,koMax);\n\t\t\t}else{\t//????????\\???\n\t\t\t\tko=tateSum(k,i,j);\n\t\t\t\tans=max(ans,max(koMax+ko,ko));\n\t\t\t\tkoMax=max(koMax+yokoSum(k,k,i)+yokoSum(k,k,j),ko);\n\t\t\t}\n\t\t}\n\t}\n\t}\n\n\tcout<<ans<<endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#include <queue>\n#define N 301\nusing namespace std;\ntypedef pair<int,int> P;\nint n,p[N][N],s,ans,a1,a2,b1,b2,d[N][N];\npriority_queue<P> A,B;\n\nint main(){\n  cin>>n;\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++) cin>>p[i][j];\n  for(int i=0;i<n;i++){\n    s=0;\n    for(int j=0;j<n;j++) s+=p[j][i];\n    A.push(P(s,i));\n  }\n  for(int i=0;i<n;i++){\n    s=0;\n    for(int j=0;j<n;j++) s+=p[i][j];\n    B.push(P(s,i));\n  }\n  P t=A.top(); A.pop();\n  a1=t.second;\n  t=A.top(); A.pop();\n  a2=t.second;\n  t=B.top(); B.pop();\n  b1=t.second;\n  t=B.top(); B.pop();\n  b2=t.second;\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++) d[i][j]=p[i][j];\n  for(int i=0;i<n;i++)\n    for(int j=1;j<n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=1;i<n;i++)\n    for(int j=0;j<n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  for(int i=0;i<n;i++){\n    for(int j=0;j<n;j++){\n      for(int k=i;k<n;k++){\n\tfor(int l=j;l<n;l++){\n\t  //if(!(a1==j||a2==j||a1==l||a2==l||b1==i||b2==i||b1==k||b2==k)) continue;\n\t  int sum=d[k][l],sum2=0;\n\t  if(i&&j) sum=sum-d[i-1][l]-d[k][j-1]+d[i-1][j-1];\n\t  else if(i) sum=sum-d[i-1][l];\n\t  else if(j) sum=sum-d[k][j-1];\n\t  if(k>=1&&l>=1&&k-i>=2&&l-j>=2){\n\t    if(i+1&&j+1) sum2=d[k-1][l-1]-d[i][l-1]-d[k-1][j]+d[i][j];\n\t    else if(i+1) sum2=d[k-1][l-1]-d[i][l-1];\n\t    else if(j+1) sum2=d[k-1][l-1]-d[k-1][j];\n\t  }\n\t  ans=max(ans,sum-sum2);\n\t}\n      }\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <set>\n#include <tuple>\n\ntypedef std::tuple<int,int> P;\n\nconst int INF = 1001001001;\n\nint pixels[301][301];\nint sumH[301][301], sumV[301][301];\n\nint main(){\n    int N;\n    scanf(\"%d\", &N);\n\n    for(int i=1;i<=N;i++){\n        for(int j=1;j<=N;j++){\n            scanf(\"%d\", &pixels[i][j]);\n        }\n    }\n\n    for(int i=1;i<=N;i++){\n        for(int j=1;j<=N;j++){\n            sumH[i][j] += sumH[i][j-1] + pixels[i][j];\n            // printf(\"%d \", sumH[i][j]);\n        }\n        // puts(\"\");\n    }\n\n    // puts(std::string(40, '-').c_str());\n\n    for(int i=1;i<=N;i++){\n        for(int j=1;j<=N;j++){\n            sumV[i][j] += sumV[i-1][j] + pixels[i][j];\n            // printf(\"%d \", sumV[i][j]);\n        }\n        // puts(\"\");\n    }\n\n    int res = -INF;\n    for(int i=1;i<=N;i++){\n        for(int j=i+1;j<=N;j++){\n            std::set<P> set;\n            for(int k=1;k<=N;k++){\n                set.insert(std::make_tuple(-(sumH[i][k-1]+sumH[j][k-1]+sumV[j][k]-sumV[i-1][k]), -k));\n            }\n\n            for(int k=1;k<=N;k++){\n                int x, idx;\n                std::tie(x, idx) = *set.begin();\n                idx = -idx;\n\n                for(;k<=idx;k++){\n                    res = std::max(res, k!=idx ? -x-sumH[i][k]-sumH[j][k]+sumV[j][k]-sumV[i-1][k] : -x-sumH[i][k-1]-sumH[j][k-1]);\n                    // printf(\"(;%d, %d, %d) %d, %d, %d, %d\\n\", i, j, k, x, idx, -x-sumH[i][k]-sumH[j][k]+sumV[j][k]-sumV[i-1][k], -x-sumH[i][k-1]-sumH[j][k-1]);                                 \n                }\n                \n                while(!set.empty()){\n                    int idx2;\n                    std::tie(std::ignore, idx2) = *set.begin();\n                    idx2 = -idx2;\n\n                    if(idx2 <= idx){set.erase(set.begin());}\n                    else{break;}\n                }\n            }\n        }\n\n        std::set<P> set;\n        for(int j=1;j<=N;j++){\n            set.insert(std::make_tuple(-sumH[i][j], -j));\n        }\n\n        for(int j=1;j<=N;j++){\n            int x, idx;\n            std::tie(x, idx) = *set.begin();\n            idx = -idx;\n\n            for(;j<=idx;j++){\n                res = std::max(res, -x-sumH[i][j-1]);\n            }\n\n            while(!set.empty()){\n                int idx2;\n                std::tie(std::ignore, idx2) = *set.begin();\n                idx2 = -idx2;\n                \n                if(idx2 <= idx){set.erase(set.begin());}\n                else{break;}\n            }            \n        }\n    }\n\n    printf(\"%d\\n\", res);\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#include <queue>\n#define N 300\nusing namespace std;\ntypedef pair<int,int> P;\nint n,p[N][N],s,ans,a1,a2,b1,b2,d[N][N];\npriority_queue<P> A,B;\n\nint main(){\n  cin>>n;\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++) cin>>p[i][j];\n  for(int i=0;i<n;i++){\n    s=0;\n    for(int j=0;j<n;j++) s+=p[j][i];\n    A.push(P(s,i));\n  }\n  for(int i=0;i<n;i++){\n    s=0;\n    for(int j=0;j<n;j++) s+=p[i][j];\n    B.push(P(s,i));\n  }\n  P t=A.top(); A.pop();\n  a1=t.second;\n  t=A.top(); A.pop();\n  a2=t.second;\n  t=B.top(); B.pop();\n  b1=t.second;\n  t=B.top(); B.pop();\n  b2=t.second;\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++) d[i][j]=p[i][j];\n  for(int i=0;i<n;i++)\n    for(int j=1;j<n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=1;i<n;i++)\n    for(int j=0;j<n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  for(int i=0;i<n;i++){\n    for(int j=0;j<n;j++){\n      for(int k=i;k<n;k++){\n\tfor(int l=j;l<n;l++){\n\t  //if(!(a1==j||a2==j||a1==l||a2==l||b1==i||b2==i||b1==k||b2==k)) continue;\n\t  int sum=d[k][l],sum2=0;\n\t  if(i&&j) sum=sum-d[i-1][l]-d[k][j-1]+d[i-1][j-1];\n\t  else if(i) sum=sum-d[i-1][l];\n\t  else if(j) sum=sum-d[k][j-1];\n\t  if(k>=1&&l>=1&&k-i>=2&&l-j>=2){\n\t    if(i+1&&j+1) sum2=d[k-1][l-1]-d[i][l-1]-d[k-1][j]+d[i][j];\n\t    else if(i+1) sum2=d[k-1][l-1]-d[i][l-1];\n\t    else if(j+1) sum2=d[k-1][l-1]-d[k-1][j];\n\t  }\n\t  ans=max(ans,sum-sum2);\n\t}\n      }\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "//0310\n#include <bits/stdc++.h>\n\nusing namespace std;\n\n#define FOR(i,a,b) for(int i=(a);i<(b);i++)\n#define REP(i,a) FOR(i,0,a)\n\nconst int MAX_N=300;\n\nconst int INF=1e8;\n\nint N;\nint p[MAX_N+5][MAX_N+5];\n\nint dp[MAX_N+5][MAX_N+5][MAX_N+5],dp2[MAX_N+5][MAX_N+5][MAX_N+5];\n\nint main(){\n\tscanf(\"%d\",&N);\n\tFOR(i,1,N+1){\n\t\tFOR(j,1,N+1){\n\t\t\tscanf(\"%d\",&p[i][j]);\n\t\t}\n\t}\n\tFOR(i,1,N+1){\n\t\tFOR(j,1,N+1){\n\t\t\tfor (int k=i;k>=1;k--){\n\t\t\t\tif (i==k){\n\t\t\t\t\tdp2[i][j][k]=p[i][j];\n\t\t\t\t}else{\n\t\t\t\t\tdp2[i][j][k]=dp2[i][j][k+1]+p[k][j];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tint res=-INF;\n\tFOR(i,1,N+1){\n\t\tFOR(j,1,N+1){\n\t\t\tFOR(k,1,i+1){\n\t\t\t\tdp[i][j][k]=dp2[i][j][k]+max({dp[i][j-1][k]-dp2[i-1][j-1][k+1],dp2[i][j-1][k],0});\n\t\t\t\tres=max(res,dp[i][j][k]);\n\t\t\t}\n\t\t}\n\t}\n\tprintf(\"%d\\n\",res);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#define N 310\n#define INF (1e9)\nusing namespace std;\nint n,p[N][N],ans,c,b,ma,d[N][N];\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  ans=p[1][1];\n  for(int k=1;k<=n;k++){\n    for(int l=k;l<=n;l++){\n      b=c=1;\n      while(b!=n){\n\tma=-INF;\n\tfor(int i=c+1;i<=n;i++){\n\t  int sum=d[i][l]-d[b-1][l]-d[i][k-1]+d[b-1][k-1],sum2=0;\n\t  if(i-b>=2&&l-k>=2) sum2=d[i-1][l-1]-d[b][l-1]-d[i-1][k]+d[b][k];\n\t  if(ma<sum-sum2) ma=sum-sum2,c=i;\n\t}\n\tans=max(ans,ma);\n\tfor(int i=b;i<=c;i++){\n\t  int sum=d[i][l]-d[b-1][l]-d[i][k-1]+d[b-1][k-1],sum2=0;\n\t  if(i-b>=2&&l-k>=2) sum2=d[i-1][l-1]-d[b][l-1]-d[i-1][k]+d[b][k];\n\t  ans=max(ans,sum-sum2);\n\t}\n\tb=c;\n      }\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\nusing namespace std;\ntypedef long long ll;\nint main(){\n  int mp[301][301],n;\n  ll x[301][301]={},y[301][301]={};\n  cin>>n;\n\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++)cin>>mp[i][j],y[i][j]=x[i][j]=mp[i][j];\n  \n  ll ans=-(1e9);\n  for(int i=0;i<n;i++)\n    for(int j=n-2;j>=0;j--) {\n      x[i][j]+=x[i][j+1];\n      y[j][i]+=y[j+1][i];\n      if(ans<x[i][j])ans=x[i][j];\n      if(ans<y[j][i])ans=y[j][i];\n    }\n  \n  for(int i=0;i<n;i++) //tate\n    for(int j=0;j<n;j++)//yoko\n      for(int k=i+1;k<n;k++)//tate\n\tfor(int l=j+1;l<n;l++){//yoko\n\t  ll xu=x[i][j]-x[i][l+1];\n\t  ll xd=x[k][j]-x[k][l+1];\n\t  ll yu=y[i+1][j]-y[k][j];\n\t  ll yd=y[i+1][l]-y[k][l];\n\t  ll sum=xu+xd+yu+yd;\n\t  if(sum>ans)ans=sum;\n\t  \n\t}\n  cout <<ans<<endl;\n\t  \n  return 0; \n}"
  },
  {
    "language": "C++",
    "code": "//0310\n#include <bits/stdc++.h>\n\nusing namespace std;\n\n#define FOR(i,a,b) for(int i=(a);i<(b);i++)\n#define REP(i,a) FOR(i,0,a)\n\nconst int MAX_N=300;\n\nconst int INF=1e8;\n\nint N;\nint p[MAX_N+5][MAX_N+5];\n\nint dp[MAX_N+5][MAX_N+5][MAX_N+5],dp2[MAX_N+5][MAX_N+5][MAX_N+5];\n\nint main(){\n\tscanf(\"%d\",&N);\n\tFOR(i,1,N+1){\n\t\tFOR(j,1,N+1){\n\t\t\tscanf(\"%d\",&p[i][j]);\n\t\t}\n\t}\n\tint res=-INF;\n\tFOR(i,1,N+1){\n\t\tFOR(j,1,N+1){\n\t\t\tfor (int k=i;k>=1;k--){\n\t\t\t\tif (i==k){\n\t\t\t\t\tdp2[i][j][k]=p[i][j];\n\t\t\t\t}else{\n\t\t\t\t\tdp2[i][j][k]=dp2[i][j][k+1]+p[k][j];\n\t\t\t\t}\n\t\t\t\tres=max(res,dp2[i][j][k]);\n\t\t\t}\n\t\t}\n\t}\n\tFOR(i,1,N+1){\n\t\tFOR(j,2,N+1){\n\t\t\tFOR(k,1,i+1){\n\t\t\t\tif (j==2){\n\t\t\t\t\tdp[i][j][k]=dp2[i][j-1][k]+dp2[i][j][k];\n\t\t\t\t}else{\n\t\t\t\t\tdp[i][j][k]=dp2[i][j][k]+max(dp2[i][j-1][k],dp[i][j-1][k]-dp2[i-1][j-1][k+1]);\n\t\t\t\t}\n\t\t\t\tres=max(res,dp[i][j][k]);\n\t\t\t}\n\t\t}\n\t}\n\tprintf(\"%d\\n\",res);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#include <queue>\n#define N 300\nusing namespace std;\ntypedef pair<int,int> P;\nint n,p[N][N],s,ans,a1,a2,b1,b2,d[N][N];\npriority_queue<P> A,B;\n\nint main(){\n  cin>>n;\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++) cin>>p[i][j];\n  for(int i=0;i<n;i++){\n    s=0;\n    for(int j=0;j<n;j++) s+=p[j][i];\n    A.push(P(s,i));\n  }\n  for(int i=0;i<n;i++){\n    s=0;\n    for(int j=0;j<n;j++) s+=p[i][j];\n    B.push(P(s,i));\n  }\n  P t=A.top(); A.pop();\n  a1=t.second;\n  t=A.top(); A.pop();\n  a2=t.second;\n  t=B.top(); B.pop();\n  b1=t.second;\n  t=B.top(); B.pop();\n  b2=t.second;\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++) d[i][j]=p[i][j];\n  for(int i=0;i<n;i++)\n    for(int j=1;j<n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=1;i<n;i++)\n    for(int j=0;j<n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  for(int i=0;i<n;i++){\n    for(int j=0;j<n;j++){\n      for(int k=i;k<n;k++){\n\tfor(int l=j;l<n;l++){\n\t  //if(!(a1==j||a2==j||a1==l||a2==l||b1==i||b2==i||b1==k||b2==k)) continue;\n\t  int sum=d[k][l];\n\t  if(i&&j) sum=sum-d[i-1][l]-d[k][j-1]+d[i-1][j-1];\n\t  else if(i) sum=sum-d[i-1][l];\n\t  else if(j) sum=sum-d[k][j-1];\n\t  if(k-i>=2&&l-j>=2&&k>=1&&l>=1){\n\t    int sum2=d[k-1][l-1];\n\t    if(i+1&&j+1) sum2=sum2-d[i][l-1]-d[k-1][j]+d[i][j];\n\t    else if(i+1) sum2=sum2-d[i][l-1];\n\t    else if(j+1) sum2=sum2-d[k-1][j];\n\t    ans=max(ans,sum-sum2);\n\t  }else ans=max(ans,sum);\n\t}\n      }\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "// #define _GLIBCXX_DEBUG // for STL debug (optional)\n#include <iostream>\n#include <iomanip>\n#include <cstdio>\n#include <string>\n#include <cstring>\n#include <deque>\n#include <list>\n#include <queue>\n#include <stack>\n#include <vector>\n#include <utility>\n#include <algorithm>\n#include <map>\n#include <set>\n#include <complex>\n#include <cmath>\n#include <limits>\n#include <cfloat>\n#include <climits>\n#include <ctime>\n#include <cassert>\n#include <numeric>\n#include <fstream>\n#include <functional>\n#include <bitset>\nusing namespace std;\n\n#define debug(...) fprintf(stderr, __VA_ARGS__)\n#define int long long int\n \ntemplate<typename T> void chmax(T &a, T b) {a = max(a, b);}\ntemplate<typename T> void chmin(T &a, T b) {a = min(a, b);}\ntemplate<typename T> void chadd(T &a, T b) {a = a + b;}\n \ntypedef pair<int, int> pii;\ntypedef long long ll;\n \nint dx[] = {0, 0, 1, -1};\nint dy[] = {1, -1, 0, 0};\nconst ll INF = 1001001001001001LL;\nconst ll MOD = 1000000007LL;\n\nint N, sum[310][310], dp[310][310];\n\n// [lx, rx), [ly, ry) (0-indexed)\nint part_sum(int lx, int ly, int rx, int ry) {\n    return sum[rx][ry] - sum[lx][ry] - sum[rx][ly] + sum[lx][ly];\n}\n\nsigned main() {\n    cin >> N;\n    for(int i=1; i<=N; i++) {\n        for(int j=1; j<=N; j++) {\n            cin >> sum[i][j];\n        }\n    }\n    for(int i=1; i<=N; i++) {\n        for(int j=1; j<=N; j++) {\n            sum[i][j] += sum[i][j-1];\n        }\n    }\n    for(int j=1; j<=N; j++) {\n        for(int i=1; i<=N; i++) {\n            sum[i][j] += sum[i-1][j];\n        }\n    }\n\n    int ans = -INF;\n    for(int l=0; l<N; l++) {\n        for(int r=l+1; r<=N; r++) {\n            // 1 行だけの場合 (0 行目のみ)\n            dp[l][r] = part_sum(0, l, 1, r);\n            chmax(ans, dp[l][r]);\n        }\n    }\n\n    for(int d=1; d<N; d++) {\n        for(int l=0; l<N; l++) {\n            for(int r=l+1; r<=N; r++) {\n                // 1 行だけの場合\n                chmax(ans, part_sum(d, l, d, r));\n\n                // 複数行ある場合\n                int cand1 = -INF, cand2 = -INF;\n           \n                // そのまま伸ばす場合 (d == 1 ならやらない)\n                if(d > 1) {\n                    cand1 = dp[l][r];\n                    \n                    // d-1 行目の内側の面積 (r - l >= 3 の場合のみ)\n                    if(r - l >= 3) cand1 -= part_sum(d-1, l+1, d, r-1);\n\n                    // d 行目の面積\n                    cand1 += part_sum(d, l, d+1, r);\n                }\n                \n                // 切って d-1 行目を上端にする場合\n                {\n                    cand2 = part_sum(d-1, l, d+1, r);\n                }\n\n                dp[l][r] = max(cand1, cand2);\n                chmax(ans, dp[l][r]);\n            }\n        }\n    }\n    cout << ans << endl;\n    return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#define INF 10000000\nusing namespace std;\n\nint main(){\n  int n,x[302][302]={},y[302][302]={};\n  cin>>n;\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++)cin>>y[i][j],x[i][j]=y[i][j];\n\n  /*  for(int i=0;i<300;i++)\n    for(int j=0;j<300;j++) y[i][j]=x[i][j]=-1;\n    n=300;*/\n  \n  for(int i=0;i<n;i++)\n    for(int j=n-2;j>=0;j--) {\n      x[i][j]+=x[i][j+1];\n      y[j][i]+=y[j+1][i];\n    }\n\n  int ans=max(y[0][n-1],y[n-1][0]),sum,K[302][302]={},t=0,f=1;\n  while(f){\n    t++,f=0;\n    for(int i=0;i<n;i++) //yoko\n      for(int j=i+1;j<n;j++) {//yoko\n\tint a=K[i][j],nk=a;\n\tsum=-INF;\n\tfor(int k=a+1;k<n;k++) { //tate\n\t  int X=(x[a][i]-x[a][j+1])+(x[k][i]-x[k][j+1]);\n\t  int Y=(y[a+1][i]-y[k][i])+(y[a+1][j]-y[k][j]);\n\t  if(sum<=X+Y)sum=X+Y,nk=k;\n\t}\n\tans=max(ans,sum);\n\t\n\tif(nk!=n-1)f=1;\n\tfor(int k=a+1;k<nk;k++){//tate\n\t  sum+=(x[k][i+1]-x[k][j])-(x[k-1][i]-x[k-1][j+1]);\n\t  ans=max(ans,sum);\n\t  }\n\tK[i][j]=nk;\n      }\n  }\n  cout <<ans<<endl;\n\t  \n  return 0; \n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\nusing namespace std;\nint k[1000][1000], x[1000][1000], n, cnt, maxn = -10000000;\nint main() {\n\tcin >> n;\n\tfor (int i = 1; i <= n; i++) {\n\t\tfor (int j = 1; j <= n; j++) {\n\t\t\tcin >> k[i][j];\n\t\t}\n\t}\n\tfor (int i = 1; i <= n; i++) {\n\t\tcnt = 0;\n\t\tfor (int j = 1; j <= n; j++) {\n\t\t\tcnt += k[i][j];\n\t\t\tx[i][j] = cnt + x[i - 1][j];\n\t\t}\n\t}\n\tfor (int i = 0; i < n; i++) {\n\t\tfor (int j = 0; j < n; j++) {\n\t\t\tfor (int k = i + 1; k <= n; k++) {\n\t\t\t\tfor (int l = j + 1; l <= n; l++) {\n\t\t\t\t\tmaxn = max(maxn, x[i][j] + x[k][l] - x[i][l] - x[k][j]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tcout << maxn << endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define rep(i,n) for(int i = 0; i < n; i++)\n#define fi first\n#define sc second\nusing namespace std;\ntypedef pair<int, int> P;\ntypedef priority_queue<P, vector<P> > PQ;\n\nint n;\nint ans = -10000;\nint z[300][300],p[300][300];\nint tate[300][300], yoko[300][300];\n\nint main(){\n\tscanf(\"%d\",&n);\n\trep(i,n)rep(j,n)scanf(\"%d\",&z[i][j]);\n\trep(i,n)rep(j,n){\n\t\tp[i][j] = z[i][j];\n\t\ttate[i][j] = p[i][j];\n\t\tyoko[i][j] = p[i][j];\n\t}\n\trep(i,n) for(int j = 1; j < n; j++) yoko[i][j] += yoko[i][j-1];\n\trep(i,n) for(int j = 1; j < n; j++) p[i][j] += p[i][j-1];\n\tfor(int i = 1; i < n; i++) rep(j,n) tate[i][j] += tate[i-1][j];\n\tfor(int i = 1; i < n; i++) rep(j,n) p[i][j] += p[i-1][j];\n\t\n\trep(i,n) rep(j,n){\n\t\tfor(int k = j; k < n; k++){\n\t\t\tif(j != 0) ans = max(ans,yoko[i][k]-yoko[i][j-1]);\n\t\t\telse ans = max(ans,yoko[i][k]);\n\t\t}\n\t}\n\t\n\trep(i,n) rep(j,n){\n\t\tfor(int k = i; k < n; k++){\n\t\t\tif(i != 0) ans = max(ans,tate[k][j]-tate[i-1][j]);\n\t\t\telse ans = max(ans,tate[k][j]);\n\t\t}\n\t}\n\t\n\tfor(int i = 0; i < n; i++){\n\t\tfor(int j = i+1; j < n; j++){\n\t\t\tPQ que;\n\t\t\tif(i == 0){\n\t\t\t\tfor(int k = 0; k < n; k++){\n\t\t\t\t\tint x;\n\t\t\t\t\tif(k != 0) x = p[j][k]-p[j-1][k-1]+p[i][k-1];\n\t\t\t\t\telse x = p[j][k];\n\t\t\t\t\tque.push(P(x,k));\n\t\t\t\t}\n\t\t\t} else{\n\t\t\t\tfor(int k = 0; k < n; k++){\n\t\t\t\t\tint x;\n\t\t\t\t\tif(k != 0) x = p[j][k]-p[i-1][k]-p[j-1][k-1]+p[i][k-1]-p[i-1][k-1];\n\t\t\t\t\telse x = p[j][k]-p[i-1][k];\n\t\t\t\t\tque.push(P(x,k));\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor(int k = 0; k < n; k++){\n\t\t\t\twhile(true){\n\t\t\t\t\tif(que.size() == 0) break;\n\t\t\t\t\tif(que.top().sc <= k) que.pop();\n\t\t\t\t\telse break;\n\t\t\t\t}\n\t\t\t\tif(que.size() == 0) continue;\n\t\t\t\tint t = que.top().sc;\n\t\t\t\tif(i == 0){\n\t\t\t\t\tif(k == 0){\n\t\t\t\t\t\tans = max(ans,yoko[j][t]+tate[j][t]+tate[j][k]+yoko[i][t]-z[j][t]-z[j][k]-z[i][k]-z[i][t]);\n\t\t\t\t\t} else{\n\t\t\t\t\t\tans = max(ans,yoko[j][t]+tate[j][t]+tate[j][k]+yoko[i][t]-yoko[j][k-1]-yoko[i][k-1]-z[j][t]-z[j][k]-z[i][k]-z[i][t]);\n\t\t\t\t\t}\n\t\t\t\t} else if(k == 0){\n\t\t\t\t\tans = max(ans,tate[j][t]+yoko[j][t]+tate[j][k]+yoko[i][t]-tate[i-1][t]-tate[i-1][k]-z[j][t]-z[j][k]-z[i][k]-z[i][t]);\n\t\t\t\t} else{\n\t\t\t\t\tans = max(ans,tate[j][t]-tate[i-1][t]+yoko[j][t]-yoko[j][k-1]+tate[j][k]-tate[i-1][k]+yoko[i][t]-yoko[i][k-1]-z[j][t]-z[i][t]-z[j][k]-z[i][k]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tprintf(\"%d\\n\",ans);\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\nusing namespace std;\n\nint main(){\n  int mp[301][301],n;\n  int x[302][302]={},y[302][302]={};\n  cin>>n;\n\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++)cin>>mp[i][j],y[i][j]=x[i][j]=mp[i][j];\n  \n  int ans=max(mp[0][n-1],mp[n-1][0]);\n  for(int i=0;i<n;i++)\n    for(int j=n-2;j>=0;j--) {\n      x[i][j]+=x[i][j+1];\n      y[j][i]+=y[j+1][i];\n      if(ans<x[i][j])ans=x[i][j];\n      if(ans<y[j][i])ans=y[j][i];\n    }\n  \n  for(int i=0;i<n;i++) //tate\n    for(int j=0;j<n;j++)//yoko\n      for(int k=i+1;k<n;k++)//tate\n\tfor(int l=j+1;l<n;l++){//yoko\n\t  int X=(x[i][j]-x[i][l+1])+(x[k][j]-x[k][l+1]);\n\t  int Y=(y[i+1][j]-y[k][j])+(y[i+1][l]-y[k][l]);\n\t  if(ans<X+Y)ans=X+Y;\n\t}\n  cout <<ans<<endl;\n\t  \n  return 0; \n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#define INF 10000000\nusing namespace std;\n\nint main(){\n  int n,x[302][302]={},y[302][302]={};\n  cin>>n;\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++)cin>>y[i][j],x[i][j]=y[i][j];\n\n  for(int i=0;i<n;i++)\n    for(int j=n-2;j>=0;j--) {\n      x[i][j]+=x[i][j+1];\n      y[j][i]+=y[j+1][i];\n    }\n  \n  int ans=y[0][n-1];\n  for(int i=0;i<n;i++) //yoko\n    for(int j=i+1,sum,a=0;j<n;j++,a=0)//yoko\n      while(a<n-1){\n\tint na=a;\n\tsum=-INF;\n\tfor(int k=a+1;k<n;k++) { //tate\n\t  int X=(x[a][i]-x[a][j+1])+(x[k][i]-x[k][j+1]);\n\t  int Y=(y[a+1][i]-y[k][i])+(y[a+1][j]-y[k][j]);\n\t  if(sum<=X+Y)sum=X+Y,na=k;\n\t}\n\tans=max(ans,sum);\n\t\n\tfor(int k=a+1;k<na;k++){//tate\n\t  sum+=(x[k][i+1]-x[k][j])-(x[k-1][i]-x[k-1][j+1]);\n\t  ans=max(ans,sum);\n\t}\n\tif(a+1==na&&j-i!=1) na=n-1;\n\ta=na;\n      }\n  cout <<ans<<endl;\n  return 0; \n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <cstring>\n#include <cstdlib>\n#include <cmath>\n#include <complex>\n#include <string>\n#include <sstream>\n#include <algorithm>\n#include <numeric>\n#include <vector>\n#include <queue>\n#include <stack>\n#include <functional>\n#include <iostream>\n#include <map>\n#include <set>\nusing namespace std;\ntypedef pair<int,int> P;\ntypedef long long ll;\ntypedef vector<int> vi;\ntypedef vector<ll> vll;\n#define pu push\n#define pb push_back\n#define mp make_pair\n#define eps 1e-9\n#define INF 2000000000\n#define sz(x) ((int)(x).size())\n#define fi first\n#define sec second\n#define SORT(x) sort((x).begin(),(x).end())\n#define all(x) (x).begin(),(x).end()\n#define EQ(a,b) (abs((a)-(b))<eps)\nint N;\nint f[305][305],imos[305][305];\nint l[305],r[305];\nint sum(int i,int j,int k)\n{\n\treturn imos[j][k]-imos[j][k-1]-imos[i-1][k]+imos[i-1][k-1];\n}\nint add(int i,int j,int k)\n{\n\tif(i==j)return f[i][k];\n\treturn f[i][k]+f[j][k];\n}\nint main()\n{\n\tscanf(\"%d\",&N);\n\tfor(int i=1;i<=N;i++)\n\t{\n\t\tfor(int j=1;j<=N;j++)\n\t\t{\n\t\t\tscanf(\"%d\",&f[i][j]);\n\t\t\timos[i][j]=f[i][j];\n\t\t}\n\t}\n\tfor(int i=1;i<=N;i++)\n\t{\n\t\tfor(int j=1;j<=N;j++)\n\t\t{\n\t\t\timos[i][j+1]+=imos[i][j];\n\t\t}\n\t}\n\tfor(int j=1;j<=N;j++)\n\t{\n\t\tfor(int i=1;i<=N;i++)\n\t\t{\n\t\t\timos[i+1][j]+=imos[i][j];\n\t\t}\n\t}\n\tint ans = -INF;\n\tfor(int i=1;i<=N;i++)\n\t{\n\t\tfor(int j=i;j<=N;j++)\n\t\t{\n\t\t\tl[1]=sum(i,j,1);\n\t\t\tfor(int k=2;k<=N;k++)l[k] = max(l[k-1]+add(i,j,k),sum(i,j,k));\n\t\t\tr[N]=sum(i,j,N);\n\t\t\tfor(int k=N-1;k>=1;k--)r[k] = max(r[k+1]+add(i,j,k),sum(i,j,k));\n\t\t\tfor(int k=1;k<N;k++)ans = max(ans,l[k]+r[k+1]);\n\t\t}\n\t}\n\tprintf(\"%d\\n\",ans);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <utility>\n\nusing namespace std;\n\nconst int N = 300;\n\nint n;\nint pixel[N][N];\nint hsum[N + 1][N + 1];\nint vsum[N + 1][N + 1];\n\n// yoko\nint hRangeSum(int row, int s, int t) {\n    return hsum[row][t + 1] - hsum[row][s];\n}\n\n// tate\nint vRangeSum(int col, int s, int t) {\n    return vsum[col][t + 1] - vsum[col][s];\n}\n\nint main() {\n\n    int ans = -30000000;\n\n    cin >> n;\n\n    for(int i = 0; i < n; ++i) {\n        for(int j = 0; j < n; ++j) {\n            cin >> pixel[i][j];\n        }\n    }\n\n    for(int i = 0; i < n; ++i) {\n        vsum[i][0] = 0;\n        hsum[i][0] = 0;\n        for(int j = 1; j <= n; ++j) {\n            hsum[i][j] = hsum[i][j - 1] + pixel[i][j - 1];\n            vsum[i][j] = vsum[i][j - 1] + pixel[j - 1][i];\n        }\n    }\n\n    for(int i = 0; i < n; ++i) {\n        for(int j = i; j < n; ++j) {\n            ans = max(ans, hRangeSum(i, i, j));\n            if(i == j) continue;\n            int max_vsum = vRangeSum(0, i, j);\n            for(int k = 1; k < n; ++k) {\n                int vsum = vRangeSum(k, i, j);\n                ans = max(ans, max(max_vsum + vsum, vsum));\n                max_vsum = max(max_vsum + pixel[i][k] + pixel[j][k], vsum);\n            }\n        }\n    } \n\n    cout << ans << endl;\n\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\nusing namespace std;\nint k[1000][1000], x[1000][1000], n, cnt, maxn = -10000000;\nint main() {\n\tcin >> n;\n\tfor (int i = 1; i <= n; i++) {\n\t\tfor (int j = 1; j <= n; j++) {\n\t\t\tcin >> k[i][j];\n\t\t}\n\t}\n\tfor (int i = 1; i <= n; i++) {\n\t\tcnt = 0;\n\t\tfor (int j = 1; j <= n; j++) {\n\t\t\tcnt += k[i][j];\n\t\t\tx[i][j] = cnt + x[i - 1][j];\n\t\t}\n\t}\n\tif (n < 200) {\n\t\tfor (int i = 0; i < n; i++) {\n\t\t\tfor (int j = 0; j < n; j++) {\n\t\t\t\tfor (int k = i + 1; k <= n; k++) {\n\t\t\t\t\tfor (int l = j + 1; l <= n; l++) {\n\t\t\t\t\t\tif (k - i >= 3 && l - j >= 3) {\n\t\t\t\t\t\t\tmaxn = max(maxn, (x[i][j] + x[k][l] - x[i][l] - x[k][j]) - (x[i + 1][j + 1] + x[k - 1][l - 1] - x[i + 1][l - 1] - x[k - 1][j + 1]));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tmaxn = max(maxn, x[i][j] + x[k][l] - x[i][l] - x[k][j]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\telse {\n\t\tfor (int i = 0; i < n; i++) {\n\t\t\tfor (int j = 0; j < n; j++) {\n\t\t\t\tfor (int k = i + 1; k <= n; k++) {\n\t\t\t\t\tfor (int l = j + 1; l <= n; l++) {\n\t\t\t\t\t\tif (k - i >= 200 && l - j >= 200) {\n\t\t\t\t\t\t\tmaxn = max(maxn, (x[i][j] + x[k][l] - x[i][l] - x[k][j]) - (x[i + 1][j + 1] + x[k - 1][l - 1] - x[i + 1][l - 1] - x[k - 1][j + 1]));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tcout << maxn << endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#include <map>\n#define N 310\n#define ma make_pair\nusing namespace std;\ntypedef pair<int,int> P;\nint n,p[N][N],ans,d[N][N],sum,sum2;\nmap<P,P> m,t;\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  int cnt=0;\n  for(int i=1;i<=n;i++){\n    for(int j=1;j<=n;j++){\n      for(int k=n;k>=i;k--){\n\tfor(int l=n;l>=j;l--){\n\t  if(t.find(P(i,k))!=t.end()&&j>t[P(i,k)].first) continue;\n\t  if(m.find(P(j,l))!=m.end()&&i>m[P(j,l)].first) continue;\n\t  cnt++;\n\t  sum2=0;\n\t  sum=d[k][l]-d[i-1][l]-d[k][j-1]+d[i-1][j-1];\n\t  if(k-i>=2&&l-j>=2) sum2=d[k-1][l-1]-d[i][l-1]-d[k-1][j]+d[i][j];\n\t  ans=max(ans,sum-sum2);\n\t  if(m.find(P(j,l))==m.end()) m.insert(ma(P(j,l),P(k,ans)));\n\t  else if(m[P(j,l)].second<ans) m[P(j,l)]=ma(k,ans);\n\t  if(t.find(P(i,k))==t.end()) t.insert(ma(P(i,k),P(l,ans)));\n\t  else if(t[P(i,k)].second<ans) t[P(i,k)]=ma(l,ans);\n\t}\n      }\n    }\n  }\n  //    cout<<cnt<<endl;\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#include <map>\n#define N 310\n#define ma make_pair\nusing namespace std;\ntypedef pair<int,int> P;\nint n,p[N][N],s,ans,a1,a2,b1,b2,d[N][N],sum,sum2;\nmap<P,P> m,t;\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  int cnt=0;\n  for(int i=1;i<=n;i++){\n    for(int j=1;j<=n;j++){\n      for(int k=n;k>=i;k--){\n\tif(t.find(P(i,k))!=t.end()&&j>t[P(i,k)].first) break;\n\tfor(int l=n;l>=j;l--){\n\t  if(m.find(P(j,l))!=m.end()&&i>m[P(j,l)].first) break;\n\t  cnt++;\n\t  sum2=0;\n\t  sum=d[k][l]-d[i-1][l]-d[k][j-1]+d[i-1][j-1];\n\t  if(k-i>=2&&l-j>=2) sum2=d[k-1][l-1]-d[i][l-1]-d[k-1][j]+d[i][j];\n\t  ans=max(ans,sum-sum2);\n\t  if(m.find(P(j,l))==m.end()) m.insert(ma(P(j,l),P(k,ans)));\n\t  else if(m[P(j,l)].second<sum) m[P(j,l)]=ma(k,sum);\n\t  if(t.find(P(i,k))==t.end()) t.insert(ma(P(i,k),P(l,ans)));\n\t  else if(t[P(i,k)].second<sum) t[P(i,k)]=ma(l,sum);\n\t}\n      }\n    }\n  }\n  //  cout<<cnt<<endl;\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <algorithm>\n\nconst int INF = 1001001001;\nint N;\nint p[301][301], q[301][301];\n\nint sumY(int x, int y1, int y2){\n    return p[y2][x] - p[y1-1][x];\n}\n\nint sumX(int y, int x1, int x2){\n    return q[y][x2] - q[y][x1-1];\n}\n\nint sum51(int x1, int x2, int y1, int y2){\n    return sumX(y1, x1, x2-1) + sumX(y2, x1, x2-1) + sumY(x2, y1, y2);\n}\n\nint sum52(int x1, int x2, int y1, int y2){\n    return sumY(x1, y1, y2-1) + sumY(x2, y1, y2-1) + sumX(y2, x1, x2);\n}\n\nint sumFrame(int x1, int x2, int y1, int y2){\n    return sumY(x1, y1, y2) + sum51(x1+1, x2, y1, y2);\n}\n\n\nint main(){\n    scanf(\"%d\", &N);\n\n    for(int i=1;i<=N;i++){\n        for(int j=1;j<=N;j++){\n            scanf(\"%d\", &p[i][j]);\n            q[i][j] = p[i][j];\n        }\n    }\n\n    for(int i=1;i<=N;i++){\n        for(int j=1;j<=N;j++){\n            p[i][j] += p[i-1][j];\n            q[i][j] += q[i][j-1];\n        }\n    }\n\n    int res = -INF;\n    for(int i=1;i<=N;i++){\n        for(int j=1;j<=N;j++){\n            for(int k=j;k<=N;k++){\n                res = std::max({res, sumX(i, j, k), sumY(i, j, k)});\n            }\n        }\n    }\n\n    for(int i=1;i<=N;i++){\n        for(int j=i+1;j<=N;j++){\n            int mx = -INF, index = 1;\n            for(int k=1,l=2;k<N;){\n                while(l < N && sum51(k, l, i, j) <= sum51(k, l+1, i, j)){\n                    l++;\n                }\n                mx = std::max(mx, sumFrame(index, l, i, j));\n\n                for(;k<l;k++){\n                    int x = sumFrame(k, l, i, j);\n                    if(x > mx){\n                        mx = x;\n                        index = k;\n                    }\n                }\n                l++;\n            }\n            res = std::max(res, mx);\n        }\n    }\n\n    for(int i=1;i<=N;i++){\n        for(int j=i+1;j<=N;j++){\n            int mx = -INF, index = 1;\n            for(int k=1,l=2;k<N;){\n                while(l < N && sum52(i, j, k, l) <= sum52(i, j, k, l+1)){\n                    l++;\n                }\n                mx = std::max(mx, sumFrame(i, j, index, l));\n\n                for(;k<l;k++){\n                    int x = sumFrame(i, j, k, l);\n                    if(x > res){\n                        mx = x;\n                        index = k;\n                    }\n                }\n                l++;\n            }\n            res = std::max(res, mx);\n        }\n    }\n\n    printf(\"%d\\n\", res);\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\nint sum(const vector<vector<int>>& p, int t, int l, int b, int r) {\n  return p[b][r] - p[b][l - 1] - p[t - 1][r] + p[t - 1][l - 1];\n}\n\nint frame(const vector<vector<int>>& p, int t, int l, int b, int r) {\n  int result = sum(p, t, l, b, r);\n  if(b - t > 1 && r - l > 1) result -= sum(p, t + 1, l + 1, b - 1, r - 1);\n  return result;\n}\n\nint main() {\n  int N;\n  cin >> N;\n  vector<vector<int>> p(N, vector<int>(N));\n  for(auto& i: p) for(auto& j: i) cin >> j;\n  for(auto& i: p) i.insert(begin(i), 0);\n  p.insert(begin(p), vector<int>(N + 1, 0));\n\n  for(int i = 1; i <= N; ++i) for(int j = 2; j <= N; ++j) p[i][j] += p[i][j - 1];\n  for(int i = 2; i <= N; ++i) for(int j = 1; j <= N; ++j) p[i][j] += p[i - 1][j];\n\n  int answer = -1000;\n  for(int top = 1; top <= N; ++top) for(int bottom = top; bottom <= N; ++bottom) {\n    int left = 1;\n    for(int right = 1; right <= N; ++right) {\n      int tlbr = frame(p, top, left, bottom, right);\n      answer = max(answer, tlbr);\n      int r = frame(p, top, right, bottom, right);\n      int tlb = tlbr - r + frame(p, top, right, top, right) + frame(p, bottom, right, bottom, right);\n      if(top == bottom) tlb -= frame(p, bottom, right, bottom, right);\n      if(r > tlb) left = right;\n    }\n  }\n  cout << answer << endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define INF (1e9)\n#define N 305\nusing namespace std;\nint n,p[N][N],d[N][N],ans=-INF;\n\nint sum(int y1,int x1,int y2,int x2){\n  return d[y2][x2]-d[y2][x1-1]-d[y1-1][x2]+d[y1-1][x1-1];\n}\n\nint cal(int s,int g){\n  int mx,res;\n  res=mx=sum(s,1,g,1);\n  for(int i=2;i<=n;i++){\n    int t=sum(s,i,g,i);\n    res=max(res,max(mx+t,t));\n    if(s!=g)mx=max(t,mx+sum(s,i,s,i)+sum(g,i,g,i));\n    else mx=max(t,mx+sum(g,i,g,i));\n  }\n  return res;\n}\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++){\n      cin>>p[i][j];\n      d[i][j]=p[i][j];\n    }\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++)d[i][j]+=d[i][j-1];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++)d[j][i]+=d[j-1][i];\n  for(int i=1;i<=n;i++)\n    for(int j=i;j<=n;j++)ans=max(ans,cal(i,j));\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nint n;\nint p[310][310] = {};\nint rui[310][310] = {};\n\n\ntypedef struct{\n  int num;\n  int idx;\n} Data;\nData dp[310][310][310] = {};\n\nint getRuiseki(int x1, int y1, int x2,int y2){\n  if(x1 > x2 || y1 > y2)        return 0;\n  x2++; y2++;\n  return rui[y2][x2] - rui[y2][x1] - rui[y1][x2] + rui[y1][x1];\n}\n\nint getDonut(int x1, int y1, int x2, int y2){\n  return getRuiseki(x1,y1,x2,y2) - getRuiseki(x1+1,y1+1,x2-1,y2-1);\n}\n\nint getL(int x1, int x2, int y){\n  return getRuiseki(x1,0,x2,y) - getRuiseki(x1, 0, x2-1, y-1);\n}\n\nint main(){\n  cin >> n;\n  for(int i = 1;i <= n;i++){\n    for(int j = 1;j <= n;j++){\n      cin >> rui[i][j];\n    }\n  }\n\n  for(int i = 0;i <= n;i++){\n    for(int j = 0;j <= n;j++){\n      rui[i][j+1] += rui[i][j];\n    }\n  }\n\n  for(int j = 0;j <= n;j++){\n    for(int i = 0;i <= n;i++){\n      rui[i+1][j] += rui[i][j];\n    }\n  }\n\n\n  /*\n  for(int finx = n-1;finx >= 0;finx--){\n    for(int x = finx;x >= 0;x--){\n      dp[finx][x][n-1].num = getL(x, finx, n-1);\n      dp[finx][x][n-1].idx = n-1;\n      for(int y = n-2;y >= 0;y--){\n        int tmp = getL(x, finx, y);\n        if(tmp > dp[finx][x][y+1].num){\n          dp[finx][x][y].num = tmp;\n          dp[finx][x][y].idx = y;\n        }else{\n          dp[finx][x][y] = dp[finx][x][y+1];\n        }\n      }\n    }\n  }\n  */\n\n\n  int ans = INT_MIN;\n  for(int x = 0; x < n; x++){\n    for(int y = 0;y < n;y++){\n\n      for(int x2 = x;x2 < n;x2++)\n        for(int y2 = y;y2 < n;y2++)\n          ans = max(ans,getDonut(x,y,x2,y2));\n\n      //for(int x2 = x;x2 < n;x2++){\n        //ans = max(ans,getDonut(x,y,x2,dp[x2][x][y].idx));\n      //}\n    }\n  }\n\n\n  cout << ans << endl;\n\n  return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define INF (1e9)\n#define N 305\nusing namespace std;\nint n,p[N][N],d[N][N],ans=-INF;\n\nint sum(int y1,int x1,int y2,int x2){\n  return d[y2][x2]-d[y2][x1-1]-d[y1-1][x2]+d[y1-1][x1-1];\n}\n\nint cal(int s,int g){\n  int mx,res;\n  res=mx=sum(s,0,g,0);\n  for(int i=1;i<n;i++){\n    int t=sum(s,i,g,i);\n    res=max(res,max(mx+t,t));\n    if(s!=g)mx=max(t,mx+sum(s,i,s,i)+sum(g,i,g,i));\n    else mx=max(t,mx+sum(g,i,g,i));\n  }\n  return res;\n}\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++){\n      cin>>p[i][j];\n      d[i][j]=p[i][j];\n    }\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++)d[i][j]+=d[i][j-1];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++)d[j][i]+=d[j-1][i];\n  for(int i=1;i<=n;i++)\n    for(int j=i;j<n;j++)ans=max(ans,cal(i,j));\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\nusing namespace std;\n\nint main(){\n  int n,x[302][302]={},y[302][302]={};\n  cin>>n;\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++)cin>>y[i][j],x[i][j]=y[i][j];\n  \n  int ans=max(y[0][n-1],y[n-1][0]);\n  for(int i=0;i<n;i++)\n    for(int j=n-2;j>=0;j--) {\n      x[i][j]+=x[i][j+1];\n      y[j][i]+=y[j+1][i];\n    }\n\n  \n  int sum[302][302],K[2][302][302]={},t=0,f=1;\n  while(f){\n    t++,f=0;\n    for(int i=0;i<n;i++) //yoko\n      for(int j=i+1;j<n;j++) {//yoko\n\tint a=K[t%2][i][j],&b=K[(t+1)%2][i][j];\n\tb=a;\n\tsum[i][j]=-10000000;\n\n\tfor(int k=a+1;k<n;k++) { //tate\n\t  int X=(x[a][i]-x[a][j+1])+(x[k][i]-x[k][j+1]);\n\t  int Y=(y[a+1][i]-y[k][i])+(y[a+1][j]-y[k][j]);\n\t  if(sum[i][j]<=X+Y)sum[i][j]=X+Y,b=k;\n\t}\n\t\n\tif(b!=n-1)f=1;\n\tans=max(ans,sum[i][j]);\n\tfor(int k=a+1;k<b;k++){//tate\n\t  sum[i][j]+=(x[k][i+1]-x[k][j])-(x[k-1][i]-x[k-1][j+1]);\n\t  ans=max(ans,sum[i][j]);\n\t}\n      }\n  }\n  cout <<ans<<endl;\n\t  \n  return 0; \n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#define N 310\n#define INF (1e9)\nusing namespace std;\nint n,p[N][N],ans,c,b,ma,d[N][N];\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  ans=p[0][0];\n  for(int k=1;k<=n;k++){\n    for(int l=k+1;l<=n;l++){\n      b=c=1;\n      while(1){\n\tma=-INF;\n\tfor(int i=c+1;i<=n;i++){\n\t  int sum=d[i][l]-d[b-1][l]-d[i][k-1]+d[b-1][k-1],sum2=0;\n\t  if(i-b>=2&&l-k>=2) sum2=d[i-1][l-1]-d[b][l-1]-d[i-1][k]+d[b][k];\n\t  if(ma<sum-sum2) ma=sum-sum2,c=i;\n\t}\n\tans=max(ans,ma);\n\tfor(int i=b+1;i<c;i++){\n\t  int sum=d[i][l]-d[b-1][l]-d[i][k-1]+d[b-1][k-1],sum2=0;\n\t  if(i-b>=2&&l-k>=2) sum2=d[i-1][l-1]-d[b][l-1]-d[i-1][k]+d[b][k];\n\t  ans=max(ans,sum-sum2);\n\t}\n\tif(b==n-1) break;\n\tb=c;\n      }\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstring>\nusing namespace std;\n int mem[2][302][302];\nint main(){\n  int n,x[302][302]={},y[302][302]={};\n  cin>>n;\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++)cin>>y[i][j],x[i][j]=y[i][j];\n  \n  int ans=max(y[0][n-1],y[n-1][0]);\n  for(int i=0;i<n;i++)\n    for(int j=n-2;j>=0;j--) {\n      x[i][j]+=x[i][j+1];\n      y[j][i]+=y[j+1][i];\n      if(ans<x[i][j])ans=x[i][j];\n      if(ans<y[j][i])ans=y[j][i];\n    }\n  n=300;\n  for(int i=0;i<=n;i++)\n    for(int j=0;j<=n;j++) mem[0][i][j]=mem[1][i][j]=-1000000000; \n\n  for(int i=0;i<n;i++){ //tate\n    for(int j=0;j<n;j++){//yoko\n      for(int k=i+1;k<n;k++){//tate\n\tfor(int l=j+1;l<n;l++){//yoko\n\t  int X=(x[i][j]-x[i][l+1]);\n\t  int Y=(y[i+1][j]-y[k][j]);\n\t  if(X<=mem[0][j][l]||Y<=mem[1][i+1][k])continue;\n\t  mem[0][j][l]=X;\n\t  mem[1][i+1][k]=Y;\n\t  X+=(x[k][j]-x[k][l+1]);\t  \n\t  Y+=(y[i+1][l]-y[k][l]);\n\t  if(ans<X+Y)ans=X+Y;\n\t}\n      }\n    }\n  }\n  cout <<ans<<endl;\n\t  \n  return 0; \n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\ntypedef double D;\n#define INF 1000000000\nint n,ans=-INF;\nint m[1005][1005],r[1005][1005],u[1005][1005];\nint main(void){\n    scanf(\"%d\",&n);\n    for(int i=1;i<=n;i++){\n        for(int j=1;j<=n;j++){\n            scanf(\"%d\",&m[i][j]);\n            r[i][j]+=m[i][j];\n            u[i][j]+=m[i][j];\n            r[i][j+1]+=r[i][j];\n            u[i+1][j]+=u[i][j];\n        }\n    }\n    for(int a=1;a<=n;a++){\n        for(int i=1;i<=n;i++)for(int j=i;j<=n;j++)ans=max(ans,u[j][a]-u[i-1][a]);\n        for(int b=a+1;b<=n;b++){\n            int p=-INF;\n            for(int i=1;i<=n;i++){\n                ans=max(ans,p+u[i-1][a]+u[i-1][b]+r[i][b]-r[i][a-1]);\n                p=max(p,r[i][b-1]-r[i][a]-u[i-1][b]-u[i-1][a]);\n            }\n        }\n    }\n    for(int a=1;a<=n;a++)for(int i=1;i<=n;i++)for(int j=i;j<=n;j++)ans=max(ans,r[a][j]-r[a][i-1]);\n    printf(\"%d\\n\",ans);\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#define N 310\nusing namespace std;\ntypedef pair<int,int> P;\nint n,p[N][N],s,ans,a1,a2,b1,b2,d[N][N],A[N],B[N],C[N],D[N];\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++){\n    s=0;\n    for(int j=1;j<=n;j++) s+=p[j][i];\n    A[i]=C[i]=s;\n  }\n  for(int i=1;i<=n;i++){\n    s=0;\n    for(int j=1;j<=n;j++) s+=p[i][j];\n    B[i]=D[i]=s;\n  }\n  sort(C+1,C+n+1);\n  sort(D+1,D+n+1);\n  reverse(C+1,C+n+1);\n  reverse(D+1,D+n+1);\n  if(n!=1){\n    for(int i=1;i<=n;i++)\n      for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n    for(int i=1;i<=n;i++)\n      for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n    for(int i=2;i<=n;i++)\n      for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n    for(int i=1;i<=n;i++){\n      for(int j=1;j<=n;j++){\n\tfor(int k=i+1;k<=n;k++){\n\t  for(int l=j+1;l<=n;l++){\n\t    int a1=C[1],a2=C[2],b1=D[1],b2=D[2];\n\t    if(!(a1==A[j]||a2==A[j]||a1==A[l]||a2==A[l]||b1==B[i]||b2==B[i]||b1==B[k]||b2==B[k])) continue;\n\t    int sum=d[k][l]-d[i-1][l]-d[k][j-1]+d[i-1][j-1];\n\t    int sum2=d[k-1][l-1]-d[i][l-1]-d[k-1][j]+d[i][j];\n\t    if(k-i>=2&&l-j>=2) ans=max(ans,sum-sum2);\n\t    else ans=max(ans,sum);\n\t  }\n\t}\n      }\n    }\n    cout<<ans<<endl;\n  }else cout<<p[0][0]<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\n#include<cstdio>\n#include<cmath>\n#include<cctype>\n#include<math.h>\n#include<string>\n#include<string.h>\n#include<stack>\n#include<queue>\n#include<vector>\n#include<utility>\n#include<set>\n#include<map>\n#include<stdlib.h>\n#include<iomanip>\n\nusing namespace std;\n\n#define ll long long\n#define ld long double\n#define EPS 0.0000000001\n#define INF 1e9\n#define LINF (ll)INF*INF\n#define MOD 1000000007\n#define rep(i,n) for(int i=0;i<(n);i++)\n#define loop(i,a,n) for(int i=a;i<(n);i++)\n#define all(in) in.begin(),in.end()\n#define shosu(x) fixed<<setprecision(x)\n\n#define int ll //!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n\ntypedef vector<int> vi;\ntypedef vector<string> vs;\ntypedef pair<int,int> pii;\ntypedef vector<pii> vp;\n\nint gcd(int a, int b){\n    if(b==0) return a;\n    return gcd(b,a%b);\n}\nint lcm(int a, int b){\n    return a/gcd(a,b)*b;\n}\n\n\nsigned main(void) {\n    int n;\n    cin >> n;\n    vector<vi> a(n,vi(n));\n    rep(i,n)rep(j,n)cin >> a[i][j];\n\n    vector<vi> tate,yoko;\n    tate = yoko = a;\n    rep(i,n)rep(j,n-1){\n        tate[j+1][i] += tate[j][i];\n        yoko[i][j+1] += yoko[i][j];\n    }\n\n    int ans = -INF;\n    rep(i,n)loop(j,i,n){\n\n        /*\n            左端が l のとき\n            + (tate[j-1][l] - tate[i][l]) - yoko[i][l-1] - yoko[j][l-1]\n            右端が r のとき\n            + (tate[j-1][r] - tate[i][r]) - (yoko[i][n-1] - yoko[i][r]) - (yoko[j][n-1] - yoko[j][r])\n        */\n\n        // l = r のとき\n        rep(l,n){\n            int tmp = yoko[i][l] + yoko[j][l];\n            if(l)tmp -= yoko[i][l-1] + yoko[j][l-1];\n            if(i < j)tmp += tate[j-1][l] - tate[i][l];\n            if(i == j)tmp /= 2;\n            ans = max(ans, tmp);\n        }\n\n        // l < r のとき\n        int geta = yoko[i][n-1] + yoko[j][n-1];// i 行目と j 行目を選択\n        vi ma(n,0);// ma[r] := 右端が r 列目以降であるときの最大値\n        if(i < j)ma[n-1] = tate[j-1][n-1] - tate[i][n-1]; // r = n-1 のとき\n        for(int r = n-2; r >= 0; r--){\n            int tmp = 0;\n            if(i < j)tmp = (tate[j-1][r] - tate[i][r]);\n            tmp -= (yoko[i][n-1] - yoko[i][r]) + (yoko[j][n-1] - yoko[j][r]);\n            ma[r] = max(ma[r+1], tmp);\n        }\n\n        int sum = -INF;\n        rep(l,n){ // 左端を l にしたときの最大値\n            int tmp = 0;\n            if(i < j)tmp = (tate[j-1][l] - tate[i][l]);\n            if(l)tmp -= yoko[i][l-1] + yoko[j][l-1];\n            if(l < n-1)tmp += ma[l+1];\n            sum = max(sum, tmp);\n        }\n\n        int tmp = geta + sum;\n        if(i == j)tmp /= 2;\n        ans = max(ans, tmp);\n    }\n    cout << ans << endl;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#include <map>\n#define N 310\n#define ma make_pair\nusing namespace std;\ntypedef pair<int,int> P;\nint n,p[N][N],s,ans,a1,a2,b1,b2,d[N][N],sum,sum2;\nmap<P,P> m,t;\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  int cnt=0;\n  for(int i=1;i<=n;i++){\n    for(int j=1;j<=n;j++){\n      for(int k=n;k>=i;k--){\n\tif(t.find(P(i,k))!=t.end()&&j>t[P(i,k)].first) continue;\n\tfor(int l=n;l>=j;l--){\n\t  if(m.find(P(j,l))!=m.end()&&i>m[P(j,l)].first) continue;\n\t  cnt++;\n\t  sum2=0;\n\t  sum=d[k][l]-d[i-1][l]-d[k][j-1]+d[i-1][j-1];\n\t  if(k-i>=2&&l-j>=2) sum2=d[k-1][l-1]-d[i][l-1]-d[k-1][j]+d[i][j];\n\t  ans=max(ans,sum-sum2);\n\t  if(m.find(P(j,l))==m.end()) m.insert(ma(P(j,l),P(k,ans)));\n\t  else if(m[P(j,l)].second<sum) m[P(j,l)]=ma(k,sum);\n\t  if(t.find(P(i,k))==t.end()) t.insert(ma(P(i,k),P(l,ans)));\n\t  else if(t[P(i,k)].second<sum) t[P(i,k)]=ma(l,sum);\n\t}\n      }\n    }\n  }\n  //  cout<<cnt<<endl;\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#define N 310\n#define INF (1e9)\nusing namespace std;\nint n,p[N][N],ans,c,b,ma,d[N][N];\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  ans=p[0][0];\n  for(int k=1;k<=n;k++){\n    for(int l=k;l<=n;l++){\n      b=c=1;\n      while(b!=n){\n\tma=-INF;\n\tfor(int i=c;i<=n;i++){\n\t  int sum=d[i][l]-d[b-1][l]-d[i][k-1]+d[b-1][k-1],sum2=0;\n\t  if(i-b>=2&&l-k>=2) sum2=d[i-1][l-1]-d[b][l-1]-d[i-1][k]+d[b][k];\n\t  if(ma<sum-sum2) ma=sum-sum2,c=i;\n\t}\n\tans=max(ans,ma);\n\tfor(int i=b+1;i<c;i++){\n\t  int sum=d[i][l]-d[b-1][l]-d[i][k-1]+d[b-1][k-1],sum2=0;\n\t  if(i-b>=2&&l-k>=2) sum2=d[i-1][l-1]-d[b][l-1]-d[i-1][k]+d[b][k];\n\t  ans=max(ans,sum-sum2);\n\t}\n\tb=c;\n      }\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "//1\n\n#include <bits/stdc++.h>\n\nusing namespace std;\n\n#define FOR(i,a,b)for(int i=(a); i<(b); i++)\n#define REP(i,n)FOR(i,0,n)\n#define ALL(v) (v).begin(),(v).end()\n#define fi first\n#define se second\n\ntemplate<typename A, typename B> inline bool chmax(A &a, B b){if (a<b){a = b; return 1;}return 0;}\ntemplate<typename A, typename B> inline bool chmin(A &a, B b){if (a>b){a = b; return 1;}return 0;}\n\ntypedef long long ll;\ntypedef pair<int,int> pii;\ntypedef pair<ll,ll>pll;\ntypedef pair<int,pii>pip;\n\nconst ll INF = 1e9+100;\nconst ll MOD = 1e9+7;\nconst double EPS = 1e-10;\nconst bool debug = 1;\n\nint N;\nint p[300][300];\nint sum[300][301];\nint d[300], ma[300];\n\nint main(){\n\tcin >> N;\n\tREP(i, N) REP(j, N) scanf(\"%d\", &p[i][j]);\n\t\n\tREP(i, N) REP(j, N) sum[i][j + 1] = sum[i][j] + p[i][j];\n\t\n\tll ans = -INF;\n\tREP(i, N) REP(j, N) {\n\t\tint sum = 0;\n\t\tFOR(h, i, N) {\n\t\t\tsum += p[h][j];\n\t\t\tchmax(ans, sum);\n\t\t}\n\t}\n\tREP(i, N) REP(j, N) {\n\t\tint sum = 0;\n\t\tFOR(w, j, N) {\n\t\t\tsum += p[i][w];\n\t\t\tchmax(ans, sum);\n\t\t}\n\t}\n\t\n\tFOR(x, 1, N) {\n\t\tREP(w, N) {\n\t\t\t// [x - 1, x + w] ?¨??£????[x, x+w)\n\t\t\tif (x + w >= N) break;\n\t\t\td[0] = sum[0][x+w+1]-sum[0][x];\n\t\t\t\n\t\t\tREP(i, N - 1) d[i + 1] = d[i] - (sum[i][x+w] - sum[i][x]) + (sum[i + 1][x+w+1] - sum[i + 1][x - 1]);\n\t\t\t\n\t\t\tma[N - 2] = d[N - 1];\n\t\t\tfor (int i = N - 3; i >= 0; i--) ma[i] = max(ma[i + 1], d[i + 1]);\n\t\t\t\n\t\t\tREP(i, N - 1) {\n\t\t\t\tchmax(ans, ma[i] - d[i] + (sum[i][x+w+1]-sum[i][x-1]) + (sum[i][x+w]-sum[i][x]));\n\t\t\t}\n\t\t}\n\t}\n\t\n\tcout << ans << endl;\n\t\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n#define INF (1e9)\n#define N 305\nusing namespace std;\nint n,p[N][N],d[N][N],ans=-INF;\n\nint sum(int y1,int x1,int y2,int x2){\n  return d[y2][x2]-d[y2][x1-1]-d[y1-1][x2]+d[y1-1][x1-1];\n}\n\nint cal(int s,int g){\n  int mx,res;\n  res=mx=sum(s,1,g,1);\n  for(int i=2;i<=n;i++){\n    int t=sum(s,i,g,i);\n    res=max(res,max(mx+t,t));\n    if(s!=g)mx=max(t,mx+sum(s,i,s,i)+sum(g,i,g,i));\n    else mx=max(t,mx+sum(g,i,g,i));\n  }\n  return res;\n}\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++){\n      cin>>p[i][j];\n      d[i][j]=p[i][j];\n    }\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++)d[i][j]+=d[i][j-1];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++)d[j][i]+=d[j-1][i];\n  for(int i=1;i<=n;i++)\n    for(int j=i;j<n;j++)ans=max(ans,cal(i,j));\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define rep(i,n) for(int i = 0; i < n; i++)\n#define fi first\n#define sc second\nusing namespace std;\ntypedef pair<int, int> P;\ntypedef priority_queue<P, vector<P> > PQ;\n\nint n;\nint ans = -10000;\nint z[300][300],p[300][300];\nint tate[300][300], yoko[300][300];\n\nint main(){\n\tscanf(\"%d\",&n);\n\trep(i,n)rep(j,n)scanf(\"%d\",&z[i][j]);\n\trep(i,n)rep(j,n){\n\t\tp[i][j] = z[i][j];\n\t\ttate[i][j] = p[i][j];\n\t\tyoko[i][j] = p[i][j];\n\t}\n\trep(i,n) for(int j = 1; j < n; j++) yoko[i][j] += yoko[i][j-1];\n\trep(i,n) for(int j = 1; j < n; j++) p[i][j] += p[i][j-1];\n\tfor(int i = 1; i < n; i++) rep(j,n) tate[i][j] += tate[i-1][j];\n\tfor(int i = 1; i < n; i++) rep(j,n) p[i][j] += p[i-1][j];\n\t\n\trep(i,n) rep(j,n){\n\t\tfor(int k = j; k < n; k++){\n\t\t\tif(j != 0) ans = max(ans,yoko[i][k]-yoko[i][j-1]);\n\t\t\telse ans = max(ans,yoko[i][k]);\n\t\t}\n\t}\n\t\n\trep(i,n) rep(j,n){\n\t\tfor(int k = i; k < n; k++){\n\t\t\tif(i != 0) ans = max(ans,tate[k][j]-tate[i-1][j]);\n\t\t\telse ans = max(ans,tate[k][j]);\n\t\t}\n\t}\n\t\n\tfor(int i = 0; i < n; i++){\n\t\tfor(int j = i+1; j < n; j++){\n\t\t\tPQ que;\n\t\t\tif(i == 0){\n\t\t\t\tfor(int k = 0; k < n; k++){\n\t\t\t\t\tint x;\n\t\t\t\t\tif(k != 0) x = p[j][k]-p[j-1][k-1]+p[i][k-1];\n\t\t\t\t\telse x = p[j][k];\n\t\t\t\t\tque.push(P(x,k));\n\t\t\t\t}\n\t\t\t} else{\n\t\t\t\tfor(int k = 0; k < n; k++){\n\t\t\t\t\tint x;\n\t\t\t\t\tif(k != 0) x = p[j][k]-p[i-1][k]-p[j-1][k-1]+p[i][k-1];\n\t\t\t\t\telse x = p[j][k]-p[i-1][k];\n\t\t\t\t\tque.push(P(x,k));\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor(int k = 0; k < n; k++){\n\t\t\t\twhile(true){\n\t\t\t\t\tif(que.size() == 0) break;\n\t\t\t\t\tif(que.top().sc <= k) que.pop();\n\t\t\t\t\telse break;\n\t\t\t\t}\n\t\t\t\tif(que.size() == 0) break;\n\t\t\t\tint t = que.top().sc;\n\t\t\t\tif(i == 0){\n\t\t\t\t\tif(k == 0){\n\t\t\t\t\t\tans = max(ans,yoko[j][t]+tate[j][t]+tate[j][k]+yoko[i][t]-z[j][t]-z[j][k]-z[i][k]-z[i][t]);\n\t\t\t\t\t} else{\n\t\t\t\t\t\tans = max(ans,yoko[j][t]+tate[j][t]+tate[j][k]+yoko[i][t]-yoko[j][k-1]-yoko[i][k-1]-z[j][t]-z[j][k]-z[i][k]-z[i][t]);\n\t\t\t\t\t}\n\t\t\t\t} else if(k == 0){\n\t\t\t\t\tans = max(ans,tate[j][t]+yoko[j][t]+tate[j][k]+yoko[i][t]-tate[i-1][t]-tate[i-1][k]-z[j][t]-z[j][k]-z[i][k]-z[i][t]);\n\t\t\t\t} else{\n\t\t\t\t\tans = max(ans,tate[j][t]-tate[i-1][t]+yoko[j][t]-yoko[j][k-1]+tate[j][k]-tate[i-1][k]+yoko[i][t]-yoko[i][k-1]-z[j][t]-z[i][t]-z[j][k]-z[i][k]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tprintf(\"%d\\n\",ans);\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\nint INF=1e9;\nint n;\nint t[301][301];\nint u[301][301];\n\nint sum(int ai,int aj,int bi,int bj){\n  ai--,aj--;\n  return u[bi][bj]-u[ai][bj]-u[bi][aj]+u[ai][aj];\n}\n\nint calc(int ah,int bh){\n  int res=-INF;\n  int maxm=0;\n  for(int i=1;i<=n;i++){\n    res=max(res,maxm+sum(ah,i,bh,i));\n    int d=t[ah][i]+t[bh][i];\n    if(ah==bh)d/=2;\n    maxm=max(maxm+d,sum(ah,i,bh,i));\n  }\n  return res;\n}\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++){\n    for(int j=1;j<=n;j++){\n      cin>>t[i][j];\n      u[i][j]=t[i][j]+u[i-1][j]+u[i][j-1]-u[i-1][j-1];\n    }\n  }\n  int ans=-INF;\n  for(int i=1;i<=n;i++){\n    for(int j=i;j<=n;j++){\n      ans=max(ans,calc(i,j));\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#define N 310\n#define INF (1e9)\nusing namespace std;\nint n,p[N][N],ans,c,b,ma,d[N][N];\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  ans=d[0][0];\n  for(int k=1;k<=n;k++){\n    for(int l=k+1;l<=n;l++){\n      b=c=1;\n      while(1){\n\tma=-INF;\n\tfor(int i=c+1;i<=n;i++){\n\t  int sum=d[i][l]-d[b-1][l]-d[i][k-1]+d[b-1][k-1],sum2=0;\n\t  if(i-b>=2&&l-k>=2) sum2=d[i-1][l-1]-d[b][l-1]-d[i-1][k]+d[b][k];\n\t  if(ma<sum-sum2) ma=sum-sum2,c=i;\n\t  ans=max(ans,sum-sum2);\n\t}\n\tfor(int i=b+1;i<=c;i++){\n\t  int sum=d[i][l]-d[b-1][l]-d[i][k-1]+d[b-1][k-1],sum2=0;\n\t  if(i-b>=2&&l-k>=2) sum2=d[i-1][l-1]-d[b][l-1]-d[i-1][k]+d[b][k];\n\t  ans=max(ans,sum-sum2);\n\t}\n\tif(c==n) break;\n\tb=c;\n      }\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#define N 310\n#define INF (1e9)\nusing namespace std;\nint n,p[N][N],ans,c,b,ma,d[N][N];\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  ans=-INF;\n  for(int k=1;k<=n;k++){\n    for(int l=k+1;l<=n;l++){\n      b=c=1;\n      while(1){\n\tma=-INF;\n\tfor(int i=c+1;i<=n;i++){\n\t  int sum=d[i][l]-d[b-1][l]-d[i][k-1]+d[b-1][k-1],sum2=0;\n\t  if(i-b>=2&&l-k>=2) sum2=d[i-1][l-1]-d[b][l-1]-d[i-1][k]+d[b][k];\n\t  if(ma<sum-sum2) ma=sum-sum2,c=i;\n\t  ans=max(ans,sum-sum2);\n\t}\n\tfor(int i=b+1;i<=c;i++){\n\t  int sum=d[i][l]-d[b-1][l]-d[i][k-1]+d[b-1][k-1],sum2=0;\n\t  if(i-b>=2&&l-k>=2) sum2=d[i-1][l-1]-d[b][l-1]-d[i-1][k]+d[b][k];\n\t  ans=max(ans,sum-sum2);\n\t}\n\tif(c==n) break;\n\tb=c;\n      }\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\n#define int long long\nusing namespace std;\n\nint n;\nint num[400][400];\nint rui[400][400];\n\nint solve(int l, int r){\n\tint dp[400];\n\tdp[n-1] = INT_MIN;\n\t\n\tif(l == r){\n\t\tfor(int i = n-2;i >= 0;i--){\n\t\t \tdp[i] = max(num[i+1][l], dp[i+1] + num[i+1][l]);\n\t\t }\n\t}else{\n\t\tfor(int i = n-2;i >= 0;i--){\n\t\t\tdp[i] = max(rui[i+1][r+1]-rui[i+1][l], dp[i+1] + num[i+1][r] + num[i+1][l]);\n\t\t}\n\t}\n\t\n\tint ans = INT_MIN;\n\tfor(int i = 0;i < n;i++){\n\t\tint tmp = rui[i][r+1]-rui[i][l];\n\t\tans = max({ans, tmp, tmp + dp[i]});\n\t}\n\t\n\treturn ans;\n}\n\nsigned main(){\n\tcin >> n;\n\t\n\tfor(int i = 0;i < n;i++){\n\t\tfor(int j = 0;j < n;j++){\n\t\t\tcin >> num[i][j];\n\t\t\trui[i][j+1] += rui[i][j] + num[i][j];\n\t\t}\n\t}\n\t\n\tint ans = INT_MIN;\n\tfor(int i = 0;i < n;i++){\n\t\tfor(int j = i;j < n;j++){\n\t\t\tans = max(ans, solve(i, j));\n\t\t}\n\t}\n\t\n\tcout << ans << endl;\n\t\n\treturn 0;\n}\n\t\t\t\n\n"
  },
  {
    "language": "C++",
    "code": "#include <stdio.h>\n#include <iostream>\n#include <algorithm>\nusing namespace std;\n\n#define MAX_N 300\n\nint nSize;\nint frame[MAX_N][MAX_N];\n\nint maxSum;\nint rowSum[MAX_N][MAX_N+1];\nint colSum[MAX_N][MAX_N+1];\n\nint RowSum(int i, int s, int e){return rowSum[i][e+1] - rowSum[i][s];}\nint ColSum(int j, int s, int e){return colSum[j][e+1] - colSum[j][s];}\n\nvoid InitSum(){\n    for(int i=0;i<nSize;i++){\n        rowSum[i][0]=0;\n        colSum[i][0]=0;\n        for(int k=1;k<=nSize;k++){\n            rowSum[i][k]=rowSum[i][k-1]+frame[i][k-1];\n            colSum[i][k]=colSum[i][k-1]+frame[k-1][i];\n        }\n    }\n}\n\nvoid Solve(){\n    InitSum();\n\n    for(int i=0;i<nSize;i++){\n        for(int j=i;j<nSize;j++){\n            maxSum = max(RowSum(i, i, j), maxSum);\n            if(i==j)continue;\n            int colMax = ColSum(0,i,j);\n            for(int k=1;k<nSize;k++){\n                int col = ColSum(k,i,j);\n                maxSum = max(maxSum,max(colMax+col,col));\n                colMax = max(colMax+frame[i][k]+frame[j][k],col);\n            }\n        }\n    }\n    cout<<maxSum<<endl;\n}\n\nint main(){\n\n    scanf(\"%d\", &nSize);\n    for(int i=0;i<nSize;i++){\n        for(int j=0;j<nSize;j++){\n            scanf(\"%d\", &frame[i][j]);\n        }\n    }\n    Solve();\n\n    return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#include <queue>\n#define N 310\nusing namespace std;\ntypedef pair<int,int> P;\nint n,p[N][N],s,ans,a1,a2,b1,b2,d[N][N];\npriority_queue<P> A,B;\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++){\n    s=0;\n    for(int j=1;j<=n;j++) s+=p[j][i];\n    A.push(P(s,i));\n  }\n  for(int i=1;i<=n;i++){\n    s=0;\n    for(int j=1;j<=n;j++) s+=p[i][j];\n    B.push(P(s,i));\n  }\n  if(n!=1){\n    P t=A.top(); A.pop();\n    a1=t.second;\n    t=A.top(); A.pop();\n    a2=t.second;\n    t=B.top(); B.pop();\n    b1=t.second;\n    t=B.top(); B.pop();\n    b2=t.second;\n    for(int i=1;i<=n;i++)\n      for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n    for(int i=1;i<=n;i++)\n      for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n    for(int i=2;i<=n;i++)\n      for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  \n    for(int i=1;i<=n;i++){\n      for(int j=1;j<=n;j++){\n\tfor(int k=i+1;k<=n;k++){\n\t  for(int l=j+1;l<=n;l++){\n\t    if(!(a1==j||a2==j||a1==l||a2==l||b1==i||b2==i||b1==k||b2==k)) continue;\n\t    int sum=d[k][l]-d[i-1][l]-d[k][j-1]+d[i-1][j-1];\n\t    int sum2=d[k-1][l-1]-d[i][l-1]-d[k-1][j]+d[i][j];\n\t    ans=max(ans,sum-sum2);\n\t  }\n\t}\n      }\n    }\n    cout<<ans<<endl;\n  }else cout<<p[0][0]<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n#define int long long\nint p[333][333];\nint yoko[333][333];\nint tate[333][333];\nint dp[333][333][333];\nsigned main(){\n  int n;\n  cin>>n;\n\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++)\n      cin>>p[i][j];\n\n  for(int i=0;i<n;i++){\n    int sum=0;\n    for(int j=0;j<n;j++){\n      sum+=p[i][j];\n      yoko[i][j]=sum;\n    }\n    sum=0;\n    for(int j=0;j<n;j++){\n      sum+=p[j][i];\n      tate[j][i]=sum;\n    }\n  }\n  int INF=1111111111111LL;\n  fill_n(**dp,333*333*333,INF);\n  for(int i=0;i<n;i++){\n    for(int j=i;j<n;j++){\n      for(int k=n-1;k>=0;k--){\n\tdp[i][j][k]=yoko[i][k]+yoko[j][k]+tate[j][k]-tate[i][k]-p[j][k];\n\tif(i==j){\n\t  dp[i][j][k]-=yoko[i][k];\n\t  dp[i][j][k]+=p[j][k];\n\t}\n\tif(k<n-1)dp[i][j][k]=max(dp[i][j][k],dp[i][j][k+1]);\n\t//\tcout<<i<<\" \"<<j<<\" \"<<k<<\" \"<<dp[i][j][k]<<endl;\n      }\n    }\n  }\n  int ans=-INF;\n  for(int i=0;i<n;i++){\n    for(int j=i;j<n;j++){\n      for(int k=0;k<n;k++){\n\tint sum=tate[j][k]-tate[i][k]+p[i][k];\n\tif(k<n-1){\n\t  int tmp=sum;\n\t  tmp+=dp[i][j][k+1];\n\t  tmp-=(yoko[i][k]+yoko[j][k]);\n\t  if(i==j)tmp+=yoko[i][k];\n\t  sum=max(sum,tmp);\n\t}\n\tans=max(ans,sum);\n\t//\tcout<<i<<\" \"<<j<<\" \"<<k<<\" \"<<ans<<endl;\n      }\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <vector>\n#include <cstdio>\n#include <algorithm>\nusing namespace std;\nint main(){\n\tint N,r=0;\n\tscanf(\"%d\",&N);\n\tvector<vector<int> >v(N+1);\n\tv[0].resize(N);\n\tfor(int i=1;i<=N;i++){\n\t\tv[i].resize(N+1);\n\t\tfor(int j=1;j<=N;j++)scanf(\"%d\",&v[i][j]);\n\t}\n\tfor(int i=0;i<N;i++)for(int j=0;j<=N;j++)v[i+1][j]+=v[i][j];\n\tfor(int i=0;i<=N;i++)for(int j=0;j<N;j++)v[i][j+1]+=v[i][j];\n\tfor(int i0=0;i0<N;i0++)for(int i1=i0+1;i1<=N;i1++){\n#if 1\n\t\tint r0=v[i0][0]-v[i1][0]-v[i0][1]+v[i1][1],r1=r0;\n\t\tint s=0;\n\t\tif(N>1)s=v[i0][1]-v[i1][1]-v[i0][2]+v[i1][2];\n\t\tr1=max(r1,r0+s);\n\t\tfor(int k=2;k<N;k++){\n\t\t\tr0+=v[i0][k-1]-v[i0+1][k-1]-v[i0][k]+v[i0+1][k];\n\t\t\tif(i1-i0>1)r0+=v[i1-1][k-1]-v[i1][k-1]-v[i1-1][k]+v[i1][k];\n\t\t\tr0=max(r0,v[i0][k-1]-v[i1][k-1]-v[i0][k]+v[i1][k]);\n\t\t\ts=v[i0][k]-v[i1][k]-v[i0][k+1]+v[i1][k+1];\n\t\t\tr1=max(r1,r0+s);\n\t\t}\n\t\t//printf(\"%d %d %d\\n\",i0,i1,r1);\n\t\tr=max(r,r1);\n#else\n\t\tfor(int j0=0;j0<N;j0++)for(int j1=j0+1;j1<=N;j1++){\n\t\t\tint n=v[i0][j0]-v[i1][j0]-v[i0][j1]+v[i1][j1];\n\t\t\tint m=0;\n\t\t\tif(i1-i0>2&&j1-j0>2)m=v[i0+1][j0+1]-v[i1-1][j0+1]-v[i0+1][j1-1]+v[i1-1][j1-1];\n\t\t\tr=max(r,n-m);\n\t\t}\n#endif\n\t}\n\tprintf(\"%d\\n\",r);\n}"
  },
  {
    "language": "C++",
    "code": "/*\n　　　∫ ∫ ∫\n　　　ノヽ\n　　（＿　 ）\n　（＿　　　 ）\n（＿＿＿＿＿＿ ）\n　ヽ(´･ω･)ﾉ　\n　　 |　 /\n　　 UU\n*/\n#pragma region macro\n#include <bits/stdc++.h>\ntypedef long long int64;\nusing namespace std;\nusing P = pair<int64, int64>;\ntypedef vector<int> vi;\nconst int MOD = (int)1e9 + 7;\nconst int64 INF = 1LL << 62;\nconst int inf = 1<<30;\ntemplate<class T>bool chmax(T &a, const T &b) { if (a<b) { a=b; return 1; } return 0; }\ntemplate<class T>bool chmin(T &a, const T &b) { if (b<a) { a=b; return 1; } return 0; }\n#define REP(i, n) for (int i = 0; i < (n); i++)\n#define FOR(i,s,n) for (int i = s; i < (n); i++)\n#define ALL(obj) (obj).begin(), (obj).end() //コンテナじゃないと使えない!!\n#define debug(x) cerr << #x << \": \" << x << \"\\n\";\n#define mp make_pair\n#define bn '\\n'\ntemplate <typename T>\nostream& operator<<(ostream& os, const vector<T> &V){\n    int N = V.size();\n    REP(i,N){\n        os << V[i];\n        if (i!=N-1) os << \" \";\n    }\n    os << \"\\n\";\n    return os;\n}\ntemplate <typename T,typename S>\nostream& operator<<(ostream& os, pair<T,S> const&P){\n    os << \"(\";\n    os << P.first;\n    os << \" , \";\n    os << P.second;\n    os << \")\";\n    return os;\n}\ntemplate <typename T>\nostream& operator<<(ostream& os, set<T> &S){\n    auto it=S.begin();\n    while(it!=S.end()){\n        os << *it;\n        os << \" \";\n        it++;\n    }\n    os << \"\\n\";\n    return os;\n}\ntemplate <typename T>\nostream& operator<<(ostream& os, deque<T> &q){\n    for(auto it=q.begin();it<q.end();it++){\n        os<<*it;\n        os<<\" \";\n    }\n     os<<endl;\n    return os;\n}\nvector<pair<int,int>> dxdy = {mp(0,1),mp(1,0),mp(-1,0),mp(0,-1)};\n#pragma endregion\n//fixed<<setprecision(10)<<ans<<endl;\n\nstruct cumsum2D{\n    int H,W;\n    vector<vector<int64>> cumsum;\n    cumsum2D(vector<vector<int64>> A) :H(A.size()), W(A[0].size()){\n        cumsum.assign(H+1, vector<int64>(W+1,0));\n        for(int h=0;h<H;h++){\n            for(int w=0;w<W;w++){\n                cumsum[h+1][w+1] = A[h][w];\n            }\n        }\n\n        for(int h=0;h<H;h++){\n            for(int w=0;w<W;w++){\n                cumsum[h+1][w+1] += cumsum[h+1][w] + cumsum[h][w+1] - cumsum[h][w];\n            }\n        }\n    }\n\n    // return sum(A[h][w]) {h,w | h in [h_begin, h_end) and w in [w_begin, w_end)}\n    int64 get(int h_begin, int h_end, int w_begin, int w_end){\n        return cumsum[h_end][w_end] - cumsum[h_begin][w_end] - cumsum[h_end][w_begin] + cumsum[h_begin][w_begin];\n    }\n};\n\nint main(){\n    cin.tie(0);\n    ios::sync_with_stdio(false);\n    int N;\n    cin >> N;\n    vector<vector<int64>> P(N,vector<int64>(N));\n    REP(i,N){\n        REP(j,N) cin >> P[i][j];\n    }\n\n    int64 ans = -INF;\n    cumsum2D cumsum(P);\n    REP(w,N){\n        REP(u,N){\n            for(int d=u+1; d<=N;d++){\n                chmax(ans, cumsum.get(u,d,w,w+1));\n                int h=w,l=u,r=d;\n                chmax(ans, cumsum.get(h,h+1,l,r));\n            }\n        }\n    }\n    REP(u,N){\n        for(int d=u+1; d<N; d++){\n            int64 S = cumsum.get(u,u+1,0,N) + cumsum.get(d,d+1,0,N);\n            vector<int64> DP_L(N,-INF), DP_R(N,-INF);\n            REP(l,N){\n                if(l) DP_L[l] = DP_L[l-1];\n                int64 val = - (cumsum.get(u,u+1,0,l) + cumsum.get(d,d+1,0,l)) + (cumsum.get(u+1,d,l,l+1) ) ;\n                chmax(DP_L[l], val);\n\n                int r = N-l-1;\n                if(l) DP_R[r] = DP_R[r+1];\n                val =  - (cumsum.get(u,u+1,r+1,N) + cumsum.get(d,d+1,r+1,N)) + (cumsum.get(u+1,d,r,r+1) ) ;\n                chmax(DP_R[r], val);\n            }\n            REP(i,N-1) chmax(ans, S + DP_L[i] + DP_R[i+1]);\n        }\n    }\n\n    cout << ans << endl;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <cstdlib>\n#include <cmath>\n#include <cstring>\n\n#include <iostream>\n#include <string>\n#include <algorithm>\n#include <vector>\n#include <queue>\n#include <stack>\n#include <map>\n#include <set>\n\n#include <functional>\n#include <cassert>\n\ntypedef long long ll;\nusing namespace std;\n\n#define debug(x) cerr << #x << \" = \" << x << endl;\n\n\n#define mod 1000000007 //1e9+7(prime number)\n#define INF 1000000000 //1e9\n#define LLINF 2000000000000000000LL //2e18\n#define SIZE 305\n\n\nint main(){\n  int n,max_p=-INF;\n  int p[SIZE][SIZE] = {};\n  int p_h[SIZE][SIZE] = {},p_v[SIZE][SIZE] = {};\n\n  scanf(\"%d\",&n);\n  for(int i=1;i<=n;i++){\n    for(int j=1;j<=n;j++){\n      scanf(\"%d\",p[i]+j);\n      p_h[i][j] = p_v[i][j] = p[i][j];\n      max_p = max(p[i][j],max_p);\n    }\n  }\n\n  if(max_p <= 0){\n    printf(\"%d\\n\",max_p);\n    return 0;\n  }\n\n  for(int i=0;i<=n;i++){\n    for(int j=1;j<=n;j++){\n      p_h[i][j] += p_h[i][j-1]; \n    }\n  }\n  for(int i=0;i<=n;i++){\n    for(int j=1;j<=n;j++){\n      p_v[j][i] += p_v[j-1][i]; \n    }\n  }\n\n  int v[SIZE];\n  int ans = 0;\n  \n  for(int i=1;i<=n;i++){\n    \n    for(int j=1;j<=n;j++){\n      for(int k=j;k<=n;k++){\n        ans = max(ans, p_v[k][i]-p_v[j-1][i]);\n      }\n    }\n    \n    for(int j=i+1;j<=n;j++){\n      //[i,j]\n\n      for(int k=0;k<=n;k++){\n        v[k] = p_h[k][j-1]-p_h[k][i]; //[i+1,j-1]\n      }\n\n      int s = 0;\n\n      for(int k=0;k<=n;k++){\n        s += p[k][j] + p[k][i];\n\n        v[k] += s;\n      }\n\n      for(int k=n;k>0;k--){\n        v[k-1] = max(v[k],v[k-1]);\n      }\n\n      s = 0;\n      \n      for(int k=1;k<=n;k++){\n        if(k<n){\n          ans = max(ans, v[k+1]+(p_h[k][j-1]-p_h[k][i])+s);\n        }\n        \n        ans = max(ans, p_h[k][j]-p_h[k][i-1]);\n\n          s -= p[k][j]+p[k][i];\n      }\n    }\n  }\n\n  printf(\"%d\\n\",ans);\n  \n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n#define rep(i,x,y) for(int i=(x);i<(y);++i)\n#define debug(x) #x << \"=\" << (x)\n\n#ifdef DEBUG\n#define _GLIBCXX_DEBUG\n#define dump(x) std::cerr << debug(x) << \" (L:\" << __LINE__ << \")\" << std::endl\n#else\n#define dump(x)\n#endif\n\ntypedef long long int ll;\ntypedef pair<int,int> pii;\n//template<typename T> using vec=std::vector<T>;\n\nconst int inf=1<<30;\nconst long long int infll=1LL<<58;\nconst double eps=1e-9;\nconst int dx[]={1,0,-1,0},dy[]={0,1,0,-1};\n\ntemplate <typename T> ostream &operator<<(ostream &os, const vector<T> &vec){\n\tos << \"[\";\n\tfor (const auto &v : vec) {\n\t\tos << v << \",\";\n\t}\n\tos << \"]\";\n\treturn os;\n}\n\nvoid solve(){\n    int n;\n    cin >> n;\n    vector<vector<int>> p(n,vector<int>(n));\n    rep(i,0,n) rep(j,0,n) cin >> p[i][j];\n\n    vector<vector<int>> cumsum(n,vector<int>(n));\n    rep(y,0,n){\n        cumsum[y][0]=p[y][0];\n        rep(x,1,n) cumsum[y][x]=cumsum[y][x-1]+p[y][x];\n    }\n    rep(y,1,n) rep(x,0,n) cumsum[y][x]+=cumsum[y-1][x];\n\n    auto rectangle_sum=[&](int y1,int x1,int y2,int x2){\n        int res=0;\n        res+=cumsum[y2][x2];\n        if(y1!=0) res-=cumsum[y1-1][x2];\n        if(x1!=0) res-=cumsum[y2][x1-1];\n        if(y1!=0 and x1!=0) res+=cumsum[y1-1][x1-1];\n        return res;\n    };\n    int ans=-inf;\n    rep(y1,0,n){\n        rep(y2,y1,n){\n            int opt_x=0;\n            rep(x,0,n){\n                int tmp=rectangle_sum(y1,opt_x,y2,x);\n                if(y1<=y2-1 and x>=opt_x+1) tmp-=rectangle_sum(y1+1,opt_x+1,y2-1,x);\n                if(rectangle_sum(y1,x,y2,x)>=tmp) opt_x=x;\n            }\n            rep(x,opt_x,n){\n                int tmp=rectangle_sum(y1,opt_x,y2,x);\n                if(y1<=y2-1 and x>=opt_x+2) tmp-=rectangle_sum(y1+1,opt_x+1,y2-1,x-1);\n                ans=max(ans,tmp);\n            }\n        }\n    }\n\n    cout << ans << endl;\n}\n\nint main(){\n\tstd::ios::sync_with_stdio(false);\n\tstd::cin.tie(0);\n\tsolve();\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <stdio.h>\n#include <sstream>\n#include <string>\n#include <vector>\n#include <map>\n#include <queue>\n#include <algorithm>\n#include <set>\n#include <math.h>\n#include <utility>\n#include <stack>\n#include <string.h>\nusing namespace std;\ntypedef pair<int,int> P;\nconst int INF = ~(1<<31) / 2;\n\n\nint p[300][300];\nint yoko[300][300];\nint tate[300][300];\n\n\nint main(){\n    int N;\n    cin >> N;\n\n    for(int i=0;i<N;i++){\n        for(int j=0;j<N;j++){\n            scanf(\"%d\",&p[i][j]);\n            yoko[i][j] = p[i][j];\n            if(j!=0) yoko[i][j] += yoko[i][j-1];\n        }\n    }\n    for(int i=0;i<N;i++){\n        for(int j=0;j<N;j++){\n            tate[j][i] = p[j][i];\n            if(j!=0) tate[j][i] += tate[j-1][i];\n        }\n    }\n\n    int ans = -INF;\n    for(int i=0;i<N;i++){\n        for(int j=0;j+i<N;j++){\n            for(int k=0;k+i<N;k++){\n                int frame = 0;\n                if (i==0) frame = p[j][k];\n                else{\n                    frame = yoko[j][k+i]+yoko[j+i][k+i]+tate[j+i][k]+tate[j+i][k+i] -p[j][k]-p[j+i][k]-p[j][k+i]-p[j+i][k+i];\n                    //printf(\"%d %d %d %d %d %d %d %d\\n\",yoko[j][k+i],yoko[j+i][k+i],tate[j+i][k],tate[j+i][k+i],p[j][k],p[j+i][k],p[j][k+i],p[j+i][k+i]);\n                    if(k>0) frame -= yoko[j][k-1] + yoko[j+i][k-1];\n                    if(j>0) frame -= tate[j-1][k] + tate[j-1][k+i];\n                }\n                //printf(\"%d %d %d %d\\n\",i,j,k,frame);\n                ans = max(ans, frame);\n            }\n        }\n    }\n    cout << ans << endl;\n    return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\nint sum(const vector<vector<int>>& p, int t, int l, int b, int r) {\n  return p[b][r] - p[b][l - 1] - p[t - 1][r] + p[t - 1][l - 1];\n}\n\nint frame(const vector<vector<int>>& p, int t, int l, int b, int r) {\n  int result = sum(p, t, l, b, r);\n  if(b - t > 1 && r - l > 1) result -= sum(p, t + 1, l + 1, b - 1, r - 1);\n  return result;\n}\n\nint main() {\n  int N;\n  cin >> N;\n  vector<vector<int>> p(N, vector<int>(N));\n  for(auto& i: p) for(auto& j: i) cin >> j;\n  for(auto& i: p) i.insert(begin(i), 0);\n  p.insert(begin(p), vector<int>(N + 1, 0));\n\n  for(int i = 1; i <= N; ++i) for(int j = 2; j <= N; ++j) p[i][j] += p[i][j - 1];\n  for(int i = 2; i <= N; ++i) for(int j = 1; j <= N; ++j) p[i][j] += p[i - 1][j];\n\n  int answer = -1000;\n  for(int top = 1; top <= N - 1; ++top) for(int bottom = top; bottom <= N; ++bottom) {\n    int left = 1;\n    for(int right = 1; right <= N; ++right) {\n      int tlbr = frame(p, top, left, bottom, right);\n      answer = max(answer, tlbr);\n      int r = frame(p, top, right, bottom, right);\n      int tlb = tlbr - r + frame(p, top, right, top, right) + frame(p, bottom, right, bottom, right);\n      if(top == bottom) tlb -= frame(p, bottom, right, bottom, right);\n      if(r > tlb) left = right;\n    }\n  }\n  cout << answer << endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <time.h>\n#define INF 10000000\nusing namespace std;\n\nint main(){\n  clock_t start=clock();\n  int n,x[302][302]={},y[302][302]={};\n  cin>>n;\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++)cin>>y[i][j],x[i][j]=y[i][j];\n\n  n=300;\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++) x[i][j]=y[i][j]=-1;\n\n\n  for(int i=0;i<n;i++)\n    for(int j=n-2;j>=0;j--) {\n      x[i][j]+=x[i][j+1];\n      y[j][i]+=y[j+1][i];\n    }\n  \n  int ans=y[0][n-1],sum,K[302][302]={},t=0,f=1;\n  while(f){\n    t++,f=0;\n    for(int i=0;i<n;i++) //yoko\n      for(int j=i+1;j<n;j++) {//yoko\n\tint a=K[i][j],nk=a;\n\tsum=-INF;\n\tfor(int k=a+1;k<n;k++) { //tate\n\t  int X=(x[a][i]-x[a][j+1])+(x[k][i]-x[k][j+1]);\n\t  int Y=(y[a+1][i]-y[k][i])+(y[a+1][j]-y[k][j]);\n\t  if(sum<=X+Y)sum=X+Y,nk=k;\n\t}\n\tans=max(ans,sum);\n\t\n\tif(nk<n-1)f=1;\n\tfor(int k=a+1;k<nk;k++){//tate\n\t  sum+=(x[k][i+1]-x[k][j])-(x[k-1][i]-x[k-1][j+1]);\n\t  ans=max(ans,sum);\n\t}\n\tif(a+1==nk&&j-i!=1) nk=n-1;\n\tK[i][j]=nk;\n      }\n  }\n  clock_t end=clock();\n  //  cout << (double)(end-start)/CLOCKS_PER_SEC <<endl;\n  cout <<ans<<endl;\n\t  \n  return 0; \n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstring>\nusing namespace std;\n\nint main(){\n  int n,x[302][302]={},y[302][302]={};\n  cin>>n;\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++)cin>>y[i][j],x[i][j]=y[i][j];\n  \n  int ans=max(y[0][n-1],y[n-1][0]);\n  for(int i=0;i<n;i++)\n    for(int j=n-2;j>=0;j--) {\n      x[i][j]+=x[i][j+1];\n      y[j][i]+=y[j+1][i];\n      if(ans<x[i][j])ans=x[i][j];\n      if(ans<y[j][i])ans=y[j][i];\n    }\n  n=300;\n  for(int i=0;i<n;i++) //tate\n    for(int j=0;j<n;j++)//yoko\n      for(int k=i+1;k<n;k++)//tate\n\tfor(int l=j+1;l<n;l++){//yoko\n\t  int X=(x[i][j]-x[i][l+1])+(x[k][j]-x[k][l+1]);\n\t  int Y=(y[i+1][j]-y[k][j])+(y[i+1][l]-y[k][l]);\n\t  if(ans<X+Y)ans=X+Y;\n\t}\n  cout <<ans<<endl;\n\t  \n  return 0; \n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#include <queue>\n#define N 300\nusing namespace std;\ntypedef pair<int,int> P;\nint n,p[N][N],s,ans,a1,a2,b1,b2,d[N][N];\npriority_queue<P> A,B;\n\nint main(){\n  cin>>n;\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++) cin>>p[i][j];\n  for(int i=0;i<n;i++){\n    s=0;\n    for(int j=0;j<n;j++) s+=p[j][i];\n    A.push(P(s,i));\n  }\n  for(int i=0;i<n;i++){\n    s=0;\n    for(int j=0;j<n;j++) s+=p[i][j];\n    B.push(P(s,i));\n  }\n  P t=A.top(); A.pop();\n  a1=t.second;\n  t=A.top(); A.pop();\n  a2=t.second;\n  t=B.top(); B.pop();\n  b1=t.second;\n  t=B.top(); B.pop();\n  b2=t.second;\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++) d[i][j]=p[i][j];\n  for(int i=0;i<n;i++)\n    for(int j=1;j<n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=1;i<n;i++)\n    for(int j=0;j<n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  for(int i=0;i<n;i++){\n    for(int j=0;j<n;j++){\n      for(int k=i;k<n;k++){\n\tfor(int l=j;l<n;l++){\n\t  //if(!(a1==j||a2==j||a1==l||a2==l||b1==i||b2==i||b1==k||b2==k)) continue;\n\t  int sum=d[k][l],sum2=0;\n\t  if(i&&j) sum=sum-d[i-1][l]-d[k][j-1]+d[i-1][j-1];\n\t  else if(i) sum=sum-d[i-1][l];\n\t  else if(j) sum=sum-d[k][j-1];\n\t  if(i+1&&j+1) sum2=d[k-1][l-1]-d[i][l-1]-d[k-1][j]+d[i][j];\n\t  else if(i+1) sum2=d[k-1][l-1]-d[i][l-1];\n\t  else if(j+1) sum2=d[k-1][l-1]-d[k-1][j];\n\t  ans=max(ans,sum-sum2);\n\t  }else ans=max(ans,sum);\n\t}\n      }\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <cstring>\n#include <cstdlib>\n#include <cmath>\n#include <complex>\n#include <string>\n#include <sstream>\n#include <algorithm>\n#include <numeric>\n#include <vector>\n#include <queue>\n#include <stack>\n#include <functional>\n#include <iostream>\n#include <map>\n#include <set>\nusing namespace std;\ntypedef pair<int,int> P;\ntypedef long long ll;\ntypedef vector<int> vi;\ntypedef vector<ll> vll;\n#define pu push\n#define pb push_back\n#define mp make_pair\n#define eps 1e-9\n#define INF 2000000000\n#define sz(x) ((int)(x).size())\n#define fi first\n#define sec second\n#define SORT(x) sort((x).begin(),(x).end())\n#define all(x) (x).begin(),(x).end()\n#define EQ(a,b) (abs((a)-(b))<eps)\nint N;\nint f[305][305],imos[305][305];\nint l[305],r[305];\nint sum(int i,int j,int k)\n{\n\treturn imos[j][k]-imos[j][k-1]-imos[i-1][k]+imos[i-1][k-1];\n}\nint add(int i,int j,int k)\n{\n\tif(i==j)return f[i][k];\n\treturn f[i][k]+f[j][k];\n}\nint main()\n{\n\tscanf(\"%d\",&N);\n\tfor(int i=1;i<=N;i++)\n\t{\n\t\tfor(int j=1;j<=N;j++)\n\t\t{\n\t\t\tscanf(\"%d\",&f[i][j]);\n\t\t\timos[i][j]=f[i][j];\n\t\t}\n\t}\n\tfor(int i=1;i<=N;i++)\n\t{\n\t\tfor(int j=1;j<=N;j++)\n\t\t{\n\t\t\timos[i][j+1]+=imos[i][j];\n\t\t}\n\t}\n\tfor(int j=1;j<=N;j++)\n\t{\n\t\tfor(int i=1;i<=N;i++)\n\t\t{\n\t\t\timos[i+1][j]+=imos[i][j];\n\t\t}\n\t}\n\tint ans = -INF;\n\tfor(int i=1;i<=N;i++)\n\t{\n\t\tfor(int j=i;j<=N;j++)\n\t\t{\n\t\t\tl[1]=sum(i,j,1);\n\t\t\tfor(int k=1;k<=N;k++)ans = max(ans,sum(i,j,k));\n\t\t\tfor(int k=2;k<=N;k++)l[k] = max(l[k-1]+add(i,j,k),sum(i,j,k));\n\t\t\tr[N]=sum(i,j,N);\n\t\t\tfor(int k=N-1;k>=1;k--)r[k] = max(r[k+1]+add(i,j,k),sum(i,j,k));\n\t\t\tfor(int k=1;k<N;k++)ans = max(ans,l[k]+r[k+1]);\n\t\t}\n\t}\n\tprintf(\"%d\\n\",ans);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#define N 310\n#define INF (1e9)\nusing namespace std;\nint n,p[N][N],ans,c,ma,d[N][N];\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  ans=-INF;\n  for(int k=1;k<=n;k++){\n    for(int l=k+1;l<=n;l++){\n      c=1;\n      ma=-INF;\n      for(int i=c;i<=n;i++){\n\tint sum=d[i][l]-d[c-1][l]-d[i][k-1]+d[c-1][k-1],sum2=0;\n\tif(i-c>=2&&l-k>=2) sum2=d[i-1][l-1]-d[c][l-1]-d[i-1][k]+d[c][k];\n\tif(ma<sum-sum2) ma=sum-sum2,c=i;\n\tans=max(ans,sum-sum2);\n      }\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long lld;\n#define INF (1<<20)\n\nint main(){\n  int N; cin >> N;\n  int ban[311][311];\n  lld P[311][311];\n  memset(P,0,sizeof(P));\n  for(int i=1;i<=N;i++){\n    for(int j=1;j<=N;j++){\n      cin >> ban[i][j];\n      P[i][j] = P[i][j-1]+P[i-1][j]-P[i-1][j-1]+ban[i][j];\n    }\n  }\n  lld ret = -INF;\n  for(int i=1;i<=N;i++){\n    for(int j=i;j<=N;j++){\n      lld prev=0;\n      for(int k=1;k<=N;k++){\n\tlld line = P[j][k]-P[i-1][k]-P[j][k-1]+P[i-1][k-1];\n\tret = max(ret,line+prev);\n\tprev = max(line,prev+ban[i][k]+(i!=j?ban[j][k]:0));\n      }\n    }\n  }\n  cout << ret << endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nint p[302][302];\nint yoko[302][302];\nint tate[302][302];\n\nint main(){\n\tint N;\n\tcin >> N;\n\tint ans = -2e9;\n\tfor(int i = 1 ; i <= N ; i++){\n\t\tfor(int j = 1 ; j <= N ; j++){\n\t\t\tcin >> p[i][j];\n\t\t\tyoko[i][j] = tate[i][j] = p[i][j];\n\t\t}\n\t}\n\tfor(int i = 1 ; i <= N ; i++){\n\t\tfor(int j = 1 ; j <= N ; j++){\n\t\t\tyoko[i][j] += yoko[i][j-1];\n\t\t\ttate[i][j] += tate[i-1][j]; \n\t\t}\n\t}\n\t// 1-line \n\tfor(int i = 1 ; i <= N ; i++){\n\t\tfor(int l = 1 ; l <= N ; l++){\n\t\t\tfor(int r = l ; r <= N ; r++){\n\t\t\t\tans = max(ans,yoko[i][r] - yoko[i][l-1]);\n\t\t\t\tans = max(ans,tate[r][i] - tate[l-1][i]);\n\t\t\t}\t\t\n\t\t}\n\t}\n\n\tfor(int u = 1 ; u <= N ; u++){\n\t\tfor(int d = u+1 ; d <= N ; d++){\n\t\t\tint sub = -2e9;\n\t\t\tint mn = -(tate[d-1][1] - tate[u][1]);\n\t\t\tfor(int i = 2 ; i <= N ; i++){\n\t\t\t\tsub = max(sub, (yoko[u][i] + yoko[d][i]) + (tate[d-1][i] - tate[u][i]) - mn );\n\t\t\t\tmn = min(mn, -(tate[d-1][i] - tate[u][i]) + (yoko[u][i-1] + yoko[d][i-1]) );\n\t\t\t\t\n\t\t\t}\n\t\t\tans = max(ans,sub);\n\t\t}\n\t}\n\tcout << ans << endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\nusing namespace std;\ntypedef long long ll;\nint main(){\n  int mp[301][301],n;\n  ll x[302][302]={},y[302][302]={};\n  cin>>n;\n\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++)cin>>mp[i][j],y[i][j]=x[i][j]=mp[i][j];\n  \n  ll ans=max(mp[0][n-1],mp[n-1][0]);\n  for(int i=0;i<n;i++)\n    for(int j=n-2;j>=0;j--) {\n      x[i][j]+=x[i][j+1];\n      y[j][i]+=y[j+1][i];\n      if(ans<x[i][j])ans=x[i][j];\n      if(ans<y[j][i])ans=y[j][i];\n    }\n  \n  for(int i=0;i<n;i++) //tate\n    for(int j=0;j<n;j++)//yoko\n      for(int k=i+1;k<n;k++)//tate\n\tfor(int l=j+1;l<n;l++){//yoko\n\t  ll X=x[i][j]-x[i][l+1]+x[k][j]-x[k][l+1];\n\t  ll Y=y[i+1][j]-y[k][j]+y[i+1][l]-y[k][l];\n\t  //ll xu=x[i][j]-x[i][l+1];\n\t  //ll xd=x[k][j]-x[k][l+1];\n\t  //ll yu=y[i+1][j]-y[k][j];\n\t  //ll yd=y[i+1][l]-y[k][l];\n\t  //ll sum=xu+xd+yu+yd;\n\t  if(ans<X+Y)ans=X+Y;\n\t}\n\n  cout <<ans<<endl;\n\t  \n  return 0; \n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#define N 310\n#define INF (1e9)\nusing namespace std;\nint n,p[N][N],ans,c,b,ma,d[N][N];\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  ans=p[0][0];\n  for(int k=1;k<=n;k++){\n    for(int l=k+1;l<=n;l++){\n      b=c=1;\n      while(1){\n\tma=-INF;\n\tfor(int i=c;i<=n;i++){\n\t  int sum=d[i][l]-d[b-1][l]-d[i][k-1]+d[b-1][k-1],sum2=0;\n\t  if(i-b>=2&&l-k>=2) sum2=d[i-1][l-1]-d[b][l-1]-d[i-1][k]+d[b][k];\n\t  if(ma<sum-sum2) ma=sum-sum2,c=i;\n\t}\n\tans=max(ans,ma);\n\tfor(int i=b+1;i<c;i++){\n\t  int sum=d[i][l]-d[b-1][l]-d[i][k-1]+d[b-1][k-1],sum2=0;\n\t  if(i-b>=2&&l-k>=2) sum2=d[i-1][l-1]-d[b][l-1]-d[i-1][k]+d[b][k];\n\t  ans=max(ans,sum-sum2);\n\t}\n\tif(c==n) break;\n\tb=c;\n      }\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <time.h>\n#define INF 10000000\nusing namespace std;\n\nint main(){\n  clock_t start=clock();\n  int n,x[302][302]={},y[302][302]={};\n  cin>>n;\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++)cin>>y[i][j],x[i][j]=y[i][j];\n\n  n=300;\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++) x[i][j]=y[i][j]=-1;\n\n  for(int i=0;i<n;i++)\n    for(int j=n-2;j>=0;j--) {\n      x[i][j]+=x[i][j+1];\n      y[j][i]+=y[j+1][i];\n    }\n  \n  int ans=y[0][n-1],sum,K[302][302]={},t=0,f=1;\n  while(f){\n    t++,f=0;\n    for(int i=0;i<n;i++) //yoko\n      for(int j=i+1;j<n;j++) {//yoko\n\tint a=K[i][j],nk=a;\n\tsum=-INF;\n\tfor(int k=a+1;k<n;k++) { //tate\n\t  int X=(x[a][i]-x[a][j+1])+(x[k][i]-x[k][j+1]);\n\t  int Y=(y[a+1][i]-y[k][i])+(y[a+1][j]-y[k][j]);\n\t  if(sum<=X+Y)sum=X+Y,nk=k;\n\t}\n\tans=max(ans,sum);\n\t\n\tif(nk<n-1)f=1;\n\tfor(int k=a+1;k<nk;k++){//tate\n\t  sum+=(x[k][i+1]-x[k][j])-(x[k-1][i]-x[k-1][j+1]);\n\t  ans=max(ans,sum);\n\t}\n\tK[i][j]=nk+(nk==a+1);\n      }\n  }\n  clock_t end=clock();\n  //  cout << (double)(end-start)/CLOCKS_PER_SEC <<endl;\n  cout <<ans<<endl;\n\t  \n  return 0; \n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\nusing namespace std;\n\nint p[333][333];\nint yoko[333][333];\nint tate[333][333];\nint dp[301][301][301];\n\nsigned main(){\n  int n;\n  cin>>n;\n\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++)\n      cin>>p[i][j];\n\n  for(int i=0;i<n;i++){\n    int sum=0;\n    for(int j=0;j<n;j++){\n      sum+=p[i][j];\n      yoko[i][j]=sum;\n    }\n    sum=0;\n    for(int j=0;j<n;j++){\n      sum+=p[j][i];\n      tate[j][i]=sum;\n    }\n  }\n  int INF=100000000;\n  fill_n(**dp,301*301*301,INF);\n  for(int i=0;i<n;i++){\n    for(int j=i;j<n;j++){\n      for(int k=n-1;k>=0;k--){\n\tdp[i][j][k]=yoko[i][k]+yoko[j][k]+tate[j][k]-tate[i][k]-p[j][k];\n\tif(i==j){\n\t  dp[i][j][k]-=yoko[i][k];\n\t  dp[i][j][k]+=p[j][k];\n\t}\n\tif(k<n-1)dp[i][j][k]=max(dp[i][j][k],dp[i][j][k+1]);\n\t//\tcout<<i<<\" \"<<j<<\" \"<<k<<\" \"<<dp[i][j][k]<<endl;\n      }\n    }\n  }\n  int ans=-INF;\n  for(int i=0;i<n;i++){\n    for(int j=i;j<n;j++){\n      for(int k=0;k<n;k++){\n\tint sum=tate[j][k]-tate[i][k]+p[i][k];\n\tif(k<n-1){\n\t  int tmp=sum;\n\t  tmp+=dp[i][j][k+1];\n\t  tmp-=(yoko[i][k]+yoko[j][k]);\n\t  if(i==j)tmp+=yoko[i][k];\n\t  sum=max(sum,tmp);\n\t}\n\tans=max(ans,sum);\n\t//\tcout<<i<<\" \"<<j<<\" \"<<k<<\" \"<<ans<<endl;\n      }\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}\n\n"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#include <map>\n#define N 310\n#define ma make_pair\nusing namespace std;\ntypedef pair<int,int> P;\nint n,p[N][N],ans,d[N][N],sum,sum2;\nmap<P,P> m,t;\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  int cnt=0;\n  for(int i=1;i<=n;i++){\n    for(int j=1;j<=n;j++){\n      for(int k=n;k>=i;k--){\n\tfor(int l=n;l>=j;l--){\n\t  if(t.find(P(i,k))!=t.end()&&j>t[P(i,k)].first) continue;\n\t  if(m.find(P(j,l))!=m.end()&&l>m[P(j,l)].first) continue;\n\t  cnt++;\n\t  sum2=0;\n\t  sum=d[k][l]-d[i-1][l]-d[k][j-1]+d[i-1][j-1];\n\t  if(k-i>=2&&l-j>=2) sum2=d[k-1][l-1]-d[i][l-1]-d[k-1][j]+d[i][j];\n\t  ans=max(ans,sum-sum2);\n\t  if(m.find(P(j,l))==m.end()) m.insert(ma(P(j,l),P(k,ans)));\n\t  else if(m[P(j,l)].second<sum) m[P(j,l)]=ma(k,sum);\n\t  if(t.find(P(i,k))==t.end()) t.insert(ma(P(i,k),P(l,ans)));\n\t  else if(t[P(i,k)].second<sum) t[P(i,k)]=ma(l,sum);\n\t}\n      }\n    }\n  }\n    cout<<cnt<<endl;\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <cstdio>\n#include <cstdlib>\n#include <cmath>\n#include <cstring>\n\n#include <iostream>\n#include <string>\n#include <algorithm>\n#include <vector>\n#include <queue>\n#include <stack>\n#include <map>\n#include <set>\n\n#include <functional>\n#include <cassert>\n\ntypedef long long ll;\nusing namespace std;\n\n#define debug(x) cerr << #x << \" = \" << x << endl;\n\n\n#define mod 1000000007 //1e9+7(prime number)\n#define INF 1000000000 //1e9\n#define LLINF 2000000000000000000LL //2e18\n#define SIZE 305\n\n\nint main(){\n  int n,max_p=-INF;\n  int p[SIZE][SIZE] = {};\n  int p_h[SIZE][SIZE] = {},p_v[SIZE][SIZE] = {};\n\n  scanf(\"%d\",&n);\n  for(int i=1;i<=n;i++){\n    for(int j=1;j<=n;j++){\n      scanf(\"%d\",p[i]+j);\n      p_h[i][j] = p_v[i][j] = p[i][j];\n      max_p = max(p[i][j],max_p);\n    }\n  }\n\n  if(max_p <= 0){\n    printf(\"%d\\n\",max_p);\n    return 0;\n  }\n\n  for(int i=0;i<=n;i++){\n    for(int j=1;j<=n;j++){\n      p_h[i][j] += p_h[i][j-1]; \n    }\n  }\n  for(int i=0;i<=n;i++){\n    for(int j=1;j<=n;j++){\n      p_v[j][i] += p_v[j-1][i]; \n    }\n  }\n\n  int v[SIZE];\n  int ans = 0;\n  \n  for(int i=1;i<=n;i++){\n    \n    for(int j=1;j<=n;j++){\n      for(int k=j;k<=n;k++){\n        ans = max(ans, p_v[k][i]-p_v[j-1][i]);\n      }\n    }\n    \n    for(int j=i+1;j<=n;j++){\n      //[i,j]\n\n      for(int k=0;k<=n;k++){\n        v[k] = p_h[k][j-1]-p_h[k][i]; //[i+1,j-1]\n      }\n\n      int s = 0;\n\n      for(int k=0;k<=n;k++){\n        s += p[k][j] + p[k][i];\n\n        v[k] += s;\n      }\n\n      for(int k=n;k>0;k--){\n        v[k-1] = max(v[k],v[k-1]);\n      }\n\n      s = 0;\n      \n      for(int k=1;k<=n;k++){\n        if(k<n){\n          ans = max(ans, v[k+1]+(p_h[k][j-1]-p_h[k][i])+s);\n        }\n        \n        ans = max(ans, p_h[k][j]-p_h[k][i-1]);\n\n          s -= p[k][j]+p[k][i];\n      }\n    }\n  }\n\n  printf(\"%d\\n\",ans);\n  \n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#define N 310\n#define INF (1e9)\nusing namespace std;\nint n,p[N][N],ans,c,b,ma,d[N][N];\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  ans=p[0][0];\n  for(int k=1;k<=n;k++){\n    for(int l=k+1;l<=n;l++){\n      b=c=1;\n      while(1){\n\tma=-INF;\n\tfor(int i=c+1;i<=n;i++){\n\t  int sum=d[i][l]-d[b-1][l]-d[i][k-1]+d[b-1][k-1],sum2=0;\n\t  if(i-b>=2&&l-k>=2) sum2=d[i-1][l-1]-d[b][l-1]-d[i-1][k]+d[b][k];\n\t  if(ma<sum-sum2) ma=sum-sum2,c=i;\n\t}\n\tans=max(ans,ma);\n\tfor(int i=b+1;i<c;i++){\n\t  int sum=d[i][l]-d[b-1][l]-d[i][k-1]+d[b-1][k-1],sum2=0;\n\t  if(i-b>=2&&l-k>=2) sum2=d[i-1][l-1]-d[b][l-1]-d[i-1][k]+d[b][k];\n\t  ans=max(ans,sum-sum2);\n\t}\n\tif(b==n) break;\n\tb=c;\n      }\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#include <queue>\n#define N 310\nusing namespace std;\ntypedef pair<int,int> P;\nint n,p[N][N],s,ans,a1,a2,b1,b2,d[N][N];\npriority_queue<P> A,B;\n\nint main(){\n  cin>>n;\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++) cin>>p[i][j];\n  for(int i=0;i<n;i++){\n    s=0;\n    for(int j=0;j<n;j++) s+=p[j][i];\n    A.push(P(s,i));\n  }\n  for(int i=0;i<n;i++){\n    s=0;\n    for(int j=0;j<n;j++) s+=p[i][j];\n    B.push(P(s,i));\n  }\n  P t=A.top(); A.pop();\n  a1=t.second;\n  t=A.top(); A.pop();\n  a2=t.second;\n  t=B.top(); B.pop();\n  b1=t.second;\n  t=B.top(); B.pop();\n  b2=t.second;\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++) d[i][j]=p[i][j];\n  for(int i=0;i<n;i++)\n    for(int j=1;j<n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=1;i<n;i++)\n    for(int j=0;j<n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  for(int i=0;i<n;i++){\n    for(int j=0;j<n;j++){\n      for(int k=i;k<n;k++){\n\tfor(int l=j;l<n;l++){\n\t  //if(!(a1==j||a2==j||a1==l||a2==l||b1==i||b2==i||b1==k||b2==k)) continue;\n\t  int sum=d[k][l],sum2=0;\n\t  if(i&&j) sum=sum-d[i-1][l]-d[k][j-1]+d[i-1][j-1];\n\t  else if(i) sum=sum-d[i-1][l];\n\t  else if(j) sum=sum-d[k][j-1];\n\t  if(k>=1&&l>=1&&k-i>=2&&l-j>=2){\n\t    if(i+1&&j+1) sum2=d[k-1][l-1]-d[i][l-1]-d[k-1][j]+d[i][j];\n\t    else if(i+1) sum2=d[k-1][l-1]-d[i][l-1];\n\t    else if(j+1) sum2=d[k-1][l-1]-d[k-1][j];\n\t  }\n\t  ans=max(ans,sum-sum2);\n\t}\n      }\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include \"bits/stdc++.h\"\n#include<unordered_map>\n#include<unordered_set>\n#pragma warning(disable:4996)\nusing namespace std;\nusing ld = long double;\nconst ld eps = 1e-9;\n\n//// < \"d:\\d_download\\visual studio 2015\\projects\\programing_contest_c++\\debug\\a.txt\" > \"d:\\d_download\\visual studio 2015\\projects\\programing_contest_c++\\debug\\b.txt\"\n\nint getsum(const int l, const int r, const int u, const int d, vector<vector<int>>&sums) {\n\tint num= sums[d][r] - sums[d][l] - sums[u][r] + sums[u][l];\n\treturn num;\n}\n\nint main() {\n\t\n\tint N; cin >> N;\n\tvector<vector<int>>field(N+1, vector<int>(N+1)),sums(N+1,vector<int>(N+1));\n\tfor (int i = 1; i <= N; ++i) {\n\t\tfor (int j = 1; j <= N; ++j) {\n\t\t\tcin >> field[i][j];\n\t\t\tsums[i][j] = field[i][j];\n\t\t}\n\t}\n\tfor (int i = 1; i <= N; ++i) {\n\t\tfor (int j = 1; j <= N; ++j) {\n\t\t\tsums[i][j] += sums[i - 1][j] + sums[i][j - 1] - sums[i - 1][j - 1];\n\t\t}\n\t}\n\tint ans = 0;\n\tfor (int u = 0; u <= N; ++u) {\n\t\tfor (int d = u + 2; d <= N; ++d) {\n\t\t\tvector<int>kakko0(N),kakko1(N);\n\t\t\tint minus = getsum(0, N, u, u+1,sums)+getsum(0,N,d-1,d,sums);\n\t\t\tfor (int k = 0; k < N; ++k) {\n\t\t\t\tkakko0[k] = getsum(0, k+1, u, d,sums) - getsum(0, k, u + 1, d - 1,sums);\n\t\t\t\tkakko1[k] = getsum(k, N, u, d, sums) - getsum(k+1, N, u + 1, d - 1, sums);\n\t\t\t}\n\t\t\tint  j = 0;\n\t\t\tfor (int i = 0; i < N; ++i) {\n\t\t\t\tif (kakko1[j] < kakko1[i]) {\n\t\t\t\t\tj = i;\n\t\t\t\t}\n\t\t\t\tconst int num = kakko0[i] + kakko1[j] - minus;\n\t\t\t\tans = max(ans,num);\n\t\t\t}\n\t\t}\n\t}\n\tfor (int u = 0; u < N-1; ++u) {\n\t\tfor (int d = u + 1; d <= u + 2; ++d) {\n\t\t\tfor (int l = 0; l < N-1; ++l) {\n\t\t\t\tfor (int r = l + 1; r <= l + 2; ++r) {\n\t\t\t\t\tconst int num = getsum(l, r, u, d, sums);\n\t\t\t\t\tans = max(ans, num);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tcout << ans << endl;\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstring>\nusing namespace std;\n\nint main(){\n  int n,mp[302][302],x[302][302]={},y[302][302]={};\n  cin>>n;\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++)cin>>y[i][j],mp[i][j]=x[i][j]=y[i][j];\n  \n  int ans=max(y[0][n-1],y[n-1][0]);\n  for(int i=0;i<n;i++)\n    for(int j=n-2;j>=0;j--) {\n      x[i][j]+=x[i][j+1];\n      y[j][i]+=y[j+1][i];\n      if(ans<x[i][j])ans=x[i][j];\n      if(ans<y[j][i])ans=y[j][i];\n    }\n\n\n  // n=300;\n  int sum[302][302],K[2][302][302]={};\n\n\n\n  for(int i=0;i<=n;i++)\n    for(int j=0;j<=n;j++) sum[i][j]=-100000000;\n\n  int t=0;\n  while(1){\n    t++;\n    for(int i=0;i<n;i++) //yoko\n      for(int j=i+1;j<n;j++) {//yoko\n\tint a=K[t%2][i][j];\n\tfor(int k=a;k<n;k++) { //tate\n\t  int X=(x[a][i]-x[a][j+1])+(x[k][i]-x[k][j+1]);\n\t  int Y=(y[a+1][i]-y[k][i])+(y[a+1][j]-y[k][j]);\n\t  if(sum[i][j]<X+Y)sum[i][j]=X+Y,K[t%2][i][j]=k;\n\t  ans=max(ans,sum[i][j]);\n\t}\n      }\n\n    int f=1;\n    for(int i=0;i<n;i++) //yoko\n      for(int j=i+1;j<n;j++) //yoko\n\tfor(int k=K[(t+1)%2][i][j];k<K[t%2][i][j];k++){\n\t  f=0;\n\t  int X=(x[k][i]-x[k][j+1]);\n\t  sum[i][j]-=X;\n\t  ans=max(ans,sum[i][j]);\n\t}\n    if(f)break;\n  }\n  cout <<ans<<endl;\n\t  \n  return 0; \n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#define N 310\nusing namespace std;\ntypedef pair<int,int> P;\nint n,p[N][N],s,ans,a1,a2,b1,b2,d[N][N],A[N],B[N],C[N],D[N];\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++){\n    s=0;\n    for(int j=1;j<=n;j++) s+=p[j][i];\n    A[i]=C[i]=s;\n  }\n  for(int i=1;i<=n;i++){\n    s=0;\n    for(int j=1;j<=n;j++) s+=p[i][j];\n    B[i]=D[i]=s;\n  }\n  sort(C+1,C+n+1);\n  sort(D+1,D+n+1);\n  reverse(C+1,C+n+1);\n  reverse(D+1,D+n+1);\n  if(n!=1){\n    for(int i=1;i<=n;i++)\n      for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n    for(int i=1;i<=n;i++)\n      for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n    for(int i=2;i<=n;i++)\n      for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n    for(int i=1;i<=n;i++){\n      for(int j=1;j<=n;j++){\n\tfor(int k=i+1;k<=n;k++){\n\t  for(int l=j+1;l<=n;l++){\n\t    int a1=C[1],a2=C[2],b1=D[1],b2=D[2];\n\t    if(!(a1==A[j]||a2==A[j]||a1==A[l]||a2==A[l]||b1==B[i]||b2==B[i]||b1==B[k]||b2==B[k])) continue;\n\t    int sum=d[k][l]-d[i-1][l]-d[k][j-1]+d[i-1][j-1];\n\t    int sum2=d[k-1][l-1]-d[i][l-1]-d[k-1][j]+d[i][j];\n\t    if(k-i>=2&&l-j>=2) ans=max(ans,sum-sum2);\n\t    ans=max(ans,sum);\n\t  }\n\t}\n      }\n    }\n    cout<<ans<<endl;\n  }else cout<<p[0][0]<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#define N 310\n#define INF (1e9)\nusing namespace std;\nint n,p[N][N],ans,c,b,ma,d[N][N];\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  ans=-INF;\n  for(int k=1;k<=n;k++){\n    for(int l=k+1;l<=n;l++){\n      b=c=1;\n      while(1){\n\tma=-INF;\n\tfor(int i=c+1;i<=n;i++){\n\t  int sum=d[i][l]-d[c-1][l]-d[i][k-1]+d[c-1][k-1],sum2=0;\n\t  if(i-c>=2&&l-k>=2) sum2=d[i-1][l-1]-d[c][l-1]-d[i-1][k]+d[c][k];\n\t  if(ma<sum-sum2) ma=sum-sum2,c=i;\n\t  ans=max(ans,sum-sum2);\n\t}\n\tfor(int i=b+1;i<c;i++){\n\t  int sum=d[i][l]-d[b-1][l]-d[i][k-1]+d[b-1][k-1],sum2=0;\n\t  if(i-b>=2&&l-k>=2) sum2=d[i-1][l-1]-d[b][l-1]-d[i-1][k]+d[b][k];\n\t  ans=max(ans,sum-sum2);\n\t}\n\tif(c==n) break;\n      }\n      b=c;\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#define N 310\n#define INF (1e9)\n#define make make_pair\nusing namespace std;\ntypedef pair<int,int> P;\nint n,p[N][N],ans,d[N][N],sum,sum2;\nP c[N][N];\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  ans=-INF;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) c[i][j]=P(-1,-INF);\n  for(int k=1;k<=n;k++){\n    for(int l=1;l<=n;l++){\n      for(int i=1;i<=n;i++){\n\tfor(int j=1;j<=n;j++){\n\t  int sum=d[j][l]-d[i-1][l]-d[j][k-1]+d[i-1][k-1],sum2=0;\n\t  if(j-i>=2&&l-k>=2) sum2=d[j-1][l-1]-d[i][l-1]-d[j-1][k]+d[i][k];\n\t  ans=max(ans,sum-sum2);\n\t  \n\t}\n      }\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\nint a[512][512];\n\ninline int getSum(int h1, int w1, int h2, int w2)\n{\n    return (a[h2][w2] - (h1 ? a[h1 - 1][w2] : 0) - (w1 ? a[h2][w1 - 1] : 0) + (h1 && w1 ? a[h1 - 1][w1 - 1] : 0));\n}\n\nint main()\n{\n    int n;\n    \n    scanf(\"%d\", &n);\n    \n    int ans = -1001;\n    for (int i = 0; i < n; i++){\n        for (int j = 0; j < n; j++){\n            scanf(\"%d\", &a[i][j]);\n            if (i) a[i][j] += a[i - 1][j];\n            if (j) a[i][j] += a[i][j - 1];\n            if (i && j) a[i][j] -= a[i - 1][j - 1];\n        }\n    }\n    \n    for (int h1 = 0; h1 < n; h1++){\n        for (int h2 = h1; h2 < n; h2++){\n            int pmax = 0;\n            for (int w = 0; w < n; w++){\n                int tmp = getSum(h1, w, h2, w);\n                ans = max(ans, tmp + pmax);\n                pmax = max(pmax + getSum(h1, w, h1, w) + (h2 != h1 ? getSum(h2, w, h2, w) : 0), tmp);\n            }\n        }\n    }\n    \n    printf(\"%d\\n\", ans);\n    \n    return (0);\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#define N 310\n#define INF (1e9)\nusing namespace std;\nint n,p[N][N],ans,c,b,ma,d[N][N];\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  ans=p[0][0];\n  for(int k=1;k<=n;k++){\n    for(int l=k;l<=n;l++){\n      b=c=1;\n      while(b!=n){\n\tma=-INF;\n\tfor(int i=c+1;i<=n;i++){\n\t  int sum=d[i][l]-d[b-1][l]-d[i][k-1]+d[b-1][k-1],sum2=0;\n\t  if(i-b>=2&&l-k>=2) sum2=d[i-1][l-1]-d[b][l-1]-d[i-1][k]+d[b][k];\n\t  if(ma<sum-sum2) ma=sum-sum2,c=i;\n\t}\n\tans=max(ans,ma);\n\tfor(int i=b;i<c;i++){\n\t  int sum=d[i][l]-d[b-1][l]-d[i][k-1]+d[b-1][k-1],sum2=0;\n\t  if(i-b>=2&&l-k>=2) sum2=d[i-1][l-1]-d[b][l-1]-d[i-1][k]+d[b][k];\n\t  ans=max(ans,sum-sum2);\n\t}\n\tb=c;\n      }\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "//0310\n#include <bits/stdc++.h>\n\nusing namespace std;\n\n#define FOR(i,a,b) for(int i=(a);i<(b);i++)\n#define REP(i,a) FOR(i,0,a)\n\nconst int MAX_N=300;\n\nconst int INF=1e8;\n\nint N;\nint p[MAX_N+1][MAX_N+1];\n\nint dp[MAX_N+1][MAX_N+1][MAX_N+1],dp2[MAX_N+1][MAX_N+1][MAX_N+2];\n\nint main(){\n\tscanf(\"%d\",&N);\n\tFOR(i,1,N+1){\n\t\tFOR(j,1,N+1){\n\t\t\tscanf(\"%d\",&p[i][j]);\n\t\t}\n\t}\n\tint res=-INF;\n\tFOR(i,1,N+1){\n\t\tFOR(j,1,N+1){\n\t\t\tfor (int k=i;k>=1;k--){\n\t\t\t\tif (i==k){\n\t\t\t\t\tdp2[i][j][k]=p[i][j];\n\t\t\t\t}else{\n\t\t\t\t\tdp2[i][j][k]=dp2[i][j][k+1]+p[k][j];\n\t\t\t\t}\n\t\t\t\tres=max(res,dp2[i][j][k]);\n\t\t\t}\n\t\t}\n\t}\n\tFOR(i,1,N+1){\n\t\tFOR(j,2,N+1){\n\t\t\tFOR(k,1,i+1){\n\t\t\t\tif (j==2){\n\t\t\t\t\tdp[i][j][k]=dp2[i][j-1][k]+dp2[i][j][k];\n\t\t\t\t}else{\n\t\t\t\t\tdp[i][j][k]=dp2[i][j][k]+max(dp2[i][j-1][k],dp[i][j-1][k]-dp2[i-1][j-1][k+1]);\n\t\t\t\t}\n\t\t\t\tres=max(res,dp[i][j][k]);\n\t\t\t}\n\t\t}\n\t}\n\tprintf(\"%d\\n\",res);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<bits/stdc++.h>\n\n#define REP(i,s,n) for(int i=s;i<n;i++)\n#define rep(i,n) REP(i,0,n)\n\nusing namespace std;\n\nconst int MAX = 310;\nint n, p[MAX][MAX], sum[MAX][MAX];\n\n//??????(x1,y1), ??????(x2,y2)\nint getRangeSum(int x1,int y1,int x2,int y2) {\n  int ret = sum[y2][x2];\n  if( x1 - 1 >= 0 && y1 - 1 >= 0 ) ret += sum[y1-1][x1-1];\n  if( x1 - 1 >= 0 ) ret -= sum[y2][x1-1];\n  if( y1 - 1 >= 0 ) ret -= sum[y1-1][x2];\n  return ret;\n}\n\nvoid compute() {\n  rep(i,n) rep(j,n) {\n    sum[i][j] = p[i][j];\n    if( i - 1 >= 0 && j - 1 >= 0 ) sum[i][j] -= sum[i-1][j-1];\n    if( i - 1 >= 0 ) sum[i][j] += sum[i-1][j];\n    if( j - 1 >= 0 ) sum[i][j] += sum[i][j-1];\n  }\n\n  int maxi = -INT_MAX;\n  rep(i,n*n) REP(j,i,n*n) {\n    int x1 = i % n, y1 = i / n;\n    int x2 = j % n, y2 = j / n;\n    if( x2 < x1 || y2 < y1 ) continue;\n    if( abs(x1-x2) <= 1 || abs(y1-y2) <= 1 ) maxi = max(maxi,getRangeSum(x1,y1,x2,y2));\n    else {\n      int inner_x1 = x1 + 1, inner_y1 = y1 + 1;\n      int inner_x2 = x2 - 1, inner_y2 = y2 - 1;\n      maxi = max(maxi,getRangeSum(x1,y1,x2,y2)-getRangeSum(inner_x1,inner_y1,inner_x2,inner_y2));\n    }\n  }\n  cout << maxi << endl;\n}\n\nint main() {\n  scanf(\"%d\",&n);\n  rep(i,n) rep(j,n) scanf(\" %d\",&p[i][j]);\n  compute();\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define rep(i,n) for(int i = 0; i < n; i++)\n#define fi first\n#define sc second\nusing namespace std;\ntypedef pair<int, int> P;\ntypedef priority_queue<P, vector<P> > PQ;\n\nint n;\nint ans = -10000;\nint z[300][300],p[300][300];\nint tate[300][300], yoko[300][300];\n\nint main(){\n\tscanf(\"%d\",&n);\n\trep(i,n)rep(j,n)scanf(\"%d\",&z[i][j]);\n\trep(i,n)rep(j,n){\n\t\tp[i][j] = z[i][j];\n\t\ttate[i][j] = p[i][j];\n\t\tyoko[i][j] = p[i][j];\n\t}\n\trep(i,n) for(int j = 1; j < n; j++) yoko[i][j] += yoko[i][j-1];\n\trep(i,n) for(int j = 1; j < n; j++) p[i][j] += p[i][j-1];\n\tfor(int i = 1; i < n; i++) rep(j,n) tate[i][j] += tate[i-1][j];\n\tfor(int i = 1; i < n; i++) rep(j,n) p[i][j] += p[i-1][j];\n\tfor(int i = 0; i < n; i++){\n\t\tfor(int j = i; j < n; j++){\n\t\t\tPQ que;\n\t\t\tif(i == j){\n\t\t\t\trep(k,n) que.push(P(yoko[j][k],k));\n\t\t\t\trep(k,n){\n\t\t\t\t\twhile(true){\n\t\t\t\t\t\tif(que.size() == 0) break;\n\t\t\t\t\t\tif(que.top().sc < k) que.pop();\n\t\t\t\t\t\telse break;\n\t\t\t\t\t}\n\t\t\t\t\tif(que.size() == 0) continue;\n\t\t\t\t\tint t = que.top().sc;\n\t\t\t\t\tif(k != 0) ans = max(ans,yoko[j][t]-yoko[j][k-1]);\n\t\t\t\t\telse ans = max(ans,yoko[j][t]);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif(i == 0){\n\t\t\t\tfor(int k = 0; k < n; k++){\n\t\t\t\t\tint x;\n\t\t\t\t\tif(k != 0) x = p[j][k]-p[j-1][k-1]+p[i][k-1];\n\t\t\t\t\telse x = p[j][k];\n\t\t\t\t\tque.push(P(x,k));\n\t\t\t\t}\n\t\t\t} else{\n\t\t\t\tfor(int k = 0; k < n; k++){\n\t\t\t\t\tint x;\n\t\t\t\t\tif(k != 0) x = p[j][k]-p[i-1][k]-p[j-1][k-1]+p[i][k-1]-p[i-1][k-1];\n\t\t\t\t\telse x = p[j][k]-p[i-1][k];\n\t\t\t\t\tque.push(P(x,k));\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor(int k = 0; k < n; k++){\n\t\t\t\tif(i == 0){\n\t\t\t\t\tif(k == 0) ans = max(ans,p[j][k]);\n\t\t\t\t\telse ans = max(ans,p[j][k]-p[j][k-1]);\n\t\t\t\t} else if(k == 0){\n\t\t\t\t\tans = max(ans,p[j][k]-p[i-1][k]);\n\t\t\t\t} else{\n\t\t\t\t\tans = max(ans,p[j][k]-p[i-1][k]-p[j][k-1]+p[i-1][k-1]);\n\t\t\t\t}\n\t\t\t\twhile(true){\n\t\t\t\t\tif(que.size() == 0) break;\n\t\t\t\t\tif(que.top().sc <= k) que.pop();\n\t\t\t\t\telse break;\n\t\t\t\t}\n\t\t\t\tif(que.size() == 0) continue;\n\t\t\t\tint t = que.top().sc;\n\t\t\t\tif(i == 0){\n\t\t\t\t\tif(k == 0){\n\t\t\t\t\t\tans = max(ans,yoko[j][t]+tate[j][t]+tate[j][k]+yoko[i][t]-z[j][t]-z[j][k]-z[i][k]-z[i][t]);\n\t\t\t\t\t} else{\n\t\t\t\t\t\tans = max(ans,yoko[j][t]+tate[j][t]+tate[j][k]+yoko[i][t]-yoko[j][k-1]-yoko[i][k-1]-z[j][t]-z[j][k]-z[i][k]-z[i][t]);\n\t\t\t\t\t}\n\t\t\t\t} else if(k == 0){\n\t\t\t\t\tans = max(ans,tate[j][t]+yoko[j][t]+tate[j][k]+yoko[i][t]-tate[i-1][t]-tate[i-1][k]-z[j][t]-z[j][k]-z[i][k]-z[i][t]);\n\t\t\t\t} else{\n\t\t\t\t\tans = max(ans,tate[j][t]-tate[i-1][t]+yoko[j][t]-yoko[j][k-1]+tate[j][k]-tate[i-1][k]+yoko[i][t]-yoko[i][k-1]-z[j][t]-z[i][t]-z[j][k]-z[i][k]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tprintf(\"%d\\n\",ans);\n}"
  },
  {
    "language": "C++",
    "code": "#include <stdio.h>\n\nint main(void) {\n  int i, j, k, n, max = -10e8;\n  scanf(\"%d\", &n);\n  int p[n][n], sumt[n][n], sumy[n][n];\n  for(i = 0; i < n; ++i) for(j = 0; j < n; ++j) {\n    scanf(\"%d\", &p[i][j]);\n    sumy[i][j] = sumt[i][j] = p[i][j];\n  }\n  for(i = 0; i < n; ++i) for(j = 0; j < n; ++j) {\n    if(i) sumt[i][j] += sumt[i - 1][j];\n    if(j) sumy[i][j] += sumy[i][j - 1];\n  }\n  for(i = 0; i < n; ++i) {\n    for(j = i; j < n; ++j) {\n      int now = 0, fir = 0;\n      if(i == j) {\n        for(k = 0; k < n; ++k) {\n          now += p[i][k];\n          if(max < now) max = now;\n          if(now < 0) now = 0;\n        }\n      } else {\n        now = sumt[j - 1][0] - sumt[i][0];\n        for(k = 0; k < n; ++k) {\n          now += p[i][k] + p[j][k];\n          int tmp = now;\n          if(k) tmp += sumt[j - 1][k] - sumt[i][k];\n          if(max < tmp) max = tmp;\n          if(k && now < sumt[j][k] - sumt[i][k] + p[i][k]) now = sumt[j][k] - sumt[i][k] + p[i][k];\n          if(max < tmp) max = tmp;\n        }\n      }\n    }\n  }\n  printf(\"%d\\n\", max);\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define rep(i,n) for(int i = 0; i < n; i++)\n#define fi first\n#define sc second\nusing namespace std;\ntypedef pair<int, int> P;\ntypedef priority_queue<P, vector<P> > PQ;\n\nint n;\nint ans = 0;\nint z[300][300],p[300][300];\nint tate[300][300], yoko[300][300];\n\nint main(){\n\tscanf(\"%d\",&n);\n\trep(i,n)rep(j,n)scanf(\"%d\",&z[i][j]);\n\trep(i,n)rep(j,n){\n\t\tp[i][j] = z[i][j];\n\t\ttate[i][j] = p[i][j];\n\t\tyoko[i][j] = p[i][j];\n\t}\n\trep(i,n) for(int j = 1; j < n; j++) yoko[i][j] += yoko[i][j-1];\n\trep(i,n) for(int j = 1; j < n; j++) p[i][j] += p[i][j-1];\n\tfor(int i = 1; i < n; i++) rep(j,n) tate[i][j] += tate[i-1][j];\n\tfor(int i = 1; i < n; i++) rep(j,n) p[i][j] += p[i-1][j];\n\t\n\trep(i,n) rep(j,n){\n\t\tfor(int k = j; k < n; k++){\n\t\t\tif(j != 0) ans = max(ans,yoko[i][k]-yoko[i][j-1]);\n\t\t\telse ans = max(ans,yoko[i][k]);\n\t\t}\n\t}\n\t\n\trep(i,n) rep(j,n){\n\t\tfor(int k = i; k < n; k++){\n\t\t\tif(i != 0) ans = max(ans,tate[k][j]-tate[i-1][j]);\n\t\t\telse ans = max(ans,tate[k][j]);\n\t\t}\n\t}\n\t\n\tfor(int i = 0; i < n; i++){\n\t\tfor(int j = i+1; j < n; j++){\n\t\t\tPQ que;\n\t\t\tif(i == 0){\n\t\t\t\tfor(int k = 0; k < n; k++){\n\t\t\t\t\tint x;\n\t\t\t\t\tif(k != 0) x = p[j][k]-p[j-1][k-1]+p[i][k-1];\n\t\t\t\t\telse x = p[j][k];\n\t\t\t\t\tque.push(P(x,k));\n\t\t\t\t}\n\t\t\t} else{\n\t\t\t\tfor(int k = 0; k < n; k++){\n\t\t\t\t\tint x;\n\t\t\t\t\tif(k != 0) x = p[j][k]-p[i-1][k]-p[j-1][k-1]+p[i][k-1]-p[i-1][k-1];\n\t\t\t\t\telse x = p[j][k]-p[i-1][k];\n\t\t\t\t\tque.push(P(x,k));\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor(int k = 0; k < n; k++){\n\t\t\t\twhile(true){\n\t\t\t\t\tif(que.size() == 0) break;\n\t\t\t\t\tif(que.top().sc <= k) que.pop();\n\t\t\t\t\telse break;\n\t\t\t\t}\n\t\t\t\tif(que.size() == 0) continue;\n\t\t\t\tint t = que.top().sc;\n\t\t\t\tif(i == 0){\n\t\t\t\t\tif(k == 0){\n\t\t\t\t\t\tans = max(ans,yoko[j][t]+tate[j][t]+tate[j][k]+yoko[i][t]-z[j][t]-z[j][k]-z[i][k]-z[i][t]);\n\t\t\t\t\t} else{\n\t\t\t\t\t\tans = max(ans,yoko[j][t]+tate[j][t]+tate[j][k]+yoko[i][t]-yoko[j][k-1]-yoko[i][k-1]-z[j][t]-z[j][k]-z[i][k]-z[i][t]);\n\t\t\t\t\t}\n\t\t\t\t} else if(k == 0){\n\t\t\t\t\tans = max(ans,tate[j][t]+yoko[j][t]+tate[j][k]+yoko[i][t]-tate[i-1][t]-tate[i-1][k]-z[j][t]-z[j][k]-z[i][k]-z[i][t]);\n\t\t\t\t} else{\n\t\t\t\t\tans = max(ans,tate[j][t]-tate[i-1][t]+yoko[j][t]-yoko[j][k-1]+tate[j][k]-tate[i-1][k]+yoko[i][t]-yoko[i][k-1]-z[j][t]-z[i][t]-z[j][k]-z[i][k]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tprintf(\"%d\\n\",ans);\n}"
  },
  {
    "language": "C++",
    "code": "#include <stdio.h>\n\nint main(void) {\n  int i, j, k, n, max = -10e8;\n  scanf(\"%d\", &n);\n  int p[n][n], sumt[n][n], sumy[n][n];\n  for(i = 0; i < n; ++i) for(j = 0; j < n; ++j) {\n    scanf(\"%d\", &p[i][j]);\n    sumy[i][j] = sumt[i][j] = p[i][j];\n  }\n  for(i = 0; i < n; ++i) for(j = 0; j < n; ++j) {\n    if(i) sumt[i][j] += sumt[i - 1][j];\n    if(j) sumy[i][j] += sumy[i][j - 1];\n  }\n  for(i = 0; i < n; ++i) {\n    for(j = i; j < n; ++j) {\n      int now = 0;\n      if(i == j) {\n        for(k = 0; k < n; ++k) {\n          now += p[i][k];\n          if(max < now) max = now;\n          if(now < 0) now = 0;\n        }\n      } else {\n        now = sumt[j - 1][0] - sumt[i][0];\n        for(k = 0; k < n; ++k) {\n          now += p[i][k] + p[j][k];\n          int tmp = now;\n          if(k) tmp += sumt[j - 1][k] - sumt[i][k];\n          if(max < tmp) max = tmp;\n          if(k != n && now < sumt[j - 1][k + 1] - sumt[i][k + 1]) now = sumt[j - 1][k + 1] - sumt[i][k + 1];\n        }\n      }\n    }\n  }\n  printf(\"%d\\n\", max);\n  return 0;\n}\n"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\n#include <cstring>\nusing namespace std;\n\nint main(){\n  int n,x[302][302]={},y[302][302]={};\n  cin>>n;\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++)cin>>y[i][j],x[i][j]=y[i][j];\n  \n  int ans=max(y[0][n-1],y[n-1][0]);\n  for(int i=0;i<n;i++)\n    for(int j=n-2;j>=0;j--) {\n      x[i][j]+=x[i][j+1];\n      y[j][i]+=y[j+1][i];\n      ans=max(ans,max(y[j][i],x[i][j]));\n    }\n\n  int sum[302][302],K[2][302][302]={};\n  for(int i=0;i<=n;i++)\n    for(int j=0;j<=n;j++) sum[i][j]=-100000000;\n\n\n  int t=0,f=1;\n  while(f){\n    t++,f=0;\n\n    for(int i=0;i<n;i++) //yoko\n      for(int j=i+1;j<n;j++) {//yoko\n\tint a=K[t%2][i][j];\n\tK[(t+1)%2][i][j]=a;\n\tsum[i][j]=-100000000;\n\tfor(int k=a+1;k<n;k++) { //tate\n\t  int X=(x[a][i]-x[a][j+1])+(x[k][i]-x[k][j+1]);\n\t  int Y=(y[a+1][i]-y[k][i])+(y[a+1][j]-y[k][j]);\n\t  if(sum[i][j]<=X+Y)sum[i][j]=X+Y,K[(t+1)%2][i][j]=k;\n\t  ans=max(ans,sum[i][j]);\n\t}\n\tif(K[t%2][i][j]!=n-1)f=1;\n\tfor(int k=K[t%2][i][j]+1;k<K[(t+1)%2][i][j];k++){//tate\n\t  sum[i][j]+=(x[k][i+1]-x[k][j])-(x[k-1][i]-x[k-1][j+1]);\n\t  ans=max(ans,sum[i][j]);\n\t}\n      }\n  }\n  cout <<ans<<endl;\n\t  \n  return 0; \n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#include <map>\n#define N 310\n#define INF (1e9)\n#define make make_pair\nusing namespace std;\ntypedef pair<int,int> P;\nint n,p[N][N],ans,d[N][N],sum,sum2;\nmap<P,P> m,t;\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  ans=-INF;\n  int cnt=0;\n  for(int i=1;i<=n;i++){\n    for(int j=n;j>=i;j--){\n      for(int k=1;k<=n;k++){\n\tfor(int l=n;l>=k;l--){\n\t  if(m.find(P(i,j))!=m.end()&&k>m[P(i,j)].first) continue;\n\t  if(t.find(P(k,l))!=t.end()&&i>t[P(k,l)].first) continue;\n\t  int sum=d[j][l]-d[i-1][l]-d[j][k-1]+d[i-1][k-1],sum2=0;\n\t  if(j-i>=2&&l-k>=2) sum2=d[j-1][l-1]-d[i][l-1]-d[j-1][k]+d[i][k];\n\t  ans=max(ans,sum-sum2);\n\t  if(m.find(P(i,j))==m.end()) m.insert(make(P(i,j),P(l,sum-sum2)));\n\t  else if(m[P(i,j)].second<sum-sum2) m[P(i,j)]=make(l,sum-sum2);\n\t  if(t.find(P(k,l))==t.end()) t.insert(make(P(k,l),P(j,sum-sum2)));\n\t  else if(t[P(k,l)].second<sum-sum2) t[P(k,l)]=make(j,sum-sum2);\n\t  cnt++;\n\t}\n      }\n    }\n  }\n  //  cout<<cnt<<endl;\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define rep(i,n) for(int i = 0; i < n; i++)\n#define fi first\n#define sc second\nusing namespace std;\ntypedef pair<int, int> P;\ntypedef priority_queue<P, vector<P> > PQ;\n\nint n;\nint ans = -10000;\nint z[300][300],p[300][300];\nint tate[300][300], yoko[300][300];\n\nint main(){\n\tscanf(\"%d\",&n);\n\trep(i,n)rep(j,n)scanf(\"%d\",&z[i][j]);\n\trep(i,n)rep(j,n){\n\t\tp[i][j] = z[i][j];\n\t\ttate[i][j] = p[i][j];\n\t\tyoko[i][j] = p[i][j];\n\t}\n\trep(i,n) for(int j = 1; j < n; j++) yoko[i][j] += yoko[i][j-1];\n\trep(i,n) for(int j = 1; j < n; j++) p[i][j] += p[i][j-1];\n\tfor(int i = 1; i < n; i++) rep(j,n) tate[i][j] += tate[i-1][j];\n\tfor(int i = 1; i < n; i++) rep(j,n) p[i][j] += p[i-1][j];\n\t\n\trep(i,n) rep(j,n){\n\t\tfor(int k = j; k < n; k++){\n\t\t\tif(j != 0) ans = max(ans,yoko[i][k]-yoko[i][j-1]);\n\t\t\telse ans = max(ans,yoko[i][k]);\n\t\t}\n\t}\n\t\n\trep(i,n) rep(j,n){\n\t\tfor(int k = i; k < n; k++){\n\t\t\tif(i != 0) ans = max(ans,tate[k][j]-tate[i-1][j]);\n\t\t\telse ans = max(ans,tate[k][j]);\n\t\t}\n\t}\n\t\n\tfor(int i = 0; i < n; i++){\n\t\tfor(int j = i; j < n; j++){\n\t\t\tPQ que;\n\t\t\tif(i == j){\n\t\t\t\trep(k,n) que.push(P(yoko[j][k],k));\n\t\t\t\trep(k,n){\n\t\t\t\t\twhile(true){\n\t\t\t\t\t\tif(que.size() == 0) break;\n\t\t\t\t\t\tif(que.top().sc < k) que.pop();\n\t\t\t\t\t\telse break;\n\t\t\t\t\t}\n\t\t\t\t\tif(que.size() == 0) continue;\n\t\t\t\t\tint t = que.top().sc;\n\t\t\t\t\tif(k != 0) ans = max(ans,yoko[j][t]-yoko[j][k-1]);\n\t\t\t\t\telse ans = max(ans,yoko[j][t]);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif(i == 0){\n\t\t\t\tfor(int k = 0; k < n; k++){\n\t\t\t\t\tint x;\n\t\t\t\t\tif(k != 0) x = p[j][k]-p[j-1][k-1]+p[i][k-1];\n\t\t\t\t\telse x = p[j][k];\n\t\t\t\t\tque.push(P(x,k));\n\t\t\t\t}\n\t\t\t} else{\n\t\t\t\tfor(int k = 0; k < n; k++){\n\t\t\t\t\tint x;\n\t\t\t\t\tif(k != 0) x = p[j][k]-p[i-1][k]-p[j-1][k-1]+p[i][k-1]-p[i-1][k-1];\n\t\t\t\t\telse x = p[j][k]-p[i-1][k];\n\t\t\t\t\tque.push(P(x,k));\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor(int k = 0; k < n; k++){\n\t\t\t\tif(i == 0){\n\t\t\t\t\tif(k == 0) ans = max(ans,p[j][k]);\n\t\t\t\t\telse ans = max(ans,p[j][k]-p[j][k-1]);\n\t\t\t\t} else if(k == 0){\n\t\t\t\t\tans = max(ans,p[j][k]-p[i-1][k]);\n\t\t\t\t} else{\n\t\t\t\t\tans = max(ans,p[j][k]-p[i-1][k]-p[j][k-1]+p[i-1][k-1]);\n\t\t\t\t}\n\t\t\t\twhile(true){\n\t\t\t\t\tif(que.size() == 0) break;\n\t\t\t\t\tif(que.top().sc <= k) que.pop();\n\t\t\t\t\telse break;\n\t\t\t\t}\n\t\t\t\tif(que.size() == 0) continue;\n\t\t\t\tint t = que.top().sc;\n\t\t\t\tif(i == 0){\n\t\t\t\t\tif(k == 0){\n\t\t\t\t\t\tans = max(ans,yoko[j][t]+tate[j][t]+tate[j][k]+yoko[i][t]-z[j][t]-z[j][k]-z[i][k]-z[i][t]);\n\t\t\t\t\t} else{\n\t\t\t\t\t\tans = max(ans,yoko[j][t]+tate[j][t]+tate[j][k]+yoko[i][t]-yoko[j][k-1]-yoko[i][k-1]-z[j][t]-z[j][k]-z[i][k]-z[i][t]);\n\t\t\t\t\t}\n\t\t\t\t} else if(k == 0){\n\t\t\t\t\tans = max(ans,tate[j][t]+yoko[j][t]+tate[j][k]+yoko[i][t]-tate[i-1][t]-tate[i-1][k]-z[j][t]-z[j][k]-z[i][k]-z[i][t]);\n\t\t\t\t} else{\n\t\t\t\t\tans = max(ans,tate[j][t]-tate[i-1][t]+yoko[j][t]-yoko[j][k-1]+tate[j][k]-tate[i-1][k]+yoko[i][t]-yoko[i][k-1]-z[j][t]-z[i][t]-z[j][k]-z[i][k]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tprintf(\"%d\\n\",ans);\n}"
  },
  {
    "language": "C++",
    "code": "#include <iostream>\nusing namespace std;\n\nint main(){\n  int n,x[302][302]={},y[302][302]={};\n  cin>>n;\n  for(int i=0;i<n;i++)\n    for(int j=0;j<n;j++)cin>>y[i][j],x[i][j]=y[i][j];\n  \n  int ans=max(y[0][n-1],y[n-1][0]);\n  for(int i=0;i<n;i++)\n    for(int j=n-2;j>=0;j--) {\n      x[i][j]+=x[i][j+1];\n      y[j][i]+=y[j+1][i];\n    }\n\n  \n  int sum[302][302],K[2][302][302]={},t=0,f=1;\n  while(f){\n    t++,f=0;\n    for(int i=0;i<n;i++) //yoko\n      for(int j=i+1;j<n;j++) {//yoko\n\tint a=K[t%2][i][j],&b=K[(t+1)%2][i][j];\n\tb=a+1;\n\tsum[i][j]=-10000000;\n\n\tfor(int k=a+1;k<n;k++) { //tate\n\t  int X=(x[a][i]-x[a][j+1])+(x[k][i]-x[k][j+1]);\n\t  int Y=(y[a+1][i]-y[k][i])+(y[a+1][j]-y[k][j]);\n\t  if(sum[i][j]<=X+Y)sum[i][j]=X+Y,b=k;\n\t}\n\t\n\tif(b<=n-1)f=1;\n\tans=max(ans,sum[i][j]);\n\tfor(int k=a+1;k<b;k++){//tate\n\t  sum[i][j]+=(x[k][i+1]-x[k][j])-(x[k-1][i]-x[k-1][j+1]);\n\t  ans=max(ans,sum[i][j]);\n\t}\n      }\n  }\n  cout <<ans<<endl;\n\t  \n  return 0; \n}"
  },
  {
    "language": "C++",
    "code": "//0310\n#include <bits/stdc++.h>\n\nusing namespace std;\n\n#define FOR(i,a,b) for(int i=(a);i<(b);i++)\n#define REP(i,a) FOR(i,0,a)\n\nconst int MAX_N=300;\n\nconst int INF=1e8;\n\nint N;\nint p[MAX_N+1][MAX_N+1];\n\nint dp[MAX_N+2][MAX_N+2],dp2[MAX_N+2][MAX_N+2][2];\n\nint main(){\n\tscanf(\"%d\",&N);\n\tFOR(i,1,N+1){\n\t\tFOR(j,1,N+1){\n\t\t\tscanf(\"%d\",&p[i][j]);\n\t\t}\n\t}\n\tint res=-INF;\n\tFOR(i,1,N+1){\n\t\tfor (int j=i;j>=1;j--){\n\t\t\tdp2[j][i][1]=dp2[j+1][i][1]+p[j][1];\n\t\t\tres=max(res,dp2[j][i][1]);\n\t\t}\n\t}\n\tFOR(j,2,N+1){\n\t\tFOR(i,1,N+1){\n\t\t\tfor (int k=i;k>=1;k--){\n\t\t\t\tdp2[k][i][j&1]=dp2[k+1][i][j&1]+p[k][j];\n\t\t\t\tres=max(res,dp2[k][i][j&1]);\n\t\t\t}\n\t\t\tFOR(k,1,i+1){\n\t\t\t\tif (j==2){\n\t\t\t\t\tdp[k][i]=dp2[k][i][0]+dp2[k][i][1];\n\t\t\t\t}else{\n\t\t\t\t\tdp[k][i]=dp2[k][i][j&1]+max(dp2[k][i][(j-1)&1],dp[k][i]-dp2[k+1][i-1][(j-1)&1]);\n\t\t\t\t}\n\t\t\t\tres=max(res,dp[k][i]);\n\t\t\t}\n\t\t}\n\t}\n\tprintf(\"%d\\n\",res);\n\treturn 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n\nint p[310][310];\nint s[310][310];\n\nint calc(int x1,int x2,int y1,int y2){\n\treturn s[y2][x2] + s[y1-1][x1-1] - s[y1-1][x2] - s[y2][x1-1];\n}\n\nint main(){\n\tint N;\n\tcin >> N;\n\tfor(int i = 1 ; i <= N ; i++){\n\t\tfor(int j = 1 ; j <= N ; j++){\n\t\t\tcin >> p[i][j], s[i][j] = p[i][j];\n\t\t}\n\t}\n\tfor(int i = 0 ; i <= N ; i++)\n\t\tfor(int j = 1 ; j <= N ; j++)\n\t\t\ts[i][j] += s[i][j-1];\n\tfor(int i = 1 ; i <= N ; i++)\n\t\tfor(int j = 0 ; j <= N ; j++)\n\t\t\ts[i][j] += s[i-1][j];\n\tint ans = -2e9;\n\tfor(int i = 1 ; i <= N ; i++){\n\t\tfor(int j = i ; j <= N ; j++){\n\t\t\tif( i == j ){\n\t\t\t\tfor(int k = 1 ; k <= N ; k++)\n\t\t\t\t\tfor(int l = k ; l <= N ; l++)\n\t\t\t\t\t\tans = max(ans,calc(k,l,i,j));\n\t\t\t\tcontinue;\n\t\t\t}else{\n\t\t\t\tint mn = 0;\n\t\t\t\tint sum = 0;\n\t\t\t\tfor(int k = 1 ; k <= N ; k++){\n\t\t\t\t\tans = max(ans,sum + calc(k,k,i,j) - mn);\n\t\t\t\t\tmn = min(mn,sum-calc(k,k,i+1,j-1));\n\t\t\t\t\tsum += p[i][k] + p[j][k];\n\t\t\t\t\t//cout << sum + calc(k,k,i,j) - mn << \"|\" << i << \" \" << j << \" \" << k << \"(\" << sum << \" \" << mn << \" \" << calc(k,k,i,j)\t << \" \" << p[i][k] + p[j][k] << endl;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t \n\t\t}\n\t}\n\tcout << ans << endl;\n\t\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#define N 310\n#define INF (1e9)\nusing namespace std;\nint n,p[N][N],ans,c,b,ma,d[N][N];\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  ans=p[0][0];\n  for(int k=1;k<=n;k++){\n    for(int l=k;l<=n;l++){\n      b=c=1;\n      while(1){\n\tma=-INF;\n\tfor(int i=c+1;i<=n;i++){\n\t  int sum=d[i][l]-d[b-1][l]-d[i][k-1]+d[b-1][k-1],sum2=0;\n\t  if(i-b>=2&&l-k>=2) sum2=d[i-1][l-1]-d[b][l-1]-d[i-1][k]+d[b][k];\n\t  if(ma<sum-sum2) ma=sum-sum2,c=i;\n\t}\n\tans=max(ans,ma);\n\tfor(int i=b+1;i<c;i++){\n\t  int sum=d[i][l]-d[b-1][l]-d[i][k-1]+d[b-1][k-1],sum2=0;\n\t  if(i-b>=2&&l-k>=2) sum2=d[i-1][l-1]-d[b][l-1]-d[i-1][k]+d[b][k];\n\t  ans=max(ans,sum-sum2);\n\t}\n\tif(c==n) break;\n\tb=c;\n      }\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\n#define REP(i, n) FOR(i, 0, n)\n#define FOR(i, a, b) for(int i = a; i < b; i++)\n\n#define PB push_back\n\n#define MOD 1000000007LL\ntypedef long long ll;\n\nint a[321][321];\nint sm[321][321];\n\nint cnt(int a, int b, int c, int d){\n\treturn sm[c][d]-sm[a][d]-sm[c][b]+sm[a][b];\n}\n\ninline gt(int i, int j, int k, int l){\n\tint a = cnt(i, k, j, l), b = 0;\n\tif(j-i>=3 && l-k>=3){\n\t\tb = cnt(i+1, k+1, j-1, l-1);\n\t\t// printf(\"*\");\n\t}\n\treturn a-b;\n}\n\n#define LAR(a, b) a=max(a, (b))\n\nint main(){\n\tint n;\n\tscanf(\"%d\", &n);\n\tREP(i, n) REP(j, n) scanf(\"%d\", a[i]+j);\n\tREP(i, n) sm[i][0]=sm[0][i]=0;\n\tREP(i, n){\n\t\tREP(j, n){\n\t\t\tsm[i+1][j+1]=sm[i][j+1]+sm[i+1][j]-sm[i][j]+a[i][j];\n\t\t}\n\t}\n\t// REP(i, n+1){\n\t// \tREP(j, n+1){\n\t// \t\tprintf(\"%d \", sm[i][j]);\n\t// \t}\n\t// \tprintf(\"\\n\");\n\t// }\n\n\tint ans = 0;\n\tREP(i, n){\n\t\tFOR(j, i+1, n+1){\n\t\t\tint nwsm = 0,\n\t\t\t\t\tmxsm = 0,\n\t\t\t\t\tmxid = 0;\n\t\t\tREP(l, n+1){\n\t\t\t\tLAR(ans, gt(i, j, l-1, l));\n\t\t\t\tif(l>=3){\n\t\t\t\t\tnwsm -= cnt(i, j, l-3, l-2);\n\t\t\t\t\tif(j-i >= 3){\n\t\t\t\t\t\tnwsm += cnt(i+1, j-1, l-2, l-1);\n\t\t\t\t\t}\n\t\t\t\t\tif(mxsm > nwsm){\n\t\t\t\t\t\tmxid = l-2;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tLAR(ans, gt(i, j, mxid, l));\n\t\t\t}\n\t\t}\n\t}\n\tprintf(\"%d\\n\", ans);\n}"
  },
  {
    "language": "C++",
    "code": "#include <algorithm>\n#include <iostream>\n#define N 310\nusing namespace std;\ntypedef pair<int,int> P;\nint n,p[N][N],s,ans,a1,a2,b1,b2,d[N][N];\n\nint main(){\n  cin>>n;\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) cin>>p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=p[i][j];\n  for(int i=1;i<=n;i++)\n    for(int j=2;j<=n;j++) d[i][j]=d[i][j-1]+p[i][j];\n  for(int i=2;i<=n;i++)\n    for(int j=1;j<=n;j++) d[i][j]=d[i-1][j]+d[i][j];\n  for(int i=1;i<=n;i++){\n    for(int j=1;j<=n;j++){\n      for(int k=i+1;k<=n;k++){\n\tfor(int l=j+1;l<=n;l++){\n\t  int sum=d[k][l]-d[i-1][l]-d[k][j-1]+d[i-1][j-1];\n\t  int sum2=d[k-1][l-1]-d[i][l-1]-d[k-1][j]+d[i][j];\n\t  if(k-i>=2&&l-j>=2) ans=max(ans,sum-sum2);\n\t  else ans=max(ans,sum);\n\t}\n      }\n    }\n  }\n  cout<<ans<<endl;\n  return 0;\n}"
  },
  {
    "language": "C++",
    "code": "#include<iostream>\n#include<algorithm>\nusing namespace std;\nint k[1000][1000], x[1000][1000], n, cnt, maxn = -10000000;\nint main() {\n\tcin >> n;\n\tfor (int i = 1; i <= n; i++) {\n\t\tfor (int j = 1; j <= n; j++) {\n\t\t\tcin >> k[i][j];\n\t\t}\n\t}\n\tfor (int i = 1; i <= n; i++) {\n\t\tcnt = 0;\n\t\tfor (int j = 1; j <= n; j++) {\n\t\t\tcnt += k[i][j];\n\t\t\tx[i][j] = cnt + x[i - 1][j];\n\t\t}\n\t}\n\tif (n < 150) {\n\t\tfor (int i = 0; i < n; i++) {\n\t\t\tfor (int j = 0; j < n; j++) {\n\t\t\t\tfor (int k = i + 1; k <= n; k++) {\n\t\t\t\t\tfor (int l = j + 1; l <= n; l++) {\n\t\t\t\t\t\tif (k - i >= 3 && l - j >= 3) {\n\t\t\t\t\t\t\tmaxn = max(maxn, (x[i][j] + x[k][l] - x[i][l] - x[k][j]) - (x[i + 1][j + 1] + x[k - 1][l - 1] - x[i + 1][l - 1] - x[k - 1][j + 1]));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tmaxn = max(maxn, x[i][j] + x[k][l] - x[i][l] - x[k][j]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\telse {\n\t\tfor (int i = 0; i < n; i++) {\n\t\t\tfor (int j = 0; j < n; j++) {\n\t\t\t\tfor (int k = i + 1; k <= n; k++) {\n\t\t\t\t\tfor (int l = j + 1; l <= n; l++) {\n\t\t\t\t\t\tif (k - i >= 100 && l - j >= 100) {\n\t\t\t\t\t\t\tmaxn = max(maxn, (x[i][j] + x[k][l] - x[i][l] - x[k][j]) - (x[i + 1][j + 1] + x[k - 1][l - 1] - x[i + 1][l - 1] - x[k - 1][j + 1]));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tcout << maxn << endl;\n}"
  },
  {
    "language": "C++",
    "code": "#include <bits/stdc++.h>\n#define rep(i,n)for(int i=0;i<(n);i++)\nusing namespace std;\ntypedef long long ll;\n\nint p[500][500];\nint sum[500][500];\n\nint main(){\n\tint n;cin>>n;\n\trep(i,n)rep(j,n)scanf(\"%d\",&p[i][j]);\n\trep(i,n){\n\t\trep(j,n){\n\t\t\tsum[i+1][j]=sum[i][j]+p[i][j];\n\t\t}\n\t}\n\tint ans=INT_MIN;\n\trep(i,n){\n\t\tint Max=0;\n\t\trep(k,n){\n\t\t\tans=max(ans,Max+p[i][k]);\n\t\t\tMax=max(Max+p[i][k],0);\n\t\t}\n\t\tfor(int j=i+1;j<n;j++){\n\t\t\tint Max=0;\n\t\t\trep(k,n){\n\t\t\t\tans=max(ans,max(0,Max)+(sum[j+1][k]-sum[i][k]));\n\t\t\t\tMax=max(Max+p[i][k]+p[j][k],sum[j+1][k]-sum[i][k]);\n\t\t\t}\n\t\t}\n\t}\n\tcout<<ans<<endl;\n}\n"
  },
  {
    "language": "C",
    "code": "// AOJ 0310: Frame\n// 2017.11.14 bal4u@uu\n\n#include <stdio.h>\n\n#define MAX 302\n\nint map[MAX][MAX];\nint sr[MAX][MAX], sc[MAX][MAX];\n\nchar buf[2000], *p;\nint getint()\n{\n\tint n = 0;\n\tif (*p == '-') {\n\t\tp++; while (*p >= '0') n = (n<<3) + (n<<1) + (*p++ & 0xf);\n\t\treturn -n;\n\t}\n\twhile (*p >= '0') n = (n<<3) + (n<<1) + (*p++ & 0xf);\n\treturn n;\n}\n\nint main()\n{\n\tint n, r, c, s, i, ans;\n\n\tfgets(p=buf, 10, stdin), n = getint();\n\tfor (r = 0; r < n; r++) {\n\t\tfgets(p=buf, 2000, stdin);\n\t\tfor (c = 0; c < n; c++) map[r][c] = getint(), p++;\n\t}\n\tfor (r = 0; r < n; r++) {\n\t\tsr[r][0] = 0, sc[r][0] = 0;\n\t\tfor (c = 1; c <= n; c++) {\n\t\t\tsr[r][c] = sr[r][c-1] + map[r][c-1];\n\t\t\tsc[r][c] = sc[r][c-1] + map[c-1][r];\n\t\t}\n\t}\n\tans = 0;\n\tfor (r = 0; r < n; r++) for (c = r; c < n; c++) {\n\t\tif (sr[r][c+1] - sr[r][r] > ans) ans = sr[r][c+1]-sr[r][r];\n\t\tif (c == r) continue;\n\t\ts = sc[0][c+1] - sc[0][r];\n\t\tfor (i = 1; i < n; i++) {\n\t\t\tint u, v;\n\t\t\tu = v = sc[i][c+1] - sc[i][r];\n\t\t\tif (s > 0) u += s;\n\t\t\tif (u > ans) ans = u;\n\t\t\tif (s + map[r][i] + map[c][i] < v) s = v;\n\t\t\telse s += map[r][i] + map[c][i];\n\t\t}\n\t}\n\tprintf(\"%d\\n\", ans);\n\treturn 0;\n}"
  },
  {
    "language": "C",
    "code": "// AOJ Vol-3 0310: Frame\n// 2017.9.30\n\n#include <stdio.h>\n\n#define MAX 302\n\nint map[MAX][MAX];\nint sr[MAX][MAX], sc[MAX][MAX];\n\nint main()\n{\n\tint n, r, c, r2, c2, sum, ans;\n\n\tscanf(\"%d\", &n);\n\tfor (r = 1; r <= n; r++) for (c = 1; c <= n; c++) scanf(\"%d\", &map[r][c]);\n\tfor (r = 1; r <= n; r++)\n\t\tfor (sc[r][0] = 0, c = 1; c <= n; c++) sc[r][c] = sc[r][c-1] + map[r][c];\n\tfor (c = 1; c <= n; c++)\n\t\tfor (sr[0][c] = 0, r = 1; r <= n; r++) sr[r][c] = sr[r-1][c] + map[r][c];\n\n\tans = 0;\n\tfor (sum = 0, r = 1; r <= n; r++) for (c = 1; c <= n; c++) {\n\t\tfor (r2 = r; r2 <= n; r2++) for (c2 = c; c2 <= n; c2++) {\n\t\t\tsum = sc[r][c2] - sc[r][c-1];\n\t\t\tif (r2 != r) {\n\t\t\t\tsum += sc[r2][c2] - sc[r2][c-1] + sr[r2-1][c] - sr[r][c];\n\t\t\t\tif (c2 != c) sum += sr[r2-1][c2] - sr[r][c2];\n\t\t\t}\n\t\t\tif (sum > ans) ans = sum;\n\t\t}\n\t}\n\tprintf(\"%d\\n\", ans);\n\treturn 0;\n}"
  },
  {
    "language": "Kotlin",
    "code": "fun main(args:Array<String>):Unit {\n    val n = readLine()!!.trim().toInt()\n    val state = Array(n + 1){Array(n + 1){0}}\n    for (i in 1 .. n) {\n        readLine()!!.trim().split(' ').map(String::toInt).forEachIndexed { j, num -> state[i][j + 1] = num }\n    }\n    for (y in 1 .. n) for (x in 1 .. n) state[y][x] += state[y - 1][x]\n    var max = Int.MIN_VALUE\n    for (upper in 0 until n - 1){\n        for (bottom in upper + 2 .. n){//上がupper + 1、下がbottomである枠の最大値\n            var current = 0\n            for (x in 1 .. n){\n                if (max < state[bottom][x] - state[upper][x]) max = state[bottom][x] - state[upper][x]\n                current += state[bottom][x] - state[upper][x] - state[bottom - 1][x] + state[upper + 1][x]\n                if (current < state[bottom][x] - state[upper][x] + state[bottom][x - 1] - state[upper][x - 1])\n                    current = state[bottom][x] - state[upper][x] + state[bottom][x-  1] - state[upper][x - 1]\n                if (max < current)\n                    max = current\n            }\n        }\n    }\n    for (y in (1 .. n).reversed()) for (x in 1 .. n) state[y][x] -= state[y - 1][x]\n    for (y in 1 .. n) for (x in 1 .. n) state[y][x] += state[y][x - 1]\n    for (y in 1 .. n){\n        var minLeft = state[y][1]\n        var maxRight = state[y][1]\n        for (x in 1 .. n){\n            if (minLeft < state[y][x]) minLeft = state[y][x]\n            if (maxRight > state[y][x]) maxRight = state[y][x]\n            if (max < maxRight - minLeft) max = maxRight - minLeft\n        }\n    }\n    println(max)\n}\n"
  },
  {
    "language": "Kotlin",
    "code": "fun main(args:Array<String>):Unit {\n    val n = readLine()!!.trim().toInt()\n    val state = Array(n + 1){Array(n + 1){0}}\n    for (i in 1 .. n) {\n        readLine()!!.trim().split(' ').map(String::toInt).forEachIndexed { j, num -> state[i][j + 1] = num }\n    }\n    for (y in 1 .. n) for (x in 1 .. n) state[y][x] += state[y - 1][x]\n    var max = Int.MIN_VALUE\n    for (upper in 0 until n - 1){\n        for (bottom in upper + 2 .. n){//上がupper + 1、下がbottomである枠の最大値\n            var current = 0\n            for (x in 1 .. n){\n                if (max < state[bottom][x] - state[upper][x]) max = state[bottom][x] - state[upper][x]\n                current += state[bottom][x] - state[upper][x] - state[bottom - 1][x - 1] + state[upper + 1][x - 1]\n                if (current < state[bottom][x] - state[upper][x] + state[bottom][x - 1] - state[upper][x - 1])\n                    current = state[bottom][x] - state[upper][x] + state[bottom][x-  1] - state[upper][x - 1]\n                if (max < current) {\n                    max = current\n                }\n            }\n        }\n    }\n    for (y in (1 .. n).reversed()) for (x in 1 .. n) state[y][x] -= state[y - 1][x]\n    for (y in 1 .. n) for (x in 1 .. n) state[y][x] += state[y][x - 1]\n    for (y in 1 .. n){\n        var minLeft = state[y][1]\n        var maxRight = state[y][1]\n        for (x in 1 .. n){\n            if (minLeft < state[y][x]) minLeft = state[y][x]\n            if (maxRight > state[y][x]) maxRight = state[y][x]\n            if (max < maxRight - minLeft) {\n                max = maxRight - minLeft\n            }\n        }\n    }\n    println(max)\n}\n"
  },
  {
    "language": "Java",
    "code": "import java.util.Scanner;\n\npublic class Main {\n\tstatic int[][] t;\n\tstatic int[][] u;\n\tstatic int n;\n\tpublic static void main (String[] args) {\n\t\tint N =300;\n\t\tt = new int[N+1][N+1];\n\t\tu = new int[N+1][N+1];\n\t\tScanner scan = new Scanner(System.in);\n\t\tn =scan.nextInt();\n\t\tfor(int i=1;i<=n;i++){\n\t\t\tfor(int j=1;j<=n;j++){\n\t\t\t\tt[i][j] = scan.nextInt();\n\t\t\tu[i][j]=t[i][j]+u[i-1][j]+u[i][j-1]-u[i-1][j-1];\n\t\t\t}\n\t\t}\n\t\tint ans=-10000;\n\t\tfor(int i=1;i<=n;i++){\n\t\t\tfor(int j=i;j<=n;j++){\n\t\t\t\tif(ans > calc(i,j))\n\t\t\t\t\tans= calc(i,j);\t\n\t\t\t}\n\t\t}\n\t}\n\t\n\tstatic int sum(int ai,int aj,int bi,int bj){\n\t\t  ai--;\n\t\t  aj--;\n\t\t  return u[bi][bj]-u[ai][bj]-u[bi][aj]+u[ai][aj];\n\t}\n\t\n\tstatic int calc(int ah,int bh){\n\t\tint res=-100000;\n\t\tint maxm=0;\n\t\tfor(int i=1;i<=n;i++){\n\t\t\tif (res < maxm+sum(ah,i,bh,i)) {\n\t\t\t\tres = maxm+sum(ah,i,bh,i);\n\t\t\t}\n\t\t\tint d=t[ah][i]+t[bh][i];\n\t\t\tif(ah==bh)d/=2;\n\t\t\tif( maxm + d < sum(ah,i,bh,i) ) {\n\t\t\t\tmaxm=sum(ah,i,bh,i);\n\t\t\t}\n\t\t}\n\t\treturn res;\n\t\t}\n\t\n}"
  },
  {
    "language": "Java",
    "code": "import java.util.Scanner;\n\npublic class Main {\n\tpublic static void main (String[] args) {\n\t\tScanner scan = new Scanner(System.in);\n\t\tint N = 300;\n\t\tint n = scan.nextInt();\n\t\tint[][] p = new int[N+1][N+1];\n\t\tint[][] sp = new int[N+1][N+1];\n\t\tfor (int i = 1; i <= n; i++) {\n\t\t\tfor (int j = 1; j <= n; j++) {\n\t\t\t\tp[i][j] = scan.nextInt();\n\t\t\t}\n\t\t}\n\t\t\n\t\tint max = -10000;\n\t\tfor (int x = 1; x <= 1; x++) {\n\t\t\tfor (int y = 1; y <= 1; y++) {\n\t\t\t\tfor (int i = x; i <= n; i ++) {\n\t\t\t\t\tfor (int j = y; j <= n; j++) {\n\t\t\t\t\t\tsp[i][j] = sp[i-1][j] + sp[i][j-1] + p[i][j] - sp[i-1][j-1];\n\t\t\t\t\t\tif (i >= 3 && j >= 3) {\n\t\t\t\t\t\t\tsp[i][j] -= p[i-1][j-1];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (sp[i][j] > max)  {\n\t\t\t\t\t\t\tmax = sp[i][j];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (int i = 0; i <= n; i ++) {\n\t\t\t\t\tfor (int j = 0; j <= n; j++) {\n\t\t\t\t\t\tsp[i][j] = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tSystem.out.println(max);\n\t\tscan.close();\n\t}\n}"
  },
  {
    "language": "Java",
    "code": "import java.util.Scanner;\n\npublic class Main {\n\tstatic int[][] t;\n\tstatic int[][] u;\n\tstatic int n;\n\tpublic static void main (String[] args) {\n\t\tint N =300;\n\t\tt = new int[N+1][N+1];\n\t\tu = new int[N+1][N+1];\n\t\tScanner scan = new Scanner(System.in);\n\t\tn =scan.nextInt();\n\t\tfor(int i=1;i<=n;i++){\n\t\t\tfor(int j=1;j<=n;j++){\n\t\t\t\tt[i][j] = scan.nextInt();\n\t\t\tu[i][j]=t[i][j]+u[i-1][j]+u[i][j-1]-u[i-1][j-1];\n\t\t\t}\n\t\t}\n\t\tint ans=-10000;\n\t\tfor(int i=1;i<=n;i++){\n\t\t\tfor(int j=i;j<=n;j++){\n\t\t\t\tif(ans > calc(i,j))\n\t\t\t\t\tans= calc(i,j);\t\n\t\t\t}\n\t\t}\n\t}\n\t\n\tstatic int sum(int ai,int aj,int bi,int bj){\n\t\t  ai--;\n\t\t  aj--;\n\t\t  return u[bi][bj]-u[ai][bj]-u[bi][aj]+u[ai][aj];\n\t}\n\t\n\tstatic int calc(int ah,int bh){\n\t\tint res=-100000;\n\t\tint maxm=0;\n\t\tfor(int i=1;i<=n;i++){\n\t\t\tif (res < maxm+sum(ah,i,bh,i)) {\n\t\t\t\tres = maxm+sum(ah,i,bh,i);\n\t\t\t}\n\t\t\tint d=t[ah][i]+t[bh][i];\n\t\t\tif(ah==bh)d/=2;\n\t\t\tif( maxm + d < sum(ah,i,bh,i) ) {\n\t\t\t\tmaxm=sum(ah,i,bh,i);\n\t\t\t}else {\n\t\t\t\tmaxm = maxm + d;\n\t\t\t}\n\t\t}\n\t\treturn res;"
  },
  {
    "language": "Java",
    "code": "public class Main {\n\tpublic static void main (String[] args) {\n\t\tScanner scan = new Scanner(System.in);\n\t\tint N = 300;\n\t\tint n = scan.nextInt();\n\t\tint[][] p = new int[N+1][N+1];\n\t\tint[][] sp = new int[N+1][N+1];\n\t\tfor (int i = 1; i <= n; i++) {\n\t\t\tfor (int j = 1; j <= n; j++) {\n\t\t\t\tp[i][j] = scan.nextInt();\n\t\t\t}\n\t\t}\n\t\t\n\t\tint max = 0;\n\t\tfor (int x = 1; x <= n; x++) {\n\t\t\tfor (int y = 1; y <= n; y++) {\n\t\t\t\tfor (int i = x; i <= n; i ++) {\n\t\t\t\t\tfor (int j = y; j <= n; j++) {\n\t\t\t\t\t\tsp[i][j] = sp[i-1][j] + sp[i][j-1] + p[i][j] - sp[i-1][j-1];\n\t\t\t\t\t\tif (sp[i][j] > max)  {\n\t\t\t\t\t\t\tmax = sp[i][j];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (int i = x; i <= n; i ++) {\n\t\t\t\t\tfor (int j = y; j <= n; j++) {\n\t\t\t\t\t\tsp[i][j] = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tSystem.out.println(max);\n\t\tscan.close();\n\t}\n}"
  },
  {
    "language": "Java",
    "code": "import java.util.*;\npublic class Main {\n   public static void main(String[] args) {\n       Scanner sc = new Scanner(System.in);\n       int N = sc.nextInt();\n       int[][] p = new int[N][N];\n       for(int i = 0; i < N; i++) {\n    \t   for(int j = 0; j < N; j++) {\n    \t\t   p[i][j] = sc.nextInt();\n    \t   }\n       }\n       int[][] sum = new int[N+1][N+1];\n       for(int i = 1; i <= N; i++) {\n    \t   for(int j = 0; j < N; j++) {\n    \t\t   sum[i][j + 1] += sum[i][j] + p[i-1][j];\n    \t   }\n       }\n       for(int i = 0; i <= N; i++) {\n    \t   for(int j = 0; j < N; j++) {\n    \t\t   sum[j + 1][i] += sum[j][i];\n    \t   }\n       }\n       \n       int max = p[0][0];\n       for(int i = 0; i <= N; i++) {\n    \t   for(int j = 0; j <= N; j++) {\n    \t\t   for(int k = i + 2; k <= N; k++) {\n    \t\t\t   for(int l = j + 2; l <= N; l++) {\n    \t\t\t\t   if(k - 1 < 0 || l - 1 < 0 ) continue;\n    \t\t\t\t   if(i + 1 > N || j + 1 > N) continue;\n    \t\t\t\t   \n    \t\t\t\t   int sumA = sum[k][l] + sum[i][j] - sum[k][j] - sum[i][l];\n    \t\t\t\t   int sumB = sum[k-1][l-1] + sum[i+1][j+1] - sum[k-1][j+1] - sum[i+1][l-1];\n    \t\t\t\t   max = Math.max(max, sumA - sumB);\n    \t\t\t   }\n    \t\t   }\n    \t   }\n       }\n       System.out.println(max);\n   }\n}"
  },
  {
    "language": "Java",
    "code": "import java.util.Scanner;\n\npublic class Main {\n\tpublic static void main (String[] args) {\n\t\tScanner scan = new Scanner(System.in);\n\t\tint N = 300;\n\t\tint n = scan.nextInt();\n\t\tint[][] p = new int[N+1][N+1];\n\t\tint[][] sp = new int[N+1][N+1];\n\t\tfor (int i = 1; i <= n; i++) {\n\t\t\tfor (int j = 1; j <= n; j++) {\n\t\t\t\tp[i][j] = scan.nextInt();\n\t\t\t}\n\t\t}\n\t\t\n\t\tint max = 0;\n\t\tfor (int x = 1; x <= n; x++) {\n\t\t\tfor (int y = 1; y <= n; y++) {\n\t\t\t\tfor (int i = x; i <= n; i ++) {\n\t\t\t\t\tfor (int j = y; j <= n; j++) {\n\t\t\t\t\t\tsp[i][j] = sp[i-1][j] + sp[i][j-1] + p[i][j] - sp[i-1][j-1];\n\t\t\t\t\t\tif (sp[i][j] > max)  {\n\t\t\t\t\t\t\tmax = sp[i][j];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (int i = x; i <= n; i ++) {\n\t\t\t\t\tfor (int j = y; j <= n; j++) {\n\t\t\t\t\t\tsp[i][j] = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tSystem.out.println(max);\n\t\tscan.close();\n\t}\n}"
  },
  {
    "language": "Java",
    "code": "import java.util.Scanner;\n\npublic class Main {\n\tpublic static void main (String[] args) {\n\t\tScanner scan = new Scanner(System.in);\n\t\tint N = 300;\n\t\tint n = scan.nextInt();\n\t\tint[][] p = new int[N+1][N+1];\n\t\tint[][] sp = new int[N+1][N+1];\n\t\tfor (int i = 1; i <= n; i++) {\n\t\t\tfor (int j = 1; j <= n; j++) {\n\t\t\t\tp[i][j] = scan.nextInt();\n\t\t\t}\n\t\t}\n\t\t\n\t\tint max = -10000;\n\t\tfor (int x = 1; x <= 1; x++) {\n\t\t\tfor (int y = 1; y <= 1; y++) {\n\t\t\t\tfor (int i = x; i <= 4; i ++) {\n\t\t\t\t\tfor (int j = y; j <= 4; j++) {\n\t\t\t\t\t\tsp[i][j] = sp[i-1][j] + sp[i][j-1] + p[i][j] - sp[i-1][j-1];\n\t\t\t\t\t\tif (i >= 3 && j >= 3) {\n\t\t\t\t\t\t\tsp[i][j] -= p[i-1][j-1];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (sp[i][j] > max)  {\n\t\t\t\t\t\t\tmax = sp[i][j];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (int i = 0; i <= n; i ++) {\n\t\t\t\t\tfor (int j = 0; j <= n; j++) {\n\t\t\t\t\t\tsp[i][j] = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tSystem.out.println(max);\n\t\tscan.close();\n\t}\n}"
  },
  {
    "language": "Java",
    "code": "import java.util.Scanner;\n\npublic class Main {\n\tpublic static void main (String[] args) {\n\t\tScanner scan = new Scanner(System.in);\n\t\tint N = 300;\n\t\tint n = scan.nextInt();\n\t\tint[][] p = new int[N+1][N+1];\n\t\tint[][] sp = new int[N+1][N+1];\n\t\tfor (int i = 1; i <= n; i++) {\n\t\t\tfor (int j = 1; j <= n; j++) {\n\t\t\t\tp[i][j] = scan.nextInt();\n\t\t\t}\n\t\t}\n\t\t\n\t\tint max = -10000;\n\t\tfor (int x = 1; x <= 1; x++) {\n\t\t\tfor (int y = 1; y <= 1; y++) {\n\t\t\t\tfor (int i = x; i <= n; i ++) {\n\t\t\t\t\tfor (int j = y; j <= n; j++) {\n\t\t\t\t\t\tsp[i][j] = sp[i-1][j] + sp[i][j-1] + p[i][j] - sp[i-1][j-1];\n\t\t\t\t\t\tif (i >= 3 && j >= 3) {\n\t\t\t\t\t\t\tsp[i][j] -= p[i-1][j-1];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (sp[i][j] > max)  {\n\t\t\t\t\t\t\tmax = sp[i][j];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (int i = 0; i <= n; i ++) {\n\t\t\t\t\tfor (int j = 0; j <= n; j++) {\n\t\t\t\t\t\tsp[i][j] = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tSystem.out.println(max);\n\t\tscan.close();\n\t}\n}"
  },
  {
    "language": "Java",
    "code": "import java.io.*;\nimport java.util.*;\npublic class Main {\n   public static void main(String[] args) {\n       FastScanner sc = new FastScanner();\n       int N = sc.nextInt();\n       int[][] p = new int[N][N];\n       for(int i = 0; i < N; i++) {\n    \t   for(int j = 0; j < N; j++) {\n    \t\t   p[i][j] = sc.nextInt();\n    \t   }\n       }\n       int[][] sum = new int[N+1][N+1];\n       for(int i = 1; i <= N; i++) {\n    \t   for(int j = 0; j < N; j++) {\n    \t\t   sum[i][j + 1] += sum[i][j] + p[i-1][j];\n    \t   }\n       }\n       for(int i = 0; i <= N; i++) {\n    \t   for(int j = 0; j < N; j++) {\n    \t\t   sum[j + 1][i] += sum[j][i];\n    \t   }\n       }\n       \n       int max = p[0][0];\n       for(int i = 0; i < N; i++) {\n    \t   for(int j = 0; j < N; j++) {\n    \t\t   for(int k = i + 2; k <= N; k++) {\n    \t\t\t   for(int l = j + 2; l <= N; l++) {\n    \t\t\t\t   int sumA = sum[k][l] + sum[i][j] - sum[k][j] - sum[i][l];\n    \t\t\t\t   int sumB = sum[k-1][l-1] + sum[i+1][j+1] - sum[k-1][j+1] - sum[i+1][l-1];\n    \t\t\t\t   max = Math.max(max, sumA - sumB);\n    \t\t\t   }\n    \t\t   }\n    \t   }\n       }\n       System.out.println(max);\n   }\n}\n\nclass FastScanner {\n    private final InputStream in = System.in;\n    private final byte[] buffer = new byte[1024];\n    private int ptr = 0;\n    private int buflen = 0;\n    private boolean hasNextByte() {\n        if (ptr < buflen) {\n            return true;\n        }else{\n            ptr = 0;\n            try {\n                buflen = in.read(buffer);\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n            if (buflen <= 0) {\n                return false;\n            }\n        }\n        return true;\n    }\n    private int readByte() { if (hasNextByte()) return buffer[ptr++]; else return -1;}\n    private static boolean isPrintableChar(int c) { return 33 <= c && c <= 126;}\n    private void skipUnprintable() { while(hasNextByte() && !isPrintableChar(buffer[ptr])) ptr++;}\n    public boolean hasNext() { skipUnprintable(); return hasNextByte();}\n    public String next() {\n        if (!hasNext()) throw new NoSuchElementException();\n        StringBuilder sb = new StringBuilder();\n        int b = readByte();\n        while(isPrintableChar(b)) {\n            sb.appendCodePoint(b);\n            b = readByte();\n        }\n        return sb.toString();\n    }\n    public long nextLong() {\n        if (!hasNext()) throw new NoSuchElementException();\n        long n = 0;\n        boolean minus = false;\n        int b = readByte();\n        if (b == '-') {\n            minus = true;\n            b = readByte();\n        }\n        if (b < '0' || '9' < b) {\n            throw new NumberFormatException();\n        }\n        while(true){\n            if ('0' <= b && b <= '9') {\n                n *= 10;\n                n += b - '0';\n            }else if(b == -1 || !isPrintableChar(b)){\n                return minus ? -n : n;\n            }else{\n                throw new NumberFormatException();\n            }\n            b = readByte();\n        }\n    }\n    public int nextInt() {\n        if (!hasNext()) throw new NoSuchElementException();\n        int n = 0;\n        boolean minus = false;\n        int b = readByte();\n        if (b == '-') {\n            minus = true;\n            b = readByte();\n        }\n        if (b < '0' || '9' < b) {\n            throw new NumberFormatException();\n        }\n        while(true){\n            if ('0' <= b && b <= '9') {\n                n *= 10;\n                n += b - '0';\n            }else if(b == -1 || !isPrintableChar(b)){\n                return minus ? -n : n;\n            }else{\n                throw new NumberFormatException();\n            }\n            b = readByte();\n        }\n    }\n}"
  },
  {
    "language": "Java",
    "code": "public class Main {\n\tpublic static void main (String[] args) {\n\t\tScanner scan = new Scanner(System.in);\n\t\tint N = 300;\n\t\tint n = scan.nextInt();\n\t\tint[][] p = new int[N+1][N+1];\n\t\tint[][] sp = new int[N+1][N+1];\n\t\tfor (int i = 1; i <= n; i++) {\n\t\t\tfor (int j = 1; j <= n; j++) {\n\t\t\t\tp[i][j] = scan.nextInt();\n\t\t\t}\n\t\t}\n\t\t\n\t\tint max = 0;\n\t\tfor (int x = 1; x <= 1; x++) {\n\t\t\tfor (int y = 1; y <= 1; y++) {\n\t\t\t\tfor (int i = x; i <= 4; i ++) {\n\t\t\t\t\tfor (int j = y; j <= 4; j++) {\n\t\t\t\t\t\tif(i <3 || j < 3) {\n\t\t\t\t\t\t\tsp[i][j] = sp[i-1][j] + sp[i][j-1] + p[i][j] - sp[i-1][j-1];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsp[i][j] = sp[i-1][j] + sp[i][j-1] + p[i][j] - sp[i-1][j-1] - p[i-1][j-1];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (sp[i][j] > max)  {\n\t\t\t\t\t\t\tmax = sp[i][j];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (int i = 0; i <= n; i ++) {\n\t\t\t\t\tfor (int j = 0; j <= n; j++) {\n\t\t\t\t\t\tsp[i][j] = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tSystem.out.println(max);\n\t\tscan.close();\n\t}\n}"
  },
  {
    "language": "Java",
    "code": "import java.util.Scanner;\n\npublic class Main {\n\tstatic int[][] t;\n\tstatic int[][] u;\n\tstatic int n;\n\tpublic static void main (String[] args) {\n\t\tint N =300;\n\t\tt = new int[N+1][N+1];\n\t\tu = new int[N+1][N+1];\n\t\tScanner scan = new Scanner(System.in);\n\t\tn =scan.nextInt();\n\t\tfor(int i=1;i<=n;i++){\n\t\t\tfor(int j=1;j<=n;j++){\n\t\t\t\tt[i][j] = scan.nextInt();\n\t\t\tu[i][j]=t[i][j]+u[i-1][j]+u[i][j-1]-u[i-1][j-1];\n\t\t\t}\n\t\t}\n\t\tint ans=-10000;\n\t\tfor(int i=1;i<=n;i++){\n\t\t\tfor(int j=i;j<=n;j++){\n\t\t\t\tif(ans > calc(i,j))\n\t\t\t\t\tans= calc(i,j);\t\n\t\t\t}\n\t\t}\n\t}\n\t\n\tstatic int sum(int ai,int aj,int bi,int bj){\n\t\t  ai--;\n\t\t  aj--;\n\t\t  return u[bi][bj]-u[ai][bj]-u[bi][aj]+u[ai][aj];\n\t}\n\t\n\tstatic int calc(int ah,int bh){\n\t\tint res=-100000;\n\t\tint maxm=0;\n\t\tfor(int i=1;i<=n;i++){\n\t\t\tif (res < maxm+sum(ah,i,bh,i)) {\n\t\t\t\tres = maxm+sum(ah,i,bh,i);\n\t\t\t}\n\t\t\tint d=t[ah][i]+t[bh][i];\n\t\t\tif(ah==bh)d/=2;\n\t\t\tif( maxm + d < sum(ah,i,bh,i) ) {\n\t\t\t\tmaxm=sum(ah,i,bh,i);\n\t\t\t}else {\n\t\t\t\tmaxm = maxm + d;\n\t\t\t}\n\t\t}\n\t\treturn res;\n\t\t}\n\t\n}"
  },
  {
    "language": "Java",
    "code": "import java.util.Scanner;\n\npublic class Main {\n\tstatic int[][] t;\n\tstatic int[][] u;\n\tstatic int n;\n\tpublic static void main (String[] args) {\n\t\tint N =300;\n\t\tt = new int[N+1][N+1];\n\t\tu = new int[N+1][N+1];\n\t\tScanner scan = new Scanner(System.in);\n\t\tn =scan.nextInt();\n\t\tfor(int i=1;i<=n;i++){\n\t\t\tfor(int j=1;j<=n;j++){\n\t\t\t\tt[i][j] = scan.nextInt();\n\t\t\tu[i][j]=t[i][j]+u[i-1][j]+u[i][j-1]-u[i-1][j-1];\n\t\t\t}\n\t\t}\n\t\tint ans=-10000;\n\t\tfor(int i=1;i<=n;i++){\n\t\t\tfor(int j=i;j<=n;j++){\n\t\t\t\tif(ans > calc(i,j))\n\t\t\t\t\tans= calc(i,j);\t\n\t\t\t}\n\t\t}\n\t\tSystem.out.println(ans);\n\t}\n\t\n\tstatic int sum(int ai,int aj,int bi,int bj){\n\t\t  ai--;\n\t\t  aj--;\n\t\t  return u[bi][bj]-u[ai][bj]-u[bi][aj]+u[ai][aj];\n\t}\n\t\n\tstatic int calc(int ah,int bh){\n\t\tint res=-100000;\n\t\tint maxm=0;\n\t\tfor(int i=1;i<=n;i++){\n\t\t\tif (res < maxm+sum(ah,i,bh,i)) {\n\t\t\t\tres = maxm+sum(ah,i,bh,i);\n\t\t\t}\n\t\t\tint d=t[ah][i]+t[bh][i];\n\t\t\tif(ah==bh)d/=2;\n\t\t\tif( maxm + d < sum(ah,i,bh,i) ) {\n\t\t\t\tmaxm=sum(ah,i,bh,i);\n\t\t\t}else {\n\t\t\t\tmaxm = maxm + d;\n\t\t\t}\n\t\t}\n\t\treturn res;\n\t\t}\n\t\n}"
  },
  {
    "language": "Java",
    "code": "import java.io.*;\nimport java.util.*;\npublic class Main {\n   public static void main(String[] args) {\n       FastScanner sc = new FastScanner();\n       int N = sc.nextInt();\n       int[][] p = new int[N][N];\n       for(int i = 0; i < N; i++) {\n    \t   for(int j = 0; j < N; j++) {\n    \t\t   p[i][j] = sc.nextInt();\n    \t   }\n       }\n       int[][] sum = new int[N+1][N+1];\n       for(int i = 1; i <= N; i++) {\n    \t   for(int j = 0; j < N; j++) {\n    \t\t   sum[i][j + 1] += sum[i][j] + p[i-1][j];\n    \t   }\n       }\n       for(int i = 0; i <= N; i++) {\n    \t   for(int j = 0; j < N; j++) {\n    \t\t   sum[j + 1][i] += sum[j][i];\n    \t   }\n       }\n       \n       int max = p[0][0];\n       for(int i = 0; i < N; i++) {\n    \t   for(int j = 0; j < N; j++) {\n    \t\t   for(int k = i + 2; k <= N; k++) {\n    \t\t\t   int l = j + 2;\n    \t\t\t   for(l = j + 2; l + 3 <= N; l += 4) {\n    \t\t\t\t   int sumA = sum[k][l] + sum[i][j] - sum[k][j] - sum[i][l];\n    \t\t\t\t   int sumB = sum[k-1][l-1] + sum[i+1][j+1] - sum[k-1][j+1] - sum[i+1][l-1];\n    \t\t\t\t   max = Math.max(max, sumA - sumB);\n    \t\t\t\t   sumA = sum[k][l+1] + sum[i][j] - sum[k][j] - sum[i][l+1];\n    \t\t\t\t   sumB = sum[k-1][l] + sum[i+1][j+1] - sum[k-1][j+1] - sum[i+1][l];\n    \t\t\t\t   max = Math.max(max, sumA - sumB);\n    \t\t\t\t   sumA = sum[k][l+2] + sum[i][j] - sum[k][j] - sum[i][l+2];\n    \t\t\t\t   sumB = sum[k-1][l+1] + sum[i+1][j+1] - sum[k-1][j+1] - sum[i+1][l+1];\n    \t\t\t\t   max = Math.max(max, sumA - sumB);\n    \t\t\t\t   sumA = sum[k][l+3] + sum[i][j] - sum[k][j] - sum[i][l+3];\n    \t\t\t\t   sumB = sum[k-1][l+2] + sum[i+1][j+1] - sum[k-1][j+1] - sum[i+1][l+2];\n    \t\t\t\t   max = Math.max(max, sumA - sumB);\n    \t\t\t   }\n    \t\t\t   for(; l <= N; l++) {\n    \t\t\t\t   int sumA = sum[k][l] + sum[i][j] - sum[k][j] - sum[i][l];\n    \t\t\t\t   int sumB = sum[k-1][l-1] + sum[i+1][j+1] - sum[k-1][j+1] - sum[i+1][l-1];\n    \t\t\t\t   max = Math.max(max, sumA - sumB);\n    \t\t\t   }\n    \t\t   }\n    \t   }\n       }\n       System.out.println(max);\n   }\n}\n\nclass FastScanner {\n    private final InputStream in = System.in;\n    private final byte[] buffer = new byte[1024];\n    private int ptr = 0;\n    private int buflen = 0;\n    private boolean hasNextByte() {\n        if (ptr < buflen) {\n            return true;\n        }else{\n            ptr = 0;\n            try {\n                buflen = in.read(buffer);\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n            if (buflen <= 0) {\n                return false;\n            }\n        }\n        return true;\n    }\n    private int readByte() { if (hasNextByte()) return buffer[ptr++]; else return -1;}\n    private static boolean isPrintableChar(int c) { return 33 <= c && c <= 126;}\n    private void skipUnprintable() { while(hasNextByte() && !isPrintableChar(buffer[ptr])) ptr++;}\n    public boolean hasNext() { skipUnprintable(); return hasNextByte();}\n    public String next() {\n        if (!hasNext()) throw new NoSuchElementException();\n        StringBuilder sb = new StringBuilder();\n        int b = readByte();\n        while(isPrintableChar(b)) {\n            sb.appendCodePoint(b);\n            b = readByte();\n        }\n        return sb.toString();\n    }\n    public long nextLong() {\n        if (!hasNext()) throw new NoSuchElementException();\n        long n = 0;\n        boolean minus = false;\n        int b = readByte();\n        if (b == '-') {\n            minus = true;\n            b = readByte();\n        }\n        if (b < '0' || '9' < b) {\n            throw new NumberFormatException();\n        }\n        while(true){\n            if ('0' <= b && b <= '9') {\n                n *= 10;\n                n += b - '0';\n            }else if(b == -1 || !isPrintableChar(b)){\n                return minus ? -n : n;\n            }else{\n                throw new NumberFormatException();\n            }\n            b = readByte();\n        }\n    }\n    public int nextInt() {\n        if (!hasNext()) throw new NoSuchElementException();\n        int n = 0;\n        boolean minus = false;\n        int b = readByte();\n        if (b == '-') {\n            minus = true;\n            b = readByte();\n        }\n        if (b < '0' || '9' < b) {\n            throw new NumberFormatException();\n        }\n        while(true){\n            if ('0' <= b && b <= '9') {\n                n *= 10;\n                n += b - '0';\n            }else if(b == -1 || !isPrintableChar(b)){\n                return minus ? -n : n;\n            }else{\n                throw new NumberFormatException();\n            }\n            b = readByte();\n        }\n    }\n}"
  },
  {
    "language": "Java",
    "code": "import java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.util.Scanner;\n\npublic class Main {\n\tprivate static int n; // ?????????????????°\n\tprivate static int[][] pixels; // ?????????????????????\n\tprivate static int maxSum = Integer.MIN_VALUE; // ????¨????????????????\n\tprivate static int width = 1; // ???????¨????\n\tprivate static int height = 1; // ????????????\n\n\tpublic static void main(String[] args) throws IOException {\n\t\tScanner sc = new Scanner(new InputStreamReader(System.in));\n\n\t\t// ???????????????????????±???????????????\n\t\tn = sc.nextInt();\n\t\tpixels = new int[n][n];\n\t\tfor (int y = 0; y < n; y++) {\n\t\t\tfor (int x = 0; x < n; x++) {\n\t\t\t\tpixels[y][x] = sc.nextInt();\n\t\t\t}\n\t\t}\n\n\t\t// ??¨????????????????????????????????????\n\t\tfor (int y = 0; y < n; y++) {\n\t\t\tfor (int x = 0; x < n; x++) {\n\t\t\t\tcalculate(); // ????¨????????¨??????????\n\t\t\t\twidth++;\n\t\t\t}\n\t\t\twidth = 1; // ?¨??????????????????????\n\t\t\theight++;\n\t\t}\n\n\t\t// ?????????????????????\n\t\tSystem.out.println(maxSum);\n\t}\n\n\t/**\n\t * ?±??????????????¨????????????¨??????????????§?????¨????????´??????????¨????????¨??????????\n\t */\n\tprivate static void calculate() {\n\t\tint startY = 0;\n\t\twhile ((startY + height) <= n) {\n\t\t\tint startX = 0;\n\t\t\twhile ((startX + width) <= n) {\n\t\t\t\tint tmpSum = 0;\n\t\t\t\ttmpSum = calculateTmpSum(tmpSum, startX, startY); // ????¨????????¨??????????\n\t\t\t\tisMaxSum(tmpSum); // ????¨????????????§???????????????????????????\n\t\t\t\tstartX++;\n\t\t\t}\n\t\t\tstartY++;\n\t\t}\n\t}\n\n\t/**\n\t * ?????????????????????????¨????????¨??????????\n\t *\n\t * @param tmpSum\n\t *            ????¨????\n\t * @param startX\n\t *            x????§????\n\t * @param startY\n\t *            y????§????\n\t * @return\n\t */\n\tprivate static int calculateTmpSum(int tmpSum, int startX, int startY) {\n\t\tfor (int y = 0; y < height; y++) {\n\t\t\tfor (int x = 0; x < width; x++) {\n\t\t\t\tif ((y == 0) || (y == height - 1)) { // ???????????????????????????????¨??????°?????¨????¶???????\n\t\t\t\t\ttmpSum += pixels[startY + y][startX + x];\n\t\t\t\t} else { // ??°????????´????????????????????¨??????????????°????¶????\n\t\t\t\t\ttmpSum += pixels[startY + y][startX + x];\n\t\t\t\t\ttmpSum += pixels[startY + y][startX + width - 1];\n\t\t\t\t\tx = width;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn tmpSum;\n\t}\n\n\t/**\n\t * ?¨?????????????????????????????????????????????????\n\t *\n\t * @param tmpSum\n\t */\n\tprivate static void isMaxSum(int tmpSum) {\n\t\tif (tmpSum > maxSum) {\n\t\t\tmaxSum = tmpSum;\n\t\t}\n\t}\n}"
  },
  {
    "language": "Java",
    "code": "import java.util.*;\npublic class Main {\n   public static void main(String[] args) {\n       Scanner sc = new Scanner(System.in);\n       int N = sc.nextInt();\n       int[][] p = new int[N][N];\n       for(int i = 0; i < N; i++) {\n    \t   for(int j = 0; j < N; j++) {\n    \t\t   p[i][j] = sc.nextInt();\n    \t   }\n       }\n       int[][] sum = new int[N+1][N+1];\n       for(int i = 1; i <= N; i++) {\n    \t   for(int j = 0; j < N; j++) {\n    \t\t   sum[i][j + 1] += sum[i][j] + p[i-1][j];\n    \t   }\n       }\n       for(int i = 0; i <= N; i++) {\n    \t   for(int j = 0; j < N; j++) {\n    \t\t   sum[j + 1][i] += sum[j][i];\n    \t   }\n       }\n       \n       int max = p[0][0];\n       for(int i = 0; i < N; i++) {\n    \t   for(int j = 0; j < N; j++) {\n    \t\t   for(int k = i + 2; k <= N; k++) {\n    \t\t\t   for(int l = j + 2; l <= N; l++) {\n    \t\t\t\t   int sumA = sum[k][l] + sum[i][j] - sum[k][j] - sum[i][l];\n    \t\t\t\t   int sumB = sum[k-1][l-1] + sum[i+1][j+1] - sum[k-1][j+1] - sum[i+1][l-1];\n    \t\t\t\t   max = Math.max(max, sumA - sumB);\n    \t\t\t   }\n    \t\t   }\n    \t   }\n       }\n       System.out.println(max);\n   }\n}"
  },
  {
    "language": "Java",
    "code": "import java.util.Scanner;\n\npublic class Main {\n\tpublic static void main (String[] args) {\n\t\tScanner scan = new Scanner(System.in);\n\t\tint N = 300;\n\t\tint n = scan.nextInt();\n\t\tint[][] p = new int[N+1][N+1];\n\t\tint[][] sp = new int[N+1][N+1];\n\t\tfor (int i = 1; i <= n; i++) {\n\t\t\tfor (int j = 1; j <= n; j++) {\n\t\t\t\tp[i][j] = scan.nextInt();\n\t\t\t}\n\t\t}\n\t\t\n\t\tint max = 0;\n\t\tfor (int x = 1; x <= 1; x++) {\n\t\t\tfor (int y = 1; y <= 1; y++) {\n\t\t\t\tfor (int i = x; i <= 4; i ++) {\n\t\t\t\t\tfor (int j = y; j <= 4; j++) {\n\t\t\t\t\t\tsp[i][j] = sp[i-1][j] + sp[i][j-1] + p[i][j] - sp[i-1][j-1];\n\t\t\t\t\t\tif (i >= 3 && j >= 3) {\n\t\t\t\t\t\t\tsp[i][j] -= p[i-1][j-1];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (sp[i][j] > max)  {\n\t\t\t\t\t\t\tmax = sp[i][j];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (int i = 0; i <= n; i ++) {\n\t\t\t\t\tfor (int j = 0; j <= n; j++) {\n\t\t\t\t\t\tsp[i][j] = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tSystem.out.println(max);\n\t\tscan.close();\n\t}\n}"
  },
  {
    "language": "Java",
    "code": "import java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.util.Scanner;\n\npublic class Main {\n\tprivate static int n; // ?????????????????°\n\tprivate static int[][] pixels; // ?????????????????????\n\tprivate static int maxSum = Integer.MIN_VALUE; // ????¨????????????????\n\tprivate static int width = 1; // ???????¨????\n\tprivate static int height = 1; // ????????????\n\n\tpublic static void main(String[] args) throws IOException {\n\t\tScanner sc = new Scanner(new InputStreamReader(System.in));\n\n\t\t// ???????????????????????±???????????????\n\t\tn = sc.nextInt();\n\t\tpixels = new int[n][n];\n\t\tfor (int y = 0; y < n; y++) {\n\t\t\tfor (int x = 0; x < n; x++) {\n\t\t\t\tpixels[y][x] = sc.nextInt();\n\t\t\t}\n\t\t}\n\n\t\t// ??¨????????????????????????????????????\n\t\tfor (int y = 0; y < n; y++) {\n\t\t\tfor (int x = 0; x < n; x++) {\n\t\t\t\tcalculate(); // ????¨????????¨??????????\n\t\t\t\twidth++;\n\t\t\t}\n\t\t\twidth = 1; // ?¨??????????????????????\n\t\t\theight++;\n\t\t}\n\n\t\t// ?????????????????????\n\t\tSystem.out.println(maxSum);\n\t}\n\n\t/**\n\t * ?±??????????????¨????????????¨??????????????§?????¨????????´??????????¨????????¨??????????\n\t */\n\tprivate static void calculate() {\n\t\tint startY = 0;\n\t\twhile ((startY + height) <= n) {\n\t\t\tint startX = 0;\n\t\t\twhile ((startX + width) <= n) {\n\t\t\t\tint tmpSum = 0;\n\t\t\t\ttmpSum = calculateTmpSum(tmpSum, startX, startY); // ????¨????????¨??????????\n\t\t\t\tisMaxSum(tmpSum); // ????¨????????????§???????????????????????????\n\t\t\t\tstartX++;\n\t\t\t}\n\t\t\tstartY++;\n\t\t}\n\t}\n\n\t/**\n\t * ?????????????????????????¨????????¨??????????\n\t *\n\t * @param tmpSum\n\t *            ????¨????\n\t * @param startX\n\t *            x????§????\n\t * @param startY\n\t *            y????§????\n\t * @return\n\t */\n\tprivate static int calculateTmpSum(int tmpSum, int startX, int startY) {\n\t\tfor (int y = 0; y < height; y++) {\n\t\t\tfor (int x = 0; x < width; x++) {\n\t\t\t\tif ((y == 0) || (y == height - 1)) { // ???????????????????????????????¨??????°?????¨????¶???????\n\t\t\t\t\ttmpSum += pixels[startY + y][startX + x];\n\t\t\t\t} else { // ??°????????´????????????????????¨??????????????°????¶????\n\t\t\t\t\tif ((x == 0) || (x == width - 1))\n\t\t\t\t\t\ttmpSum += pixels[startY + y][startX + x];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn tmpSum;\n\t}\n\n\t/**\n\t * ?¨?????????????????????????????????????????????????\n\t *\n\t * @param tmpSum\n\t */\n\tprivate static void isMaxSum(int tmpSum) {\n\t\tif (tmpSum > maxSum) {\n\t\t\tmaxSum = tmpSum;\n\t\t}\n\t}\n}"
  },
  {
    "language": "Java",
    "code": "import java.util.Scanner;\n\npublic class Main {\n\tpublic static void main (String[] args) {\n\t\tScanner scan = new Scanner(System.in);\n\t\tint N = 300;\n\t\tint n = scan.nextInt();\n\t\tint[][] p = new int[N+1][N+1];\n\t\tint[][] sp = new int[N+1][N+1];\n\t\tfor (int i = 1; i <= n; i++) {\n\t\t\tfor (int j = 1; j <= n; j++) {\n\t\t\t\tp[i][j] = scan.nextInt();\n\t\t\t}\n\t\t}\n\t\t\n\t\tint max = 0;\n\t\tfor (int x = 1; x <= 1; x++) {\n\t\t\tfor (int y = 1; y <= 1; y++) {\n\t\t\t\tfor (int i = x; i <= 4; i ++) {\n\t\t\t\t\tfor (int j = y; j <= 4; j++) {\n\t\t\t\t\t\tif(i <3 || j < 3) {\n\t\t\t\t\t\t\tsp[i][j] = sp[i-1][j] + sp[i][j-1] + p[i][j] - sp[i-1][j-1];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsp[i][j] = sp[i-1][j] + sp[i][j-1] + p[i][j] - sp[i-1][j-1] - p[i-1][j-1];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (sp[i][j] > max)  {\n\t\t\t\t\t\t\tmax = sp[i][j];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (int i = 0; i <= n; i ++) {\n\t\t\t\t\tfor (int j = 0; j <= n; j++) {\n\t\t\t\t\t\tsp[i][j] = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tSystem.out.println(max);\n\t\tscan.close();\n\t}\n}"
  },
  {
    "language": "Python",
    "code": "def solve():\n    from sys import stdin\n    from itertools import accumulate\n     \n    file_input = stdin\n     \n    N = int(file_input.readline())\n     \n    img = []\n    acc_row = []\n     \n    for line in file_input:\n        line = tuple(map(int, line.split()))\n        img.append(line)\n        acc_row.append(tuple(accumulate(line)) + (0,))\n     \n    def acc_list(col):\n        return tuple(accumulate(col)) + (0,)\n    acc_col = tuple(map(acc_list, zip(*img)))\n     \n    ans = 0\n    for i, tpl_1 in enumerate(zip(img, acc_row)):\n        img_row_i, acc_row_i = tpl_1\n        for j, tpl_2 in enumerate(zip(img[i:], acc_row[i:]), start=i):\n            img_row_j, acc_row_j = tpl_2\n             \n            if acc_row_i[j] - acc_row_i[i - 1] > ans:\n                ans = acc_row_i[j] - acc_row_i[i - 1]\n             \n            if i == j:\n                continue\n             \n            col = acc_col[0]\n            col_max = col[j] - col[i - 1]\n             \n            for acc_col_k, img_row_i_k, img_row_j_k in zip(acc_col[1:], img_row_i[1:], img_row_j[1:]):\n                col = acc_col_k[j] - acc_col_k[i - 1]\n                if col_max > 0:\n                    c_ans = col_max + col\n                    if c_ans > ans:\n                        ans = c_ans\n                else:\n                    if col > ans:\n                        ans = col\n                 \n                t_col_max = col_max + img_row_i_k + img_row_j_k\n                if t_col_max > col:\n                    col_max = t_col_max\n                else:\n                    col_max = col\n    print(ans)\n \nsolve()\n"
  },
  {
    "language": "Python",
    "code": "def solve():\n    from sys import stdin\n    from itertools import accumulate\n    \n    file_input = stdin\n    \n    N = int(file_input.readline())\n    \n    img = []\n    acc_row = []\n    \n    for line in file_input:\n        line = tuple(map(int, line.split()))\n        img.append(line)\n        acc_row.append(tuple(accumulate(line)) + (0,))\n    \n    def acc_list(col):\n        return tuple(accumulate(col)) + (0,)\n    acc_col = tuple(map(acc_list, zip(*img)))\n    \n    ans = 0\n    for i, tpl_1 in enumerate(zip(img, acc_row)):\n        img_row_i, acc_row_i = tpl_1\n        for j, tpl_2 in enumerate(zip(img[i:], acc_row[i:]), start=i):\n            img_row_j, acc_row_j = tpl_2\n            \n            if acc_row_i[j] - acc_row_i[i - 1] > ans:\n                ans = acc_row_i[j] - acc_row_i[i - 1]\n            \n            if i == j:\n                continue\n            \n            col = acc_col[0]\n            col_max = col[j] - col[i - 1]\n            \n            for acc_col_k, img_row_i_k, img_row_j_k in zip(acc_col[1:], img_row_i[1:], img_row_j[1:]):\n                col = acc_col_k[j] - acc_col_k[i - 1]\n                if col_max > 0:\n                    c_ans = col_max + col\n                    if c_ans > ans:\n                        ans = c_ans\n                else:\n                    if col > ans:\n                        ans = col\n                \n                t_col_max = col_max + img_row_i_k + img_row_j_k\n                if t_col_max > col:\n                    col_max = t_col_max\n                else:\n                    col_max = col\n    print(ans)\n\nsolve()\n"
  },
  {
    "language": "Python",
    "code": "from sys import stdin\nfrom itertools import accumulate\n\ndef solve():\n    file_input = stdin\n    \n    N = int(file_input.readline())\n    G = tuple(tuple(map(int, line.split())) for line in file_input)\n    \n    # accumulated rows\n    ar = ((0,) + tuple(accumulate(line)) for line in G)\n    \n    # accumulated columns\n    ac = ((0,) + tuple(accumulate(line)) for line in zip(*G))\n    ac_1 = next(ac)\n    ac = tuple(zip(*ac))\n    \n    ans = 0\n    for i, t1 in enumerate(zip(G, ar, ac, ac_1)):\n        G_i, ar_i, ac_i, ac_1i = t1\n        ar_ii = ar_i[i]\n        for j, t2 in enumerate(zip(G[i:], ar_i[i+1:], ac[i+1:], ac_1[i+1:]), start=i):\n            G_j, ar_ij, ac_j, ac_1j = t2\n            if ar_ij - ar_ii > ans:\n                ans = ar_ij - ar_ii\n                \n            if i == j:\n                continue\n            \n            col_max = ac_1j - ac_1i\n            \n            for ac_jk, ac_ik, G_ik, G_jk in zip(ac_j, ac_i, G_i[1:], G_j[1:]):\n                col = ac_jk - ac_ik\n                \n                if col_max > 0:\n                    c_ans = col_max + col\n                    if c_ans > ans:\n                        ans = c_ans\n                else:\n                    if col > ans:\n                        ans = col\n                \n                t_col_max = col_max + G_ik + G_jk\n                if t_col_max > col:\n                    col_max = t_col_max\n                else:\n                    col_max = col\n    print(ans)\n\nsolve()\n"
  },
  {
    "language": "Python",
    "code": "import sys\ndef main():\n    f = sys.stdin\n\n    n = int(f.readline())\n    p = [list(map(int, line.split())) for line in f]\n\n    row = [[0 for j in range(n + 1)] for i in range(n)]\n    col = [[0 for j in range(n)] for i in range(n + 1)]\n\n    for i in range(n):\n        for j in range(n):\n            row[i][j + 1] = row[i][j] + p[i][j]\n            col[i + 1][j] = col[i][j] + p[i][j]\n\n    frames = []\n    \n    # ?°´??????????¨???? \n    for i in range(n):\n        now = 0\n        for j in range(n):\n            now += p[i][j]\n            frames.append(now)\n            if now < 0:\n                now = 0\n    \n    for u in range(n):\n        for d in range(u + 1,n):\n            verticals = [col[d + 1][i] - col[u][i] for i in range(n)]\n            \n            l_c = [0, verticals[0]]\n            \n            for pu,pd,v in zip(p[u][1:],p[d][1:],verticals[1:]):\n                l_c.append(max(l_c[-1] + pu + pd, v))\n                \n            frames.extend(v1 + v2 for v1,v2 in zip(l_c,verticals))\n        frames = [max(frames)] \n    print(max(frames))\nmain()"
  },
  {
    "language": "Python",
    "code": "def solve():\n    file_input = stdin\n    \n    N = int(file_input.readline())\n    img = tuple(tuple(map(int, line.split())) for line in file_input)\n    \n    acc_row = (tuple(accumulate(line)) + (0,) for line in img)\n    acc_col = tuple(tuple(accumulate(line)) + (0,) for line in zip(*img))\n    \n    ans = 0\n    for i, tpl_1 in enumerate(zip(img, acc_row)):\n        img_i, acc_row_i = tpl_1\n        for j, img_j in enumerate(img[i:], start=i):\n            if acc_row_i[j] - acc_row_i[i - 1] > ans:\n                ans = acc_row_i[j] - acc_row_i[i - 1]\n                \n            if i == j:\n                continue\n            \n            col = acc_col[0]\n            col_max = col[j] - col[i - 1]\n            \n            for acc_col_k, img_i_k, img_j_k in zip(acc_col[1:], img_i[1:], img_j[1:]):\n                col = acc_col_k[j] - acc_col_k[i - 1]\n                \n                if col_max > 0:\n                    c_ans = col_max + col\n                    if c_ans > ans:\n                        ans = c_ans\n                else:\n                    if col > ans:\n                        ans = col\n                \n                t_col_max = col_max + img_i_k + img_j_k\n                if t_col_max > col:\n                    col_max = t_col_max\n                else:\n                    col_max = col\n    print(ans)\n\nsolve()\n"
  },
  {
    "language": "Python",
    "code": "def solve():\n    from sys import stdin\n    from itertools import accumulate\n     \n    file_input = stdin\n     \n    N = int(file_input.readline())\n     \n    img = []\n    acc_row = []\n     \n    for line in file_input:\n        line = tuple(map(int, line.split()))\n        img.append(line)\n        acc_row.append(tuple(accumulate(line)) + (0,))\n    img = tuple(img)\n    acc_row = tuple(acc_row)\n     \n    def acc_list(col):\n        return tuple(accumulate(col)) + (0,)\n    acc_col = tuple(map(acc_list, zip(*img)))\n     \n    ans = 0\n    for i, tpl_1 in enumerate(zip(img, acc_row)):\n        img_row_i, acc_row_i = tpl_1\n        for j, tpl_2 in enumerate(zip(img[i:], acc_row[i:]), start=i):\n            img_row_j, acc_row_j = tpl_2\n             \n            if acc_row_i[j] - acc_row_i[i - 1] > ans:\n                ans = acc_row_i[j] - acc_row_i[i - 1]\n             \n            if i == j:\n                continue\n             \n            col = acc_col[0]\n            col_max = col[j] - col[i - 1]\n             \n            for acc_col_k, img_row_i_k, img_row_j_k in zip(acc_col[1:], img_row_i[1:], img_row_j[1:]):\n                col = acc_col_k[j] - acc_col_k[i - 1]\n                if col_max > 0:\n                    c_ans = col_max + col\n                    if c_ans > ans:\n                        ans = c_ans\n                else:\n                    if col > ans:\n                        ans = col\n                 \n                t_col_max = col_max + img_row_i_k + img_row_j_k\n                if t_col_max > col:\n                    col_max = t_col_max\n                else:\n                    col_max = col\n    print(ans)\n \nsolve()\n"
  },
  {
    "language": "Python",
    "code": "from sys import stdin\nfrom itertools import accumulate\n\ndef solve():\n    file_input = stdin\n    \n    N = int(file_input.readline())\n    G = tuple(tuple(map(int, line.split())) for line in file_input)\n    \n    # accumulated rows\n    ar = ((0,) + tuple(accumulate(line)) for line in G)\n    \n    # accumulated columns\n    ac = ((0,) + tuple(accumulate(line)) for line in zip(*G))\n    ac_1 = next(ac)\n    ac = tuple(zip(*ac))\n    \n    ans = 0\n    for i, t1 in enumerate(zip(G, ar, ac, ac_1)):\n        G_i, ar_i, ac_i, ac_1i = t1\n        ar_ii = ar_i[i]\n        for j, t2 in enumerate(zip(G[i:], ar_i[i+1:], ac[i+1:], ac_1[i+1:]), start=i):\n            G_j, ar_ij, ac_j, ac_1j = t2\n            if ar_ij - ar_ii > ans:\n                ans = ar_ij - ar_ii\n                \n            if i == j:\n                continue\n            \n            col_max = ac_1j - ac_1i\n            \n            for ac_jk, ac_ik, G_ik, G_jk in zip(ac_j, ac_i, G_i[1:], G_j[1:]):\n                col = ac_jk - ac_ik\n                \n                if col_max > 0:\n                    c_ans = col_max + col\n                    if c_ans > ans:\n                        ans = c_ans\n                else:\n                    if col > ans:\n                        ans = col\n                \n                t_col_max = col_max + G_ik + G_jk\n                if t_col_max > col:\n                    col_max = t_col_max\n                else:\n                    col_max = col\n    print(ans)\n\nsolve()\n"
  },
  {
    "language": "Python",
    "code": "from sys import stdin\nfrom itertools import accumulate\n\ndef solve():\n    file_input = stdin\n    \n    N = int(file_input.readline())\n    img = tuple(tuple(map(int, line.split())) for line in file_input)\n    \n    acc_row = (tuple(accumulate(line)) + (0,) for line in img)\n    acc_col = tuple(tuple(accumulate(line)) + (0,) for line in zip(*img))\n    \n    ans = 0\n    for i, tpl_1 in enumerate(zip(img, acc_row)):\n        img_i, acc_row_i = tpl_1\n        for j, img_j in enumerate(img[i:], start=i):\n            if acc_row_i[j] - acc_row_i[i - 1] > ans:\n                ans = acc_row_i[j] - acc_row_i[i - 1]\n                \n            if i == j:\n                continue\n            \n            col = acc_col[0]\n            col_max = col[j] - col[i - 1]\n            \n            for acc_col_k, img_i_k, img_j_k in zip(acc_col[1:], img_i[1:], img_j[1:]):\n                col = acc_col_k[j] - acc_col_k[i - 1]\n                \n                if col_max > 0:\n                    c_ans = col_max + col\n                    if c_ans > ans:\n                        ans = c_ans\n                else:\n                    if col > ans:\n                        ans = col\n                \n                t_col_max = col_max + img_i_k + img_j_k\n                if t_col_max > col:\n                    col_max = t_col_max\n                else:\n                    col_max = col\n    print(ans)\n\nsolve()\n"
  },
  {
    "language": "Python",
    "code": "import sys\ndef main():\n    f = sys.stdin\n\n    n = int(f.readline())\n    p = [list(map(int, line.split())) for line in f]\n\n    row = [[0 for j in range(n + 1)] for i in range(n)]\n    col = [[0 for j in range(n)] for i in range(n + 1)]\n\n    for i in range(n):\n        for j in range(n):\n            row[i][j + 1] = row[i][j] + p[i][j]\n            col[i + 1][j] = col[i][j] + p[i][j]\n\n    frames = []\n    f_append = frames.append\n    horizontal_lines =(row[u][r] - row[u][l] for u in range(n) for l in range(n) for r in range(l + 1,n + 1))\n    f_append(max(horizontal_lines))\n    \n    for u in range(n):\n        for d in range(u + 1,n):\n            l_c = col[d + 1][0] - col[u][0]\n            f_append(l_c)\n            for r in range(1,n):\n                r_vertical = col[d + 1][r] - col[u][r]\n                f_append(l_c + r_vertical)\n                l_c = max(l_c + p[u][r] + p[d][r], r_vertical)\n    print(max(frames))\nmain()"
  },
  {
    "language": "Python",
    "code": "def solve():\n    from sys import stdin\n    from itertools import accumulate\n    \n    file_input = stdin\n    \n    N = int(file_input.readline())\n    \n    img = []\n    acc_row = []\n    \n    for line in file_input:\n        line = list(map(int, line.split()))\n        img.append(line)\n        acc_row.append(list(accumulate(line)) + [0])\n    \n    def acc_list(col):\n        return list(accumulate(col)) + [0]\n    acc_col = list(map(acc_list, zip(*img)))\n    \n    ans = 0\n    for i, tpl_1 in enumerate(zip(img, acc_row)):\n        img_row_i, acc_row_i = tpl_1\n        for j, tpl_2 in enumerate(zip(img[i:], acc_row[i:]), start=i):\n            img_row_j, acc_row_j = tpl_2\n            \n            single_row = acc_row_i[j] - acc_row_i[i - 1]\n            if single_row > ans:\n                ans = single_row\n            \n            if i == j:\n                continue\n            \n            col = acc_col[0]\n            col_max = col[j] - col[i - 1]\n            \n            for k, acc_col_k in enumerate(acc_col[1:], start=1):\n                col = acc_col_k[j] - acc_col_k[i - 1]\n                if col_max > 0:\n                    c_ans = col_max + col\n                    if c_ans > ans:\n                        ans = c_ans\n                else:\n                    if col > ans:\n                        ans = col\n                \n                t_col_max = col_max + img_row_i[k] + img_row_j[k]\n                if t_col_max > col:\n                    col_max = t_col_max\n                else:\n                    col_max = col\n    print(ans)\n\nsolve()\n"
  },
  {
    "language": "Python",
    "code": "import sys\n#@profile\ndef main():\n    f = sys.stdin\n\n    n = int(f.readline())\n    p = [list(map(int, line.split())) for line in f]\n\n    row = [[0 for j in range(n + 1)] for i in range(n)]\n    col = [[0 for j in range(n)] for i in range(n + 1)]\n\n    for i in range(n):\n        for j in range(n):\n            row[i][j + 1] = row[i][j] + p[i][j]\n            col[i + 1][j] = col[i][j] + p[i][j]\n\n    frames = []\n    f_append = frames.append\n    horizontal_lines =(row[u][r] - row[u][l] for u in range(n) for l in range(n) for r in range(l + 1,n + 1))\n    f_append(max(horizontal_lines))\n    \n    for u in range(n):\n        for d in range(u + 1,n):\n            l_c = col[d + 1][0] - col[u][0]\n            f_append(l_c)\n            for r in range(1,n):\n                r_vertical = col[d + 1][r] - col[u][r]\n                f_append(l_c + r_vertical)\n                l_c = max(l_c + p[u][r] + p[d][r], r_vertical)\n        frames = [max(frames)]\n    print(max(frames))\nmain()"
  },
  {
    "language": "Python",
    "code": "def solve():\n    file_input = stdin\n    \n    N = int(file_input.readline())\n    img = tuple(tuple(map(int, line.split())) for line in file_input)\n    \n    acc_row = (tuple(accumulate(line)) + (0,) for line in img)\n    acc_col = tuple(tuple(accumulate(line)) + (0,) for line in zip(*img))\n    \n    ans = 0\n    for i, tpl_1 in enumerate(zip(img, acc_row)):\n        img_i, acc_row_i = tpl_1\n        for j, img_j in enumerate(img[i:], start=i):\n            if acc_row_i[j] - acc_row_i[i - 1] > ans:\n                ans = acc_row_i[j] - acc_row_i[i - 1]\n                \n            if i == j:\n                continue\n            \n            col = acc_col[0]\n            col_max = col[j] - col[i - 1]\n            \n            for acc_col_k, img_i_k, img_j_k in zip(acc_col[1:], img_i[1:], img_j[1:]):\n                col = acc_col_k[j] - acc_col_k[i - 1]\n                \n                if col_max > 0:\n                    c_ans = col_max + col\n                    if c_ans > ans:\n                        ans = c_ans\n                else:\n                    if col > ans:\n                        ans = col\n                \n                t_col_max = col_max + img_i_k + img_j_k\n                if t_col_max > col:\n                    col_max = t_col_max\n                else:\n                    col_max = col\n    print(ans)\n\nsolve()\n"
  },
  {
    "language": "Python",
    "code": "from sys import stdin\nfrom itertools import accumulate\n\ndef solve():\n    file_input = stdin\n    \n    N = int(file_input.readline())\n    img = tuple(tuple(map(int, line.split())) for line in file_input)\n    \n    acc_row = (tuple(accumulate(line)) + (0,) for line in img)\n    \n    acc_col = (tuple(accumulate(line)) + (0,) for line in zip(*img))\n    acc_col_1 = next(acc_col)\n    acc_col = tuple(zip(*acc_col))\n    \n    ans = 0\n    for i, tpl_1 in enumerate(zip(img, acc_row)):\n        img_i, acc_row_i = tpl_1\n        for j, img_j in enumerate(img[i:], start=i):\n            if acc_row_i[j] - acc_row_i[i - 1] > ans:\n                ans = acc_row_i[j] - acc_row_i[i - 1]\n                \n            if i == j:\n                continue\n            \n            col_max = acc_col_1[j] - acc_col_1[i - 1]\n            \n            for acc_col_j_k, acc_col_i_k, img_i_k, img_j_k in zip(acc_col[j], acc_col[i - 1], img_i[1:], img_j[1:]):\n                col = acc_col_j_k - acc_col_i_k\n                \n                if col_max > 0:\n                    c_ans = col_max + col\n                    if c_ans > ans:\n                        ans = c_ans\n                else:\n                    if col > ans:\n                        ans = col\n                \n                t_col_max = col_max + img_i_k + img_j_k\n                if t_col_max > col:\n                    col_max = t_col_max\n                else:\n                    col_max = col\n    print(ans)\n\nsolve()\n"
  },
  {
    "language": "Python",
    "code": "import sys\ndef main():\n    f = sys.stdin\n\n    n = int(f.readline())\n    p = [list(map(int, line.split())) for line in f]\n\n    row = [[0 for j in range(n + 1)] for i in range(n)]\n    col = [[0 for j in range(n)] for i in range(n + 1)]\n\n    for i in range(n):\n        for j in range(n):\n            row[i][j + 1] = row[i][j] + p[i][j]\n            col[i + 1][j] = col[i][j] + p[i][j]\n\n    frames = []\n    horizontal_lines =(row[u][r] - row[u][l] for u in range(n) for l in range(n) for r in range(l + 1,n + 1))\n    frames.append(max(horizontal_lines))\n    \n    for u in range(n):\n        for d in range(u + 1,n):\n            l_c = col[d + 1][0] - col[u][0]\n            frames.append(l_c)\n            for r in range(1,n):\n                r_vertical = col[d + 1][r] - col[u][r]\n                frames.append(l_c + r_vertical)\n                l_c = max(l_c + p[u][r] + p[d][r], r_vertical)\n        frames = [max(frames)]\n    print(max(frames))\nmain()"
  },
  {
    "language": "Python",
    "code": "from sys import stdin\nfrom itertools import accumulate\n\ndef solve():\n    N = int(stdin.readline())\n    img = tuple(tuple(map(int, line.split())) for line in stdin)\n    \n    acc_row = tuple(tuple(accumulate(line)) + (0,) for line in img)\n    acc_col = tuple(tuple(accumulate(line)) + (0,) for line in zip(*img))\n    \n    ans = 0\n    for i, tpl_1 in enumerate(zip(img, acc_row)):\n        img_i, acc_row_i = tpl_1\n        for j, tpl_2 in enumerate(zip(img[i:], acc_row[i:]), start=i):\n            img_j, acc_row_j = tpl_2\n            \n            if acc_row_i[j] - acc_row_i[i - 1] > ans:\n                ans = acc_row_i[j] - acc_row_i[i - 1]\n                \n            if i == j:\n                continue\n            \n            col = acc_col[0]\n            col_max = col[j] - col[i - 1]\n            \n            for acc_col_k, img_i_k, img_j_k in zip(acc_col[1:], img_i[1:], img_j[1:]):\n                col = acc_col_k[j] - acc_col_k[i - 1]\n                \n                if col_max > 0:\n                    c_ans = col_max + col\n                    if c_ans > ans:\n                        ans = c_ans\n                else:\n                    if col > ans:\n                        ans = col\n                \n                t_col_max = col_max + img_i_k + img_j_k\n                if t_col_max > col:\n                    col_max = t_col_max\n                else:\n                    col_max = col\n    print(ans)\n\nsolve()\n"
  },
  {
    "language": "Python",
    "code": "from sys import stdin\nfrom itertools import accumulate\n\ndef solve():\n    file_input = stdin\n    \n    N = int(file_input.readline())\n    G = tuple(tuple(map(int, line.split())) for line in file_input)\n    \n    # accumulated rows\n    ar = ((0,) + tuple(accumulate(line)) for line in G)\n    \n    # accumulated columns\n    ac = ((0,) + tuple(accumulate(line)) for line in zip(*G))\n    ac_1 = next(ac)\n    ac = tuple(zip(*ac))\n    \n    ans = 0\n    for i, t1 in enumerate(zip(G, ar, ac, ac_1)):\n        G_i, ar_i, ac_i, ac_1i = t1\n        ar_ii = ar_i[i]\n        for j, t2 in enumerate(zip(G[i:], ar_i[i+1:], ac[i+1:], ac_1[i+1:])):\n            G_j, ar_ij, ac_j, ac_1j = t2\n            if ar_ij - ar_ii > ans:\n                ans = ar_ij - ar_ii\n                \n            if i == j:\n                continue\n            \n            col_max = ac_1j - ac_1i\n            \n            for ac_jk, ac_ik, G_ik, G_jk in zip(ac_j, ac_i, G_i[1:], G_j[1:]):\n                col = ac_jk - ac_ik\n                \n                if col_max > 0:\n                    c_ans = col_max + col\n                    if c_ans > ans:\n                        ans = c_ans\n                else:\n                    if col > ans:\n                        ans = col\n                \n                t_col_max = col_max + G_ik + G_jk\n                if t_col_max > col:\n                    col_max = t_col_max\n                else:\n                    col_max = col\n    print(ans)\n\nsolve()\n"
  },
  {
    "language": "Python",
    "code": "import sys\nf = sys.stdin\n\nn = int(f.readline())\np = [list(map(int, line.split())) for line in f]\n\nrow = [[0 for j in range(n + 1)] for i in range(n)]\ncol = [[0 for j in range(n)] for i in range(n + 1)]\n\nfor i in range(n):\n    for j in range(n):\n        row[i][j + 1] = row[i][j] + p[i][j]\n        col[i + 1][j] = col[i][j] + p[i][j]\n\nmax_flame = -float('inf')\nfor u in range(n):\n    horizontal_lines =(row[u][r + 1] - row[u][l] for l in range(n) for r in range(l,n))\n    max_flame = max(max_flame, max(horizontal_lines))\n    for d in range(u + 1,n):\n        l_c = col[d + 1][0] - col[u][0] # ?????§??????????????????C???????????¨?????¨??????????£??????\\???????????????\n        max_flame = max(max_flame,l_c)\n        for r in range(1,n):\n            r_vertical = col[d + 1][r] - col[u][r]\n            max_flame = max(max_flame, l_c + r_vertical)\n            l_c = max(l_c, l_c + p[u][r] + p[d][r])\nprint(max_flame)"
  },
  {
    "language": "Python",
    "code": "from sys import stdin\nfrom itertools import accumulate\n\ndef solve():\n    file_input = stdin\n     \n    N = int(file_input.readline())\n    img = tuple(tuple(map(int, line.split())) for line in file_input)\n    \n    acc_row = tuple(tuple(accumulate(line)) + (0,) for line in img)\n    acc_col = tuple(tuple(accumulate(line)) + (0,) for line in zip(*img))\n    \n    ans = 0\n    for i, tpl_1 in enumerate(zip(img, acc_row)):\n        img_i, acc_row_i = tpl_1\n        for j, tpl_2 in enumerate(zip(img[i:], acc_row[i:]), start=i):\n            img_j, acc_row_j = tpl_2\n            \n            if acc_row_i[j] - acc_row_i[i - 1] > ans:\n                ans = acc_row_i[j] - acc_row_i[i - 1]\n                \n            if i == j:\n                continue\n            \n            col = acc_col[0]\n            col_max = col[j] - col[i - 1]\n            \n            for acc_col_k, img_i_k, img_j_k in zip(acc_col[1:], img_i[1:], img_j[1:]):\n                col = acc_col_k[j] - acc_col_k[i - 1]\n                \n                if col_max > 0:\n                    c_ans = col_max + col\n                    if c_ans > ans:\n                        ans = c_ans\n                else:\n                    if col > ans:\n                        ans = col\n                \n                t_col_max = col_max + img_i_k + img_j_k\n                if t_col_max > col:\n                    col_max = t_col_max\n                else:\n                    col_max = col\n    print(ans)\n\nsolve()\n"
  },
  {
    "language": "Python",
    "code": "import sys\nf = sys.stdin\n\nn = int(f.readline())\np = [list(map(int, line.split())) for line in f]\n\nrow = [[0 for j in range(n + 1)] for i in range(n)]\ncol = [[0 for j in range(n)] for i in range(n + 1)]\n\nfor i in range(n):\n    for j in range(n):\n        row[i][j + 1] = row[i][j] + p[i][j]\n        col[i + 1][j] = col[i][j] + p[i][j]\n\nmax_flame = 0\nfor u in range(n):\n    horizontal_lines =(row[u][r + 1] - row[u][l] for l in range(n) for r in range(l,n))\n    max_flame = max(max_flame, max(horizontal_lines))\n    for d in range(u + 1,n):\n        l_c = col[d + 1][0] - col[u][0] # ?????§??????????????????C???????????¨?????¨??????????£??????\\???????????????\n        max_flame = max(max_flame,l_c)\n        for r in range(1,n):\n            r_vertical = col[d + 1][r] - col[u][r]\n            max_flame = max(max_flame, l_c + r_vertical)\n            l_c = max(l_c, l_c + p[u][r] + p[d][r])\nprint(max_flame)"
  },
  {
    "language": "Python",
    "code": "from sys import stdin\nfrom itertools import accumulate\n\ndef solve():\n    file_input = stdin\n    \n    N = int(file_input.readline())\n    G = tuple(tuple(map(int, line.split())) for line in file_input)\n    G1 = tuple(t[1:] for t in G)\n    \n    # accumulated rows\n    ar = ((0,) + tuple(accumulate(line)) for line in G)\n    \n    # accumulated columns\n    ac = ((0,) + tuple(accumulate(line)) for line in zip(*G))\n    ac_1 = next(ac)\n    ac = tuple(zip(*ac))\n    \n    ans = 0\n    for i, t1 in enumerate(zip(G1, ar, ac, ac_1)):\n        G_i, ar_i, ac_i, ac_1i = t1\n        ar_ii = ar_i[i]\n        for j, t2 in enumerate(zip(G1[i:], ar_i[i+1:], ac[i+1:], ac_1[i+1:]), start=i):\n            G_j, ar_ij, ac_j, ac_1j = t2\n            single_row = ar_ij - ar_ii\n            if single_row > ans:\n                ans = single_row\n                \n            if i == j:\n                continue\n            \n            col_max = ac_1j - ac_1i\n            \n            for ac_jk, ac_ik, G_ik, G_jk in zip(ac_j, ac_i, G_i, G_j):\n                col = ac_jk - ac_ik\n                \n                if col_max > 0:\n                    c_ans = col_max + col\n                    if c_ans > ans:\n                        ans = c_ans\n                else:\n                    if col > ans:\n                        ans = col\n                \n                t_col_max = col_max + G_ik + G_jk\n                if t_col_max > col:\n                    col_max = t_col_max\n                else:\n                    col_max = col\n    print(ans)\n\nsolve()\n"
  },
  {
    "language": "Python",
    "code": "def solve():\n    from sys import stdin\n    from itertools import accumulate\n    \n    file_input = stdin\n    \n    N = int(file_input.readline())\n    \n    img = []\n    acc_row = []\n    \n    for line in file_input:\n        line = list(map(int, line.split()))\n        img.append(line)\n        acc_row.append(list(accumulate(line)) + [0])\n    \n    def acc_list(col):\n        return list(accumulate(col)) + [0]\n    acc_col = list(map(acc_list, zip(*img)))\n    \n    ans = 0\n    for i, tpl_1 in enumerate(zip(img, acc_row)):\n        img_row_i, acc_row_i = tpl_1\n        for j, tpl_2 in enumerate(zip(img[i:], acc_row[i:]), start=i):\n            img_row_j, acc_row_j = tpl_2\n            \n            single_row = acc_row_i[j] - acc_row_i[i - 1]\n            if single_row > ans:\n                ans = single_row\n            \n            if i == j:\n                continue\n            \n            col = acc_col[0]\n            col_max = col[j] - col[i - 1]\n            \n            for k, acc_col_k in enumerate(acc_col[1:], start=1):\n                col = acc_col_k[j] - acc_col_k[i - 1]\n                if col_max > 0:\n                    c_ans = col_max + col\n                    if c_ans > ans:\n                        ans = c_ans\n                else:\n                    if col > ans:\n                        ans = col\n                \n                c_col_max = col_max + img_row_i[k] + img_row_j[k]\n                if c_col_max > col_max:\n                    col_max = c_col_max\n    print(ans)\n\nsolve()\n"
  },
  {
    "language": "Python",
    "code": "import sys  \nfrom itertools import accumulate\ndef main():\n    f = sys.stdin\n    \n    n = int(f.readline())\n    p = [list(map(int, line.split())) for line in f]\n    \n    col = list(zip(*list([0] + list(accumulate(pi)) for pi in zip(*p))))\n    \n    \n    frames = []\n    \n    # ?°´??????????¨???? \n    for pi in p:\n        now = 0\n        for pij in pi:\n            now += pij\n            frames.append(now)\n            if now < 0:\n                now = 0\n                \n    for u in range(n):\n        for d in range(u + 1,n):\n            verticals = [cold - colu for cold,colu in zip(col[d + 1],col[u])]\n            l_c = [0, verticals[0]]\n            for pu,pd,v in zip(p[u][1:],p[d][1:],verticals[1:]):\n                l_c.append(max(l_c[-1] + pu + pd, v))\n            frames.append(max(map(sum, zip(l_c,verticals))))\n        frames = [max(frames)]\n    print(max(frames))\nmain()"
  },
  {
    "language": "Python",
    "code": "from sys import stdin\nfrom itertools import accumulate\n\ndef solve():\n    file_input = stdin\n    \n    N = int(file_input.readline())\n    img = tuple(tuple(map(int, line.split())) for line in file_input)\n    \n    acc_row = (tuple(accumulate(line)) + (0,) for line in img)\n    acc_col = tuple(tuple(accumulate(line)) + (0,) for line in zip(*img))\n    \n    ans = 0\n    for i, tpl_1 in enumerate(zip(img, acc_row)):\n        img_i, acc_row_i = tpl_1\n        for j, img_j in enumerate(img[i:], start=i):\n            if acc_row_i[j] - acc_row_i[i - 1] > ans:\n                ans = acc_row_i[j] - acc_row_i[i - 1]\n                \n            if i == j:\n                continue\n            \n            col = acc_col[0]\n            col_max = col[j] - col[i - 1]\n            \n            for acc_col_k, img_i_k, img_j_k in zip(acc_col[1:], img_i[1:], img_j[1:]):\n                col = acc_col_k[j] - acc_col_k[i - 1]\n                \n                if col_max > 0:\n                    c_ans = col_max + col\n                    if c_ans > ans:\n                        ans = c_ans\n                else:\n                    if col > ans:\n                        ans = col\n                \n                t_col_max = col_max + img_i_k + img_j_k\n                if t_col_max > col:\n                    col_max = t_col_max\n                else:\n                    col_max = col\n    print(ans)\n\nsolve()\n"
  },
  {
    "language": "Python",
    "code": "import sys\nf = sys.stdin\n\nn = int(f.readline())\np = [list(map(int, line.split())) for line in f]\n\nrow = [[0 for j in range(n + 1)] for i in range(n)]\ncol = [[0 for j in range(n)] for i in range(n + 1)]\n\nfor i in range(n):\n    for j in range(n):\n        row[i][j + 1] = row[i][j] + p[i][j]\n        col[i + 1][j] = col[i][j] + p[i][j]\n\nmax_flame = -float('inf')\nfor u in range(n):\n    horizontal_lines =(row[u][r + 1] - row[u][l] for l in range(n) for r in range(l,n))\n    max_flame = max(max_flame, max(horizontal_lines))\n    for d in range(u + 1,n):\n        l_c = col[d + 1][0] - col[u][0] # ?????§??????????????????C???????????¨?????¨??????????£??????\\???????????????\n        max_flame = max(max_flame,l_c)\n        for r in range(1,n):\n            r_vertical = col[d + 1][r] - col[u][r]\n            max_flame = max(max_flame, l_c + r_vertical)\n            l_c = max(l_c + p[u][r] + p[d][r], r_vertical)\nprint(max_flame)"
  },
  {
    "language": "Python",
    "code": "from sys import stdin\nfrom itertools import accumulate\n\ndef solve():\n    file_input = stdin\n    \n    N = int(file_input.readline())\n    img = tuple(tuple(map(int, line.split())) for line in file_input)\n    \n    acc_row = tuple(tuple(accumulate(line)) + (0,) for line in img)\n    acc_col = tuple(tuple(accumulate(line)) + (0,) for line in zip(*img))\n    \n    ans = 0\n    for i, tpl_1 in enumerate(zip(img, acc_row)):\n        img_i, acc_row_i = tpl_1\n        for j, img_j in enumerate(img[i:], start=i):\n            if acc_row_i[j] - acc_row_i[i - 1] > ans:\n                ans = acc_row_i[j] - acc_row_i[i - 1]\n                \n            if i == j:\n                continue\n            \n            col = acc_col[0]\n            col_max = col[j] - col[i - 1]\n            \n            for acc_col_k, img_i_k, img_j_k in zip(acc_col[1:], img_i[1:], img_j[1:]):\n                col = acc_col_k[j] - acc_col_k[i - 1]\n                \n                if col_max > 0:\n                    c_ans = col_max + col\n                    if c_ans > ans:\n                        ans = c_ans\n                else:\n                    if col > ans:\n                        ans = col\n                \n                t_col_max = col_max + img_i_k + img_j_k\n                if t_col_max > col:\n                    col_max = t_col_max\n                else:\n                    col_max = col\n    print(ans)\n\nsolve()\n"
  },
  {
    "language": "Python",
    "code": "from sys import stdin\nfrom itertools import accumulate\n\ndef solve():\n    file_input = stdin\n     \n    N = int(file_input.readline())\n    img = tuple(tuple(map(int, line.split())) for line in file_input)\n    \n    acc_row = tuple(tuple(accumulate(line)) + (0,) for line in img)\n    acc_col = tuple(tuple(accumulate(line)) + (0,) for line in zip(*img))\n    \n    ans = 0\n    for i, tpl_1 in enumerate(zip(img, acc_row)):\n        img_i, acc_row_i = tpl_1\n        for j, tpl_2 in enumerate(zip(img[i:], acc_row[i:]), start=i):\n            img_j, acc_row_j = tpl_2\n            \n            if acc_row_i[j] - acc_row_i[i - 1] > ans:\n                ans = acc_row_i[j] - acc_row_i[i - 1]\n                \n            if i == j:\n                continue\n            \n            col = acc_col[0]\n            col_max = col[j] - col[i - 1]\n            \n            for acc_col_k, img_i_k, img_j_k in zip(acc_col[1:], img_i[1:], img_j[1:]):\n                col = acc_col_k[j] - acc_col_k[i - 1]\n                if col_max > 0:\n                    c_ans = col_max + col\n                    if c_ans > ans:\n                        ans = c_ans\n                else:\n                    if col > ans:\n                        ans = col\n                \n                t_col_max = col_max + img_i_k + img_j_k\n                if t_col_max > col:\n                    col_max = t_col_max\n                else:\n                    col_max = col\n    print(ans)\n\nsolve()\n"
  }
]