Snuke and Ciel went to a stationery store where they used graph paper. Snuke painted certain cells red in a way that they form a 4-connected component, while Ciel painted certain cells blue, also forming a 4-connected component. They then overlaid their papers such that where the red and blue cells overlapped, the cells appeared purple. You are given a matrix that represents the positions of these purple cells, and you need to find and output a consistent pair of sets of positions for the red and blue cells. The output should maintain the same format as the input, showing '#' for red and blue cells and '.' for empty cells. Constraints ensure the outermost cells are not purple.